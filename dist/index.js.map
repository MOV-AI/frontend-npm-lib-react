{"version":3,"sources":["webpack://MovaiReact/webpack/universalModuleDefinition","webpack://MovaiReact/webpack/bootstrap","webpack://MovaiReact/external \"react\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/defineProperty\"","webpack://MovaiReact/external \"@babylonjs/core\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/assertThisInitialized\"","webpack://MovaiReact/external \"prop-types\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/getPrototypeOf\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/classCallCheck\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/createClass\"","webpack://MovaiReact/external \"monet\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/possibleConstructorReturn\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/extends\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/inherits\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/get\"","webpack://MovaiReact/external \"mov-fe-lib-core\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/classPrivateFieldGet\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/toConsumableArray\"","webpack://MovaiReact/external \"@material-ui/core/styles\"","webpack://MovaiReact/external \"@babel/runtime/regenerator\"","webpack://MovaiReact/external \"@material-ui/core\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/slicedToArray\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/asyncToGenerator\"","webpack://MovaiReact/external \"@material-ui/core/MenuItem\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/objectWithoutProperties\"","webpack://MovaiReact/external \"@material-ui/core/IconButton\"","webpack://MovaiReact/external \"@material-ui/core/Typography\"","webpack://MovaiReact/external \"@material-ui/core/FormControl\"","webpack://MovaiReact/external \"lodash/get\"","webpack://MovaiReact/external \"@material-ui/core/Input\"","webpack://MovaiReact/external \"@material-ui/core/Menu\"","webpack://MovaiReact/external \"@material-ui/icons/Search\"","webpack://MovaiReact/external \"lodash/isEqual\"","webpack://MovaiReact/external \"@material-ui/core/Select\"","webpack://MovaiReact/external \"clsx\"","webpack://MovaiReact/external \"@material-ui/core/Grid\"","webpack://MovaiReact/external \"@material-ui/icons/ChevronRight\"","webpack://MovaiReact/external \"@material-ui/core/InputLabel\"","webpack://MovaiReact/external \"@material-ui/core/Button\"","webpack://MovaiReact/external \"react-resize-detector\"","webpack://MovaiReact/external \"@material-ui/icons/Settings\"","webpack://MovaiReact/external \"@material-ui/core/colors\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/classPrivateFieldSet\"","webpack://MovaiReact/external \"react-dom\"","webpack://MovaiReact/external \"@material-ui/core/InputAdornment\"","webpack://MovaiReact/external \"@material-ui/core/ListItemText\"","webpack://MovaiReact/external \"@material-ui/core/Checkbox\"","webpack://MovaiReact/external \"@material-ui/pickers\"","webpack://MovaiReact/external \"react-virtualized\"","webpack://MovaiReact/external \"@material-ui/icons/Clear\"","webpack://MovaiReact/external \"@babylonjs/gui/2D\"","webpack://MovaiReact/external \"rbush\"","webpack://MovaiReact/external \"@material-ui/core/TableCell\"","webpack://MovaiReact/external \"@material-ui/core/Divider\"","webpack://MovaiReact/./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack://MovaiReact/./node_modules/css-loader/dist/runtime/api.js","webpack://MovaiReact/external \"@material-ui/core/Drawer\"","webpack://MovaiReact/external \"@material-ui/icons/ExpandMore\"","webpack://MovaiReact/external \"@material-ui/core/Collapse\"","webpack://MovaiReact/external \"material-table\"","webpack://MovaiReact/external \"@material-ui/icons/AddBox\"","webpack://MovaiReact/external \"@material-ui/icons/ArrowDownward\"","webpack://MovaiReact/external \"@material-ui/icons/Check\"","webpack://MovaiReact/external \"@material-ui/icons/ChevronLeft\"","webpack://MovaiReact/external \"@material-ui/icons/DeleteOutline\"","webpack://MovaiReact/external \"@material-ui/icons/Edit\"","webpack://MovaiReact/external \"@material-ui/icons/FilterList\"","webpack://MovaiReact/external \"@material-ui/icons/FirstPage\"","webpack://MovaiReact/external \"@material-ui/icons/LastPage\"","webpack://MovaiReact/external \"@material-ui/icons/Remove\"","webpack://MovaiReact/external \"@material-ui/icons/SaveAlt\"","webpack://MovaiReact/external \"@material-ui/icons/ViewColumn\"","webpack://MovaiReact/external \"@material-ui/core/Tabs\"","webpack://MovaiReact/external \"@material-ui/core/Tab\"","webpack://MovaiReact/external \"@material-ui/core/TextField\"","webpack://MovaiReact/external \"@material-ui/core/FormControlLabel\"","webpack://MovaiReact/external \"@material-ui/core/Switch\"","webpack://MovaiReact/external \"@material-ui/core/InputBase\"","webpack://MovaiReact/external \"@material-ui/core/Breadcrumbs\"","webpack://MovaiReact/external \"@material-ui/icons/NavigateNext\"","webpack://MovaiReact/external \"earcut\"","webpack://MovaiReact/external \"@babylonjs/core/Maths/math\"","webpack://MovaiReact/external \"@material-ui/core/utils\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/taggedTemplateLiteral\"","webpack://MovaiReact/external \"styled-components\"","webpack://MovaiReact/external \"@material-ui/icons/Close\"","webpack://MovaiReact/external \"@material-ui/core/styles/colorManipulator\"","webpack://MovaiReact/external \"@material-ui/icons/Label\"","webpack://MovaiReact/external \"@material-ui/core/Chip\"","webpack://MovaiReact/external \"@material-ui/icons/Add\"","webpack://MovaiReact/external \"@material-ui/icons/Today\"","webpack://MovaiReact/external \"@date-io/date-fns\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/typeof\"","webpack://MovaiReact/external \"lodash/isEmpty\"","webpack://MovaiReact/./src/Components/LoginForm/movai_red.svg","webpack://MovaiReact/external \"@material-ui/core/Paper\"","webpack://MovaiReact/external \"@material-ui/core/FormHelperText\"","webpack://MovaiReact/external \"@babylonjs/loaders\"","webpack://MovaiReact/./src/Components/Snackbar/Snackbar.css?c276","webpack://MovaiReact/./src/Components/Snackbar/Snackbar.css","webpack://MovaiReact/external \"fontsource-cabin\"","webpack://MovaiReact/external \"fontsource-roboto\"","webpack://MovaiReact/external \"fontsource-noto-sans\"","webpack://MovaiReact/./src/Components/Logs/Logs.css?4c9f","webpack://MovaiReact/./src/Components/Logs/Logs.css","webpack://MovaiReact/./src/Components/Button.js","webpack://MovaiReact/./src/Components/Modal/AbstractModal.js","webpack://MovaiReact/./src/Components/Modal/ConfirmAlertModal.js","webpack://MovaiReact/./src/Components/Drawer.js","webpack://MovaiReact/./src/Components/Collapse.js","webpack://MovaiReact/./src/Components/VerticalBar.js","webpack://MovaiReact/./src/Components/ContextMenu.js","webpack://MovaiReact/./src/Components/Table.js","webpack://MovaiReact/./src/Components/Tabs.js","webpack://MovaiReact/./src/Components/Text.js","webpack://MovaiReact/./src/Components/Toggle.js","webpack://MovaiReact/./src/Components/SearchInput.js","webpack://MovaiReact/./src/Components/Breadcrumb.js","webpack://MovaiReact/./src/Components/Viewer/BaseViewer/BaseViewer.js","webpack://MovaiReact/./src/Components/Viewer/Math/Vec2.js","webpack://MovaiReact/./src/Components/Viewer/Math/Vec3.js","webpack://MovaiReact/./src/Components/Viewer/Utils/AnnotationManager.js","webpack://MovaiReact/./src/Components/Viewer/Utils/Clipboard.js","webpack://MovaiReact/./src/Components/Viewer/NodeItem/NodeItem.js","webpack://MovaiReact/./src/Components/Viewer/Math/Mat3.js","webpack://MovaiReact/./src/Components/Viewer/Util3d/GizmoManagerBuilder.js","webpack://MovaiReact/./src/Components/Viewer/Util3d/CameraBuilder.js","webpack://MovaiReact/./src/Components/Viewer/Util3d/PositionalLightBuilder.js","webpack://MovaiReact/./src/Components/Viewer/Util3d/ReferentialBuilder.js","webpack://MovaiReact/./src/Components/Viewer/Util3d/GroundBuilder.js","webpack://MovaiReact/./src/Components/Viewer/Util3d/DirectionalLightBuilder.js","webpack://MovaiReact/./src/Components/Viewer/NodeItem/Box.js","webpack://MovaiReact/./src/Components/Viewer/Util3d/Util3d.js","webpack://MovaiReact/./src/Components/Viewer/NodeItem/GlobalRef.js","webpack://MovaiReact/./src/Components/Viewer/Actions/Action.js","webpack://MovaiReact/./src/Components/Viewer/NodeItem/AssetNodeItem.js","webpack://MovaiReact/./src/Components/Viewer/NodeItem/Map.js","webpack://MovaiReact/./src/Components/Viewer/Utils/DefaultScene.js","webpack://MovaiReact/./src/Components/Viewer/Actions/MouseKeysAction.js","webpack://MovaiReact/./src/Components/Viewer/Actions/DragObjectsAction.js","webpack://MovaiReact/./src/Components/Viewer/NodeItem/KeyPoint.js","webpack://MovaiReact/./src/Components/Viewer/Actions/AddKeyPointAction.js","webpack://MovaiReact/./src/Components/Viewer/Utils/Constants.js","webpack://MovaiReact/./src/Components/Viewer/NodeItem/BoxRegion.js","webpack://MovaiReact/./src/Components/Viewer/Actions/BoxRegionAction.js","webpack://MovaiReact/./src/Components/Viewer/NodeItem/Path.js","webpack://MovaiReact/./src/Components/Viewer/Actions/DrawPathAction.js","webpack://MovaiReact/./src/Components/Viewer/NodeItem/PolygonRegion.js","webpack://MovaiReact/./src/Components/Viewer/Actions/PolygonRegionAction.js","webpack://MovaiReact/./src/Components/Viewer/Actions/OrbitAction.js","webpack://MovaiReact/./src/Components/Viewer/Graph/Graph.js","webpack://MovaiReact/./src/Components/Viewer/Graph/GraphEmbedding.js","webpack://MovaiReact/./src/Components/Viewer/NodeItem/GraphItem.js","webpack://MovaiReact/./src/Components/Viewer/Actions/DrawGraphAction.js","webpack://MovaiReact/./src/Components/Viewer/MainView/MainViewActions.js","webpack://MovaiReact/./src/Components/Viewer/AssetsManager/MapLoader.js","webpack://MovaiReact/./src/Components/Viewer/Actions/AddMapAction.js","webpack://MovaiReact/./src/Components/Viewer/NodeItem/Robot.js","webpack://MovaiReact/./src/Components/Viewer/NodeItem/PointCloud.js","webpack://MovaiReact/./src/Components/Viewer/Utils/MeshCache.js","webpack://MovaiReact/./src/Components/Viewer/Utils/MeshLoader.js","webpack://MovaiReact/./src/Components/Viewer/Actions/RobotAction.js","webpack://MovaiReact/./src/Components/Viewer/NodeItem/Mesh.js","webpack://MovaiReact/./src/Components/Viewer/Actions/AddMeshAction.js","webpack://MovaiReact/./src/Components/Viewer/Utils/AssetsTypesFactory.js","webpack://MovaiReact/./src/Components/Viewer/NodeItem/Wall.js","webpack://MovaiReact/./src/Components/Viewer/MainView/NodeItemFactoryMap.js","webpack://MovaiReact/./src/Components/Viewer/MainView/MainViewRetriever.js","webpack://MovaiReact/./src/Components/Viewer/Utils/SceneServerUtils.js","webpack://MovaiReact/./src/Components/Viewer/TreeObject/TreeObject.js","webpack://MovaiReact/./src/Components/Viewer/TreeObject/TreeNode.js","webpack://MovaiReact/./src/Components/Viewer/Utils/TreeServerUtils.js","webpack://MovaiReact/./src/Components/Viewer/AssetsManager/AssetsManager.js","webpack://MovaiReact/./src/Components/Viewer/Utils/Animator.js","webpack://MovaiReact/./src/Components/Viewer/Utils/DefaultMouseEvents.js","webpack://MovaiReact/./src/Components/Viewer/SceneViewer.js","webpack://MovaiReact/./src/Components/Select.js","webpack://MovaiReact/./src/Components/Snackbar/Alert/svg-icons/CreateSVGIcon.js","webpack://MovaiReact/./src/Components/Snackbar/Alert/svg-icons/svgIcons.js","webpack://MovaiReact/./src/Components/Snackbar/Alert/Alert.js","webpack://MovaiReact/./src/Components/Snackbar/Snackbar.js","webpack://MovaiReact/./src/styles/Themes.js","webpack://MovaiReact/./src/styles/Style.js","webpack://MovaiReact/./src/Components/Logs/LogsFilterBar/FiltersIcon/FiltersIcon.js","webpack://MovaiReact/./src/Components/Logs/LogsFilterBar/LogsFilterBar.js","webpack://MovaiReact/./src/Components/Logs/utils/Utils.js","webpack://MovaiReact/./src/Components/Logs/LogsTable/LogsTable.js","webpack://MovaiReact/./src/Components/Logs/Logs.js","webpack://MovaiReact/./src/Components/LoginForm/LoginForm.js","webpack://MovaiReact/./src/Components/ProfileMenu.js"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","require","memo","isOldIE","Boolean","document","all","atob","getTarget","target","styleTarget","querySelector","HTMLIFrameElement","contentDocument","head","e","stylesInDom","getIndexByIdentifier","identifier","result","length","modulesToDom","list","options","idCountMap","identifiers","item","id","base","count","concat","index","obj","css","media","sourceMap","references","updater","push","addStyle","insertStyleElement","style","createElement","attributes","nonce","keys","forEach","setAttribute","insert","Error","appendChild","textStore","replaceText","replacement","filter","join","applyToSingletonTag","remove","styleSheet","cssText","cssNode","createTextNode","childNodes","removeChild","insertBefore","applyToTag","removeAttribute","btoa","unescape","encodeURIComponent","JSON","stringify","firstChild","singleton","singletonCounter","update","styleIndex","parentNode","removeStyleElement","newObj","lastIdentifiers","newList","toString","newLastIdentifiers","_i","_index","splice","useSourceMap","this","map","content","cssMapping","sourceMapping","base64","data","sourceURLs","sources","source","sourceRoot","cssWithMappingToString","mediaQuery","dedupe","alreadyImportedModules","api","default","locals","___CSS_LOADER_API_IMPORT___","Button","props","className","onClick","color","variant","size","startIcon","disabled","children","propTypes","PropTypes","func","string","isRequired","element","node","bool","defaultProps","console","log","undefined","margin","position","overflow","display","flexDirection","AbstractModal","submit","onSubmit","cancel","onCancel","onKeyPress","open","onClose","alignItems","justifyContent","width","height","minWidth","minHeight","flexGrow","padding","fontWeight","title","paddingLeft","alignSelf","cancelColor","cancelText","submitColor","submitText","ConfirmAlertModal","message","Drawer","anchor","ANCHOR","left","right","top","bottom","Collapse","React","useState","setOpen","useEffect","clickLambda","button","iconStyle","divided","in","useStyles","makeStyles","theme","container","backgroundColor","logoArea","textAlign","navigationArea","accountArea","unsetAccountAreaPadding","VerticalBar","classes","upperElement","navigationList","lowerElement","array","ContextMenu","anchorEl","setAnchorEl","handleClose","cloneElement","evt","currentTarget","keepMounted","menuList","reduce","tableIcons","Add","forwardRef","ref","Check","Clear","Delete","DetailPanel","Edit","Export","Filter","FirstPage","LastPage","NextPage","PreviousPage","ResetSearch","Search","SortArrow","ThirdStateCheck","ViewColumn","Table","columns","icons","actions","components","localization","actionsColumnIndex","draggable","grouping","search","toolbar","searchFieldAlignment","paging","TabPanel","selectedTab","other","component","role","hidden","aria-labelledby","any","tabPanel","overflowY","Tabs","setSelectedTab","onChange","event","newSelectedTab","indicatorColor","textColor","tabList","tab","label","a11yProps","scrollable","number","Text","fontFamily","fontStyle","fontSize","marginLeft","marginRight","marginBottom","colorSwitchBase","grey","green","colorBar","colorChecked","Toggle","control","checked","toggle","onToggle","switchBase","track","labelPlacement","SearchInput","searchInput","enableTimeout","timer","clearTimeout","setTimeout","handleSearch","time","placeholder","searchIcon","setSearchInput","inputRoot","input","inputInput","inputProps","handleChange","Component","withStyles","borderRadius","shape","fade","palette","common","white","spacing","breakpoints","up","pointerEvents","transition","transitions","withTheme","marginTop","link","cursor","textDecoration","lastLabel","Breadcrumb","separator","aria-label","pathList","function","FLEX_STYLE","BaseViewer","reactCanvas","useRef","antialias","engineOptions","adaptToDeviceRatio","sceneOptions","onRender","is2render","onSceneReady","sceneFactory","rest","loaded","setLoaded","scene","setScene","setSize","engine","Engine","current","Scene","isReady","onReadyObservable","addOnce","runRenderLoop","render","dispose","focus","handleWidth","handleHeight","onResize","innerHeight","getEngine","resize","Vec2","x","y","vec","z","op","a","b","acc","v","Math","sqrt","dot","scale","lambda","fromArray","biLambda","fold","initial","Vec3","constructor","Array","vec3","operation","ans","f","Vector3","binary","initialValue","max","Number","MAX_VALUE","min","some","isNaN","isFinite","babylon","of","random","u","identityMatrix","e1","e2","e3","pivot","add","normalize","w","sub","AnnotationManager","annotations","instance","observers","retrieveAnnotationsFromDb","MasterDB","subscribe","Scope","Name","actionMap","del","annotation","delAnnotation","set","addAnnotation","Annotation","names2delete","annotationType","names","includes","labels","annotationObj","Type","type","toLowerCase","Label","getInstance","getAnnotations","Clipboard","Clip","write","read","capitalize","Utils","NodeItem","mesh","keyValueMap","TYPE","getMouseContextActions","nodeItem","getType","ofBabylon","toArray","quaternion","Maybe","fromNull","rotationQuaternion","orLazy","q","Quaternion","RotationYawPitchRoll","rotation","material","flatMap","diffuseColor","g","orSome","isVisible","isEnabled","info","toDict","Color3","schema","jsonSchema","properties","oldName","uiSchema","toHexString","setAnnotations2Form","form","FromHexString","emissiveColor","mainView","copy","mousePosFromRoot","someMainView","getSceneMemory","rootItem","getRootNode","copyDict","newPosArray","copiedNodeItem","ofDict","parent","addNodeItem2Tree","deleteNodeFromTreeUsingName","dict","someDict","toBabylon","babylonQuaternion","babylonColor","enumNames","enum","Mat3","v1","v2","v3","mat3","prodVec","dotVec","mat","equals","babylonMat","arrayMat","Matrix","GetAsMatrix3x3","GizmoManagerBuilder","_scene","_isPosition","_isRotation","_isBoundingBox","_isScale","_usePointerToAttachGizmos","gizmoManager","GizmoManager","positionGizmoEnabled","rotationGizmoEnabled","boundingBoxGizmoEnabled","scaleGizmoEnabled","usePointerToAttachGizmos","CameraBuilder","_sphericalCoordinates","_target","_name","floor","sphericalCoordinates","values","ArcRotateCamera","PositionalLightBuilder","_position","_intensity","intensity","light","PointLight","ReferentialBuilder","_isPickable","_boxParams","_size","isPickable","boxParams","axisX","Mesh","CreateLines","Zero","axisY","axisZ","localOrigin","MeshBuilder","CreateBox","GroundBuilder","_width","_height","_textureSrc","textureSrc","ground","CreateGround","translate","Space","WORLD","StandardMaterial","ambientTexture","Texture","uScale","vScale","DirectionalLightBuilder","_direction","direction","DirectionalLight","Box","DEFAULT_SIZE","maybeDict","orUndefined","boxMesh","Util3d","createBox","mapDict2Mesh","localPosition","GlobalRef","NAME","meshParent","meshParentPos","meshParentRotMat","getRotationMatrix","meshParentScaling","scaling","mul","getWorldCoordinates","positionInWorld","forwardCoordinates","worldPosition","getLocalCoordinatesFromWorld","computeLocalCoordinatesFromMesh","localRotationMatrix","maybeQuaternion","toRotationMatrix","orElseRun","ofBabylonMatrix","Red","normals","getVerticesData","VertexBuffer","NormalKind","positions","PositionKind","lines","FromArray","scaleInPlace","normalLines","CreateLineSystem","uArray","subtract","Dot","faces","updatable","vertexData","VertexData","indices","applyToMesh","polygon","triangulation","earcut","len","i3","vec3Poly","orientation","edge","arrayOfPoints","ZERO","randomDigits","parentView","rootMesh","arrayOfVector3","transform","isArray","Gray","segments","surface","orthogonalBasisFromVector","sign","Cross","theta","PI","cos","sin","zeroIndex","uIndex","meshFromPositionAndFaces","convertToFlatShadedMesh","diameter","sphere","CreateSphere","getMaterialFromColor","box","points","radius","CreateTube","path","sideOrientation","DOUBLESIDE","pickInfo","pick","pointerX","pointerY","hit","pickedPoint","none","pickedMesh","curve","distance","orientations","atan2","nbPoints","closed","Curve3","CreateCatmullRomSpline","getPoints","splineObj","getCurveOrientations","THETA","ROS_ORIGIN","rosOrigin","getRosOrigin","globalRefMesh","referentialBuilder","build","rotationMatrix","pos","abs","Action","memory","attachedMesh","camera","attachControl","canvas","highlightNodeInTree","highlightNodeInScene","closeContextDial","setContextActionIndex","AssetNodeItem","assetName","Map","DefaultScene","RotationGizmo","UtilityLayerRenderer","xGizmo","dragBehavior","detach","scaleRatio","yGizmo","COLLISION_RADIUS","cameraBuilder","inertia","collisionRadius","panningInertia","checkCollisions","panningSensibility","lowerRadiusLimit","directionalLightBuilder","wireframe","clearColor","Black","collisionsEnabled","_uid","getUniqueId","advancedTexture","AdvancedDynamicTexture","CreateFullscreenUI","text","TextBlock","addControl","MouseKeysAction","codeActionDict","Escape","buttonActionFactory","ACTIONS","orbit","KeyG","dragObjects","KeyP","drawPath","KeyB","drawBoxRegion","KeyR","drawRegion","KeyK","addKeyPoint","KeyC","drawGraph","code","action","setSelectedAction","DragObjectsAction","buttons","maybeSelectedMesh","pickMesh","currentMesh","detachControl","getGroundPosition","groundPosition","groundPositionInLocalCoordinates","mousePointInLocal","clickPointInLocal","shiftFromCenterOfMass","handleMeshRightClick","addGizmo","highlightMeshInScene","setProperties","getMouseCoordinatesFromRoot","mousePosRoot","handleRightClickWithoutMesh","setMouseContextActions","getPasteOnClick","pasteAction","paste","selectedMesh","currentLocal","getX","getY","notifyObservers","groundPos","bigDisplacement","updateNodeInServer","undoManager","addIt","getUndoAbleAction","predicateActionList","predicate","getDeleteButtonAction","ctrlKey","shiftKey","undo","redo","getHighlightedNodeName","getNodeFromTree","predicateAction","setPropertiesWithName","icon","UndoManager","nodeName","maybeNode","onDeleteNode","getContextActions","is2updateServer","displacement","obs","updatedPointMesh","actionBuilder","doAction","newPos","undoAction","invertDisplacement","KeyPoint","CreatePolyhedron","custom","TRIANGULAR_ANTIPRISM","axis","category","vertex","face","AddKeyPointAction","is2addInServer","keyPoint","setPositionWithLocalVector","Axis","Z","maybeMousePos","mousePos","oldMousePos","tempMesh","createKeyPoint","Constants","RADIUS","POINTS_DENSITY","CLOUD_FUNCTION_NAME","BoxRegion","corners","keyPoints","lower","scaleX","scaleY","worldCorners","oldDimensions","toForm","dimensions","_isEqual","ofFormDimensions","newLowerPositionInWorldCoordinates","parseFloat","newLocalDimensions","localLowerPosition","notify","createBoxRegionMesh","backFaceCulling","visibility","createPlaceHolderKeyPoints","FACES","boxRegion","middlePoint","X","Y","h","boxRegionMesh","getKeyPointObserverFunction","boxRegionTreeNode","newBox","average","pointAverageVec3","newMesh","locallyTranslate","_children","k","j","createNewMeshFromOldUsingNewBox","corner","createSphere","Observable","BoxRegionAction","createBoxRegion","TEMP_BOX_REGION_NAME","renderMenus","region","localRegion","centeredRegion","boxRegionItem","Path","localPath","splinePath","selectedKeyPointIndex","selectedKeyPoint","formPosition","newPosInWorldCoordinates","localPos","spline","getSplineFromCurve","createTubeFromPoints","Identity","splineObj2redis","path2return","point","getMeshOnClick","defaultKeyPointUpdate","oldMesh","childrenCopy","kChild","getConeMesh","createNewMeshFromOldUsingNewPoints","newPoints","keyPointUpdateFunction","pointAverage","onAddNewPointKeyPointUpdate","addKeyPointInBetween","keyPointMesh","pathTreeNode","nextIndex","numberOfPoints","oldPoints","specialIndex","getKeyPointActions","deleteKeyPoint","curveMesh","getSphereMesh","setContextActions","createOrientedCone","DrawPathAction","mouseCurve","drawPathPoints","createCurve","TEMP_PATH_NAME","getDrawPathContextAction","contextActions","keyCodeActionMap","Enter","Backspace","localCurve","centeredCurve","pathItem","positiveMod","mod","PolygonRegion","localPolygon","createExtrudedPolygonMesh","keypoints","reverseOrientation","triangleIndice","polygonRegionMesh","lowerTriangulation","triangulatePolygon","upperTriangulation","slice","stitchTriangulation","computeOrientation","modi","stitchingBoundaries","polygonTreeNode","polygonMesh","PolygonRegionAction","createPolygonRegion","drawPolyPoints","getDrawPolygonContextAction","Yellow","polygonRegionItem","OrbitAction","Graph","edgeKey","addVertex","ijKey","jiKey","getEdgeProp","isSome","adjMap","vertices","edges","split","GraphEmbedding","graph","getVertexProp","vertexProp","NAMESPACES","rTreeVertices","RTreeVertices","rTreeEdges","RTreeEdges","vertexGenerator","getAdjMap","iIndex","isCurve","maybeVertexI","getVertex","vertexI","RVertex","setVertexProp","rVertex","delVertex","edgeIndexes","jIndex","rVertexI","rVertexJ","edgeIJ","getEdgeByIndex","REdge","edgeJI","addEdge","setEdgeProp","getEdge","rEdge","indexes","delEdge","hasEdge","queryArray","toBBox","getMinDistanceVertex","neighbors","getNeighbors","jId","vProp","vertexIndex","prop","propEdge","queryPoint","getMinDistanceEdge","edgeProp","rEdges","minDist","minDistIndex","dist","rVertices","vp","getVertices","getEdges","dataVertexI","dataVertexJ","dataEdgeIJ","weight","vertexPosition","vertexId","minX","minY","maxX","maxY","RBush","bEdgeIds","every","MIN_VALUE","vertexPosI","vertexPosJ","GraphItem","sceneId","graphItemInstances","isDisposed","graphPlaceHolder","getGraphPlaceHolder","graphFormMapper","getDefaultFormMapper","vertexMesh","getVertexMesh","Blue","addObserver2VertexMesh","addOnClickVertex","meshByVertexId","updateVertexPosition","updateCurvedNeighbors","getToFormVertex","edgePos","vertexPos","getToFormEdge","edgeMesh","getUndoManager","doIt","getUndoDeleteEdge","meshByEdgeId","getVertexByIndex","ids","key2Edge","ofForm","_get","edgePositions","maybe","meanPoint","edgePosition","newEdgePosition","updateEdgeFromForm","isEdgeCurve","iIsCurve","jIsCurve","buildVertex","buildEdge","getCurveEdgePoints","partialEdge","abstractGraph","getAbstractGraph","doesVertexCollideWithEdge","resolveVertexEdgeCollision","buildSimpleVertex","maybeVertex","createVertexMesh","getVertexObs","movedVertexIds","getCurvedNeighbors","heatFlow","vertexIds","visitedVertex","vertexStack","pop","df","getUndoDeleteVertex","neigh","simpleNeigh","curvedPaths","getCurvedPathFromVertex","edgeIsCurve","meshes","highlightMeshesInScene","newPosition","protectEdge","updateVertex","isEdgeInPair","cata","edgeVec3","edgeBabylon","proj","vertexInEdge","importFeatures2Edge","leftEdge","rightEdge","getUndoResolveVertexEdgeCollision","oldEdge","oldEdgePositions","oldEdgeIndex","leftEdgePositions","leftEdgeIndex","rightEdgePositions","rightEdgeIndex","rEdgeWithData","uId","vId","rEdgePlus","importFeatures","rEdgeMinus","getEdgeMesh","addObserver2EdgeMesh","addOnClickEdge","getEdgeObs","getOnClickEdge","edgeVertex","maybeV","getUndoDelCurveEdge","getUndoDelLineEdge","curvedVertex","curvePath","graphItem","posIJ","importData","getCurveEdgeMesh","error","halfD2x","halfD2xNorm","CreateQuadraticBezier","One","DrawGraphAction","findIndex","ca","mousePosConsumer","MODES","line","onPointerDownLine","onPointerDownCurve","Green","onPointerMoveLine","onPointerMoveCurve","getGraph","graphNode","escapeAction","deletePreviewMeshes","previewMeshes","createEdge","edgeEmbedding","toLocalCoordinates","getEdgeWithVertexMeshes","addCurveEdge","getCurveEdgeWithVertexMeshes","edgeInWorldCoordinate","drawMethod","createGraphItemIfNone","free","MapLoader","yamlSrc","cachedMap","fetch","getMapUrl","response","parseYaml","image","resolution","origin","imageSize","yamlTxt","actionDict","parse","getImageSize","src","Promise","resolve","reject","img","Image","onload","naturalWidth","naturalHeight","AddMapAction","mapLoader","load","href","download","rootNodeMaybe","groundBuilder","originPos","rootNode","inverseCoordinates","setTarget","is2sendServer","createMeshGround","getObjectTree","addMap","Robot","meshTree","robot","oldTimeInMillis","robotAnimator","Date","getTime","requestAnimationFrameId","requestAnimationFrame","updateRobot","unsubscribe","Parameter","cancelAnimationFrame","newRobotTf","thetaX","boundingSphere","getBoundingInfo","center","tfSphereMesh","ONES","addRotation","spherePlaceHolder","child","createRobotMeshTreeRecursive","robotTree","robotMesh","RobotBuilder","dt","vel","rotate","LOCAL","tf","Value","updateRobotMeshTree","robot2Animate","_meshTree","_parentMesh","_id","_keyValueMap","_assetName","parentMesh","ofNull","PointCloud","pointCloudSubscribe","front_lidar","updatePointCloud","colors","fill","pointCloudMesh","disableLighting","pointsCloud","pointSize","MeshCache","meshCacheBySceneId","meshCache","setEnabled","cloneMesh","clone","orNull","MeshLoader","meshName","mapFunction","re","rej","hasKey","assetsManager","AssetsManager","meshTask","addMeshTask","MESH_URL","onSuccess","task","loadedMeshes","put","onError","exception","onFinish","RobotAction","robotAnimatorFactory","getDefaultAnimator","addRobot","createRobotMeshTree","builder","cloudPoint","parentObj","parentName","treeNode","actionMemoryClone","ROBOT_MESH_NAME","transformMesh","then","createRobotFromMesh","getParentMesh","getRobot","animate","isImport","getCloudPoint","AddMeshAction","addMesh2Scene","createNormals","finalName","meshItem","getMeshUrl","addMesh","ASSETS_TYPES","AssetsTypesFactory","loader","getSocketAnimator","Wall","localWall","createWallMesh","centeredWall","tangent","normal","wallMesh","wallNode","newWall","wall","NODE_ITEM_FACTORY_MAP","MainViewRetriever","serverScene","errors","importSceneRecursive","importDefaultScene","nodeDict","nodeItemClass","isAsset","importAsset","assetType","assetActionMap","getAssetsActionMap","retrievedAction","cause","solution","arrayTree","sortArrayTree","sort","importNodeItem","SceneServerUtils","sceneName","successCallback","DEFAULT_SUCCESS","failCallback","DEFAULT_FAILURE","cloudFunction","successFailIf","failureLocation","success","compareTreesRecursive","treeA","treeB","nodeEquality","nodeA","nodeB","expand","expanded","filterTree","tree","nod","flatten","TreeObject","getNodeRecursive","answer","childPredicate","getParentNodeRecursive","nodeMap","mapRecursive","newTree","mappedNode","forEachRecursive","TreeNode","TreeNodeBuilder","_title","_item","_expanded","_isVisible","TreeServerUtils","objectTree","getNode","childName","getParentNode","is2delInServer","deleteNodeInServer","getParentFromChild","node2Add","maybeParentNode","addNodeItem2Server","assets","assetsActionMap","retrieveAssetsFromDb","RobotName","getRobotNameUpdate","getRobotNameSub","File","FileLabel","getMapUpdater","signalObservers","getMapSubscriber","finishSub","getMeshUpdater","getMeshSubscriber","place","finishInitialSubscribers","subs","afterLoad","delAsset","robots","dataGetter","after","getMapFileData","fileName","filename","addAsset","maybeGet","getMeshFileData","observer","assetKey","asset","localRobot","deleteRobot","Animator","state","next","doWhile","requestAnimeId","stop","play","AnimatorBuilder","_state","_next","_end","end","DefaultMouseEvents","mousePosClick","mousePosMove","sceneMemory","mouseLocationText","toFixed","setMouseLocationTxt","panCamera","vBabylon","getBabylonCoordinates","initialState","T","nextState","vdt","animateCamera","filterActions","SceneViewer","ofScene","focusObject","setCameraToTarget","newObjectTree","_absolutePosition","onPointerDown","onPointerUp","onPointerMove","afterLoading","retrieveScene","errorList","importScene","setState","loadAssets","retrieveSceneFromServer","renderScene","getRenderingCanvas","addCanvasEventListeners","createMouseLocationText","createCamera","createLight","createGizmo","highlightLayer","hl","HighlightLayer","lastHlMeshes","prevProps","propVar","loadScene","addEventListener","resetErrorList","createScene","getErrorSolutionList","masterProps","augmentProps","formControl","Select","noneOption","hiddenLabel","labelId","CreateSVGIcon","viewBox","xmlns","xmlnsXlink","svgIcons","Close","ErrorOutline","InfoOutlined","ReportProblemOutlined","SuccessOutlined","defaultIconMapping","warning","Alert","closeText","iconMapping","severity","clsx","oneOf","filledSuccess","filledInfo","filledWarning","filledError","opacity","ReactConfirmAlert","close","closeOnClickOutside","onClickOutside","isClickOutside","overlay","removeBodyClass","removeElementReconfirm","closeOnEscape","onKeypressEscape","isKeyCodeEscape","keyCode","keyboardClose","autoClose","getElementById","autoHideDuration","removeEventListener","willUnmount","customUI","closable","dom","handleClickOverlay","renderCustomUI","elevation","unmountComponentAtNode","body","classList","snackbar","divTarget","createElementReconfirm","themeFactory","particular","typography","h1","h2","h3","h4","h5","h6","body1","cursorDefault","Themes","dark","createMuiTheme","bottomNavigation","background","globalStats","borderColor","subTextColor","upperTextColor","primary","main","secondary","overrides","MuiButton","outlined","contained","containedPrimary","containedSecondary","MuiButtonGroup","groupedContainedPrimary","groupedOutlined","groupedText","MuiIconButton","MuiListItem","MuiFormControlLabel","MuiInputBase","font","MuiFilledInput","border","underline","Roboto","Avenir","Cabin","NotoSans","localStorage","getItem","setItem","Style","createGlobalStyle","S","StyledMenu","paper","boxShadow","getContentAnchorEl","anchorOrigin","vertical","horizontal","transformOrigin","autoFocus","FilterIcon","otherFilters","Fragment","handleClick","isActive","iconActive","buttonApplyFilters","checkbox","limitText","filterBarContainer","flexWrap","flex","searchText","addTagText","toggleContainer","datePicker","tagsContainer","tagsList","chip","maxWidth","filtersButton","columnsFilter","iconButton","LogsFilterBar","tagText","setTagText","handleRobotChange","arrayEvent","selectedId","updateRobotSelection","paddingTop","paddingRight","fillRule","clipRule","multiple","selectedRobots","renderValue","selected","selectedNames","isSelected","MenuProps","robotIndex","messageRegex","handleMessageRegex","InputProps","startAdornment","endAdornment","levels","handleLevels","levelsList","level","elem","indexOf","advancedMode","FiltersIcon","tags","onKeyUp","handleAddTag","onDelete","handleDeleteTag","selectedFromDate","selectedToDate","utils","DateFnsUtils","ampm","newDate","handleDateChange","format","handleAdvancedMode","limit","handleLimit","InputLabelProps","shrink","handleColumns","columnList","column","PaperProps","maxHeight","ITEM_HEIGHT","arePropsEqual","nextProps","selectToDate","colorCoding","INFO","WARNING","DEBUG","ERROR","CRITICAL","findsUniqueKey","keyName","getRequestLevels","levelsArray","res","getRequestTags","tagsArray","_isEmpty","tag","getRequestMessage","binaryIndexOf","criteria","currentIndex","minIndex","maxIndex","comparison","filterByFromToDates","logsData","fromDate","toDate","lowerIndex","upperIndex","dateList","MuiVirtualizedTable","onRowClick","rowData","tableRow","flexContainer","tableRowHover","cellData","columnIndex","rowHeight","tableCell","noClick","align","numeric","headerHeight","tableProps","gridStyle","table","rowClassName","getRowClassName","dataKey","headerRenderer","headerProps","cellRenderer","PureComponent","arrayOf","VirtualizedTable","boxSizing","flip","flexColumn","LogsTable","rowCount","rowGetter","Logs","robotId","getLogs","robotState","robotStates","off","getRobotLogData","dataArrays","prevState","finalArray","dataArray","logsTimeout","robotSelected","timeoutHandle","dynamicURL","ip","divElement","clientHeight","setSelectedRobots","robotsData","tagToDelete","filteredTags","keyToChange","simpleLevelsList","advancedLevelsList","timestamp","battery","temp","okay","serverTime","toLocaleDateString","getJustDateFromServer","Time","toLocaleTimeString","getJustTimeFromServer","Level","Module","Message","LoginForm","username","password","remember","errorMessage","Authentication","login","apiResponse","setLoggedIn","logo","justify","defaultLogo","alt","gutterBottom","htmlFor","aria-describedby","sendCreds","logs","loggedIn","menuItemSpacing","profileMenuFooter","ProfileMenu","useTheme","aria-controls","aria-haspopup","welcomeLabel","userName","extraItems","darkThemeLabel","handleToggleTheme","isDarkTheme","handleLogout","logoutLabel","version"],"mappings":"CAAA,SAA2CA,EAAMC,GAC1B,iBAAZC,SAA0C,iBAAXC,OACxCA,OAAOD,QAAUD,IACQ,mBAAXG,QAAyBA,OAAOC,IAC9CD,OAAO,GAAIH,GACe,iBAAZC,QACdA,QAAoB,WAAID,IAExBD,EAAiB,WAAIC,IARvB,CASGK,QAAQ,WACX,O,YCTE,IAAIC,EAAmB,GAGvB,SAASC,EAAoBC,GAG5B,GAAGF,EAAiBE,GACnB,OAAOF,EAAiBE,GAAUP,QAGnC,IAAIC,EAASI,EAAiBE,GAAY,CACzCC,EAAGD,EACHE,GAAG,EACHT,QAAS,IAUV,OANAU,EAAQH,GAAUI,KAAKV,EAAOD,QAASC,EAAQA,EAAOD,QAASM,GAG/DL,EAAOQ,GAAI,EAGJR,EAAOD,QA0Df,OArDAM,EAAoBM,EAAIF,EAGxBJ,EAAoBO,EAAIR,EAGxBC,EAAoBQ,EAAI,SAASd,EAASe,EAAMC,GAC3CV,EAAoBW,EAAEjB,EAASe,IAClCG,OAAOC,eAAenB,EAASe,EAAM,CAAEK,YAAY,EAAMC,IAAKL,KAKhEV,EAAoBgB,EAAI,SAAStB,GACX,oBAAXuB,QAA0BA,OAAOC,aAC1CN,OAAOC,eAAenB,EAASuB,OAAOC,YAAa,CAAEC,MAAO,WAE7DP,OAAOC,eAAenB,EAAS,aAAc,CAAEyB,OAAO,KAQvDnB,EAAoBoB,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQnB,EAAoBmB,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,iBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAKX,OAAOY,OAAO,MAGvB,GAFAxB,EAAoBgB,EAAEO,GACtBX,OAAOC,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOnB,EAAoBQ,EAAEe,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIRvB,EAAoB2B,EAAI,SAAShC,GAChC,IAAIe,EAASf,GAAUA,EAAO2B,WAC7B,WAAwB,OAAO3B,EAAgB,SAC/C,WAA8B,OAAOA,GAEtC,OADAK,EAAoBQ,EAAEE,EAAQ,IAAKA,GAC5BA,GAIRV,EAAoBW,EAAI,SAASiB,EAAQC,GAAY,OAAOjB,OAAOkB,UAAUC,eAAe1B,KAAKuB,EAAQC,IAGzG7B,EAAoBgC,EAAI,GAIjBhC,EAAoBA,EAAoBiC,EAAI,K,gBClFrDtC,EAAOD,QAAUwC,QAAQ,U,cCAzBvC,EAAOD,QAAUwC,QAAQ,8C,cCAzBvC,EAAOD,QAAUwC,QAAQ,oB,cCAzBvC,EAAOD,QAAUwC,QAAQ,qD,cCAzBvC,EAAOD,QAAUwC,QAAQ,e,cCAzBvC,EAAOD,QAAUwC,QAAQ,8C,cCAzBvC,EAAOD,QAAUwC,QAAQ,8C,cCAzBvC,EAAOD,QAAUwC,QAAQ,2C,cCAzBvC,EAAOD,QAAUwC,QAAQ,U,cCAzBvC,EAAOD,QAAUwC,QAAQ,yD,cCAzBvC,EAAOD,QAAUwC,QAAQ,uC,cCAzBvC,EAAOD,QAAUwC,QAAQ,wC,cCAzBvC,EAAOD,QAAUwC,QAAQ,mC,cCAzBvC,EAAOD,QAAUwC,QAAQ,oB,cCAzBvC,EAAOD,QAAUwC,QAAQ,oD,cCAzBvC,EAAOD,QAAUwC,QAAQ,iD,cCAzBvC,EAAOD,QAAUwC,QAAQ,6B,cCAzBvC,EAAOD,QAAUwC,QAAQ,+B,cCAzBvC,EAAOD,QAAUwC,QAAQ,sB,cCAzBvC,EAAOD,QAAUwC,QAAQ,6C,cCAzBvC,EAAOD,QAAUwC,QAAQ,gD,cCAzBvC,EAAOD,QAAUwC,QAAQ,+B,cCAzBvC,EAAOD,QAAUwC,QAAQ,uD,cCAzBvC,EAAOD,QAAUwC,QAAQ,iC,cCAzBvC,EAAOD,QAAUwC,QAAQ,iC,cCAzBvC,EAAOD,QAAUwC,QAAQ,kC,cCAzBvC,EAAOD,QAAUwC,QAAQ,e,cCAzBvC,EAAOD,QAAUwC,QAAQ,4B,cCAzBvC,EAAOD,QAAUwC,QAAQ,2B,cCAzBvC,EAAOD,QAAUwC,QAAQ,8B,cCAzBvC,EAAOD,QAAUwC,QAAQ,mB,cCAzBvC,EAAOD,QAAUwC,QAAQ,6B,cCAzBvC,EAAOD,QAAUwC,QAAQ,S,cCAzBvC,EAAOD,QAAUwC,QAAQ,2B,cCAzBvC,EAAOD,QAAUwC,QAAQ,oC,cCAzBvC,EAAOD,QAAUwC,QAAQ,iC,cCAzBvC,EAAOD,QAAUwC,QAAQ,6B,cCAzBvC,EAAOD,QAAUwC,QAAQ,0B,cCAzBvC,EAAOD,QAAUwC,QAAQ,gC,cCAzBvC,EAAOD,QAAUwC,QAAQ,6B,cCAzBvC,EAAOD,QAAUwC,QAAQ,oD,cCAzBvC,EAAOD,QAAUwC,QAAQ,c,cCAzBvC,EAAOD,QAAUwC,QAAQ,qC,cCAzBvC,EAAOD,QAAUwC,QAAQ,mC,cCAzBvC,EAAOD,QAAUwC,QAAQ,+B,cCAzBvC,EAAOD,QAAUwC,QAAQ,yB,cCAzBvC,EAAOD,QAAUwC,QAAQ,sB,cCAzBvC,EAAOD,QAAUwC,QAAQ,6B,cCAzBvC,EAAOD,QAAUwC,QAAQ,sB,cCAzBvC,EAAOD,QAAUwC,QAAQ,U,cCAzBvC,EAAOD,QAAUwC,QAAQ,gC,cCAzBvC,EAAOD,QAAUwC,QAAQ,8B,6BCEzB,IACMC,EADFC,EAEK,WAUL,YAToB,IAATD,IAMTA,EAAOE,QAAQvC,QAAUwC,UAAYA,SAASC,MAAQzC,OAAO0C,OAGxDL,GAIPM,EAAY,WACd,IAAIN,EAAO,GACX,OAAO,SAAkBO,GACvB,QAA4B,IAAjBP,EAAKO,GAAyB,CACvC,IAAIC,EAAcL,SAASM,cAAcF,GAEzC,GAAI5C,OAAO+C,mBAAqBF,aAAuB7C,OAAO+C,kBAC5D,IAGEF,EAAcA,EAAYG,gBAAgBC,KAC1C,MAAOC,GAEPL,EAAc,KAIlBR,EAAKO,GAAUC,EAGjB,OAAOR,EAAKO,IApBA,GAwBZO,EAAc,GAElB,SAASC,EAAqBC,GAG5B,IAFA,IAAIC,GAAU,EAELlD,EAAI,EAAGA,EAAI+C,EAAYI,OAAQnD,IACtC,GAAI+C,EAAY/C,GAAGiD,aAAeA,EAAY,CAC5CC,EAASlD,EACT,MAIJ,OAAOkD,EAGT,SAASE,EAAaC,EAAMC,GAI1B,IAHA,IAAIC,EAAa,GACbC,EAAc,GAETxD,EAAI,EAAGA,EAAIqD,EAAKF,OAAQnD,IAAK,CACpC,IAAIyD,EAAOJ,EAAKrD,GACZ0D,EAAKJ,EAAQK,KAAOF,EAAK,GAAKH,EAAQK,KAAOF,EAAK,GAClDG,EAAQL,EAAWG,IAAO,EAC1BT,EAAa,GAAGY,OAAOH,EAAI,KAAKG,OAAOD,GAC3CL,EAAWG,GAAME,EAAQ,EACzB,IAAIE,EAAQd,EAAqBC,GAC7Bc,EAAM,CACRC,IAAKP,EAAK,GACVQ,MAAOR,EAAK,GACZS,UAAWT,EAAK,KAGH,IAAXK,GACFf,EAAYe,GAAOK,aACnBpB,EAAYe,GAAOM,QAAQL,IAE3BhB,EAAYsB,KAAK,CACfpB,WAAYA,EACZmB,QAASE,EAASP,EAAKT,GACvBa,WAAY,IAIhBX,EAAYa,KAAKpB,GAGnB,OAAOO,EAGT,SAASe,EAAmBjB,GAC1B,IAAIkB,EAAQpC,SAASqC,cAAc,SAC/BC,EAAapB,EAAQoB,YAAc,GAEvC,QAAgC,IAArBA,EAAWC,MAAuB,CAC3C,IAAIA,EAAmD,KAEnDA,IACFD,EAAWC,MAAQA,GAQvB,GAJAjE,OAAOkE,KAAKF,GAAYG,SAAQ,SAAUtD,GACxCiD,EAAMM,aAAavD,EAAKmD,EAAWnD,OAGP,mBAAnB+B,EAAQyB,OACjBzB,EAAQyB,OAAOP,OACV,CACL,IAAIhC,EAASD,EAAUe,EAAQyB,QAAU,QAEzC,IAAKvC,EACH,MAAM,IAAIwC,MAAM,2GAGlBxC,EAAOyC,YAAYT,GAGrB,OAAOA,EAcT,IACMU,EADFC,GACED,EAAY,GACT,SAAiBpB,EAAOsB,GAE7B,OADAF,EAAUpB,GAASsB,EACZF,EAAUG,OAAOlD,SAASmD,KAAK,QAI1C,SAASC,EAAoBf,EAAOV,EAAO0B,EAAQzB,GACjD,IAAIC,EAAMwB,EAAS,GAAKzB,EAAIE,MAAQ,UAAUJ,OAAOE,EAAIE,MAAO,MAAMJ,OAAOE,EAAIC,IAAK,KAAOD,EAAIC,IAIjG,GAAIQ,EAAMiB,WACRjB,EAAMiB,WAAWC,QAAUP,EAAYrB,EAAOE,OACzC,CACL,IAAI2B,EAAUvD,SAASwD,eAAe5B,GAClC6B,EAAarB,EAAMqB,WAEnBA,EAAW/B,IACbU,EAAMsB,YAAYD,EAAW/B,IAG3B+B,EAAW1C,OACbqB,EAAMuB,aAAaJ,EAASE,EAAW/B,IAEvCU,EAAMS,YAAYU,IAKxB,SAASK,EAAWxB,EAAOlB,EAASS,GAClC,IAAIC,EAAMD,EAAIC,IACVC,EAAQF,EAAIE,MACZC,EAAYH,EAAIG,UAepB,GAbID,EACFO,EAAMM,aAAa,QAASb,GAE5BO,EAAMyB,gBAAgB,SAGpB/B,GAA6B,oBAATgC,OACtBlC,GAAO,uDAAuDH,OAAOqC,KAAKC,SAASC,mBAAmBC,KAAKC,UAAUpC,MAAe,QAMlIM,EAAMiB,WACRjB,EAAMiB,WAAWC,QAAU1B,MACtB,CACL,KAAOQ,EAAM+B,YACX/B,EAAMsB,YAAYtB,EAAM+B,YAG1B/B,EAAMS,YAAY7C,SAASwD,eAAe5B,KAI9C,IAAIwC,EAAY,KACZC,EAAmB,EAEvB,SAASnC,EAASP,EAAKT,GACrB,IAAIkB,EACAkC,EACAlB,EAEJ,GAAIlC,EAAQkD,UAAW,CACrB,IAAIG,EAAaF,IACjBjC,EAAQgC,IAAcA,EAAYjC,EAAmBjB,IACrDoD,EAASnB,EAAoB/D,KAAK,KAAMgD,EAAOmC,GAAY,GAC3DnB,EAASD,EAAoB/D,KAAK,KAAMgD,EAAOmC,GAAY,QAE3DnC,EAAQD,EAAmBjB,GAC3BoD,EAASV,EAAWxE,KAAK,KAAMgD,EAAOlB,GAEtCkC,EAAS,YAxFb,SAA4BhB,GAE1B,GAAyB,OAArBA,EAAMoC,WACR,OAAO,EAGTpC,EAAMoC,WAAWd,YAAYtB,GAmFzBqC,CAAmBrC,IAKvB,OADAkC,EAAO3C,GACA,SAAqB+C,GAC1B,GAAIA,EAAQ,CACV,GAAIA,EAAO9C,MAAQD,EAAIC,KAAO8C,EAAO7C,QAAUF,EAAIE,OAAS6C,EAAO5C,YAAcH,EAAIG,UACnF,OAGFwC,EAAO3C,EAAM+C,QAEbtB,KAKN/F,EAAOD,QAAU,SAAU6D,EAAMC,IAC/BA,EAAUA,GAAW,IAGRkD,WAA0C,kBAAtBlD,EAAQkD,YACvClD,EAAQkD,UAAYtE,KAItB,IAAI6E,EAAkB3D,EADtBC,EAAOA,GAAQ,GAC0BC,GACzC,OAAO,SAAgB0D,GAGrB,GAFAA,EAAUA,GAAW,GAE2B,mBAA5CtG,OAAOkB,UAAUqF,SAAS9G,KAAK6G,GAAnC,CAIA,IAAK,IAAIhH,EAAI,EAAGA,EAAI+G,EAAgB5D,OAAQnD,IAAK,CAC/C,IACI8D,EAAQd,EADK+D,EAAgB/G,IAEjC+C,EAAYe,GAAOK,aAKrB,IAFA,IAAI+C,EAAqB9D,EAAa4D,EAAS1D,GAEtC6D,EAAK,EAAGA,EAAKJ,EAAgB5D,OAAQgE,IAAM,CAClD,IAEIC,EAASpE,EAFK+D,EAAgBI,IAIK,IAAnCpE,EAAYqE,GAAQjD,aACtBpB,EAAYqE,GAAQhD,UAEpBrB,EAAYsE,OAAOD,EAAQ,IAI/BL,EAAkBG,M,6BClQtBzH,EAAOD,QAAU,SAAU8H,GACzB,IAAIjE,EAAO,GAuDX,OArDAA,EAAK4D,SAAW,WACd,OAAOM,KAAKC,KAAI,SAAU/D,GACxB,IAAIgE,EAsDV,SAAgChE,EAAM6D,GACpC,IAAIG,EAAUhE,EAAK,IAAM,GAErBiE,EAAajE,EAAK,GAEtB,IAAKiE,EACH,OAAOD,EAGT,GAAIH,GAAgC,mBAATpB,KAAqB,CAC9C,IAAIyB,GAWWzD,EAXewD,EAa5BE,EAAS1B,KAAKC,SAASC,mBAAmBC,KAAKC,UAAUpC,MACzD2D,EAAO,+DAA+DhE,OAAO+D,GAC1E,OAAO/D,OAAOgE,EAAM,QAdrBC,EAAaJ,EAAWK,QAAQP,KAAI,SAAUQ,GAChD,MAAO,iBAAiBnE,OAAO6D,EAAWO,YAAc,IAAIpE,OAAOmE,EAAQ,UAE7E,MAAO,CAACP,GAAS5D,OAAOiE,GAAYjE,OAAO,CAAC8D,IAAgBrC,KAAK,MAOrE,IAAmBpB,EAEb0D,EACAC,EAPJ,MAAO,CAACJ,GAASnC,KAAK,MAvEJ4C,CAAuBzE,EAAM6D,GAE3C,OAAI7D,EAAK,GACA,UAAUI,OAAOJ,EAAK,GAAI,MAAMI,OAAO4D,EAAS,KAGlDA,KACNnC,KAAK,KAKVjC,EAAKrD,EAAI,SAAUE,EAASiI,EAAYC,GACf,iBAAZlI,IAETA,EAAU,CAAC,CAAC,KAAMA,EAAS,MAG7B,IAAImI,EAAyB,GAE7B,GAAID,EACF,IAAK,IAAIpI,EAAI,EAAGA,EAAIuH,KAAKpE,OAAQnD,IAAK,CAEpC,IAAI0D,EAAK6D,KAAKvH,GAAG,GAEP,MAAN0D,IACF2E,EAAuB3E,IAAM,GAKnC,IAAK,IAAIyD,EAAK,EAAGA,EAAKjH,EAAQiD,OAAQgE,IAAM,CAC1C,IAAI1D,EAAO,GAAGI,OAAO3D,EAAQiH,IAEzBiB,GAAUC,EAAuB5E,EAAK,MAKtC0E,IACG1E,EAAK,GAGRA,EAAK,GAAK,GAAGI,OAAOsE,EAAY,SAAStE,OAAOJ,EAAK,IAFrDA,EAAK,GAAK0E,GAMd9E,EAAKgB,KAAKZ,MAIPJ,I,cChET5D,EAAOD,QAAUwC,QAAQ,6B,cCAzBvC,EAAOD,QAAUwC,QAAQ,kC,cCAzBvC,EAAOD,QAAUwC,QAAQ,+B,cCAzBvC,EAAOD,QAAUwC,QAAQ,mB,cCAzBvC,EAAOD,QAAUwC,QAAQ,8B,cCAzBvC,EAAOD,QAAUwC,QAAQ,qC,cCAzBvC,EAAOD,QAAUwC,QAAQ,6B,cCAzBvC,EAAOD,QAAUwC,QAAQ,mC,cCAzBvC,EAAOD,QAAUwC,QAAQ,qC,cCAzBvC,EAAOD,QAAUwC,QAAQ,4B,cCAzBvC,EAAOD,QAAUwC,QAAQ,kC,cCAzBvC,EAAOD,QAAUwC,QAAQ,iC,cCAzBvC,EAAOD,QAAUwC,QAAQ,gC,cCAzBvC,EAAOD,QAAUwC,QAAQ,8B,cCAzBvC,EAAOD,QAAUwC,QAAQ,+B,cCAzBvC,EAAOD,QAAUwC,QAAQ,kC,cCAzBvC,EAAOD,QAAUwC,QAAQ,2B,cCAzBvC,EAAOD,QAAUwC,QAAQ,0B,cCAzBvC,EAAOD,QAAUwC,QAAQ,gC,cCAzBvC,EAAOD,QAAUwC,QAAQ,uC,cCAzBvC,EAAOD,QAAUwC,QAAQ,6B,cCAzBvC,EAAOD,QAAUwC,QAAQ,gC,cCAzBvC,EAAOD,QAAUwC,QAAQ,kC,cCAzBvC,EAAOD,QAAUwC,QAAQ,oC,cCAzBvC,EAAOD,QAAUwC,QAAQ,W,cCAzBvC,EAAOD,QAAUwC,QAAQ,+B,cCAzBvC,EAAOD,QAAUwC,QAAQ,4B,cCAzBvC,EAAOD,QAAUwC,QAAQ,qD,cCAzBvC,EAAOD,QAAUwC,QAAQ,sB,cCAzBvC,EAAOD,QAAUwC,QAAQ,6B,cCAzBvC,EAAOD,QAAUwC,QAAQ,8C,cCAzBvC,EAAOD,QAAUwC,QAAQ,6B,cCAzBvC,EAAOD,QAAUwC,QAAQ,2B,cCAzBvC,EAAOD,QAAUwC,QAAQ,2B,cCAzBvC,EAAOD,QAAUwC,QAAQ,6B,cCAzBvC,EAAOD,QAAUwC,QAAQ,sB,cCAzBvC,EAAOD,QAAUwC,QAAQ,sC,cCAzBvC,EAAOD,QAAUwC,QAAQ,mB,cCAzBvC,EAAOD,QAAU,ohF,cCAjBC,EAAOD,QAAUwC,QAAQ,4B,cCAzBvC,EAAOD,QAAUwC,QAAQ,qC,cCAzBvC,EAAOD,QAAUwC,QAAQ,uB,gBCAzB,IAAIsG,EAAM,EAAQ,IACFb,EAAU,EAAQ,IAIC,iBAFvBA,EAAUA,EAAQrG,WAAaqG,EAAQc,QAAUd,KAG/CA,EAAU,CAAC,CAAChI,EAAOO,EAAIyH,EAAS,MAG9C,IAAInE,EAAU,CAEd,OAAiB,OACjB,WAAoB,GAEPgF,EAAIb,EAASnE,GAI1B7D,EAAOD,QAAUiI,EAAQe,QAAU,I,iBChBnChJ,EADkC,EAAQ,GAChCiJ,EAA4B,IAE9BpE,KAAK,CAAC5E,EAAOO,EAAI,84CAA+4C,KAEx6CP,EAAOD,QAAUA,G,cCNjBC,EAAOD,QAAUwC,QAAQ,qB,cCAzBvC,EAAOD,QAAUwC,QAAQ,sB,cCAzBvC,EAAOD,QAAUwC,QAAQ,yB,gBCAzB,IAAIsG,EAAM,EAAQ,IACFb,EAAU,EAAQ,KAIC,iBAFvBA,EAAUA,EAAQrG,WAAaqG,EAAQc,QAAUd,KAG/CA,EAAU,CAAC,CAAChI,EAAOO,EAAIyH,EAAS,MAG9C,IAAInE,EAAU,CAEd,OAAiB,OACjB,WAAoB,GAEPgF,EAAIb,EAASnE,GAI1B7D,EAAOD,QAAUiI,EAAQe,QAAU,I,iBChBnChJ,EADkC,EAAQ,GAChCiJ,EAA4B,IAE9BpE,KAAK,CAAC5E,EAAOO,EAAI,qkCAAskC,KAE/lCP,EAAOD,QAAUA,G,w8BCFXkJ,EAAS,SAAAC,GACb,OACE,kBAAC,IAAD,CACEC,UAAWD,EAAMC,UACjBpE,MAAOmE,EAAMnE,MACbqE,QAASF,EAAME,QACfC,MAAOH,EAAMG,MACbC,QAASJ,EAAMI,QACfC,KAAML,EAAMK,KACZC,UAAWN,EAAMM,UACjBC,SAAUP,EAAMO,UAEfP,EAAMQ,WAKbT,EAAOU,UAAY,CACjB5E,MAAO6E,IAAU3H,OACjBmH,QAASQ,IAAUC,KACnBR,MAAOO,IAAUE,OACjBR,QAASM,IAAUE,OAAOC,WAC1BR,KAAMK,IAAUE,OAChBN,UAAWI,IAAUI,QACrBN,SAAUE,IAAUK,KAAKF,WACzBN,SAAUG,IAAUM,MAEtBjB,EAAOkB,aAAe,CACpBpF,MAAO,GACPqE,QAAS,kBAAMgB,QAAQC,IAAI,wBAC3BhB,MAAO,UACPC,QAAS,YACTC,KAAM,SACNC,eAAWc,EACXZ,SAAU,8BACVD,UAAU,GAGGR,Q,ylBC7Bf,IAAMlE,EAAQ,CACZwF,OAAQ,OACRC,SAAU,WACVC,SAAU,OACVC,QAAS,OACTC,cAAe,UAGXC,EAAgB,SAAA1B,GACpB,IAMM2B,EAAS,WACb3B,EAAM4B,YAGFC,EAAS,WACb7B,EAAM8B,YAGR,OACE,kBAAC,QAAD,CACEC,WAhBe,SAAA5H,GACH,UAAVA,EAAEvB,KACJ+I,KAeAK,KAAMhC,EAAMgC,KACZC,QAASJ,EACThG,MAAO,CACL2F,QAAS,OACTU,WAAY,SACZC,eAAgB,WAGlB,kBAAC,OAAD,CACEtG,MAAK,OACAA,GADA,IAEHuG,MAAOpC,EAAMoC,MACbC,OAAQrC,EAAMqC,OACdC,SAAU,QACVC,UAAW,WAGb,kBAAC,cAAD,CACE1G,MAAO,CACL2G,SAAU,EACVhB,QAAS,OACTC,cAAe,SACfc,UAAW,IAGb,kBAAC,aAAD,CACEnC,QAAQ,KACRvE,MAAO,CACL4G,QAAS,oBACTC,WAAY,MAGb1C,EAAM2C,OAET,yBACE9G,MAAO,CACL+G,YAAa,MACbJ,SAAU,EACVjB,SAAU,OACVgB,UAAW,IAGZvC,EAAMQ,WAGX,kBAAC,UAAD,MACA,kBAAC,cAAD,CAAa3E,MAAO,CAAEgH,UAAW,aAC/B,kBAAC,EAAD,CAAQ3C,QAAS2B,EAAQzB,QAAQ,WAAWD,MAAOH,EAAM8C,aACtD9C,EAAM+C,YAET,kBAAC,EAAD,CAAQ5C,MAAOH,EAAMgD,YAAa9C,QAASyB,GACxC3B,EAAMiD,gBAQnBvB,EAAcjB,UAAY,CACxBmB,SAAUlB,IAAUC,KACpBmB,SAAUpB,IAAUC,KACpBqB,KAAMtB,IAAUM,KAChB2B,MAAOjC,IAAUE,OACjBqC,WAAYvC,IAAUE,OACtBoC,YAAatC,IAAUE,OACvBmC,WAAYrC,IAAUE,OACtBkC,YAAapC,IAAUE,OACvBwB,MAAO1B,IAAUE,OACjByB,OAAQ3B,IAAUE,QAGpBc,EAAcT,aAAe,CAC3BW,SAAU,aACVE,SAAU,aACVE,MAAM,EACNW,MAAO,MACPM,WAAY,UACZD,YAAa,UACbD,WAAY,SACZD,YAAa,UACbV,MAAO,MACPC,OAAQ,OAGKX,QCxHTwB,EAAoB,SAAAlD,GACxB,OACE,kBAAC,EAAD,CACE4B,SAAU5B,EAAM4B,SAChBE,SAAU9B,EAAM8B,SAChBE,KAAMhC,EAAMgC,KACZW,MAAO3C,EAAM2C,MACbM,WAAYjD,EAAMiD,WAClBD,YAAahD,EAAMgD,YACnBD,WAAY/C,EAAM+C,WAClBD,YAAa9C,EAAM8C,aAEnB,6BAAM9C,EAAMmD,SACZ,6BAAMnD,EAAMQ,YAKlB0C,EAAkBzC,UAAY,CAC5BkC,MAAOjC,IAAUE,OACjBuC,QAASzC,IAAUE,OACnBgB,SAAUlB,IAAUC,KACpBmB,SAAUpB,IAAUC,KACpBqB,KAAMtB,IAAUM,KAChBiC,WAAYvC,IAAUE,OACtBoC,YAAatC,IAAUE,OACvBmC,WAAYrC,IAAUE,OACtBkC,YAAapC,IAAUE,QAGzBsC,EAAkBjC,aAAe,CAC/B0B,MAAO,mBACPQ,QAAS,gBACTvB,SAAU,aACVE,SAAU,aACVE,MAAM,EACNiB,WAAY,SACZD,YAAa,YACbD,WAAY,SACZD,YAAa,WAGAI,Q,iBC1CTE,EAAS,SAAApD,GACb,OACE,kBAAC,IAAD,CACEnE,MAAOmE,EAAMnE,MACbwH,OAAQrD,EAAMqD,OACdrB,KAAMhC,EAAMgC,KACZC,QAASjC,EAAMiC,SAEdjC,EAAMQ,WAKb4C,EAAO3C,UAAY,CACjB5E,MAAO6E,IAAU3H,OACjBsK,OAAQ3C,IAAUE,OAClBoB,KAAMtB,IAAUM,KAChBR,SAAUE,IAAU3H,QAGtBqK,EAAOnC,aAAe,CACpBpF,MAAO,GACPwH,OAAQ,OACRrB,MAAM,EACNxB,SAAU,+BAGZ4C,EAAOE,OAAS,CAAEC,KAAM,OAAQC,MAAO,QAASC,IAAK,MAAOC,OAAQ,UAErDN,Q,qoBC1Bf,IAAMO,EAAW,SAAA3D,GAAS,MACA4D,IAAMC,SAAS7D,EAAMgC,MADrB,WACjBA,EADiB,KACX8B,EADW,KAGxBF,IAAMG,WAAU,WACV/D,EAAMgC,OAASA,GACjB8B,EAAQ9D,EAAMgC,QAEf,CAAChC,EAAMgC,OAEV,IAA2BgC,EAK3B,OACE,kBAAC,OAAD,KACE,kBAAC,WAAD,CAAUC,QAAM,EAAC/D,SAPM8D,EAOsBhE,EAAME,QAPb,WACxC4D,GAAS9B,GACTgC,OAMKhC,EACC,kBAAC,IAAD,CAAYnG,MAAK,KAAOmE,EAAMkE,aAE9B,kBAAC,IAAD,CAAkBrI,MAAK,KAAOmE,EAAMkE,aAEtC,yBAAKrI,MAAO,CAAEuG,MAAO,SAAWpC,EAAMlF,OAEvCkF,EAAMmE,QAAU,kBAAC,UAAD,MAAc,GAC/B,kBAAC,IAAD,CACElE,UAAWD,EAAMC,UACjBpE,MAAOmE,EAAMnE,MACbuI,GAAIpC,GAEHhC,EAAMQ,YAMfmD,EAASlD,UAAY,CACnB3F,KAAM4F,IAAU3H,OAChBmH,QAASQ,IAAUC,KACnBqB,KAAMtB,IAAUM,KAChBmD,QAASzD,IAAUM,KACnBkD,UAAWxD,IAAU3H,QAGvB4K,EAAS1C,aAAe,CACtBnG,KAAM,8BACNoF,QAAS,aACT8B,MAAM,EACNmC,SAAS,EACTtI,MAAO,GACPqI,UAAW,IAGEP,Q,QCxDTU,EAAYC,sBAAW,SAAAC,GAAK,MAAK,CACrCC,UAAW,CACTnC,OAAQ,OACRoC,gBAAiB,SAAAzE,GAAK,OAAIA,EAAMyE,iBAChCrC,MAAO,SAAApC,GAAK,OAAIA,EAAMoC,OACtBZ,QAAS,OACTC,cAAe,UAEjBiD,SAAU,CACRjC,QAAS,OACTkC,UAAW,SACXzC,WAAY,SACZC,eAAgB,UAElByC,eAAgB,CACdpC,SAAU,EACVhB,QAAS,OACTC,cAAe,SAEfS,WAAY,UAEd2C,YAAa,CACXpC,QAAS,SAAAzC,GAAK,OAAKA,EAAM8E,wBAA0B,QAAU,QAC7DH,UAAW,SACXzC,WAAY,SACZC,eAAgB,cAId4C,EAAc,SAAA/E,GAClB,IAAMgF,EAAUX,EAAUrE,GAC1B,OACE,yBAAKC,UAAW+E,EAAQR,WACtB,yBAAKvE,UAAW+E,EAAQN,UAAW1E,EAAMiF,cACzC,yBAAKhF,UAAW+E,EAAQJ,gBACrB5E,EAAMkF,eAAerG,KAAI,SAACiC,EAAS3F,GAClC,OACE,yBAAKvC,IAAKuC,EAAOU,MAAO,CAAE4G,QAAS,aAChC3B,OAKT,yBAAKb,UAAW+E,EAAQH,aAAc7E,EAAMmF,gBAKlDJ,EAAYtE,UAAY,CACtBwE,aAAcvE,IAAUK,KAAKF,WAC7BqE,eAAgBxE,IAAU0E,MAC1BD,aAAczE,IAAUK,KAAKF,WAC7BuB,MAAO1B,IAAUE,OACjB6D,gBAAiB/D,IAAUE,OAC3BkE,wBAAyBpE,IAAUM,MAErC+D,EAAY9D,aAAe,CACzBgE,aAAc,8BACdC,eAAgB,CAAC,+BACjBC,aAAc,8BACd/C,MAAO,OACPqC,gBAAiB,UACjBK,yBAAyB,GAGZC,Q,kCChETM,EAAc,SAAArF,GAAS,MACK4D,IAAMC,SAAS,MADpB,WACpByB,EADoB,KACVC,EADU,KAOrBC,EAAc,WAClBD,EAAY,OAGd,OACE,6BACG3B,IAAM6B,aAAazF,EAAMc,QAAS,CACjCZ,QAAS,SAAAwF,QAC6BtE,IAAhCpB,EAAMc,QAAQd,MAAME,SACtBF,EAAMc,QAAQd,MAAME,UAZ5BqF,EAckBG,EAdAC,kBAiBhB,kBAAC,IAAD,CACE5K,GAAG,cACHuK,SAAUA,EACVM,aAAW,EACX5D,KAAMxI,QAAQ8L,GACdrD,QAASuD,GAERxF,EAAM6F,SAASC,QAAO,SAACvL,EAAQO,EAAMK,GAgBpC,OAfIL,GAAwB,mBAATA,GACjBP,EAAOmB,KACL,kBAAC,IAAD,CACEwE,QAAS,WACPpF,EAAKoF,WACDpF,EAAKmH,cAA4Bb,IAAjBtG,EAAKmH,UACvBuD,KAGJ5M,IAAKuC,GAEJL,EAAKgG,UAILvG,IACN,OAMX8K,EAAY5E,UAAY,CACtBK,QAASJ,IAAUK,KAAKF,WACxBqE,eAAgBxE,IAAU0E,MAC1BD,aAAczE,IAAUK,KAAKF,WAC7BuB,MAAO1B,IAAUE,OACjB6D,gBAAiB/D,IAAUE,QAE7ByE,EAAYpE,aAAe,CACzBH,QAAS,sCACT+E,SAAU,CACR,CACE3F,QAAS,kBAAMgB,QAAQC,IAAI,cAC3BL,QAAS,UACTmB,SAAS,IAGbkD,aAAc,8BACd/C,MAAO,OACPqC,gBAAiB,WAGJY,Q,qTCvDTU,GAAa,CACjBC,IAAKC,sBAAW,SAACjG,EAAOkG,GAAR,OAAgB,kBAAC,IAAD,OAAYlG,EAAZ,CAAmBkG,IAAKA,QACxDC,MAAOF,sBAAW,SAACjG,EAAOkG,GAAR,OAAgB,kBAAC,KAAD,OAAWlG,EAAX,CAAkBkG,IAAKA,QACzDE,MAAOH,sBAAW,SAACjG,EAAOkG,GAAR,OAAgB,kBAAC,KAAD,OAAWlG,EAAX,CAAkBkG,IAAKA,QACzDG,OAAQJ,sBAAW,SAACjG,EAAOkG,GAAR,OAAgB,kBAAC,KAAD,OAAmBlG,EAAnB,CAA0BkG,IAAKA,QAClEI,YAAaL,sBAAW,SAACjG,EAAOkG,GAAR,OACtB,kBAAC,IAAD,OAAkBlG,EAAlB,CAAyBkG,IAAKA,QAEhCK,KAAMN,sBAAW,SAACjG,EAAOkG,GAAR,OAAgB,kBAAC,KAAD,OAAUlG,EAAV,CAAiBkG,IAAKA,QACvDM,OAAQP,sBAAW,SAACjG,EAAOkG,GAAR,OAAgB,kBAAC,KAAD,OAAalG,EAAb,CAAoBkG,IAAKA,QAC5DO,OAAQR,sBAAW,SAACjG,EAAOkG,GAAR,OAAgB,kBAAC,KAAD,OAAgBlG,EAAhB,CAAuBkG,IAAKA,QAC/DQ,UAAWT,sBAAW,SAACjG,EAAOkG,GAAR,OAAgB,kBAAC,KAAD,OAAelG,EAAf,CAAsBkG,IAAKA,QACjES,SAAUV,sBAAW,SAACjG,EAAOkG,GAAR,OAAgB,kBAAC,KAAD,OAAclG,EAAd,CAAqBkG,IAAKA,QAC/DU,SAAUX,sBAAW,SAACjG,EAAOkG,GAAR,OAAgB,kBAAC,IAAD,OAAkBlG,EAAlB,CAAyBkG,IAAKA,QACnEW,aAAcZ,sBAAW,SAACjG,EAAOkG,GAAR,OACvB,kBAAC,KAAD,OAAiBlG,EAAjB,CAAwBkG,IAAKA,QAE/BY,YAAab,sBAAW,SAACjG,EAAOkG,GAAR,OAAgB,kBAAC,KAAD,OAAWlG,EAAX,CAAkBkG,IAAKA,QAC/Da,OAAQd,sBAAW,SAACjG,EAAOkG,GAAR,OAAgB,kBAAC,KAAD,OAAYlG,EAAZ,CAAmBkG,IAAKA,QAC3Dc,UAAWf,sBAAW,SAACjG,EAAOkG,GAAR,OAAgB,kBAAC,KAAD,OAAmBlG,EAAnB,CAA0BkG,IAAKA,QACrEe,gBAAiBhB,sBAAW,SAACjG,EAAOkG,GAAR,OAAgB,kBAAC,KAAD,OAAYlG,EAAZ,CAAmBkG,IAAKA,QACpEgB,WAAYjB,sBAAW,SAACjG,EAAOkG,GAAR,OAAgB,kBAAC,KAAD,OAAgBlG,EAAhB,CAAuBkG,IAAKA,SAK/DiB,GAAQ,SAACnH,GACb,OACE,kBAAC,IAAD,CACEnE,MAAOmE,EAAMnE,MACb8G,MAAO3C,EAAM2C,MACbyE,QAASpH,EAAMoH,QACflI,KAAMc,EAAMd,KACZmI,MAAOtB,GACPuB,QAAStH,EAAMsH,QACf3M,QAASqF,EAAMrF,QACf4M,WAAYvH,EAAMuH,WAClBC,aAAcxH,EAAMwH,gBAK1BL,GAAM1G,UAAY,CAChB5E,MAAO6E,IAAU3H,OACjB4J,MAAOjC,IAAUE,OACjBwG,QAAS1G,IAAU0E,MACnBlG,KAAMwB,IAAU0E,MAChBkC,QAAS5G,IAAU0E,MACnBzK,QAAS+F,IAAU3H,OACnBwO,WAAY7G,IAAU3H,OACtByO,aAAc9G,IAAU3H,QAE1BoO,GAAMlG,aAAe,CACnBpF,MAAO,GACP8G,MAAO,GACPyE,QAAS,GACTlI,KAAM,GACNoI,QAAS,GACT3M,QAAS,CACP8M,oBAAqB,EACrBC,WAAW,EACXC,UAAU,EACVC,QAAQ,EACRC,SAAS,EACTC,qBAAsB,OACtBC,QAAQ,GAEVR,WAAY,IAGCJ,U,gFCrFf,SAASa,GAAShI,GAAO,IACfQ,EAA2CR,EAA3CQ,SAAUyH,EAAiCjI,EAAjCiI,YAAa9M,EAAoB6E,EAApB7E,MAAU+M,EADlB,KAC4BlI,EAD5B,oCAGvB,OACE,kBAAC,KAAD,KACEmI,UAAU,MACVC,KAAK,WACLC,OAAQJ,IAAgB9M,EACxBJ,GAAE,mBAAcI,GAChBmN,kBAAA,cAAwBnN,IACpB+M,GAEHD,IAAgB9M,GAASqF,GAKhCwH,GAASvH,UAAY,CACnBD,SAAUE,IAAUK,KACpB5F,MAAOuF,IAAU6H,IAAI1H,WACrBoH,YAAavH,IAAU6H,IAAI1H,YAU7B,IAAMwD,GAAYC,sBAAW,SAAAC,GAAK,MAAK,CACrC5N,KAAM,CACJ6L,SAAU,EACVH,OAAQ,QAEVmG,SAAU,CACRhG,SAAU,EACVD,UAAW,EACXF,OAAQ,oBACRoG,UAAW,YAIA,SAASC,GAAK1I,GAC3B,IAAMgF,EAAUX,KADkB,EAEIT,IAAMC,SAAS7D,EAAMiI,aAFzB,WAE3BA,EAF2B,KAEdU,EAFc,KAIlC/E,IAAMG,WAAU,WACV/D,EAAMiI,cAAgBA,GACxBU,EAAe3I,EAAMiI,eAEtB,CAACjI,EAAMiI,cAMV,OACE,yBAAKhI,UAAW+E,EAAQrO,MACtB,kBAAC,KAAD,CACE2B,MAAO2P,EACPW,SARe,SAACC,EAAOC,GAC3BH,EAAeG,IAQXC,eAAe,UACfC,UAAU,WAEThJ,EAAMiJ,QAAQpK,KAAI,SAACqK,EAAK/N,GAAN,OACjB,kBAAC,KAAD,KAAKvC,IAAKuC,EAAOgO,MAAOD,EAAIC,OA3CtC,SAAmBhO,GACjB,MAAO,CACLJ,GAAI,OAAF,OAASI,GACX,mCAA6BA,IAwCgBiO,CAAUjO,SAGpD6E,EAAMiJ,QAAQpK,KAAI,SAACqK,EAAK/N,GAAN,OACjB,kBAAC6M,GAAD,CACEpP,IAAKuC,EACL8M,YAAaA,EACb9M,MAAOA,EACP8E,UAAWD,EAAMqJ,WAAarE,EAAQwD,cAAWpH,GAEhD8H,EAAIf,eAOfO,GAAKjI,UAAY,CACfwI,QAASvI,IAAU0E,MACnB6C,YAAavH,IAAU4I,OACvBD,WAAY3I,IAAUM,MAGxB0H,GAAKzH,aAAe,CAClBgI,QAAS,CACP,CAAEE,MAAO,QAAShB,UAAW,6CAC7B,CACEgB,MAAO,QACPhB,UACE,8lBAaJ,CAAEgB,MAAO,QAAShB,UAAW,8CAE/BF,YAAa,EACboB,YAAY,G,wBClHRE,GAAO,SAAAvJ,GACX,OAAO,kBAAC,KAAcA,IAGxBuJ,GAAK9I,UAAY,GACjB8I,GAAKtI,aAAe,GAELsI,U,snBCJf,IAAMlF,GAAYC,sBAAW,SAAAC,GAAK,MAAK,CACrC4E,MAAO,CACLK,WAAY,SACZC,UAAW,SACX/G,WAAY,SACZgH,SAAU,OACVC,WAAY,EACZC,YAAa,EACbC,aAAc,GAEhBC,gBAAiB,CACf3J,MAAO4J,QAAK,KACZ,iBAAkB,CAChB5J,MAAO6J,SAAM,KACb,gBAAiB,CACfvF,gBAAiBuF,SAAM,QAI7BC,SAAU,GACVC,aAAc,OAGVC,GAAS,SAAAnK,GACb,IAAMgF,EAAUX,KAChB,OACE,kBAAC,KAAD,CACE+F,QACE,kBAAC,KAAD,CACEC,QAASrK,EAAMsK,OACf1B,SAAU5I,EAAMuK,SAChBpK,MAAOH,EAAMG,MACbI,SAAUP,EAAMO,SAChB8H,OAAQrI,EAAMqI,OACdhI,KAAML,EAAMK,KACZ2E,QAAS,CACPwF,WAAYxF,EAAQ8E,gBACpBO,QAASrF,EAAQkF,aACjBO,MAAOzF,EAAQiF,YAIrBS,eAAgB1K,EAAM0K,eACtBvB,MAAOnJ,EAAMmJ,MACbnE,QAAS,CAAEmE,MAAOnE,EAAQmE,OAC1BtN,MAAK,SAAOmE,EAAMnE,OAAb,IAAoB8N,WAAY,EAAGC,YAAa,EAAGC,aAAc,OAK5EM,GAAO1J,UAAY,CACjB6J,OAAQ5J,IAAUM,KAClBuJ,SAAU7J,IAAUC,KACpBwI,MAAOzI,IAAUE,OACjBT,MAAOO,IAAUE,OACjB8J,eAAgBhK,IAAUE,OAC1B/E,MAAO6E,IAAU3H,QAEnBoR,GAAOlJ,aAAe,CACpBd,MAAO,WAGMgK,U,mjBC/Df,IAsCMQ,G,mNACUvJ,G,yBACNA,G,4BAEO,SAAAsE,GACb,EAAKkF,YAAclF,EAAI7L,OAAOvB,MAC1B,EAAK0H,MAAM6K,eACT,EAAKC,OACPC,aAAa,EAAKD,OAEpB,EAAKA,MAAQE,WAAW,EAAKC,aAAc,EAAKjL,MAAMkL,OAEtD,EAAKD,kB,4BAIM,gBACY7J,IAArB,EAAKwJ,aAA2B,EAAK5K,MAAM4I,SAAS,EAAKgC,gB,gDAGtD,MACiChM,KAAKoB,MAArCgF,EADD,EACCA,QAASnJ,EADV,EACUA,MAAOsP,EADjB,EACiBA,YACxB,OACE,yBAAKlL,UAAW+E,EAAQ4C,OAAQ/L,MAAOA,GACrC,yBAAKoE,UAAW+E,EAAQoG,YACtB,kBAAC,KAAD,OAEF,kBAAC,KAAD,CACElF,IAAKtH,KAAKyM,eACVF,YAAaA,EACbnG,QAAS,CACPrO,KAAMqO,EAAQsG,UACdC,MAAOvG,EAAQwG,YAEjBC,WAAY,CAAE,aAAc,UAC5B7C,SAAUhK,KAAK8M,oB,GAnCCC,aA0C1BhB,GAAYlK,UAAY,CACtB0K,YAAazK,IAAUE,OACvBgI,SAAUlI,IAAUC,KACpBuK,KAAMxK,IAAU4I,OAChBuB,cAAenK,IAAUM,KACzBnF,MAAO6E,IAAU3H,QAGnB4R,GAAY1J,aAAe,CACzBkK,YAAa,YACbvC,SAAU,SAAA2C,GACRrK,QAAQC,IAAIoK,IAEdL,KAAM,IACNL,eAAe,EACfhP,MAAO,IAGM+P,6BAlGA,SAAArH,GAAK,MAAK,CACvBqD,OAAQ,KACNtG,SAAU,WACVuK,aAActH,EAAMuH,MAAMD,aAC1BpH,gBAAiBsH,eAAKxH,EAAMyH,QAAQC,OAAOC,MAAO,KAClD,UAAW,CACTzH,gBAAiBsH,eAAKxH,EAAMyH,QAAQC,OAAOC,MAAO,MAEpDtC,YAAarF,EAAM4H,QAAQ,GAC3BxC,WAAY,EACZvH,MAAO,QACNmC,EAAM6H,YAAYC,GAAG,MAAQ,CAC5B1C,WAAYpF,EAAM4H,QAAQ,GAC1B/J,MAAO,SAGXgJ,WAAY,CACVhJ,MAAOmC,EAAM4H,QAAQ,GACrB9J,OAAQ,OACRf,SAAU,WACVgL,cAAe,OACf9K,QAAS,OACTU,WAAY,SACZC,eAAgB,UAElBmJ,UAAW,CACTnL,MAAO,WAETqL,WAAY,KACV/I,QAAS8B,EAAM4H,QAAQ,EAAG,EAAG,EAAG,GAChCI,WAAYhI,EAAMiI,YAAY7T,OAAO,SACrCyJ,MAAO,QACNmC,EAAM6H,YAAYC,GAAG,MAAQ,CAC5BjK,MAAO,SAiEqB,CAAEqK,WAAW,GAAhCb,CAAwCjB,I,wCCjGjDtG,GAAYC,sBAAW,SAAAC,GAAK,MAAK,CACrC5N,KAAM,CACJ,YAAa,CACX+V,UAAWnI,EAAM4H,QAAQ,KAG7BQ,KAAM,CACJjD,SAAU,OACVhH,WAAY,IACZ8G,WAAY,SACZ,UAAW,CACToD,OAAQ,UACRC,eAAgB,cAGpBC,UAAW,CACTpD,SAAU,OACVhH,WAAY,IACZ8G,WAAY,cAIVuD,GAAa,SAAA/M,GACjB,IAAMgF,EAAUX,KAChB,OACE,yBAAKpE,UAAW+E,EAAQrO,MACtB,kBAAC,KAAD,CACEqW,UAAW,kBAAC,KAAD,CAAkBtD,SAAS,UACtCuD,aAAW,aACXpR,MAAOmE,EAAMnE,OAEZmE,EAAMkN,SAASrO,KAAI,SAACiC,EAAS3F,GAC5B,GAAI6E,EAAMkN,SAAS1S,OAAS,IAAMW,EAChC,OACE,kBAAC,KAAD,CACEvC,IAAKuC,EACLgF,MAAM,UACNC,QAAQ,UACRH,UAAW+E,EAAQ2H,KACnBzM,QAASY,EAAO,UAEfA,EAAQqI,UAKjB,kBAAC,KAAD,CAAYhJ,MAAM,cAAcF,UAAW+E,EAAQ8H,WAChD9M,EAAMkN,SAASlN,EAAMkN,SAAS1S,OAAS,GAAG2O,UAOrD4D,GAAWtM,UAAY,CACrByM,SAAUxM,IAAU0E,OAGtB2H,GAAW9L,aAAe,CACxBiM,SAAU,CACR,CAAE/D,MAAO,SAAUgE,SAAU,kBAAMjM,QAAQC,IAAI,WAC/C,CAAEgI,MAAO,OAAQgE,SAAU,kBAAMjM,QAAQC,IAAI,iBAC7C,CAAEgI,MAAO,cAIE4D,U,6pBC/Df,IAAMK,GAAa,CACjB5L,QAAS,OACTC,cAAe,SACfe,SAAU,GAGN6K,GAAa,SAAArN,GACjB,IAAMsN,EAAcC,iBAAO,MAEzBC,EASExN,EATFwN,UACAC,EAQEzN,EARFyN,cACAC,EAOE1N,EAPF0N,mBACAC,EAME3N,EANF2N,aACAC,EAKE5N,EALF4N,SAEAC,GAGE7N,EAJF8N,aAIE9N,EAHF6N,WACAE,EAEE/N,EAFF+N,aACGC,EAXqB,KAYtBhO,EAZsB,0HAcE6D,oBAAS,GAdX,WAcnBoK,EAdmB,KAcXC,EAdW,OAeArK,mBAAS,MAfT,WAenBsK,EAfmB,KAeZC,EAfY,OAgBFvK,mBAAS,CAAEzB,MAAO,IAAKC,OAAQ,MAhB7B,WAgBnBhC,EAhBmB,KAgBbgO,EAhBa,KAkB1BtK,qBAAU,WACR,IAAKkK,EAAQ,CACXC,GAAU,GACV,IAAMI,EAAS,IAAIC,UACjBjB,EAAYkB,QACZhB,EACAC,EACAC,GAEIS,EAAQJ,EACVA,EAAaO,GACb,IAAIG,SAAMH,EAAQX,GAOtB,GANAS,EAASD,GACLA,EAAMO,UACR1O,EAAM8N,aAAaK,GAEnBA,EAAMQ,kBAAkBC,SAAQ,SAAAT,GAAK,OAAInO,EAAM8N,aAAaK,OAEzDN,EAAW,OAChBS,EAAOO,eAAc,WACK,mBAAbjB,GACTA,EAASO,GAEXA,EAAMW,YAIV,OAAO,WACS,OAAVX,GAAgBA,EAAMY,aAE3B,CAACzB,IAWJ,OADAW,GAAUX,EAAYkB,QAAQQ,QAE5B,yBAAKnT,MAAK,MAAOuR,KACf,gCACElH,IAAKoH,EACLlL,MAAO/B,EAAK+B,MACZC,OAAQhC,EAAKgC,QACT2L,IAEN,kBAAC,KAAD,CAAqBiB,aAAW,EAACC,cAAY,EAACC,SAjBjC,SAAC/M,EAAOC,GACvBgM,EAAQ,CACNjM,QACAC,OAAQA,GAAUpL,OAAOmY,YAAc/M,EAA8B,IAArBpL,OAAOmY,cAEzDjB,GAASA,EAAMkB,YAAYC,cAiB/BjC,GAAW5M,UAAY,CACrB+M,UAAW9M,IAAUM,KACrByM,cAAe/M,IAAU3H,OACzB2U,mBAAoBhN,IAAUM,KAC9B2M,aAAcjN,IAAU3H,OACxB+U,aAAcpN,IAAUC,KACxBiN,SAAUlN,IAAUC,KACpBkN,UAAWnN,IAAUM,KACrB+M,aAAcrN,IAAUC,MAG1B0M,GAAWpM,aAAe,CACxBuM,WAAW,EACXM,aAAc,SAAAK,KACdN,WAAW,GAGER,U,4BCxGTkC,G,WACJ,WAAYC,EAAGC,GAAG,aAChB7Q,KAAK8Q,IAAM,CAACF,EAAGC,GAAG5Q,KAAI,SAAA8Q,GAAC,OAAKA,GAAQ,K,+CAYpC,OAAO/Q,KAAK8Q,M,0BAGVD,GACF,OAAO7Q,KAAKgR,GAAGH,GAAG,SAACI,EAAGC,GAAJ,OAAUD,EAAIC,O,0BAG9BL,GACF,OAAO7Q,KAAKgR,GAAGH,GAAG,SAACI,EAAGC,GAAJ,OAAUD,EAAIC,O,0BAG9BL,GACF,OAAO7Q,KAAKgR,GAAGH,GAAG,SAACI,EAAGC,GAAJ,OAAUD,EAAIC,O,0BAG9BL,GACF,OAAO7Q,KAAKgR,GAAGH,GAAG,SAACI,EAAGC,GAAJ,OAAUD,EAAIC,O,0BAG9BL,GACF,OAAO7Q,KAAK8Q,IAAI5J,QAAO,SAACiK,EAAKC,EAAG3Y,GAAT,OAAe0Y,EAAMC,EAAIP,EAAEC,IAAIrY,KAAI,K,2BAGvDoY,GACH,OAAO,IAAIF,EAAK3Q,KAAK4Q,EAAIC,EAAED,EAAI5Q,KAAK6Q,EAAIA,EAAEA,EAAG7Q,KAAK4Q,EAAIC,EAAEA,EAAI7Q,KAAK6Q,EAAIA,EAAED,K,+BAIvE,OAAOS,KAAKC,KAAKtR,KAAKuR,IAAIvR,S,kCAI1B,OAAOA,KAAKwR,MAAM,EAAIxR,KAAKpE,Y,6BAI3B,OAAO,IAAI+U,GAAM3Q,KAAK6Q,EAAG7Q,KAAK4Q,K,4BAI9B,OAAO5Q,KAAKwR,OAAO,K,6BAInB,OAAO,IAAIb,EAAK3Q,KAAK4Q,GAAI5Q,KAAK6Q,K,4BAG1BtX,GACJ,OAAOyG,KAAKC,KAAI,SAAA8Q,GAAC,OAAIA,EAAIxX,O,0BAGvBkY,GACF,OAAOd,EAAKe,UAAU1R,KAAK8Q,IAAI7Q,IAAIwR,M,yBAQlCZ,EAAGc,GACJ,OAAOhB,EAAKe,UAAU1R,KAAK8Q,IAAI7Q,KAAI,SAACmR,EAAG3Y,GAAJ,OAAUkZ,EAASP,EAAGP,EAAEC,IAAIrY,U,6BAG1DmZ,EAAMC,GACX,OAAO7R,KAAK8Q,IAAI5J,OAAO0K,EAAMC,K,iCAI7B,MAAO,CAAEjB,EAAG5Q,KAAK4Q,EAAGC,EAAG7Q,KAAK6Q,K,iCAI5B,oBAAc7Q,KAAK4Q,EAAnB,eAA2B5Q,KAAK6Q,EAAhC,O,wBAjFA,OAAO7Q,KAAK8Q,IAAI,K,wBAIhB,OAAO9Q,KAAK8Q,IAAI,M,iCAgFDtK,GACf,GAAIA,EAAM5K,OAAS,EAAG,MAAM,IAAI6B,MAAM,4BACtC,OAAO,IAAIkT,EAAKnK,EAAM,GAAIA,EAAM,M,yBAGxBoK,EAAGC,GACX,OAAO,IAAIF,EAAKC,EAAGC,O,SAhGjBF,G,OAmGU,IAAIA,GAAK,EAAG,I,IAnGtBA,G,KAoGQ,IAAIA,GAAK,EAAG,I,IApGpBA,G,KAqGQ,IAAIA,GAAK,EAAG,IAGXA,UCnGTmB,G,WAEJ,WAAYtL,GAAO,WACjB,GADiB,mCA0DP,WACV,IAAM9N,EAAI,EAAKkD,SACf,GAAU,IAANlD,EAAS,MAAM,IAAI+E,MAAM,0CAC7B,OAAO,EAAK+T,MAAM,EAAI9Y,MA5DlB8N,EAAMuL,cAAgBC,OAASxL,EAAM5K,OAAS,EAChD,MAAM,IAAI6B,MAAJ,UAAa+I,EAAb,6BACRxG,KAAKiS,KAAL,KAAgBzL,G,yCAedoK,GACF,OAAO5Q,KAAKgR,GAAGJ,GAAG,SAACK,EAAGC,GAAJ,OAAUD,EAAIC,O,0BAG9BN,GACF,OAAO5Q,KAAKgR,GAAGJ,GAAG,SAACK,EAAGC,GAAJ,OAAUD,EAAIC,O,0BAG9BN,GACF,OAAO5Q,KAAKgR,GAAGJ,GAAG,SAACK,EAAGC,GAAJ,OAAUD,EAAIC,O,yBAG/BN,EAAGsB,GACJ,IAAMC,EAAM,GAIZ,OAHAA,EAAI,GAAKD,EAAUlS,KAAKiS,KAAK,GAAIrB,EAAEqB,KAAK,IACxCE,EAAI,GAAKD,EAAUlS,KAAKiS,KAAK,GAAIrB,EAAEqB,KAAK,IACxCE,EAAI,GAAKD,EAAUlS,KAAKiS,KAAK,GAAIrB,EAAEqB,KAAK,IACjC,IAAIH,EAAKK,K,4BAGZ5Y,GACJ,OAAOyG,KAAKC,KAAI,SAAA2Q,GAAC,OAAIA,EAAIrX,O,0BAGvBqX,GACF,OACE5Q,KAAKiS,KAAK,GAAKrB,EAAEqB,KAAK,GACtBjS,KAAKiS,KAAK,GAAKrB,EAAEqB,KAAK,GACtBjS,KAAKiS,KAAK,GAAKrB,EAAEqB,KAAK,K,0BAItBG,GACF,OAAO,IAAIN,EAAK9R,KAAKiS,KAAKhS,IAAImS,M,+BAI9B,OAAOf,KAAKC,KAAKtR,KAAKuR,IAAIvR,S,kCAU1B,OAAO,IAAIqS,WAAQrS,KAAKiS,KAAK,GAAIjS,KAAKiS,KAAK,GAAIjS,KAAKiS,KAAK,M,gCAIzD,OAAOjS,KAAKiS,O,+BAIZ,OAAO,IAAItB,GAAK3Q,KAAK4Q,EAAG5Q,KAAK6Q,K,6BAGxBO,GACL,OAAIA,EAAEW,cAAgB/R,KAAK+R,aACpBX,EAAEa,KACNhS,KAAI,SAAC2Q,EAAGrU,GAAJ,OAAc6U,EAAEa,KAAK1V,KAAWqU,KACpC1J,QAAO,SAAC3L,EAAG6V,GAAJ,OAAU7V,GAAK6V,KAAG,K,6BAGvBkB,EAAQC,GACb,OAAOvS,KAAKiS,KAAK/K,OAAOoL,EAAQC,K,+BAIhC,OAAOvS,KAAKkH,QAAO,SAAC+J,EAAGC,GAAJ,OAAUG,KAAKmB,IAAIvB,EAAGC,MAAKuB,OAAOC,a,+BAIrD,OAAO1S,KAAKkH,QAAO,SAAC+J,EAAGC,GAAJ,OAAUG,KAAKsB,IAAI1B,EAAGC,KAAIuB,OAAOC,a,0CAIpD,OAAO1S,KAAKiS,KAAKW,MAAK,SAAAhC,GAAC,OAAIiC,MAAMjC,KAAOkC,SAASlC,Q,wBAzFjD,OAAO5Q,KAAKiS,KAAK,K,wBAIjB,OAAOjS,KAAKiS,KAAK,K,wBAIjB,OAAOjS,KAAKiS,KAAK,M,iCAoFFc,GACf,OAAO,IAAIjB,EAAK,CAACiB,EAAQnC,EAAGmC,EAAQlC,EAAGkC,EAAQhC,M,yBAGvCvK,GACR,OAAe,IAAIsL,EAAZtL,GAAmC,CAAC,EAAG,EAAG,M,gCAGlCA,GACf,OAAOsL,EAAKkB,GAAGxM,K,+BAIf,OAAO,IAAIsL,EAAK,CAAC,EAAG,EAAG,GAAG7R,IAAIoR,KAAK4B,a,gDAOJC,GAI/B,IAHA,IAAMC,EAAiB,CAACrB,EAAKsB,GAAItB,EAAKuB,GAAIvB,EAAKwB,IAE3CC,EAAQ,EACH9a,EAAI,EAAGA,EAAI,EAAGA,IACrB,GAAkB,IAAdya,EAAEjB,KAAKxZ,GAAU,CACnB8a,EAAQ9a,EACR,MAGJ,IAAI2Y,EAAI+B,GAAgBI,EAAQ,GAAK,GAAGC,IACtCL,EAAeI,GAAO/B,OAAO0B,EAAEjB,MAAMsB,EAAQ,GAAK,GAAKL,EAAEjB,KAAKsB,KAEhEnC,EAAIA,EAAEqC,YACN,IAAIC,EAAIP,GAAgBI,EAAQ,GAAK,GAAGC,IACtCL,EAAeI,GAAO/B,OAAO0B,EAAEjB,MAAMsB,EAAQ,GAAK,GAAKL,EAAEjB,KAAKsB,KAIhE,OADAG,GADAA,EAAIA,EAAED,aACAE,IAAIvC,EAAEI,MAAMJ,EAAEG,IAAImC,KACjB,CAAER,EAAGA,EAAEO,YAAarC,EAAGA,EAAGsC,EAAGA,EAAED,iB,SA5IpC3B,G,OA+IUA,GAAKkB,GAAG,CAAC,EAAG,EAAG,K,IA/IzBlB,G,OAgJUA,GAAKkB,GAAG,CAAC,EAAG,EAAG,K,IAhJzBlB,G,KAiJQ,IAAIA,GAAK,CAAC,EAAG,EAAG,K,IAjJxBA,G,KAkJQ,IAAIA,GAAK,CAAC,EAAG,EAAG,K,IAlJxBA,G,KAmJQ,IAAIA,GAAK,CAAC,EAAG,EAAG,KAGfA,U,SC1JT8B,G,WACJ,aAAc,WACZ,GADY,wCAaG,kBAAM,EAAKC,eAZtBC,GAAU,OAAOA,GACrBA,GAAW9T,KACXA,KAAK6T,YAAc,GACnB7T,KAAK+T,UAAY,G,4CAajB,OADA/T,KAAKgU,4BACEhU,O,mCAMIyR,GAEX,OADAzR,KAAK+T,UAAUjX,KAAK2U,GACbzR,O,kDASmB,WAC1BiU,YAASC,UACP,CAAEC,MAAO,aAAcC,KAAM,MAC7B,SAAA9T,GACEgC,QAAQC,IAAI,oBAAqBjC,GACjC,IAAM+T,EAAY,CAChBC,IAAK,SAAAC,GAAU,OAAI,EAAKC,cAAcD,IACtCE,IAAK,SAAAF,GAAU,OAAI,EAAKG,cAAcH,KAElCA,EAAajU,EAAKtG,IAAI2a,WACxBrU,EAAK2J,SAASoK,IAChBA,EAAU/T,EAAK2J,OAAOsK,GACtB,EAAKR,UAAUzW,SAAQ,SAAA8U,GAAC,OAAIA,EAAE,UAGlC,SAAA9R,GACEgC,QAAQC,IAAI,mBAAoBjC,GAChC,IAAMiU,EAAajU,EAAK5G,MAAMib,WAC9B,EAAKD,cAAcH,Q,oCAKXA,GAAY,WACxB,GAAKA,EAAL,CACA,IAAMK,EAAezb,OAAOkE,KAAKkX,GAAYrN,QAAO,SAAC3L,EAAGqV,GAEtD,OADArV,EAAEuB,KAAK8T,GACArV,IACN,IACHpC,OAAOkE,KAAK2C,KAAK6T,aAAavW,SAAQ,SAAAuX,GACpC,IAAMnb,EAAQ,EAAKma,YAAYgB,GAC/Bnb,EAAMob,MAAQpb,EAAMob,MAAMhX,QAAO,SAAA8S,GAAC,OAAKgE,EAAaG,SAASnE,MAC7DlX,EAAMsb,OAAStb,EAAMsb,OAAOlX,QAAO,SAAA8S,GAAC,OAAKgE,EAAaG,SAASnE,Y,oCAIrD2D,GAAY,WACnBA,GACLpb,OAAOkE,KAAKkX,GAAYjX,SAAQ,SAAAtE,GAC9B,IAAMic,EAAgBV,EAAWvb,GACjC,GAAKic,EAAcC,KAAnB,CACA,IAAMC,EAAOF,EAAcC,KAAKE,cAC1B7K,EAAQ0K,EAAcI,MACtBF,KAAQ,EAAKtB,cACjB,EAAKA,YAAYsB,GAAQ,CAAEL,MAAO,GAAIE,OAAQ,KAEhD,EAAKnB,YAAYsB,GAAML,MAAMhY,KAAK9D,GAClC,EAAK6a,YAAYsB,GAAMH,OAAOlY,KAAKyN,GAAgBvR,U,qCAWrD,OAAO,IAAI4a,I,uCAIX,OAAOA,EAAkB0B,cAAcC,qB,KAGvCzB,GAAW,KACAF,MCnGM4B,G,oFACP9b,GACV+b,aAAKC,MAJa,QAIQhc,K,8BAG1B,OAAO+b,aAAKE,KAPM,a,8kBCKdC,GAAeC,SAAfD,WAEFE,G,WACJ,WAAYC,GAAwB,IAAlBC,EAAkB,uDAAJ,GAAI,iCA4K1B,kBAAMF,EAASG,QA3KvBjW,KAAKhH,KAAO+c,EAAK/c,KACjBgH,KAAK+V,KAAOA,EACZ/V,KAAK+V,KAAKG,uBAAyBlW,KAAKkW,uBACxClW,KAAK+V,KAAKI,SAAWnW,KACrBA,KAAKgW,YAAcA,EAEnBpC,GAAkB0B,c,+CAIlBtV,KAAK+V,KAAK5F,Y,+BAGH,WACP,MAAO,CACLnX,KAAMgH,KAAKhH,KACXmc,KAAMnV,KAAKoW,UACX1T,SAAUoP,GAAKuE,UAAUrW,KAAK+V,KAAKrT,UAAU4T,UAC7CC,WAAYC,SAAMC,SAASzW,KAAK+V,KAAKW,oBAClCzW,KAAI,SAAA2Q,GAAC,MAAI,CAACA,EAAE8C,EAAG9C,EAAEA,EAAGA,EAAEC,EAAGD,EAAEG,MAC3B4F,QAAO,WACN,IAAMC,EAAIC,cAAWC,qBACnB,EAAKf,KAAKgB,SAASlG,EACnB,EAAKkF,KAAKgB,SAASnG,EACnB,EAAKmF,KAAKgB,SAAShG,GAErB,MAAO,CAAC6F,EAAElD,EAAGkD,EAAEhG,EAAGgG,EAAE/F,EAAG+F,EAAE7F,MAE7BxP,MAAOiV,SAAMC,SAASzW,KAAK+V,KAAKiB,UAC7BC,SAAQ,SAAArG,GAAC,OAAI4F,SAAMC,SAAS7F,EAAEsG,cAAcjX,KAAI,SAAA8Q,GAAC,MAAI,CAACA,EAAExX,EAAGwX,EAAEoG,EAAGpG,EAAEG,SAClEkG,OAAO,CAAC,EAAG,EAAG,IACjBpB,YAAahW,KAAKgW,YAClBqB,UAAWrX,KAAK+V,KAAKuB,e,+BAQvB,IAAMC,EAAOvX,KAAKwX,SACZjW,EAAQ,IAAIkW,UAAOF,EAAKhW,MAAM,GAAIgW,EAAKhW,MAAM,GAAIgW,EAAKhW,MAAM,IAC5DmW,EAAS,CACbC,WAAY,CACVxC,KAAM,SACNyC,WAAY,CACVC,QAAS,CACP1C,KAAM,UAERnc,KAAM,CACJmc,KAAM,SACNpR,MAAO,QAEToR,KAAM,CACJA,KAAM,SACNpR,MAAO,QAETrB,SAAU,CACRyS,KAAM,SACNpR,MAAO,WACP6T,WAAY,CACVhH,EAAG,CACDuE,KAAM,SACNpR,MAAO,KAET8M,EAAG,CACDsE,KAAM,SACNpR,MAAO,KAETgN,EAAG,CACDoE,KAAM,SACNpR,MAAO,OAIbwS,WAAY,CACVpB,KAAM,SACNpR,MAAO,cACP6T,WAAY,CACVlE,EAAG,CACDyB,KAAM,SACNpR,MAAO,KAET6M,EAAG,CACDuE,KAAM,SACNpR,MAAO,KAET8M,EAAG,CACDsE,KAAM,SACNpR,MAAO,KAETgN,EAAG,CACDoE,KAAM,SACNpR,MAAO,OAIbxC,MAAO,CACL4T,KAAM,SACNpR,MAAO,WAIb+T,SAAU,CACR3C,KAAM,CACJ,eAAe,GAEjB5T,MAAO,CACL,YAAa,SAEfsW,QAAS,CACP,YAAa,UAEfnV,SAAU,CACR,YAAa,YAEf6T,WAAY,CACV,YAAa,aAGjBjW,KAAM,CACJuX,QAASN,EAAKve,KACdA,KAAMue,EAAKve,KACXmc,KAAMoC,EAAKpC,KACXzS,SAAU,CACRkO,EAAG2G,EAAK7U,SAAS,GACjBmO,EAAG0G,EAAK7U,SAAS,GACjBqO,EAAGwG,EAAK7U,SAAS,IAEnB6T,WAAY,CACV7C,EAAG6D,EAAKhB,WAAW,GACnB3F,EAAG2G,EAAKhB,WAAW,GACnB1F,EAAG0G,EAAKhB,WAAW,GACnBxF,EAAGwG,EAAKhB,WAAW,IAErBhV,MAAOA,EAAMwW,gBAKjB,OADAjC,EAASkC,oBAAoBN,EAAQ1X,KAAKgW,aACnC0B,I,6BASFO,GAAM,WACXjY,KAAKhH,KAAOif,EAAKjf,KACjBgH,KAAK+V,KAAK/c,KAAOif,EAAKjf,KAEtBwd,SAAMC,SAASwB,EAAKvV,UAAUpF,SAAQ,SAAAoF,GACpC,EAAKqT,KAAKrT,SAAW,IAAI2P,WAAQ3P,EAASkO,EAAGlO,EAASmO,EAAGnO,EAASqO,MAEpEyF,SAAMC,SAASwB,EAAK1B,YAAYjZ,SAAQ,SAAAiZ,GACtC,EAAKR,KAAKW,mBAAqB,IAAIG,cACjCN,EAAW3F,EACX2F,EAAW1F,EACX0F,EAAWxF,EACXwF,EAAW7C,GACXD,eAEAzT,KAAK+V,KAAKiB,WACZhX,KAAK+V,KAAKiB,SAASE,aAAeO,UAAOS,cAAcD,EAAK1W,OAC5DvB,KAAK+V,KAAKiB,SAASmB,cAAgBV,UAAOS,cAAcD,EAAK1W,QAE/DvB,KAAKgW,YAAL,MAAwBiC,EAAKpE,e,6CAKRuE,GAAU,WAC/B,MAAO,CACL,CACErU,MAAO,OACPzC,QAAS,kBAEPkU,GAAU6C,MAAK,SAACC,EAAkBC,GAAnB,OAEbA,EAAaC,iBAAiBlb,SAAQ,YAAe,IAAZiS,EAAY,EAAZA,MACzBkJ,EAAaF,EAAaG,cAAhCxc,KACFA,EAAO,EAAKia,SACZwC,EAAWzc,EAAKsb,SACtBmB,EAAS3f,MAAQ,IACjB,IAAM4f,EAAc9G,GAAKuE,UAAUiC,GAAkBhC,UAErDsC,EAAY,GAAKD,EAASjW,SAAS,GACnCiW,EAASjW,SAAWkW,EACpB,IAAMC,EAAiB3c,EAAK4c,OAAOvJ,EAAOoJ,EAAUJ,GACvBM,EAArB9C,KACGgD,OAASN,EAAS1C,KAC7BwC,EAAaS,iBAAiBH,WAItC,CACE9U,MAAO,SACPzC,QAAS,kBAAM8W,EAASa,4BAA4B,EAAKjgB,Y,oCAQ3CkgB,EAAMnD,GACxB,IAAKA,EAAM,KAAM,wBA2BjB,OA1BAS,SAAMC,SAASyC,GAAM5b,SAAQ,SAAA6b,GAC3B3C,SAAMC,SAASyC,EAAKlgB,MAAMsE,SAAQ,SAAAtE,GAAI,OAAK+c,EAAK/c,KAAOA,KACvDwd,SAAMC,SAAS0C,EAASzW,UAAUpF,SAChC,SAAAoF,GAAQ,OAAKqT,EAAKrT,SAAWoP,GAAKkB,GAAGtQ,GAAU0W,eAEjD5C,SAAMC,SAAS0C,EAAS5C,YAAYjZ,SAAQ,SAAAiZ,GAC1C,IAAM8C,EAAoB,IAAIxC,cAC5BN,EAAW,GACXA,EAAW,GACXA,EAAW,GACXA,EAAW,IAEbR,EAAKW,mBAAqB2C,EAAkB5F,eAE9C+C,SAAMC,SAAS0C,EAAS5X,OAAOjE,SAAQ,SAAAiE,GACrC,IAAM+X,EAAe,IAAI7B,UAAOlW,EAAM,GAAIA,EAAM,GAAIA,EAAM,IAC1DiV,SAAMC,SAASV,EAAKiB,UAAU1Z,SAAQ,SAAA0Z,GACpCR,SAAMC,SAASO,EAASE,cAAc5Z,SACpC,SAAAyT,GAAC,OAAKgF,EAAKiB,SAASE,aAAeoC,KAErC9C,SAAMC,SAASO,EAASmB,eAAe7a,SACrC,SAAAyT,GAAC,OAAKgF,EAAKiB,SAASmB,cAAgBmB,cAKrCvD,I,0CAIkB2B,GAA0B,IAAlB1B,EAAkB,uDAAJ,GAC/C0B,EAAOC,WAAWC,WAAW/D,YAAc,CACzC9P,MAAO,cACPoR,KAAM,SACNyC,WAAY,IAEdF,EAAOI,SAASjE,YAAc,CAC5B,YAAa,YAEf6D,EAAOpX,KAAP,kBAAkC0V,GAClC,IAAMnC,EAAcD,GAAkB2B,iBACtCpc,OAAOkE,KAAKwW,GAAavW,SAAQ,SAAAiX,GAC3BV,EAAYU,GAAYS,OAAOpZ,OAAS,IAC1C8b,EAAOC,WAAWC,WAAW/D,YAAY+D,WAAWrD,GAAc,CAChExQ,MAAO6R,GAAWrB,GAClBY,KAAM,SACNoE,UAAW1F,EAAYU,GAAYS,OACnCwE,KAAM3F,EAAYU,GAAYO,e,SAlQlCgB,G,OA8MU,YA2DDA,UC9LA2D,G,WAhFb,WAAYC,EAAIC,EAAIC,GAAI,aAEtB,IADA,IAAMxI,EAAI,CAACsI,EAAIC,EAAIC,GACVnhB,EAAI,EAAGA,EAAI2Y,EAAExV,OAAQnD,IAC5B,GAAI2Y,EAAE3Y,GAAGsZ,cAAgBC,OAASZ,EAAE3Y,GAAGmD,OAAS,EAC9C,MAAM6B,MAAM,oCAEhBuC,KAAK6Z,KAAOzI,EAAEnR,KAAI,SAAA2Q,GAAC,OAAI,IAAIkB,GAAKlB,M,6CAS1BQ,GAEN,IADA,IAAIe,EAAM,IAAIL,GAAK,CAAC,EAAG,EAAG,IACjBrZ,EAAI,EAAGA,EAAIuH,KAAK6Z,KAAKje,OAAQnD,IACpC0Z,EAAMA,EAAIqB,IAAIxT,KAAK6Z,KAAKphB,GAAG+Y,MAAMJ,EAAEa,KAAKxZ,KAE1C,OAAO0Z,I,6BAOFf,GAEL,IADA,IAAMe,EAAM,CAAC,EAAG,EAAG,GACV1Z,EAAI,EAAGA,EAAIuH,KAAK6Z,KAAKje,OAAQnD,IACpC0Z,EAAI1Z,GAAKuH,KAAK6Z,KAAKphB,GAAG8Y,IAAIH,GAE5B,OAAO,IAAIU,GAAKK,K,2BAGbtZ,GACH,IAAMqa,EAAIlT,KAAK8Z,QAAQjhB,EAAEghB,KAAK,IACxBzI,EAAIpR,KAAK8Z,QAAQjhB,EAAEghB,KAAK,IACxBnG,EAAI1T,KAAK8Z,QAAQjhB,EAAEghB,KAAK,IAC9B,OAAO,IAAIJ,EAAKvG,EAAEjB,KAAMb,EAAEa,KAAMyB,EAAEzB,Q,0BAGhCpZ,GACF,IAAMqa,EAAIlT,KAAK+Z,OAAOlhB,EAAEghB,KAAK,IACvBzI,EAAIpR,KAAK+Z,OAAOlhB,EAAEghB,KAAK,IACvBnG,EAAI1T,KAAK+Z,OAAOlhB,EAAEghB,KAAK,IAC7B,OAAO,IAAIJ,EAAKvG,EAAEjB,KAAMb,EAAEa,KAAMyB,EAAEzB,Q,0BAGhCG,GACF,IAAMc,EAAIlT,KAAK6Z,KAAK,GAAG5Z,IAAImS,GACrBhB,EAAIpR,KAAK6Z,KAAK,GAAG5Z,IAAImS,GACrBsB,EAAI1T,KAAK6Z,KAAK,GAAG5Z,IAAImS,GAC3B,OAAO,IAAIqH,EAAKvG,EAAEjB,KAAMb,EAAEa,KAAMyB,EAAEzB,Q,6BAG7B+H,GACL,OAAIA,EAAIjI,cAAgB/R,KAAK+R,aACtB/R,KAAK6Z,KACT5Z,KAAI,SAACmR,EAAG7U,GAAJ,OAAc6U,EAAE6I,OAAOD,EAAIH,KAAKtd,OACpC2K,QAAO,SAAC3L,EAAG6V,GAAJ,OAAU7V,GAAK6V,KAAG,M,uCAGP8I,GACrB,IAAMC,EAAWC,UAAOC,eAAeH,GAIvC,OAAO,IAAIT,EAHD,CAACU,EAAS,GAAIA,EAAS,GAAIA,EAAS,IACpC,CAACA,EAAS,GAAIA,EAAS,GAAIA,EAAS,IACpC,CAACA,EAAS,GAAIA,EAAS,GAAIA,EAAS,O,yBAItCT,EAAIC,EAAIC,GAChB,OAAO,IAAIH,EAAKC,EAAIC,EAAIC,K,4BAIxB,OAAO,IAAIH,EAAK,CAAC,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,Q,KChClCa,G,WA7Cb,WAAY/K,GAAO,aACjBvP,KAAKua,OAAShL,EACdvP,KAAKwa,aAAc,EACnBxa,KAAKya,aAAc,EACnBza,KAAK0a,gBAAiB,EACtB1a,KAAK2a,UAAW,EAChB3a,KAAK4a,2BAA4B,E,gDAGxBxJ,GAET,OADApR,KAAKwa,YAAcpJ,EACZpR,O,iCAGEoR,GAET,OADApR,KAAKya,YAAcrJ,EACZpR,O,oCAGKoR,GAEZ,OADApR,KAAK0a,eAAiBtJ,EACfpR,O,8BAGDoR,GAEN,OADApR,KAAK2a,SAAWvJ,EACTpR,O,+CAGgBoR,GAEvB,OADApR,KAAK4a,0BAA4BxJ,EAC1BpR,O,8BAIP,IAAM6a,EAAe,IAAIC,gBAAa9a,KAAKua,QAM3C,OALAM,EAAaE,qBAAuB/a,KAAKwa,YACzCK,EAAaG,qBAAuBhb,KAAKya,YACzCI,EAAaI,wBAA0Bjb,KAAK0a,eAC5CG,EAAaK,kBAAoBlb,KAAK2a,SACtCE,EAAaM,yBAA2Bnb,KAAK4a,0BACtCC,M,KCFIO,G,WAvCb,WAAY7L,GAAO,aACjBvP,KAAKua,OAAShL,EACdvP,KAAKqb,sBAAwB,KAC7Brb,KAAKsb,QAAU,KACftb,KAAKub,MAAL,gBAAsBlK,KAAKmK,MAAsB,IAAhBnK,KAAK4B,W,0CAGnCja,GAEH,OADAgH,KAAKub,MAAQviB,EACNgH,O,2CAGYyb,GAEnB,OADAzb,KAAKqb,sBAAwBI,EACtBzb,O,6BAGF/E,GAEL,OADA+E,KAAKsb,QAAUrgB,EACR+E,O,8BASP,OALkB7G,OAAOuiB,OAAO1b,MACtB1C,SAAQ,SAAAsT,GAChB,GAAU,OAANA,EACF,KAAM,sDAAN,OAA4DA,MAEzD,IAAI+K,mBACT3b,KAAKub,MACLvb,KAAKqb,sBAAsBzK,EAC3B5Q,KAAKqb,sBAAsBxK,EAC3B7Q,KAAKqb,sBAAsBtK,EAC3B/Q,KAAKsb,QACLtb,KAAKua,Y,KCAIqB,G,WAlCb,WAAYrM,GAAO,aACjBvP,KAAKua,OAAShL,EACdvP,KAAK6b,UAAY,KACjB7b,KAAKub,MAAL,eAAqBlK,KAAKmK,MAAsB,IAAhBnK,KAAK4B,WACrCjT,KAAK8b,WAAa,E,8CAGXpZ,GAEP,OADA1C,KAAK6b,UAAYnZ,EACV1C,O,2BAGJhH,GAEH,OADAgH,KAAKub,MAAQviB,EACNgH,O,gCAGC+b,GAER,OADA/b,KAAK8b,WAAaC,EACX/b,O,8BAIW7G,OAAOuiB,OAAO1b,MACtB1C,SAAQ,SAAAsT,GAChB,GAAU,OAANA,EACF,KAAM,qDAAN,OAA2DA,MAE/D,IAAMoL,EAAQ,IAAIC,cAAWjc,KAAKub,MAAOvb,KAAK6b,UAAW7b,KAAKua,QAE9D,OADAyB,EAAMD,UAAY/b,KAAK8b,WAChBE,M,KCuDIE,G,WAtFb,WAAY3M,GAAO,aACjBvP,KAAKua,OAAShL,EACdvP,KAAKub,MAAL,qBAA2BlK,KAAKmK,MAAsB,IAAhBnK,KAAK4B,WAC3CjT,KAAKmc,aAAc,EACnBnc,KAAKoc,WAAa,CAAE/E,WAAW,EAAM5V,KAAM,KAC3CzB,KAAKqc,MAAQ,E,0CAGVrjB,GAEH,OADAgH,KAAKub,MAAQviB,EACNgH,O,iCAGEsc,GAET,OADAtc,KAAKmc,YAAcG,EACZtc,O,gCAGCuc,GAER,OADAvc,KAAKoc,WAAaG,EACXvc,O,2BAGJyB,GAEH,OADAzB,KAAKqc,MAAQ5a,EACNzB,O,8BAIP,IAAMyB,EAAOzB,KAAKqc,MACZG,EAAQC,QAAKC,YAAL,eACJ1c,KAAKub,OACb,CACE,IAAIlJ,WAAQsK,KACZ,IAAItK,WAAQ5Q,EAAM,EAAG,GACrB,IAAI4Q,WAAe,IAAP5Q,EAAa,IAAOA,EAAM,GACtC,IAAI4Q,WAAQ5Q,EAAM,EAAG,GACrB,IAAI4Q,WAAe,IAAP5Q,GAAc,IAAOA,EAAM,IAEzCzB,KAAKua,QAEPiC,EAAMjb,MAAQ,IAAIkW,UAAO,EAAG,EAAG,GAC/B+E,EAAMF,YAAa,EACnB,IAAMM,EAAQH,QAAKC,YAAL,eACJ1c,KAAKub,OACb,CACE,IAAIlJ,WAAQsK,KACZ,IAAItK,WAAQ,EAAG5Q,EAAM,GACrB,IAAI4Q,YAAS,IAAO5Q,EAAa,IAAPA,EAAa,GACvC,IAAI4Q,WAAQ,EAAG5Q,EAAM,GACrB,IAAI4Q,WAAQ,IAAO5Q,EAAa,IAAPA,EAAa,IAExCzB,KAAKua,QAEPqC,EAAMrb,MAAQ,IAAIkW,UAAO,EAAG,EAAG,GAC/BmF,EAAMN,YAAa,EACnB,IAAMO,EAAQJ,QAAKC,YAAL,eACJ1c,KAAKub,OACb,CACE,IAAIlJ,WAAQsK,KACZ,IAAItK,WAAQ,EAAG,EAAG5Q,GAClB,IAAI4Q,WAAQ,GAAI,IAAO5Q,EAAa,IAAPA,GAC7B,IAAI4Q,WAAQ,EAAG,EAAG5Q,GAClB,IAAI4Q,WAAQ,EAAG,IAAO5Q,EAAa,IAAPA,IAE9BzB,KAAKua,QAEPsC,EAAMtb,MAAQ,IAAIkW,UAAO,EAAG,EAAG,GAC/BoF,EAAMP,YAAa,EAEnB,IAAMQ,EAAcC,eAAYC,UAC9Bhd,KAAKub,MACL,CAAE9Z,KAAMzB,KAAKoc,WAAW3a,MACxBzB,KAAKua,QASP,OAPAuC,EAAYzF,UAAYrX,KAAKoc,WAAW/E,UACxCyF,EAAYR,WAAatc,KAAKmc,YAE9BK,EAAMzD,OAAS+D,EACfF,EAAM7D,OAAS+D,EACfD,EAAM9D,OAAS+D,EAERA,M,KCfIG,G,WA5Db,WAAY1N,GAAO,aACjBvP,KAAKua,OAAShL,EACdvP,KAAKub,MAAL,gBAAsBlK,KAAKmK,MAAsB,IAAhBnK,KAAK4B,WACtCjT,KAAKkd,OAAS,EACdld,KAAKmd,QAAU,EACfnd,KAAKod,YAAc,KACnBpd,KAAKmc,aAAc,E,0CAGhBnjB,GAEH,OADAgH,KAAKub,MAAQviB,EACNgH,O,4BAGHwD,GAEJ,OADAxD,KAAKkd,OAAS1Z,EACPxD,O,6BAGFyD,GAEL,OADAzD,KAAKmd,QAAU1Z,EACRzD,O,iCAGEqd,GAET,OADArd,KAAKod,YAAcC,EACZrd,O,iCAGEsc,GAET,OADAtc,KAAKmc,YAAcG,EACZtc,O,8BAIP,IAAMsd,EAASb,QAAKc,aAClBvd,KAAKub,MACLvb,KAAKkd,OACLld,KAAKmd,QACL,EACAnd,KAAKua,QAgBP,OAdA+C,EAAOE,UAAU,IAAInL,WAAQ,GAAI,EAAG,GAAI,GAAMoL,SAAMC,OAChD1d,KAAKod,cACPE,EAAOtG,SAAW,IAAI2G,oBAAJ,iBACN3d,KAAKub,OACfvb,KAAKua,QAEP+C,EAAOtG,SAAS4G,eAAiB,IAAIC,WACnC7d,KAAKod,YACLpd,KAAKua,QAEP+C,EAAOtG,SAAS4G,eAAeE,OAAS,EACxCR,EAAOtG,SAAS4G,eAAeG,OAAS,GAE1CT,EAAOhB,WAAatc,KAAKmc,YAClBmB,M,KCxBIU,G,WAtCb,WAAYzO,GAAO,aACjBvP,KAAKua,OAAShL,EACdvP,KAAKie,WAAa,KAClBje,KAAKub,MAAL,gBAAsBlK,KAAKmK,MAAsB,IAAhBnK,KAAK4B,WACtCjT,KAAK8b,WAAa,E,+CAGVoC,GAER,OADAle,KAAKie,WAAaC,EACXle,O,2BAGJhH,GAEH,OADAgH,KAAKub,MAAQviB,EACNgH,O,gCAGC+b,GAER,OADA/b,KAAK8b,WAAaC,EACX/b,O,8BAIW7G,OAAOuiB,OAAO1b,MACtB1C,SAAQ,SAAAsT,GAChB,GAAU,OAANA,EACF,KAAM,qDAAN,OAA2DA,MAE/D,IAAMoL,EAAQ,IAAImC,oBAChBne,KAAKub,MACLvb,KAAKie,WAAWxK,YAChBzT,KAAKua,QAGP,OADAyB,EAAMD,UAAY/b,KAAK8b,WAChBE,M,ycChCLoC,G,kCAGJ,WAAYrI,GAAiD,MAA3CtU,EAA2C,uDAApC2c,EAAIC,aAAcrI,EAAkB,uDAAJ,GAAI,oBAC3D,cAAMD,EAAMC,GAD+C,uBAenD,kBAAMoI,EAAInI,QAblB,EAAKxU,KAAOA,EAF+C,E,8CAM3D,IAAMyX,EAAO,iDAEb,OADAA,EAAKzX,KAAOzB,KAAKyB,KACVyX,I,6BAGF3J,GAAqC,IAA9B2J,EAA8B,uDAAvB,KAAMd,EAAiB,uDAAN,KACpC,OAAOgG,EAAItF,OAAOvJ,EAAO2J,EAAMd,M,8BAOnB7I,GAAqC,IAA9B2J,EAA8B,uDAAvB,KACpBoF,EAAY9H,SAAMC,SAASyC,GAC3BzX,EAAO6c,EACVrH,SAAQ,SAAClG,GAAD,OAAOyF,SAAMC,SAAS1F,EAAEtP,SAChC2V,OAAOgH,EAAIC,cACRrlB,EAAOslB,EACVrH,SAAQ,SAAClG,GAAD,OAAOyF,SAAMC,SAAS1F,EAAE/X,SAChCoe,OAFU,aAEG/F,KAAKmK,MAAsB,IAAhBnK,KAAK4B,YAC1B+C,EAAcsI,EACjBrH,SAAQ,SAACle,GAAD,OAAOyd,SAAMC,SAAS1d,EAAEid,gBAChCuI,cAEGC,EAAUC,GAAOC,UACrBnP,EACA,IAAIkI,UAAOpG,KAAK4B,SAAU5B,KAAK4B,SAAU5B,KAAK4B,UAC9CxR,EACAzI,GAGF,OADA8c,GAAS6I,aAAazF,EAAMsF,GACrB,IAAIJ,EAAII,EAAS/c,EAAMuU,O,GAzChBF,I,IAAZsI,G,eACkB,I,IADlBA,G,OAoBU,OAyBDA,UCzBTK,G,mGACuB1I,EAAM6I,GAC/B,GAAI7I,EAAKgD,QAAUhD,EAAKgD,OAAO/f,OAAS6lB,GAAUC,KAChD,OAAOhN,GAAKuE,UAAUuI,GACxB,IAAMG,EAAahJ,EAAKgD,OAClBiG,EAAgBlN,GAAKuE,UAAU0I,EAAWrc,UAC1Cuc,EAAmBR,EAAOS,kBAAkBH,GAC5CI,EAAoBrN,GAAKuE,UAAU0I,EAAWK,SACpD,OAAOH,EACJnF,QACCqF,EAAkBE,IAChBZ,EAAOa,oBAAoBvJ,EAAKgD,OAAQ6F,KAG3CpL,IAAIwL,K,4CAGoBO,GAC3B,OAAOV,GAAUW,mBAAmBD,K,mDAQFxJ,EAAM0J,GACxC,GAAI1J,EAAKgD,QAAUhD,EAAKgD,OAAO/f,OAAS6lB,GAAUC,KAChD,OAAOhN,GAAKuE,UAAUoJ,GACxB,IAAMV,EAAahJ,EAAKgD,OAClBiG,EAAgBlN,GAAKuE,UAAU0I,EAAWrc,UAC1Cuc,EAAmBR,EAAOS,kBAAkBH,GAElD,OAD0BjN,GAAKuE,UAAU0I,EAAWK,SAEjDnf,KAAI,SAAA8Q,GAAC,OAAI,EAAIA,KACbsO,IACCJ,EAAiBlF,OACf0E,EAAOiB,6BAA6BX,EAAYU,GAAe9L,IAC7DqL,O,sDAW6BjJ,EAAM0J,GAE3C,IAAK1J,EAAKgD,OACR,OAAO0G,EAET,IAAMV,EAAahJ,EAAKgD,OAClBiG,EAAgBlN,GAAKuE,UAAU0I,EAAWrc,UAC1Cuc,EAAmBR,EAAOS,kBAAkBH,GAKlD,OAJ0BjN,GAAKuE,UAAU0I,EAAWK,SAEXnf,KAAI,SAAA2Q,GAAC,OAAI,EAAMA,KAElCyO,IACpBJ,EAAiBlF,OACf0E,EAAOkB,gCAAgCZ,EAAYU,GAAe9L,IAChEqL,O,wCAyBiBjJ,GACvB,IAAM6J,EAAsB,IAAIxF,UAC1ByF,EAAkBrJ,SAAMC,SAASV,EAAKW,oBAY5C,OAXAmJ,EAAgBviB,SAAQ,SAAAiZ,GAAU,OAChCA,EAAWuJ,iBAAiBF,MAE9BC,EAAgBE,WAAU,WACLlJ,cAAWC,qBAC5Bf,EAAKgB,SAASlG,EACdkF,EAAKgB,SAASnG,EACdmF,EAAKgB,SAAShG,GAEL+O,iBAAiBF,MAEvBnG,GAAKuG,gBAAgBJ,K,kCAGXrQ,EAAOwG,GAIxB,IAJ8D,IAAhCtU,EAAgC,uDAAzB,EAAGF,EAAsB,uDAAdkW,UAAOwI,MACjDC,EAAUnK,EAAKoK,gBAAgBC,gBAAaC,YAC5CC,EAAYvK,EAAKoK,gBAAgBC,gBAAaG,cAC9CC,EAAQ,GACL/nB,EAAI,EAAGA,EAAIynB,EAAQtkB,OAAQnD,GAAK,EAAG,CAC1C,IAAMihB,EAAKrH,WAAQoO,UAAUH,EAAW7nB,GAClCkhB,EAAKD,EAAGlG,IAAInB,WAAQoO,UAAUP,EAASznB,GAAGioB,aAAajf,IAC7D+e,EAAM1jB,KAAK,CAAC4c,EAAGlG,IAAIuC,EAAKrT,UAAWiX,EAAGnG,IAAIuC,EAAKrT,YAEjD,IAAMie,EAAc5D,eAAY6D,iBAC9B,cACA,CAAEJ,MAAOA,GACTjR,GAIF,OAFAoR,EAAYpf,MAAQA,EACpBof,EAAY5H,OAAShD,EACd4K,I,gDAGwBzN,GAS/B,IARA,IAAMC,EAAiB,CACrB,IAAId,WAAQ,EAAG,EAAG,GAClB,IAAIA,WAAQ,EAAG,EAAG,GAClB,IAAIA,WAAQ,EAAG,EAAG,IAEdwO,EAAS,CAAC3N,EAAEtC,EAAGsC,EAAErC,EAAGqC,EAAEnC,GAExBwC,EAAQ,EACH9a,EAAI,EAAGA,EAAI,EAAGA,IACrB,GAAkB,IAAdooB,EAAOpoB,GAAU,CACnB8a,EAAQ9a,EACR,MAGJ,IAAI2Y,EAAI+B,GAAgBI,EAAQ,GAAK,GAAGC,IACtCL,EAAeI,GAAO/B,OAAOqP,GAAQtN,EAAQ,GAAK,GAAKsN,EAAOtN,KAEhEnC,EAAIA,EAAEqC,YACN,IAAIC,EAAIP,GAAgBI,EAAQ,GAAK,GAAGC,IACtCL,EAAeI,GAAO/B,OAAOqP,GAAQtN,EAAQ,GAAK,GAAKsN,EAAOtN,KAIhE,OADAG,GADAA,EAAIA,EAAED,aACAqN,SAAS1P,EAAEI,MAAMa,WAAQ0O,IAAI3P,EAAGsC,KAC/B,CAAER,EAAGb,WAAQoO,UAAUI,GAAQpN,YAAarC,EAAGA,EAAGsC,EAAGA,EAAED,e,oCA+H3ClE,GACnB,OAAO,IAAI6L,GAAc7L,K,0CAGAA,GACzB,OAAO,IAAI+K,GAAoB/K,K,+CA0C/BvW,EACAuW,EACA+Q,EACAU,GAEA,IADAC,IACA,yDACMC,EAAa,IAAIC,cAEvBD,EAAWZ,UAAYA,EAAUrJ,SAAQ,SAAAlG,GAAC,MAAI,CAACA,EAAEH,EAAGG,EAAEF,EAAGE,EAAEA,MAC3DmQ,EAAWE,QAAUJ,EAAM/J,SAAQ,SAAAlG,GAAC,OAAIA,KAExC,IAAIgF,EAAO,IAAI0G,QAAKzjB,EAAMuW,GAG1B,OAFA2R,EAAWG,YAAYtL,EAAMkL,GAEtBlL,I,yCAOiBuL,GAQxB,IAPA,IAAMC,EAAgBC,KACpBF,EAAQrhB,KAAI,SAAA2Q,GAAC,MAAI,CAACA,EAAEA,EAAGA,EAAEC,EAAGD,EAAEG,MAAIkG,SAAQ,SAAArG,GAAC,OAAIA,KAC/C,KACA,GAEI6Q,EAAMF,EAAc3lB,OAAS,EAC7BuW,EAAM,GACH1Z,EAAI,EAAGA,EAAIgpB,EAAKhpB,IAAK,CAC5B,IAAMipB,EAAK,EAAIjpB,EACf0Z,EAAIrV,KAAK,CACPykB,EAAcG,GACdH,EAAcG,EAAK,GACnBH,EAAcG,EAAK,KAGvB,OAAOvP,I,yCAQiBmP,GACxB,IAAMpnB,EAAIonB,EAAQ1lB,OACZ+lB,EAAWL,EAAQrhB,KAAI,SAAA2Q,GAAC,OAAIkB,GAAKuE,UAAUzF,MAC7CgR,EAAc,EAMlB,OALAD,EAASrkB,SAAQ,SAAC2T,EAAGxY,GACnB,IACMopB,EAAOF,GADClpB,EAAI,GAAKyB,GACKyZ,IAAIgO,EAASlpB,IACzCmpB,GAAe9P,GAAKkB,GAAG,EAAE/B,EAAEJ,EAAGI,EAAEL,EAAGK,EAAEF,IAAIQ,IAAIsQ,MAExCD,EAAc,I,mCAOHE,GAClB,OAAKA,GAA0C,IAAzBA,EAAclmB,OAC7BkmB,EACJ5a,QAAO,SAAC3L,EAAGqV,GAAJ,OAAUrV,EAAEiY,IAAI5C,KAAIyB,WAAQsK,QACnCnL,MAAM,EAAIsQ,EAAclmB,QAH8ByW,WAAQsK,S,uCAM3CmF,GACtB,OAAKA,GAA0C,IAAzBA,EAAclmB,OAC7BkmB,EACJ5a,QAAO,SAAC3L,EAAGqV,GAAJ,OAAUrV,EAAEiY,IAAI5C,KAAIkB,GAAKiQ,MAChCvQ,MAAM,EAAIsQ,EAAclmB,QAH8BkW,GAAKiQ,O,oCAM3C9Q,EAAGC,GACtB,OAAO,IAAImB,WAAQoO,UACjB,CAAC,EAAG,EAAG,GAAGxgB,KAAI,SAAA2Q,GAAC,OAAIK,GAAKC,EAAID,GAAKI,KAAK4B,e,2CAKxC1R,EACAgO,GAEA,IADAvW,EACA,kFAD2BgpB,MAErBhL,EAAW,IAAI2G,oBAAiB3kB,EAAMuW,GAG5C,OAFAyH,EAASE,aAAe3V,EACxByV,EAASmB,cAAgB5W,EAClByV,M,SA5ZLyH,G,sBA0EwB,SAAAwD,GAC1B,IAAMC,EAAWD,EAAWvJ,cAAcxc,KAAK6Z,KAC/C,OAAO,SAAAoM,GACL,IAAMC,EAAY,SAAA7nB,GAAC,OACjBkkB,GAAOkB,gCACL,CAAE5G,OAAQmJ,GACVpQ,GAAKuE,UAAU9b,IACf6e,aACJ,OAAIpH,MAAMqQ,QAAQF,GACTA,EAAeliB,IAAImiB,GAErBA,EAAUD,O,IArFjB1D,G,sBAwJwB,SAC1BlP,GAkBA,IAZG,IALH2D,EAKG,uDALC,IAAIb,WAAQ,EAAG,EAAG,GACtB9Q,EAIG,uDAJKkW,UAAO6K,OACftpB,EAGG,6EAHmBgpB,MACtB1F,IAEG,yDADHiG,EACG,uDADQ,GAELC,EAAU,CACdlC,UAAW,GACXU,MAAO,IAEHjoB,EAAIma,EAAEtX,SAAW,EACjBie,EAAO4E,GAAOgE,0BAA0BvP,GACxC9B,EAAIyI,EAAKzI,EACTsC,EAAImG,EAAKnG,EAETkO,EAAcvQ,KAAKqR,KAAKrQ,WAAQ0O,IAAI1O,WAAQsQ,MAAMvR,EAAGsC,GAAIR,IAEtDza,EAAI,EAAGA,EAAI8pB,EAAU9pB,IAAK,CACjC,IAAMmqB,EAAQhB,GAAgB,EAAIvQ,KAAKwR,GAAMN,GAAY9pB,EACzD+pB,EAAQlC,UAAUxjB,KAChBsU,EAAEI,MAAMzY,EAAIsY,KAAKyR,IAAIF,IAAQpP,IAAIE,EAAElC,MAAMzY,EAAIsY,KAAK0R,IAAIH,MAI1DJ,EAAQlC,UAAUxjB,KAAKuV,WAAQsK,QAC/B6F,EAAQlC,UAAUxjB,KAAKoW,GAKvB,IAHA,IAAM8P,EAAYR,EAAQlC,UAAU1kB,OAAS,EACvCqnB,EAAST,EAAQlC,UAAU1kB,OAAS,EAEjCnD,EAAI,EAAGA,EAAI8pB,EAAU9pB,IAE5B+pB,EAAQxB,MAAMlkB,KAAK,CAACkmB,GAAYvqB,EAAI,GAAK8pB,EAAU9pB,IAEnD+pB,EAAQxB,MAAMlkB,KAAK,CAACmmB,EAAQxqB,GAAIA,EAAI,GAAK8pB,IAI3C,IAAMxM,EAAO0I,GAAOyE,yBAClBlqB,EACAuW,EACAiT,EAAQlC,UACRkC,EAAQxB,OAEVjL,EAAKoN,0BACL,IAAMnM,EAAW,IAAI2G,oBAAJ,8BAA4C3kB,GAAQuW,GAKrE,OAJAyH,EAASE,aAAe3V,EACxByV,EAASmB,cAAgB5W,EACzBwU,EAAKiB,SAAWA,EAChBjB,EAAKuG,WAAaA,EACXvG,K,IA5ML0I,G,gBA+MkB,SACpBlP,GAKG,IAJHhO,EAIG,uDAJKkW,UAAO6K,OACfc,EAGG,uDAHQ,EACXpqB,EAEG,uEAFagpB,MAChB1F,IACG,yDACG+G,EAAS5G,QAAK6G,aAAatqB,EAAM,GAAIoqB,EAAU7T,GAC/CyH,EAAWyH,GAAO8E,qBACtBhiB,EACAgO,EAFe,wBAGEvW,IAInB,OAFAqqB,EAAOrM,SAAWA,EAClBqM,EAAO/G,WAAaA,EACb+G,K,IA9NL5E,G,aAiOe,SACjBlP,GAKG,IAJHhO,EAIG,uDAJKkW,UAAO6K,OACf7gB,EAGG,uDAHI2c,GAAIC,aACXrlB,EAEG,oEAFUgpB,MACb1F,IACG,yDACGkH,EAAM/G,QAAKO,UAAUhkB,EAAMyI,EAAM8N,GACjCyH,EAAW,IAAI2G,oBAAJ,qBAAmC3kB,GAAQuW,GAK5D,OAJAyH,EAASE,aAAe3V,EACxByV,EAASmB,cAAgB5W,EACzBiiB,EAAIxM,SAAWA,EACfwM,EAAIlH,WAAaA,EACVkH,K,IA9OL/E,G,wBAiP0B,SAC5BlP,EACAkU,GAKG,IAJHliB,EAIG,uDAJKkW,UAAO6K,OACfoB,EAGG,uDAHM,EACT1qB,EAEG,qEAFWgpB,MACd1F,IACG,yDACGvG,EAAOgH,eAAY4G,WACvB3qB,EACA,CACE4qB,KAAMH,EACNC,OAAQA,EACRG,gBAAiBpH,QAAKqH,WACtB7C,WAAW,GAEb1R,GAQF,OANAwG,EAAKiB,SAAWyH,GAAO8E,qBACrBhiB,EACAgO,EAFc,kBAGHvW,IAEb+c,EAAKuG,WAAaA,EACXvG,K,IAzQL0I,G,0BA4Q4B,SAAAlP,GAC9B,OAAO,IAAIqM,GAAuBrM,M,IA7QhCkP,G,2BAgR6B,SAAAlP,GAC/B,OAAO,IAAIyO,GAAwBzO,M,IAjRjCkP,G,sBA4RwB,SAAAlP,GAC1B,OAAO,IAAI2M,GAAmB3M,M,IA7R5BkP,G,qBAuSuB,SAAUlP,EAAO+N,GAE1C,IAAMyG,EAAWxU,EAAMyU,KACrBzU,EAAM0U,SACN1U,EAAM2U,UACN,SAAAnO,GAAI,OAAIA,IAASuH,KAEnB,OAAIyG,EAASI,IAAY3N,SAAM5D,KAAKmR,EAASK,aACtC5N,SAAM6N,U,IA/SX5F,G,YAkTc,SAAClP,EAAO+N,GACxB,IAAMyG,EAAWxU,EAAMyU,KACrBzU,EAAM0U,SACN1U,EAAM2U,UACN,SAAAnO,GAAI,OAAIA,IAASuH,GAAUvH,EAAKuB,eAElC,OAAIyM,EAASI,KAAOJ,EAASO,WAAWhI,WAC/B9F,SAAM5D,KAAKmR,EAASO,YAEtB9N,SAAM6N,U,IA3TX5F,G,iBA8TmB,SAAAlP,GACrB,OAAO,IAAI0N,GAAc1N,M,IA/TvBkP,G,0BA+Z4B,SAAA8F,GAE9B,IADA,IAAIC,EAAW,EACN/rB,EAAI,EAAGA,EAAI8rB,EAAM3oB,OAAS,EAAGnD,IAAK,CAEzC+rB,GADUD,EAAM9rB,EAAI,GAAGqoB,SAASyD,EAAM9rB,IACxBmD,SAEhB,OAAO4oB,K,IAraL/F,G,wBAwa0B,SAAA8F,GAE5B,IADA,IAAME,EAAe,GACZhsB,EAAI,EAAGA,EAAI8rB,EAAM3oB,OAAS,EAAGnD,IAAK,CACzC,IAAM2Y,EAAImT,EAAM9rB,EAAI,GAAGqoB,SAASyD,EAAM9rB,IACtCgsB,EAAa3nB,KAAKuU,KAAKqT,MAAMtT,EAAEP,EAAGO,EAAER,IAGtC,OADA6T,EAAa3nB,KAAK2nB,EAAaA,EAAa7oB,OAAS,IAC9C6oB,K,IA/aLhG,G,sBAkbwB,SAAC8F,GAAwB,IAAjBI,EAAiB,uDAAN,EACvCC,GAAS,EACf,MAAO,CACLnB,OAAQoB,UAAOC,uBAAuBP,EAAOI,EAAUC,GAAQG,gB,IArb/DtG,G,mBAybqB,SAAAuG,GACvB,IAAMP,EAAehG,GAAOwG,qBAAqBD,EAAUvB,QAC3D,OAAOuB,EAAUvB,OAAOxjB,KAAI,SAAC2Q,EAAGnY,GAC9B,MAAO,CAACmY,EAAEA,EAAGA,EAAEC,EAAG4T,EAAahsB,UAKrC,IAAMupB,GAAe,WACnB,OAAO3Q,KAAKmK,MAAsB,IAAhBnK,KAAK4B,WAGVwL,M,4aCvdf,IAAMyG,IAAS7T,KAAKwR,GAAK,EACnBsC,GAAa,CACjBziB,SAAU,CAAC,EAAG,EAAG,GACjB0c,QAAS,CAAC,GAAI,EAAG,GACjB7I,WAAY,CAAClF,KAAKyR,IAAIoC,GAAQ,GAAI7T,KAAK0R,IAAImC,GAAQ,GAAI,EAAG,IAGtDrG,G,kCACJ,WAAY9I,GAAwB,MAAlBC,EAAkB,uDAAJ,GAAI,oBAClC,cAAMD,EAAMC,GADsB,uBAgB1B,kBAAM6I,EAAU5I,QAhBU,E,8CAKlC,IAAMgC,EAAO,iDAIb,OAHAA,EAAKH,SAAS9e,KAAO,CACnB,eAAe,GAEVif,I,+CAIP,MAAO,M,8BASK1I,GAAqC,IAA9B2J,EAA8B,uDAAvB,KACpBkM,EAAYvG,EAAUwG,aAAa9V,GAEnC+V,EAAgB7G,GAAO8G,mBAAmBhW,GAC7CvW,KAAK6lB,EAAUC,MACfxC,YAAW,GACXC,UAAU,CAAElF,WAAW,EAAM5V,KAAM,MACnC+jB,QAMH,OAJAF,EAAcvM,OAASqM,EAEvBtP,GAAS6I,aAAazF,EAAMoM,GAErB,IAAIzG,EACTyG,EACA9O,SAAMC,SAASyC,GACZjC,SAAQ,SAAAle,GAAC,OAAIyd,SAAMC,SAAS1d,EAAEid,gBAC9BuI,iB,mCAIahP,GAClB,IAAM6V,EAAYrI,eAAYC,UAC5B,aACA,CAAEvb,KAAM,MACR8N,GAEF6V,EAAU/N,WAAY,EACtB+N,EAAU9I,YAAa,EACvB8I,EAAU1iB,SAAWoP,GAAKkB,GAAGmS,GAAWziB,UAAU0W,YAClDgM,EAAUhG,QAAUtN,GAAKkB,GAAGmS,GAAW/F,SAAShG,YAChD,IAAM7C,EAAa,IAAIM,cACrBsO,GAAW5O,WAAW,GACtB4O,GAAW5O,WAAW,GACtB4O,GAAW5O,WAAW,GACtB4O,GAAW5O,WAAW,IAGxB,OADA6O,EAAU1O,mBAAqBH,EAAW9C,YACnC2R,I,yCASiBxU,GAMxB,IAAM2F,EAAa4O,GAAW5O,WACxBkP,EAAiBhH,GAAOS,kBAAkB,CAC9CxI,mBAAoB,IAAIG,cACtBN,EAAW,GACXA,EAAW,GACXA,EAAW,GACXA,EAAW,MAGT6I,EAAUtN,GAAKkB,GAAGmS,GAAW/F,SAASnf,KAAI,SAAA8Q,GAAC,OAAI,EAAIA,KACnD2U,EAAM5T,GAAKkB,GAAGmS,GAAWziB,UAI/B,OAHe0c,EAAQC,IACrBoG,EAAe1L,OAAOjI,GAAKuE,UAAUzF,GAAG+C,IAAI+R,KAEhCzlB,KAAI,SAAA8Q,GAAC,OAAKM,KAAKsU,IAAI5U,GAAK,KAAO,EAAIA,KAAIqI,c,yCAS7BxI,GAIxB,IAAM2F,EAAa4O,GAAW5O,WACxBkP,EAAiBhH,GAAOS,kBAAkB,CAC9CxI,mBAAoB,IAAIG,cACtBN,EAAW,GACXA,EAAW,GACXA,EAAW,GACXA,EAAW,MAGT6I,EAAUtN,GAAKkB,GAAGmS,GAAW/F,SAC7BsG,EAAM5T,GAAKkB,GAAGmS,GAAWziB,UAI/B,OAHe+iB,EACZ3L,QAAQsF,EAAQC,IAAIvN,GAAKuE,UAAUzF,KACnC4C,IAAIkS,GACOzlB,KAAI,SAAA8Q,GAAC,OAAKM,KAAKsU,IAAI5U,GAAK,KAAO,EAAIA,KAAIqI,gB,GArHjCtD,I,IAAlB+I,G,OAmBU,a,IAnBVA,G,OAqBU,cAoGDA,UCtHA+G,G,WAhBb,aAAc,aACZ5lB,KAAK6lB,OAAS,G,4CAGT5D,GACLA,EAAWzJ,iBAAiBlb,SAAQ,SAAAuoB,GAClCA,EAAOhL,aAAaiL,aAAe,KACnCD,EAAOE,OAAOC,cAAcH,EAAOI,QAAQ,MAE7ChE,EAAWiE,qBAAuBjE,EAAWiE,sBAC7CjE,EAAWkE,sBAAwBlE,EAAWkE,uBAC9ClE,EAAWmE,kBAAoBnE,EAAWmE,mBAC1CnE,EAAWoE,uBAAyBpE,EAAWoE,4B,qbCEpCC,G,kCAZb,WAAYvQ,EAAMwQ,GAA6B,MAAlBvQ,EAAkB,uDAAJ,GAAI,qBAC7C,cAAMD,EAAMC,IACPuQ,UAAYA,EAF4B,E,8CAM7C,IAAMpU,EAAM,iDAEZ,OADAA,EAAIoU,UAAYvmB,KAAKumB,UACdpU,M,GATiB2D,I,+oBCAtB0Q,G,kCACJ,WAAYzQ,EAAMtU,EAAM4b,EAAYkJ,GAAW,0BAC7C,cAAMxQ,EAAMwQ,GADiC,uBAmErC,kBAAMC,EAAIvQ,QAjElB,EAAKxU,KAAOA,EACZ,EAAK4b,WAAaA,EAH2B,E,+CAO7C,oD,+BAIA,IAAMnE,EAAO,iDAGb,OAFAA,EAAI,KAAWlZ,KAAKyB,KACpByX,EAAI,WAAiBlZ,KAAKqd,WACnBnE,I,+BAIP,IAAM3B,EAAOvX,KAAKwX,SAwClB,MAvCe,CACbG,WAAY,CACVxC,KAAM,SACNyC,WAAY,CACVC,QAAS,CACP1C,KAAM,UAERnc,KAAM,CACJmc,KAAM,SACNpR,MAAO,QAEToR,KAAM,CACJA,KAAM,SACNpR,MAAO,QAETwiB,UAAW,CACTpR,KAAM,SACNpR,MAAO,gBAIb+T,SAAU,CACR3C,KAAM,CACJ,eAAe,GAEjBoR,UAAW,CACT,eAAe,GAEjB1O,QAAS,CACP,YAAa,WAGjBvX,KAAM,CACJuX,QAASN,EAAKve,KACdA,KAAMue,EAAKve,KACXmc,KAAMoC,EAAKpC,KACXoR,UAAWhP,EAAKgP,c,6BAMftO,GACLjY,KAAKhH,KAAOif,EAAKjf,KACjBgH,KAAK+V,KAAK/c,KAAOif,EAAKjf,KACtBgH,KAAKgW,Y,mWAAL,IAAwBiC,EAAKpE,iB,GAjEfyS,I,IAAZE,G,OAsEU,OAGDA,U,SC5DTC,G,+BAAAA,G,eACiB,SAAAlX,GACnB,IAAMsL,EAAe,IAAI6L,iBAAc,IAAIC,wBAAqBpX,IAKhE,OAJAsL,EAAa+L,OAAOC,aAAaC,SACjCjM,EAAa+L,OAAOG,WAAa,EACjClM,EAAamM,OAAOH,aAAaC,SACjCjM,EAAamM,OAAOD,WAAa,EAC1BlM,K,IAPL4L,G,gBAUkB,SAAClX,EAAO0W,GAAmC,IAA3B3oB,EAA2B,uDAAjB,SAAAyoB,KACxCkB,EAAmB,EACnBlB,EAAStH,GAAOyI,cAAc3X,GACjCkM,qBAAqB,IAAIpJ,WAAQ,EAAG,EAAG,KACvCpX,OAAOoX,WAAQsK,QACf3jB,KAAK,UACLwsB,QAcH,OAbAO,EAAOC,cAAcC,GAAQ,GAC7BF,EAAOoB,QAAU,GACjBpB,EAAOqB,gBAAkB,IAAI/U,WAC3B4U,EACAA,EACAA,GAEFlB,EAAOsB,eAAiB,GACxBtB,EAAOuB,iBAAkB,EACzBvB,EAAOwB,mBAAqB,EAC5BxB,EAAOyB,iBAAmB,EAE1BlqB,EAAQyoB,GACDA,K,IA9BLU,G,eAiCiB,SAAAlX,GACnB,OAAOkP,GAAOgJ,wBAAwBlY,GACnCvW,KAAK,SACLklB,UAAU,IAAI7L,WAAQ,GAAI,EAAG,IAC7B0J,UAAU,KACVyJ,W,IAtCDiB,G,oBAyCsB,SAAClX,GAAmC,IAA5B/L,EAA4B,uDAApB,GAAIC,EAAgB,uDAAP,GAC/C6Z,EAASb,QAAKc,aAAa,aAAc/Z,EAAOC,EAAQ,GAAI8L,GAMlE,OALA+N,EAAOE,UAAU,IAAInL,WAAQ,GAAI,EAAG,GAAI,IAAMoL,SAAMC,OACpDJ,EAAOtG,SAAW,IAAI2G,oBAAiB,YAAapO,GACpD+N,EAAOtG,SAAS0Q,WAAY,EAC5BpK,EAAOhB,YAAa,EACpBgB,EAAOgK,iBAAkB,EAClBhK,K,IAhDLmJ,G,eAmDiB,SAAA/W,GACnB,IAAMH,EAAQ,IAAIM,SAAMH,GAKxB,OAJAH,EAAMoY,WAAalQ,UAAOmQ,MAC1BrY,EAAMsY,mBAAoB,EAC1BtY,EAAMuY,KAAOvY,EAAMwY,cAEZxY,K,IAzDLkX,G,2BA4D6B,SAAAlX,GAC/B,IAAMyY,EAAkBC,0BAAuBC,mBAC7C,MACA,EACA3Y,GAEI4Y,EAAO,IAAIC,aAOjB,OANAD,EAAKA,KAAO,GACZA,EAAK5mB,MAAQ,QACb4mB,EAAKrd,SAAW,GAChBqd,EAAKxjB,MAAQ,IACbwjB,EAAKtjB,KAAO,IACZmjB,EAAgBK,WAAWF,GACpBA,KAII1B,U,gbCzFT6B,G,kCACJ,aAAc,iC,mDAIAxhB,EAAKmb,M,oCAILnb,EAAKmb,M,kCAIPA,M,gCAIFnb,EAAKmb,GACb,IAAMsG,EAAiB,CACrBC,OAAQC,GAAoBC,GAAQC,OACpCC,KAAMH,GAAoBC,GAAQG,aAClCC,KAAML,GAAoBC,GAAQK,UAClCC,KAAMP,GAAoBC,GAAQO,eAClCC,KAAMT,GAAoBC,GAAQS,YAClCC,KAAMX,GAAoBC,GAAQW,aAClCC,KAAMb,GAAoBC,GAAQa,YAEhCziB,EAAI0iB,QAAQjB,GACdA,EAAezhB,EAAI0iB,MAAMvH,O,GA5BD2D,IAiCxB6C,GAAsB,SAAAgB,GAAM,OAAI,SAAAxH,GACpCwH,EAAOA,OAAOxH,GACdA,EAAWyH,kBAAkBD,KAGhBnB,M,gbChCTqB,G,kCACJ,aAAc,UACZ,OADY,aACR7V,GAAiB,OAAAA,KACrB,eAFY,sBAcL,SAAAmO,GACP,sDAAaA,GACbA,EAAWyH,kBAAX,YAhBY,6BAmBE,SAAC5iB,EAAKmb,GACE,IAAhBnb,EAAI8iB,SAAiC,IAAhB9iB,EAAI8iB,SAC/B3H,EAAWzJ,iBAAiBlb,SAAQ,SAAAuoB,GAAU,IACpCtW,EAAkCsW,EAAlCtW,MAAO+N,EAA2BuI,EAA3BvI,OAAQyI,EAAmBF,EAAnBE,OAAQE,EAAWJ,EAAXI,OAC/B,EAAK4D,kBAAoBpL,GAAOqL,SAASva,EAAO+N,GAChD,EAAKuM,kBAAkBvsB,SAAQ,SAAAysB,GAC7BhE,EAAOiE,cAAc/D,GACrBxH,GAAOwL,kBAAkB1a,EAAO+N,GAAQhgB,SAAQ,SAAA4sB,GAC9C,IAAMC,EAAmC1L,GAAOkB,gCAC9CoK,EACAjY,GAAKuE,UAAU6T,IAGjB,EAAKE,kBAAoBD,EACzB,EAAKE,kBAAoBF,EACzB,EAAKG,sBAAwBH,EAAiCxW,IAC5D7B,GAAKuE,UAAU0T,EAAYrnB,WAG7BqnB,EAAYzoB,QACRyoB,EAAYzoB,UACZ2gB,EAAWmE,mBAEf,EAAKmE,qBAAqBzjB,EAAKmb,EAAY8H,GAE3C9H,EAAWuI,SAAST,EAAY/wB,MAChCipB,EAAWiE,oBAAoB6D,EAAY/wB,MAC3CipB,EAAWwI,qBAAqB,CAACV,IACjC,EAAKW,cAAczI,EAAY8H,EAAY/wB,YAG/C,EAAK6wB,kBAAkBlT,QAAO,kBAC5BsL,EACG0I,8BACArtB,SAAQ,SAAAstB,GAAY,OACnB,EAAKC,4BAA4B/jB,EAAKmb,EAAY2I,eAtD9C,oCA4DS,SAAC9jB,EAAKmb,EAAYlM,GACjB,IAAhBjP,EAAI8iB,SACL7T,GAASA,EAAKG,wBACnB+L,EAAW6I,uBACThkB,EACAiP,EAAKG,uBAAuB+L,OAjElB,2CA0EgB,SAACnb,EAAKmb,EAAY3J,GACxB,IAAhBxR,EAAI8iB,SACV3H,EAAW6I,uBAAuBhkB,EAAK,CACrC,CACE/C,MAAO,QACPzC,QAAS,EAAKypB,gBAAgBzS,EAAkB2J,SA/ExC,+BAoFI,SAAC3J,EAAkB2J,GAAnB,OAAkC,WAClD,IAAM+I,EAAcxV,GAAUyV,QAC1BD,GAAsC,mBAAhBA,GACxBA,EAAY1S,EAAkB2J,OAvFpB,6BA2FE,SAACnb,EAAKmb,GACE,IAAhBnb,EAAI8iB,SACV3H,EAAWzJ,iBAAiBlb,SAAQ,SAAAuoB,GAAU,IACpCtW,EAAkBsW,EAAlBtW,MAAO+N,EAAWuI,EAAXvI,OACamB,GAAOwL,kBAAkB1a,EAAO+N,GACxChgB,SAAQ,SAAAsS,GAC1B,EAAKia,kBAAkBvsB,SAAQ,SAAA4tB,GAC7B,IAAMC,EAAe1M,GAAOkB,gCAC1BuL,EACApZ,GAAKuE,UAAUzG,IAGXwB,EAAI+Z,EAAaxX,IAAI,EAAK2W,uBAChCY,EAAaxoB,SAAW,IAAI2P,WAC1BjB,EAAEga,OACFha,EAAEia,OACFH,EAAaxoB,SAASqO,GAExB,EAAKua,gBACHJ,GACA,EACAC,EAAaxX,IAAI,EAAKyW,oBAExB,EAAKA,kBAAoBe,cAlHnB,2BAwHA,SAAAlJ,GACZA,EAAWzJ,iBAAiBlb,SAAQ,SAAAuoB,GAAU,IACpCE,EAAkCF,EAAlCE,OAAQxW,EAA0BsW,EAA1BtW,MAAO+N,EAAmBuI,EAAnBvI,OAAQ2I,EAAWJ,EAAXI,OAC/B,EAAK4D,kBAAkBvsB,SAAQ,SAAA4tB,GAC7BzM,GAAOwL,kBAAkB1a,EAAO+N,GAAQhgB,SAAQ,SAAAiuB,GAC9C,IAIMC,EAJmB/M,GAAOkB,gCAC9BuL,EACApZ,GAAKuE,UAAUkV,IAEwB5X,IAAI,EAAK0W,mBAClD,EAAKiB,gBAAgBJ,GAAc,EAAMpZ,GAAKiQ,MAC9C,EAAK2I,cAAczI,EAAYiJ,EAAalyB,MAC5CipB,EAAWwJ,mBAAmBP,EAAalyB,MAE3C,EAAK0yB,YAAYC,MACf,EAAKC,kBAAkBV,EAAcM,EAAiBvJ,UAI5D,EAAK4H,kBAAoBrT,SAAM6N,OAC/B,EAAKiG,sBAAwBxY,GAAKiQ,KAClC,EAAKqI,kBAAoBtY,GAAKiQ,KAC9BgE,EAAOC,cAAcC,GAAQ,SA9InB,yBAkJF,SAACnf,EAAKmb,GAsChB,IArCA,IACM4J,EAAsB,CAC1B,CACEC,UAAW,SAAAvwB,GAAC,MAAI,CAAC,YAAa,UAAUwZ,SAASxZ,EAAEiuB,OACnDC,OAAQ,EAAKsC,sBAAsB9J,IAErC,CACE6J,UAAW,SAAAvwB,GAAC,OAAIA,EAAEywB,UAAYzwB,EAAE0wB,UAAuB,SAAX1wB,EAAEiuB,MAC9CC,OAAQ,kBAAM,EAAKiC,YAAYQ,SAEjC,CACEJ,UAAW,SAAAvwB,GAAC,OAAIA,EAAEywB,SAAWzwB,EAAE0wB,UAAuB,SAAX1wB,EAAEiuB,MAC7CC,OAAQ,kBAAM,EAAKiC,YAAYS,SAEjC,CACEL,UAAW,SAAAvwB,GAAC,OAAIA,EAAEywB,SAAsB,SAAXzwB,EAAEiuB,MAC/BC,OAAQ,kBACNjT,SAAMC,SAASwL,EAAWmK,0BAA0B9uB,SAAQ,SAAAtE,GAAI,OAC9DipB,EAAWoK,gBAAgBrzB,GAAMsE,SAAQ,YAAc,IAC7CyY,EAD6C,EAAX7Z,KAClC6Z,KACRA,EAAKG,wBACHH,EAAKG,uBAAuB+L,GAAY,GAAG3gB,kBAIrD,CACEwqB,UAAW,SAAAvwB,GAAC,OAAIA,EAAEywB,SAAsB,SAAXzwB,EAAEiuB,MAC/BC,OAAQ,WACNxH,EACG0I,8BACArtB,SAAQ,SAAAstB,GAAY,OACnB,EAAKG,gBAAgBH,EAAc3I,EAAnC,QAIR,CAAE6J,UAAW,SAAAvwB,GAAC,OAAI,GAAMkuB,OAnCJ,2EAAsB3iB,EAAKmb,MAqCxCxpB,EAAI,EAAGA,EAAIozB,EAAoBjwB,OAAQnD,IAAK,CACnD,IAAM6zB,EAAkBT,EAAoBpzB,GAC5C,GAAI6zB,EAAgBR,UAAUhlB,GAAM,CAClCwlB,EAAgB7C,SAChB,WA5LQ,6BAuNE,SAACxH,EAAYjpB,GAAb,OACdoT,YAAW,kBAAM6V,EAAWsK,sBAAsBvzB,KAAO,QArNzD,EAAKgB,IAAM,aACX,EAAKhB,KAAO,mBACZ,EAAKwzB,KAAO,SAAAprB,GAAK,OAAI,2BAAGC,UAAU,wBAA2BD,KAC7D,EAAKyoB,kBAAoBrT,SAAM6N,OAC/B,EAAKiG,sBAAwBxY,GAAKiQ,KAClC,EAAKqI,kBAAoBtY,GAAKiQ,KAC9B,EAAKsI,kBAAoBvY,GAAKiQ,KAC9B,EAAK2J,YAAc,IAAIe,eACvB3Y,GAAW,QAXC,G,2DAiMQmO,GACpB,OAAO,kBACLzL,SAAMC,SAASwL,EAAWmK,0BAA0B9uB,SAAQ,SAAAovB,GAC1D,IAAMC,EAAY1K,EAAWoK,gBAAgBK,GAC7CC,EAAUrvB,SAAQ,kBAAM2kB,EAAW2K,aAAaF,MAChDC,EAAU5M,WAAU,WACKkC,EAAW4K,oBACnB,GAAGpD,OAAOxH,Y,sCAKjBlM,EAAM+W,EAAiBC,GACrCvW,SAAMC,SAASV,EAAKhC,WAAWzW,SAAQ,SAAA0vB,GAAG,OACxCA,EAAI1B,gBAAgB,CAClB2B,iBAAkBlX,EAClB+W,gBAAiBA,EACjBC,aAAcA,EAAa3T,mB,wCAcf8R,EAAc6B,EAAc9K,GAAY,WACxD,OAAOwK,eAAYS,gBAChBC,UAAS,WACR,IAAMC,EAAStb,GAAKuE,UAAU6U,EAAaxoB,UAAU8Q,IAAIuZ,GACzD7B,EAAaxoB,SAAW0qB,EAAOhU,YAC/B,EAAKkS,gBAAgBJ,GAAc,EAAM6B,GACzC9K,EAAWwJ,mBAAmBP,EAAalyB,SAE5Cq0B,YAAW,WACV,IAAMC,EAAqBP,EAAavb,OAAO,GACzC4b,EAAStb,GAAKuE,UAAU6U,EAAaxoB,UAAU8Q,IACnD8Z,GAEFpC,EAAaxoB,SAAW0qB,EAAOhU,YAC/B,EAAKkS,gBAAgBJ,GAAc,EAAMoC,GACzCrL,EAAWwJ,mBAAmBP,EAAalyB,SAE5CwsB,W,qCAIH,OAAO,IAAImE,M,GAtPiBrB,IA0P5BxU,GAAW,KAEA6V,M,gbChQT4D,G,kCACJ,WAAYxX,EAAMC,GAAa,0BAC7B,cAAMD,EAAMC,GADiB,uBAQrB,kBAAMuX,EAAStX,QARM,E,4CAIxB1G,GAAqC,IAA9B2J,EAA8B,uDAAvB,KAAMd,EAAiB,uDAAN,KACpC,OAAOmV,EAASzU,OAAOvJ,EAAO2J,EAAMd,M,8BAOxB7I,GAAqC,IAA9B2J,EAA8B,uDAAvB,KACpBlgB,EAAOwd,SAAMC,SAASyC,GACzBjZ,KAAI,SAAC2Q,GAAD,OAAOA,EAAE5X,QACboe,OAFU,kBAEQ/F,KAAKmK,MAAsB,IAAhBnK,KAAK4B,YAE/B8C,EAAOgH,eAAYyQ,iBACvBx0B,EACA,CAAEy0B,OAAQC,GAAsBjsB,KAAM8rB,EAASlP,cAC/C9O,GAEIyH,EAAW,IAAI2G,oBAAJ,0BAAwC3kB,GAAQuW,GACjEwG,EAAKiB,SAAWA,EAChBjB,EAAKoN,0BAEL,IAAMwK,EAAOlP,GAAO8G,mBAAmBhW,GACpC+M,YAAW,GACXC,UAAU,CAAElF,WAAW,EAAO5V,KAAM,GAAM8rB,EAASlP,eACnDrlB,KAHU,UAGFA,EAHE,SAIVwsB,QAIH,OAHAmI,EAAK5U,OAAShD,EAEdD,GAAS6I,aAAazF,EAAMnD,GACrB,IAAIwX,EAASxX,EAAMmD,EAAKlD,iB,GAnCZF,I,IAAjByX,G,OAWU,Y,IAXVA,G,eAsCkB,KAGxB,IAAMG,GAAuB,CAC3B10B,KAAM,oCACN40B,SAAU,CAAC,aACXC,OAAQ,CACN,CAAC,EAAG,EAAG,UACP,CAAC,SAAU,EAAG,GACd,CAAC,EAAG,SAAU,GACd,EAAE,SAAU,EAAG,GACf,CAAC,GAAI,SAAU,GACf,CAAC,EAAG,GAAI,WAEVC,KAAM,CACJ,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,KAIIP,M,4aC7Df,IAAIzZ,GAAW,KAqHAia,G,kCAhHb,aAAc,QACZ,OADY,aACRja,GAAiB,OAAAA,KACrB,eAFY,8BAeG,SACfpR,EACA1J,EACAuW,EACA0S,GAGG,IAFH+L,IAEG,yDADHzsB,EACG,uDADKkW,UAAO6K,OAETJ,EAAWD,EAAWvJ,cAAcxc,KAAK6Z,KAEzCkY,EAAWV,GAASzU,OAAOvJ,EAAO,CACtCvW,KAAMA,EACNuI,MAAO,CAACA,EAAMhI,EAAGgI,EAAM4V,EAAG5V,EAAM2P,KAE5B6E,EAAOkY,EAASlY,KACtBA,EAAKgD,OAASmJ,EAEd,IAAMtD,EAAgBH,GAAOkB,gCAC3B,CAAE5G,OAAQmJ,GACVpQ,GAAKuE,UAAU3T,IACf0W,YASF,OAPArD,EAAKmY,2BACHtP,EAAcpL,IAAI2a,QAAKC,EAAE5c,MAAM+b,GAASlP,gBAGtC2P,GACF/L,EAAWjJ,iBAAiBiV,EAAU/L,EAASlpB,KAAMg1B,GAEhDjY,KA5CK,sBA+CL,SAAAkM,GACP,sDAAaA,GACbA,EAAWyH,kBAAX,YAjDY,6BAoDE,SAAC5iB,EAAKmb,GACD,IAAfnb,EAAIzB,QAGR4c,EAAWzJ,iBAAiBlb,SAAQ,SAAAuoB,GAAU,IACpCtW,EAA0BsW,EAA1BtW,MAAO+N,EAAmBuI,EAAnBvI,OAAQyI,EAAWF,EAAXE,OACvB,EAAKsI,cAAgB5P,GAAOwL,kBAAkB1a,EAAO+N,GACrD,EAAK+Q,cAAc/wB,SAAQ,SAAAgxB,GACzBvI,EAAOiE,cAAcnE,EAAOI,iBA5DpB,6BAiEE,SAACnf,EAAKmb,GACpBA,EAAWzJ,iBAAiBlb,SAAQ,SAAAuoB,GAClC,IAAMtW,EAAQsW,EAAOtW,MACf+N,EAASuI,EAAOvI,OACDmB,GAAOwL,kBAAkB1a,EAAO+N,GACxChgB,SAAQ,SAAAsS,GACnB,EAAKye,cAAc/wB,SAAQ,SAAAixB,GACrB,EAAKC,UAAU,EAAKA,SAASre,UACjC,EAAKqe,SAAW,EAAKC,eACnB7e,EA7EgB,iBA+EhBL,EACA0S,GACA,eA9EI,2BAqFA,SAAAA,GACZA,EAAWzJ,iBAAiBlb,SAAQ,SAAAuoB,GAClC,IAAMtW,EAAQsW,EAAOtW,MACfwW,EAASF,EAAOE,OAChBzI,EAASuI,EAAOvI,OACDmB,GAAOwL,kBAAkB1a,EAAO+N,GACxChgB,SAAQ,SAAAsS,GACnB,EAAKye,cAAc/wB,SAAQ,SAAAixB,GACrB,EAAKC,UAAU,EAAKA,SAASre,UACjC,IAAMnX,EAAO,WAAH,OAAcqY,KAAKmK,MAAsB,IAAhBnK,KAAK4B,WACxC,EAAKwb,eACH7e,EACA5W,EACAuW,EACA0S,GACA,EACA,IAAIxK,UAAOpG,KAAK4B,SAAU5B,KAAK4B,SAAU5B,KAAK4B,WAEhDgP,EAAWsK,sBAAsBvzB,SAGrC,EAAKq1B,cAAgB7X,SAAM6N,OAC3B0B,EAAOC,cAAcH,EAAOI,QAAQ,SAxGtC,EAAKjsB,IAAM,cACX,EAAKhB,KAAO,oBACZ,EAAKq1B,cAAgB7X,SAAM6N,OAC3B,EAAKmK,SAAW,KAChB,EAAKhC,KAAO,SAAAprB,GAAK,OAAI,2BAAGC,UAAU,qBAAwBD,KAC1D0S,GAAW,QARC,G,wDAYZ,OAAO,IAAIia,M,GAbiBzF,ICNjBoG,GANG,CAChBC,OAAQ,GACRC,eAAgB,EAChBC,oBAAqB,kB,ocCYjBC,G,kCACJ,WAAY/Y,EAAMgZ,EAASC,GAA6B,MAAlBhZ,EAAkB,uDAAJ,GAAI,oBACtD,cAAMD,EAAMC,GAD0C,uBAiF9C,kBAAM8Y,EAAU7Y,QA/ExB,EAAK8Y,QAAUA,EACf,EAAKC,UAAYA,EAHqC,E,8CAOtD,IAAM9V,EAAO,iDAEb,OADAA,EAAK6V,QAAU/uB,KAAK+uB,QACb7V,I,+BAIP,IAAMxB,EAAS,iDACfA,EAAOC,WAAWC,WAAlB,WAA6C,CAC3CzC,KAAM,SACNpR,MAAO,aACP6T,WAAY,CACVqX,MAAO,CACL9Z,KAAM,SACNpR,MAAO,eACP6T,WAAY,CACVhH,EAAG,CACDuE,KAAM,SACNpR,MAAO,KAET8M,EAAG,CACDsE,KAAM,SACNpR,MAAO,OAIbtC,KAAM,CACJ0T,KAAM,SACNpR,MAAO,OACP6T,WAAY,CACVsX,OAAQ,CACN/Z,KAAM,SACNpR,MAAO,WAETorB,OAAQ,CACNha,KAAM,SACNpR,MAAO,eAMjB2T,EAAOI,SAAP,WAAgC,CAAE,YAAa,YAE/C,IAAMsX,EAAepvB,KAAKgvB,UACvB/uB,KAAI,SAAA2Q,GAAC,OAAI6N,GAAOa,oBAAoB1O,EAAGA,EAAElO,aACzCzC,KAAI,SAAA2Q,GAAC,OAAIA,EAAE0F,aAYd,OAXAoB,EAAOpX,KAAP,WAA4B,CAC1B2uB,MAAO,CACLre,EAAGwe,EAAa,GAAG,GACnBve,EAAGue,EAAa,GAAG,IAErB3tB,KAAM,CAEJytB,OAAQlvB,KAAK+uB,QAAQ,GAAG,GAAK/uB,KAAK+uB,QAAQ,GAAG,GAC7CI,OAAQnvB,KAAK+uB,QAAQ,GAAG,GAAK/uB,KAAK+uB,QAAQ,GAAG,KAG1CrX,I,6BAGFO,GACL,IACMoX,EADUrvB,KAAKsvB,SACShvB,KAAKivB,WAC/BC,KAASH,EAAepX,EAAKsX,YAC/B,gDAAatX,GAEbjY,KAAKyvB,iBAAiBxX,K,6BAInB1I,GAAqC,IAA9B2J,EAA8B,uDAAvB,KAAMd,EAAiB,uDAAN,KACpC,OAAO0W,EAAUhW,OAAOvJ,EAAO2J,EAAMd,K,uCAOtBH,GAAM,WACfyX,EAAqCrd,WAAQoO,UACjD,CAACxI,EAAKsX,WAAWN,MAAMre,EAAGqH,EAAKsX,WAAWN,MAAMpe,EAAG,GAAG5Q,IACpDwS,OAAOkd,aAGLC,EAAqB,CACzB3X,EAAKsX,WAAW9tB,KAAKytB,OACrBjX,EAAKsX,WAAW9tB,KAAK0tB,QACrBlvB,IAAIwS,OAAOkd,YACPE,EAAqBpR,GAAOiB,6BAChC1f,KAAKgvB,UAAU,GACfU,GACApZ,UACIwZ,EAAS,SAAAr3B,GAAC,OACd,EAAKu2B,UAAUv2B,GAAGsb,UAAUuX,gBAAgB,CAC1C2B,iBAAkB,EAAK+B,UAAUv2B,GACjCq0B,iBAAiB,KAErB9sB,KAAKgvB,UAAU,GAAGtsB,SAAW,IAAI2P,WAC/Bwd,EAAmB,GACnBA,EAAmB,GACnB7vB,KAAKgvB,UAAU,GAAGtsB,SAASqO,GAE7B+e,EAAO,GACP9vB,KAAKgvB,UAAU,GAAGtsB,SAAW,IAAI2P,WAC/Bwd,EAAmB,GAAKD,EAAmB,GAC3CC,EAAmB,GAAKD,EAAmB,GAC3C5vB,KAAKgvB,UAAU,GAAGtsB,SAASqO,GAE7B+e,EAAO,M,8BAGKvgB,GAAqC,IAA9B2J,EAA8B,uDAAvB,KAAMd,EAAiB,uDAAN,KAC3C,IAAKc,EAAM,KAAM,wCACjB,IAAMlgB,EAAOwd,SAAMC,SAASyC,EAAKlgB,MAAMoe,OAA1B,mBACC/F,KAAKmK,MAAsB,IAAhBnK,KAAK4B,YAExB8C,EAAOga,GAAoB7W,EAAMlgB,EAAMuW,GAEvCyH,EAAW,IAAI2G,oBAAJ,2BAAyC3kB,GAAQuW,GAC5DhO,EAAQ,IAAIkW,UAAOyB,EAAK3X,MAAM,GAAI2X,EAAK3X,MAAM,GAAI2X,EAAK3X,MAAM,IAClEyV,EAASE,aAAe3V,EACxByV,EAASmB,cAAgB5W,EACzByV,EAASgZ,iBAAkB,EAC3Bja,EAAKiB,SAAWA,EAEhBjB,EAAKka,WAAa,IAElBzZ,SAAMC,SAASyC,EAAK3C,YAAYjZ,SAAQ,SAAAiZ,GACtC,IAAM8C,EAAoB,IAAIxC,cAC5BN,EAAW,GACXA,EAAW,GACXA,EAAW,GACXA,EAAW,IAEbR,EAAKW,mBAAqB2C,EAAkB5F,eAG9C,IAAMub,EAAYkB,GAChB3gB,EACA2J,EAAK6V,QAAQ9uB,KAAI,SAAA2Q,GAAC,OAAIkB,GAAKkB,GAAGpC,GAAGwI,eACjCrD,EACAqC,GAEF,OAAO,IAAI0W,EAAU/Y,EAAMmD,EAAK6V,QAASC,EAAW9V,EAAKlD,iB,GAvJrCF,I,IAAlBgZ,G,OAoFU,aAuEhB,IAAMH,GAASD,GAAUC,OACnBwB,GAAQ,CACZ,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,IAMT,SAASJ,GAAoBK,EAAWp3B,EAAMuW,GAE5C,IAAMwf,EAAUqB,EAAUrB,QAAQ9uB,KAAI,SAAA2Q,GAAC,OAAIkB,GAAKkB,GAAGpC,GAAGwI,eAChDrgB,EAAIg2B,EAAQ,GAAGjO,SAASiO,EAAQ,IAChCsB,EAAcve,GAAKkB,GAAGod,EAAU1tB,UAAU0W,YAC1ClM,EAAQ,CACZ6hB,EAAQ,GACRA,EAAQ,GAAGvb,IAAI2a,QAAKmC,EAAE9e,MAAMzY,EAAE6X,IAC9Bme,EAAQ,GAAGvb,IAAI,IAAInB,WAAQtZ,EAAE6X,EAAG7X,EAAE8X,EAAG,IACrCke,EAAQ,GAAGvb,IAAI2a,QAAKoC,EAAE/e,MAAMzY,EAAE8X,KAE1B2f,EAAI,IAAIne,WAAQ,EAAG,EAAGtZ,EAAEgY,GACxB0f,EAAgB,CACpBnQ,UAAW,CACTpT,EAAM,GACNA,EAAM,GACNA,EAAM,GACNA,EAAM,GACNA,EAAM,GAAGsG,IAAIgd,GACbtjB,EAAM,GAAGsG,IAAIgd,GACbtjB,EAAM,GAAGsG,IAAIgd,GACbtjB,EAAM,GAAGsG,IAAIgd,IAEfxP,MAAOmP,IAEHpa,EAAO0I,GAAOyE,yBAClBlqB,EACAuW,EACAkhB,EAAcnQ,UACdmQ,EAAczP,OAGhB,OADAjL,EAAKrT,SAAW2tB,EACTta,EA+BT,IAAM2a,GAA8B,SAACtY,EAAU7I,GAC7C,OAAO,YAA2C,IAAxC0d,EAAwC,EAAxCA,iBAAkBH,EAAsB,EAAtBA,gBAC1B1U,EACGiU,gBAAgBY,EAAiBlU,OAAO/f,MACxCsE,SAAQ,SAAAqzB,GACP,IAAMp0B,EAAQ0wB,EAAiB1wB,MACzBL,EAAOy0B,EAAkBz0B,KACzB6Z,EAAO7Z,EAAK6Z,KACZ/c,EAAO+c,EAAK/c,KAEd43B,EAAS,CACXluB,SAAUoP,GAAKuE,UAAUN,EAAKrT,UAAU4T,UACxCyY,QAAS7yB,EAAK6yB,SAEhB6B,EAAO7B,QAAQxyB,GAASuV,GAAKuE,UAC3B4W,EAAiBvqB,UACjB4T,UA5CV,SAAyCsa,EAAQrhB,EAAOwG,EAAM7Z,GAC5D,IAAM20B,EAAUpS,GAAOqS,iBAAiBF,EAAO7B,QAAQ9uB,KAAI,SAAA2Q,GAAC,OAAIkB,GAAKkB,GAAGpC,OACxEggB,EAAOluB,SAAWmuB,EAAQva,UAC1Bsa,EAAO7B,QAAU6B,EAAO7B,QAAQ9uB,KAAI,SAAA2Q,GAAC,OAAIkB,GAAKkB,GAAGpC,GAAG+C,IAAIkd,GAASva,aAEjE,IAAMya,EAAUhB,GAAoBa,EAAQ7a,EAAK/c,KAAMuW,GACvDwhB,EAAQruB,SAAWqT,EAAKrT,SACxBquB,EAAQra,mBAAqBX,EAAKW,mBAClCqa,EAAQC,iBAAiBH,EAAQzX,aACjC2X,EAAQ/Z,SAAWjB,EAAKiB,SACxB+Z,EAAQd,WAAala,EAAKka,WAC1Bc,EAAQhY,OAAShD,EAAKgD,OAEtB7c,EAAK6Z,KAAOgb,EACZ70B,EAAK6yB,QAAU6B,EAAO7B,QAED,KAAIhZ,EAAKkb,WACjB3zB,SAAQ,SAAAxE,GACnBid,EAAKxX,YAAYzF,GACjBA,EAAEigB,OAASgY,KAEb70B,EAAK8yB,UAAU1xB,SAAQ,SAAC4zB,EAAGC,GACzBD,EAAExuB,SAAWoP,GAAKkB,GAAG4d,EAAO7B,QAAQoC,IAAI/X,eAG1CrD,EAAK5F,UAqBCihB,CAAgCR,EAAQrhB,EAAOwG,EAAM7Z,GACrDkc,EAASoS,WAELsC,IACF1U,EAASqT,mBAAmBzyB,GAC5Bof,EAASiU,gBAAgBrzB,GAAMsE,SAAQ,SAAA6E,GACrCiW,EAASsS,cAAcvoB,EAAKjG,KAAKozB,mBAOvCY,GAA6B,SACjC3gB,EACAwf,EACA0B,EACArY,GAEA,IAAM4W,EAAY,GAmBlB,OAlBAD,EAAQzxB,SAAQ,SAAC+zB,EAAQ54B,GACvB,IAAM8B,EAAI82B,EAEJpD,EAAWxP,GAAO6S,aACtB/hB,EACA,IAAIkI,UAAO,IAAM,IAAM,KACvBkX,GAHe,UAIZ8B,EAAcz3B,KAJF,mBAIiBP,IAChC,GAGFw1B,EAASlV,OAAS0X,EAClBxC,EAASvrB,SAAWnI,EACpB0zB,EAAS1xB,MAAQ9D,EACjBw1B,EAASla,UAAY,IAAIwd,cACzBtD,EAASla,UAAUP,IAAIkd,GAA4BtY,EAAU7I,IAC7Dyf,EAAUlyB,KAAKmxB,MAEVe,GAGMF,M,gbC/ST0C,G,kCACJ,aAAc,QACZ,OADY,aACR1d,GAAiB,OAAAA,KACrB,eAFY,sBAWL,SAAAmO,GACP,sDAAaA,GACbA,EAAWyH,kBAAX,YAbY,6BAgBE,SAAC5iB,EAAKmb,GACE,IAAhBnb,EAAI8iB,SACV3H,EAAWzJ,iBAAiBlb,SAAQ,SAAAuoB,GAClC,IAAMtW,EAAQsW,EAAOtW,MACf+N,EAASuI,EAAOvI,OAChByI,EAASF,EAAOE,OAChBsI,EAAgB5P,GAAOwL,kBAAkB1a,EAAO+N,GACtD,EAAK+Q,cAAgBA,EACrBA,EAAc/wB,SAAQ,SAAAgxB,GACpBvI,EAAOiE,cAAcnE,EAAOI,iBAzBpB,6BA8BE,SAACnf,EAAKmb,GACpBA,EAAWzJ,iBAAiBlb,SAAQ,SAAAuoB,GAClC,IAAMtW,EAAQsW,EAAOtW,MACf+N,EAASuI,EAAOvI,OACDmB,GAAOwL,kBAAkB1a,EAAO+N,GACxChgB,SAAQ,SAAAsS,GACnB,EAAKye,cAAc/wB,SAAQ,SAAAixB,GACrB,EAAKC,UAAU,EAAKA,SAASre,UACjC,EAAKqe,SAAW,EAAKiD,gBACnB,CAAClD,EAAa3e,GACd8hB,GACAniB,EACA0S,GACA,eA3CI,2BAkDA,SAAAA,GACZA,EAAWzJ,iBAAiBlb,SAAQ,SAAAuoB,GAClC,IAAMtW,EAAQsW,EAAOtW,MACfwW,EAASF,EAAOE,OAChBzI,EAASuI,EAAOvI,OACDmB,GAAOwL,kBAAkB1a,EAAO+N,GACxChgB,SAAQ,SAAAsS,GACnB,EAAKye,cAAc/wB,SAAQ,SAAAixB,GACzB,EAAKC,SAASre,UACd,IAAMnX,EAAO,YAAH,OAAeqY,KAAKmK,MAAsB,IAAhBnK,KAAK4B,WACzC,EAAKwe,gBACH,CAAClD,EAAa3e,GACd5W,EACAuW,EACA0S,GACA,GAEFA,EAAWsK,sBAAsBvzB,SAGrC,EAAKq1B,cAAgB7X,SAAM6N,OAC3B0B,EAAOC,cAAcH,EAAOI,QAAQ,GACpChE,EAAW0P,oBAxED,+BA4EI,SAChBC,EACA54B,EACAuW,EACA0S,GAIG,IAHH+L,IAGG,yDAFHzsB,EAEG,uDAFKkW,UAAOwI,MACfxc,EACG,uDADM,EAEHye,EAAWD,EAAWvJ,cAAcxc,KAAK6Z,KAEzC8b,EAAcD,EAAO3xB,KAAI,SAAA1G,GAAC,OAC9BklB,GAAOkB,gCACL,CAAE5G,OAAQmJ,GACVpQ,GAAKuE,UAAU9c,OAInBs4B,EAAY,GAAKA,EAAY,GAAGre,IAAI1B,GAAKkB,GAAG,CAAC,EAAG,EAAGvP,KACnD,IAAM4sB,EAAcwB,EAAY,GAAGre,IAAIqe,EAAY,IAAIrgB,MAAM,IACvDsgB,EAAiBD,EAAY5xB,KAAI,SAAA1G,GAAC,OAAIA,EAAEoa,IAAI0c,MAE5C0B,EAAgBjD,GAAUhW,OAC9BvJ,EACA,CACEvW,KAAMA,EACN0J,SAAU2tB,EAAY/Z,UACtB/U,MAAO,CAACA,EAAMhI,EAAGgI,EAAM4V,EAAG5V,EAAM2P,GAChC6d,QAAS+C,EAAe7xB,KAAI,SAAA2Q,GAAC,OAAIA,EAAE0F,cAErC2L,GAMF,OAJA8P,EAAchc,KAAKgD,OAASmJ,EACxB8L,GACF/L,EAAWjJ,iBAAiB+Y,EAAe7P,EAASlpB,KAAMg1B,GAErD+D,EAAchc,QA7GrB,EAAK/b,IAAM,gBACX,EAAKhB,KAAO,sBACZ,EAAKq1B,cAAgB7X,SAAM6N,OAC3B,EAAKmK,SAAW,KAChB,EAAKhC,KAAO,SAAAprB,GAAK,OAAI,2BAAGC,UAAU,iBAAoBD,KACtD0S,GAAW,QARC,G,wDAoHZ,OAAO,IAAI0d,M,GArHelJ,IAyH1BxU,GAAW,KAET4d,GAAuB,kBAEdF,M,i/BCvHf,IAAM7C,GAASD,GAAUC,OAEnBqD,G,kCAOJ,WAAYjc,EAAMkc,EAAWjD,EAAWkD,GAA8B,MAAlBlc,EAAkB,uDAAJ,GAAI,oBACpE,cAAMD,EAAMC,GADwD,uBA0F5D,kBAAMgc,EAAK/b,QAvFnB,EAAKgc,UAAYA,EAEjB,EAAKjD,UAAYA,EAEjB,EAAKkD,WAAaA,EAClB,EAAKC,uBAAyB,EARsC,E,8CAYpE,IAAMjZ,EAAO,iDAGb,OAFAA,EAAK+Y,UAAYjyB,KAAKiyB,UACtB/Y,EAAKgZ,WAAalyB,KAAKkyB,WAChBhZ,I,+BAIP,IAAMxB,EAAS,iDACf,GAAI1X,KAAKmyB,uBAAyB,EAAG,CACnCza,EAAOC,WAAWC,WAAlB,iBAAmD,CACjDzC,KAAM,SACNpR,MAAO,YAAF,OAAc/D,KAAKmyB,uBACxBva,WAAY,CACVhH,EAAG,CACDuE,KAAM,SACNpR,MAAO,KAET8M,EAAG,CACDsE,KAAM,SACNpR,MAAO,KAETgN,EAAG,CACDoE,KAAM,SACNpR,MAAO,OAKb2T,EAAOI,SAAP,iBAAsC,CACpC,YAAa,YAEfJ,EAAOI,SAAP,SAA8B,CAAE,YAAa,UAC7CJ,EAAOI,SAAP,WAAgC,CAAE,YAAa,UAC/CJ,EAAOI,SAAP,MAA2B,CAAE,YAAa,UAC1CJ,EAAOI,SAAP,YAAiC,CAAE,YAAa,UAChD,IAAMoT,EAAelrB,KAAKgvB,UAAUhvB,KAAKmyB,uBACnCzvB,EAAW+b,GAAOa,oBACtB4L,EACAA,EAAaxoB,UACb4T,UAMF,OALAoB,EAAOpX,KAAP,iBAAkC,CAChCsQ,EAAGlO,EAAS,GACZmO,EAAGnO,EAAS,GACZqO,EAAGrO,EAAS,IAEPgV,EAET,OAAOA,I,6BAGFO,GAEL,GADA,gDAAaA,GACTjY,KAAKmyB,uBAAyB,EAAG,CACnC,IAAMC,EAAmBpyB,KAAKgvB,UAAUhvB,KAAKmyB,uBACvCE,EAAepa,EAAKma,iBACpBE,EAA2BjgB,WAAQoO,UACvC,CAAC4R,EAAazhB,EAAGyhB,EAAaxhB,EAAGwhB,EAAathB,GAAG9Q,IAAIwS,OAAOkd,aAExD4C,EAAW9T,GAAOiB,6BACtB0S,EACAE,GACAhc,UACF8b,EAAiB1vB,SAAW,IAAI2P,WAC9BkgB,EAAS,GACTA,EAAS,GACTA,EAAS,IAEXH,EAAiBre,UAAUuX,gBAAgB,CACzC2B,iBAAkBmF,EAClBtF,iBAAiB,O,6BAKhBvd,GAAqC,IAA9B2J,EAA8B,uDAAvB,KAAMd,EAAiB,uDAAN,KACpC,OAAO4Z,EAAKlZ,OAAOvJ,EAAO2J,EAAMd,M,8BAOpB7I,GAAqC,IAA9B2J,EAA8B,uDAAvB,KAAMd,EAAiB,uDAAN,KAC3C,IAAKc,IAASd,EACZ,KAAM,mDAER,IAAMpf,EAAOkgB,EAAKlgB,KACZurB,EAAQrL,EAAK+Y,UAAUhyB,KAAI,SAAA8Q,GAAC,OAAIe,GAAKkB,GAAGjC,GAAGqI,eAC3CoZ,EAAS/T,GAAOgU,mBAAmBlO,GACjCd,EAAW+O,EAAX/O,OACJ1N,EAAO,MAGTA,EADoB,IAAlB0N,EAAO7nB,OACFmhB,eAAYL,YACjB1jB,EACA,CAAEyqB,OAAQA,EAAQxC,WAAW,GAC7B1R,GAGKkP,GAAOiU,qBACZnjB,EACAkU,EACAhM,UAAO6K,OACPqM,GAAS,EACT31B,IAGC0J,SAAWoP,GAAKkB,GAAGkG,EAAKxW,UAAU0W,YACvCrD,EAAKiB,SAAWyH,GAAO8E,qBACrB9L,UAAOgJ,UAAUvH,EAAK3X,OACtBgO,EAFc,sBAGCvW,IAEjB+c,EAAKW,mBAAqBF,SAAMC,SAASyC,EAAK3C,YAC3CtW,KAAI,SAAAsW,GAAU,OACb,IAAIM,cACFN,EAAW,GACXA,EAAW,GACXA,EAAW,GACXA,EAAW,IACX9C,eAEH2D,OAAOP,cAAW8b,YACrB,IAAMT,EAAazT,GAAOmU,gBAAgBJ,GACpCxD,EAAYkB,GAChB3gB,EAD0C,GAAC,MAEtC2J,GAFqC,IAE/BnD,OAAMmc,eACjB9Z,GAGIya,EAAc,IAAIb,EACtBjc,EACAwO,EAAMtkB,KAAI,SAAA6yB,GAAK,MAAI,CAACA,EAAMliB,EAAGkiB,EAAMjiB,EAAGiiB,EAAM/hB,MAC5Cie,EACAkD,EACAhZ,EAAKlD,aAGP,OADAD,EAAKzU,QAAUyxB,GAAe3a,EAAUya,GACjCA,M,GA7JQ/c,I,IAAbkc,G,OAmGU,QA8DDA,UAETe,GAAiB,SAAC3a,EAAUjC,GAAX,OAAwB,WAC7CiC,EAASgO,mBACThO,EACGiU,gBAAgBlW,EAASnd,MACzBsE,SAAQ,SAAA6E,GAAI,OAAKA,EAAKjG,KAAKi2B,uBAAyB,OAGzD,SAASa,GAAsBzjB,EAAO6I,EAAU6a,EAAS/2B,GAEvD,IAAMg3B,EAAe,KAAID,EAAQhC,WAC3BuB,EAASt2B,EAAKg2B,WAAWjyB,KAAI,SAAA8Q,GAAC,OAAI,IAAIsB,WAAQtB,EAAE,GAAIA,EAAE,GAAI,MAIhE,OAHAmiB,EAAa51B,SAAQ,SAAAxE,GACnBA,EAAEigB,OAAS7c,EAAK6Z,QAEX7Z,EAAK8yB,UAAU/uB,KAAI,SAACixB,EAAGz4B,IAC5By4B,EAAE30B,MAAQ9D,EACVy4B,EAAEl4B,KAAF,UAAYi6B,EAAQj6B,KAApB,yBAAyCP,GACzCy4B,EAAExuB,SAAWoP,GAAKkB,GAAG9W,EAAK+1B,UAAUx5B,IAAI2gB,YACxC8X,EAAExa,mBAAqBG,cAAW8b,WAC9Bl6B,EAAI,GAAKA,EAAIyD,EAAK8yB,UAAUpzB,OAAS,KACvCs1B,EAAED,UAAU3zB,SAAQ,SAAA61B,GAAM,OAAIA,EAAOhjB,aAC3BijB,GACR7jB,EACA2hB,EAAEla,SAASE,aACXhb,EAAK6Z,KACLtd,EACA+5B,EACAtB,EAAExuB,SANM0wB,GAQRra,OAASmY,GAEb,OAAOA,KAIX,SAASmC,GACPC,EACA/jB,EACA0jB,EACA/2B,EACAkc,GAEA,IADAmb,EACA,uDADyBP,GAEnBnC,EAAUpS,GAAO+U,aAAaF,GACpCA,EAAYA,EAAUrzB,KAAI,SAAA2Q,GAAC,OAAIA,EAAEkQ,SAAS+P,MAE1C,IAAM2B,EAAS/T,GAAOgU,mBAAmBa,GAOnCvC,EAAUtS,GAAOiU,qBACrBnjB,EACAijB,EAAO/O,OACPhM,UAAO6K,OACPqM,GAAS,EACTsE,EAAQj6B,MAkBV,OAfA+3B,EAAQruB,SAAWuwB,EAAQvwB,SAC3BquB,EAAQra,mBAAqBuc,EAAQvc,mBACrCqa,EAAQC,iBAAiBH,GACzBE,EAAQ/Z,SAAWic,EAAQjc,SAC3B+Z,EAAQd,WAAagD,EAAQhD,WAC7Bc,EAAQhY,OAASka,EAAQla,OACzBgY,EAAQzvB,QAAU2xB,EAAQ3xB,QAE1BpF,EAAK+1B,UAAYqB,EAAUrzB,KAAI,SAAA2Q,GAAC,OAAIkB,GAAKuE,UAAUzF,GAAG0F,aACtDpa,EAAKg2B,WAAazT,GAAOmU,gBAAgBJ,GACzCt2B,EAAK6Z,KAAOgb,EAEZ70B,EAAK8yB,UAAYuE,EAAuBhkB,EAAO6I,EAAU6a,EAAS/2B,GAElE+2B,EAAQ9iB,UACDmjB,EAgET,SAASG,GAA4BlkB,EAAO6I,EAAU6a,EAAS/2B,GAE7D,OAAOg0B,GAA2B3gB,EAAOrT,EAAMkc,GAUjD,IAAMsb,GAAuB,SAACnkB,EAAOokB,EAAcvb,EAAUwJ,GAC3D,IAAMrlB,EAAQo3B,EAAap3B,MACrBvD,EAAO26B,EAAa5a,OAAO/f,KACjCof,EAASiU,gBAAgBrzB,GAAMsE,SAAQ,SAAAs2B,GACrC,IAAMC,EAAYt3B,EAAQqlB,EACpB1lB,EAAO03B,EAAa13B,KACpB43B,EAAiB53B,EAAK+1B,UAAUr2B,OAChCma,EAAO7Z,EAAK6Z,KACdud,EAAY,GACVS,EAAY73B,EAAK+1B,UAAUhyB,KAAI,SAAA2Q,GAAC,OAAIkB,GAAKkB,GAAGpC,GAAGwI,eAErD,GAAIya,EAAY,EACdP,EAAY,CACVS,EAAU,GAAGviB,MAAM,GAAGsP,SAASiT,EAAU,IAAIviB,MAAM,KACnDlV,OAAOy3B,QACJ,GAAIF,EAAYC,EAAiB,EACtCR,EAAYS,EAAUz3B,OAAO,CAC3By3B,EAAUD,EAAiB,GACxBtiB,MAAM,GACNsP,SAASiT,EAAUD,EAAiB,IACpCtiB,MAAM,UAEN,CAEL,IADA,IAAMwiB,EAAez3B,EAAQ8U,KAAKmB,IAAI,EAAGoP,GAChCnpB,EAAI,EAAGA,EAAIu7B,EAAcv7B,IAChC66B,EAAUx2B,KAAKi3B,EAAUt7B,IAE3B66B,EAAUx2B,KAAKi3B,EAAUF,GAAWrgB,IAAIugB,EAAUx3B,IAAQiV,MAAM,KAChE,IAAK,IAAI/Y,EAAIu7B,EAAcv7B,EAAIq7B,EAAgBr7B,IAC7C66B,EAAUx2B,KAAKi3B,EAAUt7B,IAI7B46B,GACEC,EACA/jB,EACAwG,EACA7Z,EACAkc,EACAqb,IAGFrb,EAASqT,mBAAmBzyB,OAI1Bi7B,GAAqB,SAAC1kB,EAAOokB,EAAcvb,GAC/C,IAAM1P,EAAU,GAoChB,OAlCA0P,EAASiU,gBAAgBsH,EAAa5a,OAAO/f,MAAMsE,SAAQ,SAAAs2B,GAIpC,IAHRA,EAAa13B,KACP+1B,UAETr2B,QACR8M,EAAQ5L,KAAK,CACX0vB,KAAM,SAAAprB,GAAK,OAAI,2BAAGC,UAAU,gBAAmBD,KAC/CqoB,OAAQ,SAAAxH,IA7FO,SAAC1S,EAAOokB,EAAcvb,GAC3C,IAAM7b,EAAQo3B,EAAap3B,MACrBvD,EAAO26B,EAAa5a,OAAO/f,KACjCof,EAASiU,gBAAgBrzB,GAAMsE,SAAQ,SAAAs2B,GACrC,IAAM13B,EAAO03B,EAAa13B,KACpB6Z,EAAO7Z,EAAK6Z,KAEdud,EAAYp3B,EAAK+1B,UAAUhyB,KAAI,SAAA2Q,GAAC,OAAIkB,GAAKkB,GAAGpC,GAAGwI,eAEnDka,EAAUxzB,OAAOvD,EAAO,GACxBL,EAAK8yB,UAAUlvB,OAAOvD,EAAO,GAAG,GAAG4T,UAEnCkjB,GACEC,EACA/jB,EACAwG,EACA7Z,EACAkc,EACAqb,IAGFrb,EAASqT,mBAAmBzyB,MAyEtBk7B,CAAe3kB,EAAOokB,EAAc1R,GACpCA,EAAWmE,oBAEbptB,KAAM,sBAIV0P,EAAQ5L,KAAK,CACX0vB,KAAM,SAAAprB,GAAK,OAAI,2BAAGC,UAAU,oBAAuBD,KACnDqoB,OAAQ,SAAAxH,GACNyR,GAAqBnkB,EAAOokB,EAAc1R,GAAa,GACvDA,EAAWmE,oBAEbptB,KAAM,iBAGR0P,EAAQ5L,KAAK,CACX0vB,KAAM,SAAAprB,GAAK,OAAI,2BAAGC,UAAU,uBAA0BD,KACtDqoB,OAAQ,SAAAxH,GACNyR,GAAqBnkB,EAAOokB,EAAc1R,EAAY,GACtDA,EAAWmE,oBAEbptB,KAAM,gBAIH0P,GAGHwnB,GAA6B,SAAC3gB,EAAOrT,EAAMkc,GAC/C,IAAM7W,EAAQ,IAAIkW,UAAO,IAAM,IAAM,KAC/BuX,EAAY,GACZzK,EAAQroB,EAAK+1B,UAAUhyB,KAAI,SAAA8Q,GAAC,OAAIe,GAAKkB,GAAGjC,GAAGqI,eAC3CoZ,EAASt2B,EAAKg2B,WAAWjyB,KAAI,SAAA8Q,GAAC,OAAI,IAAIsB,WAAQtB,EAAE,GAAIA,EAAE,GAAI,MAC1DojB,EAAYj4B,EAAK6Z,KA2BvB,OA1BAwO,EAAMjnB,SAAQ,SAAC/C,EAAG9B,GAChB,IAEQK,EACA0B,EAHF6oB,EAAS+Q,GAAc7kB,EAAOhO,EAAO4yB,EAAW17B,GAShDw1B,EAAiB,IAANx1B,GAAWA,IAAM8rB,EAAM3oB,OAAS,EAAIynB,KAP7CvqB,EAAIs6B,GAAY7jB,EAAOhO,EAAO4yB,EAAW17B,EAAG+5B,EAAQj4B,EAAhD64B,IACJ54B,EAAI45B,GAAc7kB,EAAOhO,EAAO4yB,EAAW17B,EAAvC27B,IACRnE,WAAa,GACfn3B,EAAEigB,OAASve,EACJA,GAITyzB,EAASlV,OAASob,EAClBlG,EAASvrB,SAAWnI,EACpB0zB,EAAS1xB,MAAQ9D,EACjBw1B,EAASla,UAAY,IAAIwd,cAEzBvC,EAAUlyB,KAAKmxB,GAEfA,EAASla,UAAUP,IAvLa,SAACjE,EAAO6I,GAC1C,OAAO,YAA2C,IAAxC6U,EAAwC,EAAxCA,iBAAkBH,EAAsB,EAAtBA,gBACrBG,EAAiBlU,QACtBX,EACGiU,gBAAgBY,EAAiBlU,OAAO/f,MACxCsE,SAAQ,SAAAs2B,GACP,IAAMr3B,EAAQ0wB,EAAiB1wB,MACzBL,EAAO03B,EAAa13B,KACpB6Z,EAAO7Z,EAAK6Z,KACdud,EAAYp3B,EAAK+1B,UAAUhyB,KAAI,SAAA2Q,GAAC,OAAIkB,GAAKkB,GAAGpC,GAAGwI,eACnDka,EAAU/2B,GAAS0wB,EAAiBvqB,SAEpC2wB,GACEC,EACA/jB,EACAwG,EACA7Z,EACAkc,GAGE7b,EAAQ,GAAKA,EAAQ+2B,EAAU13B,OAAS,GAE1Cwc,EAASqS,qBAAqB,CAACvuB,EAAK8yB,UAAUzyB,GAAO00B,UAAU,KAG7DnE,IACF1U,EAASqT,mBAAmB1V,EAAK/c,MACjCof,EAASiU,gBAAgBtW,EAAK/c,MAAMsE,SAAQ,SAAA6E,GAC1CA,EAAKjG,KAAKi2B,sBAAwB51B,EAClC6b,EAASsS,cAAcvoB,EAAKjG,KAAKozB,kBA0JlBoB,CAA4BnhB,EAAO6I,OAG5D4W,EAAU1xB,SAAQ,SAAAsT,GAChBA,EAAEtP,QAAU,WACV8W,EAASic,kBAAkBJ,GAAmB1kB,EAAOqB,EAAGwH,QAGrD4W,GAGT,SAASoE,GAAY7jB,EAAOhO,EAAO4yB,EAAW17B,EAAG+5B,EAAQj4B,GACvD,OAAO,WACL,IAAMgC,EAAQi2B,EACXvyB,KAAI,SAAA8Q,GAAC,OAAIxW,EAAEumB,SAAS/P,GAAGnV,YACvBsL,QAAO,SAAC3L,EAAGqV,EAAGnY,GAAP,OAAc8C,EAAE7B,MAAQkX,EAAIrV,EAAI,CAAE7B,MAAOkX,EAAGrU,MAAO9D,KAAM,CAC/DiB,MAAO+Y,OAAOC,UACdnW,OAAQ,IACPA,MACC2W,EAAIsf,EAAOj2B,EAAQ,GACtBukB,SAAS0R,EAAOj2B,IAChBkX,YACAjC,MAAMmd,IAQT,OAPUlQ,GAAO6V,mBACf/kB,EACA2D,EACA3R,EAHQ,UAIL4yB,EAAUn7B,KAJL,uBAIwBP,IAChC,IAMN,SAAS27B,GAAc7kB,EAAOhO,EAAO4yB,EAAW17B,GAC9C,OAAO,kBACLgmB,GAAO6S,aACL/hB,EACAhO,EACAotB,GAHF,UAIKwF,EAAUn7B,KAJf,yBAIoCP,IAClC,I,gbC3dA87B,G,kCACJ,aAAc,YACZ,OADY,aACRzgB,GAAiB,OAAAA,KACrB,eAFY,sBAcL,SAAAmO,GACP,sDAAaA,GACbA,EAAWyH,kBAAX,YAhBY,6BAmBE,SAAC5iB,EAAKmb,GACE,IAAhBnb,EAAI8iB,SACV3H,EAAWzJ,iBAAiBlb,SAAQ,SAAAuoB,GAAU,IACpCtW,EAAkCsW,EAAlCtW,MAAO+N,EAA2BuI,EAA3BvI,OAAQyI,EAAmBF,EAAnBE,OAAQE,EAAWJ,EAAXI,OACTxH,GAAOwL,kBAAkB1a,EAAO+N,GACxChgB,SAAQ,SAAAgxB,GACpBvI,EAAOiE,cAAc/D,GACrB,EAAKuO,WAAW13B,KAAKwxB,GACrB,IAAMmG,EACuB,IAA3B,EAAKD,WAAW54B,OACZ,CAAC,EAAK44B,WAAW,GAAI,EAAKA,WAAW,IACrC,EAAKA,WAEX,EAAKE,YACHD,EACAE,GACAplB,EACA0S,GACA,GAEFA,EAAWoS,kBACT,EAAKO,yBAAyB7O,EAAQE,EAAQ1W,aAxCxC,6BA8CE,SAACzI,EAAKmb,OA9CR,2BAkDA,SAAAA,OAlDA,yBAsDF,SAACnb,EAAKmb,GAChBA,EAAWzJ,iBAAiBlb,SAAQ,SAAAuoB,GAAU,IACpCtW,EAA0BsW,EAA1BtW,MAAOwW,EAAmBF,EAAnBE,OAAQE,EAAWJ,EAAXI,OACjB4O,EAAiB,EAAKD,yBAC1B7O,EACAE,EACA1W,GAEIulB,EAAmB,CACvBC,MAAO,kBAAMF,EAAe,GAAGpL,OAAOxH,IACtCxa,OAAQ,kBAAMotB,EAAe,GAAGpL,OAAOxH,IACvC+S,UAAW,kBAAMH,EAAe,GAAGpL,OAAOxH,IAC1CuG,OAAQ,WACyB,IAA3B,EAAKgM,WAAW54B,QAClB,yDAAgBkL,EAAKmb,GAEvB4S,EAAe,GAAGpL,OAAOxH,KAGzBnb,EAAI0iB,QAAQsL,EACdA,EAAiBhuB,EAAI0iB,QAErB,yDAAgB1iB,EAAKmb,SA5Eb,2BAiFA,SACZsC,EACAvrB,EACAuW,EACA0S,GAGG,IAFH+L,IAEG,yDADHzsB,EACG,uDADKkW,UAAO6K,OAETJ,EAAWD,EAAWvJ,cAAcxc,KAAK6Z,KAEzCkf,EAAa1Q,EAAMtkB,KAAI,SAAAyT,GAAC,OAC5B+K,GAAOkB,gCACL,CAAE5G,OAAQmJ,GACVpQ,GAAKuE,UAAU3C,IACf0F,eAEEiX,EAAc5R,GAAO+U,aAAayB,GAClCC,EAAgBD,EAAWh1B,KAAI,SAAAyT,GAAC,OAAIA,EAAEoN,SAASuP,MAE/C8E,EAAWnD,GAAKlZ,OACpBvJ,EACA,CACEvW,KAAMA,EACN0J,SAAUoP,GAAKuE,UAAUga,GAAa/Z,UACtC/U,MAAO,CAACA,EAAMhI,EAAGgI,EAAM4V,EAAG5V,EAAM2P,GAChC+gB,UAAWiD,EAAcj1B,KAAI,SAAA8Q,GAAC,OAAIe,GAAKuE,UAAUtF,GAAGuF,cAEtD2L,GAEFkT,EAASpf,KAAKgD,OAASmJ,EACvBD,EAAWjJ,iBAAiBmc,EAAUjT,EAASlpB,KAAMg1B,MA/GzC,wCAkHa,SAACjI,EAAQE,EAAQ1W,GAC1C,IAAM4C,EAAM,GA0BZ,OAzBAA,EAAIrV,KAAK,CACP0vB,KAAM,SAAAprB,GAAK,OAAI,2BAAGC,UAAU,gBAAmBD,KAC/CqoB,OAAQ,SAAAxH,GACN8D,EAAOC,cAAcC,GAAQ,GAC7BhE,EAAWhJ,4BAA4B0b,IAAgB,GACvD,EAAKH,WAAa,GAClBvS,EAAWmE,oBAEbptB,KAAM,uCAEJ,EAAKw7B,WAAW54B,OAAS,GAC3BuW,EAAIrV,KAAK,CACP0vB,KAAM,SAAAprB,GAAK,OAAI,2BAAGC,UAAU,gBAAmBD,KAC/CqoB,OAAQ,SAAAxH,GACN8D,EAAOC,cAAcC,GAAQ,GAC7BhE,EAAWhJ,4BAA4B0b,IAAgB,GACvD,IAAM37B,EAAO,OAAH,OAAUqY,KAAKmK,MAAsB,IAAhBnK,KAAK4B,WACpC,EAAKyhB,YAAY,EAAKF,WAAYx7B,EAAMuW,EAAO0S,GAAY,GAC3D,EAAKuS,WAAa,GAClBvS,EAAWsK,sBAAsBvzB,GACjCipB,EAAWmE,oBAEbptB,KAAM,wBAGHmZ,KA1IP,EAAKnY,IAAM,WACX,EAAKhB,KAAO,gBACZ,EAAKw7B,WAAa,GAClB,EAAKhI,KAAO,SAAAprB,GAAK,OAAI,2BAAGC,UAAU,uBAA0BD,KAC5D0S,GAAW,QAPC,G,wDAWZ,OAAO,IAAIygB,M,GAZcjM,IAkJzBxU,GAAW,KACT6gB,GAAiB,aACRJ,M,4aC5If,IAAM5F,GAASD,GAAUC,OACnByG,GAAcvf,SAAMwf,IAEpBC,G,kCAMJ,WAAYvf,EAAMwf,EAAc9xB,EAAQurB,GAA6B,MAAlBhZ,EAAkB,uDAAJ,GAAI,oBACnE,cAAMD,EAAMC,GADuD,uBAkB3D,kBAAMsf,EAAcrf,QAhB5B,EAAKsf,aAAeA,EACpB,EAAK9xB,OAASA,EACd,EAAKurB,UAAYA,EAJkD,E,8CAQnE,IAAM9V,EAAO,iDAGb,OAFAA,EAAKqc,aAAev1B,KAAKu1B,aACzBrc,EAAKzV,OAASzD,KAAKyD,OACZyV,I,6BAGF3J,GAAqC,IAA9B2J,EAA8B,uDAAvB,KAAMd,EAAiB,uDAAN,KACpC,OAAOkd,EAAcxc,OAAOvJ,EAAO2J,EAAMd,M,8BAO7B7I,GAAqC,IAA9B2J,EAA8B,uDAAvB,KAAMd,EAAiB,uDAAN,KAC3C,IAAKc,IAASd,EACZ,KAAM,sDAER,IAAMkJ,EAAUpI,EAAKqc,aAAat1B,KAAI,SAAA8Q,GAAC,OAAIe,GAAKkB,GAAGjC,GAAGqI,eAChDiX,EAAcve,GAAKkB,GAAGkG,EAAKxW,UAAU0W,YAErCrD,EAAOyf,GACXjmB,EACA+R,EACApI,EAAKzV,OACLyV,EAAKlgB,MAEP+c,EAAKrT,SAAW2tB,EAEhB,IAAMrZ,EAAW,IAAI2G,oBAAJ,yBAAuCzE,EAAKlgB,MAAQuW,GAC/DhO,EAAQ,IAAIkW,UAAOyB,EAAK3X,MAAM,GAAI2X,EAAK3X,MAAM,GAAI2X,EAAK3X,MAAM,IAClEyV,EAASE,aAAe3V,EACxByV,EAASmB,cAAgB5W,EACzBwU,EAAKiB,SAAWA,EAChBjB,EAAKka,WAAa,GAClBzZ,SAAMC,SAASyC,EAAK3C,YAAYjZ,SAAQ,SAAAiZ,GACtC,IAAM8C,EAAoB,IAAIxC,cAC5BN,EAAW,GACXA,EAAW,GACXA,EAAW,GACXA,EAAW,IAEbR,EAAKW,mBAAqB2C,EAAkB5F,eAG9C,IAAMgiB,EAAYvF,GAChB3gB,EACA+R,EACAvL,EACAqC,GAGF,OAAO,IAAIkd,EACTvf,EACAuL,EAAQrhB,KAAI,SAAA6yB,GAAK,MAAI,CAACA,EAAMliB,EAAGkiB,EAAMjiB,EAAGiiB,EAAM/hB,MAC9CmI,EAAKzV,OACLgyB,EACAvc,EAAKlD,iB,GAvEiBF,I,IAAtBwf,G,OA0BU,iBAsDhB,IAYMI,GAAqB,SAAAC,GACzB,IAAMxjB,EAAM,GAIZ,OAHAA,EAAIrV,KAAK64B,EAAe,IACxBxjB,EAAIrV,KAAK64B,EAAe,IACxBxjB,EAAIrV,KAAK64B,EAAe,IACjBxjB,GAUHqjB,GAA4B,SAACjmB,EAAO+R,EAAS7d,EAAQzK,GACzD,IAAMw3B,EAAI,IAAIne,WAAQ,EAAG,EAAG5O,GACtBmyB,EAAoB,CACxBtV,UAAW,GACXU,MAAO,IAGT4U,EAAkBtV,UAAlB,KAAkCgB,GAClC,IAAK,IAAI7oB,EAAI,EAAGA,EAAI6oB,EAAQ1lB,OAAQnD,IAClCm9B,EAAkBtV,UAAUxjB,KAAKwkB,EAAQ7oB,GAAG+a,IAAIgd,IAGlD,IAAMt2B,EAAIonB,EAAQ1lB,OACZi6B,EAAqBpX,GAAOqX,mBAAmBxU,GAC/CyU,EAAqBtX,GAAOqX,mBAChCF,EAAkBtV,UAAU0V,MAAM97B,IAEjC+F,KAAI,SAAA2Q,GAAC,OAAIA,EAAE3Q,KAAI,SAAA8Q,GAAC,OAAIA,EAAI7W,QACxB+F,IAAIy1B,IAEDO,EA/CoB,SAAA3U,GAI1B,IAHA,IAAMpnB,EAAIonB,EAAQ1lB,OACZgmB,EAAcnD,GAAOyX,mBAAmB5U,GACxCnP,EAAM,GACH1Z,EAAI,EAAGA,EAAIyB,EAAGzB,IAAK,CAC1B,IAAM09B,GAAQ19B,EAAI,GAAKyB,EACvBiY,EAAIrV,KAAK,CAACrE,EAAGyB,EAAIi8B,EAAMA,IACvBhkB,EAAIrV,KAAK,CAACrE,EAAGyB,EAAIzB,EAAGyB,EAAIi8B,IAE1B,OAAOvU,EAAc,EAAIzP,EAAMA,EAAIlS,IAAIy1B,IAsCXU,CAAoB9U,GAYhD,OAVAsU,EAAkB5U,MAAQ6U,EACvBv5B,OAAOy5B,GACPz5B,OAAO25B,GAEGxX,GAAOyE,yBAClBlqB,EACAuW,EACAqmB,EAAkBtV,UAClBsV,EAAkB5U,QAKtB,SAASgS,GAAsBzjB,EAAO6I,EAAU6a,EAAS/2B,GAQvD,OANqB,KAAI+2B,EAAQhC,WACpB3zB,SAAQ,SAAAxE,GACnBm6B,EAAQ10B,YAAYzF,GACpBA,EAAEigB,OAAS7c,EAAK6Z,QAGX7Z,EAAK8yB,UAAU/uB,KAAI,SAACixB,EAAGz4B,GAM5B,OALAy4B,EAAEnd,UAAY,IAAIwd,cAClBL,EAAEnd,UAAUP,IAAIkd,GAA4BnhB,EAAO6I,IACnD8Y,EAAE30B,MAAQ9D,EACVy4B,EAAEl4B,KAAF,UAAYi6B,EAAQj6B,KAApB,mBAAmCP,GACnCy4B,EAAExuB,SAAWoP,GAAKkB,GAAG9W,EAAKq5B,aAAa98B,IAAI2gB,YACpC8X,KAIX,SAASmC,GACPC,EACA/jB,EACAwG,EACA7Z,EACAkc,GAEA,IADAmb,EACA,uDADyBP,GAEnBnC,EAAUpS,GAAO+U,aAAaF,GACpCA,EAAYA,EAAUrzB,KAAI,SAAA2Q,GAAC,OAAIA,EAAEkQ,SAAS+P,MAE1C,IAAME,EAAUyE,GACdjmB,EACA+jB,EACAp3B,EAAKuH,OACLsS,EAAK/c,MAeP,OAbA+3B,EAAQruB,SAAWqT,EAAKrT,SACxBquB,EAAQra,mBAAqBX,EAAKW,mBAClCqa,EAAQC,iBAAiBH,GACzBE,EAAQ/Z,SAAWjB,EAAKiB,SACxB+Z,EAAQd,WAAala,EAAKka,WAC1Bc,EAAQhY,OAAShD,EAAKgD,OAEtB7c,EAAKq5B,aAAejC,EAAUrzB,KAAI,SAAA2Q,GAAC,OAAIkB,GAAKuE,UAAUzF,GAAG0F,aACzDpa,EAAK6Z,KAAOgb,EAEZ70B,EAAK8yB,UAAYuE,EAAuBhkB,EAAO6I,EAAUrC,EAAM7Z,GAE/D6Z,EAAK5F,UACEmjB,EAGT,IAAM5C,GAA8B,SAACnhB,EAAO6I,GAC1C,OAAO,YAA2C,IAAxC6U,EAAwC,EAAxCA,iBAAkBH,EAAsB,EAAtBA,gBACrBG,EAAiBlU,QACtBX,EACGiU,gBAAgBY,EAAiBlU,OAAO/f,MACxCsE,SAAQ,SAAA+4B,GACP,IAAM95B,EAAQ0wB,EAAiB1wB,MACzBL,EAAOm6B,EAAgBn6B,KACvB6Z,EAAO7Z,EAAK6Z,KACZ/c,EAAO+c,EAAK/c,KACds6B,EAAYp3B,EAAKq5B,aAAat1B,KAAI,SAAA2Q,GAAC,OAAIkB,GAAKkB,GAAGpC,GAAGwI,eACtDka,EAAU/2B,GAAS0wB,EAAiBvqB,SACpC2wB,GACEC,EACA/jB,EACAwG,EACA7Z,EACAkc,GAGE0U,GACF1U,EAASqT,mBAAmBzyB,QAMtC,SAASy6B,GAA4BlkB,EAAO6I,EAAU6a,EAAS/2B,GAE7D,OAAOg0B,GACL3gB,EACArT,EAAKq5B,aAAat1B,KAAI,SAAA2Q,GAAC,OAAIkB,GAAKkB,GAAGpC,GAAGwI,eACtCld,EAAK6Z,KACLqC,GAYJ,IAAMsb,GAAuB,SAACnkB,EAAOokB,EAAcvb,EAAUwJ,GAC3D,IAAMrlB,EAAQo3B,EAAap3B,MACrBvD,EAAO26B,EAAa5a,OAAO/f,KACjCof,EAASiU,gBAAgBrzB,GAAMsE,SAAQ,SAAAs2B,GAUrC,IATA,IAAM13B,EAAO03B,EAAa13B,KACpB43B,EAAiB53B,EAAKq5B,aAAa35B,OACnCi4B,EAAYuB,GAAY74B,EAAQqlB,EAAakS,GAC7C/d,EAAO7Z,EAAK6Z,KACZge,EAAY73B,EAAKq5B,aAAat1B,KAAI,SAAA2Q,GAAC,OAAIkB,GAAKkB,GAAGpC,GAAGwI,eAEpDka,EAAY,GACVU,EAAez3B,EAAQ8U,KAAKmB,IAAI,EAAGoP,GAEhCnpB,EAAI,EAAGA,EAAIu7B,EAAcv7B,IAChC66B,EAAUx2B,KAAKi3B,EAAUt7B,IAG3B66B,EAAUx2B,KAAKi3B,EAAUF,GAAWrgB,IAAIugB,EAAUx3B,IAAQiV,MAAM,KAEhE,IAAK,IAAI/Y,EAAIu7B,EAAcv7B,EAAIq7B,EAAgBr7B,IAC7C66B,EAAUx2B,KAAKi3B,EAAUt7B,IAG3B46B,GACEC,EACA/jB,EACAwG,EACA7Z,EACAkc,EACAqb,QAyBAQ,GAAqB,SAAC1kB,EAAOokB,EAAcvb,GAC/C,IAAM1P,EAAU,GAoChB,OAlCA0P,EAASiU,gBAAgBsH,EAAa5a,OAAO/f,MAAMsE,SAAQ,SAAAs2B,GAC5CA,EAAa13B,KACLq5B,aAET35B,OAAS,GACnB8M,EAAQ5L,KAAK,CACX0vB,KAAM,SAAAprB,GAAK,OAAI,2BAAGC,UAAU,gBAAmBD,KAC/CqoB,OAAQ,SAAAxH,IA5BO,SAAC1S,EAAOokB,EAAcvb,GAC3C,IAAM7b,EAAQo3B,EAAap3B,MACrBvD,EAAO26B,EAAa5a,OAAO/f,KACjCof,EAASiU,gBAAgBrzB,GAAMsE,SAAQ,SAAAs2B,GACrC,IAAM13B,EAAO03B,EAAa13B,KACpB6Z,EAAO7Z,EAAK6Z,KAEdud,EAAYp3B,EAAKq5B,aAAat1B,KAAI,SAAA2Q,GAAC,OAAIkB,GAAKkB,GAAGpC,GAAGwI,eAEtDka,EAAUxzB,OAAOvD,EAAO,GACxBL,EAAK8yB,UAAUlvB,OAAOvD,EAAO,GAAG,GAAG4T,UAEnCkjB,GAAmCC,EAAW/jB,EAAOwG,EAAM7Z,EAAMkc,GAEjEA,EAASqT,mBAAmBzyB,MAetBk7B,CAAe3kB,EAAOokB,EAAc1R,GACpCA,EAAWmE,oBAEbptB,KAAM,sBAIV0P,EAAQ5L,KAAK,CACX0vB,KAAM,SAAAprB,GAAK,OAAI,2BAAGC,UAAU,oBAAuBD,KACnDqoB,OAAQ,SAAAxH,GACNyR,GAAqBnkB,EAAOokB,EAAc1R,GAAa,GACvDA,EAAWmE,oBAEbptB,KAAM,iBAGR0P,EAAQ5L,KAAK,CACX0vB,KAAM,SAAAprB,GAAK,OAAI,2BAAGC,UAAU,uBAA0BD,KACtDqoB,OAAQ,SAAAxH,GACNyR,GAAqBnkB,EAAOokB,EAAc1R,EAAY,GACtDA,EAAWmE,oBAEbptB,KAAM,gBAIH0P,GAGHwnB,GAA6B,SAAC3gB,EAAO+R,EAASgV,EAAale,GAC/D,IAAM4W,EAAY,GA0BlB,OAzBA1N,EAAQhkB,SAAQ,SAAC/C,EAAG9B,GAClB,IAAM8I,EAAQ,IAAIkW,UAAO,IAAM,IAAM,KAC/BwW,EAAWxP,GAAO6S,aACtB/hB,EACAhO,EACAotB,GAHe,UAIZ2H,EAAYt9B,KAJA,0BAIsBP,IACrC,GAEFw1B,EAASlV,OAASud,EAClBrI,EAASvrB,SAAWnI,EACpB0zB,EAAS1xB,MAAQ9D,EACjBw1B,EAASla,UAAY,IAAIwd,cAEzBvC,EAAUlyB,KAAKmxB,GAEfA,EAASla,UAAUP,IAAIkd,GAA4BnhB,EAAO6I,OAG5D4W,EAAU1xB,SAAQ,SAAAsT,GAChBA,EAAEtP,QAAU,WACV8W,EAASic,kBAAkBJ,GAAmB1kB,EAAOqB,EAAGwH,QAIrD4W,GAGMsG,M,4aCrXf,IAAIxhB,GAAW,KA2KAyiB,G,kCArKb,aAAc,YACZ,OADY,aACRziB,GAAiB,OAAAA,KACrB,eAFY,sBAcL,SAAAmO,GACP,sDAAaA,GACbA,EAAWyH,kBAAX,YAhBY,2CAmBgB,SAAC3D,EAAQE,EAAQ1W,GAC7C,IAAM4C,EAAM,GAmCZ,OAlCAA,EAAIrV,KAAK,CACP0vB,KAAM,SAAAprB,GAAK,OAAI,2BAAGC,UAAU,gBAAmBD,KAC/CqoB,OAAQ,SAAAxH,GACN8D,EAAOC,cAAcC,GAAQ,GAC7BhE,EAAWhJ,4BA7Bc,uBA6BwC,GACjE,EAAKub,WAAa,GAClBvS,EAAWmE,oBAEbptB,KAAM,0CAEJ,EAAKw7B,WAAW54B,OAAS,GAC3BuW,EAAIrV,KAAK,CACP0vB,KAAM,SAAAprB,GAAK,OAAI,2BAAGC,UAAU,gBAAmBD,KAC/CqoB,OAAQ,SAAAxH,GACN8D,EAAOC,cAAcC,GAAQ,GAC7BhE,EAAWhJ,4BAxCY,uBA0CrB,GAEF,IAAMjgB,EAAO,gBAAH,OAAmBqY,KAAKmK,MAAsB,IAAhBnK,KAAK4B,WAC7C,EAAKujB,oBACH,EAAKhC,WACLx7B,EACAuW,EACA0S,GACA,GAEF,EAAKuS,WAAa,GAClBvS,EAAWsK,sBAAsBvzB,GACjCipB,EAAWmE,oBAEbptB,KAAM,2BAGHmZ,KAvDK,6BA0DE,SAACrL,EAAKmb,GACpBA,EAAWzJ,iBAAiBlb,SAAQ,SAAAuoB,GAClC,IAAMtW,EAAQsW,EAAOtW,MACf+N,EAASuI,EAAOvI,OAChByI,EAASF,EAAOE,OACAtH,GAAOwL,kBAAkB1a,EAAO+N,GACxChgB,SAAQ,SAAAgxB,GACpBvI,EAAOiE,cAAcnE,EAAOI,QAC5B,EAAKuO,WAAW13B,KAAKwxB,GACrB,IAAMmI,EACuB,IAA3B,EAAKjC,WAAW54B,OACZ,CAAC,EAAK44B,WAAW,GAAI,EAAKA,WAAW,IACrC,EAAKA,WACX,EAAKgC,oBACHC,EA5EuB,sBA8EvBlnB,EACA0S,GACA,GAEFA,EAAWoS,kBACT,EAAKqC,4BAA4B3Q,EAAQF,EAAOI,OAAQ1W,aA/ElD,6BAqFE,SAACzI,EAAKmb,OArFR,2BAyFA,SAAAA,OAzFA,yBA6FF,SAACnb,EAAKmb,GAEhBA,EAAWzJ,iBAAiBlb,SAAQ,SAAAuoB,GAClC,IAAMtW,EAAQsW,EAAOtW,MACfwW,EAASF,EAAOE,OAChB8O,EAAiB,EAAK6B,4BAC1B3Q,EACAF,EAAOI,OACP1W,GAEIulB,EAAmB,CACvBC,MAAO,kBAAMF,EAAe,GAAGpL,OAAOxH,IACtCxa,OAAQ,kBAAMotB,EAAe,GAAGpL,OAAOxH,IACvC+S,UAAW,kBAAMH,EAAe,GAAGpL,OAAOxH,IAC1CuG,OAAQ,WACyB,IAA3B,EAAKgM,WAAW54B,QAClB,yDAAgBkL,EAAKmb,GAEvB4S,EAAe,GAAGpL,OAAOxH,KAGzBnb,EAAI0iB,QAAQsL,EACdA,EAAiBhuB,EAAI0iB,QAErB,yDAAgB1iB,EAAKmb,SArHb,mCA0HQ,SACpB2P,EACA54B,EACAuW,EACA0S,GAIG,IAHH+L,IAGG,yDAFHzsB,EAEG,uDAFKkW,UAAOkf,SACflzB,EACG,uDADM,EAEHye,EAAWD,EAAWvJ,cAAcxc,KAAK6Z,KAEzC8b,EAAcD,EAAO3xB,KAAI,SAAA1G,GAAC,OAC9BklB,GAAOkB,gCACL,CAAE5G,OAAQmJ,GACVpQ,GAAKuE,UAAU9c,OAIb82B,EAAc5R,GAAOqS,iBAAiBe,GACtCC,EAAiBD,EAAY5xB,KAAI,SAAA1G,GAAC,OAAIA,EAAEoa,IAAI0c,MAE5CuG,EAAoBtB,GAAcxc,OACtCvJ,EACA,CACEvW,KAAMA,EACN0J,SAAU2tB,EAAY/Z,UACtB/U,MAAO,CAACA,EAAMhI,EAAGgI,EAAM4V,EAAG5V,EAAM2P,GAChCqkB,aAAczD,EAAe7xB,KAAI,SAAA2Q,GAAC,OAAIA,EAAE0F,aACxC7S,OAAQA,GAEVwe,GAGF2U,EAAkB7gB,KAAKgD,OAASmJ,EAEhCD,EAAWjJ,iBACT4d,EACA1U,EAASlpB,KACTg1B,MA7JF,EAAKh0B,IAAM,oBACX,EAAKhB,KAAO,0BACZ,EAAKw7B,WAAa,GAClB,EAAKhI,KAAO,SAAAprB,GAAK,OAAI,2BAAGC,UAAU,uBAA0BD,KAC5D0S,GAAW,QAPC,G,wDAWZ,OAAO,IAAIyiB,M,GAZmBjO,I,gbCR5BuO,G,kCACJ,aAAc,QACZ,OADY,aACR/iB,GAAiB,OAAAA,KACrB,eAFY,sBAcL,SAAAmO,GACP,sDAAaA,GACbA,EAAWyH,kBAAX,YAhBY,6BAmBE,SAAC5iB,EAAKmb,OAnBR,6BAqBE,SAACnb,EAAKmb,OArBR,2BAuBA,SAAAA,OApBZ,EAAKjoB,IAAM,QACX,EAAKhB,KAAO,cACZ,EAAK6wB,kBAAoBrT,SAAM6N,OAC/B,EAAKmI,KAAO,SAAAprB,GAAK,OAAI,2BAAGC,UAAU,gBAAmBD,KACrD0S,GAAW,QAPC,G,wDAWZ,OAAO,IAAI+iB,M,GAZWvO,IA2BtBxU,GAAW,KAEA+iB,M,8FC5BTC,G,oEACM,K,+BACE,K,+BACH,K,+CAQCr+B,GACFA,KAAK,KAAAuH,KAAJ,MACL,KAAAA,KAAA,IAAevH,GAAK,GACpB,KAAAuH,KAAA,IAAavH,GAAK,M,gCAIZA,GAAG,WACPA,KAAK,KAAAuH,KAAJ,aACI,KAAAA,KAAA,IAAevH,GAEtBU,OAAOkE,KAAK,KAAA2C,KAAA,IAAavH,IAAI6E,SAAQ,SAAA6zB,UAC5B,OAAI,IAAQ2F,EAAMC,QAAQt+B,EAAG04B,WAC7B,OAAI,IAAQ2F,EAAMC,QAAQ5F,EAAG14B,cAE/B,KAAAuH,KAAA,IAAavH,GACpBU,OAAOkE,KAAP,KAAY2C,KAAZ,KAA0B1C,SAAQ,SAAA6zB,GAC5B14B,KAAK,OAAI,IAAS04B,WACb,OAAI,IAASA,GAAG14B,S,8BAavBA,EAAG04B,GAOT,OANAnxB,KAAKg3B,UAAUv+B,GACfuH,KAAKg3B,UAAU7F,GACf,KAAAnxB,KAAA,IAAY82B,EAAMC,QAAQt+B,EAAG04B,IAAM,GACnC,KAAAnxB,KAAA,IAAY82B,EAAMC,QAAQ5F,EAAG14B,IAAM,GACnC,KAAAuH,KAAA,IAAavH,GAAG04B,IAAK,EACrB,KAAAnxB,KAAA,IAAamxB,GAAG14B,IAAK,EACduH,O,8BAGDvH,EAAG04B,GACT,IAAM8F,EAAQH,EAAMC,QAAQt+B,EAAG04B,GACzB+F,EAAQJ,EAAMC,QAAQ5F,EAAG14B,IAC3Bw+B,KAAS,KAAAj3B,KAAJ,KAAmBk3B,KAAS,KAAAl3B,KAAJ,cACxB,KAAAA,KAAA,IAAYi3B,UACZ,KAAAj3B,KAAA,IAAYk3B,UACZ,KAAAl3B,KAAA,IAAavH,GAAG04B,UAChB,KAAAnxB,KAAA,IAAamxB,GAAG14B,M,8BAInBA,EAAG04B,GACT,OAAOnxB,KAAKm3B,YAAY1+B,EAAG04B,GAAGiG,W,mCAGnB3+B,GACX,OAAIA,KAAK,KAAAuH,KAAJ,IAAyB7G,OAAOkE,KAAK,KAAA2C,KAAA,IAAavH,IAChD,K,kCAGGA,EAAG04B,GACb,IAAM4F,EAAUD,EAAMC,QAAQt+B,EAAG04B,GACjC,OAAI4F,KAAW,KAAA/2B,KAAJ,IACFwW,SAAM5D,KAAK,KAAA5S,KAAA,IAAY+2B,IAEzBvgB,SAAM6N,S,kCAGH5rB,EAAG04B,EAAG/vB,GAChB,IAAM21B,EAAUD,EAAMC,QAAQt+B,EAAG04B,GAIjC,OAHI4F,KAAW,KAAA/2B,KAAJ,MACT,KAAAA,KAAA,IAAY+2B,GAAW31B,GAElBpB,O,oCAGKvH,GACZ,OAAIA,KAAK,KAAAuH,KAAJ,IACIwW,SAAM5D,KAAK,KAAA5S,KAAA,IAAevH,IAE5B+d,SAAM6N,S,oCAGD5rB,EAAG2I,GAIf,OAHI3I,KAAK,KAAAuH,KAAJ,MACH,KAAAA,KAAA,IAAevH,GAAK2I,GAEfpB,O,iCAIP,YAAOA,KAAP,M,oCAIA,YAAOA,KAAP,M,kCAIA,YAAOA,KAAP,M,qCAGaq3B,GACb,KAAAr3B,KAAA,GAAeq3B,K,kCAGLC,GACV,KAAAt3B,KAAA,GAAiBs3B,K,+BAGVC,GACP,KAAAv3B,KAAA,GAAcu3B,O,SA3HZT,G,WA8Ha,SAACr+B,EAAG04B,GAAJ,gBAAa14B,EAAb,YAAkB04B,M,IA9H/B2F,G,YA+Hc,SAAA98B,GAAG,OAAIA,EAAIw9B,MAAM,QAGtBV,U,ygCChIMW,G,WACnB,aAAc,qDAkIK,SAAAl7B,GACjB,OAAO,EAAKm7B,MACTC,cAAcp7B,GACd0a,SAAQ,SAAA2gB,GAAU,OACjBphB,SAAMC,SAASmhB,EAAWH,EAAeI,WAAWhK,eArIxD7tB,KAAK03B,MAAQ,IAAIZ,GACjB92B,KAAK83B,cAAgB,IAAIC,GACzB/3B,KAAKg4B,WAAa,IAAIC,GACtBj4B,KAAKk4B,gBAAkB,E,wDAUvB,OAAOl4B,KAAK03B,Q,kCAIZ,OAAO13B,KAAK03B,MAAMS,c,gCASV1/B,EAAG2/B,GAAyB,WAAjBC,EAAiB,wDAC9BC,EAAet4B,KAAKu4B,UAAU9/B,GACpC6/B,EAAavY,WAAU,WACrB,IAAMyY,EAAU,IAAIC,GAClBhgC,EACA2/B,GAAkB,EAAKF,kBACvBG,GAEF,EAAKP,cAAct6B,OAAOg7B,GAC1B,EAAKd,MAAMV,UAAUwB,EAAQr8B,IAC7B,EAAKu7B,MAAMgB,cAAcF,EAAQr8B,GAAjC,OACGs7B,EAAeI,WAAWhK,OAAS2K,S,gCAShC//B,GAAG,WACXuH,KAAKu4B,UAAU9/B,GAAG6E,SAAQ,SAAAq7B,GAAW,IAC3Bx8B,EAAOw8B,EAAPx8B,GACR,EAAK27B,cAAc75B,OAAO06B,GAC1B,EAAKjB,MAAMkB,UAAUz8B,Q,8BAIjB0lB,GAAwB,WAAlBgX,EAAkB,uDAAJ,GAAI,MACfhX,EADe,GACvBppB,EADuB,KACpB04B,EADoB,WAEL0H,EAFK,GAEvBT,EAFuB,KAEfU,EAFe,KA4B9B,OAzBA94B,KAAKg3B,UAAUv+B,EAAG2/B,GAClBp4B,KAAKg3B,UAAU7F,EAAG2H,GAClB94B,KAAKu4B,UAAU9/B,GAAG6E,SAAQ,SAAAy7B,GAAQ,OAChC,EAAKR,UAAUpH,GAAG7zB,SAAQ,SAAA07B,GACxB,IAAMC,EAAS,EAAKC,eAAeH,EAAS58B,GAAI68B,EAAS78B,IAAIwa,QAC3D,kBAAM,IAAIwiB,GAAMJ,EAAUC,MAEtBI,EAAS,EAAKF,eAAeF,EAAS78B,GAAI48B,EAAS58B,IAAIwa,QAC3D,kBAAM,IAAIwiB,GAAMH,EAAUD,MAG5B,EAAKf,WAAW/5B,OAAOg7B,GAAQ,SAAChoB,EAAGC,GAAJ,OAAUD,EAAEgJ,OAAO/I,MAClD,EAAK8mB,WAAWx6B,OAAOy7B,GAEvB,EAAKvB,MAAM2B,QAAQN,EAAS58B,GAAI68B,EAAS78B,IAGzC,EAAKu7B,MAAM4B,YAAYP,EAAS58B,GAAI68B,EAAS78B,GAA7C,OACGs7B,EAAeI,WAAWhW,KAAOoX,IAEpC,EAAKvB,MAAM4B,YAAYN,EAAS78B,GAAI48B,EAAS58B,GAA7C,OACGs7B,EAAeI,WAAWhW,KAAOuX,UAIjCp5B,O,8BAQDvH,EAAG04B,GAAG,WACZnxB,KAAKu5B,QAAQ9gC,EAAG04B,GAAG7zB,SAAQ,SAAAk8B,GAAS,MAC5BC,EAAUD,EAAM3X,KAAK5hB,KAAI,SAAAmR,GAAC,OAAIA,EAAEjV,OACtC,IAAKu7B,OAAMgC,QAAX,aAAsBD,IACtB,EAAKzB,WAAW/5B,OAAOu7B,GAAO,SAACvoB,EAAGC,GAAJ,OAAUD,EAAEgJ,OAAO/I,W,8BAS7CzY,EAAG04B,GAAG,WACZ,OAAOnxB,KAAKu4B,UAAU9/B,GACnBwe,SAAQ,SAAA8hB,GAAQ,OACf,EAAKR,UAAUpH,GAAGlxB,KAAI,SAAA+4B,GAAQ,OAC5B,EAAKtB,MAAMiC,QAAQZ,EAAS58B,GAAI68B,EAAS78B,UAG5Cib,QAAO,K,gCAOF3e,GACR,IAAMmhC,EAAa55B,KAAK83B,cAAc9uB,OAAOyvB,GAAQzlB,GAAGva,GAAGohC,UAC3D,OAAID,EAAWh+B,OAAS,EACf4a,SAAM5D,KACXgnB,EAAWh+B,OAAS,EAChBoE,KAAK85B,qBAAqBF,EAAYnhC,GACtCmhC,EAAW,IAGZpjB,SAAM6N,S,mCAiBF5rB,GAAG,WACRshC,EAAY,GAQlB,OAPA/5B,KAAKu4B,UAAU9/B,GAAG6E,SAAQ,SAAAq7B,GACxB,EAAKjB,MAAMsC,aAAarB,EAAQx8B,IAAImB,SAAQ,SAAA28B,GAC1C,EAAKvC,MAAMC,cAAcsC,GAAK38B,SAAQ,SAAA48B,GACpCH,EAAUj9B,KAAKo9B,EAAMzC,EAAeI,WAAWhK,kBAI9CkM,I,mCAGII,EAAaz3B,GAAU,WAClC1C,KAAK03B,MAAMC,cAAcwC,GAAa78B,SAAQ,SAAA88B,GAC5C,IAAMzB,EAAUyB,EAAK3C,EAAeI,WAAWhK,QAC/C8K,EAAQj2B,SAAWA,EACnB,EAAKo1B,cAAc75B,OAAO06B,GAC1B,EAAKb,cAAct6B,OAAOm7B,GAC1B,EAAKjB,MAAMsC,aAAaG,GAAa78B,SAAQ,SAAA6zB,GAC3C,EAAKuG,MAAMP,YAAYgD,EAAahJ,GAAG7zB,SAAQ,SAAA+8B,GAC7C,IAAMb,EAAQa,EAAS5C,EAAeI,WAAWhW,MACjD,EAAKmW,WAAW/5B,OAAOu7B,GAAO,SAACvoB,EAAGC,GAAJ,OAAUD,EAAEgJ,OAAO/I,MAEjD,EAAK8mB,WAAWx6B,OAAOg8B,c,8BAWvB/gC,EAAG04B,GACT,IAAMmJ,EAAanJ,EAAI14B,EAAE+a,IAAI2d,GAAG3f,MAAM,IAAO/Y,EACvCmhC,EAAa55B,KAAKg4B,WAAWhvB,OAAOyvB,GAAQzlB,GAAGsnB,GAAYT,UACjE,OAAID,EAAWh+B,OAAS,EACf4a,SAAM5D,KACXgnB,EAAWh+B,OAAS,EAChBoE,KAAKu6B,mBAAmBX,EAAYU,GACpCV,EAAW,IAGZpjB,SAAM6N,S,qCAGA+T,EAAQU,GACrB,OAAO94B,KAAK03B,MACTP,YAAYiB,EAAQU,GACpB74B,KAAI,SAAAu6B,GAAQ,OAAIA,EAAS/C,EAAeI,WAAWhW,W,yCAQrC4Y,EAAQH,GACzB,IAAII,EAAUjoB,OAAOC,UACjBioB,GAAgB,EAYpB,OAXAF,EAAOn9B,SAAQ,SAACk8B,EAAO/gC,GACrB,IAAMopB,EAAO2X,EAAM3X,KAAK5hB,KAAI,SAAAmR,GAAC,OAAIA,EAAE1O,YAAUzC,IAAI6R,GAAKuE,WAChD9a,EAAIsmB,EAAK,GAAGlO,IAAIkO,EAAK,IACrBjR,EAAIkB,GAAKuE,UAAUikB,GAAY3mB,IAAIkO,EAAK,IACxCtQ,EAAMhW,EAAEgW,IAAIX,GAAKrV,EAAEgW,IAAIhW,GACvBq/B,EAAOhqB,EAAE+C,IAAIpY,EAAEiW,MAAMD,IAAM3V,SAC7B8+B,EAAUE,IACZF,EAAUE,EACVD,EAAeliC,MAGZgiC,EAAOE,K,2CAGKE,EAAWP,GAC9B,IAAII,EAAUjoB,OAAOC,UACjBioB,GAAgB,EAUpB,OATAE,EAAUv9B,SAAQ,SAACq7B,EAASlgC,GAC1B,IAAMqiC,EAAKhpB,GAAKuE,UAAUsiB,EAAQj2B,UAC5BkO,EAAIkB,GAAKuE,UAAUikB,GACnBM,EAAOE,EAAGnnB,IAAI/C,GAAGhV,SACnB8+B,EAAUE,IACZF,EAAUE,EACVD,EAAeliC,MAGZoiC,EAAUF,K,oCAIjB,OAAO36B,KAAK03B,MAAMqD,gB,iCAIlB,OAAO/6B,KAAK03B,MAAMsD,a,iCAOT16B,GAAM,WACP+2B,EAAW/2B,EAAX+2B,OAGFC,EAAW,MAAKh3B,EAAKg3B,UACrBC,EAAQ,MAAKj3B,EAAKi3B,OACxBp+B,OAAOkE,KAAKg6B,GAAQ/5B,SAAQ,SAAA7E,GAC1BU,OAAOkE,KAAKg6B,EAAO5+B,IAAI6E,SAAQ,SAAA6zB,GAC7B,IAAM8J,EAAc3D,EAAS7+B,GACvByiC,EAAc5D,EAASnG,GACvBgK,EAAa5D,EAAMT,GAAMC,QAAQt+B,EAAG04B,IAC1C,EAAKuG,MAAMC,cAAcl/B,GAAG6E,SAAQ,SAAA88B,GAClCA,EAAK3C,EAAeI,WAAWhK,QAAQ7X,YACrCilB,EAAYjlB,eAEhB,EAAK0hB,MAAMC,cAAcxG,GAAG7zB,SAAQ,SAAA88B,GAClCA,EAAK3C,EAAeI,WAAWhK,QAAQ7X,YACrCklB,EAAYllB,eAEhB,EAAK0hB,MAAMP,YAAY1+B,EAAG04B,GAAG7zB,SAAQ,SAAA88B,GACnC,IAAMZ,EAAQY,EAAK3C,EAAeI,WAAWhW,MAC7C2X,EAAMxjB,YAAcmlB,EAAWnlB,YAC/BwjB,EAAM4B,OAASD,EAAWC,gBAIhCp7B,KAAKk4B,gBAAkB53B,EAAK43B,oB,SAjRXT,G,aA0RC,CAClB5J,OAAQ,UACRhM,KAAM,U,IAOJ4W,G,WACJ,WAAY4C,EAAgBC,EAAUjD,GAA2B,IAAlBriB,EAAkB,uDAAJ,GAAI,aAC/DhW,KAAK0C,SAAW24B,EAChBr7B,KAAK7D,GAAKm/B,EACVt7B,KAAKgW,YAAcA,EACnBhW,KAAKq4B,QAAUA,E,8CAGR,IACC31B,EAAa1C,KAAb0C,SACR,MAAO,CACL64B,KAAM74B,EAASkO,EAAI8d,GAAUC,OAAS,EACtC6M,KAAM94B,EAASmO,EAAI6d,GAAUC,OAAS,EACtC8M,KAAM/4B,EAASkO,EAAI8d,GAAUC,OAAS,EACtC+M,KAAMh5B,EAASmO,EAAI6d,GAAUC,OAAS,M,0BAIhCjsB,GACR,OAAO,IAAI+1B,EAAQ/1B,O,KAIjBq1B,G,uIACGY,GACL,OAAOA,EAAQkB,W,kCAGL5oB,EAAGC,GACb,OAAOD,EAAEvO,SAASkO,EAAIM,EAAExO,SAASkO,I,kCAEvBK,EAAGC,GACb,OAAOD,EAAEvO,SAASmO,EAAIK,EAAExO,SAASmO,M,GATT8qB,MAatBxC,G,WACJ,WAAYJ,EAAUC,GAA4B,IAAlBhjB,EAAkB,uDAAJ,GAAI,aAChDhW,KAAK6hB,KAAO,CAACkX,EAAUC,GACvBh5B,KAAKgW,YAAcA,EACnBhW,KAAKo7B,OAAS,E,4CAGTlqB,GACL,KAAMA,aAAaioB,GAAQ,OAAO,EAClC,IAAMyC,EAAW1qB,EAAE2Q,KAAK5hB,KAAI,SAAAmR,GAAC,OAAIA,EAAEjV,MACnC,OAAO6D,KAAK6hB,KACT5hB,KAAI,SAAAmR,GAAC,OAAIA,EAAEjV,MACX8D,KAAI,SAAA9D,GAAE,OAAIy/B,EAAS7mB,SAAS5Y,MAC5B0/B,OAAM,SAAAjrB,GAAC,OAAIA,O,+BAGP,IACCiR,EAAS7hB,KAAT6hB,KACR,MAAO,CACL0Z,KAAM1Z,EAAK3a,QACT,SAAC3L,EAAG6V,GAAJ,OAAUC,KAAKsB,IAAIpX,EAAG6V,EAAE1O,SAASkO,EAAI8d,GAAUC,OAAS,KACxDlc,OAAOC,WAET8oB,KAAM3Z,EAAK3a,QACT,SAAC3L,EAAG6V,GAAJ,OAAUC,KAAKsB,IAAIpX,EAAG6V,EAAE1O,SAASmO,EAAI6d,GAAUC,OAAS,KACxDlc,OAAOC,WAET+oB,KAAM5Z,EAAK3a,QACT,SAAC3L,EAAG6V,GAAJ,OAAUC,KAAKmB,IAAIjX,EAAG6V,EAAE1O,SAASkO,EAAI8d,GAAUC,OAAS,KACxDlc,OAAOqpB,WAETJ,KAAM7Z,EAAK3a,QACT,SAAC3L,EAAG6V,GAAJ,OAAUC,KAAKmB,IAAIjX,EAAG6V,EAAE1O,SAASmO,EAAI6d,GAAUC,OAAS,KACxDlc,OAAOqpB,e,0BAKHC,EAAYC,GACpB,OAAO,IAAI7C,EAAMV,GAAQzlB,GAAG+oB,GAAatD,GAAQzlB,GAAGgpB,Q,KAIlD/D,G,uIACGuB,GACL,OAAOA,EAAMK,W,kCAGH5oB,EAAGC,GAGb,OAFaD,EAAE4oB,SAAS0B,KACXrqB,EAAE2oB,SAAS0B,O,kCAIdtqB,EAAGC,GAGb,OAFaD,EAAE4oB,SAAS2B,KACXtqB,EAAE2oB,SAAS2B,S,GAbHG,M,ygCCzWnBM,G,kCACJ,WAAY1sB,EAAO6I,GAAmD,MAAzCpf,EAAyC,uDAAlCijC,EAAUnd,KAAM9I,EAAkB,uDAAJ,GAAI,aACpE,IAAMkmB,EAAU3sB,EAAMwY,cAEtB,GACEmU,KAAWC,KACVA,GAAmBD,GAASnmB,KAAKqmB,aAElC,cAAOD,GAAmBD,IAG5B,IAAMG,EAAmBC,GAAoB/sB,EAAOvW,GAVgB,OAWpEqjC,EAAiB/6B,QAAU,kBACxB,EAAKi7B,gBAAkB,EAAKC,wBAE/B,cAAMH,EAAkBrmB,GAd4C,uBA0B5D,kBAAMimB,EAAUhmB,QA1B4C,gCAoWnD,SAAA0iB,GAAW,IACpBN,EAAYM,EAAZN,QACFoE,EAAaR,EAAUS,cAC3B,EAAKntB,MACLopB,EAAQj2B,SACR21B,EAAU5gB,UAAOklB,OAASllB,UAAO6K,OACjC+V,EAAW,EAAI3J,GAAUC,OAAU,EAAID,GAAUC,QAEnD8N,EAAW1jB,OAAS,EAAKhD,KACzB0mB,EAAWnB,SAAW3C,EAAQx8B,GAC9B,EAAKygC,uBAAuBH,GAC5B,EAAKI,iBAAiBJ,GACtB,EAAKK,eAAenE,EAAQx8B,IAAMsgC,KAhXkC,4BA2XvD,kBAAM,YAA2C,IAAxCxP,EAAwC,EAAxCA,iBAAkBH,EAAsB,EAAtBA,gBAClCpqB,EAAWuqB,EAAiBvqB,SAC5BvG,EAAK8wB,EAAiBqO,SAC5B,EAAKyB,qBAAqB5gC,EAAIuG,EAAUoqB,GACxC,EAAKkQ,sBAAsB,CAAC7gC,GAAK2wB,GAC7BA,IACF,EAAKyP,gBAAkB,EAAKU,gBAAgBhQ,GAC5C,EAAK7U,SAASsS,cAAc,EAAK4E,eAlYiC,0BA+rBzD,kBAAM,YAAyD,IAAtDrC,EAAsD,EAAtDA,iBAAkBH,EAAoC,EAApCA,gBAAiBC,EAAmB,EAAnBA,aAC/C8L,EAAgB5L,EAAhB4L,YAEFqE,EAAUrE,EACb54B,KAAI,SAAAxH,GAAC,OAAI,EAAKqkC,eAAerkC,GAAGiK,YAChCzC,IAAI6R,GAAKuE,WAENjF,EAAIU,GAAKuE,UAAU0W,GACzBmQ,EAAQ5/B,SAAQ,SAAC6/B,EAAW1kC,GAAZ,OACd,EAAKskC,qBACHlE,EAAYpgC,GACZ0kC,EAAU3pB,IAAIpC,GAAGgI,YACjB0T,EACA+L,MAGJ,EAAKmE,sBAAsBnE,EAAa/L,GACpCA,IACF,EAAKyP,gBAAkB,EAAKa,cAAcnQ,GAC1C,EAAK7U,SAASsS,cAAc,EAAK4E,eAltBiC,8BA0tBrD,SAAA+N,GAAQ,OAAI,WAC3B,IAAM30B,EAAU,GAEhBA,EAAQ5L,KAAK,CACX0vB,KAAM,SAAAprB,GAAK,OAAI,2BAAGC,UAAU,gBAAmBD,KAC/CqoB,OAAQ,WACN,EAAKrR,SAASklB,iBAAiBC,KAAK,EAAKC,kBAAkBH,KAE7DrkC,KAAM,sBAER,EAAKof,SAASic,kBAAkB3rB,OArtBhCyzB,GAAmBD,GAAnB,QAGA,EAAKxE,MAAQ,IAAID,GACjB,EAAKloB,MAAQA,EACb,EAAK6I,SAAWA,EAChB,EAAKqlB,aAAe,GACpB,EAAKX,eAAiB,GACtB,EAAKP,gBAAkB,EAAKC,uBAvBwC,E,8CA4B7D,WACDtjB,EAAO,iDACPme,EAASr3B,KAAK03B,MAAMS,YACpBb,EAAW,MAAKt3B,KAAK03B,MAAMqD,eAC3BxD,EAAQ,MAAKv3B,KAAK03B,MAAMsD,YAmC9B,OAjCA7hC,OAAOkE,KAAKi6B,GAAUh6B,SAAQ,SAAA4zB,GAC5B,EAAKwG,MACFgG,iBAAiBxM,GACjB5zB,SAAQ,YAAmC,IAAhCoF,EAAgC,EAAhCA,SAAUvG,EAAsB,EAAtBA,GAAI6Z,EAAkB,EAAlBA,YACxBshB,EAASpG,GAAK,CACZxuB,SAAUoP,GAAKuE,UAAU3T,GAAU4T,UACnCna,GAAIA,EACJ6Z,YAAaA,SAKrB7c,OAAOkE,KAAKk6B,GAAOj6B,SAAQ,SAAA4zB,GAAK,MACxByM,EAAM7G,GAAM8G,SAAS1M,IAC3B,IAAKwG,OACFwB,eADH,aACqByE,IAClBrgC,SAAQ,YAAmC,IAAhCukB,EAAgC,EAAhCA,KAAM7L,EAA0B,EAA1BA,YAAaolB,EAAa,EAAbA,OAC7B7D,EAAMrG,GAAK,CACTyM,IAAKA,EACLrd,UAAWuB,EAAK5hB,KAAI,gBAAGyC,EAAH,EAAGA,SAAH,OAClBoP,GAAKuE,UAAU3T,GAAU4T,aAE3BN,YAAaA,EACbolB,OAAQA,EACR/C,QAASxW,EAAK5hB,KAAI,SAAAmR,GAAC,OAAIA,EAAEinB,kBAKjCnf,EAAI,OAAame,EACjBne,EAAI,SAAeoe,EACnBpe,EAAI,MAAYqe,EAChBre,EAAI,gBAAsBlZ,KAAK03B,MAAMQ,gBAC9Bhf,I,+BAIP,IAAMjB,EAAO,iDAUb,cATOA,EAAKN,WAAWC,WAAWlV,gBAC3BuV,EAAKN,WAAWC,WAAWrB,kBAC3B0B,EAAKN,WAAWC,WAAWrW,aAC3B0W,EAAKH,SAASpV,gBACduV,EAAKH,SAASvB,kBACd0B,EAAKH,SAASvW,aACd0W,EAAK3X,KAAKoC,gBACVuV,EAAK3X,KAAKiW,kBACV0B,EAAK3X,KAAKiB,MACVvB,KAAKu8B,gBAAgBjN,OAAOrX,K,6BAG9BA,GACLjY,KAAKhH,KAAOif,EAAKjf,KACjBgH,KAAK+V,KAAK/c,KAAOif,EAAKjf,KACtBgH,KAAKu8B,gBAAgBsB,OAAO5lB,K,6CAGP,WACrB,MAAO,CACLqX,OAAQ,SAAArX,GAAI,OAAIA,GAChB4lB,OAAQ,SAAA5lB,GAAI,OAAK,EAAKjC,YAAL,MAAwBiC,EAAKpE,iB,sCAIlC4oB,GAAY,WAC1B,MAAO,CACLnN,OAAQ,SAAArX,GAAI,OACV,EAAKyf,MACFa,UAAUkE,EAAW/5B,UACrBzC,KAAI,SAAA04B,GAiCH,OAhCA1gB,EAAKN,WAAWC,WAAhB,eAA+C,CAC7CzC,KAAM,SACNpR,MAAO,mBAAF,OAAqB40B,EAAQx8B,IAClCyb,WAAY,CACVhH,EAAG,CACDuE,KAAM,SACNpR,MAAO,KAET8M,EAAG,CACDsE,KAAM,SACNpR,MAAO,KAETgN,EAAG,CACDoE,KAAM,SACNpR,MAAO,OAKbkU,EAAKH,SAAL,eAAkC,CAChC,YAAa,YAGfG,EAAK3X,KAAL,eAA8B,CAC5BsQ,EAAG6rB,EAAW/5B,SAASkO,EACvBC,EAAG4rB,EAAW/5B,SAASmO,EACvBE,EAAG0rB,EAAW/5B,SAASqO,GAEzB+E,GAASkC,oBAAoBC,EAAM0gB,EAAQ3iB,aAC3CiC,EAAKN,WAAWC,WAAhB,YAEE7T,MAFF,6BAEgC40B,EAAQx8B,IACjC8b,KAERb,OAAOa,IACZ4lB,OAAQ,SAAA5lB,GACN,IAAIvV,EAAWo7B,KAAK7lB,EAAM,iBAAkBwkB,EAAW/5B,UACvDA,EAAW,CAACA,EAASkO,EAAGlO,EAASmO,EAAGnO,EAASqO,GAAG9Q,IAAIwS,OAAOkd,YAC3D,EAAK+H,MACFa,UAAUkE,EAAW/5B,UACrBpF,SACC,SAAAq7B,GAAO,OACJA,EAAQ3iB,YAAR,MAA2B8nB,KAAK7lB,EAAM,cAAe,QAE5D,EAAK8kB,qBACHN,EAAWnB,SACXjpB,WAAQoO,UAAU/d,IAClB,O,oCAMM26B,GAAU,WACtB,MAAO,CACL/N,OAAQ,SAAArX,GACN,IAAM8lB,EAAgBV,EAASxE,YAC5B54B,KAAI,SAAA1D,GAAK,OACRia,SAAMC,SAAS,EAAKqmB,eAAevgC,IAAQ0D,KACzC,SAAA8V,GAAI,OAAIA,EAAKrT,eAGhB5E,QAAO,SAAAkgC,GAAK,OAAIA,EAAM5G,YACtBn3B,KAAI,SAAA+9B,GAAK,OAAIA,EAAMprB,UAEtB,OADAtQ,QAAQC,IAAI,YAAaw7B,GACI,IAAzBA,EAAcniC,OAAqBqc,EAChC,EAAKyf,MACT6B,QAAQwE,EAAc,GAAIA,EAAc,IACxC99B,KAAI,SAAAu5B,GACHvhB,EAAKN,WAAWC,WAAhB,aAA6C,CAC3CzC,KAAM,SACNpR,MAAO,iBAAF,OAAmBs5B,EAASxE,aACjCjhB,WAAY,CACVhH,EAAG,CACDuE,KAAM,SACNpR,MAAO,KAET8M,EAAG,CACDsE,KAAM,SACNpR,MAAO,KAETgN,EAAG,CACDoE,KAAM,SACNpR,MAAO,OAIbkU,EAAKN,WAAWC,WAAhB,OAAuC,CACrCzC,KAAM,SACNpR,MAAO,UAGTkU,EAAKH,SAAL,aAAgC,CAC9B,YAAa,YAGf,IAAMmmB,EAAYxf,GAAO+U,aAAauK,GAWtC,OAVA9lB,EAAK3X,KAAL,aAA4B,CAC1BsQ,EAAGqtB,EAAUrtB,EACbC,EAAGotB,EAAUptB,EACbE,EAAGktB,EAAUltB,GAEfkH,EAAK3X,KAAL,OAAsBk5B,EAAM4B,OAC5BtlB,GAASkC,oBAAoBC,EAAMuhB,EAAMxjB,aACzCiC,EAAKN,WAAWC,WAAhB,YAEE7T,MAFF,2BAE8Bs5B,EAASxE,aAChC5gB,KAERb,OAAOa,IAEZ4lB,OAAQ,SAAA5lB,GAAQ,IACN4gB,EAAgBwE,EAAhBxE,YAGFkF,EAAgBlF,EAAY54B,KAChC,SAAA1D,GAAK,OAAI,EAAKugC,eAAevgC,GAAOmG,YAEhCw7B,EAAezf,GAAO+U,aAAauK,GACrCI,EAAkBL,KAAK7lB,EAAM,eAAgBimB,GACjDC,EAAkB,CAChBA,EAAgBvtB,EAChButB,EAAgBttB,EAChBstB,EAAgBptB,GAChB9Q,IAAIwS,OAAOkd,YACbwO,EAAkB9rB,WAAQoO,UAAU0d,GACpCJ,EAAczgC,SAAQ,SAAC6/B,EAAW1kC,GAAZ,OACpB,EAAKskC,qBACHlE,EAAYpgC,GACZ0kC,EAAU3pB,IAAI2qB,EAAgBrd,SAASod,KACvC,MAIJ,IAAME,EAAqB,SAAA5E,GACzBA,EAAMxjB,YAAN,MAAyB8nB,KAAK7lB,EAAM,cAAe,KACnDuhB,EAAM4B,OAAS3oB,OAAOkd,WAAW1X,EAAKmjB,SAExC,EAAK1D,MACFwB,eAAeL,EAAY,GAAIA,EAAY,IAC3Cv7B,QAAQ8gC,GACX,EAAK1G,MACFwB,eAAeL,EAAY,GAAIA,EAAY,IAC3Cv7B,QAAQ8gC,O,8BAWTvc,GAAsD,IAAhDgX,EAAgD,uDAAlC,GAAIwF,EAA8B,uDAAhB,EAAC,GAAO,GAAQ,MAC7Cxc,EAD6C,GACrDppB,EADqD,KAClD04B,EADkD,WAEnC0H,EAFmC,GAErDT,EAFqD,KAE7CU,EAF6C,WAG/BuF,EAH+B,GAGrDC,EAHqD,KAG3CC,EAH2C,KAI5D,IAAIv+B,KAAK25B,QAAQlhC,EAAG04B,GAIpB,OAHAnxB,KAAKw+B,YAAY/lC,EAAG2/B,EAAQkG,GAC5Bt+B,KAAKw+B,YAAYrN,EAAG2H,EAAQyF,GAC5Bv+B,KAAKy+B,UAAUhmC,EAAG04B,GACXnxB,O,mCAGI6hB,GAEX,IADA,IAAM4B,EAASwY,EAAUyC,mBAAmB7c,EAAM,KACzCppB,EAAI,EAAGA,EAAIgrB,EAAO7nB,OAAS,EAAGnD,IAAK,CAC1C,IAAMkmC,EAAc,CAAClb,EAAOhrB,GAAIgrB,EAAOhrB,EAAI,IAC3CuH,KAAKq5B,QAAQsF,EAAa,GAAI,CAAO,IAANlmC,EAASA,IAAMgrB,EAAO7nB,OAAS,IAEhE,OAAOoE,O,8BAGDvH,EAAG04B,GAAG,WAEZnxB,KAAK03B,MAAM6B,QAAQ9gC,EAAG04B,GAAG7zB,SAAQ,YAAc,MAAXukB,EAAW,EAAXA,KAC5B8b,EAAM9b,EAAK5hB,KAAI,SAAAmR,GAAC,OAAIA,EAAEjV,MACtB86B,EAAQH,GAAMC,QAAQ4G,EAAI,GAAIA,EAAI,IAClCzG,EAAQJ,GAAMC,QAAQ4G,EAAI,GAAIA,EAAI,IACxCnnB,SAAMC,SAAS,EAAKgnB,aAAaxG,IAAQ35B,SAAQ,SAAAyY,GAAI,OAAIA,EAAK5F,oBACvD,EAAKstB,aAAaxG,UAClB,EAAKwG,aAAavG,IACzB,IAAKQ,OAAMgC,QAAX,aAAsB7X,EAAK5hB,KAAI,SAAA1E,GAAC,OAAIA,EAAEmH,cAGtC,IAAMk8B,EAAgB,EAAKlH,MAAMmH,mBACjChd,EAAKvkB,SAAQ,YAAsB,IAAnBnB,EAAmB,EAAnBA,GAAIuG,EAAe,EAAfA,SAEO,IADPk8B,EAAc5E,aAAa79B,GAC/BP,QACZ,EAAKg9B,UAAUl2B,W,mCAMVmf,GAEX,IADA,IAAM4B,EAASwY,EAAUyC,mBAAmB7c,EAAM,KACzCqP,EAAI,EAAGA,EAAIzN,EAAO7nB,OAAS,EAAGs1B,IAAK,OAC3B,CAACzN,EAAOyN,GAAIzN,EAAOyN,EAAI,IAA/Bz4B,EADmC,KAChC04B,EADgC,KAE1CnxB,KAAK05B,QAAQjhC,EAAG04B,GAElB,OAAOnxB,O,8BAQDvH,EAAG04B,GACT,OAAOnxB,KAAK03B,MAAMiC,QAAQlhC,EAAG04B,K,kCAenBtD,EAAQsM,GAA8B,IAAjB9B,EAAiB,wDAC5Cr4B,KAAK8+B,0BAA0BjR,IACjC7tB,KAAK++B,2BAA2BlR,GAElC7tB,KAAKg/B,kBAAkBnR,EAAQsM,EAAa9B,K,wCAG5BxK,EAAQsM,GAA8B,WAAjB9B,EAAiB,wDAChD4G,EAAcj/B,KAAK03B,MAAMa,UAAU1K,GACzCoR,EAAY3hC,SAAQ,SAAAq7B,GAAW,IACrBN,EAAgBM,EAAhBN,QAASl8B,EAAOw8B,EAAPx8B,GACbk8B,IACa,EAAKX,MAAMmH,mBAAmB7E,aAAa79B,GAAIP,QAChD,IACZ+8B,EAAQN,SAAU,EAClB,EAAKyE,eAAenE,EAAQx8B,IAAIgU,UAChC,EAAK+uB,iBAAiBvG,QAI5BsG,EAAYlf,WAAU,WAEpB,EAAK2X,MAAMV,UAAUnJ,EAAQsM,EAAa9B,GAC1C,EAAKX,MAAMa,UAAU1K,GAAQvwB,QAAQ,EAAK4hC,uB,6CAsBvBzC,GACrBA,EAAW1oB,UAAY,IAAIwd,cAC3BkL,EAAW1oB,UAAUP,IAAIxT,KAAKm/B,kB,4CAcVC,EAAgBtS,GAAiB,WACrD9sB,KAAKq/B,mBAAmBD,GACrBn/B,KAAI,gBAAG9D,EAAH,EAAGA,GAAIuG,EAAP,EAAOA,SAAP,MAAuB,CAC1BvG,KACAuG,SAAU,EAAK48B,SAASnjC,EAAIuG,OAE7BpF,SAAQ,gBAAGnB,EAAH,EAAGA,GAAIuG,EAAP,EAAOA,SAAP,OACP,EAAKq6B,qBAAqB5gC,EAAIuG,EAAUoqB,Q,yCAI3ByS,GACjB,IAAM5jC,EAAS,GACT6jC,EAAgB,GACtBD,EAAUjiC,SAAQ,SAAAnB,GAAE,OAAKqjC,EAAcrjC,IAAM,KAM7C,IALA,IAAMyiC,EAAgB5+B,KAAK03B,MAAMmH,mBAC3BY,EAAcF,EACjBt/B,KAAI,SAAA9D,GAAE,OAAIyiC,EAAc5E,aAAa79B,MACrC8a,SAAQ,SAAA/c,GAAC,OAAIA,KACb4D,QAAO,SAAA3B,GAAE,QAAMA,KAAMqjC,MACjBC,EAAY7jC,OAAS,GAAG,CAC7B,IAAMsX,EAAIusB,EAAYC,MACtBF,EAActsB,IAAK,EACnBlT,KAAK03B,MAAMgG,iBAAiBxqB,GAAG5V,SAAQ,SAAAq7B,GAAW,IACxCN,EAAgBM,EAAhBN,QAASl8B,EAAOw8B,EAAPx8B,GACbk8B,IACF18B,EAAOmB,KAAK67B,GACZ8G,EAAY3iC,KAAZ,MAAA2iC,EAAW,KACNb,EAAc5E,aAAa79B,GAAI2B,QAAO,SAAAqzB,GAAC,QAAMA,KAAKqO,YAK7D,OAAO7jC,I,+BAGAQ,EAAIuG,GACX,IAEMq3B,EADgB/5B,KAAK03B,MAAMmH,mBAE9B7E,aAAa79B,GACb8D,IAAID,KAAK03B,MAAMgG,kBACf5/B,QAAO,SAAAjF,GAAC,OAAIA,EAAEu+B,YACdn3B,KAAI,SAAApH,GAAC,OAAIA,EAAE+Z,UACX3S,KAAI,SAAAmR,GAAC,OAAIA,EAAE1O,YACRkO,EAAIlO,EACJi9B,EAAK/uB,EACRY,MAAMuoB,EAAUn+B,QAChBklB,SAASiZ,EAAU7yB,QAAO,SAAC3L,EAAG6V,GAAJ,OAAU7V,EAAEiY,IAAIpC,KAAIiB,WAAQsK,SACzD,OAAO/L,EAAE4C,IAAImsB,EAAGnuB,OAZL,O,uCAeIirB,GAAY,WAC3BA,EAAWn7B,QAAU,WACnB,IAAMoH,EAAU,GAChBA,EAAQ5L,KAAK,CACX0vB,KAAM,SAAAprB,GAAK,OAAI,2BAAGC,UAAU,gBAAmBD,KAC/CqoB,OAAQ,WACN,EAAKrR,SACFklB,iBACAC,KAAK,EAAKqC,oBAAoBnD,KAEnCzjC,KAAM,sBAER,EAAKof,SAASic,kBAAkB3rB,M,0CAIhB+zB,GAAY,WACxBliC,EAAIkiC,EAAW/5B,SACfvG,EAAKsgC,EAAWnB,SAChB3C,EAAU34B,KAAK03B,MAAMgG,iBAAiBvhC,GAAIyW,OAC1CylB,EAAUM,EAAQN,QAClBwH,EAAQ7/B,KAAK03B,MAAMsC,aAAarB,EAAQj2B,UACxCo9B,EAAcD,EAAM/hC,QAAO,SAAA8S,GAAC,OAAKA,EAAEynB,WAEnC0H,EADaF,EAAM/hC,QAAO,SAAA8S,GAAC,OAAIA,EAAEynB,WACRp4B,KAAI,SAAAmR,GAAC,OAClC,EAAKsmB,MAAMsI,wBAAwB5uB,EAAE1O,aAEvC,OAAO+pB,eAAYS,gBAChBC,UAAS,WACHkL,GACHyH,EAAYxiC,SAAQ,SAAA8T,GAClB,EAAKsoB,QAAQn/B,EAAG6W,EAAE1O,aAEtBq9B,EAAYziC,SAAQ,SAAAsmB,GAClB,IAAK,IAAInrB,EAAI,EAAGA,EAAImrB,EAAKhoB,OAAS,EAAGnD,IACnC,EAAKihC,QAAQ9V,EAAKnrB,GAAGiK,SAAUkhB,EAAKnrB,EAAI,GAAGiK,aAG/C,EAAK0V,SAASgO,mBACd,EAAKhO,SAASqT,mBAAmB,EAAKzyB,SAEvCq0B,YAAW,WACLgL,GACHyH,EAAYxiC,SAAQ,SAAA8T,GAClB,EAAKioB,QAAQ,CAAC9+B,EAAG6W,EAAE1O,UAAW,CAACvG,EAAIiV,EAAEjV,QAEzC4jC,EAAYziC,SAAQ,SAAAsmB,GAClB,IAAK,IAAInrB,EAAI,EAAGA,EAAImrB,EAAKhoB,OAAS,EAAGnD,IAAK,CACxC,IAAMopB,EAAO,CAAC+B,EAAKnrB,GAAImrB,EAAKnrB,EAAI,IAC1BogC,EAAchX,EAAK5hB,KAAI,qBAAG9D,MAC1B+gC,EAAUrb,EAAK5hB,KAAI,qBAAGyC,YACtBu9B,EAAcpe,EAAK5hB,KAAI,qBAAGo4B,WAChC,EAAKgB,QAAQ6D,EAASrE,EAAaoH,OAGvC,EAAK7nB,SAASqT,mBAAmB,EAAKzyB,SAEvCwsB,U,yCAGc8V,GAAU,WACrB4E,EAASlgC,KAAKq/B,mBAAmB,CAAC/D,IAAWr7B,KACjD,gBAAG9D,EAAH,EAAGA,GAAH,OAAY,EAAK2gC,eAAe3gC,MAElC6D,KAAKoY,SAAS+nB,uBAAuBD,K,gCAG7BznC,GAAG,WACXuH,KAAK03B,MAAMa,UAAU9/B,GAAG6E,SAAQ,YAAY,IAATnB,EAAS,EAATA,GAC3B49B,EAAY,EAAKrC,MAAMsC,aAAavhC,GAC1CshC,EAAUz8B,SAAQ,gBAAGoF,EAAH,EAAGA,SAAH,OAAkB,EAAKg3B,QAAQjhC,EAAGiK,MACpD8T,SAAMC,SAAS,EAAKqmB,eAAe3gC,IAAKmB,SAAQ,SAAAyY,GAAI,OAAIA,EAAK5F,oBACtD,EAAK2sB,eAAe3gC,GAC3B,EAAKu7B,MAAMkB,UAAUngC,GAErBshC,EACGj8B,QAAO,qBAAGu6B,WACV/6B,SAAQ,gBAAGoF,EAAH,EAAGA,SAAH,OAAkB,EAAKk2B,UAAUl2B,W,2CAY9CvG,EACAikC,GAGA,WAFAtT,IAEA,yDADAuT,EACA,uDADc,GAEdrgC,KAAK88B,eAAe3gC,GAAIuG,SAAW09B,EACnCpgC,KAAK03B,MAAM4I,aAAankC,EAAIikC,GAC5BpgC,KAAK03B,MAAMsC,aAAaoG,GAAa9iC,SAAQ,SAAAq7B,GAC3C,IAAMlgC,EAAI0D,EACJg1B,EAAIwH,EAAQx8B,GACb,EAAKokC,aAAa9nC,EAAG04B,EAAGkP,KAC3B,EAAK5C,aAAa3G,GAAMC,QAAQt+B,EAAG04B,IAAIhhB,UACvC,EAAKunB,MAAMwB,eAAezgC,EAAG04B,GAAG7zB,SAAQ,SAAAk8B,GACtC,EAAKiF,UAAU2B,EAAazH,EAAQj2B,cAGpCoqB,GAAiB,EAAK1U,SAASqT,mBAAmB,EAAKzyB,W,mCAIlDo/B,EAAQU,EAAQD,GAC3B,OACEA,EAAYj9B,OAAS,GACrBi9B,EAAY9jB,SAASqjB,IACrBS,EAAY9jB,SAAS+jB,K,gDAQCjL,GAAuC,WAA/BnK,EAA+B,uDAAtBgL,GAAUC,OAAS,EAK5D,OAAO3uB,KAAK03B,MACTa,UAAU1K,GACV2S,MACC,kBACE,EAAK9I,MAAM6B,QAAQ1L,GAAQ5tB,KAAI,SAAAu5B,GAC7B,IAAM3X,EAAO2X,EAAM3X,KAAK5hB,KAAI,SAAAmR,GAAC,OAAIA,EAAE1O,YAAUzC,IAAI6R,GAAKuE,WAChD9a,EAAIsmB,EAAK,GAAGlO,IAAIkO,EAAK,IACrBjR,EAAIkB,GAAKuE,UAAUwX,GAAQla,IAAIkO,EAAK,IACpCtQ,EAAMhW,EAAEgW,IAAIX,GAAKrV,EAAEgW,IAAIhW,GAC7B,QAAIgW,EAAM,GAAKA,EAAM,IACRX,EAAE+C,IAAIpY,EAAEiW,MAAMD,IAAM3V,UAClB8nB,QAEnB,SAAAiV,GAAO,OAAIniB,SAAM6N,UAElBjN,QAAO,K,iDAQeyW,GAAQ,WACjC7tB,KAAK03B,MAAM6B,QAAQ1L,GAAQvwB,SAAQ,SAAAk8B,GACjC,IAAMiH,EAAWjH,EAAM3X,KACpB5hB,KAAI,qBAAGyC,YACPzC,IAAI6R,GAAKuE,WACNqqB,EAAclH,EAAM3X,KAAK5hB,KAAI,SAAAmR,GAAC,OAAIA,EAAE1O,YAGpCnH,EAAIklC,EAAS,GAAG9sB,IAAI8sB,EAAS,IAAIhtB,YACjC7C,EAAIkB,GAAKuE,UAAUwX,GAAQla,IAAI8sB,EAAS,IACxCE,EAAOplC,EAAEiW,MAAMZ,EAAEW,IAAIhW,IACrBqlC,EAAeH,EAAS,GAAGjtB,IAAImtB,GAAMvnB,YAG3C,EAAKsgB,QAAQgH,EAAY,GAAIA,EAAY,IACzC,EAAKrH,QAAQ,CAACqH,EAAY,GAAIE,IAC9B,EAAKvH,QAAQ,CAACuH,EAAcF,EAAY,KAExC,EAAKG,oBAAoBrH,EAAOkH,EAAY,GAAIE,GAChD,EAAKC,oBAAoBrH,EAAOoH,EAAcF,EAAY,IAE1D,EAAKhJ,MAAM6B,QAAQmH,EAAY,GAAIE,GAActjC,SAAQ,SAAAwjC,GACvD,EAAKpJ,MAAM6B,QAAQqH,EAAcF,EAAY,IAAIpjC,SAAQ,SAAAyjC,GACvD,EAAK3oB,SACFklB,iBACA3R,MACC,EAAKqV,kCAAkCxH,EAAOsH,EAAUC,e,wDAOlCE,EAASH,EAAUC,GAAW,WACxDG,EAAmBD,EAAQpf,KAAK5hB,KAAI,qBAAGyC,YACvCy+B,EAAeF,EAAQpf,KAAK5hB,KAAI,qBAAG9D,MACnCilC,EAAoBN,EAASjf,KAAK5hB,KAAI,qBAAGyC,YACzC2+B,EAAgBP,EAASjf,KAAK5hB,KAAI,qBAAG9D,MACrCmlC,EAAqBP,EAAUlf,KAAK5hB,KAAI,qBAAGyC,YAC3C6+B,EAAiBR,EAAUlf,KAAK5hB,KAAI,qBAAG9D,MAC7C,OAAOswB,eAAYS,gBAChBC,UAAS,WAER,EAAKuM,QAAL,QAAI,KAAYwH,IAChB,EAAK7H,QAAQ+H,EAAmBC,GAChC,EAAKhI,QAAQiI,EAAoBC,GAGjC,EAAKV,oBAAL,QAAI,CAAqBI,GAArB,YAAiCG,KACrC,EAAKP,oBAAL,QAAI,CAAqBI,GAArB,YAAiCK,QAEtCjU,YAAW,WAEV,EAAKqM,QAAL,QAAI,KAAY0H,IAChB,EAAK1H,QAAL,QAAI,KAAY4H,IAChB,EAAKjI,QAAQ6H,EAAkBC,GAG/B,EAAKN,oBAAL,QAAI,CAAqBI,GAArB,YAAiCC,QAEtC1b,U,0CASegc,EAAe/oC,EAAG04B,GAAG,WACvCnxB,KAAK03B,MAAM6B,QAAQ9gC,EAAG04B,GAAG7zB,SAAQ,YAAc,QAAXukB,KACV5hB,KAAI,qBAAG9D,MADc,WACtCslC,EADsC,KACjCC,EADiC,KAE7C,EAAKhK,MACFwB,eAAeuI,EAAKC,GACpBpkC,SAAQ,SAAAqkC,GAAS,OAAIA,EAAUC,eAAeJ,MACjD,EAAK9J,MACFwB,eAAewI,EAAKD,GACpBnkC,SAAQ,SAAAukC,GAAU,OAAIA,EAAWD,eAAeJ,W,gCAS7C/oC,EAAG04B,GAAG,WACNuG,EAAU13B,KAAV03B,MACRA,EAAM2B,QAAQ,CAAC5gC,EAAG04B,IAClBuG,EAAMa,UAAU9/B,GAAG6E,SAAQ,SAAAy7B,GAAQ,OACjCrB,EAAMa,UAAUpH,GAAG7zB,SAAQ,SAAA07B,GACzB,IAAMqE,EAAWpB,EAAU6F,YAAY,EAAKvyB,MAAO,CACjDwpB,EAASr2B,SACTs2B,EAASt2B,WAEX26B,EAAStkB,OAAS,EAAKhD,KACvB,IAAMqiB,EAASW,EAAS58B,GAClB28B,EAASE,EAAS78B,GACxBkhC,EAASxE,YAAc,CAACT,EAAQU,GAChC,EAAKiJ,qBAAqB1E,GAC1B,EAAK2E,eAAe3E,GACpB,EAAKI,aAAa3G,GAAMC,QAAQqB,EAAQU,IAAWuE,EACnD,EAAKI,aAAa3G,GAAMC,QAAQ+B,EAAQV,IAAWiF,U,2CAKpCA,GACnBA,EAAStpB,UAAY,IAAIwd,cACzB8L,EAAStpB,UAAUP,IAAIxT,KAAKiiC,gB,qCA0Bf5E,GACbA,EAAS/7B,QAAUtB,KAAKkiC,eAAe7E,K,wCAgBvBA,GAAU,WAEpB8E,EADkB9E,EAAhBxE,YAEL54B,KAAI,SAAAxH,GAAC,OAAI,EAAKi/B,MAAMgG,iBAAiBjlC,MACrCwH,KAAI,SAAAmiC,GAAM,OAAIA,EAAOxvB,UAExB,OADoBuvB,EAAWvvB,MAAK,SAAAxB,GAAC,OAAIA,EAAEinB,WAEvCr4B,KAAKqiC,oBAAoBF,GACzBniC,KAAKsiC,mBAAmBH,K,0CAGVA,GAAY,WAExBI,EAAeJ,EAAWrkC,QAAO,SAAAsT,GAAC,OAAIA,EAAEinB,WAAS,GAAG31B,SACpD8/B,EAAYxiC,KAAK03B,MAAMsI,wBAAwBuC,GACrD,OAAO9V,eAAYS,gBAChBC,UAAS,WACR,IAAK,IAAI10B,EAAI,EAAGA,EAAI+pC,EAAU5mC,OAAS,EAAGnD,IACxC,EAAKihC,QAAQ8I,EAAU/pC,GAAGiK,SAAU8/B,EAAU/pC,EAAI,GAAGiK,UAEvD,EAAK0V,SAASgO,mBACd,EAAKhO,SAASqT,mBAAmB,EAAKzyB,SAEvCq0B,YAAW,WACV,IAAK,IAAI50B,EAAI,EAAGA,EAAI+pC,EAAU5mC,OAAS,EAAGnD,IAAK,CAC7C,IAAMopB,EAAO,CAAC2gB,EAAU/pC,GAAI+pC,EAAU/pC,EAAI,IACpCogC,EAAchX,EAAK5hB,KAAI,qBAAG9D,MAC1B+gC,EAAUrb,EAAK5hB,KAAI,qBAAGyC,YACtBu9B,EAAcpe,EAAK5hB,KAAI,qBAAGo4B,WAChC,EAAKgB,QAAQ6D,EAASrE,EAAaoH,GAErC,EAAK7nB,SAASqT,mBAAmB,EAAKzyB,SAEvCwsB,U,yCAGc2c,GAAY,WACvBtJ,EAAcsJ,EAAWliC,KAAI,qBAAG9D,MAChC+gC,EAAUiF,EAAWliC,KAAI,qBAAGyC,YAC5Bu9B,EAAckC,EAAWliC,KAAI,qBAAGo4B,WACtC,OAAO5L,eAAYS,gBAChBC,UAAS,WACR,EAAKuM,QAAL,QAAI,KAAYwD,IAChB,EAAK9kB,SAASgO,mBACd,EAAKhO,SAASqT,mBAAmB,EAAKzyB,SAEvCq0B,YAAW,WACV,EAAKgM,QAAQ6D,EAASrE,EAAaoH,GACnC,EAAK7nB,SAASqT,mBAAmB,EAAKzyB,SAEvCwsB,W,8BAaSjW,GAAqC,IAA9B2J,EAA8B,uDAAvB,KAAMd,EAAiB,uDAAN,KACrCqqB,EAAY,IAAIxG,EACpB1sB,EACA6I,EACAc,EAAKlgB,KACLkgB,EAAKlD,aAECqhB,EAAkBne,EAAlBme,OAAQE,EAAUre,EAAVqe,MAahB,OAXAp+B,OAAOkE,KAAKg6B,GAAQ/5B,SAAQ,SAAA7E,GAC1BU,OAAOkE,KAAKg6B,EAAO5+B,IAAI6E,SAAQ,SAAA6zB,GAC7B,GAAI14B,EAAI04B,EAAG,CACT,IAAMtP,EAAO0V,EAAMT,GAAMC,QAAQt+B,EAAG04B,IAC9BuR,EAAQ7gB,EAAKvB,UAAUrgB,IAAI6R,GAAKkB,IAAI/S,KAAI,SAAA1F,GAAC,OAAIA,EAAE6e,eACrDqpB,EAAUpJ,QAAQqJ,EAAO,CAACjqC,EAAG04B,GAAItP,EAAKwW,gBAK5CoK,EAAU/K,MAAMiL,WAAWzpB,GACpBupB,I,8CAUPlzB,EACAwuB,GAGA,IAFAx8B,EAEA,uDAFQkW,UAAO6K,OACfoB,EACA,uDADSgL,GAAUC,OAEbxc,EAAM4rB,EAAc99B,KAAI,SAAA1F,GAAC,OAC7B0hC,EAAUS,cAAcntB,EAAOhV,EAAGgH,EAAOmiB,MAG3C,OADAvR,EAAIrV,KAAKm/B,EAAU6F,YAAYvyB,EAAOwuB,EAAex8B,EAAOmiB,IACrDvR,I,mDAIP5C,EACAwuB,GAGA,IAFAx8B,EAEA,uDAFQkW,UAAO6K,OACfoB,EACA,uDADSgL,GAAUC,OAEbxc,EAAM,GACN1Z,EAAIslC,EAAc,GAClB5M,EAAI4M,EAAc,GAIxB,OAHA5rB,EAAIrV,KAAKm/B,EAAUS,cAAcntB,EAAO9W,EAAG8I,EAAOmiB,IAClDvR,EAAIrV,KAAKm/B,EAAUS,cAAcntB,EAAO4hB,EAAG5vB,EAAOmiB,IAClDvR,EAAIrV,KAAKm/B,EAAU2G,iBAAiBrzB,EAAOwuB,EAAex8B,EAAOmiB,IAC1DvR,I,oCAIP5C,EACA8rB,GAGA,IAFA95B,EAEA,uDAFQkW,UAAO6K,OACfoB,EACA,uDADSgL,GAAUC,OAEbtL,EAAS5E,GAAO6S,aAAa/hB,EAAOhO,EAAOmiB,GAEjD,OADAL,EAAO3gB,SAAW24B,EACXhY,I,kCAIP9T,EACAsS,GAGA,IAFAtgB,EAEA,uDAFQkW,UAAO6K,OACfoB,EACA,uDADSgL,GAAUC,OAEnB,OAAOlQ,GAAOiU,qBAAqBnjB,EAAOsS,EAAMtgB,EAAOmiB,EAAS,K,uCAIhEnU,EACAsS,GAIA,IAHAtgB,EAGA,uDAHQkW,UAAO6K,OACfoB,EAEA,uDAFSgL,GAAUC,OACnBkU,EACA,uDADQ,IAER,OAAOpkB,GAAOiU,qBACZnjB,EACA0sB,EAAUyC,mBAAmB7c,EAAMghB,GACnCthC,EACAmiB,EAAS,K,yCAIa7B,GAAoB,IAAdghB,EAAc,uDAAN,IAAM,MAC1BhhB,EAD0B,GACrCppB,EADqC,KAClCy4B,EADkC,KAC/BC,EAD+B,KAEtC2R,EAAUrqC,EAAEqoB,SAASoQ,EAAE1f,MAAM,IAAIgC,IAAI2d,GACrC4R,EAAcD,EAAQlnC,SACxBk4B,EACFiP,EAAc,KAAO,EAAIA,EAAc1xB,KAAKmB,IAAI,KAAMqwB,GAGxD,OAFA/O,EAAiBziB,KAAKmK,MAAMsY,GAErBjP,UAAOme,sBAAsBvqC,EAAGy4B,EAAGC,EAAG2C,GAAgB/O,gB,GA34BzCjP,I,IAAlBmmB,G,OAmyBU,a,IAnyBVA,G,OAqyBU,SA0GhB,IAAME,GAAqB,GAErBG,GAAsB,SAAC/sB,EAAOvW,GAClC,IAAMqjC,EAAmB5d,GAAO6S,aAC9B/hB,EACAkI,UAAO6K,OACP7P,OAAOqpB,UACP9iC,GACA,GAMF,OAJAqjC,EAAiB35B,SAAW2P,WAAQsK,OACpC0f,EAAiBjd,QAAU/M,WAAQ4wB,MACnC5G,EAAiB3lB,mBAAqBG,cAAW8b,WACjD0J,EAAiBpM,WAAa,EACvBoM,GAEMJ,M,gbCv6BTiH,G,kCACJ,aAAc,YACZ,OADY,aACRpvB,GAAiB,OAAAA,KACrB,eAFY,sBAuBL,SAAAmO,GACP,sDAAaA,GACbA,EAAWyH,kBAAX,SACA,IAAMmL,EAAiB,EAAKhI,oBAC5B5K,EAAWoS,kBAAkBQ,GAC7B5S,EAAWoE,sBACTwO,EAAesO,WAAU,SAAAC,GAAE,OAAIA,EAAGxpC,OAAS,EAAKA,YA7BtC,6BAiCE,SAACkN,EAAKmb,GACE,IAAhBnb,EAAI8iB,SACV,EAAKyZ,iBAAiBphB,EAAtB,EAAkC,SAACqM,EAAUzI,GAAW,OACzB,WAC1Byd,GAAMC,KAAO,EAAKC,mBADQ,MAE1BF,GAAM/e,MAAQ,EAAKkf,oBAFO,GAIL,EAAK7pC,MAAM00B,EAAUzI,EAAQ5D,SAxC3C,6BA4CE,SAACnb,EAAKmb,GACpB,EAAKohB,iBAAiBphB,EAAtB,EAAkC,SAACqM,EAAUzI,GAAW,MAC9CtW,EAAkBsW,EAAlBtW,MAAO+N,EAAWuI,EAAXvI,QACfmB,GAAOqL,SAASva,EAAO+N,GAAQkjB,MAC7B,kBAAMve,EAAWwI,0BACjB,SAAAnG,GAAU,OACRrC,EAAWwI,qBAAqB,CAACnG,GAAa7M,UAAOisB,YAE1B,IAA3B,EAAKlP,WAAW54B,UACS,WAC1B0nC,GAAMC,KAAO,EAAKI,mBADQ,MAE1BL,GAAM/e,MAAQ,EAAKqf,oBAFO,GAIL,EAAKhqC,MAAM00B,EAAUzI,EAAQ5D,SAzD3C,2BA6DA,SAAAA,GACZA,EACG4hB,WACAvmC,SAAQ,SAAAwmC,GAAS,OAChB7hB,EAAWsK,sBAAsBuX,EAAU5nC,KAAKlD,YAjExC,yBAqEF,SAAC8N,EAAKmb,GAChB,IAAM6S,EAAmB,CACvBrtB,OAAQ,kBAAM,EAAKs8B,aAAaj9B,EAAKmb,IACrC+S,UAAW,kBAAM,EAAK+O,aAAaj9B,EAAKmb,IACxCuG,OAAQ,kBAAM,EAAKub,aAAaj9B,EAAKmb,KAEnCnb,EAAI0iB,QAAQsL,EACdA,EAAiBhuB,EAAI0iB,QAErB,yDAAgB1iB,EAAKmb,MA9EX,4BAwFC,SAACnb,EAAKmb,GACf,EAAKuS,WAAW54B,OAAS,GAC3B,EAAKooC,sBACL,EAAKxP,WAAa,IAElB,yDAAgB1tB,EAAKmb,MA7FX,mCAiGQ,WACpB,EAAKgiB,cAAc3mC,SAAQ,SAAAyY,GAAI,OAAIA,EAAK5F,aACxC,EAAK8zB,cAAgB,MAnGT,gCAsGK,SAAAhiB,GAAU,OAAI,SAAAxQ,GAC/BwQ,EAAWzJ,iBAAiBlb,SAAQ,SAAAuoB,GAClC,IAAMtW,EAAQsW,EAAOtW,MACf+N,EAASuI,EAAOvI,OACDmB,GAAOwL,kBAAkB1a,EAAO+N,GACxChgB,SAAQ,SAAAgxB,GAAQ,OAAI7c,EAAO6c,EAAUzI,aA3GxC,qCA+GU,SAACtW,EAAO0S,GAAR,OACtBA,EAAW4hB,WAAW9jB,WAAU,WAC9B,IAAM0iB,EAAY,IAAIxG,GAAU1sB,EAAO0S,GACvCwgB,EAAU1sB,KAAKgD,OAASkJ,EAAWvJ,cAAcxc,KAAK6Z,KACtDkM,EAAWjJ,iBAAiBypB,SAnHlB,iCA2JM,SAACnU,EAAUzI,EAAQ5D,GAAe,IAC5C8D,EAA0BF,EAA1BE,OAAQE,EAAkBJ,EAAlBI,OAAQ1W,EAAUsW,EAAVtW,MACxBwW,EAAOiE,cAAc/D,GACU,IAA3B,EAAKuO,WAAW54B,OAClB,EAAK44B,WAAW13B,KAAKwxB,IAGrB,EAAK4V,WACH,CAAC,EAAK1P,WAAW,GAAIlG,GACrB/e,EACA0S,GACA,SAAAwgB,GAAS,OAAI,SAAA5gB,GAAI,OAAI4gB,EAAUpJ,QAAQxX,OAEzC,EAAK2S,WAAa,GAClBzO,EAAOC,cAAcC,GAAQ,OAzKnB,iCA6KM,SAACqI,EAAUzI,EAAQ5D,GAErC,IACQ1S,EAAUsW,EAAVtW,MACF2S,EAAWD,EAAWvJ,cAAcxc,KAAK6Z,KACzCouB,EAAgBC,GAAmBniB,EAAnBmiB,CAA+B,CACnD,EAAK5P,WAAW,GAChBlG,IAEF,EAAK0V,sBACL,EAAKC,cAAgBhI,GAAUoI,wBAC7B90B,EACA40B,EACA1sB,UAAOklB,OACPjO,GAAUC,OAAS,GAErB,EAAKsV,cAAc3mC,SAAQ,SAAAyY,GACzBA,EAAKka,WAfY,IAgBjBla,EAAKgD,OAASmJ,QA/LJ,kCAyMO,SAACoM,EAAUzI,EAAQ5D,GAAe,IAC7C8D,EAA0BF,EAA1BE,OAAQE,EAAkBJ,EAAlBI,OAAQ1W,EAAUsW,EAAVtW,MACxBwW,EAAOiE,cAAc/D,GACjB,EAAKuO,WAAW54B,QAAU,EAC5B,EAAK44B,WAAW13B,KAAKwxB,IAGrB,EAAK4V,WACH,CAAC,EAAK1P,WAAW,GAAI,EAAKA,WAAW,GAAIlG,GACzC/e,EACA0S,GACA,SAAAwgB,GAAS,OAAI,SAAA5gB,GAAI,OAAI4gB,EAAU6B,aAAaziB,OAE9C,EAAK2S,WAAa,GAClBzO,EAAOC,cAAcC,GAAQ,OAvNnB,kCA2NO,SAACqI,EAAUzI,EAAQ5D,GACtC,GAAI,EAAKuS,WAAW54B,OAAS,EAC3B,EAAK+nC,kBAAkBrV,EAAUzI,EAAQ5D,OACpC,CAEL,IACQ1S,EAAUsW,EAAVtW,MACF2S,EAAWD,EAAWvJ,cAAcxc,KAAK6Z,KACzCouB,EAAgBC,GAAmBniB,EAAnBmiB,CAAA,eACjB,EAAK5P,YADY,CAEpBlG,KAEF,EAAK0V,sBACL,EAAKC,cAAgBhI,GAAUsI,6BAC7Bh1B,EACA40B,EACA1sB,UAAOisB,QACPhV,GAAUC,OAAS,GAElBryB,OACC2/B,GAAUoI,wBACR90B,EACA,CAAC40B,EAAc,GAAIA,EAAc,IACjC1sB,UAAOklB,OACPjO,GAAUC,OAAS,IAGtBryB,OACC2/B,GAAUoI,wBACR90B,EACA,CAAC40B,EAAc,GAAIA,EAAc,IACjC1sB,UAAOklB,OACPjO,GAAUC,OAAS,IAGzB,EAAKsV,cAAc3mC,SAAQ,SAAAyY,GACzBA,EAAKka,WA/BY,IAgCjBla,EAAKgD,OAASmJ,SAhQN,0BA2QD,SAACsiB,EAAuBj1B,EAAO0S,EAAYwiB,GACtD,IAAM5iB,EAAOuiB,GAAmBniB,EAAnBmiB,CAA+BI,GAC5C,EAAKE,sBAAsBn1B,EAAO0S,GAClCA,EAAW4hB,WAAWvmC,SAAQ,SAAAwmC,GAAa,IAC3BrB,EAAcqB,EAApB5nC,KACRuoC,EAAWhC,EAAXgC,CAAsB5iB,GACtBI,EAAWwJ,mBAAmBgX,EAAUzpC,SAE1C,EAAKgrC,yBAhRL,EAAKhqC,IAAM,YACX,EAAKhB,KAAO,iBACZ,EAAKwzB,KAAO,SAAAprB,GAAK,OAAI,2BAAGC,UAAU,0BAA6BD,KAE/D,EAAKozB,WAAa,GAClB,EAAKyP,cAAgB,GACrB,EAAKrqC,KAAO0pC,GAAMC,KAClBzvB,GAAW,QAVC,G,yDAsHM,WAClB,MAAO,CACL,CACE0Y,KAAM,SAAAprB,GAAK,OACT,2BAAGC,UAAU,8BAAiCD,KAEhDqoB,OAAQ,SAAAxH,GACNA,EAAWoE,sBAAsB,GACjC,EAAKzsB,KAAO0pC,GAAMC,KAClB,EAAK/O,WAAa,GAClB,EAAKyP,cAAc3mC,SAAQ,SAAAyY,GAAI,OAAIA,EAAK5F,aACxC,EAAK8zB,cAAgB,IAEvBjrC,KAAM,YACNY,KAAM0pC,GAAMC,MAEd,CACE/W,KAAM,SAAAprB,GAAK,OAAI,2BAAGC,UAAU,uBAA0BD,KACtDqoB,OAAQ,SAAAxH,GACNA,EAAWoE,sBAAsB,GACjC,EAAKzsB,KAAO0pC,GAAM/e,MAClB,EAAKiQ,WAAa,GAClB,EAAKyP,cAAc3mC,SAAQ,SAAAyY,GAAI,OAAIA,EAAK5F,aACxC,EAAK8zB,cAAgB,IAEvBjrC,KAAM,aACNY,KAAM0pC,GAAM/e,W,qCAlIhB,OAAO,IAAI2e,M,GAfe5a,IAwR1BxU,GAAW,KACTwvB,GAAQ,CACZC,KAAM,OACNhf,MAAO,QACPogB,KAAM,QAGFP,GAAqB,SAAAniB,GACzB,IAAMC,EAAWD,EAAWvJ,cAAcxc,KAAK6Z,KAC/C,OAAO,SAAAoM,GAAc,OACnBA,EAAeliB,KAAI,SAAA1F,GAAC,OAClBkkB,GAAOkB,gCACL,CAAE5G,OAAQmJ,GACVpQ,GAAKuE,UAAU9b,IACf6e,iBAGO8pB,MCvSFxa,GAAU,CACrBC,MAAOkO,GAAYvhB,cACnBuT,YAAac,GAAkBrU,cAC/ByT,SAAUwL,GAAejf,cACzB2T,cAAeuI,GAAgBlc,cAC/B+T,YAAa0E,GAAkBzY,cAC/B6T,WAAYoN,GAAoBjhB,cAChCiU,UAAW2Z,GAAgB5tB,eCjBRsvB,G,WACnB,WAAYC,GAAS,aACnB7kC,KAAK6kC,QAAUA,EACf7kC,KAAK8kC,UAAY,K,yJAIb9kC,KAAK8kC,U,yCAAkB9kC,KAAK8kC,W,uBACTC,MAAMH,EAAUI,UAAUhlC,KAAK6kC,U,cAAhDI,E,YACYjlC,K,SAAqBilC,EAAS9c,O,yCAAzB+c,U,+BAAjBjlC,E,OACAkS,EAAM,CACVkL,WAAYpd,EAAIklC,MAChBC,WAAYnlC,EAAImlC,WAChBC,OAAQplC,EAAIolC,OACZC,UAAWrlC,EAAIwB,MAEjBzB,KAAK8kC,UAAY3yB,E,kBACVA,G,mJAGOozB,G,iFACRpzB,EAAM,GACNqzB,EAAa,CACjBL,MAAO,SAACjU,EAAG9f,GAAJ,OAAWe,EAAI+e,GAAK0T,EAAUI,UAAU5zB,IAC/Cg0B,WAAY,SAAClU,EAAG9f,GAAJ,OAAWe,EAAI+e,GAAKze,OAAOkd,WAAWve,IAClDi0B,OAAQ,SAACnU,EAAG9f,GAAJ,OAAWe,EAAI+e,GAAKpyB,KAAK2mC,MAAMr0B,KAEzC9O,QAAQC,IAAI,YAAagjC,GACzBA,EACG/N,MAAM,MACNv3B,KAAI,SAAAzF,GAAC,OAAIA,EAAEg9B,MAAM,SACjB15B,QAAO,SAAA05B,GAAK,OAAIA,EAAM57B,QAAU,KAChCkC,QAAO,SAAA05B,GAAK,OAAIA,EAAM,KAAMgO,KAC5BloC,SAAQ,SAAAk6B,GAAK,OAAIgO,EAAWhO,EAAM,IAAIA,EAAM,GAAIA,EAAM,O,SACrCx3B,KAAK0lC,aAAavzB,EAAG,O,cAAzCA,EAAG,K,yBACIA,G,iIAGIwzB,GACX,OAAO,IAAIC,SAAQ,SAACC,EAASC,GAC3B,IAAMC,EAAM,IAAIC,MAChBD,EAAIJ,IAAMA,EACVI,EAAIE,OAAS,kBAAMJ,EAAQ,CAACE,EAAIG,aAAcH,EAAII,wB,qbA1CnCvB,G,aA6CA,SAAAe,GAAG,6BAAoBA,M,IC/BtCS,G,kCACJ,WAAYptC,EAAMqtC,GAAW,0BAC3B,eAD2B,uBAuEnB,kBAAMD,EAAanwB,QAvEA,2BAyEf,eAzEe,uCA2ElB,iCAAAhF,EAAA,sEACoB,EAAKo1B,UAAUC,OADnC,gBACDjpB,EADC,EACDA,WACAwnB,EAAY,EAAKwB,UAAjBxB,QAEN,yBAAK5nC,MAAO,CAAE2F,QAAS,OAAQC,cAAe,WAC5C,yBAAK5F,MAAO,CAAE2F,QAAS,OAAQC,cAAe,QAC5C,yBAAK5F,MAAO,CAAE+N,YAAa,QAA3B,UACA,uBAAGu7B,KAAMlpB,EAAYmpB,UAAQ,GAC1BnpB,IAGL,yBAAKpgB,MAAO,CAAE2F,QAAS,OAAQC,cAAe,QAC5C,yBAAK5F,MAAO,CAAE+N,YAAa,QAA3B,SACA,uBAAGu7B,KAAM3B,GAAUI,UAAUH,GAAU2B,UAAQ,GAC5C3B,KAdA,4CAzET,EAAK7rC,KAAOA,EACZ,EAAKgB,IAAL,gBAAoBhB,GACpB,EAAKqtC,UAAYA,EACjB,EAAK7Z,KAAO,SAAAprB,GAAK,OAAI,6BAAOA,EAAP,CAAcC,UAAU,iBALlB,E,4CAQtB4gB,GAAY,WACXwkB,EAAgBjwB,SAAMC,SAASwL,EAAWvJ,eAChDuJ,EAAWzJ,iBAAiBlb,QAA5B,iCAAoC,WAAMuoB,GAAN,wCAAA5U,EAAA,6DAC5B1B,EAAQsW,EAAOtW,MACfwW,EAASF,EAAOE,OAFY,SAQxB,EAAKsgB,UAAUC,OARS,gBAIhCjpB,EAJgC,EAIhCA,WACA+nB,EALgC,EAKhCA,WACAC,EANgC,EAMhCA,OACAC,EAPgC,EAOhCA,UAGI9hC,EAAQ4hC,EAAaE,EAAU,GAC/B7hC,EAAS2hC,EAAaE,EAAU,GAChCvvB,EAAO0I,GAAOioB,cAAcn3B,GAC/BvW,KAAKwd,SAAMC,SAAS,EAAKoP,OAAL,MAAqBzO,OAAO,EAAKpe,OACrDwK,MAAMA,GACNC,OAAOA,GACP4Z,WAAWA,GACXmI,QAEGmhB,EAAY70B,GAAKkB,GAAG,EAAExP,EAAQ,GAAIC,EAAS,EAAG,IAAIkQ,IACtD7B,GAAKkB,GAAGqyB,IAGVoB,EAAcnpC,SAAQ,SAAAspC,GACpB,IAAM7tB,EAAS6tB,EAAS1qC,KAAK6Z,KAAKgD,OAClCA,EAAOrW,SAAWmc,GAAUgoB,mBAAmBF,EAAUvtB,aACzD2M,EAAO+gB,UACL,IAAIz0B,WAAQ0G,EAAOrW,SAASkO,EAAGmI,EAAOrW,SAASmO,EAAGkI,EAAOrW,SAASqO,OAIhE9Q,EAAM,IAAIumB,GACdzQ,EACA,CAACvS,EAAOC,GACR,EAAK4Z,WACL7G,SAAMC,SAAS,EAAKoP,OAAL,WAA0BzO,OAAO,EAAKpe,OAGjD+tC,EAAgBvwB,SAAMC,SAAS,EAAKoP,OAAL,UAClC5lB,KAAI,SAAA2Q,GAAC,OAAKA,KACVwG,QAAO,GACV6K,EAAWjJ,iBAAiB/Y,EAAK,KAAM8mC,GACvClhB,EAAOvI,OAAOnN,UACd0V,EAAOvI,OAASmJ,GAAaugB,iBAAiBz3B,EAAO/L,EAAOC,GA3C1B,4CAApC,yD,6BA+CKwe,GAAY,WACjB,gDAAaA,GACb,IAAM0K,EAAY1K,EAAWoK,gBAAgBrsB,KAAKhH,MAClD2zB,EAAUrvB,SAAQ,SAAA6E,OAClBwqB,EAAU5M,WAAU,WAClB,GAAIkC,EAAWglB,gBAAgBrrC,OAAS,EACtC,OAAO,EAAKsrC,OAAOjlB,MAKvBA,EAAWyH,kBAAkBhB,GAAQC,W,GArEd/C,I,IAArBwgB,G,OAiGU,gBAGDA,U,gbC5GTe,G,kCAGJ,WAAYC,EAAU7gB,GAA6B,MAAlBvQ,EAAkB,uDAAJ,GAAI,oBACjD,cAAMoxB,EAASrxB,KAAMwQ,EAAWvQ,GADiB,2BA2CrC,SAACqxB,EAAOC,EAAiBC,GACrC,IAAMj7B,GAAO,IAAIk7B,MAAOC,UAExBF,EAAcF,EADH,MAAQ/6B,EAAOg7B,IAE1B,EAAKI,wBAA0BC,uBAAsB,kBACnD,EAAKC,YAAYP,EAAO/6B,EAAMi7B,SAhDiB,uBAoDzC,SAAAA,GACR,EAAKG,wBAA0BC,uBAAsB,kBACnD,EAAKC,YAAL,SAAuB,IAAIJ,MAAOC,UAAWF,SAtDE,uBA0DzC,kBAAMJ,EAAMlxB,QAxDpB,EAAKyxB,wBAA0B,KAC/B,EAAKN,SAAWA,EAHiC,E,8CAQjD,OADW,mD,+BAKX,IAAM1vB,EAAS,iDAkBf,OAjBAA,EAAOC,WAAWC,WAAa,CAC7BC,QAASH,EAAOC,WAAWC,WAAWC,QACtC7e,KAAM0e,EAAOC,WAAWC,WAAW5e,KACnCmc,KAAMuC,EAAOC,WAAWC,WAAWzC,KACnCoR,UAAW,CACTpR,KAAM,SACNpR,MAAO,cAETrB,SAAUgV,EAAOC,WAAWC,WAAWlV,SACvC6T,WAAYmB,EAAOC,WAAWC,WAAWrB,WACzChV,MAAOmW,EAAOC,WAAWC,WAAWrW,MACpCsS,YAAa6D,EAAOC,WAAWC,WAAW/D,aAE5C6D,EAAOI,SAAP,UAA+B,CAC7B,eAAe,GAEjBJ,EAAOpX,KAAP,UAA2BN,KAAKumB,UACzB7O,I,gCAIP,kDACAzD,YAAS4zB,YAAY,CACnB1zB,MAAO,QACPC,KAAMpU,KAAKonC,SAASjrC,GACpB2rC,UAAW,OAEbzvC,OAAO0vC,qBAAqB/nC,KAAK0nC,4B,2CAuCRM,EAAYX,GACrCA,EAAMtxB,KAAKrT,SAAW,IAAI2P,WACxB21B,EAAWtlC,SAASkO,EACpBo3B,EAAWtlC,SAASmO,EACpBm3B,EAAWtlC,SAASqO,GAEtB,IAAMwF,EAAa,IAAIM,cACrBmxB,EAAWpmB,YAAYhR,EACvBo3B,EAAWpmB,YAAY/Q,EACvBm3B,EAAWpmB,YAAY7Q,EACvBi3B,EAAWpmB,YAAYlO,GAEzB2zB,EAAMtxB,KAAKW,mBAAqBH,EAAW9C,c,oCA+BxBsC,EAAMxG,GACzB,IAAM04B,EAAS52B,KAAKwR,GAAK,EAInBqlB,EAAiBnyB,EAAKoyB,kBAAkBD,eAC9CnyB,EAAKrT,SAAS+R,KACXyzB,EAAeE,OAAOx3B,GACtBs3B,EAAeE,OAAOv3B,GACtBq3B,EAAeE,OAAOr3B,GAGzB,IAAMs3B,EAAe5pB,GAAO6S,aAC1B/hB,EACA,IAAIkI,UAAO,EAAK,EAAK,GACrB,GAAMywB,EAAexkB,OAHF,kBAIR3N,EAAK/c,OAChB,GAEFqvC,EAAapY,WAAa,IAC1BoY,EAAajpB,QAAUtN,GAAKw2B,KAAK92B,MAC/B,EAAI02B,EAAexkB,QACnBtK,YAEFivB,EAAaE,YAAYN,EAAQ,EAAG,GACpCI,EAAa3lC,SAAS+R,IAAI,EAAG,EAvBX,KAwBlB,IAAM+zB,EAAoB/pB,GAAO6S,aAC/B/hB,EACA,IAAIkI,UAAO,EAAK,EAAK,GAzBJ,IA2BjB1B,EAAK/c,MACL,GAMF,OAJAwvC,EAAkBvY,WAAa,GAE/Bla,EAAKgD,OAASsvB,EACdA,EAAatvB,OAASyvB,EACfA,I,mDAG2BrmC,EAAM4T,EAAMgD,EAAQxJ,GAAO,WACxDwG,IACHA,EAAO0I,GAAO6S,aACZ/hB,EACA,IAAIkI,UAAO,EAAK,EAAK,GACrB,GACAtV,EAAKnJ,MACL,IAGJ,IAAMouC,EAAW,CACfrxB,KAAMA,EACNnU,SAAU,IAENc,EAAW,IAAI2P,WACnBlQ,EAAKO,SAASkO,EACdzO,EAAKO,SAASmO,EACd1O,EAAKO,SAASqO,GAEVwF,EAAa,IAAIM,cACrB1U,EAAKyf,YAAYhR,EACjBzO,EAAKyf,YAAY/Q,EACjB1O,EAAKyf,YAAY7Q,EACjB5O,EAAKyf,YAAYlO,GAiBnB,OAfAqC,EAAKrT,SAAWA,EAChBqT,EAAKW,mBAAqBH,EACtBwC,IACFhD,EAAKgD,OAASA,GAEhBquB,EAAQ,SAAejlC,EAAKsmC,MAAMxoC,KAAI,SAAAwoC,GACpC,EAAKC,6BACHD,EACAhqB,GAAO8G,mBAAmBhW,GACvBgN,UAAU,CAAElF,WAAW,EAAO5V,KAAM,KACpC+jB,QACHzP,EACAxG,MAGG63B,I,0CAGkBuB,EAAWC,EAAWr5B,GAC/C,OAAO43B,EAAMuB,6BACXC,EACAC,EACA,KACAr5B,K,gCAKF,OAAO,IAAIs5B,O,GA1NKviB,I,IAAd6gB,G,kBACqB,c,IADrBA,G,OAqEU,S,IArEVA,G,sBAuEwB,SAAAllB,GAAU,OAAI,SAAColB,EAAOyB,GAChD,IAAM/yB,EAAOsxB,EAAMtxB,KAEbgzB,EAAMtqB,GAAOS,kBAAkBnJ,GAClC+D,QAAQ,IAAIhI,GAAK,CAFN,EAEc,EAAG,KAC5BsH,YACHrD,EAAKrT,SAAWqT,EAAKrT,SAAS8Q,IAAIu1B,EAAIv3B,MAAMs3B,IAC5C/yB,EAAKizB,OAAO7a,QAAKC,GAAK/c,KAAKwR,GAAK,EAAKimB,EAAIrrB,SAAMwrB,OAC3C53B,KAAK4B,SAAW,KAAMgP,EAAWwJ,mBAAmB1V,EAAK/c,U,IA/E3DmuC,G,qBAiGuB,SAACE,EAAOplB,GAoBjC,OAnBAhO,YAASC,UACP,CAAEC,MAAO,QAASC,KAAMizB,EAAMD,SAASjrC,GAAI2rC,UAAW,OACtD,SAAAxnC,GACE,IAAM4oC,EAAK5oC,EAAKtG,IAAImtC,MAAME,EAAMD,SAASjrC,IAAI2rC,UAAUoB,GAAGC,MACtDD,IACF5mC,QAAQC,IAAI,qBAAsB2mC,GAClC/B,GAAMiC,oBAAoBF,EAAI7B,GAC9B/kC,QAAQC,IAAI,kBAAmB8kC,GAC3Bh2B,KAAK4B,SAAW,KAAMgP,EAAWwJ,mBAAmB4b,EAAMruC,UAGlE,SAAAsH,GACEgC,QAAQC,IAAI,oBAAqBjC,EAAK5G,OACtC,IAAMwvC,EAAK5oC,EAAK5G,MAAMytC,MAAME,EAAMD,SAASjrC,IAAI2rC,UAAUoB,GAAGC,MAC5DhC,GAAMiC,oBAAoBF,EAAI7B,GAC9B/kC,QAAQC,IAAI,kBAAmB8kC,GAC/BplB,EAAWwJ,mBAAmB4b,EAAMruC,SAGjC,SAACqwC,EAAeP,Q,IAyGrBD,G,WACJ,aAAc,aACZ7oC,KAAKub,MAAQ,KACbvb,KAAKspC,UAAY,KACjBtpC,KAAKupC,YAAc,KACnBvpC,KAAKua,OAAS,KACdva,KAAKmc,aAAc,EACnBnc,KAAKwpC,IAAM,KACXxpC,KAAKypC,aAAe,GACpBzpC,KAAK0pC,WAAa,K,0CAGf1wC,GAEH,OADAgH,KAAKub,MAAQviB,EACNgH,O,+BAGAonC,GAEP,OADApnC,KAAKspC,UAAYlC,EACVpnC,O,iCAGE2pC,GAET,OADA3pC,KAAKupC,YAAcI,EACZ3pC,O,4BAGHuP,GAEJ,OADAvP,KAAKua,OAAShL,EACPvP,O,iCAGEsc,GAET,OADAtc,KAAKmc,YAAcG,EACZtc,O,yBAGN7D,GAED,OADA6D,KAAKwpC,IAAMrtC,EACJ6D,O,kCAGGgW,GAEV,OADAhW,KAAKypC,aAAezzB,EACbhW,O,gCAGCumB,GAER,OADAvmB,KAAK0pC,WAAanjB,EACXvmB,O,8BAGD,WAuBN,OAtBkB7G,OAAOkE,KAAK2C,MAC3BlC,QAAO,SAAA8S,GAAC,MAAU,gBAANA,KACZ3Q,KAAI,SAAA2Q,GAAC,OAAI,EAAKA,MAEPtT,SAAQ,SAAAsT,GAChB,GAAU,OAANA,EACF,KAAM,qDAAN,OAA2DA,MAG/D5Q,KAAKspC,UAAUntC,GAAK6D,KAAKwpC,IACzBxpC,KAAKspC,UAAUtwC,KAAOgH,KAAKub,MAC3Bvb,KAAKspC,UAAUvzB,KAAK/c,KAAOgH,KAAKub,MAChCvb,KAAKspC,UAAUvzB,KAAKuG,WAAatc,KAAKmc,YACtCnc,KAAKspC,UAAUvzB,KAAKgD,OAAS/Y,KAAKupC,YAEjB9qB,GAAO8G,mBAAmBvlB,KAAKua,QAC7C+B,YAAW,GACXC,UAAU,CAAElF,WAAW,EAAO5V,KAAM,KACpCzI,KAHc,UAGNgH,KAAKub,MAHC,SAIdiK,QACMzM,OAAS/Y,KAAKspC,UAAUvzB,KAE1B,IAAIoxB,GAAMnnC,KAAKspC,UAAWtpC,KAAK0pC,WAAY1pC,KAAKypC,kB,KAI5CtC,M,4aC9Sf,IAAMyC,GAAS/zB,SAAM+zB,OACfC,G,kCAMJ,WAAY9zB,EAAMsxB,GAAO,0BACvB,cAAMtxB,GADiB,uBA2Df,kBAAM8zB,EAAW5zB,QAzDzB,EAAKoxB,MAAQA,EACb,EAAKyC,sBAHkB,E,2DAMH,WACpB71B,YAASC,UACP,CACEC,MAAO,QACPC,KAAMpU,KAAKqnC,MAAMlrC,GACjB2rC,UAAW,gBAEb,SAAAxnC,GACEkW,SAAMC,SAASnW,GACZ2W,SAAQ,SAAAle,GAAC,OAAI6wC,GAAO7wC,EAAEiB,QACtBid,SAAQ,SAAAia,GAAC,OAAI0Y,GAAO1Y,EAAEiW,MAAM,EAAKE,MAAMlrC,QACvC8a,SAAQ,SAAA1d,GAAC,OAAIqwC,GAAOrwC,EAAEuuC,cACtB7wB,SAAQ,SAAA1c,GAAC,OAAIqvC,GAAOrvC,EAAEwvC,gBACtB9yB,SAAQ,SAAA7E,GAAC,OAAIw3B,GAAOx3B,EAAE+2B,UACtBlyB,SAAQ,SAAA7F,GAAC,OAAIw4B,GAAOx4B,EAAEqS,WACtBnmB,SAAQ,SAAAmmB,GAAM,OAAI,EAAKumB,iBAAiBvmB,SAE7C,SAAAnjB,GACEkW,SAAMC,SAASnW,EAAK5G,OACjBud,SAAQ,SAAA7F,GAAC,OAAIw4B,GAAOx4B,EAAE+1B,UACtBlwB,SAAQ,SAAA1d,GAAC,OAAIqwC,GAAOrwC,EAAE,EAAK8tC,MAAMlrC,QACjC8a,SAAQ,SAAA1d,GAAC,OAAIqwC,GAAOrwC,EAAEuuC,cACtB7wB,SAAQ,SAAA1c,GAAC,OAAIqvC,GAAOrvC,EAAEwvC,gBACtB9yB,SAAQ,SAAA7E,GAAC,OAAIw3B,GAAOx3B,EAAE+2B,UACtBlyB,SAAQ,SAAA7F,GAAC,OAAIw4B,GAAOx4B,EAAEqS,WACtBnmB,SAAQ,SAAAmmB,GAAM,OAAI,EAAKumB,iBAAiBvmB,W,uCAShCA,GACf,IAAMvC,EAAa,IAAIC,cAEvBD,EAAWZ,UAAYmD,EAAOxM,SAAQ,SAAArG,GAAC,OAAIA,KAC3C,IAAMq5B,EAAS,IAAIj4B,MAAM,EAAIyR,EAAO7nB,QACpCslB,EAAW+oB,OAASA,EAAOC,KAAK,GAEhChpB,EAAWG,YAAYrhB,KAAK+V,MAAM,K,gCAIlC,kDACA9B,YAAS4zB,YAAY,CACnB1zB,MAAO,QACPC,KAAMpU,KAAKqnC,MAAMlrC,GACjB2rC,UAAW,mB,8BAQDv4B,GAAqC,IAA9B2J,EAA8B,uDAAvB,KAAMd,EAAiB,uDAAN,KAC3C,IAAKc,IAASd,EACZ,KAAM,0DAER,IAAM+xB,EAAiB,IAAI1tB,QAAJ,oBAAsBvD,EAAKlgB,MAAQuW,GACpDyK,EAAM,IAAI2D,oBAAJ,oBAAkCzE,EAAKlgB,KAAvC,YAAuDuW,GAOnE,OANAyK,EAAI7B,cAAgB,IAAIV,UAAO,EAAG,EAAG,GACrCuC,EAAIowB,iBAAkB,EACtBpwB,EAAIqwB,aAAc,EAClBrwB,EAAIswB,UAAY,EAChBH,EAAenzB,SAAWgD,EAEnB,IAAI6vB,EAAWM,EAAgBjxB,O,GAjFjBpD,I,IAAnB+zB,G,OAmEU,cAkBDA,UCpFTU,G,WACJ,aACE,GADY,aACRz2B,GAAU,OAAOA,GACrBA,GAAW9T,KACXA,KAAKwqC,mBAAqB,GAC1BxqC,KAAK3D,MAAQ,E,4CAORrC,EAAKuV,GACV,IAAM2sB,EAAU3sB,EAAMuY,KACtB,OAAOtR,SAAMC,SAASzW,KAAKwqC,mBAAmBtO,IAC3CjlB,SAAQ,SAAAwzB,GAAS,OAAIb,GAAOa,EAAUzwC,OACtCwmC,MACC,kBAAM,KACN,kBAAM,O,0BAIRxmC,EAAKuV,EAAOwG,GACd,IAAMmmB,EAAU3sB,EAAMuY,KAMtB,OALMoU,KAAWl8B,KAAKwqC,qBACpBxqC,KAAKwqC,mBAAmBtO,GAAW,IAErCl8B,KAAKwqC,mBAAmBtO,GAASliC,GAAO+b,EACxCA,EAAK20B,YAAW,GACT1qC,O,0BAGLhG,EAAKuV,GAAO,WACR2sB,EAAU3sB,EAAMuY,KACtB,OAAOtR,SAAMC,SAASzW,KAAKwqC,mBAAmBtO,IAC3CjlB,SAAQ,SAAAwzB,GAAS,OAAIb,GAAOa,EAAUzwC,OACtCiG,KAAI,SAAA8V,GACHzT,QAAQC,IACN,qDACA,EAAKlG,OAEP,IAAMsuC,EAAY50B,EAAK60B,MAAL,UAAc5wC,GAAd,OAAoB,EAAKqC,UAE3C,OADAiG,QAAQC,IAAI,SAAUooC,GACfA,KAERE,W,0BAGDt7B,GACF,IAAM2sB,EAAU3sB,EAAMuY,KAClBoU,KAAWl8B,KAAKwqC,2BACXxqC,KAAKwqC,mBAAmBtO,M,qCA1CjC,OAAO,IAAIqO,M,KA+CTX,GAAS,SAAAh5B,GAAC,OAAI4F,SAAMC,SAAS7F,IAE/BkD,GAAW,KACAy2B,MC9DTO,I,iBACJ,WAAYv7B,GAAO,yCAQZ,SAACw7B,GAAD,IAAWC,EAAX,uDAAyB,SAAAj1B,GAAI,OAAIA,GAAjC,OACL,IAAI6vB,SAAQ,SAACqF,EAAIC,GACf,IAAMT,EAAYF,GAAUj1B,cAC5B,GAAIm1B,EAAUU,OAAOJ,EAAU,EAAKx7B,OAClCjN,QAAQC,IAAR,qBAA0BwoC,EAA1B,+BAAyD,EAAKx7B,QAC9D07B,EAAGD,EAAYP,EAAUnxC,IAAIyxC,EAAU,EAAKx7B,aACvC,CACLjN,QAAQC,IAAI,oBACZ,IAAM6oC,EAAgB,IAAIC,iBAAc,EAAK97B,OACvC+7B,EAAWF,EAAcG,YAAY,GAAI,GAAIC,GAAUT,GAC7DO,EAASG,UAAY,SAAAC,GACnBppC,QAAQC,IAAI,eAAgBwoC,GAC5B,IAAMh1B,EAAO21B,EAAKC,aAAa,GAC/B51B,EAAK/c,KAAO+xC,EACZN,EAAUmB,IAAIb,EAAU,EAAKx7B,MAAOwG,IAEtCu1B,EAASO,QAAU,SAACH,EAAMnnC,EAASunC,GAAhB,OACjBZ,EAAI,CAAE3mC,UAASunC,eACjBV,EAAcW,SAAW,SAAAL,GACvBppC,QAAQC,IAAI,gBACZ0oC,EAAGD,EAAYP,EAAUnxC,IAAIyxC,EAAU,EAAKx7B,UAE9C67B,EAAc9E,cA7BlBtmC,KAAKuP,MAAQA,E,6CAGLA,GACR,OAAO,IAAIu7B,EAAWv7B,O,UANpBu7B,G,cAmCgB,SAAAnF,GAAG,gBAAO6F,IAAP,OAAkB7F,MAG3C,IAAM6F,GAAW,kBACFV,M,+oBCnCTkB,G,kCACJ,WACE3E,GAGA,QAFA4E,EAEA,uDAFuB,SAAC5E,EAAOplB,GAAR,OACrBklB,GAAM+E,mBAAmBjqB,IAC3B,oBACA,eADA,sBASO,SAAAA,GACP,sDAAaA,GAEbA,EACGoK,gBAAgB,EAAKgb,MAAMruC,MAC3B+mB,WAAU,kBAAM,EAAKosB,SAASlqB,MACjCA,EAAWyH,kBAAkBhB,GAAQG,gBAfrC,wBA6CS,SAACtZ,EAAOwG,EAAM4zB,GACvB,IAAMvC,EAAWD,GAAMiF,oBACrB,EAAK/E,MAAMsB,UACX5yB,EACAxG,GAEI2J,EAAO1C,SAAMC,SAAS,EAAKoP,OAAL,cAC5B,OAAOshB,GAAMkF,UACVlwC,GAAG,EAAKkrC,MAAMlrC,IACdnD,KAAKwd,SAAMC,SAAS,EAAKoP,OAAL,MAAqBzO,OAAO,EAAKiwB,MAAMruC,OAC3DutB,UACC/P,SAAMC,SAAS,EAAKoP,OAAL,WAA0BzO,OAAO,EAAKiwB,MAAMruC,OAE5DouC,SAASA,GACTuC,WAAWA,GACXp6B,MAAMA,GACNyG,YAAYkD,EAAKjZ,KAAI,SAAA2Q,GAAC,OAAIA,EAAEoF,eAAaoB,OAAO,KAChDoO,WA9DH,6BAiEc,SAACjW,EAAO0S,EAAYolB,GAClC,IAAMiF,EAAazC,GAAW/wB,OAC5BvJ,EACA,CAAEvW,KAAM,EAAKquC,MAAMruC,KAAMmD,GAAI,EAAKkrC,MAAMlrC,IACxC8lB,GAGF,OADAqqB,EAAWv2B,KAAKgD,OAASsuB,EAAMtxB,KACxBu2B,KAxEP,6BA2Ec,SAAArqB,GACd,OAAOzL,SAAMC,SAAS,EAAKoP,OAAL,WACnB5lB,KAAI,SAAAssC,GAAS,OAAIA,EAAUxzB,UAC3B9B,SAAQ,SAAAu1B,GAAU,OAAIvqB,EAAWoK,gBAAgBmgB,MACjDvsC,KAAI,SAAAwsC,GAAQ,OAAIA,EAASvwC,KAAK6Z,QAC9BqB,OAAO6K,EAAWvJ,cAAcxc,KAAK6Z,SAhFxC,uBAmFQ,kBAAMi2B,EAAY/1B,QAjF1B,EAAKoxB,MAAQA,EACb,EAAKrtC,IAAL,qBAAyBqtC,EAAMruC,MAC/B,EAAKA,KAAOquC,EAAMruC,KAClB,EAAKizC,qBAAuBA,EAC5B,EAAKzf,KAAO,SAAAprB,GAAK,OAAI,2BAAGC,UAAU,gBAAmBD,KANrD,E,8CAkBO6gB,GAAY,WACnBA,EAAWzJ,iBAAiBlb,SAAQ,SAAAuoB,GAClC,IAAMtW,EAAQsW,EAAOtW,MACfm9B,E,mWAAoB,IAAK,EAAK7mB,QACpCilB,GAAW93B,GAAGzD,GACX+2B,KAAKa,GAAMwF,iBAAiB,SAAA52B,GAAI,OAAIoxB,GAAMyF,cAAc72B,EAAMxG,MAC9Ds9B,MAAK,SAAA92B,GAAI,OACR,EAAK+2B,oBAAoB/2B,EAAMxG,EAAO0S,EAAYyqB,SAGxD1sC,KAAK6lB,OAAL,UAA0B,I,0CAGR9P,EAAMxG,EAAO0S,EAAY4D,GAC3C,IAAM8jB,EAAa3pC,KAAK+sC,cAAc9qB,GAEhColB,EAAQrnC,KAAKgtC,SAASz9B,EAAOwG,EAAM4zB,GACzCtC,EAAM4F,QAAQjtC,KAAKisC,qBAAqB5E,EAAOplB,IAC/C,IAAMirB,EAAW12B,SAAMC,SAASoP,EAAM,UAAczO,QAAO,GAC3D6K,EAAWjJ,iBAAiBquB,EAAOsC,EAAW3wC,MAAOk0C,GAErD,IAAMZ,EAAatsC,KAAKmtC,cAAc59B,EAAO0S,EAAYolB,GACzDplB,EAAWjJ,iBAAiBszB,EAAYjF,EAAMruC,MAAM,GAEpDipB,EAAW0P,kB,GA/CW/L,I,IAApBomB,G,OA0FU,eAGDA,U,gbCnGTvvB,G,kCACJ,WAAY1G,EAAMwQ,GAA6B,MAAlBvQ,EAAkB,uDAAJ,GAAI,oBAC7C,cAAMD,EAAMwQ,EAAWvQ,GADsB,uBAqCrC,kBAAMyG,EAAKxG,QArC0B,E,8CAM7C,OADW,mD,+BAKX,IAAMyB,EAAS,iDAkBf,OAjBAA,EAAOC,WAAWC,WAAa,CAC7BC,QAASH,EAAOC,WAAWC,WAAWC,QACtC7e,KAAM0e,EAAOC,WAAWC,WAAW5e,KACnCmc,KAAMuC,EAAOC,WAAWC,WAAWzC,KACnCoR,UAAW,CACTpR,KAAM,SACNpR,MAAO,cAETrB,SAAUgV,EAAOC,WAAWC,WAAWlV,SACvC6T,WAAYmB,EAAOC,WAAWC,WAAWrB,WACzChV,MAAOmW,EAAOC,WAAWC,WAAWrW,MACpCsS,YAAa6D,EAAOC,WAAWC,WAAW/D,aAE5C6D,EAAOI,SAAP,UAA+B,CAC7B,eAAe,GAEjBJ,EAAOpX,KAAP,UAA2BN,KAAKumB,UACzB7O,I,6CAGcU,GACrB,OAAO,gEACmBA,GACvBta,QAAO,SAAA8S,GAAC,MAAgB,WAAZA,EAAE7M,a,GAnCFuiB,I,IAAb7J,G,OAuCU,QAGDA,U,+oBClCT2wB,G,kCACJ,WAAYr3B,GAAM,0BAChB,eADgB,uBAcR,SAAAkM,GACRA,EAAWzJ,iBAAiBlb,SAAQ,SAAAuoB,GAClC,IAAMtW,EAAQsW,EAAOtW,MACfm9B,E,mWAAoB,IAAK,EAAK7mB,QACpCilB,GAAW93B,GAAGzD,GACX+2B,KAAK,EAAKtsC,KACV6yC,KAAK,EAAKD,cAAc3qB,EAAY1S,EAAOm9B,IAC3CG,KAAK,EAAKQ,cAAcprB,EAAY1S,EAAOm9B,OAEhD,EAAK7mB,OAAL,UAA0B,KAvBV,6BA0BF,SAAC5D,EAAY1S,EAAOsW,GAApB,OAA+B,SAAA9P,GAC7C,IAAM4zB,EAAa,EAAKoD,cAAc9qB,GACtClM,EAAKgD,OAAS4wB,EACd5zB,EAAKu3B,gBACL,IAAMJ,EAAW12B,SAAMC,SAASoP,EAAM,UAAczO,QAAO,GACrDkH,EAAY9H,SAAMC,SAASoP,EAAM,cACvC9P,EAAKrT,SAAW4b,EACbrH,SAAQ,SAAAle,GAAC,OAAKm0C,EAAW12B,SAAM5D,KAAK7Z,EAAE2J,UAAY8T,SAAM6N,UACxDpkB,IAAIoS,WAAQoO,WACZrJ,OAAO/E,WAAQsK,QAClB5G,EAAKW,mBAAqB4H,EACvBrH,SAAQ,SAAAle,GAAC,OAAKm0C,EAAW12B,SAAM5D,KAAK7Z,EAAEwd,YAAcC,SAAM6N,UAC1DpkB,KACC,SAAAsW,GAAU,OACR,IAAIM,cACFN,EAAW,GACXA,EAAW,GACXA,EAAW,GACXA,EAAW,OAGhBa,OAAOP,cAAW8b,YACrB,IAAM3b,EAAW,IAAI2G,oBAAJ,cAA4B5H,EAAK/c,MAAQuW,GACpDhO,EAAQ+c,EACXrH,SAAQ,SAAAle,GAAC,OAAKm0C,EAAW12B,SAAM5D,KAAK7Z,EAAEwI,OAASiV,SAAM6N,UACrDpkB,IAAIwX,UAAOgJ,WACXrJ,OAAOK,UAAO6K,QAIjB,OAHAtL,EAASE,aAAe3V,EACxByV,EAASmB,cAAgB5W,EACzBwU,EAAKiB,SAAWA,EACTjB,MAxDS,6BA2DF,SAACkM,EAAY1S,EAAOsW,GAApB,OAA+B,SAAA9P,GAC7C,IAAM4zB,EAAa,EAAKoD,cAAc9qB,GAChCirB,EAAW12B,SAAMC,SAASoP,EAAM,UAAczO,QAAO,GACrDm2B,EAAY/2B,SAAMC,SAASoP,EAAM,cACpC5O,SAAQ,SAAAle,GAAC,OAAKm0C,EAAW12B,SAAM5D,KAAK7Z,EAAEC,MAAQwd,SAAM6N,UACpDjN,OAFe,UAEL,EAAKpe,MAFA,OAEOqY,KAAKmK,MAAsB,IAAhBnK,KAAK4B,YACzC8C,EAAK/c,KAAOu0C,EAEZ,IAAMC,EAAW,IAAI/wB,GACnB1G,EACA,EAAK/c,KACLwd,SAAMC,SAASoP,EAAM,cAClB5O,SAAQ,SAAArG,GAAC,OAAKs8B,EAAW12B,SAAM5D,KAAKhC,EAAEoF,aAAeQ,SAAM6N,UAC3DjN,OAAO,KAGZ6K,EAAWjJ,iBAAiBw0B,EAAU7D,EAAW3wC,MAAOk0C,GACxDjrB,EAAW0P,kBA5EK,6BA+EF,SAAA1P,GACd,OAAOzL,SAAMC,SAAS,EAAKoP,OAAL,WACnB5lB,KAAI,SAAAssC,GAAS,OAAIA,EAAUxzB,UAC3B9B,SAAQ,SAAAu1B,GAAU,OAAIvqB,EAAWoK,gBAAgBmgB,MACjDvsC,KAAI,SAAAwsC,GAAQ,OAAIA,EAASvwC,KAAK6Z,QAC9BqB,OAAO6K,EAAWvJ,cAAcxc,KAAK6Z,SApFxB,uBAuFR,kBAAMq3B,EAAcn3B,QAvFZ,2BA0FJ,eA1FI,uCA4FP,uBAAAhF,EAAA,sDAEP,yBAAKhU,MAAO,CAAE2F,QAAS,OAAQC,cAAe,WAC5C,yBAAK5F,MAAO,CAAE2F,QAAS,OAAQC,cAAe,QAC5C,yBAAK5F,MAAO,CAAE+N,YAAa,QAA3B,SACA,uBAAGu7B,KAAMuE,GAAW2C,WAAW,EAAKzzC,KAAMwsC,UAAQ,GAC/C,EAAKxsC,OANL,4CA1FT,EAAKA,IAAM+b,EAAK5Z,GAChB,EAAKnD,KAAO+c,EAAK/c,KACjB,EAAKwzB,KAAO,SAAAprB,GAAK,OAAI,6BAAOA,EAAP,CAAcC,UAAU,0BAJ7B,E,4CAOX4gB,GACL,gDAAaA,GACb3f,QAAQC,IAAR,eAAoBvC,KAAKhG,IAAzB,cAAkCgG,KAAKhH,MAAQgH,KAAK6lB,QACpD7lB,KAAK0tC,QAAQzrB,GACbA,EAAWyH,kBAAkBhB,GAAQG,iB,GAZbjD,I,IAAtBwnB,G,OAyFU,iBAkBDA,UChHFO,GAAe,CAC1BnnB,IAAK,MACL2gB,MAAO,QACP1qB,KAAM,QAGKmxB,GAAqB,CAChCpnB,IAAK,SAAAvmB,GAAG,OAAI,IAAImmC,GAAanmC,EAAIjH,KAAMiH,EAAI4tC,SAC3C1G,MAAO,SAAAE,GAAK,OAAI,IAAI2E,GAAY3E,EAAOF,GAAM2G,oBAC7CrxB,KAAM,SAAA1G,GAAI,OAAI,IAAIq3B,GAAcr3B,K,gbCP5Bg4B,G,kCACJ,WAAYh4B,EAAMi4B,EAAWvsC,GAAwC,MAAlCutB,EAAkC,uDAAtB,GAAIhZ,EAAkB,uDAAJ,GAAI,oBACnE,cAAMD,EAAMC,GADuD,uBAkB3D,kBAAM+3B,EAAK93B,QAhBnB,EAAK+3B,UAAYA,EACjB,EAAKvsC,KAAOA,EACZ,EAAKutB,UAAYA,EAJkD,E,8CAQnE,IAAM9V,EAAO,iDAGb,OAFAA,EAAK80B,UAAYhuC,KAAKguC,UACtB90B,EAAKzX,KAAOzB,KAAKyB,KACVyX,I,6BAGF3J,GAAqC,IAA9B2J,EAA8B,uDAAvB,KAAMd,EAAiB,uDAAN,KACpC,OAAO21B,EAAKj1B,OAAOvJ,EAAO2J,EAAMd,M,8BAOpB7I,GAAqC,IAA9B2J,EAA8B,uDAAvB,KAAMd,EAAiB,uDAAN,KAC3C,IAAKc,EAAM,KAAM,kCACjB,IAAMlgB,EAAOwd,SAAMC,SAASyC,EAAKlgB,MAAMoe,OAA1B,cACJ/F,KAAKmK,MAAsB,IAAhBnK,KAAK4B,YAEnB8C,EAAOk4B,GAAe/0B,EAAMlgB,EAAMuW,GAElCyH,EAAW,IAAI2G,oBAAJ,sBAAoC3kB,GAAQuW,GACvDhO,EAAQ,IAAIkW,UAAOyB,EAAK3X,MAAM,GAAI2X,EAAK3X,MAAM,GAAI2X,EAAK3X,MAAM,IAClEyV,EAASE,aAAe3V,EACxByV,EAASmB,cAAgB5W,EACzBwU,EAAKiB,SAAWA,EAEhBjB,EAAKrT,SAASqO,GAAK,KAEnB,IAAM0kB,EAAYvF,GAChB3gB,EACA2J,EAAK80B,UAAU/tC,KAAI,SAAA2Q,GAAC,OAAIkB,GAAKkB,GAAGpC,GAAGwI,eACnCrD,EACAqC,GAEF,OAAO,IAAI21B,EACTh4B,EACAmD,EAAK80B,UACL90B,EAAKzX,KACLg0B,EACAvc,EAAKlD,iB,GAjDQF,I,IAAbi4B,G,OAqBU,QAiChB,IAAMpf,GAASD,GAAUC,OACnBwB,GAAQ,CACZ,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,GACP,CAAC,EAAG,EAAG,IAGT,SAAS8d,GAAe/0B,EAAMlgB,EAAMuW,GAClC,IAAM2+B,EAAeh1B,EAAK80B,UAAU/tC,KAAI,SAAA2Q,GAAC,OAAIkB,GAAKkB,GAAGpC,GAAGwI,eAClDiX,EAAcve,GAAKkB,GAAGkG,EAAKxW,UAAU0W,YACrC+0B,EAAUD,EAAa,GAAGptB,SAASotB,EAAa,IAAIz6B,YACpD26B,EAAS,IAAI/7B,YAAS87B,EAAQt9B,EAAGs9B,EAAQv9B,EAAG,GAC5C1D,EAAQ,CACZghC,EAAa,GAAG16B,IAAI46B,EAAO58B,MAAM0H,EAAKzX,KAAK+B,QAC3C0qC,EAAa,GAAGptB,SAASstB,EAAO58B,MAAM0H,EAAKzX,KAAK+B,QAChD0qC,EAAa,GAAGptB,SAASstB,EAAO58B,MAAM0H,EAAKzX,KAAK+B,QAChD0qC,EAAa,GAAG16B,IAAI46B,EAAO58B,MAAM0H,EAAKzX,KAAK+B,SAEvCgtB,EAAI,IAAIne,WAAQ,EAAG,EAAG6G,EAAKzX,KAAKgC,QAChC4qC,EAAW,CACf/tB,UAAW,CACTpT,EAAM,GACNA,EAAM,GACNA,EAAM,GACNA,EAAM,GACNA,EAAM,GAAGsG,IAAIgd,GACbtjB,EAAM,GAAGsG,IAAIgd,GACbtjB,EAAM,GAAGsG,IAAIgd,GACbtjB,EAAM,GAAGsG,IAAIgd,IAEfxP,MAAOmP,IAEHpa,EAAO0I,GAAOyE,yBAClBlqB,EACAuW,EACA8+B,EAAS/tB,UACT+tB,EAASrtB,OAGX,OADAjL,EAAKrT,SAAW2tB,EACTta,EAmCT,IAAM2a,GAA8B,SAACtY,EAAU7I,GAC7C,OAAO,YAA2C,IAAxC0d,EAAwC,EAAxCA,iBAAkBH,EAAsB,EAAtBA,gBAC1B1U,EAASiU,gBAAgBY,EAAiBlU,OAAO/f,MAAMsE,SAAQ,SAAAgxC,GAC7D,IAAM/xC,EAAQ0wB,EAAiB1wB,MACzBL,EAAOoyC,EAASpyC,KAChB6Z,EAAO7Z,EAAK6Z,KACdw4B,EAAU,CACZ7rC,SAAUoP,GAAKuE,UAAUN,EAAKrT,UAAU4T,UACxC03B,UAAW9xC,EAAK8xC,UAChBvsC,KAAMvF,EAAKuF,MAEb8sC,EAAQP,UAAUzxC,GAASuV,GAAKuE,UAC9B4W,EAAiBvqB,UACjB4T,UA7CR,SAA4Ci4B,EAASh/B,EAAOwG,EAAM7Z,GAChE,IAAM20B,EAAUpS,GAAOqS,iBACrByd,EAAQP,UAAU/tC,KAAI,SAAA2Q,GAAC,OAAIkB,GAAKkB,GAAGpC,OAErC29B,EAAQ7rC,SAAWmuB,EAAQva,UAC3Bi4B,EAAQP,UAAYO,EAAQP,UAAU/tC,KAAI,SAAA2Q,GAAC,OACzCkB,GAAKkB,GAAGpC,GAAG+C,IAAIkd,GAASva,aAG1B,IAAMya,EAAUkd,GAAeM,EAASx4B,EAAK/c,KAAMuW,GACnDwhB,EAAQruB,SAAWqT,EAAKrT,SACxBquB,EAAQra,mBAAqBX,EAAKW,mBAClCqa,EAAQC,iBAAiBH,EAAQzX,aACjC2X,EAAQ/Z,SAAWjB,EAAKiB,SACxB+Z,EAAQd,WAAala,EAAKka,WAC1Bc,EAAQhY,OAAShD,EAAKgD,OAEtB7c,EAAK6Z,KAAOgb,EACZ70B,EAAK8xC,UAAYO,EAAQP,UAEJ,KAAIj4B,EAAKkb,WACjB3zB,SAAQ,SAAAxE,GACnBid,EAAKxX,YAAYzF,GACjBA,EAAEigB,OAASgY,KAEb70B,EAAK8yB,UAAU1xB,SAAQ,SAAC4zB,EAAGC,GACzBD,EAAExuB,SAAWoP,GAAKkB,GAAGu7B,EAAQP,UAAU7c,IAAI/X,eAG7CrD,EAAK5F,UAkBDkjB,CAAmCkb,EAASh/B,EAAOwG,EAAM7Z,GAErD4wB,GACF1U,EAASqT,mBAAmB1V,EAAK/c,WAMnCk3B,GAA6B,SAAC3gB,EAAOi/B,EAAMH,EAAUj2B,GACzD,IAAM4W,EAAY,GAgBlB,OAfAwf,EAAKlxC,SAAQ,SAAC/C,EAAG9B,GACf,IAAMw1B,EAAWxP,GAAO6S,aACtB/hB,EACA,IAAIkI,UAAO,IAAM,IAAM,KACvBkX,GAHe,UAIZ0f,EAASr1C,KAJG,uBAIgBP,IAC/B,GAEFw1B,EAASlV,OAASs1B,EAClBpgB,EAASvrB,SAAWnI,EACpB0zB,EAAS1xB,MAAQ9D,EACjBw1B,EAASla,UAAY,IAAIwd,cACzBtD,EAASla,UAAUP,IAAIkd,GAA4BtY,EAAU7I,IAC7Dyf,EAAUlyB,KAAKmxB,MAEVe,GCrKMyf,GAXe,CAC5B5vB,UAAWA,GACXT,IAAKA,GACLmP,SAAUA,GACVyE,KAAMA,GACN+b,KD8KaA,GC7Kbjf,UAAWA,GACXwG,cAAeA,GACf2G,UAAWA,ICZPyS,G,2FACet2B,GAA2C,IAAjCu2B,EAAiC,uDAAnB,GAAI51B,EAAe,uDAAN,KACtDzW,QAAQC,IAAI,qBAAsB6V,EAAUu2B,GAC5C,IAAMC,EAAS,GAOf,OANID,EAAY/yC,OAAS,EACvBizC,GAAqBz2B,EAAUu2B,EAAa51B,EAAQ61B,GAEpDE,GAAmB12B,GAErB9V,QAAQC,IAAI,uBACLqsC,I,qCAGax2B,EAAU22B,EAAUh2B,GAAgC,IAAxBiV,EAAwB,wDAClEghB,EAAgBP,GAAsBM,EAAS55B,MACjD65B,GACF52B,EAASI,iBAAiBlb,SAAQ,YAAe,IAAZiS,EAAY,EAAZA,MAC7B4G,EAAW64B,EAAcl2B,OAAOvJ,EAAOw/B,EAAU32B,GAEjDf,OACmB7U,IAAvBusC,EAAS13B,WAAiC03B,EAAS13B,UACrDlB,EAASJ,KAAK20B,WAAWrzB,GACzBe,EAASiU,gBAAgBtT,GAAQzb,SAAQ,SAAAmvC,GACvCt2B,EAASJ,KAAKgD,OAAS0zB,EAASvwC,KAAK6Z,QAEvCqC,EAASY,iBACP7C,EACA4C,EACAiV,EACA3W,GACA,U,KAOV,SAAS43B,GAAQF,GACf,OAAOA,EAAS55B,QAAQw4B,GAG1B,SAASuB,GAAY92B,EAAU22B,EAAUh2B,EAAQ61B,GAC/C,IAAMO,EAAYJ,EAAS55B,KACrBoR,EAAY/P,SAAMC,SAASs4B,EAASxoB,WAAWnP,OAAO23B,EAAS/1C,MAC/Do2C,EAAiBh3B,EAASi3B,qBAE1BC,EAAkB94B,SAAMC,SAAS24B,EAAe7oB,IAAY5P,QAChE,kBAAMy4B,EAAe7oB,EAAUiR,MAAM,KAAK,OAEvC8X,GAOLA,EAAgBzpB,OAAhB,UAAsC,CAAE9M,OAAQA,GAChDu2B,EAAgBzpB,OAAhB,aAAyCkpB,EACzCO,EAAgBzpB,OAAhB,UAAsCU,EACtC+oB,EAAgBzpB,OAAhB,KAAiCkpB,EAAS/1C,KAC1Cs2C,EAAgBzpB,OAAhB,UAAqC,EACrCypB,EAAgBzpB,OAAhB,eACyBrjB,IAAvBusC,EAAS13B,WAAiC03B,EAAS13B,UACrDi4B,EAAgB7lB,OAAOrR,IAbrBw2B,EAAO9xC,KAAK,CACVyyC,MAAO,iBAAF,OAAmBJ,EAAnB,sBAA0C5oB,EAA1C,mBACLipB,SAAU,iBAAF,OAAmBL,EAAnB,YAAgC5oB,KAc9C,SAASsoB,GAAqBz2B,EAAUq3B,GAAuC,IAA5B12B,EAA4B,uDAAnB,KAAM61B,EAAa,uDAAJ,GACzE,GAAKa,EAAL,CACA,IAAMC,EAAgBD,EAAUE,MAAK,SAAC1+B,EAAGC,GACvC,MAAoB,cAAhBD,EAAE/U,KAAKiZ,MACJlE,EAAEjY,KAAOkY,EAAElY,MADuB,EACXiY,EAAEjY,KAAOkY,EAAElY,KAAO,EAAI,KAEtD02C,EAAcpyC,SAAQ,SAAA6E,GAChB8sC,GAAQ9sC,EAAKjG,MACfgzC,GAAY92B,EAAUjW,EAAKjG,KAAM6c,EAAQ61B,GAEzCF,GAAkBkB,eAAex3B,EAAUjW,EAAKjG,KAAM6c,GAEpD5W,EAAKP,SAAShG,OAAS,GACzBizC,GAAqBz2B,EAAUjW,EAAKP,SAAUO,EAAKnJ,KAAM41C,OAK/D,SAASE,GAAmB12B,GAC1BA,EAASI,iBAAiBlb,SAAQ,SAAAuoB,GAChC,IAAMtW,EAAQsW,EAAOtW,MAErB6I,EAASY,iBAAiB6F,GAAU/F,OAAOvJ,GAAQ,MAD/B,MAKTm/B,UC9FTmB,G,+BAAAA,G,iBACmB,SACrBC,GAGG,IAFHC,EAEG,uDAFeC,GAClBC,EACG,uDADYC,GAAgB,oBAE/Bj8B,YAASk8B,cACPzhB,GAAUG,oBACV,gBACAihB,GACA,SAAAxvC,GAAI,OAAI8vC,GAAc9vC,EAAMyvC,EAAiBE,SAKnD,IAAMC,GAAkB,SAAAG,GAAe,OAAI,SAAA/vC,GACzC,KAAM,GAAK,uBAAL,OAA4B+vC,EAA5B,aAAgD/vC,EAAKuiC,SAGvDmN,GAAkB,SAAA1vC,KAElB8vC,GAAgB,SAAC9vC,EAAMyvC,EAAiBE,GACxC3vC,EAAKgwC,QACPP,EAAgBzvC,GAEhB2vC,EAAa3vC,IAGFuvC,M,qkBCNf,SAASU,GAAsBC,EAAOC,EAAOC,GAC3C,GAAIF,EAAM50C,SAAW60C,EAAM70C,OAAQ,CAEjC,IADA,IAAIuW,GAAM,EACD1Z,EAAI,EAAGA,EAAI+3C,EAAM50C,OAAQnD,IAAK,CACrC,IAAMk4C,EAAQH,EAAM/3C,GACdm4C,EAAQH,EAAMh4C,GACpB,IAAIi4C,EAAaC,EAAOC,GAKtB,OAAO,EAJPz+B,EACEA,GACAo+B,GAAsBI,EAAM/uC,SAAUgvC,EAAMhvC,SAAU8uC,GAK5D,OAAOv+B,EAET,OAAO,EAoBT,SAAS0+B,GAAO1uC,GAEd,OADAA,EAAK2uC,UAAW,EACT3uC,EAGT,SAAS4uC,KAAgD,IAArCC,EAAqC,uDAA9B,GAAIllB,EAA0B,uDAAd,SAAA3pB,GAAI,OAAI,GACjD,IAAK6uC,GAAwB,IAAhBA,EAAKp1C,OAAc,MAAO,GACvC,IAAID,EAAS,GAeb,OAdAq1C,EAAK1zC,SAAQ,SAAA2zC,GACX,IAAM9uC,EAAO,MAAK8uC,GAClB,GAAInlB,EAAU3pB,GAAO,CACnB,IAAM2uC,EAAWD,GAAO1uC,GACxB2uC,EAASlvC,SAAWmvC,GAAWD,EAASlvC,SAAUkqB,GAClDnwB,EAAOmB,KAAKg0C,QACP,GAAI3uC,EAAKP,SAAU,CACxB,IAAMA,EAAWmvC,GAAW5uC,EAAKP,SAAUkqB,GACnB,IAApBlqB,EAAShG,SACXuG,EAAKP,SAAWA,EAChBjG,EAAOmB,KAAK+zC,GAAO1uC,SAIlBxG,EAGT,SAASu1C,KAA6C,IAArCF,EAAqC,uDAA9B,GAAIllB,EAA0B,uDAAd,SAAA3pB,GAAI,OAAI,GAC9C,IAAK6uC,GAAwB,IAAhBA,EAAKp1C,OAAc,MAAO,GACvC,IAAID,EAAS,GAMb,OALAq1C,EAAK1zC,SAAQ,SAAA2zC,GACX,IAAM9uC,EAAO,MAAK8uC,GACdnlB,EAAU3pB,IAAOxG,EAAOmB,KAAKqF,GACjCxG,EAASA,EAAOW,OAAO40C,GAAQ/uC,EAAKP,SAAUkqB,OAEzCnwB,E,IA2DMw1C,G,WAhDb,WAAYH,GAAM,aAChBhxC,KAAKgxC,KAAOA,E,6CAMNllB,GACN,OA/GJ,SAASslB,EAAiBJ,EAAMllB,GAC9B,IAAK,IAAIrzB,EAAI,EAAGA,EAAIu4C,EAAKp1C,OAAQnD,IAAK,CACpC,IAAM0J,EAAO6uC,EAAKv4C,GAClB,GAAIqzB,EAAU3pB,GAAO,OAAOqU,SAAM5D,KAAKzQ,GACvC,IAAMkvC,EAASD,EAAiBjvC,EAAKP,SAAUkqB,GAC/C,GAAIulB,EAAOja,SAAU,OAAOia,EAE9B,OAAO76B,SAAM6N,OAwGJ+sB,CAAiBpxC,KAAKgxC,KAAMllB,K,oCAOvBwlB,GACZ,OA7GJ,SAASC,EAAuBP,EAAMllB,EAAW/S,GAI/C,GAHmBi4B,EAChB/wC,KAAI,SAAA2Q,GAAC,OAAIkb,EAAUlb,MACnB1J,QAAO,SAAC3L,EAAGqV,GAAJ,OAAUrV,GAAKqV,KAAG,GACZ,OAAO4F,SAAMC,SAASsC,GACtC,IAAK,IAAItgB,EAAI,EAAGA,EAAIu4C,EAAKp1C,OAAQnD,IAAK,CACpC,IAAM0J,EAAO6uC,EAAKv4C,GACZ44C,EAASE,EAAuBpvC,EAAKP,SAAUkqB,EAAW3pB,GAChE,GAAIkvC,EAAOja,SAAU,OAAOia,EAE9B,OAAO76B,SAAM6N,OAmGJktB,CAAuBvxC,KAAKgxC,KAAMM,EAAgB,Q,6BAGpDN,GAAwC,IAAlCN,EAAkC,uDAAnB,SAACz/B,EAAGC,GAAJ,OAAUD,IAAMC,GAC1C,OAAI8/B,EAAKj/B,cAAgBo/B,EAChBZ,GAAsBvwC,KAAKgxC,KAAMA,EAAKA,KAAMN,GAE9CH,GAAsBvwC,KAAKgxC,KAAMA,EAAMN,K,0BAG5Cc,GACF,OAAO,IAAIL,EAxFf,SAASM,EAAaT,EAAMU,EAASzxC,GAOnC,OANA+wC,EAAK1zC,SAAQ,SAAA2zC,GACX,IAAM9uC,EAAO,MAAK8uC,GACZU,EAAa1xC,EAAIkC,GACvBwvC,EAAW/vC,SAAW6vC,EAAatvC,EAAKP,SAAU,GAAI3B,GACtDyxC,EAAQ50C,KAAK60C,MAERD,EAiFiBD,CAAazxC,KAAKgxC,KAAM,GAAIQ,M,+BAGnB,IAA1B1lB,EAA0B,uDAAd,SAAA3pB,GAAI,OAAI,GACzB,OAAO,IAAIgvC,EAAWJ,GAAW/wC,KAAKgxC,KAAMllB,M,gCAQZ,IAA1BA,EAA0B,uDAAd,SAAA3pB,GAAI,OAAI,GAC1B,OAAO+uC,GAAQlxC,KAAKgxC,KAAMllB,K,8BAGpB7rB,IA9FV,SAAS2xC,IAAgD,IAA/BZ,EAA+B,uDAAxB,GAAI1zC,EAAoB,uDAAV,aAC7C0zC,EAAK1zC,SAAQ,SAAA6E,GACX7E,EAAQ6E,GACRyvC,EAAiBzvC,EAAKP,SAAUtE,MA4FhCs0C,CAAiB5xC,KAAKgxC,KAAM/wC,O,KCrJ1B4xC,G,WACJ,WAAY9tC,EAAO7H,EAAM0F,EAAUkvC,EAAUz5B,GAAW,aACtDrX,KAAK+D,MAAQA,EACb/D,KAAK9D,KAAOA,EACZ8D,KAAK4B,SAAWA,EAChB5B,KAAK8wC,SAAWA,EAChB9wC,KAAKqX,UAAYA,E,kDAGJlV,GAIbA,EAAKjG,KAAKiU,UACVhO,EAAKP,SAAStE,SAAQ,SAAAmrC,GACpBoJ,EAAS1hC,QAAQs4B,Q,6BAQPtmC,GAIZ,MAAO,CACLnJ,KAAMmJ,EAAK4B,MACX7H,KAAMiG,EAAKjG,KAAKsb,SAChB5V,SAAUO,EAAKP,SAAS3B,KAAI,SAAAwoC,GAAK,OAAIoJ,EAASr6B,OAAOixB,S,gCAKvD,OAAO,IAAIqJ,O,KAITA,G,WACJ,aAAc,aACZ9xC,KAAK+xC,OAAS,KACd/xC,KAAKgyC,MAAQ,GACbhyC,KAAKixB,UAAY,GACjBjxB,KAAKiyC,WAAY,EACjBjyC,KAAKkyC,YAAa,E,2CAGdnuC,GAEJ,OADA/D,KAAK+xC,OAAShuC,EACP/D,O,2BAGJ9D,GAEH,OADA8D,KAAKgyC,MAAQ91C,EACN8D,O,+BAGA4B,GAEP,OADA5B,KAAKixB,UAAYrvB,EACV5B,O,+BAGA8wC,GAEP,OADA9wC,KAAKiyC,UAAYnB,EACV9wC,O,gCAGCqX,GAER,OADArX,KAAKkyC,WAAa76B,EACXrX,O,8BAQP,OAJA7G,OAAOuiB,OAAO1b,MAAM1C,SAAQ,SAAA5D,GAC1B,GAAc,OAAVA,EACF,KAAM,wDAAN,OAA8DA,MAE3D,IAAIm4C,GACT7xC,KAAK+xC,OACL/xC,KAAKgyC,MACLhyC,KAAKixB,UACLjxB,KAAKiyC,UACLjyC,KAAKkyC,gB,KAKIL,MClFThjB,GAAsBH,GAAUG,oBA2HvBsjB,G,WAxHb,WAAYrC,GAAW,oDAcL,SAAC92C,EAAMo5C,GACvB,OAAO,IAAIjB,GAAWiB,GAAYC,SAAQ,SAAAzhC,GAAC,OAAI5X,IAAS4X,EAAE7M,YAfrC,+BAkBF,SAACuuC,EAAWF,GAC/B,OAAO,IAAIjB,GAAWiB,GAAYG,eAAc,SAAA3hC,GAAC,OAAI0hC,IAAc1hC,EAAE7M,YAnBhD,wCAsBO,SAAC/K,EAAMo5C,GAAsC,IAA1BI,IAA0B,yDAgBzE,OAfA,EAAKnmB,gBAAgBrzB,EAAMo5C,GAAY90C,SAAQ,SAAA6E,GAE7C0vC,GAAS1hC,QAAQhO,GAEbqwC,GACF,EAAKC,mBAAmBz5C,GAGN,EAAK05C,mBAAmB15C,EAAMo5C,GACtC90C,SAAQ,SAAA+B,GAClBA,EAAWuC,SAAWvC,EAAWuC,SAAS9D,QAAO,SAAA8S,GAAC,OAAIA,EAAE7M,QAAU/K,QAGpEo5C,EAAaA,EAAWt0C,QAAO,SAAA8S,GAAC,OAAIA,EAAE7M,QAAU/K,QAE3Co5C,KAtCc,yCAyCQ,SAACtmB,EAAWsmB,GACzC,OAAO,IAAIjB,GAAWiB,GAAYC,QAAQvmB,MA1CrB,6BA6CJ,SACjBsmB,EACAj8B,GAIG,IAHHq2B,EAGG,uDAHU3tB,GAAUC,KACvBkP,IAEG,yDADH3W,IACG,yDAEH,EAAK4B,4BAA4B9C,EAASnd,KAAMo5C,EAAYpkB,GAE5D,IAAM2kB,EAAWd,GAASxF,UACvBtoC,MAAMoS,EAASnd,MACfkD,KAAKia,GACLkB,UAAUA,GACVmO,QAEH,GAAIgnB,EAAY,CACd,IAAMoG,EAAkB,EAAKvmB,gBAAgBmgB,EAAY4F,GACzDQ,EAAgBt1C,SAAQ,SAAA+B,GAClB2uB,GAAgB,EAAK6kB,mBAAmBF,EAAUtzC,EAAW0E,OACjE1E,EAAWuC,SAAS9E,KAAK61C,WAG3BP,EAAWt1C,KAAK61C,GACZ3kB,GAAgB,EAAK6kB,mBAAmBF,EAAU,MAExD,OAAOP,KAvEc,+BAgFF,SAACp5C,EAAMo5C,GAA+B,IAAnBv6B,EAAmB,uDAAT,KAChDvV,QAAQC,IAAI,sBAAuB,EAAKutC,WACxC,EAAKzjB,gBAAgBrzB,EAAMo5C,GAAY90C,SAAQ,SAAA6E,GAC7C,IAAMqqC,EAAa,EAAKkG,mBAAmB15C,EAAMo5C,GAC9CnyC,KAAI,SAAA2Q,GAAC,OAAIA,EAAE7M,SACX8mC,SACH52B,YAASk8B,cACPthB,GACA,aACA,CAACgjB,GAASr6B,OAAOrV,GAAOqqC,EAAY30B,EAAS,EAAKi4B,YAClD,SAAAxvC,GACEgC,QAAQC,IAAI,4BAA6BjC,EAAKgwC,kBA3F/B,+BAiGF,SAAC7D,EAAUD,GAC9Bv4B,YAASk8B,cACPthB,GACA,cACA,CAACgjB,GAASr6B,OAAOi1B,GAAWD,EAAY,EAAKsD,YAC7C,SAAAxvC,GACEgC,QAAQC,IAAI,yBAA0BjC,EAAKgwC,eAvG1B,+BA4GF,SAAAt3C,GACnBib,YAASk8B,cACPthB,GACA,mBACA,CAAC71B,EAAM,EAAK82C,YACZ,SAAAxvC,GACEgC,QAAQC,IAAI,6BAA8BjC,EAAKgwC,eAjHnDtwC,KAAK8vC,UAAYA,E,kDAGJA,GACb,OAAO,IAAIqC,EAAgBrC,O,KCNzBzE,G,WACJ,aAAc,WACZ,GADY,mCAiBF,kBAAM,EAAKyH,UAjBT,+BAmBO,kBAAM,EAAKC,mBAnBlB,gCAqBP,uBAAA9hC,EAAA,sEACC,EAAK+hC,uBADN,gCAEE,GAFF,4CArBO,4BAoCI,kBAAM,EAAKj/B,UAAUzW,SAAQ,SAAA0vB,GAAG,OAAIA,EAAI,SApC5C,gBA4DP,CACL,SAAA6Y,GAAO,OACL5xB,YAASC,UACP,CACEC,MAAO,QACPC,KAAM,IACN6+B,UAAW,KAEb,EAAKC,qBACL,EAAKC,iBAAgB,qBAAGz5C,QAAmBmsC,KAE/C,SAAAA,GAAO,OACL5xB,YAASC,UACP,CACEC,MAAO,UACPi/B,KAAM,IACNh/B,KAAM,OACNi/B,UAAW,KAEb,EAAKC,eAAc,qBAAGt5C,MAAe,EAAKu5C,iBAC1C,EAAKC,kBACH,qBAAG95C,SACH,kBAAM,EAAK+5C,UAAU,OAAQ5N,QAGnC,SAAAA,GAAO,OACL5xB,YAASC,UACP,CAAEC,MAAO,UAAWi/B,KAAM,IAAKh/B,KAAM,SAAUi/B,UAAW,KAC1D,EAAKK,iBACL,EAAKC,mBACH,qBAAGj6C,SACH,kBAAM,EAAK+5C,UAAU,SAAU5N,UA3FzB,sBA4GF,SAAC+N,EAAO/N,GAClBvjC,QAAQC,IAAI,cAAeqxC,EAAO,EAAKC,4BACjC,EAAKA,yBAA2B,EAAKC,KAAKl4C,OAAS,IACvD,EAAKm4C,UAAUz2C,SAAQ,SAAA8U,GAAC,OAAIA,EAAE,MAC9ByzB,GAAQ,OAhHE,wBA0HA,SAAA1pC,GACZ,EAAK63C,SAAS,EAAKC,OAAO93C,GAAInD,MAC1BmD,KAAM,EAAK83C,eAAe,EAAKA,OAAO93C,MA5H9B,6BA2LK,SAAC+3C,GAAiC,IAArBC,EAAqB,uDAAb,aACtC,OAAO,SAAA7zC,GAAI,OACT,EAAK8zC,eAAeF,EAAY5zC,GAAMhD,SAAQ,SAAA+2C,GAC5Cl7C,OAAOkE,KAAKg3C,GACTv2C,QAAO,SAAAsU,GAAC,OAAIA,EAAE2C,SAAS,YACvBzX,QAAQ,EAAK4pC,QAChBiN,WAjMQ,0BAqME,SAACD,GAAiC,IAArBC,EAAqB,uDAAb,aAC7B9/B,EAAY,CAChBC,IAAK,SAAAhU,GACH,EAAK8zC,eAAeF,EAAY5zC,GAAMhD,SAAQ,SAAA8U,GAC5C,IAAIkiC,EAAWn7C,OAAOkE,KAAK+U,GAAG,GAC9BkiC,EAAWA,EAAS9c,MAAM,KAAK,UACxB,EAAKsb,OAAOwB,UACZ,EAAKvB,gBAAgBuB,MAE9BH,KAEF1/B,IAAK,EAAK++B,iBAAiBU,EAAYC,GACvCjgC,UAAW,EAAKs/B,iBAAiBU,EAAYC,IAE/C,OAAO,SAAA7zC,GACLgC,QAAQC,IAAI,aAAcjC,GAC1B+T,EAAU/T,EAAK2J,OAAO3J,OArNZ,mBAyNL,SAAAukC,GACP,IAAM5kC,EAAM,CACVjH,KAAM6rC,EAAQrN,MAAM,KAAK,GACzBqW,OAAQ,IAAIjJ,GAAUC,GACtB1vB,KAAMw4B,GAAannB,KAErB,EAAK+tB,SAASt0C,EAAIjH,KAAMiH,MA/NZ,2BAkOG,SAACi0C,EAAY5zC,GAAb,OACfspC,GAAOsK,EAAW5zC,IACf2W,QAAQu9B,GAAS,YACjBv9B,QAAQu9B,GAAS,SACjBv9B,QAAQu9B,GAAS,YAtOR,8BA8OM,SAACN,GAAD,IAAaC,EAAb,uDAAqB,aAArB,OAAkC,SAAA7zC,GACpD,EAAKm0C,gBAAgBP,EAAY5zC,GAAMhD,SAAQ,SAAAvE,GAAC,OAC9CI,OAAOkE,KAAKtE,GAAGuE,SAAQ,SAAAnB,GACrB,IAAM4Z,EAAO,CAAE5Z,GAAIA,EAAInD,KAAMD,EAAEoD,GAAIk3C,UAAWl+B,KAAMw4B,GAAalxB,MACjE,EAAK83B,SAASx+B,EAAK/c,KAAM+c,SAG7Bo+B,QArPY,2BAwPG,WACf,IAAM9/B,EAAY,CAChBC,IAAK,SAAAhU,GACH,EAAKm0C,iBAAgB,SAAA17C,GAAC,OAAIA,EAAEiB,MAAKsG,GAAMhD,SAAQ,SAAA8U,GAC7C,IAAIkiC,EAAWn7C,OAAOkE,KAAK+U,GAAG,UACvB,EAAK0gC,OAAOwB,UACZ,EAAKvB,gBAAgBuB,MAE9B,EAAKf,mBAEP9+B,IAAK,EAAKk/B,mBAAkB,SAAA56C,GAAC,OAAIA,EAAEiB,MAAK,EAAKu5C,iBAC7Cr/B,UAAW,EAAKy/B,mBAAkB,SAAA56C,GAAC,OAAIA,EAAEiB,MAAK,EAAKu5C,kBAErD,OAAO,SAAAjzC,GAAI,OAAI+T,EAAU/T,EAAK2J,OAAO3J,OArQzB,4BAwQI,SAAC4zC,EAAY5zC,GAAb,OAChBspC,GAAOsK,EAAW5zC,IACf2W,QAAQu9B,GAAS,YACjBv9B,QAAQu9B,GAAS,WACjBv9B,QAAQu9B,GAAS,YA3QhB1gC,GAAU,OAAOA,GACrBA,GAAW9T,KACXA,KAAK8yC,OAAS,GACd9yC,KAAK+yC,gBAAkB,GACvB/yC,KAAKi0C,OAAS,GACdj0C,KAAK+T,UAAY,GACjB/T,KAAK+zC,UAAY,GACjB/zC,KAAK6zC,yBAA2B,E,kDAkBrBE,GAEX,OADA/zC,KAAK+zC,UAAUj3C,KAAKi3C,GACb/zC,O,kCAGG00C,GAEV,OADA10C,KAAK+T,UAAUjX,KAAK43C,GACb10C,O,+BAKA20C,EAAUC,GACjB,IACE50C,KAAK8yC,OAAO6B,GAAYC,EACxB50C,KAAK+yC,gBAAgB4B,GAAY/G,GAAmBgH,EAAMz/B,MAAMy/B,GAChE,MAAOr5C,GAEP,MADA+G,QAAQC,IAAI,sCAAuChH,GAC7CkC,MAAM,uCAAD,OAAwClC,O,+BAI9Co5C,GACHA,KAAY30C,KAAK8yC,eAAe9yC,KAAK8yC,OAAO6B,GAC5CA,KAAY30C,KAAK+yC,wBAAwB/yC,KAAK+yC,gBAAgB4B,GAClE30C,KAAKuzC,oB,6CA6CgB,WACrB,OAAO,IAAI3N,SAAQ,SAACqF,EAAIC,GACtB,EAAK4I,KAAKx2C,SAAQ,SAAA8U,GAAC,OAAIA,EAAE64B,W,+BA6BpB9uC,GAAiB,WAAbnD,EAAa,uDAAN,KAQlB,GAPMmD,KAAM6D,KAAKi0C,SACfj0C,KAAKi0C,OAAO93C,GAAM,CAChBA,GAAIA,EACJnD,KAAM,OAGV4wC,GAAO5wC,GAAMsE,SAAQ,SAAAtE,GAAI,OAAK,EAAKi7C,OAAO93C,GAAInD,KAAOA,KACjDG,OAAOuiB,OAAO1b,KAAKi0C,OAAO93C,IAAK0/B,OAAM,SAAAjrB,GAAC,OAAU,OAANA,KAAa,CACzD,IAAMikC,EAAa70C,KAAKi0C,OAAO93C,GAC/B6D,KAAKu0C,SAASM,EAAW77C,KAAM,CAC7BA,KAAM67C,EAAW77C,KACjBmD,GAAIA,EACJgZ,KAAMw4B,GAAaxG,MACnBwB,UAAW,CACT3vC,KAAM67C,EAAW77C,KACjB0J,SAAU,CAAEkO,EAAG,EAAGC,EAAG,EAAGE,EAAG,GAC3B6Q,YAAa,CACXlO,EAAG,EACH9C,EAAG,EACHC,EAAG,EACHE,EAAG,GAEL03B,MAAO,S,sCAMCxvC,EAAQ4sC,GAAS,WAC/B,OAAO,SAAAvlC,GACLspC,GAAO3wC,EAAOqH,IACX2W,QAAQu9B,GAAS,UACjBl3C,SAAQ,SAAA/D,GAAC,OACRJ,OAAOkE,KAAK9D,GAAG+D,SAAQ,SAAAnB,GAAE,OAAI,EAAKgwC,SAAShwC,EAAI5C,EAAE4C,GAAI82C,iBAEzD,EAAKQ,UAAU,YAAa5N,M,2CAIX,WACbxxB,EAAY,CAChBC,IAAK,SAAAhU,GAAI,OACPspC,GAAOtpC,EAAKtG,KACTid,QAAQu9B,GAAS,UACjBl3C,SAAQ,SAAA/D,GAAC,OAAIJ,OAAOkE,KAAK9D,GAAG+D,QAAQ,EAAKw3C,iBAC9CrgC,IAAKzU,KAAKmzC,iBAAgB,qBAAGn5C,QAE/B,OAAO,SAAAsG,GACLgC,QAAQC,IAAI,oBAAqBjC,GACjC+T,EAAU/T,EAAK2J,OAAO3J,O,qCAoGxB,OAAO,IAAI+qC,M,KAKXv3B,GAAW,KAGT81B,GAASpzB,SAAMC,SAGf+9B,GAAW,SAAApa,GAAI,OADThoB,EACiBw3B,GADZ,SAAAzyB,GAAC,OAAI,SAAAvG,GAAC,OAAIwB,EAAE+E,EAAEvG,OADnB,SAAAwpB,GAAI,OAAI,SAAA59B,GAAG,OAAIA,EAAI49B,IAEM9gC,CAAI8gC,IAD7B,IAAAhoB,GAGGi5B,MC3SF0J,GAAb,WACE,WAAYC,EAAOC,EAAMC,GAAS,aAChCl1C,KAAKg1C,MAAQA,EACbh1C,KAAKi1C,KAAOA,EACZj1C,KAAA,MAAak1C,EACbl1C,KAAKm1C,eAAiB,KAL1B,4CAQS,WAML,OALAn1C,KAAKm1C,eAAiBxN,uBAAsB,WAC1C,IAAK,EAAI,MAAO,EAAKqN,OAAQ,OAAO,EAAKI,OACzC,EAAKJ,MAAQ,EAAKC,KAAK,EAAKD,OAC5B,EAAKK,UAEAr1C,OAdX,6BAmBI,OADA+nC,qBAAqB/nC,KAAKm1C,gBACnBn1C,QAnBX,iCAuBI,OAAO,IAAIs1C,OAvBf,KA2BMA,G,WACJ,aAAc,aACZt1C,KAAKu1C,OAAS,KACdv1C,KAAKw1C,MAAQ,KACbx1C,KAAKy1C,KAAO,K,kDAGDT,GAEX,OADAh1C,KAAKu1C,OAASP,EACPh1C,O,gCAGCi1C,GAER,OADAj1C,KAAKw1C,MAAQP,EACNj1C,O,4BAGH01C,GAEJ,OADA11C,KAAKy1C,KAAOC,EACL11C,O,8BAOP,GAHqB,CAACA,KAAKu1C,OAAQv1C,KAAKw1C,MAAOx1C,KAAKy1C,MAAM7iC,MACxD,SAAAhC,GAAC,OAAIA,WAEW,KAAM,kCACxB,OAAO,IAAImkC,GAAS/0C,KAAKu1C,OAAQv1C,KAAKw1C,MAAOx1C,KAAKy1C,U,KClDjCE,G,0qBAAAA,G,iBACI,SAAAv9B,GAAQ,OAAI,SAAAtR,GACjCsR,EAASw9B,cAAgBx9B,EACtBuS,8BACAvT,OAAO/E,WAAQsK,QAClBvE,EAASy9B,aAAez9B,EAASw9B,cACjCx9B,EAAS09B,YAAYx4C,SAAQ,YAAwB,IAArByoB,EAAqB,EAArBA,OAAQE,EAAa,EAAbA,QAClB,IAAhBnf,EAAI8iB,SAAiC,IAAhB9iB,EAAI8iB,SAAiB9iB,EAAIklB,UAChDjG,EAAOiE,cAAc/D,U,IARR0vB,G,eAaE,SAAAv9B,GAAQ,OAAI,SAAAtR,GAC/BsR,EAAS09B,YAAYx4C,SAAQ,YAAwB,IAArByoB,EAAqB,EAArBA,OAAQE,EAAa,EAAbA,OACtCF,EAAOC,cAAcC,GAAQ,U,IAfd0vB,G,iBAmBI,SAAAv9B,GAAQ,OAAI,SAAAtR,GACjCsR,EAAS09B,YAAYx4C,SAAQ,YAAmC,IAAhCy4C,EAAgC,EAAhCA,kBAAmBhwB,EAAa,EAAbA,OACjD3N,EAASuS,8BAA8BrtB,SAAQ,SAAA6tB,IA6CrD,SAA6B4qB,EAAmB5qB,GAC9C4qB,EAAkB5tB,KAAlB,aAA+BgD,EAAava,EAAEolC,QAC5C,GADF,gBAES7qB,EAAata,EAAEmlC,QAAQ,IA/C1BC,CAAoBF,EAAmB5qB,GACvC,IAAM+qB,EAAY,WAChB,IAAM9kC,EAAI+Z,EAAarK,SAAS1I,EAASy9B,cACnCM,EAAW13B,GAAO23B,sBAAsBhlC,GAAGI,OAAO,IAiBlE,SAAuBuU,EAAQ3U,GAC7B2jC,GAAS1I,UACNgK,aAAa,CACZtwB,OAAQA,EACRzZ,KAAM,EACNgqC,GAAG,IAAI9O,MAAOC,YAEf8O,WAAU,SAAA/7C,GAAK,IACNurB,EAAiBvrB,EAAjBurB,OAAQzZ,EAAS9R,EAAT8R,KAEVkqC,EAAMplC,EAAEI,MADH,IAIX,OAFAuU,EAAOrjB,SAAWqjB,EAAOrjB,SAAS8Q,IAAIgjC,GACtCzwB,EAAO+gB,UAAU/gB,EAAO9qB,OAAOuY,IAAIgjC,IAC5B,CACLzwB,OAAQA,EACRzZ,KAAMA,EANG,GAOTgqC,GAAG,IAAI9O,MAAOC,cAfpB,OAkBS,SAAAjtC,GAAC,OAAIA,EAAE8R,MAAQ,KACrBkZ,QACA6vB,OArCKoB,CAAc1wB,EAAQowB,GACtB/9B,EAASy9B,aAAe1qB,GAMpBurB,EAJqB,CACzB,CAAE5qB,UAAWhlB,EAAIklB,SAA2B,IAAhBllB,EAAI8iB,QAAeH,OAAQysB,GACvD,CAAEpqB,UAA2B,IAAhBhlB,EAAI8iB,QAAeH,OAAQysB,IAEDp4C,QACvC,qBAAGguB,aAED4qB,EAAc96C,OAAS,GAAG86C,EAAc,GAAGjtB,mB,ICfjDktB,G,kCACJ,WAAYv1C,GAAO,0BACjB,cAAMA,GADW,8BAcF,kBAAM,EAAK00C,eAdT,kCAgBE,kBAAMzK,GAAc/1B,cAAc+5B,wBAhBpC,2BAkBL,WAAiC,IAAhC2B,EAAgC,4DAArB,EAAKoB,YAC7B,OAAOpB,EAAKlzC,QAAO,SAAA8S,GAAC,OAAIA,EAAE7M,QAAU8a,GAAUC,QAAM,MAnBnC,6BAsBH,kBAAM,EAAKszB,cAtBR,iCAwBC,eAxBD,+BAwCD,SAACp5C,GAA4C,IAAtCo5C,EAAsC,4DAArB,EAAKA,YAC7C,OAAOD,GAAgByE,QAAQ,EAAK9G,WAAWzjB,gBAC7CrzB,EACAo5C,MA3Ce,2CA+CW,WAC5B,MAAM,IAAI30C,MAAM,sCAhDC,kCAmDE,SAACzE,GAAyB,IAAnB6e,EAAmB,uDAAT,KAChC,EAAKzW,MAAMy1C,YAAY1N,QAAUnwC,GAAM,EAAK89C,oBAChD3E,GAAgByE,QAAQ,EAAK9G,WAAWrkB,mBACtCzyB,EADF,KAEM,EAAKo5C,YACTv6B,MAxDe,gCA4DA,SACjB1B,GAIG,IAHHq2B,EAGG,uDAHU3tB,GAAUC,KACvBkP,IAEG,yDADH3W,IACG,yDACG0/B,EAAgB5E,GAAgByE,QACpC,EAAK9G,WACL92B,iBAFoB,KAGhB,EAAKo5B,YACTj8B,EACAq2B,EACAxe,EACA3W,GAEF,EAAK+6B,WAAa2E,KA3ED,iCA8EC,WAClB,EAAKjB,YAAYx4C,SAAQ,YAAgB,IAAbyoB,EAAa,EAAbA,OACpB8wB,EAAc,EAAKz1C,MAAMy1C,YAAY1N,MAC3C,EAAK9c,gBAAgBwqB,GAAarW,MAChC,WACEl+B,QAAQC,IACN,aACA,EAAKmW,cAAcxc,KAAK6Z,KAAKihC,mBAE/BjxB,EAAO+gB,UACL,EAAKpuB,cAAcxc,KAAK6Z,KAAKihC,kBAAkBpM,YAGnD,SAAAh6B,GACEtO,QAAQC,IAAI,2BAA4BqO,EAAE1U,KAAK6Z,MAC/CgQ,EAAO+gB,UAAUl2B,EAAE1U,KAAK6Z,KAAKihC,kBAAkBpM,kBA7FpC,6BAoHH,SAAA9jC,GACd6uC,GAAmBsB,cAAnB,QAAAtB,CAAuC7uC,MArHtB,2BAwHL,SAAAA,GACZ6uC,GAAmBuB,YAAnB,QAAAvB,CAAqC7uC,MAzHpB,6BA4HH,SAAAA,GACd6uC,GAAmBwB,cAAnB,QAAAxB,CAAuC7uC,MA7HtB,wBA8IR,SAAC4M,EAAG8c,GACH,IAAN9c,GAAiB,IAAN8c,GACf,EAAKhY,iBAAiBlb,SAAQ,YAA2B,IAAxBy4C,EAAwB,EAAxBA,kBAC/BA,EAAkBpxC,MAAQ+O,EAAI,EAAIA,EAAI,GACtCqiC,EAAkBlxC,KAAO2rB,EAAI,EAAIA,EAAI,SAlJtB,uCA4JO,WAA6B,IAA5B4mB,EAA4B,uDAAb,aACxCvH,GAAiBwH,cAAc,EAAKvH,WAAW,SAAAxvC,GAC7C,IAAMg3C,EAAY5I,GAAkB6I,YAAlB,QAAoCj3C,EAAK3E,QAC3D,EAAK67C,SAAS,CAAEF,cAChBF,UAhKe,yCAoKN,uBAAAnmC,EAAA,sEACLo6B,GAAc/1B,cAAcgxB,OADvB,4CApKM,wCAwKP,uBAAAr1B,EAAA,sEACJ,EAAKwmC,aADD,OAEV,EAAKC,wBAAwB,EAAKC,aAFxB,4CAxKO,2BA6KL,WACZ,EAAKn/B,iBAAiBlb,SAAQ,gBAAGoS,EAAH,EAAGA,OAAQH,EAAX,EAAWA,MAAX,OAC5BG,EAAOO,eAAc,kBAAMV,EAAMW,eAEnC,EAAK4mC,uBAjLY,4BAoLJ,SAAAvnC,GACb,IAAMG,EAASH,EAAMkB,YACfwV,EAASvW,EAAOkoC,qBACtB,EAAKC,wBAAwB5xB,GAC7B,IAAM8vB,EAAoBtvB,GAAaqxB,wBAAwBvoC,GAe/D,OAdA,EAAKumC,YAAct/B,SAAM5D,KAAK,CAC5BlD,OAAQA,EACRuW,OAAQA,EACR1W,MAAOA,EACPwW,OAAQU,GAAasxB,aAAaxoC,EAAO0W,GACzCjK,MAAOyK,GAAauxB,YAAYzoC,GAChC+N,OAAQmJ,GAAaugB,iBAAiBz3B,GACtCsL,aAAc4L,GAAawxB,YAAY1oC,GACvC2oC,eAAgB,CACdC,GAAI,IAAIC,kBAAe,MAAO7oC,GAC9B8oC,aAAc,IAEhBtC,kBAAmBA,IAEdxmC,KAvMU,2BAgNL,eAhNK,kCAoNE,SAAA+oC,GACK,CACtB,CACEC,QAAS,SAAA3nC,GAAC,OAAIA,EAAEk/B,UAAU3G,OAC1B1f,OAAQ,kBAAO,EAAKqmB,UAAY,EAAK1uC,MAAM0uC,UAAU3G,QAEvD,CACEoP,QAAS,SAAA3nC,GAAC,OAAIA,EAAEimC,YAAY1N,OAC5B1f,OAAQ,EAAKqtB,oBAGDx5C,SAAQ,YAAyB,IAAtBi7C,EAAsB,EAAtBA,QAAS9uB,EAAa,EAAbA,OAC9B8uB,EAAQ,EAAKn3C,SAAWm3C,EAAQD,IAClC7uB,UAjOa,iCAsOC,WAClBnnB,QAAQC,IAAI,4BACZ,EAAKi2C,eAtOL,EAAKxD,MAAQ,CAAEsC,UAAW,IAC1B,EAAKxH,UAAY1uC,EAAM0uC,UAAU3G,MACjC,EAAK2M,YAAct/B,SAAM6N,OACzB,EAAK+tB,WAAa,GALD,E,gDA6BjB,OAAO,IAAIjB,GAAWnxC,KAAKoyC,YAAYC,SACrC,SAAAzhC,GAAC,OAAIqrB,GAAUhmB,OAASrF,EAAE1U,KAAKka,e,8CAqEX6P,GAAQ,WACf,CACb,CACEjtB,KAAM,cACNuV,SAAU,SAAAzH,GAAG,OAAI,EAAKmwC,cAAcnwC,KAEtC,CAAE9N,KAAM,YAAauV,SAAU,SAAAzH,GAAG,OAAI,EAAKowC,YAAYpwC,KACvD,CACE9N,KAAM,cACNuV,SAAU,SAAAzH,GAAG,OAAI,EAAKqwC,cAAcrwC,MAGjCxJ,SAAQ,SAAA2M,GAAK,OAClBgc,EAAOwyB,iBAAiBxuC,EAAMjR,KAAMiR,EAAK,UAAW,Q,oDAgB1B,WAC5B,OAAOjK,KAAK81C,YAAY7+B,SAAQ,YAAuB,IAApB1H,EAAoB,EAApBA,MAAO+N,EAAa,EAAbA,OAExC,OADqBmB,GAAOwL,kBAAkB1a,EAAO+N,GACjCrG,SAAQ,SAAArH,GAAO,OACjC4G,SAAMC,SAAS,EAAKiC,eAAezY,KAAI,SAAA2mC,GAAQ,OAC7CnoB,GAAOkB,gCACLinB,EAAS1qC,KAAK6Z,KACdjE,GAAKuE,UAAUzG,IACfwJ,uB,+BAmGD,WACCk+B,EAAct3C,KAAKg1C,MAAnBsC,UACFoB,EAAiB,kBAAM,EAAKlB,SAAS,CAAEF,UAAW,MACxD,OACE,yBAAKr6C,MAAO,CAAE2F,QAAS,OAAQgB,SAAU,IACvC,kBAAC,GAAD,CACEsL,aAAclP,KAAKkP,aACnBD,WAAW,EACXE,aAAcsX,GAAakyB,cAE7B,kBAAC,EAAD,CACE31C,SAAU01C,EACVx1C,SAAUw1C,EACVt1C,MAAMk0C,aAAA,EAAAA,EAAW17C,QAAS,EAC1BmI,MAAO,eACPQ,QAAS,4CACTF,WAAY,KACZD,YAAa,UACbD,WAAY,SACZD,YAAa,aA0CvB,SAA8BozC,GAC5B,OAAQA,EAGN,4BACGA,EAAUr3C,KAAI,WAAsBxH,GAAM,IAAzB82C,EAAyB,EAAzBA,MAAOC,EAAkB,EAAlBA,SACvB,OAAO,wBAAIx1C,IAAK,QAAUvB,GAAnB,UAA0B82C,EAA1B,aAAoCC,QAJ/C,GA1COoJ,CAAqBtB,IAExB,kBAAC,KAAD,CACEjnC,aAAW,EACXC,cAAY,EACZC,SAAUvQ,KAAKuQ,e,2CAYIu/B,GACzB,OAAO,SAAA+I,GACL,IAAMC,E,mWAAe,EACnBhJ,aACG+I,GAEL,OAAO,kBAAClC,EAAgBmC,Q,GAxRJ/rC,a,IAApB4pC,G,YA4Re,OAGrBA,GAAY90C,UAAY,CACtBiuC,UAAWhuC,IAAUoL,MAAM,CAAEi8B,MAAOrnC,IAAUE,SAC9C60C,YAAa/0C,IAAUoL,MAAM,CAAEi8B,MAAOrnC,IAAUE,UAGlD20C,GAAYt0C,aAAe,CACzBytC,UAAW,CAAE3G,MAAO,SACpB0N,YAAa,CAAE1N,MAAO,KAeTwN,U,4DCtUTlxC,GAAYC,sBAAW,SAAAC,GAAK,MAAK,CACrCozC,YAAa,CACXt2C,OAAQkD,EAAM4H,QAAQ,GACtB7J,SAAU,SAIRs1C,GAAS,SAAA53C,GACb,IAAMgF,EAAUX,KAEZwzC,EAAa,8BASjB,OARI73C,EAAM63C,aACRA,EACE,kBAAC,IAAD,CAAUv/C,MAAM,IACd,sCAMJ,kBAAC,KAAD,CACE8H,QAASJ,EAAMI,QACfH,UAAW+E,EAAQ2yC,YACnB97C,MAAOmE,EAAMnE,MACbi8C,iBAA6B12C,IAAhBpB,EAAMmJ,OAEnB,kBAAC,KAAD,CAAYpO,GAAG,sBAAsBiF,EAAMmJ,OAC3C,kBAAC,KAAD,CACE4uC,QAAQ,qBACRh9C,GAAIiF,EAAMjF,GACVzC,MAAO0H,EAAM1H,MACbsQ,SAAU5I,EAAM4I,SAChB6C,WAAYzL,EAAMyL,YAEjBosC,EACA73C,EAAMrF,QAAQkE,KAAI,SAACiC,EAAS3F,GAC3B,OACE,kBAAC,IAAD,CAAUvC,IAAKuC,EAAO7C,MAAOwI,GAC1BA,SASf82C,GAAOn3C,UAAY,CACjBnI,MAAOoI,IAAUE,OACjBjG,QAAS+F,IAAU0E,MACnByyC,WAAYn3C,IAAUM,KACtBmI,MAAOzI,IAAUE,OACjBR,QAASM,IAAUE,OACnB/E,MAAO6E,IAAU3H,OACjB6P,SAAUlI,IAAUC,KACpB5F,GAAI2F,IAAUE,OACd6K,WAAY/K,IAAU3H,QAExB6+C,GAAO32C,aAAe,CACpB3I,MAAO,UACPqC,QAAS,CAAC,UAAW,UAAW,WAChCyF,QAAS,SACTy3C,YAAY,EACZjvC,SAAU,SAAAlD,GAAG,OAAIxE,QAAQC,IAAIuE,EAAI7L,OAAOvB,QACxCyC,GAAI,sBAGS68C,U,0DCHAI,GAtBO,SAAC,GAAD,QACpBx1B,YADoB,MACb,GADa,MAEpB3mB,aAFoB,MAEZ,GAFY,MAGpBitC,YAHoB,MAGb,OAHa,MAIpB1mC,aAJoB,MAIZ,OAJY,MAKpBC,cALoB,MAKX,OALW,MAMpBpC,iBANoB,MAMR,GANQ,MAOpBg4C,eAPoB,MAOV,YAPU,SASpB,yBACE71C,MAAOA,EACPvG,MAAOA,EACPwG,OAAQA,EACR41C,QAASA,EACTC,MAAM,6BACNj4C,UAAS,mBAAcA,GAAa,IACpCk4C,WAAW,gCAEX,0BAAMrP,KAAMA,EAAMnxC,EAAG6qB,MCjEZ41B,GAAW,CACtBC,MACE,kBAAC,GAAD,CACEj2C,MAAO,GACPogB,KAAK,0GAGT81B,aACE,kBAAC,GAAD,CACEl2C,MAAO,GACPogB,KAAK,4KAGT+1B,aACE,kBAAC,GAAD,CACEn2C,MAAO,GACPogB,KAAK,8MAGTg2B,sBACE,kBAAC,GAAD,CACEp2C,MAAO,GACPogB,KAAK,qFAGTi2B,gBACE,kBAAC,GAAD,CACEr2C,MAAO,GACPogB,KAAK,+OCoCLk2B,GAAqB,CACzBxJ,QAASkJ,GAASK,gBAClBE,QAASP,GAASI,sBAClB/W,MAAO2W,GAASE,aAChBniC,KAAMiiC,GAASG,cAGXK,GAAQ,SAAA54C,GAAS,IAEnBqoB,EAcEroB,EAdFqoB,OACA7nB,EAaER,EAbFQ,SACAwE,EAYEhF,EAZFgF,QACA/E,EAWED,EAXFC,UALmB,EAgBjBD,EAVF64C,iBANmB,MAMP,QANO,EAOnB14C,EASEH,EATFG,MACAirB,EAQEprB,EARForB,KARmB,EAgBjBprB,EAPF84C,mBATmB,MASLJ,GATK,EAUnBz2C,EAMEjC,EANFiC,QAVmB,GAgBjBjC,EALFoI,KAKEpI,EAJF+4C,iBAZmB,MAYR,UAZQ,IAgBjB/4C,EAHFI,eAbmB,MAaT,WAbS,EAehB8H,GACDlI,EAFFuE,MAdmB,KAgBjBvE,EAhBiB,qIAoBrB,OAFAkB,QAAQC,IAAI,SAAUknB,GAGpB,2BACEpoB,UAAW+4C,KACTh0C,EAAQrO,KACRqO,EAAQ,GAAD,OAAI5E,GAAJ,OAAcoU,sBAAWrU,GAAS44C,KACzC94C,IAEEiI,IAEM,IAATkjB,EACC,uBAAKnrB,UAAW+E,EAAQomB,MACrBA,GAAQ0tB,EAAYC,IAAaL,GAAmBK,IAErD,KACJ,uBAAK94C,UAAW+E,EAAQ7B,SAAU3C,GACvB,MAAV6nB,EAAiB,uBAAKpoB,UAAW+E,EAAQqjB,QAASA,GAAgB,KACxD,MAAVA,GAAkBpmB,EACjB,uBAAKhC,UAAW+E,EAAQqjB,QACtB,gBAAC,KAAD,CACEhoB,KAAK,QACL4M,aAAY4rC,EACZl2C,MAAOk2C,EACP14C,MAAM,UACND,QAAS+B,GAERm2C,GAASC,QAGZ,OAKVO,GAAMn4C,UAAY,CAQhB4nB,OAAQ3nB,IAAUK,KAIlBP,SAAUE,IAAUK,KAKpBiE,QAAStE,IAAU3H,OAInBkH,UAAWS,IAAUE,OAMrBi4C,UAAWn4C,IAAUE,OAIrBT,MAAOO,IAAUu4C,MAAM,CAAC,QAAS,OAAQ,UAAW,YAKpD7tB,KAAM1qB,IAAUK,KAOhB+3C,YAAap4C,IAAUoL,MAAM,CAC3B21B,MAAO/gC,IAAUK,KACjBoV,KAAMzV,IAAUK,KAChBmuC,QAASxuC,IAAUK,KACnB43C,QAASj4C,IAAUK,OAQrBkB,QAASvB,IAAUC,KAInByH,KAAM1H,IAAUE,OAIhBm4C,SAAUr4C,IAAUu4C,MAAM,CAAC,QAAS,OAAQ,UAAW,YAIvD74C,QAASM,IAAUu4C,MAAM,CAAC,SAAU,WAAY,cAGnCrtC,6BA7LO,WACpB,MAAO,CAELjV,KAAM,CAEJ8N,gBAAiB,cACjBjD,QAAS,OACTiB,QAAS,YAGXy2C,cAAe,CACb/4C,MAAO,OAEPsE,gBAAiB,WAGnB00C,WAAY,CACVh5C,MAAO,OAEPsE,gBAAiB,WAGnB20C,cAAe,CACbj5C,MAAO,OAEPsE,gBAAiB,WAGnB40C,YAAa,CACXl5C,MAAO,OAEPsE,gBAAiB,WAGnB2mB,KAAM,CACJxhB,YAAa,GACbnH,QAAS,QACTjB,QAAS,OACTkI,SAAU,GACV4vC,QAAS,IAGXn2C,QAAS,CACPV,QAAS,QACTjB,QAAS,OACTC,cAAe,SACfU,eAAgB,UAGlBkmB,OAAQ,CACN7mB,QAAS,OACTU,WAAY,SACZyH,WAAY,OACZ/G,YAAa,GACbgH,aAAc,MAuIc,CAAEhS,KAAM,YAA3BgU,CAAyCgtC,I,sbCzLlDW,G,4MAgBQ,M,iCAeQ,SAAAt1C,GACdA,EAAO/D,SAAS+D,EAAO/D,UAC3B,EAAKs5C,W,kCAGc,SAAAr/C,GAAK,MACwB,EAAK6F,MAA7Cy5C,EADgB,EAChBA,oBAAqBC,EADL,EACKA,eACvBC,EAAiBx/C,EAAEN,SAAW,EAAK+/C,QAErCH,GAAuBE,IACzBD,IACA,EAAKF,Y,qBAID,WACNK,KACAC,Q,6BAGc,SAAAjxC,GAAS,MACqB,EAAK7I,MAAzC+5C,EADe,EACfA,cAAeC,EADA,EACAA,iBACjBC,EAAoC,KAAlBpxC,EAAMqxC,QAE1BH,GAAiBE,IACnBD,EAAiBnxC,GACjB,EAAK2wC,Y,iCAIW,WAClB//C,SAAS49C,iBAAiB,UAAW,EAAK8C,eAAe,GACzD,EAAKC,UAAYpvC,YAAW,YAExBvR,SAAS4gD,eAAe,wBACxB5gD,SAAS4gD,eAAe,sCAExB,EAAKb,UAEN,EAAKx5C,MAAMs6C,qB,oCAGO,WACrB7gD,SAAS8gD,oBAAoB,UAAW,EAAKJ,eAAe,GAC5DpvC,aAAa,EAAKqvC,WAClB,EAAKp6C,MAAMw6C,iB,8BAGI,WAAM,MACgB,EAAKx6C,MAAlC2C,EADa,EACbA,MAAOQ,EADM,EACNA,QAOf,OAAOs3C,EARc,EACGA,UACH,CACnB93C,QACAQ,UACAlB,QAAS,EAAKu3C,W,gDAMT,aAQH56C,KAAKoB,MANPmD,EAFK,EAELA,QACAs3C,EAHK,EAGLA,SACA1B,EAJK,EAILA,SACAF,EALK,EAKLA,UACA6B,EANK,EAMLA,SACAn2C,EAPK,EAOLA,MAGF,OACE,yBACEtE,UAAU,8BACViG,IAAK,SAAAy0C,GAAG,OAAK,EAAKf,QAAUe,GAC5Bz6C,QAAStB,KAAKg8C,oBAEd,yBAAK36C,UAAU,uBACZw6C,EACC77C,KAAKi8C,iBAEL,yBAAK56C,UAAU,4BACb,kBAAC,GAAD,CACEsE,MAAOA,EACPu2C,UAAW,EACX16C,QAAQ,SACR24C,SAAUA,EACVF,UAAWA,EACXxwB,OACEqyB,EACE,yBACEz6C,UAAU,iBACVC,QAAS,kBAAM,EAAKs5C,UAEnBpB,GAASC,YAGZj3C,GAIH+B,U,GAlIewI,aA2JhC,SAASmuC,KACP,IAAMjgD,EAASJ,SAAS4gD,eAAe,uBACvCU,kCAAuBlhD,GACvBA,EAAOoE,WAAWd,YAAYtD,GAOhC,SAASggD,KACPpgD,SAASuhD,KAAKC,UAAUp+C,OAAO,oCAG1B,SAASq+C,GAAS1kC,EAAYjS,GAPnC9K,SAASuhD,KAAKC,UAAU7oC,IAAI,oCAtB9B,SAAgCoE,EAAYjS,GAC1C,IAAI42C,EAAY1hD,SAAS4gD,eAAe,uBACpCc,IAKF1hD,SAASuhD,KAAKx6C,SAAS,GAAGy6C,UAAU7oC,IAAI,6BACxC+oC,EAAY1hD,SAASqC,cAAc,QACzBf,GAAK,sBACftB,SAASuhD,KAAK1+C,YAAY6+C,IAN1BrsC,kBAAO,kBAAC,GAAD,OAAuB0H,EAAvB,CAAmCjS,MAAOA,KAAW42C,GA2B9DC,CAAuB5kC,EAAYjS,G,IA3K/Bg1C,G,YACe,CACjBp2C,QAASzC,IAAUE,OACnB65C,SAAU/5C,IAAUC,KACpB84C,oBAAqB/4C,IAAUM,KAC/B+4C,cAAer5C,IAAUM,KACzBw5C,YAAa95C,IAAUC,KACvB+4C,eAAgBh5C,IAAUC,KAC1Bq5C,iBAAkBt5C,IAAUC,KAE5Bo4C,SAAUr4C,IAAUE,OACpBi4C,UAAWn4C,IAAUE,OACrB05C,iBAAkB55C,IAAU4I,OAC5BoxC,SAAUh6C,IAAUM,O,IAblBu4C,G,eAkBkB,CACpBE,qBAAqB,EACrBM,eAAe,EACfS,YAAa,kBAAM,MACnBd,eAAgB,kBAAM,MACtBM,iBAAkB,kBAAM,MAExBjB,SAAU,OACVF,UAAW,QACXyB,iBAAkB,IAClBI,UAAU,I,wlBCnCd,IAAMW,GAAe,SAAAC,GAAU,gBAC1BA,GAD0B,IAE7BC,WAAY,CACV/xC,WAAY,SACZgyC,GAAI,CACFhyC,WAAY,UAEdiyC,GAAI,CACFjyC,WAAY,UAEdkyC,GAAI,CACFlyC,WAAY,UAEdmyC,GAAI,CACFnyC,WAAY,UAEdoyC,GAAI,CACFpyC,WAAY,UAEdqyC,GAAI,CACFryC,WAAY,UAEdsyC,MAAO,CACLtyC,WAAY,WAGhBuyC,cAAe,CACbnvC,OAAQ,cAINovC,GAAS,CACbC,KAAMC,yBACJb,GAAa,CACXlyC,MAAO,OACP1E,gBACE,0DACF03C,iBAAkB,CAAEC,WAAY,WAChCC,YAAa,CACXC,YAAa,UACbC,aAAc,UACdC,eAAgB,WAElBxwC,QAAS,CACP+H,KAAM,OACN0oC,QAAS,CACPC,KAAM,WAERC,UAAW,CACTD,KAAM,WAER1yC,MAAO,CACL0yC,KAAM,YAGVE,UAAW,CACTC,UAAW,CACTC,SAAU,CACRz7C,OAAQ,OAEV0lB,KAAM,CACJ1lB,OAAQ,OAEV07C,UAAW,CACT17C,OAAQ,OAEV27C,iBAAkB,CAChB78C,MAAO,UACPkB,OAAQ,OAEV47C,mBAAoB,CAClB98C,MAAO,UACPkB,OAAQ,QAGZ67C,eAAgB,CACdvmD,KAAM,CACJ0K,OAAQ,KAEV87C,wBAAyB,CACvB97C,OAAQ,KAEV+7C,gBAAiB,CACf/7C,OAAQ,KAEVg8C,YAAa,CACXh8C,OAAQ,MAGZi8C,cAAe,CACb3mD,KAAM,CACJwJ,MAAO,YAGXo9C,YAAa,CACXt5C,OAAQ,CACN,UAAW,CACTQ,gBAAiB,4BAIvB+4C,oBAAqB,CACnBr0C,MAAO,CACLhJ,MAAO,0BAGXs9C,aAAc,CACZlyC,MAAO,CACLmyC,KAAM,WAGVC,eAAgB,CACdhnD,KAAM,CACJinD,OAAQ,OAEVC,UAAW,CACT,YAAa,CACXhyC,aAAc,aAO1B+O,MAAOshC,yBACLb,GAAa,CACXqC,KAAM,CACJI,OAAQ,CACNt0C,WAAY,UAEdu0C,OAAQ,CACNv0C,WAAY,UAEdw0C,MAAO,CACLx0C,WAAY,SAEdy0C,SAAU,CACRz0C,WAAY,cAGhBL,MAAO,QACP1E,gBACE,4DACF03C,iBAAkB,CAAEC,WAAY,WAChCC,YAAa,CACXC,YAAa,UACbC,aAAc,UACdC,eAAgB,WAElBxwC,QAAS,CACPywC,QAAS,CACPC,KAAM,WAERC,UAAW,CACTD,KAAM,WAER1yC,MAAO,CACL0yC,KAAM,YAGVE,UAAW,CACTC,UAAW,CACTC,SAAU,CACRz7C,OAAQ,OAEV0lB,KAAM,CACJ1lB,OAAQ,OAEV07C,UAAW,CACT17C,OAAQ,OAEV27C,iBAAkB,CAChB78C,MAAO,QACPkB,OAAQ,OAEV47C,mBAAoB,CAClB98C,MAAO,QACPkB,OAAQ,QAGZ67C,eAAgB,CACdvmD,KAAM,CACJ0K,OAAQ,KAEV87C,wBAAyB,CACvB97C,OAAQ,KAEV+7C,gBAAiB,CACf/7C,OAAQ,KAEVg8C,YAAa,CACXh8C,OAAQ,MAGZi8C,cAAe,CACb3mD,KAAM,CACJwJ,MAAO,YAGXo9C,YAAa,CACXt5C,OAAQ,CACN,UAAW,CACTQ,gBAAiB,2BAIvB+4C,oBAAqB,CACnBr0C,MAAO,CACLhJ,MAAO,oBAGXs9C,aAAc,CACZlyC,MAAO,CACLmyC,KAAM,WAGVC,eAAgB,CACdhnD,KAAM,CACJinD,OAAQ,OAEVC,UAAW,CACT,YAAa,CACXhyC,aAAc,aAS5BmwC,SAAkB,WAChB,IAAMz3C,EAAQtN,OAAOinD,aAAaC,QAAQ,eAC1C,OAAO55C,GAAgB,QAGzBy3C,SAAkB,SAAA1jD,GAChBrB,OAAOinD,aAAaE,QAAQ,cAAe9lD,KAG9B0jD,M,gGClPf,IACeqC,GADDC,6BAAH,KAAuBC,U,6dCKlC,IAoCMC,GAAa5yC,sBAAW,SAAArH,GAAK,MAAK,CACtCk6C,MAAO,CAEL5yC,aAAc,MACdzJ,MAAO,QACPC,OAAQ,QACRq8C,UAAW,sCANI9yC,EAQf,SAAA5L,GAAK,OACP,kBAAC,IAAD,KACE86C,UAAW,EACX6D,mBAAoB,KACpBC,aAAc,CACZC,SAAU,SACVC,WAAY,UAEdC,gBAAiB,CACfF,SAAU,MACVC,WAAY,UAEdE,WAAW,GACPh/C,OAIFi/C,G,wMACI,CAAE35C,SAAU,KAAM45C,aAAc,K,2BAE1B,SAAAr2C,GACZ,EAAKutC,SAAS,CAAE9wC,SAAUuD,EAAMlD,mB,2BAGpB,WACZ,EAAKywC,SAAS,CACZ9wC,SAAU,KACV45C,aAAc,Q,gDAIT,MACgBtgD,KAAKoB,MAApBgF,EADD,EACCA,QADD,EACUzM,EACjB,OACE,kBAAC,IAAM4mD,SAAP,KACE,kBAAC,KAAD,CACE9+C,KAAK,QACLH,QAAStB,KAAKwgD,YACdn/C,UAAWrB,KAAKoB,MAAMq/C,SAAWr6C,EAAQs6C,WAAat6C,EAAQomB,MAE7DxsB,KAAKoB,MAAMorB,MAEd,kBAACozB,GAAD,CACEzjD,GAAG,kBACHuK,SAAU1G,KAAKg1C,MAAMtuC,SACrBtD,KAAMxI,QAAQoF,KAAKg1C,MAAMtuC,UACzBrD,QAASrD,KAAK4G,YACdvF,UAAW+E,EAAQ3C,QAEnB,yBACExG,MAAO,CACL2F,QAAS,OACTC,cAAe,SACfY,OAAQ,2BAGV,kBAAC,aAAD,CACE8F,UAAU,MACVtM,MAAO,CACL4G,QAAS,qBACTjB,QAAS,OACTC,cAAe,QAGjB,kBAAC,aAAD,CACE0G,UAAU,MACVtM,MAAO,CACL6N,SAAU,OACVF,WAAY,SACZ9G,WAAY,MAGb9D,KAAKoB,MAAM2C,OAEd,kBAAC,aAAD,CACEwF,UAAU,MACVtM,MAAO,CACL2G,SAAU,KAGd,kBAAC,aAAD,CACE2F,UAAU,MACVjI,QAAStB,KAAK4G,YACdvF,UAAW+E,EAAQomB,MAEnB,uBAAGnrB,UAAU,mBAGjB,yBACEpE,MAAO,CACL2G,SAAU,EACVhB,QAAS,OACTC,cAAe,SACfJ,OAAQ,sBAGTzC,KAAKoB,MAAMQ,iB,GA/EDmL,aAwFzBszC,GAAWx+C,UAAY,CACrB4+C,SAAU3+C,IAAUM,KACpB2B,MAAOjC,IAAUE,QAGnBq+C,GAAWh+C,aAAe,CACxBo+C,UAAU,EACV18C,MAAO,WAGMiJ,6BA/JA,SAAArH,GAAK,MAAK,CACvBN,OAAQ,CACN5C,OAAQkD,EAAM4H,QAAQ,GACtBhM,MAAOoE,EAAMyH,QAAQywC,QAAQC,KAC7BJ,YAAa/3C,EAAMyH,QAAQywC,QAAQC,MAErC4C,WAAY,CACVn/C,MAAOoE,EAAMyH,QAAQywC,QAAQC,KAC7BJ,YAAa/3C,EAAMyH,QAAQywC,QAAQC,KACnCj4C,gBAAiBsH,gBAAKxH,EAAMyH,QAAQywC,QAAQC,KAAM,KAEpD6C,mBAAoB,CAClBnD,WAAY73C,EAAMyH,QAAQywC,QAAQC,KAClClzC,WAAY,SACZC,UAAW,SACX/G,WAAY,OACZgH,SAAU,OACVvJ,MAAO,UACPkB,OAAQ,qBACR,UAAW,CAAE+6C,WAAY73C,EAAMyH,QAAQywC,QAAQR,OAEjD7wB,KAAM,CAKJ,UAAW,CAAExe,OAAQ,YAEvBvK,OAAQ,CAAEA,OAAQ,QAClBm9C,SAAU,CAAE71C,WAAY,QACxB81C,UAAW,CACTr9C,MAAO,OACPf,OAAQkD,EAAM4H,QAAQ,EAAG,EAAG,EAAG,OA+HD,CAAEM,WAAW,GAAhCb,CAAwCqzC,I,6LC1IjD56C,GAAYC,sBAAW,SAAAC,GAAK,MAAK,CACrCm7C,mBAAoB,CAClBl+C,QAAS,OACTC,cAAe,MACfk+C,SAAU,OACVl9C,QAAS,EACTgC,gBAAiB,UACjBvC,WAAY,UAGdqJ,MAAO,CACLq0C,KAAM,EACNh9C,YAAa,OACb8G,SAAU,UAEZm2C,WAAY,CACVv9C,SAAU,IACVM,YAAa2B,EAAM4H,QAAQ,IAE7B2zC,WAAY,CACV19C,MAAO,QAETq9C,UAAW,CACTr9C,MAAO,OACPf,OAAQkD,EAAM4H,QAAQ,EAAG,EAAG,EAAG,IAEjC4zC,gBAAiB,CACf1+C,OAAQkD,EAAM4H,QAAQ,IAExB6zC,WAAY,CACV59C,MAAO,QACPf,OAAQkD,EAAM4H,QAAQ,EAAG,EAAG,EAAG,IAEjC8zC,cAAe,CACbz+C,QAAS,OACTC,cAAe,SACfgB,QAAS8B,EAAM4H,QAAQ,IACvB9K,OAAQkD,EAAM4H,QAAQ,EAAG,EAAG,EAAG,IAEjC+zC,SAAU,CACRxzC,UAAWnI,EAAM4H,QAAQ,IAE3Bg0C,KAAM,CACJ9+C,OAAQkD,EAAM4H,QAAQ,KAExBwrC,YAAa,CACXt2C,OAAQkD,EAAM4H,QAAQ,GACtB7J,SAAU,IACV89C,SAAU,KAEZC,cAAe,CACb7+C,QAAS,OACTC,cAAe,OAEjB6+C,cAAe,CACb9+C,QAAS,OACTC,cAAe,SACfiL,UAAW,GAEb6zC,WAAY,CACVpgD,MAAO,UACP,UAAW,CACTA,MAAO,gBAKPqgD,GAAgB,SAAAxgD,GACpB,IAAMgF,EAAUX,KADa,EAECT,IAAMC,SAAS,IAFhB,WAEtB48C,EAFsB,KAEbC,EAFa,KAIvBC,EAAoB,SAAA93C,GAAS,MAC3B+3C,EAAa/3C,SAAH,UAAGA,EAAOhP,cAAV,aAAG,EAAevB,MAC5BuoD,EAAaD,EAAWA,EAAWpmD,OAAS,GAClDwF,EAAM8gD,qBAAqBD,IAyS7B,OACE,yBAAK5gD,UAAW+E,EAAQ06C,oBAtStB,6BACE,yBACEt9C,MAAM,KACNC,OAAO,KACP41C,QAAQ,YACRnP,KAAK,OACLoP,MAAM,6BACNr8C,MAAO,CAAEklD,WAAY,MAAOC,aAAc,QAE1C,0BACEC,SAAS,UACTC,SAAS,UACTvpD,EAAE,s8CACFmxC,KAAK,aAGT,kBAAC,KAAD,CAAa7oC,UAAW+E,EAAQ2yC,aAC9B,kBAAC,KAAD,CACEI,QAAQ,eACRh9C,GAAG,SACHomD,UAAQ,EACR7oD,MAAO0H,EAAMohD,eACbx4C,SAAU+3C,EACVU,YAAa,SAAAC,GACX,IAAMC,EAAgBD,EACnB5kD,QAAO,qBAAG8kD,cACV3iD,KAAI,qBAAGjH,QACV,OAAO2pD,EAAc/mD,OAAS,EAC1B,CAAC+mD,EAAc,GAAIA,EAAc,IAAI5kD,KAAK,OAAS,MACnD4kD,EAAc5kD,KAAK,QAEzB4O,MAAO,kBAAC,KAAD,MACPk2C,UAAWA,IAKVzhD,EAAMohD,eAAeviD,KAAI,SAAConC,EAAOyb,GAChC,OACE,kBAAC,IAAD,CAAU9oD,IAAG,oBAAe8oD,GAAcppD,MAAO2tC,EAAMlrC,IACrD,kBAAC,KAAD,CAAUsP,QAAS47B,EAAMub,aACzB,kBAAC,KAAD,CAAc/E,QAASxW,EAAMruC,cAYzC,kBAAC,YAAD,CACEqI,UAAW+E,EAAQ66C,WACnB12C,MAAM,GACNgC,YAAY,iBACZ7S,MAAO0H,EAAM2hD,aACb/4C,SAAU,SAAAlD,GAAG,OAAI1F,EAAM4hD,mBAAmBl8C,EAAI7L,OAAOvB,QACrDupD,WAAY,CACVC,eACE,kBAAC,KAAD,CAAgBjmD,MAAO,CAAEmlD,aAAc,IACrC,kBAAC,KAAD,CAAYt3C,SAAS,WAGzBq4C,aACE,kBAAC,KAAD,CAAgBzgD,SAAS,OACvB,kBAAC,KAAD,CACEf,UAAWP,EAAM2hD,aACjBzhD,QAAS,kBAAMF,EAAM4hD,mBAAmB,MAExC,kBAAC,KAAD,CAAazhD,MAAM,UAAUuJ,SAAS,aAK9CrJ,KAAK,UAOP,yBAAKJ,UAAW+E,EAAQ+6C,iBACtB,kBAAC,KAAD,CAAa9/C,UAAW+E,EAAQ2yC,aAC9B,kBAAC,KAAD,CACEI,QAAQ,8BACRh9C,GAAG,wBACHomD,UAAQ,EACR7oD,MAAO0H,EAAMgiD,OACbp5C,SAAU5I,EAAMiiD,aAChB12C,MAAO,kBAAC,KAAD,MACP81C,YAAa,SAAAC,GAMX,OAHethD,EAAMkiD,WAClBxlD,QAAO,SAAAylD,GAAK,OAAIb,EAAS3tC,SAASwuC,EAAM7pD,UACxCuG,KAAI,SAAAujD,GAAI,OAAIA,EAAKj5C,SACNxM,KAAK,OAErB8kD,UAAWA,IAEVzhD,EAAMkiD,WAAWrjD,KAAI,SAAAsjD,GAAK,OACzB,kBAAC,IAAD,CAAUvpD,IAAKupD,EAAM7pD,MAAOA,MAAO6pD,EAAM7pD,OACvC,kBAAC,KAAD,CAAU+R,QAASrK,EAAMgiD,OAAOK,QAAQF,EAAM7pD,QAAU,IACxD,kBAAC,KAAD,CAAcmkD,QAAS0F,EAAMh5C,eAoMtCnJ,EAAMsiD,cAzLP,kBAACC,GAAD,CACEn3B,KAAM,kBAAC,KAAD,MACNzoB,MAAM,OACN08C,SAAUr/C,EAAMwiD,KAAKhoD,OAAS,GAE9B,yBAAKyF,UAAW+E,EAAQi7C,eACtB,kBAAC,YAAD,CACEhgD,UAAW+E,EAAQ86C,WACnBxnD,MAAOmoD,EACP73C,SAAU,SAAAlD,GAAG,OAAIg7C,EAAWh7C,EAAI7L,OAAOvB,QACvCmqD,QAAS,SAAA55C,GAEe,KAAlBA,EAAMqxC,SACRl6C,EAAM0iD,aAAajC,IAGvBt3C,MAAM,UAEN04C,WAAY,CACVE,aACE,kBAAC,KAAD,KACE,kBAAC,KAAD,CAAY7hD,QAAS,kBAAMF,EAAM0iD,aAAajC,KAC5C,kBAAC,KAAD,SAKRpgD,KAAK,UAEP,yBAAKJ,UAAW+E,EAAQk7C,UACrBlgD,EAAMwiD,KAAK3jD,KAAI,SAAAK,GACd,OACE,wBAAItG,IAAKsG,EAAKtG,KACZ,kBAAC,KAAD,CACEuQ,MAAOjK,EAAKiK,MACZw5C,SAAU,kBAAM3iD,EAAM4iD,gBAAgB1jD,IACtCe,UAAW+E,EAAQm7C,KACnB9/C,KAAK,iBAanB,kBAACkiD,GAAD,CACEn3B,KAAM,kBAAC,KAAD,MACNzoB,MAAO3C,EAAMzH,EAAE,cACf8mD,SAC6B,OAA3Br/C,EAAM6iD,kBAAsD,OAAzB7iD,EAAM8iD,gBAI3C,kBAAC,2BAAD,CAAyBC,MAAOC,MAC9B,kBAAC,0BAAD,CACEpqD,IAAI,cACJqH,UAAW+E,EAAQg7C,WACnB3/C,KAAK,QACLD,QAAQ,SACR6iD,MAAM,EACN95C,MAAOnJ,EAAMzH,EAAE,aACfD,MAAO0H,EAAM6iD,iBACbj6C,SAAU,SAAAs6C,GAAO,OACfljD,EAAMmjD,iBAAiBD,EAAS,qBAElCzY,QAASvpC,QAAQC,IACjBiiD,OAAO,qBAET,kBAAC,0BAAD,CACExqD,IAAI,eACJqH,UAAW+E,EAAQg7C,WACnB3/C,KAAK,QACLD,QAAQ,SACR6iD,MAAM,EACN95C,MAAOnJ,EAAMzH,EAAE,WACfD,MAAO0H,EAAM8iD,eACbl6C,SAAU,SAAAs6C,GAAO,OACfljD,EAAMmjD,iBAAiBD,EAAS,mBAElCzY,QAASvpC,QAAQC,IACjBiiD,OAAO,uBAsGb,yBAAKvnD,MAAO,CAAE2G,SAAU,KA7FxB,kBAAC+/C,GAAD,CACEn3B,KAAM,kBAAC,KAAD,MACNzoB,MAAO3C,EAAMzH,EAAE,kBAGf,kBAAC,mBAAD,CACE6R,QACE,kBAAC,SAAD,CACEC,QAASrK,EAAMsiD,aACf15C,SAAU5I,EAAMqjD,qBAGpBl6C,MAAOnJ,EAAMsiD,aAAe,WAAa,WAE3C,yBAAKriD,UAAW+E,EAAQq7C,eAEtB,kBAAC,aAAD,CACEl4C,UAAU,MACVtM,MAAO,CACL6N,SAAU,OACVF,WAAY,SACZ9G,WAAY,MALhB,UAQM1C,EAAMzH,EAAE,iBARd,MAUA,kBAAC,YAAD,CACED,MAAO0H,EAAMsjD,MACb16C,SAAU5I,EAAMujD,YAChBtjD,UAAW+E,EAAQy6C,UACnB1kD,GAAG,kBAEHoQ,YAAanL,EAAMzH,EAAE,SACrBwb,KAAK,SACLyvC,gBAAiB,CACfC,QAAQ,GAGVpjD,KAAK,WAGT,yBAAKJ,UAAW+E,EAAQs7C,eAEtB,kBAAC,aAAD,CACEn4C,UAAU,MACVtM,MAAO,CACL6N,SAAU,OACVF,WAAY,SACZ9G,WAAY,MALhB,UAQM1C,EAAMzH,EAAE,WARd,MAUA,kBAAC,KAAD,CAAa0H,UAAW+E,EAAQ2yC,aAC9B,kBAAC,KAAD,CACEI,QAAQ,8BACRh9C,GAAG,wBACHomD,UAAQ,EACR7oD,MAAO0H,EAAMoH,QACbwB,SAAU5I,EAAM0jD,cAChBn4C,MAAO,kBAAC,KAAD,MACP81C,YAAa,SAAAC,GAAQ,OACnBA,EACGziD,KAAI,SAAAujD,GAAI,OAAI1lB,gBAAK18B,EAAD,qBAAsBoiD,EAAtB,WAAqC,OACrDzlD,KAFH,OAIF8kD,UAAWA,IAEV1pD,OAAOkE,KAAK+D,EAAM2jD,YAAY9kD,KAAI,SAAC+kD,EAAQzoD,GAC1C,OACE,kBAAC,IAAD,CAAUvC,IAAKuC,EAAO7C,MAAOsrD,GAC3B,kBAAC,KAAD,CAAUv5C,QAASrK,EAAMoH,QAAQi7C,QAAQuB,IAAW,IACpD,kBAAC,KAAD,CAAcnH,QAASz8C,EAAM2jD,WAAWC,GAAQz6C,kBA6B9Ds4C,GAAY,CAChBoC,WAAY,CACVhoD,MAAO,CACLioD,UAAWC,IACX3hD,MAAO,MAGXu8C,mBAAoB,MAgDtB,SAASqF,GAAc9M,EAAW+M,GAChC,OAAO71B,oBAAS8oB,EAAW+M,GA9C7BzD,GAAc//C,UAAY,CACxBuhD,OAAQthD,IAAU0E,MAClB88C,WAAYxhD,IAAU0E,MACtB68C,aAAcvhD,IAAUC,KACxB2iD,MAAO5iD,IAAU4I,OACjBi6C,YAAa7iD,IAAUC,KACvByG,QAAS1G,IAAU0E,MACnBu+C,WAAYjjD,IAAU3H,OACtB2qD,cAAehjD,IAAUC,KACzBiiD,gBAAiBliD,IAAUC,KAC3BghD,aAAcjhD,IAAUE,OACxBghD,mBAAoBlhD,IAAUC,KAC9BkiD,iBAAkBniD,IAAUE,OAC5BsjD,aAAcxjD,IAAUE,OACxBuiD,iBAAkBziD,IAAUC,KAC5BygD,eAAgB1gD,IAAU0E,MAC1B07C,qBAAsBpgD,IAAUC,KAChC2hD,aAAc5hD,IAAUM,KACxBqiD,mBAAoB3iD,IAAUC,KAC9BpI,EAAGmI,IAAUC,MAGf6/C,GAAcv/C,aAAe,CAC3B+gD,OAAQ,GACRE,WAAY,GACZD,aAAc,aACdqB,MAAO,EACPC,YAAa,aACbn8C,QAAS,GACTu8C,WAAY,GACZD,cAAe,aACfd,gBAAiB,aACjBjB,aAAc,GACdC,mBAAoB,aACpBiB,iBAAkB,GAClBqB,aAAc,GACdf,iBAAkB,aAClB/B,eAAgB,GAChBN,qBAAsB,aACtBwB,cAAc,EACde,mBAAoB,aACpB9qD,EAAG,SAAAqI,GAAM,OAAIA,IAQAtH,sBAAKknD,GAAewD,I,mCCld5B,IAAMG,GAAc,CACzBC,KAAM,CACJ3/C,gBAAiB,0BACjBtE,MAAO,yBAETkkD,QAAS,CACP5/C,gBAAiB,yBACjBtE,MAAO,wBAETmkD,MAAO,CACL7/C,gBAAiB,yBACjBtE,MAAO,wBAETokD,MAAO,CACL9/C,gBAAiB,yBACjBtE,MAAO,wBAETqkD,SAAU,CACR//C,gBAAiB,wBACjBtE,MAAO,wBA8DJ,SAASskD,GAAer/C,EAAOs/C,GACpC,IAAMlqD,EAAS4K,EAAM5K,OAErB,GAAe,IAAXA,QAA0B4G,IAAVgE,EAClB,OAAO,EAET,IAAK,IAAI0qB,EAAI,EAAGA,EAAIt1B,EAAQs1B,IAC1B,IAAK,IAAIC,EAAI,EAAGA,EAAIv1B,GACds1B,IAAM1qB,EAAM2qB,GAAG20B,GADO30B,IAI1B,GAAIA,IAAMv1B,EAAS,EACjB,OAAOs1B,EAKb,OAAOt1B,EAMF,SAASmqD,GAAiBC,EAAa1C,GAC5C,IAAI2C,EAAM,GACV,GAAIj0C,MAAMqQ,QAAQ2jC,IAAgBA,EAAYpqD,SAAW0nD,EAAW1nD,OAClE,OAAOqqD,EAGT,IAQE,OAPAD,EAAY1oD,SAAQ,SAAAimD,GAEhB0C,EADU,KAARA,EACI,GAAH,OAAM1C,EAAMnuC,eAET,GAAH,OAAM6wC,EAAN,YAAa1C,EAAMnuC,kBAG1B,gBAAgB6wC,GAChB,MAAOpjB,GACP,MAAO,IAMJ,SAASqjB,GAAeC,GAC7B,IAAIF,EAAM,GAEV,OAAIG,KAASD,GACJF,GAGTE,EAAU7oD,SAAQ,SAAA+oD,GAEdJ,EADU,KAARA,EACI,GAAH,OAAMI,EAAI97C,OAEP,GAAH,OAAM07C,EAAN,YAAaI,EAAI97C,UAIxB,gBAAgB07C,IAKX,SAASK,GAAkB/hD,GAChC,OAAKA,GAAuB,KAAZA,EAIhB,mBAAmBA,GAHV,GAuDX,SAASgiD,GAAcjmD,EAAMkmD,GAO3B,IANA,IAEIC,EAFAC,EAAW,EACXC,EAAWrmD,EAAK1E,OAAS,EAGzBD,EAAS,KAEN+qD,GAAYC,GAAU,CAG3B,IAAIC,EAAaJ,EADAlmD,EADjBmmD,GAAiBC,EAAWC,GAAY,EAAK,IAIvB,UAAlBC,EAAW,GACbF,EAAWD,EAAe,EAE1BE,EAAWF,EAAe,EAGxBG,EAAW,KACbjrD,EAAS8qD,GAIb,OAAO9qD,EAGF,IAAMkrD,GAAsB,SAACC,EAAUC,EAAUC,GAEtD,IAAKF,EACH,MAAO,GAGT,IAAIG,EAAa,EACbC,EAAaJ,EAASlrD,OAG1B,IAAKmrD,IAAaC,EAChB,OAAOF,EAIT,IAAMK,EAAWL,EAAS7mD,KAAI,SAAAsC,GAAG,OAAIA,EAAI+J,QAiBzC,OAhBI06C,IAEFC,EAAaV,GAAcY,GAAU,SAAUztD,GAC7C,OAAOA,GAASstD,EAAOvf,UAAY,IAC/B,CAAC,SAAS,GACV,CAAC,QAAQ,OAGbsf,IAEFG,EAAaX,GAAcY,GAAU,SAAUztD,GAC7C,OAAOA,GAASqtD,EAAStf,UAAY,IACjC,CAAC,QAAQ,GACT,CAAC,SAAS,OAGXqf,EAAS9wB,MAAMixB,EAAYC,EAAa,I,8gCCxQjD,IAmCME,G,mNAMc,YAAe,IAAZ7qD,EAAY,EAAZA,MAAY,EACO,EAAK6E,MAAnCgF,EADuB,EACvBA,QAASihD,EADc,EACdA,WACXC,EAFyB,EACFhnD,KACR/D,GACrB,OAAO69C,KACLh0C,EAAQmhD,SACRnhD,EAAQohD,eACG,IAAXjrD,GAAgB6J,EAAQkhD,EAAQ/D,OAHvB,OAKNn9C,EAAQqhD,eAA2B,IAAXlrD,GAA8B,MAAd8qD,O,4BAKhC,SAAAn3C,GAAM,OAAI,YAA+B,IAA5Bw3C,EAA4B,EAA5BA,SAAUC,EAAkB,EAAlBA,YAAkB,EACF,EAAKvmD,MAAjDoH,EAD8C,EAC9CA,QAASpC,EADqC,EACrCA,QAASwhD,EAD4B,EAC5BA,UAAWP,EADiB,EACjBA,WACrC,OACE,kBAAC,KAAD,CACE99C,UAAU,MACVlI,UAAW+4C,KAAKh0C,EAAQyhD,UAAWzhD,EAAQohD,cAA5B,OACZphD,EAAQ0hD,QAAwB,MAAdT,IAErB7lD,QAAQ,OACRvE,MAAO,CAAEwG,OAAQmkD,GACjBG,MACkB,MAAfJ,GAAuBn/C,EAAQm/C,GAAaK,QACzC,QACA,QAGL93C,EAASA,EAAOw3C,GAAYA,O,8BAKlB,YAA4B,IAAzBn9C,EAAyB,EAAzBA,MAAOo9C,EAAkB,EAAlBA,YAAkB,EACA,EAAKvmD,MAAxC6mD,EADmC,EACnCA,aAAcz/C,EADqB,EACrBA,QAASpC,EADY,EACZA,QAE/B,OACE,kBAAC,KAAD,CACEmD,UAAU,MACVlI,UAAW+4C,KACTh0C,EAAQyhD,UACRzhD,EAAQohD,cACRphD,EAAQ0hD,SAEVtmD,QAAQ,OACRvE,MAAO,CAAEwG,OAAQwkD,GACjBF,MAAOv/C,EAAQm/C,GAAaK,QAAmB,QAAU,QAEzD,8BAAOz9C,O,gDAKJ,aAOHvK,KAAKoB,MALPgF,EAFK,EAELA,QACAoC,EAHK,EAGLA,QACAo/C,EAJK,EAILA,UACAK,EALK,EAKLA,aACGC,EANE,yDAQP,OACE,kBAAC,aAAD,MACG,gBAAGzkD,EAAH,EAAGA,OAAQD,EAAX,EAAWA,MAAX,OACC,kBAAC,SAAD,KACEC,OAAQA,EACRD,MAAOA,EACPokD,UAAWA,EACXO,UAAW,CACTjqC,UAAW,WAEb+pC,aAAcA,EACd5mD,UAAW+E,EAAQgiD,OACfF,EATN,CAUEG,aAAc,EAAKC,kBAElB9/C,EAAQvI,KAAI,WAAgC1D,GAAU,IAAvCgsD,EAAuC,EAAvCA,QAASr4C,EAA8B,EAA9BA,OAAW5G,EAAmB,6BACrD,OACE,kBAAC,UAAD,KACEtP,IAAKuuD,EACLC,eAAgB,SAAAC,GACd,OAAO,EAAKD,eAAL,SACFC,GADE,IAELd,YAAaprD,MAGjBqH,SAAsB,YAAZ2kD,EAAwB,OAAI/lD,EACtCnB,UAAW+E,EAAQohD,cACnBkB,aAAc,EAAKA,aAAax4C,GAChCq4C,QAASA,GACLj/C,e,GAjGYtE,IAAM2jD,e,IAAlCvB,G,eACkB,CACpBa,aAAc,GACdL,UAAW,KAyGfR,GAAoBvlD,UAAY,CAC9BuE,QAAStE,IAAU3H,OAAO8H,WAC1BuG,QAAS1G,IAAU8mD,QACjB9mD,IAAUoL,MAAM,CACdq7C,QAASzmD,IAAUE,OAAOC,WAC1BsI,MAAOzI,IAAUE,OAAOC,WACxB+lD,QAASlmD,IAAUM,KACnBoB,MAAO1B,IAAU4I,OAAOzI,cAE1BA,WACFgmD,aAAcnmD,IAAU4I,OACxB28C,WAAYvlD,IAAUC,KACtB6lD,UAAW9lD,IAAU4I,QAGvB,IAAMm+C,GAAmB77C,sBA9JV,SAAArH,GAAK,WAClB6hD,cAAe,CACb5kD,QAAS,OACTU,WAAY,SACZwlD,UAAW,cAEbV,MAAO,CAGL,wCAAyC,CACvCW,MAAM,EACN3G,aAAkC,QAApBz8C,EAAMuY,UAAsB,oBAAiB1b,IAG/D+kD,SAAU,CACRv5C,OAAQ,WAEVy5C,cAAe,CACb,UAAW,CACT5hD,gBAAiBF,EAAMyH,QAAQjC,KAAK,OAGxC08C,UAAW,CACTjkD,SAAU,GAEZolD,WAAY,CACVhI,KAAM,EACN19C,WAAY,UAEdwkD,QAAS,CACP95C,OAAQ,YAEPu3C,MA8HoBv4C,CAAmBo6C,IAE7B,SAAS6B,GAAU7nD,GAChC,OACE,kBAACynD,GAAD,CACEK,SAAU9nD,EAAM0lD,SAASlrD,OACzButD,UAAW,gBAAG5sD,EAAH,EAAGA,MAAH,OAAe6E,EAAM0lD,SAASvqD,IACzC+D,KAAMc,EAAM0lD,SACZt+C,QAASpH,EAAMoH,QAAQvI,KAAI,SAAAujD,GAAI,OAAIpiD,EAAM2jD,WAAWvB,Q,i/BAK1DyF,GAAUpnD,UAAY,CACpB2G,QAAS1G,IAAU0E,MACnBu+C,WAAYjjD,IAAU3H,OACtB2sD,SAAUhlD,IAAU0E,MACpB/C,OAAQ3B,IAAU4I,QAGpBu+C,GAAU5mD,aAAe,CACvBmG,QAAS,GACTu8C,WAAY,GACZ+B,SAAU,GACVrjD,OAAQ,I,IC7KJ2lD,G,wMACI,CACN5G,eAAgB,GAChBY,OAAQ,CAAC,OAAQ,SACjBsB,MAAO,GACPoC,SAAU,GACV/D,aAAc,GACdkB,iBAAkB,KAClBC,eAAgB,KAChB17C,QAAS,CAAC,OAAQ,QAAS,WAC3Bo7C,KAAM,CAAC,CAAE5pD,IAAK,EAAGuQ,MAAO,OACxB9G,OAAQ,EACR6/C,WAAY,CACV,CAAE5pD,MAAO,OAAQ6Q,MAAO,gBACxB,CAAE7Q,MAAO,QAAS6Q,MAAO,a,+BAGf/H,G,+BAEK,CACjB,CAAE9I,MAAO,OAAQ6Q,MAAO,gBACxB,CAAE7Q,MAAO,QAAS6Q,MAAO,Y,iCAGN,CACnB,CAAE7Q,MAAO,OAAQ6Q,MAAO,QACxB,CAAE7Q,MAAO,UAAW6Q,MAAO,YAC3B,CAAE7Q,MAAO,QAAS6Q,MAAO,SACzB,CAAE7Q,MAAO,QAAS6Q,MAAO,SACzB,CAAE7Q,MAAO,WAAY6Q,MAAO,c,oCA4BP,SAAA8+C,GACrB,IAAM7G,EAAiB,KAAI,EAAKxN,MAAMwN,gBAChC5a,EACJ4a,EAAeA,EAAerf,WAAU,SAAAqgB,GAAI,OAAIA,EAAKrnD,KAAOktD,MAC9DzhB,EAAYgb,YAAchb,EAAYgb,WACtC,EAAKpL,SAAS,CAAEgL,sB,iCAGE,SAAAA,GAClB,EAAKhL,SAAS,CAAEgL,mBAChB,EAAK8G,QAAQ9G,M,uDAGL,WAAMvO,GAAN,UAAAhjC,EAAA,sEACF20B,QAAQ9qC,IACZm5C,EACGn2C,QAAO,SAAAupC,GAAK,OAAIA,EAAMkiB,aAAe,EAAKnoD,MAAMooD,YAAYC,OAC5D3rD,QAAO,SAAAupC,GAAK,OAAIA,EAAMub,cACtB3iD,KAAI,SAAAonC,GAAK,OAAI,EAAKqiB,gBAAgBriB,OACrCwF,MAAK,SAAA8c,GACL,EAAKnS,UAAS,SAAAoS,GACZ,IAAMC,EAAaF,EAAWziD,QAAO,SAACpM,EAAKgvD,GAEzC,OADAA,GAAaA,EAAUxsD,SAAQ,SAAAgD,GAAI,OAAIxF,EAAIgC,KAAKwD,MACzCxF,IACN,IAMH,OALA,EAAKivD,YAAc39C,WACjB,EAAKk9C,QACL,IACAM,EAAUpH,gBAEL,CAAEsE,SAAU+C,EAAWla,MAAK,SAAC1+B,EAAGC,GAAJ,OAAUA,EAAE5E,KAAO2E,EAAE3E,eAjBpD,2C,sFAsBQ,SAAA09C,GAChB,OAAO,IAAIpkB,SAAQ,SAACqF,EAAIC,GAEtB,IAAM+e,EAAgB79C,YAAW,WAC/B9J,QAAQugC,MAAM,+CACdoI,EAAG,MACF,KAEGif,EAAa,UAAH,OACdF,EAAcG,GADA,yBAECpE,GACf,EAAK/Q,MAAMoO,OACX,EAAKpO,MAAMsO,YAJG,kBAKL,EAAKtO,MAAM0P,OALN,OAKcwB,GAC5B,EAAKlR,MAAM4O,OANG,OAOZ0C,GAAkB,EAAKtR,MAAM+N,eAEjC9uC,YAAS3a,IAAI4wD,GAAY,SAACjE,EAAK1qD,QACjBiH,IAARyjD,GAAmB/a,IACvBD,EAAGgb,EAAI3lD,MACP6L,aAAa89C,SAnBV,OAqBE,kBAAM3nD,QAAQC,IAAI,gC,uDAjF3B,IAAMkB,EAASzD,KAAKoqD,WAAWC,aAC/BrqD,KAAKw3C,SAAS,CAAE/zC,a,0CAIhBzD,KAAKsqD,kBACHtqD,KAAKoB,MAAMmpD,WAAWtqD,KAAI,SAAAujD,GAAI,gBAAUA,GAAV,IAAgBZ,YAAY,U,yCAI3CtK,EAAWsR,GACxBp6B,oBAAS8oB,EAAUiS,WAAYvqD,KAAKoB,MAAMmpD,aAC9CvqD,KAAKsqD,kBACHtqD,KAAKoB,MAAMmpD,WAAWtqD,KAAI,SAAAujD,GAAI,gBAAUA,GAAV,IAAgBZ,YAAY,U,6CAKxD5iD,KAAK+pD,aACP59C,aAAanM,KAAK+pD,e,+BAiEb,WACP,OACE,yBACE9sD,MAAO,CACLuG,MAAO,OACPC,OAAQ,OACRb,QAAS,OACTC,cAAe,WAGjB,yBACE5F,MAAO,CACL2G,SAAU,IACVH,OAAQ,OACRb,QAAS,OACTC,cAAe,WAGjB,kBAAC,GAAD,CACE2/C,eAAgBxiD,KAAKg1C,MAAMwN,eAC3BN,qBAAsBliD,KAAKkiD,qBAC3BkB,OAAQpjD,KAAKg1C,MAAMoO,OACnBE,WAAYtjD,KAAKg1C,MAAMsO,WACvBD,aAAc,SAAAp5C,GACZ,EAAKutC,SAAS,CAAE4L,OAAQn5C,EAAMhP,OAAOvB,SAEvCgrD,MAAO1kD,KAAKg1C,MAAM0P,MAClBC,YAAa,SAAA79C,GACc,KAArBA,EAAI7L,OAAOvB,MACb,EAAK89C,SAAS,CAAEkN,MAAO,IAEvB,EAAKlN,SAAS,CAAEkN,MAAO59C,EAAI7L,OAAOvB,SAGtC8O,QAASxI,KAAKg1C,MAAMxsC,QACpBu8C,WAAY/kD,KAAKoB,MAAM2jD,WACvBD,cAAe,SAAA76C,GACb,EAAKutC,SAAS,CAAEhvC,QAASyB,EAAMhP,OAAOvB,SAExCkqD,KAAM5jD,KAAKg1C,MAAM4O,KACjBE,aAAc,SAAAjC,GAAW,IACf+B,EAAS,EAAK5O,MAAd4O,KAGM,KAAZ/B,GACA+B,EAAKzgB,WAAU,SAAAqgB,GAAI,OAAIA,EAAKj5C,QAAUs3C,KAAW,IAEjD+B,EAAK9mD,KAAK,CACR9C,IAAK6rD,GAAejC,EAAM,OAC1Br5C,MAAOs3C,IAET,EAAKrK,SAAS,CAAEoM,WAGpBI,gBAAiB,SAAAwG,GAAe,IAExBC,EADW,EAAKzV,MAAd4O,KACkB9lD,QACxB,SAAAuoD,GAAG,OAAIA,EAAIrsD,MAAQwwD,EAAYxwD,OAEjC,EAAKw9C,SAAS,CAAEoM,KAAM6G,KAExB1H,aAAc/iD,KAAKg1C,MAAM+N,aACzBC,mBAAoB,SAAA76B,GAAI,OAAI,EAAKqvB,SAAS,CAAEuL,aAAc56B,KAC1D87B,iBAAkBjkD,KAAKg1C,MAAMiP,iBAC7BC,eAAgBlkD,KAAKg1C,MAAMkP,eAC3BK,iBAAkB,SAACD,EAASoG,GAC1B,EAAKlT,SAAL,OAAiBkT,EAAcpG,KAEjCZ,aAAc1jD,KAAKg1C,MAAM0O,aACzBe,mBAAoB,SAAA39C,GAElB,EAAK0wC,SAAS,CACZkM,cAAe,EAAK1O,MAAM0O,aAC1BJ,WAAY,EAAKtO,MAAM0O,aACnB,EAAKiH,iBACL,EAAKC,mBACThH,KAAM,EAAK5O,MAAM0O,aACb,CAAC,CAAE1pD,IAAK,EAAGuQ,MAAO,OAClB,EAAKyqC,MAAM4O,UAIrB,yBACEt8C,IAAK,SAAA8iD,GACH,EAAKA,WAAaA,GAEpBntD,MAAO,CACL2G,SAAU,EACViG,UAAW,OACXlG,UAAW,EACXF,OAAQ,QAGV,kBAACwlD,GAAD,CACEzgD,QAASxI,KAAKg1C,MAAMxsC,QACpBu8C,WAAY/kD,KAAKoB,MAAM2jD,WACvB+B,SAAUD,GACR7mD,KAAKg1C,MAAM8R,SACX9mD,KAAKg1C,MAAMiP,iBACXjkD,KAAKg1C,MAAMkP,gBAEbzgD,OAAQzD,KAAKg1C,MAAMvxC,OACnB6/C,WAAYtjD,KAAKg1C,MAAMsO,oB,GA3NlBv2C,aAoOnBq8C,GAAKvnD,UAAY,CACf0oD,WAAYzoD,IAAU0E,MACtBgjD,YAAa1nD,IAAU3H,OACvB4qD,WAAYjjD,IAAU3H,QAExBivD,GAAK/mD,aAAe,CAClBkoD,WAAY,CACV,CACEvxD,KAAM,QACNmD,GAAI,mCACJ0uD,UAAW,mBACXtB,WAAY,OACZuB,QAAS,GACTX,GAAI,aAEN,CACEnxD,KAAM,aACNmD,GAAI,mCACJ0uD,UAAW,kBACXtB,WAAY,MACZuB,QAAS,GACTX,GAAI,cAGRX,YAAa,CACX3mB,MAAO,QACPkoB,KAAM,OACNC,KAAM,OACNvB,IAAK,OAEP1E,WAAY,CACVvd,KAAM,CACJj9B,MAAO,OACPg+C,QAAS,OACT/kD,MAAO,IACP0M,OAAQ,SAAA5D,GAAI,OFzGmB,SAAA2+C,GACnC,IAAM3+C,EAAO,IAAIk7B,KAAkB,IAAbyjB,GACtB,gBAAU3+C,EAAK4+C,mBAAmB,OEuGdC,CAAsB7+C,KAExC8+C,KAAM,CACJ7gD,MAAO,OACPg+C,QAAS,OACT/kD,MAAO,IACP0M,OAAQ,SAAA5D,GAAI,OFxGmB,SAAA2+C,GACnC,IAAM3+C,EAAO,IAAIk7B,KAAkB,IAAbyjB,GACtB,gBAAU3+C,EAAK++C,mBAAmB,OEsGdC,CAAsBh/C,KAExCi/C,MAAO,CACLhhD,MAAO,QACPg+C,QAAS,QACT/kD,MAAO,KAETgoD,OAAQ,CACNjhD,MAAO,SACPg+C,QAAS,SACT/kD,MAAO,KAET2jC,MAAO,CACL58B,MAAO,QACPg+C,QAAS,QACT/kD,MAAO,KAETioD,QAAS,CACPlhD,MAAO,UACPg+C,QAAS,UACT/kD,MAAO,OAKE4lD,U,4fCzSf,IAOMsC,G,wMACI,CACNC,SAAU,GACVC,SAAU,GACVC,UAAU,EACVhpB,OAAO,EACPipB,aAAc,K,wCAGJ,6BAAA76C,EAAA,+EAEkB86C,kBAAeC,MACvC,EAAKhX,MAAM2W,SACX,EAAK3W,MAAM4W,SACX,EAAK5W,MAAM6W,UALL,QAEFI,EAFE,QAQSppB,MAIf,EAAK2U,SAAS,CACZ3U,OAAO,EACPipB,aAAcG,EAAYppB,QAL5B,EAAKzhC,MAAM8qD,aAAY,GATjB,gDAkBR,EAAK1U,SAAS,CACZ3U,OAAO,EACPipB,aAAc,EAAF,KApBN,0D,gDAyBH,aACmB9rD,KAAKoB,MAAvBgF,EADD,EACCA,QAAS+lD,EADV,EACUA,KAEjB,OACE,kBAAC,KAAD,CACElvD,MAAO,CAAEklD,WAAY,MACrBv8C,WAAS,EACTsY,UAAU,SACV5a,WAAW,SACX8oD,QAAQ,gBAER,kBAAC,KAAD,CAAOlQ,UAAW,GAAI76C,UAAW+E,EAAQrO,MACvC,kBAAC,KAAD,CAAMmE,MAAI,GACR,yBACEypC,IAAKwmB,GAAcE,KACnBhrD,UAAU,SACVirD,IAAI,OACJrvD,MAAO,CACL2F,QAAS,QACTmI,WAAY,OACZC,YAAa,OACbxH,MAAO,UAIb,kBAAC,KAAD,KACE,kBAAC,KAAD,CAAYukD,MAAM,SAASvmD,QAAQ,YAAY+qD,cAAY,GACzD,kBAAC,KAAD,CACElrD,UAAW+E,EAAQ2yC,YACnBlW,MAAO7iC,KAAKg1C,MAAMnS,OAElB,kBAAC,KAAD,CAAY2pB,QAAQ,mBAApB,YACA,kBAAC,KAAD,CACErwD,GAAG,kBACHzC,MAAOsG,KAAKg1C,MAAM2W,SAClBc,mBAAiB,uBACjBziD,SAAU,SAAAC,GAAK,OACb,EAAKutC,SAAS,CAAEmU,SAAU1hD,EAAMhP,OAAOvB,cAMjD,kBAAC,KAAD,KACE,kBAAC,KAAD,CAAYquD,MAAM,SAASvmD,QAAQ,YAAY+qD,cAAY,GACzD,kBAAC,KAAD,CACElrD,UAAW+E,EAAQ2yC,YACnBlW,MAAO7iC,KAAKg1C,MAAMnS,OAElB,kBAAC,KAAD,CAAY2pB,QAAQ,mBAApB,YACA,kBAAC,KAAD,CACErwD,GAAG,kBACHgZ,KAAK,WACLzb,MAAOsG,KAAKg1C,MAAM4W,SAClBa,mBAAiB,uBACjBziD,SAAU,SAAAC,GAAK,OACb,EAAKutC,SAAS,CAAEoU,SAAU3hD,EAAMhP,OAAOvB,SAEzCyJ,WAAY,SAAA8G,GACQ,UAAdA,EAAMjQ,KACR,EAAK0yD,eAIV1sD,KAAKg1C,MAAMnS,OACV,kBAAC,KAAD,CAAgB1mC,GAAG,wBAChB6D,KAAKg1C,MAAM8W,iBAMtB,kBAAC,KAAD,KACE,kBAAC,KAAD,CAAY/D,MAAM,SAASwE,cAAY,GACrC,kBAAC,IAAD,CAAQjrD,QAAS,kBAAM,EAAKorD,cAA5B,iB,GA5GU3/C,aAqHxB2+C,GAAU7pD,UAAY,CACpB8qD,KAAM7qD,IAAU6H,IAChBuiD,YAAapqD,IAAUC,MAGzB2pD,GAAUrpD,aAAe,CACvB6pD,YAAa,SAAAU,GAAQ,OAAItqD,QAAQC,IAAIqqD,KAGxB5/C,6BArIA,SAAArH,GAAK,MAAK,CACvB5N,KAAM,CACJ8L,QAAS8B,EAAM4H,QAAQ,EAAG,GAC1BN,aAAc,OAkIgB,CAAEY,WAAW,GAAhCb,CAAwC0+C,I,ylBCxIvD,IAAMjmD,GAAYC,sBAAW,SAAAC,GAC3B,MAAO,CACLknD,gBAAiB,IACf/hD,SAAU,OACVnH,UAAW,OACXE,QAAS8B,EAAM4H,QAAQ,KAAM,IAC1B5H,EAAMw3C,eAEX2P,kBAAmB,CACjBhiD,SAAU,OACV/E,UAAW,WAKXgnD,GAAc,SAAA3rD,GAAS,MACrBgF,EAAUX,KADW,EAEKT,IAAMC,SAAS,MAFpB,WAEpByB,EAFoB,KAEVC,EAFU,KAGbqmD,qBAUd,OACE,6BACE,kBAAC,KAAD,CACEC,gBAAc,cACdC,gBAAc,OACd5rD,QAbc,SAAA2I,GAClBtD,EAAYsD,EAAMlD,iBAcd,kBAAC,KAAD,OAEF,kBAAC,IAAD,CACE5K,GAAG,cACHuK,SAAUA,EACVM,aAAW,EACX5D,KAAMxI,QAAQ8L,GACdrD,QAlBc,WAClBsD,EAAY,QAmBR,kBAAC,aAAD,CAAYnF,QAAQ,SAClB,yBAAKH,UAAW+E,EAAQymD,iBACrBzrD,EAAM+rD,aADT,KACyB/rD,EAAMgsD,UAE/B,kBAAC,KAAD,CAAS5rD,QAAQ,WAJnB,UAKGJ,EAAMisD,kBALT,aAKG,EAAkBptD,KAAI,SAAA/D,GAAI,OACzB,kBAAC,IAAD,CACEmF,UAAW+E,EAAQymD,gBACnBvrD,QAAS,kBAAMpF,EAAK6F,OAEnB7F,EAAKqO,UAGV,yBAAKlJ,UAAW+E,EAAQymD,iBACrBzrD,EAAMksD,eACP,kBAAC,GAAD,CACE3hD,SAAU,kBAAMvK,EAAMmsD,qBACtB7hD,OAAQtK,EAAMosD,eAIlB,kBAAC,IAAD,CACEnsD,UAAW+E,EAAQymD,gBACnBvrD,QAASF,EAAMqsD,cAEdrsD,EAAMssD,aAET,kBAAC,KAAD,CAASlsD,QAAQ,WACjB,yBACEH,UACE+E,EAAQymD,gBAAkB,IAAMzmD,EAAQ0mD,mBAGzC1rD,EAAMusD,aAOnBZ,GAAYlrD,UAAY,CACtBsrD,aAAcrrD,IAAUE,OACxBorD,SAAUtrD,IAAUE,OACpBsrD,eAAgBxrD,IAAUE,OAC1B0rD,YAAa5rD,IAAUE,OACvB2rD,QAAS7rD,IAAUE,OACnBqrD,WAAYvrD,IAAU0E,MACtBinD,aAAc3rD,IAAUC,MAQ1BgrD,GAAY1qD,aAAe,CACzB8qD,aAAc,QACdC,SAAU,OACVE,eAAgB,aAChBI,YAAa,SACbC,QAAS,aACTN,WAAY,GACZI,aAAc,kBAAMnrD,QAAQC,IAAI,YAGnBwqD","file":"dist/index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"MovaiReact\"] = factory();\n\telse\n\t\troot[\"MovaiReact\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 103);\n","module.exports = require(\"react\");","module.exports = require(\"@babel/runtime/helpers/esm/defineProperty\");","module.exports = require(\"@babylonjs/core\");","module.exports = require(\"@babel/runtime/helpers/esm/assertThisInitialized\");","module.exports = require(\"prop-types\");","module.exports = require(\"@babel/runtime/helpers/esm/getPrototypeOf\");","module.exports = require(\"@babel/runtime/helpers/esm/classCallCheck\");","module.exports = require(\"@babel/runtime/helpers/esm/createClass\");","module.exports = require(\"monet\");","module.exports = require(\"@babel/runtime/helpers/esm/possibleConstructorReturn\");","module.exports = require(\"@babel/runtime/helpers/esm/extends\");","module.exports = require(\"@babel/runtime/helpers/esm/inherits\");","module.exports = require(\"@babel/runtime/helpers/esm/get\");","module.exports = require(\"mov-fe-lib-core\");","module.exports = require(\"@babel/runtime/helpers/esm/classPrivateFieldGet\");","module.exports = require(\"@babel/runtime/helpers/esm/toConsumableArray\");","module.exports = require(\"@material-ui/core/styles\");","module.exports = require(\"@babel/runtime/regenerator\");","module.exports = require(\"@material-ui/core\");","module.exports = require(\"@babel/runtime/helpers/esm/slicedToArray\");","module.exports = require(\"@babel/runtime/helpers/esm/asyncToGenerator\");","module.exports = require(\"@material-ui/core/MenuItem\");","module.exports = require(\"@babel/runtime/helpers/esm/objectWithoutProperties\");","module.exports = require(\"@material-ui/core/IconButton\");","module.exports = require(\"@material-ui/core/Typography\");","module.exports = require(\"@material-ui/core/FormControl\");","module.exports = require(\"lodash/get\");","module.exports = require(\"@material-ui/core/Input\");","module.exports = require(\"@material-ui/core/Menu\");","module.exports = require(\"@material-ui/icons/Search\");","module.exports = require(\"lodash/isEqual\");","module.exports = require(\"@material-ui/core/Select\");","module.exports = require(\"clsx\");","module.exports = require(\"@material-ui/core/Grid\");","module.exports = require(\"@material-ui/icons/ChevronRight\");","module.exports = require(\"@material-ui/core/InputLabel\");","module.exports = require(\"@material-ui/core/Button\");","module.exports = require(\"react-resize-detector\");","module.exports = require(\"@material-ui/icons/Settings\");","module.exports = require(\"@material-ui/core/colors\");","module.exports = require(\"@babel/runtime/helpers/esm/classPrivateFieldSet\");","module.exports = require(\"react-dom\");","module.exports = require(\"@material-ui/core/InputAdornment\");","module.exports = require(\"@material-ui/core/ListItemText\");","module.exports = require(\"@material-ui/core/Checkbox\");","module.exports = require(\"@material-ui/pickers\");","module.exports = require(\"react-virtualized\");","module.exports = require(\"@material-ui/icons/Clear\");","module.exports = require(\"@babylonjs/gui/2D\");","module.exports = require(\"rbush\");","module.exports = require(\"@material-ui/core/TableCell\");","module.exports = require(\"@material-ui/core/Divider\");","\"use strict\";\n\nvar isOldIE = function isOldIE() {\n  var memo;\n  return function memorize() {\n    if (typeof memo === 'undefined') {\n      // Test for IE <= 9 as proposed by Browserhacks\n      // @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n      // Tests for existence of standard globals is to allow style-loader\n      // to operate correctly into non-standard environments\n      // @see https://github.com/webpack-contrib/style-loader/issues/177\n      memo = Boolean(window && document && document.all && !window.atob);\n    }\n\n    return memo;\n  };\n}();\n\nvar getTarget = function getTarget() {\n  var memo = {};\n  return function memorize(target) {\n    if (typeof memo[target] === 'undefined') {\n      var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n      if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n        try {\n          // This will throw an exception if access to iframe is blocked\n          // due to cross-origin restrictions\n          styleTarget = styleTarget.contentDocument.head;\n        } catch (e) {\n          // istanbul ignore next\n          styleTarget = null;\n        }\n      }\n\n      memo[target] = styleTarget;\n    }\n\n    return memo[target];\n  };\n}();\n\nvar stylesInDom = [];\n\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n\n  for (var i = 0; i < stylesInDom.length; i++) {\n    if (stylesInDom[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var index = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3]\n    };\n\n    if (index !== -1) {\n      stylesInDom[index].references++;\n      stylesInDom[index].updater(obj);\n    } else {\n      stylesInDom.push({\n        identifier: identifier,\n        updater: addStyle(obj, options),\n        references: 1\n      });\n    }\n\n    identifiers.push(identifier);\n  }\n\n  return identifiers;\n}\n\nfunction insertStyleElement(options) {\n  var style = document.createElement('style');\n  var attributes = options.attributes || {};\n\n  if (typeof attributes.nonce === 'undefined') {\n    var nonce = typeof __webpack_nonce__ !== 'undefined' ? __webpack_nonce__ : null;\n\n    if (nonce) {\n      attributes.nonce = nonce;\n    }\n  }\n\n  Object.keys(attributes).forEach(function (key) {\n    style.setAttribute(key, attributes[key]);\n  });\n\n  if (typeof options.insert === 'function') {\n    options.insert(style);\n  } else {\n    var target = getTarget(options.insert || 'head');\n\n    if (!target) {\n      throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n    }\n\n    target.appendChild(style);\n  }\n\n  return style;\n}\n\nfunction removeStyleElement(style) {\n  // istanbul ignore if\n  if (style.parentNode === null) {\n    return false;\n  }\n\n  style.parentNode.removeChild(style);\n}\n/* istanbul ignore next  */\n\n\nvar replaceText = function replaceText() {\n  var textStore = [];\n  return function replace(index, replacement) {\n    textStore[index] = replacement;\n    return textStore.filter(Boolean).join('\\n');\n  };\n}();\n\nfunction applyToSingletonTag(style, index, remove, obj) {\n  var css = remove ? '' : obj.media ? \"@media \".concat(obj.media, \" {\").concat(obj.css, \"}\") : obj.css; // For old IE\n\n  /* istanbul ignore if  */\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = replaceText(index, css);\n  } else {\n    var cssNode = document.createTextNode(css);\n    var childNodes = style.childNodes;\n\n    if (childNodes[index]) {\n      style.removeChild(childNodes[index]);\n    }\n\n    if (childNodes.length) {\n      style.insertBefore(cssNode, childNodes[index]);\n    } else {\n      style.appendChild(cssNode);\n    }\n  }\n}\n\nfunction applyToTag(style, options, obj) {\n  var css = obj.css;\n  var media = obj.media;\n  var sourceMap = obj.sourceMap;\n\n  if (media) {\n    style.setAttribute('media', media);\n  } else {\n    style.removeAttribute('media');\n  }\n\n  if (sourceMap && typeof btoa !== 'undefined') {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    while (style.firstChild) {\n      style.removeChild(style.firstChild);\n    }\n\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar singleton = null;\nvar singletonCounter = 0;\n\nfunction addStyle(obj, options) {\n  var style;\n  var update;\n  var remove;\n\n  if (options.singleton) {\n    var styleIndex = singletonCounter++;\n    style = singleton || (singleton = insertStyleElement(options));\n    update = applyToSingletonTag.bind(null, style, styleIndex, false);\n    remove = applyToSingletonTag.bind(null, style, styleIndex, true);\n  } else {\n    style = insertStyleElement(options);\n    update = applyToTag.bind(null, style, options);\n\n    remove = function remove() {\n      removeStyleElement(style);\n    };\n  }\n\n  update(obj);\n  return function updateStyle(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {\n        return;\n      }\n\n      update(obj = newObj);\n    } else {\n      remove();\n    }\n  };\n}\n\nmodule.exports = function (list, options) {\n  options = options || {}; // Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n  // tags it will allow on a page\n\n  if (!options.singleton && typeof options.singleton !== 'boolean') {\n    options.singleton = isOldIE();\n  }\n\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n\n    if (Object.prototype.toString.call(newList) !== '[object Array]') {\n      return;\n    }\n\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDom[index].references--;\n    }\n\n    var newLastIdentifiers = modulesToDom(newList, options);\n\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n\n      var _index = getIndexByIdentifier(_identifier);\n\n      if (stylesInDom[_index].references === 0) {\n        stylesInDom[_index].updater();\n\n        stylesInDom.splice(_index, 1);\n      }\n    }\n\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\n// eslint-disable-next-line func-names\nmodule.exports = function (useSourceMap) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item, useSourceMap);\n\n      if (item[2]) {\n        return \"@media \".concat(item[2], \" {\").concat(content, \"}\");\n      }\n\n      return content;\n    }).join('');\n  }; // import a list of modules into the list\n  // eslint-disable-next-line func-names\n\n\n  list.i = function (modules, mediaQuery, dedupe) {\n    if (typeof modules === 'string') {\n      // eslint-disable-next-line no-param-reassign\n      modules = [[null, modules, '']];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var i = 0; i < this.length; i++) {\n        // eslint-disable-next-line prefer-destructuring\n        var id = this[i][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _i = 0; _i < modules.length; _i++) {\n      var item = [].concat(modules[_i]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        // eslint-disable-next-line no-continue\n        continue;\n      }\n\n      if (mediaQuery) {\n        if (!item[2]) {\n          item[2] = mediaQuery;\n        } else {\n          item[2] = \"\".concat(mediaQuery, \" and \").concat(item[2]);\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n  var content = item[1] || ''; // eslint-disable-next-line prefer-destructuring\n\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (useSourceMap && typeof btoa === 'function') {\n    var sourceMapping = toComment(cssMapping);\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot || '').concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n  }\n\n  return [content].join('\\n');\n} // Adapted from convert-source-map (MIT)\n\n\nfunction toComment(sourceMap) {\n  // eslint-disable-next-line no-undef\n  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n  var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n  return \"/*# \".concat(data, \" */\");\n}","module.exports = require(\"@material-ui/core/Drawer\");","module.exports = require(\"@material-ui/icons/ExpandMore\");","module.exports = require(\"@material-ui/core/Collapse\");","module.exports = require(\"material-table\");","module.exports = require(\"@material-ui/icons/AddBox\");","module.exports = require(\"@material-ui/icons/ArrowDownward\");","module.exports = require(\"@material-ui/icons/Check\");","module.exports = require(\"@material-ui/icons/ChevronLeft\");","module.exports = require(\"@material-ui/icons/DeleteOutline\");","module.exports = require(\"@material-ui/icons/Edit\");","module.exports = require(\"@material-ui/icons/FilterList\");","module.exports = require(\"@material-ui/icons/FirstPage\");","module.exports = require(\"@material-ui/icons/LastPage\");","module.exports = require(\"@material-ui/icons/Remove\");","module.exports = require(\"@material-ui/icons/SaveAlt\");","module.exports = require(\"@material-ui/icons/ViewColumn\");","module.exports = require(\"@material-ui/core/Tabs\");","module.exports = require(\"@material-ui/core/Tab\");","module.exports = require(\"@material-ui/core/TextField\");","module.exports = require(\"@material-ui/core/FormControlLabel\");","module.exports = require(\"@material-ui/core/Switch\");","module.exports = require(\"@material-ui/core/InputBase\");","module.exports = require(\"@material-ui/core/Breadcrumbs\");","module.exports = require(\"@material-ui/icons/NavigateNext\");","module.exports = require(\"earcut\");","module.exports = require(\"@babylonjs/core/Maths/math\");","module.exports = require(\"@material-ui/core/utils\");","module.exports = require(\"@babel/runtime/helpers/esm/taggedTemplateLiteral\");","module.exports = require(\"styled-components\");","module.exports = require(\"@material-ui/icons/Close\");","module.exports = require(\"@material-ui/core/styles/colorManipulator\");","module.exports = require(\"@material-ui/icons/Label\");","module.exports = require(\"@material-ui/core/Chip\");","module.exports = require(\"@material-ui/icons/Add\");","module.exports = require(\"@material-ui/icons/Today\");","module.exports = require(\"@date-io/date-fns\");","module.exports = require(\"@babel/runtime/helpers/esm/typeof\");","module.exports = require(\"lodash/isEmpty\");","module.exports = \"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' version='1.0' width='400.000000' height='400.000000' preserveAspectRatio='xMidYMid meet'%3E%3Crect id='backgroundrect' width='100%25' height='100%25' x='0' y='0' fill='none' stroke='none'/%3E %3Cg class='currentLayer' style=''%3E%3Ctitle%3ELayer 1%3C/title%3E%3Cg transform='translate(0,400) scale(0.10000000149011612,-0.10000000149011612) ' fill='%23d31b1b' stroke='none' id='svg_1' class='' fill-opacity='1'%3E %3Cpath d='M1770 3990 c-682 -83 -1271 -501 -1570 -1115 -103 -211 -167 -437 -191 -673 -14 -129 -6 -404 14 -522 85 -495 339 -929 729 -1242 232 -187 539 -332 836 -393 957 -199 1909 314 2272 1224 204 512 180 1116 -64 1606 -115 232 -229 387 -412 565 -296 286 -639 460 -1059 536 -106 19 -443 27 -555 14z m-998 -1105 c3 -3 -23 -48 -57 -99 -113 -172 -182 -338 -226 -546 -32 -149 -33 -448 -1 -593 31 -145 70 -258 134 -387 65 -132 64 -140 -28 -140 -66 0 -100 13 -143 53 -74 70 -71 38 -71 748 0 555 2 642 16 690 43 144 129 236 248 265 54 13 119 18 128 9z m2621 -21 c99 -34 192 -157 216 -288 14 -78 15 -1256 1 -1307 -13 -48 -82 -125 -124 -139 -55 -18 -166 -12 -166 9 0 4 25 57 55 118 195 391 215 839 55 1247 -41 105 -117 247 -176 327 -18 25 -30 49 -26 54 10 11 109 -2 165 -21z m-251 -61 c128 -170 217 -370 265 -594 13 -63 18 -129 18 -264 0 -199 -13 -285 -66 -448 -33 -101 -114 -277 -128 -277 -26 0 -31 80 -32 549 0 267 -4 495 -8 505 -6 16 -20 4 -87 -77 -43 -53 -81 -96 -84 -96 -3 -1 -16 41 -29 92 -27 106 -74 215 -132 304 -32 48 -38 66 -31 80 34 61 243 273 271 273 4 0 23 -21 43 -47z m-2206 15 c52 -39 95 -82 171 -170 l74 -88 -42 -61 c-23 -34 -54 -89 -69 -123 -35 -76 -80 -219 -80 -252 0 -13 -4 -24 -8 -24 -4 0 -43 43 -87 95 -43 52 -83 95 -87 95 -4 0 -8 -224 -9 -497 0 -492 -5 -565 -34 -565 -16 0 -94 166 -130 279 -52 159 -69 294 -62 493 8 230 47 384 147 585 56 112 154 255 174 255 7 0 26 -10 42 -22z m458 -511 l133 -157 -20 -58 c-13 -39 -19 -85 -19 -147 -1 -150 44 -260 151 -365 107 -105 214 -150 361 -150 241 0 443 162 500 399 16 69 8 222 -15 278 l-17 43 132 157 c73 87 136 159 140 161 24 9 119 -186 148 -303 11 -44 22 -104 25 -134 l4 -54 -329 -388 c-343 -405 -362 -424 -466 -455 -101 -31 -258 -12 -341 41 -48 29 -83 69 -607 691 -52 62 -94 121 -94 131 0 52 33 202 60 271 33 86 99 204 112 200 5 -2 68 -74 142 -161z m376 -444 c85 -102 167 -194 182 -204 62 -45 81 -30 292 224 76 92 142 165 146 162 13 -8 20 -110 10 -167 -27 -170 -153 -299 -324 -334 -130 -27 -257 9 -356 102 -61 57 -116 162 -125 239 -8 57 1 165 13 164 4 0 77 -84 162 -186z' id='svg_2' fill='%23d31b1b' fill-opacity='1'/%3E %3C/g%3E%3C/g%3E%3C/svg%3E\"","module.exports = require(\"@material-ui/core/Paper\");","module.exports = require(\"@material-ui/core/FormHelperText\");","module.exports = require(\"@babylonjs/loaders\");","var api = require(\"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!./Snackbar.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"body.react-confirm-alert-body-element {\\n  overflow: hidden;\\n}\\n\\n.react-confirm-alert-blur {\\n  filter: url(#gaussian-blur);\\n  filter: blur(2px);\\n  -webkit-filter: blur(2px);\\n}\\n\\n.react-confirm-alert-overlay {\\n  position: fixed;\\n  top: calc(100vh - 300px);\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n  z-index: 99;\\n  display: -webkit-flex;\\n  display: -moz-flex;\\n  display: -ms-flex;\\n  display: -o-flex;\\n  display: flex;\\n  justify-content: flex-start;\\n  -ms-align-items: center;\\n  align-items: flex-end;\\n  opacity: 1;\\n}\\n\\n.react-confirm-alert-body {\\n  width: 400px;\\n  padding: 30px;\\n}\\n\\n.react-confirm-alert-svg {\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n}\\n\\n.react-confirm-alert-body > h1 {\\n  margin-top: 0;\\n}\\n\\n.react-confirm-alert-body > h3 {\\n  margin: 0;\\n  font-size: 16px;\\n}\\n\\n.react-confirm-alert-button-group {\\n  display: -webkit-flex;\\n  display: -moz-flex;\\n  display: -ms-flex;\\n  display: -o-flex;\\n  display: flex;\\n  justify-content: flex-start;\\n  margin-top: 20px;\\n}\\n\\n.react-confirm-alert-button-group > button {\\n  outline: none;\\n  background: #333;\\n  border: none;\\n  display: inline-block;\\n  padding: 6px 18px;\\n  color: #eee;\\n  margin-right: 10px;\\n  border-radius: 5px;\\n  font-size: 12px;\\n  cursor: pointer;\\n}\\n\\n.icon-container {\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n}\\n\\n.icon-container:hover {\\n  cursor: pointer;\\n}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","module.exports = require(\"fontsource-cabin\");","module.exports = require(\"fontsource-roboto\");","module.exports = require(\"fontsource-noto-sans\");","var api = require(\"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!./Logs.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".flow-action {\\n  display: flex;\\n  background: transparent;\\n  width: 35px;\\n  height: 35px;\\n  margin: 6px;\\n  border-radius: 50%;\\n  justify-content: center;\\n  align-items: center;\\n  transition: background-color 0.5s;\\n}\\n\\n.flow-action:hover {\\n  background: rgba(11, 106, 138, 0.2);\\n  cursor: pointer;\\n}\\n\\n.robot-logs-container {\\n  display: flex;\\n  flex-direction: column;\\n  height: 1px;\\n  flex-grow: 1;\\n}\\n\\n.tree-grow-overflow {\\n  flex-grow: 0.5;\\n  overflow-y: auto;\\n  min-height: 0;\\n  height: 100%;\\n}\\n\\n.logs-grow-overflow {\\n  flex-grow: 1;\\n  overflow-y: auto;\\n  min-height: 0;\\n  height: 100%;\\n}\\n\\n.saving {\\n  /* font-size: 40px; */\\n  margin: 0;\\n}\\n\\n.saving span {\\n  font-size: 15px;\\n  animation-name: blink;\\n  animation-duration: 1.4s;\\n  animation-iteration-count: infinite;\\n  animation-fill-mode: both;\\n}\\n\\n.saving span:nth-child(2) {\\n  animation-delay: 0.2s;\\n}\\n\\n.saving span:nth-child(3) {\\n  animation-delay: 0.4s;\\n}\\n\\n@keyframes blink {\\n  0% {\\n    opacity: 0.2;\\n  }\\n  20% {\\n    opacity: 1;\\n  }\\n  100% {\\n    opacity: 0.2;\\n  }\\n}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","import React from \"react\";\nimport MaterialButton from \"@material-ui/core/Button\";\nimport PropTypes from \"prop-types\";\n\nconst Button = props => {\n  return (\n    <MaterialButton\n      className={props.className}\n      style={props.style}\n      onClick={props.onClick}\n      color={props.color}\n      variant={props.variant}\n      size={props.size}\n      startIcon={props.startIcon}\n      disabled={props.disabled}\n    >\n      {props.children}\n    </MaterialButton>\n  );\n};\n\nButton.propTypes = {\n  style: PropTypes.object,\n  onClick: PropTypes.func,\n  color: PropTypes.string,\n  variant: PropTypes.string.isRequired,\n  size: PropTypes.string,\n  startIcon: PropTypes.element,\n  children: PropTypes.node.isRequired,\n  disabled: PropTypes.bool\n};\nButton.defaultProps = {\n  style: {},\n  onClick: () => console.log(\"Click MOV.AI button\"),\n  color: \"default\", // default, inherit, primary or secondary\n  variant: \"contained\", // text, outlined, contained\n  size: \"medium\", // small, medium, large\n  startIcon: undefined,\n  children: <div></div>,\n  disabled: false\n};\n\nexport default Button;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Button from \"../Button\";\nimport {\n  Card,\n  Typography,\n  CardContent,\n  Divider,\n  // Button,\n  CardActions,\n  Modal\n} from \"@material-ui/core\";\n\nconst style = {\n  margin: \"auto\",\n  position: \"absolute\",\n  overflow: \"auto\",\n  display: \"flex\",\n  flexDirection: \"column\"\n};\n\nconst AbstractModal = props => {\n  const onKeyPress = e => {\n    if (e.key === \"Enter\") {\n      submit();\n    }\n  };\n\n  const submit = () => {\n    props.onSubmit();\n  };\n\n  const cancel = () => {\n    props.onCancel();\n  };\n\n  return (\n    <Modal\n      onKeyPress={onKeyPress}\n      open={props.open}\n      onClose={cancel}\n      style={{\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\"\n      }}\n    >\n      <Card\n        style={{\n          ...style,\n          width: props.width,\n          height: props.height,\n          minWidth: \"260px\",\n          minHeight: \"280px\"\n        }}\n      >\n        <CardContent\n          style={{\n            flexGrow: 1,\n            display: \"flex\",\n            flexDirection: \"column\",\n            minHeight: 0\n          }}\n        >\n          <Typography\n            variant=\"h5\"\n            style={{\n              padding: \"12px 0px 12px 6px\",\n              fontWeight: 600\n            }}\n          >\n            {props.title}\n          </Typography>\n          <div\n            style={{\n              paddingLeft: \"6px\",\n              flexGrow: 1,\n              overflow: \"auto\",\n              minHeight: 0\n            }}\n          >\n            {props.children}\n          </div>\n        </CardContent>\n        <Divider />\n        <CardActions style={{ alignSelf: \"flex-end\" }}>\n          <Button onClick={cancel} variant=\"outlined\" color={props.cancelColor}>\n            {props.cancelText}\n          </Button>\n          <Button color={props.submitColor} onClick={submit}>\n            {props.submitText}\n          </Button>\n        </CardActions>\n      </Card>\n    </Modal>\n  );\n};\n\nAbstractModal.propTypes = {\n  onSubmit: PropTypes.func,\n  onCancel: PropTypes.func,\n  open: PropTypes.bool,\n  title: PropTypes.string,\n  submitText: PropTypes.string,\n  submitColor: PropTypes.string,\n  cancelText: PropTypes.string,\n  cancelColor: PropTypes.string,\n  width: PropTypes.string,\n  height: PropTypes.string\n};\n\nAbstractModal.defaultProps = {\n  onSubmit: () => {},\n  onCancel: () => {},\n  open: false,\n  title: \"New\",\n  submitText: \"Confirm\",\n  submitColor: \"primary\",\n  cancelText: \"Cancel\",\n  cancelColor: \"inherit\",\n  width: \"25%\",\n  height: \"25%\"\n};\n\nexport default AbstractModal;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport AbstractModal from \"./AbstractModal\";\n\nconst ConfirmAlertModal = props => {\n  return (\n    <AbstractModal\n      onSubmit={props.onSubmit}\n      onCancel={props.onCancel}\n      open={props.open}\n      title={props.title}\n      submitText={props.submitText}\n      submitColor={props.submitColor}\n      cancelText={props.cancelText}\n      cancelColor={props.cancelColor}\n    >\n      <div>{props.message}</div>\n      <div>{props.children}</div>\n    </AbstractModal>\n  );\n};\n\nConfirmAlertModal.propTypes = {\n  title: PropTypes.string,\n  message: PropTypes.string,\n  onSubmit: PropTypes.func,\n  onCancel: PropTypes.func,\n  open: PropTypes.bool,\n  submitText: PropTypes.string,\n  submitColor: PropTypes.string,\n  cancelText: PropTypes.string,\n  cancelColor: PropTypes.string\n};\n\nConfirmAlertModal.defaultProps = {\n  title: \"Insert Text here\",\n  message: \"Are you sure?\",\n  onSubmit: () => {},\n  onCancel: () => {},\n  open: false,\n  submitText: \"Delete\",\n  submitColor: \"secondary\",\n  cancelText: \"Cancel\",\n  cancelColor: \"primary\"\n};\n\nexport default ConfirmAlertModal;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport MaterialDrawer from \"@material-ui/core/Drawer\";\n\nconst Drawer = props => {\n  return (\n    <MaterialDrawer\n      style={props.style}\n      anchor={props.anchor}\n      open={props.open}\n      onClose={props.onClose}\n    >\n      {props.children}\n    </MaterialDrawer>\n  );\n};\n\nDrawer.propTypes = {\n  style: PropTypes.object,\n  anchor: PropTypes.string,\n  open: PropTypes.bool,\n  children: PropTypes.object\n};\n\nDrawer.defaultProps = {\n  style: {},\n  anchor: \"left\",\n  open: false,\n  children: <div></div>\n};\n\nDrawer.ANCHOR = { left: \"left\", right: \"right\", top: \"top\", bottom: \"bottom\" };\n\nexport default Drawer;\n","import React from \"react\";\nimport ChevronRightIcon from \"@material-ui/icons/ChevronRight\";\nimport ExpandMore from \"@material-ui/icons/ExpandMore\";\nimport PropTypes from \"prop-types\";\nimport MaterialCollapse from \"@material-ui/core/Collapse\";\nimport { Divider, ListItem, List } from \"@material-ui/core\";\n\nconst Collapse = props => {\n  const [open, setOpen] = React.useState(props.open);\n\n  React.useEffect(() => {\n    if (props.open !== open) {\n      setOpen(props.open);\n    }\n  }, [props.open]);\n\n  const handleClickFactory = clickLambda => () => {\n    setOpen(!open);\n    clickLambda();\n  };\n\n  return (\n    <List>\n      <ListItem button onClick={handleClickFactory(props.onClick)}>\n        {open ? (\n          <ExpandMore style={{ ...props.iconStyle }} />\n        ) : (\n          <ChevronRightIcon style={{ ...props.iconStyle }} />\n        )}\n        <div style={{ width: \"100%\" }}>{props.item}</div>\n      </ListItem>\n      {props.divided ? <Divider /> : []}\n      <MaterialCollapse\n        className={props.className}\n        style={props.style}\n        in={open}\n      >\n        {props.children}\n      </MaterialCollapse>\n    </List>\n  );\n};\n\nCollapse.propTypes = {\n  item: PropTypes.object,\n  onClick: PropTypes.func,\n  open: PropTypes.bool,\n  divided: PropTypes.bool,\n  iconStyle: PropTypes.object\n};\n\nCollapse.defaultProps = {\n  item: <div></div>,\n  onClick: () => {},\n  open: false,\n  divided: false,\n  style: {},\n  iconStyle: {}\n};\n\nexport default Collapse;\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport PropTypes from \"prop-types\";\n\nconst useStyles = makeStyles(theme => ({\n  container: {\n    height: \"100%\",\n    backgroundColor: props => props.backgroundColor,\n    width: props => props.width,\n    display: \"flex\",\n    flexDirection: \"column\"\n  },\n  logoArea: {\n    padding: \"17px\",\n    textAlign: \"center\",\n    alignItems: \"center\",\n    justifyContent: \"center\"\n  },\n  navigationArea: {\n    flexGrow: 1,\n    display: \"flex\",\n    flexDirection: \"column\",\n    //justifyContent: \"center\",\n    alignItems: \"center\"\n  },\n  accountArea: {\n    padding: props => (props.unsetAccountAreaPadding ? \"unset\" : \"17px\"),\n    textAlign: \"center\",\n    alignItems: \"center\",\n    justifyContent: \"center\"\n  }\n}));\n\nconst VerticalBar = props => {\n  const classes = useStyles(props);\n  return (\n    <div className={classes.container}>\n      <div className={classes.logoArea}>{props.upperElement}</div>\n      <div className={classes.navigationArea}>\n        {props.navigationList.map((element, index) => {\n          return (\n            <div key={index} style={{ padding: \"15px 0px\" }}>\n              {element}\n            </div>\n          );\n        })}\n      </div>\n      <div className={classes.accountArea}>{props.lowerElement}</div>\n    </div>\n  );\n};\n\nVerticalBar.propTypes = {\n  upperElement: PropTypes.node.isRequired,\n  navigationList: PropTypes.array,\n  lowerElement: PropTypes.node.isRequired,\n  width: PropTypes.string,\n  backgroundColor: PropTypes.string,\n  unsetAccountAreaPadding: PropTypes.bool\n};\nVerticalBar.defaultProps = {\n  upperElement: <div></div>,\n  navigationList: [<div></div>],\n  lowerElement: <div></div>,\n  width: \"68px\",\n  backgroundColor: \"#424242\",\n  unsetAccountAreaPadding: false\n};\n\nexport default VerticalBar;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Menu from \"@material-ui/core/Menu\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\n\nconst ContextMenu = props => {\n  const [anchorEl, setAnchorEl] = React.useState(null);\n\n  const handleClick = event => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  return (\n    <div>\n      {React.cloneElement(props.element, {\n        onClick: evt => {\n          if (props.element.props.onClick !== undefined) {\n            props.element.props.onClick(); // If user defined a onClick\n          }\n          handleClick(evt); // opens the contextMenu\n        }\n      })}\n      <Menu\n        id=\"simple-menu\"\n        anchorEl={anchorEl}\n        keepMounted\n        open={Boolean(anchorEl)}\n        onClose={handleClose}\n      >\n        {props.menuList.reduce((result, item, index) => {\n          if (item && typeof item !== \"function\") {\n            result.push(\n              <MenuItem\n                onClick={() => {\n                  item.onClick();\n                  if (item.onClose || item.onClose === undefined) {\n                    handleClose();\n                  }\n                }}\n                key={index}\n              >\n                {item.element}\n              </MenuItem>\n            );\n          }\n          return result;\n        }, [])}\n      </Menu>\n    </div>\n  );\n};\n\nContextMenu.propTypes = {\n  element: PropTypes.node.isRequired,\n  navigationList: PropTypes.array,\n  lowerElement: PropTypes.node.isRequired,\n  width: PropTypes.string,\n  backgroundColor: PropTypes.string\n};\nContextMenu.defaultProps = {\n  element: <div>Ahaha</div>,\n  menuList: [\n    {\n      onClick: () => console.log(\"clicked 1\"),\n      element: \"Profile\",\n      onClose: true\n    }\n  ],\n  lowerElement: <div></div>,\n  width: \"68px\",\n  backgroundColor: \"#424242\"\n};\n\nexport default ContextMenu;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport MaterialTable from \"material-table\";\n\nimport { forwardRef } from \"react\";\n\nimport AddBox from \"@material-ui/icons/AddBox\";\nimport ArrowDownward from \"@material-ui/icons/ArrowDownward\";\nimport Check from \"@material-ui/icons/Check\";\nimport ChevronLeft from \"@material-ui/icons/ChevronLeft\";\nimport ChevronRight from \"@material-ui/icons/ChevronRight\";\nimport Clear from \"@material-ui/icons/Clear\";\nimport DeleteOutline from \"@material-ui/icons/DeleteOutline\";\nimport Edit from \"@material-ui/icons/Edit\";\nimport FilterList from \"@material-ui/icons/FilterList\";\nimport FirstPage from \"@material-ui/icons/FirstPage\";\nimport LastPage from \"@material-ui/icons/LastPage\";\nimport Remove from \"@material-ui/icons/Remove\";\nimport SaveAlt from \"@material-ui/icons/SaveAlt\";\nimport Search from \"@material-ui/icons/Search\";\nimport ViewColumn from \"@material-ui/icons/ViewColumn\";\n\nconst tableIcons = {\n  Add: forwardRef((props, ref) => <AddBox {...props} ref={ref} />),\n  Check: forwardRef((props, ref) => <Check {...props} ref={ref} />),\n  Clear: forwardRef((props, ref) => <Clear {...props} ref={ref} />),\n  Delete: forwardRef((props, ref) => <DeleteOutline {...props} ref={ref} />),\n  DetailPanel: forwardRef((props, ref) => (\n    <ChevronRight {...props} ref={ref} />\n  )),\n  Edit: forwardRef((props, ref) => <Edit {...props} ref={ref} />),\n  Export: forwardRef((props, ref) => <SaveAlt {...props} ref={ref} />),\n  Filter: forwardRef((props, ref) => <FilterList {...props} ref={ref} />),\n  FirstPage: forwardRef((props, ref) => <FirstPage {...props} ref={ref} />),\n  LastPage: forwardRef((props, ref) => <LastPage {...props} ref={ref} />),\n  NextPage: forwardRef((props, ref) => <ChevronRight {...props} ref={ref} />),\n  PreviousPage: forwardRef((props, ref) => (\n    <ChevronLeft {...props} ref={ref} />\n  )),\n  ResetSearch: forwardRef((props, ref) => <Clear {...props} ref={ref} />),\n  Search: forwardRef((props, ref) => <Search {...props} ref={ref} />),\n  SortArrow: forwardRef((props, ref) => <ArrowDownward {...props} ref={ref} />),\n  ThirdStateCheck: forwardRef((props, ref) => <Remove {...props} ref={ref} />),\n  ViewColumn: forwardRef((props, ref) => <ViewColumn {...props} ref={ref} />),\n};\n\n// More information in: https://material-table.com/#/docs/all-props\n\nconst Table = (props) => {\n  return (\n    <MaterialTable\n      style={props.style}\n      title={props.title}\n      columns={props.columns}\n      data={props.data}\n      icons={tableIcons}\n      actions={props.actions}\n      options={props.options}\n      components={props.components}\n      localization={props.localization}\n    />\n  );\n};\n\nTable.propTypes = {\n  style: PropTypes.object,\n  title: PropTypes.string,\n  columns: PropTypes.array,\n  data: PropTypes.array,\n  actions: PropTypes.array,\n  options: PropTypes.object,\n  components: PropTypes.object,\n  localization: PropTypes.object,\n};\nTable.defaultProps = {\n  style: {},\n  title: \"\",\n  columns: [],\n  data: [],\n  actions: [],\n  options: {\n    actionsColumnIndex: -1,\n    draggable: false,\n    grouping: false,\n    search: false,\n    toolbar: false,\n    searchFieldAlignment: \"left\",\n    paging: false,\n  },\n  components: {},\n};\n\nexport default Table;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport MaterialTabs from \"@material-ui/core/Tabs\";\nimport Tab from \"@material-ui/core/Tab\";\nimport Typography from \"@material-ui/core/Typography\";\n\nfunction TabPanel(props) {\n  const { children, selectedTab, index, ...other } = props;\n\n  return (\n    <Typography\n      component=\"div\"\n      role=\"tabpanel\"\n      hidden={selectedTab !== index}\n      id={`tabpanel-${index}`}\n      aria-labelledby={`tab-${index}`}\n      {...other}\n    >\n      {selectedTab === index && children}\n    </Typography>\n  );\n}\n\nTabPanel.propTypes = {\n  children: PropTypes.node,\n  index: PropTypes.any.isRequired,\n  selectedTab: PropTypes.any.isRequired\n};\n\nfunction a11yProps(index) {\n  return {\n    id: `tab-${index}`,\n    \"aria-controls\": `tabpanel-${index}`\n  };\n}\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    flexGrow: 1,\n    height: \"100%\"\n  },\n  tabPanel: {\n    flexGrow: 1,\n    minHeight: 0,\n    height: \"calc(100% - 48px)\",\n    overflowY: \"auto\"\n  }\n}));\n\nexport default function Tabs(props) {\n  const classes = useStyles();\n  const [selectedTab, setSelectedTab] = React.useState(props.selectedTab);\n\n  React.useEffect(() => {\n    if (props.selectedTab !== selectedTab) {\n      setSelectedTab(props.selectedTab);\n    }\n  }, [props.selectedTab]);\n\n  const handleChange = (event, newSelectedTab) => {\n    setSelectedTab(newSelectedTab);\n  };\n\n  return (\n    <div className={classes.root}>\n      <MaterialTabs\n        value={selectedTab}\n        onChange={handleChange}\n        indicatorColor=\"primary\"\n        textColor=\"primary\"\n      >\n        {props.tabList.map((tab, index) => (\n          <Tab key={index} label={tab.label} {...a11yProps(index)} />\n        ))}\n      </MaterialTabs>\n      {props.tabList.map((tab, index) => (\n        <TabPanel\n          key={index}\n          selectedTab={selectedTab}\n          index={index}\n          className={props.scrollable ? classes.tabPanel : undefined}\n        >\n          {tab.component}\n        </TabPanel>\n      ))}\n    </div>\n  );\n}\n\nTabs.propTypes = {\n  tabList: PropTypes.array,\n  selectedTab: PropTypes.number,\n  scrollable: PropTypes.bool\n};\n\nTabs.defaultProps = {\n  tabList: [\n    { label: \"Tab 1\", component: <div>Component 1</div> },\n    {\n      label: \"Tab 2\",\n      component: (\n        <div>\n          Lorem Ipsum is simply dummy text of the printing and typesetting\n          industry. Lorem Ipsum has been the industry standard dummy text ever\n          since the 1500s, when an unknown printer took a galley of type and\n          scrambled it to make a type specimen book. It has survived not only\n          five centuries, but also the leap into electronic typesetting,\n          remaining essentially unchanged. It was popularised in the 1960s with\n          the release of Letraset sheets containing Lorem Ipsum passages, and\n          more recently with desktop publishing software like Aldus PageMaker\n          including versions of Lorem Ipsum.\n        </div>\n      )\n    },\n    { label: \"Tab 3\", component: <div>Component 3</div> }\n  ],\n  selectedTab: 0,\n  scrollable: true\n};\n","import React from \"react\";\nimport TextField from \"@material-ui/core/TextField\";\nimport PropTypes from \"prop-types\";\n\nconst Text = props => {\n  return <TextField {...props}></TextField>;\n};\n\nText.propTypes = {};\nText.defaultProps = {};\n\nexport default Text;\n","import React from \"react\";\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\nimport Switch from \"@material-ui/core/Switch\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { green, grey } from \"@material-ui/core/colors\";\nimport PropTypes from \"prop-types\";\n\nconst useStyles = makeStyles(theme => ({\n  label: {\n    fontFamily: \"Roboto\",\n    fontStyle: \"normal\",\n    fontWeight: \"normal\",\n    fontSize: \"14px\",\n    marginLeft: 0,\n    marginRight: 0,\n    marginBottom: 0\n  },\n  colorSwitchBase: {\n    color: grey[300],\n    \"&$colorChecked\": {\n      color: green[500],\n      \"& + $colorBar\": {\n        backgroundColor: green[500]\n      }\n    }\n  },\n  colorBar: {},\n  colorChecked: {}\n}));\n\nconst Toggle = props => {\n  const classes = useStyles();\n  return (\n    <FormControlLabel\n      control={\n        <Switch\n          checked={props.toggle}\n          onChange={props.onToggle}\n          color={props.color}\n          disabled={props.disabled}\n          hidden={props.hidden}\n          size={props.size}\n          classes={{\n            switchBase: classes.colorSwitchBase,\n            checked: classes.colorChecked,\n            track: classes.colorBar\n          }}\n        />\n      }\n      labelPlacement={props.labelPlacement}\n      label={props.label}\n      classes={{ label: classes.label }}\n      style={{ ...props.style, marginLeft: 0, marginRight: 0, marginBottom: 0 }}\n    />\n  );\n};\n\nToggle.propTypes = {\n  toggle: PropTypes.bool,\n  onToggle: PropTypes.func,\n  label: PropTypes.string,\n  color: PropTypes.string,\n  labelPlacement: PropTypes.string, // 'end', 'start', 'top', 'bottom'\n  style: PropTypes.object\n};\nToggle.defaultProps = {\n  color: \"primary\" // or secondary\n};\n\nexport default Toggle;\n","import React, { Component } from \"react\";\nimport { fade, withStyles } from \"@material-ui/core/styles\";\nimport InputBase from \"@material-ui/core/InputBase\";\nimport SearchIcon from \"@material-ui/icons/Search\";\nimport PropTypes from \"prop-types\";\n\nconst styles = theme => ({\n  search: {\n    position: \"relative\",\n    borderRadius: theme.shape.borderRadius,\n    backgroundColor: fade(theme.palette.common.white, 0.15),\n    \"&:hover\": {\n      backgroundColor: fade(theme.palette.common.white, 0.25)\n    },\n    marginRight: theme.spacing(2),\n    marginLeft: 0,\n    width: \"100%\",\n    [theme.breakpoints.up(\"sm\")]: {\n      marginLeft: theme.spacing(3),\n      width: \"auto\"\n    }\n  },\n  searchIcon: {\n    width: theme.spacing(7),\n    height: \"100%\",\n    position: \"absolute\",\n    pointerEvents: \"none\",\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\"\n  },\n  inputRoot: {\n    color: \"inherit\"\n  },\n  inputInput: {\n    padding: theme.spacing(1, 1, 1, 7),\n    transition: theme.transitions.create(\"width\"),\n    width: \"100%\",\n    [theme.breakpoints.up(\"md\")]: {\n      width: 200\n    }\n  }\n});\n\nclass SearchInput extends Component {\n  searchInput = undefined;\n  timer = undefined;\n\n  handleChange = evt => {\n    this.searchInput = evt.target.value;\n    if (this.props.enableTimeout) {\n      if (this.timer) {\n        clearTimeout(this.timer);\n      }\n      this.timer = setTimeout(this.handleSearch, this.props.time);\n    } else {\n      this.handleSearch();\n    }\n  };\n\n  handleSearch = () => {\n    if (this.searchInput !== undefined) this.props.onChange(this.searchInput);\n  };\n\n  render() {\n    const { classes, style, placeholder } = this.props;\n    return (\n      <div className={classes.search} style={style}>\n        <div className={classes.searchIcon}>\n          <SearchIcon />\n        </div>\n        <InputBase\n          ref={this.setSearchInput}\n          placeholder={placeholder}\n          classes={{\n            root: classes.inputRoot,\n            input: classes.inputInput\n          }}\n          inputProps={{ \"aria-label\": \"search\" }}\n          onChange={this.handleChange}\n        />\n      </div>\n    );\n  }\n}\n\nSearchInput.propTypes = {\n  placeholder: PropTypes.string,\n  onChange: PropTypes.func,\n  time: PropTypes.number,\n  enableTimeout: PropTypes.bool,\n  style: PropTypes.object\n};\n\nSearchInput.defaultProps = {\n  placeholder: \"Search...\",\n  onChange: input => {\n    console.log(input);\n  },\n  time: 250,\n  enableTimeout: true,\n  style: {}\n};\n\nexport default withStyles(styles, { withTheme: true })(SearchInput);\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Breadcrumbs from \"@material-ui/core/Breadcrumbs\";\nimport NavigateNextIcon from \"@material-ui/icons/NavigateNext\";\nimport Typography from \"@material-ui/core/Typography\";\nimport PropTypes from \"prop-types\";\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    \"& > * + *\": {\n      marginTop: theme.spacing(2)\n    }\n  },\n  link: {\n    fontSize: \"24px\",\n    fontWeight: 800,\n    fontFamily: \"Avenir\",\n    \"&:hover\": {\n      cursor: \"pointer\",\n      textDecoration: \"underline\"\n    }\n  },\n  lastLabel: {\n    fontSize: \"24px\",\n    fontWeight: 800,\n    fontFamily: \"Avenir\"\n  }\n}));\n\nconst Breadcrumb = props => {\n  const classes = useStyles();\n  return (\n    <div className={classes.root}>\n      <Breadcrumbs\n        separator={<NavigateNextIcon fontSize=\"small\" />}\n        aria-label=\"breadcrumb\"\n        style={props.style}\n      >\n        {props.pathList.map((element, index) => {\n          if (props.pathList.length - 1 !== index) {\n            return (\n              <Typography\n                key={index}\n                color=\"primary\"\n                variant=\"inherit\"\n                className={classes.link}\n                onClick={element.function}\n              >\n                {element.label}\n              </Typography>\n            );\n          }\n        })}\n        <Typography color=\"textPrimary\" className={classes.lastLabel}>\n          {props.pathList[props.pathList.length - 1].label}\n        </Typography>\n      </Breadcrumbs>\n    </div>\n  );\n};\n\nBreadcrumb.propTypes = {\n  pathList: PropTypes.array\n};\n\nBreadcrumb.defaultProps = {\n  pathList: [\n    { label: \"Mov.ai\", function: () => console.log(\"pth1/\") },\n    { label: \"User\", function: () => console.log(\"path1/path2\") },\n    { label: \"John Doe\" }\n  ]\n};\n\nexport default Breadcrumb;\n","//========================================================================================\n/*                                                                                      *\n *         Based from https://doc.babylonjs.com/resources/babylonjs_and_reactjs         *\n *                                                                                      */\n//========================================================================================\n\nimport { Engine, Scene } from \"@babylonjs/core\";\nimport React, { useEffect, useRef, useState } from \"react\";\nimport ReactResizeDetector from \"react-resize-detector\";\nimport PropTypes from \"prop-types\";\nconst FLEX_STYLE = {\n  display: \"flex\",\n  flexDirection: \"column\",\n  flexGrow: 1\n};\n\nconst BaseViewer = props => {\n  const reactCanvas = useRef(null);\n  const {\n    antialias,\n    engineOptions,\n    adaptToDeviceRatio,\n    sceneOptions,\n    onRender,\n    onSceneReady,\n    is2render,\n    sceneFactory,\n    ...rest\n  } = props;\n\n  const [loaded, setLoaded] = useState(false);\n  const [scene, setScene] = useState(null);\n  const [size, setSize] = useState({ width: 100, height: 100 });\n\n  useEffect(() => {\n    if (!loaded) {\n      setLoaded(true);\n      const engine = new Engine(\n        reactCanvas.current,\n        antialias,\n        engineOptions,\n        adaptToDeviceRatio\n      );\n      const scene = sceneFactory\n        ? sceneFactory(engine)\n        : new Scene(engine, sceneOptions);\n      setScene(scene);\n      if (scene.isReady()) {\n        props.onSceneReady(scene);\n      } else {\n        scene.onReadyObservable.addOnce(scene => props.onSceneReady(scene));\n      }\n      if (!is2render) return;\n      engine.runRenderLoop(() => {\n        if (typeof onRender === \"function\") {\n          onRender(scene);\n        }\n        scene.render();\n      });\n    }\n\n    return () => {\n      if (scene !== null) scene.dispose();\n    };\n  }, [reactCanvas]);\n\n  const onResize = (width, height) => {\n    setSize({\n      width,\n      height: height <= window.innerHeight ? height : window.innerHeight * 0.85\n    });\n    scene && scene.getEngine().resize();\n  };\n\n  loaded && reactCanvas.current.focus();\n  return (\n    <div style={{ ...FLEX_STYLE }}>\n      <canvas\n        ref={reactCanvas}\n        width={size.width}\n        height={size.height}\n        {...rest}\n      />\n      <ReactResizeDetector handleWidth handleHeight onResize={onResize} />\n    </div>\n  );\n};\n\nBaseViewer.propTypes = {\n  antialias: PropTypes.bool,\n  engineOptions: PropTypes.object,\n  adaptToDeviceRatio: PropTypes.bool,\n  sceneOptions: PropTypes.object,\n  onSceneReady: PropTypes.func,\n  onRender: PropTypes.func,\n  is2render: PropTypes.bool,\n  sceneFactory: PropTypes.func\n};\n\nBaseViewer.defaultProps = {\n  antialias: true,\n  onSceneReady: scene => {},\n  is2render: true\n};\n\nexport default BaseViewer;\n","//immutable class, not managing exceptions\nclass Vec2 {\n  constructor(x, y) {\n    this.vec = [x, y].map(z => (z ? z : 0));\n  }\n\n  get x() {\n    return this.vec[0];\n  }\n\n  get y() {\n    return this.vec[1];\n  }\n\n  toArray() {\n    return this.vec;\n  }\n\n  add(y) {\n    return this.op(y, (a, b) => a + b);\n  }\n\n  sub(y) {\n    return this.op(y, (a, b) => a - b);\n  }\n\n  mul(y) {\n    return this.op(y, (a, b) => a * b);\n  }\n\n  div(y) {\n    return this.op(y, (a, b) => a / b);\n  }\n\n  dot(y) {\n    return this.vec.reduce((acc, v, i) => acc + v * y.vec[i], 0);\n  }\n\n  prod(y) {\n    return new Vec2(this.x * y.x - this.y * y.y, this.x * y.y + this.y * y.x);\n  }\n\n  length() {\n    return Math.sqrt(this.dot(this));\n  }\n\n  normalize() {\n    return this.scale(1 / this.length());\n  }\n\n  dual() {\n    return new Vec2(-this.y, this.x);\n  }\n\n  sym() {\n    return this.scale(-1);\n  }\n\n  conj() {\n    return new Vec2(this.x, -this.y);\n  }\n\n  scale(r) {\n    return this.map(z => z * r);\n  }\n\n  map(lambda) {\n    return Vec2.fromArray(this.vec.map(lambda));\n  }\n\n  /**\n   * Returns a vec2 from the operation function bilambda\n   * @param {*} y\n   * @param {*} biLambda\n   */\n  op(y, biLambda) {\n    return Vec2.fromArray(this.vec.map((v, i) => biLambda(v, y.vec[i])));\n  }\n\n  reduce(fold, initial) {\n    return this.vec.reduce(fold, initial);\n  }\n\n  toObject() {\n    return { x: this.x, y: this.y };\n  }\n\n  toString() {\n    return `{x: ${this.x}, y:${this.y}}`;\n  }\n\n  static fromArray(array) {\n    if (array.length < 2) throw new Error(\"array must have size > 2\");\n    return new Vec2(array[0], array[1]);\n  }\n\n  static of(x, y) {\n    return new Vec2(x, y);\n  }\n\n  static ZERO = new Vec2(0, 0);\n  static e1 = new Vec2(1, 0);\n  static e2 = new Vec2(0, 1);\n}\n\nexport default Vec2;\n","import { Vector3 } from \"@babylonjs/core\";\nimport Vec2 from \"./Vec2\";\n\n/**\n * Class that describes immutable 3-vectors\n */\nclass Vec3 {\n  //no for's because performance\n  constructor(array) {\n    if (array.constructor !== Array || array.length < 3)\n      throw new Error(`${array} is not a valid 3-vector`);\n    this.vec3 = [...array];\n  }\n\n  get x() {\n    return this.vec3[0];\n  }\n\n  get y() {\n    return this.vec3[1];\n  }\n\n  get z() {\n    return this.vec3[2];\n  }\n\n  add(x) {\n    return this.op(x, (a, b) => a + b);\n  }\n\n  sub(x) {\n    return this.op(x, (a, b) => a - b);\n  }\n\n  mul(x) {\n    return this.op(x, (a, b) => a * b);\n  }\n\n  op(x, operation) {\n    const ans = [];\n    ans[0] = operation(this.vec3[0], x.vec3[0]);\n    ans[1] = operation(this.vec3[1], x.vec3[1]);\n    ans[2] = operation(this.vec3[2], x.vec3[2]);\n    return new Vec3(ans);\n  }\n\n  scale(r) {\n    return this.map(x => x * r);\n  }\n\n  dot(x) {\n    return (\n      this.vec3[0] * x.vec3[0] +\n      this.vec3[1] * x.vec3[1] +\n      this.vec3[2] * x.vec3[2]\n    );\n  }\n\n  map(f) {\n    return new Vec3(this.vec3.map(f));\n  }\n\n  length() {\n    return Math.sqrt(this.dot(this));\n  }\n\n  normalize = () => {\n    const l = this.length();\n    if (l === 0) throw new Error(\"You can't normalize a zero norm vector\");\n    return this.scale(1 / l);\n  };\n\n  toBabylon() {\n    return new Vector3(this.vec3[0], this.vec3[1], this.vec3[2]);\n  }\n\n  toArray() {\n    return this.vec3;\n  }\n\n  toVec2() {\n    return new Vec2(this.x, this.y);\n  }\n\n  equals(v) {\n    if (v.constructor !== this.constructor) return false;\n    return v.vec3\n      .map((x, index) => v.vec3[index] === x)\n      .reduce((e, v) => e && v, true);\n  }\n\n  reduce(binary, initialValue) {\n    return this.vec3.reduce(binary, initialValue);\n  }\n\n  getMax() {\n    return this.reduce((a, b) => Math.max(a, b), -Number.MAX_VALUE);\n  }\n\n  getMin() {\n    return this.reduce((a, b) => Math.min(a, b), Number.MAX_VALUE);\n  }\n\n  someNaNOrInfinite() {\n    return this.vec3.some(x => isNaN(x) || !isFinite(x));\n  }\n\n  static ofBabylon(babylon) {\n    return new Vec3([babylon.x, babylon.y, babylon.z]);\n  }\n\n  static of(array) {\n    return array ? new Vec3(array) : new Vec3([0, 0, 0]);\n  }\n\n  static fromArray(array) {\n    return Vec3.of(array);\n  }\n\n  static random() {\n    return new Vec3([1, 2, 3].map(Math.random()));\n  }\n\n  /**\n   *\n   * @param {*} u: Vec3\n   */\n  static orthogonalBasisFromVector(u) {\n    const identityMatrix = [Vec3.e1, Vec3.e2, Vec3.e3];\n    //choose pivot\n    let pivot = 0;\n    for (let i = 0; i < 3; i++) {\n      if (u.vec3[i] !== 0) {\n        pivot = i;\n        break;\n      }\n    }\n    let v = identityMatrix[(pivot + 1) % 3].add(\n      identityMatrix[pivot].scale(-u.vec3[(pivot + 1) % 3] / u.vec3[pivot])\n    );\n    v = v.normalize();\n    let w = identityMatrix[(pivot + 2) % 3].add(\n      identityMatrix[pivot].scale(-u.vec3[(pivot + 2) % 3] / u.vec3[pivot])\n    );\n    w = w.normalize();\n    w = w.sub(v.scale(v.dot(w)));\n    return { u: u.normalize(), v: v, w: w.normalize() };\n  }\n\n  static ONES = Vec3.of([1, 1, 1]);\n  static ZERO = Vec3.of([0, 0, 0]);\n  static e1 = new Vec3([1, 0, 0]);\n  static e2 = new Vec3([0, 1, 0]);\n  static e3 = new Vec3([0, 0, 1]);\n}\n\nexport default Vec3;\n","import { MasterDB } from \"mov-fe-lib-core\";\n\nclass AnnotationManager {\n  constructor() {\n    if (instance) return instance;\n    instance = this;\n    this.annotations = {};\n    this.observers = [];\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                   Getters & Setters                                  *\n   *                                                                                      */\n  //========================================================================================\n\n  getAnnotations = () => this.annotations;\n\n  load() {\n    this.retrieveAnnotationsFromDb();\n    return this;\n  }\n  /**\n   *\n   * @param {*} lambda: AnnotationManager -> {}\n   */\n  pushObserver(lambda) {\n    this.observers.push(lambda);\n    return this;\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                         Utils                                        *\n   *                                                                                      */\n  //========================================================================================\n\n  retrieveAnnotationsFromDb() {\n    MasterDB.subscribe(\n      { Scope: \"Annotation\", Name: \"*\" },\n      data => {\n        console.log(\"Annotation update\", data);\n        const actionMap = {\n          del: annotation => this.delAnnotation(annotation),\n          set: annotation => this.addAnnotation(annotation)\n        };\n        const annotation = data.key.Annotation;\n        if (data.event in actionMap) {\n          actionMap[data.event](annotation);\n          this.observers.forEach(f => f(this));\n        }\n      },\n      data => {\n        console.log(\"Annotation start\", data);\n        const annotation = data.value.Annotation;\n        this.addAnnotation(annotation);\n      }\n    );\n  }\n\n  delAnnotation(annotation) {\n    if (!annotation) return;\n    const names2delete = Object.keys(annotation).reduce((e, x) => {\n      e.push(x);\n      return e;\n    }, []);\n    Object.keys(this.annotations).forEach(annotationType => {\n      const value = this.annotations[annotationType];\n      value.names = value.names.filter(x => !names2delete.includes(x));\n      value.labels = value.labels.filter(x => !names2delete.includes(x));\n    });\n  }\n\n  addAnnotation(annotation) {\n    if (!annotation) return;\n    Object.keys(annotation).forEach(name => {\n      const annotationObj = annotation[name];\n      if (!annotationObj.Type) return;\n      const type = annotationObj.Type.toLowerCase();\n      const label = annotationObj.Label;\n      if (!(type in this.annotations)) {\n        this.annotations[type] = { names: [], labels: [] };\n      }\n      this.annotations[type].names.push(name);\n      this.annotations[type].labels.push(label ? label : name);\n    });\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                        Static                                        *\n   *                                                                                      */\n  //========================================================================================\n\n  static getInstance() {\n    return new AnnotationManager();\n  }\n\n  static getAnnotations() {\n    return AnnotationManager.getInstance().getAnnotations();\n  }\n}\nlet instance = null;\nexport default AnnotationManager;\n","import { Clipboard as Clip } from \"mov-fe-lib-core\";\n\nconst SCENE_CONTEXT = \"scene\";\n\nexport default class Clipboard {\n  static copy(value) {\n    Clip.write(SCENE_CONTEXT, value);\n  }\n  static paste() {\n    return Clip.read(SCENE_CONTEXT);\n  }\n}\n","import Vec3 from \"../Math/Vec3\";\nimport { Maybe } from \"monet\";\nimport { Utils } from \"mov-fe-lib-core\";\nimport AnnotationManager from \"../Utils/AnnotationManager\";\nimport { Quaternion, Color3, Vector3 } from \"@babylonjs/core\";\nimport Clipboard from \"../Utils/Clipboard\";\n\nconst { capitalize } = Utils;\n\nclass NodeItem {\n  constructor(mesh, keyValueMap = {}) {\n    this.name = mesh.name;\n    this.mesh = mesh;\n    this.mesh.getMouseContextActions = this.getMouseContextActions;\n    this.mesh.nodeItem = this;\n    this.keyValueMap = keyValueMap;\n    //Hack to load annotations\n    AnnotationManager.getInstance();\n  }\n\n  dispose() {\n    this.mesh.dispose();\n  }\n\n  toDict() {\n    return {\n      name: this.name,\n      type: this.getType(),\n      position: Vec3.ofBabylon(this.mesh.position).toArray(),\n      quaternion: Maybe.fromNull(this.mesh.rotationQuaternion)\n        .map(x => [x.w, x.x, x.y, x.z])\n        .orLazy(() => {\n          const q = Quaternion.RotationYawPitchRoll(\n            this.mesh.rotation.y,\n            this.mesh.rotation.x,\n            this.mesh.rotation.z\n          );\n          return [q.w, q.x, q.y, q.z];\n        }),\n      color: Maybe.fromNull(this.mesh.material)\n        .flatMap(x => Maybe.fromNull(x.diffuseColor).map(z => [z.r, z.g, z.b]))\n        .orSome([0, 0, 0]),\n      keyValueMap: this.keyValueMap,\n      isVisible: this.mesh.isEnabled()\n    };\n  }\n\n  /**\n   * Generates json based on https://github.com/rjsf-team/react-jsonschema-form\n   */\n  toForm() {\n    const info = this.toDict();\n    const color = new Color3(info.color[0], info.color[1], info.color[2]);\n    const schema = {\n      jsonSchema: {\n        type: \"object\",\n        properties: {\n          oldName: {\n            type: \"string\"\n          },\n          name: {\n            type: \"string\",\n            title: \"Name\"\n          },\n          type: {\n            type: \"string\",\n            title: \"Type\"\n          },\n          position: {\n            type: \"object\",\n            title: \"Position\",\n            properties: {\n              x: {\n                type: \"number\",\n                title: \"x\"\n              },\n              y: {\n                type: \"number\",\n                title: \"y\"\n              },\n              z: {\n                type: \"number\",\n                title: \"z\"\n              }\n            }\n          },\n          quaternion: {\n            type: \"object\",\n            title: \"Orientation\",\n            properties: {\n              w: {\n                type: \"number\",\n                title: \"w\"\n              },\n              x: {\n                type: \"number\",\n                title: \"x\"\n              },\n              y: {\n                type: \"number\",\n                title: \"y\"\n              },\n              z: {\n                type: \"number\",\n                title: \"z\"\n              }\n            }\n          },\n          color: {\n            type: \"string\",\n            title: \"Color\"\n          }\n        }\n      },\n      uiSchema: {\n        type: {\n          \"ui:disabled\": true\n        },\n        color: {\n          \"ui:widget\": \"color\"\n        },\n        oldName: {\n          \"ui:widget\": \"hidden\"\n        },\n        position: {\n          \"ui:widget\": \"collapse\"\n        },\n        quaternion: {\n          \"ui:widget\": \"collapse\"\n        }\n      },\n      data: {\n        oldName: info.name,\n        name: info.name,\n        type: info.type,\n        position: {\n          x: info.position[0],\n          y: info.position[1],\n          z: info.position[2]\n        },\n        quaternion: {\n          w: info.quaternion[0],\n          x: info.quaternion[1],\n          y: info.quaternion[2],\n          z: info.quaternion[3]\n        },\n        color: color.toHexString()\n      }\n    };\n\n    NodeItem.setAnnotations2Form(schema, this.keyValueMap);\n    return schema;\n  }\n\n  /**\n   * Changes NodeItem based on a form\n   *\n   * Warning: side effect function\n   * @param {*} form\n   */\n  ofForm(form) {\n    this.name = form.name;\n    this.mesh.name = form.name;\n\n    Maybe.fromNull(form.position).forEach(position => {\n      this.mesh.position = new Vector3(position.x, position.y, position.z);\n    });\n    Maybe.fromNull(form.quaternion).forEach(quaternion => {\n      this.mesh.rotationQuaternion = new Quaternion(\n        quaternion.x,\n        quaternion.y,\n        quaternion.z,\n        quaternion.w\n      ).normalize();\n    });\n    if (this.mesh.material) {\n      this.mesh.material.diffuseColor = Color3.FromHexString(form.color);\n      this.mesh.material.emissiveColor = Color3.FromHexString(form.color);\n    }\n    this.keyValueMap = { ...form.annotations };\n  }\n\n  getType = () => NodeItem.TYPE;\n\n  getMouseContextActions(mainView) {\n    return [\n      {\n        title: \"Copy\",\n        onClick: () =>\n          // mousePosFromRoot : Vector3\n          Clipboard.copy((mousePosFromRoot, someMainView) =>\n            // \"this\" comes from the mesh\n            someMainView.getSceneMemory().forEach(({ scene }) => {\n              const { item: rootItem } = someMainView.getRootNode();\n              const item = this.nodeItem;\n              const copyDict = item.toDict();\n              copyDict.name += \"*\";\n              const newPosArray = Vec3.ofBabylon(mousePosFromRoot).toArray();\n              // preserves z-coordinate\n              newPosArray[2] = copyDict.position[2];\n              copyDict.position = newPosArray;\n              const copiedNodeItem = item.ofDict(scene, copyDict, someMainView);\n              const { mesh: copiedMesh } = copiedNodeItem;\n              copiedMesh.parent = rootItem.mesh;\n              someMainView.addNodeItem2Tree(copiedNodeItem);\n            })\n          )\n      },\n      {\n        title: \"Delete\",\n        onClick: () => mainView.deleteNodeFromTreeUsingName(this.name)\n      }\n    ];\n  }\n\n  static TYPE = \"NodeItem\";\n\n  // side-effect function\n  static mapDict2Mesh(dict, mesh) {\n    if (!mesh) throw \"can't map a null mesh\";\n    Maybe.fromNull(dict).forEach(someDict => {\n      Maybe.fromNull(dict.name).forEach(name => (mesh.name = name));\n      Maybe.fromNull(someDict.position).forEach(\n        position => (mesh.position = Vec3.of(position).toBabylon())\n      );\n      Maybe.fromNull(someDict.quaternion).forEach(quaternion => {\n        const babylonQuaternion = new Quaternion(\n          quaternion[1],\n          quaternion[2],\n          quaternion[3],\n          quaternion[0]\n        );\n        mesh.rotationQuaternion = babylonQuaternion.normalize();\n      });\n      Maybe.fromNull(someDict.color).forEach(color => {\n        const babylonColor = new Color3(color[0], color[1], color[2]);\n        Maybe.fromNull(mesh.material).forEach(material => {\n          Maybe.fromNull(material.diffuseColor).forEach(\n            z => (mesh.material.diffuseColor = babylonColor)\n          );\n          Maybe.fromNull(material.emissiveColor).forEach(\n            z => (mesh.material.emissiveColor = babylonColor)\n          );\n        });\n      });\n    });\n    return mesh;\n  }\n\n  // side effect function\n  static setAnnotations2Form(schema, keyValueMap = {}) {\n    schema.jsonSchema.properties.annotations = {\n      title: \"Annotations\",\n      type: \"object\",\n      properties: {}\n    };\n    schema.uiSchema.annotations = {\n      \"ui:widget\": \"collapse\"\n    };\n    schema.data[\"annotations\"] = { ...keyValueMap };\n    const annotations = AnnotationManager.getAnnotations();\n    Object.keys(annotations).forEach(annotation => {\n      if (annotations[annotation].labels.length > 0) {\n        schema.jsonSchema.properties.annotations.properties[annotation] = {\n          title: capitalize(annotation),\n          type: \"string\",\n          enumNames: annotations[annotation].labels,\n          enum: annotations[annotation].names\n        };\n      }\n    });\n  }\n}\n\nexport default NodeItem;\n","import Vec3 from \"./Vec3\";\nimport { Matrix } from \"@babylonjs/core\";\n\nclass Mat3 {\n  constructor(v1, v2, v3) {\n    const v = [v1, v2, v3];\n    for (let i = 0; i < v.length; i++) {\n      if (v[i].constructor !== Array || v[i].length < 3)\n        throw Error(\"One of the inputs is not a array\");\n    }\n    this.mat3 = v.map(x => new Vec3(x));\n  }\n\n  /**\n   * Matrix prod with  3-vector\n   * @param {*} v: 3-vector\n   *\n   * returns 3-vector\n   */\n  prodVec(v) {\n    let ans = new Vec3([0, 0, 0]);\n    for (let i = 0; i < this.mat3.length; i++) {\n      ans = ans.add(this.mat3[i].scale(v.vec3[i]));\n    }\n    return ans;\n  }\n\n  /**\n   * Matrix transpose prod with 3-vec\n   * @param {*} v : 3-vector\n   */\n  dotVec(v) {\n    const ans = [0, 0, 0];\n    for (let i = 0; i < this.mat3.length; i++) {\n      ans[i] = this.mat3[i].dot(v);\n    }\n    return new Vec3(ans);\n  }\n\n  prod(m) {\n    const u = this.prodVec(m.mat3[0]);\n    const v = this.prodVec(m.mat3[1]);\n    const w = this.prodVec(m.mat3[2]);\n    return new Mat3(u.vec3, v.vec3, w.vec3);\n  }\n\n  dot(m) {\n    const u = this.dotVec(m.mat3[0]);\n    const v = this.dotVec(m.mat3[1]);\n    const w = this.dotVec(m.mat3[2]);\n    return new Mat3(u.vec3, v.vec3, w.vec3);\n  }\n\n  map(f) {\n    const u = this.mat3[0].map(f);\n    const v = this.mat3[1].map(f);\n    const w = this.mat3[2].map(f);\n    return new Mat3(u.vec3, v.vec3, w.vec3);\n  }\n\n  equals(mat) {\n    if (mat.constructor !== this.constructor) return false;\n    return this.mat3\n      .map((v, index) => v.equals(mat.mat3[index]))\n      .reduce((e, v) => e && v, true);\n  }\n\n  static ofBabylonMatrix(babylonMat) {\n    const arrayMat = Matrix.GetAsMatrix3x3(babylonMat);\n    const u = [arrayMat[0], arrayMat[1], arrayMat[2]];\n    const v = [arrayMat[3], arrayMat[4], arrayMat[5]];\n    const w = [arrayMat[6], arrayMat[7], arrayMat[8]];\n    return new Mat3(u, v, w);\n  }\n\n  static of(v1, v2, v3) {\n    return new Mat3(v1, v2, v3);\n  }\n\n  static eye() {\n    return new Mat3([1, 0, 0], [0, 1, 0], [0, 0, 1]);\n  }\n}\n\nexport default Mat3;\n","import { GizmoManager } from \"@babylonjs/core\";\n\nclass GizmoManagerBuilder {\n  constructor(scene) {\n    this._scene = scene;\n    this._isPosition = false;\n    this._isRotation = false;\n    this._isBoundingBox = false;\n    this._isScale = false;\n    this._usePointerToAttachGizmos = false;\n  }\n\n  isPosition(v) {\n    this._isPosition = v;\n    return this;\n  }\n\n  isRotation(v) {\n    this._isRotation = v;\n    return this;\n  }\n\n  isBoundingBox(v) {\n    this._isBoundingBox = v;\n    return this;\n  }\n\n  isScale(v) {\n    this._isScale = v;\n    return this;\n  }\n\n  usePointerToAttachGizmos(v) {\n    this._usePointerToAttachGizmos = v;\n    return this;\n  }\n\n  build() {\n    const gizmoManager = new GizmoManager(this._scene);\n    gizmoManager.positionGizmoEnabled = this._isPosition;\n    gizmoManager.rotationGizmoEnabled = this._isRotation;\n    gizmoManager.boundingBoxGizmoEnabled = this._isBoundingBox;\n    gizmoManager.scaleGizmoEnabled = this._isScale;\n    gizmoManager.usePointerToAttachGizmos = this._usePointerToAttachGizmos;\n    return gizmoManager;\n  }\n}\n\nexport default GizmoManagerBuilder;\n","import { ArcRotateCamera } from \"@babylonjs/core\";\n\nclass CameraBuilder {\n  constructor(scene) {\n    this._scene = scene;\n    this._sphericalCoordinates = null;\n    this._target = null;\n    this._name = `camera${Math.floor(Math.random() * 1e3)}`;\n  }\n\n  name(name) {\n    this._name = name;\n    return this;\n  }\n\n  sphericalCoordinates(sphericalCoordinates) {\n    this._sphericalCoordinates = sphericalCoordinates;\n    return this;\n  }\n\n  target(target) {\n    this._target = target;\n    return this;\n  }\n\n  build() {\n    const variables = Object.values(this);\n    variables.forEach(x => {\n      if (x === null)\n        throw `There are missing variables to build a camera, e.g ${x}`;\n    });\n    return new ArcRotateCamera(\n      this._name,\n      this._sphericalCoordinates.x,\n      this._sphericalCoordinates.y,\n      this._sphericalCoordinates.z,\n      this._target,\n      this._scene\n    );\n  }\n}\n\nexport default CameraBuilder;\n","import { PointLight } from \"@babylonjs/core\";\n\nclass PositionalLightBuilder {\n  constructor(scene) {\n    this._scene = scene;\n    this._position = null;\n    this._name = `light${Math.floor(Math.random() * 1e3)}`;\n    this._intensity = 1;\n  }\n\n  position(position) {\n    this._position = position;\n    return this;\n  }\n\n  name(name) {\n    this._name = name;\n    return this;\n  }\n\n  intensity(intensity) {\n    this._intensity = intensity;\n    return this;\n  }\n\n  build() {\n    const variables = Object.values(this);\n    variables.forEach(x => {\n      if (x === null)\n        throw `There are missing variables to build a light, e.g ${x}`;\n    });\n    const light = new PointLight(this._name, this._position, this._scene);\n    light.intensity = this._intensity;\n    return light;\n  }\n}\n\nexport default PositionalLightBuilder;\n","import { Mesh, Vector3, Color3, MeshBuilder } from \"@babylonjs/core\";\nclass ReferentialBuilder {\n  constructor(scene) {\n    this._scene = scene;\n    this._name = `referential${Math.floor(Math.random() * 1e3)}`;\n    this._isPickable = true;\n    this._boxParams = { isVisible: true, size: 0.25 };\n    this._size = 1;\n  }\n\n  name(name) {\n    this._name = name;\n    return this;\n  }\n\n  isPickable(isPickable) {\n    this._isPickable = isPickable;\n    return this;\n  }\n\n  boxParams(boxParams) {\n    this._boxParams = boxParams;\n    return this;\n  }\n\n  size(size) {\n    this._size = size;\n    return this;\n  }\n\n  build() {\n    const size = this._size;\n    const axisX = Mesh.CreateLines(\n      `axisX${this._name}`,\n      [\n        new Vector3.Zero(),\n        new Vector3(size, 0, 0),\n        new Vector3(size * 0.95, 0.05 * size, 0),\n        new Vector3(size, 0, 0),\n        new Vector3(size * 0.95, -0.05 * size, 0)\n      ],\n      this._scene\n    );\n    axisX.color = new Color3(1, 0, 0);\n    axisX.isPickable = false;\n    const axisY = Mesh.CreateLines(\n      `axisY${this._name}`,\n      [\n        new Vector3.Zero(),\n        new Vector3(0, size, 0),\n        new Vector3(-0.05 * size, size * 0.95, 0),\n        new Vector3(0, size, 0),\n        new Vector3(0.05 * size, size * 0.95, 0)\n      ],\n      this._scene\n    );\n    axisY.color = new Color3(0, 1, 0);\n    axisY.isPickable = false;\n    const axisZ = Mesh.CreateLines(\n      `axisZ${this._name}`,\n      [\n        new Vector3.Zero(),\n        new Vector3(0, 0, size),\n        new Vector3(0, -0.05 * size, size * 0.95),\n        new Vector3(0, 0, size),\n        new Vector3(0, 0.05 * size, size * 0.95)\n      ],\n      this._scene\n    );\n    axisZ.color = new Color3(0, 0, 1);\n    axisZ.isPickable = false;\n\n    const localOrigin = MeshBuilder.CreateBox(\n      this._name,\n      { size: this._boxParams.size },\n      this._scene\n    );\n    localOrigin.isVisible = this._boxParams.isVisible;\n    localOrigin.isPickable = this._isPickable;\n\n    axisX.parent = localOrigin;\n    axisY.parent = localOrigin;\n    axisZ.parent = localOrigin;\n\n    return localOrigin;\n  }\n}\n\nexport default ReferentialBuilder;\n","import {\n  Mesh,\n  Vector3,\n  StandardMaterial,\n  Texture,\n  Space\n} from \"@babylonjs/core\";\n\nclass GroundBuilder {\n  constructor(scene) {\n    this._scene = scene;\n    this._name = `camera${Math.floor(Math.random() * 1e3)}`;\n    this._width = 1;\n    this._height = 1;\n    this._textureSrc = null;\n    this._isPickable = false;\n  }\n\n  name(name) {\n    this._name = name;\n    return this;\n  }\n\n  width(width) {\n    this._width = width;\n    return this;\n  }\n\n  height(height) {\n    this._height = height;\n    return this;\n  }\n\n  textureSrc(textureSrc) {\n    this._textureSrc = textureSrc;\n    return this;\n  }\n\n  isPickable(isPickable) {\n    this._isPickable = isPickable;\n    return this;\n  }\n\n  build() {\n    const ground = Mesh.CreateGround(\n      this._name,\n      this._width,\n      this._height,\n      1,\n      this._scene\n    );\n    ground.translate(new Vector3(0, -1, 0), 1e-1, Space.WORLD);\n    if (this._textureSrc) {\n      ground.material = new StandardMaterial(\n        `Texture${this._name}`,\n        this._scene\n      );\n      ground.material.ambientTexture = new Texture(\n        this._textureSrc,\n        this._scene\n      );\n      ground.material.ambientTexture.uScale = 1;\n      ground.material.ambientTexture.vScale = 1;\n    }\n    ground.isPickable = this._isPickable;\n    return ground;\n  }\n}\n\nexport default GroundBuilder;\n","import { DirectionalLight } from \"@babylonjs/core\";\n\nclass DirectionalLightBuilder {\n  constructor(scene) {\n    this._scene = scene;\n    this._direction = null;\n    this._name = `Dlight${Math.floor(Math.random() * 1e3)}`;\n    this._intensity = 1;\n  }\n\n  direction(direction) {\n    this._direction = direction;\n    return this;\n  }\n\n  name(name) {\n    this._name = name;\n    return this;\n  }\n\n  intensity(intensity) {\n    this._intensity = intensity;\n    return this;\n  }\n\n  build() {\n    const variables = Object.values(this);\n    variables.forEach(x => {\n      if (x === null)\n        throw `There are missing variables to build a light, e.g ${x}`;\n    });\n    const light = new DirectionalLight(\n      this._name,\n      this._direction.normalize(),\n      this._scene\n    );\n    light.intensity = this._intensity;\n    return light;\n  }\n}\n\nexport default DirectionalLightBuilder;\n","import NodeItem from \"./NodeItem\";\nimport { Maybe } from \"monet\";\nimport Util3d from \"../Util3d/Util3d\";\nimport { Color3 } from \"@babylonjs/core\";\n\nclass Box extends NodeItem {\n  static DEFAULT_SIZE = 0.5;\n\n  constructor(mesh, size = Box.DEFAULT_SIZE, keyValueMap = {}) {\n    super(mesh, keyValueMap);\n    this.size = size;\n  }\n\n  toDict() {\n    const dict = super.toDict();\n    dict.size = this.size;\n    return dict;\n  }\n\n  ofDict(scene, dict = null, mainView = null) {\n    return Box.ofDict(scene, dict, mainView);\n  }\n\n  getType = () => Box.TYPE;\n\n  static TYPE = \"Box\";\n\n  static ofDict(scene, dict = null, mainView = null) {\n    const maybeDict = Maybe.fromNull(dict);\n    const size = maybeDict\n      .flatMap((z) => Maybe.fromNull(z.size))\n      .orSome(Box.DEFAULT_SIZE);\n    const name = maybeDict\n      .flatMap((z) => Maybe.fromNull(z.name))\n      .orSome(`Box${Math.floor(Math.random() * 1e3)}`);\n    const keyValueMap = maybeDict\n      .flatMap((d) => Maybe.fromNull(d.keyValueMap))\n      .orUndefined();\n\n    const boxMesh = Util3d.createBox(\n      scene,\n      new Color3(Math.random(), Math.random(), Math.random()),\n      size,\n      name\n    );\n    NodeItem.mapDict2Mesh(dict, boxMesh);\n    return new Box(boxMesh, size, keyValueMap);\n  }\n}\n\nexport default Box;\n","import Vec3 from \"../Math/Vec3\";\nimport Mat3 from \"../Math/Mat3\";\nimport { Maybe } from \"monet\";\nimport GizmoManagerBuilder from \"./GizmoManagerBuilder.js\";\nimport CameraBuilder from \"./CameraBuilder\";\nimport PositionalLightBuilder from \"./PositionalLightBuilder\";\nimport ReferentialBuilder from \"./ReferentialBuilder\";\nimport GroundBuilder from \"./GroundBuilder\";\nimport DirectionalLightBuilder from \"./DirectionalLightBuilder\";\nimport earcut from \"earcut\";\nimport {\n  Vector3,\n  Color3,\n  Quaternion,\n  StandardMaterial,\n  VertexData,\n  Mesh,\n  Matrix,\n  MeshBuilder,\n  VertexBuffer,\n  Curve3\n} from \"@babylonjs/core\";\nimport GlobalRef from \"../NodeItem/GlobalRef\";\nimport Box from \"../NodeItem/Box\";\n\nclass Util3d {\n  static getWorldCoordinates(mesh, localPosition) {\n    if (mesh.parent && mesh.parent.name === GlobalRef.NAME)\n      return Vec3.ofBabylon(localPosition);\n    const meshParent = mesh.parent;\n    const meshParentPos = Vec3.ofBabylon(meshParent.position);\n    const meshParentRotMat = Util3d.getRotationMatrix(meshParent);\n    const meshParentScaling = Vec3.ofBabylon(meshParent.scaling);\n    return meshParentRotMat\n      .prodVec(\n        meshParentScaling.mul(\n          Util3d.getWorldCoordinates(mesh.parent, localPosition)\n        )\n      )\n      .add(meshParentPos);\n  }\n\n  static getBabylonCoordinates(positionInWorld) {\n    return GlobalRef.forwardCoordinates(positionInWorld);\n  }\n\n  /**\n   *\n   * @param {*} mesh\n   * @param {*} worldPosition: Vector3\n   */\n  static getLocalCoordinatesFromWorld(mesh, worldPosition) {\n    if (mesh.parent && mesh.parent.name === GlobalRef.NAME)\n      return Vec3.ofBabylon(worldPosition);\n    const meshParent = mesh.parent;\n    const meshParentPos = Vec3.ofBabylon(meshParent.position);\n    const meshParentRotMat = Util3d.getRotationMatrix(meshParent);\n    const meshParentScaling = Vec3.ofBabylon(meshParent.scaling);\n    return meshParentScaling\n      .map(z => 1 / z)\n      .mul(\n        meshParentRotMat.dotVec(\n          Util3d.getLocalCoordinatesFromWorld(meshParent, worldPosition).sub(\n            meshParentPos\n          )\n        )\n      );\n  }\n\n  /**\n   *\n   * @param {*} mesh\n   * @param {*} worldPosition: Vec3\n   */\n  static computeLocalCoordinatesFromMesh(mesh, worldPosition) {\n    /// WARNING: very similar with getLocalCoordinatesFromWorld\n    if (!mesh.parent) {\n      return worldPosition;\n    }\n    const meshParent = mesh.parent;\n    const meshParentPos = Vec3.ofBabylon(meshParent.position);\n    const meshParentRotMat = Util3d.getRotationMatrix(meshParent);\n    const meshParentScaling = Vec3.ofBabylon(meshParent.scaling);\n    // assume scaling != 0\n    const inverseScaling = meshParentScaling.map(x => 1.0 / x);\n\n    return inverseScaling.mul(\n      meshParentRotMat.dotVec(\n        Util3d.computeLocalCoordinatesFromMesh(meshParent, worldPosition).sub(\n          meshParentPos\n        )\n      )\n    );\n  }\n\n  /**\n   *\n   * @param {*} parentView: MainView\n   */\n  static toLocalCoordinates = parentView => {\n    const rootMesh = parentView.getRootNode().item.mesh;\n    return arrayOfVector3 => {\n      const transform = p =>\n        Util3d.computeLocalCoordinatesFromMesh(\n          { parent: rootMesh },\n          Vec3.ofBabylon(p)\n        ).toBabylon();\n      if (Array.isArray(arrayOfVector3)) {\n        return arrayOfVector3.map(transform);\n      }\n      return transform(arrayOfVector3);\n    };\n  };\n\n  static getRotationMatrix(mesh) {\n    const localRotationMatrix = new Matrix();\n    const maybeQuaternion = Maybe.fromNull(mesh.rotationQuaternion);\n    maybeQuaternion.forEach(quaternion =>\n      quaternion.toRotationMatrix(localRotationMatrix)\n    );\n    maybeQuaternion.orElseRun(() => {\n      const quaternion = Quaternion.RotationYawPitchRoll(\n        mesh.rotation.y,\n        mesh.rotation.x,\n        mesh.rotation.z\n      );\n      quaternion.toRotationMatrix(localRotationMatrix);\n    });\n    return Mat3.ofBabylonMatrix(localRotationMatrix);\n  }\n\n  static showNormals(scene, mesh, size = 1, color = Color3.Red()) {\n    const normals = mesh.getVerticesData(VertexBuffer.NormalKind);\n    const positions = mesh.getVerticesData(VertexBuffer.PositionKind);\n    const lines = [];\n    for (let i = 0; i < normals.length; i += 3) {\n      const v1 = Vector3.FromArray(positions, i);\n      const v2 = v1.add(Vector3.FromArray(normals, i).scaleInPlace(size));\n      lines.push([v1.add(mesh.position), v2.add(mesh.position)]);\n    }\n    const normalLines = MeshBuilder.CreateLineSystem(\n      \"normalLines\",\n      { lines: lines },\n      scene\n    );\n    normalLines.color = color;\n    normalLines.parent = mesh;\n    return normalLines;\n  }\n\n  static orthogonalBasisFromVector(u) {\n    const identityMatrix = [\n      new Vector3(1, 0, 0),\n      new Vector3(0, 1, 0),\n      new Vector3(0, 0, 1)\n    ];\n    const uArray = [u.x, u.y, u.z];\n    // choose pivot\n    let pivot = 0;\n    for (let i = 0; i < 3; i++) {\n      if (uArray[i] !== 0) {\n        pivot = i;\n        break;\n      }\n    }\n    let v = identityMatrix[(pivot + 1) % 3].add(\n      identityMatrix[pivot].scale(-uArray[(pivot + 1) % 3] / uArray[pivot])\n    );\n    v = v.normalize();\n    let w = identityMatrix[(pivot + 2) % 3].add(\n      identityMatrix[pivot].scale(-uArray[(pivot + 2) % 3] / uArray[pivot])\n    );\n    w = w.normalize();\n    w = w.subtract(v.scale(Vector3.Dot(v, w)));\n    return { u: Vector3.FromArray(uArray).normalize(), v: v, w: w.normalize() };\n  }\n\n  static createOrientedCone = (\n    scene,\n    u = new Vector3(1, 0, 0),\n    color = Color3.Gray(),\n    name = `OrientedCone${randomDigits()}`,\n    isPickable = true,\n    segments = 16\n  ) => {\n    const surface = {\n      positions: [],\n      faces: []\n    };\n    const d = u.length() / 3;\n    const mat3 = Util3d.orthogonalBasisFromVector(u);\n    const v = mat3.v;\n    const w = mat3.w;\n\n    const orientation = Math.sign(Vector3.Dot(Vector3.Cross(v, w), u));\n    // positions\n    for (let i = 0; i < segments; i++) {\n      const theta = orientation * ((2 * Math.PI) / segments) * i;\n      surface.positions.push(\n        v.scale(d * Math.cos(theta)).add(w.scale(d * Math.sin(theta)))\n      );\n    }\n\n    surface.positions.push(Vector3.Zero());\n    surface.positions.push(u);\n\n    const zeroIndex = surface.positions.length - 1;\n    const uIndex = surface.positions.length - 2;\n\n    for (let i = 0; i < segments; i++) {\n      // bottom faces\n      surface.faces.push([zeroIndex, (i + 1) % segments, i]);\n      // cone faces\n      surface.faces.push([uIndex, i, (i + 1) % segments]);\n    }\n\n    // mesh\n    const mesh = Util3d.meshFromPositionAndFaces(\n      name,\n      scene,\n      surface.positions,\n      surface.faces\n    );\n    mesh.convertToFlatShadedMesh();\n    const material = new StandardMaterial(`OrientedConeMaterial${name}`, scene);\n    material.diffuseColor = color;\n    material.emissiveColor = color;\n    mesh.material = material;\n    mesh.isPickable = isPickable;\n    return mesh;\n  };\n\n  static createSphere = (\n    scene,\n    color = Color3.Gray(),\n    diameter = 1,\n    name = `Sphere${randomDigits()}`,\n    isPickable = true\n  ) => {\n    const sphere = Mesh.CreateSphere(name, 16, diameter, scene);\n    const material = Util3d.getMaterialFromColor(\n      color,\n      scene,\n      `SphereMaterial${name}`\n    );\n    sphere.material = material;\n    sphere.isPickable = isPickable;\n    return sphere;\n  };\n\n  static createBox = (\n    scene,\n    color = Color3.Gray(),\n    size = Box.DEFAULT_SIZE,\n    name = `Box${randomDigits()}`,\n    isPickable = true\n  ) => {\n    const box = Mesh.CreateBox(name, size, scene);\n    const material = new StandardMaterial(`BoxMaterial${name}`, scene);\n    material.diffuseColor = color;\n    material.emissiveColor = color;\n    box.material = material;\n    box.isPickable = isPickable;\n    return box;\n  };\n\n  static createTubeFromPoints = (\n    scene,\n    points,\n    color = Color3.Gray(),\n    radius = 1,\n    name = `Tube${randomDigits()}`,\n    isPickable = true\n  ) => {\n    const mesh = MeshBuilder.CreateTube(\n      name,\n      {\n        path: points,\n        radius: radius,\n        sideOrientation: Mesh.DOUBLESIDE,\n        updatable: true\n      },\n      scene\n    );\n    mesh.material = Util3d.getMaterialFromColor(\n      color,\n      scene,\n      `Material${name}`\n    );\n    mesh.isPickable = isPickable;\n    return mesh;\n  };\n\n  static positionalLightBuilder = scene => {\n    return new PositionalLightBuilder(scene);\n  };\n\n  static directionalLightBuilder = scene => {\n    return new DirectionalLightBuilder(scene);\n  };\n\n  static cameraBuilder(scene) {\n    return new CameraBuilder(scene);\n  }\n\n  static gizmoManagerBuilder(scene) {\n    return new GizmoManagerBuilder(scene);\n  }\n\n  static referentialBuilder = scene => {\n    return new ReferentialBuilder(scene);\n  };\n\n  /**\n   * Return a maybe position of intersection of the mouse and a ground mesh\n   *\n   * @param {Scene} scene Babylon scene\n   * @param {Ground} ground a Babylon mesh that represents the ground\n   * @returns {Maybe} a maybe 3-vector representing the mouse ground intersection\n   */\n  static getGroundPosition = function (scene, ground) {\n    // Use a predicate to get position on the ground\n    const pickInfo = scene.pick(\n      scene.pointerX,\n      scene.pointerY,\n      mesh => mesh === ground\n    );\n    if (pickInfo.hit) return Maybe.some(pickInfo.pickedPoint);\n    return Maybe.none();\n  };\n\n  static pickMesh = (scene, ground) => {\n    const pickInfo = scene.pick(\n      scene.pointerX,\n      scene.pointerY,\n      mesh => mesh !== ground && mesh.isEnabled()\n    );\n    if (pickInfo.hit && pickInfo.pickedMesh.isPickable) {\n      return Maybe.some(pickInfo.pickedMesh);\n    }\n    return Maybe.none();\n  };\n\n  static groundBuilder = scene => {\n    return new GroundBuilder(scene);\n  };\n\n  static meshFromPositionAndFaces(\n    name,\n    scene,\n    positions,\n    faces,\n    updatable = true\n  ) {\n    const vertexData = new VertexData();\n\n    vertexData.positions = positions.flatMap(z => [z.x, z.y, z.z]);\n    vertexData.indices = faces.flatMap(z => z);\n\n    let mesh = new Mesh(name, scene);\n    vertexData.applyToMesh(mesh, updatable);\n    // mesh.createNormals();\n    return mesh;\n  }\n\n  /**\n   *\n   * @param {*} polygon: Array of babylonjs vector3, representing a boundary of a polygon\n   */\n  static triangulatePolygon(polygon) {\n    const triangulation = earcut(\n      polygon.map(x => [x.x, x.y, x.z]).flatMap(x => x),\n      null,\n      3\n    );\n    const len = triangulation.length / 3;\n    const ans = [];\n    for (let i = 0; i < len; i++) {\n      const i3 = 3 * i;\n      ans.push([\n        triangulation[i3],\n        triangulation[i3 + 1],\n        triangulation[i3 + 2]\n      ]);\n    }\n    return ans;\n  }\n\n  /**\n   *\n   * @param {*} polygon: Array of babylonjs vector3, representing a boundary of a polygon\n   * Returns a real number representing the orientation of the curve, if positive represents a counterclockwise orientation, clockwise otherwise.\n   */\n  static computeOrientation(polygon) {\n    const n = polygon.length;\n    const vec3Poly = polygon.map(x => Vec3.ofBabylon(x));\n    let orientation = 0;\n    vec3Poly.forEach((a, i) => {\n      const modi = (i + 1) % n;\n      const edge = vec3Poly[modi].sub(vec3Poly[i]);\n      orientation += Vec3.of([-a.y, a.x, a.z]).dot(edge);\n    });\n    return orientation / 2;\n  }\n\n  /**\n   * @param {*} arrayOfPoints: array of babylon vec3\n   * Returns the average\n   */\n  static pointAverage(arrayOfPoints) {\n    if (!arrayOfPoints || arrayOfPoints.length === 0) return Vector3.Zero();\n    return arrayOfPoints\n      .reduce((e, x) => e.add(x), Vector3.Zero())\n      .scale(1 / arrayOfPoints.length);\n  }\n\n  static pointAverageVec3(arrayOfPoints) {\n    if (!arrayOfPoints || arrayOfPoints.length === 0) return Vec3.ZERO;\n    return arrayOfPoints\n      .reduce((e, x) => e.add(x), Vec3.ZERO)\n      .scale(1 / arrayOfPoints.length);\n  }\n\n  static randomVector3(a, b) {\n    return new Vector3.FromArray(\n      [0, 0, 0].map(x => a + (b - a) * Math.random())\n    );\n  }\n\n  static getMaterialFromColor(\n    color,\n    scene,\n    name = `MaterialFromColor${randomDigits()}`\n  ) {\n    const material = new StandardMaterial(name, scene);\n    material.diffuseColor = color;\n    material.emissiveColor = color;\n    return material;\n  }\n\n  static piecewiseCurveDistance = curve => {\n    let distance = 0;\n    for (let i = 0; i < curve.length - 1; i++) {\n      const v = curve[i + 1].subtract(curve[i]);\n      distance += v.length();\n    }\n    return distance;\n  };\n\n  static getCurveOrientations = curve => {\n    const orientations = [];\n    for (let i = 0; i < curve.length - 1; i++) {\n      const v = curve[i + 1].subtract(curve[i]);\n      orientations.push(Math.atan2(v.y, v.x));\n    }\n    orientations.push(orientations[orientations.length - 1]);\n    return orientations;\n  };\n\n  static getSplineFromCurve = (curve, nbPoints = 7) => {\n    const closed = false;\n    return {\n      points: Curve3.CreateCatmullRomSpline(curve, nbPoints, closed).getPoints()\n    };\n  };\n\n  static splineObj2redis = splineObj => {\n    const orientations = Util3d.getCurveOrientations(splineObj.points);\n    return splineObj.points.map((x, i) => {\n      return [x.x, x.y, orientations[i]];\n    });\n  };\n}\n\nconst randomDigits = () => {\n  return Math.floor(Math.random() * 1e3);\n};\n\nexport default Util3d;\n","import NodeItem from \"./NodeItem\";\nimport Vec3 from \"../Math/Vec3\";\nimport Util3d from \"../Util3d/Util3d\";\nimport { Maybe } from \"monet\";\nimport { Quaternion, MeshBuilder } from \"@babylonjs/core\";\n\n// ROS/RVIZ default referential\nconst THETA = -Math.PI / 2;\nconst ROS_ORIGIN = {\n  position: [0, 0, 0],\n  scaling: [1, -1, 1],\n  quaternion: [Math.cos(THETA / 2), Math.sin(THETA / 2), 0, 0]\n};\n\nclass GlobalRef extends NodeItem {\n  constructor(mesh, keyValueMap = {}) {\n    super(mesh, keyValueMap);\n  }\n\n  toForm() {\n    const form = super.toForm();\n    form.uiSchema.name = {\n      \"ui:disabled\": true\n    };\n    return form;\n  }\n\n  getMouseContextActions() {\n    return [];\n  }\n\n  getType = () => GlobalRef.TYPE;\n\n  static TYPE = \"GlobalRef\";\n\n  static NAME = \"Global ref\";\n\n  static ofDict(scene, dict = null, mainView = null) {\n    const rosOrigin = GlobalRef.getRosOrigin(scene);\n\n    const globalRefMesh = Util3d.referentialBuilder(scene)\n      .name(GlobalRef.NAME)\n      .isPickable(true)\n      .boxParams({ isVisible: true, size: 0.25 })\n      .build();\n\n    globalRefMesh.parent = rosOrigin;\n\n    NodeItem.mapDict2Mesh(dict, globalRefMesh);\n\n    return new GlobalRef(\n      globalRefMesh,\n      Maybe.fromNull(dict)\n        .flatMap(d => Maybe.fromNull(d.keyValueMap))\n        .orUndefined()\n    );\n  }\n\n  static getRosOrigin(scene) {\n    const rosOrigin = MeshBuilder.CreateBox(\n      \"ROS_ORIGIN\",\n      { size: 1e-3 },\n      scene\n    );\n    rosOrigin.isVisible = false;\n    rosOrigin.isPickable = false;\n    rosOrigin.position = Vec3.of(ROS_ORIGIN.position).toBabylon();\n    rosOrigin.scaling = Vec3.of(ROS_ORIGIN.scaling).toBabylon();\n    const quaternion = new Quaternion(\n      ROS_ORIGIN.quaternion[1],\n      ROS_ORIGIN.quaternion[2],\n      ROS_ORIGIN.quaternion[3],\n      ROS_ORIGIN.quaternion[0]\n    );\n    rosOrigin.rotationQuaternion = quaternion.normalize();\n    return rosOrigin;\n  }\n\n  /**\n   *\n   * @param {*} x: Babylon Vector3 in World coordinates\n   *\n   * returns Babylon Vector3 vector in ROS coordinates\n   */\n  static inverseCoordinates(x) {\n    /**\n     * Solves RS\\eta + p = x\n     *\n     * \\eta = S^(1)R^T(x-p)\n     */\n    const quaternion = ROS_ORIGIN.quaternion;\n    const rotationMatrix = Util3d.getRotationMatrix({\n      rotationQuaternion: new Quaternion(\n        quaternion[1],\n        quaternion[2],\n        quaternion[3],\n        quaternion[0]\n      )\n    });\n    const scaling = Vec3.of(ROS_ORIGIN.scaling).map(z => 1 / z);\n    const pos = Vec3.of(ROS_ORIGIN.position);\n    const result = scaling.mul(\n      rotationMatrix.dotVec(Vec3.ofBabylon(x).sub(pos))\n    );\n    return result.map(z => (Math.abs(z) < 1e-5 ? 0 : z)).toBabylon();\n  }\n\n  /**\n   *\n   * @param {*} x: Babylon Vector3 in ROS coordinates\n   *\n   * returns Babylon Vector3 vector in World coordinates\n   */\n  static forwardCoordinates(x) {\n    /**\n     * computes RS\\eta + p = x\n     */\n    const quaternion = ROS_ORIGIN.quaternion;\n    const rotationMatrix = Util3d.getRotationMatrix({\n      rotationQuaternion: new Quaternion(\n        quaternion[1],\n        quaternion[2],\n        quaternion[3],\n        quaternion[0]\n      )\n    });\n    const scaling = Vec3.of(ROS_ORIGIN.scaling);\n    const pos = Vec3.of(ROS_ORIGIN.position);\n    const result = rotationMatrix\n      .prodVec(scaling.mul(Vec3.ofBabylon(x)))\n      .add(pos);\n    return result.map(z => (Math.abs(z) < 1e-5 ? 0 : z)).toBabylon();\n  }\n}\n\nexport default GlobalRef;\n","class Action {\n  constructor() {\n    this.memory = {};\n  }\n\n  action(parentView) {\n    parentView.getSceneMemory().forEach(memory => {\n      memory.gizmoManager.attachedMesh = null;\n      memory.camera.attachControl(memory.canvas, true);\n    });\n    parentView.highlightNodeInTree && parentView.highlightNodeInTree();\n    parentView.highlightNodeInScene && parentView.highlightNodeInScene();\n    parentView.closeContextDial && parentView.closeContextDial();\n    parentView.setContextActionIndex && parentView.setContextActionIndex();\n  }\n}\n\nexport default Action;\n","import NodeItem from \"./NodeItem\";\n\nclass AssetNodeItem extends NodeItem {\n  constructor(mesh, assetName, keyValueMap = {}) {\n    super(mesh, keyValueMap);\n    this.assetName = assetName;\n  }\n\n  toDict() {\n    const ans = super.toDict();\n    ans.assetName = this.assetName;\n    return ans;\n  }\n}\n\nexport default AssetNodeItem;\n","import AssetNodeItem from \"./AssetNodeItem\";\n\nclass Map extends AssetNodeItem {\n  constructor(mesh, size, textureSrc, assetName) {\n    super(mesh, assetName);\n    this.size = size;\n    this.textureSrc = textureSrc;\n  }\n\n  dispose() {\n    super.dispose();\n  }\n\n  toDict() {\n    const dict = super.toDict();\n    dict[\"size\"] = this.size;\n    dict[\"textureSrc\"] = this.textureSrc;\n    return dict;\n  }\n\n  toForm() {\n    const info = this.toDict();\n    const schema = {\n      jsonSchema: {\n        type: \"object\",\n        properties: {\n          oldName: {\n            type: \"string\",\n          },\n          name: {\n            type: \"string\",\n            title: \"Name\",\n          },\n          type: {\n            type: \"string\",\n            title: \"Type\",\n          },\n          assetName: {\n            type: \"string\",\n            title: \"Asset Name\",\n          },\n        },\n      },\n      uiSchema: {\n        type: {\n          \"ui:disabled\": true,\n        },\n        assetName: {\n          \"ui:disabled\": true,\n        },\n        oldName: {\n          \"ui:widget\": \"hidden\",\n        },\n      },\n      data: {\n        oldName: info.name,\n        name: info.name,\n        type: info.type,\n        assetName: info.assetName,\n      },\n    };\n    return schema;\n  }\n\n  ofForm(form) {\n    this.name = form.name;\n    this.mesh.name = form.name;\n    this.keyValueMap = { ...form.annotations };\n  }\n\n  getType = () => Map.TYPE;\n\n  static TYPE = \"Map\";\n}\n\nexport default Map;\n","import {\n  Scene,\n  Color3,\n  RotationGizmo,\n  UtilityLayerRenderer,\n  Vector3,\n  StandardMaterial,\n  Mesh,\n  Space\n} from \"@babylonjs/core\";\nimport { TextBlock, AdvancedDynamicTexture } from \"@babylonjs/gui/2D\";\nimport Util3d from \"../Util3d/Util3d\";\n// import \"@babylonjs/core/Debug/debugLayer\";\n// import \"@babylonjs/inspector\";\n\nclass DefaultScene {\n  static createGizmo = scene => {\n    const gizmoManager = new RotationGizmo(new UtilityLayerRenderer(scene));\n    gizmoManager.xGizmo.dragBehavior.detach();\n    gizmoManager.xGizmo.scaleRatio = 0.0;\n    gizmoManager.yGizmo.dragBehavior.detach();\n    gizmoManager.yGizmo.scaleRatio = 0.0;\n    return gizmoManager;\n  };\n\n  static createCamera = (scene, canvas, forEach = camera => {}) => {\n    const COLLISION_RADIUS = 1;\n    const camera = Util3d.cameraBuilder(scene)\n      .sphericalCoordinates(new Vector3(0, 0, 14))\n      .target(Vector3.Zero())\n      .name(\"camera\")\n      .build();\n    camera.attachControl(canvas, false);\n    camera.inertia = 0.7;\n    camera.collisionRadius = new Vector3(\n      COLLISION_RADIUS,\n      COLLISION_RADIUS,\n      COLLISION_RADIUS\n    );\n    camera.panningInertia = 0.5;\n    camera.checkCollisions = true;\n    camera.panningSensibility = 0;\n    camera.lowerRadiusLimit = 2;\n\n    forEach(camera);\n    return camera;\n  };\n\n  static createLight = scene => {\n    return Util3d.directionalLightBuilder(scene)\n      .name(\"light\")\n      .direction(new Vector3(0, -1, 0))\n      .intensity(0.35)\n      .build();\n  };\n\n  static createMeshGround = (scene, width = 20, height = 20) => {\n    const ground = Mesh.CreateGround(\"groundMesh\", width, height, 20, scene);\n    ground.translate(new Vector3(0, -1, 0), 1e-2, Space.WORLD);\n    ground.material = new StandardMaterial(\"wireframe\", scene);\n    ground.material.wireframe = true;\n    ground.isPickable = false;\n    ground.checkCollisions = true;\n    return ground;\n  };\n\n  static createScene = engine => {\n    const scene = new Scene(engine);\n    scene.clearColor = Color3.Black;\n    scene.collisionsEnabled = true;\n    scene._uid = scene.getUniqueId();\n    // scene.debugLayer.show();\n    return scene;\n  };\n\n  static createMouseLocationText = scene => {\n    const advancedTexture = AdvancedDynamicTexture.CreateFullscreenUI(\n      \"UI\",\n      true,\n      scene\n    );\n    const text = new TextBlock();\n    text.text = \"\";\n    text.color = \"white\";\n    text.fontSize = 17;\n    text.left = -560;\n    text.top = -145;\n    advancedTexture.addControl(text);\n    return text;\n  };\n}\n\nexport default DefaultScene;\n","import Action from \"./Action\";\nimport { ACTIONS } from \"../MainView/MainViewActions\";\n\nclass MouseKeysAction extends Action {\n  constructor() {\n    super();\n  }\n\n  onPointerDown(evt, parentView) {\n    // to be implemented on sub classes\n  }\n\n  onPointerMove(evt, parentView) {\n    // to be implemented on sub classes\n  }\n\n  onPointerUp(parentView) {\n    // to be implemented on sub classes\n  }\n\n  onKeyDown(evt, parentView) {\n    const codeActionDict = {\n      Escape: buttonActionFactory(ACTIONS.orbit),\n      KeyG: buttonActionFactory(ACTIONS.dragObjects),\n      KeyP: buttonActionFactory(ACTIONS.drawPath),\n      KeyB: buttonActionFactory(ACTIONS.drawBoxRegion),\n      KeyR: buttonActionFactory(ACTIONS.drawRegion),\n      KeyK: buttonActionFactory(ACTIONS.addKeyPoint),\n      KeyC: buttonActionFactory(ACTIONS.drawGraph)\n    };\n    if (evt.code in codeActionDict) {\n      codeActionDict[evt.code](parentView);\n    }\n  }\n}\n\nconst buttonActionFactory = action => parentView => {\n  action.action(parentView);\n  parentView.setSelectedAction(action);\n};\n\nexport default MouseKeysAction;\n","import Util3d from \"../Util3d/Util3d\";\nimport Vec3 from \"../Math/Vec3\";\nimport { Maybe } from \"monet\";\nimport MouseKeysAction from \"./MouseKeysAction\";\nimport React from \"react\";\nimport { Vector3 } from \"@babylonjs/core\";\nimport { UndoManager } from \"mov-fe-lib-core\";\nimport Clipboard from \"../Utils/Clipboard\";\n\nclass DragObjectsAction extends MouseKeysAction {\n  constructor() {\n    if (instance) return instance;\n    super();\n    this.key = \"dragObject\";\n    this.name = \"Grab Objects [G]\";\n    this.icon = props => <i className=\"fas fa-mouse-pointer\" {...props}></i>;\n    this.maybeSelectedMesh = Maybe.none();\n    this.shiftFromCenterOfMass = Vec3.ZERO;\n    this.mousePointInLocal = Vec3.ZERO;\n    this.clickPointInLocal = Vec3.ZERO;\n    this.undoManager = new UndoManager();\n    instance = this;\n  }\n\n  action = parentView => {\n    super.action(parentView);\n    parentView.setSelectedAction(this);\n  };\n\n  onPointerDown = (evt, parentView) => {\n    if (!(evt.buttons === 1 || evt.buttons === 2)) return;\n    parentView.getSceneMemory().forEach(memory => {\n      const { scene, ground, camera, canvas } = memory;\n      this.maybeSelectedMesh = Util3d.pickMesh(scene, ground);\n      this.maybeSelectedMesh.forEach(currentMesh => {\n        camera.detachControl(canvas);\n        Util3d.getGroundPosition(scene, ground).forEach(groundPosition => {\n          const groundPositionInLocalCoordinates = Util3d.computeLocalCoordinatesFromMesh(\n            currentMesh,\n            Vec3.ofBabylon(groundPosition)\n          );\n\n          this.mousePointInLocal = groundPositionInLocalCoordinates;\n          this.clickPointInLocal = groundPositionInLocalCoordinates;\n          this.shiftFromCenterOfMass = groundPositionInLocalCoordinates.sub(\n            Vec3.ofBabylon(currentMesh.position)\n          );\n\n          currentMesh.onClick\n            ? currentMesh.onClick()\n            : parentView.closeContextDial();\n\n          this.handleMeshRightClick(evt, parentView, currentMesh);\n\n          parentView.addGizmo(currentMesh.name);\n          parentView.highlightNodeInTree(currentMesh.name);\n          parentView.highlightMeshInScene([currentMesh]);\n          this.setProperties(parentView, currentMesh.name);\n        });\n      });\n      this.maybeSelectedMesh.orLazy(() =>\n        parentView\n          .getMouseCoordinatesFromRoot()\n          .forEach(mousePosRoot =>\n            this.handleRightClickWithoutMesh(evt, parentView, mousePosRoot)\n          )\n      );\n    });\n  };\n\n  handleMeshRightClick = (evt, parentView, mesh) => {\n    if (!(evt.buttons === 2)) return;\n    if (!mesh || !mesh.getMouseContextActions) return;\n    parentView.setMouseContextActions(\n      evt,\n      mesh.getMouseContextActions(parentView)\n    );\n  };\n\n  /**\n   * @param evt: event\n   * @param parentView: MainView\n   * @param mousePosFromRoot: Vector3\n   */\n  handleRightClickWithoutMesh = (evt, parentView, mousePosFromRoot) => {\n    if (!(evt.buttons === 2)) return;\n    parentView.setMouseContextActions(evt, [\n      {\n        title: \"Paste\",\n        onClick: this.getPasteOnClick(mousePosFromRoot, parentView)\n      }\n    ]);\n  };\n\n  getPasteOnClick = (mousePosFromRoot, parentView) => () => {\n    const pasteAction = Clipboard.paste();\n    if (pasteAction && typeof pasteAction === \"function\") {\n      pasteAction(mousePosFromRoot, parentView);\n    }\n  };\n\n  onPointerMove = (evt, parentView) => {\n    if (!(evt.buttons === 1)) return;\n    parentView.getSceneMemory().forEach(memory => {\n      const { scene, ground } = memory;\n      const maybeGroundPosition = Util3d.getGroundPosition(scene, ground);\n      maybeGroundPosition.forEach(current => {\n        this.maybeSelectedMesh.forEach(selectedMesh => {\n          const currentLocal = Util3d.computeLocalCoordinatesFromMesh(\n            selectedMesh,\n            Vec3.ofBabylon(current)\n          );\n\n          const v = currentLocal.sub(this.shiftFromCenterOfMass);\n          selectedMesh.position = new Vector3(\n            v.getX(),\n            v.getY(),\n            selectedMesh.position.z\n          );\n          this.notifyObservers(\n            selectedMesh,\n            false,\n            currentLocal.sub(this.mousePointInLocal)\n          );\n          this.mousePointInLocal = currentLocal;\n        });\n      });\n    });\n  };\n\n  onPointerUp = parentView => {\n    parentView.getSceneMemory().forEach(memory => {\n      const { camera, scene, ground, canvas } = memory;\n      this.maybeSelectedMesh.forEach(selectedMesh => {\n        Util3d.getGroundPosition(scene, ground).forEach(groundPos => {\n          const groundPosInLocal = Util3d.computeLocalCoordinatesFromMesh(\n            selectedMesh,\n            Vec3.ofBabylon(groundPos)\n          );\n          const bigDisplacement = groundPosInLocal.sub(this.clickPointInLocal);\n          this.notifyObservers(selectedMesh, true, Vec3.ZERO);\n          this.setProperties(parentView, selectedMesh.name);\n          parentView.updateNodeInServer(selectedMesh.name);\n\n          this.undoManager.addIt(\n            this.getUndoAbleAction(selectedMesh, bigDisplacement, parentView)\n          );\n        });\n      });\n      this.maybeSelectedMesh = Maybe.none();\n      this.shiftFromCenterOfMass = Vec3.ZERO;\n      this.mousePointInLocal = Vec3.ZERO;\n      camera.attachControl(canvas, true);\n    });\n  };\n\n  onKeyDown = (evt, parentView) => {\n    const defaultAction = () => super.onKeyDown(evt, parentView);\n    const predicateActionList = [\n      {\n        predicate: e => [\"Backspace\", \"Delete\"].includes(e.code),\n        action: this.getDeleteButtonAction(parentView)\n      },\n      {\n        predicate: e => e.ctrlKey && !e.shiftKey && e.code === \"KeyZ\",\n        action: () => this.undoManager.undo()\n      },\n      {\n        predicate: e => e.ctrlKey && e.shiftKey && e.code === \"KeyZ\",\n        action: () => this.undoManager.redo()\n      },\n      {\n        predicate: e => e.ctrlKey && e.code === \"KeyC\",\n        action: () =>\n          Maybe.fromNull(parentView.getHighlightedNodeName()).forEach(name =>\n            parentView.getNodeFromTree(name).forEach(({ item }) => {\n              const { mesh } = item;\n              mesh.getMouseContextActions &&\n                mesh.getMouseContextActions(parentView)[0].onClick();\n            })\n          )\n      },\n      {\n        predicate: e => e.ctrlKey && e.code === \"KeyV\",\n        action: () => {\n          parentView\n            .getMouseCoordinatesFromRoot()\n            .forEach(mousePosRoot =>\n              this.getPasteOnClick(mousePosRoot, parentView)()\n            );\n        }\n      },\n      { predicate: e => true, action: defaultAction }\n    ];\n    for (let i = 0; i < predicateActionList.length; i++) {\n      const predicateAction = predicateActionList[i];\n      if (predicateAction.predicate(evt)) {\n        predicateAction.action();\n        break;\n      }\n    }\n  };\n\n  getDeleteButtonAction(parentView) {\n    return () =>\n      Maybe.fromNull(parentView.getHighlightedNodeName()).forEach(nodeName => {\n        const maybeNode = parentView.getNodeFromTree(nodeName);\n        maybeNode.forEach(() => parentView.onDeleteNode(nodeName));\n        maybeNode.orElseRun(() => {\n          const contextActions = parentView.getContextActions();\n          contextActions[0].action(parentView);\n        });\n      });\n  }\n\n  notifyObservers(mesh, is2updateServer, displacement) {\n    Maybe.fromNull(mesh.observers).forEach(obs =>\n      obs.notifyObservers({\n        updatedPointMesh: mesh,\n        is2updateServer: is2updateServer,\n        displacement: displacement.toBabylon()\n      })\n    );\n  }\n\n  setProperties = (parentView, name) =>\n    setTimeout(() => parentView.setPropertiesWithName(name), 100);\n\n  /**\n   *\n   * @param {*} selectedMesh: babylon js Mesh\n   * @param {*} displacement: Vec3\n   * @param {*} parentView: mainView instance\n   */\n  getUndoAbleAction(selectedMesh, displacement, parentView) {\n    return UndoManager.actionBuilder()\n      .doAction(() => {\n        const newPos = Vec3.ofBabylon(selectedMesh.position).add(displacement);\n        selectedMesh.position = newPos.toBabylon();\n        this.notifyObservers(selectedMesh, true, displacement);\n        parentView.updateNodeInServer(selectedMesh.name);\n      })\n      .undoAction(() => {\n        const invertDisplacement = displacement.scale(-1);\n        const newPos = Vec3.ofBabylon(selectedMesh.position).add(\n          invertDisplacement\n        );\n        selectedMesh.position = newPos.toBabylon();\n        this.notifyObservers(selectedMesh, true, invertDisplacement);\n        parentView.updateNodeInServer(selectedMesh.name);\n      })\n      .build();\n  }\n\n  static getInstance() {\n    return new DragObjectsAction();\n  }\n}\n\nlet instance = null;\n\nexport default DragObjectsAction;\n","import NodeItem from \"./NodeItem\";\nimport Util3d from \"../Util3d/Util3d\";\nimport { Maybe } from \"monet\";\nimport { MeshBuilder, StandardMaterial } from \"@babylonjs/core\";\n\nclass KeyPoint extends NodeItem {\n  constructor(mesh, keyValueMap) {\n    super(mesh, keyValueMap);\n  }\n\n  ofDict(scene, dict = null, mainView = null) {\n    return KeyPoint.ofDict(scene, dict, mainView);\n  }\n\n  getType = () => KeyPoint.TYPE;\n\n  static TYPE = \"KeyPoint\";\n\n  static ofDict(scene, dict = null, mainView = null) {\n    const name = Maybe.fromNull(dict)\n      .map((x) => x.name)\n      .orSome(`KeyPoint${Math.floor(Math.random() * 1e3)}`);\n\n    const mesh = MeshBuilder.CreatePolyhedron(\n      name,\n      { custom: TRIANGULAR_ANTIPRISM, size: KeyPoint.DEFAULT_SIZE },\n      scene\n    );\n    const material = new StandardMaterial(`KeyPointMaterial${name}`, scene);\n    mesh.material = material;\n    mesh.convertToFlatShadedMesh();\n\n    const axis = Util3d.referentialBuilder(scene)\n      .isPickable(false)\n      .boxParams({ isVisible: false, size: 0.1 * KeyPoint.DEFAULT_SIZE })\n      .name(`${name}Axis`)\n      .build();\n    axis.parent = mesh;\n\n    NodeItem.mapDict2Mesh(dict, mesh);\n    return new KeyPoint(mesh, dict.keyValueMap);\n  }\n\n  static DEFAULT_SIZE = 0.25;\n}\n\nconst TRIANGULAR_ANTIPRISM = {\n  name: \"Triangular Antiprism (Octahedron)\",\n  category: [\"Antiprism\"],\n  vertex: [\n    [0, 0, 1.414214],\n    [1.414214, 0, 0],\n    [0, 1.414214, 0],\n    [-1.414214, 0, 0],\n    [0, -1.414214, 0],\n    [0, 0, -1.414214],\n  ],\n  face: [\n    [0, 1, 2],\n    [0, 2, 3],\n    [0, 3, 4],\n    [0, 4, 1],\n    [1, 4, 5],\n    [1, 5, 2],\n    [2, 5, 3],\n    [3, 5, 4],\n  ],\n};\n\nexport default KeyPoint;\n","import Util3d from \"../Util3d/Util3d\";\nimport KeyPoint from \"../NodeItem/KeyPoint\";\nimport Vec3 from \"../Math/Vec3\";\nimport { Maybe } from \"monet\";\nimport React from \"react\";\nimport MouseKeysAction from \"./MouseKeysAction\";\nimport { Color3, Axis } from \"@babylonjs/core\";\n\nlet instance = null;\n\nconst TEMP_KEY_POINT_NAME = \"temp_key_point\";\n\nclass AddKeyPointAction extends MouseKeysAction {\n  constructor() {\n    if (instance) return instance;\n    super();\n    this.key = \"addKeyPoint\";\n    this.name = \"Add Key Point [K]\";\n    this.maybeMousePos = Maybe.none();\n    this.tempMesh = null;\n    this.icon = props => <i className=\"fas fa-map-marker\" {...props}></i>;\n    instance = this;\n  }\n\n  static getInstance() {\n    return new AddKeyPointAction();\n  }\n\n  createKeyPoint = (\n    position,\n    name,\n    scene,\n    parentView,\n    is2addInServer = true,\n    color = Color3.Gray()\n  ) => {\n    const rootMesh = parentView.getRootNode().item.mesh;\n\n    const keyPoint = KeyPoint.ofDict(scene, {\n      name: name,\n      color: [color.r, color.g, color.b]\n    });\n    const mesh = keyPoint.mesh;\n    mesh.parent = rootMesh;\n\n    const localPosition = Util3d.computeLocalCoordinatesFromMesh(\n      { parent: rootMesh },\n      Vec3.ofBabylon(position)\n    ).toBabylon();\n\n    mesh.setPositionWithLocalVector(\n      localPosition.add(Axis.Z.scale(KeyPoint.DEFAULT_SIZE))\n    );\n\n    if (is2addInServer) {\n      parentView.addNodeItem2Tree(keyPoint, rootMesh.name, is2addInServer);\n    }\n    return mesh;\n  };\n\n  action = parentView => {\n    super.action(parentView);\n    parentView.setSelectedAction(this);\n  };\n\n  onPointerDown = (evt, parentView) => {\n    if (evt.button !== 0) {\n      return;\n    }\n    parentView.getSceneMemory().forEach(memory => {\n      const { scene, ground, camera } = memory;\n      this.maybeMousePos = Util3d.getGroundPosition(scene, ground);\n      this.maybeMousePos.forEach(mousePos => {\n        camera.detachControl(memory.canvas);\n      });\n    });\n  };\n\n  onPointerMove = (evt, parentView) => {\n    parentView.getSceneMemory().forEach(memory => {\n      const scene = memory.scene;\n      const ground = memory.ground;\n      const maybeCurrent = Util3d.getGroundPosition(scene, ground);\n      maybeCurrent.forEach(current => {\n        this.maybeMousePos.forEach(oldMousePos => {\n          if (this.tempMesh) this.tempMesh.dispose();\n          this.tempMesh = this.createKeyPoint(\n            current,\n            TEMP_KEY_POINT_NAME,\n            scene,\n            parentView,\n            false\n          );\n        });\n      });\n    });\n  };\n\n  onPointerUp = parentView => {\n    parentView.getSceneMemory().forEach(memory => {\n      const scene = memory.scene;\n      const camera = memory.camera;\n      const ground = memory.ground;\n      const maybeCurrent = Util3d.getGroundPosition(scene, ground);\n      maybeCurrent.forEach(current => {\n        this.maybeMousePos.forEach(oldMousePos => {\n          if (this.tempMesh) this.tempMesh.dispose();\n          const name = `KeyPoint${Math.floor(Math.random() * 1e3)}`;\n          this.createKeyPoint(\n            current,\n            name,\n            scene,\n            parentView,\n            true,\n            new Color3(Math.random(), Math.random(), Math.random())\n          );\n          parentView.setPropertiesWithName(name);\n        });\n      });\n      this.maybeMousePos = Maybe.none();\n      camera.attachControl(memory.canvas, true);\n    });\n  };\n}\n\nexport default AddKeyPointAction;\n","const Constants = {\n  RADIUS: 0.4,\n  POINTS_DENSITY: 2,\n  CLOUD_FUNCTION_NAME: \"backend.viewer\",\n};\n\nexport default Constants;\n","import NodeItem from \"./NodeItem\";\nimport Util3d from \"../Util3d/Util3d\";\nimport Vec3 from \"../Math/Vec3\";\nimport { Maybe } from \"monet\";\nimport Constants from \"../Utils/Constants\";\nimport {\n  Vector3,\n  Axis,\n  Color3,\n  Observable,\n  StandardMaterial,\n  Quaternion\n} from \"@babylonjs/core\";\nimport _isEqual from \"lodash/isEqual\";\n\nclass BoxRegion extends NodeItem {\n  constructor(mesh, corners, keyPoints, keyValueMap = {}) {\n    super(mesh, keyValueMap);\n    this.corners = corners; // in local coordinates, in relation to center of mass\n    this.keyPoints = keyPoints;\n  }\n\n  toDict() {\n    const dict = super.toDict();\n    dict.corners = this.corners;\n    return dict;\n  }\n\n  toForm() {\n    const schema = super.toForm();\n    schema.jsonSchema.properties[\"dimensions\"] = {\n      type: \"object\",\n      title: \"Dimensions\",\n      properties: {\n        lower: {\n          type: \"object\",\n          title: \"Lower Corner\",\n          properties: {\n            x: {\n              type: \"number\",\n              title: \"x\"\n            },\n            y: {\n              type: \"number\",\n              title: \"y\"\n            }\n          }\n        },\n        size: {\n          type: \"object\",\n          title: \"Size\",\n          properties: {\n            scaleX: {\n              type: \"number\",\n              title: \"scale-X\"\n            },\n            scaleY: {\n              type: \"number\",\n              title: \"scale-Y\"\n            }\n          }\n        }\n      }\n    };\n    schema.uiSchema[\"dimensions\"] = { \"ui:widget\": \"collapse\" };\n    // global ref coordinates\n    const worldCorners = this.keyPoints\n      .map(x => Util3d.getWorldCoordinates(x, x.position))\n      .map(x => x.toArray());\n    schema.data[\"dimensions\"] = {\n      lower: {\n        x: worldCorners[0][0],\n        y: worldCorners[0][1]\n      },\n      size: {\n        // TODO: warning, doesn't take into account possible scaling\n        scaleX: this.corners[1][0] - this.corners[0][0],\n        scaleY: this.corners[1][1] - this.corners[0][1]\n      }\n    };\n    return schema;\n  }\n\n  ofForm(form) {\n    const oldForm = this.toForm();\n    const oldDimensions = oldForm.data.dimensions;\n    if (_isEqual(oldDimensions, form.dimensions)) {\n      super.ofForm(form);\n    } else {\n      this.ofFormDimensions(form);\n    }\n  }\n\n  ofDict(scene, dict = null, mainView = null) {\n    return BoxRegion.ofDict(scene, dict, mainView);\n  }\n\n  getType = () => BoxRegion.TYPE;\n\n  static TYPE = \"BoxRegion\";\n\n  ofFormDimensions(form) {\n    const newLowerPositionInWorldCoordinates = Vector3.FromArray(\n      [form.dimensions.lower.x, form.dimensions.lower.y, 0].map(\n        Number.parseFloat\n      )\n    );\n    const newLocalDimensions = [\n      form.dimensions.size.scaleX,\n      form.dimensions.size.scaleY\n    ].map(Number.parseFloat);\n    const localLowerPosition = Util3d.getLocalCoordinatesFromWorld(\n      this.keyPoints[0],\n      newLowerPositionInWorldCoordinates\n    ).toArray();\n    const notify = i =>\n      this.keyPoints[i].observers.notifyObservers({\n        updatedPointMesh: this.keyPoints[i],\n        is2updateServer: false\n      });\n    this.keyPoints[0].position = new Vector3(\n      localLowerPosition[0],\n      localLowerPosition[1],\n      this.keyPoints[0].position.z\n    );\n    notify(0);\n    this.keyPoints[1].position = new Vector3(\n      localLowerPosition[0] + newLocalDimensions[0],\n      localLowerPosition[1] + newLocalDimensions[1],\n      this.keyPoints[1].position.z\n    );\n    notify(1);\n  }\n\n  static ofDict(scene, dict = null, mainView = null) {\n    if (!dict) throw \"null dictionary describing Box region\";\n    const name = Maybe.fromNull(dict.name).orSome(\n      `BoxRegion${Math.floor(Math.random() * 1e3)}`\n    );\n    const mesh = createBoxRegionMesh(dict, name, scene);\n\n    const material = new StandardMaterial(`BoxRegionMaterial${name}`, scene);\n    const color = new Color3(dict.color[0], dict.color[1], dict.color[2]);\n    material.diffuseColor = color;\n    material.emissiveColor = color;\n    material.backFaceCulling = false;\n    mesh.material = material;\n\n    mesh.visibility = 0.25;\n\n    Maybe.fromNull(dict.quaternion).forEach(quaternion => {\n      const babylonQuaternion = new Quaternion(\n        quaternion[1],\n        quaternion[2],\n        quaternion[3],\n        quaternion[0]\n      );\n      mesh.rotationQuaternion = babylonQuaternion.normalize();\n    });\n\n    const keyPoints = createPlaceHolderKeyPoints(\n      scene,\n      dict.corners.map(x => Vec3.of(x).toBabylon()),\n      mesh,\n      mainView\n    );\n    return new BoxRegion(mesh, dict.corners, keyPoints, dict.keyValueMap);\n  }\n}\n\nconst RADIUS = Constants.RADIUS;\nconst FACES = [\n  [0, 1, 2],\n  [2, 3, 0],\n  [4, 5, 6],\n  [6, 7, 4],\n  [0, 1, 5],\n  [5, 4, 0],\n  [3, 2, 6],\n  [6, 7, 3],\n  [1, 2, 6],\n  [6, 5, 1],\n  [0, 3, 7],\n  [7, 4, 0]\n];\n\n/**\n * @param boxRegion: {position: 3-array, corners: array of 3-arrays }\n */\nfunction createBoxRegionMesh(boxRegion, name, scene) {\n  // centered corners vec\n  const corners = boxRegion.corners.map(x => Vec3.of(x).toBabylon());\n  const d = corners[1].subtract(corners[0]);\n  const middlePoint = Vec3.of(boxRegion.position).toBabylon();\n  const shape = [\n    corners[0],\n    corners[0].add(Axis.X.scale(d.x)),\n    corners[0].add(new Vector3(d.x, d.y, 0)),\n    corners[0].add(Axis.Y.scale(d.y))\n  ];\n  const h = new Vector3(0, 0, d.z);\n  const boxRegionMesh = {\n    positions: [\n      shape[0],\n      shape[1],\n      shape[2],\n      shape[3],\n      shape[0].add(h),\n      shape[1].add(h),\n      shape[2].add(h),\n      shape[3].add(h)\n    ],\n    faces: FACES\n  };\n  const mesh = Util3d.meshFromPositionAndFaces(\n    name,\n    scene,\n    boxRegionMesh.positions,\n    boxRegionMesh.faces\n  );\n  mesh.position = middlePoint;\n  return mesh;\n}\n\nfunction createNewMeshFromOldUsingNewBox(newBox, scene, mesh, item) {\n  const average = Util3d.pointAverageVec3(newBox.corners.map(x => Vec3.of(x)));\n  newBox.position = average.toArray();\n  newBox.corners = newBox.corners.map(x => Vec3.of(x).sub(average).toArray());\n\n  const newMesh = createBoxRegionMesh(newBox, mesh.name, scene);\n  newMesh.position = mesh.position;\n  newMesh.rotationQuaternion = mesh.rotationQuaternion;\n  newMesh.locallyTranslate(average.toBabylon());\n  newMesh.material = mesh.material;\n  newMesh.visibility = mesh.visibility;\n  newMesh.parent = mesh.parent;\n\n  item.mesh = newMesh;\n  item.corners = newBox.corners;\n\n  const childrenCopy = [...mesh._children];\n  childrenCopy.forEach(c => {\n    mesh.removeChild(c);\n    c.parent = newMesh;\n  });\n  item.keyPoints.forEach((k, j) => {\n    k.position = Vec3.of(newBox.corners[j]).toBabylon();\n  });\n  // dispose old mesh\n  mesh.dispose();\n}\n\nconst getKeyPointObserverFunction = (mainView, scene) => {\n  return ({ updatedPointMesh, is2updateServer }) => {\n    mainView\n      .getNodeFromTree(updatedPointMesh.parent.name)\n      .forEach(boxRegionTreeNode => {\n        const index = updatedPointMesh.index;\n        const item = boxRegionTreeNode.item;\n        const mesh = item.mesh;\n        const name = mesh.name;\n\n        let newBox = {\n          position: Vec3.ofBabylon(mesh.position).toArray(),\n          corners: item.corners\n        };\n        newBox.corners[index] = Vec3.ofBabylon(\n          updatedPointMesh.position\n        ).toArray();\n\n        createNewMeshFromOldUsingNewBox(newBox, scene, mesh, item);\n        mainView.addGizmo();\n\n        if (is2updateServer) {\n          mainView.updateNodeInServer(name);\n          mainView.getNodeFromTree(name).forEach(node => {\n            mainView.setProperties(node.item.toForm());\n          });\n        }\n      });\n  };\n};\n\nconst createPlaceHolderKeyPoints = (\n  scene,\n  corners,\n  boxRegionMesh,\n  mainView\n) => {\n  const keyPoints = [];\n  corners.forEach((corner, i) => {\n    const p = corner;\n\n    const keyPoint = Util3d.createSphere(\n      scene,\n      new Color3(0.25, 0.25, 0.25),\n      RADIUS,\n      `${boxRegionMesh.name}keyPoint${i}`,\n      true\n    );\n\n    keyPoint.parent = boxRegionMesh;\n    keyPoint.position = p;\n    keyPoint.index = i;\n    keyPoint.observers = new Observable();\n    keyPoint.observers.add(getKeyPointObserverFunction(mainView, scene));\n    keyPoints.push(keyPoint);\n  });\n  return keyPoints;\n};\n\nexport default BoxRegion;\n","import { Maybe } from \"monet\";\nimport MouseKeysAction from \"./MouseKeysAction\";\nimport BoxRegion from \"../NodeItem/BoxRegion\";\nimport Vec3 from \"../Math/Vec3\";\nimport Util3d from \"../Util3d/Util3d\";\nimport React from \"react\";\nimport { Color3 } from \"@babylonjs/core\";\n\nclass BoxRegionAction extends MouseKeysAction {\n  constructor() {\n    if (instance) return instance;\n    super();\n    this.key = \"drawBoxRegion\";\n    this.name = \"Draw Box Region [B]\";\n    this.maybeMousePos = Maybe.none();\n    this.tempMesh = null;\n    this.icon = props => <i className=\"fas fa-square\" {...props} />;\n    instance = this;\n  }\n\n  action = parentView => {\n    super.action(parentView);\n    parentView.setSelectedAction(this);\n  };\n\n  onPointerDown = (evt, parentView) => {\n    if (!(evt.buttons === 1)) return;\n    parentView.getSceneMemory().forEach(memory => {\n      const scene = memory.scene;\n      const ground = memory.ground;\n      const camera = memory.camera;\n      const maybeMousePos = Util3d.getGroundPosition(scene, ground);\n      this.maybeMousePos = maybeMousePos;\n      maybeMousePos.forEach(mousePos => {\n        camera.detachControl(memory.canvas);\n      });\n    });\n  };\n\n  onPointerMove = (evt, parentView) => {\n    parentView.getSceneMemory().forEach(memory => {\n      const scene = memory.scene;\n      const ground = memory.ground;\n      const maybeCurrent = Util3d.getGroundPosition(scene, ground);\n      maybeCurrent.forEach(current => {\n        this.maybeMousePos.forEach(oldMousePos => {\n          if (this.tempMesh) this.tempMesh.dispose();\n          this.tempMesh = this.createBoxRegion(\n            [oldMousePos, current],\n            TEMP_BOX_REGION_NAME,\n            scene,\n            parentView,\n            false\n          );\n        });\n      });\n    });\n  };\n\n  onPointerUp = parentView => {\n    parentView.getSceneMemory().forEach(memory => {\n      const scene = memory.scene;\n      const camera = memory.camera;\n      const ground = memory.ground;\n      const maybeCurrent = Util3d.getGroundPosition(scene, ground);\n      maybeCurrent.forEach(current => {\n        this.maybeMousePos.forEach(oldMousePos => {\n          this.tempMesh.dispose();\n          const name = `BoxRegion${Math.floor(Math.random() * 1e3)}`;\n          this.createBoxRegion(\n            [oldMousePos, current],\n            name,\n            scene,\n            parentView,\n            true\n          );\n          parentView.setPropertiesWithName(name);\n        });\n      });\n      this.maybeMousePos = Maybe.none();\n      camera.attachControl(memory.canvas, true);\n      parentView.renderMenus();\n    });\n  };\n\n  createBoxRegion = (\n    region,\n    name,\n    scene,\n    parentView,\n    is2addInServer = true,\n    color = Color3.Red(),\n    height = 1\n  ) => {\n    const rootMesh = parentView.getRootNode().item.mesh;\n\n    const localRegion = region.map(r =>\n      Util3d.computeLocalCoordinatesFromMesh(\n        { parent: rootMesh },\n        Vec3.ofBabylon(r)\n      )\n    );\n\n    localRegion[1] = localRegion[1].add(Vec3.of([0, 0, height]));\n    const middlePoint = localRegion[0].add(localRegion[1]).scale(0.5);\n    const centeredRegion = localRegion.map(r => r.sub(middlePoint));\n\n    const boxRegionItem = BoxRegion.ofDict(\n      scene,\n      {\n        name: name,\n        position: middlePoint.toArray(),\n        color: [color.r, color.g, color.b],\n        corners: centeredRegion.map(x => x.toArray())\n      },\n      parentView\n    );\n    boxRegionItem.mesh.parent = rootMesh;\n    if (is2addInServer) {\n      parentView.addNodeItem2Tree(boxRegionItem, rootMesh.name, is2addInServer);\n    }\n    return boxRegionItem.mesh;\n  };\n\n  static getInstance() {\n    return new BoxRegionAction();\n  }\n}\n\nlet instance = null;\n\nconst TEMP_BOX_REGION_NAME = \"temp_box_region\";\n\nexport default BoxRegionAction;\n","import NodeItem from \"./NodeItem\";\nimport Vec3 from \"../Math/Vec3\";\nimport Util3d from \"../Util3d/Util3d\";\nimport React from \"react\";\nimport { Maybe } from \"monet\";\nimport Constants from \"../Utils/Constants\";\nimport {\n  Observable,\n  Color3,\n  MeshBuilder,\n  Quaternion,\n  Vector3\n} from \"@babylonjs/core\";\n\nconst RADIUS = Constants.RADIUS;\n\nclass Path extends NodeItem {\n  /**\n   * @param {*} mesh\n   * @param {*} localPath: is an array of 3-arrays of numbers of the local coordinates in relation to mesh.position and quaternion\n   * @param {*} keyPoints: are the keyPoints meshes array\n   * @param {*} splinePath: is an array of 3-arrays of numbers of the local coordinates in relation to mesh.position and quaternion\n   */\n  constructor(mesh, localPath, keyPoints, splinePath, keyValueMap = {}) {\n    super(mesh, keyValueMap);\n    // Array<Vector3> points in relation to its mean\n    this.localPath = localPath;\n    // Array<Meshes> representing key points of the curve\n    this.keyPoints = keyPoints;\n    // spline points from local path\n    this.splinePath = splinePath;\n    this.selectedKeyPointIndex = -1;\n  }\n\n  toDict() {\n    const dict = super.toDict();\n    dict.localPath = this.localPath;\n    dict.splinePath = this.splinePath;\n    return dict;\n  }\n\n  toForm() {\n    const schema = super.toForm();\n    if (this.selectedKeyPointIndex >= 0) {\n      schema.jsonSchema.properties[\"selectedKeyPoint\"] = {\n        type: \"object\",\n        title: `KeyPoint ${this.selectedKeyPointIndex}`,\n        properties: {\n          x: {\n            type: \"number\",\n            title: \"x\"\n          },\n          y: {\n            type: \"number\",\n            title: \"y\"\n          },\n          z: {\n            type: \"number\",\n            title: \"z\"\n          }\n        }\n      };\n\n      schema.uiSchema[\"selectedKeyPoint\"] = {\n        \"ui:widget\": \"collapse\"\n      };\n      schema.uiSchema[\"position\"] = { \"ui:widget\": \"hidden\" };\n      schema.uiSchema[\"quaternion\"] = { \"ui:widget\": \"hidden\" };\n      schema.uiSchema[\"color\"] = { \"ui:widget\": \"hidden\" };\n      schema.uiSchema[\"annotations\"] = { \"ui:widget\": \"hidden\" };\n      const selectedMesh = this.keyPoints[this.selectedKeyPointIndex];\n      const position = Util3d.getWorldCoordinates(\n        selectedMesh,\n        selectedMesh.position\n      ).toArray();\n      schema.data[\"selectedKeyPoint\"] = {\n        x: position[0],\n        y: position[1],\n        z: position[2]\n      };\n      return schema;\n    }\n    return schema;\n  }\n\n  ofForm(form) {\n    super.ofForm(form);\n    if (this.selectedKeyPointIndex >= 0) {\n      const selectedKeyPoint = this.keyPoints[this.selectedKeyPointIndex];\n      const formPosition = form.selectedKeyPoint;\n      const newPosInWorldCoordinates = Vector3.FromArray(\n        [formPosition.x, formPosition.y, formPosition.z].map(Number.parseFloat)\n      );\n      const localPos = Util3d.getLocalCoordinatesFromWorld(\n        selectedKeyPoint,\n        newPosInWorldCoordinates\n      ).toArray();\n      selectedKeyPoint.position = new Vector3(\n        localPos[0],\n        localPos[1],\n        localPos[2]\n      );\n      selectedKeyPoint.observers.notifyObservers({\n        updatedPointMesh: selectedKeyPoint,\n        is2updateServer: false\n      });\n    }\n  }\n\n  ofDict(scene, dict = null, mainView = null) {\n    return Path.ofDict(scene, dict, mainView);\n  }\n\n  getType = () => Path.TYPE;\n\n  static TYPE = \"Path\";\n\n  static ofDict(scene, dict = null, mainView = null) {\n    if (!dict || !mainView)\n      throw \"null dictionary describing path or null mainView\";\n\n    const name = dict.name;\n    const curve = dict.localPath.map(z => Vec3.of(z).toBabylon());\n    const spline = Util3d.getSplineFromCurve(curve);\n    const { points } = spline;\n    let mesh = null;\n    //hack\n    if (points.length === 1) {\n      mesh = MeshBuilder.CreateLines(\n        name,\n        { points: points, updatable: true },\n        scene\n      );\n    } else {\n      mesh = Util3d.createTubeFromPoints(\n        scene,\n        points,\n        Color3.Gray(),\n        RADIUS / 8,\n        name\n      );\n    }\n    mesh.position = Vec3.of(dict.position).toBabylon();\n    mesh.material = Util3d.getMaterialFromColor(\n      Color3.FromArray(dict.color),\n      scene,\n      `PathMaterial${name}`\n    );\n    mesh.rotationQuaternion = Maybe.fromNull(dict.quaternion)\n      .map(quaternion =>\n        new Quaternion(\n          quaternion[1],\n          quaternion[2],\n          quaternion[3],\n          quaternion[0]\n        ).normalize()\n      )\n      .orSome(Quaternion.Identity());\n    const splinePath = Util3d.splineObj2redis(spline);\n    const keyPoints = createPlaceHolderKeyPoints(\n      scene,\n      { ...dict, mesh, splinePath },\n      mainView\n    );\n\n    const path2return = new Path(\n      mesh,\n      curve.map(point => [point.x, point.y, point.z]),\n      keyPoints,\n      splinePath,\n      dict.keyValueMap\n    );\n    mesh.onClick = getMeshOnClick(mainView, path2return);\n    return path2return;\n  }\n}\n\nexport default Path;\n\nconst getMeshOnClick = (mainView, nodeItem) => () => {\n  mainView.closeContextDial();\n  mainView\n    .getNodeFromTree(nodeItem.name)\n    .forEach(node => (node.item.selectedKeyPointIndex = -1));\n};\n\nfunction defaultKeyPointUpdate(scene, mainView, oldMesh, item) {\n  // used when keypoint is updated\n  const childrenCopy = [...oldMesh._children];\n  const spline = item.splinePath.map(z => new Vector3(z[0], z[1], 0));\n  childrenCopy.forEach(c => {\n    c.parent = item.mesh;\n  });\n  return item.keyPoints.map((k, i) => {\n    k.index = i;\n    k.name = `${oldMesh.name}keyPointSpline${i}`;\n    k.position = Vec3.of(item.localPath[i]).toBabylon();\n    k.rotationQuaternion = Quaternion.Identity();\n    if (i > 0 && i < item.keyPoints.length - 1) {\n      k._children.forEach(kChild => kChild.dispose());\n      const c = getConeMesh(\n        scene,\n        k.material.diffuseColor,\n        item.mesh,\n        i,\n        spline,\n        k.position\n      )();\n      c.parent = k;\n    }\n    return k;\n  });\n}\n\nfunction createNewMeshFromOldUsingNewPoints(\n  newPoints,\n  scene,\n  oldMesh,\n  item,\n  mainView,\n  keyPointUpdateFunction = defaultKeyPointUpdate\n) {\n  const average = Util3d.pointAverage(newPoints);\n  newPoints = newPoints.map(x => x.subtract(average));\n\n  const spline = Util3d.getSplineFromCurve(newPoints);\n  // const newMesh = MeshBuilder.CreateLines(\n  //   oldMesh.name,\n  //   { points: spline.points, updatable: true },\n  //   scene\n  // );\n\n  const newMesh = Util3d.createTubeFromPoints(\n    scene,\n    spline.points,\n    Color3.Gray(),\n    RADIUS / 8,\n    oldMesh.name\n  );\n\n  newMesh.position = oldMesh.position;\n  newMesh.rotationQuaternion = oldMesh.rotationQuaternion;\n  newMesh.locallyTranslate(average);\n  newMesh.material = oldMesh.material;\n  newMesh.visibility = oldMesh.visibility;\n  newMesh.parent = oldMesh.parent;\n  newMesh.onClick = oldMesh.onClick;\n\n  item.localPath = newPoints.map(x => Vec3.ofBabylon(x).toArray());\n  item.splinePath = Util3d.splineObj2redis(spline);\n  item.mesh = newMesh;\n\n  item.keyPoints = keyPointUpdateFunction(scene, mainView, oldMesh, item);\n\n  oldMesh.dispose();\n  return newPoints;\n}\n\nconst getKeyPointObserverFunction = (scene, mainView) => {\n  return ({ updatedPointMesh, is2updateServer }) => {\n    if (!updatedPointMesh.parent) return;\n    mainView\n      .getNodeFromTree(updatedPointMesh.parent.name)\n      .forEach(pathTreeNode => {\n        const index = updatedPointMesh.index;\n        const item = pathTreeNode.item;\n        const mesh = item.mesh;\n        let newPoints = item.localPath.map(x => Vec3.of(x).toBabylon());\n        newPoints[index] = updatedPointMesh.position;\n\n        createNewMeshFromOldUsingNewPoints(\n          newPoints,\n          scene,\n          mesh,\n          item,\n          mainView\n        );\n\n        if (index > 0 && index < newPoints.length - 1) {\n          // we know by construction that this keyPoint has children\n          mainView.highlightMeshInScene([item.keyPoints[index]._children[0]]);\n        }\n\n        if (is2updateServer) {\n          mainView.updateNodeInServer(mesh.name);\n          mainView.getNodeFromTree(mesh.name).forEach(node => {\n            node.item.selectedKeyPointIndex = index;\n            mainView.setProperties(node.item.toForm());\n          });\n        }\n      });\n  };\n};\n\nconst deleteKeyPoint = (scene, keyPointMesh, mainView) => {\n  const index = keyPointMesh.index;\n  const name = keyPointMesh.parent.name;\n  mainView.getNodeFromTree(name).forEach(pathTreeNode => {\n    const item = pathTreeNode.item;\n    const mesh = item.mesh;\n\n    let newPoints = item.localPath.map(x => Vec3.of(x).toBabylon());\n\n    newPoints.splice(index, 1);\n    item.keyPoints.splice(index, 1)[0].dispose();\n\n    createNewMeshFromOldUsingNewPoints(\n      newPoints,\n      scene,\n      mesh,\n      item,\n      mainView,\n      onAddNewPointKeyPointUpdate\n    );\n\n    mainView.updateNodeInServer(name);\n  });\n};\n\nfunction onAddNewPointKeyPointUpdate(scene, mainView, oldMesh, item) {\n  // used when new keypoint is added\n  return createPlaceHolderKeyPoints(scene, item, mainView);\n}\n/**\n *\n * @param {*} scene\n * @param {*} keyPointMesh\n * @param {*} curveMesh\n * @param {*} mainView\n * @param {*} orientation: it belongs to the set {-1,1}, represents orientation\n */\nconst addKeyPointInBetween = (scene, keyPointMesh, mainView, orientation) => {\n  const index = keyPointMesh.index;\n  const name = keyPointMesh.parent.name;\n  mainView.getNodeFromTree(name).forEach(pathTreeNode => {\n    const nextIndex = index + orientation;\n    const item = pathTreeNode.item;\n    const numberOfPoints = item.localPath.length;\n    const mesh = item.mesh;\n    let newPoints = [];\n    const oldPoints = item.localPath.map(x => Vec3.of(x).toBabylon());\n\n    if (nextIndex < 0) {\n      newPoints = [\n        oldPoints[0].scale(3).subtract(oldPoints[1]).scale(0.5)\n      ].concat(oldPoints);\n    } else if (nextIndex > numberOfPoints - 1) {\n      newPoints = oldPoints.concat([\n        oldPoints[numberOfPoints - 1]\n          .scale(3)\n          .subtract(oldPoints[numberOfPoints - 2])\n          .scale(0.5)\n      ]);\n    } else {\n      const specialIndex = index + Math.max(0, orientation);\n      for (let i = 0; i < specialIndex; i++) {\n        newPoints.push(oldPoints[i]);\n      }\n      newPoints.push(oldPoints[nextIndex].add(oldPoints[index]).scale(0.5));\n      for (let i = specialIndex; i < numberOfPoints; i++) {\n        newPoints.push(oldPoints[i]);\n      }\n    }\n\n    createNewMeshFromOldUsingNewPoints(\n      newPoints,\n      scene,\n      mesh,\n      item,\n      mainView,\n      onAddNewPointKeyPointUpdate\n    );\n\n    mainView.updateNodeInServer(name);\n  });\n};\n\nconst getKeyPointActions = (scene, keyPointMesh, mainView) => {\n  const actions = [];\n\n  mainView.getNodeFromTree(keyPointMesh.parent.name).forEach(pathTreeNode => {\n    const item = pathTreeNode.item;\n    const curve = item.localPath;\n\n    if (curve.length !== 2) {\n      actions.push({\n        icon: props => <i className=\"fas fa-trash\" {...props}></i>,\n        action: parentView => {\n          deleteKeyPoint(scene, keyPointMesh, parentView);\n          parentView.closeContextDial();\n        },\n        name: \"Delete node [DEL]\"\n      });\n    }\n\n    actions.push({\n      icon: props => <i className=\"fas fa-less-than\" {...props}></i>,\n      action: parentView => {\n        addKeyPointInBetween(scene, keyPointMesh, parentView, -1);\n        parentView.closeContextDial();\n      },\n      name: \"Add previous\"\n    });\n\n    actions.push({\n      icon: props => <i className=\"fas fa-greater-than\" {...props}></i>,\n      action: parentView => {\n        addKeyPointInBetween(scene, keyPointMesh, parentView, 1);\n        parentView.closeContextDial();\n      },\n      name: \"Add next\"\n    });\n  });\n\n  return actions;\n};\n\nconst createPlaceHolderKeyPoints = (scene, item, mainView) => {\n  const color = new Color3(0.25, 0.25, 0.25);\n  const keyPoints = [];\n  const curve = item.localPath.map(z => Vec3.of(z).toBabylon());\n  const spline = item.splinePath.map(z => new Vector3(z[0], z[1], 0));\n  const curveMesh = item.mesh;\n  curve.forEach((p, i) => {\n    const sphere = getSphereMesh(scene, color, curveMesh, i);\n    const cone = () => {\n      const c = getConeMesh(scene, color, curveMesh, i, spline, p)();\n      const s = getSphereMesh(scene, color, curveMesh, i)();\n      s.visibility = 0.1;\n      c.parent = s;\n      return s;\n    };\n\n    const keyPoint = i === 0 || i === curve.length - 1 ? sphere() : cone();\n    keyPoint.parent = curveMesh;\n    keyPoint.position = p;\n    keyPoint.index = i;\n    keyPoint.observers = new Observable();\n\n    keyPoints.push(keyPoint);\n\n    keyPoint.observers.add(getKeyPointObserverFunction(scene, mainView));\n  });\n\n  keyPoints.forEach(x => {\n    x.onClick = () => {\n      mainView.setContextActions(getKeyPointActions(scene, x, mainView));\n    };\n  });\n  return keyPoints;\n};\n\nfunction getConeMesh(scene, color, curveMesh, i, spline, p) {\n  return () => {\n    const index = spline\n      .map(z => p.subtract(z).length())\n      .reduce((e, x, i) => (e.value < x ? e : { value: x, index: i }), {\n        value: Number.MAX_VALUE,\n        index: -1\n      }).index;\n    const u = spline[index + 1]\n      .subtract(spline[index])\n      .normalize()\n      .scale(RADIUS);\n    const c = Util3d.createOrientedCone(\n      scene,\n      u,\n      color,\n      `${curveMesh.name}keyPointCone${i}`,\n      false\n    );\n    return c;\n  };\n}\n\nfunction getSphereMesh(scene, color, curveMesh, i) {\n  return () =>\n    Util3d.createSphere(\n      scene,\n      color,\n      RADIUS,\n      `${curveMesh.name}keyPointSpline${i}`,\n      true\n    );\n}\n","import Util3d from \"../Util3d/Util3d\";\nimport Vec3 from \"../Math/Vec3\";\nimport Path from \"../NodeItem/Path\";\nimport MouseKeysAction from \"./MouseKeysAction\";\nimport React from \"react\";\nimport { Color3 } from \"@babylonjs/core\";\n\nclass DrawPathAction extends MouseKeysAction {\n  constructor() {\n    if (instance) return instance;\n    super();\n    this.key = \"drawPath\";\n    this.name = \"Draw Path [P]\";\n    this.mouseCurve = [];\n    this.icon = props => <i className=\"fas fa-bezier-curve\" {...props}></i>;\n    instance = this;\n  }\n\n  static getInstance() {\n    return new DrawPathAction();\n  }\n\n  action = parentView => {\n    super.action(parentView);\n    parentView.setSelectedAction(this);\n  };\n\n  onPointerDown = (evt, parentView) => {\n    if (!(evt.buttons === 1)) return;\n    parentView.getSceneMemory().forEach(memory => {\n      const { scene, ground, camera, canvas } = memory;\n      const maybeMousePos = Util3d.getGroundPosition(scene, ground);\n      maybeMousePos.forEach(mousePos => {\n        camera.detachControl(canvas);\n        this.mouseCurve.push(mousePos);\n        const drawPathPoints =\n          this.mouseCurve.length === 1\n            ? [this.mouseCurve[0], this.mouseCurve[0]]\n            : this.mouseCurve;\n\n        this.createCurve(\n          drawPathPoints,\n          TEMP_PATH_NAME,\n          scene,\n          parentView,\n          false\n        );\n        parentView.setContextActions(\n          this.getDrawPathContextAction(camera, canvas, scene)\n        );\n      });\n    });\n  };\n\n  onPointerMove = (evt, parentView) => {\n    // empty\n  };\n\n  onPointerUp = parentView => {\n    // empty\n  };\n\n  onKeyDown = (evt, parentView) => {\n    parentView.getSceneMemory().forEach(memory => {\n      const { scene, camera, canvas } = memory;\n      const contextActions = this.getDrawPathContextAction(\n        camera,\n        canvas,\n        scene\n      );\n      const keyCodeActionMap = {\n        Enter: () => contextActions[1].action(parentView),\n        Delete: () => contextActions[0].action(parentView),\n        Backspace: () => contextActions[0].action(parentView),\n        Escape: () => {\n          if (this.mouseCurve.length === 0) {\n            super.onKeyDown(evt, parentView);\n          }\n          contextActions[0].action(parentView);\n        }\n      };\n      if (evt.code in keyCodeActionMap) {\n        keyCodeActionMap[evt.code]();\n      } else {\n        super.onKeyDown(evt, parentView);\n      }\n    });\n  };\n\n  createCurve = (\n    curve,\n    name,\n    scene,\n    parentView,\n    is2addInServer = true,\n    color = Color3.Gray()\n  ) => {\n    const rootMesh = parentView.getRootNode().item.mesh;\n\n    const localCurve = curve.map(w =>\n      Util3d.computeLocalCoordinatesFromMesh(\n        { parent: rootMesh },\n        Vec3.ofBabylon(w)\n      ).toBabylon()\n    );\n    const middlePoint = Util3d.pointAverage(localCurve);\n    const centeredCurve = localCurve.map(w => w.subtract(middlePoint));\n\n    const pathItem = Path.ofDict(\n      scene,\n      {\n        name: name,\n        position: Vec3.ofBabylon(middlePoint).toArray(),\n        color: [color.r, color.g, color.b],\n        localPath: centeredCurve.map(z => Vec3.ofBabylon(z).toArray())\n      },\n      parentView\n    );\n    pathItem.mesh.parent = rootMesh;\n    parentView.addNodeItem2Tree(pathItem, rootMesh.name, is2addInServer);\n  };\n\n  getDrawPathContextAction = (camera, canvas, scene) => {\n    const ans = [];\n    ans.push({\n      icon: props => <i className=\"fas fa-trash\" {...props}></i>,\n      action: parentView => {\n        camera.attachControl(canvas, true);\n        parentView.deleteNodeFromTreeUsingName(TEMP_PATH_NAME, false);\n        this.mouseCurve = [];\n        parentView.closeContextDial();\n      },\n      name: \"Clear Path [ESC | DEL | Backspace]\"\n    });\n    if (this.mouseCurve.length > 1) {\n      ans.push({\n        icon: props => <i className=\"fas fa-check\" {...props}></i>,\n        action: parentView => {\n          camera.attachControl(canvas, true);\n          parentView.deleteNodeFromTreeUsingName(TEMP_PATH_NAME, false);\n          const name = `Path${Math.floor(Math.random() * 1e3)}`;\n          this.createCurve(this.mouseCurve, name, scene, parentView, true);\n          this.mouseCurve = [];\n          parentView.setPropertiesWithName(name);\n          parentView.closeContextDial();\n        },\n        name: \"Create Path [Enter]\"\n      });\n    }\n    return ans;\n  };\n}\n\nlet instance = null;\nconst TEMP_PATH_NAME = \"temp_curve\";\nexport default DrawPathAction;\n","import NodeItem from \"./NodeItem\";\nimport Vec3 from \"../Math/Vec3\";\nimport Util3d from \"../Util3d/Util3d\";\nimport { Maybe } from \"monet\";\nimport React from \"react\";\nimport { Utils } from \"mov-fe-lib-core\";\nimport Constants from \"../Utils/Constants\";\nimport {\n  Vector3,\n  Observable,\n  Color3,\n  StandardMaterial,\n  Quaternion\n} from \"@babylonjs/core\";\n\nconst RADIUS = Constants.RADIUS;\nconst positiveMod = Utils.mod;\n\nclass PolygonRegion extends NodeItem {\n  /**\n   * @param {*} mesh\n   * @param {*} localPolygon: is an array of 3-arrays of numbers of the local coordinates in relation to mesh.position and quaternion\n   * @param {*} keyPoints: are the keyPoints meshes array\n   */\n  constructor(mesh, localPolygon, height, keyPoints, keyValueMap = {}) {\n    super(mesh, keyValueMap);\n    this.localPolygon = localPolygon;\n    this.height = height;\n    this.keyPoints = keyPoints;\n  }\n\n  toDict() {\n    const dict = super.toDict();\n    dict.localPolygon = this.localPolygon;\n    dict.height = this.height;\n    return dict;\n  }\n\n  ofDict(scene, dict = null, mainView = null) {\n    return PolygonRegion.ofDict(scene, dict, mainView);\n  }\n\n  getType = () => PolygonRegion.TYPE;\n\n  static TYPE = \"PolygonRegion\";\n\n  static ofDict(scene, dict = null, mainView = null) {\n    if (!dict || !mainView)\n      throw \"null dictionary describing polygon or null mainView\";\n\n    const polygon = dict.localPolygon.map(z => Vec3.of(z).toBabylon());\n    const middlePoint = Vec3.of(dict.position).toBabylon();\n\n    const mesh = createExtrudedPolygonMesh(\n      scene,\n      polygon,\n      dict.height,\n      dict.name\n    );\n    mesh.position = middlePoint;\n\n    const material = new StandardMaterial(`PolygonMaterial${dict.name}`, scene);\n    const color = new Color3(dict.color[0], dict.color[1], dict.color[2]);\n    material.diffuseColor = color;\n    material.emissiveColor = color;\n    mesh.material = material;\n    mesh.visibility = 0.5;\n    Maybe.fromNull(dict.quaternion).forEach(quaternion => {\n      const babylonQuaternion = new Quaternion(\n        quaternion[1],\n        quaternion[2],\n        quaternion[3],\n        quaternion[0]\n      );\n      mesh.rotationQuaternion = babylonQuaternion.normalize();\n    });\n\n    const keypoints = createPlaceHolderKeyPoints(\n      scene,\n      polygon,\n      mesh,\n      mainView\n    );\n\n    return new PolygonRegion(\n      mesh,\n      polygon.map(point => [point.x, point.y, point.z]),\n      dict.height,\n      keypoints,\n      dict.keyValueMap\n    );\n  }\n}\n\n/**\n *\n * @param {*} polygon: boundary as babylonjs vec3\n */\nconst stitchingBoundaries = polygon => {\n  const n = polygon.length;\n  const orientation = Util3d.computeOrientation(polygon);\n  const ans = [];\n  for (let i = 0; i < n; i++) {\n    const modi = (i + 1) % n;\n    ans.push([i, n + modi, modi]);\n    ans.push([i, n + i, n + modi]);\n  }\n  return orientation > 0 ? ans : ans.map(reverseOrientation);\n};\n\nconst reverseOrientation = triangleIndice => {\n  const ans = [];\n  ans.push(triangleIndice[1]);\n  ans.push(triangleIndice[0]);\n  ans.push(triangleIndice[2]);\n  return ans;\n};\n\n/**\n *\n * @param {*} scene\n * @param {*} polygon array of babylon js vector3\n * @param {*} height\n * @param {*} name\n */\nconst createExtrudedPolygonMesh = (scene, polygon, height, name) => {\n  const h = new Vector3(0, 0, height);\n  const polygonRegionMesh = {\n    positions: [],\n    faces: []\n  };\n\n  polygonRegionMesh.positions = [...polygon];\n  for (let i = 0; i < polygon.length; i++) {\n    polygonRegionMesh.positions.push(polygon[i].add(h));\n  }\n\n  const n = polygon.length;\n  const lowerTriangulation = Util3d.triangulatePolygon(polygon);\n  const upperTriangulation = Util3d.triangulatePolygon(\n    polygonRegionMesh.positions.slice(n)\n  )\n    .map(x => x.map(z => z + n))\n    .map(reverseOrientation);\n\n  const stitchTriangulation = stitchingBoundaries(polygon);\n\n  polygonRegionMesh.faces = lowerTriangulation\n    .concat(upperTriangulation)\n    .concat(stitchTriangulation);\n\n  const mesh = Util3d.meshFromPositionAndFaces(\n    name,\n    scene,\n    polygonRegionMesh.positions,\n    polygonRegionMesh.faces\n  );\n  return mesh;\n};\n\nfunction defaultKeyPointUpdate(scene, mainView, oldMesh, item) {\n  // used when keypoint is updated or deleted\n  const childrenCopy = [...oldMesh._children];\n  childrenCopy.forEach(c => {\n    oldMesh.removeChild(c);\n    c.parent = item.mesh;\n  });\n\n  return item.keyPoints.map((k, i) => {\n    k.observers = new Observable();\n    k.observers.add(getKeyPointObserverFunction(scene, mainView));\n    k.index = i;\n    k.name = `${oldMesh.name}keyPoint${i}`;\n    k.position = Vec3.of(item.localPolygon[i]).toBabylon();\n    return k;\n  });\n}\n\nfunction createNewMeshFromOldUsingNewPoints(\n  newPoints,\n  scene,\n  mesh,\n  item,\n  mainView,\n  keyPointUpdateFunction = defaultKeyPointUpdate\n) {\n  const average = Util3d.pointAverage(newPoints);\n  newPoints = newPoints.map(x => x.subtract(average));\n  // update mesh\n  const newMesh = createExtrudedPolygonMesh(\n    scene,\n    newPoints,\n    item.height,\n    mesh.name\n  );\n  newMesh.position = mesh.position;\n  newMesh.rotationQuaternion = mesh.rotationQuaternion;\n  newMesh.locallyTranslate(average);\n  newMesh.material = mesh.material;\n  newMesh.visibility = mesh.visibility;\n  newMesh.parent = mesh.parent;\n\n  item.localPolygon = newPoints.map(x => Vec3.ofBabylon(x).toArray());\n  item.mesh = newMesh;\n\n  item.keyPoints = keyPointUpdateFunction(scene, mainView, mesh, item);\n  // dispose old mesh\n  mesh.dispose();\n  return newPoints;\n}\n\nconst getKeyPointObserverFunction = (scene, mainView) => {\n  return ({ updatedPointMesh, is2updateServer }) => {\n    if (!updatedPointMesh.parent) return;\n    mainView\n      .getNodeFromTree(updatedPointMesh.parent.name)\n      .forEach(polygonTreeNode => {\n        const index = updatedPointMesh.index;\n        const item = polygonTreeNode.item;\n        const mesh = item.mesh;\n        const name = mesh.name;\n        let newPoints = item.localPolygon.map(x => Vec3.of(x).toBabylon());\n        newPoints[index] = updatedPointMesh.position;\n        createNewMeshFromOldUsingNewPoints(\n          newPoints,\n          scene,\n          mesh,\n          item,\n          mainView\n        );\n\n        if (is2updateServer) {\n          mainView.updateNodeInServer(name);\n        }\n      });\n  };\n};\n\nfunction onAddNewPointKeyPointUpdate(scene, mainView, oldMesh, item) {\n  // used when new keypoint is added\n  return createPlaceHolderKeyPoints(\n    scene,\n    item.localPolygon.map(x => Vec3.of(x).toBabylon()),\n    item.mesh,\n    mainView\n  );\n}\n\n/**\n *\n * @param {*} scene\n * @param {*} keyPointMesh\n * @param {*} curveMesh\n * @param {*} mainView\n * @param {*} orientation: it belongs to the set {-1,1}, represents orientation\n */\nconst addKeyPointInBetween = (scene, keyPointMesh, mainView, orientation) => {\n  const index = keyPointMesh.index;\n  const name = keyPointMesh.parent.name;\n  mainView.getNodeFromTree(name).forEach(pathTreeNode => {\n    const item = pathTreeNode.item;\n    const numberOfPoints = item.localPolygon.length;\n    const nextIndex = positiveMod(index + orientation, numberOfPoints);\n    const mesh = item.mesh;\n    const oldPoints = item.localPolygon.map(x => Vec3.of(x).toBabylon());\n\n    let newPoints = [];\n    const specialIndex = index + Math.max(0, orientation);\n\n    for (let i = 0; i < specialIndex; i++) {\n      newPoints.push(oldPoints[i]);\n    }\n\n    newPoints.push(oldPoints[nextIndex].add(oldPoints[index]).scale(0.5));\n\n    for (let i = specialIndex; i < numberOfPoints; i++) {\n      newPoints.push(oldPoints[i]);\n    }\n\n    createNewMeshFromOldUsingNewPoints(\n      newPoints,\n      scene,\n      mesh,\n      item,\n      mainView,\n      onAddNewPointKeyPointUpdate\n    );\n\n    // mainView.updateNodeInServer(name);\n  });\n};\n\nconst deleteKeyPoint = (scene, keyPointMesh, mainView) => {\n  const index = keyPointMesh.index;\n  const name = keyPointMesh.parent.name;\n  mainView.getNodeFromTree(name).forEach(pathTreeNode => {\n    const item = pathTreeNode.item;\n    const mesh = item.mesh;\n\n    let newPoints = item.localPolygon.map(x => Vec3.of(x).toBabylon());\n\n    newPoints.splice(index, 1);\n    item.keyPoints.splice(index, 1)[0].dispose();\n\n    createNewMeshFromOldUsingNewPoints(newPoints, scene, mesh, item, mainView);\n\n    mainView.updateNodeInServer(name);\n  });\n};\n\nconst getKeyPointActions = (scene, keyPointMesh, mainView) => {\n  const actions = [];\n\n  mainView.getNodeFromTree(keyPointMesh.parent.name).forEach(pathTreeNode => {\n    const item = pathTreeNode.item;\n    const polygon = item.localPolygon;\n\n    if (polygon.length > 3) {\n      actions.push({\n        icon: props => <i className=\"fas fa-trash\" {...props}></i>,\n        action: parentView => {\n          deleteKeyPoint(scene, keyPointMesh, parentView);\n          parentView.closeContextDial();\n        },\n        name: \"Delete node [DEL]\"\n      });\n    }\n\n    actions.push({\n      icon: props => <i className=\"fas fa-less-than\" {...props}></i>,\n      action: parentView => {\n        addKeyPointInBetween(scene, keyPointMesh, parentView, -1);\n        parentView.closeContextDial();\n      },\n      name: \"Add previous\"\n    });\n\n    actions.push({\n      icon: props => <i className=\"fas fa-greater-than\" {...props}></i>,\n      action: parentView => {\n        addKeyPointInBetween(scene, keyPointMesh, parentView, 1);\n        parentView.closeContextDial();\n      },\n      name: \"Add next\"\n    });\n  });\n\n  return actions;\n};\n\nconst createPlaceHolderKeyPoints = (scene, polygon, polygonMesh, mainView) => {\n  const keyPoints = [];\n  polygon.forEach((p, i) => {\n    const color = new Color3(0.25, 0.25, 0.25);\n    const keyPoint = Util3d.createSphere(\n      scene,\n      color,\n      RADIUS,\n      `${polygonMesh.name}keyPointPolygon${i}`,\n      true\n    );\n    keyPoint.parent = polygonMesh;\n    keyPoint.position = p;\n    keyPoint.index = i;\n    keyPoint.observers = new Observable();\n\n    keyPoints.push(keyPoint);\n\n    keyPoint.observers.add(getKeyPointObserverFunction(scene, mainView));\n  });\n\n  keyPoints.forEach(x => {\n    x.onClick = () => {\n      mainView.setContextActions(getKeyPointActions(scene, x, mainView));\n    };\n  });\n\n  return keyPoints;\n};\n\nexport default PolygonRegion;\n","import MouseKeysAction from \"./MouseKeysAction\";\nimport Vec3 from \"../Math/Vec3\";\nimport Util3d from \"../Util3d/Util3d\";\nimport React from \"react\";\nimport PolygonRegion from \"../NodeItem/PolygonRegion\";\nimport { Color3 } from \"@babylonjs/core\";\n\nlet instance = null;\n\nconst TEMP_POLYGON_REGION_NAME = \"temp_polygon_region\";\n\n// Similar 2 Draw Action Path\nclass PolygonRegionAction extends MouseKeysAction {\n  constructor() {\n    if (instance) return instance;\n    super();\n    this.key = \"drawPolygonRegion\";\n    this.name = \"Draw Polygon Region [R]\";\n    this.mouseCurve = [];\n    this.icon = props => <i className=\"fas fa-draw-polygon\" {...props}></i>;\n    instance = this;\n  }\n\n  static getInstance() {\n    return new PolygonRegionAction();\n  }\n\n  action = parentView => {\n    super.action(parentView);\n    parentView.setSelectedAction(this);\n  };\n\n  getDrawPolygonContextAction = (camera, canvas, scene) => {\n    const ans = [];\n    ans.push({\n      icon: props => <i className=\"fas fa-trash\" {...props}></i>,\n      action: parentView => {\n        camera.attachControl(canvas, true);\n        parentView.deleteNodeFromTreeUsingName(TEMP_POLYGON_REGION_NAME, false);\n        this.mouseCurve = [];\n        parentView.closeContextDial();\n      },\n      name: \"Clear Polygon [ESC | DEL | Backspace]\"\n    });\n    if (this.mouseCurve.length > 2) {\n      ans.push({\n        icon: props => <i className=\"fas fa-check\" {...props}></i>,\n        action: parentView => {\n          camera.attachControl(canvas, true);\n          parentView.deleteNodeFromTreeUsingName(\n            TEMP_POLYGON_REGION_NAME,\n            false\n          );\n          const name = `PolygonRegion${Math.floor(Math.random() * 1e3)}`;\n          this.createPolygonRegion(\n            this.mouseCurve,\n            name,\n            scene,\n            parentView,\n            true\n          );\n          this.mouseCurve = [];\n          parentView.setPropertiesWithName(name);\n          parentView.closeContextDial();\n        },\n        name: \"Create Polygon [Enter]\"\n      });\n    }\n    return ans;\n  };\n\n  onPointerDown = (evt, parentView) => {\n    parentView.getSceneMemory().forEach(memory => {\n      const scene = memory.scene;\n      const ground = memory.ground;\n      const camera = memory.camera;\n      const maybeMousePos = Util3d.getGroundPosition(scene, ground);\n      maybeMousePos.forEach(mousePos => {\n        camera.detachControl(memory.canvas);\n        this.mouseCurve.push(mousePos);\n        const drawPolyPoints =\n          this.mouseCurve.length === 1\n            ? [this.mouseCurve[0], this.mouseCurve[0]]\n            : this.mouseCurve;\n        this.createPolygonRegion(\n          drawPolyPoints,\n          TEMP_POLYGON_REGION_NAME,\n          scene,\n          parentView,\n          false\n        );\n        parentView.setContextActions(\n          this.getDrawPolygonContextAction(camera, memory.canvas, scene)\n        );\n      });\n    });\n  };\n\n  onPointerMove = (evt, parentView) => {\n    // empty\n  };\n\n  onPointerUp = parentView => {\n    // empty\n  };\n\n  onKeyDown = (evt, parentView) => {\n    // Warning: code duplication with PathAction\n    parentView.getSceneMemory().forEach(memory => {\n      const scene = memory.scene;\n      const camera = memory.camera;\n      const contextActions = this.getDrawPolygonContextAction(\n        camera,\n        memory.canvas,\n        scene\n      );\n      const keyCodeActionMap = {\n        Enter: () => contextActions[1].action(parentView),\n        Delete: () => contextActions[0].action(parentView),\n        Backspace: () => contextActions[0].action(parentView),\n        Escape: () => {\n          if (this.mouseCurve.length === 0) {\n            super.onKeyDown(evt, parentView);\n          }\n          contextActions[0].action(parentView);\n        }\n      };\n      if (evt.code in keyCodeActionMap) {\n        keyCodeActionMap[evt.code]();\n      } else {\n        super.onKeyDown(evt, parentView);\n      }\n    });\n  };\n\n  createPolygonRegion = (\n    region,\n    name,\n    scene,\n    parentView,\n    is2addInServer = true,\n    color = Color3.Yellow(),\n    height = 1\n  ) => {\n    const rootMesh = parentView.getRootNode().item.mesh;\n\n    const localRegion = region.map(r =>\n      Util3d.computeLocalCoordinatesFromMesh(\n        { parent: rootMesh },\n        Vec3.ofBabylon(r)\n      )\n    );\n\n    const middlePoint = Util3d.pointAverageVec3(localRegion);\n    const centeredRegion = localRegion.map(r => r.sub(middlePoint));\n\n    const polygonRegionItem = PolygonRegion.ofDict(\n      scene,\n      {\n        name: name,\n        position: middlePoint.toArray(),\n        color: [color.r, color.g, color.b],\n        localPolygon: centeredRegion.map(x => x.toArray()),\n        height: height\n      },\n      parentView\n    );\n\n    polygonRegionItem.mesh.parent = rootMesh;\n\n    parentView.addNodeItem2Tree(\n      polygonRegionItem,\n      rootMesh.name,\n      is2addInServer\n    );\n  };\n}\n\nexport default PolygonRegionAction;\n","import { Maybe } from \"monet\";\nimport MouseKeysAction from \"./MouseKeysAction\";\nimport React from \"react\";\n\nclass OrbitAction extends MouseKeysAction {\n  constructor() {\n    if (instance) return instance;\n    super();\n    this.key = \"orbit\";\n    this.name = \"Orbit [ESC]\";\n    this.maybeSelectedMesh = Maybe.none();\n    this.icon = props => <i className=\"fas fa-globe\" {...props}></i>;\n    instance = this;\n  }\n\n  static getInstance() {\n    return new OrbitAction();\n  }\n\n  action = parentView => {\n    super.action(parentView);\n    parentView.setSelectedAction(this);\n  };\n\n  onPointerDown = (evt, parentView) => {};\n\n  onPointerMove = (evt, parentView) => {};\n\n  onPointerUp = parentView => {};\n}\n\nlet instance = null;\n\nexport default OrbitAction;\n","import { Maybe } from \"monet\";\n\n/**\n * Undirected Graph data structure\n */\nclass Graph {\n  #adjMap = {};\n  #vertices = {};\n  #edges = {};\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                      Public API                                      *\n   *                                                                                      */\n  //========================================================================================\n\n  addVertex(i) {\n    if (!(i in this.#vertices)) {\n      this.#vertices[i] = {};\n      this.#adjMap[i] = {};\n    }\n  }\n\n  delVertex(i) {\n    if (i in this.#vertices) {\n      delete this.#vertices[i];\n      // delete neighbors edge properties\n      Object.keys(this.#adjMap[i]).forEach(j => {\n        delete this.#edges[Graph.edgeKey(i, j)];\n        delete this.#edges[Graph.edgeKey(j, i)];\n      });\n      delete this.#adjMap[i];\n      Object.keys(this.#adjMap).forEach(j => {\n        if (i in this.#adjMap[j]) {\n          delete this.#adjMap[j][i];\n        }\n      });\n    }\n  }\n\n  /**\n   *\n   * If edge already exists, this function overwrites previous edge\n   *\n   * @param {*} i: vertex id\n   * @param {*} j: vertex id\n   */\n  addEdge(i, j) {\n    this.addVertex(i);\n    this.addVertex(j);\n    this.#edges[Graph.edgeKey(i, j)] = {};\n    this.#edges[Graph.edgeKey(j, i)] = {};\n    this.#adjMap[i][j] = true;\n    this.#adjMap[j][i] = true;\n    return this;\n  }\n\n  delEdge(i, j) {\n    const ijKey = Graph.edgeKey(i, j);\n    const jiKey = Graph.edgeKey(j, i);\n    if (ijKey in this.#edges || jiKey in this.#edges) {\n      delete this.#edges[ijKey];\n      delete this.#edges[jiKey];\n      delete this.#adjMap[i][j];\n      delete this.#adjMap[j][i];\n    }\n  }\n\n  hasEdge(i, j) {\n    return this.getEdgeProp(i, j).isSome();\n  }\n\n  getNeighbors(i) {\n    if (i in this.#adjMap) return Object.keys(this.#adjMap[i]);\n    return [];\n  }\n\n  getEdgeProp(i, j) {\n    const edgeKey = Graph.edgeKey(i, j);\n    if (edgeKey in this.#edges) {\n      return Maybe.some(this.#edges[edgeKey]);\n    }\n    return Maybe.none();\n  }\n\n  setEdgeProp(i, j, props) {\n    const edgeKey = Graph.edgeKey(i, j);\n    if (edgeKey in this.#edges) {\n      this.#edges[edgeKey] = props;\n    }\n    return this;\n  }\n\n  getVertexProp(i) {\n    if (i in this.#vertices) {\n      return Maybe.some(this.#vertices[i]);\n    }\n    return Maybe.none();\n  }\n\n  setVertexProp(i, props) {\n    if (i in this.#vertices) {\n      this.#vertices[i] = props;\n    }\n    return this;\n  }\n\n  getEdges() {\n    return this.#edges;\n  }\n\n  getVertices() {\n    return this.#vertices;\n  }\n\n  getAdjMap() {\n    return this.#adjMap;\n  }\n\n  setAdjacentMap(adjMap) {\n    this.#adjMap = adjMap;\n  }\n\n  setVertices(vertices) {\n    this.#vertices = vertices;\n  }\n\n  setEdges(edges) {\n    this.#edges = edges;\n  }\n\n  static edgeKey = (i, j) => `${i}_${j}`;\n  static key2Edge = key => key.split(\"_\");\n}\n\nexport default Graph;\n","import Graph from \"./Graph\";\nimport RBush from \"rbush\";\nimport Constants from \"../Utils/Constants\";\nimport { Maybe } from \"monet\";\nimport Vec3 from \"../Math/Vec3\";\nimport Util3d from \"../Util3d/Util3d\";\n\nexport default class GraphEmbedding {\n  constructor() {\n    this.graph = new Graph();\n    this.rTreeVertices = new RTreeVertices();\n    this.rTreeEdges = new RTreeEdges();\n    this.vertexGenerator = 0;\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                      Public API                                      *\n   *                                                                                      */\n  //========================================================================================\n\n  getAbstractGraph() {\n    return this.graph;\n  }\n\n  getAdjMap() {\n    return this.graph.getAdjMap();\n  }\n\n  /**\n   *\n   * @param {*} i: Vector3\n   * @param {*} iIndex: integer representing index of vertex i (can be undefined)\n   *\n   */\n  addVertex(i, iIndex, isCurve = false) {\n    const maybeVertexI = this.getVertex(i);\n    maybeVertexI.orElseRun(() => {\n      const vertexI = new RVertex(\n        i,\n        iIndex ? iIndex : this.vertexGenerator++,\n        isCurve\n      );\n      this.rTreeVertices.insert(vertexI);\n      this.graph.addVertex(vertexI.id);\n      this.graph.setVertexProp(vertexI.id, {\n        [GraphEmbedding.NAMESPACES.vertex]: vertexI\n      });\n    });\n  }\n\n  /**\n   *\n   * @param {*} i: Vector3\n   */\n  delVertex(i) {\n    this.getVertex(i).forEach(rVertex => {\n      const { id } = rVertex;\n      this.rTreeVertices.remove(rVertex);\n      this.graph.delVertex(id);\n    });\n  }\n\n  addEdge(edge, edgeIndexes = []) {\n    const [i, j] = edge;\n    const [iIndex, jIndex] = edgeIndexes;\n    this.addVertex(i, iIndex);\n    this.addVertex(j, jIndex);\n    this.getVertex(i).forEach(rVertexI =>\n      this.getVertex(j).forEach(rVertexJ => {\n        const edgeIJ = this.getEdgeByIndex(rVertexI.id, rVertexJ.id).orLazy(\n          () => new REdge(rVertexI, rVertexJ)\n        );\n        const edgeJI = this.getEdgeByIndex(rVertexJ.id, rVertexI.id).orLazy(\n          () => new REdge(rVertexJ, rVertexI)\n        );\n\n        this.rTreeEdges.remove(edgeIJ, (a, b) => a.equals(b));\n        this.rTreeEdges.insert(edgeIJ);\n\n        this.graph.addEdge(rVertexI.id, rVertexJ.id);\n\n        //add edge properties\n        this.graph.setEdgeProp(rVertexI.id, rVertexJ.id, {\n          [GraphEmbedding.NAMESPACES.edge]: edgeIJ\n        });\n        this.graph.setEdgeProp(rVertexJ.id, rVertexI.id, {\n          [GraphEmbedding.NAMESPACES.edge]: edgeJI\n        });\n      })\n    );\n    return this;\n  }\n\n  /**\n   *\n   * @param {*} i: Vector3 Position of vertex\n   * @param {*} j: Vector3 Position of vertex\n   */\n  delEdge(i, j) {\n    this.getEdge(i, j).forEach(rEdge => {\n      const indexes = rEdge.edge.map(v => v.id);\n      this.graph.delEdge(...indexes);\n      this.rTreeEdges.remove(rEdge, (a, b) => a.equals(b));\n    });\n  }\n\n  /**\n   *\n   * @param {*} i: Vector3 Position of vertex\n   * @param {*} j: Vector3 Position of vertex\n   */\n  hasEdge(i, j) {\n    return this.getVertex(i)\n      .flatMap(rVertexI =>\n        this.getVertex(j).map(rVertexJ =>\n          this.graph.hasEdge(rVertexI.id, rVertexJ.id)\n        )\n      )\n      .orSome(false);\n  }\n\n  /**\n   *\n   * @param {*} i: Vector3 Position of vertex\n   */\n  getVertex(i) {\n    const queryArray = this.rTreeVertices.search(RVertex.of(i).toBBox());\n    if (queryArray.length > 0) {\n      return Maybe.some(\n        queryArray.length > 1\n          ? this.getMinDistanceVertex(queryArray, i)\n          : queryArray[0]\n      );\n    }\n    return Maybe.none();\n  }\n\n  getVertexByIndex = index => {\n    return this.graph\n      .getVertexProp(index)\n      .flatMap(vertexProp =>\n        Maybe.fromNull(vertexProp[GraphEmbedding.NAMESPACES.vertex])\n      );\n  };\n\n  /**\n   *\n   * @param {*} i: Vector3 Position of vertex\n   *\n   * Returns Array<RVertex>\n   */\n  getNeighbors(i) {\n    const neighbors = [];\n    this.getVertex(i).forEach(rVertex => {\n      this.graph.getNeighbors(rVertex.id).forEach(jId => {\n        this.graph.getVertexProp(jId).forEach(vProp => {\n          neighbors.push(vProp[GraphEmbedding.NAMESPACES.vertex]);\n        });\n      });\n    });\n    return neighbors;\n  }\n\n  updateVertex(vertexIndex, position) {\n    this.graph.getVertexProp(vertexIndex).forEach(prop => {\n      const rVertex = prop[GraphEmbedding.NAMESPACES.vertex];\n      rVertex.position = position;\n      this.rTreeVertices.remove(rVertex);\n      this.rTreeVertices.insert(rVertex);\n      this.graph.getNeighbors(vertexIndex).forEach(j => {\n        this.graph.getEdgeProp(vertexIndex, j).forEach(propEdge => {\n          const rEdge = propEdge[GraphEmbedding.NAMESPACES.edge];\n          this.rTreeEdges.remove(rEdge, (a, b) => a.equals(b));\n          // rEdge has a pointer to the already altered rVertex\n          this.rTreeEdges.insert(rEdge);\n        });\n      });\n    });\n  }\n\n  /**\n   *\n   * @param {*} i: Vector3 Position of vertex\n   * @param {*} j: Vector3 Position of vertex\n   */\n  getEdge(i, j) {\n    const queryPoint = j ? i.add(j).scale(0.5) : i;\n    const queryArray = this.rTreeEdges.search(RVertex.of(queryPoint).toBBox());\n    if (queryArray.length > 0) {\n      return Maybe.some(\n        queryArray.length > 1\n          ? this.getMinDistanceEdge(queryArray, queryPoint)\n          : queryArray[0]\n      );\n    }\n    return Maybe.none();\n  }\n\n  getEdgeByIndex(iIndex, jIndex) {\n    return this.graph\n      .getEdgeProp(iIndex, jIndex)\n      .map(edgeProp => edgeProp[GraphEmbedding.NAMESPACES.edge]);\n  }\n\n  /**\n   *\n   * @param {*} rEdges: Array<REdge>\n   * @param {*} queryPoint: Vector3\n   */\n  getMinDistanceEdge(rEdges, queryPoint) {\n    let minDist = Number.MAX_VALUE;\n    let minDistIndex = -1;\n    rEdges.forEach((rEdge, i) => {\n      const edge = rEdge.edge.map(v => v.position).map(Vec3.ofBabylon);\n      const e = edge[1].sub(edge[0]);\n      const x = Vec3.ofBabylon(queryPoint).sub(edge[0]);\n      const dot = e.dot(x) / e.dot(e);\n      const dist = x.sub(e.scale(dot)).length();\n      if (minDist > dist) {\n        minDist = dist;\n        minDistIndex = i;\n      }\n    });\n    return rEdges[minDistIndex];\n  }\n\n  getMinDistanceVertex(rVertices, queryPoint) {\n    let minDist = Number.MAX_VALUE;\n    let minDistIndex = -1;\n    rVertices.forEach((rVertex, i) => {\n      const vp = Vec3.ofBabylon(rVertex.position);\n      const x = Vec3.ofBabylon(queryPoint);\n      const dist = vp.sub(x).length();\n      if (minDist > dist) {\n        minDist = dist;\n        minDistIndex = i;\n      }\n    });\n    return rVertices[minDistIndex];\n  }\n\n  getVertices() {\n    return this.graph.getVertices();\n  }\n\n  getEdges() {\n    return this.graph.getEdges();\n  }\n\n  /**\n   *\n   * @param {*} data: {adjMap, vertices, edges}\n   */\n  importData(data) {\n    const { adjMap } = data;\n    // add vertices data\n    // add edges data\n    const vertices = { ...data.vertices };\n    const edges = { ...data.edges };\n    Object.keys(adjMap).forEach(i => {\n      Object.keys(adjMap[i]).forEach(j => {\n        const dataVertexI = vertices[i];\n        const dataVertexJ = vertices[j];\n        const dataEdgeIJ = edges[Graph.edgeKey(i, j)];\n        this.graph.getVertexProp(i).forEach(prop => {\n          prop[GraphEmbedding.NAMESPACES.vertex].keyValueMap =\n            dataVertexI.keyValueMap;\n        });\n        this.graph.getVertexProp(j).forEach(prop => {\n          prop[GraphEmbedding.NAMESPACES.vertex].keyValueMap =\n            dataVertexJ.keyValueMap;\n        });\n        this.graph.getEdgeProp(i, j).forEach(prop => {\n          const rEdge = prop[GraphEmbedding.NAMESPACES.edge];\n          rEdge.keyValueMap = dataEdgeIJ.keyValueMap;\n          rEdge.weight = dataEdgeIJ.weight;\n        });\n      });\n    });\n    this.vertexGenerator = data.vertexGenerator;\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                   Static Functions                                   *\n   *                                                                                      */\n  //========================================================================================\n\n  static NAMESPACES = {\n    vertex: \"rVertex\",\n    edge: \"rEdge\"\n  };\n}\n\n/**\n * Should be Immutable vertex object\n */\nclass RVertex {\n  constructor(vertexPosition, vertexId, isCurve, keyValueMap = {}) {\n    this.position = vertexPosition;\n    this.id = vertexId;\n    this.keyValueMap = keyValueMap;\n    this.isCurve = isCurve;\n  }\n\n  toBBox() {\n    const { position } = this;\n    return {\n      minX: position.x - Constants.RADIUS / 4,\n      minY: position.y - Constants.RADIUS / 4,\n      maxX: position.x + Constants.RADIUS / 4,\n      maxY: position.y + Constants.RADIUS / 4\n    };\n  }\n\n  static of(position) {\n    return new RVertex(position);\n  }\n}\n\nclass RTreeVertices extends RBush {\n  toBBox(rVertex) {\n    return rVertex.toBBox();\n  }\n\n  compareMinX(a, b) {\n    return a.position.x - b.position.x;\n  }\n  compareMinY(a, b) {\n    return a.position.y - b.position.y;\n  }\n}\n\nclass REdge {\n  constructor(rVertexI, rVertexJ, keyValueMap = {}) {\n    this.edge = [rVertexI, rVertexJ];\n    this.keyValueMap = keyValueMap;\n    this.weight = 1.0;\n  }\n\n  equals(b) {\n    if (!(b instanceof REdge)) return false;\n    const bEdgeIds = b.edge.map(v => v.id);\n    return this.edge\n      .map(v => v.id)\n      .map(id => bEdgeIds.includes(id))\n      .every(x => x);\n  }\n\n  toBBox() {\n    const { edge } = this;\n    return {\n      minX: edge.reduce(\n        (e, v) => Math.min(e, v.position.x - Constants.RADIUS / 4),\n        Number.MAX_VALUE\n      ),\n      minY: edge.reduce(\n        (e, v) => Math.min(e, v.position.y - Constants.RADIUS / 4),\n        Number.MAX_VALUE\n      ),\n      maxX: edge.reduce(\n        (e, v) => Math.max(e, v.position.x + Constants.RADIUS / 4),\n        Number.MIN_VALUE\n      ),\n      maxY: edge.reduce(\n        (e, v) => Math.max(e, v.position.y + Constants.RADIUS / 4),\n        Number.MIN_VALUE\n      )\n    };\n  }\n\n  static of(vertexPosI, vertexPosJ) {\n    return new REdge(RVertex.of(vertexPosI), RVertex.of(vertexPosJ));\n  }\n}\n\nclass RTreeEdges extends RBush {\n  toBBox(rEdge) {\n    return rEdge.toBBox();\n  }\n\n  compareMinX(a, b) {\n    const aMin = a.toBBox().minX;\n    const bMin = b.toBBox().minX;\n    return aMin - bMin;\n  }\n\n  compareMinY(a, b) {\n    const aMin = a.toBBox().minY;\n    const bMin = b.toBBox().minY;\n    return aMin - bMin;\n  }\n}\n","import NodeItem from \"./NodeItem\";\nimport Util3d from \"../Util3d/Util3d\";\nimport { Color3, Vector3, Observable, Curve3 } from \"@babylonjs/core\";\nimport Constants from \"../Utils/Constants\";\nimport { Quaternion } from \"@babylonjs/core/Maths/math\";\nimport GraphEmbedding from \"../Graph/GraphEmbedding\";\nimport Graph from \"../Graph/Graph\";\nimport Vec3 from \"../Math/Vec3\";\nimport { Maybe } from \"monet\";\nimport React from \"react\";\nimport _get from \"lodash/get\";\nimport { UndoManager } from \"mov-fe-lib-core\";\n\n/**\n * One graph per scene\n */\nclass GraphItem extends NodeItem {\n  constructor(scene, mainView, name = GraphItem.NAME, keyValueMap = {}) {\n    const sceneId = scene.getUniqueId();\n    // super() must be called before using _this_.\n    if (\n      sceneId in graphItemInstances &&\n      !graphItemInstances[sceneId].mesh.isDisposed()\n    ) {\n      return graphItemInstances[sceneId];\n    }\n\n    const graphPlaceHolder = getGraphPlaceHolder(scene, name);\n    graphPlaceHolder.onClick = () =>\n      (this.graphFormMapper = this.getDefaultFormMapper());\n\n    super(graphPlaceHolder, keyValueMap);\n    graphItemInstances[sceneId] = this;\n\n    // object properties\n    this.graph = new GraphEmbedding();\n    this.scene = scene;\n    this.mainView = mainView;\n    this.meshByEdgeId = {};\n    this.meshByVertexId = {};\n    this.graphFormMapper = this.getDefaultFormMapper();\n  }\n\n  getType = () => GraphItem.TYPE;\n\n  toDict() {\n    const dict = super.toDict();\n    const adjMap = this.graph.getAdjMap();\n    const vertices = { ...this.graph.getVertices() };\n    const edges = { ...this.graph.getEdges() };\n\n    Object.keys(vertices).forEach(k => {\n      this.graph\n        .getVertexByIndex(k)\n        .forEach(({ position, id, keyValueMap }) => {\n          vertices[k] = {\n            position: Vec3.ofBabylon(position).toArray(),\n            id: id,\n            keyValueMap: keyValueMap\n          };\n        });\n    });\n\n    Object.keys(edges).forEach(k => {\n      const ids = Graph.key2Edge(k);\n      this.graph\n        .getEdgeByIndex(...ids)\n        .forEach(({ edge, keyValueMap, weight }) => {\n          edges[k] = {\n            ids: ids,\n            positions: edge.map(({ position }) =>\n              Vec3.ofBabylon(position).toArray()\n            ),\n            keyValueMap: keyValueMap,\n            weight: weight,\n            isCurve: edge.map(v => v.isCurve)\n          };\n        });\n    });\n\n    dict[\"adjMap\"] = adjMap;\n    dict[\"vertices\"] = vertices;\n    dict[\"edges\"] = edges;\n    dict[\"vertexGenerator\"] = this.graph.vertexGenerator;\n    return dict;\n  }\n\n  toForm() {\n    const form = super.toForm();\n    delete form.jsonSchema.properties.position;\n    delete form.jsonSchema.properties.quaternion;\n    delete form.jsonSchema.properties.color;\n    delete form.uiSchema.position;\n    delete form.uiSchema.quaternion;\n    delete form.uiSchema.color;\n    delete form.data.position;\n    delete form.data.quaternion;\n    delete form.data.color;\n    return this.graphFormMapper.toForm(form);\n  }\n\n  ofForm(form) {\n    this.name = form.name;\n    this.mesh.name = form.name;\n    this.graphFormMapper.ofForm(form);\n  }\n\n  getDefaultFormMapper() {\n    return {\n      toForm: form => form,\n      ofForm: form => (this.keyValueMap = { ...form.annotations })\n    };\n  }\n\n  getToFormVertex(vertexMesh) {\n    return {\n      toForm: form =>\n        this.graph\n          .getVertex(vertexMesh.position)\n          .map(rVertex => {\n            form.jsonSchema.properties[\"positionVertex\"] = {\n              type: \"object\",\n              title: `Position Vertex ${rVertex.id}`,\n              properties: {\n                x: {\n                  type: \"number\",\n                  title: \"x\"\n                },\n                y: {\n                  type: \"number\",\n                  title: \"y\"\n                },\n                z: {\n                  type: \"number\",\n                  title: \"z\"\n                }\n              }\n            };\n\n            form.uiSchema[\"positionVertex\"] = {\n              \"ui:widget\": \"collapse\"\n            };\n\n            form.data[\"positionVertex\"] = {\n              x: vertexMesh.position.x,\n              y: vertexMesh.position.y,\n              z: vertexMesh.position.z\n            };\n            NodeItem.setAnnotations2Form(form, rVertex.keyValueMap);\n            form.jsonSchema.properties[\n              \"annotations\"\n            ].title = `Annotations Vertex ${rVertex.id}`;\n            return form;\n          })\n          .orSome(form),\n      ofForm: form => {\n        let position = _get(form, \"positionVertex\", vertexMesh.position);\n        position = [position.x, position.y, position.z].map(Number.parseFloat);\n        this.graph\n          .getVertex(vertexMesh.position)\n          .forEach(\n            rVertex =>\n              (rVertex.keyValueMap = { ..._get(form, \"annotations\", {}) })\n          );\n        this.updateVertexPosition(\n          vertexMesh.vertexId,\n          Vector3.FromArray(position),\n          false\n        );\n      }\n    };\n  }\n\n  getToFormEdge(edgeMesh) {\n    return {\n      toForm: form => {\n        const edgePositions = edgeMesh.edgeIndexes\n          .map(index =>\n            Maybe.fromNull(this.meshByVertexId[index]).map(\n              mesh => mesh.position\n            )\n          )\n          .filter(maybe => maybe.isSome())\n          .map(maybe => maybe.some());\n        console.log(\"FORM2EDGE\", edgePositions);\n        if (edgePositions.length === 0) return form;\n        return this.graph\n          .getEdge(edgePositions[0], edgePositions[1])\n          .map(rEdge => {\n            form.jsonSchema.properties[\"positionEdge\"] = {\n              type: \"object\",\n              title: `Position Edge ${edgeMesh.edgeIndexes}`,\n              properties: {\n                x: {\n                  type: \"number\",\n                  title: \"x\"\n                },\n                y: {\n                  type: \"number\",\n                  title: \"y\"\n                },\n                z: {\n                  type: \"number\",\n                  title: \"z\"\n                }\n              }\n            };\n            form.jsonSchema.properties[\"weight\"] = {\n              type: \"number\",\n              title: \"Weight\"\n            };\n\n            form.uiSchema[\"positionEdge\"] = {\n              \"ui:widget\": \"collapse\"\n            };\n\n            const meanPoint = Util3d.pointAverage(edgePositions);\n            form.data[\"positionEdge\"] = {\n              x: meanPoint.x,\n              y: meanPoint.y,\n              z: meanPoint.z\n            };\n            form.data[\"weight\"] = rEdge.weight;\n            NodeItem.setAnnotations2Form(form, rEdge.keyValueMap);\n            form.jsonSchema.properties[\n              \"annotations\"\n            ].title = `Annotations Edge ${edgeMesh.edgeIndexes}`;\n            return form;\n          })\n          .orSome(form);\n      },\n      ofForm: form => {\n        const { edgeIndexes } = edgeMesh;\n\n        //update edges positions\n        const edgePositions = edgeIndexes.map(\n          index => this.meshByVertexId[index].position\n        );\n        const edgePosition = Util3d.pointAverage(edgePositions);\n        let newEdgePosition = _get(form, \"positionEdge\", edgePosition);\n        newEdgePosition = [\n          newEdgePosition.x,\n          newEdgePosition.y,\n          newEdgePosition.z\n        ].map(Number.parseFloat);\n        newEdgePosition = Vector3.FromArray(newEdgePosition);\n        edgePositions.forEach((vertexPos, i) =>\n          this.updateVertexPosition(\n            edgeIndexes[i],\n            vertexPos.add(newEdgePosition.subtract(edgePosition)),\n            false\n          )\n        );\n\n        const updateEdgeFromForm = rEdge => {\n          rEdge.keyValueMap = { ..._get(form, \"annotations\", {}) };\n          rEdge.weight = Number.parseFloat(form.weight);\n        };\n        this.graph\n          .getEdgeByIndex(edgeIndexes[0], edgeIndexes[1])\n          .forEach(updateEdgeFromForm);\n        this.graph\n          .getEdgeByIndex(edgeIndexes[1], edgeIndexes[0])\n          .forEach(updateEdgeFromForm);\n      }\n    };\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                   Graph Operations                                   *\n   *                                                                                      */\n  //========================================================================================\n\n  addEdge(edge, edgeIndexes = [], isEdgeCurve = [false, false]) {\n    const [i, j] = edge;\n    const [iIndex, jIndex] = edgeIndexes;\n    const [iIsCurve, jIsCurve] = isEdgeCurve;\n    if (this.hasEdge(i, j)) return;\n    this.buildVertex(i, iIndex, iIsCurve);\n    this.buildVertex(j, jIndex, jIsCurve);\n    this.buildEdge(i, j);\n    return this;\n  }\n\n  addCurveEdge(edge) {\n    const points = GraphItem.getCurveEdgePoints(edge, 0.75);\n    for (let i = 0; i < points.length - 1; i++) {\n      const partialEdge = [points[i], points[i + 1]];\n      this.addEdge(partialEdge, [], [i !== 0, i !== points.length - 2]);\n    }\n    return this;\n  }\n\n  delEdge(i, j) {\n    //Warning: multiple call of getEdge, check for optimization\n    this.graph.getEdge(i, j).forEach(({ edge }) => {\n      const ids = edge.map(v => v.id);\n      const ijKey = Graph.edgeKey(ids[0], ids[1]);\n      const jiKey = Graph.edgeKey(ids[1], ids[0]);\n      Maybe.fromNull(this.meshByEdgeId[ijKey]).forEach(mesh => mesh.dispose());\n      delete this.meshByEdgeId[ijKey];\n      delete this.meshByEdgeId[jiKey];\n      this.graph.delEdge(...edge.map(e => e.position));\n\n      // remove vertex if have no neighbors\n      const abstractGraph = this.graph.getAbstractGraph();\n      edge.forEach(({ id, position }) => {\n        const neighbors = abstractGraph.getNeighbors(id);\n        if (neighbors.length === 0) {\n          this.delVertex(position);\n        }\n      });\n    });\n  }\n\n  delCurveEdge(edge) {\n    const points = GraphItem.getCurveEdgePoints(edge, 0.75);\n    for (let k = 0; k < points.length - 1; k++) {\n      const [i, j] = [points[k], points[k + 1]];\n      this.delEdge(i, j);\n    }\n    return this;\n  }\n\n  /**\n   *\n   * @param {*} i: Vector3\n   * @param {*} j: Vector3\n   */\n  hasEdge(i, j) {\n    return this.graph.hasEdge(i, j);\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                    Private Methods                                   *\n   *                                                                                      */\n  //========================================================================================\n\n  /**\n   *\n   * @param {*} vertex: Vector3\n   * @param {*} vertexIndex: integer representing index of vertex (can be undefined)\n   *\n   */\n  buildVertex(vertex, vertexIndex, isCurve = false) {\n    if (this.doesVertexCollideWithEdge(vertex)) {\n      this.resolveVertexEdgeCollision(vertex);\n    }\n    this.buildSimpleVertex(vertex, vertexIndex, isCurve);\n  }\n\n  buildSimpleVertex(vertex, vertexIndex, isCurve = false) {\n    const maybeVertex = this.graph.getVertex(vertex);\n    maybeVertex.forEach(rVertex => {\n      const { isCurve, id } = rVertex;\n      if (isCurve) {\n        const degree = this.graph.getAbstractGraph().getNeighbors(id).length;\n        if (degree >= 2) {\n          rVertex.isCurve = false;\n          this.meshByVertexId[rVertex.id].dispose();\n          this.createVertexMesh(rVertex);\n        }\n      }\n    });\n    maybeVertex.orElseRun(() => {\n      // if vertex doesn't exist\n      this.graph.addVertex(vertex, vertexIndex, isCurve);\n      this.graph.getVertex(vertex).forEach(this.createVertexMesh);\n    });\n  }\n\n  createVertexMesh = rVertex => {\n    const { isCurve } = rVertex;\n    const vertexMesh = GraphItem.getVertexMesh(\n      this.scene,\n      rVertex.position,\n      isCurve ? Color3.Blue() : Color3.Gray(),\n      isCurve ? (2 * Constants.RADIUS) / 3 : Constants.RADIUS\n    );\n    vertexMesh.parent = this.mesh;\n    vertexMesh.vertexId = rVertex.id;\n    this.addObserver2VertexMesh(vertexMesh);\n    this.addOnClickVertex(vertexMesh);\n    this.meshByVertexId[rVertex.id] = vertexMesh;\n  };\n\n  /**\n   * Side effect function beware\n   */\n  addObserver2VertexMesh(vertexMesh) {\n    vertexMesh.observers = new Observable();\n    vertexMesh.observers.add(this.getVertexObs());\n  }\n\n  getVertexObs = () => ({ updatedPointMesh, is2updateServer }) => {\n    const position = updatedPointMesh.position;\n    const id = updatedPointMesh.vertexId;\n    this.updateVertexPosition(id, position, is2updateServer);\n    this.updateCurvedNeighbors([id], is2updateServer);\n    if (is2updateServer) {\n      this.graphFormMapper = this.getToFormVertex(updatedPointMesh);\n      this.mainView.setProperties(this.toForm());\n    }\n  };\n\n  updateCurvedNeighbors(movedVertexIds, is2updateServer) {\n    this.getCurvedNeighbors(movedVertexIds)\n      .map(({ id, position }) => ({\n        id,\n        position: this.heatFlow(id, position)\n      }))\n      .forEach(({ id, position }) =>\n        this.updateVertexPosition(id, position, is2updateServer)\n      );\n  }\n\n  getCurvedNeighbors(vertexIds) {\n    const result = [];\n    const visitedVertex = {};\n    vertexIds.forEach(id => (visitedVertex[id] = true));\n    const abstractGraph = this.graph.getAbstractGraph();\n    const vertexStack = vertexIds\n      .map(id => abstractGraph.getNeighbors(id))\n      .flatMap(n => n)\n      .filter(id => !(id in visitedVertex));\n    while (vertexStack.length > 0) {\n      const u = vertexStack.pop();\n      visitedVertex[u] = true;\n      this.graph.getVertexByIndex(u).forEach(rVertex => {\n        const { isCurve, id } = rVertex;\n        if (isCurve) {\n          result.push(rVertex);\n          vertexStack.push(\n            ...abstractGraph.getNeighbors(id).filter(j => !(j in visitedVertex))\n          );\n        }\n      });\n    }\n    return result;\n  }\n\n  heatFlow(id, position) {\n    const dt = 0.1;\n    const abstractGraph = this.graph.getAbstractGraph();\n    const neighbors = abstractGraph\n      .getNeighbors(id)\n      .map(this.graph.getVertexByIndex)\n      .filter(m => m.isSome())\n      .map(m => m.some())\n      .map(v => v.position);\n    const x = position;\n    const df = x\n      .scale(neighbors.length)\n      .subtract(neighbors.reduce((e, v) => e.add(v), Vector3.Zero()));\n    return x.add(df.scale(-dt));\n  }\n\n  addOnClickVertex(vertexMesh) {\n    vertexMesh.onClick = () => {\n      const actions = [];\n      actions.push({\n        icon: props => <i className=\"fas fa-trash\" {...props}></i>,\n        action: () => {\n          this.mainView\n            .getUndoManager()\n            .doIt(this.getUndoDeleteVertex(vertexMesh));\n        },\n        name: \"Delete Node [Del]\"\n      });\n      this.mainView.setContextActions(actions);\n    };\n  }\n\n  getUndoDeleteVertex(vertexMesh) {\n    const p = vertexMesh.position;\n    const id = vertexMesh.vertexId;\n    const rVertex = this.graph.getVertexByIndex(id).some();\n    const isCurve = rVertex.isCurve;\n    const neigh = this.graph.getNeighbors(rVertex.position);\n    const simpleNeigh = neigh.filter(x => !x.isCurve);\n    const curveNeigh = neigh.filter(x => x.isCurve);\n    const curvedPaths = curveNeigh.map(v =>\n      this.graph.getCurvedPathFromVertex(v.position)\n    );\n    return UndoManager.actionBuilder()\n      .doAction(() => {\n        if (!isCurve)\n          simpleNeigh.forEach(v => {\n            this.delEdge(p, v.position);\n          });\n        curvedPaths.forEach(path => {\n          for (let i = 0; i < path.length - 1; i++) {\n            this.delEdge(path[i].position, path[i + 1].position);\n          }\n        });\n        this.mainView.closeContextDial();\n        this.mainView.updateNodeInServer(this.name);\n      })\n      .undoAction(() => {\n        if (!isCurve)\n          simpleNeigh.forEach(v => {\n            this.addEdge([p, v.position], [id, v.id]);\n          });\n        curvedPaths.forEach(path => {\n          for (let i = 0; i < path.length - 1; i++) {\n            const edge = [path[i], path[i + 1]];\n            const edgeIndexes = edge.map(({ id }) => id);\n            const edgePos = edge.map(({ position }) => position);\n            const edgeIsCurve = edge.map(({ isCurve }) => isCurve);\n            this.addEdge(edgePos, edgeIndexes, edgeIsCurve);\n          }\n        });\n        this.mainView.updateNodeInServer(this.name);\n      })\n      .build();\n  }\n\n  highlightCurveEdge(vertexId) {\n    const meshes = this.getCurvedNeighbors([vertexId]).map(\n      ({ id }) => this.meshByVertexId[id]\n    );\n    this.mainView.highlightMeshesInScene(meshes);\n  }\n\n  delVertex(i) {\n    this.graph.getVertex(i).forEach(({ id }) => {\n      const neighbors = this.graph.getNeighbors(i);\n      neighbors.forEach(({ position }) => this.delEdge(i, position));\n      Maybe.fromNull(this.meshByVertexId[id]).forEach(mesh => mesh.dispose());\n      delete this.meshByVertexId[id];\n      this.graph.delVertex(i);\n      // delete neighbor if belong to curve\n      neighbors\n        .filter(({ isCurve }) => isCurve)\n        .forEach(({ position }) => this.delVertex(position));\n    });\n  }\n\n  /**\n   *\n   * @param {*} id: vertex to be updated id\n   * @param {*} newPosition: Vector3, new vertex position\n   * @param {*} is2updateServer: is to update in server boolean var\n   * @param {*} protectEdge: Pair<Int> with vertex indices\n   */\n  updateVertexPosition(\n    id,\n    newPosition,\n    is2updateServer = true,\n    protectEdge = []\n  ) {\n    this.meshByVertexId[id].position = newPosition; // redundant when called from addObserver2VertexMesh\n    this.graph.updateVertex(id, newPosition);\n    this.graph.getNeighbors(newPosition).forEach(rVertex => {\n      const i = id;\n      const j = rVertex.id;\n      if (!this.isEdgeInPair(i, j, protectEdge)) {\n        this.meshByEdgeId[Graph.edgeKey(i, j)].dispose();\n        this.graph.getEdgeByIndex(i, j).forEach(rEdge => {\n          this.buildEdge(newPosition, rVertex.position);\n        });\n      }\n      if (is2updateServer) this.mainView.updateNodeInServer(this.name);\n    });\n  }\n\n  isEdgeInPair(iIndex, jIndex, edgeIndexes) {\n    return (\n      edgeIndexes.length > 0 &&\n      edgeIndexes.includes(iIndex) &&\n      edgeIndexes.includes(jIndex)\n    );\n  }\n\n  /**\n   *\n   * @param {*} vertex: Vector3\n   */\n  doesVertexCollideWithEdge(vertex, radius = Constants.RADIUS / 4) {\n    /**\n     * if collides with vertex return false\n     * else compute distance from edge, if close enough return true else false\n     */\n    return this.graph\n      .getVertex(vertex)\n      .cata(\n        () =>\n          this.graph.getEdge(vertex).map(rEdge => {\n            const edge = rEdge.edge.map(v => v.position).map(Vec3.ofBabylon);\n            const e = edge[1].sub(edge[0]);\n            const x = Vec3.ofBabylon(vertex).sub(edge[0]);\n            const dot = e.dot(x) / e.dot(e);\n            if (dot < 0 || dot > 1) return false;\n            const dist = x.sub(e.scale(dot)).length();\n            return dist <= radius;\n          }),\n        rVertex => Maybe.none()\n      )\n      .orSome(false);\n  }\n\n  /**\n   * Deletes colliding edge and create 2 new edge with the split\n   *\n   * @param {*} vertex: Vector3\n   */\n  resolveVertexEdgeCollision(vertex) {\n    this.graph.getEdge(vertex).forEach(rEdge => {\n      const edgeVec3 = rEdge.edge\n        .map(({ position }) => position)\n        .map(Vec3.ofBabylon);\n      const edgeBabylon = rEdge.edge.map(v => v.position);\n\n      // compute intersection\n      const e = edgeVec3[1].sub(edgeVec3[0]).normalize();\n      const x = Vec3.ofBabylon(vertex).sub(edgeVec3[0]);\n      const proj = e.scale(x.dot(e));\n      const vertexInEdge = edgeVec3[0].add(proj).toBabylon();\n\n      // split operation\n      this.delEdge(edgeBabylon[0], edgeBabylon[1]);\n      this.addEdge([edgeBabylon[0], vertexInEdge]);\n      this.addEdge([vertexInEdge, edgeBabylon[1]]);\n      //import features\n      this.importFeatures2Edge(rEdge, edgeBabylon[0], vertexInEdge);\n      this.importFeatures2Edge(rEdge, vertexInEdge, edgeBabylon[1]);\n\n      this.graph.getEdge(edgeBabylon[0], vertexInEdge).forEach(leftEdge => {\n        this.graph.getEdge(vertexInEdge, edgeBabylon[1]).forEach(rightEdge => {\n          this.mainView\n            .getUndoManager()\n            .addIt(\n              this.getUndoResolveVertexEdgeCollision(rEdge, leftEdge, rightEdge)\n            );\n        });\n      });\n    });\n  }\n\n  getUndoResolveVertexEdgeCollision(oldEdge, leftEdge, rightEdge) {\n    const oldEdgePositions = oldEdge.edge.map(({ position }) => position);\n    const oldEdgeIndex = oldEdge.edge.map(({ id }) => id);\n    const leftEdgePositions = leftEdge.edge.map(({ position }) => position);\n    const leftEdgeIndex = leftEdge.edge.map(({ id }) => id);\n    const rightEdgePositions = rightEdge.edge.map(({ position }) => position);\n    const rightEdgeIndex = rightEdge.edge.map(({ id }) => id);\n    return UndoManager.actionBuilder()\n      .doAction(() => {\n        // split operation\n        this.delEdge(...oldEdgePositions);\n        this.addEdge(leftEdgePositions, leftEdgeIndex);\n        this.addEdge(rightEdgePositions, rightEdgeIndex);\n\n        //import features\n        this.importFeatures2Edge(oldEdge, ...leftEdgePositions);\n        this.importFeatures2Edge(oldEdge, ...rightEdgePositions);\n      })\n      .undoAction(() => {\n        // split operation\n        this.delEdge(...leftEdgePositions);\n        this.delEdge(...rightEdgePositions);\n        this.addEdge(oldEdgePositions, oldEdgeIndex);\n\n        //import features\n        this.importFeatures2Edge(oldEdge, ...oldEdgePositions);\n      })\n      .build();\n  }\n\n  /**\n   * Copy feature data of rEdgeWithData to edge (i,j)\n   * @param {*} rEdgeWithData\n   * @param {*} i\n   * @param {*} j\n   */\n  importFeatures2Edge(rEdgeWithData, i, j) {\n    this.graph.getEdge(i, j).forEach(({ edge }) => {\n      const [uId, vId] = edge.map(({ id }) => id);\n      this.graph\n        .getEdgeByIndex(uId, vId)\n        .forEach(rEdgePlus => rEdgePlus.importFeatures(rEdgeWithData));\n      this.graph\n        .getEdgeByIndex(vId, uId)\n        .forEach(rEdgeMinus => rEdgeMinus.importFeatures(rEdgeWithData));\n    });\n  }\n\n  /**\n   *\n   * @param {*} i: Vector3\n   * @param {*} j: Vector3\n   */\n  buildEdge(i, j) {\n    const { graph } = this;\n    graph.addEdge([i, j]);\n    graph.getVertex(i).forEach(rVertexI =>\n      graph.getVertex(j).forEach(rVertexJ => {\n        const edgeMesh = GraphItem.getEdgeMesh(this.scene, [\n          rVertexI.position,\n          rVertexJ.position\n        ]);\n        edgeMesh.parent = this.mesh;\n        const iIndex = rVertexI.id;\n        const jIndex = rVertexJ.id;\n        edgeMesh.edgeIndexes = [iIndex, jIndex];\n        this.addObserver2EdgeMesh(edgeMesh);\n        this.addOnClickEdge(edgeMesh);\n        this.meshByEdgeId[Graph.edgeKey(iIndex, jIndex)] = edgeMesh;\n        this.meshByEdgeId[Graph.edgeKey(jIndex, iIndex)] = edgeMesh;\n      })\n    );\n  }\n\n  addObserver2EdgeMesh(edgeMesh) {\n    edgeMesh.observers = new Observable();\n    edgeMesh.observers.add(this.getEdgeObs());\n  }\n\n  getEdgeObs = () => ({ updatedPointMesh, is2updateServer, displacement }) => {\n    const { edgeIndexes } = updatedPointMesh;\n\n    const edgePos = edgeIndexes\n      .map(i => this.meshByVertexId[i].position)\n      .map(Vec3.ofBabylon);\n\n    const v = Vec3.ofBabylon(displacement);\n    edgePos.forEach((vertexPos, i) =>\n      this.updateVertexPosition(\n        edgeIndexes[i],\n        vertexPos.add(v).toBabylon(),\n        is2updateServer,\n        edgeIndexes\n      )\n    );\n    this.updateCurvedNeighbors(edgeIndexes, is2updateServer);\n    if (is2updateServer) {\n      this.graphFormMapper = this.getToFormEdge(updatedPointMesh);\n      this.mainView.setProperties(this.toForm());\n    }\n  };\n\n  addOnClickEdge(edgeMesh) {\n    edgeMesh.onClick = this.getOnClickEdge(edgeMesh);\n  }\n\n  getOnClickEdge = edgeMesh => () => {\n    const actions = [];\n\n    actions.push({\n      icon: props => <i className=\"fas fa-trash\" {...props}></i>,\n      action: () => {\n        this.mainView.getUndoManager().doIt(this.getUndoDeleteEdge(edgeMesh));\n      },\n      name: \"Delete Edge [Del]\"\n    });\n    this.mainView.setContextActions(actions);\n  };\n\n  getUndoDeleteEdge(edgeMesh) {\n    const { edgeIndexes } = edgeMesh;\n    const edgeVertex = edgeIndexes\n      .map(i => this.graph.getVertexByIndex(i))\n      .map(maybeV => maybeV.some());\n    const edgeIsCurve = edgeVertex.some(v => v.isCurve);\n    return edgeIsCurve\n      ? this.getUndoDelCurveEdge(edgeVertex)\n      : this.getUndoDelLineEdge(edgeVertex);\n  }\n\n  getUndoDelCurveEdge(edgeVertex) {\n    // there should be at least one vertex is curve\n    const curvedVertex = edgeVertex.filter(v => v.isCurve)[0].position;\n    const curvePath = this.graph.getCurvedPathFromVertex(curvedVertex);\n    return UndoManager.actionBuilder()\n      .doAction(() => {\n        for (let i = 0; i < curvePath.length - 1; i++) {\n          this.delEdge(curvePath[i].position, curvePath[i + 1].position);\n        }\n        this.mainView.closeContextDial();\n        this.mainView.updateNodeInServer(this.name);\n      })\n      .undoAction(() => {\n        for (let i = 0; i < curvePath.length - 1; i++) {\n          const edge = [curvePath[i], curvePath[i + 1]];\n          const edgeIndexes = edge.map(({ id }) => id);\n          const edgePos = edge.map(({ position }) => position);\n          const edgeIsCurve = edge.map(({ isCurve }) => isCurve);\n          this.addEdge(edgePos, edgeIndexes, edgeIsCurve);\n        }\n        this.mainView.updateNodeInServer(this.name);\n      })\n      .build();\n  }\n\n  getUndoDelLineEdge(edgeVertex) {\n    const edgeIndexes = edgeVertex.map(({ id }) => id);\n    const edgePos = edgeVertex.map(({ position }) => position);\n    const edgeIsCurve = edgeVertex.map(({ isCurve }) => isCurve);\n    return UndoManager.actionBuilder()\n      .doAction(() => {\n        this.delEdge(...edgePos);\n        this.mainView.closeContextDial();\n        this.mainView.updateNodeInServer(this.name);\n      })\n      .undoAction(() => {\n        this.addEdge(edgePos, edgeIndexes, edgeIsCurve);\n        this.mainView.updateNodeInServer(this.name);\n      })\n      .build();\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                             Static Methods and Variables                             *\n   *                                                                                      */\n  //========================================================================================\n\n  static TYPE = \"GraphItem\";\n\n  static NAME = \"Roads\";\n\n  static ofDict(scene, dict = null, mainView = null) {\n    const graphItem = new GraphItem(\n      scene,\n      mainView,\n      dict.name,\n      dict.keyValueMap\n    );\n    const { adjMap, edges } = dict;\n    // create mesh of graph using addEdge\n    Object.keys(adjMap).forEach(i => {\n      Object.keys(adjMap[i]).forEach(j => {\n        if (i < j) {\n          const edge = edges[Graph.edgeKey(i, j)];\n          const posIJ = edge.positions.map(Vec3.of).map(p => p.toBabylon());\n          graphItem.addEdge(posIJ, [i, j], edge.isCurve);\n        }\n      });\n    });\n    //import dict data to graph Embedding structure\n    graphItem.graph.importData(dict);\n    return graphItem;\n  }\n\n  /**\n   *\n   * @param {*} scene: Babylon js scene\n   * @param {*} edgePositions: Array<Vector3>\n   * @param {*} color: Color3\n   */\n  static getEdgeWithVertexMeshes(\n    scene,\n    edgePositions,\n    color = Color3.Gray(),\n    radius = Constants.RADIUS\n  ) {\n    const ans = edgePositions.map(p =>\n      GraphItem.getVertexMesh(scene, p, color, radius)\n    );\n    ans.push(GraphItem.getEdgeMesh(scene, edgePositions, color, radius));\n    return ans;\n  }\n\n  static getCurveEdgeWithVertexMeshes(\n    scene,\n    edgePositions,\n    color = Color3.Gray(),\n    radius = Constants.RADIUS\n  ) {\n    const ans = [];\n    const i = edgePositions[0];\n    const j = edgePositions[2];\n    ans.push(GraphItem.getVertexMesh(scene, i, color, radius));\n    ans.push(GraphItem.getVertexMesh(scene, j, color, radius));\n    ans.push(GraphItem.getCurveEdgeMesh(scene, edgePositions, color, radius));\n    return ans;\n  }\n\n  static getVertexMesh(\n    scene,\n    vertexPosition,\n    color = Color3.Gray(),\n    radius = Constants.RADIUS\n  ) {\n    const sphere = Util3d.createSphere(scene, color, radius);\n    sphere.position = vertexPosition;\n    return sphere;\n  }\n\n  static getEdgeMesh(\n    scene,\n    edge,\n    color = Color3.Gray(),\n    radius = Constants.RADIUS\n  ) {\n    return Util3d.createTubeFromPoints(scene, edge, color, radius / 4);\n  }\n\n  static getCurveEdgeMesh(\n    scene,\n    edge,\n    color = Color3.Gray(),\n    radius = Constants.RADIUS,\n    error = 0.25\n  ) {\n    return Util3d.createTubeFromPoints(\n      scene,\n      GraphItem.getCurveEdgePoints(edge, error),\n      color,\n      radius / 4\n    );\n  }\n\n  static getCurveEdgePoints(edge, error = 0.25) {\n    const [i, k, j] = edge;\n    const halfD2x = i.subtract(k.scale(2)).add(j);\n    const halfD2xNorm = halfD2x.length();\n    let numberOfPoints =\n      halfD2xNorm < 1e-3 ? 2 : halfD2xNorm / Math.max(1e-6, error);\n    numberOfPoints = Math.floor(numberOfPoints);\n    // console.log(\"NUMBER OF POINTS\", numberOfPoints, halfD2x.length());\n    return Curve3.CreateQuadraticBezier(i, k, j, numberOfPoints).getPoints();\n  }\n}\n\nconst graphItemInstances = {};\n\nconst getGraphPlaceHolder = (scene, name) => {\n  const graphPlaceHolder = Util3d.createSphere(\n    scene,\n    Color3.Gray(),\n    Number.MIN_VALUE,\n    name,\n    false\n  );\n  graphPlaceHolder.position = Vector3.Zero();\n  graphPlaceHolder.scaling = Vector3.One();\n  graphPlaceHolder.rotationQuaternion = Quaternion.Identity();\n  graphPlaceHolder.visibility = 0.0;\n  return graphPlaceHolder;\n};\nexport default GraphItem;\n","import MouseKeysAction from \"./MouseKeysAction\";\nimport React from \"react\";\nimport Util3d from \"../Util3d/Util3d\";\nimport { Color3 } from \"@babylonjs/core\";\nimport Vec3 from \"../Math/Vec3\";\nimport GraphItem from \"../NodeItem/GraphItem\";\nimport Constants from \"../Utils/Constants\";\n\nclass DrawGraphAction extends MouseKeysAction {\n  constructor() {\n    if (instance) return instance;\n    super();\n    this.key = \"drawGraph\";\n    this.name = \"Draw Graph [C]\";\n    this.icon = props => <i className=\"fas fa-project-diagram\" {...props}></i>;\n\n    this.mouseCurve = [];\n    this.previewMeshes = [];\n    this.mode = MODES.line;\n    instance = this;\n  }\n\n  static getInstance() {\n    return new DrawGraphAction();\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                            Mouse Key Action Implementation                           *\n   *                                                                                      */\n  //========================================================================================\n\n  action = parentView => {\n    super.action(parentView);\n    parentView.setSelectedAction(this);\n    const contextActions = this.getContextActions();\n    parentView.setContextActions(contextActions);\n    parentView.setContextActionIndex(\n      contextActions.findIndex(ca => ca.mode === this.mode)\n    );\n  };\n\n  onPointerDown = (evt, parentView) => {\n    if (!(evt.buttons === 1)) return;\n    this.mousePosConsumer(parentView)((mousePos, memory) => {\n      const handlePointerDownByMode = {\n        [MODES.line]: this.onPointerDownLine,\n        [MODES.curve]: this.onPointerDownCurve\n      };\n      handlePointerDownByMode[this.mode](mousePos, memory, parentView);\n    });\n  };\n\n  onPointerMove = (evt, parentView) => {\n    this.mousePosConsumer(parentView)((mousePos, memory) => {\n      const { scene, ground } = memory;\n      Util3d.pickMesh(scene, ground).cata(\n        () => parentView.highlightMeshInScene(),\n        pickedMesh =>\n          parentView.highlightMeshInScene([pickedMesh], Color3.Green())\n      );\n      if (this.mouseCurve.length === 0) return;\n      const handlePointerMoveByMode = {\n        [MODES.line]: this.onPointerMoveLine,\n        [MODES.curve]: this.onPointerMoveCurve\n      };\n      handlePointerMoveByMode[this.mode](mousePos, memory, parentView);\n    });\n  };\n\n  onPointerUp = parentView => {\n    parentView\n      .getGraph()\n      .forEach(graphNode =>\n        parentView.setPropertiesWithName(graphNode.item.name)\n      );\n  };\n\n  onKeyDown = (evt, parentView) => {\n    const keyCodeActionMap = {\n      Delete: () => this.escapeAction(evt, parentView),\n      Backspace: () => this.escapeAction(evt, parentView),\n      Escape: () => this.escapeAction(evt, parentView)\n    };\n    if (evt.code in keyCodeActionMap) {\n      keyCodeActionMap[evt.code]();\n    } else {\n      super.onKeyDown(evt, parentView);\n    }\n  };\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                  Auxiliary functions                                  *\n   *                                                                                      */\n  //========================================================================================\n\n  escapeAction = (evt, parentView) => {\n    if (this.mouseCurve.length > 0) {\n      this.deletePreviewMeshes();\n      this.mouseCurve = [];\n    } else {\n      super.onKeyDown(evt, parentView);\n    }\n  };\n\n  deletePreviewMeshes = () => {\n    this.previewMeshes.forEach(mesh => mesh.dispose());\n    this.previewMeshes = [];\n  };\n\n  mousePosConsumer = parentView => lambda => {\n    parentView.getSceneMemory().forEach(memory => {\n      const scene = memory.scene;\n      const ground = memory.ground;\n      const maybeCurrent = Util3d.getGroundPosition(scene, ground);\n      maybeCurrent.forEach(mousePos => lambda(mousePos, memory));\n    });\n  };\n\n  createGraphItemIfNone = (scene, parentView) =>\n    parentView.getGraph().orElseRun(() => {\n      const graphItem = new GraphItem(scene, parentView);\n      graphItem.mesh.parent = parentView.getRootNode().item.mesh;\n      parentView.addNodeItem2Tree(graphItem);\n    });\n\n  getContextActions() {\n    return [\n      {\n        icon: props => (\n          <i className=\"fas fa-grip-lines-vertical\" {...props}></i>\n        ),\n        action: parentView => {\n          parentView.setContextActionIndex(0);\n          this.mode = MODES.line;\n          this.mouseCurve = [];\n          this.previewMeshes.forEach(mesh => mesh.dispose());\n          this.previewMeshes = [];\n        },\n        name: \"Line Mode\",\n        mode: MODES.line\n      },\n      {\n        icon: props => <i className=\"fas fa-bezier-curve\" {...props}></i>,\n        action: parentView => {\n          parentView.setContextActionIndex(1);\n          this.mode = MODES.curve;\n          this.mouseCurve = [];\n          this.previewMeshes.forEach(mesh => mesh.dispose());\n          this.previewMeshes = [];\n        },\n        name: \"Curve Mode\",\n        mode: MODES.curve\n      }\n    ];\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                       Line Edge                                      *\n   *                                                                                      */\n  //========================================================================================\n\n  onPointerDownLine = (mousePos, memory, parentView) => {\n    const { camera, canvas, scene } = memory;\n    camera.detachControl(canvas);\n    if (this.mouseCurve.length === 0) {\n      this.mouseCurve.push(mousePos);\n    } else {\n      //mouseCurve.length > 0\n      this.createEdge(\n        [this.mouseCurve[0], mousePos],\n        scene,\n        parentView,\n        graphItem => edge => graphItem.addEdge(edge)\n      );\n      this.mouseCurve = [];\n      camera.attachControl(canvas, true);\n    }\n  };\n\n  onPointerMoveLine = (mousePos, memory, parentView) => {\n    // preview line\n    const visibility = 0.25;\n    const { scene } = memory;\n    const rootMesh = parentView.getRootNode().item.mesh;\n    const edgeEmbedding = toLocalCoordinates(parentView)([\n      this.mouseCurve[0],\n      mousePos\n    ]);\n    this.deletePreviewMeshes();\n    this.previewMeshes = GraphItem.getEdgeWithVertexMeshes(\n      scene,\n      edgeEmbedding,\n      Color3.Blue(),\n      Constants.RADIUS / 2\n    );\n    this.previewMeshes.forEach(mesh => {\n      mesh.visibility = visibility;\n      mesh.parent = rootMesh;\n    });\n  };\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                      Curved Edge                                     *\n   *                                                                                      */\n  //========================================================================================\n\n  onPointerDownCurve = (mousePos, memory, parentView) => {\n    const { camera, canvas, scene } = memory;\n    camera.detachControl(canvas);\n    if (this.mouseCurve.length <= 1) {\n      this.mouseCurve.push(mousePos);\n    } else {\n      //mouseCurve.length > 1\n      this.createEdge(\n        [this.mouseCurve[0], this.mouseCurve[1], mousePos],\n        scene,\n        parentView,\n        graphItem => edge => graphItem.addCurveEdge(edge)\n      );\n      this.mouseCurve = [];\n      camera.attachControl(canvas, true);\n    }\n  };\n\n  onPointerMoveCurve = (mousePos, memory, parentView) => {\n    if (this.mouseCurve.length < 2) {\n      this.onPointerMoveLine(mousePos, memory, parentView);\n    } else {\n      // mouse curve >= 2\n      const visibility = 0.25;\n      const { scene } = memory;\n      const rootMesh = parentView.getRootNode().item.mesh;\n      const edgeEmbedding = toLocalCoordinates(parentView)([\n        ...this.mouseCurve,\n        mousePos\n      ]);\n      this.deletePreviewMeshes();\n      this.previewMeshes = GraphItem.getCurveEdgeWithVertexMeshes(\n        scene,\n        edgeEmbedding,\n        Color3.Green(),\n        Constants.RADIUS / 2\n      )\n        .concat(\n          GraphItem.getEdgeWithVertexMeshes(\n            scene,\n            [edgeEmbedding[0], edgeEmbedding[1]],\n            Color3.Blue(),\n            Constants.RADIUS / 2\n          )\n        )\n        .concat(\n          GraphItem.getEdgeWithVertexMeshes(\n            scene,\n            [edgeEmbedding[1], edgeEmbedding[2]],\n            Color3.Blue(),\n            Constants.RADIUS / 2\n          )\n        );\n      this.previewMeshes.forEach(mesh => {\n        mesh.visibility = visibility;\n        mesh.parent = rootMesh;\n      });\n    }\n  };\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                    Draw functions                                    *\n   *                                                                                      */\n  //========================================================================================\n\n  createEdge = (edgeInWorldCoordinate, scene, parentView, drawMethod) => {\n    const edge = toLocalCoordinates(parentView)(edgeInWorldCoordinate);\n    this.createGraphItemIfNone(scene, parentView);\n    parentView.getGraph().forEach(graphNode => {\n      const { item: graphItem } = graphNode;\n      drawMethod(graphItem)(edge);\n      parentView.updateNodeInServer(graphItem.name);\n    });\n    this.deletePreviewMeshes();\n  };\n}\n\nlet instance = null;\nconst MODES = {\n  line: \"line\",\n  curve: \"curve\",\n  free: \"free\"\n};\n\nconst toLocalCoordinates = parentView => {\n  const rootMesh = parentView.getRootNode().item.mesh;\n  return arrayOfVector3 =>\n    arrayOfVector3.map(p =>\n      Util3d.computeLocalCoordinatesFromMesh(\n        { parent: rootMesh },\n        Vec3.ofBabylon(p)\n      ).toBabylon()\n    );\n};\nexport default DrawGraphAction;\n","import DragObjectsAction from \"../Actions/DragObjectsAction\";\nimport AddKeyPointAction from \"../Actions/AddKeyPointAction\";\nimport BoxRegionAction from \"../Actions/BoxRegionAction\";\nimport DrawPathAction from \"../Actions/DrawPathAction\";\nimport PolygonRegionAction from \"../Actions/PolygonRegionAction\";\n// import DrawWallAction from \"../Actions/DrawWallAction\";\n// import RobotAction from \"../Actions/RobotAction\";\nimport OrbitAction from \"../Actions/OrbitAction\";\nimport DrawGraphAction from \"../Actions/DrawGraphAction\";\n\nexport const ACTIONS = {\n  orbit: OrbitAction.getInstance(),\n  dragObjects: DragObjectsAction.getInstance(),\n  drawPath: DrawPathAction.getInstance(),\n  drawBoxRegion: BoxRegionAction.getInstance(),\n  addKeyPoint: AddKeyPointAction.getInstance(),\n  drawRegion: PolygonRegionAction.getInstance(),\n  drawGraph: DrawGraphAction.getInstance(),\n  // drawWalls: DrawWallAction.getInstance()\n  // addRobot: new RobotAction({\n  //   id: \"Test\",\n  //   name: \"Test\",\n  //   robotTree: {\n  //     name: \"Test\",\n  //     position: { x: 0, y: 0, z: 0 },\n  //     orientation: {\n  //       w: 1,\n  //       x: 0,\n  //       y: 0,\n  //       z: 0\n  //     },\n  //     child: [\n  //       {\n  //         name: \"TestTF\",\n  //         position: { x: 1, y: 0, z: 1 },\n  //         orientation: {\n  //           w: Math.cos(-Math.PI / 4),\n  //           x: 0,\n  //           y: Math.sin(-Math.PI / 4),\n  //           z: 0\n  //         },\n  //         child: []\n  //       }\n  //     ]\n  //   }\n  // })\n};\n","export default class MapLoader {\n  constructor(yamlSrc) {\n    this.yamlSrc = yamlSrc;\n    this.cachedMap = null;\n  }\n\n  async load() {\n    if (this.cachedMap) return this.cachedMap;\n    const response = await fetch(MapLoader.getMapUrl(this.yamlSrc));\n    const map = await this.parseYaml(await response.text());\n    const ans = {\n      textureSrc: map.image,\n      resolution: map.resolution,\n      origin: map.origin,\n      imageSize: map.size\n    };\n    this.cachedMap = ans;\n    return ans;\n  }\n\n  async parseYaml(yamlTxt) {\n    const ans = {};\n    const actionDict = {\n      image: (k, v) => (ans[k] = MapLoader.getMapUrl(v)),\n      resolution: (k, v) => (ans[k] = Number.parseFloat(v)),\n      origin: (k, v) => (ans[k] = JSON.parse(v))\n    };\n    console.log(\"Yaml text\", yamlTxt);\n    yamlTxt\n      .split(\"\\n\")\n      .map(s => s.split(\": \"))\n      .filter(split => split.length >= 2)\n      .filter(split => split[0] in actionDict)\n      .forEach(split => actionDict[split[0]](split[0], split[1]));\n    ans[\"size\"] = await this.getImageSize(ans[\"image\"]);\n    return ans;\n  }\n\n  getImageSize(src) {\n    return new Promise((resolve, reject) => {\n      const img = new Image();\n      img.src = src;\n      img.onload = () => resolve([img.naturalWidth, img.naturalHeight]);\n    });\n  }\n  static getMapUrl = src => `/static/maps/${src}`;\n}\n","import Util3d from \"../Util3d/Util3d\";\nimport Vec3 from \"../Math/Vec3\";\nimport Action from \"./Action\";\nimport Map from \"../NodeItem/Map\";\nimport { Maybe } from \"monet\";\nimport React from \"react\";\nimport GlobalRef from \"../NodeItem/GlobalRef\";\nimport { Vector3 } from \"@babylonjs/core\";\nimport DefaultScene from \"../Utils/DefaultScene\";\nimport { ACTIONS } from \"../MainView/MainViewActions\";\nimport { MasterDB } from \"mov-fe-lib-core\";\nimport Constants from \"../Utils/Constants\";\nimport MapLoader from \"../AssetsManager/MapLoader\";\n\nclass AddMapAction extends Action {\n  constructor(name, mapLoader) {\n    super();\n    this.name = name;\n    this.key = `addMap${name}`;\n    this.mapLoader = mapLoader;\n    this.icon = props => <i {...props} className=\"fas fa-map\"></i>;\n  }\n\n  addMap(parentView) {\n    const rootNodeMaybe = Maybe.fromNull(parentView.getRootNode());\n    parentView.getSceneMemory().forEach(async memory => {\n      const scene = memory.scene;\n      const camera = memory.camera;\n      const {\n        textureSrc,\n        resolution,\n        origin,\n        imageSize\n      } = await this.mapLoader.load();\n\n      const width = resolution * imageSize[0];\n      const height = resolution * imageSize[1];\n      const mesh = Util3d.groundBuilder(scene)\n        .name(Maybe.fromNull(this.memory[\"name\"]).orSome(this.name))\n        .width(width)\n        .height(height)\n        .textureSrc(textureSrc)\n        .build();\n\n      const originPos = Vec3.of([-width / 2, -height / 2, 0]).sub(\n        Vec3.of(origin)\n      );\n\n      rootNodeMaybe.forEach(rootNode => {\n        const parent = rootNode.item.mesh.parent;\n        parent.position = GlobalRef.inverseCoordinates(originPos.toBabylon());\n        camera.setTarget(\n          new Vector3(parent.position.x, parent.position.y, parent.position.z)\n        );\n      });\n\n      const map = new Map(\n        mesh,\n        [width, height],\n        this.textureSrc,\n        Maybe.fromNull(this.memory[\"assetName\"]).orSome(this.name)\n      );\n\n      const is2sendServer = Maybe.fromNull(this.memory[\"isImport\"])\n        .map(x => !x)\n        .orSome(true);\n      parentView.addNodeItem2Tree(map, null, is2sendServer);\n      memory.ground.dispose();\n      memory.ground = DefaultScene.createMeshGround(scene, width, height);\n    });\n  }\n\n  action(parentView) {\n    super.action(parentView);\n    const maybeNode = parentView.getNodeFromTree(this.name);\n    maybeNode.forEach(node => {});\n    maybeNode.orElseRun(() => {\n      if (parentView.getObjectTree().length < 2) {\n        return this.addMap(parentView);\n      } else {\n        // empty\n      }\n    });\n    parentView.setSelectedAction(ACTIONS.orbit);\n  }\n\n  getType = () => AddMapAction.TYPE;\n\n  deleteAsset = () => {};\n\n  download = async () => {\n    const { textureSrc } = await this.mapLoader.load();\n    const { yamlSrc } = this.mapLoader;\n    const downloadLinks = (\n      <div style={{ display: \"flex\", flexDirection: \"column\" }}>\n        <div style={{ display: \"flex\", flexDirection: \"row\" }}>\n          <div style={{ marginRight: \"5px\" }}>Image:</div>\n          <a href={textureSrc} download>\n            {textureSrc}\n          </a>\n        </div>\n        <div style={{ display: \"flex\", flexDirection: \"row\" }}>\n          <div style={{ marginRight: \"5px\" }}>Yaml:</div>\n          <a href={MapLoader.getMapUrl(yamlSrc)} download>\n            {yamlSrc}\n          </a>\n        </div>\n      </div>\n    );\n  };\n\n  static TYPE = \"AddMapAction\";\n}\n\nexport default AddMapAction;\n","import Vec3 from \"../Math/Vec3\";\nimport Util3d from \"../Util3d/Util3d\";\nimport { MasterDB } from \"mov-fe-lib-core\";\nimport AssetNodeItem from \"./AssetNodeItem\";\nimport { Axis, Space, Vector3, Quaternion, Color3 } from \"@babylonjs/core\";\n\nclass Robot extends AssetNodeItem {\n  static ROBOT_MESH_NAME = \"Tugbot.stl\";\n\n  constructor(meshTree, assetName, keyValueMap = {}) {\n    super(meshTree.mesh, assetName, keyValueMap);\n    this.requestAnimationFrameId = null;\n    this.meshTree = meshTree;\n  }\n\n  toDict() {\n    let dict = super.toDict();\n    return dict;\n  }\n\n  toForm() {\n    const schema = super.toForm();\n    schema.jsonSchema.properties = {\n      oldName: schema.jsonSchema.properties.oldName,\n      name: schema.jsonSchema.properties.name,\n      type: schema.jsonSchema.properties.type,\n      assetName: {\n        type: \"string\",\n        title: \"Asset Name\"\n      },\n      position: schema.jsonSchema.properties.position,\n      quaternion: schema.jsonSchema.properties.quaternion,\n      color: schema.jsonSchema.properties.color,\n      annotations: schema.jsonSchema.properties.annotations\n    };\n    schema.uiSchema[\"assetName\"] = {\n      \"ui:disabled\": true\n    };\n    schema.data[\"assetName\"] = this.assetName;\n    return schema;\n  }\n\n  dispose() {\n    super.dispose();\n    MasterDB.unsubscribe({\n      Scope: \"Robot\",\n      Name: this.meshTree.id,\n      Parameter: \"tf\"\n    });\n    window.cancelAnimationFrame(this.requestAnimationFrameId);\n  }\n\n  updateRobot = (robot, oldTimeInMillis, robotAnimator) => {\n    const time = new Date().getTime();\n    const dt = 1e-3 * (time - oldTimeInMillis);\n    robotAnimator(robot, dt);\n    this.requestAnimationFrameId = requestAnimationFrame(() =>\n      this.updateRobot(robot, time, robotAnimator)\n    );\n  };\n\n  animate = robotAnimator => {\n    this.requestAnimationFrameId = requestAnimationFrame(() =>\n      this.updateRobot(this, new Date().getTime(), robotAnimator)\n    );\n  };\n\n  getType = () => Robot.TYPE;\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                   Static Functions                                   *\n   *                                                                                      */\n  //========================================================================================\n\n  static TYPE = \"Robot\";\n\n  static getDefaultAnimator = parentView => (robot, dt) => {\n    const mesh = robot.mesh;\n    const speed = 3;\n    const vel = Util3d.getRotationMatrix(mesh)\n      .prodVec(new Vec3([speed, 0, 0]))\n      .toBabylon();\n    mesh.position = mesh.position.add(vel.scale(dt));\n    mesh.rotate(Axis.Z, (-Math.PI / 2) * dt, Space.LOCAL);\n    if (Math.random() < 0.01) parentView.updateNodeInServer(mesh.name);\n  };\n\n  static updateRobotMeshTree(newRobotTf, robot) {\n    robot.mesh.position = new Vector3(\n      newRobotTf.position.x,\n      newRobotTf.position.y,\n      newRobotTf.position.z\n    );\n    const quaternion = new Quaternion(\n      newRobotTf.orientation.x,\n      newRobotTf.orientation.y,\n      newRobotTf.orientation.z,\n      newRobotTf.orientation.w\n    );\n    robot.mesh.rotationQuaternion = quaternion.normalize();\n  }\n\n  static getSocketAnimator = (robot, parentView) => {\n    MasterDB.subscribe(\n      { Scope: \"Robot\", Name: robot.meshTree.id, Parameter: \"tf\" },\n      data => {\n        const tf = data.key.Robot[robot.meshTree.id].Parameter.tf.Value;\n        if (tf) {\n          console.log(\"ROBOT TF UPDATE...\", tf);\n          Robot.updateRobotMeshTree(tf, robot);\n          console.log(\"Updating robot \", robot);\n          if (Math.random() < 0.01) parentView.updateNodeInServer(robot.name);\n        }\n      },\n      data => {\n        console.log(\"ROBOT INIT SUB...\", data.value);\n        const tf = data.value.Robot[robot.meshTree.id].Parameter.tf.Value;\n        Robot.updateRobotMeshTree(tf, robot);\n        console.log(\"Updating robot \", robot);\n        parentView.updateNodeInServer(robot.name);\n      }\n    );\n    return (robot2Animate, dt) => {\n      // empty animation\n    };\n  };\n\n  /**\n   * Side effect function\n   */\n  static transformMesh(mesh, scene) {\n    const thetaX = Math.PI / 2;\n    const translate = 0.25;\n    const boundScale = 1.9;\n\n    const boundingSphere = mesh.getBoundingInfo().boundingSphere;\n    mesh.position.set(\n      -boundingSphere.center.x,\n      -boundingSphere.center.y,\n      -boundingSphere.center.z\n    );\n\n    const tfSphereMesh = Util3d.createSphere(\n      scene,\n      new Color3(0.0, 0.0, 0.0),\n      0.5 * boundingSphere.radius,\n      `tfsphere${mesh.name}`,\n      false\n    );\n    tfSphereMesh.visibility = 0.25;\n    tfSphereMesh.scaling = Vec3.ONES.scale(\n      1 / boundingSphere.radius\n    ).toBabylon();\n\n    tfSphereMesh.addRotation(thetaX, 0, 0);\n    tfSphereMesh.position.set(0, 0, translate);\n    const spherePlaceHolder = Util3d.createSphere(\n      scene,\n      new Color3(0.0, 0.0, 0.0),\n      boundScale,\n      mesh.name,\n      true\n    );\n    spherePlaceHolder.visibility = 0.1;\n\n    mesh.parent = tfSphereMesh;\n    tfSphereMesh.parent = spherePlaceHolder;\n    return spherePlaceHolder;\n  }\n\n  static createRobotMeshTreeRecursive(node, mesh, parent, scene) {\n    if (!mesh) {\n      mesh = Util3d.createSphere(\n        scene,\n        new Color3(0.0, 0.0, 0.0),\n        0.5,\n        node.name,\n        false\n      );\n    }\n    const meshTree = {\n      mesh: mesh,\n      children: []\n    };\n    const position = new Vector3(\n      node.position.x,\n      node.position.y,\n      node.position.z\n    );\n    const quaternion = new Quaternion(\n      node.orientation.x,\n      node.orientation.y,\n      node.orientation.z,\n      node.orientation.w\n    );\n    mesh.position = position;\n    mesh.rotationQuaternion = quaternion;\n    if (parent) {\n      mesh.parent = parent;\n    }\n    meshTree[\"children\"] = node.child.map(child => {\n      this.createRobotMeshTreeRecursive(\n        child,\n        Util3d.referentialBuilder(scene)\n          .boxParams({ isVisible: false, size: 0.1 })\n          .build(),\n        mesh,\n        scene\n      );\n    });\n    return meshTree;\n  }\n\n  static createRobotMeshTree(robotTree, robotMesh, scene) {\n    return Robot.createRobotMeshTreeRecursive(\n      robotTree,\n      robotMesh,\n      null,\n      scene\n    );\n  }\n\n  static builder() {\n    return new RobotBuilder();\n  }\n}\n\nclass RobotBuilder {\n  constructor() {\n    this._name = null;\n    this._meshTree = null;\n    this._parentMesh = null;\n    this._scene = null;\n    this._isPickable = true;\n    this._id = null;\n    this._keyValueMap = {};\n    this._assetName = null;\n  }\n\n  name(name) {\n    this._name = name;\n    return this;\n  }\n\n  meshTree(meshTree) {\n    this._meshTree = meshTree;\n    return this;\n  }\n\n  parentMesh(parentMesh) {\n    this._parentMesh = parentMesh;\n    return this;\n  }\n\n  scene(scene) {\n    this._scene = scene;\n    return this;\n  }\n\n  isPickable(isPickable) {\n    this._isPickable = isPickable;\n    return this;\n  }\n\n  id(id) {\n    this._id = id;\n    return this;\n  }\n\n  keyValueMap(keyValueMap) {\n    this._keyValueMap = keyValueMap;\n    return this;\n  }\n\n  assetName(assetName) {\n    this._assetName = assetName;\n    return this;\n  }\n\n  build() {\n    const variables = Object.keys(this)\n      .filter(x => x !== \"_parentMesh\")\n      .map(x => this[x]);\n\n    variables.forEach(x => {\n      if (x === null)\n        throw `There are missing variables to build a robot, e.g ${x}`;\n    });\n\n    this._meshTree.id = this._id;\n    this._meshTree.name = this._name;\n    this._meshTree.mesh.name = this._name;\n    this._meshTree.mesh.isPickable = this._isPickable;\n    this._meshTree.mesh.parent = this._parentMesh;\n\n    const baseAxis = Util3d.referentialBuilder(this._scene)\n      .isPickable(false)\n      .boxParams({ isVisible: false, size: 0.1 })\n      .name(`${this._name}Axis`)\n      .build();\n    baseAxis.parent = this._meshTree.mesh;\n\n    return new Robot(this._meshTree, this._assetName, this._keyValueMap);\n  }\n}\n\nexport default Robot;\n","import NodeItem from \"./NodeItem\";\nimport { Mesh, StandardMaterial, Color3, VertexData } from \"@babylonjs/core\";\nimport { Maybe } from \"monet\";\nimport { Utils, MasterDB } from \"mov-fe-lib-core\";\n\nconst ofNull = Utils.ofNull;\nclass PointCloud extends NodeItem {\n  /**\n   *\n   * @param {*} mesh\n   * @param {*} robot: {name: string, id: string} representing a robot\n   */\n  constructor(mesh, robot) {\n    super(mesh);\n    this.robot = robot;\n    this.pointCloudSubscribe();\n  }\n\n  pointCloudSubscribe() {\n    MasterDB.subscribe(\n      {\n        Scope: \"Robot\",\n        Name: this.robot.id,\n        Parameter: \"front_lidar\"\n      },\n      data => {\n        Maybe.fromNull(data)\n          .flatMap(d => ofNull(d.key))\n          .flatMap(k => ofNull(k.Robot[this.robot.id]))\n          .flatMap(r => ofNull(r.Parameter))\n          .flatMap(p => ofNull(p.front_lidar))\n          .flatMap(f => ofNull(f.Value))\n          .flatMap(v => ofNull(v.points))\n          .forEach(points => this.updatePointCloud(points));\n      },\n      data => {\n        Maybe.fromNull(data.value)\n          .flatMap(v => ofNull(v.Robot))\n          .flatMap(r => ofNull(r[this.robot.id]))\n          .flatMap(r => ofNull(r.Parameter))\n          .flatMap(p => ofNull(p.front_lidar))\n          .flatMap(f => ofNull(f.Value))\n          .flatMap(v => ofNull(v.points))\n          .forEach(points => this.updatePointCloud(points));\n      }\n    );\n  }\n\n  /**\n   *\n   * @param {*} points: Array<3-Array>\n   */\n  updatePointCloud(points) {\n    const vertexData = new VertexData();\n    //Assign positions\n    vertexData.positions = points.flatMap(x => x);\n    const colors = new Array(4 * points.length);\n    vertexData.colors = colors.fill(1.0);\n    //Apply vertexData to custom mesh\n    vertexData.applyToMesh(this.mesh, true);\n  }\n\n  dispose() {\n    super.dispose();\n    MasterDB.unsubscribe({\n      Scope: \"Robot\",\n      Name: this.robot.id,\n      Parameter: \"front_lidar\"\n    });\n  }\n\n  getType = () => PointCloud.TYPE;\n\n  static TYPE = \"PointCloud\";\n\n  static ofDict(scene, dict = null, mainView = null) {\n    if (!dict || !mainView)\n      throw \"null dictionary describing point cloud or null mainView\";\n\n    const pointCloudMesh = new Mesh(`cloudPoint${dict.name}`, scene);\n    const mat = new StandardMaterial(`cloudPoint${dict.name}Material`, scene);\n    mat.emissiveColor = new Color3(1, 1, 1);\n    mat.disableLighting = true;\n    mat.pointsCloud = true;\n    mat.pointSize = 2;\n    pointCloudMesh.material = mat;\n\n    return new PointCloud(pointCloudMesh, dict);\n  }\n}\n\nexport default PointCloud;\n","import { Maybe } from \"monet\";\n/**\n * Mesh cache for each scene.\n *\n * Each mesh is associated with a scene therefore we must have a cache per scene.\n *\n */\nclass MeshCache {\n  constructor() {\n    if (instance) return instance;\n    instance = this;\n    this.meshCacheBySceneId = {};\n    this.count = 0;\n  }\n\n  static getInstance() {\n    return new MeshCache();\n  }\n\n  hasKey(key, scene) {\n    const sceneId = scene._uid;\n    return Maybe.fromNull(this.meshCacheBySceneId[sceneId])\n      .flatMap(meshCache => ofNull(meshCache[key]))\n      .cata(\n        () => false,\n        () => true\n      );\n  }\n\n  put(key, scene, mesh) {\n    const sceneId = scene._uid;\n    if (!(sceneId in this.meshCacheBySceneId)) {\n      this.meshCacheBySceneId[sceneId] = {};\n    }\n    this.meshCacheBySceneId[sceneId][key] = mesh;\n    mesh.setEnabled(false);\n    return this;\n  }\n\n  get(key, scene) {\n    const sceneId = scene._uid;\n    return Maybe.fromNull(this.meshCacheBySceneId[sceneId])\n      .flatMap(meshCache => ofNull(meshCache[key]))\n      .map(mesh => {\n        console.log(\n          \"#Mesh: Found Mesh in cache, retrieving copy number\",\n          this.count\n        );\n        const cloneMesh = mesh.clone(`${key}${this.count++}`);\n        console.log(\"#Mesh:\", cloneMesh);\n        return cloneMesh;\n      })\n      .orNull();\n  }\n\n  del(scene) {\n    const sceneId = scene._uid;\n    if (sceneId in this.meshCacheBySceneId) {\n      delete this.meshCacheBySceneId[sceneId];\n    }\n  }\n}\n\nconst ofNull = x => Maybe.fromNull(x);\n// private instance\nlet instance = null;\nexport default MeshCache;\n","import MeshCache from \"./MeshCache\";\nimport { AssetsManager } from \"@babylonjs/core\";\nimport \"@babylonjs/loaders\";\n\nclass MeshLoader {\n  constructor(scene) {\n    this.scene = scene;\n  }\n\n  static of(scene) {\n    return new MeshLoader(scene);\n  }\n\n  load = (meshName, mapFunction = mesh => mesh) =>\n    new Promise((re, rej) => {\n      const meshCache = MeshCache.getInstance();\n      if (meshCache.hasKey(meshName, this.scene)) {\n        console.log(`Found Mesh ${meshName} in cache for scene ${this.scene}`);\n        re(mapFunction(meshCache.get(meshName, this.scene)));\n      } else {\n        console.log(\"Loading mesh....\");\n        const assetsManager = new AssetsManager(this.scene);\n        const meshTask = assetsManager.addMeshTask(\"\", \"\", MESH_URL, meshName);\n        meshTask.onSuccess = task => {\n          console.log(\"Load Success\", meshName);\n          const mesh = task.loadedMeshes[0];\n          mesh.name = meshName;\n          meshCache.put(meshName, this.scene, mesh);\n        };\n        meshTask.onError = (task, message, exception) =>\n          rej({ message, exception });\n        assetsManager.onFinish = task => {\n          console.log(\"Load finish \");\n          re(mapFunction(meshCache.get(meshName, this.scene)));\n        };\n        assetsManager.load();\n      }\n    });\n\n  static getMeshUrl = src => `${MESH_URL}${src}`;\n}\n\nconst MESH_URL = `/static/meshes/`;\nexport default MeshLoader;\n","import Robot from \"../NodeItem/Robot\";\nimport Action from \"./Action\";\nimport { Maybe } from \"monet\";\nimport React from \"react\";\nimport PointCloud from \"../NodeItem/PointCloud\";\nimport { ACTIONS } from \"../MainView/MainViewActions\";\nimport MeshLoader from \"../Utils/MeshLoader\";\n\nclass RobotAction extends Action {\n  constructor(\n    robot,\n    robotAnimatorFactory = (robot, parentView) =>\n      Robot.getDefaultAnimator(parentView)\n  ) {\n    super();\n    this.robot = robot;\n    this.key = `robotAction${robot.name}`;\n    this.name = robot.name;\n    this.robotAnimatorFactory = robotAnimatorFactory;\n    this.icon = props => <i className=\"fas fa-robot\" {...props}></i>;\n  }\n\n  action = parentView => {\n    super.action(parentView);\n    // if robot already exists, do nothing\n    parentView\n      .getNodeFromTree(this.robot.name)\n      .orElseRun(() => this.addRobot(parentView));\n    parentView.setSelectedAction(ACTIONS.dragObjects);\n  };\n\n  addRobot(parentView) {\n    parentView.getSceneMemory().forEach(memory => {\n      const scene = memory.scene;\n      const actionMemoryClone = { ...this.memory };\n      MeshLoader.of(scene)\n        .load(Robot.ROBOT_MESH_NAME, mesh => Robot.transformMesh(mesh, scene))\n        .then(mesh =>\n          this.createRobotFromMesh(mesh, scene, parentView, actionMemoryClone)\n        );\n    });\n    this.memory[\"isImport\"] = false;\n  }\n\n  createRobotFromMesh(mesh, scene, parentView, memory) {\n    const parentMesh = this.getParentMesh(parentView);\n\n    const robot = this.getRobot(scene, mesh, parentMesh);\n    robot.animate(this.robotAnimatorFactory(robot, parentView));\n    const isImport = Maybe.fromNull(memory[\"isImport\"]).orSome(false);\n    parentView.addNodeItem2Tree(robot, parentMesh.name, !isImport);\n\n    const cloudPoint = this.getCloudPoint(scene, parentView, robot);\n    parentView.addNodeItem2Tree(cloudPoint, robot.name, false);\n\n    parentView.renderMenus();\n  }\n\n  getRobot = (scene, mesh, parentMesh) => {\n    const meshTree = Robot.createRobotMeshTree(\n      this.robot.robotTree,\n      mesh,\n      scene\n    );\n    const dict = Maybe.fromNull(this.memory[\"nodeItemDict\"]);\n    return Robot.builder()\n      .id(this.robot.id)\n      .name(Maybe.fromNull(this.memory[\"name\"]).orSome(this.robot.name))\n      .assetName(\n        Maybe.fromNull(this.memory[\"assetName\"]).orSome(this.robot.name)\n      )\n      .meshTree(meshTree)\n      .parentMesh(parentMesh)\n      .scene(scene)\n      .keyValueMap(dict.map(x => x.keyValueMap).orSome({}))\n      .build();\n  };\n\n  getCloudPoint = (scene, parentView, robot) => {\n    const cloudPoint = PointCloud.ofDict(\n      scene,\n      { name: this.robot.name, id: this.robot.id },\n      parentView\n    );\n    cloudPoint.mesh.parent = robot.mesh;\n    return cloudPoint;\n  };\n\n  getParentMesh = parentView => {\n    return Maybe.fromNull(this.memory[\"parentObj\"])\n      .map(parentObj => parentObj.parent)\n      .flatMap(parentName => parentView.getNodeFromTree(parentName))\n      .map(treeNode => treeNode.item.mesh)\n      .orSome(parentView.getRootNode().item.mesh);\n  };\n\n  getType = () => RobotAction.TYPE;\n\n  static TYPE = \"RobotAction\";\n}\n\nexport default RobotAction;\n","import AssetNodeItem from \"./AssetNodeItem\";\n\nclass Mesh extends AssetNodeItem {\n  constructor(mesh, assetName, keyValueMap = {}) {\n    super(mesh, assetName, keyValueMap);\n  }\n\n  toDict() {\n    let dict = super.toDict();\n    return dict;\n  }\n\n  toForm() {\n    const schema = super.toForm();\n    schema.jsonSchema.properties = {\n      oldName: schema.jsonSchema.properties.oldName,\n      name: schema.jsonSchema.properties.name,\n      type: schema.jsonSchema.properties.type,\n      assetName: {\n        type: \"string\",\n        title: \"Asset Name\"\n      },\n      position: schema.jsonSchema.properties.position,\n      quaternion: schema.jsonSchema.properties.quaternion,\n      color: schema.jsonSchema.properties.color,\n      annotations: schema.jsonSchema.properties.annotations\n    };\n    schema.uiSchema[\"assetName\"] = {\n      \"ui:disabled\": true\n    };\n    schema.data[\"assetName\"] = this.assetName;\n    return schema;\n  }\n\n  getMouseContextActions(mainView) {\n    return super\n      .getMouseContextActions(mainView)\n      .filter(x => x.title === \"Delete\");\n  }\n\n  getType = () => Mesh.TYPE;\n  static TYPE = \"Mesh\";\n}\n\nexport default Mesh;\n","import Action from \"./Action\";\nimport React from \"react\";\nimport { MasterDB } from \"mov-fe-lib-core\";\nimport Constants from \"../Utils/Constants\";\nimport { ACTIONS } from \"../MainView/MainViewActions\";\nimport MeshLoader from \"../Utils/MeshLoader\";\nimport { Maybe } from \"monet\";\nimport Mesh from \"../NodeItem/Mesh\";\nimport { Vector3, Quaternion, Color3, StandardMaterial } from \"@babylonjs/core\";\n\nclass AddMeshAction extends Action {\n  constructor(mesh) {\n    super();\n    this.key = mesh.id;\n    this.name = mesh.name;\n    this.icon = props => <i {...props} className=\"fas fa-draw-polygon\"></i>;\n  }\n\n  action(parentView) {\n    super.action(parentView);\n    console.log(`Mesh ${this.key} : ${this.name}`, this.memory);\n    this.addMesh(parentView);\n    parentView.setSelectedAction(ACTIONS.dragObjects);\n  }\n\n  addMesh = parentView => {\n    parentView.getSceneMemory().forEach(memory => {\n      const scene = memory.scene;\n      const actionMemoryClone = { ...this.memory };\n      MeshLoader.of(scene)\n        .load(this.key)\n        .then(this.transformMesh(parentView, scene, actionMemoryClone))\n        .then(this.addMesh2Scene(parentView, scene, actionMemoryClone));\n    });\n    this.memory[\"isImport\"] = false;\n  };\n\n  transformMesh = (parentView, scene, memory) => mesh => {\n    const parentMesh = this.getParentMesh(parentView);\n    mesh.parent = parentMesh;\n    mesh.createNormals();\n    const isImport = Maybe.fromNull(memory[\"isImport\"]).orSome(false);\n    const maybeDict = Maybe.fromNull(memory[\"nodeItemDict\"]);\n    mesh.position = maybeDict\n      .flatMap(d => (isImport ? Maybe.some(d.position) : Maybe.none()))\n      .map(Vector3.FromArray)\n      .orSome(Vector3.Zero());\n    mesh.rotationQuaternion = maybeDict\n      .flatMap(d => (isImport ? Maybe.some(d.quaternion) : Maybe.none()))\n      .map(\n        quaternion =>\n          new Quaternion(\n            quaternion[1],\n            quaternion[2],\n            quaternion[3],\n            quaternion[0]\n          )\n      )\n      .orSome(Quaternion.Identity());\n    const material = new StandardMaterial(`Mesh${mesh.name}`, scene);\n    const color = maybeDict\n      .flatMap(d => (isImport ? Maybe.some(d.color) : Maybe.none()))\n      .map(Color3.FromArray)\n      .orSome(Color3.Gray());\n    material.diffuseColor = color;\n    material.emissiveColor = color;\n    mesh.material = material;\n    return mesh;\n  };\n\n  addMesh2Scene = (parentView, scene, memory) => mesh => {\n    const parentMesh = this.getParentMesh(parentView);\n    const isImport = Maybe.fromNull(memory[\"isImport\"]).orSome(false);\n    const finalName = Maybe.fromNull(memory[\"nodeItemDict\"])\n      .flatMap(d => (isImport ? Maybe.some(d.name) : Maybe.none()))\n      .orSome(`${this.name}${Math.floor(Math.random() * 100)}`);\n    mesh.name = finalName;\n\n    const meshItem = new Mesh(\n      mesh,\n      this.name,\n      Maybe.fromNull(memory[\"nodeItemDict\"])\n        .flatMap(x => (isImport ? Maybe.some(x.keyValueMap) : Maybe.none()))\n        .orSome({})\n    );\n\n    parentView.addNodeItem2Tree(meshItem, parentMesh.name, !isImport);\n    parentView.renderMenus();\n  };\n\n  getParentMesh = parentView => {\n    return Maybe.fromNull(this.memory[\"parentObj\"])\n      .map(parentObj => parentObj.parent)\n      .flatMap(parentName => parentView.getNodeFromTree(parentName))\n      .map(treeNode => treeNode.item.mesh)\n      .orSome(parentView.getRootNode().item.mesh);\n  };\n\n  getType = () => AddMeshAction.TYPE;\n  static TYPE = \"AddMeshAction\";\n\n  deleteAsset = () => {};\n\n  download = async () => {\n    const downloadLinks = (\n      <div style={{ display: \"flex\", flexDirection: \"column\" }}>\n        <div style={{ display: \"flex\", flexDirection: \"row\" }}>\n          <div style={{ marginRight: \"5px\" }}>Mesh:</div>\n          <a href={MeshLoader.getMeshUrl(this.key)} download>\n            {this.key}\n          </a>\n        </div>\n      </div>\n    );\n  };\n}\n\nexport default AddMeshAction;\n","import AddMapAction from \"../Actions/AddMapAction\";\nimport RobotAction from \"../Actions/RobotAction\";\nimport Robot from \"../NodeItem/Robot\";\nimport AddMeshAction from \"../Actions/AddMeshAction\";\n\nexport const ASSETS_TYPES = {\n  Map: \"Map\",\n  Robot: \"Robot\",\n  Mesh: \"Mesh\"\n};\n\nexport const AssetsTypesFactory = {\n  Map: map => new AddMapAction(map.name, map.loader),\n  Robot: robot => new RobotAction(robot, Robot.getSocketAnimator),\n  Mesh: mesh => new AddMeshAction(mesh)\n};\n","import NodeItem from \"./NodeItem\";\nimport Vec3 from \"../Math/Vec3\";\nimport { Maybe } from \"monet\";\nimport Util3d from \"../Util3d/Util3d\";\nimport Constants from \"../Utils/Constants\";\nimport { Vector3, Color3, Observable, StandardMaterial } from \"@babylonjs/core\";\n\nclass Wall extends NodeItem {\n  constructor(mesh, localWall, size, keyPoints = {}, keyValueMap = {}) {\n    super(mesh, keyValueMap);\n    this.localWall = localWall;\n    this.size = size;\n    this.keyPoints = keyPoints;\n  }\n\n  toDict() {\n    const dict = super.toDict();\n    dict.localWall = this.localWall;\n    dict.size = this.size;\n    return dict;\n  }\n\n  ofDict(scene, dict = null, mainView = null) {\n    return Wall.ofDict(scene, dict, mainView);\n  }\n\n  getType = () => Wall.TYPE;\n\n  static TYPE = \"Wall\";\n\n  static ofDict(scene, dict = null, mainView = null) {\n    if (!dict) throw \"null dictionary describing wall\";\n    const name = Maybe.fromNull(dict.name).orSome(\n      `Wall${Math.floor(Math.random() * 1e3)}`\n    );\n    const mesh = createWallMesh(dict, name, scene);\n\n    const material = new StandardMaterial(`WallMaterial${name}`, scene);\n    const color = new Color3(dict.color[0], dict.color[1], dict.color[2]);\n    material.diffuseColor = color;\n    material.emissiveColor = color;\n    mesh.material = material;\n    // babylonjs highlight shader flickers when floor intersect\n    mesh.position.z += 1e-3;\n\n    const keypoints = createPlaceHolderKeyPoints(\n      scene,\n      dict.localWall.map(x => Vec3.of(x).toBabylon()),\n      mesh,\n      mainView\n    );\n    return new Wall(\n      mesh,\n      dict.localWall,\n      dict.size,\n      keypoints,\n      dict.keyValueMap\n    );\n  }\n}\n\nconst RADIUS = Constants.RADIUS;\nconst FACES = [\n  [0, 1, 2],\n  [2, 3, 0],\n  [4, 6, 5],\n  [6, 4, 7],\n  [0, 5, 1],\n  [5, 0, 4],\n  [3, 2, 6],\n  [6, 7, 3],\n  [1, 6, 2],\n  [6, 1, 5],\n  [0, 3, 7],\n  [7, 4, 0]\n];\n\nfunction createWallMesh(dict, name, scene) {\n  const centeredWall = dict.localWall.map(x => Vec3.of(x).toBabylon());\n  const middlePoint = Vec3.of(dict.position).toBabylon();\n  const tangent = centeredWall[1].subtract(centeredWall[0]).normalize();\n  const normal = new Vector3(-tangent.y, tangent.x, 0);\n  const shape = [\n    centeredWall[0].add(normal.scale(dict.size.width)),\n    centeredWall[0].subtract(normal.scale(dict.size.width)),\n    centeredWall[1].subtract(normal.scale(dict.size.width)),\n    centeredWall[1].add(normal.scale(dict.size.width))\n  ];\n  const h = new Vector3(0, 0, dict.size.height);\n  const wallMesh = {\n    positions: [\n      shape[0],\n      shape[1],\n      shape[2],\n      shape[3],\n      shape[0].add(h),\n      shape[1].add(h),\n      shape[2].add(h),\n      shape[3].add(h)\n    ],\n    faces: FACES\n  };\n  const mesh = Util3d.meshFromPositionAndFaces(\n    name,\n    scene,\n    wallMesh.positions,\n    wallMesh.faces\n  );\n  mesh.position = middlePoint;\n  return mesh;\n}\n\nfunction createNewMeshFromOldUsingNewPoints(newWall, scene, mesh, item) {\n  const average = Util3d.pointAverageVec3(\n    newWall.localWall.map(x => Vec3.of(x))\n  );\n  newWall.position = average.toArray();\n  newWall.localWall = newWall.localWall.map(x =>\n    Vec3.of(x).sub(average).toArray()\n  );\n\n  const newMesh = createWallMesh(newWall, mesh.name, scene);\n  newMesh.position = mesh.position;\n  newMesh.rotationQuaternion = mesh.rotationQuaternion;\n  newMesh.locallyTranslate(average.toBabylon());\n  newMesh.material = mesh.material;\n  newMesh.visibility = mesh.visibility;\n  newMesh.parent = mesh.parent;\n\n  item.mesh = newMesh;\n  item.localWall = newWall.localWall;\n\n  const childrenCopy = [...mesh._children];\n  childrenCopy.forEach(c => {\n    mesh.removeChild(c);\n    c.parent = newMesh;\n  });\n  item.keyPoints.forEach((k, j) => {\n    k.position = Vec3.of(newWall.localWall[j]).toBabylon();\n  });\n  // dispose old mesh\n  mesh.dispose();\n}\n\nconst getKeyPointObserverFunction = (mainView, scene) => {\n  return ({ updatedPointMesh, is2updateServer }) => {\n    mainView.getNodeFromTree(updatedPointMesh.parent.name).forEach(wallNode => {\n      const index = updatedPointMesh.index;\n      const item = wallNode.item;\n      const mesh = item.mesh;\n      let newWall = {\n        position: Vec3.ofBabylon(mesh.position).toArray(),\n        localWall: item.localWall,\n        size: item.size\n      };\n      newWall.localWall[index] = Vec3.ofBabylon(\n        updatedPointMesh.position\n      ).toArray();\n\n      createNewMeshFromOldUsingNewPoints(newWall, scene, mesh, item);\n\n      if (is2updateServer) {\n        mainView.updateNodeInServer(mesh.name);\n      }\n    });\n  };\n};\n\nconst createPlaceHolderKeyPoints = (scene, wall, wallMesh, mainView) => {\n  const keyPoints = [];\n  wall.forEach((p, i) => {\n    const keyPoint = Util3d.createSphere(\n      scene,\n      new Color3(0.25, 0.25, 0.25),\n      RADIUS,\n      `${wallMesh.name}keyPointWall${i}`,\n      true\n    );\n    keyPoint.parent = wallMesh;\n    keyPoint.position = p;\n    keyPoint.index = i;\n    keyPoint.observers = new Observable();\n    keyPoint.observers.add(getKeyPointObserverFunction(mainView, scene));\n    keyPoints.push(keyPoint);\n  });\n  return keyPoints;\n};\n\nexport default Wall;\n","import GlobalRef from \"../NodeItem/GlobalRef\";\nimport Box from \"../NodeItem/Box\";\nimport KeyPoint from \"../NodeItem/KeyPoint\";\nimport Path from \"../NodeItem/Path\";\nimport Wall from \"../NodeItem/Wall\";\nimport BoxRegion from \"../NodeItem/BoxRegion\";\nimport PolygonRegion from \"../NodeItem/PolygonRegion\";\nimport GraphItem from \"../NodeItem/GraphItem\";\n\nconst NODE_ITEM_FACTORY_MAP = {\n  GlobalRef: GlobalRef,\n  Box: Box,\n  KeyPoint: KeyPoint,\n  Path: Path,\n  Wall: Wall,\n  BoxRegion: BoxRegion,\n  PolygonRegion: PolygonRegion,\n  GraphItem: GraphItem\n};\n\nexport default NODE_ITEM_FACTORY_MAP;\n","import GlobalRef from \"../NodeItem/GlobalRef\";\nimport { Maybe } from \"monet\";\nimport { ASSETS_TYPES } from \"../Utils/AssetsTypesFactory\";\nimport NODE_ITEM_FACTORY_MAP from \"./NodeItemFactoryMap\";\n\nclass MainViewRetriever {\n  static importScene(mainView, serverScene = [], parent = null) {\n    console.log(\"Importing scene...\", mainView, serverScene);\n    const errors = [];\n    if (serverScene.length > 0) {\n      importSceneRecursive(mainView, serverScene, parent, errors);\n    } else {\n      importDefaultScene(mainView);\n    }\n    console.log(\"End Importing scene\");\n    return errors;\n  }\n\n  static importNodeItem(mainView, nodeDict, parent, is2addInServer = false) {\n    const nodeItemClass = NODE_ITEM_FACTORY_MAP[nodeDict.type]; //retrieve default export\n    if (nodeItemClass) {\n      mainView.getSceneMemory().forEach(({ scene }) => {\n        const nodeItem = nodeItemClass.ofDict(scene, nodeDict, mainView);\n        // pseudo lazy migration of isVisible prop\n        const isVisible =\n          nodeDict.isVisible === undefined ? true : nodeDict.isVisible;\n        nodeItem.mesh.setEnabled(isVisible);\n        mainView.getNodeFromTree(parent).forEach(treeNode => {\n          nodeItem.mesh.parent = treeNode.item.mesh;\n        });\n        mainView.addNodeItem2Tree(\n          nodeItem,\n          parent,\n          is2addInServer,\n          isVisible,\n          false\n        );\n      });\n    }\n  }\n}\n\nfunction isAsset(nodeDict) {\n  return nodeDict.type in ASSETS_TYPES;\n}\n\nfunction importAsset(mainView, nodeDict, parent, errors) {\n  const assetType = nodeDict.type;\n  const assetName = Maybe.fromNull(nodeDict.assetName).orSome(nodeDict.name);\n  const assetActionMap = mainView.getAssetsActionMap();\n  // legacy\n  const retrievedAction = Maybe.fromNull(assetActionMap[assetName]).orLazy(\n    () => assetActionMap[assetName.split(\".\")[0]]\n  );\n  if (!retrievedAction) {\n    errors.push({\n      cause: `Asset of type ${assetType} with name ${assetName}, was not found`,\n      solution: `please upload ${assetType} ${assetName}`\n    });\n    return;\n  }\n  retrievedAction.memory[\"parentObj\"] = { parent: parent };\n  retrievedAction.memory[\"nodeItemDict\"] = nodeDict;\n  retrievedAction.memory[\"assetName\"] = assetName;\n  retrievedAction.memory[\"name\"] = nodeDict.name;\n  retrievedAction.memory[\"isImport\"] = true;\n  retrievedAction.memory[\"isVisible\"] =\n    nodeDict.isVisible === undefined ? true : nodeDict.isVisible;\n  retrievedAction.action(mainView);\n}\n\nfunction importSceneRecursive(mainView, arrayTree, parent = null, errors = []) {\n  if (!arrayTree) return;\n  const sortArrayTree = arrayTree.sort((a, b) => {\n    if (a.item.type === \"GlobalRef\") return -1;\n    return a.name < b.name ? -1 : a.name > b.name ? 1 : 0;\n  });\n  sortArrayTree.forEach(node => {\n    if (isAsset(node.item)) {\n      importAsset(mainView, node.item, parent, errors);\n    } else {\n      MainViewRetriever.importNodeItem(mainView, node.item, parent);\n    }\n    if (node.children.length > 0) {\n      importSceneRecursive(mainView, node.children, node.name, errors);\n    }\n  });\n}\n\nfunction importDefaultScene(mainView) {\n  mainView.getSceneMemory().forEach(memory => {\n    const scene = memory.scene;\n    const send2server = true;\n    mainView.addNodeItem2Tree(GlobalRef.ofDict(scene), null, send2server);\n  });\n}\n\nexport default MainViewRetriever;\n","import { MasterDB } from \"mov-fe-lib-core\";\nimport Constants from \"./Constants\";\n\nclass SceneServerUtils {\n  static retrieveScene = (\n    sceneName,\n    successCallback = DEFAULT_SUCCESS,\n    failCallback = DEFAULT_FAILURE(\"retrieving scene\")\n  ) => {\n    MasterDB.cloudFunction(\n      Constants.CLOUD_FUNCTION_NAME,\n      \"retrieveScene\",\n      sceneName,\n      data => successFailIf(data, successCallback, failCallback)\n    );\n  };\n}\n\nconst DEFAULT_FAILURE = failureLocation => data => {\n  throw \"\" + `Exception caught in ${failureLocation}: ${data.error}`;\n};\n\nconst DEFAULT_SUCCESS = data => {};\n\nconst successFailIf = (data, successCallback, failCallback) => {\n  if (data.success) {\n    successCallback(data);\n  } else {\n    failCallback(data);\n  }\n};\nexport default SceneServerUtils;\n","import { Maybe } from \"monet\";\n\nfunction getNodeRecursive(tree, predicate) {\n  for (let i = 0; i < tree.length; i++) {\n    const node = tree[i];\n    if (predicate(node)) return Maybe.some(node);\n    const answer = getNodeRecursive(node.children, predicate);\n    if (answer.isSome()) return answer;\n  }\n  return Maybe.none();\n}\n\nfunction getParentNodeRecursive(tree, predicate, parent) {\n  const foundChild = tree\n    .map(x => predicate(x))\n    .reduce((e, x) => e || x, false);\n  if (foundChild) return Maybe.fromNull(parent);\n  for (let i = 0; i < tree.length; i++) {\n    const node = tree[i];\n    const answer = getParentNodeRecursive(node.children, predicate, node);\n    if (answer.isSome()) return answer;\n  }\n  return Maybe.none();\n}\n\nfunction compareTreesRecursive(treeA, treeB, nodeEquality) {\n  if (treeA.length === treeB.length) {\n    let ans = true;\n    for (let i = 0; i < treeA.length; i++) {\n      const nodeA = treeA[i];\n      const nodeB = treeB[i];\n      if (nodeEquality(nodeA, nodeB)) {\n        ans =\n          ans &&\n          compareTreesRecursive(nodeA.children, nodeB.children, nodeEquality);\n      } else {\n        return false;\n      }\n    }\n    return ans;\n  }\n  return false;\n}\n\nfunction mapRecursive(tree, newTree, map) {\n  tree.forEach(nod => {\n    const node = { ...nod };\n    const mappedNode = map(node);\n    mappedNode.children = mapRecursive(node.children, [], map);\n    newTree.push(mappedNode);\n  });\n  return newTree;\n}\n\nfunction forEachRecursive(tree = [], forEach = () => {}) {\n  tree.forEach(node => {\n    forEach(node);\n    forEachRecursive(node.children, forEach);\n  });\n}\n\nfunction expand(node) {\n  node.expanded = true;\n  return node;\n}\n\nfunction filterTree(tree = [], predicate = node => true) {\n  if (!tree || tree.length === 0) return [];\n  let result = [];\n  tree.forEach(nod => {\n    const node = { ...nod };\n    if (predicate(node)) {\n      const expanded = expand(node);\n      expanded.children = filterTree(expanded.children, predicate);\n      result.push(expanded);\n    } else if (node.children) {\n      const children = filterTree(node.children, predicate);\n      if (children.length !== 0) {\n        node.children = children;\n        result.push(expand(node));\n      }\n    }\n  });\n  return result;\n}\n\nfunction flatten(tree = [], predicate = node => true) {\n  if (!tree || tree.length === 0) return [];\n  let result = [];\n  tree.forEach(nod => {\n    const node = { ...nod };\n    if (predicate(node)) result.push(node);\n    result = result.concat(flatten(node.children, predicate));\n  });\n  return result;\n}\n\n/**\n * General purpose tree\n *\n * It just need a basic structure as input:\n *  Tree: Array<Node>\n *  Node: {children: Array<Node>}\n */\nclass TreeObject {\n  constructor(tree) {\n    this.tree = tree;\n  }\n  /**\n   * Return maybe node based on predicate\n   * @param {*} predicate\n   */\n  getNode(predicate) {\n    return getNodeRecursive(this.tree, predicate);\n  }\n\n  /**\n   * return maybe parent node based on the child predicate\n   * @param {*} childPredicate\n   */\n  getParentNode(childPredicate) {\n    return getParentNodeRecursive(this.tree, childPredicate, null);\n  }\n\n  equals(tree, nodeEquality = (a, b) => a === b) {\n    if (tree.constructor === TreeObject) {\n      return compareTreesRecursive(this.tree, tree.tree, nodeEquality);\n    }\n    return compareTreesRecursive(this.tree, tree, nodeEquality);\n  }\n\n  map(nodeMap) {\n    return new TreeObject(mapRecursive(this.tree, [], nodeMap));\n  }\n\n  filter(predicate = node => true) {\n    return new TreeObject(filterTree(this.tree, predicate));\n  }\n\n  /**\n   *\n   * @param {*} predicate: node => Boolean\n   * @returns Array with flattened tree while filtering values with predicate\n   */\n  flatten(predicate = node => true) {\n    return flatten(this.tree, predicate);\n  }\n\n  forEach(map) {\n    forEachRecursive(this.tree, map);\n  }\n}\n\nexport default TreeObject;\n","class TreeNode {\n  constructor(title, item, children, expanded, isVisible) {\n    this.title = title;\n    this.item = item;\n    this.children = children;\n    this.expanded = expanded;\n    this.isVisible = isVisible;\n  }\n\n  static dispose(node) {\n    /*\n     * function must be defined here, otherwise it wouldn't work on the UI Tree change method\n     */\n    node.item.dispose();\n    node.children.forEach(child => {\n      TreeNode.dispose(child);\n    });\n  }\n\n  /**\n   *\n   * @param {*} node\n   */\n  static toDict(node) {\n    /*\n     * function must be defined here, otherwise it wouldn't work on the UI Tree change method\n     */\n    return {\n      name: node.title,\n      item: node.item.toDict(),\n      children: node.children.map(child => TreeNode.toDict(child))\n    };\n  }\n\n  static builder() {\n    return new TreeNodeBuilder();\n  }\n}\n\nclass TreeNodeBuilder {\n  constructor() {\n    this._title = null;\n    this._item = {};\n    this._children = [];\n    this._expanded = true;\n    this._isVisible = true;\n  }\n\n  title(title) {\n    this._title = title;\n    return this;\n  }\n\n  item(item) {\n    this._item = item;\n    return this;\n  }\n\n  children(children) {\n    this._children = children;\n    return this;\n  }\n\n  expanded(expanded) {\n    this._expanded = expanded;\n    return this;\n  }\n\n  isVisible(isVisible) {\n    this._isVisible = isVisible;\n    return this;\n  }\n\n  build() {\n    Object.values(this).forEach(value => {\n      if (value === null)\n        throw `There are missing variables to build a TreeNode, e.g ${value}`;\n    });\n    return new TreeNode(\n      this._title,\n      this._item,\n      this._children,\n      this._expanded,\n      this._isVisible\n    );\n  }\n}\n\nexport default TreeNode;\n","import TreeObject from \"../TreeObject/TreeObject\";\nimport TreeNode from \"../TreeObject/TreeNode\";\nimport GlobalRef from \"../NodeItem/GlobalRef\";\nimport { MasterDB } from \"mov-fe-lib-core\";\nimport Constants from \"./Constants\";\n\nconst CLOUD_FUNCTION_NAME = Constants.CLOUD_FUNCTION_NAME;\n\nclass TreeServerUtils {\n  constructor(sceneName) {\n    this.sceneName = sceneName;\n  }\n\n  static ofScene(sceneName) {\n    return new TreeServerUtils(sceneName);\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                    Util functions                                    *\n   *                                                                                      */\n  //========================================================================================\n\n  getNodeFromTree = (name, objectTree) => {\n    return new TreeObject(objectTree).getNode(x => name === x.title);\n  };\n\n  getParentFromChild = (childName, objectTree) => {\n    return new TreeObject(objectTree).getParentNode(x => childName === x.title);\n  };\n\n  deleteNodeFromTreeUsingName = (name, objectTree, is2delInServer = true) => {\n    this.getNodeFromTree(name, objectTree).forEach(node => {\n      // destroy treeNode\n      TreeNode.dispose(node);\n\n      if (is2delInServer) {\n        this.deleteNodeInServer(name);\n      }\n\n      const maybeParent = this.getParentFromChild(name, objectTree);\n      maybeParent.forEach(parentNode => {\n        parentNode.children = parentNode.children.filter(x => x.title !== name);\n      });\n\n      objectTree = objectTree.filter(x => x.title !== name);\n    });\n    return objectTree;\n  };\n\n  getNodeFromTreeWithPredicate = (predicate, objectTree) => {\n    return new TreeObject(objectTree).getNode(predicate);\n  };\n\n  addNodeItem2Tree = (\n    objectTree,\n    nodeItem,\n    parentName = GlobalRef.NAME,\n    is2addInServer = true,\n    isVisible = true\n  ) => {\n    // delete if already exist\n    this.deleteNodeFromTreeUsingName(nodeItem.name, objectTree, is2addInServer);\n\n    const node2Add = TreeNode.builder()\n      .title(nodeItem.name)\n      .item(nodeItem)\n      .isVisible(isVisible)\n      .build();\n\n    if (parentName) {\n      const maybeParentNode = this.getNodeFromTree(parentName, objectTree);\n      maybeParentNode.forEach(parentNode => {\n        if (is2addInServer) this.addNodeItem2Server(node2Add, parentNode.title);\n        parentNode.children.push(node2Add);\n      });\n    } else {\n      objectTree.push(node2Add);\n      if (is2addInServer) this.addNodeItem2Server(node2Add, null);\n    }\n    return objectTree;\n  };\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                   Server functions                                   *\n   *                                                                                      */\n  //========================================================================================\n\n  updateNodeInServer = (name, objectTree, oldName = null) => {\n    console.log(\"updateNodeInServer!\", this.sceneName);\n    this.getNodeFromTree(name, objectTree).forEach(node => {\n      const parentName = this.getParentFromChild(name, objectTree)\n        .map(x => x.title)\n        .orNull();\n      MasterDB.cloudFunction(\n        CLOUD_FUNCTION_NAME,\n        \"updateNode\",\n        [TreeNode.toDict(node), parentName, oldName, this.sceneName],\n        data => {\n          console.log(\"Update node with success?\", data.success);\n        }\n      );\n    });\n  };\n\n  addNodeItem2Server = (treeNode, parentName) => {\n    MasterDB.cloudFunction(\n      CLOUD_FUNCTION_NAME,\n      \"addNodeItem\",\n      [TreeNode.toDict(treeNode), parentName, this.sceneName],\n      data => {\n        console.log(\"Add node with success?\", data.success);\n      }\n    );\n  };\n\n  deleteNodeInServer = name => {\n    MasterDB.cloudFunction(\n      CLOUD_FUNCTION_NAME,\n      \"deleteNodeByName\",\n      [name, this.sceneName],\n      data => {\n        console.log(\"Deleted node with success?\", data.success);\n      }\n    );\n  };\n}\n\nexport default TreeServerUtils;\n","import { Maybe } from \"monet\";\nimport { ASSETS_TYPES, AssetsTypesFactory } from \"../Utils/AssetsTypesFactory\";\nimport { MasterDB } from \"mov-fe-lib-core\";\nimport MapLoader from \"./MapLoader\";\n\n/**\n *  Graphic Assets Manager, retrieves and manages the assets that are in DB.\n */\nclass AssetsManager {\n  constructor() {\n    if (instance) return instance;\n    instance = this;\n    this.assets = {};\n    this.assetsActionMap = {};\n    this.robots = {};\n    this.observers = [];\n    this.afterLoad = [];\n    this.finishInitialSubscribers = 0;\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                  Getters and Setters                                 *\n   *                                                                                      */\n  //========================================================================================\n\n  getAssets = () => this.assets;\n\n  getAssetsActionMap = () => this.assetsActionMap;\n\n  load = async () => {\n    await this.retrieveAssetsFromDb();\n    return this;\n  };\n\n  addAfterLoad(afterLoad) {\n    this.afterLoad.push(afterLoad);\n    return this;\n  }\n\n  addObserver(observer) {\n    this.observers.push(observer);\n    return this;\n  }\n\n  signalObservers = () => this.observers.forEach(obs => obs(this));\n\n  addAsset(assetKey, asset) {\n    try {\n      this.assets[assetKey] = asset;\n      this.assetsActionMap[assetKey] = AssetsTypesFactory[asset.type](asset);\n    } catch (e) {\n      console.log(\"Caught exception while adding asset\", e);\n      throw Error(`Caught exception while adding asset ${e}`);\n    }\n  }\n\n  delAsset(assetKey) {\n    if (assetKey in this.assets) delete this.assets[assetKey];\n    if (assetKey in this.assetsActionMap) delete this.assetsActionMap[assetKey];\n    this.signalObservers();\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                      Subscribers                                     *\n   *                                                                                      */\n  //========================================================================================\n\n  subs = [\n    resolve =>\n      MasterDB.subscribe(\n        {\n          Scope: \"Robot\",\n          Name: \"*\",\n          RobotName: \"*\"\n        },\n        this.getRobotNameUpdate(),\n        this.getRobotNameSub(({ value }) => value, resolve)\n      ),\n    resolve =>\n      MasterDB.subscribe(\n        {\n          Scope: \"Package\",\n          File: \"*\",\n          Name: \"maps\",\n          FileLabel: \"*\"\n        },\n        this.getMapUpdater(({ key }) => key, this.signalObservers),\n        this.getMapSubscriber(\n          ({ value }) => value,\n          () => this.finishSub(\"Maps\", resolve)\n        )\n      ),\n    resolve =>\n      MasterDB.subscribe(\n        { Scope: \"Package\", File: \"*\", Name: \"meshes\", FileLabel: \"*\" },\n        this.getMeshUpdater(),\n        this.getMeshSubscriber(\n          ({ value }) => value,\n          () => this.finishSub(\"Meshes\", resolve)\n        )\n      )\n  ];\n\n  retrieveAssetsFromDb() {\n    return new Promise((re, rej) => {\n      this.subs.forEach(f => f(re));\n    });\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                         Utils                                        *\n   *                                                                                      */\n  //========================================================================================\n\n  finishSub = (place, resolve) => {\n    console.log(\"FINISH SUB \", place, this.finishInitialSubscribers);\n    if (++this.finishInitialSubscribers > this.subs.length - 1) {\n      this.afterLoad.forEach(f => f(this));\n      resolve(true);\n    }\n  };\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                        Robots                                        *\n   *                                                                                      */\n  //========================================================================================\n\n  deleteRobot = id => {\n    this.delAsset(this.robots[id].name);\n    if (id in this.robots) delete this.robots[id];\n  };\n\n  addRobot(id, name = null) {\n    if (!(id in this.robots)) {\n      this.robots[id] = {\n        id: id,\n        name: null\n      };\n    }\n    ofNull(name).forEach(name => (this.robots[id].name = name));\n    if (Object.values(this.robots[id]).every(x => x !== null)) {\n      const localRobot = this.robots[id];\n      this.addAsset(localRobot.name, {\n        name: localRobot.name,\n        id: id,\n        type: ASSETS_TYPES.Robot,\n        robotTree: {\n          name: localRobot.name,\n          position: { x: 0, y: 0, z: 0 },\n          orientation: {\n            w: 1,\n            x: 0,\n            y: 0,\n            z: 0\n          },\n          child: []\n        }\n      });\n    }\n  }\n\n  getRobotNameSub(getter, resolve) {\n    return data => {\n      ofNull(getter(data))\n        .flatMap(maybeGet(\"Robot\"))\n        .forEach(r =>\n          Object.keys(r).forEach(id => this.addRobot(id, r[id].RobotName))\n        );\n      this.finishSub(\"RobotName\", resolve);\n    };\n  }\n\n  getRobotNameUpdate() {\n    const actionMap = {\n      del: data =>\n        ofNull(data.key)\n          .flatMap(maybeGet(\"Robot\"))\n          .forEach(r => Object.keys(r).forEach(this.deleteRobot)),\n      set: this.getRobotNameSub(({ key }) => key)\n    };\n    return data => {\n      console.log(\"Robot NAME UPDATE\", data);\n      actionMap[data.event](data);\n    };\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                         Maps                                         *\n   *                                                                                      */\n  //========================================================================================\n\n  getMapSubscriber = (dataGetter, after = () => {}) => {\n    return data =>\n      this.getMapFileData(dataGetter, data).forEach(fileName => {\n        Object.keys(fileName)\n          .filter(f => f.includes(\".yaml\"))\n          .forEach(this.addMap);\n        after();\n      });\n  };\n\n  getMapUpdater = (dataGetter, after = () => {}) => {\n    const actionMap = {\n      del: data => {\n        this.getMapFileData(dataGetter, data).forEach(f => {\n          let filename = Object.keys(f)[0];\n          filename = filename.split(\".\")[0];\n          delete this.assets[filename];\n          delete this.assetsActionMap[filename];\n        });\n        after();\n      },\n      set: this.getMapSubscriber(dataGetter, after),\n      subscribe: this.getMapSubscriber(dataGetter, after)\n    };\n    return data => {\n      console.log(\"MAP UPDATE\", data);\n      actionMap[data.event](data);\n    };\n  };\n\n  addMap = yamlSrc => {\n    const map = {\n      name: yamlSrc.split(\".\")[0],\n      loader: new MapLoader(yamlSrc),\n      type: ASSETS_TYPES.Map\n    };\n    this.addAsset(map.name, map);\n  };\n\n  getMapFileData = (dataGetter, data) =>\n    ofNull(dataGetter(data))\n      .flatMap(maybeGet(\"Package\"))\n      .flatMap(maybeGet(\"maps\"))\n      .flatMap(maybeGet(\"File\"));\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                         Mesh                                         *\n   *                                                                                      */\n  //========================================================================================\n\n  getMeshSubscriber = (dataGetter, after = () => {}) => data => {\n    this.getMeshFileData(dataGetter, data).forEach(d =>\n      Object.keys(d).forEach(id => {\n        const mesh = { id: id, name: d[id].FileLabel, type: ASSETS_TYPES.Mesh };\n        this.addAsset(mesh.name, mesh);\n      })\n    );\n    after();\n  };\n\n  getMeshUpdater = () => {\n    const actionMap = {\n      del: data => {\n        this.getMeshFileData(d => d.key, data).forEach(f => {\n          let filename = Object.keys(f)[0];\n          delete this.assets[filename];\n          delete this.assetsActionMap[filename];\n        });\n        this.signalObservers();\n      },\n      set: this.getMeshSubscriber(d => d.key, this.signalObservers),\n      subscribe: this.getMeshSubscriber(d => d.key, this.signalObservers)\n    };\n    return data => actionMap[data.event](data);\n  };\n\n  getMeshFileData = (dataGetter, data) =>\n    ofNull(dataGetter(data))\n      .flatMap(maybeGet(\"Package\"))\n      .flatMap(maybeGet(\"meshes\"))\n      .flatMap(maybeGet(\"File\"));\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                        static                                        *\n   *                                                                                      */\n  //========================================================================================\n\n  static getInstance() {\n    return new AssetsManager();\n  }\n}\n\n// private variable\nlet instance = null;\n\n// auxiliary functions\nconst ofNull = Maybe.fromNull;\nconst get = prop => obj => obj[prop];\nconst dot = f => g => x => f(g(x));\nconst maybeGet = prop => dot(ofNull)(get(prop));\n\nexport default AssetsManager;\n","export class Animator {\n  constructor(state, next, doWhile) {\n    this.state = state;\n    this.next = next;\n    this.while = doWhile;\n    this.requestAnimeId = null;\n  }\n\n  play() {\n    this.requestAnimeId = requestAnimationFrame(() => {\n      if (!this.while(this.state)) return this.stop();\n      this.state = this.next(this.state);\n      this.play();\n    });\n    return this;\n  }\n\n  stop() {\n    cancelAnimationFrame(this.requestAnimeId);\n    return this;\n  }\n\n  static builder() {\n    return new AnimatorBuilder();\n  }\n}\n\nclass AnimatorBuilder {\n  constructor() {\n    this._state = null;\n    this._next = null;\n    this._end = null;\n  }\n\n  initialState(state) {\n    this._state = state;\n    return this;\n  }\n\n  nextState(next) {\n    this._next = next;\n    return this;\n  }\n\n  while(end) {\n    this._end = end;\n    return this;\n  }\n\n  build() {\n    const someAreEmpty = [this._state, this._next, this._end].some(\n      x => x === null || x === undefined\n    );\n    if (someAreEmpty) throw \"Animator properties are missing\";\n    return new Animator(this._state, this._next, this._end);\n  }\n}\n","import { Vector3 } from \"@babylonjs/core\";\nimport Util3d from \"../Util3d/Util3d\";\nimport { Animator } from \"./Animator\";\n\nexport default class DefaultMouseEvents {\n  static onPointerDown = mainView => evt => {\n    mainView.mousePosClick = mainView\n      .getMouseCoordinatesFromRoot()\n      .orSome(Vector3.Zero());\n    mainView.mousePosMove = mainView.mousePosClick;\n    mainView.sceneMemory.forEach(({ camera, canvas }) => {\n      if (evt.buttons === 2 || evt.buttons === 4 || evt.ctrlKey) {\n        camera.detachControl(canvas);\n      }\n    });\n  };\n\n  static onPointerUp = mainView => evt => {\n    mainView.sceneMemory.forEach(({ camera, canvas }) => {\n      camera.attachControl(canvas, true);\n    });\n  };\n\n  static onPointerMove = mainView => evt => {\n    mainView.sceneMemory.forEach(({ mouseLocationText, camera }) => {\n      mainView.getMouseCoordinatesFromRoot().forEach(currentLocal => {\n        setMouseLocationTxt(mouseLocationText, currentLocal);\n        const panCamera = () => {\n          const v = currentLocal.subtract(mainView.mousePosMove);\n          const vBabylon = Util3d.getBabylonCoordinates(v).scale(-1);\n          animateCamera(camera, vBabylon);\n          mainView.mousePosMove = currentLocal;\n        };\n        const mouseButtonActions = [\n          { predicate: evt.ctrlKey && evt.buttons === 1, action: panCamera },\n          { predicate: evt.buttons === 4, action: panCamera }\n        ];\n        const filterActions = mouseButtonActions.filter(\n          ({ predicate }) => predicate\n        );\n        if (filterActions.length > 0) filterActions[0].action();\n      });\n    });\n  };\n}\n\nfunction animateCamera(camera, v) {\n  Animator.builder()\n    .initialState({\n      camera: camera,\n      time: 0,\n      T: new Date().getTime()\n    })\n    .nextState(s => {\n      const { camera, time } = s;\n      const dt = 0.1; //(new Date().getTime() - T) / 1000;\n      const vdt = v.scale(dt);\n      camera.position = camera.position.add(vdt);\n      camera.setTarget(camera.target.add(vdt));\n      return {\n        camera: camera,\n        time: time + dt,\n        T: new Date().getTime()\n      };\n    })\n    .while(s => s.time <= 1)\n    .build()\n    .play();\n}\n\nfunction setMouseLocationTxt(mouseLocationText, currentLocal) {\n  mouseLocationText.text = `x: ${currentLocal.x.toFixed(\n    2\n  )}, y: ${currentLocal.y.toFixed(2)}`;\n}\n","import React, { Component } from \"react\";\nimport BaseViewer from \"./BaseViewer/BaseViewer\";\nimport PropTypes from \"prop-types\";\nimport { HighlightLayer } from \"@babylonjs/core\";\nimport { Maybe } from \"monet\";\nimport MainViewRetriever from \"./MainView/MainViewRetriever\";\nimport DefaultScene from \"./Utils/DefaultScene\";\nimport GlobalRef from \"./NodeItem/GlobalRef\";\nimport SceneServerUtils from \"./Utils/SceneServerUtils\";\nimport TreeServerUtils from \"./Utils/TreeServerUtils\";\nimport AssetsManager from \"./AssetsManager/AssetsManager\";\nimport TreeObject from \"./TreeObject/TreeObject\";\nimport GraphItem from \"./NodeItem/GraphItem\";\nimport DefaultMouseEvents from \"./Utils/DefaultMouseEvents\";\nimport Util3d from \"./Util3d/Util3d\";\nimport Vec3 from \"./Math/Vec3\";\nimport ReactResizeDetector from \"react-resize-detector\";\nimport ConfirmAlertModal from \"../Modal/ConfirmAlertModal\";\n\n//========================================================================================\n/*                                                                                      *\n *                                      SceneViewer                                     *\n *                                                                                      */\n//========================================================================================\n\nclass SceneViewer extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { errorList: [] };\n    this.sceneName = props.sceneName.Value;\n    this.sceneMemory = Maybe.none();\n    this.objectTree = [];\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                   Getters & Setters                                  *\n   *                                                                                      */\n  //========================================================================================\n\n  getSceneMemory = () => this.sceneMemory;\n\n  getAssetsActionMap = () => AssetsManager.getInstance().getAssetsActionMap();\n\n  getRootNode = (tree = [...this.objectTree]) => {\n    return tree.filter(x => x.title === GlobalRef.NAME)[0];\n  };\n\n  getObjectTree = () => this.objectTree;\n\n  setSelectedAction = () => {\n    /* empty */\n  };\n\n  getGraph() {\n    return new TreeObject(this.objectTree).getNode(\n      x => GraphItem.TYPE === x.item.getType()\n    );\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                    Utils functions                                   *\n   *                                                                                      */\n  //========================================================================================\n\n  getNodeFromTree = (name, objectTree = [...this.objectTree]) => {\n    return TreeServerUtils.ofScene(this.sceneName).getNodeFromTree(\n      name,\n      objectTree\n    );\n  };\n\n  deleteNodeFromTreeUsingName = () => {\n    throw new Error(\"Delete Node in viewer Exception\");\n  };\n\n  updateNodeInServer = (name, oldName = null) => {\n    if (this.props.focusObject.Value === name) this.setCameraToTarget();\n    TreeServerUtils.ofScene(this.sceneName).updateNodeInServer(\n      name,\n      [...this.objectTree],\n      oldName\n    );\n  };\n\n  addNodeItem2Tree = (\n    nodeItem,\n    parentName = GlobalRef.NAME,\n    is2addInServer = true,\n    isVisible = true\n  ) => {\n    const newObjectTree = TreeServerUtils.ofScene(\n      this.sceneName\n    ).addNodeItem2Tree(\n      [...this.objectTree],\n      nodeItem,\n      parentName,\n      is2addInServer,\n      isVisible\n    );\n    this.objectTree = newObjectTree;\n  };\n\n  setCameraToTarget = () => {\n    this.sceneMemory.forEach(({ camera }) => {\n      const focusObject = this.props.focusObject.Value;\n      this.getNodeFromTree(focusObject).cata(\n        () => {\n          console.log(\n            \"Set Camera\",\n            this.getRootNode().item.mesh._absolutePosition\n          );\n          camera.setTarget(\n            this.getRootNode().item.mesh._absolutePosition.clone()\n          );\n        },\n        x => {\n          console.log(\"Set Camera, Found Object\", x.item.mesh);\n          camera.setTarget(x.item.mesh._absolutePosition.clone());\n        }\n      );\n    });\n  };\n\n  addCanvasEventListeners(canvas) {\n    const events = [\n      {\n        name: \"pointerdown\",\n        function: evt => this.onPointerDown(evt)\n      },\n      { name: \"pointerup\", function: evt => this.onPointerUp(evt) },\n      {\n        name: \"pointermove\",\n        function: evt => this.onPointerMove(evt)\n      }\n    ];\n    events.forEach(event =>\n      canvas.addEventListener(event.name, event.function, false)\n    );\n  }\n\n  onPointerDown = evt => {\n    DefaultMouseEvents.onPointerDown(this)(evt);\n  };\n\n  onPointerUp = evt => {\n    DefaultMouseEvents.onPointerUp(this)(evt);\n  };\n\n  onPointerMove = evt => {\n    DefaultMouseEvents.onPointerMove(this)(evt);\n  };\n\n  getMouseCoordinatesFromRoot() {\n    return this.sceneMemory.flatMap(({ scene, ground }) => {\n      const maybeCurrent = Util3d.getGroundPosition(scene, ground);\n      return maybeCurrent.flatMap(current =>\n        Maybe.fromNull(this.getRootNode()).map(rootNode =>\n          Util3d.computeLocalCoordinatesFromMesh(\n            rootNode.item.mesh,\n            Vec3.ofBabylon(current)\n          ).toBabylon()\n        )\n      );\n    });\n  }\n\n  onResize = (w, h) => {\n    if (w === 0 && h === 0) return;\n    this.getSceneMemory().forEach(({ mouseLocationText }) => {\n      mouseLocationText.left = -w / 2 + w / 17;\n      mouseLocationText.top = -h / 2 + h / 30;\n    });\n  };\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                    Scene functions                                   *\n   *                                                                                      */\n  //========================================================================================\n\n  retrieveSceneFromServer = (afterLoading = () => {}) => {\n    SceneServerUtils.retrieveScene(this.sceneName, data => {\n      const errorList = MainViewRetriever.importScene(this, data.result);\n      this.setState({ errorList });\n      afterLoading();\n    });\n  };\n\n  loadAssets = async () => {\n    await AssetsManager.getInstance().load();\n  };\n\n  loadScene = async () => {\n    await this.loadAssets();\n    this.retrieveSceneFromServer(this.renderScene);\n  };\n\n  renderScene = () => {\n    this.getSceneMemory().forEach(({ engine, scene }) =>\n      engine.runRenderLoop(() => scene.render())\n    );\n    this.setCameraToTarget();\n  };\n\n  onSceneReady = scene => {\n    const engine = scene.getEngine();\n    const canvas = engine.getRenderingCanvas();\n    this.addCanvasEventListeners(canvas);\n    const mouseLocationText = DefaultScene.createMouseLocationText(scene);\n    this.sceneMemory = Maybe.some({\n      engine: engine,\n      canvas: canvas,\n      scene: scene,\n      camera: DefaultScene.createCamera(scene, canvas),\n      light: DefaultScene.createLight(scene),\n      ground: DefaultScene.createMeshGround(scene),\n      gizmoManager: DefaultScene.createGizmo(scene),\n      highlightLayer: {\n        hl: new HighlightLayer(\"hl1\", scene),\n        lastHlMeshes: []\n      },\n      mouseLocationText: mouseLocationText\n    });\n    return scene;\n  };\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                   Render functions                                   *\n   *                                                                                      */\n  //========================================================================================\n\n  renderMenus = () => {\n    // to implement interface of MainView\n  };\n\n  componentDidUpdate = prevProps => {\n    const predicateAction = [\n      {\n        propVar: x => x.sceneName.Value,\n        action: () => (this.sceneName = this.props.sceneName.Value)\n      },\n      {\n        propVar: x => x.focusObject.Value,\n        action: this.setCameraToTarget\n      }\n    ];\n    predicateAction.forEach(({ propVar, action }) => {\n      if (propVar(this.props) !== propVar(prevProps)) {\n        action();\n      }\n    });\n  };\n\n  componentDidMount = () => {\n    console.log(\"SceneViewer Did Mount!! \");\n    this.loadScene();\n  };\n\n  render() {\n    const { errorList } = this.state;\n    const resetErrorList = () => this.setState({ errorList: [] });\n    return (\n      <div style={{ display: \"flex\", flexGrow: 1 }}>\n        <BaseViewer\n          onSceneReady={this.onSceneReady}\n          is2render={false}\n          sceneFactory={DefaultScene.createScene}\n        />\n        <ConfirmAlertModal\n          onSubmit={resetErrorList}\n          onCancel={resetErrorList}\n          open={errorList?.length > 0}\n          title={\"Scene Viewer\"}\n          message={\"An error occurred while loading the scene\"}\n          submitText={\"OK\"}\n          submitColor={\"primary\"}\n          cancelText={\"Cancel\"}\n          cancelColor={\"secondary\"}\n        >\n          {getErrorSolutionList(errorList)}\n        </ConfirmAlertModal>\n        <ReactResizeDetector\n          handleWidth\n          handleHeight\n          onResize={this.onResize}\n        />\n      </div>\n    );\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                   Static functions                                   *\n   *                                                                                      */\n  //========================================================================================\n\n  static getComponentFactory(sceneName) {\n    return masterProps => {\n      const augmentProps = {\n        sceneName,\n        ...masterProps\n      };\n      return <SceneViewer {...augmentProps} />;\n    };\n  }\n\n  static EXTENSION = \".3d\";\n}\n\nSceneViewer.propTypes = {\n  sceneName: PropTypes.shape({ Value: PropTypes.string }),\n  focusObject: PropTypes.shape({ Value: PropTypes.string })\n};\n\nSceneViewer.defaultProps = {\n  sceneName: { Value: \"Pedro\" },\n  focusObject: { Value: \"\" }\n};\n\nfunction getErrorSolutionList(errorList) {\n  return !errorList ? (\n    []\n  ) : (\n    <ul>\n      {errorList.map(({ cause, solution }, i) => {\n        return <li key={\"error\" + i}>{`${cause}, ${solution}`}</li>;\n      })}\n    </ul>\n  );\n}\n\nexport default SceneViewer;\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport InputLabel from \"@material-ui/core/InputLabel\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport MaterialSelect from \"@material-ui/core/Select\";\nimport PropTypes from \"prop-types\";\n\nconst useStyles = makeStyles(theme => ({\n  formControl: {\n    margin: theme.spacing(1),\n    minWidth: 120\n  }\n}));\n\nconst Select = props => {\n  const classes = useStyles();\n\n  let noneOption = <div></div>;\n  if (props.noneOption) {\n    noneOption = (\n      <MenuItem value=\"\">\n        <em>None</em>\n      </MenuItem>\n    );\n  }\n\n  return (\n    <FormControl\n      variant={props.variant}\n      className={classes.formControl}\n      style={props.style}\n      hiddenLabel={props.label === undefined ? true : false}\n    >\n      <InputLabel id=\"movai-react-select\">{props.label}</InputLabel>\n      <MaterialSelect\n        labelId=\"movai-react-select\"\n        id={props.id}\n        value={props.value}\n        onChange={props.onChange}\n        inputProps={props.inputProps}\n      >\n        {noneOption}\n        {props.options.map((element, index) => {\n          return (\n            <MenuItem key={index} value={element}>\n              {element}\n            </MenuItem>\n          );\n        })}\n      </MaterialSelect>\n    </FormControl>\n  );\n};\n\nSelect.propTypes = {\n  value: PropTypes.string,\n  options: PropTypes.array,\n  noneOption: PropTypes.bool,\n  label: PropTypes.string,\n  variant: PropTypes.string,\n  style: PropTypes.object,\n  onChange: PropTypes.func,\n  id: PropTypes.string,\n  inputProps: PropTypes.object\n};\nSelect.defaultProps = {\n  value: \"option2\",\n  options: [\"option1\", \"option2\", \"option3\"],\n  variant: \"filled\",\n  noneOption: true,\n  onChange: evt => console.log(evt.target.value),\n  id: \"movai-react-select\"\n};\n\nexport default Select;\n","// import * as React from \"react\";\n// import SvgIcon from \"@material-ui/core/SvgIcon\";\n\n// export default function createSvgIcon({\n//   path = \"\",\n//   style = {},\n//   fill = \"#fff\",\n//   width = \"100%\",\n//   className = \"\",\n//   height = \"100%\",\n//   viewBox = \"0 0 32 32\"\n// }) {\n//   return (\n//     <svg\n//       width={width}\n//       style={style}\n//       height={height}\n//       viewBox={viewBox}\n//       className={className}\n//       xmlns=\"http://www.w3.org/2000/svg\"\n//       xmlnsXlink=\"http://www.w3.org/1999/xlink\"\n//     >\n//       <path d={path} fill={fill} />\n//     </svg>\n//   );\n// }\n\n// export default function createSvgIcon(path, displayName) {\n//   const Component = React.memo(\n//     React.forwardRef((props, ref) => (\n//       <SvgIcon data-mui-test={`${displayName}Icon`} ref={ref} {...props}>\n//         {path}\n//       </SvgIcon>\n//       <SvgIcon>\n//         {path}\n//       </SvgIcon>\n//     ))\n//   );\n\n//   if (process.env.NODE_ENV !== \"production\") {\n//     Component.displayName = `${displayName}Icon`;\n//   }\n\n//   Component.muiName = SvgIcon.muiName;\n\n//   return Component;\n// }\n\nimport React from \"react\";\n\nconst CreateSVGIcon = ({\n  path = \"\",\n  style = {},\n  fill = \"#fff\",\n  width = \"100%\",\n  height = \"100%\",\n  className = \"\",\n  viewBox = \"0 0 24 24\"\n}) => (\n  <svg\n    width={width}\n    style={style}\n    height={height}\n    viewBox={viewBox}\n    xmlns=\"http://www.w3.org/2000/svg\"\n    className={`svg-icon ${className || \"\"}`}\n    xmlnsXlink=\"http://www.w3.org/1999/xlink\"\n  >\n    <path fill={fill} d={path} />\n  </svg>\n);\n\nexport default CreateSVGIcon;\n","import React from \"react\";\nimport CreateSVGIcon from \"./CreateSVGIcon\";\n\nexport const svgIcons = {\n  Close: (\n    <CreateSVGIcon\n      width={24}\n      path=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"\n    />\n  ),\n  ErrorOutline: (\n    <CreateSVGIcon\n      width={24}\n      path=\"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z\"\n    ></CreateSVGIcon>\n  ),\n  InfoOutlined: (\n    <CreateSVGIcon\n      width={24}\n      path=\"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z\"\n    ></CreateSVGIcon>\n  ),\n  ReportProblemOutlined: (\n    <CreateSVGIcon\n      width={24}\n      path=\"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z\"\n    ></CreateSVGIcon>\n  ),\n  SuccessOutlined: (\n    <CreateSVGIcon\n      width={24}\n      path=\"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z\"\n    ></CreateSVGIcon>\n  )\n};\n","import * as React from \"react\";\nimport PropTypes from \"prop-types\";\nimport clsx from \"clsx\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport { capitalize } from \"@material-ui/core/utils\";\nimport { svgIcons } from \"./svg-icons/svgIcons\";\n\nexport const styles = () => {\n  return {\n    /* Styles applied to the root element. */\n    root: {\n      // borderRadius: theme.shape.borderRadius,\n      backgroundColor: \"transparent\",\n      display: \"flex\",\n      padding: \"6px 16px\"\n    },\n    /* Styles applied to the root element if `variant=\"filled\"` and `color=\"success\"`. */\n    filledSuccess: {\n      color: \"#fff\",\n      // fontWeight: theme.typography.fontWeightMedium,\n      backgroundColor: \"#4caf50\"\n    },\n    /* Styles applied to the root element if `variant=\"filled\"` and `color=\"info\"`. */\n    filledInfo: {\n      color: \"#fff\",\n      // fontWeight: theme.typography.fontWeightMedium,\n      backgroundColor: \"#2196f3\"\n    },\n    /* Styles applied to the root element if `variant=\"filled\"` and `color=\"warning\"`. */\n    filledWarning: {\n      color: \"#fff\",\n      // fontWeight: theme.typography.fontWeightMedium,\n      backgroundColor: \"#ff9800\"\n    },\n    /* Styles applied to the root element if `variant=\"filled\"` and `color=\"error\"`. */\n    filledError: {\n      color: \"#fff\",\n      // fontWeight: theme.typography.fontWeightMedium,\n      backgroundColor: \"#f44336\"\n    },\n    /* Styles applied to the icon wrapper element. */\n    icon: {\n      marginRight: 12,\n      padding: \"7px 0\",\n      display: \"flex\",\n      fontSize: 22,\n      opacity: 0.9\n    },\n    /* Styles applied to the message wrapper element. */\n    message: {\n      padding: \"8px 0\",\n      display: \"flex\",\n      flexDirection: \"column\",\n      justifyContent: \"center\"\n    },\n    /* Styles applied to the action wrapper element if `action` is provided. */\n    action: {\n      display: \"flex\",\n      alignItems: \"center\",\n      marginLeft: \"auto\",\n      paddingLeft: 16,\n      marginRight: -8\n    }\n  };\n};\n\nconst defaultIconMapping = {\n  success: svgIcons.SuccessOutlined,\n  warning: svgIcons.ReportProblemOutlined,\n  error: svgIcons.ErrorOutline,\n  info: svgIcons.InfoOutlined\n};\n\nconst Alert = props => {\n  const {\n    action,\n    children,\n    classes,\n    className,\n    closeText = \"Close\",\n    color,\n    icon,\n    iconMapping = defaultIconMapping,\n    onClose,\n    role = \"alert\",\n    severity = \"success\",\n    variant = \"standard\",\n    theme,\n    ...other\n  } = props;\n\n  console.log(\"action\", action);\n\n  return (\n    <div\n      className={clsx(\n        classes.root,\n        classes[`${variant}${capitalize(color || severity)}`],\n        className\n      )}\n      {...other}\n    >\n      {icon !== false ? (\n        <div className={classes.icon}>\n          {icon || iconMapping[severity] || defaultIconMapping[severity]}\n        </div>\n      ) : null}\n      <div className={classes.message}>{children}</div>\n      {action != null ? <div className={classes.action}>{action}</div> : null}\n      {action == null && onClose ? (\n        <div className={classes.action}>\n          <IconButton\n            size=\"small\"\n            aria-label={closeText}\n            title={closeText}\n            color=\"inherit\"\n            onClick={onClose}\n          >\n            {svgIcons.Close}\n          </IconButton>\n        </div>\n      ) : null}\n    </div>\n  );\n};\n\nAlert.propTypes = {\n  // ----------------------------- Warning --------------------------------\n  // | These PropTypes are generated from the TypeScript type definitions |\n  // |     To update them edit the d.ts file and run \"yarn proptypes\"     |\n  // ----------------------------------------------------------------------\n  /**\n   * The action to display. It renders after the message, at the end of the alert.\n   */\n  action: PropTypes.node,\n  /**\n   * The content of the component.\n   */\n  children: PropTypes.node,\n  /**\n   * Override or extend the styles applied to the component.\n   * See [CSS API](#css) below for more details.\n   */\n  classes: PropTypes.object,\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n  /**\n   * Override the default label for the *close popup* icon button.\n   *\n   * For localization purposes, you can use the provided [translations](/guides/localization/).\n   */\n  closeText: PropTypes.string,\n  /**\n   * The main color for the alert. Unless provided, the value is taken from the `severity` prop.\n   */\n  color: PropTypes.oneOf([\"error\", \"info\", \"success\", \"warning\"]),\n  /**\n   * Override the icon displayed before the children.\n   * Unless provided, the icon is mapped to the value of the `severity` prop.\n   */\n  icon: PropTypes.node,\n  /**\n   * The component maps the `severity` prop to a range of different icons,\n   * for instance success to `<SuccessOutlined>`.\n   * If you wish to change this mapping, you can provide your own.\n   * Alternatively, you can use the `icon` prop to override the icon displayed.\n   */\n  iconMapping: PropTypes.shape({\n    error: PropTypes.node,\n    info: PropTypes.node,\n    success: PropTypes.node,\n    warning: PropTypes.node\n  }),\n  /**\n   * Callback fired when the component requests to be closed.\n   * When provided and no `action` prop is set, a close icon button is displayed that triggers the callback when clicked.\n   *\n   * @param {object} event The event source of the callback.\n   */\n  onClose: PropTypes.func,\n  /**\n   * The ARIA role attribute of the element.\n   */\n  role: PropTypes.string,\n  /**\n   * The severity of the alert. This defines the color and icon used.\n   */\n  severity: PropTypes.oneOf([\"error\", \"info\", \"success\", \"warning\"]),\n  /**\n   * The variant to use.\n   */\n  variant: PropTypes.oneOf([\"filled\", \"outlined\", \"standard\"])\n};\n\nexport default withStyles(styles, { name: \"MuiAlert\" })(Alert);\n","// Inspired from https://github.com/GA-MO/react-confirm-alert\n\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { render, unmountComponentAtNode } from \"react-dom\";\n// import { Alert } from \"@material-ui/lab\";\nimport Alert from \"./Alert/Alert\";\n\nimport \"./Snackbar.css\";\n\nimport { svgIcons } from \"./Alert/svg-icons/svgIcons\";\n\nclass ReactConfirmAlert extends Component {\n  static propTypes = {\n    message: PropTypes.string,\n    customUI: PropTypes.func,\n    closeOnClickOutside: PropTypes.bool,\n    closeOnEscape: PropTypes.bool,\n    willUnmount: PropTypes.func,\n    onClickOutside: PropTypes.func,\n    onKeypressEscape: PropTypes.func,\n    // new props\n    severity: PropTypes.string,\n    closeText: PropTypes.string,\n    autoHideDuration: PropTypes.number,\n    closable: PropTypes.bool\n  };\n\n  autoClose = null;\n\n  static defaultProps = {\n    closeOnClickOutside: true,\n    closeOnEscape: true,\n    willUnmount: () => null,\n    onClickOutside: () => null,\n    onKeypressEscape: () => null,\n    // new props\n    severity: \"info\", // error, warning, info or success\n    closeText: \"Close\",\n    autoHideDuration: 6000,\n    closable: true\n  };\n\n  handleClickButton = button => {\n    if (button.onClick) button.onClick();\n    this.close();\n  };\n\n  handleClickOverlay = e => {\n    const { closeOnClickOutside, onClickOutside } = this.props;\n    const isClickOutside = e.target === this.overlay;\n\n    if (closeOnClickOutside && isClickOutside) {\n      onClickOutside();\n      this.close();\n    }\n  };\n\n  close = () => {\n    removeBodyClass();\n    removeElementReconfirm();\n  };\n\n  keyboardClose = event => {\n    const { closeOnEscape, onKeypressEscape } = this.props;\n    const isKeyCodeEscape = event.keyCode === 27;\n\n    if (closeOnEscape && isKeyCodeEscape) {\n      onKeypressEscape(event);\n      this.close();\n    }\n  };\n\n  componentDidMount = () => {\n    document.addEventListener(\"keydown\", this.keyboardClose, false);\n    this.autoClose = setTimeout(() => {\n      if (\n        document.getElementById(\"react-confirm-alert\") ||\n        document.getElementById(\"react-confirm-alert-body-element\")\n      ) {\n        this.close();\n      }\n    }, this.props.autoHideDuration);\n  };\n\n  componentWillUnmount = () => {\n    document.removeEventListener(\"keydown\", this.keyboardClose, false);\n    clearTimeout(this.autoClose);\n    this.props.willUnmount();\n  };\n\n  renderCustomUI = () => {\n    const { title, message, customUI } = this.props;\n    const dataCustomUI = {\n      title,\n      message,\n      onClose: this.close\n    };\n\n    return customUI(dataCustomUI);\n  };\n\n  render() {\n    const {\n      message,\n      customUI,\n      severity,\n      closeText,\n      closable,\n      theme\n    } = this.props;\n\n    return (\n      <div\n        className=\"react-confirm-alert-overlay\"\n        ref={dom => (this.overlay = dom)}\n        onClick={this.handleClickOverlay}\n      >\n        <div className=\"react-confirm-alert\">\n          {customUI ? (\n            this.renderCustomUI()\n          ) : (\n            <div className=\"react-confirm-alert-body\">\n              <Alert\n                theme={theme}\n                elevation={6}\n                variant=\"filled\"\n                severity={severity}\n                closeText={closeText}\n                action={\n                  closable ? (\n                    <div\n                      className=\"icon-container\"\n                      onClick={() => this.close()}\n                    >\n                      {svgIcons.Close}\n                    </div>\n                  ) : (\n                    undefined\n                  )\n                }\n              >\n                {message}\n              </Alert>\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\nfunction createElementReconfirm(properties, theme) {\n  let divTarget = document.getElementById(\"react-confirm-alert\");\n  if (divTarget) {\n    // Rerender - the mounted ReactConfirmAlert\n    render(<ReactConfirmAlert {...properties} theme={theme} />, divTarget);\n  } else {\n    // Mount the ReactConfirmAlert component\n    document.body.children[0].classList.add(\"react-confirm-alert-blur\");\n    divTarget = document.createElement(\"div\");\n    divTarget.id = \"react-confirm-alert\";\n    document.body.appendChild(divTarget);\n    render(<ReactConfirmAlert {...properties} theme={theme} />, divTarget);\n  }\n}\n\nfunction removeElementReconfirm() {\n  const target = document.getElementById(\"react-confirm-alert\");\n  unmountComponentAtNode(target);\n  target.parentNode.removeChild(target);\n}\n\nfunction addBodyClass() {\n  document.body.classList.add(\"react-confirm-alert-body-element\");\n}\n\nfunction removeBodyClass() {\n  document.body.classList.remove(\"react-confirm-alert-body-element\");\n}\n\nexport function snackbar(properties, theme) {\n  addBodyClass();\n  createElementReconfirm(properties, theme);\n}\n\nexport default ReactConfirmAlert;\n","import { createMuiTheme } from \"@material-ui/core/styles\";\nimport \"fontsource-cabin\";\nimport \"fontsource-roboto\";\nimport \"fontsource-noto-sans\";\n\nconst themeFactory = particular => ({\n  ...particular,\n  typography: {\n    fontFamily: \"Avenir\",\n    h1: {\n      fontFamily: \"Avenir\"\n    },\n    h2: {\n      fontFamily: \"Avenir\"\n    },\n    h3: {\n      fontFamily: \"Avenir\"\n    },\n    h4: {\n      fontFamily: \"Avenir\"\n    },\n    h5: {\n      fontFamily: \"Avenir\"\n    },\n    h6: {\n      fontFamily: \"Avenir\"\n    },\n    body1: {\n      fontFamily: \"Roboto\"\n    }\n  },\n  cursorDefault: {\n    cursor: \"default\"\n  }\n});\n\nconst Themes = {\n  dark: createMuiTheme(\n    themeFactory({\n      label: \"dark\",\n      backgroundColor:\n        \"linear-gradient(114.01deg, #212121 0%, #050505 100.43%)\",\n      bottomNavigation: { background: \"#212121\" },\n      globalStats: {\n        borderColor: \"#474747\",\n        subTextColor: \"#CDCDCD\",\n        upperTextColor: \"#E6E6E6\"\n      },\n      palette: {\n        type: \"dark\", // Switching the dark mode on, is a single property value change.\n        primary: {\n          main: \"#36b5e6\"\n        },\n        secondary: {\n          main: \"#CF6679\"\n        },\n        green: {\n          main: \"#03DAC5\"\n        }\n      },\n      overrides: {\n        MuiButton: {\n          outlined: {\n            margin: \"8px\"\n          },\n          text: {\n            margin: \"8px\"\n          },\n          contained: {\n            margin: \"8px\"\n          },\n          containedPrimary: {\n            color: \"inherit\",\n            margin: \"8px\"\n          },\n          containedSecondary: {\n            color: \"inherit\",\n            margin: \"8px\"\n          }\n        },\n        MuiButtonGroup: {\n          root: {\n            margin: \"0\"\n          },\n          groupedContainedPrimary: {\n            margin: \"0\"\n          },\n          groupedOutlined: {\n            margin: \"0\"\n          },\n          groupedText: {\n            margin: \"0\"\n          }\n        },\n        MuiIconButton: {\n          root: {\n            color: \"#36b5e6\"\n          }\n        },\n        MuiListItem: {\n          button: {\n            \"&:hover\": {\n              backgroundColor: \"rgba(54,181,230, 0.15)\"\n            }\n          }\n        },\n        MuiFormControlLabel: {\n          label: {\n            color: \"rgba(255,255,255,0.8)\"\n          }\n        },\n        MuiInputBase: {\n          input: {\n            font: \"Roboto\"\n          }\n        },\n        MuiFilledInput: {\n          root: {\n            border: \"4px\"\n          },\n          underline: {\n            \"&::before\": {\n              borderRadius: \"4px\"\n            }\n          }\n        }\n      }\n    })\n  ),\n  light: createMuiTheme(\n    themeFactory({\n      font: {\n        Roboto: {\n          fontFamily: \"Roboto\"\n        },\n        Avenir: {\n          fontFamily: \"Avenir\"\n        },\n        Cabin: {\n          fontFamily: \"Cabin\"\n        },\n        NotoSans: {\n          fontFamily: \"Noto Sans\"\n        }\n      },\n      label: \"light\",\n      backgroundColor:\n        \"linear-gradient(122.19deg, #FFFFFF 2.58%, #FFFFFF 76.23%)\", // it was white before\n      bottomNavigation: { background: \"#c3c3c3\" },\n      globalStats: {\n        borderColor: \"#E6E6E6\",\n        subTextColor: \"#717171\",\n        upperTextColor: \"#474747\"\n      },\n      palette: {\n        primary: {\n          main: \"#007197\"\n        },\n        secondary: {\n          main: \"#BE2424\"\n        },\n        green: {\n          main: \"#03DAC5\"\n        }\n      },\n      overrides: {\n        MuiButton: {\n          outlined: {\n            margin: \"8px\"\n          },\n          text: {\n            margin: \"8px\"\n          },\n          contained: {\n            margin: \"8px\"\n          },\n          containedPrimary: {\n            color: \"white\",\n            margin: \"8px\"\n          },\n          containedSecondary: {\n            color: \"white\",\n            margin: \"8px\"\n          }\n        },\n        MuiButtonGroup: {\n          root: {\n            margin: \"0\"\n          },\n          groupedContainedPrimary: {\n            margin: \"0\"\n          },\n          groupedOutlined: {\n            margin: \"0\"\n          },\n          groupedText: {\n            margin: \"0\"\n          }\n        },\n        MuiIconButton: {\n          root: {\n            color: \"#007197\"\n          }\n        },\n        MuiListItem: {\n          button: {\n            \"&:hover\": {\n              backgroundColor: \"rgba(0,113,151, 0.15)\"\n            }\n          }\n        },\n        MuiFormControlLabel: {\n          label: {\n            color: \"rgba(0,0,0,0.8)\"\n          }\n        },\n        MuiInputBase: {\n          input: {\n            font: \"Roboto\"\n          }\n        },\n        MuiFilledInput: {\n          root: {\n            border: \"4px\"\n          },\n          underline: {\n            \"&::before\": {\n              borderRadius: \"4px\"\n            }\n          }\n        }\n      }\n    })\n  )\n};\n\nThemes.getTheme = () => {\n  const theme = window.localStorage.getItem(\"movai.theme\"); // dark or light\n  return theme ? theme : \"dark\";\n};\n\nThemes.setTheme = value => {\n  window.localStorage.setItem(\"movai.theme\", value);\n};\n\nexport default Themes;\n","import { createGlobalStyle } from \"styled-components\";\nimport { Style as S } from \"mov-fe-lib-core\";\n\nconst Style = createGlobalStyle`${S}`;\nexport default Style;\n","import React, { Component } from \"react\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport Menu from \"@material-ui/core/Menu\";\nimport { Typography } from \"@material-ui/core\";\nimport { fade } from \"@material-ui/core/styles/colorManipulator\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport PropTypes from \"prop-types\";\n\nconst styles = theme => ({\n  button: {\n    margin: theme.spacing(1),\n    color: theme.palette.primary.main,\n    borderColor: theme.palette.primary.main\n  },\n  iconActive: {\n    color: theme.palette.primary.main,\n    borderColor: theme.palette.primary.main,\n    backgroundColor: fade(theme.palette.primary.main, 0.1)\n  },\n  buttonApplyFilters: {\n    background: theme.palette.primary.main,\n    fontFamily: \"Roboto\",\n    fontStyle: \"normal\",\n    fontWeight: \"bold\",\n    fontSize: \"14px\",\n    color: \"#FAFAFA\",\n    margin: \"0px 20px 10px 20px\",\n    \"&:hover\": { background: theme.palette.primary.dark }\n  },\n  icon: {\n    // fontSize: \"18px\",\n    // height: \"21px\",\n    // width: \"15px\",\n    //color: theme.palette.primary.main,\n    \"&:hover\": { cursor: \"pointer\" }\n  },\n  height: { height: \"100%\" },\n  checkbox: { marginLeft: \"10px\" },\n  limitText: {\n    width: \"50px\",\n    margin: theme.spacing(0, 3, 0, 3)\n  }\n});\n\nconst StyledMenu = withStyles(theme => ({\n  paper: {\n    // border: \"1px solid #F0F0F0\",\n    borderRadius: \"8px\",\n    width: \"242px\",\n    height: \"411px\",\n    boxShadow: \"2px 2px 4px rgba(0, 0, 0, 0.25)\"\n  }\n}))(props => (\n  <Menu\n    elevation={0}\n    getContentAnchorEl={null}\n    anchorOrigin={{\n      vertical: \"bottom\",\n      horizontal: \"center\"\n    }}\n    transformOrigin={{\n      vertical: \"top\",\n      horizontal: \"center\"\n    }}\n    autoFocus={false}\n    {...props}\n  />\n));\n\nclass FilterIcon extends Component {\n  state = { anchorEl: null, otherFilters: [] };\n\n  handleClick = event => {\n    this.setState({ anchorEl: event.currentTarget });\n  };\n\n  handleClose = () => {\n    this.setState({\n      anchorEl: null,\n      otherFilters: []\n    });\n  };\n\n  render() {\n    const { classes, t } = this.props;\n    return (\n      <React.Fragment>\n        <IconButton\n          size=\"small\"\n          onClick={this.handleClick}\n          className={this.props.isActive ? classes.iconActive : classes.icon}\n        >\n          {this.props.icon}\n        </IconButton>\n        <StyledMenu\n          id=\"customized-menu\"\n          anchorEl={this.state.anchorEl}\n          open={Boolean(this.state.anchorEl)}\n          onClose={this.handleClose}\n          className={classes.height}\n        >\n          <div\n            style={{\n              display: \"flex\",\n              flexDirection: \"column\",\n              height: \"-webkit-fill-available\"\n            }}\n          >\n            <Typography\n              component=\"div\"\n              style={{\n                padding: \"10px 10px 0px 20px\",\n                display: \"flex\",\n                flexDirection: \"row\"\n              }}\n            >\n              <Typography\n                component=\"div\"\n                style={{\n                  fontSize: \"24px\",\n                  fontFamily: \"Avenir\",\n                  fontWeight: 500\n                }}\n              >\n                {this.props.title}\n              </Typography>\n              <Typography\n                component=\"div\"\n                style={{\n                  flexGrow: 1\n                }}\n              ></Typography>\n              <Typography\n                component=\"div\"\n                onClick={this.handleClose}\n                className={classes.icon}\n              >\n                <i className=\"fas fa-times\"></i>\n              </Typography>\n            </Typography>\n            <div\n              style={{\n                flexGrow: 1,\n                display: \"flex\",\n                flexDirection: \"column\",\n                margin: \"10px 0px 0px 10px\"\n              }}\n            >\n              {this.props.children}\n            </div>\n          </div>\n        </StyledMenu>\n      </React.Fragment>\n    );\n  }\n}\n\nFilterIcon.propTypes = {\n  isActive: PropTypes.bool,\n  title: PropTypes.string\n};\n\nFilterIcon.defaultProps = {\n  isActive: false,\n  title: \"Filters\"\n};\n\nexport default withStyles(styles, { withTheme: true })(FilterIcon);\n","import React, { memo } from \"react\";\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport SearchIcon from \"@material-ui/icons/Search\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { FormControlLabel, Switch, TextField } from \"@material-ui/core\";\nimport ResetSearch from \"@material-ui/icons/Close\";\nimport FiltersIcon from \"./FiltersIcon/FiltersIcon\";\nimport LabelIcon from \"@material-ui/icons/Label\";\nimport Chip from \"@material-ui/core/Chip\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport TodayIcon from \"@material-ui/icons/Today\";\nimport { Typography } from \"@material-ui/core\";\nimport Input from \"@material-ui/core/Input\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport Select from \"@material-ui/core/Select\";\nimport SettingsIcon from \"@material-ui/icons/Settings\";\nimport Checkbox from \"@material-ui/core/Checkbox\";\nimport {\n  KeyboardDateTimePicker,\n  MuiPickersUtilsProvider\n} from \"@material-ui/pickers\";\nimport DateFnsUtils from \"@date-io/date-fns\";\nimport PropTypes from \"prop-types\";\nimport { _isEqual } from \"lodash/isEqual\";\nimport { _get } from \"lodash/get\";\n\nconst useStyles = makeStyles(theme => ({\n  filterBarContainer: {\n    display: \"flex\",\n    flexDirection: \"row\",\n    flexWrap: \"wrap\",\n    padding: 6,\n    backgroundColor: \"#353535\",\n    alignItems: \"center\"\n    // justifyContent: \"space-between\"\n  },\n  input: {\n    flex: 1,\n    paddingLeft: \"10px\",\n    fontSize: \"medium\"\n  },\n  searchText: {\n    minWidth: 150,\n    paddingLeft: theme.spacing(3)\n  },\n  addTagText: {\n    width: \"100%\"\n  },\n  limitText: {\n    width: \"50px\",\n    margin: theme.spacing(0, 3, 0, 3)\n  },\n  toggleContainer: {\n    margin: theme.spacing(2)\n  },\n  datePicker: {\n    width: \"200px\",\n    margin: theme.spacing(0, 3, 0, 3)\n  },\n  tagsContainer: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    padding: theme.spacing(0.5),\n    margin: theme.spacing(0, 3, 0, 3)\n  },\n  tagsList: {\n    marginTop: theme.spacing(3)\n  },\n  chip: {\n    margin: theme.spacing(0.5)\n  },\n  formControl: {\n    margin: theme.spacing(1),\n    minWidth: 120,\n    maxWidth: 300\n  },\n  filtersButton: {\n    display: \"flex\",\n    flexDirection: \"row\"\n  },\n  columnsFilter: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    marginTop: 6\n  },\n  iconButton: {\n    color: \"#0B6A8A\",\n    \"&:hover\": {\n      color: \"#22c7ff\"\n    }\n  }\n}));\n\nconst LogsFilterBar = props => {\n  const classes = useStyles();\n  const [tagText, setTagText] = React.useState(\"\");\n\n  const handleRobotChange = event => {\n    const arrayEvent = event?.target?.value;\n    const selectedId = arrayEvent[arrayEvent.length - 1];\n    props.updateRobotSelection(selectedId);\n  };\n  const getRobotSelector = () => {\n    return (\n      <div>\n        <svg\n          width=\"20\"\n          height=\"18\"\n          viewBox=\"0 0 30 27\"\n          fill=\"none\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n          style={{ paddingTop: \"5px\", paddingRight: \"5px\" }}\n        >\n          <path\n            fillRule=\"evenodd\"\n            clipRule=\"evenodd\"\n            d=\"M16.7753 1.35706L15.9587 2.61119L16.3648 2.87846L18.4001 4.18898L17.1052 6.20016H25.437C26.5487 6.20016 27.45 7.10137 27.45 8.21307V12.8244H28.0955C28.6514 12.8244 29.102 13.275 29.102 13.8308V16.0643C29.102 16.6201 28.6514 17.0707 28.0955 17.0707H27.45V21.2901C27.45 22.4018 26.5487 23.303 25.437 23.303H4.12161C3.00991 23.303 2.1087 22.4017 2.1087 21.29V17.0707H1.42467C0.868819 17.0707 0.418213 16.6201 0.418213 16.0643V13.8308C0.418213 13.275 0.868819 12.8244 1.42467 12.8244H2.1087V8.21307C2.1087 7.10137 3.00991 6.20016 4.12161 6.20016H13.5141L14.8252 4.16395L13.2875 3.15192L13.2966 3.13812L13.2875 3.1322L15.1377 0.290771L16.7753 1.35706ZM24.4306 9.21953H5.12807V20.2836H24.4306V9.21953ZM7.18098 12.1324C6.68518 12.1324 6.28325 12.5343 6.28325 13.0301C6.28325 13.5259 6.68518 13.9278 7.18098 13.9278H9.04635C9.54216 13.9278 9.94409 13.5259 9.94409 13.0301C9.94409 12.5343 9.54216 12.1324 9.04635 12.1324H7.18098ZM20.6901 12.1324C20.1943 12.1324 19.7924 12.5343 19.7924 13.0301C19.7924 13.5259 20.1943 13.9278 20.6901 13.9278H22.5555C23.0513 13.9278 23.4532 13.5259 23.4532 13.0301C23.4532 12.5343 23.0513 12.1324 22.5555 12.1324H20.6901ZM9.17669 17.6512H11.3239V19.253H9.17669V17.6512ZM14.3432 17.6513H12.196V19.253H14.3432V17.6513ZM15.2154 17.6513H17.3626V19.253H15.2154V17.6513ZM20.382 17.6513H18.2348V19.253H20.382V17.6513ZM10.9568 23.69H18.6019V25.7029C18.6019 26.2587 18.1513 26.7093 17.5954 26.7093H11.9632C11.4074 26.7093 10.9568 26.2587 10.9568 25.7029V23.69Z\"\n            fill=\"#9E9E9E\"\n          />\n        </svg>\n        <FormControl className={classes.formControl}>\n          <Select\n            labelId=\"select-label\"\n            id=\"select\"\n            multiple\n            value={props.selectedRobots}\n            onChange={handleRobotChange}\n            renderValue={selected => {\n              const selectedNames = selected\n                .filter(({ isSelected }) => isSelected)\n                .map(({ name }) => name);\n              return selectedNames.length > 2\n                ? [selectedNames[0], selectedNames[1]].join(\" , \") + \"...\"\n                : selectedNames.join(\" , \");\n            }}\n            input={<Input />}\n            MenuProps={MenuProps}\n          >\n            {/* <MenuItem key={`robotList-Default`} value={robotDefault}>\n              Default\n            </MenuItem> */}\n            {props.selectedRobots.map((robot, robotIndex) => {\n              return (\n                <MenuItem key={`robotList-${robotIndex}`} value={robot.id}>\n                  <Checkbox checked={robot.isSelected} />\n                  <ListItemText primary={robot.name} />\n                </MenuItem>\n              );\n            })}\n          </Select>\n        </FormControl>\n      </div>\n    );\n  };\n\n  const getSearchInput = () => {\n    return (\n      <TextField\n        className={classes.searchText}\n        label=\"\"\n        placeholder=\"Search (regex)\"\n        value={props.messageRegex}\n        onChange={evt => props.handleMessageRegex(evt.target.value)}\n        InputProps={{\n          startAdornment: (\n            <InputAdornment style={{ paddingRight: 8 }}>\n              <SearchIcon fontSize=\"small\" />\n            </InputAdornment>\n          ),\n          endAdornment: (\n            <InputAdornment position=\"end\">\n              <IconButton\n                disabled={!props.messageRegex}\n                onClick={() => props.handleMessageRegex(\"\")}\n              >\n                <ResetSearch color=\"inherit\" fontSize=\"small\" />\n              </IconButton>\n            </InputAdornment>\n          )\n        }}\n        size=\"small\"\n      />\n    );\n  };\n\n  const getLevels = () => {\n    return (\n      <div className={classes.toggleContainer}>\n        <FormControl className={classes.formControl}>\n          <Select\n            labelId=\"demo-mutiple-checkbox-label\"\n            id=\"demo-mutiple-checkbox\"\n            multiple\n            value={props.levels}\n            onChange={props.handleLevels}\n            input={<Input />}\n            renderValue={selected => {\n              // selected comes from state, for example [\"ERROR\", \"INFO\"]\n              // but want to show the lables, for example [\"Alerts\", \"State of Robot\"]\n              const labels = props.levelsList\n                .filter(level => selected.includes(level.value))\n                .map(elem => elem.label);\n              return labels.join(\", \");\n            }}\n            MenuProps={MenuProps}\n          >\n            {props.levelsList.map(level => (\n              <MenuItem key={level.value} value={level.value}>\n                <Checkbox checked={props.levels.indexOf(level.value) > -1} />\n                <ListItemText primary={level.label} />\n              </MenuItem>\n            ))}\n          </Select>\n        </FormControl>\n      </div>\n    );\n  };\n\n  const getTags = () => {\n    return (\n      <FiltersIcon\n        icon={<LabelIcon></LabelIcon>}\n        title=\"Tags\"\n        isActive={props.tags.length > 0}\n      >\n        <div className={classes.tagsContainer}>\n          <TextField\n            className={classes.addTagText}\n            value={tagText}\n            onChange={evt => setTagText(evt.target.value)}\n            onKeyUp={event => {\n              // User pressed Enter\n              if (event.keyCode === 13) {\n                props.handleAddTag(tagText);\n              }\n            }}\n            label=\"Add Tag\"\n            // placeholder=\"Tag\"\n            InputProps={{\n              endAdornment: (\n                <InputAdornment>\n                  <IconButton onClick={() => props.handleAddTag(tagText)}>\n                    <AddIcon />\n                  </IconButton>\n                </InputAdornment>\n              )\n            }}\n            size=\"small\"\n          />\n          <div className={classes.tagsList}>\n            {props.tags.map(data => {\n              return (\n                <li key={data.key}>\n                  <Chip\n                    label={data.label}\n                    onDelete={() => props.handleDeleteTag(data)}\n                    className={classes.chip}\n                    size=\"small\"\n                  />\n                </li>\n              );\n            })}\n          </div>\n        </div>\n      </FiltersIcon>\n    );\n  };\n\n  const getTimeFilters = () => {\n    return (\n      <FiltersIcon\n        icon={<TodayIcon></TodayIcon>}\n        title={props.t(\"Date Range\")}\n        isActive={\n          props.selectedFromDate !== null || props.selectedToDate !== null\n        }\n      >\n        {/* From -> To Date */}\n        <MuiPickersUtilsProvider utils={DateFnsUtils}>\n          <KeyboardDateTimePicker\n            key=\"time-picker\"\n            className={classes.datePicker}\n            size=\"small\"\n            variant=\"inline\"\n            ampm={false}\n            label={props.t(\"From date\")}\n            value={props.selectedFromDate}\n            onChange={newDate =>\n              props.handleDateChange(newDate, \"selectedFromDate\")\n            }\n            onError={console.log}\n            format=\"yyyy/MM/dd HH:mm\"\n          />\n          <KeyboardDateTimePicker\n            key=\"time-picker2\"\n            className={classes.datePicker}\n            size=\"small\"\n            variant=\"inline\"\n            ampm={false}\n            label={props.t(\"To date\")}\n            value={props.selectedToDate}\n            onChange={newDate =>\n              props.handleDateChange(newDate, \"selectedToDate\")\n            }\n            onError={console.log}\n            format=\"yyyy/MM/dd HH:mm\"\n          />\n        </MuiPickersUtilsProvider>\n      </FiltersIcon>\n    );\n  };\n\n  const getSettings = () => {\n    return (\n      <FiltersIcon\n        icon={<SettingsIcon></SettingsIcon>}\n        title={props.t(\"Configuration\")}\n      >\n        {/* Advanced/Simple Mode */}\n        <FormControlLabel\n          control={\n            <Switch\n              checked={props.advancedMode}\n              onChange={props.handleAdvancedMode}\n            />\n          }\n          label={props.advancedMode ? \"Advanced\" : \"Simple\"}\n        />\n        <div className={classes.filtersButton}>\n          {/* Limit Input */}\n          <Typography\n            component=\"div\"\n            style={{\n              fontSize: \"1rem\",\n              fontFamily: \"Avenir\",\n              fontWeight: 500\n            }}\n          >\n            {`${props.t(\"Limit p/Robot\")}:`}\n          </Typography>\n          <TextField\n            value={props.limit}\n            onChange={props.handleLimit}\n            className={classes.limitText}\n            id=\"outlined-number\"\n            // label=\"limit\"\n            placeholder={props.t(\"limit\")}\n            type=\"number\"\n            InputLabelProps={{\n              shrink: true\n            }}\n            // variant=\"outlined\"\n            size=\"small\"\n          />\n        </div>\n        <div className={classes.columnsFilter}>\n          {/* Limit Input */}\n          <Typography\n            component=\"div\"\n            style={{\n              fontSize: \"1rem\",\n              fontFamily: \"Avenir\",\n              fontWeight: 500\n            }}\n          >\n            {`${props.t(\"Columns\")}:`}\n          </Typography>\n          <FormControl className={classes.formControl}>\n            <Select\n              labelId=\"demo-mutiple-checkbox-label\"\n              id=\"demo-mutiple-checkbox\"\n              multiple\n              value={props.columns}\n              onChange={props.handleColumns}\n              input={<Input />}\n              renderValue={selected =>\n                selected\n                  .map(elem => _get(props, `columnList[${elem}].label`, \"\"))\n                  .join(`, `)\n              }\n              MenuProps={MenuProps}\n            >\n              {Object.keys(props.columnList).map((column, index) => {\n                return (\n                  <MenuItem key={index} value={column}>\n                    <Checkbox checked={props.columns.indexOf(column) > -1} />\n                    <ListItemText primary={props.columnList[column].label} />\n                  </MenuItem>\n                );\n              })}\n            </Select>\n          </FormControl>\n        </div>\n      </FiltersIcon>\n    );\n  };\n\n  return (\n    <div className={classes.filterBarContainer}>\n      {getRobotSelector()}\n      {/* Search Input */}\n      {getSearchInput()}\n      {/* Toggle: INFO, DEBUG, ERROR, CRITICAL */}\n      {getLevels()}\n      {/* Tags */}\n      {props.advancedMode && getTags()}\n      {getTimeFilters()}\n      <div style={{ flexGrow: 1 }}></div>\n      {getSettings()}\n    </div>\n  );\n};\n\nconst ITEM_HEIGHT = 48;\nconst ITEM_PADDING_TOP = 8;\nconst MenuProps = {\n  PaperProps: {\n    style: {\n      maxHeight: ITEM_HEIGHT * 4.5 + ITEM_PADDING_TOP,\n      width: 250\n    }\n  },\n  getContentAnchorEl: null\n};\n\nLogsFilterBar.propTypes = {\n  levels: PropTypes.array,\n  levelsList: PropTypes.array,\n  handleLevels: PropTypes.func,\n  limit: PropTypes.number,\n  handleLimit: PropTypes.func,\n  columns: PropTypes.array,\n  columnList: PropTypes.object,\n  handleColumns: PropTypes.func,\n  handleDeleteTag: PropTypes.func,\n  messageRegex: PropTypes.string,\n  handleMessageRegex: PropTypes.func,\n  selectedFromDate: PropTypes.string,\n  selectToDate: PropTypes.string,\n  handleDateChange: PropTypes.func,\n  selectedRobots: PropTypes.array,\n  updateRobotSelection: PropTypes.func,\n  advancedMode: PropTypes.bool,\n  handleAdvancedMode: PropTypes.func,\n  t: PropTypes.func\n};\n\nLogsFilterBar.defaultProps = {\n  levels: [],\n  levelsList: [],\n  handleLevels: () => {},\n  limit: 1,\n  handleLimit: () => {},\n  columns: [],\n  columnList: {},\n  handleColumns: () => {},\n  handleDeleteTag: () => {},\n  messageRegex: \"\",\n  handleMessageRegex: () => {},\n  selectedFromDate: \"\",\n  selectToDate: \"\",\n  handleDateChange: () => {},\n  selectedRobots: [],\n  updateRobotSelection: () => {},\n  advancedMode: false,\n  handleAdvancedMode: () => {},\n  t: string => string\n};\n\n//The function returns true when the compared props equal, preventing the component from re-rendering\nfunction arePropsEqual(prevProps, nextProps) {\n  return _isEqual(prevProps, nextProps);\n}\n\nexport default memo(LogsFilterBar, arePropsEqual);\n","import React from \"react\";\nimport _isEmpty from \"lodash/isEmpty\";\n\n// export const levels = [\n//   { value: \"INFO\", label: i18n.t(\"Robot Status\") },\n//   // { value: \"WARNING\", label: \"Warnings\" },\n//   // { value: \"DEBUG\", label: \"Debug\" },\n//   { value: \"ERROR\", label: i18n.t(\"Alerts\") }\n//   // { value: \"CRITICAL\", label: \"Critical\" }\n// ];\n\nexport const colorCoding = {\n  INFO: {\n    backgroundColor: \"rgba(33, 150, 243, 0.1)\",\n    color: \"rgba(33, 150, 243, 1)\"\n  },\n  WARNING: {\n    backgroundColor: \"rgba(255, 152, 0, 0.1)\",\n    color: \"rgba(255, 152, 0, 1)\"\n  },\n  DEBUG: {\n    backgroundColor: \"rgba(76, 175, 80, 0.1)\",\n    color: \"rgba(76, 175, 80, 1)\"\n  },\n  ERROR: {\n    backgroundColor: \"rgba(244, 67, 54, 0.1)\",\n    color: \"rgba(244, 67, 54, 1)\"\n  },\n  CRITICAL: {\n    backgroundColor: \"rgba(255, 19, 1, 0.1)\",\n    color: \"rgba(255, 19, 1, 1)\"\n  }\n};\n\n// export const fixedColumns = {\n//   Date: {\n//     label: i18n.t(\"Date\"),\n//     dataKey: \"time\",\n//     width: 100,\n//     render: time => getJustDateFromServer(time)\n//   },\n//   Time: {\n//     label: i18n.t(\"Time\"),\n//     dataKey: \"time\",\n//     render: time => getJustTimeFromServer(time),\n//     width: 100\n//   },\n//   Level: {\n//     label: i18n.t(\"Level\"),\n//     dataKey: \"level\",\n//     width: 100\n//   },\n//   Module: {\n//     label: i18n.t(\"Module\"),\n//     dataKey: \"module\",\n//     width: 100\n//   },\n//   Function: {\n//     label: \"Function\",\n//     dataKey: \"funcName\",\n//     width: 100\n//   },\n//   Callback: {\n//     label: i18n.t(\"Callback\"),\n//     dataKey: \"callback\",\n//     width: 100\n//   },\n//   Node: {\n//     label: i18n.t(\"Node\"),\n//     dataKey: \"node\",\n//     width: 100\n//   },\n//   Fleet: {\n//     label: i18n.t(\"Fleet\"),\n//     dataKey: \"fleet\",\n//     width: 100\n//   },\n//   Robot: {\n//     label: i18n.t(\"Robot\"),\n//     dataKey: \"robot\",\n//     width: 100\n//   },\n//   Message: {\n//     label: i18n.t(\"Message\"),\n//     dataKey: \"message\",\n//     width: 100\n//   }\n// };\n\n// Makes sure to find unique \"i\" of chip array\n// Input: [{key: 0, label: \"Chip1\"}, {key: 2, label: \"Chip3\"}], keyName= \"key\"\n// Output: 1\nexport function findsUniqueKey(array, keyName) {\n  const length = array.length;\n  // If empty, return 0\n  if (length === 0 || array === undefined) {\n    return 0;\n  }\n  for (let k = 0; k < length; k++) {\n    for (let j = 0; j < length; j++) {\n      if (k === array[j][keyName]) {\n        break;\n      }\n      if (j === length - 1) {\n        return k;\n      }\n    }\n  }\n\n  return length;\n}\n\n// Converts the levels in the state for the string for the request\n//  Input: [\"INFO\", \"DEBUG\"]\n//  Output: \"level=info,debug\"\nexport function getRequestLevels(levelsArray, levelsList) {\n  let res = \"\";\n  if (Array.isArray(levelsArray) && levelsArray.length === levelsList.length) {\n    return res;\n  }\n\n  try {\n    levelsArray.forEach(level => {\n      if (res === \"\") {\n        res = `${level.toLowerCase()}`;\n      } else {\n        res = `${res},${level.toLowerCase()}`;\n      }\n    });\n    return `level=${res}`;\n  } catch (error) {\n    return \"\";\n  }\n}\n// Converts the levels in the state for the string for the request\n//  Input: [{ key: 0, label: \"UI\" }, { key: 1, label: \"TASKS\" }]\n//  Output: \"&tags=UI,TASKS\"\nexport function getRequestTags(tagsArray) {\n  let res = \"\";\n\n  if (_isEmpty(tagsArray)) {\n    return res;\n  }\n\n  tagsArray.forEach(tag => {\n    if (res === \"\") {\n      res = `${tag.label}`;\n    } else {\n      res = `${res},${tag.label}`;\n    }\n  });\n\n  return `&tags=${res}`;\n}\n// Converts the levels in the state for the string for the request\n//  Input: \"r'started\\.$\"\n//  Output: \"&message=r'started\\.$\"\nexport function getRequestMessage(message) {\n  if (!message || message === \"\") {\n    return \"\";\n  }\n\n  return `&message=${message}`;\n}\n\n// Convert Date format to a human readable format\n// Input: 1586370146\n// Output: \"08/04/2020 19:22:26\"\nexport const getTimeFromServer = serverTime => {\n  const time = new Date(serverTime * 1000);\n  return `${time.toLocaleString(\"pt\")}`;\n};\n// Convert Date format to a human readable format\n// Input: 1586370146\n// Output: \"08/04/2020\"\nexport const getJustDateFromServer = serverTime => {\n  const time = new Date(serverTime * 1000);\n  return `${time.toLocaleDateString(\"pt\")}`;\n};\n// Convert Date format to a human readable format\n// Input: 1586370146\n// Output: \"19:22:26\"\nexport const getJustTimeFromServer = serverTime => {\n  const time = new Date(serverTime * 1000);\n  return `${time.toLocaleTimeString(\"pt\")}`;\n};\n\n// Convert array of object to array of strings for LogList\n// Input:\n// [\n//   {\n//     time: 1586370146,\n//     level: \"INFO\",\n//     message: \"UI Tag Log Test: 12\"\n//   },\n//   {\n//     time: 1586370147,\n//     level: \"INFO\",\n//     message: \"UI Tag Log Test: 13\"\n//   }\n// ];\n// Output\n// [\n//   \"[08/04/2020 19:22:26] [INFO] : UI Tag Log Test: 12\",\n//   \"[08/04/2020 19:21:31] [INFO] : UI Tag Log Test: 56\"\n// ];\n\nexport const formatLogsData = data => {\n  return data.map(\n    elem => elem.stdout\n    // `[${getTimeFromServer(elem.time)}] [${elem.level}] : ${elem.message}`\n  );\n};\n\nfunction binaryIndexOf(data, criteria) {\n  var minIndex = 0;\n  var maxIndex = data.length - 1;\n  var currentIndex;\n  var currentElement;\n  var result = null;\n\n  while (minIndex <= maxIndex) {\n    currentIndex = ((minIndex + maxIndex) / 2) | 0;\n    currentElement = data[currentIndex];\n    var comparison = criteria(currentElement);\n\n    if (comparison[0] === \"right\") {\n      minIndex = currentIndex + 1;\n    } else {\n      maxIndex = currentIndex - 1;\n    }\n\n    if (comparison[1]) {\n      result = currentIndex;\n    }\n  }\n\n  return result;\n}\n\nexport const filterByFromToDates = (logsData, fromDate, toDate) => {\n  // If there is a problem fetching the logs, show nothing\n  if (!logsData) {\n    return [];\n  }\n\n  let lowerIndex = 0;\n  let upperIndex = logsData.length;\n\n  // If nothing is selected, do nothing\n  if (!fromDate && !toDate) {\n    return logsData;\n  }\n\n  // List of time format. Array is sorted in descending order (Newer -> Older)\n  const dateList = logsData.map(log => log.time);\n  if (toDate) {\n    // First log that is <= toDate (first index that fits criteria)\n    lowerIndex = binaryIndexOf(dateList, function (value) {\n      return value >= toDate.getTime() / 1000\n        ? [\"right\", false]\n        : [\"left\", true];\n    });\n  }\n  if (fromDate) {\n    // First log that is >= fromDate (last index that still fits criteria)\n    upperIndex = binaryIndexOf(dateList, function (value) {\n      return value <= fromDate.getTime() / 1000\n        ? [\"left\", false]\n        : [\"right\", true];\n    });\n  }\n  return logsData.slice(lowerIndex, upperIndex + 1);\n};\n\n// This function is to get the same string as the one you get in\n// Robot:Status nodes_lchd and persistent_nodes_lchd\nexport const addNestedName = (nestedName, newName) => {\n  if (nestedName === \"\") {\n    return newName;\n  } else {\n    return `${nestedName}__${newName}`;\n  }\n};\n\n// Will update according with the list of running nodes all the nodes to running or stopped\nexport const updateRunningNodes = (treeList, runningNodesList) => {\n  return treeList.map(elem => {\n    // Only update the status of nodes, not containers\n    if (elem.status) {\n      if (runningNodesList.includes(elem.nestedName)) {\n        return { ...elem, status: \"running\" };\n      } else {\n        return { ...elem, status: \"stopped\" };\n      }\n    } else {\n      return elem;\n    }\n  });\n};\n\n// This will remove the deleted container from the treeList and its respective children\nexport const removeDeleteContainer = (treeList, id) => {\n  // Get the id of the Container to remove\n  const deleteIndex = treeList.findIndex(elem => elem.id === id);\n  treeList.splice(deleteIndex, 1);\n  // Remove children: find all children with parentId that is the id\n  for (let i = 0; i < treeList.length; i++) {\n    if (treeList[i].parentId === id) {\n      removeDeleteContainer(treeList, treeList[i].id);\n    }\n  }\n};\n\n// Detects if there are loops within nested containers\n// Returns true if it finds a loop, false otherwise\nexport const detectContainerLoop = (treeList, parentId, flowId) => {\n  // If first level there are no loops\n  if (parentId === 0) {\n    return false;\n  }\n  // index of container to add\n  let flowIndex = treeList.findIndex(elem => elem.id === parentId);\n  let currentFlow = treeList[flowIndex];\n  // Stop when reaches the root of the tree\n  while (currentFlow.parentId) {\n    // get the parentId of the current container\n    const parentId = currentFlow.parentId;\n    // get the index of that parent in the array\n    flowIndex = treeList.findIndex(elem => elem.id === parentId);\n    currentFlow = treeList[flowIndex];\n    if (currentFlow.flowId === flowId) {\n      console.error(\"Found Flow Loop :0\");\n      return true;\n    }\n  }\n  return false;\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport clsx from \"clsx\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport { AutoSizer, Column, Table } from \"react-virtualized\";\nimport { colorCoding } from \"../utils/Utils\";\n\nconst styles = theme => ({\n  flexContainer: {\n    display: \"flex\",\n    alignItems: \"center\",\n    boxSizing: \"border-box\"\n  },\n  table: {\n    // temporary right-to-left patch, waiting for\n    // // https://github.com/bvaughn/react-virtualized/issues/454\n    \"& .ReactVirtualized__Table__headerRow\": {\n      flip: false,\n      paddingRight: theme.direction === \"rtl\" ? \"0 !important\" : undefined\n    }\n  },\n  tableRow: {\n    cursor: \"pointer\"\n  },\n  tableRowHover: {\n    \"&:hover\": {\n      backgroundColor: theme.palette.grey[200]\n    }\n  },\n  tableCell: {\n    flexGrow: 1\n  },\n  flexColumn: {\n    flex: 1,\n    alignItems: \"center\"\n  },\n  noClick: {\n    cursor: \"initial\"\n  },\n  ...colorCoding\n});\n\nclass MuiVirtualizedTable extends React.PureComponent {\n  static defaultProps = {\n    headerHeight: 48,\n    rowHeight: 48\n  };\n\n  getRowClassName = ({ index }) => {\n    const { classes, onRowClick, data } = this.props;\n    const rowData = data[index];\n    return clsx(\n      classes.tableRow,\n      classes.flexContainer,\n      index !== -1 && classes[rowData.level],\n      {\n        [classes.tableRowHover]: index !== -1 && onRowClick != null\n      }\n    );\n  };\n\n  cellRenderer = render => ({ cellData, columnIndex }) => {\n    const { columns, classes, rowHeight, onRowClick } = this.props;\n    return (\n      <TableCell\n        component=\"div\"\n        className={clsx(classes.tableCell, classes.flexContainer, {\n          [classes.noClick]: onRowClick == null\n        })}\n        variant=\"body\"\n        style={{ height: rowHeight }}\n        align={\n          (columnIndex != null && columns[columnIndex].numeric) || false\n            ? \"right\"\n            : \"left\"\n        }\n      >\n        {render ? render(cellData) : cellData}\n      </TableCell>\n    );\n  };\n\n  headerRenderer = ({ label, columnIndex }) => {\n    const { headerHeight, columns, classes } = this.props;\n\n    return (\n      <TableCell\n        component=\"div\"\n        className={clsx(\n          classes.tableCell,\n          classes.flexContainer,\n          classes.noClick\n        )}\n        variant=\"head\"\n        style={{ height: headerHeight }}\n        align={columns[columnIndex].numeric || false ? \"right\" : \"left\"}\n      >\n        <span>{label}</span>\n      </TableCell>\n    );\n  };\n\n  render() {\n    const {\n      classes,\n      columns,\n      rowHeight,\n      headerHeight,\n      ...tableProps\n    } = this.props;\n    return (\n      <AutoSizer>\n        {({ height, width }) => (\n          <Table\n            height={height}\n            width={width}\n            rowHeight={rowHeight}\n            gridStyle={{\n              direction: \"inherit\"\n            }}\n            headerHeight={headerHeight}\n            className={classes.table}\n            {...tableProps}\n            rowClassName={this.getRowClassName}\n          >\n            {columns.map(({ dataKey, render, ...other }, index) => {\n              return (\n                <Column\n                  key={dataKey}\n                  headerRenderer={headerProps => {\n                    return this.headerRenderer({\n                      ...headerProps,\n                      columnIndex: index\n                    });\n                  }}\n                  flexGrow={dataKey === \"message\" ? 1 : undefined}\n                  className={classes.flexContainer}\n                  cellRenderer={this.cellRenderer(render)}\n                  dataKey={dataKey}\n                  {...other}\n                />\n              );\n            })}\n          </Table>\n        )}\n      </AutoSizer>\n    );\n  }\n}\n\nMuiVirtualizedTable.propTypes = {\n  classes: PropTypes.object.isRequired,\n  columns: PropTypes.arrayOf(\n    PropTypes.shape({\n      dataKey: PropTypes.string.isRequired,\n      label: PropTypes.string.isRequired,\n      numeric: PropTypes.bool,\n      width: PropTypes.number.isRequired\n    })\n  ).isRequired,\n  headerHeight: PropTypes.number,\n  onRowClick: PropTypes.func,\n  rowHeight: PropTypes.number\n};\n\nconst VirtualizedTable = withStyles(styles)(MuiVirtualizedTable);\n\nexport default function LogsTable(props) {\n  return (\n    <VirtualizedTable\n      rowCount={props.logsData.length}\n      rowGetter={({ index }) => props.logsData[index]}\n      data={props.logsData}\n      columns={props.columns.map(elem => props.columnList[elem])}\n    />\n  );\n}\n\nLogsTable.propTypes = {\n  columns: PropTypes.array,\n  columnList: PropTypes.object,\n  logsData: PropTypes.array,\n  height: PropTypes.number\n};\n\nLogsTable.defaultProps = {\n  columns: [],\n  columnList: {},\n  logsData: [],\n  height: 10\n};\n","import React, { Component } from \"react\";\nimport LogsFilterBar from \"./LogsFilterBar/LogsFilterBar\";\nimport \"./Logs.css\";\nimport { MasterDB } from \"mov-fe-lib-core\";\nimport {\n  getRequestLevels,\n  getRequestTags,\n  getRequestMessage,\n  filterByFromToDates,\n  findsUniqueKey,\n  getJustDateFromServer,\n  getJustTimeFromServer\n} from \"./utils/Utils\";\nimport LogsTable from \"./LogsTable/LogsTable\";\nimport { _isEqual } from \"lodash/isEqual\";\nimport PropTypes from \"prop-types\";\n\nclass Logs extends Component {\n  state = {\n    selectedRobots: [],\n    levels: [\"INFO\", \"ERROR\"],\n    limit: 10,\n    logsData: [],\n    messageRegex: \"\",\n    selectedFromDate: null,\n    selectedToDate: null,\n    columns: [\"Time\", \"Robot\", \"Message\"],\n    tags: [{ key: 0, label: \"ui\" }],\n    height: 0, //LogsTable height\n    levelsList: [\n      { value: \"INFO\", label: \"Robot Status\" },\n      { value: \"ERROR\", label: \"Alerts\" }\n    ]\n  };\n  logsTimeout = undefined;\n\n  simpleLevelsList = [\n    { value: \"INFO\", label: \"Robot Status\" },\n    { value: \"ERROR\", label: \"Alerts\" }\n  ];\n\n  advancedLevelsList = [\n    { value: \"INFO\", label: \"Info\" },\n    { value: \"WARNING\", label: \"Warnings\" },\n    { value: \"DEBUG\", label: \"Debug\" },\n    { value: \"ERROR\", label: \"Error\" },\n    { value: \"CRITICAL\", label: \"Critical\" }\n  ];\n\n  resizeHandler() {\n    const height = this.divElement.clientHeight;\n    this.setState({ height });\n  }\n\n  componentDidMount() {\n    this.setSelectedRobots(\n      this.props.robotsData.map(elem => ({ ...elem, isSelected: true }))\n    );\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (_isEqual(prevProps.robotsData, this.props.robotsData)) return;\n    this.setSelectedRobots(\n      this.props.robotsData.map(elem => ({ ...elem, isSelected: true }))\n    );\n  }\n\n  componentWillUnmount() {\n    if (this.logsTimeout) {\n      clearTimeout(this.logsTimeout);\n    }\n  }\n\n  // This function is responsible to check/unckeck the list of robots\n  updateRobotSelection = robotId => {\n    const selectedRobots = [...this.state.selectedRobots];\n    const updateRobot =\n      selectedRobots[selectedRobots.findIndex(elem => elem.id === robotId)];\n    updateRobot.isSelected = !updateRobot.isSelected;\n    this.setState({ selectedRobots });\n  };\n\n  setSelectedRobots = selectedRobots => {\n    this.setState({ selectedRobots });\n    this.getLogs(selectedRobots);\n  };\n\n  getLogs = async robots => {\n    await Promise.all(\n      robots\n        .filter(robot => robot.robotState !== this.props.robotStates.off) // If robot is offline doesn't bother making the request\n        .filter(robot => robot.isSelected)\n        .map(robot => this.getRobotLogData(robot))\n    ).then(dataArrays => {\n      this.setState(prevState => {\n        const finalArray = dataArrays.reduce((all, dataArray) => {\n          dataArray && dataArray.forEach(data => all.push(data));\n          return all;\n        }, []);\n        this.logsTimeout = setTimeout(\n          this.getLogs,\n          3000,\n          prevState.selectedRobots\n        );\n        return { logsData: finalArray.sort((a, b) => b.time - a.time) };\n      });\n    });\n  };\n\n  getRobotLogData = robotSelected => {\n    return new Promise((re, rej) => {\n      // Failsafe timer to prevent the promise all from hanging\n      const timeoutHandle = setTimeout(() => {\n        console.error(\"MOV.AI: One of the promises reached timeout\");\n        re([]);\n      }, 2000);\n\n      const dynamicURL = `http://${\n        robotSelected.ip\n      }/api/v1/logs/?${getRequestLevels(\n        this.state.levels,\n        this.state.levelsList\n      )}&limit=${this.state.limit}${getRequestTags(\n        this.state.tags\n      )}${getRequestMessage(this.state.messageRegex)}`;\n\n      MasterDB.get(dynamicURL, (res, e) => {\n        if (res === undefined) rej();\n        re(res.data);\n        clearTimeout(timeoutHandle);\n      });\n    }).catch(() => console.log(\"Failed getRobotLogData\"));\n  };\n\n  render() {\n    return (\n      <div\n        style={{\n          width: \"100%\",\n          height: \"100%\",\n          display: \"flex\",\n          flexDirection: \"column\"\n        }}\n      >\n        <div\n          style={{\n            flexGrow: \"1\",\n            height: \"100%\",\n            display: \"flex\",\n            flexDirection: \"column\"\n          }}\n        >\n          <LogsFilterBar\n            selectedRobots={this.state.selectedRobots}\n            updateRobotSelection={this.updateRobotSelection}\n            levels={this.state.levels}\n            levelsList={this.state.levelsList}\n            handleLevels={event => {\n              this.setState({ levels: event.target.value });\n            }}\n            limit={this.state.limit}\n            handleLimit={evt => {\n              if (evt.target.value === \"\") {\n                this.setState({ limit: 0 });\n              } else {\n                this.setState({ limit: evt.target.value });\n              }\n            }}\n            columns={this.state.columns}\n            columnList={this.props.columnList}\n            handleColumns={event => {\n              this.setState({ columns: event.target.value });\n            }}\n            tags={this.state.tags}\n            handleAddTag={tagText => {\n              const { tags } = this.state;\n              // Don't add tag if it's empty or duplicate\n              if (\n                tagText !== \"\" &&\n                tags.findIndex(elem => elem.label === tagText) < 0\n              ) {\n                tags.push({\n                  key: findsUniqueKey(tags, \"key\"),\n                  label: tagText\n                });\n                this.setState({ tags });\n              }\n            }}\n            handleDeleteTag={tagToDelete => {\n              const { tags } = this.state;\n              const filteredTags = tags.filter(\n                tag => tag.key !== tagToDelete.key\n              );\n              this.setState({ tags: filteredTags });\n            }}\n            messageRegex={this.state.messageRegex}\n            handleMessageRegex={text => this.setState({ messageRegex: text })}\n            selectedFromDate={this.state.selectedFromDate}\n            selectedToDate={this.state.selectedToDate}\n            handleDateChange={(newDate, keyToChange) => {\n              this.setState({ [keyToChange]: newDate });\n            }}\n            advancedMode={this.state.advancedMode}\n            handleAdvancedMode={evt => {\n              // Toggle advanced mode, set tag to ui by default and change the levels\n              this.setState({\n                advancedMode: !this.state.advancedMode,\n                levelsList: this.state.advancedMode\n                  ? this.simpleLevelsList\n                  : this.advancedLevelsList,\n                tags: this.state.advancedMode\n                  ? [{ key: 0, label: \"ui\" }]\n                  : this.state.tags\n              });\n            }}\n          ></LogsFilterBar>\n          <div\n            ref={divElement => {\n              this.divElement = divElement;\n            }}\n            style={{\n              flexGrow: 1,\n              overflowY: \"auto\",\n              minHeight: 0,\n              height: \"1px\"\n            }}\n          >\n            <LogsTable\n              columns={this.state.columns}\n              columnList={this.props.columnList}\n              logsData={filterByFromToDates(\n                this.state.logsData,\n                this.state.selectedFromDate,\n                this.state.selectedToDate\n              )}\n              height={this.state.height}\n              levelsList={this.state.levelsList}\n            ></LogsTable>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nLogs.propTypes = {\n  robotsData: PropTypes.array,\n  robotStates: PropTypes.object,\n  columnList: PropTypes.object\n};\nLogs.defaultProps = {\n  robotsData: [\n    {\n      name: \"robot\",\n      id: \"032cf6207ff34ad0a68cc45034f61b41\",\n      timestamp: 1604334778.6494586,\n      robotState: \"okay\",\n      battery: 78,\n      ip: \"127.0.0.1\"\n    },\n    {\n      name: \"robot_test\",\n      id: \"4df900e30cb44adba33ae74bb2596d88\",\n      timestamp: 1603969723.997914,\n      robotState: \"off\",\n      battery: 22,\n      ip: \"127.0.0.1\"\n    }\n  ],\n  robotStates: {\n    error: \"error\",\n    temp: \"temp\",\n    okay: \"okay\",\n    off: \"off\"\n  },\n  columnList: {\n    Date: {\n      label: \"Date\",\n      dataKey: \"time\",\n      width: 100,\n      render: time => getJustDateFromServer(time)\n    },\n    Time: {\n      label: \"Time\",\n      dataKey: \"time\",\n      width: 100,\n      render: time => getJustTimeFromServer(time)\n    },\n    Level: {\n      label: \"Level\",\n      dataKey: \"level\",\n      width: 100\n    },\n    Module: {\n      label: \"Module\",\n      dataKey: \"module\",\n      width: 100\n    },\n    Robot: {\n      label: \"Robot\",\n      dataKey: \"robot\",\n      width: 100\n    },\n    Message: {\n      label: \"Message\",\n      dataKey: \"message\",\n      width: 100\n    }\n  }\n};\n\nexport default Logs;\n","import React, { Component } from \"react\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Button from \"@material-ui/core/Button\";\nimport Grid from \"@material-ui/core/Grid\";\nimport defaultLogo from \"./movai_red.svg\";\nimport Paper from \"@material-ui/core/Paper\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport FormHelperText from \"@material-ui/core/FormHelperText\";\nimport Input from \"@material-ui/core/Input\";\nimport InputLabel from \"@material-ui/core/InputLabel\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport { Authentication } from \"mov-fe-lib-core\";\nimport PropTypes from \"prop-types\";\n\nconst styles = theme => ({\n  root: {\n    padding: theme.spacing(4, 4),\n    borderRadius: 10\n  }\n});\n\nclass LoginForm extends Component {\n  state = {\n    username: \"\",\n    password: \"\",\n    remember: false,\n    error: false,\n    errorMessage: \"\"\n  };\n\n  sendCreds = async () => {\n    try {\n      const apiResponse = await Authentication.login(\n        this.state.username,\n        this.state.password,\n        this.state.remember\n      );\n      // If successfully logged in\n      if (!apiResponse.error) {\n        this.props.setLoggedIn(true);\n      } else {\n        // Show the error in red\n        this.setState({\n          error: true,\n          errorMessage: apiResponse.error\n        });\n      }\n    } catch (e) {\n      this.setState({\n        error: true,\n        errorMessage: e\n      });\n    }\n  };\n\n  render() {\n    const { classes, logo } = this.props;\n\n    return (\n      <Grid\n        style={{ paddingTop: \"5%\" }}\n        container\n        direction=\"column\"\n        alignItems=\"center\"\n        justify=\"space-evenly\"\n      >\n        <Paper elevation={10} className={classes.root}>\n          <Grid item>\n            <img\n              src={logo ? logo : defaultLogo}\n              className=\"center\"\n              alt=\"logo\"\n              style={{\n                display: \"block\",\n                marginLeft: \"auto\",\n                marginRight: \"auto\",\n                width: \"50%\"\n              }}\n            />\n          </Grid>\n          <Grid>\n            <Typography align=\"center\" variant=\"subtitle1\" gutterBottom>\n              <FormControl\n                className={classes.formControl}\n                error={this.state.error}\n              >\n                <InputLabel htmlFor=\"component-error\">Username</InputLabel>\n                <Input\n                  id=\"component-error\"\n                  value={this.state.username}\n                  aria-describedby=\"component-error-text\"\n                  onChange={event =>\n                    this.setState({ username: event.target.value })\n                  }\n                />\n              </FormControl>\n            </Typography>\n          </Grid>\n          <Grid>\n            <Typography align=\"center\" variant=\"subtitle1\" gutterBottom>\n              <FormControl\n                className={classes.formControl}\n                error={this.state.error}\n              >\n                <InputLabel htmlFor=\"component-error\">Password</InputLabel>\n                <Input\n                  id=\"component-error\"\n                  type=\"password\"\n                  value={this.state.password}\n                  aria-describedby=\"component-error-text\"\n                  onChange={event =>\n                    this.setState({ password: event.target.value })\n                  }\n                  onKeyPress={event => {\n                    if (event.key === \"Enter\") {\n                      this.sendCreds();\n                    }\n                  }}\n                />\n                {this.state.error && (\n                  <FormHelperText id=\"component-error-text\">\n                    {this.state.errorMessage}\n                  </FormHelperText>\n                )}\n              </FormControl>\n            </Typography>\n          </Grid>\n          <Grid>\n            <Typography align=\"center\" gutterBottom>\n              <Button onClick={() => this.sendCreds()}>Login</Button>\n            </Typography>\n          </Grid>\n        </Paper>\n      </Grid>\n    );\n  }\n}\n\nLoginForm.propTypes = {\n  logs: PropTypes.any, // expects a svg element\n  setLoggedIn: PropTypes.func\n};\n\nLoginForm.defaultProps = {\n  setLoggedIn: loggedIn => console.log(loggedIn)\n};\n\nexport default withStyles(styles, { withTheme: true })(LoginForm);\n","import React from \"react\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Menu from \"@material-ui/core/Menu\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport SettingsIcon from \"@material-ui/icons/Settings\";\nimport PropTypes from \"prop-types\";\nimport Toggle from \"./Toggle\";\nimport { makeStyles, useTheme } from \"@material-ui/core/styles\";\nimport Divider from \"@material-ui/core/Divider\";\nimport { Typography } from \"@material-ui/core\";\n\nconst useStyles = makeStyles(theme => {\n  return {\n    menuItemSpacing: {\n      fontSize: \"18px\",\n      minHeight: \"18px\",\n      padding: theme.spacing(1.25, 2),\n      ...theme.cursorDefault\n    },\n    profileMenuFooter: {\n      fontSize: \"14px\",\n      textAlign: \"end\"\n    }\n  };\n});\n\nconst ProfileMenu = props => {\n  const classes = useStyles();\n  const [anchorEl, setAnchorEl] = React.useState(null);\n  const theme = useTheme();\n\n  const handleClick = event => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  return (\n    <div>\n      <IconButton\n        aria-controls=\"simple-menu\"\n        aria-haspopup=\"true\"\n        onClick={handleClick}\n      >\n        <SettingsIcon />\n      </IconButton>\n      <Menu\n        id=\"simple-menu\"\n        anchorEl={anchorEl}\n        keepMounted\n        open={Boolean(anchorEl)}\n        onClose={handleClose}\n      >\n        <Typography variant=\"body1\">\n          <div className={classes.menuItemSpacing}>\n            {props.welcomeLabel}, {props.userName}\n          </div>\n          <Divider variant=\"middle\" />\n          {props.extraItems?.map(item => (\n            <MenuItem\n              className={classes.menuItemSpacing}\n              onClick={() => item.func}\n            >\n              {item.label}\n            </MenuItem>\n          ))}\n          <div className={classes.menuItemSpacing}>\n            {props.darkThemeLabel}\n            <Toggle\n              onToggle={() => props.handleToggleTheme()}\n              toggle={props.isDarkTheme}\n              // size={\"small\"}\n            ></Toggle>\n          </div>\n          <MenuItem\n            className={classes.menuItemSpacing}\n            onClick={props.handleLogout}\n          >\n            {props.logoutLabel}\n          </MenuItem>\n          <Divider variant=\"middle\" />\n          <div\n            className={\n              classes.menuItemSpacing + \" \" + classes.profileMenuFooter\n            }\n          >\n            {props.version}\n          </div>\n        </Typography>\n      </Menu>\n    </div>\n  );\n};\nProfileMenu.propTypes = {\n  welcomeLabel: PropTypes.string,\n  userName: PropTypes.string,\n  darkThemeLabel: PropTypes.string,\n  logoutLabel: PropTypes.string,\n  version: PropTypes.string,\n  extraItems: PropTypes.array,\n  handleLogout: PropTypes.func\n  // interface ExtraItem {\n  //     func: (e: event) => boolean,\n  //     label: string,\n  // }\n  // extraItems?: ExtraItem[]\n};\n\nProfileMenu.defaultProps = {\n  welcomeLabel: \"Hello\",\n  userName: \"User\",\n  darkThemeLabel: \"Dark Theme\",\n  logoutLabel: \"Logout\",\n  version: \"v.1.1.2020\",\n  extraItems: [],\n  handleLogout: () => console.log(\"handle\")\n};\n\nexport default ProfileMenu;\n"],"sourceRoot":""}