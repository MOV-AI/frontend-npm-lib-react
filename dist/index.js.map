{"version":3,"sources":["webpack://MovaiReact/webpack/universalModuleDefinition","webpack://MovaiReact/webpack/bootstrap","webpack://MovaiReact/./index.js","webpack://MovaiReact/./src/Components/Logs/Logs.css","webpack://MovaiReact/./src/Components/Snackbar/Snackbar.css","webpack://MovaiReact/./node_modules/css-loader/dist/runtime/api.js","webpack://MovaiReact/./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack://MovaiReact/./node_modules/timers-browserify/main.js","webpack://MovaiReact/(webpack)/buildin/global.js","webpack://MovaiReact/./resources/alert-error.png","webpack://MovaiReact/./src/Components/Breadcrumb.js","webpack://MovaiReact/./src/Components/Button.js","webpack://MovaiReact/./src/Components/Collapse.js","webpack://MovaiReact/./src/Components/ContextMenu.js","webpack://MovaiReact/./src/Components/Drawer.js","webpack://MovaiReact/./src/Components/HOCs/withAuthentication.js","webpack://MovaiReact/./src/Components/HOCs/withOfflineValidation.js","webpack://MovaiReact/./src/Components/LoginForm/LoginForm.js","webpack://MovaiReact/./src/Components/LoginForm/movai_red.svg","webpack://MovaiReact/./src/Components/Logs/Logs.css?4c9f","webpack://MovaiReact/./src/Components/Logs/Logs.js","webpack://MovaiReact/./src/Components/Logs/LogsFilterBar/FiltersIcon/FiltersIcon.js","webpack://MovaiReact/./src/Components/Logs/LogsFilterBar/LogsFilterBar.js","webpack://MovaiReact/./src/Components/Logs/LogsTable/LogsTable.js","webpack://MovaiReact/./src/Components/Logs/utils/Utils.js","webpack://MovaiReact/./src/Components/Modal/AbstractModal.js","webpack://MovaiReact/./src/Components/Modal/ConfirmAlertModal.js","webpack://MovaiReact/./src/Components/Modal/RobotLogModal.js","webpack://MovaiReact/./src/Components/Modal/SelectScopeModal.js","webpack://MovaiReact/./src/Components/ProfileMenu.js","webpack://MovaiReact/./src/Components/SearchInput.js","webpack://MovaiReact/./src/Components/Select.js","webpack://MovaiReact/./src/Components/Snackbar/Alert/Alert.js","webpack://MovaiReact/./src/Components/Snackbar/Alert/svg-icons/CreateSVGIcon.js","webpack://MovaiReact/./src/Components/Snackbar/Alert/svg-icons/svgIcons.js","webpack://MovaiReact/./src/Components/Snackbar/Snackbar.css?c276","webpack://MovaiReact/./src/Components/Snackbar/Snackbar.js","webpack://MovaiReact/./src/Components/Table.js","webpack://MovaiReact/./src/Components/Tabs.js","webpack://MovaiReact/./src/Components/Text.js","webpack://MovaiReact/./src/Components/Toggle.js","webpack://MovaiReact/./src/Components/Tree/BasicVirtualizedTree.js","webpack://MovaiReact/./src/Components/Tree/TreeSearch.js","webpack://MovaiReact/./src/Components/VerticalBar.js","webpack://MovaiReact/./src/Components/Viewer/Actions/Action.js","webpack://MovaiReact/./src/Components/Viewer/Actions/AddKeyPointAction.js","webpack://MovaiReact/./src/Components/Viewer/Actions/AddMapAction.js","webpack://MovaiReact/./src/Components/Viewer/Actions/AddMeshAction.js","webpack://MovaiReact/./src/Components/Viewer/Actions/BoxRegionAction.js","webpack://MovaiReact/./src/Components/Viewer/Actions/DragObjectsAction.js","webpack://MovaiReact/./src/Components/Viewer/Actions/DrawGraphAction.js","webpack://MovaiReact/./src/Components/Viewer/Actions/DrawPathAction.js","webpack://MovaiReact/./src/Components/Viewer/Actions/MeasureAction.js","webpack://MovaiReact/./src/Components/Viewer/Actions/MouseKeysAction.js","webpack://MovaiReact/./src/Components/Viewer/Actions/NavigationPreviewAction.js","webpack://MovaiReact/./src/Components/Viewer/Actions/OrbitAction.js","webpack://MovaiReact/./src/Components/Viewer/Actions/PolygonRegionAction.js","webpack://MovaiReact/./src/Components/Viewer/Actions/RobotAction.js","webpack://MovaiReact/./src/Components/Viewer/AssetsManager/AssetsManager.js","webpack://MovaiReact/./src/Components/Viewer/AssetsManager/MapLoader.js","webpack://MovaiReact/./src/Components/Viewer/BaseViewer/BaseViewer.js","webpack://MovaiReact/./src/Components/Viewer/Graph/Graph.js","webpack://MovaiReact/./src/Components/Viewer/MainView/MainViewActions.js","webpack://MovaiReact/./src/Components/Viewer/MainView/MainViewRetriever.js","webpack://MovaiReact/./src/Components/Viewer/MainView/MeshSelector.js","webpack://MovaiReact/./src/Components/Viewer/MainView/NodeItemFactoryMap.js","webpack://MovaiReact/./src/Components/Viewer/Math/Mat3.js","webpack://MovaiReact/./src/Components/Viewer/Math/Vec2.js","webpack://MovaiReact/./src/Components/Viewer/Math/Vec3.js","webpack://MovaiReact/./src/Components/Viewer/NodeItem/AssetNodeItem.js","webpack://MovaiReact/./src/Components/Viewer/NodeItem/Box.js","webpack://MovaiReact/./src/Components/Viewer/NodeItem/BoxRegion.js","webpack://MovaiReact/./src/Components/Viewer/NodeItem/GlobalRef.js","webpack://MovaiReact/./src/Components/Viewer/NodeItem/GraphItem.js","webpack://MovaiReact/./src/Components/Viewer/NodeItem/KeyPoint.js","webpack://MovaiReact/./src/Components/Viewer/NodeItem/Map.js","webpack://MovaiReact/./src/Components/Viewer/NodeItem/Mesh.js","webpack://MovaiReact/./src/Components/Viewer/NodeItem/NavigationPreviewItem.js","webpack://MovaiReact/./src/Components/Viewer/NodeItem/NodeItem.js","webpack://MovaiReact/./src/Components/Viewer/NodeItem/Path.js","webpack://MovaiReact/./src/Components/Viewer/NodeItem/PointCloud.js","webpack://MovaiReact/./src/Components/Viewer/NodeItem/PolygonRegion.js","webpack://MovaiReact/./src/Components/Viewer/NodeItem/Robot.js","webpack://MovaiReact/./src/Components/Viewer/NodeItem/Wall.js","webpack://MovaiReact/./src/Components/Viewer/SceneViewer.js","webpack://MovaiReact/./src/Components/Viewer/TreeObject/TreeNode.js","webpack://MovaiReact/./src/Components/Viewer/TreeObject/TreeObject.js","webpack://MovaiReact/./src/Components/Viewer/Util3d/CameraBuilder.js","webpack://MovaiReact/./src/Components/Viewer/Util3d/DirectionalLightBuilder.js","webpack://MovaiReact/./src/Components/Viewer/Util3d/GizmoManagerBuilder.js","webpack://MovaiReact/./src/Components/Viewer/Util3d/GroundBuilder.js","webpack://MovaiReact/./src/Components/Viewer/Util3d/PositionalLightBuilder.js","webpack://MovaiReact/./src/Components/Viewer/Util3d/ReferentialBuilder.js","webpack://MovaiReact/./src/Components/Viewer/Util3d/SelectionPlaceHolder.js","webpack://MovaiReact/./src/Components/Viewer/Util3d/TooltipBuilder.js","webpack://MovaiReact/./src/Components/Viewer/Util3d/Util3d.js","webpack://MovaiReact/./src/Components/Viewer/Utils/Animator.js","webpack://MovaiReact/./src/Components/Viewer/Utils/AnnotationManager.js","webpack://MovaiReact/./src/Components/Viewer/Utils/AssetsTypesFactory.js","webpack://MovaiReact/./src/Components/Viewer/Utils/Clipboard.js","webpack://MovaiReact/./src/Components/Viewer/Utils/Constants.js","webpack://MovaiReact/./src/Components/Viewer/Utils/DefaultMouseEvents.js","webpack://MovaiReact/./src/Components/Viewer/Utils/DefaultScene.js","webpack://MovaiReact/./src/Components/Viewer/Utils/MaterialCache.js","webpack://MovaiReact/./src/Components/Viewer/Utils/MeshCache.js","webpack://MovaiReact/./src/Components/Viewer/Utils/MeshLoader.js","webpack://MovaiReact/./src/Components/Viewer/Utils/SceneServerUtils.js","webpack://MovaiReact/./src/Components/Viewer/Utils/Statistics.js","webpack://MovaiReact/./src/Components/Viewer/Utils/TreeServerUtils.js","webpack://MovaiReact/./src/Components/Viewer/Utils/Utils.js","webpack://MovaiReact/./src/i18n/i18n.js","webpack://MovaiReact/./src/styles/Style.js","webpack://MovaiReact/./src/styles/Themes.js","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/assertThisInitialized\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/asyncToGenerator\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/classCallCheck\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/classPrivateFieldGet\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/createClass\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/defineProperty\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/extends\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/get\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/getPrototypeOf\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/inherits\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/objectWithoutProperties\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/possibleConstructorReturn\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/slicedToArray\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/taggedTemplateLiteral\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/toArray\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/toConsumableArray\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/typeof\"","webpack://MovaiReact/external \"@babel/runtime/regenerator\"","webpack://MovaiReact/external \"@babylonjs/core\"","webpack://MovaiReact/external \"@babylonjs/core/Debug/debugLayer\"","webpack://MovaiReact/external \"@babylonjs/core/Maths/math\"","webpack://MovaiReact/external \"@babylonjs/gui\"","webpack://MovaiReact/external \"@babylonjs/gui/2D\"","webpack://MovaiReact/external \"@babylonjs/inspector\"","webpack://MovaiReact/external \"@babylonjs/loaders\"","webpack://MovaiReact/external \"@date-io/date-fns\"","webpack://MovaiReact/external \"@material-ui/core\"","webpack://MovaiReact/external \"@material-ui/core/Avatar\"","webpack://MovaiReact/external \"@material-ui/core/Backdrop\"","webpack://MovaiReact/external \"@material-ui/core/Box\"","webpack://MovaiReact/external \"@material-ui/core/Breadcrumbs\"","webpack://MovaiReact/external \"@material-ui/core/Button\"","webpack://MovaiReact/external \"@material-ui/core/Checkbox\"","webpack://MovaiReact/external \"@material-ui/core/Chip\"","webpack://MovaiReact/external \"@material-ui/core/CircularProgress\"","webpack://MovaiReact/external \"@material-ui/core/Collapse\"","webpack://MovaiReact/external \"@material-ui/core/Divider\"","webpack://MovaiReact/external \"@material-ui/core/Drawer\"","webpack://MovaiReact/external \"@material-ui/core/FormControl\"","webpack://MovaiReact/external \"@material-ui/core/FormControlLabel\"","webpack://MovaiReact/external \"@material-ui/core/FormHelperText\"","webpack://MovaiReact/external \"@material-ui/core/Grid\"","webpack://MovaiReact/external \"@material-ui/core/IconButton\"","webpack://MovaiReact/external \"@material-ui/core/Input\"","webpack://MovaiReact/external \"@material-ui/core/InputAdornment\"","webpack://MovaiReact/external \"@material-ui/core/InputBase\"","webpack://MovaiReact/external \"@material-ui/core/InputLabel\"","webpack://MovaiReact/external \"@material-ui/core/List\"","webpack://MovaiReact/external \"@material-ui/core/ListItemText\"","webpack://MovaiReact/external \"@material-ui/core/Menu\"","webpack://MovaiReact/external \"@material-ui/core/MenuItem\"","webpack://MovaiReact/external \"@material-ui/core/Paper\"","webpack://MovaiReact/external \"@material-ui/core/Select\"","webpack://MovaiReact/external \"@material-ui/core/Switch\"","webpack://MovaiReact/external \"@material-ui/core/Tab\"","webpack://MovaiReact/external \"@material-ui/core/TableCell\"","webpack://MovaiReact/external \"@material-ui/core/Tabs\"","webpack://MovaiReact/external \"@material-ui/core/TextField\"","webpack://MovaiReact/external \"@material-ui/core/Typography\"","webpack://MovaiReact/external \"@material-ui/core/colors\"","webpack://MovaiReact/external \"@material-ui/core/styles\"","webpack://MovaiReact/external \"@material-ui/core/styles/colorManipulator\"","webpack://MovaiReact/external \"@material-ui/core/utils\"","webpack://MovaiReact/external \"@material-ui/icons/Add\"","webpack://MovaiReact/external \"@material-ui/icons/AddBox\"","webpack://MovaiReact/external \"@material-ui/icons/ArrowDownward\"","webpack://MovaiReact/external \"@material-ui/icons/Chat\"","webpack://MovaiReact/external \"@material-ui/icons/Check\"","webpack://MovaiReact/external \"@material-ui/icons/ChevronLeft\"","webpack://MovaiReact/external \"@material-ui/icons/ChevronRight\"","webpack://MovaiReact/external \"@material-ui/icons/Clear\"","webpack://MovaiReact/external \"@material-ui/icons/Close\"","webpack://MovaiReact/external \"@material-ui/icons/DeleteOutline\"","webpack://MovaiReact/external \"@material-ui/icons/Edit\"","webpack://MovaiReact/external \"@material-ui/icons/ExpandMore\"","webpack://MovaiReact/external \"@material-ui/icons/FilterList\"","webpack://MovaiReact/external \"@material-ui/icons/FirstPage\"","webpack://MovaiReact/external \"@material-ui/icons/Label\"","webpack://MovaiReact/external \"@material-ui/icons/LastPage\"","webpack://MovaiReact/external \"@material-ui/icons/NavigateNext\"","webpack://MovaiReact/external \"@material-ui/icons/Remove\"","webpack://MovaiReact/external \"@material-ui/icons/SaveAlt\"","webpack://MovaiReact/external \"@material-ui/icons/Schedule\"","webpack://MovaiReact/external \"@material-ui/icons/Search\"","webpack://MovaiReact/external \"@material-ui/icons/Settings\"","webpack://MovaiReact/external \"@material-ui/icons/Today\"","webpack://MovaiReact/external \"@material-ui/icons/ViewColumn\"","webpack://MovaiReact/external \"@material-ui/icons/ViewModule\"","webpack://MovaiReact/external \"@material-ui/icons/Warning\"","webpack://MovaiReact/external \"@material-ui/lab/Alert\"","webpack://MovaiReact/external \"@material-ui/pickers\"","webpack://MovaiReact/external \"@material-ui/styles\"","webpack://MovaiReact/external \"clsx\"","webpack://MovaiReact/external \"earcut\"","webpack://MovaiReact/external \"fontsource-open-sans\"","webpack://MovaiReact/external \"fontsource-roboto\"","webpack://MovaiReact/external \"i18next\"","webpack://MovaiReact/external \"jwt-decode\"","webpack://MovaiReact/external \"lodash.isequal\"","webpack://MovaiReact/external \"lodash/capitalize\"","webpack://MovaiReact/external \"lodash/cloneDeep\"","webpack://MovaiReact/external \"lodash/debounce\"","webpack://MovaiReact/external \"lodash/get\"","webpack://MovaiReact/external \"lodash/isEmpty\"","webpack://MovaiReact/external \"lodash/isEqual\"","webpack://MovaiReact/external \"lodash/set\"","webpack://MovaiReact/external \"lodash/uniqBy\"","webpack://MovaiReact/external \"material-icons/css/material-icons.css\"","webpack://MovaiReact/external \"material-table\"","webpack://MovaiReact/external \"monet\"","webpack://MovaiReact/external \"mov-fe-lib-core\"","webpack://MovaiReact/external \"prop-types\"","webpack://MovaiReact/external \"react\"","webpack://MovaiReact/external \"react-dom\"","webpack://MovaiReact/external \"react-i18next\"","webpack://MovaiReact/external \"react-resize-detector\"","webpack://MovaiReact/external \"react-virtualized\"","webpack://MovaiReact/external \"react-virtualized-tree\"","webpack://MovaiReact/external \"react-virtualized-tree/lib/main.css\"","webpack://MovaiReact/external \"react-virtualized/styles.css\"","webpack://MovaiReact/external \"roslib\"","webpack://MovaiReact/external \"setimmediate\"","webpack://MovaiReact/external \"styled-components\""],"names":["useStyles","makeStyles","theme","root","marginTop","spacing","link","fontSize","fontWeight","fontFamily","cursor","textDecoration","lastLabel","Breadcrumb","props","classes","style","pathList","map","element","index","length","label","propTypes","PropTypes","array","defaultProps","console","log","Button","className","onClick","color","variant","size","startIcon","disabled","children","object","func","string","isRequired","node","bool","undefined","Collapse","React","useState","open","setOpen","useEffect","handleClickFactory","clickLambda","iconStyle","width","item","divided","ContextMenu","anchorEl","setAnchorEl","handleClick","event","currentTarget","handleClose","cloneElement","evt","Boolean","menuList","reduce","result","push","onClose","navigationList","lowerElement","backgroundColor","Drawer","anchor","ANCHOR","left","right","top","bottom","withAuthentication","Component","RECHECK_VALID_DELAY","firstRender","useRef","loggedIn","setLoggedIn","checkLogin","setCheckLogin","Authentication","now","Math","floor","Date","token","window","localStorage","getItem","exp","jwtDecode","expDelta","Error","setTimeout","error","handleLogOut","logout","handleFirstRender","current","state","alert","position","withOfflineValidation","isConnected","setConnected","showSuccessAlert","setSuccessAlert","validator","setValidator","loading","setLoading","_validator","MasterDB","offlineValidation","onOnline","onOffline","retryConnection","then","styles","padding","borderRadius","LoginForm","username","password","remember","errorMessage","capsLockOn","login","apiResponse","setState","key","capsLock","getModifierState","logo","paddingTop","defaultLogo","display","marginLeft","marginRight","formControl","target","value","checkCapsLock","sendCreds","logs","any","withStyles","withTheme","UI_TAG","tableContainer","flexGrow","minHeight","overflow","Logs","selectedRobots","levels","limit","logsData","messageRegex","selectedFromDate","selectedToDate","columns","tags","advancedMode","height","levelsList","createRef","robotsData","filter","robot","ip","setSelectedRobots","elem","isSelected","robotId","updateRobot","findIndex","id","clearTimeout","logsTimeout","getLogs","robots","Promise","all","robotState","robotStates","off","getRobotLogData","dataArrays","prevState","finalArray","dataArray","forEach","data","sort","a","b","time","robotSelected","re","rej","timeoutHandle","dynamicURL","getRequestLevels","getRequestTags","getRequestMessage","get","res","e","logModal","rowData","divElement","clientHeight","updateSelectedRobots","prevProps","_isEqual","flexDirection","updateRobotSelection","columnList","Object","keys","includes","tagText","findsUniqueKey","tagToDelete","filteredTags","tag","text","newDate","keyToChange","simpleLevelsList","advancedLevelsList","filterByFromToDates","onRowClick","name","timestamp","battery","temp","okay","dataKey","render","getJustDateFromServer","Time","getJustTimeFromServer","Level","Module","Robot","Message","button","margin","palette","primary","main","borderColor","iconActive","fade","buttonApplyFilters","background","fontStyle","dark","icon","checkbox","limitText","StyledMenu","paper","boxShadow","vertical","horizontal","FilterIcon","otherFilters","t","tooltip","title","isActive","input","flex","paddingLeft","searchText","minWidth","addTagText","toggleContainer","tagsContainer","tagsList","chip","maxWidth","filtersButton","columnsFilter","iconButton","LogsFilterBar","setTagText","handleRobotChange","arrayEvent","selectedId","getRobotSelector","paddingRight","selected","selectedNames","join","MenuProps","robotIndex","getSearchInput","handleMessageRegex","startAdornment","endAdornment","getLevels","handleLevels","labels","level","indexOf","getTags","isAdvancedMode","keyCode","handleAddTag","handleDeleteTag","getTimeFilters","DateFnsUtils","handleDateChange","getSettings","handleAdvancedMode","handleLimit","shrink","handleColumns","_get","column","ITEM_HEIGHT","ITEM_PADDING_TOP","PaperProps","maxHeight","getContentAnchorEl","number","selectToDate","arePropsEqual","nextProps","memo","flexContainer","alignItems","boxSizing","table","flip","direction","tableRow","tableRowHover","tableCell","whiteSpace","textOverflow","flexColumn","noClick","colorCoding","MuiVirtualizedTable","rowHeight","headerHeight","tableProps","getRowClassName","clsx","cellRenderer","cellData","columnIndex","numeric","headerRenderer","other","headerProps","LogsTable","INFO","WARNING","DEBUG","ERROR","CRITICAL","keyName","k","j","levelsArray","Array","isArray","toLowerCase","tagsArray","_isEmpty","message","parsedMessageToUrl","replace","getTimeFromServer","serverTime","toLocaleString","toLocaleDateString","toLocaleTimeString","formatLogsData","stdout","binaryIndexOf","criteria","minIndex","maxIndex","currentIndex","currentElement","comparison","fromDate","toDate","lowerIndex","upperIndex","dateList","getTime","slice","addNestedName","nestedName","newName","updateRunningNodes","treeList","runningNodesList","status","removeDeleteContainer","deleteIndex","splice","i","parentId","detectContainerLoop","flowId","flowIndex","currentFlow","card","closeButton","textColor","AbstractModal","debounceSubmit","_debounce","onSubmit","onKeyPress","submit","cancel","onCancel","justifyContent","overflowY","marginBottom","hasSubmitButton","submitColor","i18n","submitText","hasCancelButton","cancelColor","cancelText","ConfirmAlertModal","breakWord","wordBreak","RobotLogModal","hasButton","alertButton","JSON","parse","action","service","module","buttonText","buttonAction","getRobotAlertAction","callback","cloudFunction","renderAlertInfo","SelectScopeModal","initialData","scope","setData","selectedWorkspace","setSelectedWorkspace","selectedScopeItem","setSelectedScopeItem","workSpaceList","setWorkSpaceList","isLoading","setIsLoading","scopeFilteredData","scopeList","Workspace","getAll","response","getAllData","filteredData","_cloneDeep","changeWorkspace","workspace","dataToSet","getDocs","sortedScopeItems","scopes","ref","localeCompare","url","requestScopeVersions","mapObj","indexToSet","isExpanded","_set","expanded","parents","versionList","versions","index2ndLevel","deepness","confirmNodeSelection","getModalTitle","vowels","pronoun","textAlign","paddingBottom","overflowX","zIndex","nodes","menuItemSpacing","cursorDefault","profileMenuFooter","ProfileMenu","welcomeLabel","userName","extraItems","darkThemeLabel","handleToggleTheme","isDarkTheme","cursorPointer","handleLogout","logoutLabel","version","search","shape","common","white","breakpoints","up","searchIcon","pointerEvents","inputRoot","inputInput","transition","transitions","create","SearchInput","searchInput","enableTimeout","timer","handleSearch","onChange","placeholder","setSearchInput","handleChange","Select","noneOption","inputProps","options","filledSuccess","filledInfo","filledWarning","filledError","opacity","defaultIconMapping","success","svgIcons","SuccessOutlined","warning","ReportProblemOutlined","ErrorOutline","info","InfoOutlined","Alert","closeText","iconMapping","role","severity","capitalize","Close","oneOf","CreateSVGIcon","path","fill","viewBox","ReactConfirmAlert","close","closeOnClickOutside","onClickOutside","isClickOutside","overlay","removeBodyClass","removeElementReconfirm","closeOnEscape","onKeypressEscape","isKeyCodeEscape","document","addEventListener","keyboardClose","autoClose","getElementById","autoHideDuration","removeEventListener","willUnmount","customUI","dataCustomUI","closable","dom","handleClickOverlay","renderCustomUI","createElementReconfirm","properties","divTarget","body","classList","add","createElement","appendChild","unmountComponentAtNode","parentNode","removeChild","addBodyClass","remove","snackbar","tableIcons","Add","forwardRef","Check","Clear","Delete","DetailPanel","Edit","Export","Filter","FirstPage","LastPage","NextPage","PreviousPage","ResetSearch","Search","SortArrow","ThirdStateCheck","ViewColumn","Table","actions","components","localization","actionsColumnIndex","draggable","grouping","toolbar","searchFieldAlignment","paging","TabPanel","selectedTab","a11yProps","tabPanel","Tabs","setSelectedTab","newSelectedTab","tabList","tab","scrollable","component","Text","colorSwitchBase","grey","green","colorBar","colorChecked","Toggle","toggle","onToggle","hidden","switchBase","checked","track","labelPlacement","horizFlex","spaceBetween","preContainer","ellipsis","iconSpace","testArray","EXPANDED","BasicVirtualizedTree","selectedGroup","groupsEnabled","searchValue","searchValueLower","filteredNodes","ch","child","grandChild","searchFilter","rest","onClickNode","onDoubleClickNode","inlineFlex","handleExpansion","oneOfType","TreeSearch","inputRef","focus","forceUpdate","trim","isEmpty","resetValue","ListItemsTree","onKeyUp","ListItemsTreeWithTitle","ListItemsTreeWithSearch","onSearch","Children","x","container","logoArea","navigationArea","accountArea","unsetAccountAreaPadding","VerticalBar","upperElement","Action","memory","parentView","getSceneMemory","gizmoManager","attachedMesh","camera","attachControl","canvas","closeContextDial","setContextActionIndex","AddKeyPointAction","setSelectedAction","scene","ground","maybeMousePos","Util3d","getGroundPosition","mousePos","detachControl","maybeCurrent","oldMousePos","tempMesh","dispose","createKeyPoint","TEMP_KEY_POINT_NAME","random","keyPoint","Color3","setPropertiesWithName","getUndoManager","addIt","getUndoAbleAction","Maybe","none","is2addInServer","Gray","rootMesh","getRootNode","mesh","KeyPoint","ofDict","r","g","parent","localPosition","getLocalCoordFromWorld","Vec3","ofBabylon","toBabylon","setPositionWithLocalVector","Axis","Z","scale","DEFAULT_SIZE","addNodeItem2Tree","UndoManager","actionBuilder","doAction","Vector3","Zero","material","diffuseColor","updateNodeInServer","undoAction","is2UpdateInServer","deleteNodeFromTreeUsingName","build","MouseKeysAction","AddMapAction","mapLoader","TYPE","firstTimeLoad","load","textureSrc","resolution","origin","imageSize","groundBuilder","fromNull","orSome","originPos","of","sub","rootNode","GlobalRef","inverseCoordinates","setTarget","y","z","Map","isVisible","is2sendServer","setEnabled","DefaultScene","createMeshGround","maybeNode","getNodeFromTree","orElseRun","isImport","addMap","doIt","getUndoAction","ACTIONS","orbit","getObjectTree","oldMapName","newMapName","switchMaps","AssetsManager","getInstance","getAssetsActionMap","AddMeshAction","actionMemoryClone","getIsImport","finalName","getFinalNameFromMemory","loadMesh","actionMemory","parentMesh","getParentMesh","createNormals","maybeDict","ofNull","flatMap","d","some","FromArray","rotationQuaternion","quaternion","Quaternion","Identity","StandardMaterial","emissiveColor","meshItem","Mesh","keyValueMap","renderMenus","parentObj","parentName","treeNode","addMesh","dragObjects","MeshLoader","transformMesh","addMesh2Scene","BoxRegionAction","buttons","createBoxRegion","TEMP_BOX_REGION_NAME","subtract","boxMesh","region","Red","localRegion","middlePoint","centeredRegion","boxRegionItem","BoxRegion","toArray","corners","points","DragObjectsAction","ctrlKey","maybeSelectedMesh","pickMesh","currentMesh","dragDownMesh","orLazy","dragDownWithoutMesh","selectedMesh","groundPos","dragMoveMesh","dragMoveWithoutMesh","dragUpMesh","dragUpWithoutMesh","destroySelectionDiv","defaultAction","predicateActionList","predicate","code","getDeleteButtonAction","getCopyAction","getPasteAction","selectOneAction","getMouseContextActions","setMouseContextActions","mousePosFromRoot","getPasteOnClick","pasteAction","Clipboard","paste","nodeTree","is2updateServer","displacement","m","observers","graphVertex","isSome","notifyObservers","_children","notifyChildrenObserversRecursively","clickPointInWorld","ZERO","movePointInWorld","startDivPos","Vec2","isStatic","addSelectedMesh","handleMeshRightClick","updateMouseVars","isSelectionPlaceHolder","addGizmo2Mesh","selectMeshUpdateUI","meshSelector","MeshSelector","ofMainView","selectionPlaceHolder","SelectionPlaceHolder","selectedMeshes","meshes","highlightMeshesInScene","highlightNodesInTree","addGizmo2Name","clear","setProperties","getMouseCoordsFromRoot","mousePosRoot","handleRightClickWithoutMesh","shiftKey","createSelectionDiv","pointerX","pointerY","selector","newMousePosInWorld","v","vLocal","updateSelectionDiv","selectPlaceHolder","groundPosInWorld","bigDisplacement","isBigDisplacement","isBigDisplaceOrIsEdgeMesh","edgeIndexes","addArray","arrayOfMeshes","mergePathsIfAny","selectObjectsInside","groundPosInGlobal","has","isOne","onDeleteNode","contextActions","getContextActions","onDel","selectPlaceHolderMesh","copyOne","copyMany","copy","someMainView","uuid","getUID","itemCopyFunctions","nodeItem","getCopyFunction","maybeCopiedItem","copiedMesh","toForm","nodeItems","uuids","maybeCopiedItems","itemCopyFunction","toGlobalCoord","absolutePosition","copiedItems","maybe","copiedMeshes","copiedNames","obs","updatedPointMesh","vertexObs","meshesStruct","keypointIndex","sendMesh","finalDisplacement","localDisplacement","newPos","moveMesh","dir","maybeNodeItem","None","nodeMesh","keyPoints","findMouseInDom","outerDiv","ID","ReactDOM","newMouse","oldMouse","op","min","minX","minY","max","maxX","maxY","clientX","clientY","cornersDiv","rayCastCorners","p","pickPoints","treeObj","TreeObject","insideBox","flatten","isItemInsideBox","insideBoxDragAbleMeshes","pickInfo","pick","hit","floorPoint","pickedPoint","orNull","polygon","type","getType","GraphItem","isMeshInsideBox","planeP","isPointInsideBox","epsilon","theta","n","vi","vii","acos","dot","abs","PI","Path","isKeyPointMesh","isEnabled","ray","hits","multiPickWithRay","keyPointHits","pickedMesh","hitMesh","first","second","areKeyPointsCompatible","firstPath","secondPath","oldPaths","dict","toDict","mergeName","mergePaths","unMergePaths","SelectDiv","border","DrawGraphAction","getGraph","mousePosConsumer","maybeMesh","isConnectableMesh","possibleMesh","Green","onPointerDownLine","resetPreview","cata","firstMousePos","onPointerMoveLine","escapeAction","deletePreviewMeshes","firstClickedMesh","previewMeshes","lambda","_","meshI","meshJ","belongsToPath","nameI","nameJ","clickedMesh","belongs2SamePath","isInvalidEdge","getUndoAbleLineEdge","edgeMeshes","createEdge","deleteEdge","visibility","edgeEmbedding","getEdgeMesh","Blue","Constants","RADIUS","isPickable","createGraphItemIfNone","graphNode","graphItem","addEdge","delEdge","DrawPathAction","mouseCurve","getUndoAbleEnterAction","spherePlaceHolder","isDisposed","createPointInCurve","getUndoAbleClickAction","addKeyPointPlaceHolder","getDrawPathContextAction","curve","localCurve","pointAverage","centeredCurve","w","pathItem","localPath","ans","TEMP_PATH_NAME","kps","finalKps","createCurve","setContextActions","reducedKps","keyPointMeshes","addEdgesInKeyPoints","deleteEdgeInKeyPoints","pathName","graph","createSphere","oldPoints","oldPosition","insertPointInCurve","createNewMeshFromOldUsingNewPoints","onAddNewPointKeyPointUpdate","localGround","sortedDistances","distance","localPathB","newPoints","MeasureAction","resetMeasure","currentMousePos","ruler","rulerMesh","createRulerMesh","addTextGUI","calculateDistance","pressure","deltaY","start","end","startVec","endVec","toFixed","advancedTexture","AdvancedDynamicTexture","CreateFullscreenUI","removeControl","TextBlock","addControl","MeshBuilder","CreateLines","updatable","NavigationPreviewAction","uIInOut","poses","resetData","maybeFirstClickPos","firstClickPos","secondClickPos","previewPoseMesh","createPreviewPose","poseMesh","poseMeshes","atan2","orientation","cos","sin","createNavPreviewNode","schema","jsonSchema","config","uiSchema","NavigationPreviewItem","normalize","maxLength","finalLength","finalEnd","arrowMesh","getArrow","navName","navPreviewNode","robotConfig","OrbitAction","PolygonRegionAction","TEMP_POLYGON_REGION_NAME","getDrawPolygonContextAction","Yellow","pointAverageVec3","polygonRegionItem","PolygonRegion","localPolygon","createPolygonRegion","RobotAction","robotAnimatorFactory","getDefaultAnimator","errorCallback","addRobot","meshName","meshTree","createRobotMeshTree","robotTree","builder","assetName","cloudPoint","PointCloud","loadRobot","createRobotFromMesh","err","getRobot","animate","getCloudPoint","assets","assetsActionMap","retrieveAssetsFromDb","observersBySceneId","resolve","subscribe","Scope","Name","RobotName","getRobotUpdate","getRobotNameSub","addRobots","finishSub","Parameter","getRobotMeshSub","File","FileLabel","getMapUpdater","getMapSubscriber","getMeshUpdater","getMeshSubscriber","place","finishInitialSubscribers","subs","afterLoad","f","hasOwnProperty","delAsset","dataGetter","after","getMapFileData","fileName","actionMap","del","filename","split","set","yamlSrc","loader","MapLoader","ASSETS_TYPES","addAsset","maybeGet","getMeshFileData","instance","observer","sceneId","_uid","assetKey","asset","AssetsTypesFactory","signalObservers","values","every","localRobot","createBaseObject","robotName","robotMeshName","setRobot","Value","ROBOT_MESH_NAME","pattern","patterns","deleteRobot","prop","obj","cachedMap","fetch","getMapUrl","parseYaml","image","yamlTxt","actionDict","Number","parseFloat","s","getImageSize","src","reject","img","Image","onload","naturalWidth","naturalHeight","FLEX_STYLE","BaseViewer","antialias","engineOptions","adaptToDeviceRatio","sceneOptions","onRender","onSceneReady","is2render","sceneFactory","useTheme","reactCanvas","loaded","setLoaded","setScene","setSize","setUpScene","engine","Scene","isReady","onReadyObservable","addOnce","onResize","getEngine","resize","renderScene","nScene","runRenderLoop","Engine","newScene","clearColor","SCENE_BACKGROUND","preserveDrawingBuffer","stencil","Graph","edgeKey","addVertex","edgeProps","getEdge","ijKey","jiKey","neighbors","getNeighbors","delVertex","viewOnly","measure","robotPreview","reactFactory","drawGraph","drawRegion","addKeyPoint","drawBoxRegion","drawPath","MainViewRetriever","mainView","serverScene","updateErrorList","errors","importSceneRecursive","importDefaultScene","nodeDict","nodeItemClass","NODE_ITEM_FACTORY_MAP","isAsset","importAsset","assetType","assetActionMap","retrievedAction","defaultRobot","cause","solution","exception","arrayTree","sortArrayTree","importNodeItem","send2server","placeHolderInstance","meshSelectionSet","Set","isSubtractive","filteredSet","Box","Wall","Mat3","v1","v2","v3","constructor","mat3","vec3","u","prodVec","dotVec","mat","equals","babylonMat","arrayMat","Matrix","GetAsMatrix3x3","vec","acc","sqrt","fromArray","biLambda","fold","initial","vector3","l","operation","binary","initialValue","MAX_VALUE","isNaN","isFinite","babylon","identityMatrix","e1","e2","e3","pivot","AssetNodeItem","NodeItem","orUndefined","createBox","mapDict2Mesh","lower","scaleX","scaleY","worldCorners","getGlobalCoordinates","form","oldForm","oldDimensions","dimensions","isEqual","ofFormDimensions","newLowerPositionInWorldCoordinates","newLocalDimensions","localLowerPosition","getLocalCoordFromGlobal","notify","update","createBoxRegionMesh","backFaceCulling","VISIBILITY","babylonQuaternion","createPlaceHolderKeyPoints","FACES","boxRegion","X","Y","h","boxRegionMesh","positions","faces","meshFromPositionAndFaces","createNewMeshFromOldUsingNewBox","newBox","average","rotMat3","getRotationMatrix","scaleVec3","scaling","averageInParentCoord","mul","newMesh","vertex","childrenCopy","c","saveZ","getKeyPointObserverFunction","boxRegionTreeNode","MIN_VALUE","corner","Observable","THETA","ROS_ORIGIN","rosOrigin","getRosOrigin","globalRefMesh","referentialBuilder","NAME","boxParams","CreateBox","rotationMatrix","pos","getUniqueId","graphItemInstances","graphPlaceHolder","getGraphPlaceHolder","graphFormMapper","getDefaultFormMapper","edgeMesh","getUndoDeleteEdge","getToFormEdge","meshByEdgeId","vertexGenerator","vertices","getVertices","edges","getEdges","getVertex","vertexData","String","ids","key2Edge","edgeData","edge","belongsSrcMesh","belongsTrgMesh","weight","belongsSrc","exportBelongToData","belongsTrg","doMeshesBelong2SamePath","checkInvalidEdges","rotation","ofForm","annotations","setAnnotations2Form","lodashGet","delVertexRecursively","iMesh","jMesh","iIndex","jIndex","hasEdge","buildVertex","buildEdge","getVertexIdFromMesh","maybeV","iParentNodeItem","jParentNodeItem","newPosition","iData","jData","vertexMesh","vertexIndex","vId","maybeVertex","VertexData","addObs2VertexMesh","vData","delVertexFromMesh","getVertexMeshObs","updateVertexPosition","iVertexD","jVertexD","EdgeData","isPath2Path","isMeshBelong2Path","hasDirection","edgeInGlobal","getGlobalCoord","getEdgeMaterial","speed","getEdgeMouseCtxActions","addObserver2EdgeMesh","addOnClickEdge","getEdgeObs","getOnClickEdge","getUndoDelLineEdge","edgeVertexD","edgeMeshesArePath","srcMesh","trgMesh","vertexCounter","getMeshesFromEdgeData","foundMeshes","dataEdge","importFeatures","vertexPosition","radius","sphere","createTubeFromPoints","frequency","getShaderMaterial","VERTEX","frag","FRAG","firstMesh","secondMesh","firstMeshParent","secondMeshParent","validationError","One","ind","globalPos","vertexDataI","vertexDataJ","freq","CreatePolyhedron","custom","TRIANGULAR_ANTIPRISM","convertToFlatShadedMesh","axis","category","face","oldName","MESSAGES","failGenerateCurve","arrowMeshes","createArrowMeshes","navPath","createNavPath","arrow","pose","beginPos","endPos","getChildren","getMaterialFromColor","freeze","getArrowObserver","NavigationPath","play","navPreviewItem","navItem","pathPromise","getPathFromService","pathPoses","getNavigationPathMesh","animator","getAnimator","stop","Animator","initialState","T","indices","nextState","indexSpeed","dt","iPrev","iNext","ceil","updateVerticesData","VertexBuffer","PositionKind","pointCloudMesh","disableLighting","pointsCloud","pointSize","colors","applyToMesh","startPose","endPose","ros","Ros","BRIDE_CONNECTION","inputMessage","sceneName","robot_config","initial_pose","rosPoseFromPose","final_pose","on","getDefaultPath","navigationService","Service","SERVICE_NAME","serviceType","SERVICE_TYPE","request","ServiceRequest","callService","msg","NAV_CLOUD_NAME","getPathFromPoses","showAlert","samples","startPos","nextPoint","nextNextPoint","splineCage","polyInterpolation","point","cage","tail","pairs","zip","newCage","lerp","q","RotationYawPitchRoll","euler","toEulerAngles","RAD2DEG","angles","deg","DEG2RAD","FromEulerAngles","isForceUpdate","nameGenerator","old","rootItem","copyDict","newPosArray","copiedNodeItem","childrenWithDelVertex","childMesh","someDict","babylonColor","AnnotationManager","getAnnotations","annotation","_capitalize","names","toString","splinePath","selectedKeyPointIndex","newSchema","selectedKeyPoint","formPosition","newPosInWorldCoordinates","localPos","updatePathEdgeWithForm","last","edgeIds","copiedPath","kp","isPathOnGraph","updateGraph","spline","getSplineFromCurve","splineObj2redis","path2return","getMeshOnClick","getMeshObserver","keyPointUpdateFunction","defaultKeyPointUpdate","oldMesh","oldKeyPoints","isJust","keyPointMesh","copyPosition","getUndoDeleteKeyPoint","copyPoints","keypoints","getUndoAddKeyPointInBetween","nextIndex","numberOfPoints","concat","specialIndex","oldKpMeshes","isTopologyChange","firstLastKpNeighborEdges","firstLastOldKp","oldEdge","neigh","vp","neighborEdges","edgeVertexObj","oldNeighEdge","isInteger","leftPath","rightPath","leftPathName","rightPathName","leftChildren","rightChildren","leftDict","rightPointsInLeftCoord","newPath","translate","Space","LOCAL","updateNodeItemInTree","newChildPos","kChild","getConeMesh","getKeyPointActions","pathTreeNode","deleteKeyPoint","addKeyPointInBetween","pseudoItem","curveMesh","getSphereMesh","cone","getKpMouseContextActions","splitCurve","unSplitCurve","edgesByCurveBoundary","oldPath","oldCenter","pathParent","splitAtIndex","splitPath","boundary","colorArray","clone","quaternionArray","numberOfSplits","newKeyPoints","newEdge","oldPathItem","oldPathName","oldPathNameSplit","leftSplit","rightSplit","nextSplinePoint","currentSplinePoint","createOrientedCone","Utils","pointCloudSubscribe","front_lidar","updatePointCloud","unsubscribe","positiveMod","mod","navigationAllowed","newJsonSchema","createExtrudedPolygonMesh","stitchingBoundaries","computeOrientation","modi","reverseOrientation","triangleIndex","polygonRegionMesh","lowerTriangulation","triangulatePolygon","upperTriangulation","stitchTriangulation","polygonTreeNode","getAbsolutePosition","polygonMesh","oldTimeInMillis","robotAnimator","requestAnimationFrameId","requestAnimationFrame","getRobotManager","isOnline","numberOfIte","is2UsePos","timeSinceLastUpdate","isSubscribedToLogs","speedStats","Statistics","loggerSubscription","qSpeed","newOri","alertMesh","buildAlertMesh","robotIP","getIP","onGetIP","startLogger","addClickActionToMesh","onMeshAlertClick","CreateDisc","sideOrientation","DOUBLESIDE","White","ambientTexture","Texture","errorIcon","billboardMode","BILLBOARDMODE_ALL","showRobotAlertModal","stopLogger","property","propValue","cancelAnimationFrame","subscribeToLogs","updateAlertState","is2RemoveAlertMesh","unsubscribeToLogs","newRobotTf","lastPosition","lastOrientation","newOrientation","isZero","dtInv","vel","SAMPLES","isOutlier","TIME_2_BE_OFFLINE_IN_SEC","toOffline","toOnline","createRobotMeshTreeRecursive","robotMesh","RobotBuilder","randomId","rotate","updateTF","tf","updateRobotMeshTree","onLoad","onUpdate","robot2Animate","someNaNOrInfinite","setOnOffLine","_name","_meshTree","_parentMesh","_parentView","_scene","_isPickable","_id","_keyValueMap","_assetName","variables","baseAxis","localWall","createWallMesh","centeredWall","tangent","normal","wallMesh","newWall","locallyTranslate","wallNode","wall","SceneViewer","robotManager","sceneMemory","tree","objectTree","undoManager","TreeServerUtils","ofScene","newObjectTree","focusObject","isPanned","_absolutePosition","cameraSpeed","targetPos","beta","isRotated","DefaultMouseEvents","onPointerDown","onPointerUp","onPointerMove","mouseLocationText","afterLoading","SceneServerUtils","retrieveScene","errorList","importScene","assetManager","getAssets","loadAssets","retrieveSceneFromServer","setCameraToTarget","getRenderingCanvas","addCanvasEventListeners","createMouseLocationText","createCamera","light","createLight","createGizmo","highlightLayer","layer","HighlightLayer","lastHlMeshes","robotAlertModal","predicateAction","propVar","loadScene","RobotManager","getNode","events","resetErrorList","createScene","getErrorSolutionList","masterProps","augmentProps","TreeNode","TreeNodeBuilder","_title","_item","_expanded","_isVisible","_isStatic","getNodeRecursive","answer","getParentNodeRecursive","foundChild","compareTreesRecursive","treeA","treeB","nodeEquality","nodeA","nodeB","mapRecursive","newTree","nod","mappedNode","forEachRecursive","expand","filterTree","childPredicate","nodeMap","CameraBuilder","_sphericalCoordinates","_target","sphericalCoordinates","ArcRotateCamera","DirectionalLightBuilder","_direction","_intensity","intensity","DirectionalLight","GizmoManagerBuilder","_isPosition","_isRotation","_isBoundingBox","_isScale","_usePointerToAttachGizmos","GizmoManager","positionGizmoEnabled","rotationGizmoEnabled","boundingBoxGizmoEnabled","scaleGizmoEnabled","usePointerToAttachGizmos","GroundBuilder","_width","_height","_textureSrc","CreateGround","WORLD","uScale","vScale","PositionalLightBuilder","_position","PointLight","ReferentialBuilder","_boxParams","_size","axisX","axisY","axisZ","localOrigin","angleByMeshName","_uniqBy","getAngleFromMesh","placeHolderPosition","createPlaceHolderIn","getSelPlaceHolderShader","that","HEIGHT","getPlaceHolderObs","placeHolder","filteredMeshes","dTheta","handleMotion","handleTranslation","handleRotation","baseCoord","toVec2","eITheta","rV","prod","finalV","finalTheta","TooltipBuilder","_mesh","_thickness","_linkOffsetX","_linkOffsetY","_background","_alpha","_scaleX","_scaleY","_cornerRadius","_text","_color","_fontSize","_padding","linkOffsetX","linkOffsetY","alpha","cornerRadius","useInvalidateRectOptimization","tooltipBox","Rectangle","thickness","transformCenterX","transformCenterY","adaptWidthToChildren","adaptHeightToChildren","linkWithMesh","textBlock","textVerticalAlignment","Control","VERTICAL_ALIGNMENT_TOP","textHorizontalAlignment","HORIZONTAL_ALIGNMENT_CENTER","resizeToFit","actionManager","ActionManager","scaleXAnimation","Animation","ANIMATIONTYPE_FLOAT","ANIMATIONLOOPMODE_CONSTANT","scaleYAnimation","frame","setKeys","animations","registerAction","ExecuteCodeAction","OnPointerOverTrigger","beginAnimation","OnPointerOutTrigger","meshParent","meshParentPos","meshParentRotMat","meshParentScaling","withTranslation","childPos","positionInWorld","forwardCoordinates","worldPosition","inverseScaling","localRotationMatrix","maybeQuaternion","toRotationMatrix","ofBabylonMatrix","normals","getVerticesData","NormalKind","lines","scaleInPlace","normalLines","CreateLineSystem","uArray","Dot","triangulation","earcut","len","i3","vec3Poly","arrayOfPoints","randomDigits","mode","Camera","ORTHOGRAPHIC_CAMERA","aspect","getAspectRatio","orthoLeft","orthoRight","orthoBottom","orthoTop","PERSPECTIVE_CAMERA","begin","arrowTube","arrowCone","tooltipText","OnPickDownTrigger","unfreeze","arrayOfVector3","transform","segments","surface","orthogonalBasisFromVector","sign","Cross","zeroIndex","uIndex","materialName","MATERIAL_CACHE","put","diameter","CreateSphere","box","CreateTube","cap","CAP_ALL","orientations","nbPoints","closed","Curve3","CreateCatmullRomSpline","getPoints","splineObj","getCurveOrientations","onBindObservable","SHADER_BIND","preProcessShader","SHADER_PRE","shaderMaterial","ShaderMaterial","vertexSource","fragmentSource","attributes","uniforms","setFloat","setVector3","activeCamera","lights","MaterialCache","next","doWhile","requestAnimeId","AnimatorBuilder","_state","_next","_end","someAreEmpty","retrieveAnnotationsFromDb","delAnnotation","addAnnotation","Annotation","names2delete","annotationType","annotationObj","Type","Label","getSocketAnimator","SCENE_CONTEXT","COPY_PASTE_UID","Clip","write","read","POINTS_DENSITY","CLOUD_FUNCTION_NAME","LOGGER_STATUS","init","running","paused","terminated","Black","mousePosClick","mousePosMove","currentLocal","setMouseLocationTxt","panCamera","vBabylon","getBabylonCoordinates","animateCamera","mouseButtonActions","filterActions","vdt","RotationGizmo","UtilityLayerRenderer","xGizmo","dragBehavior","detach","scaleRatio","yGizmo","COLLISION_RADIUS","cameraBuilder","inertia","collisionRadius","panningInertia","checkCollisions","panningSensibility","lowerRadiusLimit","directionalLightBuilder","wireframe","collisionsEnabled","debugLayer","show","embedMode","globalRoot","materialCacheBySceneId","count","materialCache","MeshCache","meshCacheBySceneId","meshCache","cloneMesh","mapFunction","hasKey","assetsManager","meshTask","addMeshTask","MESH_URL","onSuccess","task","loadedMeshes","onError","onFinish","meshParam","Float32Array","newNormals","numberOfVertices","setVerticesData","successCallback","DEFAULT_SUCCESS","failCallback","DEFAULT_FAILURE","successFailIf","failureLocation","_count","_mean","_M2","delta","delta2","NaN","sigmas","zScore","mean","variance","childName","getParentNode","is2delInServer","deleteNodeInServer","maybeParent","getParentFromChild","staticNodeTypes","node2Add","maybeParentNode","addNodeItem2Server","undo","setImmediate","warn","utils","lostConnection","resources","SERVER_DATA","Languages","en","translation","translationEN","pt","translationPT","language","Language","use","initReactI18next","lng","fallbackLng","debug","interpolation","escapeValue","Style","createGlobalStyle","S","CONSTANTS","borderBottom","secondary","themeFactory","particular","typography","h1","h2","h3","h4","h5","h6","body1","Themes","createMuiTheme","bottomNavigation","globalStats","subTextColor","upperTextColor","accent","hoverColor","stripColor","verticalBar","iconColor","overrides","MuiTableCell","MuiAppBar","colorDefault","colorInherit","MuiButton","outlined","contained","containedPrimary","containedSecondary","MuiButtonGroup","groupedContainedPrimary","groupedOutlined","groupedText","MuiIconButton","MuiListItem","MuiFormControlLabel","MuiInputBase","font","MuiFilledInput","underline","Roboto","OpenSans","MuiPaper","MuiTableRow","head","getTheme","setTheme","setItem"],"mappings":"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AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,8BAA8B;;AAE9B;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA,CAAC;;;AAGD;AACA;AACA;AACA,qDAAqD,cAAc;AACnE;AACA,C;;;;;;;;;;;;AC7Fa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA,uDAAuD;;AAEvD;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;;AAEA;AACA;;AAEA,iBAAiB,wBAAwB;AACzC;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,iBAAiB,iBAAiB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,gBAAgB,KAAwC,GAAG,sBAAiB,GAAG,SAAI;;AAEnF;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA,qEAAqE,qBAAqB,aAAa;;AAEvG;;AAEA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA,yDAAyD;AACzD,GAAG;;AAEH;;;AAGA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA,0BAA0B;AAC1B;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,mBAAmB,4BAA4B;AAC/C;AACA;AACA;AACA;;AAEA;;AAEA,oBAAoB,6BAA6B;AACjD;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,E;;;;;;;;;;;AC5QA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA,mBAAO,CAAC,kCAAc;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AC9DA;;AAEA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;;AAEA;AACA;AACA,4CAA4C;;AAE5C;;;;;;;;;;;;;ACnBA;AAAe,+EAAgB,wrjB;;;;;;;;;;;;ACA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAEA,IAAMA,SAAS,GAAGC,2EAAU,CAAC,UAAAC,KAAK;AAAA,SAAK;AACrCC,QAAI,EAAE;AACJ,mBAAa;AACXC,iBAAS,EAAEF,KAAK,CAACG,OAAN,CAAc,CAAd;AADA;AADT,KAD+B;AAMrCC,QAAI,EAAE;AACJC,cAAQ,EAAE,MADN;AAEJC,gBAAU,EAAE,GAFR;AAGJC,gBAAU,EAAE,WAHR;AAIJ,iBAAW;AACTC,cA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;;;;;;;ACAA,wE;;;;;;;;;;;ACAA,sE;;;;;;;;;;;ACAA,4E;;;;;;;;;;;ACAA,mE;;;;;;;;;;;ACAA,sE;;;;;;;;;;;ACAA,+D;;;;;;;;;;;ACAA,2D;;;;;;;;;;;ACAA,sE;;;;;;;;;;;ACAA,gE;;;;;;;;;;;ACAA,+E;;;;;;;;;;;ACAA,iF;;;;;;;;;;;ACAA,qE;;;;;;;;;;;ACAA,6E;;;;;;;;;;;ACAA,+D;;;;;;;;;;;ACAA,yE;;;;;;;;;;;ACAA,8D;;;;;;;;;;;ACAA,uD;;;;;;;;;;;ACAA,4C;;;;;;;;;;;ACAA,6D;;;;;;;;;;;ACAA,uD;;;;;;;;;;;ACAA,2C;;;;;;;;;;;ACAA,8C;;;;;;;;;;;ACAA,iD;;;;;;;;;;;ACAA,+C;;;;;;;;;;;ACAA,8C;;;;;;;;;;;ACAA,8C;;;;;;;;;;;ACAA,qD;;;;;;;;;;;ACAA,uD;;;;;;;;;;;ACAA,kD;;;;;;;;;;;ACAA,0D;;;;;;;;;;;ACAA,qD;;;;;;;;;;;ACAA,uD;;;;;;;;;;;ACAA,mD;;;;;;;;;;;ACAA,+D;;;;;;;;;;;ACAA,uD;;;;;;;;;;;ACAA,sD;;;;;;;;;;;ACAA,qD;;;;;;;;;;;ACAA,0D;;;;;;;;;;;ACAA,+D;;;;;;;;;;;ACAA,6D;;;;;;;;;;;ACAA,mD;;;;;;;;;;;ACAA,yD;;;;;;;;;;;ACAA,oD;;;;;;;;;;;ACAA,6D;;;;;;;;;;;ACAA,wD;;;;;;;;;;;ACAA,yD;;;;;;;;;;;ACAA,mD;;;;;;;;;;;ACAA,2D;;;;;;;;;;;ACAA,mD;;;;;;;;;;;ACAA,uD;;;;;;;;;;;ACAA,oD;;;;;;;;;;;ACAA,qD;;;;;;;;;;;ACAA,qD;;;;;;;;;;;ACAA,kD;;;;;;;;;;;ACAA,wD;;;;;;;;;;;ACAA,mD;;;;;;;;;;;ACAA,wD;;;;;;;;;;;ACAA,yD;;;;;;;;;;;ACAA,qD;;;;;;;;;;;ACAA,qD;;;;;;;;;;;ACAA,sE;;;;;;;;;;;ACAA,oD;;;;;;;;;;;ACAA,mD;;;;;;;;;;;ACAA,sD;;;;;;;;;;;ACAA,6D;;;;;;;;;;;ACAA,oD;;;;;;;;;;;ACAA,qD;;;;;;;;;;;ACAA,2D;;;;;;;;;;;ACAA,4D;;;;;;;;;;;ACAA,qD;;;;;;;;;;;ACAA,qD;;;;;;;;;;;ACAA,6D;;;;;;;;;;;ACAA,oD;;;;;;;;;;;ACAA,0D;;;;;;;;;;;ACAA,0D;;;;;;;;;;;ACAA,yD;;;;;;;;;;;ACAA,qD;;;;;;;;;;;ACAA,wD;;;;;;;;;;;ACAA,4D;;;;;;;;;;;ACAA,sD;;;;;;;;;;;ACAA,uD;;;;;;;;;;;ACAA,wD;;;;;;;;;;;ACAA,sD;;;;;;;;;;;ACAA,wD;;;;;;;;;;;ACAA,qD;;;;;;;;;;;ACAA,0D;;;;;;;;;;;ACAA,0D;;;;;;;;;;;ACAA,uD;;;;;;;;;;;ACAA,mD;;;;;;;;;;;ACAA,iD;;;;;;;;;;;ACAA,gD;;;;;;;;;;;ACAA,iC;;;;;;;;;;;ACAA,mC;;;;;;;;;;;ACAA,iD;;;;;;;;;;;ACAA,8C;;;;;;;;;;;ACAA,oC;;;;;;;;;;;ACAA,uC;;;;;;;;;;;ACAA,2C;;;;;;;;;;;ACAA,8C;;;;;;;;;;;ACAA,6C;;;;;;;;;;;ACAA,4C;;;;;;;;;;;ACAA,uC;;;;;;;;;;;ACAA,2C;;;;;;;;;;;ACAA,2C;;;;;;;;;;;ACAA,uC;;;;;;;;;;;ACAA,0C;;;;;;;;;;;ACAA,kE;;;;;;;;;;;ACAA,2C;;;;;;;;;;;ACAA,kC;;;;;;;;;;;ACAA,4C;;;;;;;;;;;ACAA,uC;;;;;;;;;;;ACAA,kC;;;;;;;;;;;ACAA,sC;;;;;;;;;;;ACAA,0C;;;;;;;;;;;ACAA,kD;;;;;;;;;;;ACAA,8C;;;;;;;;;;;ACAA,mD;;;;;;;;;;;ACAA,gE;;;;;;;;;;;ACAA,yD;;;;;;;;;;;ACAA,mC;;;;;;;;;;;ACAA,yC;;;;;;;;;;;ACAA,8C","file":"dist/index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"MovaiReact\"] = factory();\n\telse\n\t\troot[\"MovaiReact\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./index.js\");\n","import Button from \"./src/Components/Button\";\nimport AbstractModal from \"./src/Components/Modal/AbstractModal\";\nimport ConfirmAlertModal from \"./src/Components/Modal/ConfirmAlertModal\";\nimport RobotLogModal from \"./src/Components/Modal/RobotLogModal\";\nimport Drawer from \"./src/Components/Drawer\";\nimport Collapse from \"./src/Components/Collapse\";\nimport VerticalBar from \"./src/Components/VerticalBar\";\nimport ContextMenu from \"./src/Components/ContextMenu\";\nimport Table from \"./src/Components/Table\";\nimport Tabs from \"./src/Components/Tabs\";\nimport Text from \"./src/Components/Text\";\nimport Toggle from \"./src/Components/Toggle\";\nimport SearchInput from \"./src/Components/SearchInput\";\nimport Breadcrumb from \"./src/Components/Breadcrumb\";\nimport SceneViewer from \"./src/Components/Viewer/SceneViewer\";\nimport Select from \"./src/Components/Select\";\nimport { snackbar } from \"./src/Components/Snackbar/Snackbar\";\nimport Themes from \"./src/styles/Themes\";\nimport Style from \"./src/styles/Style\";\nimport Logs from \"./src/Components/Logs/Logs\";\nimport LoginForm from \"./src/Components/LoginForm/LoginForm\";\nimport ProfileMenu from \"./src/Components/ProfileMenu\";\nimport FilterIcon from \"./src/Components/Logs/LogsFilterBar/FiltersIcon/FiltersIcon\";\nimport SelectScopeModal from \"./src/Components/Modal/SelectScopeModal\";\n// import HOCs\nimport withOfflineValidation from \"./src/Components/HOCs/withOfflineValidation\";\nimport withAuthentication from \"./src/Components/HOCs/withAuthentication\";\n\nexport {\n  withOfflineValidation,\n  withAuthentication,\n  Button,\n  AbstractModal,\n  ConfirmAlertModal,\n  SelectScopeModal,\n  RobotLogModal,\n  Drawer,\n  Collapse,\n  VerticalBar,\n  ContextMenu,\n  Table,\n  Tabs,\n  Text,\n  Themes,\n  Toggle,\n  SearchInput,\n  Breadcrumb,\n  SceneViewer,\n  Select,\n  snackbar,\n  Style,\n  Logs,\n  FilterIcon,\n  LoginForm,\n  ProfileMenu\n};\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".flow-action {\\n  display: flex;\\n  background: transparent;\\n  width: 35px;\\n  height: 35px;\\n  margin: 6px;\\n  border-radius: 50%;\\n  justify-content: center;\\n  align-items: center;\\n  transition: background-color 0.5s;\\n}\\n\\n.flow-action:hover {\\n  background: rgba(11, 106, 138, 0.2);\\n  cursor: pointer;\\n}\\n\\n.robot-logs-container {\\n  display: flex;\\n  flex-direction: column;\\n  height: 1px;\\n  flex-grow: 1;\\n}\\n\\n.tree-grow-overflow {\\n  flex-grow: 0.5;\\n  overflow-y: auto;\\n  min-height: 0;\\n  height: 100%;\\n}\\n\\n.logs-grow-overflow {\\n  flex-grow: 1;\\n  overflow-y: auto;\\n  min-height: 0;\\n  height: 100%;\\n}\\n\\n.saving {\\n  /* font-size: 40px; */\\n  margin: 0;\\n}\\n\\n.saving span {\\n  font-size: 15px;\\n  animation-name: blink;\\n  animation-duration: 1.4s;\\n  animation-iteration-count: infinite;\\n  animation-fill-mode: both;\\n}\\n\\n.saving span:nth-child(2) {\\n  animation-delay: 0.2s;\\n}\\n\\n.saving span:nth-child(3) {\\n  animation-delay: 0.4s;\\n}\\n\\n@keyframes blink {\\n  0% {\\n    opacity: 0.2;\\n  }\\n  20% {\\n    opacity: 1;\\n  }\\n  100% {\\n    opacity: 0.2;\\n  }\\n}\\n\\n.MuiPickersToolbarButton-toolbarBtn {\\n  padding: 0 !important;\\n  min-width: 16px !important;\\n  margin: 0 !important;\\n  text-transform: none !important;\\n}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"body.react-confirm-alert-body-element {\\n  overflow: hidden;\\n}\\n\\n.react-confirm-alert-blur {\\n  filter: url(#gaussian-blur);\\n  filter: blur(2px);\\n  -webkit-filter: blur(2px);\\n}\\n\\n.react-confirm-alert-overlay {\\n  position: fixed;\\n  top: calc(100vh - 300px);\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n  z-index: 99;\\n  display: -webkit-flex;\\n  display: -moz-flex;\\n  display: -ms-flex;\\n  display: -o-flex;\\n  display: flex;\\n  justify-content: flex-start;\\n  -ms-align-items: center;\\n  align-items: flex-end;\\n  opacity: 1;\\n}\\n\\n.react-confirm-alert-body {\\n  width: 400px;\\n  padding: 30px;\\n}\\n\\n.react-confirm-alert-svg {\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n}\\n\\n.react-confirm-alert-body > h1 {\\n  margin-top: 0;\\n}\\n\\n.react-confirm-alert-body > h3 {\\n  margin: 0;\\n  font-size: 16px;\\n}\\n\\n.react-confirm-alert-button-group {\\n  display: -webkit-flex;\\n  display: -moz-flex;\\n  display: -ms-flex;\\n  display: -o-flex;\\n  display: flex;\\n  justify-content: flex-start;\\n  margin-top: 20px;\\n}\\n\\n.react-confirm-alert-button-group > button {\\n  outline: none;\\n  background: #333;\\n  border: none;\\n  display: inline-block;\\n  padding: 6px 18px;\\n  color: #eee;\\n  margin-right: 10px;\\n  border-radius: 5px;\\n  font-size: 12px;\\n  cursor: pointer;\\n}\\n\\n.icon-container {\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n}\\n\\n.icon-container:hover {\\n  cursor: pointer;\\n}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\n// eslint-disable-next-line func-names\nmodule.exports = function (useSourceMap) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item, useSourceMap);\n\n      if (item[2]) {\n        return \"@media \".concat(item[2], \" {\").concat(content, \"}\");\n      }\n\n      return content;\n    }).join('');\n  }; // import a list of modules into the list\n  // eslint-disable-next-line func-names\n\n\n  list.i = function (modules, mediaQuery, dedupe) {\n    if (typeof modules === 'string') {\n      // eslint-disable-next-line no-param-reassign\n      modules = [[null, modules, '']];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var i = 0; i < this.length; i++) {\n        // eslint-disable-next-line prefer-destructuring\n        var id = this[i][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _i = 0; _i < modules.length; _i++) {\n      var item = [].concat(modules[_i]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        // eslint-disable-next-line no-continue\n        continue;\n      }\n\n      if (mediaQuery) {\n        if (!item[2]) {\n          item[2] = mediaQuery;\n        } else {\n          item[2] = \"\".concat(mediaQuery, \" and \").concat(item[2]);\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n  var content = item[1] || ''; // eslint-disable-next-line prefer-destructuring\n\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (useSourceMap && typeof btoa === 'function') {\n    var sourceMapping = toComment(cssMapping);\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot || '').concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n  }\n\n  return [content].join('\\n');\n} // Adapted from convert-source-map (MIT)\n\n\nfunction toComment(sourceMap) {\n  // eslint-disable-next-line no-undef\n  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n  var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n  return \"/*# \".concat(data, \" */\");\n}","\"use strict\";\n\nvar isOldIE = function isOldIE() {\n  var memo;\n  return function memorize() {\n    if (typeof memo === 'undefined') {\n      // Test for IE <= 9 as proposed by Browserhacks\n      // @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n      // Tests for existence of standard globals is to allow style-loader\n      // to operate correctly into non-standard environments\n      // @see https://github.com/webpack-contrib/style-loader/issues/177\n      memo = Boolean(window && document && document.all && !window.atob);\n    }\n\n    return memo;\n  };\n}();\n\nvar getTarget = function getTarget() {\n  var memo = {};\n  return function memorize(target) {\n    if (typeof memo[target] === 'undefined') {\n      var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n      if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n        try {\n          // This will throw an exception if access to iframe is blocked\n          // due to cross-origin restrictions\n          styleTarget = styleTarget.contentDocument.head;\n        } catch (e) {\n          // istanbul ignore next\n          styleTarget = null;\n        }\n      }\n\n      memo[target] = styleTarget;\n    }\n\n    return memo[target];\n  };\n}();\n\nvar stylesInDom = [];\n\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n\n  for (var i = 0; i < stylesInDom.length; i++) {\n    if (stylesInDom[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var index = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3]\n    };\n\n    if (index !== -1) {\n      stylesInDom[index].references++;\n      stylesInDom[index].updater(obj);\n    } else {\n      stylesInDom.push({\n        identifier: identifier,\n        updater: addStyle(obj, options),\n        references: 1\n      });\n    }\n\n    identifiers.push(identifier);\n  }\n\n  return identifiers;\n}\n\nfunction insertStyleElement(options) {\n  var style = document.createElement('style');\n  var attributes = options.attributes || {};\n\n  if (typeof attributes.nonce === 'undefined') {\n    var nonce = typeof __webpack_nonce__ !== 'undefined' ? __webpack_nonce__ : null;\n\n    if (nonce) {\n      attributes.nonce = nonce;\n    }\n  }\n\n  Object.keys(attributes).forEach(function (key) {\n    style.setAttribute(key, attributes[key]);\n  });\n\n  if (typeof options.insert === 'function') {\n    options.insert(style);\n  } else {\n    var target = getTarget(options.insert || 'head');\n\n    if (!target) {\n      throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n    }\n\n    target.appendChild(style);\n  }\n\n  return style;\n}\n\nfunction removeStyleElement(style) {\n  // istanbul ignore if\n  if (style.parentNode === null) {\n    return false;\n  }\n\n  style.parentNode.removeChild(style);\n}\n/* istanbul ignore next  */\n\n\nvar replaceText = function replaceText() {\n  var textStore = [];\n  return function replace(index, replacement) {\n    textStore[index] = replacement;\n    return textStore.filter(Boolean).join('\\n');\n  };\n}();\n\nfunction applyToSingletonTag(style, index, remove, obj) {\n  var css = remove ? '' : obj.media ? \"@media \".concat(obj.media, \" {\").concat(obj.css, \"}\") : obj.css; // For old IE\n\n  /* istanbul ignore if  */\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = replaceText(index, css);\n  } else {\n    var cssNode = document.createTextNode(css);\n    var childNodes = style.childNodes;\n\n    if (childNodes[index]) {\n      style.removeChild(childNodes[index]);\n    }\n\n    if (childNodes.length) {\n      style.insertBefore(cssNode, childNodes[index]);\n    } else {\n      style.appendChild(cssNode);\n    }\n  }\n}\n\nfunction applyToTag(style, options, obj) {\n  var css = obj.css;\n  var media = obj.media;\n  var sourceMap = obj.sourceMap;\n\n  if (media) {\n    style.setAttribute('media', media);\n  } else {\n    style.removeAttribute('media');\n  }\n\n  if (sourceMap && typeof btoa !== 'undefined') {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    while (style.firstChild) {\n      style.removeChild(style.firstChild);\n    }\n\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar singleton = null;\nvar singletonCounter = 0;\n\nfunction addStyle(obj, options) {\n  var style;\n  var update;\n  var remove;\n\n  if (options.singleton) {\n    var styleIndex = singletonCounter++;\n    style = singleton || (singleton = insertStyleElement(options));\n    update = applyToSingletonTag.bind(null, style, styleIndex, false);\n    remove = applyToSingletonTag.bind(null, style, styleIndex, true);\n  } else {\n    style = insertStyleElement(options);\n    update = applyToTag.bind(null, style, options);\n\n    remove = function remove() {\n      removeStyleElement(style);\n    };\n  }\n\n  update(obj);\n  return function updateStyle(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {\n        return;\n      }\n\n      update(obj = newObj);\n    } else {\n      remove();\n    }\n  };\n}\n\nmodule.exports = function (list, options) {\n  options = options || {}; // Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n  // tags it will allow on a page\n\n  if (!options.singleton && typeof options.singleton !== 'boolean') {\n    options.singleton = isOldIE();\n  }\n\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n\n    if (Object.prototype.toString.call(newList) !== '[object Array]') {\n      return;\n    }\n\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDom[index].references--;\n    }\n\n    var newLastIdentifiers = modulesToDom(newList, options);\n\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n\n      var _index = getIndexByIdentifier(_identifier);\n\n      if (stylesInDom[_index].references === 0) {\n        stylesInDom[_index].updater();\n\n        stylesInDom.splice(_index, 1);\n      }\n    }\n\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","var scope = (typeof global !== \"undefined\" && global) ||\n            (typeof self !== \"undefined\" && self) ||\n            window;\nvar apply = Function.prototype.apply;\n\n// DOM APIs, for completeness\n\nexports.setTimeout = function() {\n  return new Timeout(apply.call(setTimeout, scope, arguments), clearTimeout);\n};\nexports.setInterval = function() {\n  return new Timeout(apply.call(setInterval, scope, arguments), clearInterval);\n};\nexports.clearTimeout =\nexports.clearInterval = function(timeout) {\n  if (timeout) {\n    timeout.close();\n  }\n};\n\nfunction Timeout(id, clearFn) {\n  this._id = id;\n  this._clearFn = clearFn;\n}\nTimeout.prototype.unref = Timeout.prototype.ref = function() {};\nTimeout.prototype.close = function() {\n  this._clearFn.call(scope, this._id);\n};\n\n// Does not start the time, just sets up the members needed.\nexports.enroll = function(item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n};\n\nexports.unenroll = function(item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n};\n\nexports._unrefActive = exports.active = function(item) {\n  clearTimeout(item._idleTimeoutId);\n\n  var msecs = item._idleTimeout;\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout)\n        item._onTimeout();\n    }, msecs);\n  }\n};\n\n// setimmediate attaches itself to the global object\nrequire(\"setimmediate\");\n// On some exotic environments, it's not clear which object `setimmediate` was\n// able to install onto.  Search each possibility in the same order as the\n// `setimmediate` library.\nexports.setImmediate = (typeof self !== \"undefined\" && self.setImmediate) ||\n                       (typeof global !== \"undefined\" && global.setImmediate) ||\n                       (this && this.setImmediate);\nexports.clearImmediate = (typeof self !== \"undefined\" && self.clearImmediate) ||\n                         (typeof global !== \"undefined\" && global.clearImmediate) ||\n                         (this && this.clearImmediate);\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","export default \"data:image/png;base64,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\"","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Breadcrumbs from \"@material-ui/core/Breadcrumbs\";\nimport NavigateNextIcon from \"@material-ui/icons/NavigateNext\";\nimport Typography from \"@material-ui/core/Typography\";\nimport PropTypes from \"prop-types\";\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    \"& > * + *\": {\n      marginTop: theme.spacing(2)\n    }\n  },\n  link: {\n    fontSize: \"24px\",\n    fontWeight: 800,\n    fontFamily: \"Open Sans\",\n    \"&:hover\": {\n      cursor: \"pointer\",\n      textDecoration: \"underline\"\n    }\n  },\n  lastLabel: {\n    fontSize: \"24px\",\n    fontWeight: 800,\n    fontFamily: \"Open Sans\"\n  }\n}));\n\nconst Breadcrumb = props => {\n  const classes = useStyles();\n  return (\n    <div className={classes.root}>\n      <Breadcrumbs\n        separator={<NavigateNextIcon fontSize=\"small\" />}\n        aria-label=\"breadcrumb\"\n        style={props.style}\n      >\n        {props.pathList.map((element, index) => {\n          if (props.pathList.length - 1 !== index) {\n            return (\n              <Typography\n                key={index}\n                color=\"primary\"\n                variant=\"inherit\"\n                className={classes.link}\n                onClick={element.function}\n              >\n                {element.label}\n              </Typography>\n            );\n          }\n        })}\n        <Typography color=\"textPrimary\" className={classes.lastLabel}>\n          {props.pathList[props.pathList.length - 1].label}\n        </Typography>\n      </Breadcrumbs>\n    </div>\n  );\n};\n\nBreadcrumb.propTypes = {\n  pathList: PropTypes.array\n};\n\nBreadcrumb.defaultProps = {\n  pathList: [\n    { label: \"Mov.ai\", function: () => console.log(\"pth1/\") },\n    { label: \"User\", function: () => console.log(\"path1/path2\") },\n    { label: \"John Doe\" }\n  ]\n};\n\nexport default Breadcrumb;\n","import React from \"react\";\nimport MaterialButton from \"@material-ui/core/Button\";\nimport PropTypes from \"prop-types\";\n\nconst Button = props => {\n  return (\n    <MaterialButton\n      className={props.className}\n      style={props.style}\n      onClick={props.onClick}\n      color={props.color}\n      variant={props.variant}\n      size={props.size}\n      startIcon={props.startIcon}\n      disabled={props.disabled}\n    >\n      {props.children}\n    </MaterialButton>\n  );\n};\n\nButton.propTypes = {\n  style: PropTypes.object,\n  onClick: PropTypes.func,\n  color: PropTypes.string,\n  variant: PropTypes.string.isRequired,\n  size: PropTypes.string,\n  startIcon: PropTypes.element,\n  children: PropTypes.node.isRequired,\n  disabled: PropTypes.bool\n};\nButton.defaultProps = {\n  style: {},\n  onClick: () => console.log(\"Click MOV.AI button\"),\n  color: \"default\", // default, inherit, primary or secondary\n  variant: \"contained\", // text, outlined, contained\n  size: \"medium\", // small, medium, large\n  startIcon: undefined,\n  children: <div></div>,\n  disabled: false\n};\n\nexport default Button;\n","import React from \"react\";\nimport ChevronRightIcon from \"@material-ui/icons/ChevronRight\";\nimport ExpandMore from \"@material-ui/icons/ExpandMore\";\nimport PropTypes from \"prop-types\";\nimport MaterialCollapse from \"@material-ui/core/Collapse\";\nimport { Divider, ListItem, List } from \"@material-ui/core\";\n\nconst Collapse = props => {\n  const [open, setOpen] = React.useState(props.open);\n\n  React.useEffect(() => {\n    if (props.open !== open) {\n      setOpen(props.open);\n    }\n  }, [props.open]);\n\n  const handleClickFactory = clickLambda => () => {\n    setOpen(!open);\n    clickLambda();\n  };\n\n  return (\n    <List>\n      <ListItem button onClick={handleClickFactory(props.onClick)}>\n        {open ? (\n          <ExpandMore style={{ ...props.iconStyle }} />\n        ) : (\n          <ChevronRightIcon style={{ ...props.iconStyle }} />\n        )}\n        <div style={{ width: \"100%\" }}>{props.item}</div>\n      </ListItem>\n      {props.divided ? <Divider /> : []}\n      <MaterialCollapse\n        className={props.className}\n        style={props.style}\n        in={open}\n      >\n        {props.children}\n      </MaterialCollapse>\n    </List>\n  );\n};\n\nCollapse.propTypes = {\n  item: PropTypes.object,\n  onClick: PropTypes.func,\n  open: PropTypes.bool,\n  divided: PropTypes.bool,\n  iconStyle: PropTypes.object\n};\n\nCollapse.defaultProps = {\n  item: <div></div>,\n  onClick: () => {},\n  open: false,\n  divided: false,\n  style: {},\n  iconStyle: {}\n};\n\nexport default Collapse;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Menu from \"@material-ui/core/Menu\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\n\nconst ContextMenu = props => {\n  const { style } = props;\n  const [anchorEl, setAnchorEl] = React.useState(null);\n\n  const handleClick = event => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  return (\n    <div style={style}>\n      {React.cloneElement(props.element, {\n        onClick: evt => {\n          if (props.element.props.onClick !== undefined) {\n            props.element.props.onClick(); // If user defined a onClick\n          }\n          handleClick(evt); // opens the contextMenu\n        }\n      })}\n      <Menu\n        id=\"simple-menu\"\n        anchorEl={anchorEl}\n        keepMounted\n        open={Boolean(anchorEl)}\n        onClose={handleClose}\n      >\n        {props.menuList.reduce((result, item, index) => {\n          if (item && typeof item !== \"function\") {\n            result.push(\n              <MenuItem\n                onClick={() => {\n                  item.onClick();\n                  if (item.onClose || item.onClose === undefined) {\n                    handleClose();\n                  }\n                }}\n                key={index}\n              >\n                {item.element}\n              </MenuItem>\n            );\n          }\n          return result;\n        }, [])}\n      </Menu>\n    </div>\n  );\n};\n\nContextMenu.propTypes = {\n  element: PropTypes.node.isRequired,\n  navigationList: PropTypes.array,\n  lowerElement: PropTypes.node.isRequired,\n  width: PropTypes.string,\n  backgroundColor: PropTypes.string\n};\nContextMenu.defaultProps = {\n  element: <div>Ahaha</div>,\n  menuList: [\n    {\n      onClick: () => console.log(\"clicked 1\"),\n      element: \"Profile\",\n      onClose: true\n    }\n  ],\n  lowerElement: <div></div>,\n  width: \"68px\",\n  backgroundColor: \"#424242\",\n  style: {}\n};\n\nexport default ContextMenu;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport MaterialDrawer from \"@material-ui/core/Drawer\";\n\nconst Drawer = props => {\n  return (\n    <MaterialDrawer\n      style={props.style}\n      anchor={props.anchor}\n      open={props.open}\n      onClose={props.onClose}\n    >\n      {props.children}\n    </MaterialDrawer>\n  );\n};\n\nDrawer.propTypes = {\n  style: PropTypes.object,\n  anchor: PropTypes.string,\n  open: PropTypes.bool,\n  children: PropTypes.object\n};\n\nDrawer.defaultProps = {\n  style: {},\n  anchor: \"left\",\n  open: false,\n  children: <div></div>\n};\n\nDrawer.ANCHOR = { left: \"left\", right: \"right\", top: \"top\", bottom: \"bottom\" };\n\nexport default Drawer;\n","import React, { useState, useEffect, useRef } from \"react\";\nimport { Modal } from \"@material-ui/core\";\nimport { Authentication } from \"mov-fe-lib-core\";\nimport LoginForm from \"../LoginForm/LoginForm\";\nimport jwtDecode from \"jwt-decode\";\n\nexport default function withAuthentication(Component) {\n  return function (props) {\n    const RECHECK_VALID_DELAY = 2000; // milliseconds\n\n    const firstRender = useRef(true);\n\n    const [loggedIn, setLoggedIn] = useState(false);\n    const [checkLogin, setCheckLogin] = useState(0);\n\n    /**\n     * check if the user is authenticated\n     */\n    useEffect(() => {\n      async function checkLogin() {\n        return await Authentication.checkLogin();\n      }\n\n      setLoggedIn(checkLogin());\n    }, []);\n\n    /**\n     * Checks if the refresh token is still valid\n     * sets loggedIn accordingly.\n     * Setting checkLogin or loggedIn will trigger execution\n     */\n    useEffect(() => {\n      const now = Math.floor(Date.now() * 0.001);\n      const token = window.localStorage.getItem(\"movai.refreshToken\");\n\n      try {\n        // decode the token and get exp value\n        const exp = jwtDecode(token).exp || now;\n\n        // check if token expiration time is still valid\n        const expDelta = exp - now;\n        if (expDelta <= 0) {\n          throw new Error(\"Token expired\");\n        }\n\n        // check again in expire time + RECHECK_VALID_DELAY\n        setTimeout(\n          () => setCheckLogin(now),\n          expDelta * 1000 + RECHECK_VALID_DELAY\n        );\n\n        setLoggedIn(true);\n      } catch (error) {\n        // token expired or no token\n        setLoggedIn(false);\n      }\n    }, [checkLogin, loggedIn]);\n\n    /**\n     * handleLogOut - log out the user\n     */\n    const handleLogOut = () => {\n      Authentication.logout();\n    };\n\n    /**\n     * handleFirstRender - If the user is not logged in and it is the first render\n     * then show the login form without the application on the background.\n     * After the first login, the login form can be showned as a modal instead.\n     */\n    const handleFirstRender = () => {\n      firstRender.current = false;\n      return <LoginForm setLoggedIn={state => setLoggedIn(state)} />;\n    };\n\n    /**\n     * renders the Login form if the user is not logged in\n     */\n    return (\n      <React.Fragment>\n        {!loggedIn && firstRender.current ? (\n          handleFirstRender()\n        ) : (\n          <React.Fragment>\n            <Component\n              handleLogOut={handleLogOut}\n              loggedIn={loggedIn}\n              {...props}\n            />\n            <Modal open={!loggedIn}>\n              <LoginForm setLoggedIn={state => setLoggedIn(state)} />\n            </Modal>\n          </React.Fragment>\n        )}\n      </React.Fragment>\n    );\n  };\n}\n","import React, { useEffect } from \"react\";\nimport { MasterDB } from \"mov-fe-lib-core\";\nimport Alert from \"@material-ui/lab/Alert\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport { makeStyles } from \"@material-ui/styles\";\nimport { Button } from \"@material-ui/core\";\n\nconst useStyles = makeStyles(theme => ({\n  alert: { position: \"absolute\", bottom: 0, width: \"100%\" }\n}));\n\nexport default function withOfflineValidation(Component) {\n  return function (props) {\n    const [isConnected, setConnected] = React.useState(true);\n    const [showSuccessAlert, setSuccessAlert] = React.useState(false);\n    const [validator, setValidator] = React.useState(null);\n    const [loading, setLoading] = React.useState(false);\n    const classes = useStyles();\n\n    /**\n     * Start offline validation\n     */\n    useEffect(() => {\n      const _validator = MasterDB.offlineValidation({ onOnline, onOffline });\n      setValidator(_validator);\n    }, []);\n\n    const onOnline = () => {\n      setConnected(true);\n      setSuccessAlert(true);\n      setTimeout(() => setSuccessAlert(false), 2000);\n    };\n\n    const onOffline = () => {\n      setConnected(false);\n    };\n\n    const retryConnection = () => {\n      setLoading(true);\n      validator.retryConnection().then(() => setLoading(false));\n    };\n\n    /**\n     * renders the Login form if the user is not logged in\n     */\n    return (\n      <React.Fragment>\n        <React.Fragment>\n          <Component {...props} />\n          {!isConnected && (\n            <Alert\n              className={classes.alert}\n              variant=\"filled\"\n              severity=\"error\"\n              action={\n                <Button color=\"inherit\" size=\"small\" onClick={retryConnection}>\n                  {loading ? (\n                    <CircularProgress\n                      size={20}\n                      color=\"inherit\"\n                    ></CircularProgress>\n                  ) : (\n                    \"RETRY\"\n                  )}\n                </Button>\n              }\n            >\n              Connection failed... You're now in offline mode, please wait to\n              reconnect.\n            </Alert>\n          )}\n          {isConnected && showSuccessAlert && (\n            <Alert\n              className={classes.alert}\n              variant=\"filled\"\n              severity=\"success\"\n            >\n              You're now online!\n            </Alert>\n          )}\n        </React.Fragment>\n      </React.Fragment>\n    );\n  };\n}\n","import React, { Component } from \"react\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Button from \"@material-ui/core/Button\";\nimport Grid from \"@material-ui/core/Grid\";\nimport defaultLogo from \"./movai_red.svg\";\nimport Paper from \"@material-ui/core/Paper\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport FormHelperText from \"@material-ui/core/FormHelperText\";\nimport Input from \"@material-ui/core/Input\";\nimport InputLabel from \"@material-ui/core/InputLabel\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport { Authentication } from \"mov-fe-lib-core\";\nimport PropTypes from \"prop-types\";\n\nconst styles = theme => ({\n  root: {\n    padding: theme.spacing(4, 4),\n    borderRadius: 10\n  }\n});\n\nclass LoginForm extends Component {\n  state = {\n    username: \"\",\n    password: \"\",\n    remember: false,\n    error: false,\n    errorMessage: \"\",\n    capsLockOn: false\n  };\n\n  sendCreds = async () => {\n    try {\n      const apiResponse = await Authentication.login(\n        this.state.username,\n        this.state.password,\n        this.state.remember\n      );\n      // If successfully logged in\n      if (!apiResponse.error) {\n        this.props.setLoggedIn(true);\n      } else {\n        // Show the error in red\n        this.setState({\n          error: true,\n          errorMessage: apiResponse.error\n        });\n      }\n    } catch (e) {\n      this.setState({\n        error: true,\n        errorMessage: e\n      });\n    }\n  };\n\n  checkCapsLock = event => {\n    if (event.key === \"CapsLock\" && this.state.capsLockOn)\n      this.setState({ capsLockOn: false });\n    else {\n      const capsLock = event.getModifierState(\"CapsLock\");\n      this.setState({ capsLockOn: capsLock });\n    }\n  };\n\n  render() {\n    const { classes, logo } = this.props;\n\n    return (\n      <Grid\n        style={{ paddingTop: \"5%\" }}\n        container\n        direction=\"column\"\n        alignItems=\"center\"\n        justify=\"space-evenly\"\n      >\n        <Paper elevation={10} className={classes.root}>\n          <Grid item>\n            <img\n              src={logo ? logo : defaultLogo}\n              className=\"center\"\n              alt=\"logo\"\n              style={{\n                display: \"block\",\n                marginLeft: \"auto\",\n                marginRight: \"auto\",\n                width: \"50%\"\n              }}\n            />\n          </Grid>\n          <Grid>\n            <Typography align=\"center\" variant=\"subtitle1\" gutterBottom>\n              <FormControl\n                className={classes.formControl}\n                error={this.state.error}\n              >\n                <InputLabel htmlFor=\"component-username-error\">\n                  Username\n                </InputLabel>\n                <Input\n                  id=\"component-username-error\"\n                  value={this.state.username}\n                  aria-describedby=\"component-username-error-text\"\n                  onChange={event =>\n                    this.setState({ username: event.target.value })\n                  }\n                />\n              </FormControl>\n            </Typography>\n          </Grid>\n          <Grid>\n            <Typography align=\"center\" variant=\"subtitle1\" gutterBottom>\n              <FormControl\n                className={classes.formControl}\n                error={this.state.error}\n              >\n                <InputLabel htmlFor=\"component-password-error\">\n                  Password\n                </InputLabel>\n                <Input\n                  id=\"component-password-error\"\n                  type=\"password\"\n                  value={this.state.password}\n                  aria-describedby=\"component-password-error-text\"\n                  onChange={event =>\n                    this.setState({ password: event.target.value })\n                  }\n                  onKeyUp={event => {\n                    this.checkCapsLock(event);\n                    if (event.key === \"Enter\") {\n                      this.sendCreds();\n                    }\n                  }}\n                />\n                {this.state.error && (\n                  <FormHelperText id=\"component-error-text\">\n                    {this.state.errorMessage}\n                  </FormHelperText>\n                )}\n                {this.state.capsLockOn && (\n                  <FormHelperText id=\"component-warning-text\">\n                    Warning: Caps lock is ON!\n                  </FormHelperText>\n                )}\n              </FormControl>\n            </Typography>\n          </Grid>\n          <Grid>\n            <Typography align=\"center\" gutterBottom>\n              <Button onClick={() => this.sendCreds()}>Login</Button>\n            </Typography>\n          </Grid>\n        </Paper>\n      </Grid>\n    );\n  }\n}\n\nLoginForm.propTypes = {\n  logs: PropTypes.any, // expects a svg element\n  setLoggedIn: PropTypes.func\n};\n\nLoginForm.defaultProps = {\n  setLoggedIn: loggedIn => console.log(loggedIn)\n};\n\nexport default withStyles(styles, { withTheme: true })(LoginForm);\n","module.exports = \"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' version='1.0' width='400.000000' height='400.000000' preserveAspectRatio='xMidYMid meet'%3E%3Crect id='backgroundrect' width='100%25' height='100%25' x='0' y='0' fill='none' stroke='none'/%3E %3Cg class='currentLayer' style=''%3E%3Ctitle%3ELayer 1%3C/title%3E%3Cg transform='translate(0,400) scale(0.10000000149011612,-0.10000000149011612) ' fill='%23d31b1b' stroke='none' id='svg_1' class='' fill-opacity='1'%3E %3Cpath d='M1770 3990 c-682 -83 -1271 -501 -1570 -1115 -103 -211 -167 -437 -191 -673 -14 -129 -6 -404 14 -522 85 -495 339 -929 729 -1242 232 -187 539 -332 836 -393 957 -199 1909 314 2272 1224 204 512 180 1116 -64 1606 -115 232 -229 387 -412 565 -296 286 -639 460 -1059 536 -106 19 -443 27 -555 14z m-998 -1105 c3 -3 -23 -48 -57 -99 -113 -172 -182 -338 -226 -546 -32 -149 -33 -448 -1 -593 31 -145 70 -258 134 -387 65 -132 64 -140 -28 -140 -66 0 -100 13 -143 53 -74 70 -71 38 -71 748 0 555 2 642 16 690 43 144 129 236 248 265 54 13 119 18 128 9z m2621 -21 c99 -34 192 -157 216 -288 14 -78 15 -1256 1 -1307 -13 -48 -82 -125 -124 -139 -55 -18 -166 -12 -166 9 0 4 25 57 55 118 195 391 215 839 55 1247 -41 105 -117 247 -176 327 -18 25 -30 49 -26 54 10 11 109 -2 165 -21z m-251 -61 c128 -170 217 -370 265 -594 13 -63 18 -129 18 -264 0 -199 -13 -285 -66 -448 -33 -101 -114 -277 -128 -277 -26 0 -31 80 -32 549 0 267 -4 495 -8 505 -6 16 -20 4 -87 -77 -43 -53 -81 -96 -84 -96 -3 -1 -16 41 -29 92 -27 106 -74 215 -132 304 -32 48 -38 66 -31 80 34 61 243 273 271 273 4 0 23 -21 43 -47z m-2206 15 c52 -39 95 -82 171 -170 l74 -88 -42 -61 c-23 -34 -54 -89 -69 -123 -35 -76 -80 -219 -80 -252 0 -13 -4 -24 -8 -24 -4 0 -43 43 -87 95 -43 52 -83 95 -87 95 -4 0 -8 -224 -9 -497 0 -492 -5 -565 -34 -565 -16 0 -94 166 -130 279 -52 159 -69 294 -62 493 8 230 47 384 147 585 56 112 154 255 174 255 7 0 26 -10 42 -22z m458 -511 l133 -157 -20 -58 c-13 -39 -19 -85 -19 -147 -1 -150 44 -260 151 -365 107 -105 214 -150 361 -150 241 0 443 162 500 399 16 69 8 222 -15 278 l-17 43 132 157 c73 87 136 159 140 161 24 9 119 -186 148 -303 11 -44 22 -104 25 -134 l4 -54 -329 -388 c-343 -405 -362 -424 -466 -455 -101 -31 -258 -12 -341 41 -48 29 -83 69 -607 691 -52 62 -94 121 -94 131 0 52 33 202 60 271 33 86 99 204 112 200 5 -2 68 -74 142 -161z m376 -444 c85 -102 167 -194 182 -204 62 -45 81 -30 292 224 76 92 142 165 146 162 13 -8 20 -110 10 -167 -27 -170 -153 -299 -324 -334 -130 -27 -257 9 -356 102 -61 57 -116 162 -125 239 -8 57 1 165 13 164 4 0 77 -84 162 -186z' id='svg_2' fill='%23d31b1b' fill-opacity='1'/%3E %3C/g%3E%3C/g%3E%3C/svg%3E\"","var api = require(\"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!./Logs.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","import React, { Component, createRef } from \"react\";\nimport LogsFilterBar from \"./LogsFilterBar/LogsFilterBar\";\nimport \"./Logs.css\";\nimport { MasterDB } from \"mov-fe-lib-core\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport RobotLogModal from \"../Modal/RobotLogModal\";\nimport {\n  getRequestLevels,\n  getRequestTags,\n  getRequestMessage,\n  filterByFromToDates,\n  findsUniqueKey,\n  getJustDateFromServer,\n  getJustTimeFromServer\n} from \"./utils/Utils\";\nimport LogsTable from \"./LogsTable/LogsTable\";\nimport _isEqual from \"lodash/isEqual\";\nimport PropTypes from \"prop-types\";\n\nconst UI_TAG = { key: 0, label: \"ui\" };\n\nconst styles = theme => ({\n  tableContainer: {\n    flexGrow: 1,\n    minHeight: 0,\n    overflow: \"hidden\"\n  }\n});\n\nclass Logs extends Component {\n  state = {\n    selectedRobots: [],\n    levels: [\"INFO\", \"ERROR\"],\n    limit: 50,\n    logsData: [],\n    messageRegex: \"\",\n    selectedFromDate: null,\n    selectedToDate: null,\n    columns: [\"Time\", \"Robot\", \"Message\"],\n    tags: this.props.advancedMode ? [] : [UI_TAG],\n    height: 0, //LogsTable height\n    levelsList: this.props.advancedMode\n      ? [\n          { value: \"INFO\", label: \"Info\" },\n          { value: \"WARNING\", label: \"Warnings\" },\n          { value: \"DEBUG\", label: \"Debug\" },\n          { value: \"ERROR\", label: \"Error\" },\n          { value: \"CRITICAL\", label: \"Critical\" }\n        ]\n      : [\n          { value: \"INFO\", label: \"Robot Status\" },\n          { value: \"ERROR\", label: \"Alerts\" }\n        ],\n    advancedMode: this.props.advancedMode\n  };\n  logsTimeout = undefined;\n  logModal = createRef();\n\n  simpleLevelsList = [\n    { value: \"INFO\", label: \"Robot Status\" },\n    { value: \"ERROR\", label: \"Alerts\" }\n  ];\n\n  advancedLevelsList = [\n    { value: \"INFO\", label: \"Info\" },\n    { value: \"WARNING\", label: \"Warnings\" },\n    { value: \"DEBUG\", label: \"Debug\" },\n    { value: \"ERROR\", label: \"Error\" },\n    { value: \"CRITICAL\", label: \"Critical\" }\n  ];\n\n  resizeHandler() {\n    const height = this.divElement.clientHeight;\n    this.setState({ height });\n  }\n\n  componentDidMount() {\n    this.updateSelectedRobots();\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (_isEqual(prevProps.robotsData, this.props.robotsData)) return;\n    this.updateSelectedRobots();\n  }\n\n  updateSelectedRobots = () => {\n    if (\n      this.props.robotsData.length &&\n      this.props.robotsData.filter(robot => robot.ip).length\n    )\n      this.setSelectedRobots(\n        this.props.robotsData.map(elem => ({ ...elem, isSelected: true }))\n      );\n  };\n\n  componentWillUnmount() {\n    if (this.logsTimeout) {\n      clearTimeout(this.logsTimeout);\n    }\n  }\n\n  // This function is responsible to check/unckeck the list of robots\n  updateRobotSelection = robotId => {\n    const selectedRobots = [...this.state.selectedRobots];\n    const updateRobot =\n      selectedRobots[selectedRobots.findIndex(elem => elem.id === robotId)];\n    updateRobot.isSelected = !updateRobot.isSelected;\n    this.setState({ selectedRobots });\n  };\n\n  setSelectedRobots = selectedRobots => {\n    clearTimeout(this.logsTimeout);\n    this.setState({ selectedRobots });\n    this.getLogs(selectedRobots);\n  };\n\n  getLogs = async robots => {\n    await Promise.all(\n      robots\n        .filter(robot => robot.robotState !== this.props.robotStates.off) // If robot is offline doesn't bother making the request\n        .filter(robot => robot.isSelected)\n        .map(robot => this.getRobotLogData(robot))\n    ).then(dataArrays => {\n      this.setState(prevState => {\n        const finalArray = dataArrays.reduce((all, dataArray) => {\n          dataArray && dataArray.forEach(data => all.push(data));\n          return all;\n        }, []);\n        this.logsTimeout = setTimeout(\n          this.getLogs,\n          3000,\n          prevState.selectedRobots\n        );\n        return { logsData: finalArray.sort((a, b) => b.time - a.time) };\n      });\n    });\n  };\n\n  getRobotLogData = robotSelected => {\n    return new Promise((re, rej) => {\n      // Failsafe timer to prevent the promise all from hanging\n      const timeoutHandle = setTimeout(() => {\n        console.error(\"MOV.AI: One of the promises reached timeout\");\n        re([]);\n      }, 2000);\n\n      if (robotSelected.ip) {\n        const dynamicURL = `http://${\n          robotSelected.ip\n        }/api/v1/logs/?${getRequestLevels(\n          this.state.levels,\n          this.state.levelsList\n        )}&limit=${this.state.limit}${getRequestTags(\n          this.state.tags\n        )}${getRequestMessage(this.state.messageRegex)}`;\n\n        MasterDB.get(dynamicURL, (res, e) => {\n          re(res?.data || []);\n          clearTimeout(timeoutHandle);\n        });\n      } else {\n        re([]);\n      }\n    }).catch(() => console.log(\"Failed getRobotLogData\"));\n  };\n\n  onRowClick = log => {\n    this.logModal.current.open(log.rowData);\n  };\n\n  render() {\n    return (\n      <div\n        style={{\n          width: \"100%\",\n          height: \"100%\",\n          display: \"flex\",\n          flexDirection: \"column\"\n        }}\n      >\n        <div\n          style={{\n            flexGrow: \"1\",\n            height: \"100%\",\n            display: \"flex\",\n            flexDirection: \"column\"\n          }}\n        >\n          <LogsFilterBar\n            selectedRobots={this.state.selectedRobots}\n            updateRobotSelection={this.updateRobotSelection}\n            levels={this.state.levels}\n            levelsList={this.state.levelsList}\n            handleLevels={event => {\n              this.setState({ levels: event.target.value });\n            }}\n            limit={this.state.limit}\n            handleLimit={evt => {\n              if (evt.target.value === \"\") {\n                this.setState({ limit: 0 });\n              } else {\n                this.setState({ limit: evt.target.value });\n              }\n            }}\n            columns={this.state.columns}\n            columnList={this.props.columnList}\n            handleColumns={event => {\n              // make sure columns are always with the same order\n              const columns = Object.keys(this.props.columnList).filter(elem =>\n                event.target.value.includes(elem)\n              );\n              this.setState({ columns });\n            }}\n            tags={this.state.tags}\n            handleAddTag={tagText => {\n              const { tags } = this.state;\n              // Don't add tag if it's empty or duplicate\n              if (\n                tagText !== \"\" &&\n                tags.findIndex(elem => elem.label === tagText) < 0\n              ) {\n                tags.push({\n                  key: findsUniqueKey(tags, \"key\"),\n                  label: tagText\n                });\n                this.setState({ tags });\n              }\n            }}\n            handleDeleteTag={tagToDelete => {\n              const { tags } = this.state;\n              const filteredTags = tags.filter(\n                tag => tag.key !== tagToDelete.key\n              );\n              this.setState({ tags: filteredTags });\n            }}\n            messageRegex={this.state.messageRegex}\n            handleMessageRegex={text => this.setState({ messageRegex: text })}\n            selectedFromDate={this.state.selectedFromDate}\n            selectedToDate={this.state.selectedToDate}\n            handleDateChange={(newDate, keyToChange) => {\n              this.setState({ [keyToChange]: newDate });\n            }}\n            advancedMode={this.state.advancedMode}\n            handleAdvancedMode={evt => {\n              // Toggle advanced mode: change the levels\n              const advancedMode = !this.state.advancedMode;\n              this.setState({\n                advancedMode: advancedMode,\n                levelsList: this.state.advancedMode\n                  ? this.simpleLevelsList\n                  : this.advancedLevelsList,\n                tags: advancedMode ? [] : [UI_TAG]\n              });\n            }}\n          ></LogsFilterBar>\n          <div\n            ref={divElement => {\n              this.divElement = divElement;\n            }}\n            className={this.props.classes.tableContainer}\n          >\n            <LogsTable\n              columns={this.state.columns}\n              columnList={this.props.columnList}\n              logsData={filterByFromToDates(\n                this.state.logsData,\n                this.state.selectedFromDate,\n                this.state.selectedToDate\n              )}\n              height={this.state.height}\n              levelsList={this.state.levelsList}\n              onRowClick={this.onRowClick}\n            ></LogsTable>\n          </div>\n        </div>\n        <RobotLogModal\n          ref={this.logModal}\n          props={[\"module\", \"service\"]}\n        ></RobotLogModal>\n      </div>\n    );\n  }\n}\n\nLogs.propTypes = {\n  robotsData: PropTypes.array,\n  robotStates: PropTypes.object,\n  columnList: PropTypes.object,\n  advancedMode: PropTypes.bool\n};\nLogs.defaultProps = {\n  robotsData: [\n    {\n      name: \"robot\",\n      id: \"032cf6207ff34ad0a68cc45034f61b41\",\n      timestamp: 1604334778.6494586,\n      robotState: \"okay\",\n      battery: 78,\n      ip: \"127.0.0.1\"\n    },\n    {\n      name: \"robot_test\",\n      id: \"4df900e30cb44adba33ae74bb2596d88\",\n      timestamp: 1603969723.997914,\n      robotState: \"off\",\n      battery: 22,\n      ip: \"127.0.0.1\"\n    }\n  ],\n  robotStates: {\n    error: \"error\",\n    temp: \"temp\",\n    okay: \"okay\",\n    off: \"off\"\n  },\n  columnList: {\n    Date: {\n      label: \"Date\",\n      dataKey: \"time\",\n      width: 100,\n      render: time => getJustDateFromServer(time)\n    },\n    Time: {\n      label: \"Time\",\n      dataKey: \"time\",\n      width: 100,\n      render: time => getJustTimeFromServer(time)\n    },\n    Level: {\n      label: \"Level\",\n      dataKey: \"level\",\n      width: 100\n    },\n    Module: {\n      label: \"Module\",\n      dataKey: \"module\",\n      width: 100\n    },\n    Robot: {\n      label: \"Robot\",\n      dataKey: \"robot\",\n      width: 100\n    },\n    Message: {\n      label: \"Message\",\n      dataKey: \"message\",\n      width: 100\n    }\n  },\n  advancedMode: false\n};\n\nexport default withStyles(styles, { withTheme: true })(Logs);\n","import React, { Component } from \"react\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport Menu from \"@material-ui/core/Menu\";\nimport { Typography, Tooltip } from \"@material-ui/core\";\nimport { fade } from \"@material-ui/core/styles/colorManipulator\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport PropTypes from \"prop-types\";\n\nconst styles = theme => ({\n  button: {\n    margin: theme.spacing(1),\n    color: theme.palette.primary.main,\n    borderColor: theme.palette.primary.main\n  },\n  iconActive: {\n    color: theme.palette.primary.main,\n    borderColor: theme.palette.primary.main,\n    backgroundColor: fade(theme.palette.primary.main, 0.1)\n  },\n  buttonApplyFilters: {\n    background: theme.palette.primary.main,\n    fontFamily: \"Roboto\",\n    fontStyle: \"normal\",\n    fontWeight: \"bold\",\n    fontSize: \"14px\",\n    color: \"#FAFAFA\",\n    margin: \"0px 20px 10px 20px\",\n    \"&:hover\": { background: theme.palette.primary.dark }\n  },\n  icon: {\n    // fontSize: \"18px\",\n    // height: \"21px\",\n    // width: \"15px\",\n    //color: theme.palette.primary.main,\n    \"&:hover\": { cursor: \"pointer\" }\n  },\n  height: { height: \"100%\" },\n  checkbox: { marginLeft: \"10px\" },\n  limitText: {\n    width: \"50px\",\n    margin: theme.spacing(0, 3, 0, 3)\n  }\n});\n\nconst StyledMenu = withStyles(theme => ({\n  paper: {\n    // border: \"1px solid #F0F0F0\",\n    borderRadius: \"8px\",\n    width: \"242px\",\n    height: \"411px\",\n    boxShadow: \"2px 2px 4px rgba(0, 0, 0, 0.25)\"\n  }\n}))(props => (\n  <Menu\n    elevation={0}\n    getContentAnchorEl={null}\n    anchorOrigin={{\n      vertical: \"bottom\",\n      horizontal: \"center\"\n    }}\n    transformOrigin={{\n      vertical: \"top\",\n      horizontal: \"center\"\n    }}\n    autoFocus={false}\n    {...props}\n  />\n));\n\nclass FilterIcon extends Component {\n  state = { anchorEl: null, otherFilters: [] };\n\n  handleClick = event => {\n    this.setState({ anchorEl: event.currentTarget });\n  };\n\n  handleClose = () => {\n    this.setState({\n      anchorEl: null,\n      otherFilters: []\n    });\n  };\n\n  render() {\n    const { classes, t, disabled, tooltip, title } = this.props;\n    return (\n      <React.Fragment>\n        <Tooltip title={tooltip || title}>\n          <IconButton\n            size=\"small\"\n            onClick={this.handleClick}\n            disabled={disabled}\n            className={this.props.isActive ? classes.iconActive : classes.icon}\n          >\n            {this.props.icon}\n          </IconButton>\n        </Tooltip>\n        <StyledMenu\n          id=\"customized-menu\"\n          anchorEl={this.state.anchorEl}\n          open={Boolean(this.state.anchorEl)}\n          onClose={this.handleClose}\n          className={classes.height}\n        >\n          <div\n            style={{\n              display: \"flex\",\n              flexDirection: \"column\",\n              height: \"-webkit-fill-available\"\n            }}\n          >\n            <Typography\n              component=\"div\"\n              style={{\n                padding: \"10px 10px 0px 20px\",\n                display: \"flex\",\n                flexDirection: \"row\"\n              }}\n            >\n              <Typography\n                component=\"div\"\n                style={{\n                  fontSize: \"24px\",\n                  fontFamily: \"Open Sans\",\n                  fontWeight: 500\n                }}\n              >\n                {this.props.title}\n              </Typography>\n              <Typography\n                component=\"div\"\n                style={{\n                  flexGrow: 1\n                }}\n              ></Typography>\n              <Typography\n                component=\"div\"\n                onClick={this.handleClose}\n                className={classes.icon}\n              >\n                <i className=\"fas fa-times\"></i>\n              </Typography>\n            </Typography>\n            <div\n              style={{\n                flexGrow: 1,\n                display: \"flex\",\n                flexDirection: \"column\",\n                margin: \"10px 0px 0px 10px\"\n              }}\n            >\n              {this.props.children}\n            </div>\n          </div>\n        </StyledMenu>\n      </React.Fragment>\n    );\n  }\n}\n\nFilterIcon.propTypes = {\n  isActive: PropTypes.bool,\n  disabled: PropTypes.bool,\n  tooltip: PropTypes.string,\n  title: PropTypes.string\n};\n\nFilterIcon.defaultProps = {\n  isActive: false,\n  disabled: false,\n  tooltip: \"\",\n  title: \"Filters\"\n};\n\nexport default withStyles(styles, { withTheme: true })(FilterIcon);\n","import React, { memo } from \"react\";\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport SearchIcon from \"@material-ui/icons/Search\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport {\n  AppBar,\n  FormControlLabel,\n  Switch,\n  TextField,\n  Toolbar\n} from \"@material-ui/core\";\nimport ResetSearch from \"@material-ui/icons/Close\";\nimport FiltersIcon from \"./FiltersIcon/FiltersIcon\";\nimport LabelIcon from \"@material-ui/icons/Label\";\nimport Chip from \"@material-ui/core/Chip\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport TodayIcon from \"@material-ui/icons/Today\";\nimport { Typography } from \"@material-ui/core\";\nimport Input from \"@material-ui/core/Input\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport Select from \"@material-ui/core/Select\";\nimport SettingsIcon from \"@material-ui/icons/Settings\";\nimport Checkbox from \"@material-ui/core/Checkbox\";\nimport {\n  KeyboardDateTimePicker,\n  MuiPickersUtilsProvider\n} from \"@material-ui/pickers\";\nimport DateFnsUtils from \"@date-io/date-fns\";\nimport PropTypes from \"prop-types\";\nimport _isEqual from \"lodash/isEqual\";\nimport _get from \"lodash/get\";\n\nconst useStyles = makeStyles(theme => ({\n  input: {\n    flex: 1,\n    paddingLeft: \"10px\",\n    fontSize: \"medium\"\n  },\n  searchText: {\n    minWidth: 150,\n    paddingLeft: theme.spacing(3)\n  },\n  addTagText: {\n    width: \"100%\"\n  },\n  limitText: {\n    width: \"50px\",\n    margin: theme.spacing(0, 3, 0, 3)\n  },\n  toggleContainer: {\n    margin: theme.spacing(2)\n  },\n  tagsContainer: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    padding: theme.spacing(0.5),\n    margin: theme.spacing(0, 3, 0, 3)\n  },\n  tagsList: {\n    marginTop: theme.spacing(3)\n  },\n  chip: {\n    margin: theme.spacing(0.5)\n  },\n  formControl: {\n    margin: theme.spacing(1),\n    minWidth: 120,\n    maxWidth: 300\n  },\n  filtersButton: {\n    display: \"flex\",\n    flexDirection: \"row\"\n  },\n  columnsFilter: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    marginTop: 6\n  },\n  iconButton: {\n    color: \"#0B6A8A\",\n    \"&:hover\": {\n      color: \"#22c7ff\"\n    }\n  }\n}));\n\nconst LogsFilterBar = props => {\n  const classes = useStyles();\n  const [tagText, setTagText] = React.useState(\"\");\n\n  const handleRobotChange = event => {\n    const arrayEvent = event?.target?.value;\n    const selectedId = arrayEvent[arrayEvent.length - 1];\n    props.updateRobotSelection(selectedId);\n  };\n  const getRobotSelector = () => {\n    return (\n      <div className={classes.toggleContainer}>\n        <svg\n          width=\"20\"\n          height=\"18\"\n          viewBox=\"0 0 30 27\"\n          fill=\"none\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n          style={{ paddingTop: \"5px\", paddingRight: \"5px\" }}\n        >\n          <path\n            fillRule=\"evenodd\"\n            clipRule=\"evenodd\"\n            d=\"M16.7753 1.35706L15.9587 2.61119L16.3648 2.87846L18.4001 4.18898L17.1052 6.20016H25.437C26.5487 6.20016 27.45 7.10137 27.45 8.21307V12.8244H28.0955C28.6514 12.8244 29.102 13.275 29.102 13.8308V16.0643C29.102 16.6201 28.6514 17.0707 28.0955 17.0707H27.45V21.2901C27.45 22.4018 26.5487 23.303 25.437 23.303H4.12161C3.00991 23.303 2.1087 22.4017 2.1087 21.29V17.0707H1.42467C0.868819 17.0707 0.418213 16.6201 0.418213 16.0643V13.8308C0.418213 13.275 0.868819 12.8244 1.42467 12.8244H2.1087V8.21307C2.1087 7.10137 3.00991 6.20016 4.12161 6.20016H13.5141L14.8252 4.16395L13.2875 3.15192L13.2966 3.13812L13.2875 3.1322L15.1377 0.290771L16.7753 1.35706ZM24.4306 9.21953H5.12807V20.2836H24.4306V9.21953ZM7.18098 12.1324C6.68518 12.1324 6.28325 12.5343 6.28325 13.0301C6.28325 13.5259 6.68518 13.9278 7.18098 13.9278H9.04635C9.54216 13.9278 9.94409 13.5259 9.94409 13.0301C9.94409 12.5343 9.54216 12.1324 9.04635 12.1324H7.18098ZM20.6901 12.1324C20.1943 12.1324 19.7924 12.5343 19.7924 13.0301C19.7924 13.5259 20.1943 13.9278 20.6901 13.9278H22.5555C23.0513 13.9278 23.4532 13.5259 23.4532 13.0301C23.4532 12.5343 23.0513 12.1324 22.5555 12.1324H20.6901ZM9.17669 17.6512H11.3239V19.253H9.17669V17.6512ZM14.3432 17.6513H12.196V19.253H14.3432V17.6513ZM15.2154 17.6513H17.3626V19.253H15.2154V17.6513ZM20.382 17.6513H18.2348V19.253H20.382V17.6513ZM10.9568 23.69H18.6019V25.7029C18.6019 26.2587 18.1513 26.7093 17.5954 26.7093H11.9632C11.4074 26.7093 10.9568 26.2587 10.9568 25.7029V23.69Z\"\n            fill=\"#9E9E9E\"\n          />\n        </svg>\n        <FormControl className={classes.formControl}>\n          <Select\n            labelId=\"select-label\"\n            id=\"select\"\n            multiple\n            value={props.selectedRobots}\n            onChange={handleRobotChange}\n            renderValue={selected => {\n              const selectedNames = selected\n                .filter(({ isSelected }) => isSelected)\n                .map(({ name }) => name);\n              return selectedNames.length > 2\n                ? [selectedNames[0], selectedNames[1]].join(\" , \") + \"...\"\n                : selectedNames.join(\" , \");\n            }}\n            input={<Input />}\n            MenuProps={MenuProps}\n          >\n            {/* <MenuItem key={`robotList-Default`} value={robotDefault}>\n              Default\n            </MenuItem> */}\n            {props.selectedRobots.map((robot, robotIndex) => {\n              return (\n                <MenuItem key={`robotList-${robotIndex}`} value={robot.id}>\n                  <Checkbox checked={robot.isSelected} />\n                  <ListItemText primary={robot.name} />\n                </MenuItem>\n              );\n            })}\n          </Select>\n        </FormControl>\n      </div>\n    );\n  };\n\n  const getSearchInput = () => {\n    return (\n      <TextField\n        className={classes.searchText}\n        label=\"\"\n        placeholder=\"Search (regex)\"\n        value={props.messageRegex}\n        onChange={evt => props.handleMessageRegex(evt.target.value)}\n        InputProps={{\n          startAdornment: (\n            <InputAdornment style={{ paddingRight: 8 }}>\n              <SearchIcon fontSize=\"small\" />\n            </InputAdornment>\n          ),\n          endAdornment: (\n            <InputAdornment position=\"end\">\n              <IconButton\n                disabled={!props.messageRegex}\n                onClick={() => props.handleMessageRegex(\"\")}\n              >\n                <ResetSearch color=\"inherit\" fontSize=\"small\" />\n              </IconButton>\n            </InputAdornment>\n          )\n        }}\n        size=\"small\"\n      />\n    );\n  };\n\n  const getLevels = () => {\n    return (\n      <div className={classes.toggleContainer}>\n        <FormControl className={classes.formControl}>\n          <Select\n            labelId=\"demo-mutiple-checkbox-label\"\n            id=\"demo-mutiple-checkbox\"\n            style={{ minWidth: \"290px\" }}\n            multiple\n            value={props.levels}\n            onChange={props.handleLevels}\n            input={<Input />}\n            renderValue={selected => {\n              // selected comes from state, for example [\"ERROR\", \"INFO\"]\n              // but want to show the lables, for example [\"Alerts\", \"State of Robot\"]\n              const labels = props.levelsList\n                .filter(level => selected.includes(level.value))\n                .map(elem => elem.label);\n              return labels.join(\", \");\n            }}\n            MenuProps={MenuProps}\n          >\n            {props.levelsList.map(level => (\n              <MenuItem key={level.value} value={level.value}>\n                <Checkbox checked={props.levels.indexOf(level.value) > -1} />\n                <ListItemText primary={level.label} />\n              </MenuItem>\n            ))}\n          </Select>\n        </FormControl>\n      </div>\n    );\n  };\n\n  const getTags = isAdvancedMode => {\n    return (\n      <FiltersIcon\n        icon={<LabelIcon></LabelIcon>}\n        title=\"Tags\"\n        disabled={!isAdvancedMode}\n        isActive={props.tags.length > 0}\n      >\n        <div className={classes.tagsContainer}>\n          <TextField\n            className={classes.addTagText}\n            value={tagText}\n            onChange={evt => setTagText(evt.target.value)}\n            onKeyUp={event => {\n              // User pressed Enter\n              if (event.keyCode === 13) {\n                props.handleAddTag(tagText);\n                setTagText(\"\");\n              }\n            }}\n            label=\"Add Tag\"\n            InputProps={{\n              endAdornment: (\n                <InputAdornment>\n                  <IconButton\n                    onClick={() => {\n                      props.handleAddTag(tagText);\n                      setTagText(\"\");\n                    }}\n                  >\n                    <AddIcon />\n                  </IconButton>\n                </InputAdornment>\n              )\n            }}\n            size=\"small\"\n          />\n          <div className={classes.tagsList}>\n            {props.tags.map(data => {\n              return (\n                <li key={data.key}>\n                  <Chip\n                    label={data.label}\n                    onDelete={() => props.handleDeleteTag(data)}\n                    className={classes.chip}\n                    size=\"small\"\n                  />\n                </li>\n              );\n            })}\n          </div>\n        </div>\n      </FiltersIcon>\n    );\n  };\n\n  const getTimeFilters = () => {\n    return (\n      <FiltersIcon\n        icon={<TodayIcon></TodayIcon>}\n        title={props.t(\"Date Range\")}\n        isActive={\n          props.selectedFromDate !== null || props.selectedToDate !== null\n        }\n      >\n        {/* From -> To Date */}\n        <MuiPickersUtilsProvider utils={DateFnsUtils}>\n          <KeyboardDateTimePicker\n            key=\"time-picker\"\n            size=\"small\"\n            variant=\"inline\"\n            ampm={false}\n            label={props.t(\"From date\")}\n            value={props.selectedFromDate}\n            onChange={newDate =>\n              props.handleDateChange(newDate, \"selectedFromDate\")\n            }\n            onError={console.log}\n            format=\"yyyy/MM/dd HH:mm\"\n          />\n          <KeyboardDateTimePicker\n            key=\"time-picker2\"\n            size=\"small\"\n            variant=\"inline\"\n            ampm={false}\n            label={props.t(\"To date\")}\n            value={props.selectedToDate}\n            onChange={newDate =>\n              props.handleDateChange(newDate, \"selectedToDate\")\n            }\n            onError={console.log}\n            format=\"yyyy/MM/dd HH:mm\"\n          />\n        </MuiPickersUtilsProvider>\n      </FiltersIcon>\n    );\n  };\n\n  const getSettings = () => {\n    return (\n      <FiltersIcon\n        icon={<SettingsIcon></SettingsIcon>}\n        title={props.t(\"Configuration\")}\n      >\n        {/* Advanced/Simple Mode */}\n        <FormControlLabel\n          control={\n            <Switch\n              checked={props.advancedMode}\n              onChange={props.handleAdvancedMode}\n            />\n          }\n          label={props.advancedMode ? \"Advanced\" : \"Simple\"}\n        />\n        <div className={classes.filtersButton}>\n          {/* Limit Input */}\n          <Typography\n            component=\"div\"\n            style={{\n              fontSize: \"1rem\",\n              fontFamily: \"Open Sans\",\n              fontWeight: 500\n            }}\n          >\n            {`${props.t(\"Limit p/Robot\")}:`}\n          </Typography>\n          <TextField\n            value={props.limit}\n            onChange={props.handleLimit}\n            className={classes.limitText}\n            id=\"outlined-number\"\n            // label=\"limit\"\n            placeholder={props.t(\"limit\")}\n            type=\"number\"\n            InputLabelProps={{\n              shrink: true\n            }}\n            // variant=\"outlined\"\n            size=\"small\"\n          />\n        </div>\n        <div className={classes.columnsFilter}>\n          {/* Limit Input */}\n          <Typography\n            component=\"div\"\n            style={{\n              fontSize: \"1rem\",\n              fontFamily: \"Open Sans\",\n              fontWeight: 500\n            }}\n          >\n            {`${props.t(\"Columns\")}:`}\n          </Typography>\n          <FormControl className={classes.formControl}>\n            <Select\n              labelId=\"demo-mutiple-checkbox-label\"\n              id=\"demo-mutiple-checkbox\"\n              multiple\n              value={props.columns}\n              onChange={props.handleColumns}\n              input={<Input />}\n              renderValue={selected =>\n                selected\n                  .map(elem => _get(props, `columnList[${elem}].label`, \"\"))\n                  .join(`, `)\n              }\n              MenuProps={MenuProps}\n            >\n              {Object.keys(props.columnList).map((column, index) => {\n                return (\n                  <MenuItem key={index} value={column}>\n                    <Checkbox checked={props.columns.indexOf(column) > -1} />\n                    <ListItemText primary={props.columnList[column].label} />\n                  </MenuItem>\n                );\n              })}\n            </Select>\n          </FormControl>\n        </div>\n      </FiltersIcon>\n    );\n  };\n\n  return (\n    <AppBar position=\"static\" color=\"inherit\">\n      <Toolbar variant=\"dense\">\n        {getRobotSelector()}\n        {/* Search Input */}\n        {getSearchInput()}\n        {/* Toggle: INFO, DEBUG, ERROR, CRITICAL */}\n        {getLevels()}\n        {/* Tags */}\n        {getTags(props.advancedMode)}\n        {/* Date time filter */}\n        {getTimeFilters()}\n        <div style={{ flexGrow: 1 }}></div>\n        {getSettings()}\n      </Toolbar>\n    </AppBar>\n  );\n};\n\nconst ITEM_HEIGHT = 48;\nconst ITEM_PADDING_TOP = 8;\nconst MenuProps = {\n  PaperProps: {\n    style: {\n      maxHeight: ITEM_HEIGHT * 4.5 + ITEM_PADDING_TOP,\n      width: 250\n    }\n  },\n  getContentAnchorEl: null\n};\n\nLogsFilterBar.propTypes = {\n  levels: PropTypes.array,\n  levelsList: PropTypes.array,\n  handleLevels: PropTypes.func,\n  limit: PropTypes.number,\n  handleLimit: PropTypes.func,\n  columns: PropTypes.array,\n  columnList: PropTypes.object,\n  handleColumns: PropTypes.func,\n  handleDeleteTag: PropTypes.func,\n  messageRegex: PropTypes.string,\n  handleMessageRegex: PropTypes.func,\n  selectedFromDate: PropTypes.string,\n  selectToDate: PropTypes.string,\n  handleDateChange: PropTypes.func,\n  selectedRobots: PropTypes.array,\n  updateRobotSelection: PropTypes.func,\n  advancedMode: PropTypes.bool,\n  handleAdvancedMode: PropTypes.func,\n  t: PropTypes.func\n};\n\nLogsFilterBar.defaultProps = {\n  levels: [],\n  levelsList: [],\n  handleLevels: () => {},\n  limit: 1,\n  handleLimit: () => {},\n  columns: [],\n  columnList: {},\n  handleColumns: () => {},\n  handleDeleteTag: () => {},\n  messageRegex: \"\",\n  handleMessageRegex: () => {},\n  selectedFromDate: \"\",\n  selectToDate: \"\",\n  handleDateChange: () => {},\n  selectedRobots: [],\n  updateRobotSelection: () => {},\n  advancedMode: false,\n  handleAdvancedMode: () => {},\n  t: string => string\n};\n\n//The function returns true when the compared props equal, preventing the component from re-rendering\nfunction arePropsEqual(prevProps, nextProps) {\n  return _isEqual(prevProps, nextProps);\n}\n\nexport default memo(LogsFilterBar, arePropsEqual);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport clsx from \"clsx\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport { AutoSizer, Column, Table } from \"react-virtualized\";\nimport { colorCoding } from \"../utils/Utils\";\n\nconst useStyles = makeStyles(theme => {\n  return {\n    flexContainer: {\n      display: \"flex\",\n      alignItems: \"center\",\n      boxSizing: \"border-box\"\n    },\n    table: {\n      // temporary right-to-left patch, waiting for\n      // // https://github.com/bvaughn/react-virtualized/issues/454\n      \"& .ReactVirtualized__Table__headerRow\": {\n        flip: false,\n        paddingRight: theme.direction === \"rtl\" ? \"0 !important\" : undefined\n      }\n    },\n    tableRow: {\n      cursor: \"pointer\"\n    },\n    tableRowHover: {\n      \"&:hover\": {\n        backgroundColor: \"rgba(0, 5, 58, 0.3)\"\n      }\n    },\n    tableCell: {\n      flexGrow: 1,\n      whiteSpace: \"nowrap\",\n      overflow: \"hidden\",\n      textOverflow: \"ellipsis\",\n      display: \"inline-block\"\n    },\n    flexColumn: {\n      flex: 1,\n      alignItems: \"center\"\n    },\n    noClick: {\n      cursor: \"initial\"\n    },\n    ...colorCoding\n  };\n});\n\nconst MuiVirtualizedTable = props => {\n  const { columns, rowHeight, headerHeight, onRowClick, ...tableProps } = props;\n  const classes = useStyles();\n\n  const getRowClassName = ({ index }) => {\n    const { data } = props;\n    const rowData = data[index];\n    return clsx(\n      classes.tableRow,\n      classes.flexContainer,\n      index !== -1 && classes[rowData.level],\n      {\n        [classes.tableRowHover]: index !== -1 && onRowClick != null\n      }\n    );\n  };\n\n  const cellRenderer = render => ({ cellData, columnIndex }) => {\n    return (\n      <TableCell\n        component=\"div\"\n        className={`${classes.tableCell} ${classes.flexContainer}`}\n        variant=\"body\"\n        style={{ height: rowHeight }}\n        align={\n          (columnIndex != null && columns[columnIndex].numeric) || false\n            ? \"right\"\n            : \"left\"\n        }\n      >\n        {render ? render(cellData) : cellData}\n      </TableCell>\n    );\n  };\n\n  const headerRenderer = ({ label, columnIndex }) => {\n    return (\n      <TableCell\n        component=\"div\"\n        className={clsx(\n          classes.tableCell,\n          classes.flexContainer,\n          classes.noClick\n        )}\n        variant=\"head\"\n        style={{ height: headerHeight }}\n        align={columns[columnIndex].numeric || false ? \"right\" : \"left\"}\n      >\n        <span>{label}</span>\n      </TableCell>\n    );\n  };\n\n  return (\n    <AutoSizer>\n      {({ height, width }) => (\n        <Table\n          height={height}\n          width={width}\n          onRowClick={onRowClick}\n          rowHeight={rowHeight}\n          gridStyle={{\n            direction: \"inherit\"\n          }}\n          headerHeight={headerHeight}\n          className={classes.table}\n          {...tableProps}\n          rowClassName={getRowClassName}\n        >\n          {columns.map(({ dataKey, render, ...other }, index) => {\n            return (\n              <Column\n                key={dataKey}\n                headerRenderer={headerProps => {\n                  return headerRenderer({\n                    ...headerProps,\n                    columnIndex: index\n                  });\n                }}\n                flexGrow={dataKey === \"message\" ? 1 : undefined}\n                className={classes.flexContainer}\n                cellRenderer={cellRenderer(render)}\n                dataKey={dataKey}\n                {...other}\n              />\n            );\n          })}\n        </Table>\n      )}\n    </AutoSizer>\n  );\n};\n\n// const VirtualizedTable = withStyles(styles)(MuiVirtualizedTable);\n\nexport default function LogsTable(props) {\n  return (\n    <MuiVirtualizedTable\n      rowHeight={48}\n      headerHeight={48}\n      rowCount={props.logsData.length}\n      rowGetter={({ index }) => props.logsData[index]}\n      data={props.logsData}\n      columns={props.columns.map(elem => props.columnList[elem])}\n      onRowClick={props.onRowClick}\n    />\n  );\n}\n\nLogsTable.propTypes = {\n  columns: PropTypes.array,\n  columnList: PropTypes.object,\n  logsData: PropTypes.array,\n  height: PropTypes.number,\n  onRowClick: PropTypes.func\n};\n\nLogsTable.defaultProps = {\n  columns: [],\n  columnList: {},\n  logsData: [],\n  height: 10\n};\n","import React from \"react\";\nimport _isEmpty from \"lodash/isEmpty\";\n\n// export const levels = [\n//   { value: \"INFO\", label: i18n.t(\"Robot Status\") },\n//   // { value: \"WARNING\", label: \"Warnings\" },\n//   // { value: \"DEBUG\", label: \"Debug\" },\n//   { value: \"ERROR\", label: i18n.t(\"Alerts\") }\n//   // { value: \"CRITICAL\", label: \"Critical\" }\n// ];\n\nexport const colorCoding = {\n  INFO: {\n    backgroundColor: \"rgba(33, 150, 243, 0.1)\"\n  },\n  WARNING: {\n    backgroundColor: \"rgba(255, 152, 0, 0.1)\"\n  },\n  DEBUG: {\n    backgroundColor: \"rgba(76, 175, 80, 0.1)\"\n  },\n  ERROR: {\n    backgroundColor: \"rgba(244, 67, 54, 0.1)\"\n  },\n  CRITICAL: {\n    backgroundColor: \"rgba(255, 19, 1, 0.1)\"\n  }\n};\n\n// export const fixedColumns = {\n//   Date: {\n//     label: i18n.t(\"Date\"),\n//     dataKey: \"time\",\n//     width: 100,\n//     render: time => getJustDateFromServer(time)\n//   },\n//   Time: {\n//     label: i18n.t(\"Time\"),\n//     dataKey: \"time\",\n//     render: time => getJustTimeFromServer(time),\n//     width: 100\n//   },\n//   Level: {\n//     label: i18n.t(\"Level\"),\n//     dataKey: \"level\",\n//     width: 100\n//   },\n//   Module: {\n//     label: i18n.t(\"Module\"),\n//     dataKey: \"module\",\n//     width: 100\n//   },\n//   Function: {\n//     label: \"Function\",\n//     dataKey: \"funcName\",\n//     width: 100\n//   },\n//   Callback: {\n//     label: i18n.t(\"Callback\"),\n//     dataKey: \"callback\",\n//     width: 100\n//   },\n//   Node: {\n//     label: i18n.t(\"Node\"),\n//     dataKey: \"node\",\n//     width: 100\n//   },\n//   Fleet: {\n//     label: i18n.t(\"Fleet\"),\n//     dataKey: \"fleet\",\n//     width: 100\n//   },\n//   Robot: {\n//     label: i18n.t(\"Robot\"),\n//     dataKey: \"robot\",\n//     width: 100\n//   },\n//   Message: {\n//     label: i18n.t(\"Message\"),\n//     dataKey: \"message\",\n//     width: 100\n//   }\n// };\n\n// Makes sure to find unique \"i\" of chip array\n// Input: [{key: 0, label: \"Chip1\"}, {key: 2, label: \"Chip3\"}], keyName= \"key\"\n// Output: 1\nexport function findsUniqueKey(array, keyName) {\n  const length = array.length;\n  // If empty, return 0\n  if (length === 0 || array === undefined) {\n    return 0;\n  }\n  for (let k = 0; k < length; k++) {\n    for (let j = 0; j < length; j++) {\n      if (k === array[j][keyName]) {\n        break;\n      }\n      if (j === length - 1) {\n        return k;\n      }\n    }\n  }\n\n  return length;\n}\n\n// Converts the levels in the state for the string for the request\n//  Input: [\"INFO\", \"DEBUG\"]\n//  Output: \"level=info,debug\"\nexport function getRequestLevels(levelsArray, levelsList) {\n  let res = \"\";\n  if (Array.isArray(levelsArray) && levelsArray.length === levelsList.length) {\n    return res;\n  }\n\n  try {\n    levelsArray.forEach(level => {\n      if (res === \"\") {\n        res = `${level.toLowerCase()}`;\n      } else {\n        res = `${res},${level.toLowerCase()}`;\n      }\n    });\n    return `level=${res}`;\n  } catch (error) {\n    return \"\";\n  }\n}\n// Converts the levels in the state for the string for the request\n//  Input: [{ key: 0, label: \"UI\" }, { key: 1, label: \"TASKS\" }]\n//  Output: \"&tags=UI,TASKS\"\nexport function getRequestTags(tagsArray) {\n  let res = \"\";\n\n  if (_isEmpty(tagsArray)) {\n    return res;\n  }\n\n  tagsArray.forEach(tag => {\n    if (res === \"\") {\n      res = `${tag.label}`;\n    } else {\n      res = `${res},${tag.label}`;\n    }\n  });\n\n  return `&tags=${res}`;\n}\n// Converts the levels in the state for the string for the request\n//  Input: \"r'started\\.$\"\n//  Output: \"&message=r'started\\.$\"\nexport function getRequestMessage(message) {\n  if (!message || message === \"\") {\n    return \"\";\n  }\n  // Parse message to URL and return\n  const parsedMessageToUrl = message.replace(/ /g, \"+\");\n  return `&message=${parsedMessageToUrl}`;\n}\n\n// Convert Date format to a human readable format\n// Input: 1586370146\n// Output: \"08/04/2020 19:22:26\"\nexport const getTimeFromServer = serverTime => {\n  const time = new Date(serverTime * 1000);\n  return `${time.toLocaleString(\"pt\")}`;\n};\n// Convert Date format to a human readable format\n// Input: 1586370146\n// Output: \"08/04/2020\"\nexport const getJustDateFromServer = serverTime => {\n  const time = new Date(serverTime * 1000);\n  return `${time.toLocaleDateString(\"pt\")}`;\n};\n// Convert Date format to a human readable format\n// Input: 1586370146\n// Output: \"19:22:26\"\nexport const getJustTimeFromServer = serverTime => {\n  const time = new Date(serverTime * 1000);\n  return `${time.toLocaleTimeString(\"pt\")}`;\n};\n\n// Convert array of object to array of strings for LogList\n// Input:\n// [\n//   {\n//     time: 1586370146,\n//     level: \"INFO\",\n//     message: \"UI Tag Log Test: 12\"\n//   },\n//   {\n//     time: 1586370147,\n//     level: \"INFO\",\n//     message: \"UI Tag Log Test: 13\"\n//   }\n// ];\n// Output\n// [\n//   \"[08/04/2020 19:22:26] [INFO] : UI Tag Log Test: 12\",\n//   \"[08/04/2020 19:21:31] [INFO] : UI Tag Log Test: 56\"\n// ];\n\nexport const formatLogsData = data => {\n  return data.map(\n    elem => elem.stdout\n    // `[${getTimeFromServer(elem.time)}] [${elem.level}] : ${elem.message}`\n  );\n};\n\nfunction binaryIndexOf(data, criteria) {\n  var minIndex = 0;\n  var maxIndex = data.length - 1;\n  var currentIndex;\n  var currentElement;\n  var result = null;\n\n  while (minIndex <= maxIndex) {\n    currentIndex = ((minIndex + maxIndex) / 2) | 0;\n    currentElement = data[currentIndex];\n    var comparison = criteria(currentElement);\n\n    if (comparison[0] === \"right\") {\n      minIndex = currentIndex + 1;\n    } else {\n      maxIndex = currentIndex - 1;\n    }\n\n    if (comparison[1]) {\n      result = currentIndex;\n    }\n  }\n\n  return result;\n}\n\nexport const filterByFromToDates = (logsData, fromDate, toDate) => {\n  // If there is a problem fetching the logs, show nothing\n  if (!logsData) {\n    return [];\n  }\n\n  let lowerIndex = 0;\n  let upperIndex = logsData.length;\n\n  // If nothing is selected, do nothing\n  if (!fromDate && !toDate) {\n    return logsData;\n  }\n\n  // List of time format. Array is sorted in descending order (Newer -> Older)\n  const dateList = logsData.map(log => log.time);\n  if (toDate) {\n    // First log that is <= toDate (first index that fits criteria)\n    lowerIndex = binaryIndexOf(dateList, function (value) {\n      return value >= toDate.getTime() / 1000\n        ? [\"right\", false]\n        : [\"left\", true];\n    });\n  }\n  if (fromDate) {\n    // First log that is >= fromDate (last index that still fits criteria)\n    upperIndex = binaryIndexOf(dateList, function (value) {\n      return value <= fromDate.getTime() / 1000\n        ? [\"left\", false]\n        : [\"right\", true];\n    });\n  }\n  return logsData.slice(lowerIndex, upperIndex + 1);\n};\n\n// This function is to get the same string as the one you get in\n// Robot:Status nodes_lchd and persistent_nodes_lchd\nexport const addNestedName = (nestedName, newName) => {\n  if (nestedName === \"\") {\n    return newName;\n  } else {\n    return `${nestedName}__${newName}`;\n  }\n};\n\n// Will update according with the list of running nodes all the nodes to running or stopped\nexport const updateRunningNodes = (treeList, runningNodesList) => {\n  return treeList.map(elem => {\n    // Only update the status of nodes, not containers\n    if (elem.status) {\n      if (runningNodesList.includes(elem.nestedName)) {\n        return { ...elem, status: \"running\" };\n      } else {\n        return { ...elem, status: \"stopped\" };\n      }\n    } else {\n      return elem;\n    }\n  });\n};\n\n// This will remove the deleted container from the treeList and its respective children\nexport const removeDeleteContainer = (treeList, id) => {\n  // Get the id of the Container to remove\n  const deleteIndex = treeList.findIndex(elem => elem.id === id);\n  treeList.splice(deleteIndex, 1);\n  // Remove children: find all children with parentId that is the id\n  for (let i = 0; i < treeList.length; i++) {\n    if (treeList[i].parentId === id) {\n      removeDeleteContainer(treeList, treeList[i].id);\n    }\n  }\n};\n\n// Detects if there are loops within nested containers\n// Returns true if it finds a loop, false otherwise\nexport const detectContainerLoop = (treeList, parentId, flowId) => {\n  // If first level there are no loops\n  if (parentId === 0) {\n    return false;\n  }\n  // index of container to add\n  let flowIndex = treeList.findIndex(elem => elem.id === parentId);\n  let currentFlow = treeList[flowIndex];\n  // Stop when reaches the root of the tree\n  while (currentFlow.parentId) {\n    // get the parentId of the current container\n    const parentId = currentFlow.parentId;\n    // get the index of that parent in the array\n    flowIndex = treeList.findIndex(elem => elem.id === parentId);\n    currentFlow = treeList[flowIndex];\n    if (currentFlow.flowId === flowId) {\n      console.error(\"Found Flow Loop :0\");\n      return true;\n    }\n  }\n  return false;\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport CloseIcon from \"@material-ui/icons/Close\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport _debounce from \"lodash/debounce\";\nimport {\n  Card,\n  Typography,\n  CardContent,\n  Divider,\n  Button,\n  CardActions,\n  Modal\n} from \"@material-ui/core\";\nimport i18n from \"../../i18n/i18n.js\";\n\nconst useStyles = makeStyles(theme => {\n  return {\n    card: {\n      margin: \"auto\",\n      position: \"absolute\",\n      overflow: \"auto\",\n      display: \"flex\",\n      flexDirection: \"column\",\n      maxHeight: \"98%\"\n    },\n    closeButton: {\n      cursor: \"pointer\",\n      position: \"absolute\",\n      color: theme.textColor,\n      top: 15,\n      right: 15,\n      \"&:hover\": {\n        color: \"gray\"\n      }\n    }\n  };\n});\n\nconst AbstractModal = props => {\n  const classes = useStyles();\n\n  const debounceSubmit = _debounce(() => {\n    props.onSubmit();\n  }, 50);\n\n  const onKeyPress = e => {\n    if (e.key === \"Enter\") {\n      submit();\n    }\n  };\n\n  const submit = () => {\n    debounceSubmit();\n  };\n\n  const cancel = () => {\n    props.onCancel();\n  };\n\n  return (\n    <Modal\n      onKeyPress={onKeyPress}\n      open={props.open}\n      onClose={cancel}\n      style={{\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\"\n      }}\n    >\n      <Card\n        className={classes.card}\n        style={{\n          ...props.style,\n          minWidth: props.width,\n          minHeight: props.height\n        }}\n      >\n        <CardContent\n          style={{\n            flexGrow: 1,\n            maxHeight: \"calc(100% - 70px)\",\n            overflowY: \"auto\"\n          }}\n        >\n          <Typography variant=\"h5\">{props.title}</Typography>\n          <Typography\n            component=\"div\"\n            className={classes.closeButton}\n            onClick={() => props.onCancel()}\n          >\n            <CloseIcon></CloseIcon>\n          </Typography>\n          <Divider style={{ marginBottom: \"12px\" }} />\n          <div\n            style={{\n              maxHeight: \"calc(100% - 35px)\",\n              overflowY: \"auto\",\n              paddingTop: 5\n            }}\n          >\n            {props.children}\n          </div>\n        </CardContent>\n        <Divider />\n        <CardActions>\n          {props.hasSubmitButton && (\n            <Button color={props.submitColor} onClick={submit}>\n              {`${i18n.t(props.submitText)}`}\n            </Button>\n          )}\n          {props.hasCancelButton && (\n            <Button onClick={cancel} color={props.cancelColor}>\n              {`${i18n.t(props.cancelText)}`}\n            </Button>\n          )}\n        </CardActions>\n      </Card>\n    </Modal>\n  );\n};\n\nAbstractModal.propTypes = {\n  onSubmit: PropTypes.func,\n  onCancel: PropTypes.func,\n  open: PropTypes.bool,\n  title: PropTypes.string,\n  submitText: PropTypes.string,\n  submitColor: PropTypes.string,\n  cancelText: PropTypes.string,\n  cancelColor: PropTypes.string,\n  width: PropTypes.string,\n  height: PropTypes.string,\n  style: PropTypes.object,\n  hasSubmitButton: PropTypes.bool,\n  hasCancelButton: PropTypes.bool\n};\n\nAbstractModal.defaultProps = {\n  onSubmit: () => {},\n  onCancel: () => {},\n  open: false,\n  title: \"New\",\n  submitText: \"Confirm\",\n  submitColor: \"primary\",\n  cancelText: \"Cancel\",\n  cancelColor: \"secondary\",\n  width: \"25%\",\n  height: \"25%\",\n  style: {},\n  hasSubmitButton: true,\n  hasCancelButton: true\n};\n\nexport default AbstractModal;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport AbstractModal from \"./AbstractModal\";\n\nconst ConfirmAlertModal = props => {\n  return (\n    <AbstractModal\n      onSubmit={props.onSubmit}\n      onCancel={props.onCancel}\n      open={props.open}\n      title={props.title}\n      submitText={props.submitText}\n      submitColor={props.submitColor}\n      cancelText={props.cancelText}\n      cancelColor={props.cancelColor}\n    >\n      <div>{props.message}</div>\n      <div>{props.children}</div>\n    </AbstractModal>\n  );\n};\n\nConfirmAlertModal.propTypes = {\n  title: PropTypes.string,\n  message: PropTypes.string,\n  onSubmit: PropTypes.func,\n  onCancel: PropTypes.func,\n  open: PropTypes.bool,\n  submitText: PropTypes.string,\n  submitColor: PropTypes.string,\n  cancelText: PropTypes.string,\n  cancelColor: PropTypes.string\n};\n\nConfirmAlertModal.defaultProps = {\n  title: \"Insert Text here\",\n  message: \"Are you sure?\",\n  onSubmit: () => {},\n  onCancel: () => {},\n  open: false,\n  submitText: \"Delete\",\n  submitColor: \"secondary\",\n  cancelText: \"Cancel\",\n  cancelColor: \"primary\"\n};\n\nexport default ConfirmAlertModal;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport List from \"@material-ui/core/List\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport Divider from \"@material-ui/core/Divider\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { ListItem, ListItemAvatar, ListItemText } from \"@material-ui/core\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport ScheduleIcon from \"@material-ui/icons/Schedule\";\nimport WarningIcon from \"@material-ui/icons/Warning\";\nimport ViewModuleIcon from \"@material-ui/icons/ViewModule\";\nimport ChatIcon from \"@material-ui/icons/Chat\";\nimport { MasterDB } from \"mov-fe-lib-core\";\nimport AbstractModal from \"./AbstractModal\";\n\nconst styles = theme => ({\n  breakWord: {\n    wordBreak: \"break-all\"\n  }\n});\n\nclass RobotLogModal extends Component {\n  state = {\n    data: {},\n    open: false,\n    hasButton: false\n  };\n\n  open = alert => {\n    const { data } = this.state;\n    // Format time\n    const time = new Date(alert.time * 1000);\n    const alertButton = alert.button\n      ? JSON.parse(alert.button.replace(/'/g, '\"'))\n      : null;\n    data.time = `${time.toLocaleTimeString(\"pt\")}`;\n    data.action = alert.action;\n    data.message = alert.message;\n    data.robot = alert.robot;\n    data.service = alert.service;\n    data.module = alert.module;\n    if (alertButton) {\n      data.buttonText = alertButton.label;\n      data.buttonAction = this.getRobotAlertAction(alertButton);\n    }\n    // Update state variables\n    this.setState({\n      data,\n      open: true,\n      hasButton: !!alertButton\n    });\n  };\n\n  getRobotAlertAction = ({ callback, data }) => {\n    // Trigger callback to clear log\n    if (callback) {\n      return () => {\n        MasterDB.cloudFunction(callback, \"\", data, res => {\n          this.setState({ open: false });\n        });\n      };\n    }\n    // Default case (just close modal)\n    else {\n      return () => this.setState({ open: false });\n    }\n  };\n\n  renderAlertInfo = () => {\n    const { data } = this.state;\n    const { props, classes } = this.props;\n    return (\n      <Typography component=\"div\">\n        <List style={{ width: \"100%\" }}>\n          <ListItem>\n            <ListItemAvatar>\n              <Avatar>\n                <i className=\"fas fa-robot\"></i>\n              </Avatar>\n            </ListItemAvatar>\n            <ListItemText primary={data.robot} />\n          </ListItem>\n          <Divider variant=\"inset\" component=\"li\" />\n          <ListItem>\n            <ListItemAvatar>\n              <Avatar>\n                <ScheduleIcon />\n              </Avatar>\n            </ListItemAvatar>\n            <ListItemText primary={data.time} />\n          </ListItem>\n          <Divider variant=\"inset\" component=\"li\" />\n          {props.includes(\"service\") && (\n            <div>\n              <ListItem>\n                <ListItemAvatar>\n                  <Avatar>\n                    <WarningIcon />\n                  </Avatar>\n                </ListItemAvatar>\n                <ListItemText\n                  primary={data.service}\n                  className={classes.breakWord}\n                />\n              </ListItem>\n              <Divider variant=\"inset\" component=\"li\" />\n            </div>\n          )}\n          {props.includes(\"module\") && (\n            <div>\n              <ListItem>\n                <ListItemAvatar>\n                  <Avatar>\n                    <ViewModuleIcon />\n                  </Avatar>\n                </ListItemAvatar>\n                <ListItemText\n                  primary={data.module}\n                  className={classes.breakWord}\n                />\n              </ListItem>\n              <Divider variant=\"inset\" component=\"li\" />\n            </div>\n          )}\n          <ListItem>\n            <ListItemAvatar>\n              <Avatar>\n                <ChatIcon />\n              </Avatar>\n            </ListItemAvatar>\n            <ListItemText\n              primary={data.message}\n              className={classes.breakWord}\n            />\n          </ListItem>\n        </List>\n        {data.action && (\n          <div>\n            <Divider />\n            <List style={{ width: \"100%\" }}>\n              <ListItem>\n                <ListItemText\n                  primary={data.action}\n                  className={classes.breakWord}\n                />\n              </ListItem>\n            </List>\n          </div>\n        )}\n      </Typography>\n    );\n  };\n\n  render() {\n    const { data, open, hasButton } = this.state;\n    const { title } = this.props;\n    return (\n      <AbstractModal\n        open={open}\n        title={title}\n        style={{ maxWidth: 500 }}\n        onCancel={() => this.setState({ open: false })}\n        onSubmit={data.buttonAction}\n        submitText={data.buttonText}\n        submitColor={\"primary\"}\n        hasSubmitButton={hasButton}\n        hasCancelButton={false}\n      >\n        {this.renderAlertInfo()}\n      </AbstractModal>\n    );\n  }\n}\n\nRobotLogModal.propTypes = {\n  title: PropTypes.string,\n  props: PropTypes.array\n};\n\nRobotLogModal.defaultProps = {\n  title: \"Log Details\",\n  props: []\n};\n\nexport default withStyles(styles, { withTheme: true })(RobotLogModal);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport _set from \"lodash/set\";\nimport _get from \"lodash/get\";\nimport _cloneDeep from \"lodash/cloneDeep\";\nimport {\n  FormControl,\n  Grid,\n  InputLabel,\n  MenuItem,\n  Select,\n  Typography\n} from \"@material-ui/core\";\nimport { Workspace } from \"mov-fe-lib-core\";\nimport BasicVirtualizedTree from \"../Tree/BasicVirtualizedTree\";\nimport AbstractModal from \"./AbstractModal\";\nimport Backdrop from \"@material-ui/core/Backdrop\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport i18n from \"../../i18n/i18n.js\";\n\n//========================================================================================\n/*                                                                                      *\n *                                    TEMPORARY CODE                                    *\n *                                                                                      */\n//========================================================================================\n\nconst SelectScopeModal = props => {\n  const initialData = [\n    {\n      id: 0,\n      name: i18n.t(\"Annotations\"),\n      scope: \"Annotation\",\n      children: []\n    },\n    {\n      id: 1,\n      name: i18n.t(\"Callback\"),\n      scope: \"Callback\",\n      children: []\n    },\n    {\n      id: 2,\n      name: i18n.t(\"Configuration\"),\n      scope: \"Configuration\",\n      children: []\n    },\n    {\n      id: 3,\n      name: i18n.t(\"Flow\"),\n      scope: \"Flow\",\n      children: []\n    },\n    {\n      id: 4,\n      name: i18n.t(\"Nodes\"),\n      scope: \"Node\",\n      children: []\n    },\n    {\n      id: 5,\n      name: i18n.t(\"Layouts\"),\n      scope: \"Layout\",\n      children: []\n    },\n    {\n      id: 6,\n      name: i18n.t(\"Scenes\"),\n      scope: \"GraphicScene\",\n      children: []\n    }\n  ];\n\n  const [data, setData] = React.useState(initialData);\n  const [selectedWorkspace, setSelectedWorkspace] = React.useState(\"global\");\n  const [selectedScopeItem, setSelectedScopeItem] = React.useState(\n    props.selected\n  );\n  const [workSpaceList, setWorkSpaceList] = React.useState({});\n  const [isLoading, setIsLoading] = React.useState(true);\n\n  const scopeFilteredData = initialData.filter(elem =>\n    props.scopeList.includes(elem.scope)\n  );\n\n  /* eslint-disable react-hooks/exhaustive-deps */\n  React.useEffect(() => {\n    //get list of workspace\n    Workspace.getAll()\n      .then(response => setWorkSpaceList(response))\n      .catch(error => console.log(error));\n\n    // get all information in the scopes (not filtered by message)\n    getAllData(selectedWorkspace);\n    //Unmount\n    return () => {};\n  }, [props.scopeList]);\n\n  // Filter Results based on props.filter\n  React.useEffect(() => {\n    if (isLoading || selectedWorkspace !== \"global\" || !props.filter) return;\n    const filteredData = _cloneDeep(data);\n    data.forEach((scope, index) => {\n      filteredData[index].children = scope.children.filter(props.filter);\n    });\n    // Set filtered data\n    setData(filteredData);\n  }, [props.filter, isLoading]);\n  /* eslint-enable react-hooks/exhaustive-deps */\n\n  const changeWorkspace = evt => {\n    // Update the selector\n    setSelectedWorkspace(evt.target.value);\n    // When you switch workspaces reset Data\n    getAllData(evt.target.value);\n    setIsLoading(true);\n  };\n\n  const getAllData = workspace => {\n    const dataToSet = _cloneDeep(scopeFilteredData);\n\n    dataToSet.forEach((element, index) => {\n      // Get all scope items\n      Workspace.getDocs({ workspace: workspace, scope: element.scope })\n        .then(response => {\n          let sortedScopeItems = response.scopes\n            .sort((a, b) => a.ref.localeCompare(b.ref))\n            .map((elem, i) => {\n              return {\n                id: i,\n                url: elem.url,\n                name: elem.ref,\n                children: [{ name: \"\" }]\n              };\n            });\n\n          dataToSet[index].children = sortedScopeItems;\n          setData(dataToSet);\n          setIsLoading(false);\n        })\n        .catch(error => console.error(error));\n    });\n  };\n\n  const requestScopeVersions = node => {\n    const dataToSet = _cloneDeep(data);\n    const mapObj = {\n      0: () => {\n        const indexToSet = dataToSet.findIndex(elem => elem.id === node.id);\n\n        // Toggle the expansion of the panel\n        const isExpanded = _get(\n          dataToSet,\n          [indexToSet, \"state\", \"expanded\"],\n          false\n        );\n        _set(dataToSet, [indexToSet, \"state\"], {\n          expanded: !isExpanded\n        });\n\n        setData(dataToSet);\n      },\n      1: () => {\n        // second level, ask for versions (versions of scope items)\n\n        // find index of selected node in first level\n        const indexToSet = dataToSet.findIndex(\n          elem => elem.id === node.parents[0]\n        );\n\n        Workspace.getDocs({\n          workspace: selectedWorkspace,\n          scope: dataToSet[indexToSet].scope,\n          id: node.name\n        })\n          .then(response => {\n            // Tailor data Data comes with \"ref\" key but we want \"name\"\n            const versionList = response.versions.map((elem, index) => {\n              return {\n                url: elem.url,\n                name: elem.tag,\n                id: index\n              };\n            });\n\n            // find index of selected node in the second level\n            const index2ndLevel = dataToSet[indexToSet].children.findIndex(\n              elem => elem.id === node.id\n            );\n\n            // Toggle the expansion of the panel\n            const isExpanded = _get(\n              dataToSet,\n              [indexToSet, \"children\", index2ndLevel, \"state\", \"expanded\"],\n              false\n            );\n            _set(dataToSet, [indexToSet, \"children\", index2ndLevel, \"state\"], {\n              expanded: !isExpanded\n            });\n\n            // Set version list into the Tree\n            _set(\n              dataToSet,\n              [indexToSet, \"children\", index2ndLevel, \"children\"],\n              versionList\n            );\n            setData(dataToSet);\n          })\n          .catch(error => console.error(error));\n      },\n      2: () => {\n        // Display the selected option\n        setSelectedScopeItem(`${node.url}`);\n      }\n    };\n    _get(mapObj, node.deepness, () => {})();\n  };\n\n  const confirmNodeSelection = node => {\n    // Display the selected option and confirm selection\n    if (selectedWorkspace !== \"global\" && node.deepness <= 1) return;\n    setSelectedScopeItem(node.url);\n    props.onSubmit(node.url);\n  };\n\n  const getModalTitle = scope => {\n    const vowels = [\"a\", \"e\", \"i\", \"o\", \"u\"];\n    const pronoun = vowels.includes(scope[0].toLowerCase())\n      ? i18n.t(\"an\")\n      : i18n.t(\"a\");\n    return `${i18n.t(\"Select\")} ${pronoun} ${i18n.t(scope)}`;\n  };\n\n  return (\n    <AbstractModal\n      onSubmit={() => props.onSubmit(selectedScopeItem)}\n      onCancel={props.onCancel}\n      open={props.open}\n      title={getModalTitle(props.scopeList[0])}\n      width=\"50%\"\n      // ioports\n      // height=\"70%\"\n    >\n      <Grid container>\n        <Grid\n          item\n          xs={12}\n          style={{\n            textAlign: \"center\",\n            paddingBottom: \"6px\",\n            paddingTop: \"10px\"\n          }}\n        >\n          <FormControl style={{ width: \"50%\" }}>\n            <InputLabel>{i18n.t(\"Workspace\")}</InputLabel>\n            <Select\n              value={selectedWorkspace}\n              // shared\n              // defaultValue=\"\"\n              onChange={changeWorkspace}\n            >\n              {/* shared  */}\n              {Object.keys(workSpaceList).map((key, index) => (\n                <MenuItem key={index} value={key}>\n                  {workSpaceList[key].label}\n                </MenuItem>\n              ))}\n            </Select>\n          </FormControl>\n        </Grid>\n        <Typography\n          component=\"div\"\n          style={{\n            overflowY: \"auto\",\n            overflowX: \"hidden\",\n            justifyContent: \"center\",\n            width: \"100%\"\n          }}\n        >\n          {isLoading ? (\n            <Backdrop\n              style={{\n                position: \"relative\",\n                height: \"50vh\",\n                width: \"inherit\",\n                color: \"#fff\",\n                zIndex: 99999\n              }}\n              open={isLoading}\n            >\n              <CircularProgress color=\"inherit\" />\n            </Backdrop>\n          ) : (\n            <BasicVirtualizedTree\n              onClickNode={node => requestScopeVersions(node)}\n              // shared\n              onDoubleClickNode={data => confirmNodeSelection(data)}\n              data={data}\n              handleChange={nodes => setData(nodes)}\n              showIcons={false}\n              height=\"400px\"\n            ></BasicVirtualizedTree>\n          )}\n        </Typography>\n        <Grid item xs={12} style={{ textAlign: \"center\" }}>\n          <Typography\n            label={i18n.t(\"Message\")}\n            value={\"selected\"}\n            margin=\"normal\"\n          >\n            {selectedScopeItem === \"\"\n              ? i18n.t(\"Nothing selected\")\n              : selectedScopeItem}\n          </Typography>\n        </Grid>\n      </Grid>\n    </AbstractModal>\n  );\n};\n\nSelectScopeModal.propTypes = {\n  onSubmit: PropTypes.func,\n  onCancel: PropTypes.func,\n  open: PropTypes.bool,\n  scopeList: PropTypes.array,\n  message: PropTypes.string,\n  selected: PropTypes.string,\n  filter: PropTypes.func\n};\n\nSelectScopeModal.defaultProps = {\n  title: i18n.t(\"Insert Text here\"),\n  message: i18n.t(\"Are you sure?\"),\n  onSubmit: () => {},\n  onCancel: () => {},\n  open: false,\n  scopeList: [\"Callback\"],\n  selected: \"\"\n};\n\nexport default SelectScopeModal;\n","import React from \"react\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Menu from \"@material-ui/core/Menu\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport SettingsIcon from \"@material-ui/icons/Settings\";\nimport PropTypes from \"prop-types\";\nimport Toggle from \"./Toggle\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Divider from \"@material-ui/core/Divider\";\nimport { Typography } from \"@material-ui/core\";\n\nconst useStyles = makeStyles(theme => {\n  return {\n    menuItemSpacing: {\n      fontSize: \"18px\",\n      minHeight: \"18px\",\n      padding: theme.spacing(1.25, 2),\n      ...theme.cursorDefault\n    },\n    profileMenuFooter: {\n      fontSize: \"14px\",\n      textAlign: \"end\"\n    }\n  };\n});\n\nconst ProfileMenu = props => {\n  const classes = useStyles();\n  const [anchorEl, setAnchorEl] = React.useState(null);\n\n  const handleClick = event => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  return (\n    <div>\n      <IconButton\n        aria-controls=\"simple-menu\"\n        aria-haspopup=\"true\"\n        onClick={handleClick}\n      >\n        <SettingsIcon />\n      </IconButton>\n      <Menu\n        id=\"simple-menu\"\n        anchorEl={anchorEl}\n        keepMounted\n        open={Boolean(anchorEl)}\n        onClose={handleClose}\n      >\n        <Typography component=\"div\" variant=\"body1\">\n          <div className={classes.menuItemSpacing}>\n            {props.welcomeLabel}, {props.userName}\n          </div>\n          <Divider variant=\"middle\" />\n          {props.extraItems?.map(item => (\n            <MenuItem\n              className={classes.menuItemSpacing}\n              onClick={() => item.func}\n            >\n              {item.label}\n            </MenuItem>\n          ))}\n          <div className={classes.menuItemSpacing}>\n            {props.darkThemeLabel}\n            <Toggle\n              onToggle={() => props.handleToggleTheme()}\n              toggle={props.isDarkTheme}\n            ></Toggle>\n          </div>\n          <MenuItem\n            className={(classes.menuItemSpacing, classes.cursorPointer)}\n            onClick={props.handleLogout}\n          >\n            {props.logoutLabel}\n          </MenuItem>\n          <Divider variant=\"middle\" />\n          <div\n            className={\n              classes.menuItemSpacing + \" \" + classes.profileMenuFooter\n            }\n          >\n            {props.version}\n          </div>\n        </Typography>\n      </Menu>\n    </div>\n  );\n};\nProfileMenu.propTypes = {\n  welcomeLabel: PropTypes.string,\n  userName: PropTypes.string,\n  darkThemeLabel: PropTypes.string,\n  logoutLabel: PropTypes.string,\n  version: PropTypes.string,\n  extraItems: PropTypes.array,\n  isDarkTheme: PropTypes.bool,\n  handleLogout: PropTypes.func,\n  handleToggleTheme: PropTypes.func\n};\n\nProfileMenu.defaultProps = {\n  welcomeLabel: \"Hello\",\n  userName: \"User\",\n  darkThemeLabel: \"Dark Theme\",\n  logoutLabel: \"Logout\",\n  version: \"\",\n  extraItems: [],\n  isDarkTheme: true,\n  handleLogout: () => console.log(\"logout\"),\n  handleToggleTheme: () => console.log(\"toggle\")\n};\n\nexport default ProfileMenu;\n","import React, { Component } from \"react\";\nimport { fade, withStyles } from \"@material-ui/core/styles\";\nimport InputBase from \"@material-ui/core/InputBase\";\nimport SearchIcon from \"@material-ui/icons/Search\";\nimport PropTypes from \"prop-types\";\n\nconst styles = theme => ({\n  search: {\n    position: \"relative\",\n    borderRadius: theme.shape.borderRadius,\n    backgroundColor: fade(theme.palette.common.white, 0.15),\n    \"&:hover\": {\n      backgroundColor: fade(theme.palette.common.white, 0.25)\n    },\n    marginRight: theme.spacing(2),\n    marginLeft: 0,\n    width: \"100%\",\n    [theme.breakpoints.up(\"sm\")]: {\n      marginLeft: theme.spacing(3),\n      width: \"auto\"\n    }\n  },\n  searchIcon: {\n    width: theme.spacing(7),\n    height: \"100%\",\n    position: \"absolute\",\n    pointerEvents: \"none\",\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\"\n  },\n  inputRoot: {\n    color: \"inherit\"\n  },\n  inputInput: {\n    padding: theme.spacing(1, 1, 1, 7),\n    transition: theme.transitions.create(\"width\"),\n    width: \"100%\",\n    [theme.breakpoints.up(\"md\")]: {\n      width: 200\n    }\n  }\n});\n\nclass SearchInput extends Component {\n  searchInput = undefined;\n  timer = undefined;\n\n  handleChange = evt => {\n    this.searchInput = evt.target.value;\n    if (this.props.enableTimeout) {\n      if (this.timer) {\n        clearTimeout(this.timer);\n      }\n      this.timer = setTimeout(this.handleSearch, this.props.time);\n    } else {\n      this.handleSearch();\n    }\n  };\n\n  handleSearch = () => {\n    if (this.searchInput !== undefined) this.props.onChange(this.searchInput);\n  };\n\n  render() {\n    const { classes, style, placeholder } = this.props;\n    return (\n      <div className={classes.search} style={style}>\n        <div className={classes.searchIcon}>\n          <SearchIcon />\n        </div>\n        <InputBase\n          ref={this.setSearchInput}\n          placeholder={placeholder}\n          classes={{\n            root: classes.inputRoot,\n            input: classes.inputInput\n          }}\n          inputProps={{ \"aria-label\": \"search\" }}\n          onChange={this.handleChange}\n        />\n      </div>\n    );\n  }\n}\n\nSearchInput.propTypes = {\n  placeholder: PropTypes.string,\n  onChange: PropTypes.func,\n  time: PropTypes.number,\n  enableTimeout: PropTypes.bool,\n  style: PropTypes.object\n};\n\nSearchInput.defaultProps = {\n  placeholder: \"Search...\",\n  onChange: input => {\n    console.log(input);\n  },\n  time: 250,\n  enableTimeout: true,\n  style: {}\n};\n\nexport default withStyles(styles, { withTheme: true })(SearchInput);\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport InputLabel from \"@material-ui/core/InputLabel\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport MaterialSelect from \"@material-ui/core/Select\";\nimport PropTypes from \"prop-types\";\n\nconst useStyles = makeStyles(theme => ({\n  formControl: {\n    margin: theme.spacing(1),\n    minWidth: 120\n  }\n}));\n\nconst Select = props => {\n  const classes = useStyles();\n\n  let noneOption = <div></div>;\n  if (props.noneOption) {\n    noneOption = (\n      <MenuItem value=\"\">\n        <em>None</em>\n      </MenuItem>\n    );\n  }\n\n  return (\n    <FormControl\n      variant={props.variant}\n      className={classes.formControl}\n      style={props.style}\n      hiddenLabel={props.label === undefined ? true : false}\n    >\n      <InputLabel id=\"movai-react-select\">{props.label}</InputLabel>\n      <MaterialSelect\n        labelId=\"movai-react-select\"\n        id={props.id}\n        value={props.value}\n        onChange={props.onChange}\n        inputProps={props.inputProps}\n      >\n        {noneOption}\n        {props.options.map((element, index) => {\n          return (\n            <MenuItem key={index} value={element}>\n              {element}\n            </MenuItem>\n          );\n        })}\n      </MaterialSelect>\n    </FormControl>\n  );\n};\n\nSelect.propTypes = {\n  value: PropTypes.string,\n  options: PropTypes.array,\n  noneOption: PropTypes.bool,\n  label: PropTypes.string,\n  variant: PropTypes.string,\n  style: PropTypes.object,\n  onChange: PropTypes.func,\n  id: PropTypes.string,\n  inputProps: PropTypes.object\n};\nSelect.defaultProps = {\n  value: \"option2\",\n  options: [\"option1\", \"option2\", \"option3\"],\n  variant: \"filled\",\n  noneOption: true,\n  onChange: evt => console.log(evt.target.value),\n  id: \"movai-react-select\"\n};\n\nexport default Select;\n","import * as React from \"react\";\nimport PropTypes from \"prop-types\";\nimport clsx from \"clsx\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport { capitalize } from \"@material-ui/core/utils\";\nimport { svgIcons } from \"./svg-icons/svgIcons\";\n\nexport const styles = () => {\n  return {\n    /* Styles applied to the root element. */\n    root: {\n      // borderRadius: theme.shape.borderRadius,\n      backgroundColor: \"transparent\",\n      display: \"flex\",\n      padding: \"6px 16px\"\n    },\n    /* Styles applied to the root element if `variant=\"filled\"` and `color=\"success\"`. */\n    filledSuccess: {\n      color: \"#fff\",\n      // fontWeight: theme.typography.fontWeightMedium,\n      backgroundColor: \"#4caf50\"\n    },\n    /* Styles applied to the root element if `variant=\"filled\"` and `color=\"info\"`. */\n    filledInfo: {\n      color: \"#fff\",\n      // fontWeight: theme.typography.fontWeightMedium,\n      backgroundColor: \"#2196f3\"\n    },\n    /* Styles applied to the root element if `variant=\"filled\"` and `color=\"warning\"`. */\n    filledWarning: {\n      color: \"#fff\",\n      // fontWeight: theme.typography.fontWeightMedium,\n      backgroundColor: \"#ff9800\"\n    },\n    /* Styles applied to the root element if `variant=\"filled\"` and `color=\"error\"`. */\n    filledError: {\n      color: \"#fff\",\n      // fontWeight: theme.typography.fontWeightMedium,\n      backgroundColor: \"#f44336\"\n    },\n    /* Styles applied to the icon wrapper element. */\n    icon: {\n      marginRight: 12,\n      padding: \"7px 0\",\n      display: \"flex\",\n      fontSize: 22,\n      opacity: 0.9\n    },\n    /* Styles applied to the message wrapper element. */\n    message: {\n      padding: \"8px 0\",\n      display: \"flex\",\n      flexDirection: \"column\",\n      justifyContent: \"center\"\n    },\n    /* Styles applied to the action wrapper element if `action` is provided. */\n    action: {\n      display: \"flex\",\n      alignItems: \"center\",\n      marginLeft: \"auto\",\n      paddingLeft: 16,\n      marginRight: -8\n    }\n  };\n};\n\nconst defaultIconMapping = {\n  success: svgIcons.SuccessOutlined,\n  warning: svgIcons.ReportProblemOutlined,\n  error: svgIcons.ErrorOutline,\n  info: svgIcons.InfoOutlined\n};\n\nconst Alert = props => {\n  const {\n    action,\n    children,\n    classes,\n    className,\n    closeText = \"Close\",\n    color,\n    icon,\n    iconMapping = defaultIconMapping,\n    onClose,\n    role = \"alert\",\n    severity = \"success\",\n    variant = \"standard\",\n    theme,\n    ...other\n  } = props;\n\n  return (\n    <div\n      className={clsx(\n        classes.root,\n        classes[`${variant}${capitalize(color || severity)}`],\n        className\n      )}\n      {...other}\n    >\n      {icon !== false ? (\n        <div className={classes.icon}>\n          {icon || iconMapping[severity] || defaultIconMapping[severity]}\n        </div>\n      ) : null}\n      <div className={classes.message}>{children}</div>\n      {action != null ? <div className={classes.action}>{action}</div> : null}\n      {action == null && onClose ? (\n        <div className={classes.action}>\n          <IconButton\n            size=\"small\"\n            aria-label={closeText}\n            title={closeText}\n            color=\"inherit\"\n            onClick={onClose}\n          >\n            {svgIcons.Close}\n          </IconButton>\n        </div>\n      ) : null}\n    </div>\n  );\n};\n\nAlert.propTypes = {\n  // ----------------------------- Warning --------------------------------\n  // | These PropTypes are generated from the TypeScript type definitions |\n  // |     To update them edit the d.ts file and run \"yarn proptypes\"     |\n  // ----------------------------------------------------------------------\n  /**\n   * The action to display. It renders after the message, at the end of the alert.\n   */\n  action: PropTypes.node,\n  /**\n   * The content of the component.\n   */\n  children: PropTypes.node,\n  /**\n   * Override or extend the styles applied to the component.\n   * See [CSS API](#css) below for more details.\n   */\n  classes: PropTypes.object,\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n  /**\n   * Override the default label for the *close popup* icon button.\n   *\n   * For localization purposes, you can use the provided [translations](/guides/localization/).\n   */\n  closeText: PropTypes.string,\n  /**\n   * The main color for the alert. Unless provided, the value is taken from the `severity` prop.\n   */\n  color: PropTypes.oneOf([\"error\", \"info\", \"success\", \"warning\"]),\n  /**\n   * Override the icon displayed before the children.\n   * Unless provided, the icon is mapped to the value of the `severity` prop.\n   */\n  icon: PropTypes.node,\n  /**\n   * The component maps the `severity` prop to a range of different icons,\n   * for instance success to `<SuccessOutlined>`.\n   * If you wish to change this mapping, you can provide your own.\n   * Alternatively, you can use the `icon` prop to override the icon displayed.\n   */\n  iconMapping: PropTypes.shape({\n    error: PropTypes.node,\n    info: PropTypes.node,\n    success: PropTypes.node,\n    warning: PropTypes.node\n  }),\n  /**\n   * Callback fired when the component requests to be closed.\n   * When provided and no `action` prop is set, a close icon button is displayed that triggers the callback when clicked.\n   *\n   * @param {object} event The event source of the callback.\n   */\n  onClose: PropTypes.func,\n  /**\n   * The ARIA role attribute of the element.\n   */\n  role: PropTypes.string,\n  /**\n   * The severity of the alert. This defines the color and icon used.\n   */\n  severity: PropTypes.oneOf([\"error\", \"info\", \"success\", \"warning\"]),\n  /**\n   * The variant to use.\n   */\n  variant: PropTypes.oneOf([\"filled\", \"outlined\", \"standard\"])\n};\n\nexport default withStyles(styles, { name: \"MuiAlert\" })(Alert);\n","// import * as React from \"react\";\n// import SvgIcon from \"@material-ui/core/SvgIcon\";\n\n// export default function createSvgIcon({\n//   path = \"\",\n//   style = {},\n//   fill = \"#fff\",\n//   width = \"100%\",\n//   className = \"\",\n//   height = \"100%\",\n//   viewBox = \"0 0 32 32\"\n// }) {\n//   return (\n//     <svg\n//       width={width}\n//       style={style}\n//       height={height}\n//       viewBox={viewBox}\n//       className={className}\n//       xmlns=\"http://www.w3.org/2000/svg\"\n//       xmlnsXlink=\"http://www.w3.org/1999/xlink\"\n//     >\n//       <path d={path} fill={fill} />\n//     </svg>\n//   );\n// }\n\n// export default function createSvgIcon(path, displayName) {\n//   const Component = React.memo(\n//     React.forwardRef((props, ref) => (\n//       <SvgIcon data-mui-test={`${displayName}Icon`} ref={ref} {...props}>\n//         {path}\n//       </SvgIcon>\n//       <SvgIcon>\n//         {path}\n//       </SvgIcon>\n//     ))\n//   );\n\n//   if (process.env.NODE_ENV !== \"production\") {\n//     Component.displayName = `${displayName}Icon`;\n//   }\n\n//   Component.muiName = SvgIcon.muiName;\n\n//   return Component;\n// }\n\nimport React from \"react\";\n\nconst CreateSVGIcon = ({\n  path = \"\",\n  style = {},\n  fill = \"#fff\",\n  width = \"100%\",\n  height = \"100%\",\n  className = \"\",\n  viewBox = \"0 0 24 24\"\n}) => (\n  <svg\n    width={width}\n    style={style}\n    height={height}\n    viewBox={viewBox}\n    xmlns=\"http://www.w3.org/2000/svg\"\n    className={`svg-icon ${className || \"\"}`}\n    xmlnsXlink=\"http://www.w3.org/1999/xlink\"\n  >\n    <path fill={fill} d={path} />\n  </svg>\n);\n\nexport default CreateSVGIcon;\n","import React from \"react\";\nimport CreateSVGIcon from \"./CreateSVGIcon\";\n\nexport const svgIcons = {\n  Close: (\n    <CreateSVGIcon\n      width={24}\n      path=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"\n    />\n  ),\n  ErrorOutline: (\n    <CreateSVGIcon\n      width={24}\n      path=\"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z\"\n    ></CreateSVGIcon>\n  ),\n  InfoOutlined: (\n    <CreateSVGIcon\n      width={24}\n      path=\"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z\"\n    ></CreateSVGIcon>\n  ),\n  ReportProblemOutlined: (\n    <CreateSVGIcon\n      width={24}\n      path=\"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z\"\n    ></CreateSVGIcon>\n  ),\n  SuccessOutlined: (\n    <CreateSVGIcon\n      width={24}\n      path=\"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z\"\n    ></CreateSVGIcon>\n  )\n};\n","var api = require(\"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!./Snackbar.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","// Inspired from https://github.com/GA-MO/react-confirm-alert\n\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { render, unmountComponentAtNode } from \"react-dom\";\n// import { Alert } from \"@material-ui/lab\";\nimport Alert from \"./Alert/Alert\";\n\nimport \"./Snackbar.css\";\n\nimport { svgIcons } from \"./Alert/svg-icons/svgIcons\";\n\nclass ReactConfirmAlert extends Component {\n  static propTypes = {\n    message: PropTypes.string,\n    customUI: PropTypes.func,\n    closeOnClickOutside: PropTypes.bool,\n    closeOnEscape: PropTypes.bool,\n    willUnmount: PropTypes.func,\n    onClickOutside: PropTypes.func,\n    onKeypressEscape: PropTypes.func,\n    // new props\n    severity: PropTypes.string,\n    closeText: PropTypes.string,\n    autoHideDuration: PropTypes.number,\n    closable: PropTypes.bool\n  };\n\n  autoClose = null;\n\n  static defaultProps = {\n    closeOnClickOutside: true,\n    closeOnEscape: true,\n    willUnmount: () => null,\n    onClickOutside: () => null,\n    onKeypressEscape: () => null,\n    // new props\n    severity: \"info\", // error, warning, info or success\n    closeText: \"Close\",\n    autoHideDuration: 6000,\n    closable: true\n  };\n\n  handleClickButton = button => {\n    if (button.onClick) button.onClick();\n    this.close();\n  };\n\n  handleClickOverlay = e => {\n    const { closeOnClickOutside, onClickOutside } = this.props;\n    const isClickOutside = e.target === this.overlay;\n\n    if (closeOnClickOutside && isClickOutside) {\n      onClickOutside();\n      this.close();\n    }\n  };\n\n  close = () => {\n    removeBodyClass();\n    removeElementReconfirm();\n  };\n\n  keyboardClose = event => {\n    const { closeOnEscape, onKeypressEscape } = this.props;\n    const isKeyCodeEscape = event.keyCode === 27;\n\n    if (closeOnEscape && isKeyCodeEscape) {\n      onKeypressEscape(event);\n      this.close();\n    }\n  };\n\n  componentDidMount = () => {\n    document.addEventListener(\"keydown\", this.keyboardClose, false);\n    this.autoClose = setTimeout(() => {\n      if (\n        document.getElementById(\"react-confirm-alert\") ||\n        document.getElementById(\"react-confirm-alert-body-element\")\n      ) {\n        this.close();\n      }\n    }, this.props.autoHideDuration);\n  };\n\n  componentWillUnmount = () => {\n    document.removeEventListener(\"keydown\", this.keyboardClose, false);\n    clearTimeout(this.autoClose);\n    this.props.willUnmount();\n  };\n\n  renderCustomUI = () => {\n    const { title, message, customUI } = this.props;\n    const dataCustomUI = {\n      title,\n      message,\n      onClose: this.close\n    };\n\n    return customUI(dataCustomUI);\n  };\n\n  render() {\n    const {\n      message,\n      customUI,\n      severity,\n      closeText,\n      closable,\n      theme\n    } = this.props;\n\n    return (\n      <div\n        className=\"react-confirm-alert-overlay\"\n        ref={dom => (this.overlay = dom)}\n        onClick={this.handleClickOverlay}\n      >\n        <div className=\"react-confirm-alert\">\n          {customUI ? (\n            this.renderCustomUI()\n          ) : (\n            <div className=\"react-confirm-alert-body\">\n              <Alert\n                theme={theme}\n                elevation={6}\n                variant=\"filled\"\n                severity={severity}\n                closeText={closeText}\n                action={\n                  closable ? (\n                    <div\n                      className=\"icon-container\"\n                      onClick={() => this.close()}\n                    >\n                      {svgIcons.Close}\n                    </div>\n                  ) : (\n                    undefined\n                  )\n                }\n              >\n                {message}\n              </Alert>\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\nfunction createElementReconfirm(properties, theme) {\n  let divTarget = document.getElementById(\"react-confirm-alert\");\n  if (divTarget) {\n    // Rerender - the mounted ReactConfirmAlert\n    render(<ReactConfirmAlert {...properties} theme={theme} />, divTarget);\n  } else {\n    // Mount the ReactConfirmAlert component\n    document.body.children[0].classList.add(\"react-confirm-alert-blur\");\n    divTarget = document.createElement(\"div\");\n    divTarget.id = \"react-confirm-alert\";\n    document.body.appendChild(divTarget);\n    render(<ReactConfirmAlert {...properties} theme={theme} />, divTarget);\n  }\n}\n\nfunction removeElementReconfirm() {\n  const target = document.getElementById(\"react-confirm-alert\");\n  unmountComponentAtNode(target);\n  target.parentNode.removeChild(target);\n}\n\nfunction addBodyClass() {\n  document.body.classList.add(\"react-confirm-alert-body-element\");\n}\n\nfunction removeBodyClass() {\n  document.body.classList.remove(\"react-confirm-alert-body-element\");\n}\n\nexport function snackbar(properties, theme) {\n  addBodyClass();\n  createElementReconfirm(properties, theme);\n}\n\nexport default ReactConfirmAlert;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport MaterialTable from \"material-table\";\n\nimport { forwardRef } from \"react\";\n\nimport AddBox from \"@material-ui/icons/AddBox\";\nimport ArrowDownward from \"@material-ui/icons/ArrowDownward\";\nimport Check from \"@material-ui/icons/Check\";\nimport ChevronLeft from \"@material-ui/icons/ChevronLeft\";\nimport ChevronRight from \"@material-ui/icons/ChevronRight\";\nimport Clear from \"@material-ui/icons/Clear\";\nimport DeleteOutline from \"@material-ui/icons/DeleteOutline\";\nimport Edit from \"@material-ui/icons/Edit\";\nimport FilterList from \"@material-ui/icons/FilterList\";\nimport FirstPage from \"@material-ui/icons/FirstPage\";\nimport LastPage from \"@material-ui/icons/LastPage\";\nimport Remove from \"@material-ui/icons/Remove\";\nimport SaveAlt from \"@material-ui/icons/SaveAlt\";\nimport Search from \"@material-ui/icons/Search\";\nimport ViewColumn from \"@material-ui/icons/ViewColumn\";\n\nconst tableIcons = {\n  Add: forwardRef((props, ref) => <AddBox {...props} ref={ref} />),\n  Check: forwardRef((props, ref) => <Check {...props} ref={ref} />),\n  Clear: forwardRef((props, ref) => <Clear {...props} ref={ref} />),\n  Delete: forwardRef((props, ref) => <DeleteOutline {...props} ref={ref} />),\n  DetailPanel: forwardRef((props, ref) => (\n    <ChevronRight {...props} ref={ref} />\n  )),\n  Edit: forwardRef((props, ref) => <Edit {...props} ref={ref} />),\n  Export: forwardRef((props, ref) => <SaveAlt {...props} ref={ref} />),\n  Filter: forwardRef((props, ref) => <FilterList {...props} ref={ref} />),\n  FirstPage: forwardRef((props, ref) => <FirstPage {...props} ref={ref} />),\n  LastPage: forwardRef((props, ref) => <LastPage {...props} ref={ref} />),\n  NextPage: forwardRef((props, ref) => <ChevronRight {...props} ref={ref} />),\n  PreviousPage: forwardRef((props, ref) => (\n    <ChevronLeft {...props} ref={ref} />\n  )),\n  ResetSearch: forwardRef((props, ref) => <Clear {...props} ref={ref} />),\n  Search: forwardRef((props, ref) => <Search {...props} ref={ref} />),\n  SortArrow: forwardRef((props, ref) => <ArrowDownward {...props} ref={ref} />),\n  ThirdStateCheck: forwardRef((props, ref) => <Remove {...props} ref={ref} />),\n  ViewColumn: forwardRef((props, ref) => <ViewColumn {...props} ref={ref} />),\n};\n\n// More information in: https://material-table.com/#/docs/all-props\n\nconst Table = (props) => {\n  return (\n    <MaterialTable\n      style={props.style}\n      title={props.title}\n      columns={props.columns}\n      data={props.data}\n      icons={tableIcons}\n      actions={props.actions}\n      options={props.options}\n      components={props.components}\n      localization={props.localization}\n    />\n  );\n};\n\nTable.propTypes = {\n  style: PropTypes.object,\n  title: PropTypes.string,\n  columns: PropTypes.array,\n  data: PropTypes.array,\n  actions: PropTypes.array,\n  options: PropTypes.object,\n  components: PropTypes.object,\n  localization: PropTypes.object,\n};\nTable.defaultProps = {\n  style: {},\n  title: \"\",\n  columns: [],\n  data: [],\n  actions: [],\n  options: {\n    actionsColumnIndex: -1,\n    draggable: false,\n    grouping: false,\n    search: false,\n    toolbar: false,\n    searchFieldAlignment: \"left\",\n    paging: false,\n  },\n  components: {},\n};\n\nexport default Table;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport MaterialTabs from \"@material-ui/core/Tabs\";\nimport Tab from \"@material-ui/core/Tab\";\nimport Typography from \"@material-ui/core/Typography\";\n\nfunction TabPanel(props) {\n  const { children, selectedTab, index, ...other } = props;\n\n  return (\n    <Typography\n      component=\"div\"\n      role=\"tabpanel\"\n      hidden={selectedTab !== index}\n      id={`tabpanel-${index}`}\n      aria-labelledby={`tab-${index}`}\n      {...other}\n    >\n      {selectedTab === index && children}\n    </Typography>\n  );\n}\n\nTabPanel.propTypes = {\n  children: PropTypes.node,\n  index: PropTypes.any.isRequired,\n  selectedTab: PropTypes.any.isRequired\n};\n\nfunction a11yProps(index) {\n  return {\n    id: `tab-${index}`,\n    \"aria-controls\": `tabpanel-${index}`\n  };\n}\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    flexGrow: 1,\n    height: \"100%\"\n  },\n  tabPanel: {\n    flexGrow: 1,\n    minHeight: 0,\n    height: \"calc(100% - 48px)\",\n    overflowY: \"auto\"\n  }\n}));\n\nexport default function Tabs(props) {\n  const classes = useStyles();\n  const [selectedTab, setSelectedTab] = React.useState(props.selectedTab);\n\n  React.useEffect(() => {\n    if (props.selectedTab !== selectedTab) {\n      setSelectedTab(props.selectedTab);\n    }\n  }, [props.selectedTab]);\n\n  const handleChange = (event, newSelectedTab) => {\n    setSelectedTab(newSelectedTab);\n  };\n\n  return (\n    <div className={classes.root}>\n      <MaterialTabs\n        value={selectedTab}\n        onChange={handleChange}\n        indicatorColor=\"primary\"\n        textColor=\"primary\"\n      >\n        {props.tabList.map((tab, index) => (\n          <Tab key={index} label={tab.label} {...a11yProps(index)} />\n        ))}\n      </MaterialTabs>\n      {props.tabList.map((tab, index) => (\n        <TabPanel\n          key={index}\n          selectedTab={selectedTab}\n          index={index}\n          className={props.scrollable ? classes.tabPanel : undefined}\n        >\n          {tab.component}\n        </TabPanel>\n      ))}\n    </div>\n  );\n}\n\nTabs.propTypes = {\n  tabList: PropTypes.array,\n  selectedTab: PropTypes.number,\n  scrollable: PropTypes.bool\n};\n\nTabs.defaultProps = {\n  tabList: [\n    { label: \"Tab 1\", component: <div>Component 1</div> },\n    {\n      label: \"Tab 2\",\n      component: (\n        <div>\n          Lorem Ipsum is simply dummy text of the printing and typesetting\n          industry. Lorem Ipsum has been the industry standard dummy text ever\n          since the 1500s, when an unknown printer took a galley of type and\n          scrambled it to make a type specimen book. It has survived not only\n          five centuries, but also the leap into electronic typesetting,\n          remaining essentially unchanged. It was popularised in the 1960s with\n          the release of Letraset sheets containing Lorem Ipsum passages, and\n          more recently with desktop publishing software like Aldus PageMaker\n          including versions of Lorem Ipsum.\n        </div>\n      )\n    },\n    { label: \"Tab 3\", component: <div>Component 3</div> }\n  ],\n  selectedTab: 0,\n  scrollable: true\n};\n","import React from \"react\";\nimport TextField from \"@material-ui/core/TextField\";\nimport PropTypes from \"prop-types\";\n\nconst Text = props => {\n  return <TextField {...props}></TextField>;\n};\n\nText.propTypes = {};\nText.defaultProps = {};\n\nexport default Text;\n","import React from \"react\";\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\nimport Switch from \"@material-ui/core/Switch\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { green, grey } from \"@material-ui/core/colors\";\nimport PropTypes from \"prop-types\";\n\nconst useStyles = makeStyles(theme => ({\n  label: {\n    fontFamily: \"Roboto\",\n    fontStyle: \"normal\",\n    fontWeight: \"normal\",\n    fontSize: \"14px\",\n    marginLeft: 0,\n    marginRight: 0,\n    marginBottom: 0\n  },\n  colorSwitchBase: {\n    color: grey[300],\n    \"&$colorChecked\": {\n      color: green[500],\n      \"& + $colorBar\": {\n        backgroundColor: green[500]\n      }\n    }\n  },\n  colorBar: {},\n  colorChecked: {}\n}));\n\nconst Toggle = props => {\n  const classes = useStyles();\n  return (\n    <FormControlLabel\n      control={\n        <Switch\n          checked={props.toggle}\n          onChange={props.onToggle}\n          color={props.color}\n          disabled={props.disabled}\n          hidden={props.hidden}\n          size={props.size}\n          classes={{\n            switchBase: classes.colorSwitchBase,\n            checked: classes.colorChecked,\n            track: classes.colorBar\n          }}\n        />\n      }\n      labelPlacement={props.labelPlacement}\n      label={props.label}\n      classes={{ label: classes.label }}\n      style={{ ...props.style, marginLeft: 0, marginRight: 0, marginBottom: 0 }}\n    />\n  );\n};\n\nToggle.propTypes = {\n  toggle: PropTypes.bool,\n  onToggle: PropTypes.func,\n  label: PropTypes.string,\n  color: PropTypes.string,\n  labelPlacement: PropTypes.string, // 'end', 'start', 'top', 'bottom'\n  style: PropTypes.object\n};\nToggle.defaultProps = {\n  color: \"primary\" // or secondary\n};\n\nexport default Toggle;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Tree from \"react-virtualized-tree\";\nimport \"material-icons/css/material-icons.css\";\nimport \"react-virtualized/styles.css\";\nimport \"react-virtualized-tree/lib/main.css\";\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\nimport ChevronRightIcon from \"@material-ui/icons/ChevronRight\";\nimport Box from \"@material-ui/core/Box\";\nimport Grid from \"@material-ui/core/Grid\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport _get from \"lodash/get\";\nimport { ListItemsTreeWithSearch } from \"./TreeSearch\";\n\n//========================================================================================\n/*                                                                                      *\n *                                     TODO REFACTOR                                    *\n *                                                                                      */\n//========================================================================================\n\nconst styles = theme => ({\n  horizFlex: {\n    display: \"flex\",\n    flexDirection: \"row\",\n    alignItems: \"center\"\n  },\n  spaceBetween: {\n    display: \"flex\",\n    width: \"100%\",\n    justifyContent: \"space-between\"\n  },\n  preContainer: {\n    justifyContent: \"space-between\",\n    \"& button\": {\n      display: \"none\"\n    },\n    \"&:hover\": {\n      backgroundColor: \"rgba(54,181,230, 0.15)\",\n      \"& button\": {\n        display: \"inline-flex\"\n      }\n    }\n  },\n  ellipsis: {\n    whiteSpace: \"nowrap\",\n    overflow: \"hidden\",\n    textOverflow: \"ellipsis\",\n    flex: 2\n  },\n  iconSpace: {\n    flex: 1,\n    textAlign: \"right\",\n    minWidth: \"45px\",\n    \"& button\": {\n      position: \"relative\",\n      bottom: \"7px\",\n      padding: \"7px\"\n    }\n  }\n});\n\n// const {Deletable, Expandable, Favorite} = Renderers;\n\nconst testArray = [];\n\nfor (let index = 0; index < 100; index++) {\n  testArray.push({\n    id: index,\n    name: `1.0.${index}`\n  });\n}\n\nconst EXPANDED = \"EXPANDED\";\n\nclass BasicVirtualizedTree extends Component {\n  state = {\n    selectedGroup: EXPANDED,\n    groupsEnabled: true,\n    searchValue: \"\"\n  };\n\n  searchFilter = (nodes, searchValue) => {\n    const searchValueLower = searchValue.toLowerCase();\n    const filteredNodes = nodes\n      .filter(\n        node =>\n          (!node.name.includes(\"@SM\") &&\n            node.name.toLowerCase().includes(searchValueLower)) ||\n          node.children.findIndex(ch =>\n            ch.name.toLowerCase().includes(searchValueLower)\n          ) >= 0\n      )\n      .map(node => {\n        return {\n          ...node,\n          children: (node?.children || []).filter(\n            ch =>\n              ch.name &&\n              !ch.name.includes(\"@SM\") &&\n              (node.name.toLowerCase().includes(searchValueLower) ||\n                ch.name.toLowerCase().includes(searchValueLower))\n          )\n        };\n      });\n\n    // Add children id if missing\n    filteredNodes.forEach(node => {\n      node.children.forEach((child, i) => {\n        child.id = child.id ? child.id : i;\n        if (child.children) {\n          child.children.forEach((grandChild, j) => {\n            grandChild.id = grandChild.id ? grandChild.id : j;\n          });\n        }\n      });\n    });\n\n    return filteredNodes;\n  };\n\n  handleSelectedGroupChange = selectedGroup => {\n    this.setState({ selectedGroup });\n  };\n\n  // open: true -> expand\n  //       false -> collapse\n  handleExpansion = (evt, nodes, node, open) => {\n    // const treeData = _cloneDeep(nodes);\n    // _set(treeData, [node.id, \"state\"], {\n    //   expanded: open\n    // });\n    // evt.stopPropagation();\n    // this.props.handleChange(treeData);\n  };\n\n  render() {\n    const { classes } = this.props;\n    const iconStyle = <i className=\"fas fa-home\" />;\n    const nodes = this.props.data;\n    return (\n      <div>\n        <ListItemsTreeWithSearch\n          style={{\n            overflow: \"auto\"\n          }}\n          icon={iconStyle}\n          onSearch={input => {\n            this.setState({\n              searchValue: input\n            });\n          }}\n        >\n          <div style={{ height: this.props.height }}>\n            <Tree\n              nodes={this.searchFilter(nodes, this.state.searchValue)}\n              onChange={this.props.handleChange}\n            >\n              {({ style, node, ...rest }) => {\n                // Adjust tree indentation\n                style.paddingLeft = style.marginLeft / 1.5;\n                style.marginLeft = 0;\n                // Render tree element\n                return (\n                  <div\n                    style={style}\n                    onClick={() => this.props.onClickNode(node)}\n                    onDoubleClick={() => this.props.onDoubleClickNode(node)}\n                    p={2}\n                    className={\n                      !_get(node, `children`, false) ? classes.preContainer : \"\"\n                    }\n                  >\n                    <Box p={1} className={classes.inlineFlex}>\n                      <Grid alignContent={\"space-between\"} container>\n                        {_get(node, `children`, false) &&\n                          node.state?.expanded && (\n                            <ExpandMoreIcon\n                              onClick={evt =>\n                                this.handleExpansion(evt, nodes, node, false)\n                              }\n                            />\n                          )}\n                        {_get(node, `children`, false) &&\n                          !node.state?.expanded && (\n                            <ChevronRightIcon\n                              onClick={evt =>\n                                this.handleExpansion(evt, nodes, node, true)\n                              }\n                            />\n                          )}\n\n                        <div\n                          className={\n                            !_get(node, `children`, false)\n                              ? classes.spaceBetween\n                              : \"\"\n                          }\n                        >\n                          <div className={classes.ellipsis}>{node.name}</div>\n                        </div>\n                      </Grid>\n                    </Box>\n                  </div>\n                );\n              }}\n            </Tree>\n          </div>\n        </ListItemsTreeWithSearch>\n      </div>\n    );\n  }\n}\n\nBasicVirtualizedTree.propTypes = {\n  data: PropTypes.array,\n  onClickNode: PropTypes.func,\n  onDoubleClickNode: PropTypes.func,\n  handleChange: PropTypes.func,\n  height: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n};\n\nBasicVirtualizedTree.defaultProps = {\n  data: [],\n  onClickNode: () => {},\n  onDoubleClickNode: () => {},\n  handleChange: () => {},\n  height: 700\n};\n\nexport default withStyles(styles, { withTheme: true })(BasicVirtualizedTree);\n","import React, { Component } from \"react\";\nimport {\n  List,\n  InputBase,\n  IconButton,\n  Typography,\n  Divider,\n  ListItem\n} from \"@material-ui/core\";\nimport PropTypes from \"prop-types\";\nimport SearchIcon from \"@material-ui/icons/Search\";\nimport ClearIcon from \"@material-ui/icons/Clear\";\nimport i18n from \"../../i18n/i18n.js\";\n\nclass TreeSearch extends Component {\n  searchInput = null;\n  timer = null;\n  inputRef = React.createRef();\n\n  handleChange = evt => {\n    this.searchInput = evt.target.value;\n    if (this.timer) {\n      clearTimeout(this.timer);\n    }\n    this.timer = setTimeout(this.handleSearch, 250);\n  };\n\n  handleSearch = () => {\n    if (this.searchInput !== null) this.props.search(this.searchInput);\n  };\n\n  resetValue() {\n    const input = this.inputRef.current.children[0];\n    input.value = \"\";\n    input.focus();\n    this.searchInput = \"\";\n    this.handleSearch();\n    this.forceUpdate();\n  }\n\n  isEmpty() {\n    return this.searchInput === null || this.searchInput.trim() === \"\";\n  }\n\n  render() {\n    return (\n      <Typography\n        component=\"div\"\n        style={{\n          padding: \"2px 4px\",\n          display: \"flex\",\n          alignItems: \"center\",\n          width: \"100%\"\n        }}\n      >\n        <InputBase\n          ref={this.inputRef}\n          style={{\n            marginLeft: 10,\n            flex: 1\n          }}\n          placeholder={i18n.t(\"Search\")}\n          onChange={this.handleChange}\n        />\n        <IconButton\n          style={{ padding: 10 }}\n          onClick={() => {\n            if (!this.isEmpty()) {\n              this.resetValue();\n            }\n          }}\n        >\n          {this.isEmpty() ? <SearchIcon /> : <ClearIcon />}\n        </IconButton>\n      </Typography>\n    );\n  }\n}\n\n/**\n *\n * @param {*} props: contains children which are Items\n */\nconst ListItemsTree = props => {\n  return (\n    <List\n      style={{ paddingLeft: \"0px\", paddingRight: \"0px\", ...props.style }}\n      dense={true}\n      component=\"div\"\n      onKeyUp={props.onKeyUp}\n    >\n      {props.children}\n    </List>\n  );\n};\n\nconst ListItemsTreeWithTitle = props => {\n  return (\n    <ListItemsTree>\n      <ListItem>\n        <Typography component={props.variant}>{props.title}</Typography>\n      </ListItem>\n      <Divider />\n      {props.children}\n    </ListItemsTree>\n  );\n};\n/* \n  TODO: think about how to generalize the search\n\n  Using either the _shared/Search method or using a predicate \n*/\nconst ListItemsTreeWithSearch = props => {\n  return (\n    <ListItemsTree\n      style={{ flexGrow: 1, paddingBottom: \"0px\", paddingTop: \"0px\" }}\n      onKeyUp={props.onKeyUp}\n    >\n      <ListItem>\n        <TreeSearch search={input => props.onSearch(input)} />\n      </ListItem>\n      <Divider />\n      <Typography style={props.style} component=\"div\">\n        {React.Children.map(props.children, x => {\n          return x;\n        })}\n      </Typography>\n    </ListItemsTree>\n  );\n};\n\nListItemsTreeWithSearch.propTypes = {\n  onSearch: PropTypes.func\n};\n\nListItemsTreeWithSearch.defaultProps = {\n  onSearch: input => console.log(input)\n};\n\nexport { ListItemsTree, ListItemsTreeWithSearch, ListItemsTreeWithTitle };\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport PropTypes from \"prop-types\";\n\nconst useStyles = makeStyles(theme => ({\n  container: {\n    width: 65,\n    height: \"100%\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    backgroundColor: props => props.backgroundColor\n  },\n  logoArea: {\n    padding: \"17px\",\n    textAlign: \"center\",\n    alignItems: \"center\",\n    justifyContent: \"center\"\n  },\n  navigationArea: {\n    flexGrow: 1,\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\"\n  },\n  accountArea: {\n    padding: props => (props.unsetAccountAreaPadding ? \"unset\" : \"17px\"),\n    textAlign: \"center\",\n    alignItems: \"center\",\n    justifyContent: \"center\"\n  }\n}));\n\nconst VerticalBar = props => {\n  const classes = useStyles(props);\n  return (\n    <div className={classes.container}>\n      <div className={classes.logoArea}>{props.upperElement}</div>\n      <div className={classes.navigationArea}>\n        {props.navigationList.map((element, index) => {\n          return (\n            <div key={index} style={{ padding: \"15px 0px\" }}>\n              {element}\n            </div>\n          );\n        })}\n      </div>\n      <div className={classes.accountArea}>{props.lowerElement}</div>\n    </div>\n  );\n};\n\nVerticalBar.propTypes = {\n  upperElement: PropTypes.node,\n  navigationList: PropTypes.array,\n  lowerElement: PropTypes.node.isRequired,\n  backgroundColor: PropTypes.string,\n  unsetAccountAreaPadding: PropTypes.bool\n};\nVerticalBar.defaultProps = {\n  upperElement: <div></div>,\n  navigationList: [<div></div>],\n  lowerElement: <div></div>,\n  backgroundColor: \"#424242\",\n  unsetAccountAreaPadding: false\n};\n\nexport default VerticalBar;\n","class Action {\n  constructor() {\n    this.memory = {};\n  }\n\n  action(parentView) {\n    parentView.getSceneMemory().forEach(memory => {\n      memory.gizmoManager.attachedMesh = null;\n      memory.camera.attachControl(memory.canvas, true);\n    });\n    parentView.closeContextDial && parentView.closeContextDial();\n    parentView.setContextActionIndex && parentView.setContextActionIndex();\n  }\n\n  onChange(parentView) {\n    // to be overwritten by children\n  }\n}\n\nexport default Action;\n","import Util3d from \"../Util3d/Util3d\";\nimport KeyPoint from \"../NodeItem/KeyPoint\";\nimport Vec3 from \"../Math/Vec3\";\nimport { Maybe } from \"monet\";\nimport MouseKeysAction from \"./MouseKeysAction\";\nimport React from \"react\";\nimport { Color3, Axis, Vector3 } from \"@babylonjs/core\";\nimport { UndoManager } from \"mov-fe-lib-core\";\n\nclass AddKeyPointAction extends MouseKeysAction {\n  constructor() {\n    super();\n    this.key = \"addKeyPoint\";\n    this.name = \"Add Key Point [4]\";\n    this.maybeMousePos = Maybe.none();\n    this.tempMesh = null;\n    this.icon = props => <i className=\"fas fa-map-marker\" {...props}></i>;\n  }\n\n  createKeyPoint(\n    position,\n    name,\n    scene,\n    parentView,\n    is2addInServer = true,\n    color = Color3.Gray()\n  ) {\n    const rootMesh = parentView.getRootNode().item.mesh;\n\n    const keyPoint = KeyPoint.ofDict(scene, {\n      name: name,\n      color: [color.r, color.g, color.b]\n    });\n    const mesh = keyPoint.mesh;\n    mesh.parent = rootMesh;\n\n    const localPosition = Util3d.getLocalCoordFromWorld(\n      { parent: rootMesh },\n      Vec3.ofBabylon(position)\n    ).toBabylon();\n\n    mesh.setPositionWithLocalVector(\n      localPosition.add(Axis.Z.scale(KeyPoint.DEFAULT_SIZE))\n    );\n\n    if (is2addInServer) {\n      parentView.addNodeItem2Tree(keyPoint, rootMesh.name, is2addInServer);\n    }\n    return mesh;\n  }\n\n  action = parentView => {\n    super.action(parentView);\n    parentView.setSelectedAction(this);\n  };\n\n  onPointerDown = (evt, parentView) => {\n    if (evt.button !== 0) {\n      return;\n    }\n    parentView.getSceneMemory().forEach(memory => {\n      const { scene, ground, camera } = memory;\n      this.maybeMousePos = Util3d.getGroundPosition(scene, ground);\n      this.maybeMousePos.forEach(mousePos => {\n        camera.detachControl(memory.canvas);\n      });\n    });\n  };\n\n  onPointerMove = (evt, parentView) => {\n    parentView.getSceneMemory().forEach(memory => {\n      const scene = memory.scene;\n      const ground = memory.ground;\n      const maybeCurrent = Util3d.getGroundPosition(scene, ground);\n      maybeCurrent.forEach(current => {\n        this.maybeMousePos.forEach(oldMousePos => {\n          if (this.tempMesh) this.tempMesh.dispose();\n          this.tempMesh = this.createKeyPoint(\n            current,\n            TEMP_KEY_POINT_NAME,\n            scene,\n            parentView,\n            false\n          );\n        });\n      });\n    });\n  };\n\n  onPointerUp = (evt, parentView) => {\n    parentView.getSceneMemory().forEach(({ scene, camera, ground, canvas }) => {\n      const maybeCurrent = Util3d.getGroundPosition(scene, ground);\n      maybeCurrent.forEach(current => {\n        this.maybeMousePos.forEach(oldMousePos => {\n          if (this.tempMesh) this.tempMesh.dispose();\n          const name = `KeyPoint${Math.floor(Math.random() * 1e3)}`;\n          const keyPoint = this.createKeyPoint(\n            current,\n            name,\n            scene,\n            parentView,\n            true,\n            new Color3(Math.random(), Math.random(), Math.random())\n          );\n          parentView.setPropertiesWithName(name);\n          parentView\n            .getUndoManager()\n            .addIt(this.getUndoAbleAction(keyPoint, scene, parentView));\n        });\n      });\n      this.maybeMousePos = Maybe.none();\n      camera.attachControl(canvas, true);\n    });\n  };\n\n  getUndoAbleAction(mesh, scene, parentView) {\n    return UndoManager.actionBuilder()\n      .doAction(() => {\n        const keyPoint = this.createKeyPoint(\n          Vector3.Zero(),\n          mesh.name,\n          scene,\n          parentView,\n          true,\n          mesh.material.diffuseColor\n        );\n        keyPoint.position = mesh.position;\n        parentView.updateNodeInServer(mesh.name);\n      })\n      .undoAction(({ is2UpdateInServer = true }) => {\n        parentView.deleteNodeFromTreeUsingName(mesh.name, is2UpdateInServer);\n      })\n      .build();\n  }\n}\n\nconst TEMP_KEY_POINT_NAME = \"temp_key_point\";\nexport default AddKeyPointAction;\n","import Util3d from \"../Util3d/Util3d\";\nimport Vec3 from \"../Math/Vec3\";\nimport Action from \"./Action\";\nimport Map from \"../NodeItem/Map\";\nimport { Maybe } from \"monet\";\nimport React from \"react\";\nimport GlobalRef from \"../NodeItem/GlobalRef\";\nimport { Vector3 } from \"@babylonjs/core\";\nimport DefaultScene from \"../Utils/DefaultScene\";\nimport { ACTIONS } from \"../MainView/MainViewActions\";\nimport { UndoManager } from \"mov-fe-lib-core\";\nimport AssetsManager from \"../AssetsManager/AssetsManager\";\n\nclass AddMapAction extends Action {\n  constructor(name, mapLoader) {\n    super();\n    this.name = name;\n    this.key = `addMap${name}`;\n    this.mapLoader = mapLoader;\n    this.icon = props => <i {...props} className=\"fas fa-map\"></i>;\n    this.firstTimeLoad = true;\n  }\n\n  addMap(parentView) {\n    parentView.getSceneMemory().forEach(async memory => {\n      const { scene, camera } = memory;\n      const {\n        textureSrc,\n        resolution,\n        origin,\n        imageSize\n      } = await this.mapLoader.load();\n\n      const width = resolution * imageSize[0];\n      const height = resolution * imageSize[1];\n      const mesh = Util3d.groundBuilder(scene)\n        .name(Maybe.fromNull(this.memory[\"name\"]).orSome(this.name))\n        .width(width)\n        .height(height)\n        .textureSrc(textureSrc)\n        .build();\n\n      const originPos = Vec3.of([-width / 2, -height / 2, 0]).sub(\n        Vec3.of(origin)\n      );\n\n      const rootNode = parentView.getRootNode();\n      const parent = rootNode.item.mesh.parent;\n      parent.position = GlobalRef.inverseCoordinates(originPos.toBabylon());\n      camera.setTarget(\n        new Vector3(parent.position.x, parent.position.y, parent.position.z)\n      );\n\n      const map = new Map(\n        mesh,\n        [width, height],\n        this.textureSrc,\n        Maybe.fromNull(this.memory[\"assetName\"]).orSome(this.name)\n      );\n\n      const isVisible = Maybe.fromNull(this.memory[\"isVisible\"]).orSome(true);\n      const is2sendServer = Maybe.fromNull(this.memory[\"isImport\"])\n        .map(x => !x)\n        .orSome(true);\n\n      mesh.setEnabled(isVisible);\n      parentView.addNodeItem2Tree(map, null, is2sendServer, isVisible);\n      memory.ground.dispose();\n      memory.ground = DefaultScene.createMeshGround(scene, width, height);\n      this.memory[\"isImport\"] = false;\n    });\n  }\n\n  action(parentView) {\n    super.action(parentView);\n    const maybeNode = parentView.getNodeFromTree(this.name);\n    maybeNode.orElseRun(() => {\n      const isImport = this.memory[\"isImport\"];\n      // you shouldn't be able to undo when importing a scene. isImport prevents removing the map when you undo.\n      // firstTimeLoad condition to prevent adding a map when fast map switch, TODO: doesn't work\n      if (isImport) {\n        this.addMap(parentView);\n        this.firstTimeLoad = false;\n      } else {\n        parentView.getUndoManager().doIt(this.getUndoAction(parentView));\n      }\n    });\n    parentView.setSelectedAction(ACTIONS().orbit);\n  }\n\n  getUndoAction(parentView) {\n    if (parentView.getObjectTree().length < 2) {\n      return UndoManager.actionBuilder()\n        .doAction(() => {\n          this.addMap(parentView);\n        })\n        .undoAction(({ is2UpdateInServer = true }) => {\n          const name = parentView.getObjectTree()[1].title;\n          parentView.deleteNodeFromTreeUsingName(name, is2UpdateInServer);\n        })\n        .build();\n    } else {\n      const oldMapName = parentView.getObjectTree()[1].title;\n      const newMapName = this.name;\n      return UndoManager.actionBuilder()\n        .doAction(() => {\n          this.switchMaps(oldMapName, newMapName, parentView);\n        })\n        .undoAction(({ is2UpdateInServer = true }) => {\n          parentView.deleteNodeFromTreeUsingName(newMapName, is2UpdateInServer);\n          Maybe.fromNull(\n            AssetsManager.getInstance().getAssetsActionMap()[oldMapName]\n          ).forEach(a => a.action(parentView));\n        })\n        .build();\n    }\n  }\n\n  switchMaps(oldMapName, newMapName, parentView) {}\n\n  getType = () => AddMapAction.TYPE;\n\n  deleteAsset = () => {};\n\n  download = async () => {};\n\n  static TYPE = \"AddMapAction\";\n}\n\nexport default AddMapAction;\n","import Action from \"./Action\";\nimport React from \"react\";\nimport { ACTIONS } from \"../MainView/MainViewActions\";\nimport MeshLoader from \"../Utils/MeshLoader\";\nimport { Maybe } from \"monet\";\nimport Mesh from \"../NodeItem/Mesh\";\nimport { Vector3, Quaternion, Color3, StandardMaterial } from \"@babylonjs/core\";\nimport { UndoManager } from \"mov-fe-lib-core\";\n\n//\nclass AddMeshAction extends Action {\n  constructor(mesh) {\n    super();\n    this.key = mesh.id;\n    this.name = mesh.name;\n    this.icon = props => <i {...props} className=\"fas fa-draw-polygon\"></i>;\n  }\n\n  action(parentView) {\n    super.action(parentView);\n    console.log(`Mesh ${this.key} : ${this.name}`, this.memory);\n    this.addMesh(parentView);\n    parentView.setSelectedAction(ACTIONS().dragObjects);\n  }\n\n  addMesh = parentView => {\n    parentView.getSceneMemory().forEach(memory => {\n      const { scene } = memory;\n      const actionMemoryClone = { ...this.memory };\n      const isImport = this.getIsImport(actionMemoryClone);\n      const finalName = this.getFinalNameFromMemory(\n        actionMemoryClone,\n        isImport\n      );\n      if (isImport) {\n        this.loadMesh(\n          parentView,\n          scene,\n          actionMemoryClone,\n          isImport,\n          finalName\n        );\n      } else {\n        parentView\n          .getUndoManager()\n          .doIt(\n            this.getUndoAbleAction(\n              parentView,\n              scene,\n              actionMemoryClone,\n              isImport,\n              finalName\n            )\n          );\n      }\n    });\n    this.memory[\"isImport\"] = false;\n  };\n\n  getIsImport(memory) {\n    return ofNull(memory[\"isImport\"]).orSome(false);\n  }\n\n  getFinalNameFromMemory(memory, isImport) {\n    return ofNull(memory[\"nodeItemDict\"])\n      .flatMap(d => (isImport ? some(d.name) : none()))\n      .orSome(`${this.name}${Math.floor(Math.random() * 100)}`);\n  }\n\n  getUndoAbleAction(parentView, scene, actionMemory, isImport, finalName) {\n    return UndoManager.actionBuilder()\n      .doAction(() => {\n        this.loadMesh(parentView, scene, actionMemory, isImport, finalName);\n      })\n      .undoAction(({ is2UpdateInServer = true }) => {\n        parentView.deleteNodeFromTreeUsingName(finalName, is2UpdateInServer);\n      })\n      .build();\n  }\n\n  loadMesh(parentView, scene, actionMemory, isImport, finalName) {\n    MeshLoader.of(scene)\n      .load(this.key)\n      .then(this.transformMesh(parentView, scene, actionMemory, isImport))\n      .then(this.addMesh2Scene(parentView, actionMemory, isImport, finalName));\n  }\n\n  transformMesh = (parentView, scene, actionMemory, isImport) => mesh => {\n    const parentMesh = this.getParentMesh(parentView);\n    mesh.parent = parentMesh;\n    mesh.createNormals();\n    const maybeDict = ofNull(actionMemory[\"nodeItemDict\"]);\n    mesh.position = maybeDict\n      .flatMap(d => (isImport ? some(d.position) : none()))\n      .map(Vector3.FromArray)\n      .orSome(Vector3.Zero());\n    mesh.rotationQuaternion = maybeDict\n      .flatMap(d => (isImport ? some(d.quaternion) : none()))\n      .map(\n        quaternion =>\n          new Quaternion(\n            quaternion[1],\n            quaternion[2],\n            quaternion[3],\n            quaternion[0]\n          )\n      )\n      .orSome(Quaternion.Identity());\n    const material = new StandardMaterial(`Mesh${mesh.name}`, scene);\n    const color = maybeDict\n      .flatMap(d => (isImport ? some(d.color) : none()))\n      .map(Color3.FromArray)\n      .orSome(Color3.Gray());\n    material.diffuseColor = color;\n    material.emissiveColor = color;\n    mesh.material = material;\n    return mesh;\n  };\n\n  addMesh2Scene = (parentView, actionMemory, isImport, finalName) => mesh => {\n    const parentMesh = this.getParentMesh(parentView);\n    mesh.name = finalName;\n    const meshItem = new Mesh(\n      mesh,\n      this.name,\n      ofNull(actionMemory[\"nodeItemDict\"])\n        .flatMap(x => (isImport ? some(x.keyValueMap) : none()))\n        .orSome({})\n    );\n\n    parentView.addNodeItem2Tree(meshItem, parentMesh.name, !isImport);\n    parentView.renderMenus();\n  };\n\n  getParentMesh = parentView => {\n    return ofNull(this.memory[\"parentObj\"])\n      .map(parentObj => parentObj.parent)\n      .flatMap(parentName => parentView.getNodeFromTree(parentName))\n      .map(treeNode => treeNode.item.mesh)\n      .orSome(parentView.getRootNode().item.mesh);\n  };\n\n  getType = () => AddMeshAction.TYPE;\n  static TYPE = \"AddMeshAction\";\n\n  deleteAsset = () => {};\n\n  download = async () => {};\n}\n\nconst ofNull = Maybe.fromNull;\nconst none = Maybe.none;\nconst some = Maybe.some;\nexport default AddMeshAction;\n","import { Maybe } from \"monet\";\nimport MouseKeysAction from \"./MouseKeysAction\";\nimport BoxRegion from \"../NodeItem/BoxRegion\";\nimport Vec3 from \"../Math/Vec3\";\nimport Util3d from \"../Util3d/Util3d\";\nimport React from \"react\";\nimport { Color3 } from \"@babylonjs/core\";\nimport { UndoManager } from \"mov-fe-lib-core\";\n\nclass BoxRegionAction extends MouseKeysAction {\n  constructor() {\n    super();\n    this.key = \"drawBoxRegion\";\n    this.name = \"Draw Box Region [3]\";\n    this.maybeMousePos = Maybe.none();\n    this.tempMesh = null;\n    this.icon = props => <i className=\"fas fa-square\" {...props} />;\n  }\n\n  action = parentView => {\n    super.action(parentView);\n    parentView.setSelectedAction(this);\n  };\n\n  onPointerDown = (evt, parentView) => {\n    if (!(evt.buttons === 1)) return;\n    parentView.getSceneMemory().forEach(memory => {\n      const scene = memory.scene;\n      const ground = memory.ground;\n      const camera = memory.camera;\n      const maybeMousePos = Util3d.getGroundPosition(scene, ground);\n      this.maybeMousePos = maybeMousePos;\n      maybeMousePos.forEach(mousePos => {\n        camera.detachControl(memory.canvas);\n      });\n    });\n  };\n\n  onPointerMove = (evt, parentView) => {\n    parentView.getSceneMemory().forEach(memory => {\n      const scene = memory.scene;\n      const ground = memory.ground;\n      const maybeCurrent = Util3d.getGroundPosition(scene, ground);\n      maybeCurrent.forEach(current => {\n        this.maybeMousePos.forEach(oldMousePos => {\n          if (this.tempMesh) this.tempMesh.dispose();\n          this.tempMesh = this.createBoxRegion(\n            [oldMousePos, current],\n            TEMP_BOX_REGION_NAME,\n            scene,\n            parentView,\n            false\n          );\n        });\n      });\n    });\n  };\n\n  onPointerUp = (evt, parentView) => {\n    parentView.getSceneMemory().forEach(memory => {\n      const scene = memory.scene;\n      const camera = memory.camera;\n      const ground = memory.ground;\n      const maybeCurrent = Util3d.getGroundPosition(scene, ground);\n      maybeCurrent.forEach(current => {\n        this.maybeMousePos.forEach(oldMousePos => {\n          if (current.subtract(oldMousePos).length() < 1e-2) return;\n          this.tempMesh.dispose();\n          const name = `BoxRegion${Math.floor(Math.random() * 1e3)}`;\n          const boxMesh = this.createBoxRegion(\n            [oldMousePos, current],\n            name,\n            scene,\n            parentView,\n            true\n          );\n          parentView.setPropertiesWithName(name);\n          parentView\n            .getUndoManager()\n            .addIt(\n              this.getUndoAbleAction(\n                [oldMousePos, current],\n                boxMesh,\n                scene,\n                parentView\n              )\n            );\n        });\n      });\n      this.maybeMousePos = Maybe.none();\n      camera.attachControl(memory.canvas, true);\n    });\n  };\n\n  getUndoAbleAction(points, mesh, scene, parentView) {\n    return UndoManager.actionBuilder()\n      .doAction(() => {\n        this.createBoxRegion(points, mesh.name, scene, parentView, true);\n      })\n      .undoAction(({ is2UpdateInServer = true }) => {\n        parentView.deleteNodeFromTreeUsingName(mesh.name, is2UpdateInServer);\n      })\n      .build();\n  }\n\n  createBoxRegion = (\n    region,\n    name,\n    scene,\n    parentView,\n    is2addInServer = true,\n    color = Color3.Red(),\n    height = 1\n  ) => {\n    const rootMesh = parentView.getRootNode().item.mesh;\n\n    const localRegion = region.map(r =>\n      Util3d.getLocalCoordFromWorld({ parent: rootMesh }, Vec3.ofBabylon(r))\n    );\n\n    localRegion[1] = localRegion[1].add(Vec3.of([0, 0, height]));\n    const middlePoint = localRegion[0].add(localRegion[1]).scale(0.5);\n    const centeredRegion = localRegion.map(r => r.sub(middlePoint));\n\n    const boxRegionItem = BoxRegion.ofDict(\n      scene,\n      {\n        name: name,\n        position: middlePoint.toArray(),\n        color: [color.r, color.g, color.b],\n        corners: centeredRegion.map(x => x.toArray())\n      },\n      parentView\n    );\n    boxRegionItem.mesh.parent = rootMesh;\n    if (is2addInServer) {\n      parentView.addNodeItem2Tree(boxRegionItem, rootMesh.name, is2addInServer);\n    }\n    return boxRegionItem.mesh;\n  };\n}\n\nconst TEMP_BOX_REGION_NAME = \"temp_box_region\";\nexport default BoxRegionAction;\n","import Util3d from \"../Util3d/Util3d\";\nimport Vec3 from \"../Math/Vec3\";\nimport { Maybe } from \"monet\";\nimport MouseKeysAction from \"./MouseKeysAction\";\nimport React from \"react\";\nimport { Vector3 } from \"@babylonjs/core\";\nimport { UndoManager } from \"mov-fe-lib-core\";\nimport Clipboard from \"../Utils/Clipboard\";\nimport { selectOneAction } from \"../Utils/Utils\";\nimport SelectionPlaceHolder from \"../Util3d/SelectionPlaceHolder\";\nimport MeshSelector from \"../MainView/MeshSelector\";\nimport Vec2 from \"../Math/Vec2\";\nimport ReactDOM from \"react-dom\";\nimport TreeObject from \"../TreeObject/TreeObject\";\nimport GlobalRef from \"../NodeItem/GlobalRef\";\nimport GraphItem from \"../NodeItem/GraphItem\";\nimport Map from \"../NodeItem/Map\";\nimport Path from \"../NodeItem/Path\";\n\nclass DragObjectsAction extends MouseKeysAction {\n  constructor() {\n    super();\n    this.key = \"dragObject\";\n    this.name = \"Grab Objects [1]\";\n    this.icon = props => <i className=\"far fa-hand-paper\" {...props}></i>;\n    this.maybeSelectedMesh = Maybe.none();\n    this.clickPointInWorld = Vec3.ZERO;\n    this.movePointInWorld = Vec3.ZERO;\n    this.startDivPos = Vec2.ZERO;\n    this.corners = [];\n  }\n\n  action = parentView => {\n    super.action(parentView);\n    parentView.setSelectedAction(this);\n  };\n\n  onPointerDown = (evt, parentView) => {\n    if (!(evt.buttons === 1 || evt.buttons === 2) || evt.ctrlKey) return;\n    parentView.getSceneMemory().forEach(({ scene, ground }) => {\n      this.maybeSelectedMesh = Util3d.pickMesh(scene, ground);\n      this.maybeSelectedMesh.forEach(currentMesh =>\n        this.dragDownMesh(currentMesh, parentView, evt)\n      );\n      this.maybeSelectedMesh.orLazy(() => {\n        this.dragDownWithoutMesh(parentView, evt);\n      });\n    });\n  };\n\n  onPointerMove = (evt, parentView) => {\n    if (!(evt.buttons === 1) || evt.ctrlKey) return;\n    parentView.getSceneMemory().forEach(({ scene, ground }) => {\n      // check that a mesh was selected\n      this.maybeSelectedMesh.forEach(selectedMesh => {\n        Util3d.getGroundPosition(scene, ground).forEach(groundPos => {\n          this.dragMoveMesh(parentView, groundPos);\n        });\n      });\n      this.maybeSelectedMesh.orLazy(() => {\n        this.dragMoveWithoutMesh(evt);\n      });\n    });\n  };\n\n  onPointerUp = (evt, parentView) => {\n    parentView.getSceneMemory().forEach(({ camera, scene, ground, canvas }) => {\n      this.maybeSelectedMesh.forEach(selectedMesh => {\n        this.dragUpMesh(selectedMesh, parentView, scene, ground);\n      });\n      this.maybeSelectedMesh.orLazy(() => {\n        this.dragUpWithoutMesh(parentView, scene);\n      });\n      // reset action\n      camera.attachControl(canvas, true);\n      this.maybeSelectedMesh = Maybe.none();\n      this.destroySelectionDiv();\n      this.corners = [];\n    });\n  };\n\n  onKeyUp = (evt, parentView) => {\n    const defaultAction = () => super.onKeyUp(evt, parentView);\n    const predicateActionList = [\n      {\n        predicate: e => [\"Backspace\", \"Delete\"].includes(e.code),\n        action: this.getDeleteButtonAction(parentView)\n      },\n      {\n        predicate: e => e.ctrlKey && e.code === \"KeyC\",\n        action: this.getCopyAction(parentView)\n      },\n      {\n        predicate: e => e.ctrlKey && e.code === \"KeyV\",\n        action: this.getPasteAction(parentView)\n      }\n    ];\n    selectOneAction(predicateActionList, defaultAction)(evt);\n  };\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                         UTILS                                        *\n   *                                                                                      */\n  //========================================================================================\n\n  dragDownMesh(currentMesh, parentView, evt) {\n    if (currentMesh.isStatic) return;\n    parentView.getSceneMemory().forEach(({ camera, canvas, scene, ground }) => {\n      camera.detachControl(canvas);\n      this.addSelectedMesh(evt, currentMesh, parentView);\n      this.handleMeshRightClick(evt, parentView, currentMesh);\n      Util3d.getGroundPosition(scene, ground).forEach(groundPos => {\n        this.updateMouseVars(groundPos);\n        // mesh onClick\n        currentMesh.onClick\n          ? currentMesh.onClick()\n          : parentView.closeContextDial();\n\n        if (currentMesh.isSelectionPlaceHolder) {\n          parentView.addGizmo2Mesh(\n            currentMesh,\n            () => {\n              this.notifyObservers(currentMesh, false, Vec3.ZERO, parentView);\n            },\n            () => {\n              this.notifyObservers(currentMesh, true, Vec3.ZERO, parentView);\n            }\n          );\n        } else {\n          this.selectMeshUpdateUI(parentView);\n        }\n      });\n    });\n  }\n\n  selectMeshUpdateUI(parentView) {\n    const meshSelector = MeshSelector.ofMainView(parentView);\n    const selectionPlaceHolder = SelectionPlaceHolder.ofMainView(parentView);\n    const selectedMeshes = meshSelector.meshes();\n    parentView.highlightMeshesInScene(selectedMeshes);\n    parentView.highlightNodesInTree(selectedMeshes.map(({ name }) => name));\n    if (selectedMeshes.length > 1) {\n      parentView.addGizmo2Name();\n      selectionPlaceHolder.clear();\n      selectionPlaceHolder.push(selectedMeshes);\n      this.setProperties(parentView, selectedMeshes[0].name);\n    } else {\n      selectionPlaceHolder.clear();\n      parentView.addGizmo2Name();\n      selectedMeshes.forEach(mesh => {\n        parentView.addGizmo2Name(mesh.name);\n        this.setProperties(parentView, mesh.name);\n      });\n    }\n  }\n\n  dragDownWithoutMesh(parentView, evt) {\n    parentView\n      .getMouseCoordsFromRoot()\n      .forEach(mousePosRoot =>\n        this.handleRightClickWithoutMesh(evt, parentView, mousePosRoot)\n      );\n    parentView.getSceneMemory().forEach(({ camera, canvas, scene }) => {\n      if (evt.shiftKey) {\n        camera.detachControl(canvas);\n        this.createSelectionDiv(evt);\n        this.corners.push(Vec2.of(scene.pointerX, scene.pointerY));\n      }\n    });\n  }\n\n  dragMoveMesh(parentView, groundPos) {\n    const meshSelector = MeshSelector.ofMainView(parentView);\n    const meshes = meshSelector.meshes();\n    const selector = SelectionPlaceHolder.ofMainView(parentView);\n    const newMousePosInWorld = Vec3.ofBabylon(groundPos);\n    const v = newMousePosInWorld.sub(this.movePointInWorld);\n    meshes.forEach(mesh => {\n      let vLocal = Util3d.getLocalCoordFromWorld(mesh, v, false);\n      vLocal = new Vector3(vLocal.x, vLocal.y, 0);\n      mesh.position = mesh.position.add(vLocal);\n      this.notifyObservers(mesh, false, v, parentView);\n    });\n    if (meshes.length > 1) {\n      let vLocal = Util3d.getLocalCoordFromWorld(selector.mesh, v, false);\n      vLocal = new Vector3(vLocal.x, vLocal.y, 0);\n      selector.mesh.position = selector.mesh.position.add(vLocal);\n    }\n    this.movePointInWorld = newMousePosInWorld;\n  }\n\n  dragMoveWithoutMesh(evt) {\n    this.updateSelectionDiv(evt);\n  }\n\n  dragUpMesh(selectedMesh, parentView, scene, ground) {\n    const meshSelector = MeshSelector.ofMainView(parentView);\n    const meshes = meshSelector.meshes();\n    const selectPlaceHolder = SelectionPlaceHolder.ofMainView(parentView);\n    Util3d.getGroundPosition(scene, ground).forEach(groundPos => {\n      const groundPosInWorld = Vec3.ofBabylon(groundPos);\n      const bigDisplacement = groundPosInWorld.sub(this.clickPointInWorld);\n      const isBigDisplacement = bigDisplacement.length() > 1e-3;\n      meshes.forEach(mesh => {\n        // TODO: find better way without edge if\n        const isBigDisplaceOrIsEdgeMesh =\n          isBigDisplacement || !!mesh.edgeIndexes;\n        this.notifyObservers(\n          mesh,\n          isBigDisplaceOrIsEdgeMesh,\n          Vec3.ZERO,\n          parentView\n        );\n        if (isBigDisplacement) parentView.updateNodeInServer(mesh.name);\n      });\n      this.setProperties(parentView, selectedMesh.name);\n      if (isBigDisplacement) {\n        parentView\n          .getUndoManager()\n          .addIt(this.getUndoAbleAction(meshes, bigDisplacement, parentView));\n      }\n      if (selectedMesh.isSelectionPlaceHolder) {\n        meshSelector.clear();\n        meshSelector.addArray(selectPlaceHolder.arrayOfMeshes);\n      }\n      this.mergePathsIfAny(selectedMesh, parentView, scene, ground);\n    });\n  }\n\n  dragUpWithoutMesh(parentView, scene) {\n    this.selectObjectsInside(scene, parentView);\n  }\n\n  handleMeshRightClick = (evt, parentView, mesh) => {\n    if (!(evt.buttons === 2)) return;\n    if (!mesh || !mesh.getMouseContextActions) return;\n    parentView.setMouseContextActions(\n      evt,\n      mesh.getMouseContextActions(parentView)\n    );\n  };\n\n  /**\n   * @param evt: event\n   * @param parentView: MainView\n   * @param mousePosFromRoot: Vector3\n   */\n  handleRightClickWithoutMesh = (evt, parentView, mousePosFromRoot) => {\n    if (!(evt.buttons === 2)) return;\n    parentView.setMouseContextActions(evt, [\n      {\n        title: \"Paste\",\n        onClick: this.getPasteOnClick(mousePosFromRoot, parentView)\n      }\n    ]);\n  };\n\n  updateMouseVars(groundPos) {\n    const groundPosInGlobal = Vec3.ofBabylon(groundPos);\n    this.movePointInWorld = groundPosInGlobal;\n    this.clickPointInWorld = groundPosInGlobal;\n  }\n\n  addSelectedMesh(evt, currentMesh, parentView) {\n    const meshSelector = MeshSelector.ofMainView(parentView);\n    // is an edge mesh\n    if (!!currentMesh.edgeIndexes) {\n      meshSelector.clear();\n      meshSelector.add(currentMesh);\n      return;\n    }\n    // not an edge mesh\n    meshSelector.filter(mesh => !mesh.edgeIndexes);\n    if (evt.shiftKey) {\n      meshSelector.add(currentMesh);\n    } else {\n      if (meshSelector.has(currentMesh)) return;\n      meshSelector.clear();\n      meshSelector.add(currentMesh);\n    }\n  }\n\n  getPasteOnClick = (mousePosFromRoot, parentView) => () => {\n    const pasteAction = Clipboard.paste();\n    if (pasteAction && typeof pasteAction === \"function\") {\n      pasteAction(mousePosFromRoot, parentView);\n    }\n  };\n\n  getDeleteButtonAction(parentView) {\n    return () => {\n      const meshSelector = MeshSelector.ofMainView(parentView);\n      const meshes = meshSelector.meshes();\n      const isOne = meshes.length === 1;\n      meshes.forEach(mesh => {\n        const maybeNode = parentView.getNodeFromTree(mesh.name);\n        maybeNode.forEach(node => parentView.onDeleteNode(node, isOne, isOne));\n        maybeNode.orElseRun(() => {\n          if (!isOne) return;\n          //TODO REFACTOR THIS;\n          const contextActions = parentView.getContextActions();\n          !!contextActions[0] && contextActions[0].action(parentView);\n          mesh.onDel && mesh.onDel();\n        });\n      });\n      parentView.highlightNodesInTree();\n      parentView.highlightMeshesInScene();\n      parentView.addGizmo2Mesh();\n      meshSelector.clear();\n      SelectionPlaceHolder.ofMainView(parentView).clear();\n      parentView.renderMenus();\n    };\n  }\n\n  getCopyAction(parentView) {\n    const meshSelector = MeshSelector.ofMainView(parentView);\n    const meshes = meshSelector.meshes();\n    const selectPlaceHolderMesh = SelectionPlaceHolder.ofMainView(parentView)\n      .mesh;\n    return () => {\n      if (meshes.length <= 1) {\n        this.copyOne(meshes);\n      } else {\n        this.copyMany(meshes, selectPlaceHolderMesh);\n      }\n    };\n  }\n\n  copyOne(meshes) {\n    Clipboard.copy((mousePosFromRoot, someMainView) => {\n      const uuid = Clipboard.getUID();\n      const itemCopyFunctions = meshes\n        .filter(mesh => !!mesh.nodeItem)\n        .map(mesh => mesh.nodeItem)\n        .map(item => item.getCopyFunction(true, name => name + \"_copy\" + uuid));\n      if (itemCopyFunctions.length === 0) return;\n      const doAction = () => {\n        const maybeCopiedItem = itemCopyFunctions[0](\n          mousePosFromRoot,\n          someMainView\n        );\n        maybeCopiedItem.forEach(item => {\n          const copiedMesh = item.mesh;\n          someMainView.addGizmo2Name(copiedMesh.name);\n          someMainView.highlightMeshesInScene([copiedMesh]);\n          someMainView.highlightNodesInTree([copiedMesh.name]);\n          MeshSelector.ofMainView(someMainView).clear().add(copiedMesh);\n          someMainView.setProperties(item.toForm());\n          someMainView.renderMenus();\n        });\n        return maybeCopiedItem;\n      };\n      const maybeCopiedItem = doAction();\n      someMainView.getUndoManager().addIt(\n        UndoManager.actionBuilder()\n          .doAction(doAction)\n          .undoAction(() => {\n            maybeCopiedItem.forEach(({ mesh: copiedMesh }) => {\n              someMainView.deleteNodeFromTreeUsingName(copiedMesh.name);\n              someMainView.highlightMeshesInScene();\n              someMainView.highlightNodesInTree();\n              someMainView.renderMenus();\n            });\n          })\n          .build()\n      );\n    });\n  }\n\n  copyMany(meshes, selectPlaceHolderMesh) {\n    Clipboard.copy((mousePosFromRoot, someMainView) => {\n      const nodeItems = meshes\n        .filter(mesh => !!mesh.nodeItem)\n        .map(mesh => mesh.nodeItem);\n      const uuids = nodeItems.map(() => Clipboard.getUID());\n      const itemCopyFunctions = nodeItems.map((item, i) =>\n        item.getCopyFunction(false, name => name + \"_copy\" + uuids[i])\n      );\n      const doAction = () => {\n        const maybeCopiedItems = itemCopyFunctions.map(\n          (itemCopyFunction, i) => {\n            const displacement = Util3d.toGlobalCoord(someMainView)(\n              nodeItems[i].mesh.absolutePosition\n            ).subtract(selectPlaceHolderMesh.position);\n            return itemCopyFunction(\n              displacement.add(mousePosFromRoot),\n              someMainView\n            );\n          }\n        );\n        const copiedItems = maybeCopiedItems\n          .filter(maybe => maybe.isSome())\n          .map(maybe => maybe.some());\n        const copiedMeshes = copiedItems.map(({ mesh }) => mesh);\n        const copiedNames = copiedItems.map(({ name }) => name);\n        someMainView.addGizmo2Name();\n        someMainView.highlightMeshesInScene(copiedMeshes);\n        someMainView.highlightNodesInTree(copiedNames);\n        MeshSelector.ofMainView(someMainView).clear().addArray(copiedMeshes);\n        SelectionPlaceHolder.ofMainView(someMainView)\n          .clear()\n          .push(copiedMeshes);\n        someMainView.renderMenus();\n        someMainView.forceUpdate();\n        return copiedItems;\n      };\n      const copiedItems = doAction();\n      someMainView.getUndoManager().addIt(\n        UndoManager.actionBuilder()\n          .doAction(doAction)\n          .undoAction(() => {\n            copiedItems.forEach(({ mesh }) => {\n              someMainView.deleteNodeFromTreeUsingName(mesh.name, true, false);\n            });\n            someMainView.highlightMeshesInScene();\n            someMainView.highlightNodesInTree();\n            MeshSelector.ofMainView(someMainView).clear();\n            SelectionPlaceHolder.ofMainView(someMainView).clear();\n            someMainView.renderMenus();\n            someMainView.forceUpdate();\n          })\n          .build()\n      );\n    });\n  }\n\n  getPasteAction(parentView) {\n    return () => {\n      parentView\n        .getMouseCoordsFromRoot()\n        .forEach(mousePosRoot =>\n          this.getPasteOnClick(mousePosRoot, parentView)()\n        );\n    };\n  }\n\n  /**\n   *\n   * @param {*} mesh: Mesh\n   * @param {*} is2updateServer: Boolean\n   * @param {*} displacement: Vec3 in world coordinates\n   */\n  notifyObservers(mesh, is2updateServer, displacement, parentView) {\n    // notify  babylonjs observers\n    Maybe.fromNull(mesh.observers).forEach(obs => {\n      obs.notifyObservers({\n        updatedPointMesh: mesh,\n        is2updateServer: is2updateServer,\n        displacement: displacement.toBabylon()\n      });\n    });\n    // notify graph observers\n    Maybe.fromNull(mesh.graphVertex).forEach(({ vertexObs }) => {\n      vertexObs({\n        updatedPointMesh: mesh,\n        is2updateServer: is2updateServer,\n        displacement: displacement.toBabylon()\n      });\n    });\n    if (parentView.getNodeFromTree(mesh.name).isSome()) {\n      this.notifyChildrenObserversRecursively(\n        mesh?._children || [],\n        is2updateServer,\n        displacement,\n        parentView\n      );\n    }\n  }\n\n  notifyChildrenObserversRecursively = (\n    nodeTree,\n    is2updateServer,\n    displacement,\n    parentView\n  ) => {\n    nodeTree.forEach(m => {\n      if (\n        (!!m.observers || !!m.graphVertex) &&\n        parentView.getNodeFromTree(m.name).isSome()\n      ) {\n        this.notifyObservers(m, is2updateServer, displacement, parentView);\n      }\n      if (m._children && m._children.length)\n        this.notifyChildrenObserversRecursively(\n          m._children,\n          is2updateServer,\n          displacement,\n          parentView\n        );\n    });\n  };\n\n  setProperties = (parentView, name) => parentView.setPropertiesWithName(name);\n\n  /**\n   *\n   * @param {*} selectedMeshes: Array<Mesh>\n   * @param {*} displacement: Vec3 in world coordinates\n   * @param {*} parentView: MainView\n   */\n  getUndoAbleAction(selectedMeshes, displacement, parentView) {\n    const meshesStruct = [...selectedMeshes].map(m => ({\n      mesh: m,\n      parent: m.parent,\n      keypointIndex: m.index || -1\n    }));\n    const sendMesh = (mesh, finalDisplacement, is2UpdateInServer = true) => {\n      const localDisplacement = Util3d.getLocalCoordFromWorld(\n        mesh,\n        finalDisplacement,\n        false\n      );\n      const newPos = Vec3.ofBabylon(mesh.position).add(localDisplacement);\n      mesh.position = newPos.toBabylon();\n      this.notifyObservers(\n        mesh,\n        is2UpdateInServer,\n        finalDisplacement,\n        parentView\n      );\n    };\n    const moveMesh = (dir = 1, is2UpdateInServer = true) => ({\n      mesh,\n      parent,\n      keypointIndex\n    }) => {\n      const finalDisplacement = displacement.scale(dir);\n      let maybeNodeItem = Maybe.None();\n      if (keypointIndex >= 0) {\n        maybeNodeItem = parentView.getNodeFromTree(parent.name);\n        maybeNodeItem.forEach(({ item }) => {\n          const nodeMesh = item.keyPoints[keypointIndex];\n          sendMesh(nodeMesh, finalDisplacement, is2UpdateInServer);\n          if (is2UpdateInServer) parentView.updateNodeInServer(item.name);\n        });\n        maybeNodeItem.orElseRun(() => {});\n      } else {\n        maybeNodeItem = parentView.getNodeFromTree(mesh.name);\n        maybeNodeItem.forEach(({ item }) => {\n          const nodeMesh = item.mesh;\n          sendMesh(nodeMesh, finalDisplacement, is2UpdateInServer);\n          if (is2UpdateInServer) parentView.updateNodeInServer(nodeMesh.name);\n        });\n      }\n      maybeNodeItem.orElseRun(() => {\n        sendMesh(mesh, finalDisplacement, is2UpdateInServer);\n        if (is2UpdateInServer) parentView.updateNodeInServer(mesh.name);\n      });\n    };\n    return UndoManager.actionBuilder()\n      .doAction(() => {\n        meshesStruct.forEach(moveMesh());\n      })\n      .undoAction(({ is2UpdateInServer = true }) => {\n        meshesStruct.forEach(moveMesh(-1, is2UpdateInServer));\n      })\n      .build();\n  }\n\n  createSelectionDiv(e) {\n    this.startDivPos = this.findMouseInDom(e);\n    const { x, y } = this.startDivPos;\n    const outerDiv = document.createElement(\"div\");\n    outerDiv.id = ID;\n    document.body.appendChild(outerDiv);\n    ReactDOM.render(\n      <SelectDiv left={x} top={y}></SelectDiv>,\n      document.getElementById(ID)\n    );\n  }\n\n  updateSelectionDiv(e) {\n    const newMouse = this.findMouseInDom(e);\n    const oldMouse = this.startDivPos;\n    const { x: minX, y: minY } = newMouse.op(oldMouse, Math.min);\n    const { x: maxX, y: maxY } = newMouse.op(oldMouse, Math.max);\n    const outerDiv = document.getElementById(ID);\n    if (!outerDiv) return;\n    ReactDOM.render(\n      <SelectDiv\n        left={minX}\n        top={minY}\n        width={maxX - minX}\n        height={maxY - minY}\n        style={{ zIndex: 999 }}\n      ></SelectDiv>,\n      outerDiv\n    );\n  }\n\n  destroySelectionDiv() {\n    const outerDiv = document.getElementById(ID);\n    if (!outerDiv) return;\n    outerDiv.parentNode.removeChild(outerDiv);\n  }\n\n  findMouseInDom(e) {\n    const x = e.clientX; //x position within the element.\n    const y = e.clientY; //y position within the element.\n    return new Vec2(x, y);\n  }\n\n  selectObjectsInside(scene, parentView) {\n    if (this.corners.length === 0) return;\n    this.corners.push(Vec2.of(scene.pointerX, scene.pointerY));\n    const [oldMouse, newMouse] = this.corners;\n    const min = newMouse.op(oldMouse, Math.min);\n    const max = newMouse.op(oldMouse, Math.max);\n    const cornersDiv = [min, Vec2.of(max.x, min.y), max, Vec2.of(min.x, max.y)];\n    const rayCastCorners = cornersDiv.map(p => this.pickPoints(p, parentView));\n    if (rayCastCorners.some(x => x === null || x === undefined)) return;\n    const treeObj = new TreeObject(parentView.getObjectTree());\n    const insideBox = treeObj.flatten(\n      this.isItemInsideBox(rayCastCorners, parentView)\n    );\n    let insideBoxDragAbleMeshes = insideBox.map(({ item }) => item.mesh);\n    const meshSelector = MeshSelector.ofMainView(parentView);\n    meshSelector.clear();\n    if (insideBoxDragAbleMeshes.length !== 0) {\n      meshSelector.addArray(insideBoxDragAbleMeshes, false);\n    }\n    this.selectMeshUpdateUI(parentView);\n  }\n\n  /**\n   *\n   * @param {*} p: Vec2 point in canvas\n   * @param {*} parentView: MainView\n   */\n  pickPoints(p, parentView) {\n    return parentView\n      .getSceneMemory()\n      .flatMap(memory => {\n        const { scene, ground } = memory;\n        const pickInfo = scene.pick(p.x, p.y, mesh => mesh === ground);\n        if (pickInfo.hit) {\n          const floorPoint = Util3d.toGlobalCoord(parentView)(\n            pickInfo.pickedPoint\n          );\n          return Maybe.some(Vec2.of(floorPoint.x, floorPoint.y));\n        }\n        return Maybe.none();\n      })\n      .orNull();\n  }\n\n  /**\n   *\n   * @param {*} polygon: Array<Vec2>\n   * @param {*} parentView\n   */\n  isItemInsideBox(polygon, parentView) {\n    return ({ item }) => {\n      const type = item.getType();\n      if (\n        type === GlobalRef.TYPE ||\n        type === Map.TYPE ||\n        type === GraphItem.TYPE ||\n        item?.mesh?.isSelectionPlaceHolder\n      )\n        return false;\n      const { mesh } = item;\n      return this.isMeshInsideBox(polygon, parentView)(mesh);\n    };\n  }\n\n  /**\n   *\n   * @param {*} polygon: Array<Vec2>\n   * @param {*} parentView\n   */\n  isMeshInsideBox(polygon, parentView) {\n    return mesh => {\n      const p = Util3d.toGlobalCoord(parentView)(mesh.absolutePosition);\n      const planeP = new Vec2(p.x, p.y);\n      return this.isPointInsideBox(polygon)(planeP);\n    };\n  }\n\n  /**\n   *\n   * @param {*} polygon: Array<Vec2>\n   * @param {*} epsilon: Number\n   */\n  isPointInsideBox(polygon, epsilon = 1e-3) {\n    return p => {\n      let theta = 0;\n      const n = polygon.length;\n      for (let i = 0; i < n; i++) {\n        const vi = polygon[i].sub(p);\n        const vii = polygon[(i + 1) % n].sub(p);\n        theta += Math.acos(vi.dot(vii) / (vi.length() * vii.length()));\n      }\n      return Math.abs(theta - 2 * Math.PI) < epsilon;\n    };\n  }\n\n  /**\n   *\n   * Merge paths if boundary keypoints are dragged together and have same orientation\n   *\n   * @param {*} selectedMesh\n   * @param {*} parentView\n   * @param {*} scene\n   * @param {*} ground\n   * @returns\n   */\n  mergePathsIfAny(selectedMesh, parentView, scene, ground) {\n    if (!Path.isKeyPointMesh(selectedMesh, parentView)) return;\n    const pickInfo = scene.pick(\n      scene.pointerX,\n      scene.pointerY,\n      mesh => mesh !== ground && mesh.isEnabled()\n    );\n    if (pickInfo.hit) {\n      const ray = pickInfo.ray;\n      var hits = scene.multiPickWithRay(ray);\n      if (hits) {\n        const keyPointHits = hits\n          .map(({ pickedMesh }) => pickedMesh)\n          .filter(hitMesh => Path.isKeyPointMesh(hitMesh, parentView));\n        // Are hits a keypoint of path\n        if (keyPointHits.length >= 2) {\n          const [first, second] = keyPointHits;\n          const left = first.index > second.index ? first : second;\n          const right = first.index <= second.index ? first : second;\n          // do they belong to the same path\n          if (left.parent.name !== right.parent.name) {\n            if (Path.areKeyPointsCompatible(left, right, parentView)) {\n              parentView\n                .getNodeFromTree(left.parent.name)\n                .forEach(({ item: firstPath }) => {\n                  parentView\n                    .getNodeFromTree(right.parent.name)\n                    .forEach(({ item: secondPath }) => {\n                      const oldPaths = [firstPath, secondPath].map(path => {\n                        return {\n                          parent: path.mesh.parent,\n                          dict: path.toDict(),\n                          children: [...path.mesh._children]\n                        };\n                      });\n                      const mergeName = firstPath.name + \"_\" + secondPath.name;\n                      parentView.getUndoManager().doIt(\n                        UndoManager.actionBuilder()\n                          .doAction(() => {\n                            Path.mergePaths(\n                              firstPath.name,\n                              secondPath.name,\n                              mergeName,\n                              parentView\n                            );\n                          })\n                          .undoAction(({ is2UpdateInServer = true }) => {\n                            Path.unMergePaths(\n                              oldPaths,\n                              mergeName,\n                              parentView,\n                              is2UpdateInServer\n                            );\n                          })\n                          .build()\n                      );\n                    });\n                });\n            }\n          }\n        }\n      }\n    }\n  }\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                     SELECTION DIV                                    *\n *                                                                                      */\n//========================================================================================\n\nconst SelectDiv = ({ left, top, width, height, style }) => {\n  return (\n    <div\n      style={{\n        position: \"absolute\",\n        top: top,\n        left: left,\n        width: width,\n        height: height,\n        borderRadius: 10,\n        border: \"solid\",\n        borderColor: \"#c7c7c7\",\n        ...style\n      }}\n    ></div>\n  );\n};\nSelectDiv.defaultProps = {\n  left: 0,\n  top: 0,\n  width: 0,\n  height: 0\n};\nconst ID = \"SELECTION_TOOL_ID\";\n//========================================================================================\n/*                                                                                      *\n *                                        EXPORT                                        *\n *                                                                                      */\n//========================================================================================\n\nexport default DragObjectsAction;\n","import MouseKeysAction from \"./MouseKeysAction\";\nimport React from \"react\";\nimport Util3d from \"../Util3d/Util3d\";\nimport { Color3 } from \"@babylonjs/core\";\nimport GraphItem from \"../NodeItem/GraphItem\";\nimport Constants from \"../Utils/Constants\";\nimport { UndoManager } from \"mov-fe-lib-core\";\nimport { selectOneAction } from \"../Utils/Utils\";\nimport Path from \"../NodeItem/Path\";\nimport { Maybe } from \"monet\";\nimport GlobalRef from \"../NodeItem/GlobalRef\";\n\nclass DrawGraphAction extends MouseKeysAction {\n  constructor() {\n    super();\n    this.key = \"drawGraph\";\n    this.name = \"Draw Graph [6]\";\n    this.icon = props => <i className=\"fas fa-project-diagram\" {...props}></i>;\n\n    this.previewMeshes = [];\n    this.firstMousePos = undefined;\n    this.firstClickedMesh = undefined;\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                            Mouse Key Action Implementation                           *\n   *                                                                                      */\n  //========================================================================================\n\n  action = parentView => {\n    super.action(parentView);\n    parentView.setSelectedAction(this);\n    // Make LogicGraph visible when action is selected\n    parentView.getGraph().forEach(node => {\n      if (!node.isVisible) {\n        node.item.mesh.setEnabled(true);\n      }\n    });\n  };\n\n  onPointerDown = (evt, parentView) => {\n    if (!(evt.buttons === 1)) return;\n    this.mousePosConsumer(parentView)((mousePos, memory) => {\n      const { scene, ground } = memory;\n      const maybeMesh = Util3d.pickMesh(scene, ground).filter(\n        this.isConnectableMesh(parentView)\n      );\n      maybeMesh.forEach(possibleMesh => {\n        parentView.highlightMeshesInScene([possibleMesh], Color3.Green());\n        this.onPointerDownLine(mousePos, possibleMesh, memory, parentView);\n      });\n      maybeMesh.orElseRun(() => {\n        // no mesh found\n        parentView.highlightMeshesInScene();\n        this.resetPreview();\n      });\n    });\n  };\n\n  onPointerMove = (evt, parentView) => {\n    this.mousePosConsumer(parentView)((mousePos, memory) => {\n      const { scene, ground } = memory;\n      Util3d.pickMesh(scene, ground)\n        .filter(this.isConnectableMesh(parentView))\n        .cata(\n          () => parentView.highlightMeshesInScene(),\n          pickedMesh =>\n            parentView.highlightMeshesInScene([pickedMesh], Color3.Green())\n        );\n      if (!this.firstMousePos) return;\n      this.onPointerMoveLine(mousePos, memory, parentView);\n    });\n  };\n\n  onPointerUp = (evt, parentView) => {};\n\n  onKeyUp = (evt, parentView) => {\n    const escapeAction = () => this.resetPreview();\n    const predicateActionList = [\n      {\n        predicate: e => [\"Backspace\", \"Delete\", \"Escape\"].includes(e.code),\n        action: escapeAction\n      }\n    ];\n    selectOneAction(predicateActionList)(evt);\n  };\n\n  onChange() {\n    this.resetPreview();\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                  Auxiliary functions                                  *\n   *                                                                                      */\n  //========================================================================================\n\n  resetPreview = () => {\n    if (!!this.firstMousePos) {\n      this.deletePreviewMeshes();\n      this.firstMousePos = undefined;\n      this.firstClickedMesh = undefined;\n    }\n  };\n\n  deletePreviewMeshes = () => {\n    this.previewMeshes.forEach(mesh => mesh.dispose());\n    this.previewMeshes = [];\n  };\n\n  mousePosConsumer = parentView => lambda => {\n    parentView.getSceneMemory().forEach(memory => {\n      const { scene, ground } = memory;\n      const maybeCurrent = Util3d.getGroundPosition(scene, ground);\n      maybeCurrent.forEach(mousePos => lambda(mousePos, memory));\n    });\n  };\n\n  /**\n   * returns a predicate(mesh => boolean) that tells if a mesh is connectable by an edge\n   * @param {*} parentView\n   */\n  isConnectableMesh = parentView => mesh => {\n    return parentView\n      .getNodeFromTree(mesh.name)\n      .cata(\n        () => {\n          // mesh is not a nodeItem, check if mesh parent is a path and is beginning or end of path\n          const parentName = mesh?.parent?.name || \"\";\n          return parentView\n            .getNodeFromTree(parentName)\n            .filter(({ item }) => item.getType() === Path.TYPE)\n            .filter(({ item }) => {\n              const index = mesh.index;\n              return index === 0 || index === item.keyPoints.length - 1;\n            });\n        },\n        ({ item }) => {\n          // mesh is a nodeItem, check if not path\n          return Maybe.some(mesh).filter(\n            _ =>\n              item.getType() !== Path.TYPE && item.getType() !== GlobalRef.TYPE\n          );\n        }\n      )\n      .orSome(false);\n  };\n\n  belongsToPath = parentView => mesh => {\n    const parentName = mesh?.parent?.name || \"\";\n    return parentView\n      .getNodeFromTree(parentName)\n      .filter(({ item }) => item.getType() === Path.TYPE)\n      .map(({ item }) => item.name);\n  };\n\n  belongs2SamePath = parentView => (meshI, meshJ) => {\n    const belongsToPath = this.belongsToPath(parentView);\n    return belongsToPath(meshI)\n      .flatMap(nameI => belongsToPath(meshJ).map(nameJ => nameI === nameJ))\n      .orSome(false);\n  };\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                       Line Edge                                      *\n   *                                                                                      */\n  //========================================================================================\n\n  onPointerDownLine = (mousePos, clickedMesh, memory, parentView) => {\n    const { scene } = memory;\n    if (!this.firstMousePos) {\n      this.firstMousePos = mousePos;\n      this.firstClickedMesh = clickedMesh;\n    } else {\n      //firstMousePos exists\n      if (\n        this.belongs2SamePath(parentView)(clickedMesh, this.firstClickedMesh) ||\n        GraphItem.isInvalidEdge(this.firstClickedMesh, clickedMesh) ||\n        this.firstClickedMesh.name === clickedMesh.name\n      ) {\n        this.resetPreview();\n      } else {\n        parentView\n          .getUndoManager()\n          .doIt(\n            this.getUndoAbleLineEdge(\n              [this.firstClickedMesh, clickedMesh],\n              scene,\n              parentView,\n              clickedMesh\n            )\n          );\n      }\n    }\n  };\n\n  getUndoAbleLineEdge = (edgeMeshes, scene, parentView) => {\n    return UndoManager.actionBuilder()\n      .doAction(() => {\n        this.createEdge(edgeMeshes, scene, parentView);\n        this.resetPreview();\n      })\n      .undoAction(({ is2UpdateInServer = true }) => {\n        this.deleteEdge(edgeMeshes, parentView, is2UpdateInServer);\n      })\n      .build();\n  };\n\n  onPointerMoveLine = (mousePos, memory, parentView) => {\n    // preview line\n    const visibility = 0.25;\n    const { scene } = memory;\n    const rootMesh = parentView.getRootNode().item.mesh;\n    const edgeEmbedding = toGlobalCoord(parentView)([\n      this.firstMousePos,\n      mousePos\n    ]);\n    this.deletePreviewMeshes();\n    this.previewMeshes = [\n      GraphItem.getEdgeMesh(\n        scene,\n        edgeEmbedding,\n        \"previewEdge\",\n        Color3.Blue(),\n        Constants.RADIUS / 4\n      )\n    ];\n    this.previewMeshes.forEach(mesh => {\n      mesh.visibility = visibility;\n      mesh.parent = rootMesh;\n      mesh.isPickable = false;\n    });\n  };\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                    Draw functions                                    *\n   *                                                                                      */\n  //========================================================================================\n\n  createEdge = (edgeMeshes, scene, parentView) => {\n    GraphItem.createGraphItemIfNone(scene, parentView);\n    parentView.getGraph().forEach(graphNode => {\n      const { item: graphItem } = graphNode;\n      graphItem.addEdge(...edgeMeshes);\n      parentView.updateNodeInServer(graphItem.name);\n    });\n  };\n\n  deleteEdge = (edgeMeshes, parentView, is2UpdateInServer) => {\n    parentView.getGraph().forEach(graphNode => {\n      const { item: graphItem } = graphNode;\n      graphItem.delEdge(...edgeMeshes);\n      if (is2UpdateInServer) parentView.updateNodeInServer(graphItem.name);\n    });\n  };\n}\n\nconst toGlobalCoord = Util3d.toGlobalCoord;\nexport default DrawGraphAction;\n","import Util3d from \"../Util3d/Util3d\";\nimport Vec3 from \"../Math/Vec3\";\nimport Path from \"../NodeItem/Path\";\nimport MouseKeysAction from \"./MouseKeysAction\";\nimport React from \"react\";\nimport { Color3 } from \"@babylonjs/core\";\nimport { UndoManager } from \"mov-fe-lib-core\";\nimport { selectOneAction } from \"../Utils/Utils\";\nimport Constants from \"../Utils/Constants\";\n\nclass DrawPathAction extends MouseKeysAction {\n  constructor() {\n    super();\n    this.key = \"drawPath\";\n    this.name = \"Draw Path [2]\";\n    this.icon = props => <i className=\"fas fa-bezier-curve\" {...props}></i>;\n    this.mouseCurve = [];\n    this.spherePlaceHolder = { dispose: () => {}, isDisposed: () => true };\n  }\n\n  action = parentView => {\n    super.action(parentView);\n    parentView.setSelectedAction(this);\n  };\n\n  onChange = parentView => {\n    if (this.mouseCurve.length > 1) {\n      parentView.getSceneMemory().forEach(({ scene }) => {\n        parentView\n          .getUndoManager()\n          .doIt(\n            this.getUndoAbleEnterAction(this.mouseCurve, scene, parentView)\n          );\n      });\n    }\n  };\n\n  onPointerDown = (evt, parentView) => {\n    if (!(evt.buttons === 1)) return;\n    if (!this.spherePlaceHolder.isDisposed()) {\n      this.createPointInCurve(parentView);\n      return;\n    }\n    parentView.getSceneMemory().forEach(memory => {\n      const { scene, ground, camera, canvas } = memory;\n      const maybeMousePos = Util3d.getGroundPosition(scene, ground);\n      maybeMousePos.forEach(mousePos => {\n        camera.detachControl(canvas);\n        this.mouseCurve.push(mousePos);\n        parentView\n          .getUndoManager()\n          .doIt(\n            this.getUndoAbleClickAction(\n              this.mouseCurve,\n              scene,\n              parentView,\n              memory\n            )\n          );\n      });\n    });\n  };\n\n  getUndoAbleClickAction(keyPoints, scene, parentView, { camera, canvas }) {\n    const kps = [...keyPoints];\n    return UndoManager.actionBuilder()\n      .doAction(() => {\n        const finalKps = kps.length === 1 ? [kps[0], kps[0]] : kps;\n        parentView.deleteNodeFromTreeUsingName(TEMP_PATH_NAME, false, false);\n        this.createCurve(finalKps, TEMP_PATH_NAME, scene, parentView, false);\n        if (kps.length <= 2) {\n          parentView.setContextActions(\n            this.getDrawPathContextAction(camera, canvas, scene)\n          );\n        }\n        this.mouseCurve = kps;\n      })\n      .undoAction(({ is2UpdateInServer = true }) => {\n        parentView.deleteNodeFromTreeUsingName(\n          TEMP_PATH_NAME,\n          is2UpdateInServer\n        );\n        const reducedKps = kps.slice(0, kps.length - 1);\n        const finalKps =\n          reducedKps.length === 1 ? [reducedKps[0], reducedKps[0]] : reducedKps;\n        if (is2UpdateInServer) {\n          reducedKps.length > 0 &&\n            this.createCurve(\n              finalKps,\n              TEMP_PATH_NAME,\n              scene,\n              parentView,\n              false\n            );\n          this.mouseCurve = reducedKps;\n        } else {\n          this.mouseCurve = [];\n        }\n      })\n      .build();\n  }\n\n  onPointerMove = (evt, parentView) => {\n    this.addKeyPointPlaceHolder(parentView);\n  };\n\n  onPointerUp = (evt, parentView) => {\n    // empty\n  };\n\n  onKeyUp = (evt, parentView) => {\n    const defaultAction = () => super.onKeyUp(evt, parentView);\n    parentView.getSceneMemory().forEach(memory => {\n      const { scene, camera, canvas } = memory;\n      const contextActions = this.getDrawPathContextAction(\n        camera,\n        canvas,\n        scene\n      );\n      selectOneAction(\n        [\n          {\n            predicate: e => e.code === \"Enter\" || e.code === \"NumpadEnter\",\n            action: () => contextActions[1].action(parentView)\n          },\n          {\n            predicate: e => e.code === \"Delete\" || e.code === \"Backspace\",\n            action: () => contextActions[0].action(parentView)\n          },\n          {\n            predicate: e => e.code === \"Escape\",\n            action: () => {\n              contextActions[0].action(parentView);\n            }\n          }\n        ],\n        defaultAction\n      )(evt);\n    });\n  };\n\n  /**\n   *\n   * @param {*} curve: Array<Vector3>\n   * @param {*} name: String\n   * @param {*} scene: Scene\n   * @param {*} parentView: MainView\n   * @param {*} is2addInServer: Boolean\n   * @param {*} color: Color3\n   */\n  createCurve = (\n    curve,\n    name,\n    scene,\n    parentView,\n    is2addInServer = true,\n    color = Color3.Gray()\n  ) => {\n    const rootMesh = parentView.getRootNode().item.mesh;\n    const localCurve = Util3d.toGlobalCoord(parentView)(curve);\n    const middlePoint = Util3d.pointAverage(localCurve);\n    const centeredCurve = localCurve.map(w => w.subtract(middlePoint));\n\n    const pathItem = Path.ofDict(\n      scene,\n      {\n        name: name,\n        position: Vec3.ofBabylon(middlePoint).toArray(),\n        color: [color.r, color.g, color.b],\n        localPath: centeredCurve.map(z => Vec3.ofBabylon(z).toArray())\n      },\n      parentView\n    );\n    pathItem.mesh.parent = rootMesh;\n    parentView.addNodeItem2Tree(\n      pathItem,\n      rootMesh.name,\n      is2addInServer,\n      true,\n      is2addInServer\n    );\n    return pathItem;\n  };\n\n  getDrawPathContextAction = (camera, canvas, scene) => {\n    const ans = [];\n    ans.push({\n      icon: props => <i className=\"fas fa-trash\" {...props}></i>,\n      action: parentView => {\n        camera.attachControl(canvas, true);\n        parentView.deleteNodeFromTreeUsingName(TEMP_PATH_NAME, false);\n        this.mouseCurve = [];\n        parentView.closeContextDial();\n      },\n      name: \"Clear Path [ESC | DEL | Backspace]\"\n    });\n    if (this.mouseCurve.length > 1) {\n      ans.push({\n        icon: props => <i className=\"fas fa-check\" {...props}></i>,\n        action: parentView => {\n          camera.attachControl(canvas, true);\n          parentView\n            .getUndoManager()\n            .doIt(\n              this.getUndoAbleEnterAction(this.mouseCurve, scene, parentView)\n            );\n        },\n        name: \"Create Path [Enter]\"\n      });\n    }\n    return ans;\n  };\n\n  getUndoAbleEnterAction(keyPoints, scene, parentView) {\n    const kps = [...keyPoints];\n    const name = `Path${Math.floor(Math.random() * 1e3)}`;\n    return UndoManager.actionBuilder()\n      .doAction(() => {\n        parentView.deleteNodeFromTreeUsingName(TEMP_PATH_NAME, false);\n        const pathItem = this.createCurve(kps, name, scene, parentView, true);\n        this.mouseCurve = [];\n        parentView.setPropertiesWithName(name);\n        parentView.closeContextDial();\n        if (pathItem && pathItem.keyPoints) {\n          const keyPointMeshes = pathItem.keyPoints;\n          Path.addEdgesInKeyPoints(keyPointMeshes, scene, parentView);\n        }\n      })\n      .undoAction(({ is2UpdateInServer = true }) => {\n        this.deleteEdgeInKeyPoints(name, parentView, is2UpdateInServer);\n        parentView.deleteNodeFromTreeUsingName(name, is2UpdateInServer);\n        if (is2UpdateInServer) {\n          this.createCurve(kps, TEMP_PATH_NAME, scene, parentView, false);\n          this.mouseCurve = kps;\n        } else {\n          this.mouseCurve = [];\n          parentView.deleteNodeFromTreeUsingName(TEMP_PATH_NAME, false);\n        }\n      })\n      .build();\n  }\n\n  deleteEdgeInKeyPoints(pathName, parentView, is2UpdateInServer = true) {\n    parentView.getGraph().forEach(({ item: graph }) => {\n      parentView.getNodeFromTree(pathName).forEach(({ item: pathItem }) => {\n        const keyPointMeshes = pathItem.keyPoints;\n        const edgeMeshes = [\n          keyPointMeshes[0],\n          keyPointMeshes[keyPointMeshes.length - 1]\n        ];\n        graph.delEdge(...edgeMeshes);\n        if (is2UpdateInServer) parentView.updateNodeInServer(graph.name);\n      });\n    });\n  }\n\n  addKeyPointPlaceHolder(parentView) {\n    this.spherePlaceHolder.dispose();\n    parentView.getSceneMemory().forEach(({ scene, ground }) => {\n      Util3d.pickMesh(scene, ground).forEach(mesh => {\n        if (mesh.name === TEMP_PATH_NAME) return;\n        parentView.getNodeFromTree(mesh.name).forEach(({ item: nodeItem }) => {\n          if (nodeItem.getType() === Path.TYPE) {\n            Util3d.getGroundPosition(scene, ground).forEach(groundPos => {\n              const rootMesh = parentView.getRootNode().item.mesh;\n              this.spherePlaceHolder = Util3d.createSphere(\n                scene,\n                Color3.Gray(),\n                Constants.RADIUS,\n                \"sphereInsertPlaceHolder\",\n                false\n              );\n              this.spherePlaceHolder.parent = rootMesh;\n              this.spherePlaceHolder.position = Util3d.toGlobalCoord(\n                parentView\n              )(groundPos);\n              this.spherePlaceHolder.visibility = 0.5;\n            });\n          }\n        });\n      });\n    });\n  }\n\n  createPointInCurve(parentView) {\n    parentView.getSceneMemory().forEach(({ scene, ground }) => {\n      // dispose mesh before pick mesh\n      this.spherePlaceHolder.dispose();\n      // it can be shown that the picked mesh is the curve we want to edit\n      Util3d.pickMesh(scene, ground).forEach(({ name }) => {\n        parentView.getNodeFromTree(name).forEach(({ item: pathItem }) => {\n          Util3d.getGroundPosition(scene, ground).forEach(groundPos => {\n            const oldPoints = [...pathItem.localPath].map(p =>\n              Vec3.of(p).toBabylon()\n            );\n            const oldPosition = pathItem.mesh.position;\n            parentView.getUndoManager().doIt(\n              UndoManager.actionBuilder()\n                .doAction(() => {\n                  this.insertPointInCurve(\n                    scene,\n                    parentView,\n                    pathItem,\n                    groundPos\n                  );\n                  parentView.updateNodeInServer(pathItem.name);\n                })\n                .undoAction(({ is2UpdateInServer = true }) => {\n                  Path.createNewMeshFromOldUsingNewPoints(\n                    oldPoints,\n                    scene,\n                    pathItem,\n                    parentView,\n                    Path.onAddNewPointKeyPointUpdate\n                  );\n                  pathItem.mesh.position = oldPosition;\n                  if (is2UpdateInServer)\n                    parentView.updateNodeInServer(pathItem.name);\n                })\n                .build()\n            );\n          });\n        });\n      });\n    });\n  }\n\n  insertPointInCurve(scene, parentView, pathItem, groundPosInWorld) {\n    const localGround = Util3d.getLocalCoordFromWorld(\n      { parent: pathItem.mesh },\n      Vec3.ofBabylon(groundPosInWorld)\n    );\n    const localPath = pathItem.localPath.map(p => Vec3.of(p));\n    const sortedDistances = localPath\n      .map((p, i) => ({\n        distance: localGround.sub(p).length(),\n        index: i\n      }))\n      .sort((a, b) => a.distance - b.distance);\n    // all paths have 2 points at least\n    const minIndex = Math.min(\n      sortedDistances[0].index,\n      sortedDistances[1].index\n    );\n    const localPathB = localPath.map(p => p.toBabylon());\n    const newPoints = [\n      ...localPathB.slice(0, minIndex + 1),\n      localGround.toBabylon(),\n      ...localPathB.slice(minIndex + 1)\n    ];\n    Path.createNewMeshFromOldUsingNewPoints(\n      newPoints,\n      scene,\n      pathItem,\n      parentView,\n      Path.onAddNewPointKeyPointUpdate\n    );\n  }\n}\n\nconst TEMP_PATH_NAME = \"temp_curve\";\nexport default DrawPathAction;\n","import Util3d from \"../Util3d/Util3d\";\nimport MouseKeysAction from \"./MouseKeysAction\";\nimport React from \"react\";\nimport { MeshBuilder } from \"@babylonjs/core\";\nimport { AdvancedDynamicTexture, TextBlock } from \"@babylonjs/gui/2D\";\nimport Vec2 from \"../Math/Vec2\";\n\nclass MeasureAction extends MouseKeysAction {\n  constructor() {\n    super();\n    this.key = \"drawWall\";\n    this.name = \"Measure [7]\";\n    this.icon = props => <i className=\"fas fa-ruler\" {...props}></i>;\n    this.ruler = []; // can only have two elements, start point and end point\n    this.rulerMesh = null;\n    this.advancedTexture = null;\n    this.text = null;\n  }\n\n  action = parentView => {\n    super.action(parentView);\n    parentView.setSelectedAction(this);\n  };\n\n  onChange = parentView => {\n    this.resetMeasure(parentView);\n  };\n\n  onPointerDown = (evt, parentView) => {\n    if (evt.button !== 0) {\n      return;\n    }\n    parentView.getSceneMemory().forEach(({ scene, ground, camera, canvas }) => {\n      Util3d.getGroundPosition(scene, ground).forEach(current => {\n        const currentMousePos = Util3d.toGlobalCoord(parentView)(current);\n        this.ruler.push(currentMousePos);\n        if (this.ruler.length > 2) {\n          this.resetMeasure(parentView);\n        } else if (this.ruler.length === 2) {\n          // remove temp mesh\n          this.rulerMesh && this.rulerMesh.dispose();\n          this.rulerMesh = this.createRulerMesh(this.ruler, scene, parentView);\n          this.addTextGUI(\n            scene,\n            this.calculateDistance(this.ruler[0], currentMousePos),\n            evt\n          );\n          camera.attachControl(canvas, true);\n        } else {\n          camera.detachControl(canvas);\n        }\n      });\n    });\n  };\n\n  onPointerMove = (evt, parentView) => {\n    parentView.getSceneMemory().forEach(({ scene, ground }) => {\n      Util3d.getGroundPosition(scene, ground).forEach(current => {\n        const currentMousePos = Util3d.toGlobalCoord(parentView)(current);\n        // If the user pressed the mouse wheel or is rotating the view, it will delete the ruler\n        if (\n          this.ruler.length >= 2 &&\n          (evt.buttons === 4 || evt.pressure === 0.5)\n        ) {\n          this.resetMeasure(parentView);\n        }\n        // Fixed one point so display the ruler real time\n        if (this.ruler.length === 1) {\n          // Remove previous element from Mesh to not overlap\n          this.rulerMesh && this.rulerMesh.dispose();\n          this.rulerMesh = this.createRulerMesh(\n            [this.ruler[0], currentMousePos],\n            scene,\n            parentView\n          );\n          this.addTextGUI(\n            scene,\n            this.calculateDistance(this.ruler[0], currentMousePos),\n            evt\n          );\n        }\n      });\n    });\n  };\n\n  onPointerUp = (evt, parentView) => {};\n\n  onWheel = (evt, parentView) => {\n    if (Math.abs(evt.deltaY) > 0) {\n      this.resetMeasure(parentView);\n    }\n  };\n\n  // Calculate 2D distance from starting of ruler to the end of ruler\n  calculateDistance = (start, end) => {\n    const startVec = Vec2.ofBabylon(start);\n    const endVec = Vec2.ofBabylon(end);\n    return startVec.sub(endVec).length().toFixed(3);\n  };\n\n  addTextGUI = function (scene, value, evt) {\n    // TODO: maybe should use mouse coordinates  advanced texture from mainView\n    if (!this.advancedTexture) {\n      this.advancedTexture = AdvancedDynamicTexture.CreateFullscreenUI(\n        \"UI Ruler\",\n        true,\n        scene\n      );\n    }\n    this.text && this.advancedTexture.removeControl(this.text);\n    this.text = new TextBlock();\n    this.text.text = `${value}m`;\n    this.text.fontSize = 17;\n    this.text.left = scene.pointerX - evt.target.width / 2 + 20;\n    this.text.top = scene.pointerY - evt.target.height / 2 + 20;\n    this.text.color = \"white\";\n    this.advancedTexture.addControl(this.text);\n  };\n\n  resetMeasure(parentView) {\n    this.rulerMesh && this.rulerMesh.dispose();\n    this.text && this.text.dispose();\n    this.ruler = [];\n    parentView &&\n      parentView.getSceneMemory().forEach(({ camera, canvas }) => {\n        camera.attachControl(canvas, true);\n      });\n  }\n\n  createRulerMesh(points, scene, parentView) {\n    const rulerMesh = MeshBuilder.CreateLines(\n      \"ruler\",\n      {\n        points: points,\n        updatable: true\n      },\n      scene\n    );\n    const rootMesh = parentView.getRootNode().item.mesh;\n    rulerMesh.parent = rootMesh;\n    return rulerMesh;\n  }\n}\n\nexport default MeasureAction;\n","import Action from \"./Action\";\n\nclass MouseKeysAction extends Action {\n  onPointerDown(evt, parentView) {\n    // to be implemented on sub classes\n  }\n\n  onPointerMove(evt, parentView) {\n    // to be implemented on sub classes\n  }\n\n  onPointerUp(evt, parentView) {\n    // to be implemented on sub classes\n  }\n\n  onKeyUp(evt, parentView) {\n    // to be implemented on sub classes\n  }\n\n  onWheel(evt, parentView) {\n    // to be implemented on sub classes\n  }\n}\n\nexport default MouseKeysAction;\n","import MouseKeysAction from \"./MouseKeysAction\";\nimport React from \"react\";\nimport Util3d from \"../Util3d/Util3d\";\nimport { Maybe } from \"monet\";\nimport Constants from \"../Utils/Constants\";\nimport Vec3 from \"../Math/Vec3\";\n// import JsonToReact from \"../../_shared/JsonToReact/JsonToReact\";\nimport NavigationPreviewItem from \"../NodeItem/NavigationPreviewItem\";\nimport { UndoManager } from \"mov-fe-lib-core\";\n\nclass NavigationPreviewAction extends MouseKeysAction {\n  /**\n   *\n   * @param {*} uIInOut: (title, reactFactory) => {}\n   */\n  constructor(uIInOut) {\n    super();\n    this.key = \"navigationPreviewAction\";\n    this.name = \"Add navigation preview [8]\";\n    this.icon = props => <i className=\"fas fa-road\" {...props}></i>;\n    this.uIInOut = uIInOut;\n    this.maybeFirstClickPos = Maybe.none();\n    this.previewPoseMesh = undefined;\n    this.poses = [];\n    this.poseMeshes = [];\n    this.schema = {\n      jsonSchema: {\n        type: \"object\",\n        properties: {\n          type: {\n            type: \"string\",\n            title: \"Type\"\n          },\n          config: {\n            type: \"string\",\n            title: \"Robot Configuration\"\n          }\n        }\n      },\n      uiSchema: {\n        type: {\n          \"ui:disabled\": true\n        },\n        config: {\n          \"ui:widget\": \"selectScopeModal\",\n          \"ui:options\": {\n            scopeList: \"Configuration\",\n            name: \"Robot Config\",\n            filter: e => true\n          }\n        }\n      },\n      data: {\n        type: NavigationPreviewItem.TYPE,\n        config: \"\"\n      }\n    };\n  }\n\n  action = parentView => {\n    setTimeout(() => {\n      this.uIInOut(\"Navigation preview params\", () => (\n        <div style={{ marginTop: \"7px\" }}>\n          {/* <JsonToReact\n            schema={this.schema.jsonSchema}\n            uiSchema={this.schema.uiSchema}\n            formData={this.schema.data}\n            onSubmit={({ formData }) => {\n              this.schema.data.config = formData.config;\n            }}\n            disable={false}\n          /> */}\n        </div>\n      ));\n    });\n    parentView.setSelectedAction(this);\n  };\n\n  onChange(parentView) {\n    parentView.renderMenus();\n    this.resetData();\n  }\n\n  onPointerDown = (evt, parentView) => {\n    if (evt.button !== 0) {\n      return;\n    }\n    parentView.getSceneMemory().forEach(({ scene, ground, camera, canvas }) => {\n      const maybeMousePos = Util3d.getGroundPosition(scene, ground);\n      maybeMousePos.forEach(mousePos => {\n        camera.detachControl(canvas);\n        if (this.poses.length >= 2) {\n          this.resetData();\n        }\n        this.maybeFirstClickPos = Maybe.some(\n          Util3d.toGlobalCoord(parentView)(mousePos)\n        );\n      });\n    });\n  };\n\n  onPointerMove = (evt, parentView) => {\n    this.maybeFirstClickPos.forEach(firstClickPos => {\n      parentView.getSceneMemory().forEach(({ scene, ground }) => {\n        const maybeMousePos = Util3d.getGroundPosition(scene, ground);\n        maybeMousePos.forEach(mousePos => {\n          const secondClickPos = Util3d.toGlobalCoord(parentView)(mousePos);\n          this.previewPoseMesh && this.previewPoseMesh.dispose();\n          this.previewPoseMesh = this.createPreviewPose(\n            scene,\n            parentView,\n            firstClickPos,\n            secondClickPos\n          );\n        });\n      });\n    });\n  };\n\n  onPointerUp = (evt, parentView) => {\n    parentView.getSceneMemory().forEach(({ scene, ground, camera, canvas }) => {\n      this.maybeFirstClickPos.forEach(firstClickPos => {\n        const maybeMousePos = Util3d.getGroundPosition(scene, ground);\n        maybeMousePos.forEach(mousePos => {\n          const secondClickPos = Util3d.toGlobalCoord(parentView)(mousePos);\n          const poseMesh = this.createPreviewPose(\n            scene,\n            parentView,\n            firstClickPos,\n            secondClickPos,\n            true\n          );\n          poseMesh.material = this.poseMeshes.push(poseMesh);\n          const first = Vec3.ofBabylon(firstClickPos);\n          const v = Vec3.ofBabylon(secondClickPos).sub(first);\n          const theta = Math.atan2(v.y, v.x);\n          this.poses.push({\n            position: first.toArray(),\n            orientation: [Math.cos(theta / 2), 0, 0, Math.sin(theta / 2)]\n          });\n          if (this.poses.length === 2) {\n            this.createNavPreviewNode(scene, parentView);\n            this.resetData();\n          }\n        });\n      });\n      camera.attachControl(canvas, true);\n      this.previewPoseMesh && this.previewPoseMesh.dispose();\n      this.maybeFirstClickPos = Maybe.none();\n    });\n  };\n\n  resetData() {\n    this.maybeFirstClickPos = Maybe.none();\n    this.previewPoseMesh && this.previewPoseMesh.dispose();\n    this.poses = [];\n    this.poseMeshes.forEach(mesh => mesh.dispose());\n    this.poseMeshes = [];\n  }\n\n  createPreviewPose(scene, parentView, start, end, normalize = false) {\n    const maxLength = 1.3;\n    const v = end.subtract(start);\n    const length = v.length();\n    const finalLength = normalize\n      ? maxLength / length\n      : Math.min(maxLength / length, length);\n    const finalEnd = start.add(v.scale(finalLength));\n\n    const arrowMesh = Util3d.getArrow(\n      scene,\n      \"previewPose\",\n      start,\n      finalEnd,\n      Constants.RADIUS / 6\n    );\n    const rootMesh = parentView.getRootNode().item.mesh;\n    arrowMesh.parent = rootMesh;\n    return arrowMesh;\n  }\n\n  createNavPreviewNode(scene, parentView) {\n    const navName = `Navigation${Math.floor(Math.random() * 1e2)}`;\n    const poses = [...this.poses];\n    const config = this.schema.data.config;\n    parentView.getUndoManager().doIt(\n      UndoManager.actionBuilder()\n        .doAction(() => {\n          const root = parentView.getRootNode().item.mesh;\n          const navPreviewNode = NavigationPreviewItem.ofDict(\n            scene,\n            {\n              name: navName,\n              poses: poses,\n              robotConfig: config\n            },\n            parentView\n          );\n          navPreviewNode.mesh.parent = root;\n          parentView.addNodeItem2Tree(navPreviewNode, root.name);\n        })\n        .undoAction(() => {\n          parentView.deleteNodeFromTreeUsingName(navName);\n        })\n        .build()\n    );\n  }\n}\n\nexport default NavigationPreviewAction;\n","import { Maybe } from \"monet\";\nimport MouseKeysAction from \"./MouseKeysAction\";\nimport React from \"react\";\n\nclass OrbitAction extends MouseKeysAction {\n  constructor() {\n    super();\n    this.key = \"orbit\";\n    this.name = \"Orbit [ESC]\";\n    this.maybeSelectedMesh = Maybe.none();\n    this.icon = props => <i className=\"fas fa-globe\" {...props}></i>;\n  }\n\n  action = parentView => {\n    super.action(parentView);\n    parentView.setSelectedAction(this);\n  };\n\n  onPointerDown = (evt, parentView) => {};\n\n  onPointerMove = (evt, parentView) => {};\n\n  onPointerUp = (evt, parentView) => {};\n}\n\nexport default OrbitAction;\n","import MouseKeysAction from \"./MouseKeysAction\";\nimport Vec3 from \"../Math/Vec3\";\nimport Util3d from \"../Util3d/Util3d\";\nimport React from \"react\";\nimport PolygonRegion from \"../NodeItem/PolygonRegion\";\nimport { Color3 } from \"@babylonjs/core\";\nimport { UndoManager } from \"mov-fe-lib-core\";\nimport { selectOneAction } from \"../Utils/Utils\";\n\n// Similar 2 Draw Action Path\nclass PolygonRegionAction extends MouseKeysAction {\n  constructor() {\n    super();\n    this.key = \"drawPolygonRegion\";\n    this.name = \"Draw Polygon Region [5]\";\n    this.mouseCurve = [];\n    this.icon = props => <i className=\"fas fa-draw-polygon\" {...props}></i>;\n  }\n\n  action = parentView => {\n    super.action(parentView);\n    parentView.setSelectedAction(this);\n  };\n\n  onChange = parentView => {\n    if (this.mouseCurve.length > 2) {\n      parentView.getSceneMemory().forEach(({ scene }) => {\n        parentView\n          .getUndoManager()\n          .doIt(\n            this.getUndoAbleEnterAction(this.mouseCurve, scene, parentView)\n          );\n      });\n    }\n  };\n\n  onPointerDown = (evt, parentView) => {\n    if (!(evt.buttons === 1)) return;\n    parentView.getSceneMemory().forEach(memory => {\n      const scene = memory.scene;\n      const ground = memory.ground;\n      const camera = memory.camera;\n      const maybeMousePos = Util3d.getGroundPosition(scene, ground);\n      maybeMousePos.forEach(mousePos => {\n        camera.detachControl(memory.canvas);\n        this.mouseCurve.push(mousePos);\n        parentView\n          .getUndoManager()\n          .doIt(\n            this.getUndoAbleClickAction(\n              this.mouseCurve,\n              scene,\n              parentView,\n              memory\n            )\n          );\n      });\n    });\n  };\n\n  getUndoAbleClickAction(keyPoints, scene, parentView, { camera, canvas }) {\n    const kps = [...keyPoints];\n    return UndoManager.actionBuilder()\n      .doAction(() => {\n        const finalKps = kps.length === 1 ? [kps[0], kps[0]] : kps;\n        parentView.deleteNodeFromTreeUsingName(\n          TEMP_POLYGON_REGION_NAME,\n          false,\n          false\n        );\n        this.createPolygonRegion(\n          finalKps,\n          TEMP_POLYGON_REGION_NAME,\n          scene,\n          parentView,\n          false\n        );\n        parentView.setContextActions(\n          this.getDrawPolygonContextAction(camera, canvas, scene)\n        );\n        this.mouseCurve = kps;\n      })\n      .undoAction(({ is2UpdateInServer = true }) => {\n        parentView.deleteNodeFromTreeUsingName(\n          TEMP_POLYGON_REGION_NAME,\n          is2UpdateInServer\n        );\n        const reducedKps = kps.slice(0, kps.length - 1);\n        const finalKps =\n          reducedKps.length === 1 ? [reducedKps[0], reducedKps[0]] : reducedKps;\n        if (is2UpdateInServer)\n          reducedKps.length > 0 &&\n            this.createPolygonRegion(\n              finalKps,\n              TEMP_POLYGON_REGION_NAME,\n              scene,\n              parentView,\n              false\n            );\n        this.mouseCurve = reducedKps;\n      })\n      .build();\n  }\n\n  getDrawPolygonContextAction = (camera, canvas, scene) => {\n    const ans = [];\n    ans.push({\n      icon: props => <i className=\"fas fa-trash\" {...props}></i>,\n      action: parentView => {\n        camera.attachControl(canvas, true);\n        parentView.deleteNodeFromTreeUsingName(TEMP_POLYGON_REGION_NAME, false);\n        this.mouseCurve = [];\n        parentView.closeContextDial();\n      },\n      name: \"Clear Polygon [ESC | DEL | Backspace]\"\n    });\n    if (this.mouseCurve.length > 2) {\n      ans.push({\n        icon: props => <i className=\"fas fa-check\" {...props}></i>,\n        action: parentView => {\n          camera.attachControl(canvas, true);\n          parentView\n            .getUndoManager()\n            .doIt(\n              this.getUndoAbleEnterAction(this.mouseCurve, scene, parentView)\n            );\n        },\n        name: \"Create Polygon [Enter]\"\n      });\n    }\n    return ans;\n  };\n\n  getUndoAbleEnterAction(keyPoints, scene, parentView) {\n    const kps = [...keyPoints];\n    const name = `PolygonRegion${Math.floor(Math.random() * 1e3)}`;\n    return UndoManager.actionBuilder()\n      .doAction(() => {\n        parentView.deleteNodeFromTreeUsingName(TEMP_POLYGON_REGION_NAME, false);\n        this.createPolygonRegion(kps, name, scene, parentView, true);\n        this.mouseCurve = [];\n        parentView.setPropertiesWithName(name);\n        parentView.closeContextDial();\n      })\n      .undoAction(({ is2UpdateInServer = true }) => {\n        parentView.deleteNodeFromTreeUsingName(name, is2UpdateInServer);\n        if (is2UpdateInServer) {\n          this.createPolygonRegion(\n            kps,\n            TEMP_POLYGON_REGION_NAME,\n            scene,\n            parentView,\n            false\n          );\n          this.mouseCurve = kps;\n        }\n      })\n      .build();\n  }\n\n  onPointerMove = (evt, parentView) => {\n    // empty\n  };\n\n  onPointerUp = (evt, parentView) => {\n    // empty\n  };\n\n  onKeyUp = (evt, parentView) => {\n    // Warning: code duplication with PathAction\n    const defaultAction = () => super.onKeyUp(evt, parentView);\n    parentView.getSceneMemory().forEach(memory => {\n      const { scene, camera, canvas } = memory;\n      const contextActions = this.getDrawPolygonContextAction(\n        camera,\n        canvas,\n        scene\n      );\n      selectOneAction(\n        [\n          {\n            predicate: e => e.code === \"Enter\" || e.code === \"NumpadEnter\",\n            action: () => contextActions[1].action(parentView)\n          },\n          {\n            predicate: e => e.code === \"Delete\" || e.code === \"Backspace\",\n            action: () => contextActions[0].action(parentView)\n          },\n          {\n            predicate: e => e.code === \"Escape\",\n            action: () => {\n              contextActions[0].action(parentView);\n            }\n          }\n        ],\n        defaultAction\n      )(evt);\n    });\n  };\n\n  createPolygonRegion = (\n    region,\n    name,\n    scene,\n    parentView,\n    is2addInServer = true,\n    color = Color3.Yellow(),\n    height = 1\n  ) => {\n    const rootMesh = parentView.getRootNode().item.mesh;\n\n    const localRegion = region.map(r =>\n      Util3d.getLocalCoordFromWorld({ parent: rootMesh }, Vec3.ofBabylon(r))\n    );\n\n    const middlePoint = Util3d.pointAverageVec3(localRegion);\n    const centeredRegion = localRegion.map(r => r.sub(middlePoint));\n\n    const polygonRegionItem = PolygonRegion.ofDict(\n      scene,\n      {\n        name: name,\n        position: middlePoint.toArray(),\n        color: [color.r, color.g, color.b],\n        localPolygon: centeredRegion.map(x => x.toArray()),\n        height: height\n      },\n      parentView\n    );\n\n    polygonRegionItem.mesh.parent = rootMesh;\n\n    parentView.addNodeItem2Tree(\n      polygonRegionItem,\n      rootMesh.name,\n      is2addInServer,\n      true,\n      is2addInServer\n    );\n  };\n}\n\nconst TEMP_POLYGON_REGION_NAME = \"temp_polygon_region\";\nexport default PolygonRegionAction;\n","import Robot from \"../NodeItem/Robot\";\nimport Action from \"./Action\";\nimport { Maybe } from \"monet\";\nimport React from \"react\";\nimport PointCloud from \"../NodeItem/PointCloud\";\nimport { ACTIONS } from \"../MainView/MainViewActions\";\nimport MeshLoader from \"../Utils/MeshLoader\";\nimport { UndoManager } from \"mov-fe-lib-core\";\n\nclass RobotAction extends Action {\n  constructor(\n    robot,\n    robotAnimatorFactory = (robot, parentView) =>\n      Robot.getDefaultAnimator(parentView)\n  ) {\n    super();\n    this.key = `robotAction${robot.name}`;\n    this.name = robot.name;\n    this.robot = robot;\n    this.robotAnimatorFactory = robotAnimatorFactory;\n    this.icon = props => <i className=\"fas fa-robot\" {...props}></i>;\n  }\n\n  action = (parentView, errorCallback = () => {}) => {\n    super.action(parentView);\n    // If robot doesn't exists: Add robot\n    parentView\n      .getNodeFromTree(this.robot.name)\n      .orElseRun(() => this.addRobot(parentView, errorCallback));\n    // If robot already exist in node tree : Update robot if mesh is different\n    parentView.getNodeFromTree(this.robot.name).forEach(({ item }) => {\n      if (!item.mesh.id.includes(this.robot.meshName)) {\n        parentView.deleteNodeFromTreeUsingName(this.name, true, true);\n        this.addRobot(parentView, errorCallback);\n      }\n    });\n    parentView.setSelectedAction(ACTIONS().dragObjects);\n  };\n\n  addRobot(parentView, errorCallback = () => {}) {\n    parentView.getSceneMemory().forEach(memory => {\n      const { scene } = memory;\n      const actionMemoryClone = { ...this.memory };\n      const isImport = actionMemoryClone[\"isImport\"];\n      if (isImport)\n        this.loadRobot(scene, parentView, actionMemoryClone, errorCallback);\n      else {\n        parentView\n          .getUndoManager()\n          .doIt(this.getUndoAbleAction(parentView, scene, actionMemoryClone));\n      }\n    });\n    this.memory[\"isImport\"] = false;\n  }\n\n  getUndoAbleAction(parentView, scene, actionMemoryClone) {\n    return UndoManager.actionBuilder()\n      .doAction(() => {\n        this.loadRobot(scene, parentView, actionMemoryClone);\n      })\n      .undoAction(({ is2UpdateInServer = true }) => {\n        parentView.deleteNodeFromTreeUsingName(this.name, is2UpdateInServer);\n      })\n      .build();\n  }\n\n  loadRobot(scene, parentView, actionMemoryClone, errorCallback = () => {}) {\n    MeshLoader.of(scene)\n      .load(this.robot.meshName)\n      .then(mesh =>\n        this.createRobotFromMesh(mesh, scene, parentView, actionMemoryClone)\n      )\n      .catch(err => errorCallback(err));\n  }\n\n  createRobotFromMesh(mesh, scene, parentView, memory) {\n    const parentMesh = this.getParentMesh(parentView);\n    const isImport = Maybe.fromNull(memory.isImport).orSome(false);\n    const isVisible = Maybe.fromNull(memory.isVisible).orSome(true);\n    mesh.setEnabled(isVisible);\n\n    const robot = this.getRobot(scene, mesh, parentMesh, parentView);\n    robot.animate(this.robotAnimatorFactory(robot, parentView));\n    parentView.addNodeItem2Tree(robot, parentMesh.name, !isImport, isVisible);\n\n    const cloudPoint = this.getCloudPoint(scene, parentView, robot);\n    parentView.addNodeItem2Tree(cloudPoint, robot.name, false, isVisible);\n  }\n\n  getRobot = (scene, mesh, parentMesh, parentView) => {\n    const meshTree = Robot.createRobotMeshTree(\n      this.robot.robotTree,\n      mesh,\n      scene\n    );\n    const dict = Maybe.fromNull(this.memory[\"nodeItemDict\"]);\n    return Robot.builder()\n      .id(this.robot.id)\n      .name(Maybe.fromNull(this.memory[\"name\"]).orSome(this.robot.name))\n      .assetName(\n        Maybe.fromNull(this.memory[\"assetName\"]).orSome(this.robot.name)\n      )\n      .meshTree(meshTree)\n      .parentMesh(parentMesh)\n      .parentView(parentView)\n      .scene(scene)\n      .keyValueMap(dict.map(x => x.keyValueMap).orSome({}))\n      .build();\n  };\n\n  getCloudPoint = (scene, parentView, robot) => {\n    const cloudPoint = PointCloud.ofDict(\n      scene,\n      { name: this.robot.name, id: this.robot.id },\n      parentView\n    );\n    cloudPoint.mesh.parent = robot.mesh;\n    return cloudPoint;\n  };\n\n  getParentMesh = parentView => {\n    return Maybe.fromNull(this.memory[\"parentObj\"])\n      .map(parentObj => parentObj.parent)\n      .flatMap(parentName => parentView.getNodeFromTree(parentName))\n      .map(treeNode => treeNode.item.mesh)\n      .orSome(parentView.getRootNode().item.mesh);\n  };\n\n  getType = () => RobotAction.TYPE;\n\n  static TYPE = \"RobotAction\";\n}\n\nexport default RobotAction;\n","import { Maybe } from \"monet\";\nimport { ASSETS_TYPES, AssetsTypesFactory } from \"../Utils/AssetsTypesFactory\";\nimport { MasterDB } from \"mov-fe-lib-core\";\nimport MapLoader from \"./MapLoader\";\nimport Robot from \"../NodeItem/Robot\";\n\n/**\n *  Graphic Assets Manager, retrieves and manages the assets that are in DB.\n */\nclass AssetsManager {\n  constructor() {\n    if (instance) return instance;\n    instance = this;\n    this.assets = {};\n    this.assetsActionMap = {};\n    this.robots = {};\n    this.observersBySceneId = {};\n    this.afterLoad = [];\n    this.finishInitialSubscribers = 0;\n    this.isLoading = true;\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                  Getters and Setters                                 *\n   *                                                                                      */\n  //========================================================================================\n\n  getAssets = () => this.assets;\n\n  getAssetsActionMap = () => this.assetsActionMap;\n\n  load = async () => {\n    await this.retrieveAssetsFromDb();\n    return this;\n  };\n\n  addAfterLoad(afterLoad) {\n    this.afterLoad.push(afterLoad);\n    return this;\n  }\n\n  addObserver(scene, observer) {\n    const sceneId = scene._uid;\n    if (!(sceneId in this.observersBySceneId)) {\n      this.observersBySceneId[sceneId] = [];\n    }\n    this.observersBySceneId[sceneId].push(observer);\n    return this;\n  }\n\n  signalObservers = () => {\n    Object.keys(this.observersBySceneId).forEach(k => {\n      this.observersBySceneId[k].forEach(obs => obs(this));\n    });\n  };\n\n  addAsset(assetKey, asset) {\n    try {\n      this.assets[assetKey] = asset;\n      this.assetsActionMap[assetKey] = AssetsTypesFactory[asset.type](asset);\n      if (!this.isLoading) this.signalObservers();\n    } catch (e) {\n      console.log(\"Caught exception while adding asset\", e);\n      throw Error(`Caught exception while adding asset ${e}`);\n    }\n  }\n\n  delAsset(assetKey) {\n    if (assetKey in this.assets) delete this.assets[assetKey];\n    if (assetKey in this.assetsActionMap) delete this.assetsActionMap[assetKey];\n    this.signalObservers();\n  }\n\n  clearObserver(scene) {\n    const sceneId = scene._uid;\n    if (sceneId in this.observersBySceneId) {\n      console.log(\"Clear asset observer\", sceneId);\n      delete this.observersBySceneId[sceneId];\n    }\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                      Subscribers                                     *\n   *                                                                                      */\n  //========================================================================================\n\n  subs = [\n    resolve =>\n      MasterDB.subscribe(\n        {\n          Scope: \"Robot\",\n          Name: \"*\",\n          RobotName: \"*\"\n        },\n        this.getRobotUpdate(),\n        (data) => this.getRobotNameSub(\n          data.value,\n          () => {\n            this.addRobots();\n            this.finishSub(\"RobotName\", resolve);\n          }\n        )\n      ),\n    resolve => \n      MasterDB.subscribe(\n        {\n          Scope: \"Robot\",\n          Name: \"*\",\n          Parameter: \"mesh\"\n        },\n        this.getRobotUpdate(),\n        (data) => this.getRobotMeshSub(\n          data.value,\n          () => {\n            this.addRobots();\n            this.finishSub(\"RobotMesh\", resolve);\n          }\n        )\n      ),\n    resolve =>\n      MasterDB.subscribe(\n        {\n          Scope: \"Package\",\n          File: \"*\",\n          Name: \"maps\",\n          FileLabel: \"*\"\n        },\n        this.getMapUpdater(({ key }) => key),\n        this.getMapSubscriber(\n          ({ value }) => value,\n          () => this.finishSub(\"Maps\", resolve)\n        )\n      ),\n    resolve =>\n      MasterDB.subscribe(\n        { Scope: \"Package\", File: \"*\", Name: \"meshes\", FileLabel: \"*\" },\n        this.getMeshUpdater(),\n        this.getMeshSubscriber(\n          ({ value }) => value,\n          () => this.finishSub(\"Meshes\", resolve)\n        )\n      )\n  ];\n\n  retrieveAssetsFromDb() {\n    return new Promise((re, rej) => {\n      this.subs.forEach(f => f(re));\n    });\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                         Utils                                        *\n   *                                                                                      */\n  //========================================================================================\n\n  finishSub = (place, resolve) => {\n    console.log(\"FINISH SUB \", place, this.finishInitialSubscribers);\n    if (++this.finishInitialSubscribers > this.subs.length - 1) {\n      this.afterLoad.forEach(f => f(this));\n      this.afterLoad = [];\n      this.isLoading = false;\n      resolve(true);\n    }\n  };\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                        Robots                                        *\n   *                                                                                      */\n  //========================================================================================\n\n  deleteRobot = id => {\n    if(!this.robots.hasOwnProperty(id)) return;\n    this.delAsset(this.robots[id].name);\n    if (id in this.robots) delete this.robots[id];\n  };\n\n  setRobot(id, name = null, meshName = null) {\n    if (!(id in this.robots)) {\n      this.robots[id] = {\n        id: id,\n        name: null,\n        meshName: null,\n      };\n    }\n    ofNull(name).forEach(name => (this.robots[id].name = name));\n    ofNull(meshName).forEach(meshName => (this.robots[id].meshName = meshName));\n  }\n\n  addRobots(robots = this.robots) {\n    Object.keys(robots).forEach((id) => {\n      if (Object.values(this.robots[id]).every(x => x !== null)) {\n        const localRobot = this.robots[id];\n        this.addAsset(\n          localRobot.name, \n          Robot.createBaseObject({robotName: localRobot.name, robotMeshName: localRobot.meshName, id })\n        );\n      }\n    })\n  }\n\n  getRobotNameSub(data, after = () => {}) {\n    ofNull(data)\n      .flatMap(maybeGet(\"Robot\"))\n      .forEach(r =>\n        Object.keys(r).forEach(id => this.setRobot(id, r[id].RobotName))\n      );\n    after();\n  }\n\n  getRobotMeshSub(data, after = () => {}) {\n    ofNull(data)\n      .flatMap(maybeGet(\"Robot\"))\n      .forEach(r =>\n        Object.keys(r).forEach(id => this.setRobot(id, r[id].RobotName, r[id].Parameter.mesh.Value))\n      );\n    Object.keys(this.robots).forEach((id) => {\n      this.robots[id].meshName = this.robots[id].meshName \n        ? this.robots[id].meshName \n        : Robot.ROBOT_MESH_NAME;\n    });\n    after();\n  }\n\n  getRobotUpdate() {\n    const actionMap = {\n      del: data => {\n        const pattern = data.patterns[0];\n        // del event from RobotName pattern\n        if(pattern.hasOwnProperty('RobotName')) {\n          ofNull(data.key)\n            .flatMap(maybeGet(\"Robot\"))\n            .forEach(r => Object.keys(r).forEach(this.deleteRobot));\n        }\n        // del event from RobotMesh pattern\n        else if(pattern.hasOwnProperty('Parameter')) {\n          ofNull(data.key)\n            .flatMap(maybeGet(\"Robot\"))\n            .forEach(r => Object.keys(r).forEach(robotId => {\n              this.robots[robotId].meshName = Robot.ROBOT_MESH_NAME;\n            }));\n        }\n      },\n      set: data => {\n        const pattern = data.patterns[0];\n        const robots = { ...data.key.Robot }\n        // set event from RobotName pattern\n        if(pattern.hasOwnProperty('RobotName'))\n          this.getRobotNameSub(data.key, () => this.addRobots(robots))\n        // set event from RobotMesh pattern\n        else if(pattern.hasOwnProperty('Parameter'))\n          this.getRobotMeshSub(data.key, () => this.addRobots(robots))\n      }\n    };\n    return data => {\n      console.log(\"Robot NAME UPDATE\", data);\n      actionMap[data.event](data);\n    };\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                         Maps                                         *\n   *                                                                                      */\n  //========================================================================================\n\n  getMapSubscriber = (dataGetter, after = () => {}) => {\n    return data =>\n      this.getMapFileData(dataGetter, data).forEach(fileName => {\n        Object.keys(fileName)\n          .filter(f => f.includes(\".yaml\"))\n          .forEach(this.addMap);\n        after();\n      });\n  };\n\n  getMapUpdater = dataGetter => {\n    const actionMap = {\n      del: data => {\n        this.getMapFileData(dataGetter, data).forEach(f => {\n          let filename = Object.keys(f)[0];\n          filename = filename.split(\".\")[0];\n          this.delAsset(filename);\n        });\n      },\n      set: this.getMapSubscriber(dataGetter),\n      subscribe: this.getMapSubscriber(dataGetter)\n    };\n    return data => {\n      console.log(\"MAP UPDATE\", data);\n      actionMap[data.event](data);\n    };\n  };\n\n  addMap = yamlSrc => {\n    const map = {\n      name: yamlSrc.split(\".\")[0],\n      loader: new MapLoader(yamlSrc),\n      type: ASSETS_TYPES.Map\n    };\n    this.addAsset(map.name, map);\n  };\n\n  getMapFileData = (dataGetter, data) =>\n    ofNull(dataGetter(data))\n      .flatMap(maybeGet(\"Package\"))\n      .flatMap(maybeGet(\"maps\"))\n      .flatMap(maybeGet(\"File\"));\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                         Mesh                                         *\n   *                                                                                      */\n  //========================================================================================\n\n  getMeshSubscriber = (dataGetter, after = () => {}) => data => {\n    this.getMeshFileData(dataGetter, data).forEach(d =>\n      Object.keys(d).forEach(id => {\n        const mesh = { id: id, name: d[id].FileLabel, type: ASSETS_TYPES.Mesh };\n        this.addAsset(mesh.name, mesh);\n      })\n    );\n    after();\n  };\n\n  getMeshUpdater = () => {\n    const actionMap = {\n      del: data => {\n        this.getMeshFileData(d => d.key, data).forEach(f => {\n          let filename = Object.keys(f)[0];\n          this.delAsset(filename);\n        });\n      },\n      set: this.getMeshSubscriber(d => d.key),\n      subscribe: this.getMeshSubscriber(d => d.key)\n    };\n    return data => actionMap[data.event](data);\n  };\n\n  getMeshFileData = (dataGetter, data) =>\n    ofNull(dataGetter(data))\n      .flatMap(maybeGet(\"Package\"))\n      .flatMap(maybeGet(\"meshes\"))\n      .flatMap(maybeGet(\"File\"));\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                        static                                        *\n   *                                                                                      */\n  //========================================================================================\n\n  static getInstance() {\n    return new AssetsManager();\n  }\n}\n\n// private variable\nlet instance = null;\n\n// auxiliary functions\nconst ofNull = Maybe.fromNull;\nconst get = prop => obj => obj[prop];\nconst dot = f => g => x => f(g(x));\nconst maybeGet = prop => dot(ofNull)(get(prop));\n\nexport default AssetsManager;\n","export default class MapLoader {\n  constructor(yamlSrc) {\n    this.yamlSrc = yamlSrc;\n    this.cachedMap = null;\n  }\n\n  async load() {\n    if (this.cachedMap) return this.cachedMap;\n    const response = await fetch(MapLoader.getMapUrl(this.yamlSrc));\n    const map = await this.parseYaml(await response.text());\n    const ans = {\n      textureSrc: map.image,\n      resolution: map.resolution,\n      origin: map.origin,\n      imageSize: map.size\n    };\n    this.cachedMap = ans;\n    return ans;\n  }\n\n  async parseYaml(yamlTxt) {\n    const ans = {};\n    const actionDict = {\n      image: (k, v) => (ans[k] = MapLoader.getMapUrl(v)),\n      resolution: (k, v) => (ans[k] = Number.parseFloat(v)),\n      origin: (k, v) => (ans[k] = JSON.parse(v))\n    };\n    console.log(\"Yaml text\", yamlTxt);\n    yamlTxt\n      .split(\"\\n\")\n      .map(s => s.split(\": \"))\n      .filter(split => split.length >= 2)\n      .filter(split => split[0] in actionDict)\n      .forEach(split => actionDict[split[0]](split[0], split[1]));\n    ans[\"size\"] = await this.getImageSize(ans[\"image\"]);\n    return ans;\n  }\n\n  getImageSize(src) {\n    return new Promise((resolve, reject) => {\n      const img = new Image();\n      img.src = src;\n      img.onload = () => resolve([img.naturalWidth, img.naturalHeight]);\n    });\n  }\n  static getMapUrl = src => `/static/maps/${src}`;\n}\n","//========================================================================================\n/*                                                                                      *\n *         Based from https://doc.babylonjs.com/resources/babylonjs_and_reactjs         *\n *                                                                                      */\n//========================================================================================\n\nimport { Engine, Scene } from \"@babylonjs/core\";\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { useTheme, makeStyles } from \"@material-ui/core/styles\";\nimport ReactResizeDetector from \"react-resize-detector\";\nimport PropTypes from \"prop-types\";\nimport { SCENE_BACKGROUND } from \"../Utils/Constants\";\n\nconst useStyles = makeStyles(theme => {\n  return {\n    root: {}\n  };\n});\nconst FLEX_STYLE = {\n  display: \"flex\",\n  flexDirection: \"column\",\n  flexGrow: 1\n};\n\nconst BaseViewer = props => {\n  const {\n    antialias,\n    engineOptions,\n    adaptToDeviceRatio,\n    sceneOptions,\n    onRender,\n    onSceneReady,\n    is2render,\n    sceneFactory,\n    ...rest\n  } = props;\n  const theme = useTheme();\n  const classes = useStyles();\n  const reactCanvas = useRef(null);\n  const [loaded, setLoaded] = useState(false);\n  const [scene, setScene] = useState(null);\n  const [size, setSize] = useState({ width: 100, height: 100 });\n\n  const setUpScene = engine => {\n    const scene = sceneFactory\n      ? sceneFactory(engine)\n      : new Scene(engine, sceneOptions);\n    setScene(scene);\n    if (scene.isReady()) {\n      onSceneReady(scene);\n    } else {\n      scene.onReadyObservable.addOnce(scene => onSceneReady(scene));\n    }\n    return scene;\n  };\n\n  const onResize = (width, height) => {\n    setSize({\n      width,\n      height\n    });\n    scene && scene.getEngine().resize();\n  };\n\n  const renderScene = (engine, nScene) => {\n    if (!is2render) return;\n    engine.runRenderLoop(() => {\n      if (typeof onRender === \"function\") {\n        onRender(nScene);\n      }\n      nScene && nScene.render();\n    });\n  };\n\n  /* eslint-disable react-hooks/exhaustive-deps */\n  useEffect(() => {\n    if (!loaded) {\n      setLoaded(true);\n      const engine = new Engine(\n        reactCanvas.current,\n        antialias,\n        engineOptions,\n        adaptToDeviceRatio\n      );\n      // const engine = new EngineSingleton(reactCanvas.current).engine;\n      const newScene = setUpScene(engine);\n      renderScene(engine, newScene);\n    }\n\n    return () => {\n      console.log(\"Disposing engine and scene\");\n      scene && scene.dispose();\n      scene && scene.getEngine() && scene.getEngine().dispose();\n    };\n  }, [reactCanvas, loaded, scene]);\n  /* eslint-enable react-hooks/exhaustive-deps */\n  // loaded && reactCanvas.current.focus();\n\n  // On toggle theme update scene background color\n  useEffect(() => {\n    if (!scene) return;\n    scene.clearColor = SCENE_BACKGROUND[theme?.label || \"default\"];\n  }, [classes, theme.label, scene]);\n\n  return (\n    <div style={{ ...FLEX_STYLE, maxHeight: \"100%\" }}>\n      <canvas\n        ref={reactCanvas}\n        width={size.width}\n        height={size.height}\n        {...rest}\n      />\n      <ReactResizeDetector handleWidth handleHeight onResize={onResize} />\n    </div>\n  );\n};\n\nBaseViewer.propTypes = {\n  antialias: PropTypes.bool,\n  engineOptions: PropTypes.object,\n  adaptToDeviceRatio: PropTypes.bool,\n  sceneOptions: PropTypes.object,\n  onSceneReady: PropTypes.func,\n  onRender: PropTypes.func,\n  is2render: PropTypes.bool,\n  sceneFactory: PropTypes.func\n};\n\nBaseViewer.defaultProps = {\n  antialias: true,\n  onSceneReady: scene => {},\n  is2render: true,\n  engineOptions: { preserveDrawingBuffer: true, stencil: true }\n};\n\nexport default BaseViewer;\n","import { Maybe } from \"monet\";\n\n/**\n * Undirected Graph data structure\n */\nclass Graph {\n  #adjMap = {};\n  #vertices = {};\n  #edges = {};\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                      Public API                                      *\n   *                                                                                      */\n  //========================================================================================\n\n  addVertex(i) {\n    if (!(i in this.#vertices)) {\n      this.#vertices[i] = {};\n      this.#adjMap[i] = {};\n    }\n  }\n\n  delVertex(i) {\n    if (i in this.#vertices) {\n      delete this.#vertices[i];\n      // delete neighbors edge properties\n      Object.keys(this.#adjMap[i]).forEach(j => {\n        delete this.#edges[Graph.edgeKey(i, j)];\n        delete this.#edges[Graph.edgeKey(j, i)];\n      });\n      delete this.#adjMap[i];\n      Object.keys(this.#adjMap).forEach(j => {\n        if (i in this.#adjMap[j]) {\n          delete this.#adjMap[j][i];\n        }\n      });\n    }\n  }\n\n  /**\n   *\n   * If edge already exists, this function overwrites previous edge\n   *\n   * @param {*} i: vertex id\n   * @param {*} j: vertex id\n   */\n  addEdge(i, j) {\n    this.addVertex(i);\n    this.addVertex(j);\n    const edgeProps = this.getEdge(i, j).orSome({});\n    this.#edges[Graph.edgeKey(i, j)] = edgeProps;\n    this.#edges[Graph.edgeKey(j, i)] = edgeProps;\n    this.#adjMap[i][j] = true;\n    this.#adjMap[j][i] = true;\n    return this;\n  }\n\n  delEdge(i, j) {\n    const ijKey = Graph.edgeKey(i, j);\n    const jiKey = Graph.edgeKey(j, i);\n    if (ijKey in this.#edges || jiKey in this.#edges) {\n      delete this.#edges[ijKey];\n      delete this.#edges[jiKey];\n      delete this.#adjMap[i][j];\n      delete this.#adjMap[j][i];\n    }\n    // remove vertex if have no neighbors\n    [i, j].forEach(id => {\n      const neighbors = this.getNeighbors(id);\n      if (neighbors.length === 0) {\n        this.delVertex(id);\n      }\n    });\n  }\n\n  hasEdge(i, j) {\n    return this.getEdge(i, j).isSome();\n  }\n\n  getNeighbors(i) {\n    if (i in this.#adjMap) return Object.keys(this.#adjMap[i]);\n    return [];\n  }\n\n  getEdge(i, j) {\n    const edgeKey = Graph.edgeKey(i, j);\n    if (edgeKey in this.#edges) {\n      return Maybe.some(this.#edges[edgeKey]);\n    }\n    return Maybe.none();\n  }\n\n  getVertex(i) {\n    if (i in this.#vertices) {\n      return Maybe.some(this.#vertices[i]);\n    }\n    return Maybe.none();\n  }\n\n  getEdges() {\n    return this.#edges;\n  }\n\n  getVertices() {\n    return this.#vertices;\n  }\n\n  getAdjMap() {\n    return this.#adjMap;\n  }\n\n  static edgeKey = (i, j) => `${i}_${j}`;\n  static key2Edge = key => key.split(\"_\");\n}\n\nexport default Graph;\n","import DragObjectsAction from \"../Actions/DragObjectsAction\";\nimport AddKeyPointAction from \"../Actions/AddKeyPointAction\";\nimport BoxRegionAction from \"../Actions/BoxRegionAction\";\nimport DrawPathAction from \"../Actions/DrawPathAction\";\nimport PolygonRegionAction from \"../Actions/PolygonRegionAction\";\nimport OrbitAction from \"../Actions/OrbitAction\";\nimport DrawGraphAction from \"../Actions/DrawGraphAction\";\nimport MeasureAction from \"../Actions/MeasureAction\";\nimport NavigationPreviewAction from \"../Actions/NavigationPreviewAction\";\n\n/**\n * Order Matters\n */\nexport const ACTIONS = viewOnly =>\n  viewOnly\n    ? {\n        measure: new MeasureAction(),\n        orbit: new OrbitAction()\n      }\n    : {\n        robotPreview: new NavigationPreviewAction((title, reactFactory) => {}),\n        measure: new MeasureAction(),\n        drawGraph: new DrawGraphAction(),\n        drawRegion: new PolygonRegionAction(),\n        addKeyPoint: new AddKeyPointAction(),\n        drawBoxRegion: new BoxRegionAction(),\n        drawPath: new DrawPathAction(),\n        dragObjects: new DragObjectsAction(),\n        orbit: new OrbitAction()\n      };\n","import GlobalRef from \"../NodeItem/GlobalRef\";\nimport { Maybe } from \"monet\";\nimport { ASSETS_TYPES, AssetsTypesFactory } from \"../Utils/AssetsTypesFactory\";\nimport NODE_ITEM_FACTORY_MAP from \"./NodeItemFactoryMap\";\nimport Robot from \"../NodeItem/Robot\";\n\nclass MainViewRetriever {\n  static updateErrorList = () => {};\n\n  static importScene(\n    mainView,\n    serverScene = [],\n    parent = null,\n    is2addInServer = false,\n    updateErrorList = () => {}\n  ) {\n    console.log(\"Importing scene...\", mainView, serverScene);\n    MainViewRetriever.updateErrorList = updateErrorList;\n    const errors = [];\n    if (serverScene.length > 0) {\n      importSceneRecursive(\n        mainView,\n        serverScene,\n        parent,\n        errors,\n        is2addInServer\n      );\n    } else {\n      importDefaultScene(mainView);\n    }\n    console.log(\"End Importing scene\");\n    return errors;\n  }\n\n  static importNodeItem(mainView, nodeDict, parent, is2addInServer = false) {\n    const nodeItemClass = NODE_ITEM_FACTORY_MAP[nodeDict.type]; //retrieve default export\n    if (nodeItemClass) {\n      mainView.getSceneMemory().forEach(({ scene }) => {\n        const nodeItem = nodeItemClass.ofDict(scene, nodeDict, mainView);\n        // pseudo lazy migration of isVisible prop\n        const isVisible =\n          nodeDict.isVisible === undefined ? true : nodeDict.isVisible;\n        nodeItem.mesh.setEnabled(isVisible);\n        mainView.getNodeFromTree(parent).forEach(treeNode => {\n          nodeItem.mesh.parent = treeNode.item.mesh;\n        });\n        mainView.addNodeItem2Tree(\n          nodeItem,\n          parent,\n          is2addInServer,\n          isVisible,\n          false\n        );\n      });\n    }\n  }\n}\n\nfunction isAsset(nodeDict) {\n  return nodeDict.type in ASSETS_TYPES;\n}\n\nfunction importAsset(mainView, nodeDict, parent, errors) {\n  const assetType = nodeDict.type;\n  const assetName = Maybe.fromNull(nodeDict.assetName).orSome(nodeDict.name);\n  const assetActionMap = mainView.getAssetsActionMap();\n  // legacy\n  let retrievedAction = Maybe.fromNull(assetActionMap[assetName]).orLazy(\n    () => assetActionMap[assetName.split(\".\")[0]]\n  );\n  if (!retrievedAction && assetType === ASSETS_TYPES.Robot) {\n    const defaultRobot = Robot.createBaseObject({\n      robotName: assetName,\n      nodeDict\n    });\n    retrievedAction = AssetsTypesFactory.Robot(defaultRobot);\n  }\n  if (!retrievedAction) {\n    errors.push({\n      cause: `Asset of type ${assetType} with name ${assetName}, was not found`,\n      solution: `please upload ${assetType} ${assetName}`\n    });\n    return;\n  }\n  retrievedAction.memory[\"parentObj\"] = { parent: parent };\n  retrievedAction.memory[\"nodeItemDict\"] = nodeDict;\n  retrievedAction.memory[\"assetName\"] = assetName;\n  retrievedAction.memory[\"name\"] = nodeDict.name;\n  retrievedAction.memory[\"isImport\"] = true;\n  retrievedAction.memory[\"isVisible\"] =\n    nodeDict.isVisible === undefined ? true : nodeDict.isVisible;\n  // Execute action\n  retrievedAction.action(mainView, err => {\n    if (err?.exception?.name === \"RequestFileError\") {\n      errors.push({\n        cause: `Asset of type ${err.assetType} with name ${err.assetName}, was not found`,\n        solution: `please upload ${err.assetType} ${err.assetName}`\n      });\n      MainViewRetriever.updateErrorList(errors);\n    }\n  });\n}\n\nfunction importSceneRecursive(\n  mainView,\n  arrayTree,\n  parent = null,\n  errors = [],\n  is2addInServer = false\n) {\n  if (!arrayTree) return;\n  const sortArrayTree = arrayTree.sort((a, b) => {\n    // global ref is first\n    if (a.item.type === NODE_ITEM_FACTORY_MAP.GlobalRef.TYPE) return -1;\n    if (b.item.type === NODE_ITEM_FACTORY_MAP.GlobalRef.TYPE) return 1;\n    // graphItem is last\n    if (a.item.type === NODE_ITEM_FACTORY_MAP.GraphItem.TYPE) return 1;\n    if (b.item.type === NODE_ITEM_FACTORY_MAP.GraphItem.TYPE) return -1;\n    return a.name < b.name ? -1 : a.name > b.name ? 1 : 0;\n  });\n  sortArrayTree.forEach(node => {\n    if (isAsset(node.item)) {\n      importAsset(mainView, node.item, parent, errors);\n    } else {\n      MainViewRetriever.importNodeItem(\n        mainView,\n        node.item,\n        parent,\n        is2addInServer\n      );\n    }\n    if (node.children.length > 0) {\n      importSceneRecursive(\n        mainView,\n        node.children,\n        node.name,\n        errors,\n        is2addInServer\n      );\n    }\n  });\n}\n\nfunction importDefaultScene(mainView) {\n  mainView.getSceneMemory().forEach(({ scene }) => {\n    const send2server = true;\n    mainView.addNodeItem2Tree(GlobalRef.ofDict(scene), null, send2server);\n  });\n}\n\nexport default MainViewRetriever;\n","export default class MeshSelector {\n  constructor(mainView) {\n    return mainView\n      .getSceneMemory()\n      .map(({ scene }) => {\n        const sceneId = scene._uid;\n        if (sceneId in placeHolderInstance) {\n          return placeHolderInstance[sceneId];\n        }\n        this.scene = scene;\n        this.mainView = mainView;\n        this.meshSelectionSet = new Set();\n        placeHolderInstance[sceneId] = this;\n        return this;\n      })\n      .orSome(this);\n  }\n\n  /**\n   * Add mesh 2 selected meshes\n   * @param {*} mesh\n   * @param {*} isSubtractive: if true, repeated addition of meshes will be removed from selected meshes set.\n   */\n  add(mesh, isSubtractive = true) {\n    if (this.meshSelectionSet.has(mesh)) {\n      isSubtractive && this.meshSelectionSet.delete(mesh);\n    } else {\n      this.meshSelectionSet.add(mesh);\n    }\n    return this;\n  }\n\n  addArray(meshes, isSubtractive = true) {\n    meshes.forEach(mesh => this.add(mesh, isSubtractive));\n    return this;\n  }\n\n  clear() {\n    this.meshSelectionSet = new Set();\n    return this;\n  }\n\n  meshes() {\n    return [...this.meshSelectionSet];\n  }\n\n  has(mesh) {\n    return this.meshSelectionSet.has(mesh);\n  }\n\n  filter(predicate) {\n    const filteredSet = new Set();\n    this.meshSelectionSet.forEach(mesh => {\n      if (predicate(mesh)) filteredSet.add(mesh);\n    });\n    this.meshSelectionSet = filteredSet;\n    return this;\n  }\n\n  //   forEach(lambda) {\n  //     this.meshSelectionSet.forEach(lambda);\n  //     return this;\n  //   }\n\n  static ofMainView(mainView) {\n    return new MeshSelector(mainView);\n  }\n}\n\nconst placeHolderInstance = {};\n","import GlobalRef from \"../NodeItem/GlobalRef\";\nimport Box from \"../NodeItem/Box\";\nimport KeyPoint from \"../NodeItem/KeyPoint\";\nimport Path from \"../NodeItem/Path\";\nimport Wall from \"../NodeItem/Wall\";\nimport BoxRegion from \"../NodeItem/BoxRegion\";\nimport PolygonRegion from \"../NodeItem/PolygonRegion\";\nimport GraphItem from \"../NodeItem/GraphItem\";\nimport NavigationPreviewItem from \"../NodeItem/NavigationPreviewItem\";\n\nconst NODE_ITEM_FACTORY_MAP = {\n  GlobalRef: GlobalRef,\n  Box: Box,\n  KeyPoint: KeyPoint,\n  Path: Path,\n  Wall: Wall,\n  BoxRegion: BoxRegion,\n  PolygonRegion: PolygonRegion,\n  GraphItem: GraphItem,\n  NavigationPreviewItem: NavigationPreviewItem\n};\n\nexport default NODE_ITEM_FACTORY_MAP;\n","import Vec3 from \"./Vec3\";\nimport { Matrix } from \"@babylonjs/core\";\n\nclass Mat3 {\n  constructor(v1, v2, v3) {\n    const v = [v1, v2, v3];\n    for (let i = 0; i < v.length; i++) {\n      if (v[i].constructor !== Array || v[i].length < 3)\n        throw Error(\"One of the inputs is not a array\");\n    }\n    this.mat3 = v.map(x => new Vec3(x));\n  }\n\n  /**\n   * Matrix prod with  3-vector\n   * @param {*} v: 3-vector\n   *\n   * returns 3-vector\n   */\n  prodVec(v) {\n    let ans = new Vec3([0, 0, 0]);\n    for (let i = 0; i < this.mat3.length; i++) {\n      ans = ans.add(this.mat3[i].scale(v.vec3[i]));\n    }\n    return ans;\n  }\n\n  /**\n   * Matrix transpose prod with 3-vec\n   * @param {*} v : 3-vector\n   */\n  dotVec(v) {\n    const ans = [0, 0, 0];\n    for (let i = 0; i < this.mat3.length; i++) {\n      ans[i] = this.mat3[i].dot(v);\n    }\n    return new Vec3(ans);\n  }\n\n  prod(m) {\n    const u = this.prodVec(m.mat3[0]);\n    const v = this.prodVec(m.mat3[1]);\n    const w = this.prodVec(m.mat3[2]);\n    return new Mat3(u.vec3, v.vec3, w.vec3);\n  }\n\n  dot(m) {\n    const u = this.dotVec(m.mat3[0]);\n    const v = this.dotVec(m.mat3[1]);\n    const w = this.dotVec(m.mat3[2]);\n    return new Mat3(u.vec3, v.vec3, w.vec3);\n  }\n\n  map(f) {\n    const u = this.mat3[0].map(f);\n    const v = this.mat3[1].map(f);\n    const w = this.mat3[2].map(f);\n    return new Mat3(u.vec3, v.vec3, w.vec3);\n  }\n\n  equals(mat) {\n    if (mat.constructor !== this.constructor) return false;\n    return this.mat3\n      .map((v, index) => v.equals(mat.mat3[index]))\n      .reduce((e, v) => e && v, true);\n  }\n\n  static ofBabylonMatrix(babylonMat) {\n    const arrayMat = Matrix.GetAsMatrix3x3(babylonMat);\n    const u = [arrayMat[0], arrayMat[1], arrayMat[2]];\n    const v = [arrayMat[3], arrayMat[4], arrayMat[5]];\n    const w = [arrayMat[6], arrayMat[7], arrayMat[8]];\n    return new Mat3(u, v, w);\n  }\n\n  static of(v1, v2, v3) {\n    return new Mat3(v1, v2, v3);\n  }\n\n  static eye() {\n    return new Mat3([1, 0, 0], [0, 1, 0], [0, 0, 1]);\n  }\n}\n\nexport default Mat3;\n","//immutable class, not managing exceptions\nclass Vec2 {\n  constructor(x, y) {\n    this.vec = [x, y].map(z => (z ? z : 0));\n  }\n\n  get x() {\n    return this.vec[0];\n  }\n\n  get y() {\n    return this.vec[1];\n  }\n\n  toArray() {\n    return this.vec;\n  }\n\n  add(y) {\n    return this.op(y, (a, b) => a + b);\n  }\n\n  sub(y) {\n    return this.op(y, (a, b) => a - b);\n  }\n\n  mul(y) {\n    return this.op(y, (a, b) => a * b);\n  }\n\n  div(y) {\n    return this.op(y, (a, b) => a / b);\n  }\n\n  dot(y) {\n    return this.vec.reduce((acc, v, i) => acc + v * y.vec[i], 0);\n  }\n\n  prod(y) {\n    return new Vec2(this.x * y.x - this.y * y.y, this.x * y.y + this.y * y.x);\n  }\n\n  length() {\n    return Math.sqrt(this.dot(this));\n  }\n\n  normalize() {\n    return this.scale(1 / this.length());\n  }\n\n  dual() {\n    return new Vec2(-this.y, this.x);\n  }\n\n  sym() {\n    return this.scale(-1);\n  }\n\n  conj() {\n    return new Vec2(this.x, -this.y);\n  }\n\n  scale(r) {\n    return this.map(z => z * r);\n  }\n\n  map(lambda) {\n    return Vec2.fromArray(this.vec.map(lambda));\n  }\n\n  /**\n   * Returns a vec2 from the operation function bilambda\n   * @param {*} y\n   * @param {*} biLambda\n   */\n  op(y, biLambda) {\n    return Vec2.fromArray(this.vec.map((v, i) => biLambda(v, y.vec[i])));\n  }\n\n  reduce(fold, initial) {\n    return this.vec.reduce(fold, initial);\n  }\n\n  toObject() {\n    return { x: this.x, y: this.y };\n  }\n\n  toString() {\n    return `{x: ${this.x}, y:${this.y}}`;\n  }\n\n  static fromArray(array) {\n    if (array.length < 2) throw new Error(\"array must have size > 2\");\n    return new Vec2(array[0], array[1]);\n  }\n\n  static of(x, y) {\n    return new Vec2(x, y);\n  }\n\n  static ofBabylon(vector3) {\n    return new Vec2(vector3.x, vector3.y);\n  }\n\n  static ZERO = new Vec2(0, 0);\n  static e1 = new Vec2(1, 0);\n  static e2 = new Vec2(0, 1);\n}\n\nexport default Vec2;\n","import { Vector3 } from \"@babylonjs/core\";\nimport Vec2 from \"./Vec2\";\n\n/**\n * Class that describes immutable 3-vectors\n */\nclass Vec3 {\n  //no for's because performance\n  constructor(array) {\n    if (array.constructor !== Array || array.length < 3)\n      throw new Error(`${array} is not a valid 3-vector`);\n    this.vec3 = [...array];\n  }\n\n  get x() {\n    return this.vec3[0];\n  }\n\n  get y() {\n    return this.vec3[1];\n  }\n\n  get z() {\n    return this.vec3[2];\n  }\n\n  add(x) {\n    return this.op(x, (a, b) => a + b);\n  }\n\n  sub(x) {\n    return this.op(x, (a, b) => a - b);\n  }\n\n  mul(x) {\n    return this.op(x, (a, b) => a * b);\n  }\n\n  op(x, operation) {\n    const ans = [];\n    ans[0] = operation(this.vec3[0], x.vec3[0]);\n    ans[1] = operation(this.vec3[1], x.vec3[1]);\n    ans[2] = operation(this.vec3[2], x.vec3[2]);\n    return new Vec3(ans);\n  }\n\n  scale(r) {\n    return this.map(x => x * r);\n  }\n\n  dot(x) {\n    return (\n      this.vec3[0] * x.vec3[0] +\n      this.vec3[1] * x.vec3[1] +\n      this.vec3[2] * x.vec3[2]\n    );\n  }\n\n  map(f) {\n    return new Vec3(this.vec3.map(f));\n  }\n\n  length() {\n    return Math.sqrt(this.dot(this));\n  }\n\n  normalize = () => {\n    const l = this.length();\n    if (l === 0) throw new Error(\"You can't normalize a zero norm vector\");\n    return this.scale(1 / l);\n  };\n\n  toBabylon() {\n    return new Vector3(this.vec3[0], this.vec3[1], this.vec3[2]);\n  }\n\n  toArray() {\n    return this.vec3;\n  }\n\n  toVec2() {\n    return new Vec2(this.x, this.y);\n  }\n\n  equals(v) {\n    if (v.constructor !== this.constructor) return false;\n    return v.vec3\n      .map((x, index) => v.vec3[index] === x)\n      .reduce((e, v) => e && v, true);\n  }\n\n  reduce(binary, initialValue) {\n    return this.vec3.reduce(binary, initialValue);\n  }\n\n  getMax() {\n    return this.reduce((a, b) => Math.max(a, b), -Number.MAX_VALUE);\n  }\n\n  getMin() {\n    return this.reduce((a, b) => Math.min(a, b), Number.MAX_VALUE);\n  }\n\n  someNaNOrInfinite() {\n    return this.vec3.some(x => isNaN(x) || !isFinite(x));\n  }\n\n  static ofBabylon(babylon) {\n    return new Vec3([babylon.x, babylon.y, babylon.z]);\n  }\n\n  static of(array) {\n    return array ? new Vec3(array) : new Vec3([0, 0, 0]);\n  }\n\n  static fromArray(array) {\n    return Vec3.of(array);\n  }\n\n  static random() {\n    return new Vec3([1, 2, 3].map(Math.random()));\n  }\n\n  /**\n   *\n   * @param {*} u: Vec3\n   */\n  static orthogonalBasisFromVector(u) {\n    const identityMatrix = [Vec3.e1, Vec3.e2, Vec3.e3];\n    //choose pivot\n    let pivot = 0;\n    for (let i = 0; i < 3; i++) {\n      if (u.vec3[i] !== 0) {\n        pivot = i;\n        break;\n      }\n    }\n    let v = identityMatrix[(pivot + 1) % 3].add(\n      identityMatrix[pivot].scale(-u.vec3[(pivot + 1) % 3] / u.vec3[pivot])\n    );\n    v = v.normalize();\n    let w = identityMatrix[(pivot + 2) % 3].add(\n      identityMatrix[pivot].scale(-u.vec3[(pivot + 2) % 3] / u.vec3[pivot])\n    );\n    w = w.normalize();\n    w = w.sub(v.scale(v.dot(w)));\n    return { u: u.normalize(), v: v, w: w.normalize() };\n  }\n\n  static ONES = Vec3.of([1, 1, 1]);\n  static ZERO = Vec3.of([0, 0, 0]);\n  static e1 = new Vec3([1, 0, 0]);\n  static e2 = new Vec3([0, 1, 0]);\n  static e3 = new Vec3([0, 0, 1]);\n}\n\nexport default Vec3;\n","import NodeItem from \"./NodeItem\";\n\nclass AssetNodeItem extends NodeItem {\n  constructor(mesh, assetName, keyValueMap = {}) {\n    super(mesh, keyValueMap);\n    this.assetName = assetName;\n  }\n\n  toDict() {\n    const ans = super.toDict();\n    ans.assetName = this.assetName;\n    return ans;\n  }\n\n  getCopyFunction = () => {\n    return (mousePosFromRoot, someMainView) => {};\n  };\n}\n\nexport default AssetNodeItem;\n","import NodeItem from \"./NodeItem\";\nimport { Maybe } from \"monet\";\nimport Util3d from \"../Util3d/Util3d\";\nimport { Color3 } from \"@babylonjs/core\";\n\nclass Box extends NodeItem {\n  static DEFAULT_SIZE = 0.5;\n\n  constructor(mesh, size = Box.DEFAULT_SIZE, keyValueMap = {}) {\n    super(mesh, keyValueMap);\n    this.size = size;\n  }\n\n  toDict() {\n    const dict = super.toDict();\n    dict.size = this.size;\n    return dict;\n  }\n\n  ofDict(scene, dict = null, mainView = null) {\n    return Box.ofDict(scene, dict, mainView);\n  }\n\n  getType = () => Box.TYPE;\n\n  static TYPE = \"Box\";\n\n  static ofDict(scene, dict = null, mainView = null) {\n    const maybeDict = Maybe.fromNull(dict);\n    const size = maybeDict\n      .flatMap(z => Maybe.fromNull(z.size))\n      .orSome(Box.DEFAULT_SIZE);\n    const name = maybeDict\n      .flatMap(z => Maybe.fromNull(z.name))\n      .orSome(`Box${Math.floor(Math.random() * 1e3)}`);\n    const keyValueMap = maybeDict\n      .flatMap(d => Maybe.fromNull(d.keyValueMap))\n      .orUndefined();\n\n    const boxMesh = Util3d.createBox(\n      scene,\n      new Color3(Math.random(), Math.random(), Math.random()),\n      size,\n      name\n    );\n    NodeItem.mapDict2Mesh(dict, boxMesh);\n    return new Box(boxMesh, size, keyValueMap);\n  }\n}\n\nexport default Box;\n","import NodeItem from \"./NodeItem\";\nimport Util3d from \"../Util3d/Util3d\";\nimport Vec3 from \"../Math/Vec3\";\nimport { Maybe } from \"monet\";\nimport Constants from \"../Utils/Constants\";\nimport {\n  Vector3,\n  Axis,\n  Color3,\n  Observable,\n  StandardMaterial,\n  Quaternion\n} from \"@babylonjs/core\";\nimport isEqual from \"lodash.isequal\";\n\nclass BoxRegion extends NodeItem {\n  constructor(mesh, corners, keyPoints, keyValueMap = {}) {\n    super(mesh, keyValueMap);\n    this.corners = corners; // in local coordinates, in relation to center of mass\n    this.keyPoints = keyPoints;\n  }\n\n  toDict() {\n    const dict = super.toDict();\n    dict.corners = this.corners;\n    return dict;\n  }\n\n  toForm() {\n    const schema = super.toForm();\n    schema.jsonSchema.properties[\"dimensions\"] = {\n      type: \"object\",\n      title: \"Dimensions\",\n      properties: {\n        lower: {\n          type: \"object\",\n          title: \"Lower Corner\",\n          properties: {\n            x: {\n              type: \"number\",\n              title: \"x\"\n            },\n            y: {\n              type: \"number\",\n              title: \"y\"\n            }\n          }\n        },\n        size: {\n          type: \"object\",\n          title: \"Size\",\n          properties: {\n            scaleX: {\n              type: \"number\",\n              title: \"scale-X\"\n            },\n            scaleY: {\n              type: \"number\",\n              title: \"scale-Y\"\n            }\n          }\n        }\n      }\n    };\n    schema.uiSchema[\"dimensions\"] = { \"ui:widget\": \"collapse\" };\n    // global ref coordinates\n    const worldCorners = this.keyPoints\n      .map(x => Util3d.getGlobalCoordinates(x, x.position))\n      .map(x => x.toArray());\n    schema.data[\"dimensions\"] = {\n      lower: {\n        x: worldCorners[0][0],\n        y: worldCorners[0][1]\n      },\n      size: {\n        // TODO: warning, doesn't take into account possible scaling\n        scaleX: this.corners[1][0] - this.corners[0][0],\n        scaleY: this.corners[1][1] - this.corners[0][1]\n      }\n    };\n    return schema;\n  }\n\n  ofForm(form) {\n    const oldForm = this.toForm();\n    const oldDimensions = oldForm.data.dimensions;\n    if (isEqual(oldDimensions, form.dimensions)) {\n      super.ofForm(form);\n    } else {\n      this.ofFormDimensions(form);\n    }\n  }\n\n  ofDict(scene, dict = null, mainView = null) {\n    return BoxRegion.ofDict(scene, dict, mainView);\n  }\n\n  getType = () => BoxRegion.TYPE;\n\n  static TYPE = \"BoxRegion\";\n\n  ofFormDimensions(form) {\n    const newLowerPositionInWorldCoordinates = Vector3.FromArray(\n      [form.dimensions.lower.x, form.dimensions.lower.y, 0].map(\n        Number.parseFloat\n      )\n    );\n    const newLocalDimensions = [\n      form.dimensions.size.scaleX,\n      form.dimensions.size.scaleY\n    ].map(Number.parseFloat);\n    let localLowerPosition = Util3d.getLocalCoordFromGlobal(\n      this.keyPoints[0],\n      newLowerPositionInWorldCoordinates\n    ).toArray();\n    const notify = (i, update = false) =>\n      this.keyPoints[i].observers.notifyObservers({\n        updatedPointMesh: this.keyPoints[i],\n        is2updateServer: update\n      });\n\n    this.keyPoints[0].position = new Vector3(\n      localLowerPosition[0],\n      localLowerPosition[1],\n      this.keyPoints[0].position.z\n    );\n    notify(0);\n    localLowerPosition = Util3d.getLocalCoordFromGlobal(\n      this.keyPoints[0],\n      newLowerPositionInWorldCoordinates\n    ).toArray();\n    this.keyPoints[1].position = new Vector3(\n      localLowerPosition[0] + newLocalDimensions[0],\n      localLowerPosition[1] + newLocalDimensions[1],\n      this.keyPoints[1].position.z\n    );\n    notify(1);\n  }\n\n  static ofDict(scene, dict = null, mainView = null) {\n    if (!dict) throw new Error(\"null dictionary describing Box region\");\n    const name = Maybe.fromNull(dict.name).orSome(\n      `BoxRegion${Math.floor(Math.random() * 1e3)}`\n    );\n    const mesh = createBoxRegionMesh(dict, name, scene);\n\n    const material = new StandardMaterial(`BoxRegionMaterial${name}`, scene);\n    const color = new Color3(dict.color[0], dict.color[1], dict.color[2]);\n    material.diffuseColor = color;\n    material.emissiveColor = color;\n    material.backFaceCulling = false;\n    mesh.material = material;\n\n    mesh.visibility = dict.color[3] || VISIBILITY;\n\n    Maybe.fromNull(dict.quaternion).forEach(quaternion => {\n      const babylonQuaternion = new Quaternion(\n        quaternion[1],\n        quaternion[2],\n        quaternion[3],\n        quaternion[0]\n      );\n      mesh.rotationQuaternion = babylonQuaternion.normalize();\n    });\n\n    const keyPoints = createPlaceHolderKeyPoints(\n      scene,\n      dict.corners.map(x => Vec3.of(x).toBabylon()),\n      mesh,\n      mainView\n    );\n    return new BoxRegion(mesh, dict.corners, keyPoints, dict.keyValueMap);\n  }\n}\n\nconst RADIUS = Constants.RADIUS;\nconst FACES = [\n  [0, 1, 2],\n  [2, 3, 0],\n  [4, 5, 6],\n  [6, 7, 4],\n  [0, 1, 5],\n  [5, 4, 0],\n  [3, 2, 6],\n  [6, 7, 3],\n  [1, 2, 6],\n  [6, 5, 1],\n  [0, 3, 7],\n  [7, 4, 0]\n];\n\n/**\n * @param boxRegion: {position: 3-array, corners: array of 3-arrays }\n */\nfunction createBoxRegionMesh(boxRegion, name, scene) {\n  // centered corners vec\n  const corners = boxRegion.corners.map(x => Vec3.of(x).toBabylon());\n  const d = corners[1].subtract(corners[0]);\n  const middlePoint = Vec3.of(boxRegion.position).toBabylon();\n  const shape = [\n    corners[0],\n    corners[0].add(Axis.X.scale(d.x)),\n    corners[0].add(new Vector3(d.x, d.y, 0)),\n    corners[0].add(Axis.Y.scale(d.y))\n  ];\n  const h = new Vector3(0, 0, d.z);\n  const boxRegionMesh = {\n    positions: [\n      shape[0],\n      shape[1],\n      shape[2],\n      shape[3],\n      shape[0].add(h),\n      shape[1].add(h),\n      shape[2].add(h),\n      shape[3].add(h)\n    ],\n    faces: FACES\n  };\n  const mesh = Util3d.meshFromPositionAndFaces(\n    name,\n    scene,\n    boxRegionMesh.positions,\n    boxRegionMesh.faces\n  );\n  mesh.position = middlePoint;\n  mesh.rotationQuaternion = Quaternion.Identity();\n  return mesh;\n}\n\nfunction createNewMeshFromOldUsingNewBox(newBox, scene, mesh, item) {\n  const average = Util3d.pointAverageVec3(newBox.corners.map(x => Vec3.of(x)));\n  newBox.position = average.toArray();\n  newBox.corners = newBox.corners.map(x => Vec3.of(x).sub(average).toArray());\n\n  // average in parent coord\n  const rotMat3 = Util3d.getRotationMatrix(mesh);\n  const scaleVec3 = Vec3.ofBabylon(mesh.scaling);\n  const averageInParentCoord = rotMat3\n    .prodVec(average.mul(scaleVec3))\n    .toBabylon();\n\n  const newMesh = createBoxRegionMesh(newBox, mesh.name, scene);\n  newMesh.parent = mesh.parent;\n  newMesh.rotationQuaternion = mesh.rotationQuaternion;\n  newMesh.position = averageInParentCoord.add(mesh.position);\n\n  newMesh.material = mesh.material;\n  newMesh.visibility = mesh.visibility;\n  newMesh.getMouseContextActions = mesh.getMouseContextActions;\n  newMesh.nodeItem = mesh.nodeItem;\n  newMesh.observers = mesh.observers;\n  if (!!mesh.graphVertex) {\n    newMesh.graphVertex = mesh.graphVertex;\n    newMesh.graphVertex.vertex.mesh = newMesh;\n  }\n  item.mesh = newMesh;\n  item.corners = newBox.corners;\n\n  const childrenCopy = [...mesh._children];\n  childrenCopy.forEach(c => {\n    c.parent = newMesh;\n  });\n  item.keyPoints.forEach((k, j) => {\n    const saveZ = k.position.z;\n    k.position = Vec3.of(newBox.corners[j]).toBabylon();\n    k.position.z = saveZ;\n  });\n  // dispose old mesh\n  mesh.dispose();\n}\n\nconst getKeyPointObserverFunction = (mainView, scene) => {\n  return ({ updatedPointMesh, is2updateServer }) => {\n    mainView\n      .getNodeFromTree(updatedPointMesh.parent.name)\n      .forEach(boxRegionTreeNode => {\n        const index = updatedPointMesh.index;\n        const item = boxRegionTreeNode.item;\n        const mesh = item.mesh;\n        const name = mesh.name;\n        let newBox = {\n          position: Vec3.ofBabylon(mesh.position).toArray(),\n          corners: item.corners\n        };\n        newBox.corners[index] = [\n          updatedPointMesh.position.x,\n          updatedPointMesh.position.y,\n          newBox.corners[index][2]\n        ];\n        createNewMeshFromOldUsingNewBox(newBox, scene, mesh, item);\n        mainView.addGizmo2Name();\n        if (is2updateServer) {\n          mainView.updateNodeInServer(name);\n          mainView.getNodeFromTree(name).forEach(node => {\n            mainView.setProperties(node.item.toForm());\n          });\n        }\n        // signal box region observers\n        Maybe.fromNull(item.mesh.observers).forEach(obs => {\n          obs.notifyObservers({\n            updatedPointMesh: item.mesh,\n            is2updateServer: is2updateServer,\n            displacement: Vector3.Zero()\n          });\n        });\n        Maybe.fromNull(item.mesh.graphVertex).forEach(({ vertexObs }) => {\n          vertexObs({\n            updatedPointMesh: item.mesh,\n            is2updateServer: is2updateServer,\n            displacement: Vector3.Zero()\n          });\n        });\n      });\n  };\n};\n\nconst createPlaceHolderKeyPoints = (\n  scene,\n  corners,\n  boxRegionMesh,\n  mainView\n) => {\n  const keyPoints = [];\n  const maxHeight = corners.reduce(\n    (max, x) => Math.max(max, x.z),\n    Number.MIN_VALUE\n  );\n  corners.forEach((corner, i) => {\n    const p = corner;\n\n    const keyPoint = Util3d.createSphere(\n      scene,\n      new Color3(0.25, 0.25, 0.25),\n      RADIUS,\n      `${boxRegionMesh.name}keyPoint${i}`,\n      true\n    );\n\n    keyPoint.parent = boxRegionMesh;\n    keyPoint.position = p;\n    keyPoint.position.z = maxHeight;\n    keyPoint.index = i;\n    keyPoint.observers = new Observable();\n    keyPoint.observers.add(getKeyPointObserverFunction(mainView, scene));\n    keyPoints.push(keyPoint);\n  });\n  return keyPoints;\n};\n\nconst VISIBILITY = 0.25;\nexport default BoxRegion;\n","import NodeItem from \"./NodeItem\";\nimport Vec3 from \"../Math/Vec3\";\nimport Util3d from \"../Util3d/Util3d\";\nimport { Maybe } from \"monet\";\nimport { Quaternion, MeshBuilder } from \"@babylonjs/core\";\n\n// ROS/RVIZ default referential\nconst THETA = -Math.PI / 2;\nconst ROS_ORIGIN = {\n  position: [0, 0, 0],\n  scaling: [1, -1, 1],\n  quaternion: [Math.cos(THETA / 2), Math.sin(THETA / 2), 0, 0]\n};\n\nclass GlobalRef extends NodeItem {\n  constructor(mesh, keyValueMap = {}) {\n    super(mesh, keyValueMap);\n  }\n\n  toForm() {\n    const form = super.toForm();\n    form.uiSchema.name = {\n      \"ui:disabled\": true\n    };\n    return form;\n  }\n\n  getMouseContextActions() {\n    return [];\n  }\n\n  getType = () => GlobalRef.TYPE;\n\n  static TYPE = \"GlobalRef\";\n\n  static NAME = \"Global ref\";\n\n  static ofDict(scene, dict = null, mainView = null) {\n    const rosOrigin = GlobalRef.getRosOrigin(scene);\n\n    const globalRefMesh = Util3d.referentialBuilder(scene)\n      .name(GlobalRef.NAME)\n      .isPickable(true)\n      .boxParams({ isVisible: true, size: 0.25 })\n      .build();\n\n    globalRefMesh.parent = rosOrigin;\n\n    NodeItem.mapDict2Mesh(dict, globalRefMesh);\n\n    return new GlobalRef(\n      globalRefMesh,\n      Maybe.fromNull(dict)\n        .flatMap(d => Maybe.fromNull(d.keyValueMap))\n        .orUndefined()\n    );\n  }\n\n  static getRosOrigin(scene) {\n    const rosOrigin = MeshBuilder.CreateBox(\n      \"ROS_ORIGIN\",\n      { size: 1e-3 },\n      scene\n    );\n    rosOrigin.isVisible = false;\n    rosOrigin.isPickable = false;\n    rosOrigin.position = Vec3.of(ROS_ORIGIN.position).toBabylon();\n    rosOrigin.scaling = Vec3.of(ROS_ORIGIN.scaling).toBabylon();\n    const quaternion = new Quaternion(\n      ROS_ORIGIN.quaternion[1],\n      ROS_ORIGIN.quaternion[2],\n      ROS_ORIGIN.quaternion[3],\n      ROS_ORIGIN.quaternion[0]\n    );\n    rosOrigin.rotationQuaternion = quaternion.normalize();\n    return rosOrigin;\n  }\n\n  /**\n   *\n   * @param {*} x: Babylon Vector3 in World coordinates\n   *\n   * returns Babylon Vector3 vector in ROS coordinates\n   */\n  static inverseCoordinates(x) {\n    /**\n     * Solves RS\\eta + p = x\n     *\n     * \\eta = S^(⁻1)R^T(x-p)\n     */\n    const quaternion = ROS_ORIGIN.quaternion;\n    const rotationMatrix = Util3d.getRotationMatrix({\n      rotationQuaternion: new Quaternion(\n        quaternion[1],\n        quaternion[2],\n        quaternion[3],\n        quaternion[0]\n      )\n    });\n    const scaling = Vec3.of(ROS_ORIGIN.scaling).map(z => 1 / z);\n    const pos = Vec3.of(ROS_ORIGIN.position);\n    const result = scaling.mul(\n      rotationMatrix.dotVec(Vec3.ofBabylon(x).sub(pos))\n    );\n    return result.map(z => (Math.abs(z) < 1e-5 ? 0 : z)).toBabylon();\n  }\n\n  /**\n   *\n   * @param {*} x: Babylon Vector3 in ROS coordinates\n   *\n   * returns Babylon Vector3 vector in World coordinates\n   */\n  static forwardCoordinates(x) {\n    /**\n     * computes RS\\eta + p = x\n     */\n    const quaternion = ROS_ORIGIN.quaternion;\n    const rotationMatrix = Util3d.getRotationMatrix({\n      rotationQuaternion: new Quaternion(\n        quaternion[1],\n        quaternion[2],\n        quaternion[3],\n        quaternion[0]\n      )\n    });\n    const scaling = Vec3.of(ROS_ORIGIN.scaling);\n    const pos = Vec3.of(ROS_ORIGIN.position);\n    const result = rotationMatrix\n      .prodVec(scaling.mul(Vec3.ofBabylon(x)))\n      .add(pos);\n    return result.map(z => (Math.abs(z) < 1e-5 ? 0 : z)).toBabylon();\n  }\n}\n\nexport default GlobalRef;\n","import NodeItem from \"./NodeItem\";\nimport Util3d from \"../Util3d/Util3d\";\nimport { Color3, Vector3, Observable } from \"@babylonjs/core\";\nimport Constants from \"../Utils/Constants\";\nimport { Quaternion } from \"@babylonjs/core/Maths/math\";\nimport Graph from \"../Graph/Graph\";\nimport Vec3 from \"../Math/Vec3\";\nimport { Maybe } from \"monet\";\nimport React from \"react\";\nimport lodashGet from \"lodash/get\";\nimport { UndoManager } from \"mov-fe-lib-core\";\nimport Path from \"./Path\";\n\n/**\n * One graph per scene\n */\nclass GraphItem extends NodeItem {\n  constructor(scene, mainView, name = GraphItem.NAME, keyValueMap = {}) {\n    const sceneId = scene.getUniqueId();\n    // super() must be called before using _this_.\n    if (\n      sceneId in graphItemInstances &&\n      !graphItemInstances[sceneId].mesh.isDisposed()\n    ) {\n      return graphItemInstances[sceneId];\n    }\n\n    const graphPlaceHolder = getGraphPlaceHolder(scene, name);\n    graphPlaceHolder.onClick = () =>\n      (this.graphFormMapper = this.getDefaultFormMapper());\n\n    super(graphPlaceHolder, keyValueMap);\n    graphItemInstances[sceneId] = this;\n\n    // object properties\n    this.graph = new Graph();\n    this.scene = scene;\n    this.mainView = mainView;\n    this.meshByEdgeId = {};\n    this.graphFormMapper = this.getDefaultFormMapper();\n    this.vertexGenerator = 0;\n  }\n\n  getType = () => GraphItem.TYPE;\n\n  toDict() {\n    const dict = super.toDict();\n    const { graph } = this;\n    const vertices = { ...graph.getVertices() };\n    const edges = { ...graph.getEdges() };\n    Object.keys(vertices).forEach(k => {\n      graph.getVertex(k).forEach(({ data: vertexData }) => {\n        vertices[k] = {\n          position: Vec3.ofBabylon(vertexData.position).toArray(),\n          id: String(k)\n        };\n      });\n    });\n    // export directed graph\n    Object.keys(edges).forEach(k => {\n      const ids = Graph.key2Edge(k);\n      graph.getEdge(...ids).forEach(({ data: edgeData }) => {\n        const [i, j] = ids.map(x => Number(x));\n        const edgeMesh = edgeData.edge.map(({ mesh }) => mesh);\n        const [belongsSrcMesh, belongsTrgMesh] = edgeMesh;\n        edges[k] = {\n          ids: ids,\n          keyValueMap: edgeData.keyValueMap,\n          weight: edgeData.weight,\n          belongsSrc:\n            i < j\n              ? this.exportBelongToData(belongsSrcMesh)\n              : this.exportBelongToData(belongsTrgMesh),\n          belongsTrg:\n            i < j\n              ? this.exportBelongToData(belongsTrgMesh)\n              : this.exportBelongToData(belongsSrcMesh)\n        };\n        if (this.doMeshesBelong2SamePath(...edgeMesh)) {\n          if (i > j) {\n            // remove edge if belongs to same path and i > j\n            delete edges[k];\n          }\n        } else {\n          if (this.checkInvalidEdges(...edgeMesh, edges[k])) {\n            // remove edge if is invalid edge\n            delete edges[k];\n          }\n        }\n      });\n    });\n    dict[\"vertices\"] = vertices;\n    dict[\"edges\"] = edges;\n    return dict;\n  }\n\n  toForm() {\n    const form = super.toForm();\n    delete form.jsonSchema.properties.position;\n    delete form.jsonSchema.properties.rotation;\n    delete form.jsonSchema.properties.color;\n    delete form.uiSchema.position;\n    delete form.uiSchema.rotation;\n    delete form.uiSchema.color;\n    delete form.data.position;\n    delete form.data.rotation;\n    delete form.data.color;\n    return this.graphFormMapper.toForm(form);\n  }\n\n  ofForm(form) {\n    this.name = form.name;\n    this.mesh.name = form.name;\n    this.graphFormMapper.ofForm(form);\n  }\n\n  getDefaultFormMapper() {\n    return {\n      toForm: form => form,\n      ofForm: form => (this.keyValueMap = { ...form.annotations })\n    };\n  }\n\n  getToFormEdge(edgeMesh) {\n    const { graph } = this;\n    return {\n      toForm: form => {\n        return graph\n          .getEdge(...edgeMesh.edgeIndexes)\n          .map(({ data: edgeData }) => {\n            form.jsonSchema.properties[\"weight\"] = {\n              type: \"number\",\n              title: \"Weight\"\n            };\n            form.data[\"weight\"] = edgeData.weight;\n            NodeItem.setAnnotations2Form(form, edgeData.keyValueMap);\n            form.jsonSchema.properties[\n              \"annotations\"\n            ].title = `Annotations Edge ${edgeMesh.edgeIndexes}`;\n            return form;\n          })\n          .orSome(form);\n      },\n      ofForm: form => {\n        const { edgeIndexes } = edgeMesh;\n        graph.getEdge(...edgeIndexes).forEach(({ data: edgeData }) => {\n          edgeData.keyValueMap = { ...lodashGet(form, \"annotations\", {}) };\n          edgeData.weight = Number.parseFloat(form.weight);\n        });\n      }\n    };\n  }\n\n  /**\n   * @override nodeItem delVertex()\n   * Delete all vertex from tree nodes\n   */\n  delVertex() {\n    // Iterate though all nodes under the root node and delete its vertexes\n    const root = this.mainView.getRootNode();\n    this.delVertexRecursively(root?.children);\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                   Graph Operations                                   *\n   *                                                                                      */\n  //========================================================================================\n\n  /**\n   *\n   * @param {*} iMesh: Mesh vertex\n   * @param {*} jMesh: Mesh vertex\n   * @param {*} edgeIndexes: Array<Integer>\n   */\n  addEdge(iMesh, jMesh, edgeIndexes = []) {\n    const [iIndex, jIndex] = edgeIndexes;\n    if (this.hasEdge(iMesh, jMesh)) return;\n    this.buildVertex(iMesh, iIndex);\n    this.buildVertex(jMesh, jIndex);\n    this.buildEdge(iMesh, jMesh);\n    return this;\n  }\n\n  getEdge(iMesh, jMesh) {\n    const { graph } = this;\n    const [i, j] = [iMesh, jMesh].map(this.getVertexIdFromMesh);\n    // if it has an edge\n    return graph.getEdge(i, j).map(({ data }) => data);\n  }\n\n  delEdge(iMesh, jMesh) {\n    const { graph } = this;\n    const [i, j] = [iMesh, jMesh].map(this.getVertexIdFromMesh);\n    // if it has an edge\n    graph.getEdge(i, j).forEach(({ data: edgeData }) => {\n      const ijKey = Graph.edgeKey(i, j);\n      const jiKey = Graph.edgeKey(j, i);\n      Maybe.fromNull(this.meshByEdgeId[ijKey]).forEach(mesh => {\n        mesh.dispose();\n        delete this.meshByEdgeId[ijKey];\n        delete this.meshByEdgeId[jiKey];\n      });\n      graph.delEdge(i, j);\n    });\n    // Reset right menu to display scene details\n    this.mainView.setProperties();\n  }\n\n  /**\n   *\n   * @param {*} iMesh: Mesh\n   * @param {*} jMesh: Mesh\n   */\n  hasEdge(iMesh, jMesh) {\n    const [i, j] = [iMesh, jMesh].map(this.getVertexIdFromMesh);\n    return this.graph.hasEdge(i, j);\n  }\n\n  delVertexFromMesh(iMesh, is2updateServer = true) {\n    const { graph } = this;\n    const i = this.getVertexIdFromMesh(iMesh);\n    graph.getVertex(i).forEach(_ => {\n      // if vertex found delete neighbors\n      const neighbors = graph.getNeighbors(i);\n      neighbors\n        .map(j => graph.getVertex(j))\n        .forEach(maybeV =>\n          maybeV.forEach(({ data: vertexData }) => {\n            const { mesh: jMesh } = vertexData;\n            this.delEdge(iMesh, jMesh);\n          })\n        );\n      // delete itself\n      graph.delVertex(i);\n      iMesh.graphVertex = undefined;\n      if (is2updateServer) this.mainView.updateNodeInServer(this.name);\n    });\n  }\n  /**\n   *\n   * @param {*} iMesh\n   * @returns {*} Maybe<Vertex>\n   */\n  getVertex(iMesh) {\n    const { graph } = this;\n    const i = this.getVertexIdFromMesh(iMesh);\n    return graph.getVertex(i).map(({ data }) => data);\n  }\n\n  /**\n   *\n   * @param {*} iMesh\n   * @returns {*} Array<Vertex>\n   */\n  getNeighbors(iMesh) {\n    const { graph } = this;\n    const i = this.getVertexIdFromMesh(iMesh);\n    return graph\n      .getNeighbors(i)\n      .map(id => graph.getVertex(id).orNull())\n      .map(({ data }) => data)\n      .filter(x => !!x);\n  }\n\n  doMeshesBelong2SamePath(iMesh, jMesh) {\n    const iParentNodeItem = iMesh?.parent?.nodeItem;\n    const jParentNodeItem = jMesh?.parent?.nodeItem;\n    return (\n      !!iParentNodeItem &&\n      !!jParentNodeItem &&\n      iParentNodeItem.name === jParentNodeItem.name &&\n      iParentNodeItem.getType() === Path.TYPE &&\n      jParentNodeItem.getType() === Path.TYPE\n    );\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                    Private Methods                                   *\n   *                                                                                      */\n  //========================================================================================\n  /**\n   *\n   * @param {*} id: vertex to be updated id\n   * @param {*} newPosition: Vector3, new vertex position\n   * @param {*} is2updateServer: is to update in server boolean var\n   * @param {*} protectEdge: Pair<Int> with vertex indices\n   */\n  updateVertexPosition(id, newPosition, is2updateServer = true) {\n    const { graph } = this;\n    graph.getVertex(id).forEach(({ data: vertexData }) => {\n      vertexData.position = newPosition;\n    });\n    graph.getNeighbors(id).forEach(j => {\n      const i = id;\n      const edgeKey = Graph.edgeKey(i, j);\n      this.meshByEdgeId[edgeKey] && this.meshByEdgeId[edgeKey].dispose();\n      graph.getEdge(i, j).forEach(({ data: edgeData }) => {\n        const [iData, jData] = edgeData.edge;\n        this.buildEdge(iData.mesh, jData.mesh);\n      });\n      if (is2updateServer) this.mainView.updateNodeInServer(this.name);\n    });\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                    Private Methods                                   *\n   *                                                                                      */\n  //========================================================================================\n\n  /**\n   * Delete vertex from nodeTree children\n   * @param {*} nodeTree: List of nodes (initially root.children)\n   */\n  delVertexRecursively(nodeTree = []) {\n    nodeTree.forEach(node => {\n      if (node.item.getType() !== GraphItem.TYPE) {\n        node.item.delVertex();\n        this.delVertexRecursively(node.children);\n      }\n    });\n  }\n\n  /**\n   *\n   * @param {*} mesh: Mesh\n   * @returns Integer| Undefined\n   */\n  getVertexIdFromMesh(mesh) {\n    return mesh?.graphVertex?.vertex?.id;\n  }\n\n  /**\n   *\n   * @param {*} vertexMesh: Mesh\n   * @param {*} vertexIndex: integer representing index of vertex (can be undefined)\n   *\n   */\n  buildVertex(vertexMesh, vertexIndex) {\n    // test if vertexMesh already exists in the graph\n    const vId = this.getVertexIdFromMesh(vertexMesh);\n    const maybeVertex = this.graph.getVertex(vId);\n    maybeVertex.orElseRun(() => {\n      // if vertex doesn't exist\n      const id = vertexIndex ? vertexIndex : this.vertexGenerator++;\n      this.graph.addVertex(id);\n      this.graph.getVertex(id).forEach(vertex => {\n        vertex.data = VertexData.builder()(id, vertexMesh);\n        this.addObs2VertexMesh(vertex.data);\n      });\n    });\n  }\n\n  /**\n   *\n   * @param {*} vData: VertexData\n   */\n  addObs2VertexMesh(vData) {\n    const { mesh } = vData;\n    if (mesh !== undefined) {\n      mesh.graphVertex = {\n        vertex: vData,\n        delVertex: () => this.delVertexFromMesh(mesh),\n        vertexObs: this.getVertexMeshObs(vData)\n      };\n    }\n  }\n\n  /**\n   *\n   * @param {*} vertexData: VertexData\n   */\n  getVertexMeshObs(vertexData) {\n    return ({ updatedPointMesh, is2updateServer, _ }) => {\n      if (updatedPointMesh.isDisposed()) return;\n      const newPos = Util3d.getGlobalCoordinates(\n        updatedPointMesh,\n        updatedPointMesh.position\n      ).toBabylon();\n      this.updateVertexPosition(vertexData.id, newPos, is2updateServer);\n    };\n  }\n\n  /**\n   *\n   * @param {*} iMesh: Mesh\n   * @param {*} jMesh: Mesh\n   * @param {*} edgeMeshes: Array<Mesh>\n   */\n  buildEdge(iMesh, jMesh) {\n    const { graph } = this;\n    // need to sort edge numbers because is undirected graph\n    const [i, j] = [iMesh, jMesh]\n      .map(this.getVertexIdFromMesh)\n      .sort((a, b) => a - b); // reason here: https://stackoverflow.com/questions/15084070/is-this-a-bug-in-array-sort\n    graph.addEdge(i, j);\n    graph.getVertex(i).forEach(({ data: iVertexD }) =>\n      graph.getVertex(j).forEach(({ data: jVertexD }) => {\n        graph.getEdge(i, j).forEach(edge => {\n          if (!edge.data) {\n            edge.data = new EdgeData(iVertexD, jVertexD);\n          } else {\n            edge.data.edge = [iVertexD, jVertexD];\n          }\n        });\n        // if vertices belong to same path don't build mesh\n        if (!this.doMeshesBelong2SamePath(iMesh, jMesh)) {\n          const isPath2Path = [iMesh, jMesh]\n            .map(this.isMeshBelong2Path)\n            .every(x => x);\n          const edgeMesh = this.getEdgeMesh(iVertexD, jVertexD, isPath2Path);\n          this.meshByEdgeId[Graph.edgeKey(i, j)] = edgeMesh;\n          this.meshByEdgeId[Graph.edgeKey(j, i)] = edgeMesh;\n        }\n      })\n    );\n  }\n\n  getEdgeMesh(iVertexD, jVertexD, hasDirection = false) {\n    const edgeInGlobal = [iVertexD, jVertexD].map(({ mesh }) =>\n      Util3d.getGlobalCoord(mesh, mesh.position)\n    );\n    const edgeMesh = GraphItem.getEdgeMesh(\n      this.scene,\n      edgeInGlobal,\n      `edgeMesh${iVertexD.id}_${jVertexD.id}`,\n      Color3.Yellow()\n    );\n    edgeMesh.visibility = 0.99;\n    edgeMesh.material = GraphItem.getEdgeMaterial(this.scene, {\n      speed: hasDirection ? 8 : 0\n    });\n    edgeMesh.parent = this.mesh;\n    edgeMesh.edgeIndexes = [iVertexD, jVertexD].map(({ id }) => id);\n    edgeMesh.getMouseContextActions = this.getEdgeMouseCtxActions(edgeMesh);\n    this.addObserver2EdgeMesh(edgeMesh);\n    this.addOnClickEdge(edgeMesh);\n    return edgeMesh;\n  }\n\n  /**\n   *\n   * @param {*} edgeMesh: Mesh\n   * @returns: () => Array<{title: String, onClick: () => {}}>\n   */\n  getEdgeMouseCtxActions = edgeMesh => () => {\n    return [\n      {\n        title: \"Delete\",\n        onClick: () =>\n          this.mainView.getUndoManager().doIt(this.getUndoDeleteEdge(edgeMesh))\n      }\n    ];\n  };\n\n  /**\n   *\n   * @param {*} edgeMesh: Mesh\n   */\n  addObserver2EdgeMesh(edgeMesh) {\n    edgeMesh.observers = new Observable();\n    edgeMesh.observers.add(this.getEdgeObs());\n  }\n\n  /**\n   * @returns ({updatedPointMesh: Mesh, is2updateServer: Boolean, displacement: Vector3}) => {}\n   */\n  getEdgeObs =\n    () =>\n    ({ updatedPointMesh, is2updateServer, displacement }) => {\n      const v = Vec3.ofBabylon(displacement);\n      const vLocal = Util3d.getLocalCoordFromWorld(this.mesh, v, false);\n      updatedPointMesh.position = updatedPointMesh.position.add(\n        vLocal.scale(-1).toBabylon()\n      );\n      if (is2updateServer) {\n        this.graphFormMapper = this.getToFormEdge(updatedPointMesh);\n        this.mainView.setProperties(this.toForm());\n      }\n    };\n\n  /**\n   *\n   * @param {*} edgeMesh: Mesh\n   */\n  addOnClickEdge(edgeMesh) {\n    edgeMesh.onClick = this.getOnClickEdge(edgeMesh);\n  }\n\n  getOnClickEdge = edgeMesh => () => {\n    const actions = [];\n    actions.push({\n      icon: props => <i className=\"fas fa-trash\" {...props}></i>,\n      action: () => {\n        this.mainView.getUndoManager().doIt(this.getUndoDeleteEdge(edgeMesh));\n      },\n      name: \"Delete Edge [Del]\"\n    });\n    this.mainView.setContextActions(actions);\n  };\n\n  getUndoDeleteEdge(edgeMesh) {\n    const { graph } = this;\n    const { edgeIndexes } = edgeMesh;\n    const [iVertexD, jVertexD] = edgeIndexes\n      .map(i => graph.getVertex(i))\n      .map(maybeV => maybeV.some())\n      .map(({ data }) => data);\n    return this.getUndoDelLineEdge(iVertexD, jVertexD);\n  }\n\n  getUndoDelLineEdge(iVertexD, jVertexD) {\n    const { graph } = this;\n    const edgeVertexD = [iVertexD, jVertexD];\n    const [i, j] = edgeVertexD.map(({ id }) => id);\n    const edgeMeshes = edgeVertexD.map(({ mesh }) => mesh);\n    let edgeProps = { keyValueMap: {}, weight: 1, edge: {} };\n    graph.getEdge(i, j).forEach(({ data: edgeData }) => {\n      edgeProps.keyValueMap = edgeData.keyValueMap;\n      edgeProps.weight = edgeData.weight;\n      edgeProps.edge = edgeData.edge;\n    });\n    return UndoManager.actionBuilder()\n      .doAction(() => {\n        this.delEdge(...edgeMeshes);\n        this.mainView.closeContextDial();\n        this.mainView.updateNodeInServer(this.name);\n      })\n      .undoAction(({ is2UpdateInServer = true }) => {\n        this.addEdge(...edgeMeshes, [i, j]);\n        graph.getEdge(i, j).forEach(({ data: edgeData }) => {\n          edgeData.keyValueMap = edgeProps.keyValueMap;\n          edgeData.weight = edgeProps.weight;\n          edgeData.edge = edgeProps.edge;\n        });\n        if (is2UpdateInServer) this.mainView.updateNodeInServer(this.name);\n      })\n      .build();\n  }\n\n  isMeshBelong2Path = ({ parent }) => {\n    return this.mainView\n      .getNodeFromTree(parent?.name)\n      .filter(({ item }) => item.getType() === Path.TYPE)\n      .orSome(false);\n  };\n\n  checkInvalidEdges(iMesh, jMesh, edgeData) {\n    const edgeMeshesArePath = [iMesh, jMesh]\n      .map(this.isMeshBelong2Path)\n      .every(x => x);\n    if (!edgeMeshesArePath) return false;\n    const srcMesh = [iMesh, jMesh].filter(\n      mesh => mesh.parent.name === edgeData.belongsSrc.name\n    )[0];\n    const trgMesh = [iMesh, jMesh].filter(\n      mesh => mesh.parent.name === edgeData.belongsTrg.name\n    )[0];\n    return srcMesh && trgMesh\n      ? GraphItem.isInvalidEdge(srcMesh, trgMesh)\n      : false;\n  }\n\n  exportBelongToData = mesh => {\n    const { index, name } = mesh;\n    if (index === null || index === undefined) {\n      return { name };\n    }\n    // if mesh has index, then it must be a path or polygon\n    return this.mainView\n      .getNodeFromTree(mesh?.parent?.name)\n      .map(({ item }) => ({\n        name: item.name,\n        index: index > 0 ? -1 : index\n      }))\n      .orUndefined();\n  };\n  //========================================================================================\n  /*                                                                                      *\n   *                             Static Methods and Variables                             *\n   *                                                                                      */\n  //========================================================================================\n\n  static TYPE = \"GraphItem\";\n\n  static NAME = \"LogicGraph\";\n\n  static ofDict(scene, dict = null, mainView = null) {\n    if (!dict || !mainView)\n      throw new Error(\"null dictionary describing graphItem or null mainView\");\n    const graphItem = new GraphItem(\n      scene,\n      mainView,\n      dict.name,\n      dict.keyValueMap\n    );\n    const { edges } = dict;\n    let vertexCounter = Number.MIN_VALUE;\n    // create mesh of graph using addEdge\n    // map directed graph -> undirected graph\n    Object.values(edges).forEach(({ ids, belongsSrc, belongsTrg }) => {\n      const [i, j] = ids.map(x => Number(x));\n      vertexCounter = Math.max(vertexCounter, Math.max(i, j));\n      const edgeMeshes = getMeshesFromEdgeData(mainView, {\n        belongsSrc,\n        belongsTrg\n      });\n      const foundMeshes = edgeMeshes.reduce(\n        (e, x) => e && x !== null && x !== undefined,\n        true\n      );\n      if (foundMeshes) {\n        graphItem.addEdge(...edgeMeshes, [i, j]);\n        // add additional data\n        graphItem.graph.getEdge(i, j).forEach(({ data: edgeData }) => {\n          const dataEdge = edges[Graph.edgeKey(i, j)];\n          edgeData.importFeatures(dataEdge);\n        });\n      }\n    });\n    graphItem.vertexGenerator = vertexCounter + 1;\n    return graphItem;\n  }\n\n  static getVertexMesh(\n    scene,\n    vertexPosition,\n    color = Color3.Gray(),\n    radius = Constants.RADIUS\n  ) {\n    const sphere = Util3d.createSphere(scene, color, radius);\n    sphere.position = vertexPosition;\n    return sphere;\n  }\n\n  /**\n   *\n   * @param {*} scene: Scene\n   * @param {*} edge: Array<Vector3>\n   * @param {*} color: Color3\n   * @param {*} radius: Number\n   */\n  static getEdgeMesh(\n    scene,\n    edge,\n    name,\n    color = Color3.Gray(),\n    radius = Constants.RADIUS / 4\n  ) {\n    return Util3d.createTubeFromPoints(scene, edge, color, radius, name);\n  }\n\n  static getEdgeMaterial(\n    scene,\n    { color = Color3.Yellow(), frequency = 8, speed = 0 }\n  ) {\n    return Util3d.getShaderMaterial({\n      vertex: VERTEX,\n      frag: FRAG(frequency, speed, [color.r, color.g, color.b])\n    })(scene);\n  }\n\n  static createGraphItemIfNone = (scene, parentView) =>\n    parentView.getGraph().orElseRun(() => {\n      const graphItem = new GraphItem(scene, parentView);\n      graphItem.mesh.parent = parentView.getRootNode().item.mesh;\n      parentView.addNodeItem2Tree(graphItem);\n    });\n\n  /**\n   * Check if edge being draw is invalid\n   * @param {Mesh} firstMesh: origin/source edge mesh\n   * @param {Mesh} secondMesh: destination/target edge mesh\n   */\n  static isInvalidEdge = (firstMesh, secondMesh) => {\n    const firstMeshParent = firstMesh.parent?.nodeItem;\n    const secondMeshParent = secondMesh.parent?.nodeItem;\n    const validationError = [];\n    // Invalid Edge 1 : from start of a path to the end of another path\n    // Invalid Edge 2 : from the end of a path to the end of another path\n    if (\n      firstMeshParent.getType() === Path.TYPE &&\n      secondMeshParent.getType() === Path.TYPE\n    ) {\n      const origin = firstMesh.index / (firstMeshParent.keyPoints.length - 1);\n      const target = secondMesh.index / (secondMeshParent.keyPoints.length - 1);\n      // Invalid Edge 1 validation\n      if (origin === 0 && target === 1) validationError.push(1);\n      // Invalid Edge 2 validation\n      if (origin === 1 && target === 1) validationError.push(2);\n    }\n    return validationError.length > 0;\n  };\n}\n\nconst graphItemInstances = {};\nconst getGraphPlaceHolder = (scene, name) => {\n  const graphPlaceHolder = Util3d.createSphere(\n    scene,\n    Color3.Gray(),\n    Number.MIN_VALUE,\n    name,\n    false\n  );\n  graphPlaceHolder.position = Vector3.Zero();\n  graphPlaceHolder.scaling = Vector3.One();\n  graphPlaceHolder.rotationQuaternion = Quaternion.Identity();\n  graphPlaceHolder.visibility = 0.0;\n  return graphPlaceHolder;\n};\n\nconst getMeshesFromEdgeData = (mainView, edgeProps) => {\n  const { belongsSrc, belongsTrg } = edgeProps;\n  const edgeMesh = [belongsSrc, belongsTrg].map(({ name, index }) => {\n    return mainView\n      .getNodeFromTree(name)\n      .map(({ item }) => {\n        if (index === null || index === undefined) return item.mesh;\n        // if has index, then it must be a path or polygon\n        const ind = index < 0 ? item.keyPoints.length - 1 : index;\n        return item.keyPoints[ind];\n      })\n      .orUndefined();\n  });\n  return edgeMesh;\n};\n\nclass VertexData {\n  /**\n   *\n   * @param {*} id: Integer\n   * @param {*} mesh: Mesh\n   * @param {*} position:\n   */\n  constructor(id, mesh, position) {\n    this.id = id;\n    this.mesh = mesh;\n    this.position = position;\n  }\n\n  static builder() {\n    return (id, mesh) => {\n      const globalPos = Util3d.getGlobalCoordinates(\n        mesh,\n        mesh.position\n      ).toBabylon();\n      return new VertexData(id, mesh, globalPos);\n    };\n  }\n}\n\nclass EdgeData {\n  constructor(vertexDataI, vertexDataJ, keyValueMap = {}) {\n    this.edge = [vertexDataI, vertexDataJ];\n    this.keyValueMap = keyValueMap;\n    this.weight = 1.0;\n  }\n\n  importFeatures({ keyValueMap, weight }) {\n    this.keyValueMap = keyValueMap;\n    this.weight = weight;\n  }\n}\n\nconst VERTEX = `\nprecision highp float;\n// Attributes\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 uv;\n\n// Uniforms\nuniform mat4 worldViewProjection;\n\n// Varying\nvarying vec3 vPosition;\nvarying vec3 vNormal;\nvarying vec2 vUV;\n\nvoid main(void) {\n    vec4 outPosition = worldViewProjection * vec4(position, 1.0);\n    gl_Position = outPosition;\n\n    vUV = uv;\n    vPosition = position;\n    vNormal = normal;\n}`;\n\nconst FRAG = (freq = 8, speed = 2, color) => `\n#define PI 3.1415926538\nprecision highp float;\n\n// Varying\nvarying vec3 vPosition;\nvarying vec3 vNormal;\nvarying vec2 vUV;\n\n// Refs\nuniform float time;\n\nvoid main(void) {\n    vec3 color = vec3(${color[0]}, ${color[1]}, ${color[2]});\n    float frequency = ${Number(freq).toFixed(1)};\n    float speed = ${Number(speed).toFixed(1)};\n    gl_FragColor = vec4(color, max(0.,sin(2. * PI * vUV.y * frequency - speed * time)));\n}`;\n\nexport default GraphItem;\n","import NodeItem from \"./NodeItem\";\nimport Util3d from \"../Util3d/Util3d\";\nimport { Maybe } from \"monet\";\nimport { MeshBuilder, Quaternion, StandardMaterial } from \"@babylonjs/core\";\n\nclass KeyPoint extends NodeItem {\n  ofDict(scene, dict = null, mainView = null) {\n    return KeyPoint.ofDict(scene, dict, mainView);\n  }\n\n  getType = () => KeyPoint.TYPE;\n\n  static TYPE = \"KeyPoint\";\n\n  static ofDict(scene, dict = null, mainView = null) {\n    const name = Maybe.fromNull(dict)\n      .map(x => x.name)\n      .orSome(`KeyPoint${Math.floor(Math.random() * 1e3)}`);\n\n    const mesh = MeshBuilder.CreatePolyhedron(\n      name,\n      { custom: TRIANGULAR_ANTIPRISM, size: KeyPoint.DEFAULT_SIZE },\n      scene\n    );\n    const material = new StandardMaterial(`KeyPointMaterial${name}`, scene);\n    mesh.material = material;\n    mesh.convertToFlatShadedMesh();\n    mesh.rotationQuaternion = Quaternion.Identity();\n\n    const axis = Util3d.referentialBuilder(scene)\n      .isPickable(false)\n      .boxParams({ isVisible: false, size: 0.1 * KeyPoint.DEFAULT_SIZE })\n      .name(`${name}Axis`)\n      .build();\n    axis.parent = mesh;\n\n    NodeItem.mapDict2Mesh(dict, mesh);\n    return new KeyPoint(mesh, dict.keyValueMap);\n  }\n\n  static DEFAULT_SIZE = 0.25;\n}\n\nconst TRIANGULAR_ANTIPRISM = {\n  name: \"Triangular Antiprism (Octahedron)\",\n  category: [\"Antiprism\"],\n  vertex: [\n    [0, 0, 1.414214],\n    [1.414214, 0, 0],\n    [0, 1.414214, 0],\n    [-1.414214, 0, 0],\n    [0, -1.414214, 0],\n    [0, 0, -1.414214]\n  ],\n  face: [\n    [0, 1, 2],\n    [0, 2, 3],\n    [0, 3, 4],\n    [0, 4, 1],\n    [1, 4, 5],\n    [1, 5, 2],\n    [2, 5, 3],\n    [3, 5, 4]\n  ]\n};\n\nexport default KeyPoint;\n","import AssetNodeItem from \"./AssetNodeItem\";\n\nclass Map extends AssetNodeItem {\n  constructor(mesh, size, textureSrc, assetName) {\n    super(mesh, assetName);\n    this.size = size;\n    this.textureSrc = textureSrc;\n  }\n\n  dispose() {\n    super.dispose();\n  }\n\n  toDict() {\n    const dict = super.toDict();\n    dict[\"size\"] = this.size;\n    dict[\"textureSrc\"] = this.textureSrc;\n    return dict;\n  }\n\n  toForm() {\n    const info = this.toDict();\n    const schema = {\n      jsonSchema: {\n        type: \"object\",\n        properties: {\n          oldName: {\n            type: \"string\"\n          },\n          name: {\n            type: \"string\",\n            title: \"Name\"\n          },\n          type: {\n            type: \"string\",\n            title: \"Type\"\n          },\n          assetName: {\n            type: \"string\",\n            title: \"Asset Name\"\n          }\n        }\n      },\n      uiSchema: {\n        type: {\n          \"ui:disabled\": true\n        },\n        assetName: {\n          \"ui:disabled\": true\n        },\n        oldName: {\n          \"ui:widget\": \"hidden\"\n        }\n      },\n      data: {\n        oldName: info.name,\n        name: info.name,\n        type: info.type,\n        assetName: info.assetName\n      }\n    };\n    return schema;\n  }\n\n  ofForm(form) {\n    this.name = form.name;\n    this.mesh.name = form.name;\n    this.keyValueMap = { ...form.annotations };\n  }\n\n  getType = () => Map.TYPE;\n\n  static TYPE = \"Map\";\n}\n\nexport default Map;\n","import AssetNodeItem from \"./AssetNodeItem\";\n\nclass Mesh extends AssetNodeItem {\n  constructor(mesh, assetName, keyValueMap = {}) {\n    super(mesh, assetName, keyValueMap);\n  }\n\n  toDict() {\n    let dict = super.toDict();\n    return dict;\n  }\n\n  getMouseContextActions(mainView) {\n    return super\n      .getMouseContextActions(mainView)\n      .filter(x => x.title === \"Delete\");\n  }\n\n  getType = () => Mesh.TYPE;\n  static TYPE = \"Mesh\";\n}\n\nexport default Mesh;\n","import NodeItem from \"./NodeItem\";\nimport Util3d from \"../Util3d/Util3d\";\nimport { Maybe } from \"monet\";\nimport {\n  Color3,\n  Mesh,\n  Observable,\n  Quaternion,\n  StandardMaterial,\n  Vector3,\n  VertexBuffer,\n  VertexData\n} from \"@babylonjs/core\";\nimport Vec3 from \"../Math/Vec3\";\nimport Constants from \"../Utils/Constants\";\nimport { Animator } from \"../Utils/Animator\";\nimport { Service, ServiceRequest, Ros } from \"roslib\";\nimport { MasterDB } from \"mov-fe-lib-core\";\n\nconst MESSAGES = {\n  failGenerateCurve: \"Fail to generate navigation preview.\"\n};\n\nclass NavigationPreviewItem extends NodeItem {\n  /**\n   *\n   * @param {*} mesh: Mesh\n   * @param {*} poses\n   * @param {*} robotConfig\n   * @param {*} scene\n   * @param {*} mainView\n   */\n  constructor(mesh, poses, robotConfig, scene, mainView) {\n    super(mesh, {});\n    this.poses = poses;\n    this.robotConfig = robotConfig;\n    this.scene = scene;\n    this.mainView = mainView;\n    this.arrowMeshes = this.createArrowMeshes();\n    this.navPath = this.createNavPath();\n  }\n\n  ofDict(scene, dict = null, mainView = null) {\n    return NavigationPreviewItem.ofDict(scene, dict, mainView);\n  }\n\n  dispose() {\n    this.navPath && this.navPath.dispose();\n    this.arrowMeshes.forEach(arrow => arrow.dispose());\n  }\n\n  toDict() {\n    const dict = super.toDict();\n    dict.poses = this.poses;\n    dict.robotConfig = this.robotConfig;\n    return dict;\n  }\n\n  toForm() {\n    const form = super.toForm();\n    delete form.jsonSchema.properties.position;\n    delete form.jsonSchema.properties.rotation;\n    delete form.jsonSchema.properties.color;\n    delete form.jsonSchema.properties.annotations;\n    delete form.uiSchema.position;\n    delete form.uiSchema.rotation;\n    delete form.uiSchema.color;\n    delete form.data.position;\n    delete form.data.rotation;\n    delete form.data.color;\n    delete form.data.annotations;\n    form.jsonSchema.properties.config = {\n      type: \"string\",\n      title: \"Robot Configuration\"\n    };\n    form.uiSchema.config = {\n      \"ui:widget\": \"selectScopeModal\",\n      \"ui:options\": {\n        scopeList: \"Configuration\",\n        name: \"Robot Config\",\n        filter: e => true\n      }\n    };\n    form.data.config = this.robotConfig;\n    return form;\n  }\n\n  ofForm(form) {\n    this.name = form.name;\n    this.mesh.name = form.name;\n    this.robotConfig = form.config;\n  }\n\n  createArrowMeshes() {\n    return this.poses.map((pose, i) => {\n      const beginPos = Vec3.of(pose.position).toBabylon();\n      const theta = 2 * Math.atan2(pose.orientation[3], pose.orientation[0]);\n      const endPos = new Vector3(Math.cos(theta), Math.sin(theta), 0).add(\n        beginPos\n      );\n      const arrowMesh = Util3d.getArrow(\n        this.scene,\n        `${this.name}Pose${i}`,\n        beginPos,\n        endPos,\n        Constants.RADIUS / 6\n      );\n      arrowMesh.parent = this.mesh;\n      arrowMesh.getChildren().forEach(m => {\n        m.material = Util3d.getMaterialFromColor(\n          i % 2 === 0 ? Color3.Red() : Color3.Green()\n        );\n        m.material.freeze();\n        m.observers = new Observable();\n        m.observers.add(this.getArrowObserver(this.mainView));\n        m.onClick = () => {\n          this.mainView.highlightNodesInTree([this.name]);\n          this.mainView.setProperties(this.toForm());\n          setTimeout(() => {\n            this.mainView.highlightMeshesInScene(\n              this.arrowMeshes.flatMap(m => m.getChildren())\n            );\n          });\n        };\n        m.onDel = () => this.mainView.deleteNodeFromTreeUsingName(this.name);\n      });\n      return arrowMesh;\n    });\n  }\n\n  createNavPath() {\n    const navPath = new NavigationPath(this);\n    navPath.play();\n    return navPath;\n  }\n\n  getType = () => NavigationPreviewItem.TYPE;\n\n  static TYPE = \"NavigationPreviewItem\";\n\n  static ofDict(scene, dict = null, mainView = null) {\n    const name = Maybe.fromNull(dict)\n      .map(x => x.name)\n      .orSome(`NavPreview${Math.floor(Math.random() * 1e3)}`);\n\n    const mesh = new Mesh(name, scene);\n    mesh.position = Vector3.Zero();\n    mesh.scaling = Vector3.One();\n    mesh.rotationQuaternion = Quaternion.Identity();\n    mesh.isPickable = false;\n    const navPreviewItem = new NavigationPreviewItem(\n      mesh,\n      dict.poses,\n      dict.robotConfig,\n      scene,\n      mainView\n    );\n    return navPreviewItem;\n  }\n\n  getArrowObserver(mainView) {\n    return ({ updatedPointMesh, is2updateServer, displacement }) => {\n      const v = Vec3.ofBabylon(displacement);\n      const vLocal = Util3d.getLocalCoordFromWorld(this.mesh, v, false);\n      updatedPointMesh.position = updatedPointMesh.position.add(\n        vLocal.scale(-1).toBabylon()\n      );\n      if (is2updateServer) {\n        mainView.setProperties(this.toForm());\n      }\n    };\n  }\n}\n\nclass NavigationPath {\n  constructor(navItem) {\n    this.navItem = navItem;\n    this.scene = navItem.scene;\n    this.mainView = navItem.mainView;\n    this.pathPromise = this.getPathFromService(\n      this.navItem.poses,\n      this.navItem.robotConfig\n    );\n    this.pathPromise.then(({ path }) => {\n      this.pathPoses = path.poses.map(x => x.pose);\n      this.mesh = this.getNavigationPathMesh(this.pathPoses);\n      this.animator = this.getAnimator();\n    });\n  }\n\n  play() {\n    this.pathPromise.then(() => {\n      this.animator.play();\n    });\n  }\n\n  stop() {\n    this.pathPromise.then(() => {\n      this.animator.stop();\n    });\n  }\n\n  dispose() {\n    this.mesh && this.mesh.dispose();\n    this.stop();\n  }\n\n  getAnimator() {\n    const n = this.pathPoses.length;\n    return Animator.builder()\n      .initialState({\n        time: 0,\n        T: new Date().getTime(),\n        indices: [...Array(n)].map((_, i) => i)\n      })\n      .nextState(s => {\n        const { time, T, indices } = s;\n        const indexSpeed = 3;\n        const dt = (new Date().getTime() - T) / 1000;\n        const positions = [...Array(n)];\n        // with circle topology, check modular arithmetic below\n        indices.forEach(\n          (index, i) => (indices[i] = (index + indexSpeed * dt) % n)\n        );\n        positions.forEach((_, i) => {\n          let iPrev = Math.floor(indices[i]);\n          let iNext = Math.ceil(indices[i]);\n          const t = (indices[i] - iPrev) / (iNext - iPrev);\n          if (indices[i] > n - 1) {\n            iPrev = 0;\n            iNext = 1;\n          }\n          positions[i] = Vec3.of([\n            this.pathPoses[iPrev].position.x,\n            this.pathPoses[iPrev].position.y,\n            this.pathPoses[iPrev].position.z\n          ])\n            .scale(1 - t)\n            .add(\n              Vec3.of([\n                this.pathPoses[iNext].position.x,\n                this.pathPoses[iNext].position.y,\n                this.pathPoses[iNext].position.z\n              ]).scale(t)\n            )\n            .toArray();\n        });\n        this.mesh.updateVerticesData(\n          VertexBuffer.PositionKind,\n          positions.flatMap(x => x)\n        );\n        return {\n          time: time + dt,\n          T: new Date().getTime(),\n          indices\n        };\n      })\n      .while(_ => !this.scene.isDisposed)\n      .build();\n  }\n\n  getNavigationPathMesh(pathPoses) {\n    const pointCloudMesh = new Mesh(\n      `cloudPoint${this.navItem.name}`,\n      this.scene\n    );\n    const mat = new StandardMaterial(\n      `cloudPoint${this.navItem.name}Material`,\n      this.scene\n    );\n    mat.emissiveColor = new Color3(1, 1, 1);\n    mat.disableLighting = true;\n    mat.pointsCloud = true;\n    mat.pointSize = 5;\n    pointCloudMesh.material = mat;\n    pointCloudMesh.isPickable = false;\n\n    const vertexData = new VertexData();\n    const points = pathPoses.map(({ position }) => [\n      position.x,\n      position.y,\n      position.z\n    ]);\n    //Assign positions\n    vertexData.positions = points.flatMap(x => x);\n    const colors = new Array(4 * points.length);\n    vertexData.colors = colors.fill(1.0);\n    //Apply vertexData to custom mesh\n    vertexData.applyToMesh(pointCloudMesh, true);\n    pointCloudMesh.parent = this.navItem.mesh;\n    return pointCloudMesh;\n  }\n\n  getPathFromService([startPose, endPose], robotConfig) {\n    const ros = new Ros({\n      url: BRIDE_CONNECTION\n    });\n    const inputMessage = {\n      scene: this.mainView.sceneName,\n      robot_config: this.navItem.robotConfig,\n      initial_pose: rosPoseFromPose(startPose),\n      final_pose: rosPoseFromPose(endPose)\n    };\n\n    return new Promise(res => {\n      // If there is an error on the backend, an 'error' emit will be emitted.\n      ros.on(\"error\", error => {\n        console.log(\"Navigation Service \", error);\n        // fall back to default\n        this.getDefaultPath(inputMessage, res);\n      });\n      // Find out exactly when we made a connection.\n      ros.on(\"connection\", () => {\n        console.log(\"Navigation Service Connection made!\");\n      });\n\n      ros.on(\"close\", () => {\n        console.log(\"Navigation Service Connection closed.\");\n      });\n\n      const navigationService = new Service({\n        ros: ros,\n        name: SERVICE_NAME,\n        serviceType: SERVICE_TYPE\n      });\n      const request = new ServiceRequest(inputMessage);\n      navigationService.callService(\n        request,\n        result => {\n          ros.close();\n          res(result);\n        },\n        error => {\n          // fall back to default\n          this.getDefaultPath(inputMessage, res);\n        }\n      );\n    });\n  }\n\n  getDefaultPath(msg, resolve) {\n    MasterDB.cloudFunction(\n      Constants.NAV_CLOUD_NAME,\n      \"generate_path\",\n      [msg.scene, msg.initial_pose, msg.final_pose, msg.robot_config],\n      data => {\n        console.log(\"Got default path\", data.success);\n        if (data.success) {\n          resolve({ path: data.result });\n        } else {\n          console.log(\"Caught exception in default path\", data.error);\n          this.getPathFromPoses(this.navItem.poses)\n            .then(path => resolve({ path }))\n            .catch(err => {\n              console.log(\"Caught error in getPathFromPoses\", err);\n              this.mainView.showAlert(MESSAGES.failGenerateCurve, \"error\");\n            });\n        }\n      }\n    ).catch(error => {\n      console.log(\"debug couldn't execute default generate path\", error);\n      this.getPathFromPoses(this.navItem.poses)\n        .then(path => resolve({ path }))\n        .catch(err => {\n          console.log(\"Caught error in getPathFromPoses\", err);\n          this.mainView.showAlert(MESSAGES.failGenerateCurve, \"error\");\n        });\n    });\n  }\n\n  getPathFromPoses(poses, samples = 25) {\n    const [start, end] = poses;\n    const startPos = Vec3.of(start.position);\n    const endPos = Vec3.of(end.position);\n    const v = endPos.sub(startPos);\n    const nextPoint = startPos\n      .add(v.scale(0.5))\n      .add(Vec3.of([start.orientation[0], start.orientation[3], 0]).scale(2));\n    const nextNextPoint = endPos\n      .add(v.scale(-0.5))\n      .add(Vec3.of([end.orientation[0], end.orientation[3], 0]).scale(2));\n    const splineCage = [startPos, nextPoint, nextNextPoint, endPos];\n    const path = [...Array(samples)];\n    for (let i = 0; i < samples; i++) {\n      path[i] = polyInterpolation(splineCage, i / (samples - 1)).toArray();\n    }\n    return new Promise(re =>\n      re({\n        poses: path.map(point => ({\n          pose: {\n            position: { x: point[0], y: point[1], z: point[2] },\n            orientation: { x: 0, y: 0, z: 0, w: 1 }\n          }\n        }))\n      })\n    );\n  }\n}\n\n/**\n *\n * @param {*} cage: Array<Vec3>\n * @param {*} t: [0,1] real\n * @returns\n */\nfunction polyInterpolation(cage, t) {\n  if (cage.length === 1) return cage[0];\n  const [, ...tail] = cage;\n  let pairs = zip(cage, tail);\n  pairs.splice(-1, 1);\n  const newCage = pairs.map(([x, y]) => {\n    return lerp(x, y)(t);\n  });\n  return polyInterpolation(newCage, t);\n}\n/**\n *\n * @param {*} x: Vec3\n * @param {*} y: Vec3\n * @returns t: [0,1] real => Vec3\n */\nfunction lerp(x, y) {\n  return t => {\n    return x.scale(1 - t).add(y.scale(t));\n  };\n}\n/**\n *\n * @param {*} a: Array\n * @param {*} b: Array\n * @returns\n */\nfunction zip(a, b) {\n  return a.map((x, i) => [x, b[i]]);\n}\n\nfunction rosPoseFromPose({ position, orientation }) {\n  return {\n    position: {\n      x: position[0],\n      y: position[1],\n      z: position[2]\n    },\n    orientation: {\n      w: orientation[0],\n      x: orientation[1],\n      y: orientation[2],\n      z: orientation[3]\n    }\n  };\n}\n\nconst SERVICE_NAME = \"/generate_path/path_points/in\";\nconst SERVICE_TYPE = \"movai_common/GeneratePath\";\nconst BRIDE_CONNECTION = \"ws://localhost:9090\";\n\nexport default NavigationPreviewItem;\n","import Clipboard from \"../Utils/Clipboard\";\nimport Vec3 from \"../Math/Vec3\";\nimport { Maybe } from \"monet\";\nimport _capitalize from \"lodash/capitalize\";\nimport { Quaternion, Color3, Vector3 } from \"@babylonjs/core\";\nimport AnnotationManager from \"../Utils/AnnotationManager\";\nimport GlobalRef from \"./GlobalRef\";\nimport Constants from \"../Utils/Constants\";\n\nclass NodeItem {\n  constructor(mesh, keyValueMap = {}) {\n    this.name = mesh.name;\n    this.mesh = mesh;\n    this.mesh.getMouseContextActions = this.getMouseContextActions;\n    this.mesh.nodeItem = this;\n    this.keyValueMap = keyValueMap;\n  }\n\n  dispose() {\n    this.delVertex();\n    this.mesh.dispose();\n  }\n\n  toDict() {\n    return {\n      name: this.name,\n      type: this.getType(),\n      position: Vec3.ofBabylon(this.mesh?.position).toArray(),\n      quaternion: Maybe.fromNull(this.mesh?.rotationQuaternion)\n        .map(x => [x.w, x.x, x.y, x.z])\n        .orLazy(() => {\n          const q = Quaternion.RotationYawPitchRoll(\n            this.mesh.rotation.y,\n            this.mesh.rotation.x,\n            this.mesh.rotation.z\n          );\n          return [q.w, q.x, q.y, q.z];\n        }),\n      color: Maybe.fromNull(this.mesh?.material)\n        .flatMap(x =>\n          Maybe.fromNull(x.diffuseColor).map(z => [\n            z.r,\n            z.g,\n            z.b,\n            this.mesh.visibility\n          ])\n        )\n        .orSome([0, 0, 0, 1]),\n      keyValueMap: this.keyValueMap,\n      isVisible: this.mesh.isEnabled()\n    };\n  }\n\n  /**\n   * Generates json based on https://github.com/rjsf-team/react-jsonschema-form\n   */\n  toForm() {\n    const info = this.toDict();\n    const color = new Color3(info.color[0], info.color[1], info.color[2]);\n    const q = new Quaternion(\n      info.quaternion[1],\n      info.quaternion[2],\n      info.quaternion[3],\n      info.quaternion[0]\n    );\n    const euler = q.toEulerAngles();\n\n    const schema = {\n      jsonSchema: {\n        type: \"object\",\n        properties: {\n          oldName: {\n            type: \"string\"\n          },\n          name: {\n            type: \"string\",\n            title: \"Name\"\n          },\n          type: {\n            type: \"string\",\n            title: \"Type\"\n          },\n          position: {\n            type: \"object\",\n            title: \"Position\",\n            properties: {\n              x: {\n                type: \"number\",\n                title: \"x\"\n              },\n              y: {\n                type: \"number\",\n                title: \"y\"\n              },\n              z: {\n                type: \"number\",\n                title: \"z\"\n              }\n            }\n          },\n          rotation: {\n            type: \"object\",\n            title: \"Rotation\",\n            properties: {\n              x: {\n                type: \"number\",\n                title: \"x\"\n              },\n              y: {\n                type: \"number\",\n                title: \"y\"\n              },\n              z: {\n                type: \"number\",\n                title: \"z\"\n              }\n            }\n          },\n          color: {\n            type: \"object\",\n            title: \"Color\",\n            properties: {\n              r: {\n                type: \"number\"\n              },\n              g: {\n                type: \"number\"\n              },\n              b: {\n                type: \"number\"\n              },\n              a: {\n                type: \"number\"\n              }\n            }\n          }\n        }\n      },\n      uiSchema: {\n        type: {\n          \"ui:disabled\": true\n        },\n        color: {\n          \"ui:widget\": \"color\"\n        },\n        oldName: {\n          \"ui:widget\": \"hidden\"\n        },\n        position: {\n          \"ui:widget\": \"collapse\"\n        },\n        rotation: {\n          \"ui:widget\": \"collapse\"\n        }\n      },\n      data: {\n        oldName: info.name,\n        name: info.name,\n        type: info.type,\n        position: {\n          x: info.position[0],\n          y: info.position[1],\n          z: info.position[2]\n        },\n        rotation: {\n          x: euler.x * Constants.RAD2DEG,\n          y: euler.y * Constants.RAD2DEG,\n          z: euler.z * Constants.RAD2DEG\n        },\n        color: {\n          r: color.r,\n          g: color.g,\n          b: color.b,\n          a: this.mesh.visibility\n        }\n      }\n    };\n\n    NodeItem.setAnnotations2Form(schema, this.keyValueMap);\n    return schema;\n  }\n\n  /**\n   * Changes NodeItem based on a form\n   *\n   * Warning: side effect function\n   * @param {*} form\n   */\n  ofForm(form) {\n    this.name = form.name;\n    this.mesh.name = form.name;\n\n    Maybe.fromNull(form?.position).forEach(position => {\n      const pos = [position.x, position.y, position.z].map(Number.parseFloat);\n      this.mesh.position = Vector3.FromArray(pos);\n    });\n    Maybe.fromNull(form?.rotation).forEach(euler => {\n      const angles = [euler.x, euler.y, euler.z]\n        .map(Number.parseFloat)\n        .map(deg => deg * Constants.DEG2RAD);\n      this.mesh.rotationQuaternion = Quaternion.FromEulerAngles(...angles);\n    });\n    if (this.mesh.material) {\n      const color = new Color3(form.color.r, form.color.g, form.color.b);\n      this.mesh.material.diffuseColor = color;\n      this.mesh.material.emissiveColor = color;\n      this.mesh.visibility = form.color.a;\n    }\n    this.keyValueMap = { ...form.annotations };\n  }\n\n  getType = () => NodeItem.TYPE;\n\n  getMouseContextActions = mainView => {\n    return [\n      {\n        title: \"Copy\",\n        onClick: () => Clipboard.copy(this.getCopyFunction())\n      },\n      {\n        title: \"Delete\",\n        onClick: () =>\n          mainView\n            .getNodeFromTree(this.name)\n            .forEach(node => mainView.onDeleteNode(node, false))\n      }\n    ];\n  };\n\n  getCopyFunction(\n    isForceUpdate = true,\n    nameGenerator = old => old + \"_copy\" + Clipboard.getUID()\n  ) {\n    // mousePosFromRoot : Vector3\n    return (mousePosFromRoot, someMainView) =>\n      someMainView.getSceneMemory().map(({ scene }) => {\n        const { item: rootItem } = someMainView.getRootNode();\n        const copyDict = this.toDict();\n        copyDict.name = nameGenerator(copyDict.name);\n        const newPosArray = Vec3.ofBabylon(mousePosFromRoot).toArray();\n        // preserves z-coordinate\n        newPosArray[2] = copyDict.position[2];\n        copyDict.position = newPosArray;\n        const copiedNodeItem = this.ofDict(scene, copyDict, someMainView);\n        const { mesh: copiedMesh } = copiedNodeItem;\n        copiedMesh.parent = rootItem.mesh;\n        someMainView.addNodeItem2Tree(\n          copiedNodeItem,\n          GlobalRef.NAME,\n          true,\n          true,\n          isForceUpdate\n        );\n        return copiedNodeItem;\n      });\n  }\n\n  delVertex() {\n    let delVertex = this.mesh.graphVertex?.delVertex;\n    if (!delVertex) {\n      const childrenWithDelVertex = (this.mesh?._children || [])\n        .filter(childMesh => !!childMesh.graphVertex)\n        .map(childMesh => childMesh.graphVertex.delVertex);\n      delVertex = () => childrenWithDelVertex.forEach(del => del());\n    }\n    delVertex();\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                           Static attributes/methods                                  *\n   *                                                                                      */\n  //========================================================================================\n\n  static TYPE = \"NodeItem\";\n\n  // side-effect function\n  static mapDict2Mesh(dict, mesh) {\n    if (!mesh) throw new Error(\"can't map a null mesh\");\n    Maybe.fromNull(dict).forEach(someDict => {\n      Maybe.fromNull(dict.name).forEach(name => (mesh.name = name));\n      Maybe.fromNull(someDict.position).forEach(\n        position => (mesh.position = Vec3.of(position).toBabylon())\n      );\n      Maybe.fromNull(someDict.quaternion).forEach(quaternion => {\n        const babylonQuaternion = new Quaternion(\n          quaternion[1],\n          quaternion[2],\n          quaternion[3],\n          quaternion[0]\n        );\n        mesh.rotationQuaternion = babylonQuaternion.normalize();\n      });\n      Maybe.fromNull(someDict.color).forEach(color => {\n        const babylonColor = new Color3(color[0], color[1], color[2]);\n        Maybe.fromNull(mesh.material).forEach(material => {\n          Maybe.fromNull(material.diffuseColor).forEach(\n            z => (mesh.material.diffuseColor = babylonColor)\n          );\n          Maybe.fromNull(material.emissiveColor).forEach(\n            z => (mesh.material.emissiveColor = babylonColor)\n          );\n        });\n      });\n    });\n    return mesh;\n  }\n\n  // side effect function\n  static setAnnotations2Form(schema, keyValueMap = {}) {\n    schema.jsonSchema.properties.annotations = {\n      title: \"Annotations\",\n      type: \"object\",\n      properties: {}\n    };\n    schema.uiSchema.annotations = {\n      \"ui:widget\": \"collapse\"\n    };\n    schema.data[\"annotations\"] = { ...keyValueMap };\n    const annotations = AnnotationManager.getAnnotations();\n\n    [\"safety\", \"behaviour\", \"localization\", \"navigation\"].forEach(\n      annotation => {\n        // if (annotations[annotation].labels.length > 0) {\n        schema.jsonSchema.properties.annotations.properties[annotation] = {\n          title: _capitalize(annotation),\n          type: \"string\"\n        };\n        schema.uiSchema.annotations[annotation] = {\n          \"ui:widget\": \"selectScopeModal\",\n          \"ui:options\": {\n            scopeList: \"Annotation\",\n            name: _capitalize(annotation),\n            filter: e => {\n              return (\n                annotations[annotation] &&\n                annotations[annotation].names.includes(e.name)\n              );\n            }\n          }\n        };\n        // }\n      }\n    );\n  }\n\n  static randomId() {\n    return \"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\".replace(/[xy]/g, function (c) {\n      // eslint-disable-next-line no-mixed-operators\n      var r = (Math.random() * 16) | 0,\n        v = c === \"x\" ? r : (r & 0x3) | 0x8;\n      return v.toString(16);\n    });\n  }\n}\n\nexport default NodeItem;\n","import NodeItem from \"./NodeItem\";\nimport Vec3 from \"../Math/Vec3\";\nimport Util3d from \"../Util3d/Util3d\";\nimport React from \"react\";\nimport { Maybe } from \"monet\";\nimport Constants from \"../Utils/Constants\";\nimport {\n  Observable,\n  Color3,\n  MeshBuilder,\n  Quaternion,\n  Vector3,\n  Space\n} from \"@babylonjs/core\";\nimport { UndoManager } from \"mov-fe-lib-core\";\nimport GraphItem from \"./GraphItem\";\n\nconst RADIUS = Constants.RADIUS;\n\nclass Path extends NodeItem {\n  /**\n   * @param {*} mesh\n   * @param {*} localPath: is an array of 3-arrays of numbers of the local coordinates in relation to mesh.position and quaternion\n   * @param {*} keyPoints: are the keyPoints meshes array\n   * @param {*} splinePath: is an array of 3-arrays of numbers of the local coordinates in relation to mesh.position and quaternion\n   * @param {*} mainView: MainView\n   * @param {*} keyValueMap: annotations\n   */\n  constructor(\n    mesh,\n    localPath,\n    keyPoints,\n    splinePath,\n    mainView,\n    weight = 1,\n    keyValueMap = {}\n  ) {\n    super(mesh, keyValueMap);\n    // Array<Vector3> points in relation to its mean\n    this.localPath = localPath;\n    // Array<Meshes> representing key points of the curve\n    this.keyPoints = keyPoints;\n    // spline points from local path\n    this.splinePath = splinePath;\n    this.selectedKeyPointIndex = -1;\n    this.mainView = mainView;\n    this.weight = weight;\n  }\n\n  toDict() {\n    const dict = super.toDict();\n    dict.localPath = this.localPath;\n    dict.splinePath = this.splinePath;\n    dict.weight = this.weight;\n    return dict;\n  }\n\n  toForm() {\n    const schema = super.toForm();\n    if (this.selectedKeyPointIndex >= 0) {\n      schema.jsonSchema.properties[\"selectedKeyPoint\"] = {\n        type: \"object\",\n        title: `KeyPoint ${this.selectedKeyPointIndex}`,\n        properties: {\n          x: {\n            type: \"number\",\n            title: \"x\"\n          },\n          y: {\n            type: \"number\",\n            title: \"y\"\n          },\n          z: {\n            type: \"number\",\n            title: \"z\"\n          }\n        }\n      };\n      schema.uiSchema[\"selectedKeyPoint\"] = {\n        \"ui:widget\": \"collapse\"\n      };\n      schema.uiSchema[\"position\"] = { \"ui:widget\": \"hidden\" };\n      schema.uiSchema[\"rotation\"] = { \"ui:widget\": \"hidden\" };\n      schema.uiSchema[\"color\"] = { \"ui:widget\": \"hidden\" };\n      schema.uiSchema[\"annotations\"] = { \"ui:widget\": \"hidden\" };\n      const selectedMesh = this.keyPoints[this.selectedKeyPointIndex];\n      const position = Util3d.getGlobalCoordinates(\n        selectedMesh,\n        selectedMesh.position\n      ).toArray();\n      schema.data[\"selectedKeyPoint\"] = {\n        x: position[0],\n        y: position[1],\n        z: position[2]\n      };\n\n      return schema;\n    }\n    // re-order attributes\n    const props = { ...schema.jsonSchema.properties };\n    const newSchema = {\n      type: \"object\",\n      properties: {\n        oldName: props.oldName,\n        name: props.name,\n        type: props.type,\n        weight: {\n          type: \"number\",\n          title: \"Weight\"\n        },\n        position: props.position,\n        rotation: props.rotation,\n        color: props.color,\n        annotations: props.annotations\n      }\n    };\n    schema.jsonSchema = newSchema;\n    schema.data[\"weight\"] = this.weight;\n    return schema;\n  }\n\n  ofForm(form) {\n    super.ofForm(form);\n    if (this.selectedKeyPointIndex >= 0) {\n      const selectedKeyPoint = this.keyPoints[this.selectedKeyPointIndex];\n      const formPosition = form.selectedKeyPoint;\n      const newPosInWorldCoordinates = Vector3.FromArray(\n        [formPosition.x, formPosition.y, formPosition.z].map(Number.parseFloat)\n      );\n      const localPos = Util3d.getLocalCoordFromGlobal(\n        selectedKeyPoint,\n        newPosInWorldCoordinates\n      ).toArray();\n      selectedKeyPoint.position = new Vector3(\n        localPos[0],\n        localPos[1],\n        localPos[2]\n      );\n      selectedKeyPoint.observers.notifyObservers({\n        updatedPointMesh: selectedKeyPoint,\n        is2updateServer: false\n      });\n      return;\n    }\n    this.weight = Number(form.weight);\n    this.updatePathEdgeWithForm(this.weight, this.keyValueMap);\n  }\n\n  updatePathEdgeWithForm(weight, annotations) {\n    this.mainView.getGraph().forEach(({ item: graphItem }) => {\n      const { graph } = graphItem;\n      const first = this.keyPoints[0];\n      const last = this.keyPoints[this.keyPoints.length - 1];\n      const edge = [first, last]\n        .filter(v => !!v?.graphVertex?.vertex)\n        .map(v => v.graphVertex.vertex);\n      if (edge.length < 2) return;\n      const edgeIds = edge.map(v => v.id);\n      graph.getEdge(...edgeIds).forEach(({ data: edgeData }) => {\n        edgeData.weight = weight;\n        edgeData.keyValueMap = annotations;\n      });\n      this.mainView.updateNodeInServer(graphItem.name);\n    });\n  }\n\n  ofDict(scene, dict = null, mainView = null) {\n    return Path.ofDict(scene, dict, mainView);\n  }\n\n  getCopyFunction(isForceUpdate, nameGenerator) {\n    // mousePosFromRoot : Vector3\n    return (mousePosFromRoot, someMainView) => {\n      return super\n        .getCopyFunction(isForceUpdate, nameGenerator)(\n          mousePosFromRoot,\n          someMainView\n        )\n        .map(copiedPath => {\n          const kp = copiedPath?.keyPoints;\n          if (kp !== undefined && isPathOnGraph(this)) {\n            Path.updateGraph(someMainView, kp, copiedPath, true);\n          }\n          return copiedPath;\n        });\n    };\n  }\n\n  getType = () => Path.TYPE;\n\n  /**\n   * Import path features\n   * @param {*} pathItem\n   */\n  importFeatures(pathItem = new Path({}, {}, {}, {}, {})) {\n    this.keyValueMap = pathItem.keyValueMap;\n    this.weight = pathItem.weight;\n  }\n\n  static TYPE = \"Path\";\n\n  static ofDict(scene, dict = null, mainView = null) {\n    if (!dict || !mainView)\n      throw new Error(\"null dictionary describing path or null mainView\");\n\n    const name = dict.name;\n    const curve = dict.localPath.map(z => Vec3.of(z).toBabylon());\n    const spline = Util3d.getSplineFromCurve(curve);\n    const { points } = spline;\n    let mesh = null;\n    //hack for creating 1 point curves\n    if (points.length === 1) {\n      mesh = MeshBuilder.CreateLines(\n        name,\n        { points: points, updatable: true },\n        scene\n      );\n    } else {\n      mesh = Util3d.createTubeFromPoints(\n        scene,\n        points,\n        Color3.Gray(),\n        RADIUS / 8,\n        name\n      );\n    }\n    mesh.position = Vec3.of(dict.position).toBabylon();\n    mesh.material = Util3d.getMaterialFromColor(\n      Color3.FromArray(dict.color),\n      scene,\n      `PathMaterial${name}`\n    );\n    mesh.rotationQuaternion = Maybe.fromNull(dict.quaternion)\n      .map(quaternion =>\n        new Quaternion(\n          quaternion[1],\n          quaternion[2],\n          quaternion[3],\n          quaternion[0]\n        ).normalize()\n      )\n      .orSome(Quaternion.Identity());\n    const splinePath = Util3d.splineObj2redis(spline);\n    const keyPoints = createPlaceHolderKeyPoints(\n      scene,\n      { ...dict, mesh, splinePath },\n      mainView\n    );\n    const path2return = new Path(\n      mesh,\n      curve.map(point => [point.x, point.y, point.z]),\n      keyPoints,\n      splinePath,\n      mainView,\n      dict.weight,\n      dict.keyValueMap\n    );\n    mesh.onClick = getMeshOnClick(mainView, path2return);\n    mesh.observers = new Observable();\n    mesh.observers.add(getMeshObserver(keyPoints));\n    return path2return;\n  }\n\n  /**\n   * Create new mesh from old, has side effects\n   *\n   * @param {*} newPoints: Vector3\n   * @param {*} scene: Scene\n   * @param {*} item: PathItem\n   * @param {*} mainView: MainView\n   * @param {*} keyPointUpdateFunction: (scene, mainView, mesh, item) => Array<Mesh>\n   */\n  static createNewMeshFromOldUsingNewPoints(\n    newPoints,\n    scene,\n    item,\n    mainView,\n    keyPointUpdateFunction = defaultKeyPointUpdate\n  ) {\n    const { mesh: oldMesh } = item;\n    const average = Util3d.pointAverage(newPoints);\n    newPoints = newPoints.map(x => x.subtract(average));\n\n    const spline = Util3d.getSplineFromCurve(newPoints);\n    const newMesh = Util3d.createTubeFromPoints(\n      scene,\n      spline.points,\n      Color3.Gray(),\n      RADIUS / 8,\n      oldMesh.name\n    );\n\n    // average in parent coord\n    const rotMat3 = Util3d.getRotationMatrix(oldMesh);\n    const scaleVec3 = Vec3.ofBabylon(oldMesh.scaling);\n    const averageInParentCoord = rotMat3\n      .prodVec(Vec3.ofBabylon(average).mul(scaleVec3))\n      .toBabylon();\n\n    newMesh.parent = oldMesh.parent;\n    newMesh.rotationQuaternion = oldMesh.rotationQuaternion;\n    newMesh.position = averageInParentCoord.add(oldMesh.position);\n\n    newMesh.material = oldMesh.material;\n    newMesh.visibility = oldMesh.visibility;\n    newMesh.onClick = oldMesh.onClick;\n    newMesh.getMouseContextActions = oldMesh.getMouseContextActions;\n    newMesh.nodeItem = oldMesh.nodeItem;\n    newMesh.observers = oldMesh.observers;\n    item.localPath = newPoints.map(x => Vec3.ofBabylon(x).toArray());\n    item.splinePath = Util3d.splineObj2redis(spline);\n    item.mesh = newMesh;\n    const oldKeyPoints = [...item.keyPoints];\n    item.keyPoints = keyPointUpdateFunction(scene, mainView, oldMesh, item);\n    // update children\n    const childrenCopy = [...oldMesh._children];\n    childrenCopy\n      .filter(c => mainView.getNodeFromTree(c.name).isJust())\n      .forEach(c => {\n        c.parent = item.mesh;\n      });\n    // update observer that triggers keypoints observers\n    item.mesh.observers.clear();\n    item.mesh.observers.add(getMeshObserver(item.keyPoints));\n\n    Path.updateGraph(\n      mainView,\n      oldKeyPoints,\n      item,\n      oldKeyPoints.length !== item.keyPoints.length\n    );\n    oldMesh.dispose();\n    return item;\n  }\n\n  static deleteKeyPoint(scene, keyPointMesh, mainView) {\n    const index = keyPointMesh.index;\n    const name = keyPointMesh.parent.name;\n    mainView.getNodeFromTree(name).forEach(({ item }) => {\n      const { mesh } = item;\n      const copyPosition = { ...mesh.position };\n      let newPoints = item.localPath.map(x => Vec3.of(x).toBabylon());\n      mainView\n        .getUndoManager()\n        .doIt(\n          Path.getUndoDeleteKeyPoint(\n            name,\n            index,\n            copyPosition,\n            newPoints,\n            scene,\n            item,\n            mainView\n          )\n        );\n    });\n  }\n\n  static getUndoDeleteKeyPoint(\n    name,\n    index,\n    copyPosition,\n    newPoints,\n    scene,\n    item,\n    mainView\n  ) {\n    return UndoManager.actionBuilder()\n      .doAction(() => {\n        const copyPoints = [...newPoints];\n        copyPoints.splice(index, 1);\n        Path.createNewMeshFromOldUsingNewPoints(\n          copyPoints,\n          scene,\n          item,\n          mainView,\n          Path.onAddNewPointKeyPointUpdate\n        );\n        mainView.updateNodeInServer(name);\n      })\n      .undoAction(({ is2UpdateInServer = true }) => {\n        const copyPoints = [...newPoints];\n        item.mesh.position = copyPosition;\n        Path.createNewMeshFromOldUsingNewPoints(\n          copyPoints,\n          scene,\n          item,\n          mainView,\n          Path.onAddNewPointKeyPointUpdate\n        );\n        if (is2UpdateInServer) mainView.updateNodeInServer(name);\n      })\n      .build();\n  }\n\n  static onAddNewPointKeyPointUpdate(scene, mainView, oldMesh, item) {\n    // used when new keypoint is added\n    const keypoints = createPlaceHolderKeyPoints(scene, item, mainView);\n    return keypoints;\n  }\n\n  /**\n   *\n   * @param {*} scene\n   * @param {*} keyPointMesh\n   * @param {*} curveMesh\n   * @param {*} mainView\n   * @param {*} orientation: it belongs to the set {-1,1}, represents orientation\n   */\n  static addKeyPointInBetween(scene, keyPointMesh, mainView, orientation) {\n    const index = keyPointMesh.index;\n    const name = keyPointMesh.parent.name;\n    mainView.getNodeFromTree(name).forEach(({ item }) => {\n      const points = item.localPath.map(x => Vec3.of(x).toBabylon());\n      const copyPosition = { ...item.mesh.position };\n      mainView\n        .getUndoManager()\n        .doIt(\n          Path.getUndoAddKeyPointInBetween(\n            name,\n            index,\n            orientation,\n            item,\n            points,\n            copyPosition,\n            scene,\n            mainView\n          )\n        );\n    });\n  }\n\n  static getUndoAddKeyPointInBetween(\n    name,\n    index,\n    orientation,\n    item,\n    points,\n    copyPosition,\n    scene,\n    mainView\n  ) {\n    return UndoManager.actionBuilder()\n      .doAction(() => {\n        const nextIndex = index + orientation;\n        const numberOfPoints = item.localPath.length;\n        let newPoints = [];\n        const oldPoints = [...points];\n        if (nextIndex < 0) {\n          newPoints = [\n            oldPoints[0].scale(3).subtract(oldPoints[1]).scale(0.5)\n          ].concat(oldPoints);\n        } else if (nextIndex > numberOfPoints - 1) {\n          newPoints = oldPoints.concat([\n            oldPoints[numberOfPoints - 1]\n              .scale(3)\n              .subtract(oldPoints[numberOfPoints - 2])\n              .scale(0.5)\n          ]);\n        } else {\n          // TODO: consider doing using slice\n          const specialIndex = index + Math.max(0, orientation);\n          for (let i = 0; i < specialIndex; i++) {\n            newPoints.push(oldPoints[i]);\n          }\n          newPoints.push(oldPoints[nextIndex].add(oldPoints[index]).scale(0.5));\n          for (let i = specialIndex; i < numberOfPoints; i++) {\n            newPoints.push(oldPoints[i]);\n          }\n        }\n\n        Path.createNewMeshFromOldUsingNewPoints(\n          newPoints,\n          scene,\n          item,\n          mainView,\n          Path.onAddNewPointKeyPointUpdate\n        );\n\n        mainView.updateNodeInServer(name);\n      })\n      .undoAction(({ is2UpdateInServer = true }) => {\n        const copyPoints = [...points];\n        item.mesh.position = copyPosition;\n        Path.createNewMeshFromOldUsingNewPoints(\n          copyPoints,\n          scene,\n          item,\n          mainView,\n          Path.onAddNewPointKeyPointUpdate\n        );\n        if (is2UpdateInServer) mainView.updateNodeInServer(name);\n      })\n      .build();\n  }\n\n  /**\n   *\n   * @param {*} mainView: MainView\n   * @param {*} oldKpMeshes: Mesh\n   * @param {*} pathItem: PathItem\n   * @param {*} isTopologyChange: boolean, vertex added or deleted from curve\n   */\n  static updateGraph(mainView, oldKpMeshes, pathItem, isTopologyChange) {\n    if (!isTopologyChange) return;\n    mainView.getGraph().forEach(({ item: graph }) => {\n      const keyPoints = pathItem.keyPoints;\n      const edgeMeshes = [keyPoints[0], keyPoints[keyPoints.length - 1]];\n      const firstLastKpNeighborEdges = [];\n      const firstLastOldKp = [\n        oldKpMeshes[0],\n        oldKpMeshes[oldKpMeshes.length - 1]\n      ];\n      graph.getEdge(...firstLastOldKp).forEach(oldEdge => {\n        // get keypoint neighbors edges, besides the edge of the path itself\n        firstLastOldKp.forEach(kp => {\n          const edges = [];\n          graph\n            .getNeighbors(kp)\n            .filter(v => !graph.doMeshesBelong2SamePath(kp, v.mesh))\n            .forEach(neigh => {\n              edges.push({\n                edge: graph.getEdge(kp, neigh.mesh),\n                vertex: neigh\n              });\n            });\n          firstLastKpNeighborEdges.push(edges);\n        });\n        // remove old path vertices\n        firstLastOldKp.forEach(vp => graph.delVertexFromMesh(vp));\n        // add new path edge\n        graph.addEdge(...edgeMeshes);\n        graph.getEdge(...edgeMeshes).forEach(edge => {\n          edge.importFeatures(oldEdge);\n        });\n        // add old neighbors to path endpoints\n        firstLastKpNeighborEdges.forEach((neighborEdges, i) => {\n          neighborEdges.forEach(edgeVertexObj => {\n            graph.addEdge(edgeMeshes[i], edgeVertexObj.vertex.mesh);\n            graph\n              .getEdge(edgeMeshes[i], edgeVertexObj.vertex.mesh)\n              .forEach(edge =>\n                edgeVertexObj.edge.forEach(oldNeighEdge => {\n                  edge.importFeatures(oldNeighEdge);\n                })\n              );\n          });\n        });\n        mainView.updateNodeInServer(graph.name);\n      });\n    });\n  }\n\n  static isKeyPointMesh(mesh, mainView) {\n    return (\n      Number.isInteger(mesh.index) &&\n      mainView\n        .getNodeFromTree(mesh.parent.name)\n        .filter(({ item }) => item.getType() === Path.TYPE)\n        .orSome(false)\n    );\n  }\n\n  /**\n   *\n   * @param {*} left: keypoint mesh\n   * @param {*} right: keypoint mesh\n   * @param {*} mainView\n   */\n  static areKeyPointsCompatible(left, right, mainView) {\n    return mainView\n      .getNodeFromTree(left.parent.name)\n      .flatMap(({ item: leftPath }) =>\n        mainView\n          .getNodeFromTree(right.parent.name)\n          .map(({ item: rightPath }) => {\n            let i = left.index;\n            let j = right.index;\n            const n = leftPath.localPath.length;\n            const m = rightPath.localPath.length;\n            // keypoint must be a boundary\n            if (!((i === 0 || i === n - 1) && (j === 0 || j === m - 1)))\n              return false;\n            i = i === 0 ? 1 : -1;\n            j = j === 0 ? 1 : -1;\n            // must preserve orientation\n            if (i * j > 0) return false;\n            return true;\n          })\n      )\n      .orSome(false);\n  }\n  /**\n   * Merge simple paths, function\n   * Not commutative action\n   * @param {*} leftPath\n   * @param {*} rightPath\n   * @param {*} mergeName\n   * @param {*} mainView\n   */\n  static mergePaths(leftPathName, rightPathName, mergeName, mainView) {\n    mainView.getNodeFromTree(leftPathName).forEach(({ item: leftPath }) => {\n      mainView.getNodeFromTree(rightPathName).forEach(({ item: rightPath }) => {\n        const parent = leftPath.mesh.parent;\n        const leftChildren = leftPath.mesh._children.filter(\n          kp => kp.index === undefined\n        );\n        const rightChildren = rightPath.mesh._children.filter(\n          kp => kp.index === undefined\n        );\n        const leftDict = leftPath.toDict();\n        const rightPointsInLeftCoord = rightPath.keyPoints\n          .splice(1)\n          .map(kp =>\n            Util3d.getLocalCoordFromWorld(\n              { parent: leftPath.mesh },\n              Vec3.ofBabylon(kp.absolutePosition)\n            )\n          );\n        leftDict.name = mergeName;\n        // concat new path\n        leftDict.localPath = leftDict.localPath.concat(\n          rightPointsInLeftCoord.map(kp => kp.toArray())\n        );\n        const average = Util3d.pointAverageVec3(\n          leftDict.localPath.map(x => Vec3.of(x))\n        );\n\n        // center curve\n        leftDict.localPath = leftDict.localPath.map(x =>\n          Vec3.of(x).sub(average).toArray()\n        );\n        mainView.getSceneMemory().forEach(({ scene }) => {\n          const newPath = Path.ofDict(scene, leftDict, mainView);\n          newPath.mesh.parent = parent;\n          newPath.mesh.translate(average.toBabylon(), 1, Space.LOCAL);\n          //import default features\n          newPath.importFeatures();\n          mainView.addNodeItem2Tree(newPath, parent.name);\n          Path.addEdgesInKeyPoints(newPath.keyPoints, scene, mainView);\n          leftChildren.forEach(child => {\n            mainView.getNodeFromTree(child.name).forEach(({ item }) => {\n              mainView.updateNodeItemInTree(item, newPath.name);\n              const newChildPos = Util3d.getLocalCoordFromWorld(\n                { parent: newPath.mesh },\n                Vec3.ofBabylon(child.absolutePosition)\n              );\n              child.position = newChildPos.toBabylon();\n              child.parent = newPath.mesh;\n            });\n          });\n          rightChildren.forEach(child => {\n            mainView.getNodeFromTree(child.name).forEach(({ item }) => {\n              mainView.updateNodeItemInTree(item, newPath.name);\n              const newChildPos = Util3d.getLocalCoordFromWorld(\n                { parent: newPath.mesh },\n                Vec3.ofBabylon(child.absolutePosition)\n              );\n              child.position = newChildPos.toBabylon();\n              child.parent = newPath.mesh;\n            });\n          });\n          mainView.deleteNodeFromTreeUsingName(leftPath.name);\n          mainView.deleteNodeFromTreeUsingName(rightPath.name);\n        });\n      });\n    });\n  }\n\n  static unMergePaths(oldPaths, mergeName, mainView, is2UpdateInServer = true) {\n    oldPaths.forEach(path => {\n      mainView.getSceneMemory().forEach(({ scene }) => {\n        const pathItem = Path.ofDict(scene, path.dict, mainView);\n        pathItem.mesh.parent = path.parent;\n        mainView.addNodeItem2Tree(\n          pathItem,\n          path.parent.name,\n          is2UpdateInServer\n        );\n        Path.addEdgesInKeyPoints(\n          pathItem.keyPoints,\n          scene,\n          mainView,\n          is2UpdateInServer\n        );\n        path.children.forEach(child => {\n          mainView.getNodeFromTree(child.name).forEach(({ item }) => {\n            mainView.updateNodeItemInTree(\n              item,\n              pathItem.name,\n              is2UpdateInServer\n            );\n            const newChildPos = Util3d.getLocalCoordFromWorld(\n              { parent: pathItem.mesh },\n              Vec3.ofBabylon(child.absolutePosition)\n            );\n            child.position = newChildPos.toBabylon();\n            child.parent = pathItem.mesh;\n          });\n        });\n      });\n    });\n    mainView.deleteNodeFromTreeUsingName(mergeName, is2UpdateInServer);\n  }\n\n  static addEdgesInKeyPoints(\n    keyPointMeshes,\n    scene,\n    mainView,\n    is2UpdateInServer = true\n  ) {\n    GraphItem.createGraphItemIfNone(scene, mainView);\n    mainView.getGraph().forEach(({ item: graph }) => {\n      const edgeMeshes = [\n        keyPointMeshes[0],\n        keyPointMeshes[keyPointMeshes.length - 1]\n      ];\n      graph.addEdge(...edgeMeshes);\n      if (is2UpdateInServer) mainView.updateNodeInServer(graph.name);\n    });\n  }\n}\n\nexport default Path;\n\nconst getMeshOnClick = (mainView, nodeItem) => () => {\n  mainView.closeContextDial();\n  mainView\n    .getNodeFromTree(nodeItem.name)\n    .forEach(node => (node.item.selectedKeyPointIndex = -1));\n};\n\nconst getMeshObserver =\n  keypoints =>\n  ({ updatedPointMesh, is2updateServer, displacement }) => {\n    keypoints.forEach(k => {\n      if (!!k.graphVertex) {\n        k.graphVertex.vertexObs({\n          updatedPointMesh: k,\n          is2updateServer,\n          displacement\n        });\n      }\n    });\n  };\n\nfunction defaultKeyPointUpdate(scene, mainView, oldMesh, item) {\n  // used when key point is updated\n  const childrenCopy = [...oldMesh._children];\n  const spline = item.splinePath.map(z => new Vector3(z[0], z[1], 0));\n  childrenCopy.forEach(c => {\n    c.parent = item.mesh;\n  });\n  return item.keyPoints.map((k, i) => {\n    k.index = i;\n    k.name = `${oldMesh.name}keyPointSpline${i}`;\n    k.position = Vec3.of(item.localPath[i]).toBabylon();\n    k.rotationQuaternion = Quaternion.Identity();\n    if (!!oldMesh.graphVertex) k.graphVertex = oldMesh.graphVertex;\n    if (i > 0 && i < item.keyPoints.length - 1) {\n      k._children.forEach(kChild => kChild.dispose());\n      const c = getConeMesh(\n        scene,\n        k.material.diffuseColor,\n        item.mesh,\n        i,\n        spline,\n        k.position\n      )();\n      c.parent = k;\n    }\n    return k;\n  });\n}\n\nconst getKeyPointObserverFunction = (scene, mainView) => {\n  return ({ updatedPointMesh, is2updateServer, displacement }) => {\n    if (!updatedPointMesh.parent) return;\n    mainView\n      .getNodeFromTree(updatedPointMesh.parent.name)\n      .forEach(({ item }) => {\n        const { index } = updatedPointMesh;\n        const { mesh } = item;\n        let newPoints = item.localPath.map(x => Vec3.of(x).toBabylon());\n        newPoints[index] = updatedPointMesh.position;\n        Path.createNewMeshFromOldUsingNewPoints(\n          newPoints,\n          scene,\n          item,\n          mainView\n        );\n        if (index > 0 && index < newPoints.length - 1) {\n          // we know by construction that this keyPoint has children\n          mainView.highlightMeshesInScene([item.keyPoints[index]._children[0]]);\n        }\n        if (is2updateServer) {\n          mainView.updateNodeInServer(mesh.name);\n          mainView.setProperties(item.toForm());\n        }\n      });\n  };\n};\n\nconst getKeyPointActions = (scene, keyPointMesh, mainView) => {\n  const actions = [];\n\n  mainView.getNodeFromTree(keyPointMesh.parent.name).forEach(pathTreeNode => {\n    const item = pathTreeNode.item;\n    const curve = item.localPath;\n\n    if (curve.length !== 2) {\n      actions.push({\n        icon: props => <i className=\"fas fa-trash\" {...props}></i>,\n        action: parentView => {\n          Path.deleteKeyPoint(scene, keyPointMesh, parentView);\n          parentView.closeContextDial();\n        },\n        name: \"Delete node [DEL]\"\n      });\n    }\n\n    actions.push({\n      icon: props => <i className=\"fas fa-less-than\" {...props}></i>,\n      action: parentView => {\n        Path.addKeyPointInBetween(scene, keyPointMesh, parentView, -1);\n        parentView.closeContextDial();\n      },\n      name: \"Add previous\"\n    });\n\n    actions.push({\n      icon: props => <i className=\"fas fa-greater-than\" {...props}></i>,\n      action: parentView => {\n        Path.addKeyPointInBetween(scene, keyPointMesh, parentView, 1);\n        parentView.closeContextDial();\n      },\n      name: \"Add next\"\n    });\n  });\n\n  return actions;\n};\n\nconst createPlaceHolderKeyPoints = (scene, pseudoItem, mainView) => {\n  const color = new Color3(0.25, 0.25, 0.25);\n  const keyPoints = [];\n  const curve = pseudoItem.localPath.map(z => Vec3.of(z).toBabylon());\n  const spline = pseudoItem.splinePath.map(z => new Vector3(z[0], z[1], 0));\n  const curveMesh = pseudoItem.mesh;\n  curve.forEach((p, i) => {\n    const sphere = getSphereMesh(scene, color, curveMesh, i);\n    const cone = () => {\n      const c = getConeMesh(scene, color, curveMesh, i, spline, p)();\n      const s = getSphereMesh(scene, color, curveMesh, i)();\n      s.visibility = 0.1;\n      c.parent = s;\n      return s;\n    };\n\n    const keyPoint = i === 0 || i === curve.length - 1 ? sphere() : cone();\n    keyPoint.parent = curveMesh;\n    keyPoint.position = p;\n    keyPoint.index = i;\n    keyPoint.observers = new Observable();\n\n    keyPoints.push(keyPoint);\n\n    keyPoint.observers.add(getKeyPointObserverFunction(scene, mainView));\n  });\n\n  keyPoints.forEach(kp => {\n    kp.onClick = () => {\n      mainView.setContextActions(getKeyPointActions(scene, kp, mainView));\n      mainView.getNodeFromTree(kp.parent.name).forEach(node => {\n        node.item.selectedKeyPointIndex = kp.index;\n        mainView.setProperties(node.item.toForm());\n      });\n    };\n    kp.getMouseContextActions = getKpMouseContextActions(\n      scene,\n      kp,\n      pseudoItem.name\n    );\n  });\n  return keyPoints;\n};\n\nfunction getKpMouseContextActions(scene, kp, pathName) {\n  return mainView => {\n    const actions = [];\n    mainView.getNodeFromTree(pathName).forEach(({ item: pathItem }) => {\n      const n = pathItem.localPath.length;\n      if (n <= 2) {\n        return;\n      }\n      if (kp.index > 0 && kp.index < n - 1) {\n        actions.push({\n          title: \"Split curve\",\n          onClick: () => {\n            mainView.getUndoManager().doIt(\n              UndoManager.actionBuilder()\n                .doAction(() => {\n                  splitCurve(mainView, scene, kp, pathItem.name);\n                })\n                .undoAction(({ is2UpdateInServer = true }) => {\n                  unSplitCurve(mainView, scene, pathItem, is2UpdateInServer);\n                })\n                .build()\n            );\n          }\n        });\n      }\n    });\n    actions.push({\n      title: \"Delete point\",\n      onClick: () => {\n        Path.deleteKeyPoint(scene, kp, mainView);\n      }\n    });\n    return actions;\n  };\n}\n\nfunction splitCurve(mainView, scene, kp, pathName) {\n  // TODO: very similar to unSplitCurve\n  mainView.getGraph().forEach(({ item: graph }) => {\n    mainView.getNodeFromTree(pathName).forEach(({ item }) => {\n      const edgesByCurveBoundary = [[], []];\n      const oldPath = item.localPath;\n      const oldCenter = Vec3.ofBabylon(item.mesh.position);\n      const pathParent = item?.mesh.parent;\n      // creating split path positions\n      const splitAtIndex = kp.index;\n      const splitPath = [[], []];\n      oldPath.forEach((point, i) => {\n        if (i <= splitAtIndex) {\n          splitPath[0].push(point);\n        } else {\n          if (i === splitAtIndex + 1) splitPath[1].push(oldPath[splitAtIndex]);\n          splitPath[1].push(point);\n        }\n      });\n      // retrieve edges from path boundary\n      const keyPoints = item.keyPoints;\n      const boundary = [keyPoints[0], keyPoints[keyPoints.length - 1]];\n      boundary.forEach((keyPoint, i) => {\n        graph\n          .getNeighbors(keyPoint)\n          .filter(v => !graph.doMeshesBelong2SamePath(keyPoint, v.mesh))\n          .forEach(neigh => {\n            edgesByCurveBoundary[i].push({\n              edge: graph.getEdge(keyPoint, neigh.mesh),\n              vertex: neigh\n            });\n          });\n      });\n      // delete boundary vertex from graph\n      boundary.forEach(keyPoint => {\n        graph.delVertexFromMesh(keyPoint);\n      });\n      // remove old path\n      mainView.deleteNodeFromTreeUsingName(pathName);\n      // create new paths\n      splitPath.forEach((localPath, i) => {\n        // set props of new paths from old path\n        const middlePoint = Util3d.pointAverage(\n          localPath.map(p => Vec3.of(p).toBabylon())\n        );\n        const centeredCurve = localPath.map(v =>\n          Vec3.of(v).sub(Vec3.ofBabylon(middlePoint)).toBabylon()\n        );\n        // set colorArray\n        const colorArray = [];\n        item.mesh.material.diffuseColor.toArray(colorArray);\n        // set quaternion\n        const quaternion =\n          item.mesh.rotationQuaternion.clone() || Quaternion.Identity();\n        const quaternionArray = [\n          quaternion.w,\n          quaternion.x,\n          quaternion.y,\n          quaternion.z\n        ];\n        const newPath = Path.ofDict(\n          scene,\n          {\n            name: i === 0 ? pathName : `${pathName}_split${numberOfSplits++}`,\n            position: oldCenter.toArray(),\n            quaternion: quaternionArray,\n            color: colorArray,\n            localPath: centeredCurve.map(z => Vec3.ofBabylon(z).toArray())\n          },\n          mainView\n        );\n        newPath.mesh.translate(middlePoint, 1, Space.LOCAL);\n        newPath.mesh.parent = pathParent;\n        newPath.importFeatures(item);\n        mainView.addNodeItem2Tree(newPath, pathParent.name);\n        // add edge of new path\n        const newKeyPoints = newPath.keyPoints;\n        const newEdge = [\n          newKeyPoints[0],\n          newKeyPoints[newKeyPoints.length - 1]\n        ];\n        graph.addEdge(...newEdge);\n        graph.getEdge(...newEdge).forEach(edge => {\n          edge.importFeatures(newPath);\n        });\n        // add old edges to the new paths\n        edgesByCurveBoundary[i].forEach(edgeVertexObj => {\n          graph.addEdge(newEdge[i], edgeVertexObj.vertex.mesh);\n          graph.getEdge(newEdge[i], edgeVertexObj.vertex.mesh).forEach(edge => {\n            edgeVertexObj.edge.forEach(oldNeighEdge => {\n              edge.importFeatures(oldNeighEdge);\n            });\n          });\n        });\n      });\n      mainView.updateNodeInServer(graph.name);\n    });\n  });\n}\n\nfunction unSplitCurve(mainView, scene, oldPathItem, is2UpdateInServer = true) {\n  mainView.getGraph().forEach(({ item: graph }) => {\n    const oldPathName = oldPathItem.name;\n    const oldPathNameSplit = `${oldPathName}_split${--numberOfSplits}`;\n    mainView.getNodeFromTree(oldPathName).forEach(({ item: leftSplit }) => {\n      mainView\n        .getNodeFromTree(oldPathNameSplit)\n        .forEach(({ item: rightSplit }) => {\n          const pathParent = leftSplit.mesh.parent;\n          const edgesByCurveBoundary = [[], []];\n          // retrieve edges from split paths\n          const boundary = [\n            leftSplit.keyPoints[0],\n            rightSplit.keyPoints[rightSplit.keyPoints.length - 1]\n          ];\n          boundary.forEach((keyPoint, i) => {\n            graph\n              .getNeighbors(keyPoint)\n              .filter(v => !graph.doMeshesBelong2SamePath(keyPoint, v.mesh))\n              .forEach(neigh => {\n                edgesByCurveBoundary[i].push({\n                  edge: graph.getEdge(keyPoint, neigh.mesh),\n                  vertex: neigh\n                });\n              });\n          });\n          // delete graph vertices from split path\n          // delete boundary vertex from graph\n          boundary.forEach(keyPoint => {\n            graph.delVertexFromMesh(keyPoint);\n          });\n          // remove split paths\n          mainView.deleteNodeFromTreeUsingName(oldPathName, is2UpdateInServer);\n          mainView.deleteNodeFromTreeUsingName(\n            oldPathNameSplit,\n            is2UpdateInServer\n          );\n          // create oldPathItem\n          // set colorArray\n          const colorArray = [];\n          oldPathItem.mesh.material.diffuseColor.toArray(colorArray);\n          const newPath = Path.ofDict(\n            scene,\n            {\n              name: oldPathName,\n              position: Vec3.ofBabylon(oldPathItem.mesh.position).toArray(),\n              color: colorArray,\n              localPath: oldPathItem.localPath\n            },\n            mainView\n          );\n          newPath.mesh.parent = pathParent;\n          newPath.importFeatures(oldPathItem);\n          mainView.addNodeItem2Tree(\n            newPath,\n            pathParent.name,\n            is2UpdateInServer\n          );\n          // add oldPathItem path edge\n          const newKeyPoints = newPath.keyPoints;\n          const newEdge = [\n            newKeyPoints[0],\n            newKeyPoints[newKeyPoints.length - 1]\n          ];\n          graph.addEdge(...newEdge);\n          graph.getEdge(...newEdge).forEach(edge => {\n            edge.importFeatures(newPath);\n          });\n          // add boundary edges of the split\n          edgesByCurveBoundary.forEach((edges, i) => {\n            edges.forEach(edgeVertexObj => {\n              graph.addEdge(newEdge[i], edgeVertexObj.vertex.mesh);\n              graph\n                .getEdge(newEdge[i], edgeVertexObj.vertex.mesh)\n                .forEach(edge => {\n                  edgeVertexObj.edge.forEach(oldNeighEdge => {\n                    edge.importFeatures(oldNeighEdge);\n                  });\n                });\n            });\n          });\n          if (is2UpdateInServer) mainView.updateNodeInServer(graph.name);\n        });\n    });\n  });\n}\n\nfunction getConeMesh(scene, color, curveMesh, i, spline, p) {\n  return () => {\n    const index = spline\n      .map(z => p.subtract(z).length())\n      .reduce((e, x, i) => (e.value < x ? e : { value: x, index: i }), {\n        value: Number.MAX_VALUE,\n        index: -1\n      }).index;\n    const nextSplinePoint = spline[index + 1]\n      ? spline[index + 1]\n      : spline[index];\n    const currentSplinePoint = spline[index];\n    const u = nextSplinePoint\n      .subtract(currentSplinePoint)\n      .normalize()\n      .scale(RADIUS);\n    const c = Util3d.createOrientedCone(\n      scene,\n      u,\n      color,\n      `${curveMesh.name}keyPointCone${i}`,\n      false\n    );\n    return c;\n  };\n}\n\nfunction getSphereMesh(scene, color, curveMesh, i) {\n  return () =>\n    Util3d.createSphere(\n      scene,\n      color,\n      RADIUS,\n      `${curveMesh.name}keyPointSpline${i}`,\n      true\n    );\n}\n\nfunction isPathOnGraph(pathItem) {\n  return [\n    pathItem.keyPoints[0]?.graphVertex,\n    pathItem.keyPoints[pathItem.keyPoints.length - 1]?.graphVertex\n  ].every(v => !!v);\n}\n\nlet numberOfSplits = 0;\n","import NodeItem from \"./NodeItem\";\nimport { Mesh, StandardMaterial, Color3, VertexData } from \"@babylonjs/core\";\nimport { Maybe } from \"monet\";\nimport { MasterDB, Utils } from \"mov-fe-lib-core\";\n\nconst { ofNull } = Utils;\n\nclass PointCloud extends NodeItem {\n  /**\n   *\n   * @param {*} mesh\n   * @param {*} robot: {name: string, id: string} representing a robot\n   */\n  constructor(mesh, robot) {\n    super(mesh);\n    this.robot = robot;\n    this.pointCloudSubscribe();\n  }\n\n  pointCloudSubscribe() {\n    MasterDB.subscribe(\n      {\n        Scope: \"Robot\",\n        Name: this.robot.id,\n        Parameter: \"front_lidar\"\n      },\n      data => {\n        Maybe.fromNull(data)\n          .flatMap(d => ofNull(d.key))\n          .flatMap(k => ofNull(k.Robot[this.robot.id]))\n          .flatMap(r => ofNull(r.Parameter))\n          .flatMap(p => ofNull(p.front_lidar))\n          .flatMap(f => ofNull(f.Value))\n          .flatMap(v => ofNull(v.points))\n          .forEach(points => this.updatePointCloud(points));\n      },\n      data => {\n        Maybe.fromNull(data.value)\n          .flatMap(v => ofNull(v.Robot))\n          .flatMap(r => ofNull(r[this.robot.id]))\n          .flatMap(r => ofNull(r.Parameter))\n          .flatMap(p => ofNull(p.front_lidar))\n          .flatMap(f => ofNull(f.Value))\n          .flatMap(v => ofNull(v.points))\n          .forEach(points => this.updatePointCloud(points));\n      }\n    );\n  }\n\n  /**\n   *\n   * @param {*} points: Array<3-Array>\n   */\n  updatePointCloud(points) {\n    const vertexData = new VertexData();\n    //Assign positions\n    vertexData.positions = points.flatMap(x => x);\n    const colors = new Array(4 * points.length);\n    vertexData.colors = colors.fill(1.0);\n    //Apply vertexData to custom mesh\n    vertexData.applyToMesh(this.mesh, true);\n  }\n\n  dispose() {\n    super.dispose();\n    MasterDB.unsubscribe({\n      Scope: \"Robot\",\n      Name: this.robot.id,\n      Parameter: \"front_lidar\"\n    });\n  }\n\n  getType = () => PointCloud.TYPE;\n\n  static TYPE = \"PointCloud\";\n\n  static ofDict(scene, dict = null, mainView = null) {\n    if (!dict || !mainView)\n      throw new Error(\n        \"null dictionary describing point cloud or null mainView\"\n      );\n\n    const pointCloudMesh = new Mesh(`cloudPoint${dict.name}`, scene);\n    const mat = new StandardMaterial(`cloudPoint${dict.name}Material`, scene);\n    mat.emissiveColor = new Color3(1, 1, 1);\n    mat.disableLighting = true;\n    mat.pointsCloud = true;\n    mat.pointSize = 2;\n    pointCloudMesh.material = mat;\n\n    return new PointCloud(pointCloudMesh, dict);\n  }\n}\n\nexport default PointCloud;\n","import NodeItem from \"./NodeItem\";\nimport Vec3 from \"../Math/Vec3\";\nimport Util3d from \"../Util3d/Util3d\";\nimport { Maybe } from \"monet\";\nimport React from \"react\";\nimport { Utils } from \"mov-fe-lib-core\";\nimport Constants from \"../Utils/Constants\";\nimport {\n  Vector3,\n  Observable,\n  Color3,\n  StandardMaterial,\n  Quaternion\n} from \"@babylonjs/core\";\nimport { UndoManager } from \"mov-fe-lib-core\";\n\nconst RADIUS = Constants.RADIUS;\n\nconst { mod: positiveMod } = Utils;\n\nclass PolygonRegion extends NodeItem {\n  /**\n   * @param {*} mesh\n   * @param {*} localPolygon: is an array of 3-arrays of numbers of the local coordinates in relation to mesh.position and quaternion\n   * @param {*} keyPoints: are the keyPoints meshes array\n   */\n  constructor(\n    mesh,\n    localPolygon,\n    height,\n    keyPoints,\n    keyValueMap = {},\n    navigationAllowed = true\n  ) {\n    super(mesh, keyValueMap);\n    this.localPolygon = localPolygon;\n    this.height = height;\n    this.keyPoints = keyPoints;\n    this.navigationAllowed = navigationAllowed;\n  }\n\n  toDict() {\n    const dict = super.toDict();\n    dict.localPolygon = this.localPolygon;\n    dict.height = this.height;\n    dict.navigationAllowed = this.navigationAllowed;\n    return dict;\n  }\n\n  ofDict(scene, dict = null, mainView = null) {\n    return PolygonRegion.ofDict(scene, dict, mainView);\n  }\n\n  toForm() {\n    const schema = super.toForm();\n    const props = { ...schema.jsonSchema.properties };\n    const newJsonSchema = {\n      type: \"object\",\n      properties: {\n        oldName: props.oldName,\n        name: props.name,\n        type: props.type,\n        navigationAllowed: {\n          type: \"boolean\",\n          title: \"Navigation allowed\"\n        },\n        position: props.position,\n        rotation: props.rotation,\n        color: props.color,\n        annotations: props.annotations\n      }\n    };\n    schema.jsonSchema = newJsonSchema;\n    schema.data[\"navigationAllowed\"] = this.navigationAllowed;\n    return schema;\n  }\n\n  ofForm(form) {\n    super.ofForm(form);\n    this.navigationAllowed = Boolean(form.navigationAllowed);\n  }\n\n  getType = () => PolygonRegion.TYPE;\n\n  static TYPE = \"PolygonRegion\";\n\n  static ofDict(scene, dict = null, mainView = null) {\n    if (!dict || !mainView)\n      throw new Error(\"null dictionary describing polygon or null mainView\");\n\n    const polygon = dict.localPolygon.map(z => Vec3.of(z).toBabylon());\n    const middlePoint = Vec3.of(dict.position).toBabylon();\n\n    const mesh = createExtrudedPolygonMesh(\n      scene,\n      polygon,\n      dict.height,\n      dict.name\n    );\n    mesh.position = middlePoint;\n    mesh.rotationQuaternion = Quaternion.Identity();\n\n    const material = new StandardMaterial(`PolygonMaterial${dict.name}`, scene);\n    const color = new Color3(dict.color[0], dict.color[1], dict.color[2]);\n    material.diffuseColor = color;\n    material.emissiveColor = color;\n    mesh.material = material;\n    mesh.visibility = dict.color[3] || VISIBILITY;\n    Maybe.fromNull(dict.quaternion).forEach(quaternion => {\n      const babylonQuaternion = new Quaternion(\n        quaternion[1],\n        quaternion[2],\n        quaternion[3],\n        quaternion[0]\n      );\n      mesh.rotationQuaternion = babylonQuaternion.normalize();\n    });\n\n    const keypoints = createPlaceHolderKeyPoints(\n      scene,\n      polygon,\n      mesh,\n      mainView\n    );\n\n    return new PolygonRegion(\n      mesh,\n      polygon.map(point => [point.x, point.y, point.z]),\n      dict.height,\n      keypoints,\n      dict.keyValueMap,\n      dict.navigationAllowed\n    );\n  }\n\n  /**\n   * Create new mesh from old, has side effects\n   *\n   * @param {*} newPoints: Vector3\n   * @param {*} scene: Scene\n   * @param {*} item: PathItem\n   * @param {*} mainView: MainView\n   * @param {*} keyPointUpdateFunction: (scene, mainView, mesh, item) => Array<Mesh>\n   */\n  static createNewMeshFromOldUsingNewPoints(\n    newPoints,\n    scene,\n    item,\n    mainView,\n    keyPointUpdateFunction = defaultKeyPointUpdate\n  ) {\n    const { mesh: oldMesh } = item;\n    const average = Util3d.pointAverage(newPoints);\n    newPoints = newPoints.map(x => x.subtract(average));\n\n    // average in parent coord\n    const rotMat3 = Util3d.getRotationMatrix(oldMesh);\n    const scaleVec3 = Vec3.ofBabylon(oldMesh.scaling);\n    const averageInParentCoord = rotMat3\n      .prodVec(Vec3.ofBabylon(average).mul(scaleVec3))\n      .toBabylon();\n\n    // update mesh\n    const newMesh = createExtrudedPolygonMesh(\n      scene,\n      newPoints,\n      item.height,\n      oldMesh.name\n    );\n\n    newMesh.parent = oldMesh.parent;\n    newMesh.rotationQuaternion = oldMesh.rotationQuaternion;\n    newMesh.position = averageInParentCoord.add(oldMesh.position);\n\n    newMesh.material = oldMesh.material;\n    newMesh.visibility = oldMesh.visibility;\n    newMesh.onClick = oldMesh.onClick;\n    newMesh.getMouseContextActions = oldMesh.getMouseContextActions;\n    newMesh.nodeItem = oldMesh.nodeItem;\n    newMesh.observers = oldMesh.observers;\n    if (!!oldMesh.graphVertex) {\n      newMesh.graphVertex = oldMesh.graphVertex;\n      newMesh.graphVertex.vertex.mesh = newMesh;\n    }\n\n    item.localPolygon = newPoints.map(x => Vec3.ofBabylon(x).toArray());\n    item.mesh = newMesh;\n    item.keyPoints = keyPointUpdateFunction(scene, mainView, oldMesh, item);\n    // update children\n    const childrenCopy = [...oldMesh._children];\n    childrenCopy\n      .filter(c => mainView.getNodeFromTree(c.name).isJust())\n      .forEach(c => {\n        c.parent = item.mesh;\n      });\n    oldMesh.dispose();\n    return newPoints;\n  }\n\n  static deleteKeyPoint(scene, keyPointMesh, mainView) {\n    const index = keyPointMesh.index;\n    const name = keyPointMesh.parent.name;\n    mainView.getNodeFromTree(name).forEach(({ item }) => {\n      const { mesh } = item;\n      const copyPosition = { ...mesh.position };\n      let newPoints = item.localPolygon.map(x => Vec3.of(x).toBabylon());\n      mainView\n        .getUndoManager()\n        .doIt(\n          PolygonRegion.getUndoDeleteKeyPoint(\n            name,\n            index,\n            copyPosition,\n            newPoints,\n            scene,\n            item,\n            mainView\n          )\n        );\n    });\n  }\n\n  static getUndoDeleteKeyPoint(\n    name,\n    index,\n    copyPosition,\n    newPoints,\n    scene,\n    item,\n    mainView\n  ) {\n    return UndoManager.actionBuilder()\n      .doAction(() => {\n        const copyPoints = [...newPoints];\n        copyPoints.splice(index, 1);\n        PolygonRegion.createNewMeshFromOldUsingNewPoints(\n          copyPoints,\n          scene,\n          item,\n          mainView,\n          PolygonRegion.onAddNewPointKeyPointUpdate\n        );\n        mainView.updateNodeInServer(name);\n      })\n      .undoAction(({ is2UpdateInServer = true }) => {\n        const copyPoints = [...newPoints];\n        item.mesh.position = copyPosition;\n        PolygonRegion.createNewMeshFromOldUsingNewPoints(\n          copyPoints,\n          scene,\n          item,\n          mainView,\n          PolygonRegion.onAddNewPointKeyPointUpdate\n        );\n        if (is2UpdateInServer) mainView.updateNodeInServer(name);\n      })\n      .build();\n  }\n\n  static onAddNewPointKeyPointUpdate(scene, mainView, oldMesh, item) {\n    // used when new keypoint is added\n    return createPlaceHolderKeyPoints(\n      scene,\n      item.localPolygon.map(x => Vec3.of(x).toBabylon()),\n      item.mesh,\n      mainView\n    );\n  }\n\n  /**\n   *\n   * @param {*} scene\n   * @param {*} keyPointMesh\n   * @param {*} curveMesh\n   * @param {*} mainView\n   * @param {*} orientation: it belongs to the set {-1,1}, represents orientation\n   */\n  static addKeyPointInBetween = (\n    scene,\n    keyPointMesh,\n    mainView,\n    orientation\n  ) => {\n    const index = keyPointMesh.index;\n    const name = keyPointMesh.parent.name;\n    mainView.getNodeFromTree(name).forEach(({ item }) => {\n      const copyPosition = { ...item.mesh.position };\n      const points = item.localPolygon.map(x => Vec3.of(x).toBabylon());\n      mainView\n        .getUndoManager()\n        .doIt(\n          PolygonRegion.getUndoAddKeyPointInBetween(\n            name,\n            index,\n            orientation,\n            item,\n            points,\n            copyPosition,\n            scene,\n            mainView\n          )\n        );\n    });\n  };\n\n  static getUndoAddKeyPointInBetween(\n    name,\n    index,\n    orientation,\n    item,\n    points,\n    copyPosition,\n    scene,\n    mainView\n  ) {\n    return UndoManager.actionBuilder()\n      .doAction(() => {\n        const numberOfPoints = points.length;\n        const nextIndex = positiveMod(index + orientation, numberOfPoints);\n        let newPoints = [];\n        const specialIndex = index + Math.max(0, orientation);\n        for (let i = 0; i < specialIndex; i++) {\n          newPoints.push(points[i]);\n        }\n        newPoints.push(points[nextIndex].add(points[index]).scale(0.5));\n        for (let i = specialIndex; i < numberOfPoints; i++) {\n          newPoints.push(points[i]);\n        }\n        PolygonRegion.createNewMeshFromOldUsingNewPoints(\n          newPoints,\n          scene,\n          item,\n          mainView,\n          PolygonRegion.onAddNewPointKeyPointUpdate\n        );\n        mainView.updateNodeInServer(name);\n      })\n      .undoAction(({ is2UpdateInServer = true }) => {\n        const copyPoints = [...points];\n        item.mesh.position = copyPosition;\n        PolygonRegion.createNewMeshFromOldUsingNewPoints(\n          copyPoints,\n          scene,\n          item,\n          mainView,\n          PolygonRegion.onAddNewPointKeyPointUpdate\n        );\n        if (is2UpdateInServer) mainView.updateNodeInServer(name);\n      })\n      .build();\n  }\n}\n\n/**\n *\n * @param {*} polygon: boundary as babylonjs vec3\n */\nconst stitchingBoundaries = polygon => {\n  const n = polygon.length;\n  const orientation = Util3d.computeOrientation(polygon);\n  const ans = [];\n  for (let i = 0; i < n; i++) {\n    const modi = (i + 1) % n;\n    ans.push([i, n + modi, modi]);\n    ans.push([i, n + i, n + modi]);\n  }\n  return orientation > 0 ? ans : ans.map(reverseOrientation);\n};\n\nconst reverseOrientation = triangleIndex => {\n  const ans = [];\n  ans.push(triangleIndex[1]);\n  ans.push(triangleIndex[0]);\n  ans.push(triangleIndex[2]);\n  return ans;\n};\n\n/**\n *\n * @param {*} scene\n * @param {*} polygon array of babylon js vector3\n * @param {*} height\n * @param {*} name\n */\nconst createExtrudedPolygonMesh = (scene, polygon, height, name) => {\n  const h = new Vector3(0, 0, height);\n  const polygonRegionMesh = {\n    positions: [],\n    faces: []\n  };\n  polygonRegionMesh.positions = [...polygon];\n  for (let i = 0; i < polygon.length; i++) {\n    polygonRegionMesh.positions.push(polygon[i].add(h));\n  }\n  const n = polygon.length;\n  const lowerTriangulation = Util3d.triangulatePolygon(polygon);\n  const upperTriangulation = Util3d.triangulatePolygon(\n    polygonRegionMesh.positions.slice(n)\n  )\n    .map(x => x.map(z => z + n))\n    .map(reverseOrientation);\n  const stitchTriangulation = stitchingBoundaries(polygon);\n  polygonRegionMesh.faces = lowerTriangulation\n    .concat(upperTriangulation)\n    .concat(stitchTriangulation);\n  const mesh = Util3d.meshFromPositionAndFaces(\n    name,\n    scene,\n    polygonRegionMesh.positions,\n    polygonRegionMesh.faces\n  );\n  return mesh;\n};\n\nfunction defaultKeyPointUpdate(scene, mainView, oldMesh, item) {\n  // used when keypoint is updated or deleted\n  const childrenCopy = [...oldMesh._children];\n  childrenCopy.forEach(c => {\n    c.parent = item.mesh;\n    console.log(\"Moving parents of child\", c.name);\n  });\n\n  return item.keyPoints.map((k, i) => {\n    k.observers = new Observable();\n    k.observers.add(getKeyPointObserverFunction(scene, mainView));\n    k.index = i;\n    k.name = `${oldMesh.name}keyPoint${i}`;\n    k.position = Vec3.of(item.localPolygon[i]).toBabylon();\n    return k;\n  });\n}\n\nconst getKeyPointObserverFunction = (scene, mainView) => {\n  return ({ updatedPointMesh, is2updateServer }) => {\n    if (!updatedPointMesh.parent) return;\n    mainView\n      .getNodeFromTree(updatedPointMesh.parent.name)\n      .forEach(polygonTreeNode => {\n        const index = updatedPointMesh.index;\n        const item = polygonTreeNode.item;\n        const mesh = item.mesh;\n        const name = mesh.name;\n        let newPoints = item.localPolygon.map(x => Vec3.of(x).toBabylon());\n        newPoints[index] = updatedPointMesh.position;\n        PolygonRegion.createNewMeshFromOldUsingNewPoints(\n          newPoints,\n          scene,\n          item,\n          mainView\n        );\n        if (is2updateServer) {\n          mainView.updateNodeInServer(name);\n        }\n        // signal observers\n        Maybe.fromNull(item.mesh.observers).forEach(obs => {\n          //side effect update absolute position\n          item.mesh.getAbsolutePosition();\n          obs.notifyObservers({\n            updatedPointMesh: item.mesh,\n            is2updateServer: is2updateServer,\n            displacement: Vector3.Zero()\n          });\n        });\n        Maybe.fromNull(item.mesh.graphVertex).forEach(({ vertexObs }) => {\n          item.mesh.getAbsolutePosition();\n          vertexObs({\n            updatedPointMesh: item.mesh,\n            is2updateServer: is2updateServer,\n            displacement: Vector3.Zero()\n          });\n        });\n      });\n  };\n};\n\nconst getKeyPointActions = (scene, keyPointMesh, mainView) => {\n  const actions = [];\n  mainView.getNodeFromTree(keyPointMesh.parent.name).forEach(pathTreeNode => {\n    const item = pathTreeNode.item;\n    const polygon = item.localPolygon;\n    if (polygon.length > 3) {\n      actions.push({\n        icon: props => <i className=\"fas fa-trash\" {...props}></i>,\n        action: parentView => {\n          PolygonRegion.deleteKeyPoint(scene, keyPointMesh, parentView);\n          parentView.closeContextDial();\n        },\n        name: \"Delete node [DEL]\"\n      });\n    }\n    actions.push({\n      icon: props => <i className=\"fas fa-less-than\" {...props}></i>,\n      action: parentView => {\n        PolygonRegion.addKeyPointInBetween(scene, keyPointMesh, parentView, -1);\n        parentView.closeContextDial();\n      },\n      name: \"Add previous\"\n    });\n    actions.push({\n      icon: props => <i className=\"fas fa-greater-than\" {...props}></i>,\n      action: parentView => {\n        PolygonRegion.addKeyPointInBetween(scene, keyPointMesh, parentView, 1);\n        parentView.closeContextDial();\n      },\n      name: \"Add next\"\n    });\n  });\n\n  return actions;\n};\n\nconst createPlaceHolderKeyPoints = (scene, polygon, polygonMesh, mainView) => {\n  const keyPoints = [];\n  polygon.forEach((p, i) => {\n    const color = new Color3(0.25, 0.25, 0.25);\n    const keyPoint = Util3d.createSphere(\n      scene,\n      color,\n      RADIUS,\n      `${polygonMesh.name}keyPointPolygon${i}`,\n      true\n    );\n    keyPoint.parent = polygonMesh;\n    keyPoint.position = p;\n    keyPoint.index = i;\n    keyPoint.observers = new Observable();\n\n    keyPoints.push(keyPoint);\n\n    keyPoint.observers.add(getKeyPointObserverFunction(scene, mainView));\n  });\n\n  keyPoints.forEach(x => {\n    x.onClick = () => {\n      mainView.setContextActions(getKeyPointActions(scene, x, mainView));\n    };\n  });\n\n  return keyPoints;\n};\n\nconst VISIBILITY = 0.5;\nexport default PolygonRegion;\n","import Vec3 from \"../Math/Vec3\";\nimport Util3d from \"../Util3d/Util3d\";\nimport AssetNodeItem from \"./AssetNodeItem\";\nimport errorIcon from \"../../../../resources/alert-error.png\";\nimport {\n  Axis,\n  Space,\n  Vector3,\n  Quaternion,\n  Color3,\n  MeshBuilder,\n  Mesh,\n  StandardMaterial,\n  Texture\n} from \"@babylonjs/core\";\nimport _get from \"lodash/get\";\nimport Statistics from \"../Utils/Statistics\";\n\nclass Robot extends AssetNodeItem {\n  static ROBOT_MESH_NAME = \"Tugbot.stl\";\n\n  constructor(meshTree, assetName, keyValueMap = {}, scene, parentView) {\n    super(meshTree.mesh, assetName, keyValueMap);\n    this.robot = parentView.getRobotManager().getRobot(meshTree.id);\n    this.scene = scene;\n    this.isOnline = true;\n    this.numberOfIte = 0;\n    this.is2UsePos = true;\n    this.meshTree = meshTree;\n    this.parentView = parentView;\n    this.timeSinceLastUpdate = 0;\n    this.isSubscribedToLogs = true;\n    this.speedStats = new Statistics();\n    this.alert = null;\n    this.loggerSubscription = null;\n    this.requestAnimationFrameId = null;\n    this.speed = Vector3.Zero();\n    this.qSpeed = Quaternion.Zero();\n    this.newPos = Vector3.Zero();\n    this.newOri = Quaternion.Identity();\n    // Build alert mesh\n    this.alertMesh = this.buildAlertMesh(meshTree, scene);\n    // Get robot ip to start logger\n    const robotIP = this.robot.getIP(this.onGetIP(this));\n    if (robotIP) this.startLogger();\n    // Add click action to alertMesh\n    Util3d.addClickActionToMesh(\n      this.alertMesh,\n      scene,\n      this.onMeshAlertClick(this)\n    );\n  }\n\n  buildAlertMesh(meshTree, scene) {\n    if (this.alertMesh) return this.alertMesh;\n    const alertMesh = MeshBuilder.CreateDisc(`AlertDisc${meshTree.name}`, {\n      radius: 0.2,\n      sideOrientation: Mesh.DOUBLESIDE\n    });\n    const material = new StandardMaterial(`AlertMat${meshTree.name}`, scene);\n    material.emissiveColor = new Color3.White();\n    material.ambientTexture = new Texture(errorIcon, scene);\n    material.freeze();\n    alertMesh.material = material;\n    alertMesh.isStatic = true;\n    alertMesh.position.y = -1.5;\n    alertMesh.parent = meshTree.mesh;\n    alertMesh.setEnabled(false);\n    alertMesh.billboardMode = Mesh.BILLBOARDMODE_ALL;\n    return alertMesh;\n  }\n\n  /**\n   * On alert mesh click handler\n   *\n   * @param {*} robot: Robot class instance (this)\n   * @returns {Function} Function to be triggered whenever there's a click on the alert mesh\n   */\n  onMeshAlertClick(robot) {\n    return () => {\n      robot.parentView.showRobotAlertModal(robot.alert);\n    };\n  }\n\n  toDict() {\n    let dict = super.toDict();\n    dict.isSubscribedToLogs = this.isSubscribedToLogs;\n    return dict;\n  }\n\n  toForm() {\n    const schema = super.toForm();\n    const props = { ...schema.jsonSchema.properties };\n    const newJsonSchema = {\n      type: \"object\",\n      properties: {\n        oldName: props.oldName,\n        name: props.name,\n        type: props.type,\n        // isSubscribedToLogs: {\n        //   type: \"boolean\",\n        //   title: \"Subscribe to alerts\"\n        // },\n        position: props.position,\n        rotation: props.rotation,\n        color: props.color,\n        annotations: props.annotations\n      }\n    };\n    schema.jsonSchema = newJsonSchema;\n    schema.data[\"isSubscribedToLogs\"] = this.isSubscribedToLogs;\n    return schema;\n  }\n\n  ofForm(form) {\n    super.ofForm(form);\n    this.isSubscribedToLogs = Boolean(form.isSubscribedToLogs);\n    // Start/Stop logger based on isSubscribedToLogs property\n    if (form.isSubscribedToLogs && this.robot.ip) this.startLogger();\n    else this.stopLogger(true);\n  }\n\n  dispose() {\n    super.dispose();\n    this.robot.unsubscribe({\n      property: \"Parameter\",\n      propValue: \"tf\"\n    });\n    window.cancelAnimationFrame(this.requestAnimationFrameId);\n  }\n\n  updateRobot = (robot, oldTimeInMillis, robotAnimator) => {\n    const time = new Date().getTime();\n    const dt = 1e-3 * (time - oldTimeInMillis);\n    robotAnimator(robot, dt);\n    this.requestAnimationFrameId = requestAnimationFrame(() =>\n      this.updateRobot(robot, time, robotAnimator)\n    );\n  };\n\n  animate = robotAnimator => {\n    this.requestAnimationFrameId = requestAnimationFrame(() =>\n      this.updateRobot(this, new Date().getTime(), robotAnimator)\n    );\n  };\n\n  getType = () => Robot.TYPE;\n\n  toOffline() {\n    if (this.mesh.isDisposed()) return;\n    this.mesh.visibility = 0.1;\n    this.speed = Vector3.Zero();\n    this.qSpeed = Quaternion.Zero();\n    this.isOnline = false;\n    this.stopLogger();\n  }\n\n  toOnline() {\n    if (this.mesh.isDisposed()) return;\n    this.mesh.visibility = 1;\n    this.isOnline = true;\n    this.startLogger();\n  }\n\n  /**\n   * Start robot logger\n   */\n  startLogger() {\n    if (!this.loggerSubscription) {\n      this.loggerSubscription = this.robot.subscribeToLogs(\n        this.updateAlertState(this)\n      );\n    }\n  }\n\n  /**\n   * Stop robot logger\n   *\n   * @param {Boolean} is2RemoveAlertMesh: If true: remove alert mesh\n   */\n  stopLogger(is2RemoveAlertMesh) {\n    if (this.loggerSubscription) {\n      this.robot.unsubscribeToLogs(this.loggerSubscription);\n      this.loggerSubscription = null;\n    }\n    // Remove robot alert mesh\n    if (is2RemoveAlertMesh) this.alertMesh.setEnabled(false);\n  }\n\n  /**\n   * Update robot alert state\n   *\n   * @param {*} robot: Robot class instance (this)\n   * @returns {Function} Function to be triggered whenever there's a new log for this robot\n   */\n  updateAlertState(robot) {\n    return logs => {\n      robot.timeSinceLastUpdate = 0;\n      if (logs[0].level === \"ERROR\" || logs[0].level === \"CRITICAL\") {\n        robot.alert = logs[0];\n        robot.alertMesh.setEnabled(true);\n      }\n      // If last log is not error/critical then clean alert (set it to null)\n      else {\n        robot.alertMesh.setEnabled(false);\n      }\n    };\n  }\n\n  /**\n   * Start logger after receiving robot IP\n   *\n   * @param {*} robot: Robot class instance (this)\n   * @returns {Function} Function to be triggered when receive robot ip\n   */\n  onGetIP(robot) {\n    return ip => {\n      // If robot IP were not found doesn't start logger\n      if (!ip) return;\n      robot.startLogger();\n    };\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                   Static Functions                                   *\n   *                                                                                      */\n  //========================================================================================\n\n  static TYPE = \"Robot\";\n\n  static TIME_2_BE_OFFLINE_IN_SEC = 10;\n\n  static createBaseObject = ({\n    robotName,\n    robotMeshName = Robot.ROBOT_MESH_NAME,\n    id = Robot.randomId(),\n    nodeDict = {\n      position: [0, 0, 0],\n      quaternion: [1, 0, 0, 0]\n    }\n  }) => {\n    return {\n      id: id,\n      name: robotName,\n      type: Robot.TYPE,\n      meshName: robotMeshName,\n      robotTree: {\n        name: robotName,\n        child: [],\n        position: {\n          x: nodeDict.position[0],\n          y: nodeDict.position[1],\n          z: nodeDict.position[2]\n        },\n        orientation: {\n          w: nodeDict.quaternion[0],\n          x: nodeDict.quaternion[1],\n          y: nodeDict.quaternion[2],\n          z: nodeDict.quaternion[3]\n        }\n      }\n    };\n  };\n\n  static getDefaultAnimator = parentView => (robot, dt) => {\n    const mesh = robot.mesh;\n    const speed = 3;\n    const vel = Util3d.getRotationMatrix(mesh)\n      .prodVec(new Vec3([speed, 0, 0]))\n      .toBabylon();\n    mesh.position = mesh.position.add(vel.scale(dt));\n    mesh.rotate(Axis.Z, (-Math.PI / 2) * dt, Space.LOCAL);\n  };\n\n  static updateRobotMeshTree(newRobotTf, robot) {\n    const lastPosition = robot.mesh.position;\n    const lastOrientation = robot.mesh.rotationQuaternion;\n    const newPosition = new Vector3(\n      newRobotTf.position.x,\n      newRobotTf.position.y,\n      newRobotTf.position.z\n    );\n    const newOrientation = new Quaternion(\n      newRobotTf.orientation.x,\n      newRobotTf.orientation.y,\n      newRobotTf.orientation.z,\n      newRobotTf.orientation.w\n    ).normalize();\n\n    robot.numberOfIte++;\n    const isZero = robot.timeSinceLastUpdate === 0;\n    const dtInv = isZero ? 1.0 : 1.0 / robot.timeSinceLastUpdate;\n\n    const speed = newPosition.subtract(lastPosition).scale(dtInv);\n    const qSpeed = newOrientation.subtract(lastOrientation).scale(dtInv);\n    const vel = speed.length();\n\n    if (robot.numberOfIte < SAMPLES) {\n      robot.speedStats.update(vel);\n    }\n    if (robot.speedStats.isOutlier(vel)) {\n      robot.is2UsePos = true;\n    } else {\n      robot.speedStats.update(vel);\n      robot.speed = speed;\n      robot.qSpeed = qSpeed;\n      robot.is2UsePos = false;\n    }\n\n    robot.newPos = newPosition;\n    robot.newOri = newOrientation;\n    robot.timeSinceLastUpdate = 0;\n  }\n\n  static getSocketAnimator = (robot, parentView) => {\n    const updateTF = data => {\n      const tf = _get(\n        data,\n        `Robot.${robot.meshTree.id}.Parameter.tf.Value`,\n        undefined\n      );\n      if (tf) Robot.updateRobotMeshTree(tf, robot);\n    };\n    // Subscribe to tf parameter\n    robot.robot.subscribe({\n      property: \"Parameter\",\n      propValue: \"tf\",\n      onLoad: data => updateTF(data?.value),\n      onUpdate: data => updateTF(data?.key)\n    });\n\n    // Animate\n    return (robot2Animate, dt) => {\n      robot2Animate.timeSinceLastUpdate += dt;\n      if (Vec3.ofBabylon(robot2Animate.speed).someNaNOrInfinite()) return;\n      if (Vec3.ofBabylon(robot2Animate.qSpeed).someNaNOrInfinite()) return;\n      if (robot2Animate.is2UsePos) {\n        robot2Animate.mesh.position = robot2Animate.newPos;\n        robot2Animate.mesh.rotationQuaternion = robot2Animate.newOri;\n      } else {\n        robot2Animate.mesh.position = robot2Animate.mesh.position.add(\n          robot2Animate.speed.scale(dt)\n        );\n        robot2Animate.mesh.rotationQuaternion = robot2Animate.mesh.rotationQuaternion\n          .add(robot.qSpeed.scale(dt))\n          .normalize();\n      }\n      Robot.setOnOffLine(robot2Animate);\n    };\n  };\n\n  static setOnOffLine(robot) {\n    if (robot.timeSinceLastUpdate > Robot.TIME_2_BE_OFFLINE_IN_SEC) {\n      if (robot.isOnline) robot.toOffline();\n    } else {\n      if (robot.timeSinceLastUpdate > Robot.TIME_2_BE_OFFLINE_IN_SEC / 4) {\n        robot.is2UsePos = true;\n      }\n      if (!robot.isOnline) robot.toOnline();\n    }\n  }\n\n  static createRobotMeshTreeRecursive(node, mesh, parent, scene) {\n    if (!mesh) {\n      mesh = Util3d.createSphere(\n        scene,\n        new Color3(0.0, 0.0, 0.0),\n        0.5,\n        node.name,\n        false\n      );\n    }\n    const meshTree = {\n      mesh: mesh,\n      children: []\n    };\n    const position = new Vector3(\n      node.position.x,\n      node.position.y,\n      node.position.z\n    );\n    const quaternion = new Quaternion(\n      node.orientation.x,\n      node.orientation.y,\n      node.orientation.z,\n      node.orientation.w\n    );\n    mesh.position = position;\n    mesh.rotationQuaternion = quaternion;\n    if (parent) {\n      mesh.parent = parent;\n    }\n    meshTree[\"children\"] = node.child.map(child => {\n      return this.createRobotMeshTreeRecursive(\n        child,\n        Util3d.referentialBuilder(scene)\n          .boxParams({ isVisible: false, size: 0.1 })\n          .build(),\n        mesh,\n        scene\n      );\n    });\n    return meshTree;\n  }\n\n  static createRobotMeshTree(robotTree, robotMesh, scene) {\n    return Robot.createRobotMeshTreeRecursive(\n      robotTree,\n      robotMesh,\n      null,\n      scene\n    );\n  }\n\n  static builder() {\n    return new RobotBuilder();\n  }\n}\n\nclass RobotBuilder {\n  constructor() {\n    this._name = null;\n    this._meshTree = null;\n    this._parentMesh = null;\n    this._parentView = null;\n    this._scene = null;\n    this._isPickable = true;\n    this._id = null;\n    this._keyValueMap = {};\n    this._assetName = null;\n  }\n\n  name(name) {\n    this._name = name;\n    return this;\n  }\n\n  meshTree(meshTree) {\n    this._meshTree = meshTree;\n    return this;\n  }\n\n  parentMesh(parentMesh) {\n    this._parentMesh = parentMesh;\n    return this;\n  }\n\n  parentView(parentView) {\n    this._parentView = parentView;\n    return this;\n  }\n\n  scene(scene) {\n    this._scene = scene;\n    return this;\n  }\n\n  isPickable(isPickable) {\n    this._isPickable = isPickable;\n    return this;\n  }\n\n  id(id) {\n    this._id = id;\n    return this;\n  }\n\n  keyValueMap(keyValueMap) {\n    this._keyValueMap = keyValueMap;\n    return this;\n  }\n\n  assetName(assetName) {\n    this._assetName = assetName;\n    return this;\n  }\n\n  build() {\n    const variables = Object.keys(this)\n      .filter(x => x !== \"_parentMesh\")\n      .map(x => this[x]);\n\n    variables.forEach(x => {\n      if (x === null)\n        throw new Error(\n          `There are missing variables to build a robot, e.g ${x}`\n        );\n    });\n\n    this._meshTree.id = this._id;\n    this._meshTree.name = this._name;\n    this._meshTree.mesh.name = this._name;\n    this._meshTree.mesh.isPickable = this._isPickable;\n    this._meshTree.mesh.parent = this._parentMesh;\n\n    const baseAxis = Util3d.referentialBuilder(this._scene)\n      .isPickable(false)\n      .boxParams({ isVisible: false, size: 0.1 })\n      .name(`${this._name}Axis`)\n      .build();\n    baseAxis.parent = this._meshTree.mesh;\n\n    return new Robot(\n      this._meshTree,\n      this._assetName,\n      this._keyValueMap,\n      this._scene,\n      this._parentView\n    );\n  }\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                       CONSTANTS                                      *\n *                                                                                      */\n//========================================================================================\n\nconst SAMPLES = 15;\n\n//========================================================================================\n/*                                                                                      *\n *                                        EXPORT                                        *\n *                                                                                      */\n//========================================================================================\n\nexport default Robot;\n","import NodeItem from \"./NodeItem\";\nimport Vec3 from \"../Math/Vec3\";\nimport { Maybe } from \"monet\";\nimport Util3d from \"../Util3d/Util3d\";\nimport Constants from \"../Utils/Constants\";\nimport { Vector3, Color3, Observable, StandardMaterial } from \"@babylonjs/core\";\n/**\n * Will be deprecated\n */\nclass Wall extends NodeItem {\n  constructor(mesh, localWall, size, keyPoints = {}, keyValueMap = {}) {\n    super(mesh, keyValueMap);\n    this.localWall = localWall;\n    this.size = size;\n    this.keyPoints = keyPoints;\n  }\n\n  toDict() {\n    const dict = super.toDict();\n    dict.localWall = this.localWall;\n    dict.size = this.size;\n    return dict;\n  }\n\n  ofDict(scene, dict = null, mainView = null) {\n    return Wall.ofDict(scene, dict, mainView);\n  }\n\n  getType = () => Wall.TYPE;\n\n  static TYPE = \"Wall\";\n\n  static ofDict(scene, dict = null, mainView = null) {\n    if (!dict) throw new Error(\"null dictionary describing wall\");\n    const name = Maybe.fromNull(dict.name).orSome(\n      `Wall${Math.floor(Math.random() * 1e3)}`\n    );\n    const mesh = createWallMesh(dict, name, scene);\n\n    const material = new StandardMaterial(`WallMaterial${name}`, scene);\n    const color = new Color3(dict.color[0], dict.color[1], dict.color[2]);\n    material.diffuseColor = color;\n    material.emissiveColor = color;\n    mesh.material = material;\n    // babylonjs highlight shader flickers when floor intersect\n    mesh.position.z += 1e-3;\n\n    const keypoints = createPlaceHolderKeyPoints(\n      scene,\n      dict.localWall.map(x => Vec3.of(x).toBabylon()),\n      mesh,\n      mainView\n    );\n    return new Wall(\n      mesh,\n      dict.localWall,\n      dict.size,\n      keypoints,\n      dict.keyValueMap\n    );\n  }\n}\n\nconst RADIUS = Constants.RADIUS;\nconst FACES = [\n  [0, 1, 2],\n  [2, 3, 0],\n  [4, 6, 5],\n  [6, 4, 7],\n  [0, 5, 1],\n  [5, 0, 4],\n  [3, 2, 6],\n  [6, 7, 3],\n  [1, 6, 2],\n  [6, 1, 5],\n  [0, 3, 7],\n  [7, 4, 0]\n];\n\nfunction createWallMesh(dict, name, scene) {\n  const centeredWall = dict.localWall.map(x => Vec3.of(x).toBabylon());\n  const middlePoint = Vec3.of(dict.position).toBabylon();\n  const tangent = centeredWall[1].subtract(centeredWall[0]).normalize();\n  const normal = new Vector3(-tangent.y, tangent.x, 0);\n  const shape = [\n    centeredWall[0].add(normal.scale(dict.size.width)),\n    centeredWall[0].subtract(normal.scale(dict.size.width)),\n    centeredWall[1].subtract(normal.scale(dict.size.width)),\n    centeredWall[1].add(normal.scale(dict.size.width))\n  ];\n  const h = new Vector3(0, 0, dict.size.height);\n  const wallMesh = {\n    positions: [\n      shape[0],\n      shape[1],\n      shape[2],\n      shape[3],\n      shape[0].add(h),\n      shape[1].add(h),\n      shape[2].add(h),\n      shape[3].add(h)\n    ],\n    faces: FACES\n  };\n  const mesh = Util3d.meshFromPositionAndFaces(\n    name,\n    scene,\n    wallMesh.positions,\n    wallMesh.faces\n  );\n  mesh.position = middlePoint;\n  return mesh;\n}\n\nfunction createNewMeshFromOldUsingNewPoints(newWall, scene, mesh, item) {\n  const average = Util3d.pointAverageVec3(\n    newWall.localWall.map(x => Vec3.of(x))\n  );\n  newWall.position = average.toArray();\n  newWall.localWall = newWall.localWall.map(x =>\n    Vec3.of(x).sub(average).toArray()\n  );\n\n  const newMesh = createWallMesh(newWall, mesh.name, scene);\n  newMesh.position = mesh.position;\n  newMesh.rotationQuaternion = mesh.rotationQuaternion;\n  newMesh.locallyTranslate(average.toBabylon());\n  newMesh.material = mesh.material;\n  newMesh.visibility = mesh.visibility;\n  newMesh.parent = mesh.parent;\n  newMesh.getMouseContextActions = mesh.getMouseContextActions;\n  newMesh.nodeItem = mesh.nodeItem;\n\n  item.mesh = newMesh;\n  item.localWall = newWall.localWall;\n\n  const childrenCopy = [...mesh._children];\n  childrenCopy.forEach(c => {\n    mesh.removeChild(c);\n    c.parent = newMesh;\n  });\n  item.keyPoints.forEach((k, j) => {\n    k.position = Vec3.of(newWall.localWall[j]).toBabylon();\n  });\n  // dispose old mesh\n  mesh.dispose();\n}\n\nconst getKeyPointObserverFunction = (mainView, scene) => {\n  return ({ updatedPointMesh, is2updateServer }) => {\n    mainView.getNodeFromTree(updatedPointMesh.parent.name).forEach(wallNode => {\n      const index = updatedPointMesh.index;\n      const item = wallNode.item;\n      const mesh = item.mesh;\n      let newWall = {\n        position: Vec3.ofBabylon(mesh.position).toArray(),\n        localWall: item.localWall,\n        size: item.size\n      };\n      newWall.localWall[index] = Vec3.ofBabylon(\n        updatedPointMesh.position\n      ).toArray();\n\n      createNewMeshFromOldUsingNewPoints(newWall, scene, mesh, item);\n\n      if (is2updateServer) {\n        mainView.updateNodeInServer(mesh.name);\n      }\n    });\n  };\n};\n\nconst createPlaceHolderKeyPoints = (scene, wall, wallMesh, mainView) => {\n  const keyPoints = [];\n  wall.forEach((p, i) => {\n    const keyPoint = Util3d.createSphere(\n      scene,\n      new Color3(0.25, 0.25, 0.25),\n      RADIUS,\n      `${wallMesh.name}keyPointWall${i}`,\n      true\n    );\n    keyPoint.parent = wallMesh;\n    keyPoint.position = p;\n    keyPoint.index = i;\n    keyPoint.observers = new Observable();\n    keyPoint.observers.add(getKeyPointObserverFunction(mainView, scene));\n    keyPoints.push(keyPoint);\n  });\n  return keyPoints;\n};\n\nexport default Wall;\n","import React, { Component } from \"react\";\nimport BaseViewer from \"./BaseViewer/BaseViewer\";\nimport PropTypes from \"prop-types\";\nimport { HighlightLayer, Vector3 } from \"@babylonjs/core\";\nimport { Maybe } from \"monet\";\nimport MainViewRetriever from \"./MainView/MainViewRetriever\";\nimport DefaultScene from \"./Utils/DefaultScene\";\nimport GlobalRef from \"./NodeItem/GlobalRef\";\nimport SceneServerUtils from \"./Utils/SceneServerUtils\";\nimport TreeServerUtils from \"./Utils/TreeServerUtils\";\nimport AssetsManager from \"./AssetsManager/AssetsManager\";\nimport TreeObject from \"./TreeObject/TreeObject\";\nimport GraphItem from \"./NodeItem/GraphItem\";\nimport DefaultMouseEvents from \"./Utils/DefaultMouseEvents\";\nimport Util3d from \"./Util3d/Util3d\";\nimport Vec3 from \"./Math/Vec3\";\nimport ReactResizeDetector from \"react-resize-detector\";\nimport ConfirmAlertModal from \"../Modal/ConfirmAlertModal\";\nimport RobotLogModal from \"../Modal/RobotLogModal\";\nimport { UndoManager, RobotManager } from \"mov-fe-lib-core\";\n\n//========================================================================================\n/*                                                                                      *\n *                                      SceneViewer                                     *\n *                                                                                      */\n//========================================================================================\n\nclass SceneViewer extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { errorList: [] };\n    this.sceneName = props.sceneName.Value;\n    this.sceneMemory = Maybe.none();\n    this.objectTree = [];\n    this.undoManager = new UndoManager();\n    // camera properties\n    this.isPanned = false;\n    this.isRotated = false;\n    this.targetPos = undefined;\n    this.cameraSpeed = Vector3.Zero();\n    this.time = new Date().getTime() * 1e-3;\n    this.robotManager = new RobotManager();\n    this.robotAlertModal = React.createRef();\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                   Getters & Setters                                  *\n   *                                                                                      */\n  //========================================================================================\n\n  getRobotManager = () => this.robotManager;\n\n  getSceneMemory = () => this.sceneMemory;\n\n  getAssetsActionMap = () => AssetsManager.getInstance().getAssetsActionMap();\n\n  getRootNode = (tree = [...this.objectTree]) => {\n    return tree.filter(x => x.title === GlobalRef.NAME)[0];\n  };\n\n  getObjectTree = () => this.objectTree;\n\n  setSelectedAction = () => {\n    /* empty */\n  };\n\n  getGraph() {\n    return new TreeObject(this.objectTree).getNode(\n      x => GraphItem.TYPE === x.item.getType()\n    );\n  }\n\n  getUndoManager = () => this.undoManager;\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                    Utils functions                                   *\n   *                                                                                      */\n  //========================================================================================\n\n  getNodeFromTree = (name, objectTree = [...this.objectTree]) => {\n    return TreeServerUtils.ofScene(\n      this.sceneName,\n      this.undoManager\n    ).getNodeFromTree(name, objectTree);\n  };\n\n  deleteNodeFromTreeUsingName = () => {\n    throw new Error(\"Delete Node in viewer Exception\");\n  };\n\n  updateNodeInServer = (name, oldName = null) => {\n    TreeServerUtils.ofScene(\n      this.sceneName,\n      this.undoManager\n    ).updateNodeInServer(name, [...this.objectTree], oldName);\n  };\n\n  addNodeItem2Tree = (\n    nodeItem,\n    parentName = GlobalRef.NAME,\n    is2addInServer = true,\n    isVisible = true\n  ) => {\n    const newObjectTree = TreeServerUtils.ofScene(\n      this.sceneName,\n      this.undoManager\n    ).addNodeItem2Tree(\n      [...this.objectTree],\n      nodeItem,\n      parentName,\n      is2addInServer,\n      isVisible\n    );\n    this.objectTree = newObjectTree;\n  };\n\n  setCameraToTarget = () => {\n    this.sceneMemory.forEach(({ camera }) => {\n      const focusObject = this.isPanned ? \"\" : this.props.focusObject.Value;\n      this.getNodeFromTree(focusObject).forEach(x => {\n        console.log(\"Set Camera, Found Object\", x.item.mesh);\n        const dt = new Date().getTime() * 1e-3 - this.time;\n        this.time = new Date().getTime() * 1e-3;\n        const pos = x.item.mesh._absolutePosition.clone();\n        this.cameraSpeed = !this.targetPos\n          ? Vector3.Zero()\n          : pos.subtract(this.targetPos);\n        this.targetPos = pos;\n        camera.setTarget(pos);\n        camera.position = camera.position.add(this.cameraSpeed.scale(dt));\n        camera.beta = this.isRotated ? camera.beta : 0;\n        // move target object for debug\n        // const p = x.item.mesh.position;\n        // x.item.mesh.position = p.add(new Vector3(p.x, p.y, 0).scale(1e-2));\n      });\n    });\n  };\n\n  addCanvasEventListeners(canvas) {\n    const events = [\n      {\n        name: \"pointerdown\",\n        function: evt => this.onPointerDown(evt)\n      },\n      { name: \"pointerup\", function: evt => this.onPointerUp(evt) },\n      {\n        name: \"pointermove\",\n        function: evt => this.onPointerMove(evt)\n      }\n    ];\n    events.forEach(event =>\n      canvas.addEventListener(event.name, event.function, false)\n    );\n  }\n\n  onPointerDown = evt => {\n    this.isRotated = true;\n    DefaultMouseEvents.onPointerDown(this)(evt);\n  };\n\n  onPointerUp = evt => {\n    DefaultMouseEvents.onPointerUp(this)(evt);\n  };\n\n  onPointerMove = evt => {\n    if (evt.buttons === 4) this.isPanned = true;\n    DefaultMouseEvents.onPointerMove(this)(evt);\n  };\n\n  getMouseCoordsFromRoot() {\n    // TODO: code repetition in mainView\n    return this.sceneMemory.flatMap(({ scene, ground }) => {\n      const maybeCurrent = Util3d.getGroundPosition(scene, ground);\n      return maybeCurrent.flatMap(current =>\n        Maybe.fromNull(this.getRootNode()).map(rootNode =>\n          Util3d.getLocalCoordFromWorld(\n            rootNode.item.mesh,\n            Vec3.ofBabylon(current)\n          ).toBabylon()\n        )\n      );\n    });\n  }\n\n  onResize = (w, h) => {\n    if (w === 0 && h === 0) return;\n    this.getSceneMemory().forEach(({ mouseLocationText }) => {\n      mouseLocationText.left = -w / 2 + w / 17;\n      mouseLocationText.top = -h / 2 + h / 30;\n    });\n  };\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                    Scene functions                                   *\n   *                                                                                      */\n  //========================================================================================\n\n  retrieveSceneFromServer = (afterLoading = () => {}) => {\n    SceneServerUtils.retrieveScene(this.sceneName, data => {\n      const errorList = MainViewRetriever.importScene(this, data.result);\n      this.setState({ errorList });\n      afterLoading();\n    });\n  };\n\n  loadAssets = async () => {\n    const assetManager = AssetsManager.getInstance();\n    if (Object.values(assetManager.getAssets()).length === 0) {\n      await assetManager.load();\n    }\n  };\n\n  loadScene = async () => {\n    await this.loadAssets();\n    this.retrieveSceneFromServer(this.renderScene);\n  };\n\n  renderScene = () => {\n    this.getSceneMemory().forEach(({ engine, scene }) =>\n      engine.runRenderLoop(() => {\n        this.time = new Date().getTime() * 1e-3;\n        scene.render();\n        this.setCameraToTarget();\n      })\n    );\n  };\n\n  onSceneReady = scene => {\n    const engine = scene.getEngine();\n    const canvas = engine.getRenderingCanvas();\n    this.addCanvasEventListeners(canvas);\n    const mouseLocationText = DefaultScene.createMouseLocationText(scene);\n    this.sceneMemory = Maybe.some({\n      engine: engine,\n      canvas: canvas,\n      scene: scene,\n      camera: DefaultScene.createCamera(scene, canvas),\n      light: DefaultScene.createLight(scene),\n      ground: DefaultScene.createMeshGround(scene),\n      gizmoManager: DefaultScene.createGizmo(scene),\n      highlightLayer: {\n        layer: new HighlightLayer(\"hl1\", scene),\n        lastHlMeshes: []\n      },\n      mouseLocationText: mouseLocationText\n    });\n    return scene;\n  };\n\n  showRobotAlertModal = alert => {\n    this.robotAlertModal.current.open(alert);\n  };\n\n  showAlert = (message, type) => {\n    alert(`type:${type} ` + message);\n  };\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                   Render functions                                   *\n   *                                                                                      */\n  //========================================================================================\n\n  renderMenus = () => {\n    // to implement interface of MainView\n  };\n\n  componentDidUpdate = prevProps => {\n    const predicateAction = [\n      {\n        propVar: x => x.sceneName.Value,\n        action: () => (this.sceneName = this.props.sceneName.Value)\n      },\n      {\n        propVar: x => x.focusObject.Value,\n        action: () => {\n          this.isPanned = false;\n          this.isRotated = false;\n          this.setCameraToTarget();\n        }\n      }\n    ];\n    predicateAction.forEach(({ propVar, action }) => {\n      if (propVar(this.props) !== propVar(prevProps)) {\n        action();\n      }\n    });\n  };\n\n  componentDidMount = () => {\n    console.log(\"SceneViewer Did Mount!! \");\n    this.loadScene();\n  };\n\n  render() {\n    const { errorList } = this.state;\n    const resetErrorList = () => this.setState({ errorList: [] });\n    return (\n      <div style={{ display: \"flex\", flexGrow: 1, maxHeight: \"100%\" }}>\n        <BaseViewer\n          onSceneReady={this.onSceneReady}\n          is2render={false}\n          sceneFactory={DefaultScene.createScene}\n        />\n        <ConfirmAlertModal\n          onSubmit={resetErrorList}\n          onCancel={resetErrorList}\n          open={errorList?.length > 0}\n          title={\"Scene Viewer\"}\n          message={\"An error occurred while loading the scene\"}\n          submitText={\"OK\"}\n          submitColor={\"primary\"}\n          cancelText={\"Cancel\"}\n          cancelColor={\"secondary\"}\n        >\n          {getErrorSolutionList(errorList)}\n        </ConfirmAlertModal>\n        <RobotLogModal ref={this.robotAlertModal} title=\"Alert\" />\n        <ReactResizeDetector\n          handleWidth\n          handleHeight\n          onResize={this.onResize}\n        />\n      </div>\n    );\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                   Static functions                                   *\n   *                                                                                      */\n  //========================================================================================\n\n  static getComponentFactory(sceneName) {\n    return masterProps => {\n      const augmentProps = {\n        sceneName,\n        ...masterProps\n      };\n      return <SceneViewer {...augmentProps} />;\n    };\n  }\n\n  static EXTENSION = \".3d\";\n}\n\nSceneViewer.propTypes = {\n  sceneName: PropTypes.shape({ Value: PropTypes.string }),\n  focusObject: PropTypes.shape({ Value: PropTypes.string })\n};\n\nSceneViewer.defaultProps = {\n  sceneName: { Value: \"Pedro\" },\n  focusObject: { Value: \"\" }\n};\n\nfunction getErrorSolutionList(errorList) {\n  return !errorList ? (\n    []\n  ) : (\n    <ul>\n      {errorList.map(({ cause, solution }, i) => {\n        return <li key={\"error\" + i}>{`${cause}, ${solution}`}</li>;\n      })}\n    </ul>\n  );\n}\n\nexport default SceneViewer;\n","class TreeNode {\n  constructor(title, item, children, expanded, isVisible, isStatic = false) {\n    this.title = title;\n    this.item = item;\n    this.children = children;\n    this.expanded = expanded;\n    this.isVisible = isVisible;\n    this.isStatic = isStatic;\n  }\n\n  static dispose(node) {\n    /*\n     * function must be defined here, otherwise it wouldn't work on the UI Tree change method\n     */\n    node.item.dispose();\n    node.children.forEach(child => {\n      TreeNode.dispose(child);\n    });\n  }\n\n  /**\n   *\n   * @param {*} node\n   */\n  static toDict(node) {\n    /*\n     * function must be defined here, otherwise it wouldn't work on the UI Tree change method\n     */\n    return {\n      name: node.title,\n      item: node.item.toDict(),\n      children: node.children.map(child => TreeNode.toDict(child))\n    };\n  }\n\n  static builder() {\n    return new TreeNodeBuilder();\n  }\n}\n\nclass TreeNodeBuilder {\n  constructor() {\n    this._title = null;\n    this._item = {};\n    this._children = [];\n    this._expanded = false;\n    this._isVisible = true;\n    this._isStatic = false;\n  }\n\n  /**\n   * Node title shown on the tree\n   * @param {*} title : Node name displayed on the tree\n  */\n  title(title) {\n    this._title = title;\n    return this;\n  }\n\n  /**\n   * Represents the node item - an instance of the NodeItem class\n   * @param {*} item : Node item\n  */\n  item(item) {\n    this._item = item;\n    return this;\n  }\n\n  /**\n   * List of nodes children under the object\n   * @param {*} children : Children list\n  */\n  children(children) {\n    this._children = children;\n    return this;\n  }\n\n  /**\n   * Indicate the node expansion state, if true means the node is expanded in the scene\n   * @param {*} expanded : expansion state\n  */\n  expanded(expanded) {\n    this._expanded = expanded;\n    return this;\n  }\n\n  /**\n   * Indicate the node visibility state, if true means the node is visible in the scene\n   * @param {*} isVisible : visibility state\n  */\n  isVisible(isVisible) {\n    this._isVisible = isVisible;\n    return this;\n  }\n\n  /**\n   * A static node can't have any children in the object tree and its parent must be of type GlobalRef\n   * @param {*} isStatic : static state\n  */\n  isStatic(isStatic) {\n    this._isStatic = isStatic;\n    return this;\n  }\n\n  /**\n   * Build the TreeNode object\n  */\n  build() {\n    Object.values(this).forEach(value => {\n      if (value === null)\n        throw new Error(\n          `There are missing variables to build a TreeNode, e.g ${value}`\n        );\n    });\n    return new TreeNode(\n      this._title,\n      this._item,\n      this._children,\n      this._expanded,\n      this._isVisible,\n      this._isStatic,\n    );\n  }\n}\n\nexport default TreeNode;\n","import { Maybe } from \"monet\";\n\nfunction getNodeRecursive(tree, predicate) {\n  for (let i = 0; i < tree.length; i++) {\n    const node = tree[i];\n    if (predicate(node)) return Maybe.some(node);\n    const answer = getNodeRecursive(node.children, predicate);\n    if (answer.isSome()) return answer;\n  }\n  return Maybe.none();\n}\n\nfunction getParentNodeRecursive(tree, predicate, parent) {\n  const foundChild = tree\n    .map(x => predicate(x))\n    .reduce((e, x) => e || x, false);\n  if (foundChild) return Maybe.fromNull(parent);\n  for (let i = 0; i < tree.length; i++) {\n    const node = tree[i];\n    const answer = getParentNodeRecursive(node.children, predicate, node);\n    if (answer.isSome()) return answer;\n  }\n  return Maybe.none();\n}\n\nfunction compareTreesRecursive(treeA, treeB, nodeEquality) {\n  if (treeA.length === treeB.length) {\n    let ans = true;\n    for (let i = 0; i < treeA.length; i++) {\n      const nodeA = treeA[i];\n      const nodeB = treeB[i];\n      if (nodeEquality(nodeA, nodeB)) {\n        ans =\n          ans &&\n          compareTreesRecursive(nodeA.children, nodeB.children, nodeEquality);\n      } else {\n        return false;\n      }\n    }\n    return ans;\n  }\n  return false;\n}\n\nfunction mapRecursive(tree, newTree, map) {\n  tree.forEach(nod => {\n    const node = { ...nod };\n    const mappedNode = map(node);\n    mappedNode.children = mapRecursive(node.children, [], map);\n    newTree.push(mappedNode);\n  });\n  return newTree;\n}\n\nfunction forEachRecursive(tree = [], forEach = () => {}) {\n  tree.forEach(node => {\n    forEach(node);\n    forEachRecursive(node.children, forEach);\n  });\n}\n\nfunction expand(node) {\n  node.expanded = true;\n  return node;\n}\n\nfunction filterTree(tree = [], predicate = node => true) {\n  if (!tree || tree.length === 0) return [];\n  let result = [];\n  tree.forEach(nod => {\n    const node = { ...nod };\n    if (predicate(node)) {\n      const expanded = expand(node);\n      expanded.children = filterTree(expanded.children, predicate);\n      result.push(expanded);\n    } else if (node.children) {\n      const children = filterTree(node.children, predicate);\n      if (children.length !== 0) {\n        node.children = children;\n        result.push(expand(node));\n      }\n    }\n  });\n  return result;\n}\n\nfunction flatten(tree = [], predicate = node => true) {\n  if (!tree || tree.length === 0) return [];\n  let result = [];\n  tree.forEach(nod => {\n    const node = { ...nod };\n    if (predicate(node)) result.push(node);\n    result = result.concat(flatten(node.children, predicate));\n  });\n  return result;\n}\n\n/**\n * General purpose tree\n *\n * It just need a basic structure as input:\n *  Tree: Array<Node>\n *  Node: {children: Array<Node>}\n */\nclass TreeObject {\n  constructor(tree) {\n    this.tree = tree;\n  }\n  /**\n   * Return maybe node based on predicate\n   * @param {*} predicate\n   */\n  getNode(predicate) {\n    return getNodeRecursive(this.tree, predicate);\n  }\n\n  /**\n   * return maybe parent node based on the child predicate\n   * @param {*} childPredicate\n   */\n  getParentNode(childPredicate) {\n    return getParentNodeRecursive(this.tree, childPredicate, null);\n  }\n\n  equals(tree, nodeEquality = (a, b) => a === b) {\n    if (tree.constructor === TreeObject) {\n      return compareTreesRecursive(this.tree, tree.tree, nodeEquality);\n    }\n    return compareTreesRecursive(this.tree, tree, nodeEquality);\n  }\n\n  map(nodeMap) {\n    return new TreeObject(mapRecursive(this.tree, [], nodeMap));\n  }\n\n  filter(predicate = node => true) {\n    return new TreeObject(filterTree(this.tree, predicate));\n  }\n\n  /**\n   *\n   * @param {*} predicate: node => Boolean\n   * @returns Array with flattened tree while filtering values with predicate\n   */\n  flatten(predicate = node => true) {\n    return flatten(this.tree, predicate);\n  }\n\n  forEach(map) {\n    forEachRecursive(this.tree, map);\n  }\n}\n\nexport default TreeObject;\n","import { ArcRotateCamera } from \"@babylonjs/core\";\n\nclass CameraBuilder {\n  constructor(scene) {\n    this._scene = scene;\n    this._sphericalCoordinates = null;\n    this._target = null;\n    this._name = `camera${Math.floor(Math.random() * 1e3)}`;\n  }\n\n  name(name) {\n    this._name = name;\n    return this;\n  }\n\n  sphericalCoordinates(sphericalCoordinates) {\n    this._sphericalCoordinates = sphericalCoordinates;\n    return this;\n  }\n\n  target(target) {\n    this._target = target;\n    return this;\n  }\n\n  build() {\n    const variables = Object.values(this);\n    variables.forEach(x => {\n      if (x === null)\n        throw new Error(\n          `There are missing variables to build a camera, e.g ${x}`\n        );\n    });\n    return new ArcRotateCamera(\n      this._name,\n      this._sphericalCoordinates.x,\n      this._sphericalCoordinates.y,\n      this._sphericalCoordinates.z,\n      this._target,\n      this._scene\n    );\n  }\n}\n\nexport default CameraBuilder;\n","import { DirectionalLight } from \"@babylonjs/core\";\n\nclass DirectionalLightBuilder {\n  constructor(scene) {\n    this._scene = scene;\n    this._direction = null;\n    this._name = `Dlight${Math.floor(Math.random() * 1e3)}`;\n    this._intensity = 1;\n  }\n\n  direction(direction) {\n    this._direction = direction;\n    return this;\n  }\n\n  name(name) {\n    this._name = name;\n    return this;\n  }\n\n  intensity(intensity) {\n    this._intensity = intensity;\n    return this;\n  }\n\n  build() {\n    const variables = Object.values(this);\n    variables.forEach(x => {\n      if (x === null)\n        throw new Error(\n          `There are missing variables to build a light, e.g ${x}`\n        );\n    });\n    const light = new DirectionalLight(\n      this._name,\n      this._direction.normalize(),\n      this._scene\n    );\n    light.intensity = this._intensity;\n    return light;\n  }\n}\n\nexport default DirectionalLightBuilder;\n","import { GizmoManager } from \"@babylonjs/core\";\n\nclass GizmoManagerBuilder {\n  constructor(scene) {\n    this._scene = scene;\n    this._isPosition = false;\n    this._isRotation = false;\n    this._isBoundingBox = false;\n    this._isScale = false;\n    this._usePointerToAttachGizmos = false;\n  }\n\n  isPosition(v) {\n    this._isPosition = v;\n    return this;\n  }\n\n  isRotation(v) {\n    this._isRotation = v;\n    return this;\n  }\n\n  isBoundingBox(v) {\n    this._isBoundingBox = v;\n    return this;\n  }\n\n  isScale(v) {\n    this._isScale = v;\n    return this;\n  }\n\n  usePointerToAttachGizmos(v) {\n    this._usePointerToAttachGizmos = v;\n    return this;\n  }\n\n  build() {\n    const gizmoManager = new GizmoManager(this._scene);\n    gizmoManager.positionGizmoEnabled = this._isPosition;\n    gizmoManager.rotationGizmoEnabled = this._isRotation;\n    gizmoManager.boundingBoxGizmoEnabled = this._isBoundingBox;\n    gizmoManager.scaleGizmoEnabled = this._isScale;\n    gizmoManager.usePointerToAttachGizmos = this._usePointerToAttachGizmos;\n    return gizmoManager;\n  }\n}\n\nexport default GizmoManagerBuilder;\n","import {\n  Mesh,\n  Vector3,\n  StandardMaterial,\n  Texture,\n  Space\n} from \"@babylonjs/core\";\n\nclass GroundBuilder {\n  constructor(scene) {\n    this._scene = scene;\n    this._name = `camera${Math.floor(Math.random() * 1e3)}`;\n    this._width = 1;\n    this._height = 1;\n    this._textureSrc = null;\n    this._isPickable = false;\n  }\n\n  name(name) {\n    this._name = name;\n    return this;\n  }\n\n  width(width) {\n    this._width = width;\n    return this;\n  }\n\n  height(height) {\n    this._height = height;\n    return this;\n  }\n\n  textureSrc(textureSrc) {\n    this._textureSrc = textureSrc;\n    return this;\n  }\n\n  isPickable(isPickable) {\n    this._isPickable = isPickable;\n    return this;\n  }\n\n  build() {\n    const ground = Mesh.CreateGround(\n      this._name,\n      this._width,\n      this._height,\n      1,\n      this._scene\n    );\n    ground.translate(new Vector3(0, -1, 0), 1e-1, Space.WORLD);\n    if (this._textureSrc) {\n      ground.material = new StandardMaterial(\n        `Texture${this._name}`,\n        this._scene\n      );\n      ground.material.ambientTexture = new Texture(\n        this._textureSrc,\n        this._scene\n      );\n      ground.material.ambientTexture.uScale = 1;\n      ground.material.ambientTexture.vScale = 1;\n    }\n    ground.isPickable = this._isPickable;\n    return ground;\n  }\n}\n\nexport default GroundBuilder;\n","import { PointLight } from \"@babylonjs/core\";\n\nclass PositionalLightBuilder {\n  constructor(scene) {\n    this._scene = scene;\n    this._position = null;\n    this._name = `light${Math.floor(Math.random() * 1e3)}`;\n    this._intensity = 1;\n  }\n\n  position(position) {\n    this._position = position;\n    return this;\n  }\n\n  name(name) {\n    this._name = name;\n    return this;\n  }\n\n  intensity(intensity) {\n    this._intensity = intensity;\n    return this;\n  }\n\n  build() {\n    const variables = Object.values(this);\n    variables.forEach(x => {\n      if (x === null)\n        throw new Error(\n          `There are missing variables to build a light, e.g ${x}`\n        );\n    });\n    const light = new PointLight(this._name, this._position, this._scene);\n    light.intensity = this._intensity;\n    return light;\n  }\n}\n\nexport default PositionalLightBuilder;\n","import { Mesh, Vector3, Color3, MeshBuilder } from \"@babylonjs/core\";\nclass ReferentialBuilder {\n  constructor(scene) {\n    this._scene = scene;\n    this._name = `referential${Math.floor(Math.random() * 1e3)}`;\n    this._isPickable = true;\n    this._boxParams = { isVisible: true, size: 0.25 };\n    this._size = 1;\n  }\n\n  name(name) {\n    this._name = name;\n    return this;\n  }\n\n  isPickable(isPickable) {\n    this._isPickable = isPickable;\n    return this;\n  }\n\n  boxParams(boxParams) {\n    this._boxParams = boxParams;\n    return this;\n  }\n\n  size(size) {\n    this._size = size;\n    return this;\n  }\n\n  build() {\n    const size = this._size;\n    const axisX = Mesh.CreateLines(\n      `axisX${this._name}`,\n      [\n        new Vector3.Zero(),\n        new Vector3(size, 0, 0),\n        new Vector3(size * 0.95, 0.05 * size, 0),\n        new Vector3(size, 0, 0),\n        new Vector3(size * 0.95, -0.05 * size, 0)\n      ],\n      this._scene\n    );\n    axisX.color = new Color3(1, 0, 0);\n    axisX.isPickable = false;\n    const axisY = Mesh.CreateLines(\n      `axisY${this._name}`,\n      [\n        new Vector3.Zero(),\n        new Vector3(0, size, 0),\n        new Vector3(-0.05 * size, size * 0.95, 0),\n        new Vector3(0, size, 0),\n        new Vector3(0.05 * size, size * 0.95, 0)\n      ],\n      this._scene\n    );\n    axisY.color = new Color3(0, 1, 0);\n    axisY.isPickable = false;\n    const axisZ = Mesh.CreateLines(\n      `axisZ${this._name}`,\n      [\n        new Vector3.Zero(),\n        new Vector3(0, 0, size),\n        new Vector3(0, -0.05 * size, size * 0.95),\n        new Vector3(0, 0, size),\n        new Vector3(0, 0.05 * size, size * 0.95)\n      ],\n      this._scene\n    );\n    axisZ.color = new Color3(0, 0, 1);\n    axisZ.isPickable = false;\n\n    const localOrigin = MeshBuilder.CreateBox(\n      this._name,\n      { size: this._boxParams.size },\n      this._scene\n    );\n    localOrigin.isVisible = this._boxParams.isVisible;\n    localOrigin.isPickable = this._isPickable;\n\n    axisX.parent = localOrigin;\n    axisY.parent = localOrigin;\n    axisZ.parent = localOrigin;\n\n    return localOrigin;\n  }\n}\n\nexport default ReferentialBuilder;\n","import _uniqBy from \"lodash/uniqBy\";\nimport Util3d from \"../Util3d/Util3d\";\nimport KeyPoint from \"../NodeItem/KeyPoint\";\nimport { Quaternion, Observable, Vector3 } from \"@babylonjs/core\";\nimport { Maybe } from \"monet\";\nimport Vec3 from \"../Math/Vec3\";\nimport Vec2 from \"../Math/Vec2\";\nimport MeshSelector from \"../MainView/MeshSelector\";\n\nclass SelectionPlaceHolder {\n  constructor(mainView) {\n    return mainView\n      .getSceneMemory()\n      .map(({ scene }) => {\n        const sceneId = scene._uid;\n        if (sceneId in placeHolderInstance) {\n          return placeHolderInstance[sceneId];\n        }\n        this.scene = scene;\n        this.mesh = null;\n        this.arrayOfMeshes = [];\n        this.angleByMeshName = {};\n        this.mainView = mainView;\n        this.theta = 0;\n        placeHolderInstance[sceneId] = this;\n        return this;\n      })\n      .orSome(this);\n  }\n\n  push(arrayOfMeshes) {\n    if (arrayOfMeshes.length === 0) return this;\n    arrayOfMeshes = Array.isArray(arrayOfMeshes)\n      ? arrayOfMeshes\n      : [arrayOfMeshes];\n    this.arrayOfMeshes = _uniqBy(\n      this.arrayOfMeshes.concat(arrayOfMeshes),\n      mesh => mesh.name\n    );\n    this.angleByMeshName = this.arrayOfMeshes.reduce((map, m) => {\n      map[m.name] = getAngleFromMesh(m);\n      return map;\n    }, {});\n    const placeHolderPosition = Util3d.pointAverage(\n      this.arrayOfMeshes.map(mesh =>\n        Util3d.getGlobalCoordinates(mesh, mesh.position).toBabylon()\n      )\n    );\n    this.createPlaceHolderIn(placeHolderPosition);\n    return this;\n  }\n\n  clear() {\n    this.arrayOfMeshes = [];\n    this.mesh && this.mesh.dispose();\n    return this;\n  }\n\n  createPlaceHolderIn(p) {\n    if (this.mesh === null || this.mesh.isDisposed()) {\n      this.mesh = KeyPoint.ofDict(this.scene, {\n        name: NAME,\n        type: SelectionPlaceHolder,\n        position: [0, 0, 0],\n        quaternion: Quaternion.Identity(),\n        color: [0.5, 0.5, 0.5],\n        keyValueMap: {},\n        isVisible: true\n      }).mesh;\n      this.mesh.material = this.getSelPlaceHolderShader();\n    }\n    const that = this;\n    this.mesh.getMouseContextActions = () => [\n      {\n        title: \"Delete\",\n        onClick: () => {\n          that.mainView.addGizmo2Mesh();\n          that.clear();\n          MeshSelector.ofMainView(this.mainView).clear();\n          that.mainView.highlightMeshesInScene();\n          that.mainView.highlightNodesInTree();\n        }\n      }\n    ];\n    this.mesh.onClick = () => {};\n    this.mesh.isSelectionPlaceHolder = true;\n    this.mesh.parent = this.mainView.getRootNode().item.mesh;\n    this.mesh.position = p.add(new Vector3(0, 0, HEIGHT));\n    this.mesh.observers = new Observable();\n    this.mesh.observers.add(this.getPlaceHolderObs());\n    return this.mesh;\n  }\n\n  getSelPlaceHolderShader() {\n    return Util3d.getShaderMaterial({\n      name: \"placeHolderShader\",\n      vertex: VERTEX,\n      frag: FRAG\n    })(this.scene);\n  }\n\n  getPlaceHolderObs() {\n    const that = this;\n    return ({\n      updatedPointMesh: placeHolder,\n      is2updateServer,\n      displacement\n    }) => {\n      const filteredMeshes = that.arrayOfMeshes.filter(\n        mesh => !mesh.isDisposed()\n      );\n      const theta = getAngleFromMesh(placeHolder);\n      const dTheta = theta - that.theta;\n      that.theta = theta;\n\n      filteredMeshes.forEach(mesh => {\n        handleMotion(theta, mesh, displacement, placeHolder, dTheta, that);\n        if (is2updateServer) {\n          that.mainView.updateNodeInServer(mesh.name);\n        }\n        // notify babylonjs observers\n        Maybe.fromNull(mesh.observers).forEach(obs =>\n          obs.notifyObservers({\n            updatedPointMesh: mesh,\n            is2updateServer,\n            displacement\n          })\n        );\n        // notify graph observers\n        Maybe.fromNull(mesh.graphVertex).forEach(({ vertexObs }) => {\n          vertexObs({\n            updatedPointMesh: mesh,\n            is2updateServer,\n            displacement\n          });\n        });\n      });\n      if (filteredMeshes.length === 0) {\n        that.clear();\n      }\n    };\n  }\n\n  static ofMainView(mainView) {\n    return new SelectionPlaceHolder(mainView);\n  }\n}\n\nconst VERTEX = `precision highp float;\n\n// Attributes\nattribute vec3 position;\nattribute vec3 normal;\n\n// Uniforms\nuniform mat4 worldViewProjection;\n\n// Varying\nvarying vec3 vPosition;\nvarying vec3 vNormal;\n\nvoid main(void) {\n    gl_Position = worldViewProjection * vec4(position, 1.0);\n    vPosition = position;\n    vNormal = normal;\n}`;\n\nconst FRAG = `\nprecision highp float;\n\n// Varying\nvarying vec3 vPosition;\nvarying vec3 vNormal;\n\n// Uniforms\nuniform mat4 world;\nuniform float time;\n\nvoid main(void) {\n    // World values\n    vec3 p = vec3(world * vec4(vPosition, 1.0));\n    vec3 n = normalize(vec3(world * vec4(vNormal, 0.0)));\n    vec3 nColor = n * 0.5 + 0.5;\n    float spatialFreq = 20.;\n    float timeFreq = 10.;\n    float power = sin(spatialFreq * p.y - timeFreq * time);\n    power *= power;\n    vec3 color = power *  nColor + (1. - power) * vec3(1,1,1);\n    gl_FragColor = vec4(color, 1.);\n}`;\n\nconst getAngleFromMesh = mesh =>\n  Maybe.fromNull(mesh.rotationQuaternion)\n    .map(q => 2 * Math.atan2(q.z, q.w))\n    .orSome(0);\n\nconst placeHolderInstance = {};\nconst NAME = \"placeholder\";\nconst HEIGHT = 1.5;\n\nfunction handleMotion(theta, mesh, displacement, placeHolder, dTheta, that) {\n  if (Math.abs(dTheta) < 1e-3) {\n    handleTranslation(mesh, displacement);\n  } else {\n    handleRotation(placeHolder, mesh, dTheta, that, theta);\n  }\n}\n\nfunction handleRotation(placeHolder, mesh, dTheta, that, theta) {\n  const baseCoord = Vec3.ofBabylon(placeHolder.position);\n  const v = Vec3.ofBabylon(mesh.position).sub(baseCoord).toVec2();\n  const eITheta = Vec2.of(Math.cos(dTheta), Math.sin(dTheta));\n  const rV = eITheta.prod(v);\n  const finalV = Vec3.of([rV.x, rV.y, 0]).toBabylon();\n  mesh.position = new Vector3(\n    placeHolder.position.x,\n    placeHolder.position.y,\n    mesh.position.z\n  ).add(finalV);\n  const finalTheta = that.angleByMeshName[mesh.name] + theta;\n  // divide by 2 because of quaternion multiplication.\n  mesh.rotationQuaternion = new Quaternion(\n    0,\n    0,\n    Math.sin(finalTheta / 2),\n    Math.cos(finalTheta / 2)\n  );\n}\n\nfunction handleTranslation(mesh, displacement) {\n  const localDisplacement = Util3d.getLocalCoordFromWorld(\n    mesh,\n    Vec3.ofBabylon(displacement),\n    false\n  );\n  const newPos = Vec3.ofBabylon(mesh.position).add(localDisplacement);\n  // translating\n  mesh.position = newPos.toBabylon();\n}\n\nexport default SelectionPlaceHolder;\n","import { Animation, ActionManager, ExecuteCodeAction } from \"@babylonjs/core\";\nimport {\n  Rectangle,\n  TextBlock,\n  Control,\n  AdvancedDynamicTexture\n} from \"@babylonjs/gui\";\n\nclass TooltipBuilder {\n  constructor(mesh, scene) {\n    this._mesh = mesh;\n    this._scene = scene;\n    this._name = `tooltip${Math.floor(Math.random() * 1e3)}`;\n    // Tooltip box (Rectangle) properties\n    this._width = null;\n    this._height = null;\n    this._thickness = 2;\n    this._linkOffsetX = \"100px\";\n    this._linkOffsetY = \"-50px\";\n    this._background = \"grey\";\n    this._alpha = 0.7;\n    this._scaleX = 0;\n    this._scaleY = 0;\n    this._cornerRadius = 30;\n    // Tooltip text (TextBlock) properties\n    this._text = \"\";\n    this._color = \"White\";\n    this._fontSize = 14;\n    this._padding = \"20px\";\n  }\n\n  name(name) {\n    this._name = name;\n    return this;\n  }\n\n  mesh(mesh) {\n    this._mesh = mesh;\n    return this;\n  }\n\n  // Rectangle properties\n\n  width(width) {\n    this._width = width;\n    return this;\n  }\n\n  height(height) {\n    this._height = height;\n    return this;\n  }\n\n  linkOffsetX(linkOffsetX) {\n    this._linkOffsetX = linkOffsetX;\n    return this;\n  }\n\n  linkOffsetY(linkOffsetY) {\n    this._linkOffsetY = linkOffsetY;\n    return this;\n  }\n\n  background(background) {\n    this._background = background;\n    return this;\n  }\n\n  alpha(alpha) {\n    this._alpha = alpha;\n    return this;\n  }\n\n  scaleX(scaleX) {\n    this._scaleX = scaleX;\n    return this;\n  }\n\n  scaleY(scaleY) {\n    this._scaleY = scaleY;\n    return this;\n  }\n\n  cornerRadius(cornerRadius) {\n    this._cornerRadius = cornerRadius;\n    return this;\n  }\n\n  // Tooltip properties\n\n  text(text) {\n    this._text = text;\n    return this;\n  }\n\n  color(color) {\n    this._color = color;\n    return this;\n  }\n\n  fontSize(fontSize) {\n    this._fontSize = fontSize;\n    return this;\n  }\n\n  padding(padding) {\n    this._padding = padding;\n    return this;\n  }\n\n  build() {\n    // GUI\n    const builder = this;\n    const advancedTexture = AdvancedDynamicTexture.CreateFullscreenUI(\"UI\");\n    advancedTexture.useInvalidateRectOptimization = false;\n    // Set tooltip rectangle box\n    const tooltipBox = new Rectangle(this._name);\n    advancedTexture.addControl(tooltipBox);\n    tooltipBox.thickness = 2;\n    if (this._width) tooltipBox.width = this._width;\n    if (this._height) tooltipBox.height = this._height;\n    tooltipBox.linkOffsetX = this._linkOffsetX;\n    tooltipBox.linkOffsetY = this._linkOffsetY;\n    tooltipBox.transformCenterX = 0;\n    tooltipBox.transformCenterY = 1;\n    tooltipBox.background = this._background;\n    tooltipBox.alpha = this._alpha;\n    tooltipBox.scaleX = this._scaleX;\n    tooltipBox.scaleY = this._scaleY;\n    tooltipBox.cornerRadius = this._cornerRadius;\n    tooltipBox.adaptWidthToChildren = true;\n    tooltipBox.adaptHeightToChildren = true;\n    tooltipBox.linkWithMesh(this._mesh);\n    // Set tooltip text block\n    const textBlock = new TextBlock();\n    textBlock.text = this._text;\n    textBlock.color = this._color;\n    textBlock.fontSize = this._fontSize;\n    textBlock.textVerticalAlignment = Control.VERTICAL_ALIGNMENT_TOP;\n    textBlock.textHorizontalAlignment = Control.HORIZONTAL_ALIGNMENT_CENTER;\n    tooltipBox.addControl(textBlock);\n    textBlock.alpha = 1 / textBlock.parent.alpha;\n    textBlock.paddingTop = this._padding;\n    textBlock.paddingBottom = this._padding;\n    textBlock.paddingLeft = this._padding;\n    textBlock.paddingRight = this._padding;\n    textBlock.resizeToFit = true;\n    // Set mesh action manager\n    const actionManager = new ActionManager(this._scene);\n    this._mesh.actionManager = actionManager;\n    // Animation to show/hide tooltip\n    const scaleXAnimation = new Animation(\n      \"tooltipAnimation\",\n      \"scaleX\",\n      30,\n      Animation.ANIMATIONTYPE_FLOAT,\n      Animation.ANIMATIONLOOPMODE_CONSTANT\n    );\n    const scaleYAnimation = new Animation(\n      \"tooltipAnimation\",\n      \"scaleY\",\n      30,\n      Animation.ANIMATIONTYPE_FLOAT,\n      Animation.ANIMATIONLOOPMODE_CONSTANT\n    );\n    const keys = [\n      {\n        frame: 0,\n        value: 0\n      },\n      {\n        frame: 10,\n        value: 1\n      }\n    ];\n    scaleXAnimation.setKeys(keys);\n    scaleYAnimation.setKeys(keys);\n    tooltipBox.animations = [];\n    tooltipBox.animations.push(scaleXAnimation);\n    tooltipBox.animations.push(scaleYAnimation);\n    // Register actions: OnPointerOverTrigger\n    actionManager.registerAction(\n      new ExecuteCodeAction(ActionManager.OnPointerOverTrigger, function (_) {\n        builder._scene.beginAnimation(tooltipBox, 0, 10, false);\n      })\n    );\n    // Register actions: OnPointerOutTrigger\n    actionManager.registerAction(\n      new ExecuteCodeAction(ActionManager.OnPointerOutTrigger, function (_) {\n        builder._scene.beginAnimation(tooltipBox, 10, 0, false);\n      })\n    );\n    return textBlock;\n  }\n}\n\nexport default TooltipBuilder;\n","import Vec3 from \"../Math/Vec3\";\nimport Mat3 from \"../Math/Mat3\";\nimport { Maybe } from \"monet\";\nimport GizmoManagerBuilder from \"./GizmoManagerBuilder.js\";\nimport CameraBuilder from \"./CameraBuilder\";\nimport PositionalLightBuilder from \"./PositionalLightBuilder\";\nimport ReferentialBuilder from \"./ReferentialBuilder\";\nimport GroundBuilder from \"./GroundBuilder\";\nimport TooltipBuilder from \"./TooltipBuilder\";\nimport DirectionalLightBuilder from \"./DirectionalLightBuilder\";\nimport earcut from \"earcut\";\nimport {\n  Vector3,\n  Color3,\n  Quaternion,\n  StandardMaterial,\n  VertexData,\n  Mesh,\n  Matrix,\n  MeshBuilder,\n  VertexBuffer,\n  Curve3,\n  ActionManager,\n  ExecuteCodeAction,\n  ShaderMaterial,\n  Camera\n} from \"@babylonjs/core\";\nimport GlobalRef from \"../NodeItem/GlobalRef\";\nimport Box from \"../NodeItem/Box\";\nimport MaterialCache from \"../Utils/MaterialCache\";\n\nclass Util3d {\n  /**\n   *\n   * @param {*} mesh\n   * @param {*} localPosition: Vector3\n   * @returns Vec3\n   */\n  static getGlobalCoordinates(mesh, localPosition) {\n    if (\n      (mesh.parent && mesh.parent.name === GlobalRef.NAME) ||\n      mesh.name === GlobalRef.NAME\n    ) {\n      return Vec3.ofBabylon(localPosition);\n    }\n    const meshParent = mesh.parent;\n    const meshParentPos = Vec3.ofBabylon(meshParent.position);\n    const meshParentRotMat = Util3d.getRotationMatrix(meshParent);\n    const meshParentScaling = Vec3.ofBabylon(meshParent.scaling);\n    return meshParentRotMat\n      .prodVec(\n        meshParentScaling.mul(\n          Util3d.getGlobalCoordinates(mesh.parent, localPosition)\n        )\n      )\n      .add(meshParentPos);\n  }\n\n  /**\n   *\n   * @param {*} mesh\n   * @param {*} localPosition : Vec3\n   * @returns\n   */\n  static getParentCoord(mesh, localPosition, withTranslation = true) {\n    const meshParent = mesh.parent;\n    const meshParentPos = withTranslation\n      ? Vec3.ofBabylon(meshParent.position)\n      : Vec3.ZERO;\n    const meshParentRotMat = Util3d.getRotationMatrix(meshParent);\n    const meshParentScaling = Vec3.ofBabylon(meshParent.scaling);\n    return meshParentRotMat\n      .prodVec(meshParentScaling.mul(localPosition))\n      .add(meshParentPos);\n  }\n\n  /**\n   *\n   * @param {*} mesh\n   * @param {*} x: Vector3 in mesh local coord\n   * @returns Vector3\n   */\n  static getGlobalCoord(mesh, x) {\n    if (\n      (mesh.parent && mesh.parent.name === GlobalRef.NAME) ||\n      mesh.name === GlobalRef.NAME\n    ) {\n      return x;\n    }\n    const meshParent = mesh.parent;\n    const meshParentPos = Vec3.ofBabylon(meshParent.position);\n    const meshParentRotMat = Util3d.getRotationMatrix(meshParent);\n    const meshParentScaling = Vec3.ofBabylon(meshParent.scaling);\n    const childPos = meshParentRotMat\n      .prodVec(meshParentScaling.mul(Vec3.ofBabylon(x)))\n      .add(meshParentPos);\n    return Util3d.getGlobalCoord(meshParent, childPos.toBabylon());\n  }\n\n  static getBabylonCoordinates(positionInWorld) {\n    return GlobalRef.forwardCoordinates(positionInWorld);\n  }\n\n  /**\n   *\n   * @param {*} mesh\n   * @param {*} worldPosition: Vector3 from GlobalRef coordinate frame\n   */\n  static getLocalCoordFromGlobal(mesh, worldPosition, withTranslation = true) {\n    if (\n      (mesh.parent && mesh.parent.name === GlobalRef.NAME) ||\n      mesh.name === GlobalRef.NAME\n    )\n      return Vec3.ofBabylon(worldPosition);\n    const meshParent = mesh.parent;\n    const meshParentPos = withTranslation\n      ? Vec3.ofBabylon(meshParent.position)\n      : Vec3.ZERO;\n    const meshParentRotMat = Util3d.getRotationMatrix(meshParent);\n    const meshParentScaling = Vec3.ofBabylon(meshParent.scaling);\n    return meshParentScaling\n      .map(z => 1 / z)\n      .mul(\n        meshParentRotMat.dotVec(\n          Util3d.getLocalCoordFromGlobal(\n            meshParent,\n            worldPosition,\n            withTranslation\n          ).sub(meshParentPos)\n        )\n      );\n  }\n\n  /**\n   *\n   * @param {*} mesh\n   * @param {*} worldPosition: Vec3 from World(Babylon) coordinate frame\n   *\n   * @returns localPosition: Vec3\n   */\n  static getLocalCoordFromWorld(mesh, worldPosition, withTranslation = true) {\n    /// WARNING: very similar with getLocalCoordFromGlobal\n    if (!mesh.parent) {\n      return worldPosition;\n    }\n    const meshParent = mesh.parent;\n    const meshParentPos = withTranslation\n      ? Vec3.ofBabylon(meshParent.position)\n      : Vec3.ZERO;\n    const meshParentRotMat = Util3d.getRotationMatrix(meshParent);\n    const meshParentScaling = Vec3.ofBabylon(meshParent.scaling);\n    // assume scaling != 0\n    const inverseScaling = meshParentScaling.map(x => 1.0 / x);\n\n    return inverseScaling.mul(\n      meshParentRotMat.dotVec(\n        Util3d.getLocalCoordFromWorld(\n          meshParent,\n          worldPosition,\n          withTranslation\n        ).sub(meshParentPos)\n      )\n    );\n  }\n\n  /**\n   * World to Global coords\n   * @param {*} parentView: MainView\n   */\n  static toGlobalCoord = parentView => {\n    const rootMesh = parentView.getRootNode().item.mesh;\n    return arrayOfVector3 => {\n      const transform = p =>\n        Util3d.getLocalCoordFromWorld(\n          { parent: rootMesh },\n          Vec3.ofBabylon(p)\n        ).toBabylon();\n      if (Array.isArray(arrayOfVector3)) {\n        return arrayOfVector3.map(transform);\n      }\n      return transform(arrayOfVector3);\n    };\n  };\n\n  static getRotationMatrix(mesh) {\n    const localRotationMatrix = new Matrix();\n    const maybeQuaternion = Maybe.fromNull(mesh?.rotationQuaternion);\n    maybeQuaternion.forEach(quaternion =>\n      quaternion.toRotationMatrix(localRotationMatrix)\n    );\n    maybeQuaternion.orElseRun(() => {\n      const quaternion = Quaternion.RotationYawPitchRoll(\n        mesh.rotation.y,\n        mesh.rotation.x,\n        mesh.rotation.z\n      );\n      quaternion.toRotationMatrix(localRotationMatrix);\n    });\n    return Mat3.ofBabylonMatrix(localRotationMatrix);\n  }\n\n  static showNormals(scene, mesh, size = 1, color = Color3.Red()) {\n    const normals = mesh.getVerticesData(VertexBuffer.NormalKind);\n    const positions = mesh.getVerticesData(VertexBuffer.PositionKind);\n    const lines = [];\n    for (let i = 0; i < normals.length; i += 3) {\n      const v1 = Vector3.FromArray(positions, i);\n      const v2 = v1.add(Vector3.FromArray(normals, i).scaleInPlace(size));\n      lines.push([v1.add(mesh.position), v2.add(mesh.position)]);\n    }\n    const normalLines = MeshBuilder.CreateLineSystem(\n      \"normalLines\",\n      { lines: lines },\n      scene\n    );\n    normalLines.color = color;\n    normalLines.parent = mesh;\n    return normalLines;\n  }\n\n  static orthogonalBasisFromVector(u) {\n    const identityMatrix = [\n      new Vector3(1, 0, 0),\n      new Vector3(0, 1, 0),\n      new Vector3(0, 0, 1)\n    ];\n    const uArray = [u.x, u.y, u.z];\n    // choose pivot\n    let pivot = 0;\n    for (let i = 0; i < 3; i++) {\n      if (uArray[i] !== 0) {\n        pivot = i;\n        break;\n      }\n    }\n    let v = identityMatrix[(pivot + 1) % 3].add(\n      identityMatrix[pivot].scale(-uArray[(pivot + 1) % 3] / uArray[pivot])\n    );\n    v = v.normalize();\n    let w = identityMatrix[(pivot + 2) % 3].add(\n      identityMatrix[pivot].scale(-uArray[(pivot + 2) % 3] / uArray[pivot])\n    );\n    w = w.normalize();\n    w = w.subtract(v.scale(Vector3.Dot(v, w)));\n    return { u: Vector3.FromArray(uArray).normalize(), v: v, w: w.normalize() };\n  }\n\n  static createOrientedCone = (\n    scene,\n    u = new Vector3(1, 0, 0),\n    color = Color3.Gray(),\n    name = `OrientedCone${randomDigits()}`,\n    isPickable = true,\n    segments = 16\n  ) => {\n    const surface = {\n      positions: [],\n      faces: []\n    };\n    const d = u.length() / 3;\n    const mat3 = Util3d.orthogonalBasisFromVector(u);\n    const v = mat3.v;\n    const w = mat3.w;\n\n    const orientation = Math.sign(Vector3.Dot(Vector3.Cross(v, w), u));\n    // positions\n    for (let i = 0; i < segments; i++) {\n      const theta = orientation * ((2 * Math.PI) / segments) * i;\n      surface.positions.push(\n        v.scale(d * Math.cos(theta)).add(w.scale(d * Math.sin(theta)))\n      );\n    }\n\n    surface.positions.push(Vector3.Zero());\n    surface.positions.push(u);\n\n    const zeroIndex = surface.positions.length - 1;\n    const uIndex = surface.positions.length - 2;\n\n    for (let i = 0; i < segments; i++) {\n      // bottom faces\n      surface.faces.push([zeroIndex, (i + 1) % segments, i]);\n      // cone faces\n      surface.faces.push([uIndex, i, (i + 1) % segments]);\n    }\n\n    // mesh\n    const mesh = Util3d.meshFromPositionAndFaces(\n      name,\n      scene,\n      surface.positions,\n      surface.faces\n    );\n    mesh.convertToFlatShadedMesh();\n\n    const materialName = `OrientedConeMaterial${name}`;\n    mesh.material = MATERIAL_CACHE.get(materialName, scene).orLazy(() => {\n      const material = Util3d.getMaterialFromColor(color, scene, materialName);\n      MATERIAL_CACHE.put(materialName, scene, material);\n      return material;\n    });\n    mesh.isPickable = isPickable;\n    return mesh;\n  };\n\n  static createSphere = (\n    scene,\n    color = Color3.Gray(),\n    diameter = 1,\n    name = `Sphere${randomDigits()}`,\n    isPickable = true\n  ) => {\n    const sphere = Mesh.CreateSphere(name, 16, diameter, scene);\n    const material = Util3d.getMaterialFromColor(\n      color,\n      scene,\n      `SphereMaterial${name}`\n    );\n    sphere.material = material;\n    sphere.isPickable = isPickable;\n    return sphere;\n  };\n\n  static createBox = (\n    scene,\n    color = Color3.Gray(),\n    size = Box.DEFAULT_SIZE,\n    name = `Box${randomDigits()}`,\n    isPickable = true\n  ) => {\n    const box = Mesh.CreateBox(name, size, scene);\n    const material = new StandardMaterial(`BoxMaterial${name}`, scene);\n    material.diffuseColor = color;\n    material.emissiveColor = color;\n    box.material = material;\n    box.isPickable = isPickable;\n    return box;\n  };\n\n  static createTubeFromPoints = (\n    scene,\n    points,\n    color = Color3.Gray(),\n    radius = 1,\n    name = `Tube${randomDigits()}`,\n    isPickable = true\n  ) => {\n    const mesh = MeshBuilder.CreateTube(\n      name,\n      {\n        path: points,\n        radius: radius,\n        sideOrientation: Mesh.DOUBLESIDE,\n        updatable: true,\n        cap: Mesh.CAP_ALL\n      },\n      scene\n    );\n    const materialName = `Material${name}`;\n    mesh.material = MATERIAL_CACHE.get(materialName, scene).orLazy(() => {\n      const material = Util3d.getMaterialFromColor(color, scene, materialName);\n      MATERIAL_CACHE.put(materialName, scene, material);\n      return material;\n    });\n    mesh.isPickable = isPickable;\n    return mesh;\n  };\n\n  static positionalLightBuilder = scene => {\n    return new PositionalLightBuilder(scene);\n  };\n\n  static directionalLightBuilder = scene => {\n    return new DirectionalLightBuilder(scene);\n  };\n\n  static cameraBuilder(scene) {\n    return new CameraBuilder(scene);\n  }\n\n  static gizmoManagerBuilder(scene) {\n    return new GizmoManagerBuilder(scene);\n  }\n\n  static referentialBuilder = scene => {\n    return new ReferentialBuilder(scene);\n  };\n\n  /**\n   * Return a maybe position of intersection of the mouse and a ground mesh\n   *\n   * @param {Scene} scene Babylon scene\n   * @param {Ground} ground a Babylon mesh that represents the ground\n   * @returns {Maybe} a maybe Vector3 representing the mouse ground intersection\n   */\n  static getGroundPosition = function (scene, ground) {\n    // Use a predicate to get position on the ground\n    const pickInfo = scene.pick(\n      scene.pointerX,\n      scene.pointerY,\n      mesh => mesh === ground\n    );\n    if (pickInfo.hit) return Maybe.some(pickInfo.pickedPoint);\n    return Maybe.none();\n  };\n\n  static pickMesh = (scene, ground) => {\n    const pickInfo = scene.pick(\n      scene.pointerX,\n      scene.pointerY,\n      mesh => mesh !== ground && mesh.isEnabled()\n    );\n    if (pickInfo.hit && pickInfo.pickedMesh.isPickable) {\n      return Maybe.some(pickInfo.pickedMesh);\n    }\n    return Maybe.none();\n  };\n\n  static groundBuilder = scene => {\n    return new GroundBuilder(scene);\n  };\n\n  static meshFromPositionAndFaces(\n    name,\n    scene,\n    positions,\n    faces,\n    updatable = true\n  ) {\n    const vertexData = new VertexData();\n\n    vertexData.positions = positions.flatMap(z => [z.x, z.y, z.z]);\n    vertexData.indices = faces.flatMap(z => z);\n\n    let mesh = new Mesh(name, scene);\n    vertexData.applyToMesh(mesh, updatable);\n    // mesh.createNormals();\n    return mesh;\n  }\n\n  /**\n   *\n   * @param {*} polygon: Array of babylonjs vector3, representing a boundary of a polygon\n   */\n  static triangulatePolygon(polygon) {\n    const triangulation = earcut(\n      polygon.map(x => [x.x, x.y, x.z]).flatMap(x => x),\n      null,\n      3\n    );\n    const len = triangulation.length / 3;\n    const ans = [];\n    for (let i = 0; i < len; i++) {\n      const i3 = 3 * i;\n      ans.push([\n        triangulation[i3],\n        triangulation[i3 + 1],\n        triangulation[i3 + 2]\n      ]);\n    }\n    return ans;\n  }\n\n  /**\n   *\n   * @param {*} polygon: Array of babylonjs vector3, representing a boundary of a polygon\n   * Returns a real number representing the orientation of the curve, if positive represents a counterclockwise orientation, clockwise otherwise.\n   */\n  static computeOrientation(polygon) {\n    const n = polygon.length;\n    const vec3Poly = polygon.map(x => Vec3.ofBabylon(x));\n    let orientation = 0;\n    vec3Poly.forEach((a, i) => {\n      const modi = (i + 1) % n;\n      const edge = vec3Poly[modi].sub(vec3Poly[i]);\n      orientation += Vec3.of([-a.y, a.x, a.z]).dot(edge);\n    });\n    return orientation / 2;\n  }\n\n  /**\n   * @param {*} arrayOfPoints: array of babylon vec3\n   * Returns the average\n   */\n  static pointAverage(arrayOfPoints) {\n    if (!arrayOfPoints || arrayOfPoints.length === 0) return Vector3.Zero();\n    return arrayOfPoints\n      .reduce((e, x) => e.add(x), Vector3.Zero())\n      .scale(1 / arrayOfPoints.length);\n  }\n\n  static pointAverageVec3(arrayOfPoints) {\n    if (!arrayOfPoints || arrayOfPoints.length === 0) return Vec3.ZERO;\n    return arrayOfPoints\n      .reduce((e, x) => e.add(x), Vec3.ZERO)\n      .scale(1 / arrayOfPoints.length);\n  }\n\n  static randomVector3(a, b) {\n    return new Vector3.FromArray(\n      [0, 0, 0].map(x => a + (b - a) * Math.random())\n    );\n  }\n\n  static getMaterialFromColor(\n    color,\n    scene,\n    name = `MaterialFromColor${randomDigits()}`\n  ) {\n    const material = new StandardMaterial(name, scene);\n    material.diffuseColor = color;\n    material.emissiveColor = color;\n    return material;\n  }\n\n  static piecewiseCurveDistance = curve => {\n    let distance = 0;\n    for (let i = 0; i < curve.length - 1; i++) {\n      const v = curve[i + 1].subtract(curve[i]);\n      distance += v.length();\n    }\n    return distance;\n  };\n\n  static getCurveOrientations = curve => {\n    const orientations = [];\n    for (let i = 0; i < curve.length - 1; i++) {\n      const v = curve[i + 1].subtract(curve[i]);\n      orientations.push(Math.atan2(v.y, v.x));\n    }\n    orientations.push(orientations[orientations.length - 1]);\n    return orientations;\n  };\n\n  static getSplineFromCurve = (curve, nbPoints = 7) => {\n    const closed = false;\n    return {\n      points: Curve3.CreateCatmullRomSpline(curve, nbPoints, closed).getPoints()\n    };\n  };\n\n  static splineObj2redis = splineObj => {\n    const orientations = Util3d.getCurveOrientations(splineObj.points);\n    return splineObj.points.map((x, i) => {\n      return [x.x, x.y, orientations[i]];\n    });\n  };\n\n  static getShaderMaterial = ({\n    name = `CustomShader${randomDigits()}`,\n    vertex = VERTEX,\n    frag = FRAG,\n    onBindObservable = SHADER_BIND,\n    preProcessShader = SHADER_PRE\n  }) => scene => {\n    /**\n     * Check this for shader re-usage, if a problem appears\n     * https://playground.babylonjs.com/#KJ3BVA#4\n     * */\n    const shaderMaterial = new ShaderMaterial(\n      name,\n      scene,\n      { vertexSource: vertex, fragmentSource: frag },\n      {\n        attributes: [\"position\", \"normal\", \"uv\"],\n        uniforms: [\n          \"world\",\n          \"worldView\",\n          \"worldViewProjection\",\n          \"view\",\n          \"projection\"\n        ]\n      }\n    );\n    preProcessShader(scene, shaderMaterial);\n    shaderMaterial.onBindObservable.add(() => {\n      onBindObservable(scene, shaderMaterial);\n    });\n    return shaderMaterial;\n  };\n\n  static setOrthoView(camera, scene) {\n    camera.mode = Camera.ORTHOGRAPHIC_CAMERA;\n    const aspect = scene.getEngine().getAspectRatio(camera);\n    const distance = camera.position.length();\n    camera.orthoLeft = -distance / 2;\n    camera.orthoRight = distance / 2;\n    camera.orthoBottom = camera.orthoLeft * aspect;\n    camera.orthoTop = camera.orthoRight * aspect;\n  }\n\n  static setPerspectiveView(camera, scene) {\n    camera.mode = Camera.PERSPECTIVE_CAMERA;\n  }\n\n  /**\n   *\n   * @param {*} scene: Babylonjs Scene\n   * @param {*} name: String\n   * @param {*} begin: Vector3\n   * @param {*} end: Vector3\n   */\n  static getArrow(scene, name, begin, end, radius = 1) {\n    const arrowTube = Util3d.createTubeFromPoints(\n      scene,\n      [begin, end],\n      Color3.Gray(),\n      radius,\n      name + \"tube\"\n    );\n    const arrowCone = Util3d.createOrientedCone(\n      scene,\n      end\n        .subtract(begin)\n        .normalize()\n        .scale(radius * 7),\n      Color3.Gray(),\n      name + \"cone\"\n    );\n    arrowCone.position = end;\n    const arrowMesh = new Mesh(name, scene);\n    arrowTube.parent = arrowMesh;\n    arrowCone.parent = arrowMesh;\n    return arrowMesh;\n  }\n\n  /*\n   * Show tooltip on mesh on mouse over\n   *\n   * @param {Mesh} mesh: Mesh to add the tooltip\n   * @param {Scene} scene: Scene\n   * @param {String} tooltipText: Text to be added to the tooltip\n   *\n   * @returns {TextBlock} TextBlock instance to allow dynamic changes\n   *  on the tooltip content by: textBlock.text = \"new text\"\n   */\n  static addTooltipToMesh(mesh, scene, tooltipText = \"\") {\n    return new TooltipBuilder(mesh, scene).text(tooltipText).build();\n  }\n\n  static addClickActionToMesh(mesh, scene, callback) {\n    // Set mesh action manager\n    const actionManager = new ActionManager(scene);\n    mesh.actionManager = actionManager;\n    // Register actions: OnPickDownTrigger (click action)\n    actionManager.registerAction(\n      new ExecuteCodeAction(ActionManager.OnPickDownTrigger, function (_) {\n        callback();\n      })\n    );\n    // Register actions: OnPointerOverTrigger (hover effect)\n    actionManager.registerAction(\n      new ExecuteCodeAction(ActionManager.OnPointerOverTrigger, function (_) {\n        mesh.material.unfreeze();\n        mesh.material.emissiveColor = Color3.Gray();\n      })\n    );\n    // Register actions: OnPointerOutTrigger (clear hover effect)\n    actionManager.registerAction(\n      new ExecuteCodeAction(ActionManager.OnPointerOutTrigger, function (_) {\n        mesh.material.emissiveColor = Color3.White();\n        setTimeout(() => mesh.material.freeze(), 10);\n      })\n    );\n  }\n}\n\nconst randomDigits = () => {\n  return Math.floor(Math.random() * 1e3);\n};\n\nconst VERTEX = `precision highp float;\n\n// Attributes\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 uv;\n\n// Uniforms\nuniform mat4 worldViewProjection;\n\n// Varying\nvarying vec3 vPosition;\nvarying vec3 vNormal;\nvarying vec2 vUV;\n\nvoid main(void) {\n    vec4 outPosition = worldViewProjection * vec4(position, 1.0);\n    gl_Position = outPosition;\n\n    vUV = uv;\n    vPosition = position;\n    vNormal = normal;\n}`;\nconst FRAG = `\nprecision highp float;\n\n// Varying\nvarying vec3 vPosition;\nvarying vec3 vNormal;\nvarying vec2 vUV;\n\n// Uniforms\nuniform mat4 world;\n\n// Refs\nuniform vec3 cameraPosition;\nuniform vec3 lightPosition;\nuniform float time;\n\nvoid main(void) {\n    vec3 vLightPosition = lightPosition;\n\n    // World values\n    vec3 vPositionW = vec3(world * vec4(vPosition, 1.0));\n    vec3 vNormalW = normalize(vec3(world * vec4(vNormal, 0.0)));\n    vec3 viewDirectionW = normalize(cameraPosition - vPositionW);\n\n    // Light\n    vec3 lightVectorW = normalize(vLightPosition - vPositionW);\n    vec3 color = vec3(0.5,0.,1.);\n\n    // diffuse\n    float ndl = max(0., dot(vNormalW, lightVectorW));\n\n    // Specular\n    vec3 angleW = normalize(viewDirectionW + lightVectorW);\n    float specComp = max(0., dot(vNormalW, angleW));\n    specComp = pow(specComp, max(1., 64.)) * 2.;\n\n    gl_FragColor = vec4(color * ndl + vec3(specComp), 1.);\n}\n`;\n\nconst SHADER_BIND = (() => {\n  let time = 0;\n  let T = new Date().getTime();\n  return (scene, shaderMaterial) => {\n    const dt = (new Date().getTime() - T) / 1000;\n    shaderMaterial.setFloat(\"time\", time);\n    shaderMaterial.setVector3(\"cameraPosition\", scene.activeCamera.position);\n    if (scene.lights.length > 0) {\n      shaderMaterial.setVector3(\"lightPosition\", scene.lights[0].position);\n    }\n    time = time + dt;\n    T = new Date().getTime();\n  };\n})();\n\nconst SHADER_PRE = (scene, shaderMaterial) => {\n  shaderMaterial.backFaceCulling = false;\n  shaderMaterial.setFloat(\"time\", 0);\n  shaderMaterial.setVector3(\"cameraPosition\", scene.activeCamera.position);\n  shaderMaterial.setVector3(\"lightPosition\", new Vector3(0, 20, 10));\n};\n\nconst MATERIAL_CACHE = MaterialCache.getInstance();\n\nexport default Util3d;\n","export class Animator {\n  constructor(state, next, doWhile) {\n    this.state = state;\n    this.next = next;\n    this.while = doWhile;\n    this.requestAnimeId = null;\n  }\n\n  play() {\n    this.requestAnimeId = requestAnimationFrame(() => {\n      if (!this.while(this.state)) return this.stop();\n      this.state = this.next(this.state);\n      this.play();\n    });\n    return this;\n  }\n\n  stop() {\n    cancelAnimationFrame(this.requestAnimeId);\n    return this;\n  }\n\n  static builder() {\n    return new AnimatorBuilder();\n  }\n}\n\nclass AnimatorBuilder {\n  constructor() {\n    this._state = null;\n    this._next = null;\n    this._end = null;\n  }\n\n  initialState(state) {\n    this._state = state;\n    return this;\n  }\n\n  nextState(next) {\n    this._next = next;\n    return this;\n  }\n\n  while(end) {\n    this._end = end;\n    return this;\n  }\n\n  build() {\n    const someAreEmpty = [this._state, this._next, this._end].some(\n      x => x === null || x === undefined\n    );\n    if (someAreEmpty) throw new Error(\"Animator properties are missing\");\n    return new Animator(this._state, this._next, this._end);\n  }\n}\n","import { MasterDB } from \"mov-fe-lib-core\";\n\nclass AnnotationManager {\n  constructor() {\n    if (instance) return instance;\n    instance = this;\n    this.annotations = {};\n    this.observersBySceneId = {};\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                   Getters & Setters                                  *\n   *                                                                                      */\n  //========================================================================================\n\n  getAnnotations = () => this.annotations;\n\n  load() {\n    this.retrieveAnnotationsFromDb();\n    return this;\n  }\n  /**\n   *\n   * @param {*} scene: Scene\n   * @param {*} lambda: AnnotationManager -> {}\n   */\n  pushObserver(scene, lambda) {\n    const sceneId = scene._uid;\n\n    if (!(sceneId in this.observersBySceneId)) {\n      this.observersBySceneId[sceneId] = [];\n    }\n    this.observersBySceneId[sceneId].push(lambda);\n    return this;\n  }\n\n  clearObserver(scene) {\n    const sceneId = scene._uid;\n    if (sceneId in this.observersBySceneId) {\n      delete this.observersBySceneId[sceneId];\n    }\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                         Utils                                        *\n   *                                                                                      */\n  //========================================================================================\n\n  retrieveAnnotationsFromDb() {\n    MasterDB.subscribe(\n      { Scope: \"Annotation\", Name: \"*\" },\n      data => {\n        console.log(\"Annotation update\", data);\n        const actionMap = {\n          del: annotation => this.delAnnotation(annotation),\n          set: annotation => this.addAnnotation(annotation)\n        };\n        const annotation = data.key.Annotation;\n        if (data.event in actionMap) {\n          actionMap[data.event](annotation);\n          Object.keys(this.observersBySceneId).forEach(k =>\n            this.observersBySceneId[k].forEach(f => f(this))\n          );\n        }\n      },\n      data => {\n        console.log(\"Annotation start\", data);\n        const annotation = data.value.Annotation;\n        this.addAnnotation(annotation);\n      }\n    );\n  }\n\n  delAnnotation(annotation) {\n    if (!annotation) return;\n    const names2delete = Object.keys(annotation).reduce((e, x) => {\n      e.push(x);\n      return e;\n    }, []);\n    Object.keys(this.annotations).forEach(annotationType => {\n      const value = this.annotations[annotationType];\n      value.names = value.names.filter(x => !names2delete.includes(x));\n      value.labels = value.labels.filter(x => !names2delete.includes(x));\n    });\n  }\n\n  addAnnotation(annotation) {\n    if (!annotation) return;\n    Object.keys(annotation).forEach(name => {\n      const annotationObj = annotation[name];\n      if (!annotationObj.Type) return;\n      const type = annotationObj.Type.toLowerCase();\n      const label = annotationObj.Label;\n      if (!(type in this.annotations)) {\n        this.annotations[type] = { names: [], labels: [] };\n      }\n      this.annotations[type].names.push(name);\n      this.annotations[type].labels.push(label ? label : name);\n    });\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                        Static                                        *\n   *                                                                                      */\n  //========================================================================================\n\n  static getInstance() {\n    return new AnnotationManager();\n  }\n\n  static getAnnotations() {\n    return AnnotationManager.getInstance().getAnnotations();\n  }\n}\nlet instance = null;\nexport default AnnotationManager;\n","import AddMapAction from \"../Actions/AddMapAction\";\nimport RobotAction from \"../Actions/RobotAction\";\nimport Robot from \"../NodeItem/Robot\";\nimport AddMeshAction from \"../Actions/AddMeshAction\";\n\nexport const ASSETS_TYPES = {\n  Map: \"Map\",\n  Robot: \"Robot\",\n  Mesh: \"Mesh\"\n};\n\nexport const AssetsTypesFactory = {\n  Map: map => new AddMapAction(map.name, map.loader),\n  Robot: robot => new RobotAction(robot, Robot.getSocketAnimator),\n  Mesh: mesh => new AddMeshAction(mesh)\n};\n","import { Clipboard as Clip } from \"mov-fe-lib-core\";\n\nconst SCENE_CONTEXT = \"scene\";\nlet COPY_PASTE_UID = 0;\n\nexport default class Clipboard {\n  static copy(value) {\n    Clip.write(SCENE_CONTEXT, value);\n  }\n  static paste() {\n    return Clip.read(SCENE_CONTEXT);\n  }\n\n  static getUID() {\n    return COPY_PASTE_UID++;\n  }\n}\n","import { Color3 } from \"@babylonjs/core\";\n\nconst Constants = {\n  RADIUS: 0.25,\n  POINTS_DENSITY: 2,\n  CLOUD_FUNCTION_NAME: \"backend.viewer\",\n  NAV_CLOUD_NAME: \"backend.generate_path\",\n  RAD2DEG: 180 / Math.PI,\n  DEG2RAD: Math.PI / 180,\n  DEBUG: false\n};\n\nexport const LOGGER_STATUS = {\n  init: 0,\n  running: 1,\n  paused: 2,\n  terminated: 3\n};\n\nexport const SCENE_BACKGROUND = {\n  dark: Color3.Black(),\n  light: Color3.Gray(),\n  default: Color3.Black()\n};\n\nexport default Constants;\n","import { Vector3 } from \"@babylonjs/core\";\nimport Util3d from \"../Util3d/Util3d\";\nimport { Animator } from \"./Animator\";\n\nexport default class DefaultMouseEvents {\n  static onPointerDown = mainView => evt => {\n    mainView.mousePosClick = mainView\n      .getMouseCoordsFromRoot()\n      .orSome(Vector3.Zero());\n    mainView.mousePosMove = mainView.mousePosClick;\n    mainView.sceneMemory.forEach(({ camera, canvas }) => {\n      if (evt.buttons === 2 || evt.buttons === 4 || evt.ctrlKey) {\n        camera.detachControl(canvas);\n      }\n    });\n  };\n\n  static onPointerUp = mainView => () => {\n    mainView.sceneMemory.forEach(({ camera, canvas }) => {\n      camera.attachControl(canvas, true);\n    });\n  };\n\n  static onPointerMove = mainView => evt => {\n    mainView.sceneMemory.forEach(({ mouseLocationText, camera }) => {\n      mainView.getMouseCoordsFromRoot().forEach(currentLocal => {\n        setMouseLocationTxt(mouseLocationText, currentLocal);\n        const panCamera = () => {\n          const v = currentLocal.subtract(mainView.mousePosMove);\n          const vBabylon = Util3d.getBabylonCoordinates(v).scale(-1);\n          animateCamera(camera, vBabylon);\n          mainView.mousePosMove = currentLocal;\n        };\n        const mouseButtonActions = [\n          { predicate: evt.ctrlKey && evt.buttons === 1, action: panCamera },\n          { predicate: evt.buttons === 4, action: panCamera }\n        ];\n        const filterActions = mouseButtonActions.filter(\n          ({ predicate }) => predicate\n        );\n        if (filterActions.length > 0) filterActions[0].action();\n      });\n    });\n  };\n}\n\nfunction animateCamera(camera, v) {\n  Animator.builder()\n    .initialState({\n      camera: camera,\n      time: 0,\n      T: new Date().getTime()\n    })\n    .nextState(s => {\n      const { camera, time } = s;\n      const dt = 0.1; //(new Date().getTime() - T) / 1000;\n      const vdt = v.scale(dt);\n      camera.position = camera.position.add(vdt);\n      camera.setTarget(camera.target.add(vdt));\n      return {\n        camera: camera,\n        time: time + dt,\n        T: new Date().getTime()\n      };\n    })\n    .while(s => s.time <= 1)\n    .build()\n    .play();\n}\n\nfunction setMouseLocationTxt(mouseLocationText, currentLocal) {\n  mouseLocationText.text = `x: ${currentLocal.x.toFixed(\n    2\n  )}, y: ${currentLocal.y.toFixed(2)}`;\n}\n","import {\n  Scene,\n  RotationGizmo,\n  UtilityLayerRenderer,\n  Vector3,\n  StandardMaterial,\n  Mesh,\n  Space\n} from \"@babylonjs/core\";\nimport { TextBlock, AdvancedDynamicTexture } from \"@babylonjs/gui/2D\";\nimport Util3d from \"../Util3d/Util3d\";\nimport \"@babylonjs/core/Debug/debugLayer\";\nimport \"@babylonjs/inspector\";\nimport Constants from \"./Constants\";\n\nclass DefaultScene {\n  static createGizmo = scene => {\n    const gizmoManager = new RotationGizmo(new UtilityLayerRenderer(scene));\n    gizmoManager.xGizmo.dragBehavior.detach();\n    gizmoManager.xGizmo.scaleRatio = 0.0;\n    gizmoManager.yGizmo.dragBehavior.detach();\n    gizmoManager.yGizmo.scaleRatio = 0.0;\n    return gizmoManager;\n  };\n\n  static createCamera = (scene, canvas, forEach = camera => {}) => {\n    const COLLISION_RADIUS = 1;\n    const camera = Util3d.cameraBuilder(scene)\n      .sphericalCoordinates(new Vector3(0, 0, 14))\n      .target(Vector3.Zero())\n      .name(\"camera\")\n      .build();\n    camera.attachControl(canvas, false);\n    camera.inertia = 0.7;\n    camera.collisionRadius = new Vector3(\n      COLLISION_RADIUS,\n      COLLISION_RADIUS,\n      COLLISION_RADIUS\n    );\n    camera.panningInertia = 0.5;\n    camera.checkCollisions = true;\n    camera.panningSensibility = 0;\n    camera.lowerRadiusLimit = 2;\n    forEach(camera);\n    return camera;\n  };\n\n  static createLight = scene => {\n    return Util3d.directionalLightBuilder(scene)\n      .name(\"light\")\n      .direction(new Vector3(0, -1, 0))\n      .intensity(0.35)\n      .build();\n  };\n\n  static createMeshGround = (scene, width = 20, height = 20) => {\n    const ground = Mesh.CreateGround(\"groundMesh\", width, height, 20, scene);\n    ground.translate(new Vector3(0, -1, 0), 1e-2, Space.WORLD);\n    ground.material = new StandardMaterial(\"wireframe\", scene);\n    ground.material.wireframe = true;\n    ground.isPickable = false;\n    ground.checkCollisions = true;\n    return ground;\n  };\n\n  static createScene = engine => {\n    const scene = new Scene(engine);\n    scene.collisionsEnabled = true;\n    scene._uid = scene.getUniqueId();\n    if (Constants.DEBUG) {\n      scene.debugLayer.show({\n        embedMode: true,\n        globalRoot: document.body,\n        overlay: true\n      });\n    }\n    return scene;\n  };\n\n  static createMouseLocationText = scene => {\n    const advancedTexture = AdvancedDynamicTexture.CreateFullscreenUI(\n      \"UI\",\n      true,\n      scene\n    );\n    const text = new TextBlock();\n    text.text = \"\";\n    text.color = \"white\";\n    text.fontSize = 17;\n    text.left = -560;\n    text.top = -145;\n    advancedTexture.addControl(text);\n    return text;\n  };\n}\n\nexport default DefaultScene;\n","import { Maybe } from \"monet\";\n/**\n * Material cache for each scene.\n *\n * Each material is associated with a scene therefore we must have a cache per scene.\n *\n * TODO: to similar with mesh cache, therefore there is possibility of abstraction\n *\n */\nclass MaterialCache {\n  constructor() {\n    if (instance) return instance;\n    instance = this;\n    this.materialCacheBySceneId = {};\n    this.count = 0;\n  }\n\n  static getInstance() {\n    return new MaterialCache();\n  }\n\n  hasKey(key, scene) {\n    const sceneId = scene._uid;\n    return Maybe.fromNull(this.materialCacheBySceneId[sceneId])\n      .flatMap(materialCache => ofNull(materialCache[key]))\n      .cata(\n        () => false,\n        () => true\n      );\n  }\n\n  put(key, scene, material) {\n    const sceneId = scene._uid;\n    if (!(sceneId in this.materialCacheBySceneId)) {\n      this.materialCacheBySceneId[sceneId] = {};\n    }\n    this.materialCacheBySceneId[sceneId][key] = material;\n    return this;\n  }\n\n  get(key, scene) {\n    const sceneId = scene._uid;\n    return Maybe.fromNull(this.materialCacheBySceneId[sceneId])\n      .flatMap(materialCache => ofNull(materialCache[key]))\n      .map(material => {\n        this.count++;\n        return material;\n      });\n  }\n\n  del(scene) {\n    const sceneId = scene._uid;\n    if (sceneId in this.materialCacheBySceneId) {\n      delete this.materialCacheBySceneId[sceneId];\n    }\n  }\n}\n\nconst ofNull = x => Maybe.fromNull(x);\n// private instance\nlet instance = null;\nexport default MaterialCache;\n","import { Maybe } from \"monet\";\n/**\n * Mesh cache for each scene.\n *\n * Each mesh is associated with a scene therefore we must have a cache per scene.\n *\n */\nclass MeshCache {\n  constructor() {\n    if (instance) return instance;\n    instance = this;\n    this.meshCacheBySceneId = {};\n    this.count = 0;\n  }\n\n  static getInstance() {\n    return new MeshCache();\n  }\n\n  hasKey(key, scene) {\n    const sceneId = scene._uid;\n    return Maybe.fromNull(this.meshCacheBySceneId[sceneId])\n      .flatMap(meshCache => ofNull(meshCache[key]))\n      .cata(\n        () => false,\n        () => true\n      );\n  }\n\n  put(key, scene, mesh) {\n    const sceneId = scene._uid;\n    if (!(sceneId in this.meshCacheBySceneId)) {\n      this.meshCacheBySceneId[sceneId] = {};\n    }\n    this.meshCacheBySceneId[sceneId][key] = mesh;\n    mesh.setEnabled(false);\n    return this;\n  }\n\n  get(key, scene) {\n    const sceneId = scene._uid;\n    return Maybe.fromNull(this.meshCacheBySceneId[sceneId])\n      .flatMap(meshCache => ofNull(meshCache[key]))\n      .map(mesh => {\n        console.log(\n          \"#Mesh: Found Mesh in cache, retrieving copy number\",\n          this.count\n        );\n        const cloneMesh = mesh.clone(`${key}${this.count++}`);\n        console.log(\"#Mesh:\", cloneMesh);\n        cloneMesh.setEnabled(true);\n        return cloneMesh;\n      })\n      .orNull();\n  }\n\n  del(scene) {\n    const sceneId = scene._uid;\n    if (sceneId in this.meshCacheBySceneId) {\n      delete this.meshCacheBySceneId[sceneId];\n    }\n  }\n}\n\nconst ofNull = x => Maybe.fromNull(x);\n// private instance\nlet instance = null;\nexport default MeshCache;\n","import MeshCache from \"./MeshCache\";\nimport {\n  AssetsManager,\n  Quaternion,\n  Vector3,\n  VertexBuffer\n} from \"@babylonjs/core\";\nimport { ASSETS_TYPES } from \"../Utils/AssetsTypesFactory\";\nimport \"@babylonjs/loaders\";\n\nclass MeshLoader {\n  constructor(scene) {\n    this.scene = scene;\n  }\n\n  static of(scene) {\n    return new MeshLoader(scene);\n  }\n\n  load = (meshName, mapFunction = MeshLoader.transformMesh) =>\n    new Promise((re, rej) => {\n      const meshCache = MeshCache.getInstance();\n      if (meshCache.hasKey(meshName, this.scene)) {\n        console.log(`Found Mesh ${meshName} in cache for scene ${this.scene}`);\n        re(meshCache.get(meshName, this.scene));\n      } else {\n        console.log(\"Loading mesh....\");\n        const assetsManager = new AssetsManager(this.scene);\n        const meshTask = assetsManager.addMeshTask(\"\", \"\", MESH_URL, meshName);\n        meshTask.onSuccess = task => {\n          console.log(\"Load Success\", meshName);\n          const mesh = task.loadedMeshes[0];\n          mesh.name = meshName;\n          mesh.rotationQuaternion = Quaternion.Identity();\n          mesh.position = Vector3.Zero();\n          meshCache.put(meshName, this.scene, mesh);\n        };\n        meshTask.onError = (task, message, exception) => {\n          console.log(\"Load error =>\", message);\n          rej({\n            message,\n            exception,\n            assetName: meshName,\n            assetType: ASSETS_TYPES.Mesh\n          });\n        };\n        assetsManager.onFinish = task => {\n          console.log(\"Load finish \");\n          const meshParam = meshCache.get(meshName, this.scene);\n          if (meshParam !== null) re(mapFunction(meshParam));\n        };\n        assetsManager.load();\n      }\n    });\n\n  static getMeshUrl = src => `${MESH_URL}${src}`;\n  /**\n   * Side effect function\n   */\n  static transformMesh(mesh) {\n    const theta = Math.PI / 2;\n    const positions = mesh.getVerticesData(VertexBuffer.PositionKind);\n    const normals = mesh.getVerticesData(VertexBuffer.NormalKind);\n    const newPos = new Float32Array(positions.length);\n    const newNormals = new Float32Array(positions.length);\n    const cos = Math.cos(theta);\n    const sin = Math.sin(theta);\n    const numberOfVertices = positions.length / 3;\n    for (let i = 0; i < numberOfVertices; i++) {\n      newPos[i * 3] = positions[i * 3];\n      newPos[i * 3 + 1] =\n        positions[i * 3 + 1] * cos - positions[i * 3 + 2] * sin;\n      newPos[i * 3 + 2] =\n        positions[i * 3 + 1] * sin - positions[i * 3 + 2] * cos;\n      newNormals[i * 3] = normals[i * 3];\n      newNormals[i * 3 + 1] =\n        normals[i * 3 + 1] * cos - normals[i * 3 + 2] * sin;\n      newNormals[i * 3 + 2] =\n        normals[i * 3 + 1] * sin - normals[i * 3 + 2] * cos;\n    }\n    mesh.setVerticesData(VertexBuffer.PositionKind, newPos, true);\n    mesh.setVerticesData(VertexBuffer.NormalKind, newNormals, true);\n    return mesh;\n  }\n}\n\nconst MESH_URL = `/static/meshes/`;\nexport default MeshLoader;\n","import { MasterDB } from \"mov-fe-lib-core\";\nimport Constants from \"./Constants\";\n\nclass SceneServerUtils {\n  static retrieveScene = (\n    sceneName,\n    successCallback = DEFAULT_SUCCESS,\n    failCallback = DEFAULT_FAILURE(\"retrieving scene\")\n  ) => {\n    MasterDB.cloudFunction(\n      Constants.CLOUD_FUNCTION_NAME,\n      \"retrieveScene\",\n      sceneName,\n      data => successFailIf(data, successCallback, failCallback)\n    );\n  };\n}\n\nconst DEFAULT_FAILURE = failureLocation => data => {};\n\nconst DEFAULT_SUCCESS = data => {};\n\nconst successFailIf = (data, successCallback, failCallback) => {\n  if (data.success) {\n    successCallback(data);\n  } else {\n    failCallback(data);\n  }\n};\nexport default SceneServerUtils;\n","/**\n * Inspired by https://en.wikipedia.org/wiki/Algorithms_for_calculating_variance\n * Hope it works, didn't found good lib in js for this.\n */\n\nexport default class Statistics {\n  constructor() {\n    this._count = 0;\n    this._mean = 0;\n    this._M2 = 0;\n  }\n\n  update(x) {\n    this._count += 1;\n    const delta = x - this._mean;\n    this._mean += delta / this._count;\n    const delta2 = x - this._mean;\n    this._M2 += delta * delta2;\n    return this;\n  }\n\n  get count() {\n    return this._count;\n  }\n\n  get mean() {\n    if (this._count < 2) {\n      return Number.NaN;\n    }\n    return this._mean;\n  }\n\n  get variance() {\n    if (this._count < 2) {\n      return Number.NaN;\n    }\n    return this._M2 / this._count;\n  }\n\n  get sampleVar() {\n    if (this._count < 2) {\n      return Number.NaN;\n    }\n    return this._M2 / (this._count - 1);\n  }\n\n  isOutlier(x, sigmas = 3) {\n    const zScore = (x - this.mean) / Math.sqrt(this.variance);\n    return Number.isNaN(zScore) || Math.abs(zScore) > sigmas;\n  }\n}\n","import TreeObject from \"../TreeObject/TreeObject\";\nimport TreeNode from \"../TreeObject/TreeNode\";\nimport GlobalRef from \"../NodeItem/GlobalRef\";\nimport { MasterDB } from \"mov-fe-lib-core\";\nimport Constants from \"./Constants\";\nimport GraphItem from \"../NodeItem/GraphItem\";\nimport NavigationPreviewItem from \"../NodeItem/NavigationPreviewItem\";\nimport _debounce from \"lodash/debounce\";\n\nconst CLOUD_FUNCTION_NAME = Constants.CLOUD_FUNCTION_NAME;\n\nclass TreeServerUtils {\n  constructor(sceneName, undoManager, alert = window.alert) {\n    this.sceneName = sceneName;\n    this.undoManager = undoManager;\n    this.alert = (msg, type) => alert(msg, type);\n    this.staticNodeTypes = [GraphItem.TYPE, NavigationPreviewItem.TYPE];\n  }\n\n  static ofScene(sceneName, undoManager, alert) {\n    return new TreeServerUtils(sceneName, undoManager, alert);\n  }\n\n  static undoAction = _debounce(utils => utils.lostConnection(), 500);\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                    Util functions                                    *\n   *                                                                                      */\n  //========================================================================================\n\n  getNodeFromTree = (name, objectTree) => {\n    return new TreeObject(objectTree).getNode(x => name === x.title);\n  };\n\n  getParentFromChild = (childName, objectTree) => {\n    return new TreeObject(objectTree).getParentNode(x => childName === x.title);\n  };\n\n  deleteNodeFromTreeUsingName = (name, objectTree, is2delInServer = true) => {\n    this.getNodeFromTree(name, objectTree).forEach(node => {\n      // destroy treeNode\n      TreeNode.dispose(node);\n\n      if (is2delInServer) {\n        this.deleteNodeInServer(name);\n      }\n\n      const maybeParent = this.getParentFromChild(name, objectTree);\n      maybeParent.forEach(parentNode => {\n        parentNode.children = parentNode.children.filter(x => x.title !== name);\n      });\n\n      objectTree = objectTree.filter(x => x.title !== name);\n    });\n    return objectTree;\n  };\n\n  getNodeFromTreeWithPredicate = (predicate, objectTree) => {\n    return new TreeObject(objectTree).getNode(predicate);\n  };\n\n  addNodeItem2Tree = (\n    objectTree,\n    nodeItem,\n    parentName = GlobalRef.NAME,\n    is2addInServer = true,\n    isVisible = true\n  ) => {\n    // delete if already exist\n    this.deleteNodeFromTreeUsingName(nodeItem.name, objectTree, is2addInServer);\n    const isStatic = this.staticNodeTypes.includes(nodeItem.getType());\n\n    const node2Add = TreeNode.builder()\n      .title(nodeItem.name)\n      .item(nodeItem)\n      .isVisible(isVisible)\n      .isStatic(isStatic)\n      .build();\n\n    if (parentName) {\n      const maybeParentNode = this.getNodeFromTree(parentName, objectTree);\n      maybeParentNode.forEach(parentNode => {\n        if (is2addInServer) this.addNodeItem2Server(node2Add, parentNode.title);\n        parentNode.children.push(node2Add);\n      });\n    } else {\n      objectTree.push(node2Add);\n      if (is2addInServer) this.addNodeItem2Server(node2Add, null);\n    }\n    return objectTree;\n  };\n\n  lostConnection = () => {\n    this.undoManager.undo({ is2UpdateInServer: false });\n    setImmediate(() => {\n      this.alert(\n        \"Sorry, work not saved. Please check internet connection\",\n        \"error\"\n      );\n    });\n  };\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                   Server functions                                   *\n   *                                                                                      */\n  //========================================================================================\n\n  updateNodeInServer = (name, objectTree, oldName = null) => {\n    console.log(\"updateNodeInServer!\", name, this.sceneName);\n    this.getNodeFromTree(name, objectTree).forEach(node => {\n      const parentName = this.getParentFromChild(name, objectTree)\n        .map(x => x.title)\n        .orNull();\n      MasterDB.cloudFunction(\n        CLOUD_FUNCTION_NAME,\n        \"updateNode\",\n        [TreeNode.toDict(node), parentName, oldName, this.sceneName],\n        data => {\n          console.log(\"Update node with success?\", data.success, data.error);\n        }\n      ).catch(err => {\n        console.warn(\"Update node error\", name, err);\n        TreeServerUtils.undoAction(this);\n      });\n    });\n  };\n\n  addNodeItem2Server = (treeNode, parentName) => {\n    MasterDB.cloudFunction(\n      CLOUD_FUNCTION_NAME,\n      \"addNodeItem\",\n      [TreeNode.toDict(treeNode), parentName, this.sceneName],\n      data => {\n        console.log(\"Add node with success?\", data.success);\n      }\n    ).catch(err => {\n      console.warn(\"Add node error\", treeNode.title, err);\n      TreeServerUtils.undoAction(this);\n    });\n  };\n\n  deleteNodeInServer = name => {\n    MasterDB.cloudFunction(\n      CLOUD_FUNCTION_NAME,\n      \"deleteNodeByName\",\n      [name, this.sceneName],\n      data => {\n        console.log(\"Deleted node with success?\", data.success);\n      }\n    ).catch(err => {\n      console.warn(\"Deleted node error\", name, err);\n      TreeServerUtils.undoAction(this);\n    });\n  };\n}\n\nexport default TreeServerUtils;\n","export function selectOneAction(predicateActionList, defaultAction = () => {}) {\n  return input => {\n    predicateActionList.push({ predicate: e => true, action: defaultAction });\n    for (let i = 0; i < predicateActionList.length; i++) {\n      const predicateAction = predicateActionList[i];\n      if (predicateAction.predicate(input)) {\n        predicateAction.action();\n        break;\n      }\n    }\n  };\n}\n","import i18n from \"i18next\";\nimport { initReactI18next } from \"react-i18next\";\n\n// import Backend from 'i18next-xhr-backend';\n// import LanguageDetector from 'i18next-browser-languagedetector';\n// not like to use this?\n// have a look at the Quick start guide\n// for passing in lng and translations on init\n\nimport translationEN from \"./locales/en/translation.json\";\nimport translationPT from \"./locales/pt/translation.json\";\n\n// the translations\nconst resources =\n  window.SERVER_DATA === undefined || window.SERVER_DATA.Languages === undefined\n    ? {\n        en: { translation: translationEN },\n        pt: { translation: translationPT }\n      }\n    : window.SERVER_DATA.Languages;\n\n// default language\nconst language =\n  window.SERVER_DATA === undefined || window.SERVER_DATA.Language === undefined\n    ? \"en\"\n    : window.SERVER_DATA.Language;\n\ni18n\n  // load translation using xhr -> see /public/locales (i.e. https://github.com/i18next/react-i18next/tree/master/example/react/public/locales)\n  // learn more: https://github.com/i18next/i18next-xhr-backend\n  //   .use(Backend)\n  // detect user language\n  // learn more: https://github.com/i18next/i18next-browser-languageDetector\n  //   .use(LanguageDetector)\n  // pass the i18n instance to react-i18next.\n  .use(initReactI18next)\n  // init i18next\n  // for all options read: https://www.i18next.com/overview/configuration-options\n  .init({\n    resources,\n    lng: language,\n    fallbackLng: \"en\",\n    debug: false,\n\n    interpolation: {\n      escapeValue: false // not needed for react as it escapes by default\n    }\n  });\n//   .changeLanguage(\"en\", (err, t) => {\n//     if (err) return console.log(\"something went wrong loading\", err);\n//   });\n\nexport default i18n;\n","import { createGlobalStyle } from \"styled-components\";\nimport { Style as S } from \"mov-fe-lib-core\";\n\nconst Style = createGlobalStyle`${S}`;\nexport default Style;\n","import { createMuiTheme } from \"@material-ui/core/styles\";\nimport \"fontsource-roboto\";\nimport \"fontsource-open-sans\";\n\nconst CONSTANTS = {\n  dark: {\n    borderBottom: \"1px solid #212121\",\n    textColor: \"white\",\n    background: {\n      primary: \"#424242\",\n      secondary: \"#212121\"\n    }\n  },\n  light: {\n    borderBottom: \"1px solid #ccc\",\n    textColor: \"rgba(0, 0, 0, 0.87)\",\n    background: {\n      primary: \"#e2e2e2\",\n      secondary: \"#b2b2b2\"\n    }\n  }\n};\n\nconst themeFactory = particular => ({\n  ...particular,\n  typography: {\n    fontFamily: \"Open Sans\",\n    h1: {\n      fontFamily: \"Open Sans\"\n    },\n    h2: {\n      fontFamily: \"Open Sans\"\n    },\n    h3: {\n      fontFamily: \"Open Sans\"\n    },\n    h4: {\n      fontFamily: \"Open Sans\"\n    },\n    h5: {\n      fontFamily: \"Open Sans\"\n    },\n    h6: {\n      fontFamily: \"Open Sans\"\n    },\n    body1: {\n      fontFamily: \"Roboto\"\n    }\n  },\n  cursorDefault: {\n    cursor: \"default\"\n  },\n  cursorPointer: {\n    cursor: \"pointer\"\n  }\n});\n\nconst Themes = {\n  dark: createMuiTheme(\n    themeFactory({\n      label: \"dark\",\n      textColor: CONSTANTS.dark.textColor,\n      backgroundColor:\n        \"linear-gradient(114.01deg, #212121 0%, #050505 100.43%)\",\n      bottomNavigation: { background: \"#212121\" },\n      globalStats: {\n        borderColor: \"#474747\",\n        subTextColor: \"#CDCDCD\",\n        upperTextColor: \"#E6E6E6\"\n      },\n      palette: {\n        type: \"dark\", // Switching the dark mode on, is a single property value change.\n        primary: {\n          main: \"#36b5e6\"\n        },\n        secondary: {\n          main: \"#CF6679\"\n        },\n        green: {\n          main: \"#03DAC5\"\n        },\n        background: {\n          primary: CONSTANTS.dark.background.primary,\n          secondary: CONSTANTS.dark.background.secondary\n        },\n        accent: {\n          background: \"#f5f5f9\",\n          color: \"rgba(0, 0, 0, 0.87)\",\n          border: \"#dadde9\"\n        }\n      },\n      icon: { color: \"#c6c6c6\", hoverColor: \"white\" },\n      table: { stripColor: \"#505050\" },\n      verticalBar: {\n        iconColor: \"#9e9e9e\"\n      },\n      overrides: {\n        MuiTableCell: {\n          body: {\n            color: CONSTANTS.dark.textColor\n          }\n        },\n        MuiAppBar: {\n          colorDefault: {\n            color: CONSTANTS.dark.textColor,\n            borderColor: \"black\",\n            backgroundColor: CONSTANTS.dark.background.secondary\n          },\n          colorInherit: {\n            color: CONSTANTS.dark.textColor,\n            backgroundColor: \"#353535\"\n          }\n        },\n        MuiButton: {\n          outlined: {\n            margin: \"8px\"\n          },\n          text: {\n            margin: \"8px\"\n          },\n          contained: {\n            margin: \"8px\"\n          },\n          containedPrimary: {\n            color: \"inherit\",\n            margin: \"8px\"\n          },\n          containedSecondary: {\n            color: \"inherit\",\n            margin: \"8px\"\n          }\n        },\n        MuiButtonGroup: {\n          root: {\n            margin: \"0\"\n          },\n          groupedContainedPrimary: {\n            margin: \"0\"\n          },\n          groupedOutlined: {\n            margin: \"0\"\n          },\n          groupedText: {\n            margin: \"0\"\n          }\n        },\n        MuiIconButton: {\n          root: {\n            color: \"#36b5e6\"\n          }\n        },\n        MuiListItem: {\n          button: {\n            \"&:hover\": {\n              backgroundColor: \"rgba(54,181,230, 0.15)\"\n            }\n          }\n        },\n        MuiFormControlLabel: {\n          label: {\n            color: \"rgba(255,255,255,0.8)\"\n          }\n        },\n        MuiInputBase: {\n          input: {\n            font: \"Roboto\"\n          }\n        },\n        MuiFilledInput: {\n          root: {\n            border: \"4px\"\n          },\n          underline: {\n            \"&::before\": {\n              borderRadius: \"4px\"\n            }\n          }\n        }\n      }\n    })\n  ),\n  light: createMuiTheme(\n    themeFactory({\n      font: {\n        Roboto: {\n          fontFamily: \"Roboto\"\n        },\n        OpenSans: {\n          fontFamily: \"Open Sans\"\n        }\n      },\n      label: \"light\",\n      textColor: CONSTANTS.light.textColor,\n      backgroundColor:\n        \"linear-gradient(122.19deg, #FFFFFF 2.58%, #FFFFFF 76.23%)\", // it was white before\n      bottomNavigation: { background: \"#c3c3c3\" },\n      icon: { color: \"#757575\", hoverColor: \"black\" },\n      table: { stripColor: \"whitesmoke\" },\n      globalStats: {\n        borderColor: \"#E6E6E6\",\n        subTextColor: \"#717171\",\n        upperTextColor: \"#474747\"\n      },\n      palette: {\n        primary: {\n          main: \"#007197\"\n        },\n        secondary: {\n          main: \"#BE2424\"\n        },\n        green: {\n          main: \"#03DAC5\"\n        },\n        background: {\n          primary: CONSTANTS.light.background.primary,\n          secondary: CONSTANTS.light.background.secondary\n        },\n        accent: {\n          background: \"whitesmoke\",\n          color: CONSTANTS.light.textColor,\n          border: \"darkgray\"\n        }\n      },\n      verticalBar: {\n        iconColor: \"#616161\"\n      },\n      overrides: {\n        MuiTableCell: {\n          body: {\n            color: CONSTANTS.light.textColor\n          }\n        },\n        MuiAppBar: {\n          colorDefault: {\n            color: CONSTANTS.light.textColor,\n            borderColor: CONSTANTS.light.borderBottom,\n            backgroundColor: CONSTANTS.light.background.secondary\n          },\n          colorInherit: {\n            color: CONSTANTS.light.textColor,\n            backgroundColor: \"#d2d2d2\"\n          }\n        },\n        MuiButton: {\n          outlined: {\n            margin: \"8px\"\n          },\n          text: {\n            margin: \"8px\"\n          },\n          contained: {\n            margin: \"8px\"\n          },\n          containedPrimary: {\n            color: \"white\",\n            margin: \"8px\"\n          },\n          containedSecondary: {\n            color: \"white\",\n            margin: \"8px\"\n          }\n        },\n        MuiButtonGroup: {\n          root: {\n            margin: \"0\"\n          },\n          groupedContainedPrimary: {\n            margin: \"0\"\n          },\n          groupedOutlined: {\n            margin: \"0\"\n          },\n          groupedText: {\n            margin: \"0\"\n          }\n        },\n        MuiIconButton: {\n          root: {\n            color: \"#007197\"\n          }\n        },\n        MuiListItem: {\n          button: {\n            \"&:hover\": {\n              backgroundColor: \"rgba(0,113,151, 0.15)\"\n            }\n          }\n        },\n        MuiFormControlLabel: {\n          label: {\n            color: \"rgba(0,0,0,0.8)\"\n          }\n        },\n        MuiInputBase: {\n          input: {\n            font: \"Roboto\"\n          }\n        },\n        MuiFilledInput: {\n          root: {\n            border: \"4px\"\n          },\n          underline: {\n            \"&::before\": {\n              borderRadius: \"4px\"\n            }\n          }\n        },\n        MuiPaper: {\n          root: {\n            color: \"#272727\",\n            backgroundColor: CONSTANTS.light.background.primary\n          }\n        },\n        MuiTableRow: {\n          head: {\n            \"& th\": {\n              backgroundColor: CONSTANTS.light.background.primary,\n              borderBottom: CONSTANTS.light.borderBottom\n            }\n          },\n          root: {\n            \"& td\": {\n              borderBottom: CONSTANTS.light.borderBottom\n            }\n          }\n        }\n      }\n    })\n  )\n};\n\nThemes.getTheme = () => {\n  const theme = window.localStorage.getItem(\"movai.theme\"); // dark or light\n  return theme ? theme : \"dark\";\n};\n\nThemes.setTheme = value => {\n  window.localStorage.setItem(\"movai.theme\", value);\n};\n\nexport default Themes;\n","module.exports = require(\"@babel/runtime/helpers/esm/assertThisInitialized\");","module.exports = require(\"@babel/runtime/helpers/esm/asyncToGenerator\");","module.exports = require(\"@babel/runtime/helpers/esm/classCallCheck\");","module.exports = require(\"@babel/runtime/helpers/esm/classPrivateFieldGet\");","module.exports = require(\"@babel/runtime/helpers/esm/createClass\");","module.exports = require(\"@babel/runtime/helpers/esm/defineProperty\");","module.exports = require(\"@babel/runtime/helpers/esm/extends\");","module.exports = require(\"@babel/runtime/helpers/esm/get\");","module.exports = require(\"@babel/runtime/helpers/esm/getPrototypeOf\");","module.exports = require(\"@babel/runtime/helpers/esm/inherits\");","module.exports = require(\"@babel/runtime/helpers/esm/objectWithoutProperties\");","module.exports = require(\"@babel/runtime/helpers/esm/possibleConstructorReturn\");","module.exports = require(\"@babel/runtime/helpers/esm/slicedToArray\");","module.exports = require(\"@babel/runtime/helpers/esm/taggedTemplateLiteral\");","module.exports = require(\"@babel/runtime/helpers/esm/toArray\");","module.exports = require(\"@babel/runtime/helpers/esm/toConsumableArray\");","module.exports = require(\"@babel/runtime/helpers/esm/typeof\");","module.exports = require(\"@babel/runtime/regenerator\");","module.exports = require(\"@babylonjs/core\");","module.exports = require(\"@babylonjs/core/Debug/debugLayer\");","module.exports = require(\"@babylonjs/core/Maths/math\");","module.exports = require(\"@babylonjs/gui\");","module.exports = require(\"@babylonjs/gui/2D\");","module.exports = require(\"@babylonjs/inspector\");","module.exports = require(\"@babylonjs/loaders\");","module.exports = require(\"@date-io/date-fns\");","module.exports = require(\"@material-ui/core\");","module.exports = require(\"@material-ui/core/Avatar\");","module.exports = require(\"@material-ui/core/Backdrop\");","module.exports = require(\"@material-ui/core/Box\");","module.exports = require(\"@material-ui/core/Breadcrumbs\");","module.exports = require(\"@material-ui/core/Button\");","module.exports = require(\"@material-ui/core/Checkbox\");","module.exports = require(\"@material-ui/core/Chip\");","module.exports = require(\"@material-ui/core/CircularProgress\");","module.exports = require(\"@material-ui/core/Collapse\");","module.exports = require(\"@material-ui/core/Divider\");","module.exports = require(\"@material-ui/core/Drawer\");","module.exports = require(\"@material-ui/core/FormControl\");","module.exports = require(\"@material-ui/core/FormControlLabel\");","module.exports = require(\"@material-ui/core/FormHelperText\");","module.exports = require(\"@material-ui/core/Grid\");","module.exports = require(\"@material-ui/core/IconButton\");","module.exports = require(\"@material-ui/core/Input\");","module.exports = require(\"@material-ui/core/InputAdornment\");","module.exports = require(\"@material-ui/core/InputBase\");","module.exports = require(\"@material-ui/core/InputLabel\");","module.exports = require(\"@material-ui/core/List\");","module.exports = require(\"@material-ui/core/ListItemText\");","module.exports = require(\"@material-ui/core/Menu\");","module.exports = require(\"@material-ui/core/MenuItem\");","module.exports = require(\"@material-ui/core/Paper\");","module.exports = require(\"@material-ui/core/Select\");","module.exports = require(\"@material-ui/core/Switch\");","module.exports = require(\"@material-ui/core/Tab\");","module.exports = require(\"@material-ui/core/TableCell\");","module.exports = require(\"@material-ui/core/Tabs\");","module.exports = require(\"@material-ui/core/TextField\");","module.exports = require(\"@material-ui/core/Typography\");","module.exports = require(\"@material-ui/core/colors\");","module.exports = require(\"@material-ui/core/styles\");","module.exports = require(\"@material-ui/core/styles/colorManipulator\");","module.exports = require(\"@material-ui/core/utils\");","module.exports = require(\"@material-ui/icons/Add\");","module.exports = require(\"@material-ui/icons/AddBox\");","module.exports = require(\"@material-ui/icons/ArrowDownward\");","module.exports = require(\"@material-ui/icons/Chat\");","module.exports = require(\"@material-ui/icons/Check\");","module.exports = require(\"@material-ui/icons/ChevronLeft\");","module.exports = require(\"@material-ui/icons/ChevronRight\");","module.exports = require(\"@material-ui/icons/Clear\");","module.exports = require(\"@material-ui/icons/Close\");","module.exports = require(\"@material-ui/icons/DeleteOutline\");","module.exports = require(\"@material-ui/icons/Edit\");","module.exports = require(\"@material-ui/icons/ExpandMore\");","module.exports = require(\"@material-ui/icons/FilterList\");","module.exports = require(\"@material-ui/icons/FirstPage\");","module.exports = require(\"@material-ui/icons/Label\");","module.exports = require(\"@material-ui/icons/LastPage\");","module.exports = require(\"@material-ui/icons/NavigateNext\");","module.exports = require(\"@material-ui/icons/Remove\");","module.exports = require(\"@material-ui/icons/SaveAlt\");","module.exports = require(\"@material-ui/icons/Schedule\");","module.exports = require(\"@material-ui/icons/Search\");","module.exports = require(\"@material-ui/icons/Settings\");","module.exports = require(\"@material-ui/icons/Today\");","module.exports = require(\"@material-ui/icons/ViewColumn\");","module.exports = require(\"@material-ui/icons/ViewModule\");","module.exports = require(\"@material-ui/icons/Warning\");","module.exports = require(\"@material-ui/lab/Alert\");","module.exports = require(\"@material-ui/pickers\");","module.exports = require(\"@material-ui/styles\");","module.exports = require(\"clsx\");","module.exports = require(\"earcut\");","module.exports = require(\"fontsource-open-sans\");","module.exports = require(\"fontsource-roboto\");","module.exports = require(\"i18next\");","module.exports = require(\"jwt-decode\");","module.exports = require(\"lodash.isequal\");","module.exports = require(\"lodash/capitalize\");","module.exports = require(\"lodash/cloneDeep\");","module.exports = require(\"lodash/debounce\");","module.exports = require(\"lodash/get\");","module.exports = require(\"lodash/isEmpty\");","module.exports = require(\"lodash/isEqual\");","module.exports = require(\"lodash/set\");","module.exports = require(\"lodash/uniqBy\");","module.exports = require(\"material-icons/css/material-icons.css\");","module.exports = require(\"material-table\");","module.exports = require(\"monet\");","module.exports = require(\"mov-fe-lib-core\");","module.exports = require(\"prop-types\");","module.exports = require(\"react\");","module.exports = require(\"react-dom\");","module.exports = require(\"react-i18next\");","module.exports = require(\"react-resize-detector\");","module.exports = require(\"react-virtualized\");","module.exports = require(\"react-virtualized-tree\");","module.exports = require(\"react-virtualized-tree/lib/main.css\");","module.exports = require(\"react-virtualized/styles.css\");","module.exports = require(\"roslib\");","module.exports = require(\"setimmediate\");","module.exports = require(\"styled-components\");"],"sourceRoot":""}