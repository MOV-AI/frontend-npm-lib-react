{"version":3,"sources":["webpack://MovaiReact/webpack/universalModuleDefinition","webpack://MovaiReact/webpack/bootstrap","webpack://MovaiReact/./index.js","webpack://MovaiReact/./src/Components/Logs/Logs.css","webpack://MovaiReact/./src/Components/Snackbar/Snackbar.css","webpack://MovaiReact/./node_modules/css-loader/dist/runtime/api.js","webpack://MovaiReact/./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack://MovaiReact/./src/Components/Breadcrumb.js","webpack://MovaiReact/./src/Components/Button.js","webpack://MovaiReact/./src/Components/Collapse.js","webpack://MovaiReact/./src/Components/ContextMenu.js","webpack://MovaiReact/./src/Components/Drawer.js","webpack://MovaiReact/./src/Components/LoginForm/LoginForm.js","webpack://MovaiReact/./src/Components/LoginForm/movai_red.svg","webpack://MovaiReact/./src/Components/Logs/Logs.css?4c9f","webpack://MovaiReact/./src/Components/Logs/Logs.js","webpack://MovaiReact/./src/Components/Logs/LogsFilterBar/FiltersIcon/FiltersIcon.js","webpack://MovaiReact/./src/Components/Logs/LogsFilterBar/LogsFilterBar.js","webpack://MovaiReact/./src/Components/Logs/LogsTable/LogsTable.js","webpack://MovaiReact/./src/Components/Logs/utils/Utils.js","webpack://MovaiReact/./src/Components/Modal/AbstractModal.js","webpack://MovaiReact/./src/Components/Modal/ConfirmAlertModal.js","webpack://MovaiReact/./src/Components/Modal/SelectScopeModal.js","webpack://MovaiReact/./src/Components/ProfileMenu.js","webpack://MovaiReact/./src/Components/SearchInput.js","webpack://MovaiReact/./src/Components/Select.js","webpack://MovaiReact/./src/Components/Snackbar/Alert/Alert.js","webpack://MovaiReact/./src/Components/Snackbar/Alert/svg-icons/CreateSVGIcon.js","webpack://MovaiReact/./src/Components/Snackbar/Alert/svg-icons/svgIcons.js","webpack://MovaiReact/./src/Components/Snackbar/Snackbar.css?c276","webpack://MovaiReact/./src/Components/Snackbar/Snackbar.js","webpack://MovaiReact/./src/Components/Table.js","webpack://MovaiReact/./src/Components/Tabs.js","webpack://MovaiReact/./src/Components/Text.js","webpack://MovaiReact/./src/Components/Toggle.js","webpack://MovaiReact/./src/Components/Tree/BasicVirtualizedTree.js","webpack://MovaiReact/./src/Components/Tree/TreeSearch.js","webpack://MovaiReact/./src/Components/VerticalBar.js","webpack://MovaiReact/./src/Components/Viewer/Actions/Action.js","webpack://MovaiReact/./src/Components/Viewer/Actions/AddKeyPointAction.js","webpack://MovaiReact/./src/Components/Viewer/Actions/AddMapAction.js","webpack://MovaiReact/./src/Components/Viewer/Actions/AddMeshAction.js","webpack://MovaiReact/./src/Components/Viewer/Actions/BoxRegionAction.js","webpack://MovaiReact/./src/Components/Viewer/Actions/DragObjectsAction.js","webpack://MovaiReact/./src/Components/Viewer/Actions/DrawGraphAction.js","webpack://MovaiReact/./src/Components/Viewer/Actions/DrawPathAction.js","webpack://MovaiReact/./src/Components/Viewer/Actions/MeasureAction.js","webpack://MovaiReact/./src/Components/Viewer/Actions/MouseKeysAction.js","webpack://MovaiReact/./src/Components/Viewer/Actions/OrbitAction.js","webpack://MovaiReact/./src/Components/Viewer/Actions/PolygonRegionAction.js","webpack://MovaiReact/./src/Components/Viewer/Actions/RobotAction.js","webpack://MovaiReact/./src/Components/Viewer/AssetsManager/AssetsManager.js","webpack://MovaiReact/./src/Components/Viewer/AssetsManager/MapLoader.js","webpack://MovaiReact/./src/Components/Viewer/BaseViewer/BaseViewer.js","webpack://MovaiReact/./src/Components/Viewer/Graph/Graph.js","webpack://MovaiReact/./src/Components/Viewer/MainView/MainViewActions.js","webpack://MovaiReact/./src/Components/Viewer/MainView/MainViewRetriever.js","webpack://MovaiReact/./src/Components/Viewer/MainView/MeshSelector.js","webpack://MovaiReact/./src/Components/Viewer/MainView/NodeItemFactoryMap.js","webpack://MovaiReact/./src/Components/Viewer/Math/Mat3.js","webpack://MovaiReact/./src/Components/Viewer/Math/Vec2.js","webpack://MovaiReact/./src/Components/Viewer/Math/Vec3.js","webpack://MovaiReact/./src/Components/Viewer/NodeItem/AssetNodeItem.js","webpack://MovaiReact/./src/Components/Viewer/NodeItem/Box.js","webpack://MovaiReact/./src/Components/Viewer/NodeItem/BoxRegion.js","webpack://MovaiReact/./src/Components/Viewer/NodeItem/GlobalRef.js","webpack://MovaiReact/./src/Components/Viewer/NodeItem/GraphItem.js","webpack://MovaiReact/./src/Components/Viewer/NodeItem/KeyPoint.js","webpack://MovaiReact/./src/Components/Viewer/NodeItem/Map.js","webpack://MovaiReact/./src/Components/Viewer/NodeItem/Mesh.js","webpack://MovaiReact/./src/Components/Viewer/NodeItem/NodeItem.js","webpack://MovaiReact/./src/Components/Viewer/NodeItem/Path.js","webpack://MovaiReact/./src/Components/Viewer/NodeItem/PointCloud.js","webpack://MovaiReact/./src/Components/Viewer/NodeItem/PolygonRegion.js","webpack://MovaiReact/./src/Components/Viewer/NodeItem/Robot.js","webpack://MovaiReact/./src/Components/Viewer/NodeItem/Wall.js","webpack://MovaiReact/./src/Components/Viewer/SceneViewer.js","webpack://MovaiReact/./src/Components/Viewer/TreeObject/TreeNode.js","webpack://MovaiReact/./src/Components/Viewer/TreeObject/TreeObject.js","webpack://MovaiReact/./src/Components/Viewer/Util3d/CameraBuilder.js","webpack://MovaiReact/./src/Components/Viewer/Util3d/DirectionalLightBuilder.js","webpack://MovaiReact/./src/Components/Viewer/Util3d/GizmoManagerBuilder.js","webpack://MovaiReact/./src/Components/Viewer/Util3d/GroundBuilder.js","webpack://MovaiReact/./src/Components/Viewer/Util3d/PositionalLightBuilder.js","webpack://MovaiReact/./src/Components/Viewer/Util3d/ReferentialBuilder.js","webpack://MovaiReact/./src/Components/Viewer/Util3d/SelectionPlaceHolder.js","webpack://MovaiReact/./src/Components/Viewer/Util3d/Util3d.js","webpack://MovaiReact/./src/Components/Viewer/Utils/Animator.js","webpack://MovaiReact/./src/Components/Viewer/Utils/AnnotationManager.js","webpack://MovaiReact/./src/Components/Viewer/Utils/AssetsTypesFactory.js","webpack://MovaiReact/./src/Components/Viewer/Utils/Clipboard.js","webpack://MovaiReact/./src/Components/Viewer/Utils/Constants.js","webpack://MovaiReact/./src/Components/Viewer/Utils/DefaultMouseEvents.js","webpack://MovaiReact/./src/Components/Viewer/Utils/DefaultScene.js","webpack://MovaiReact/./src/Components/Viewer/Utils/MeshCache.js","webpack://MovaiReact/./src/Components/Viewer/Utils/MeshLoader.js","webpack://MovaiReact/./src/Components/Viewer/Utils/SceneServerUtils.js","webpack://MovaiReact/./src/Components/Viewer/Utils/TreeServerUtils.js","webpack://MovaiReact/./src/Components/Viewer/Utils/Utils.js","webpack://MovaiReact/./src/styles/Style.js","webpack://MovaiReact/./src/styles/Themes.js","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/assertThisInitialized\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/asyncToGenerator\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/classCallCheck\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/classPrivateFieldGet\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/createClass\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/defineProperty\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/extends\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/get\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/getPrototypeOf\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/inherits\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/objectWithoutProperties\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/possibleConstructorReturn\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/slicedToArray\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/taggedTemplateLiteral\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/toConsumableArray\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/typeof\"","webpack://MovaiReact/external \"@babel/runtime/regenerator\"","webpack://MovaiReact/external \"@babylonjs/core\"","webpack://MovaiReact/external \"@babylonjs/core/Debug/debugLayer\"","webpack://MovaiReact/external \"@babylonjs/core/Maths/math\"","webpack://MovaiReact/external \"@babylonjs/gui/2D\"","webpack://MovaiReact/external \"@babylonjs/inspector\"","webpack://MovaiReact/external \"@babylonjs/loaders\"","webpack://MovaiReact/external \"@date-io/date-fns\"","webpack://MovaiReact/external \"@material-ui/core\"","webpack://MovaiReact/external \"@material-ui/core/Backdrop\"","webpack://MovaiReact/external \"@material-ui/core/Box\"","webpack://MovaiReact/external \"@material-ui/core/Breadcrumbs\"","webpack://MovaiReact/external \"@material-ui/core/Button\"","webpack://MovaiReact/external \"@material-ui/core/Checkbox\"","webpack://MovaiReact/external \"@material-ui/core/Chip\"","webpack://MovaiReact/external \"@material-ui/core/CircularProgress\"","webpack://MovaiReact/external \"@material-ui/core/Collapse\"","webpack://MovaiReact/external \"@material-ui/core/Divider\"","webpack://MovaiReact/external \"@material-ui/core/Drawer\"","webpack://MovaiReact/external \"@material-ui/core/FormControl\"","webpack://MovaiReact/external \"@material-ui/core/FormControlLabel\"","webpack://MovaiReact/external \"@material-ui/core/FormHelperText\"","webpack://MovaiReact/external \"@material-ui/core/Grid\"","webpack://MovaiReact/external \"@material-ui/core/IconButton\"","webpack://MovaiReact/external \"@material-ui/core/Input\"","webpack://MovaiReact/external \"@material-ui/core/InputAdornment\"","webpack://MovaiReact/external \"@material-ui/core/InputBase\"","webpack://MovaiReact/external \"@material-ui/core/InputLabel\"","webpack://MovaiReact/external \"@material-ui/core/ListItemText\"","webpack://MovaiReact/external \"@material-ui/core/Menu\"","webpack://MovaiReact/external \"@material-ui/core/MenuItem\"","webpack://MovaiReact/external \"@material-ui/core/Paper\"","webpack://MovaiReact/external \"@material-ui/core/Select\"","webpack://MovaiReact/external \"@material-ui/core/Switch\"","webpack://MovaiReact/external \"@material-ui/core/Tab\"","webpack://MovaiReact/external \"@material-ui/core/TableCell\"","webpack://MovaiReact/external \"@material-ui/core/Tabs\"","webpack://MovaiReact/external \"@material-ui/core/TextField\"","webpack://MovaiReact/external \"@material-ui/core/Typography\"","webpack://MovaiReact/external \"@material-ui/core/colors\"","webpack://MovaiReact/external \"@material-ui/core/styles\"","webpack://MovaiReact/external \"@material-ui/core/styles/colorManipulator\"","webpack://MovaiReact/external \"@material-ui/core/utils\"","webpack://MovaiReact/external \"@material-ui/icons/Add\"","webpack://MovaiReact/external \"@material-ui/icons/AddBox\"","webpack://MovaiReact/external \"@material-ui/icons/ArrowDownward\"","webpack://MovaiReact/external \"@material-ui/icons/Check\"","webpack://MovaiReact/external \"@material-ui/icons/ChevronLeft\"","webpack://MovaiReact/external \"@material-ui/icons/ChevronRight\"","webpack://MovaiReact/external \"@material-ui/icons/Clear\"","webpack://MovaiReact/external \"@material-ui/icons/Close\"","webpack://MovaiReact/external \"@material-ui/icons/DeleteOutline\"","webpack://MovaiReact/external \"@material-ui/icons/Edit\"","webpack://MovaiReact/external \"@material-ui/icons/ExpandMore\"","webpack://MovaiReact/external \"@material-ui/icons/FilterList\"","webpack://MovaiReact/external \"@material-ui/icons/FirstPage\"","webpack://MovaiReact/external \"@material-ui/icons/Label\"","webpack://MovaiReact/external \"@material-ui/icons/LastPage\"","webpack://MovaiReact/external \"@material-ui/icons/NavigateNext\"","webpack://MovaiReact/external \"@material-ui/icons/Remove\"","webpack://MovaiReact/external \"@material-ui/icons/SaveAlt\"","webpack://MovaiReact/external \"@material-ui/icons/Search\"","webpack://MovaiReact/external \"@material-ui/icons/Settings\"","webpack://MovaiReact/external \"@material-ui/icons/Today\"","webpack://MovaiReact/external \"@material-ui/icons/ViewColumn\"","webpack://MovaiReact/external \"@material-ui/pickers\"","webpack://MovaiReact/external \"clsx\"","webpack://MovaiReact/external \"earcut\"","webpack://MovaiReact/external \"fontsource-open-sans\"","webpack://MovaiReact/external \"fontsource-roboto\"","webpack://MovaiReact/external \"lodash.isequal\"","webpack://MovaiReact/external \"lodash/capitalize\"","webpack://MovaiReact/external \"lodash/cloneDeep\"","webpack://MovaiReact/external \"lodash/get\"","webpack://MovaiReact/external \"lodash/isEmpty\"","webpack://MovaiReact/external \"lodash/isEqual\"","webpack://MovaiReact/external \"lodash/set\"","webpack://MovaiReact/external \"lodash/uniqBy\"","webpack://MovaiReact/external \"material-icons/css/material-icons.css\"","webpack://MovaiReact/external \"material-table\"","webpack://MovaiReact/external \"monet\"","webpack://MovaiReact/external \"mov-fe-lib-core\"","webpack://MovaiReact/external \"prop-types\"","webpack://MovaiReact/external \"react\"","webpack://MovaiReact/external \"react-dom\"","webpack://MovaiReact/external \"react-resize-detector\"","webpack://MovaiReact/external \"react-virtualized\"","webpack://MovaiReact/external \"react-virtualized-tree\"","webpack://MovaiReact/external \"react-virtualized-tree/lib/main.css\"","webpack://MovaiReact/external \"react-virtualized/styles.css\"","webpack://MovaiReact/external \"styled-components\""],"names":["useStyles","makeStyles","theme","root","marginTop","spacing","link","fontSize","fontWeight","fontFamily","cursor","textDecoration","lastLabel","Breadcrumb","props","classes","style","pathList","map","element","index","length","label","propTypes","PropTypes","array","defaultProps","console","log","Button","className","onClick","color","variant","size","startIcon","disabled","children","object","func","string","isRequired","node","bool","undefined","Collapse","React","useState","open","setOpen","useEffect","handleClickFactory","clickLambda","iconStyle","width","item","divided","ContextMenu","anchorEl","setAnchorEl","handleClick","event","currentTarget","handleClose","cloneElement","evt","Boolean","menuList","reduce","result","push","onClose","navigationList","lowerElement","backgroundColor","Drawer","anchor","ANCHOR","left","right","top","bottom","styles","padding","borderRadius","LoginForm","username","password","remember","error","errorMessage","capsLockOn","Authentication","login","state","apiResponse","setLoggedIn","setState","key","getModifierState","logo","paddingTop","defaultLogo","display","marginLeft","marginRight","formControl","target","value","checkCapsLock","sendCreds","Component","logs","any","loggedIn","withStyles","withTheme","Logs","selectedRobots","levels","limit","logsData","messageRegex","selectedFromDate","selectedToDate","columns","tags","advancedMode","height","levelsList","robotsData","filter","robot","ip","setSelectedRobots","elem","isSelected","robotId","updateRobot","findIndex","id","clearTimeout","logsTimeout","getLogs","robots","Promise","all","robotState","robotStates","off","getRobotLogData","then","dataArrays","prevState","finalArray","dataArray","forEach","data","setTimeout","sort","a","b","time","robotSelected","re","rej","timeoutHandle","dynamicURL","getRequestLevels","getRequestTags","getRequestMessage","MasterDB","get","res","e","divElement","clientHeight","updateSelectedRobots","prevProps","_isEqual","flexDirection","flexGrow","updateRobotSelection","columnList","Object","keys","includes","tagText","findsUniqueKey","tagToDelete","filteredTags","tag","text","newDate","keyToChange","simpleLevelsList","advancedLevelsList","overflowY","minHeight","filterByFromToDates","name","timestamp","battery","temp","okay","Date","dataKey","render","getJustDateFromServer","Time","getJustTimeFromServer","Level","Module","Robot","Message","button","margin","palette","primary","main","borderColor","iconActive","fade","buttonApplyFilters","background","fontStyle","dark","icon","checkbox","limitText","StyledMenu","paper","boxShadow","vertical","horizontal","FilterIcon","otherFilters","t","isActive","title","filterBarContainer","flexWrap","alignItems","input","flex","paddingLeft","searchText","minWidth","addTagText","toggleContainer","datePicker","tagsContainer","tagsList","chip","maxWidth","filtersButton","columnsFilter","iconButton","LogsFilterBar","setTagText","handleRobotChange","arrayEvent","selectedId","getRobotSelector","paddingRight","selected","selectedNames","join","MenuProps","robotIndex","getSearchInput","handleMessageRegex","startAdornment","endAdornment","getLevels","handleLevels","labels","level","indexOf","getTags","keyCode","handleAddTag","handleDeleteTag","getTimeFilters","DateFnsUtils","handleDateChange","getSettings","handleAdvancedMode","handleLimit","shrink","handleColumns","_get","column","ITEM_HEIGHT","ITEM_PADDING_TOP","PaperProps","maxHeight","getContentAnchorEl","number","selectToDate","arePropsEqual","nextProps","memo","flexContainer","boxSizing","table","flip","direction","tableRow","tableRowHover","grey","tableCell","flexColumn","noClick","colorCoding","MuiVirtualizedTable","onRowClick","rowData","clsx","cellData","columnIndex","rowHeight","numeric","headerHeight","tableProps","getRowClassName","other","headerProps","headerRenderer","cellRenderer","PureComponent","arrayOf","shape","VirtualizedTable","LogsTable","INFO","WARNING","DEBUG","ERROR","CRITICAL","keyName","k","j","levelsArray","Array","isArray","toLowerCase","tagsArray","_isEmpty","message","getTimeFromServer","serverTime","toLocaleString","toLocaleDateString","toLocaleTimeString","formatLogsData","stdout","binaryIndexOf","criteria","minIndex","maxIndex","currentIndex","currentElement","comparison","fromDate","toDate","lowerIndex","upperIndex","dateList","getTime","slice","addNestedName","nestedName","newName","updateRunningNodes","treeList","runningNodesList","status","removeDeleteContainer","deleteIndex","splice","i","parentId","detectContainerLoop","flowId","flowIndex","currentFlow","position","overflow","AbstractModal","onKeyPress","submit","onSubmit","cancel","onCancel","justifyContent","alignSelf","cancelColor","cancelText","submitColor","submitText","ConfirmAlertModal","SelectScopeModal","initialData","scope","setData","selectedWorkspace","setSelectedWorkspace","selectedScopeItem","setSelectedScopeItem","workSpaceList","setWorkSpaceList","isLoading","setIsLoading","firstTime","scopeFilteredData","scopeList","Workspace","getAll","response","getAllData","changeWorkspace","workspace","dataToSet","_cloneDeep","getDocs","sortedScopeItems","scopes","ref","url","requestScopeVersions","mapObj","indexToSet","isExpanded","_set","expanded","parents","versionList","versions","index2ndLevel","deepness","confirmNodeSelection","getModalTitle","vowels","pronoun","textAlign","paddingBottom","overflowX","zIndex","nodes","menuItemSpacing","cursorDefault","profileMenuFooter","ProfileMenu","welcomeLabel","userName","extraItems","darkThemeLabel","handleToggleTheme","isDarkTheme","cursorPointer","handleLogout","logoutLabel","version","search","common","white","breakpoints","up","searchIcon","pointerEvents","inputRoot","inputInput","transition","transitions","create","SearchInput","searchInput","enableTimeout","timer","handleSearch","onChange","placeholder","setSearchInput","handleChange","Select","noneOption","inputProps","options","filledSuccess","filledInfo","filledWarning","filledError","opacity","action","defaultIconMapping","success","svgIcons","SuccessOutlined","warning","ReportProblemOutlined","ErrorOutline","info","InfoOutlined","Alert","closeText","iconMapping","role","severity","capitalize","Close","oneOf","CreateSVGIcon","path","fill","viewBox","ReactConfirmAlert","close","closeOnClickOutside","onClickOutside","isClickOutside","overlay","removeBodyClass","removeElementReconfirm","closeOnEscape","onKeypressEscape","isKeyCodeEscape","document","addEventListener","keyboardClose","autoClose","getElementById","autoHideDuration","removeEventListener","willUnmount","customUI","dataCustomUI","closable","dom","handleClickOverlay","renderCustomUI","createElementReconfirm","properties","divTarget","body","classList","add","createElement","appendChild","unmountComponentAtNode","parentNode","removeChild","addBodyClass","remove","snackbar","tableIcons","Add","forwardRef","Check","Clear","Delete","DetailPanel","Edit","Export","Filter","FirstPage","LastPage","NextPage","PreviousPage","ResetSearch","Search","SortArrow","ThirdStateCheck","ViewColumn","Table","actions","components","localization","actionsColumnIndex","draggable","grouping","toolbar","searchFieldAlignment","paging","TabPanel","selectedTab","a11yProps","tabPanel","Tabs","setSelectedTab","newSelectedTab","tabList","tab","scrollable","component","Text","marginBottom","colorSwitchBase","green","colorBar","colorChecked","Toggle","toggle","onToggle","hidden","switchBase","checked","track","labelPlacement","horizFlex","spaceBetween","preContainer","ellipsis","whiteSpace","textOverflow","iconSpace","testArray","EXPANDED","BasicVirtualizedTree","selectedGroup","groupsEnabled","searchValue","searchValueLower","filteredNodes","ch","child","grandChild","searchFilter","rest","onClickNode","onDoubleClickNode","inlineFlex","handleExpansion","oneOfType","TreeSearch","createRef","inputRef","current","focus","forceUpdate","trim","isEmpty","resetValue","ListItemsTree","onKeyUp","ListItemsTreeWithTitle","ListItemsTreeWithSearch","onSearch","Children","x","container","logoArea","navigationArea","accountArea","unsetAccountAreaPadding","VerticalBar","upperElement","Action","memory","parentView","getSceneMemory","gizmoManager","attachedMesh","camera","attachControl","canvas","closeContextDial","setContextActionIndex","AddKeyPointAction","setSelectedAction","scene","ground","maybeMousePos","Util3d","getGroundPosition","mousePos","detachControl","maybeCurrent","oldMousePos","tempMesh","dispose","createKeyPoint","TEMP_KEY_POINT_NAME","Math","floor","random","keyPoint","Color3","setPropertiesWithName","getUndoManager","addIt","getUndoAbleAction","Maybe","none","is2addInServer","Gray","rootMesh","getRootNode","mesh","KeyPoint","ofDict","r","g","parent","localPosition","getLocalCoordFromWorld","Vec3","ofBabylon","toBabylon","setPositionWithLocalVector","Axis","Z","scale","DEFAULT_SIZE","addNodeItem2Tree","UndoManager","actionBuilder","doAction","Vector3","Zero","material","diffuseColor","updateNodeInServer","undoAction","deleteNodeFromTreeUsingName","build","MouseKeysAction","AddMapAction","mapLoader","TYPE","load","textureSrc","yamlSrc","downloadLinks","MapLoader","getMapUrl","firstTimeLoad","resolution","origin","imageSize","groundBuilder","fromNull","orSome","originPos","of","sub","rootNode","GlobalRef","inverseCoordinates","setTarget","y","z","Map","isVisible","is2sendServer","setEnabled","DefaultScene","createMeshGround","maybeNode","getNodeFromTree","orElseRun","isImport","addMap","doIt","getUndoAction","ACTIONS","orbit","getObjectTree","oldMapName","newMapName","switchMaps","AssetsManager","getInstance","getAssetsActionMap","AddMeshAction","actionMemoryClone","getIsImport","finalName","getFinalNameFromMemory","loadMesh","actionMemory","parentMesh","getParentMesh","createNormals","maybeDict","ofNull","flatMap","d","some","FromArray","rotationQuaternion","quaternion","Quaternion","Identity","StandardMaterial","emissiveColor","meshItem","Mesh","keyValueMap","renderMenus","parentObj","parentName","treeNode","MeshLoader","getMeshUrl","addMesh","dragObjects","transformMesh","addMesh2Scene","BoxRegionAction","buttons","createBoxRegion","TEMP_BOX_REGION_NAME","subtract","boxMesh","region","Red","localRegion","middlePoint","centeredRegion","boxRegionItem","BoxRegion","toArray","corners","points","DragObjectsAction","maybeSelectedMesh","pickMesh","currentMesh","dragDownMesh","orLazy","dragDownWithoutMesh","selectedMesh","groundPos","dragMoveMesh","dragMoveWithoutMesh","dragUpMesh","dragUpWithoutMesh","destroySelectionDiv","defaultAction","predicateActionList","predicate","code","getDeleteButtonAction","ctrlKey","getCopyAction","getPasteAction","selectOneAction","getMouseContextActions","setMouseContextActions","mousePosFromRoot","getPasteOnClick","pasteAction","Clipboard","paste","clickPointInWorld","ZERO","movePointInWorld","startDivPos","Vec2","addSelectedMesh","handleMeshRightClick","updateMouseVars","isSelectionPlaceHolder","addGizmo2Mesh","notifyObservers","selectMeshUpdateUI","meshSelector","MeshSelector","ofMainView","selectionPlaceHolder","SelectionPlaceHolder","selectedMeshes","meshes","highlightMeshesInScene","highlightNodesInTree","addGizmo2Name","clear","setProperties","getMouseCoordsFromRoot","mousePosRoot","handleRightClickWithoutMesh","shiftKey","createSelectionDiv","pointerX","pointerY","selector","newMousePosInWorld","v","vLocal","updateSelectionDiv","selectPlaceHolder","groundPosInWorld","bigDisplacement","addArray","arrayOfMeshes","selectObjectsInside","groundPosInGlobal","edgeIndexes","has","isOne","onDeleteNode","contextActions","getContextActions","nodeItem","copy","someMainView","getCopyFunction","copiedMesh","nodeCopyActionPairs","nodeActionPairs","maybeCopiedItems","copyAction","displacement","toGlobalCoord","absolutePosition","copiedItems","maybe","isSome","copiedMeshes","copiedNames","is2updateServer","observers","obs","updatedPointMesh","graphVertex","vertexObs","_children","m","localDisplacement","newPos","invertDisplacement","findMouseInDom","outerDiv","ID","ReactDOM","newMouse","oldMouse","op","min","minX","minY","max","maxX","maxY","clientX","clientY","cornersDiv","rayCastCorners","p","pickPoints","treeObj","TreeObject","insideBox","flatten","isItemInsideBox","insideBoxDragAbleMeshes","pickInfo","pick","hit","floorPoint","pickedPoint","orNull","polygon","type","getType","GraphItem","isMeshInsideBox","planeP","isPointInsideBox","epsilon","theta","n","vi","vii","acos","dot","abs","PI","SelectDiv","border","DrawGraphAction","mousePosConsumer","maybeMesh","isConnectableMesh","possibleMesh","Green","onPointerDownLine","resetPreview","cata","pickedMesh","firstMousePos","onPointerMoveLine","escapeAction","deletePreviewMeshes","firstClickedMesh","previewMeshes","lambda","Path","keyPoints","_","meshI","meshJ","belongsToPath","nameI","nameJ","clickedMesh","belongs2SamePath","getUndoAbleLineEdge","edgeMeshes","createEdge","deleteEdge","visibility","edgeEmbedding","getEdgeMesh","Blue","Constants","RADIUS","isPickable","createGraphItemIfNone","getGraph","graphNode","graphItem","addEdge","delEdge","DrawPathAction","mouseCurve","getUndoAbleClickAction","getDrawPathContextAction","curve","localCurve","pointAverage","centeredCurve","w","pathItem","localPath","ans","TEMP_PATH_NAME","getUndoAbleEnterAction","kps","finalKps","createCurve","setContextActions","reducedKps","keyPointMeshes","addEdgesInKeyPoints","deleteEdgeInKeyPoints","pathName","graph","MeasureAction","currentMousePos","ruler","MeshBuilder","CreateLines","updatable","addTextGUI","calculateDistance","start","end","startVec","endVec","toFixed","advancedTexture","removeControl","AdvancedDynamicTexture","CreateFullscreenUI","TextBlock","addControl","OrbitAction","PolygonRegionAction","TEMP_POLYGON_REGION_NAME","getDrawPolygonContextAction","Yellow","pointAverageVec3","polygonRegionItem","PolygonRegion","localPolygon","createPolygonRegion","RobotAction","robotAnimatorFactory","getDefaultAnimator","addRobot","meshTree","createRobotMeshTree","robotTree","dict","builder","assetName","cloudPoint","PointCloud","loadRobot","ROBOT_MESH_NAME","createRobotFromMesh","getRobot","animate","getCloudPoint","assets","assetsActionMap","retrieveAssetsFromDb","observersBySceneId","resolve","subscribe","Scope","Name","RobotName","getRobotNameUpdate","getRobotNameSub","finishSub","File","FileLabel","getMapUpdater","getMapSubscriber","getMeshUpdater","getMeshSubscriber","place","finishInitialSubscribers","subs","afterLoad","f","delAsset","dataGetter","after","getMapFileData","fileName","actionMap","del","filename","split","set","loader","ASSETS_TYPES","addAsset","maybeGet","getMeshFileData","instance","observer","sceneId","_uid","assetKey","asset","AssetsTypesFactory","signalObservers","Error","values","every","localRobot","orientation","getter","deleteRobot","prop","obj","cachedMap","fetch","parseYaml","image","yamlTxt","actionDict","Number","parseFloat","JSON","parse","s","getImageSize","src","reject","img","Image","onload","naturalWidth","naturalHeight","FLEX_STYLE","BaseViewer","antialias","engineOptions","adaptToDeviceRatio","sceneOptions","onRender","onSceneReady","is2render","sceneFactory","reactCanvas","useRef","loaded","setLoaded","setScene","setSize","setUpScene","engine","Scene","isReady","onReadyObservable","addOnce","onResize","getEngine","resize","renderScene","nScene","runRenderLoop","Engine","newScene","preserveDrawingBuffer","stencil","Graph","edgeKey","addVertex","edgeProps","ijKey","jiKey","neighbors","getNeighbors","delVertex","getEdge","measure","drawGraph","drawRegion","addKeyPoint","drawBoxRegion","drawPath","MainViewRetriever","mainView","serverScene","errors","importSceneRecursive","importDefaultScene","nodeDict","nodeItemClass","NODE_ITEM_FACTORY_MAP","isAsset","importAsset","assetType","assetActionMap","retrievedAction","cause","solution","arrayTree","sortArrayTree","importNodeItem","send2server","placeHolderInstance","meshSelectionSet","Set","isSubtractive","filteredSet","Box","Wall","Mat3","v1","v2","v3","constructor","mat3","vec3","u","prodVec","dotVec","mat","equals","babylonMat","arrayMat","Matrix","GetAsMatrix3x3","vec","acc","sqrt","fromArray","biLambda","fold","initial","vector3","l","operation","binary","initialValue","MAX_VALUE","isNaN","isFinite","babylon","identityMatrix","e1","e2","e3","pivot","normalize","AssetNodeItem","NodeItem","orUndefined","createBox","mapDict2Mesh","schema","jsonSchema","lower","scaleX","scaleY","uiSchema","worldCorners","getGlobalCoordinates","form","oldForm","toForm","oldDimensions","dimensions","isEqual","ofFormDimensions","newLowerPositionInWorldCoordinates","newLocalDimensions","localLowerPosition","getLocalCoordFromGlobal","notify","update","createBoxRegionMesh","backFaceCulling","VISIBILITY","babylonQuaternion","createPlaceHolderKeyPoints","FACES","boxRegion","X","Y","h","boxRegionMesh","positions","faces","meshFromPositionAndFaces","createNewMeshFromOldUsingNewBox","newBox","average","rotMat3","getRotationMatrix","scaleVec3","scaling","averageInParentCoord","mul","newMesh","childrenCopy","c","getKeyPointObserverFunction","boxRegionTreeNode","corner","createSphere","Observable","THETA","ROS_ORIGIN","cos","sin","rosOrigin","getRosOrigin","globalRefMesh","referentialBuilder","NAME","boxParams","CreateBox","rotationMatrix","pos","getUniqueId","graphItemInstances","isDisposed","graphPlaceHolder","getGraphPlaceHolder","graphFormMapper","getDefaultFormMapper","edgeMesh","getUndoDeleteEdge","getToFormEdge","meshByEdgeId","vertexGenerator","vertices","getVertices","edges","getEdges","getVertex","vertexData","String","ids","key2Edge","edgeData","edge","belongsSrcMesh","belongsTrgMesh","weight","belongsSrc","exportBelongToData","belongsTrg","doMeshesBelong2SamePath","ofForm","annotations","setAnnotations2Form","lodashGet","delVertexRecursively","iMesh","jMesh","iIndex","jIndex","hasEdge","buildVertex","buildEdge","getVertexIdFromMesh","maybeV","newPosition","iData","jData","nodeTree","vertex","vertexMesh","vertexIndex","vId","maybeVertex","VertexData","addObs2VertexMesh","vData","delVertexFromMesh","getVertexMeshObs","updateVertexPosition","iVertexD","jVertexD","EdgeData","doVerticesBelong2SamePath","edgeGlobalCoord","getGlobalCoord","getEdgeMouseCtxActions","addObserver2EdgeMesh","addOnClickEdge","getEdgeObs","getOnClickEdge","getUndoDelLineEdge","edgeVertexD","isMeshBelong2Path","iParentNodeItem","jParentNodeItem","vertexCounter","MIN_VALUE","getMeshesFromEdgeData","dataEdge","importFeatures","vertexPosition","radius","sphere","createTubeFromPoints","One","ind","globalPos","vertexDataI","vertexDataJ","CreatePolyhedron","custom","TRIANGULAR_ANTIPRISM","convertToFlatShadedMesh","axis","category","face","toDict","oldName","q","RotationYawPitchRoll","rotation","isEnabled","toHexString","quat","FromHexString","isForceUpdate","rootItem","copyDict","getUID","newPosArray","copiedNodeItem","childrenWithDelVertex","childMesh","someDict","babylonColor","AnnotationManager","getAnnotations","annotation","_capitalize","names","splinePath","selectedKeyPointIndex","newSchema","selectedKeyPoint","formPosition","newPosInWorldCoordinates","localPos","updatePathEdgeWithForm","first","last","edgeIds","copiedPath","kp","isPathOnGraph","updateGraph","spline","getSplineFromCurve","getMaterialFromColor","splineObj2redis","path2return","point","getMeshOnClick","getMeshObserver","newPoints","keyPointUpdateFunction","defaultKeyPointUpdate","oldMesh","oldKeyPoints","keyPointMesh","copyPosition","getUndoDeleteKeyPoint","copyPoints","createNewMeshFromOldUsingNewPoints","onAddNewPointKeyPointUpdate","getUndoAddKeyPointInBetween","nextIndex","numberOfPoints","oldPoints","concat","specialIndex","oldKpMeshes","isTopologyChange","keypoints","kChild","getConeMesh","getKeyPointActions","pathTreeNode","deleteKeyPoint","addKeyPointInBetween","curveMesh","getSphereMesh","cone","createOrientedCone","Utils","pointCloudSubscribe","Parameter","front_lidar","Value","updatePointCloud","colors","applyToMesh","unsubscribe","pointCloudMesh","disableLighting","pointsCloud","pointSize","positiveMod","mod","createExtrudedPolygonMesh","stitchingBoundaries","computeOrientation","modi","reverseOrientation","triangleIndex","polygonRegionMesh","lowerTriangulation","triangulatePolygon","upperTriangulation","stitchTriangulation","polygonTreeNode","getAbsolutePosition","polygonMesh","oldTimeInMillis","robotAnimator","dt","requestAnimationFrameId","requestAnimationFrame","timeSinceLastUpdate","isOnline","speed","qSpeed","newOri","db","Database","window","cancelAnimationFrame","newRobotTf","lastPosition","lastOrientation","newOrientation","dtReciprocal","TIME_2_BE_OFFLINE_IN_SEC","toOffline","toOnline","thetaX","translate","boundScale","boundingSphere","getBoundingInfo","center","tfSphereMesh","ONES","addRotation","spherePlaceHolder","createRobotMeshTreeRecursive","robotMesh","RobotBuilder","vel","rotate","Space","LOCAL","tf","updateRobotMeshTree","robot2Animate","biasedCoin","someNaNOrInfinite","setOnOffLine","_name","_meshTree","_parentMesh","_scene","_isPickable","_id","_keyValueMap","_assetName","variables","baseAxis","localWall","createWallMesh","centeredWall","tangent","normal","wallMesh","newWall","locallyTranslate","wallNode","wall","SceneViewer","sceneMemory","tree","objectTree","undoManager","TreeServerUtils","ofScene","sceneName","newObjectTree","focusObject","isPanned","_absolutePosition","clone","cameraSpeed","targetPos","beta","isRotated","DefaultMouseEvents","onPointerDown","onPointerUp","onPointerMove","mouseLocationText","afterLoading","SceneServerUtils","retrieveScene","errorList","importScene","assetManager","getAssets","loadAssets","retrieveSceneFromServer","setCameraToTarget","getRenderingCanvas","addCanvasEventListeners","createMouseLocationText","createCamera","light","createLight","createGizmo","highlightLayer","layer","HighlightLayer","lastHlMeshes","predicateAction","propVar","loadScene","getNode","events","resetErrorList","createScene","getErrorSolutionList","masterProps","augmentProps","TreeNode","TreeNodeBuilder","_title","_item","_expanded","_isVisible","getNodeRecursive","answer","getParentNodeRecursive","foundChild","compareTreesRecursive","treeA","treeB","nodeEquality","nodeA","nodeB","mapRecursive","newTree","nod","mappedNode","forEachRecursive","expand","filterTree","childPredicate","nodeMap","CameraBuilder","_sphericalCoordinates","_target","sphericalCoordinates","ArcRotateCamera","DirectionalLightBuilder","_direction","_intensity","intensity","DirectionalLight","GizmoManagerBuilder","_isPosition","_isRotation","_isBoundingBox","_isScale","_usePointerToAttachGizmos","GizmoManager","positionGizmoEnabled","rotationGizmoEnabled","boundingBoxGizmoEnabled","scaleGizmoEnabled","usePointerToAttachGizmos","GroundBuilder","_width","_height","_textureSrc","CreateGround","WORLD","ambientTexture","Texture","uScale","vScale","PositionalLightBuilder","_position","PointLight","ReferentialBuilder","_boxParams","_size","axisX","axisY","axisZ","localOrigin","angleByMeshName","_uniqBy","getAngleFromMesh","placeHolderPosition","createPlaceHolderIn","getShaderMaterial","that","HEIGHT","getPlaceHolderObs","placeHolder","filteredMeshes","dTheta","handleMotion","VERTEX","frag","FRAG","Effect","ShadersStore","shaderMaterial","ShaderMaterial","fragment","attributes","uniforms","T","onBindObservable","setFloat","atan2","handleTranslation","handleRotation","baseCoord","toVec2","eITheta","rV","prod","finalV","finalTheta","meshParent","meshParentPos","meshParentRotMat","meshParentScaling","childPos","positionInWorld","forwardCoordinates","worldPosition","withTranslation","inverseScaling","localRotationMatrix","maybeQuaternion","toRotationMatrix","ofBabylonMatrix","normals","getVerticesData","VertexBuffer","NormalKind","PositionKind","lines","scaleInPlace","normalLines","CreateLineSystem","uArray","Dot","indices","triangulation","earcut","len","i3","vec3Poly","arrayOfPoints","randomDigits","arrayOfVector3","transform","segments","surface","orthogonalBasisFromVector","sign","Cross","zeroIndex","uIndex","diameter","CreateSphere","box","CreateTube","sideOrientation","DOUBLESIDE","cap","CAP_ALL","distance","orientations","nbPoints","closed","Curve3","CreateCatmullRomSpline","getPoints","splineObj","getCurveOrientations","Animator","next","doWhile","requestAnimeId","stop","play","AnimatorBuilder","_state","_next","_end","someAreEmpty","retrieveAnnotationsFromDb","delAnnotation","addAnnotation","Annotation","names2delete","annotationType","annotationObj","Type","Label","getSocketAnimator","SCENE_CONTEXT","COPY_PASTE_UID","Clip","write","read","POINTS_DENSITY","CLOUD_FUNCTION_NAME","mousePosClick","mousePosMove","currentLocal","setMouseLocationTxt","panCamera","vBabylon","getBabylonCoordinates","animateCamera","mouseButtonActions","filterActions","initialState","nextState","vdt","RotationGizmo","UtilityLayerRenderer","xGizmo","dragBehavior","detach","scaleRatio","yGizmo","COLLISION_RADIUS","cameraBuilder","inertia","collisionRadius","panningInertia","checkCollisions","panningSensibility","lowerRadiusLimit","directionalLightBuilder","wireframe","clearColor","Black","collisionsEnabled","MeshCache","meshCacheBySceneId","count","meshCache","cloneMesh","meshName","mapFunction","hasKey","assetsManager","meshTask","addMeshTask","MESH_URL","onSuccess","task","loadedMeshes","put","onError","exception","onFinish","successCallback","DEFAULT_SUCCESS","failCallback","DEFAULT_FAILURE","cloudFunction","successFailIf","failureLocation","childName","getParentNode","is2delInServer","deleteNodeInServer","maybeParent","getParentFromChild","node2Add","maybeParentNode","addNodeItem2Server","Style","createGlobalStyle","S","themeFactory","particular","typography","h1","h2","h3","h4","h5","h6","body1","Themes","createMuiTheme","bottomNavigation","globalStats","subTextColor","upperTextColor","secondary","overrides","MuiButton","outlined","contained","containedPrimary","containedSecondary","MuiButtonGroup","groupedContainedPrimary","groupedOutlined","groupedText","MuiIconButton","MuiListItem","MuiFormControlLabel","MuiInputBase","font","MuiFilledInput","underline","Roboto","OpenSans","getTheme","localStorage","getItem","setTheme","setItem"],"mappings":"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AA8B;;AAE9B;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA,CAAC;;;AAGD;AACA;AACA;AACA,qDAAqD,cAAc;AACnE;AACA,C;;;;;;;;;;;;AC7Fa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA,uDAAuD;;AAEvD;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;;AAEA;AACA;;AAEA,iBAAiB,wBAAwB;AACzC;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,iBAAiB,iBAAiB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,gBAAgB,KAAwC,GAAG,sBAAiB,GAAG,SAAI;;AAEnF;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA,qEAAqE,qBAAqB,aAAa;;AAEvG;;AAEA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA,yDAAyD;AACzD,GAAG;;AAEH;;;AAGA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;A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AA,sE;;;;;;;;;;;ACAA,4E;;;;;;;;;;;ACAA,mE;;;;;;;;;;;ACAA,sE;;;;;;;;;;;ACAA,+D;;;;;;;;;;;ACAA,2D;;;;;;;;;;;ACAA,sE;;;;;;;;;;;ACAA,gE;;;;;;;;;;;ACAA,+E;;;;;;;;;;;ACAA,iF;;;;;;;;;;;ACAA,qE;;;;;;;;;;;ACAA,6E;;;;;;;;;;;ACAA,yE;;;;;;;;;;;ACAA,8D;;;;;;;;;;;ACAA,uD;;;;;;;;;;;ACAA,4C;;;;;;;;;;;ACAA,6D;;;;;;;;;;;ACAA,uD;;;;;;;;;;;ACAA,8C;;;;;;;;;;;ACAA,iD;;;;;;;;;;;ACAA,+C;;;;;;;;;;;ACAA,8C;;;;;;;;;;;ACAA,8C;;;;;;;;;;;ACAA,uD;;;;;;;;;;;ACAA,kD;;;;;;;;;;;ACAA,0D;;;;;;;;;;;ACAA,qD;;;;;;;;;;;ACAA,uD;;;;;;;;;;;ACAA,mD;;;;;;;;;;;ACAA,+D;;;;;;;;;;;ACAA,uD;;;;;;;;;;;ACAA,sD;;;;;;;;;;;ACAA,qD;;;;;;;;;;;ACAA,0D;;;;;;;;;;;ACAA,+D;;;;;;;;;;;ACAA,6D;;;;;;;;;;;ACAA,mD;;;;;;;;;;;ACAA,yD;;;;;;;;;;;ACAA,oD;;;;;;;;;;;ACAA,6D;;;;;;;;;;;ACAA,wD;;;;;;;;;;;ACAA,yD;;;;;;;;;;;ACAA,2D;;;;;;;;;;;ACAA,mD;;;;;;;;;;;ACAA,uD;;;;;;;;;;;ACAA,oD;;;;;;;;;;;ACAA,qD;;;;;;;;;;;ACAA,qD;;;;;;;;;;;ACAA,kD;;;;;;;;;;;ACAA,wD;;;;;;;;;;;ACAA,mD;;;;;;;;;;;ACAA,wD;;;;;;;;;;;ACAA,yD;;;;;;;;;;;ACAA,qD;;;;;;;;;;;ACAA,qD;;;;;;;;;;;ACAA,sE;;;;;;;;;;;ACAA,oD;;;;;;;;;;;ACAA,mD;;;;;;;;;;;ACAA,sD;;;;;;;;;;;ACAA,6D;;;;;;;;;;;ACAA,qD;;;;;;;;;;;ACAA,2D;;;;;;;;;;;ACAA,4D;;;;;;;;;;;ACAA,qD;;;;;;;;;;;ACAA,qD;;;;;;;;;;;ACAA,6D;;;;;;;;;;;ACAA,oD;;;;;;;;;;;ACAA,0D;;;;;;;;;;;ACAA,0D;;;;;;;;;;;ACAA,yD;;;;;;;;;;;ACAA,qD;;;;;;;;;;;ACAA,wD;;;;;;;;;;;ACAA,4D;;;;;;;;;;;ACAA,sD;;;;;;;;;;;ACAA,uD;;;;;;;;;;;ACAA,sD;;;;;;;;;;;ACAA,wD;;;;;;;;;;;ACAA,qD;;;;;;;;;;;ACAA,0D;;;;;;;;;;;ACAA,iD;;;;;;;;;;;ACAA,iC;;;;;;;;;;;ACAA,mC;;;;;;;;;;;ACAA,iD;;;;;;;;;;;ACAA,8C;;;;;;;;;;;ACAA,2C;;;;;;;;;;;ACAA,8C;;;;;;;;;;;ACAA,6C;;;;;;;;;;;ACAA,uC;;;;;;;;;;;ACAA,2C;;;;;;;;;;;ACAA,2C;;;;;;;;;;;ACAA,uC;;;;;;;;;;;ACAA,0C;;;;;;;;;;;ACAA,kE;;;;;;;;;;;ACAA,2C;;;;;;;;;;;ACAA,kC;;;;;;;;;;;ACAA,4C;;;;;;;;;;;ACAA,uC;;;;;;;;;;;ACAA,kC;;;;;;;;;;;ACAA,sC;;;;;;;;;;;ACAA,kD;;;;;;;;;;;ACAA,8C;;;;;;;;;;;ACAA,mD;;;;;;;;;;;ACAA,gE;;;;;;;;;;;ACAA,yD;;;;;;;;;;;ACAA,8C","file":"dist/index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"MovaiReact\"] = factory();\n\telse\n\t\troot[\"MovaiReact\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./index.js\");\n","import Button from \"./src/Components/Button\";\nimport AbstractModal from \"./src/Components/Modal/AbstractModal\";\nimport ConfirmAlertModal from \"./src/Components/Modal/ConfirmAlertModal\";\nimport Drawer from \"./src/Components/Drawer\";\nimport Collapse from \"./src/Components/Collapse\";\nimport VerticalBar from \"./src/Components/VerticalBar\";\nimport ContextMenu from \"./src/Components/ContextMenu\";\nimport Table from \"./src/Components/Table\";\nimport Tabs from \"./src/Components/Tabs\";\nimport Text from \"./src/Components/Text\";\nimport Toggle from \"./src/Components/Toggle\";\nimport SearchInput from \"./src/Components/SearchInput\";\nimport Breadcrumb from \"./src/Components/Breadcrumb\";\nimport SceneViewer from \"./src/Components/Viewer/SceneViewer\";\nimport Select from \"./src/Components/Select\";\nimport { snackbar } from \"./src/Components/Snackbar/Snackbar\";\nimport Themes from \"./src/styles/Themes\";\nimport Style from \"./src/styles/Style\";\nimport Logs from \"./src/Components/Logs/Logs\";\nimport LoginForm from \"./src/Components/LoginForm/LoginForm\";\nimport ProfileMenu from \"./src/Components/ProfileMenu\";\nimport FilterIcon from \"./src/Components/Logs/LogsFilterBar/FiltersIcon/FiltersIcon\";\nimport SelectScopeModal from \"./src/Components/Modal/SelectScopeModal\";\n\nexport {\n  Button,\n  AbstractModal,\n  ConfirmAlertModal,\n  SelectScopeModal,\n  Drawer,\n  Collapse,\n  VerticalBar,\n  ContextMenu,\n  Table,\n  Tabs,\n  Text,\n  Themes,\n  Toggle,\n  SearchInput,\n  Breadcrumb,\n  SceneViewer,\n  Select,\n  snackbar,\n  Style,\n  Logs,\n  FilterIcon,\n  LoginForm,\n  ProfileMenu\n};\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".flow-action {\\n  display: flex;\\n  background: transparent;\\n  width: 35px;\\n  height: 35px;\\n  margin: 6px;\\n  border-radius: 50%;\\n  justify-content: center;\\n  align-items: center;\\n  transition: background-color 0.5s;\\n}\\n\\n.flow-action:hover {\\n  background: rgba(11, 106, 138, 0.2);\\n  cursor: pointer;\\n}\\n\\n.robot-logs-container {\\n  display: flex;\\n  flex-direction: column;\\n  height: 1px;\\n  flex-grow: 1;\\n}\\n\\n.tree-grow-overflow {\\n  flex-grow: 0.5;\\n  overflow-y: auto;\\n  min-height: 0;\\n  height: 100%;\\n}\\n\\n.logs-grow-overflow {\\n  flex-grow: 1;\\n  overflow-y: auto;\\n  min-height: 0;\\n  height: 100%;\\n}\\n\\n.saving {\\n  /* font-size: 40px; */\\n  margin: 0;\\n}\\n\\n.saving span {\\n  font-size: 15px;\\n  animation-name: blink;\\n  animation-duration: 1.4s;\\n  animation-iteration-count: infinite;\\n  animation-fill-mode: both;\\n}\\n\\n.saving span:nth-child(2) {\\n  animation-delay: 0.2s;\\n}\\n\\n.saving span:nth-child(3) {\\n  animation-delay: 0.4s;\\n}\\n\\n@keyframes blink {\\n  0% {\\n    opacity: 0.2;\\n  }\\n  20% {\\n    opacity: 1;\\n  }\\n  100% {\\n    opacity: 0.2;\\n  }\\n}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"body.react-confirm-alert-body-element {\\n  overflow: hidden;\\n}\\n\\n.react-confirm-alert-blur {\\n  filter: url(#gaussian-blur);\\n  filter: blur(2px);\\n  -webkit-filter: blur(2px);\\n}\\n\\n.react-confirm-alert-overlay {\\n  position: fixed;\\n  top: calc(100vh - 300px);\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n  z-index: 99;\\n  display: -webkit-flex;\\n  display: -moz-flex;\\n  display: -ms-flex;\\n  display: -o-flex;\\n  display: flex;\\n  justify-content: flex-start;\\n  -ms-align-items: center;\\n  align-items: flex-end;\\n  opacity: 1;\\n}\\n\\n.react-confirm-alert-body {\\n  width: 400px;\\n  padding: 30px;\\n}\\n\\n.react-confirm-alert-svg {\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n}\\n\\n.react-confirm-alert-body > h1 {\\n  margin-top: 0;\\n}\\n\\n.react-confirm-alert-body > h3 {\\n  margin: 0;\\n  font-size: 16px;\\n}\\n\\n.react-confirm-alert-button-group {\\n  display: -webkit-flex;\\n  display: -moz-flex;\\n  display: -ms-flex;\\n  display: -o-flex;\\n  display: flex;\\n  justify-content: flex-start;\\n  margin-top: 20px;\\n}\\n\\n.react-confirm-alert-button-group > button {\\n  outline: none;\\n  background: #333;\\n  border: none;\\n  display: inline-block;\\n  padding: 6px 18px;\\n  color: #eee;\\n  margin-right: 10px;\\n  border-radius: 5px;\\n  font-size: 12px;\\n  cursor: pointer;\\n}\\n\\n.icon-container {\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n}\\n\\n.icon-container:hover {\\n  cursor: pointer;\\n}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\n// eslint-disable-next-line func-names\nmodule.exports = function (useSourceMap) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item, useSourceMap);\n\n      if (item[2]) {\n        return \"@media \".concat(item[2], \" {\").concat(content, \"}\");\n      }\n\n      return content;\n    }).join('');\n  }; // import a list of modules into the list\n  // eslint-disable-next-line func-names\n\n\n  list.i = function (modules, mediaQuery, dedupe) {\n    if (typeof modules === 'string') {\n      // eslint-disable-next-line no-param-reassign\n      modules = [[null, modules, '']];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var i = 0; i < this.length; i++) {\n        // eslint-disable-next-line prefer-destructuring\n        var id = this[i][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _i = 0; _i < modules.length; _i++) {\n      var item = [].concat(modules[_i]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        // eslint-disable-next-line no-continue\n        continue;\n      }\n\n      if (mediaQuery) {\n        if (!item[2]) {\n          item[2] = mediaQuery;\n        } else {\n          item[2] = \"\".concat(mediaQuery, \" and \").concat(item[2]);\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n  var content = item[1] || ''; // eslint-disable-next-line prefer-destructuring\n\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (useSourceMap && typeof btoa === 'function') {\n    var sourceMapping = toComment(cssMapping);\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot || '').concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n  }\n\n  return [content].join('\\n');\n} // Adapted from convert-source-map (MIT)\n\n\nfunction toComment(sourceMap) {\n  // eslint-disable-next-line no-undef\n  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n  var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n  return \"/*# \".concat(data, \" */\");\n}","\"use strict\";\n\nvar isOldIE = function isOldIE() {\n  var memo;\n  return function memorize() {\n    if (typeof memo === 'undefined') {\n      // Test for IE <= 9 as proposed by Browserhacks\n      // @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n      // Tests for existence of standard globals is to allow style-loader\n      // to operate correctly into non-standard environments\n      // @see https://github.com/webpack-contrib/style-loader/issues/177\n      memo = Boolean(window && document && document.all && !window.atob);\n    }\n\n    return memo;\n  };\n}();\n\nvar getTarget = function getTarget() {\n  var memo = {};\n  return function memorize(target) {\n    if (typeof memo[target] === 'undefined') {\n      var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n      if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n        try {\n          // This will throw an exception if access to iframe is blocked\n          // due to cross-origin restrictions\n          styleTarget = styleTarget.contentDocument.head;\n        } catch (e) {\n          // istanbul ignore next\n          styleTarget = null;\n        }\n      }\n\n      memo[target] = styleTarget;\n    }\n\n    return memo[target];\n  };\n}();\n\nvar stylesInDom = [];\n\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n\n  for (var i = 0; i < stylesInDom.length; i++) {\n    if (stylesInDom[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var index = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3]\n    };\n\n    if (index !== -1) {\n      stylesInDom[index].references++;\n      stylesInDom[index].updater(obj);\n    } else {\n      stylesInDom.push({\n        identifier: identifier,\n        updater: addStyle(obj, options),\n        references: 1\n      });\n    }\n\n    identifiers.push(identifier);\n  }\n\n  return identifiers;\n}\n\nfunction insertStyleElement(options) {\n  var style = document.createElement('style');\n  var attributes = options.attributes || {};\n\n  if (typeof attributes.nonce === 'undefined') {\n    var nonce = typeof __webpack_nonce__ !== 'undefined' ? __webpack_nonce__ : null;\n\n    if (nonce) {\n      attributes.nonce = nonce;\n    }\n  }\n\n  Object.keys(attributes).forEach(function (key) {\n    style.setAttribute(key, attributes[key]);\n  });\n\n  if (typeof options.insert === 'function') {\n    options.insert(style);\n  } else {\n    var target = getTarget(options.insert || 'head');\n\n    if (!target) {\n      throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n    }\n\n    target.appendChild(style);\n  }\n\n  return style;\n}\n\nfunction removeStyleElement(style) {\n  // istanbul ignore if\n  if (style.parentNode === null) {\n    return false;\n  }\n\n  style.parentNode.removeChild(style);\n}\n/* istanbul ignore next  */\n\n\nvar replaceText = function replaceText() {\n  var textStore = [];\n  return function replace(index, replacement) {\n    textStore[index] = replacement;\n    return textStore.filter(Boolean).join('\\n');\n  };\n}();\n\nfunction applyToSingletonTag(style, index, remove, obj) {\n  var css = remove ? '' : obj.media ? \"@media \".concat(obj.media, \" {\").concat(obj.css, \"}\") : obj.css; // For old IE\n\n  /* istanbul ignore if  */\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = replaceText(index, css);\n  } else {\n    var cssNode = document.createTextNode(css);\n    var childNodes = style.childNodes;\n\n    if (childNodes[index]) {\n      style.removeChild(childNodes[index]);\n    }\n\n    if (childNodes.length) {\n      style.insertBefore(cssNode, childNodes[index]);\n    } else {\n      style.appendChild(cssNode);\n    }\n  }\n}\n\nfunction applyToTag(style, options, obj) {\n  var css = obj.css;\n  var media = obj.media;\n  var sourceMap = obj.sourceMap;\n\n  if (media) {\n    style.setAttribute('media', media);\n  } else {\n    style.removeAttribute('media');\n  }\n\n  if (sourceMap && typeof btoa !== 'undefined') {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    while (style.firstChild) {\n      style.removeChild(style.firstChild);\n    }\n\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar singleton = null;\nvar singletonCounter = 0;\n\nfunction addStyle(obj, options) {\n  var style;\n  var update;\n  var remove;\n\n  if (options.singleton) {\n    var styleIndex = singletonCounter++;\n    style = singleton || (singleton = insertStyleElement(options));\n    update = applyToSingletonTag.bind(null, style, styleIndex, false);\n    remove = applyToSingletonTag.bind(null, style, styleIndex, true);\n  } else {\n    style = insertStyleElement(options);\n    update = applyToTag.bind(null, style, options);\n\n    remove = function remove() {\n      removeStyleElement(style);\n    };\n  }\n\n  update(obj);\n  return function updateStyle(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {\n        return;\n      }\n\n      update(obj = newObj);\n    } else {\n      remove();\n    }\n  };\n}\n\nmodule.exports = function (list, options) {\n  options = options || {}; // Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n  // tags it will allow on a page\n\n  if (!options.singleton && typeof options.singleton !== 'boolean') {\n    options.singleton = isOldIE();\n  }\n\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n\n    if (Object.prototype.toString.call(newList) !== '[object Array]') {\n      return;\n    }\n\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDom[index].references--;\n    }\n\n    var newLastIdentifiers = modulesToDom(newList, options);\n\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n\n      var _index = getIndexByIdentifier(_identifier);\n\n      if (stylesInDom[_index].references === 0) {\n        stylesInDom[_index].updater();\n\n        stylesInDom.splice(_index, 1);\n      }\n    }\n\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Breadcrumbs from \"@material-ui/core/Breadcrumbs\";\nimport NavigateNextIcon from \"@material-ui/icons/NavigateNext\";\nimport Typography from \"@material-ui/core/Typography\";\nimport PropTypes from \"prop-types\";\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    \"& > * + *\": {\n      marginTop: theme.spacing(2)\n    }\n  },\n  link: {\n    fontSize: \"24px\",\n    fontWeight: 800,\n    fontFamily: \"Open Sans\",\n    \"&:hover\": {\n      cursor: \"pointer\",\n      textDecoration: \"underline\"\n    }\n  },\n  lastLabel: {\n    fontSize: \"24px\",\n    fontWeight: 800,\n    fontFamily: \"Open Sans\"\n  }\n}));\n\nconst Breadcrumb = props => {\n  const classes = useStyles();\n  return (\n    <div className={classes.root}>\n      <Breadcrumbs\n        separator={<NavigateNextIcon fontSize=\"small\" />}\n        aria-label=\"breadcrumb\"\n        style={props.style}\n      >\n        {props.pathList.map((element, index) => {\n          if (props.pathList.length - 1 !== index) {\n            return (\n              <Typography\n                key={index}\n                color=\"primary\"\n                variant=\"inherit\"\n                className={classes.link}\n                onClick={element.function}\n              >\n                {element.label}\n              </Typography>\n            );\n          }\n        })}\n        <Typography color=\"textPrimary\" className={classes.lastLabel}>\n          {props.pathList[props.pathList.length - 1].label}\n        </Typography>\n      </Breadcrumbs>\n    </div>\n  );\n};\n\nBreadcrumb.propTypes = {\n  pathList: PropTypes.array\n};\n\nBreadcrumb.defaultProps = {\n  pathList: [\n    { label: \"Mov.ai\", function: () => console.log(\"pth1/\") },\n    { label: \"User\", function: () => console.log(\"path1/path2\") },\n    { label: \"John Doe\" }\n  ]\n};\n\nexport default Breadcrumb;\n","import React from \"react\";\nimport MaterialButton from \"@material-ui/core/Button\";\nimport PropTypes from \"prop-types\";\n\nconst Button = props => {\n  return (\n    <MaterialButton\n      className={props.className}\n      style={props.style}\n      onClick={props.onClick}\n      color={props.color}\n      variant={props.variant}\n      size={props.size}\n      startIcon={props.startIcon}\n      disabled={props.disabled}\n    >\n      {props.children}\n    </MaterialButton>\n  );\n};\n\nButton.propTypes = {\n  style: PropTypes.object,\n  onClick: PropTypes.func,\n  color: PropTypes.string,\n  variant: PropTypes.string.isRequired,\n  size: PropTypes.string,\n  startIcon: PropTypes.element,\n  children: PropTypes.node.isRequired,\n  disabled: PropTypes.bool\n};\nButton.defaultProps = {\n  style: {},\n  onClick: () => console.log(\"Click MOV.AI button\"),\n  color: \"default\", // default, inherit, primary or secondary\n  variant: \"contained\", // text, outlined, contained\n  size: \"medium\", // small, medium, large\n  startIcon: undefined,\n  children: <div></div>,\n  disabled: false\n};\n\nexport default Button;\n","import React from \"react\";\nimport ChevronRightIcon from \"@material-ui/icons/ChevronRight\";\nimport ExpandMore from \"@material-ui/icons/ExpandMore\";\nimport PropTypes from \"prop-types\";\nimport MaterialCollapse from \"@material-ui/core/Collapse\";\nimport { Divider, ListItem, List } from \"@material-ui/core\";\n\nconst Collapse = props => {\n  const [open, setOpen] = React.useState(props.open);\n\n  React.useEffect(() => {\n    if (props.open !== open) {\n      setOpen(props.open);\n    }\n  }, [props.open]);\n\n  const handleClickFactory = clickLambda => () => {\n    setOpen(!open);\n    clickLambda();\n  };\n\n  return (\n    <List>\n      <ListItem button onClick={handleClickFactory(props.onClick)}>\n        {open ? (\n          <ExpandMore style={{ ...props.iconStyle }} />\n        ) : (\n          <ChevronRightIcon style={{ ...props.iconStyle }} />\n        )}\n        <div style={{ width: \"100%\" }}>{props.item}</div>\n      </ListItem>\n      {props.divided ? <Divider /> : []}\n      <MaterialCollapse\n        className={props.className}\n        style={props.style}\n        in={open}\n      >\n        {props.children}\n      </MaterialCollapse>\n    </List>\n  );\n};\n\nCollapse.propTypes = {\n  item: PropTypes.object,\n  onClick: PropTypes.func,\n  open: PropTypes.bool,\n  divided: PropTypes.bool,\n  iconStyle: PropTypes.object\n};\n\nCollapse.defaultProps = {\n  item: <div></div>,\n  onClick: () => {},\n  open: false,\n  divided: false,\n  style: {},\n  iconStyle: {}\n};\n\nexport default Collapse;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Menu from \"@material-ui/core/Menu\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\n\nconst ContextMenu = props => {\n  const { style } = props;\n  const [anchorEl, setAnchorEl] = React.useState(null);\n\n  const handleClick = event => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  return (\n    <div style={style}>\n      {React.cloneElement(props.element, {\n        onClick: evt => {\n          if (props.element.props.onClick !== undefined) {\n            props.element.props.onClick(); // If user defined a onClick\n          }\n          handleClick(evt); // opens the contextMenu\n        }\n      })}\n      <Menu\n        id=\"simple-menu\"\n        anchorEl={anchorEl}\n        keepMounted\n        open={Boolean(anchorEl)}\n        onClose={handleClose}\n      >\n        {props.menuList.reduce((result, item, index) => {\n          if (item && typeof item !== \"function\") {\n            result.push(\n              <MenuItem\n                onClick={() => {\n                  item.onClick();\n                  if (item.onClose || item.onClose === undefined) {\n                    handleClose();\n                  }\n                }}\n                key={index}\n              >\n                {item.element}\n              </MenuItem>\n            );\n          }\n          return result;\n        }, [])}\n      </Menu>\n    </div>\n  );\n};\n\nContextMenu.propTypes = {\n  element: PropTypes.node.isRequired,\n  navigationList: PropTypes.array,\n  lowerElement: PropTypes.node.isRequired,\n  width: PropTypes.string,\n  backgroundColor: PropTypes.string\n};\nContextMenu.defaultProps = {\n  element: <div>Ahaha</div>,\n  menuList: [\n    {\n      onClick: () => console.log(\"clicked 1\"),\n      element: \"Profile\",\n      onClose: true\n    }\n  ],\n  lowerElement: <div></div>,\n  width: \"68px\",\n  backgroundColor: \"#424242\",\n  style: {}\n};\n\nexport default ContextMenu;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport MaterialDrawer from \"@material-ui/core/Drawer\";\n\nconst Drawer = props => {\n  return (\n    <MaterialDrawer\n      style={props.style}\n      anchor={props.anchor}\n      open={props.open}\n      onClose={props.onClose}\n    >\n      {props.children}\n    </MaterialDrawer>\n  );\n};\n\nDrawer.propTypes = {\n  style: PropTypes.object,\n  anchor: PropTypes.string,\n  open: PropTypes.bool,\n  children: PropTypes.object\n};\n\nDrawer.defaultProps = {\n  style: {},\n  anchor: \"left\",\n  open: false,\n  children: <div></div>\n};\n\nDrawer.ANCHOR = { left: \"left\", right: \"right\", top: \"top\", bottom: \"bottom\" };\n\nexport default Drawer;\n","import React, { Component } from \"react\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Button from \"@material-ui/core/Button\";\nimport Grid from \"@material-ui/core/Grid\";\nimport defaultLogo from \"./movai_red.svg\";\nimport Paper from \"@material-ui/core/Paper\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport FormHelperText from \"@material-ui/core/FormHelperText\";\nimport Input from \"@material-ui/core/Input\";\nimport InputLabel from \"@material-ui/core/InputLabel\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport { Authentication } from \"mov-fe-lib-core\";\nimport PropTypes from \"prop-types\";\n\nconst styles = theme => ({\n  root: {\n    padding: theme.spacing(4, 4),\n    borderRadius: 10\n  }\n});\n\nclass LoginForm extends Component {\n  state = {\n    username: \"\",\n    password: \"\",\n    remember: false,\n    error: false,\n    errorMessage: \"\",\n    capsLockOn: false\n  };\n\n  sendCreds = async () => {\n    try {\n      const apiResponse = await Authentication.login(\n        this.state.username,\n        this.state.password,\n        this.state.remember\n      );\n      // If successfully logged in\n      if (!apiResponse.error) {\n        this.props.setLoggedIn(true);\n      } else {\n        // Show the error in red\n        this.setState({\n          error: true,\n          errorMessage: apiResponse.error\n        });\n      }\n    } catch (e) {\n      this.setState({\n        error: true,\n        errorMessage: e\n      });\n    }\n  };\n\n  checkCapsLock = (event) => {\n    if(event.key === 'CapsLock' && this.state.capsLockOn)\n      this.setState({ capsLockOn: false });\n    else\n      this.setState({ capsLockOn: event.getModifierState('CapsLock') });\n  }\n\n  render() {\n    const { classes, logo } = this.props;\n\n    return (\n      <Grid\n        style={{ paddingTop: \"5%\" }}\n        container\n        direction=\"column\"\n        alignItems=\"center\"\n        justify=\"space-evenly\"\n      >\n        <Paper elevation={10} className={classes.root}>\n          <Grid item>\n            <img\n              src={logo ? logo : defaultLogo}\n              className=\"center\"\n              alt=\"logo\"\n              style={{\n                display: \"block\",\n                marginLeft: \"auto\",\n                marginRight: \"auto\",\n                width: \"50%\"\n              }}\n            />\n          </Grid>\n          <Grid>\n            <Typography align=\"center\" variant=\"subtitle1\" gutterBottom>\n              <FormControl\n                className={classes.formControl}\n                error={this.state.error}\n              >\n                <InputLabel htmlFor=\"component-error\">Username</InputLabel>\n                <Input\n                  id=\"component-error\"\n                  value={this.state.username}\n                  aria-describedby=\"component-error-text\"\n                  onChange={event =>\n                    this.setState({ username: event.target.value })\n                  }\n                />\n              </FormControl>\n            </Typography>\n          </Grid>\n          <Grid>\n            <Typography align=\"center\" variant=\"subtitle1\" gutterBottom>\n              <FormControl\n                className={classes.formControl}\n                error={this.state.error}\n              >\n                <InputLabel htmlFor=\"component-error\">Password</InputLabel>\n                <Input\n                  id=\"component-error\"\n                  type=\"password\"\n                  value={this.state.password}\n                  aria-describedby=\"component-error-text\"\n                  onChange={event =>\n                    this.setState({ password: event.target.value })\n                  }\n                  onKeyUp={event => {\n                    this.checkCapsLock(event);\n                    if (event.key === \"Enter\") {\n                      this.sendCreds();\n                    }\n                  }}\n                />\n                {this.state.error && (\n                  <FormHelperText id=\"component-error-text\">\n                    {this.state.errorMessage}\n                  </FormHelperText>\n                )}\n                {this.state.capsLockOn && (\n                  <FormHelperText id=\"component-warning-text\">\n                    Warning: Caps lock is ON!\n                  </FormHelperText>\n                )}\n              </FormControl>\n            </Typography>\n          </Grid>\n          <Grid>\n            <Typography align=\"center\" gutterBottom>\n              <Button onClick={() => this.sendCreds()}>Login</Button>\n            </Typography>\n          </Grid>\n        </Paper>\n      </Grid>\n    );\n  }\n}\n\nLoginForm.propTypes = {\n  logs: PropTypes.any, // expects a svg element\n  setLoggedIn: PropTypes.func\n};\n\nLoginForm.defaultProps = {\n  setLoggedIn: loggedIn => console.log(loggedIn)\n};\n\nexport default withStyles(styles, { withTheme: true })(LoginForm);\n","module.exports = \"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' version='1.0' width='400.000000' height='400.000000' preserveAspectRatio='xMidYMid meet'%3E%3Crect id='backgroundrect' width='100%25' height='100%25' x='0' y='0' fill='none' stroke='none'/%3E %3Cg class='currentLayer' style=''%3E%3Ctitle%3ELayer 1%3C/title%3E%3Cg transform='translate(0,400) scale(0.10000000149011612,-0.10000000149011612) ' fill='%23d31b1b' stroke='none' id='svg_1' class='' fill-opacity='1'%3E %3Cpath d='M1770 3990 c-682 -83 -1271 -501 -1570 -1115 -103 -211 -167 -437 -191 -673 -14 -129 -6 -404 14 -522 85 -495 339 -929 729 -1242 232 -187 539 -332 836 -393 957 -199 1909 314 2272 1224 204 512 180 1116 -64 1606 -115 232 -229 387 -412 565 -296 286 -639 460 -1059 536 -106 19 -443 27 -555 14z m-998 -1105 c3 -3 -23 -48 -57 -99 -113 -172 -182 -338 -226 -546 -32 -149 -33 -448 -1 -593 31 -145 70 -258 134 -387 65 -132 64 -140 -28 -140 -66 0 -100 13 -143 53 -74 70 -71 38 -71 748 0 555 2 642 16 690 43 144 129 236 248 265 54 13 119 18 128 9z m2621 -21 c99 -34 192 -157 216 -288 14 -78 15 -1256 1 -1307 -13 -48 -82 -125 -124 -139 -55 -18 -166 -12 -166 9 0 4 25 57 55 118 195 391 215 839 55 1247 -41 105 -117 247 -176 327 -18 25 -30 49 -26 54 10 11 109 -2 165 -21z m-251 -61 c128 -170 217 -370 265 -594 13 -63 18 -129 18 -264 0 -199 -13 -285 -66 -448 -33 -101 -114 -277 -128 -277 -26 0 -31 80 -32 549 0 267 -4 495 -8 505 -6 16 -20 4 -87 -77 -43 -53 -81 -96 -84 -96 -3 -1 -16 41 -29 92 -27 106 -74 215 -132 304 -32 48 -38 66 -31 80 34 61 243 273 271 273 4 0 23 -21 43 -47z m-2206 15 c52 -39 95 -82 171 -170 l74 -88 -42 -61 c-23 -34 -54 -89 -69 -123 -35 -76 -80 -219 -80 -252 0 -13 -4 -24 -8 -24 -4 0 -43 43 -87 95 -43 52 -83 95 -87 95 -4 0 -8 -224 -9 -497 0 -492 -5 -565 -34 -565 -16 0 -94 166 -130 279 -52 159 -69 294 -62 493 8 230 47 384 147 585 56 112 154 255 174 255 7 0 26 -10 42 -22z m458 -511 l133 -157 -20 -58 c-13 -39 -19 -85 -19 -147 -1 -150 44 -260 151 -365 107 -105 214 -150 361 -150 241 0 443 162 500 399 16 69 8 222 -15 278 l-17 43 132 157 c73 87 136 159 140 161 24 9 119 -186 148 -303 11 -44 22 -104 25 -134 l4 -54 -329 -388 c-343 -405 -362 -424 -466 -455 -101 -31 -258 -12 -341 41 -48 29 -83 69 -607 691 -52 62 -94 121 -94 131 0 52 33 202 60 271 33 86 99 204 112 200 5 -2 68 -74 142 -161z m376 -444 c85 -102 167 -194 182 -204 62 -45 81 -30 292 224 76 92 142 165 146 162 13 -8 20 -110 10 -167 -27 -170 -153 -299 -324 -334 -130 -27 -257 9 -356 102 -61 57 -116 162 -125 239 -8 57 1 165 13 164 4 0 77 -84 162 -186z' id='svg_2' fill='%23d31b1b' fill-opacity='1'/%3E %3C/g%3E%3C/g%3E%3C/svg%3E\"","var api = require(\"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!./Logs.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","import React, { Component } from \"react\";\nimport LogsFilterBar from \"./LogsFilterBar/LogsFilterBar\";\nimport \"./Logs.css\";\nimport { MasterDB } from \"mov-fe-lib-core\";\nimport {\n  getRequestLevels,\n  getRequestTags,\n  getRequestMessage,\n  filterByFromToDates,\n  findsUniqueKey,\n  getJustDateFromServer,\n  getJustTimeFromServer\n} from \"./utils/Utils\";\nimport LogsTable from \"./LogsTable/LogsTable\";\nimport _isEqual from \"lodash/isEqual\";\nimport PropTypes from \"prop-types\";\n\nclass Logs extends Component {\n  state = {\n    selectedRobots: [],\n    levels: [\"INFO\", \"ERROR\"],\n    limit: 50,\n    logsData: [],\n    messageRegex: \"\",\n    selectedFromDate: null,\n    selectedToDate: null,\n    columns: [\"Time\", \"Robot\", \"Message\"],\n    tags: this.props.advancedMode ? [] : [{ key: 0, label: \"ui\" }],\n    height: 0, //LogsTable height\n    levelsList: this.props.advancedMode\n      ? [\n          { value: \"INFO\", label: \"Info\" },\n          { value: \"WARNING\", label: \"Warnings\" },\n          { value: \"DEBUG\", label: \"Debug\" },\n          { value: \"ERROR\", label: \"Error\" },\n          { value: \"CRITICAL\", label: \"Critical\" }\n        ]\n      : [\n          { value: \"INFO\", label: \"Robot Status\" },\n          { value: \"ERROR\", label: \"Alerts\" }\n        ],\n    advancedMode: this.props.advancedMode\n  };\n  logsTimeout = undefined;\n\n  simpleLevelsList = [\n    { value: \"INFO\", label: \"Robot Status\" },\n    { value: \"ERROR\", label: \"Alerts\" }\n  ];\n\n  advancedLevelsList = [\n    { value: \"INFO\", label: \"Info\" },\n    { value: \"WARNING\", label: \"Warnings\" },\n    { value: \"DEBUG\", label: \"Debug\" },\n    { value: \"ERROR\", label: \"Error\" },\n    { value: \"CRITICAL\", label: \"Critical\" }\n  ];\n\n  resizeHandler() {\n    const height = this.divElement.clientHeight;\n    this.setState({ height });\n  }\n\n  componentDidMount() {\n    this.updateSelectedRobots();\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (_isEqual(prevProps.robotsData, this.props.robotsData)) return;\n    this.updateSelectedRobots();\n  }\n\n  updateSelectedRobots = () => {\n    if(\n      this.props.robotsData.length \n      && this.props.robotsData.filter(robot => robot.ip).length\n    )\n      this.setSelectedRobots(\n        this.props.robotsData.map(elem => ({ ...elem, isSelected: true }))\n      );\n  }\n\n  componentWillUnmount() {\n    if (this.logsTimeout) {\n      clearTimeout(this.logsTimeout);\n    }\n  }\n\n  // This function is responsible to check/unckeck the list of robots\n  updateRobotSelection = robotId => {\n    const selectedRobots = [...this.state.selectedRobots];\n    const updateRobot =\n      selectedRobots[selectedRobots.findIndex(elem => elem.id === robotId)];\n    updateRobot.isSelected = !updateRobot.isSelected;\n    this.setState({ selectedRobots });\n  };\n\n  setSelectedRobots = selectedRobots => {\n    clearTimeout(this.logsTimeout);\n    this.setState({ selectedRobots });\n    this.getLogs(selectedRobots);\n  };\n\n  getLogs = async robots => {\n    await Promise.all(\n      robots\n        .filter(robot => robot.robotState !== this.props.robotStates.off) // If robot is offline doesn't bother making the request\n        .filter(robot => robot.isSelected)\n        .map(robot => this.getRobotLogData(robot))\n    ).then(dataArrays => {\n      this.setState(prevState => {\n        const finalArray = dataArrays.reduce((all, dataArray) => {\n          dataArray && dataArray.forEach(data => all.push(data));\n          return all;\n        }, []);\n        this.logsTimeout = setTimeout(\n          this.getLogs,\n          3000,\n          prevState.selectedRobots\n        );\n        return { logsData: finalArray.sort((a, b) => b.time - a.time) };\n      });\n    });\n  };\n\n  getRobotLogData = robotSelected => {\n    return new Promise((re, rej) => {\n      // Failsafe timer to prevent the promise all from hanging\n      const timeoutHandle = setTimeout(() => {\n        console.error(\"MOV.AI: One of the promises reached timeout\");\n        re([]);\n      }, 2000);\n\n      if (robotSelected.ip) {\n        const dynamicURL = `http://${\n          robotSelected.ip\n        }/api/v1/logs/?${getRequestLevels(\n          this.state.levels,\n          this.state.levelsList\n        )}&limit=${this.state.limit}${getRequestTags(\n          this.state.tags\n        )}${getRequestMessage(this.state.messageRegex)}`;\n\n        MasterDB.get(dynamicURL, (res, e) => {\n          re(res?.data || []);\n          clearTimeout(timeoutHandle);\n        });\n      } else {\n        re([]);\n      }\n    }).catch(() => console.log(\"Failed getRobotLogData\"));\n  };\n\n  render() {\n    return (\n      <div\n        style={{\n          width: \"100%\",\n          height: \"100%\",\n          display: \"flex\",\n          flexDirection: \"column\"\n        }}\n      >\n        <div\n          style={{\n            flexGrow: \"1\",\n            height: \"100%\",\n            display: \"flex\",\n            flexDirection: \"column\"\n          }}\n        >\n          <LogsFilterBar\n            selectedRobots={this.state.selectedRobots}\n            updateRobotSelection={this.updateRobotSelection}\n            levels={this.state.levels}\n            levelsList={this.state.levelsList}\n            handleLevels={event => {\n              this.setState({ levels: event.target.value });\n            }}\n            limit={this.state.limit}\n            handleLimit={evt => {\n              if (evt.target.value === \"\") {\n                this.setState({ limit: 0 });\n              } else {\n                this.setState({ limit: evt.target.value });\n              }\n            }}\n            columns={this.state.columns}\n            columnList={this.props.columnList}\n            handleColumns={event => {\n              // make sure columns are always with the same order\n              const columns = Object.keys(this.props.columnList).filter(elem =>\n                event.target.value.includes(elem)\n              );\n              this.setState({ columns });\n            }}\n            tags={this.state.tags}\n            handleAddTag={tagText => {\n              const { tags } = this.state;\n              // Don't add tag if it's empty or duplicate\n              if (\n                tagText !== \"\" &&\n                tags.findIndex(elem => elem.label === tagText) < 0\n              ) {\n                tags.push({\n                  key: findsUniqueKey(tags, \"key\"),\n                  label: tagText\n                });\n                this.setState({ tags });\n              }\n            }}\n            handleDeleteTag={tagToDelete => {\n              const { tags } = this.state;\n              const filteredTags = tags.filter(\n                tag => tag.key !== tagToDelete.key\n              );\n              this.setState({ tags: filteredTags });\n            }}\n            messageRegex={this.state.messageRegex}\n            handleMessageRegex={text => this.setState({ messageRegex: text })}\n            selectedFromDate={this.state.selectedFromDate}\n            selectedToDate={this.state.selectedToDate}\n            handleDateChange={(newDate, keyToChange) => {\n              this.setState({ [keyToChange]: newDate });\n            }}\n            advancedMode={this.state.advancedMode}\n            handleAdvancedMode={evt => {\n              // Toggle advanced mode: change the levels\n              this.setState({\n                advancedMode: !this.state.advancedMode,\n                levelsList: this.state.advancedMode\n                  ? this.simpleLevelsList\n                  : this.advancedLevelsList,\n                tags: this.state.advancedMode\n                  ? []\n                  : this.state.tags\n              });\n            }}\n          ></LogsFilterBar>\n          <div\n            ref={divElement => {\n              this.divElement = divElement;\n            }}\n            style={{\n              flexGrow: 1,\n              overflowY: \"auto\",\n              minHeight: 0,\n              height: \"1px\"\n            }}\n          >\n            <LogsTable\n              columns={this.state.columns}\n              columnList={this.props.columnList}\n              logsData={filterByFromToDates(\n                this.state.logsData,\n                this.state.selectedFromDate,\n                this.state.selectedToDate\n              )}\n              height={this.state.height}\n              levelsList={this.state.levelsList}\n            ></LogsTable>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nLogs.propTypes = {\n  robotsData: PropTypes.array,\n  robotStates: PropTypes.object,\n  columnList: PropTypes.object,\n  advancedMode: PropTypes.bool\n};\nLogs.defaultProps = {\n  robotsData: [\n    {\n      name: \"robot\",\n      id: \"032cf6207ff34ad0a68cc45034f61b41\",\n      timestamp: 1604334778.6494586,\n      robotState: \"okay\",\n      battery: 78,\n      ip: \"127.0.0.1\"\n    },\n    {\n      name: \"robot_test\",\n      id: \"4df900e30cb44adba33ae74bb2596d88\",\n      timestamp: 1603969723.997914,\n      robotState: \"off\",\n      battery: 22,\n      ip: \"127.0.0.1\"\n    }\n  ],\n  robotStates: {\n    error: \"error\",\n    temp: \"temp\",\n    okay: \"okay\",\n    off: \"off\"\n  },\n  columnList: {\n    Date: {\n      label: \"Date\",\n      dataKey: \"time\",\n      width: 100,\n      render: time => getJustDateFromServer(time)\n    },\n    Time: {\n      label: \"Time\",\n      dataKey: \"time\",\n      width: 100,\n      render: time => getJustTimeFromServer(time)\n    },\n    Level: {\n      label: \"Level\",\n      dataKey: \"level\",\n      width: 100\n    },\n    Module: {\n      label: \"Module\",\n      dataKey: \"module\",\n      width: 100\n    },\n    Robot: {\n      label: \"Robot\",\n      dataKey: \"robot\",\n      width: 100\n    },\n    Message: {\n      label: \"Message\",\n      dataKey: \"message\",\n      width: 100\n    }\n  },\n  advancedMode: false\n};\n\nexport default Logs;\n","import React, { Component } from \"react\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport Menu from \"@material-ui/core/Menu\";\nimport { Typography } from \"@material-ui/core\";\nimport { fade } from \"@material-ui/core/styles/colorManipulator\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport PropTypes from \"prop-types\";\n\nconst styles = theme => ({\n  button: {\n    margin: theme.spacing(1),\n    color: theme.palette.primary.main,\n    borderColor: theme.palette.primary.main\n  },\n  iconActive: {\n    color: theme.palette.primary.main,\n    borderColor: theme.palette.primary.main,\n    backgroundColor: fade(theme.palette.primary.main, 0.1)\n  },\n  buttonApplyFilters: {\n    background: theme.palette.primary.main,\n    fontFamily: \"Roboto\",\n    fontStyle: \"normal\",\n    fontWeight: \"bold\",\n    fontSize: \"14px\",\n    color: \"#FAFAFA\",\n    margin: \"0px 20px 10px 20px\",\n    \"&:hover\": { background: theme.palette.primary.dark }\n  },\n  icon: {\n    // fontSize: \"18px\",\n    // height: \"21px\",\n    // width: \"15px\",\n    //color: theme.palette.primary.main,\n    \"&:hover\": { cursor: \"pointer\" }\n  },\n  height: { height: \"100%\" },\n  checkbox: { marginLeft: \"10px\" },\n  limitText: {\n    width: \"50px\",\n    margin: theme.spacing(0, 3, 0, 3)\n  }\n});\n\nconst StyledMenu = withStyles(theme => ({\n  paper: {\n    // border: \"1px solid #F0F0F0\",\n    borderRadius: \"8px\",\n    width: \"242px\",\n    height: \"411px\",\n    boxShadow: \"2px 2px 4px rgba(0, 0, 0, 0.25)\"\n  }\n}))(props => (\n  <Menu\n    elevation={0}\n    getContentAnchorEl={null}\n    anchorOrigin={{\n      vertical: \"bottom\",\n      horizontal: \"center\"\n    }}\n    transformOrigin={{\n      vertical: \"top\",\n      horizontal: \"center\"\n    }}\n    autoFocus={false}\n    {...props}\n  />\n));\n\nclass FilterIcon extends Component {\n  state = { anchorEl: null, otherFilters: [] };\n\n  handleClick = event => {\n    this.setState({ anchorEl: event.currentTarget });\n  };\n\n  handleClose = () => {\n    this.setState({\n      anchorEl: null,\n      otherFilters: []\n    });\n  };\n\n  render() {\n    const { classes, t } = this.props;\n    return (\n      <React.Fragment>\n        <IconButton\n          size=\"small\"\n          onClick={this.handleClick}\n          className={this.props.isActive ? classes.iconActive : classes.icon}\n        >\n          {this.props.icon}\n        </IconButton>\n        <StyledMenu\n          id=\"customized-menu\"\n          anchorEl={this.state.anchorEl}\n          open={Boolean(this.state.anchorEl)}\n          onClose={this.handleClose}\n          className={classes.height}\n        >\n          <div\n            style={{\n              display: \"flex\",\n              flexDirection: \"column\",\n              height: \"-webkit-fill-available\"\n            }}\n          >\n            <Typography\n              component=\"div\"\n              style={{\n                padding: \"10px 10px 0px 20px\",\n                display: \"flex\",\n                flexDirection: \"row\"\n              }}\n            >\n              <Typography\n                component=\"div\"\n                style={{\n                  fontSize: \"24px\",\n                  fontFamily: \"Open Sans\",\n                  fontWeight: 500\n                }}\n              >\n                {this.props.title}\n              </Typography>\n              <Typography\n                component=\"div\"\n                style={{\n                  flexGrow: 1\n                }}\n              ></Typography>\n              <Typography\n                component=\"div\"\n                onClick={this.handleClose}\n                className={classes.icon}\n              >\n                <i className=\"fas fa-times\"></i>\n              </Typography>\n            </Typography>\n            <div\n              style={{\n                flexGrow: 1,\n                display: \"flex\",\n                flexDirection: \"column\",\n                margin: \"10px 0px 0px 10px\"\n              }}\n            >\n              {this.props.children}\n            </div>\n          </div>\n        </StyledMenu>\n      </React.Fragment>\n    );\n  }\n}\n\nFilterIcon.propTypes = {\n  isActive: PropTypes.bool,\n  title: PropTypes.string\n};\n\nFilterIcon.defaultProps = {\n  isActive: false,\n  title: \"Filters\"\n};\n\nexport default withStyles(styles, { withTheme: true })(FilterIcon);\n","import React, { memo } from \"react\";\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport SearchIcon from \"@material-ui/icons/Search\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { FormControlLabel, Switch, TextField } from \"@material-ui/core\";\nimport ResetSearch from \"@material-ui/icons/Close\";\nimport FiltersIcon from \"./FiltersIcon/FiltersIcon\";\nimport LabelIcon from \"@material-ui/icons/Label\";\nimport Chip from \"@material-ui/core/Chip\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport TodayIcon from \"@material-ui/icons/Today\";\nimport { Typography } from \"@material-ui/core\";\nimport Input from \"@material-ui/core/Input\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport Select from \"@material-ui/core/Select\";\nimport SettingsIcon from \"@material-ui/icons/Settings\";\nimport Checkbox from \"@material-ui/core/Checkbox\";\nimport {\n  KeyboardDateTimePicker,\n  MuiPickersUtilsProvider\n} from \"@material-ui/pickers\";\nimport DateFnsUtils from \"@date-io/date-fns\";\nimport PropTypes from \"prop-types\";\nimport _isEqual from \"lodash/isEqual\";\nimport _get from \"lodash/get\";\n\nconst useStyles = makeStyles(theme => ({\n  filterBarContainer: {\n    display: \"flex\",\n    flexDirection: \"row\",\n    flexWrap: \"wrap\",\n    padding: 6,\n    backgroundColor: \"#353535\",\n    alignItems: \"center\"\n    // justifyContent: \"space-between\"\n  },\n  input: {\n    flex: 1,\n    paddingLeft: \"10px\",\n    fontSize: \"medium\"\n  },\n  searchText: {\n    minWidth: 150,\n    paddingLeft: theme.spacing(3)\n  },\n  addTagText: {\n    width: \"100%\"\n  },\n  limitText: {\n    width: \"50px\",\n    margin: theme.spacing(0, 3, 0, 3)\n  },\n  toggleContainer: {\n    margin: theme.spacing(2)\n  },\n  datePicker: {\n    width: \"200px\",\n    margin: theme.spacing(0, 3, 0, 3)\n  },\n  tagsContainer: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    padding: theme.spacing(0.5),\n    margin: theme.spacing(0, 3, 0, 3)\n  },\n  tagsList: {\n    marginTop: theme.spacing(3)\n  },\n  chip: {\n    margin: theme.spacing(0.5)\n  },\n  formControl: {\n    margin: theme.spacing(1),\n    minWidth: 120,\n    maxWidth: 300\n  },\n  filtersButton: {\n    display: \"flex\",\n    flexDirection: \"row\"\n  },\n  columnsFilter: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    marginTop: 6\n  },\n  iconButton: {\n    color: \"#0B6A8A\",\n    \"&:hover\": {\n      color: \"#22c7ff\"\n    }\n  }\n}));\n\nconst LogsFilterBar = props => {\n  const classes = useStyles();\n  const [tagText, setTagText] = React.useState(\"\");\n\n  const handleRobotChange = event => {\n    const arrayEvent = event?.target?.value;\n    const selectedId = arrayEvent[arrayEvent.length - 1];\n    props.updateRobotSelection(selectedId);\n  };\n  const getRobotSelector = () => {\n    return (\n      <div className={classes.toggleContainer}>\n        <svg\n          width=\"20\"\n          height=\"18\"\n          viewBox=\"0 0 30 27\"\n          fill=\"none\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n          style={{ paddingTop: \"5px\", paddingRight: \"5px\" }}\n        >\n          <path\n            fillRule=\"evenodd\"\n            clipRule=\"evenodd\"\n            d=\"M16.7753 1.35706L15.9587 2.61119L16.3648 2.87846L18.4001 4.18898L17.1052 6.20016H25.437C26.5487 6.20016 27.45 7.10137 27.45 8.21307V12.8244H28.0955C28.6514 12.8244 29.102 13.275 29.102 13.8308V16.0643C29.102 16.6201 28.6514 17.0707 28.0955 17.0707H27.45V21.2901C27.45 22.4018 26.5487 23.303 25.437 23.303H4.12161C3.00991 23.303 2.1087 22.4017 2.1087 21.29V17.0707H1.42467C0.868819 17.0707 0.418213 16.6201 0.418213 16.0643V13.8308C0.418213 13.275 0.868819 12.8244 1.42467 12.8244H2.1087V8.21307C2.1087 7.10137 3.00991 6.20016 4.12161 6.20016H13.5141L14.8252 4.16395L13.2875 3.15192L13.2966 3.13812L13.2875 3.1322L15.1377 0.290771L16.7753 1.35706ZM24.4306 9.21953H5.12807V20.2836H24.4306V9.21953ZM7.18098 12.1324C6.68518 12.1324 6.28325 12.5343 6.28325 13.0301C6.28325 13.5259 6.68518 13.9278 7.18098 13.9278H9.04635C9.54216 13.9278 9.94409 13.5259 9.94409 13.0301C9.94409 12.5343 9.54216 12.1324 9.04635 12.1324H7.18098ZM20.6901 12.1324C20.1943 12.1324 19.7924 12.5343 19.7924 13.0301C19.7924 13.5259 20.1943 13.9278 20.6901 13.9278H22.5555C23.0513 13.9278 23.4532 13.5259 23.4532 13.0301C23.4532 12.5343 23.0513 12.1324 22.5555 12.1324H20.6901ZM9.17669 17.6512H11.3239V19.253H9.17669V17.6512ZM14.3432 17.6513H12.196V19.253H14.3432V17.6513ZM15.2154 17.6513H17.3626V19.253H15.2154V17.6513ZM20.382 17.6513H18.2348V19.253H20.382V17.6513ZM10.9568 23.69H18.6019V25.7029C18.6019 26.2587 18.1513 26.7093 17.5954 26.7093H11.9632C11.4074 26.7093 10.9568 26.2587 10.9568 25.7029V23.69Z\"\n            fill=\"#9E9E9E\"\n          />\n        </svg>\n        <FormControl className={classes.formControl}>\n          <Select\n            labelId=\"select-label\"\n            id=\"select\"\n            multiple\n            value={props.selectedRobots}\n            onChange={handleRobotChange}\n            renderValue={selected => {\n              const selectedNames = selected\n                .filter(({ isSelected }) => isSelected)\n                .map(({ name }) => name);\n              return selectedNames.length > 2\n                ? [selectedNames[0], selectedNames[1]].join(\" , \") + \"...\"\n                : selectedNames.join(\" , \");\n            }}\n            input={<Input />}\n            MenuProps={MenuProps}\n          >\n            {/* <MenuItem key={`robotList-Default`} value={robotDefault}>\n              Default\n            </MenuItem> */}\n            {props.selectedRobots.map((robot, robotIndex) => {\n              return (\n                <MenuItem key={`robotList-${robotIndex}`} value={robot.id}>\n                  <Checkbox checked={robot.isSelected} />\n                  <ListItemText primary={robot.name} />\n                </MenuItem>\n              );\n            })}\n          </Select>\n        </FormControl>\n      </div>\n    );\n  };\n\n  const getSearchInput = () => {\n    return (\n      <TextField\n        className={classes.searchText}\n        label=\"\"\n        placeholder=\"Search (regex)\"\n        value={props.messageRegex}\n        onChange={evt => props.handleMessageRegex(evt.target.value)}\n        InputProps={{\n          startAdornment: (\n            <InputAdornment style={{ paddingRight: 8 }}>\n              <SearchIcon fontSize=\"small\" />\n            </InputAdornment>\n          ),\n          endAdornment: (\n            <InputAdornment position=\"end\">\n              <IconButton\n                disabled={!props.messageRegex}\n                onClick={() => props.handleMessageRegex(\"\")}\n              >\n                <ResetSearch color=\"inherit\" fontSize=\"small\" />\n              </IconButton>\n            </InputAdornment>\n          )\n        }}\n        size=\"small\"\n      />\n    );\n  };\n\n  const getLevels = () => {\n    return (\n      <div className={classes.toggleContainer}>\n        <FormControl className={classes.formControl}>\n          <Select\n            labelId=\"demo-mutiple-checkbox-label\"\n            id=\"demo-mutiple-checkbox\"\n            multiple\n            value={props.levels}\n            onChange={props.handleLevels}\n            input={<Input />}\n            renderValue={selected => {\n              // selected comes from state, for example [\"ERROR\", \"INFO\"]\n              // but want to show the lables, for example [\"Alerts\", \"State of Robot\"]\n              const labels = props.levelsList\n                .filter(level => selected.includes(level.value))\n                .map(elem => elem.label);\n              return labels.join(\", \");\n            }}\n            MenuProps={MenuProps}\n          >\n            {props.levelsList.map(level => (\n              <MenuItem key={level.value} value={level.value}>\n                <Checkbox checked={props.levels.indexOf(level.value) > -1} />\n                <ListItemText primary={level.label} />\n              </MenuItem>\n            ))}\n          </Select>\n        </FormControl>\n      </div>\n    );\n  };\n\n  const getTags = () => {\n    return (\n      <FiltersIcon\n        icon={<LabelIcon></LabelIcon>}\n        title=\"Tags\"\n        isActive={props.tags.length > 0}\n      >\n        <div className={classes.tagsContainer}>\n          <TextField\n            className={classes.addTagText}\n            value={tagText}\n            onChange={evt => setTagText(evt.target.value)}\n            onKeyUp={event => {\n              // User pressed Enter\n              if (event.keyCode === 13) {\n                props.handleAddTag(tagText);\n              }\n            }}\n            label=\"Add Tag\"\n            // placeholder=\"Tag\"\n            InputProps={{\n              endAdornment: (\n                <InputAdornment>\n                  <IconButton onClick={() => props.handleAddTag(tagText)}>\n                    <AddIcon />\n                  </IconButton>\n                </InputAdornment>\n              )\n            }}\n            size=\"small\"\n          />\n          <div className={classes.tagsList}>\n            {props.tags.map(data => {\n              return (\n                <li key={data.key}>\n                  <Chip\n                    label={data.label}\n                    onDelete={() => props.handleDeleteTag(data)}\n                    className={classes.chip}\n                    size=\"small\"\n                  />\n                </li>\n              );\n            })}\n          </div>\n        </div>\n      </FiltersIcon>\n    );\n  };\n\n  const getTimeFilters = () => {\n    return (\n      <FiltersIcon\n        icon={<TodayIcon></TodayIcon>}\n        title={props.t(\"Date Range\")}\n        isActive={\n          props.selectedFromDate !== null || props.selectedToDate !== null\n        }\n      >\n        {/* From -> To Date */}\n        <MuiPickersUtilsProvider utils={DateFnsUtils}>\n          <KeyboardDateTimePicker\n            key=\"time-picker\"\n            className={classes.datePicker}\n            size=\"small\"\n            variant=\"inline\"\n            ampm={false}\n            label={props.t(\"From date\")}\n            value={props.selectedFromDate}\n            onChange={newDate =>\n              props.handleDateChange(newDate, \"selectedFromDate\")\n            }\n            onError={console.log}\n            format=\"yyyy/MM/dd HH:mm\"\n          />\n          <KeyboardDateTimePicker\n            key=\"time-picker2\"\n            className={classes.datePicker}\n            size=\"small\"\n            variant=\"inline\"\n            ampm={false}\n            label={props.t(\"To date\")}\n            value={props.selectedToDate}\n            onChange={newDate =>\n              props.handleDateChange(newDate, \"selectedToDate\")\n            }\n            onError={console.log}\n            format=\"yyyy/MM/dd HH:mm\"\n          />\n        </MuiPickersUtilsProvider>\n      </FiltersIcon>\n    );\n  };\n\n  const getSettings = () => {\n    return (\n      <FiltersIcon\n        icon={<SettingsIcon></SettingsIcon>}\n        title={props.t(\"Configuration\")}\n      >\n        {/* Advanced/Simple Mode */}\n        <FormControlLabel\n          control={\n            <Switch\n              checked={props.advancedMode}\n              onChange={props.handleAdvancedMode}\n            />\n          }\n          label={props.advancedMode ? \"Advanced\" : \"Simple\"}\n        />\n        <div className={classes.filtersButton}>\n          {/* Limit Input */}\n          <Typography\n            component=\"div\"\n            style={{\n              fontSize: \"1rem\",\n              fontFamily: \"Open Sans\",\n              fontWeight: 500\n            }}\n          >\n            {`${props.t(\"Limit p/Robot\")}:`}\n          </Typography>\n          <TextField\n            value={props.limit}\n            onChange={props.handleLimit}\n            className={classes.limitText}\n            id=\"outlined-number\"\n            // label=\"limit\"\n            placeholder={props.t(\"limit\")}\n            type=\"number\"\n            InputLabelProps={{\n              shrink: true\n            }}\n            // variant=\"outlined\"\n            size=\"small\"\n          />\n        </div>\n        <div className={classes.columnsFilter}>\n          {/* Limit Input */}\n          <Typography\n            component=\"div\"\n            style={{\n              fontSize: \"1rem\",\n              fontFamily: \"Open Sans\",\n              fontWeight: 500\n            }}\n          >\n            {`${props.t(\"Columns\")}:`}\n          </Typography>\n          <FormControl className={classes.formControl}>\n            <Select\n              labelId=\"demo-mutiple-checkbox-label\"\n              id=\"demo-mutiple-checkbox\"\n              multiple\n              value={props.columns}\n              onChange={props.handleColumns}\n              input={<Input />}\n              renderValue={selected =>\n                selected\n                  .map(elem => _get(props, `columnList[${elem}].label`, \"\"))\n                  .join(`, `)\n              }\n              MenuProps={MenuProps}\n            >\n              {Object.keys(props.columnList).map((column, index) => {\n                return (\n                  <MenuItem key={index} value={column}>\n                    <Checkbox checked={props.columns.indexOf(column) > -1} />\n                    <ListItemText primary={props.columnList[column].label} />\n                  </MenuItem>\n                );\n              })}\n            </Select>\n          </FormControl>\n        </div>\n      </FiltersIcon>\n    );\n  };\n\n  return (\n    <div className={classes.filterBarContainer}>\n      {getRobotSelector()}\n      {/* Search Input */}\n      {getSearchInput()}\n      {/* Toggle: INFO, DEBUG, ERROR, CRITICAL */}\n      {getLevels()}\n      {/* Tags */}\n      {props.advancedMode && getTags()}\n      {getTimeFilters()}\n      <div style={{ flexGrow: 1 }}></div>\n      {getSettings()}\n    </div>\n  );\n};\n\nconst ITEM_HEIGHT = 48;\nconst ITEM_PADDING_TOP = 8;\nconst MenuProps = {\n  PaperProps: {\n    style: {\n      maxHeight: ITEM_HEIGHT * 4.5 + ITEM_PADDING_TOP,\n      width: 250\n    }\n  },\n  getContentAnchorEl: null\n};\n\nLogsFilterBar.propTypes = {\n  levels: PropTypes.array,\n  levelsList: PropTypes.array,\n  handleLevels: PropTypes.func,\n  limit: PropTypes.number,\n  handleLimit: PropTypes.func,\n  columns: PropTypes.array,\n  columnList: PropTypes.object,\n  handleColumns: PropTypes.func,\n  handleDeleteTag: PropTypes.func,\n  messageRegex: PropTypes.string,\n  handleMessageRegex: PropTypes.func,\n  selectedFromDate: PropTypes.string,\n  selectToDate: PropTypes.string,\n  handleDateChange: PropTypes.func,\n  selectedRobots: PropTypes.array,\n  updateRobotSelection: PropTypes.func,\n  advancedMode: PropTypes.bool,\n  handleAdvancedMode: PropTypes.func,\n  t: PropTypes.func\n};\n\nLogsFilterBar.defaultProps = {\n  levels: [],\n  levelsList: [],\n  handleLevels: () => {},\n  limit: 1,\n  handleLimit: () => {},\n  columns: [],\n  columnList: {},\n  handleColumns: () => {},\n  handleDeleteTag: () => {},\n  messageRegex: \"\",\n  handleMessageRegex: () => {},\n  selectedFromDate: \"\",\n  selectToDate: \"\",\n  handleDateChange: () => {},\n  selectedRobots: [],\n  updateRobotSelection: () => {},\n  advancedMode: false,\n  handleAdvancedMode: () => {},\n  t: string => string\n};\n\n//The function returns true when the compared props equal, preventing the component from re-rendering\nfunction arePropsEqual(prevProps, nextProps) {\n  return _isEqual(prevProps, nextProps);\n}\n\nexport default memo(LogsFilterBar, arePropsEqual);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport clsx from \"clsx\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport { AutoSizer, Column, Table } from \"react-virtualized\";\nimport { colorCoding } from \"../utils/Utils\";\n\nconst styles = theme => ({\n  flexContainer: {\n    display: \"flex\",\n    alignItems: \"center\",\n    boxSizing: \"border-box\"\n  },\n  table: {\n    // temporary right-to-left patch, waiting for\n    // // https://github.com/bvaughn/react-virtualized/issues/454\n    \"& .ReactVirtualized__Table__headerRow\": {\n      flip: false,\n      paddingRight: theme.direction === \"rtl\" ? \"0 !important\" : undefined\n    }\n  },\n  tableRow: {\n    cursor: \"pointer\"\n  },\n  tableRowHover: {\n    \"&:hover\": {\n      backgroundColor: theme.palette.grey[200]\n    }\n  },\n  tableCell: {\n    flexGrow: 1\n  },\n  flexColumn: {\n    flex: 1,\n    alignItems: \"center\"\n  },\n  noClick: {\n    cursor: \"initial\"\n  },\n  ...colorCoding\n});\n\nclass MuiVirtualizedTable extends React.PureComponent {\n  static defaultProps = {\n    headerHeight: 48,\n    rowHeight: 48\n  };\n\n  getRowClassName = ({ index }) => {\n    const { classes, onRowClick, data } = this.props;\n    const rowData = data[index];\n    return clsx(\n      classes.tableRow,\n      classes.flexContainer,\n      index !== -1 && classes[rowData.level],\n      {\n        [classes.tableRowHover]: index !== -1 && onRowClick != null\n      }\n    );\n  };\n\n  cellRenderer = render => ({ cellData, columnIndex }) => {\n    const { columns, classes, rowHeight, onRowClick } = this.props;\n    return (\n      <TableCell\n        component=\"div\"\n        className={clsx(classes.tableCell, classes.flexContainer, {\n          [classes.noClick]: onRowClick == null\n        })}\n        variant=\"body\"\n        style={{ height: rowHeight }}\n        align={\n          (columnIndex != null && columns[columnIndex].numeric) || false\n            ? \"right\"\n            : \"left\"\n        }\n      >\n        {render ? render(cellData) : cellData}\n      </TableCell>\n    );\n  };\n\n  headerRenderer = ({ label, columnIndex }) => {\n    const { headerHeight, columns, classes } = this.props;\n\n    return (\n      <TableCell\n        component=\"div\"\n        className={clsx(\n          classes.tableCell,\n          classes.flexContainer,\n          classes.noClick\n        )}\n        variant=\"head\"\n        style={{ height: headerHeight }}\n        align={columns[columnIndex].numeric || false ? \"right\" : \"left\"}\n      >\n        <span>{label}</span>\n      </TableCell>\n    );\n  };\n\n  render() {\n    const {\n      classes,\n      columns,\n      rowHeight,\n      headerHeight,\n      ...tableProps\n    } = this.props;\n    return (\n      <AutoSizer>\n        {({ height, width }) => (\n          <Table\n            height={height}\n            width={width}\n            rowHeight={rowHeight}\n            gridStyle={{\n              direction: \"inherit\"\n            }}\n            headerHeight={headerHeight}\n            className={classes.table}\n            {...tableProps}\n            rowClassName={this.getRowClassName}\n          >\n            {columns.map(({ dataKey, render, ...other }, index) => {\n              return (\n                <Column\n                  key={dataKey}\n                  headerRenderer={headerProps => {\n                    return this.headerRenderer({\n                      ...headerProps,\n                      columnIndex: index\n                    });\n                  }}\n                  flexGrow={dataKey === \"message\" ? 1 : undefined}\n                  className={classes.flexContainer}\n                  cellRenderer={this.cellRenderer(render)}\n                  dataKey={dataKey}\n                  {...other}\n                />\n              );\n            })}\n          </Table>\n        )}\n      </AutoSizer>\n    );\n  }\n}\n\nMuiVirtualizedTable.propTypes = {\n  classes: PropTypes.object.isRequired,\n  columns: PropTypes.arrayOf(\n    PropTypes.shape({\n      dataKey: PropTypes.string.isRequired,\n      label: PropTypes.string.isRequired,\n      numeric: PropTypes.bool,\n      width: PropTypes.number.isRequired\n    })\n  ).isRequired,\n  headerHeight: PropTypes.number,\n  onRowClick: PropTypes.func,\n  rowHeight: PropTypes.number\n};\n\nconst VirtualizedTable = withStyles(styles)(MuiVirtualizedTable);\n\nexport default function LogsTable(props) {\n  return (\n    <VirtualizedTable\n      rowCount={props.logsData.length}\n      rowGetter={({ index }) => props.logsData[index]}\n      data={props.logsData}\n      columns={props.columns.map(elem => props.columnList[elem])}\n    />\n  );\n}\n\nLogsTable.propTypes = {\n  columns: PropTypes.array,\n  columnList: PropTypes.object,\n  logsData: PropTypes.array,\n  height: PropTypes.number\n};\n\nLogsTable.defaultProps = {\n  columns: [],\n  columnList: {},\n  logsData: [],\n  height: 10\n};\n","import React from \"react\";\nimport _isEmpty from \"lodash/isEmpty\";\n\n// export const levels = [\n//   { value: \"INFO\", label: i18n.t(\"Robot Status\") },\n//   // { value: \"WARNING\", label: \"Warnings\" },\n//   // { value: \"DEBUG\", label: \"Debug\" },\n//   { value: \"ERROR\", label: i18n.t(\"Alerts\") }\n//   // { value: \"CRITICAL\", label: \"Critical\" }\n// ];\n\nexport const colorCoding = {\n  INFO: {\n    backgroundColor: \"rgba(33, 150, 243, 0.1)\",\n    color: \"rgba(33, 150, 243, 1)\"\n  },\n  WARNING: {\n    backgroundColor: \"rgba(255, 152, 0, 0.1)\",\n    color: \"rgba(255, 152, 0, 1)\"\n  },\n  DEBUG: {\n    backgroundColor: \"rgba(76, 175, 80, 0.1)\",\n    color: \"rgba(76, 175, 80, 1)\"\n  },\n  ERROR: {\n    backgroundColor: \"rgba(244, 67, 54, 0.1)\",\n    color: \"rgba(244, 67, 54, 1)\"\n  },\n  CRITICAL: {\n    backgroundColor: \"rgba(255, 19, 1, 0.1)\",\n    color: \"rgba(255, 19, 1, 1)\"\n  }\n};\n\n// export const fixedColumns = {\n//   Date: {\n//     label: i18n.t(\"Date\"),\n//     dataKey: \"time\",\n//     width: 100,\n//     render: time => getJustDateFromServer(time)\n//   },\n//   Time: {\n//     label: i18n.t(\"Time\"),\n//     dataKey: \"time\",\n//     render: time => getJustTimeFromServer(time),\n//     width: 100\n//   },\n//   Level: {\n//     label: i18n.t(\"Level\"),\n//     dataKey: \"level\",\n//     width: 100\n//   },\n//   Module: {\n//     label: i18n.t(\"Module\"),\n//     dataKey: \"module\",\n//     width: 100\n//   },\n//   Function: {\n//     label: \"Function\",\n//     dataKey: \"funcName\",\n//     width: 100\n//   },\n//   Callback: {\n//     label: i18n.t(\"Callback\"),\n//     dataKey: \"callback\",\n//     width: 100\n//   },\n//   Node: {\n//     label: i18n.t(\"Node\"),\n//     dataKey: \"node\",\n//     width: 100\n//   },\n//   Fleet: {\n//     label: i18n.t(\"Fleet\"),\n//     dataKey: \"fleet\",\n//     width: 100\n//   },\n//   Robot: {\n//     label: i18n.t(\"Robot\"),\n//     dataKey: \"robot\",\n//     width: 100\n//   },\n//   Message: {\n//     label: i18n.t(\"Message\"),\n//     dataKey: \"message\",\n//     width: 100\n//   }\n// };\n\n// Makes sure to find unique \"i\" of chip array\n// Input: [{key: 0, label: \"Chip1\"}, {key: 2, label: \"Chip3\"}], keyName= \"key\"\n// Output: 1\nexport function findsUniqueKey(array, keyName) {\n  const length = array.length;\n  // If empty, return 0\n  if (length === 0 || array === undefined) {\n    return 0;\n  }\n  for (let k = 0; k < length; k++) {\n    for (let j = 0; j < length; j++) {\n      if (k === array[j][keyName]) {\n        break;\n      }\n      if (j === length - 1) {\n        return k;\n      }\n    }\n  }\n\n  return length;\n}\n\n// Converts the levels in the state for the string for the request\n//  Input: [\"INFO\", \"DEBUG\"]\n//  Output: \"level=info,debug\"\nexport function getRequestLevels(levelsArray, levelsList) {\n  let res = \"\";\n  if (Array.isArray(levelsArray) && levelsArray.length === levelsList.length) {\n    return res;\n  }\n\n  try {\n    levelsArray.forEach(level => {\n      if (res === \"\") {\n        res = `${level.toLowerCase()}`;\n      } else {\n        res = `${res},${level.toLowerCase()}`;\n      }\n    });\n    return `level=${res}`;\n  } catch (error) {\n    return \"\";\n  }\n}\n// Converts the levels in the state for the string for the request\n//  Input: [{ key: 0, label: \"UI\" }, { key: 1, label: \"TASKS\" }]\n//  Output: \"&tags=UI,TASKS\"\nexport function getRequestTags(tagsArray) {\n  let res = \"\";\n\n  if (_isEmpty(tagsArray)) {\n    return res;\n  }\n\n  tagsArray.forEach(tag => {\n    if (res === \"\") {\n      res = `${tag.label}`;\n    } else {\n      res = `${res},${tag.label}`;\n    }\n  });\n\n  return `&tags=${res}`;\n}\n// Converts the levels in the state for the string for the request\n//  Input: \"r'started\\.$\"\n//  Output: \"&message=r'started\\.$\"\nexport function getRequestMessage(message) {\n  if (!message || message === \"\") {\n    return \"\";\n  }\n\n  return `&message=${message}`;\n}\n\n// Convert Date format to a human readable format\n// Input: 1586370146\n// Output: \"08/04/2020 19:22:26\"\nexport const getTimeFromServer = serverTime => {\n  const time = new Date(serverTime * 1000);\n  return `${time.toLocaleString(\"pt\")}`;\n};\n// Convert Date format to a human readable format\n// Input: 1586370146\n// Output: \"08/04/2020\"\nexport const getJustDateFromServer = serverTime => {\n  const time = new Date(serverTime * 1000);\n  return `${time.toLocaleDateString(\"pt\")}`;\n};\n// Convert Date format to a human readable format\n// Input: 1586370146\n// Output: \"19:22:26\"\nexport const getJustTimeFromServer = serverTime => {\n  const time = new Date(serverTime * 1000);\n  return `${time.toLocaleTimeString(\"pt\")}`;\n};\n\n// Convert array of object to array of strings for LogList\n// Input:\n// [\n//   {\n//     time: 1586370146,\n//     level: \"INFO\",\n//     message: \"UI Tag Log Test: 12\"\n//   },\n//   {\n//     time: 1586370147,\n//     level: \"INFO\",\n//     message: \"UI Tag Log Test: 13\"\n//   }\n// ];\n// Output\n// [\n//   \"[08/04/2020 19:22:26] [INFO] : UI Tag Log Test: 12\",\n//   \"[08/04/2020 19:21:31] [INFO] : UI Tag Log Test: 56\"\n// ];\n\nexport const formatLogsData = data => {\n  return data.map(\n    elem => elem.stdout\n    // `[${getTimeFromServer(elem.time)}] [${elem.level}] : ${elem.message}`\n  );\n};\n\nfunction binaryIndexOf(data, criteria) {\n  var minIndex = 0;\n  var maxIndex = data.length - 1;\n  var currentIndex;\n  var currentElement;\n  var result = null;\n\n  while (minIndex <= maxIndex) {\n    currentIndex = ((minIndex + maxIndex) / 2) | 0;\n    currentElement = data[currentIndex];\n    var comparison = criteria(currentElement);\n\n    if (comparison[0] === \"right\") {\n      minIndex = currentIndex + 1;\n    } else {\n      maxIndex = currentIndex - 1;\n    }\n\n    if (comparison[1]) {\n      result = currentIndex;\n    }\n  }\n\n  return result;\n}\n\nexport const filterByFromToDates = (logsData, fromDate, toDate) => {\n  // If there is a problem fetching the logs, show nothing\n  if (!logsData) {\n    return [];\n  }\n\n  let lowerIndex = 0;\n  let upperIndex = logsData.length;\n\n  // If nothing is selected, do nothing\n  if (!fromDate && !toDate) {\n    return logsData;\n  }\n\n  // List of time format. Array is sorted in descending order (Newer -> Older)\n  const dateList = logsData.map(log => log.time);\n  if (toDate) {\n    // First log that is <= toDate (first index that fits criteria)\n    lowerIndex = binaryIndexOf(dateList, function (value) {\n      return value >= toDate.getTime() / 1000\n        ? [\"right\", false]\n        : [\"left\", true];\n    });\n  }\n  if (fromDate) {\n    // First log that is >= fromDate (last index that still fits criteria)\n    upperIndex = binaryIndexOf(dateList, function (value) {\n      return value <= fromDate.getTime() / 1000\n        ? [\"left\", false]\n        : [\"right\", true];\n    });\n  }\n  return logsData.slice(lowerIndex, upperIndex + 1);\n};\n\n// This function is to get the same string as the one you get in\n// Robot:Status nodes_lchd and persistent_nodes_lchd\nexport const addNestedName = (nestedName, newName) => {\n  if (nestedName === \"\") {\n    return newName;\n  } else {\n    return `${nestedName}__${newName}`;\n  }\n};\n\n// Will update according with the list of running nodes all the nodes to running or stopped\nexport const updateRunningNodes = (treeList, runningNodesList) => {\n  return treeList.map(elem => {\n    // Only update the status of nodes, not containers\n    if (elem.status) {\n      if (runningNodesList.includes(elem.nestedName)) {\n        return { ...elem, status: \"running\" };\n      } else {\n        return { ...elem, status: \"stopped\" };\n      }\n    } else {\n      return elem;\n    }\n  });\n};\n\n// This will remove the deleted container from the treeList and its respective children\nexport const removeDeleteContainer = (treeList, id) => {\n  // Get the id of the Container to remove\n  const deleteIndex = treeList.findIndex(elem => elem.id === id);\n  treeList.splice(deleteIndex, 1);\n  // Remove children: find all children with parentId that is the id\n  for (let i = 0; i < treeList.length; i++) {\n    if (treeList[i].parentId === id) {\n      removeDeleteContainer(treeList, treeList[i].id);\n    }\n  }\n};\n\n// Detects if there are loops within nested containers\n// Returns true if it finds a loop, false otherwise\nexport const detectContainerLoop = (treeList, parentId, flowId) => {\n  // If first level there are no loops\n  if (parentId === 0) {\n    return false;\n  }\n  // index of container to add\n  let flowIndex = treeList.findIndex(elem => elem.id === parentId);\n  let currentFlow = treeList[flowIndex];\n  // Stop when reaches the root of the tree\n  while (currentFlow.parentId) {\n    // get the parentId of the current container\n    const parentId = currentFlow.parentId;\n    // get the index of that parent in the array\n    flowIndex = treeList.findIndex(elem => elem.id === parentId);\n    currentFlow = treeList[flowIndex];\n    if (currentFlow.flowId === flowId) {\n      console.error(\"Found Flow Loop :0\");\n      return true;\n    }\n  }\n  return false;\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Button from \"../Button\";\nimport {\n  Card,\n  Typography,\n  CardContent,\n  Divider,\n  // Button,\n  CardActions,\n  Modal\n} from \"@material-ui/core\";\n\nconst style = {\n  margin: \"auto\",\n  position: \"absolute\",\n  overflow: \"auto\",\n  display: \"flex\",\n  flexDirection: \"column\"\n};\n\nconst AbstractModal = props => {\n  const onKeyPress = e => {\n    if (e.key === \"Enter\") {\n      submit();\n    }\n  };\n\n  const submit = () => {\n    props.onSubmit();\n  };\n\n  const cancel = () => {\n    props.onCancel();\n  };\n\n  return (\n    <Modal\n      onKeyPress={onKeyPress}\n      open={props.open}\n      onClose={cancel}\n      style={{\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\"\n      }}\n    >\n      <Card\n        style={{\n          ...style,\n          width: props.width,\n          height: props.height,\n          minWidth: \"260px\",\n          minHeight: \"280px\"\n        }}\n      >\n        <CardContent\n          style={{\n            flexGrow: 1,\n            display: \"flex\",\n            flexDirection: \"column\",\n            minHeight: 0\n          }}\n        >\n          <Typography\n            variant=\"h5\"\n            style={{\n              padding: \"12px 0px 12px 6px\",\n              fontWeight: 600\n            }}\n          >\n            {props.title}\n          </Typography>\n          <div\n            style={{\n              paddingLeft: \"6px\",\n              flexGrow: 1,\n              overflow: \"auto\",\n              minHeight: 0\n            }}\n          >\n            {props.children}\n          </div>\n        </CardContent>\n        <Divider />\n        <CardActions style={{ alignSelf: \"flex-end\" }}>\n          <Button onClick={cancel} variant=\"outlined\" color={props.cancelColor}>\n            {props.cancelText}\n          </Button>\n          <Button color={props.submitColor} onClick={submit}>\n            {props.submitText}\n          </Button>\n        </CardActions>\n      </Card>\n    </Modal>\n  );\n};\n\nAbstractModal.propTypes = {\n  onSubmit: PropTypes.func,\n  onCancel: PropTypes.func,\n  open: PropTypes.bool,\n  title: PropTypes.string,\n  submitText: PropTypes.string,\n  submitColor: PropTypes.string,\n  cancelText: PropTypes.string,\n  cancelColor: PropTypes.string,\n  width: PropTypes.string,\n  height: PropTypes.string\n};\n\nAbstractModal.defaultProps = {\n  onSubmit: () => {},\n  onCancel: () => {},\n  open: false,\n  title: \"New\",\n  submitText: \"Confirm\",\n  submitColor: \"primary\",\n  cancelText: \"Cancel\",\n  cancelColor: \"inherit\",\n  width: \"25%\",\n  height: \"25%\"\n};\n\nexport default AbstractModal;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport AbstractModal from \"./AbstractModal\";\n\nconst ConfirmAlertModal = props => {\n  return (\n    <AbstractModal\n      onSubmit={props.onSubmit}\n      onCancel={props.onCancel}\n      open={props.open}\n      title={props.title}\n      submitText={props.submitText}\n      submitColor={props.submitColor}\n      cancelText={props.cancelText}\n      cancelColor={props.cancelColor}\n    >\n      <div>{props.message}</div>\n      <div>{props.children}</div>\n    </AbstractModal>\n  );\n};\n\nConfirmAlertModal.propTypes = {\n  title: PropTypes.string,\n  message: PropTypes.string,\n  onSubmit: PropTypes.func,\n  onCancel: PropTypes.func,\n  open: PropTypes.bool,\n  submitText: PropTypes.string,\n  submitColor: PropTypes.string,\n  cancelText: PropTypes.string,\n  cancelColor: PropTypes.string\n};\n\nConfirmAlertModal.defaultProps = {\n  title: \"Insert Text here\",\n  message: \"Are you sure?\",\n  onSubmit: () => {},\n  onCancel: () => {},\n  open: false,\n  submitText: \"Delete\",\n  submitColor: \"secondary\",\n  cancelText: \"Cancel\",\n  cancelColor: \"primary\"\n};\n\nexport default ConfirmAlertModal;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport _set from \"lodash/set\";\nimport _get from \"lodash/get\";\nimport _cloneDeep from \"lodash/cloneDeep\";\nimport {\n  FormControl,\n  Grid,\n  InputLabel,\n  MenuItem,\n  Select,\n  Typography\n} from \"@material-ui/core\";\nimport { Workspace } from \"mov-fe-lib-core\";\nimport BasicVirtualizedTree from \"../Tree/BasicVirtualizedTree\";\nimport AbstractModal from \"./AbstractModal\";\nimport Backdrop from \"@material-ui/core/Backdrop\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\n\n//========================================================================================\n/*                                                                                      *\n *                                    TEMPORARY CODE                                    *\n *                                                                                      */\n//========================================================================================\n\nconst SelectScopeModal = props => {\n  const initialData = [\n    {\n      id: 0,\n      name: \"Annotations\",\n      scope: \"Annotation\",\n      children: []\n    },\n    {\n      id: 1,\n      name: \"Callback\",\n      scope: \"Callback\",\n      children: []\n    },\n    {\n      id: 2,\n      name: \"Configuration\",\n      scope: \"Configuration\",\n      children: []\n    },\n    {\n      id: 3,\n      name: \"Flow\",\n      scope: \"Flow\",\n      children: []\n    },\n    {\n      id: 4,\n      name: \"Nodes\",\n      scope: \"Node\",\n      children: []\n    },\n    {\n      id: 5,\n      name: \"Layouts\",\n      scope: \"Layout\",\n      children: []\n    },\n    {\n      id: 6,\n      name: \"Scenes\",\n      scope: \"GraphicScene\",\n      children: []\n    }\n  ];\n\n  const [data, setData] = React.useState(initialData);\n  const [selectedWorkspace, setSelectedWorkspace] = React.useState(\"global\");\n  const [selectedScopeItem, setSelectedScopeItem] = React.useState(\n    props.selected\n  );\n  const [workSpaceList, setWorkSpaceList] = React.useState({});\n  const [isLoading, setIsLoading] = React.useState(true);\n  let firstTime = true; // this is to avoid repeating getAllData() which is a costly operation\n\n  const scopeFilteredData = initialData.filter(elem =>\n    props.scopeList.includes(elem.scope)\n  );\n\n  /* eslint-disable react-hooks/exhaustive-deps */\n  React.useEffect(() => {\n    // Only fetch information the first time the modal is opened\n    if (firstTime) {\n      //get list of workspace\n      Workspace.getAll()\n        .then(response => setWorkSpaceList(response))\n        .catch(error => console.log(error));\n\n      // get all information in the scopes (not filtered by message)\n      getAllData(selectedWorkspace);\n      firstTime = false;\n    }\n\n    //Unmount\n    return () => {};\n  }, [props.scopeList]);\n  /* eslint-enable react-hooks/exhaustive-deps */\n\n  const changeWorkspace = evt => {\n    // Update the selector\n    setSelectedWorkspace(evt.target.value);\n\n    // When you switch workspaces reset Data\n    getAllData(evt.target.value);\n    setIsLoading(true);\n  };\n\n  const getAllData = workspace => {\n    const dataToSet = _cloneDeep(scopeFilteredData);\n\n    dataToSet.forEach((element, index) => {\n      // Get all scope items\n      Workspace.getDocs({ workspace: workspace, scope: element.scope })\n        .then(response => {\n          let sortedScopeItems = response.scopes\n            .sort((a, b) => a.ref.toLowerCase() > b.ref.toLowerCase())\n            .map((elem, i) => {\n              return {\n                id: i,\n                url: elem.url,\n                name: elem.ref,\n                children: [{ name: \"\" }]\n              };\n            });\n\n          if (workspace === \"global\") {\n            sortedScopeItems = sortedScopeItems.filter((elem, index) => {\n              return props.filter(elem, index);\n            });\n          }\n\n          dataToSet[index].children = sortedScopeItems;\n          setData(dataToSet);\n          setIsLoading(false);\n        })\n        .catch(error => console.error(error));\n    });\n  };\n\n  const requestScopeVersions = node => {\n    const dataToSet = _cloneDeep(data);\n    const mapObj = {\n      0: () => {\n        const indexToSet = dataToSet.findIndex(elem => elem.id === node.id);\n\n        // Toggle the expansion of the panel\n        const isExpanded = _get(\n          dataToSet,\n          [indexToSet, \"state\", \"expanded\"],\n          false\n        );\n        _set(dataToSet, [indexToSet, \"state\"], {\n          expanded: !isExpanded\n        });\n\n        setData(dataToSet);\n      },\n      1: () => {\n        // second level, ask for versions (versions of scope items)\n\n        // find index of selected node in first level\n        const indexToSet = dataToSet.findIndex(\n          elem => elem.id === node.parents[0]\n        );\n\n        Workspace.getDocs({\n          workspace: selectedWorkspace,\n          scope: dataToSet[indexToSet].scope,\n          id: node.name\n        })\n          .then(response => {\n            // Tailor data Data comes with \"ref\" key but we want \"name\"\n            const versionList = response.versions.map((elem, index) => {\n              return {\n                url: elem.url,\n                name: elem.tag,\n                id: index\n              };\n            });\n\n            // find index of selected node in the second level\n            const index2ndLevel = dataToSet[indexToSet].children.findIndex(\n              elem => elem.id === node.id\n            );\n\n            // Toggle the expansion of the panel\n            const isExpanded = _get(\n              dataToSet,\n              [indexToSet, \"children\", index2ndLevel, \"state\", \"expanded\"],\n              false\n            );\n            _set(dataToSet, [indexToSet, \"children\", index2ndLevel, \"state\"], {\n              expanded: !isExpanded\n            });\n\n            // Set version list into the Tree\n            _set(\n              dataToSet,\n              [indexToSet, \"children\", index2ndLevel, \"children\"],\n              versionList\n            );\n            setData(dataToSet);\n          })\n          .catch(error => console.error(error));\n      },\n      2: () => {\n        // Display the selected option\n        setSelectedScopeItem(`${node.url}`);\n      }\n    };\n    _get(mapObj, node.deepness, () => {})();\n  };\n\n  const confirmNodeSelection = node => {\n    // Display the selected option and confirm selection\n    if (selectedWorkspace !== \"global\" && node.deepness <= 1) return;\n    setSelectedScopeItem(node.url);\n    props.onSubmit(node.url);\n  };\n\n  const getModalTitle = scope => {\n    const vowels = [\"a\", \"e\", \"i\", \"o\", \"u\"];\n    const pronoun = vowels.includes(scope[0].toLowerCase()) ? \"an\" : \"a\";\n    return `Select ${pronoun} ${scope}`;\n  };\n\n  return (\n    <AbstractModal\n      onSubmit={() => props.onSubmit(selectedScopeItem)}\n      onCancel={props.onCancel}\n      open={props.open}\n      title={getModalTitle(props.scopeList[0])}\n      width=\"50%\"\n      // ioports\n      // height=\"70%\"\n    >\n      <Grid container>\n        <Grid\n          item\n          xs={12}\n          style={{\n            textAlign: \"center\",\n            paddingBottom: \"6px\",\n            paddingTop: \"10px\"\n          }}\n        >\n          <FormControl style={{ width: \"50%\" }}>\n            <InputLabel>Workspace</InputLabel>\n            <Select\n              value={selectedWorkspace}\n              // shared\n              // defaultValue=\"\"\n              onChange={changeWorkspace}\n            >\n              {/* shared  */}\n              {Object.keys(workSpaceList).map((key, index) => (\n                <MenuItem key={index} value={key}>\n                  {workSpaceList[key].label}\n                </MenuItem>\n              ))}\n            </Select>\n          </FormControl>\n        </Grid>\n        <Typography\n          component=\"div\"\n          style={{\n            overflowY: \"auto\",\n            overflowX: \"hidden\",\n            justifyContent: \"center\",\n            width: \"100%\"\n          }}\n        >\n          {isLoading ? (\n            <Backdrop\n              style={{\n                position: \"relative\",\n                height: \"50vh\",\n                width: \"inherit\",\n                color: \"#fff\",\n                zIndex: 99999\n              }}\n              open={isLoading}\n            >\n              <CircularProgress color=\"inherit\" />\n            </Backdrop>\n          ) : (\n            <BasicVirtualizedTree\n              onClickNode={node => requestScopeVersions(node)}\n              // shared\n              onDoubleClickNode={data => confirmNodeSelection(data)}\n              data={data}\n              handleChange={nodes => setData(nodes)}\n              showIcons={false}\n              height=\"400px\"\n            ></BasicVirtualizedTree>\n          )}\n        </Typography>\n        <Grid item xs={12} style={{ textAlign: \"center\" }}>\n          <Typography label=\"Message\" value={\"selected\"} margin=\"normal\">\n            {selectedScopeItem === \"\" ? \"Nothing selected\" : selectedScopeItem}\n          </Typography>\n        </Grid>\n      </Grid>\n    </AbstractModal>\n  );\n};\n\nSelectScopeModal.propTypes = {\n  onSubmit: PropTypes.func,\n  onCancel: PropTypes.func,\n  open: PropTypes.bool,\n  scopeList: PropTypes.array,\n  message: PropTypes.string,\n  selected: PropTypes.string,\n  filter: PropTypes.func\n};\n\nSelectScopeModal.defaultProps = {\n  title: \"Insert Text here\",\n  message: \"Are you sure?\",\n  onSubmit: () => {},\n  onCancel: () => {},\n  open: false,\n  scopeList: [\"Callback\"],\n  selected: \"\",\n  filter: () => true\n};\n\nexport default SelectScopeModal;\n","import React from \"react\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Menu from \"@material-ui/core/Menu\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport SettingsIcon from \"@material-ui/icons/Settings\";\nimport PropTypes from \"prop-types\";\nimport Toggle from \"./Toggle\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Divider from \"@material-ui/core/Divider\";\nimport { Typography } from \"@material-ui/core\";\n\nconst useStyles = makeStyles(theme => {\n  return {\n    menuItemSpacing: {\n      fontSize: \"18px\",\n      minHeight: \"18px\",\n      padding: theme.spacing(1.25, 2),\n      ...theme.cursorDefault\n    },\n    profileMenuFooter: {\n      fontSize: \"14px\",\n      textAlign: \"end\"\n    }\n  };\n});\n\nconst ProfileMenu = props => {\n  const classes = useStyles();\n  const [anchorEl, setAnchorEl] = React.useState(null);\n\n  const handleClick = event => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  return (\n    <div>\n      <IconButton\n        aria-controls=\"simple-menu\"\n        aria-haspopup=\"true\"\n        onClick={handleClick}\n      >\n        <SettingsIcon />\n      </IconButton>\n      <Menu\n        id=\"simple-menu\"\n        anchorEl={anchorEl}\n        keepMounted\n        open={Boolean(anchorEl)}\n        onClose={handleClose}\n      >\n        <Typography component=\"div\" variant=\"body1\">\n          <div className={classes.menuItemSpacing}>\n            {props.welcomeLabel}, {props.userName}\n          </div>\n          <Divider variant=\"middle\" />\n          {props.extraItems?.map(item => (\n            <MenuItem\n              className={classes.menuItemSpacing}\n              onClick={() => item.func}\n            >\n              {item.label}\n            </MenuItem>\n          ))}\n          <div className={classes.menuItemSpacing}>\n            {props.darkThemeLabel}\n            <Toggle\n              onToggle={() => props.handleToggleTheme()}\n              toggle={props.isDarkTheme}\n            ></Toggle>\n          </div>\n          <MenuItem\n            className={(classes.menuItemSpacing, classes.cursorPointer)}\n            onClick={props.handleLogout}\n          >\n            {props.logoutLabel}\n          </MenuItem>\n          <Divider variant=\"middle\" />\n          <div\n            className={\n              classes.menuItemSpacing + \" \" + classes.profileMenuFooter\n            }\n          >\n            {props.version}\n          </div>\n        </Typography>\n      </Menu>\n    </div>\n  );\n};\nProfileMenu.propTypes = {\n  welcomeLabel: PropTypes.string,\n  userName: PropTypes.string,\n  darkThemeLabel: PropTypes.string,\n  logoutLabel: PropTypes.string,\n  version: PropTypes.string,\n  extraItems: PropTypes.array,\n  isDarkTheme: PropTypes.bool,\n  handleLogout: PropTypes.func,\n  handleToggleTheme: PropTypes.func\n};\n\nProfileMenu.defaultProps = {\n  welcomeLabel: \"Hello\",\n  userName: \"User\",\n  darkThemeLabel: \"Dark Theme\",\n  logoutLabel: \"Logout\",\n  version: \"\",\n  extraItems: [],\n  isDarkTheme: true,\n  handleLogout: () => console.log(\"logout\"),\n  handleToggleTheme: () => console.log(\"toggle\")\n};\n\nexport default ProfileMenu;\n","import React, { Component } from \"react\";\nimport { fade, withStyles } from \"@material-ui/core/styles\";\nimport InputBase from \"@material-ui/core/InputBase\";\nimport SearchIcon from \"@material-ui/icons/Search\";\nimport PropTypes from \"prop-types\";\n\nconst styles = theme => ({\n  search: {\n    position: \"relative\",\n    borderRadius: theme.shape.borderRadius,\n    backgroundColor: fade(theme.palette.common.white, 0.15),\n    \"&:hover\": {\n      backgroundColor: fade(theme.palette.common.white, 0.25)\n    },\n    marginRight: theme.spacing(2),\n    marginLeft: 0,\n    width: \"100%\",\n    [theme.breakpoints.up(\"sm\")]: {\n      marginLeft: theme.spacing(3),\n      width: \"auto\"\n    }\n  },\n  searchIcon: {\n    width: theme.spacing(7),\n    height: \"100%\",\n    position: \"absolute\",\n    pointerEvents: \"none\",\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\"\n  },\n  inputRoot: {\n    color: \"inherit\"\n  },\n  inputInput: {\n    padding: theme.spacing(1, 1, 1, 7),\n    transition: theme.transitions.create(\"width\"),\n    width: \"100%\",\n    [theme.breakpoints.up(\"md\")]: {\n      width: 200\n    }\n  }\n});\n\nclass SearchInput extends Component {\n  searchInput = undefined;\n  timer = undefined;\n\n  handleChange = evt => {\n    this.searchInput = evt.target.value;\n    if (this.props.enableTimeout) {\n      if (this.timer) {\n        clearTimeout(this.timer);\n      }\n      this.timer = setTimeout(this.handleSearch, this.props.time);\n    } else {\n      this.handleSearch();\n    }\n  };\n\n  handleSearch = () => {\n    if (this.searchInput !== undefined) this.props.onChange(this.searchInput);\n  };\n\n  render() {\n    const { classes, style, placeholder } = this.props;\n    return (\n      <div className={classes.search} style={style}>\n        <div className={classes.searchIcon}>\n          <SearchIcon />\n        </div>\n        <InputBase\n          ref={this.setSearchInput}\n          placeholder={placeholder}\n          classes={{\n            root: classes.inputRoot,\n            input: classes.inputInput\n          }}\n          inputProps={{ \"aria-label\": \"search\" }}\n          onChange={this.handleChange}\n        />\n      </div>\n    );\n  }\n}\n\nSearchInput.propTypes = {\n  placeholder: PropTypes.string,\n  onChange: PropTypes.func,\n  time: PropTypes.number,\n  enableTimeout: PropTypes.bool,\n  style: PropTypes.object\n};\n\nSearchInput.defaultProps = {\n  placeholder: \"Search...\",\n  onChange: input => {\n    console.log(input);\n  },\n  time: 250,\n  enableTimeout: true,\n  style: {}\n};\n\nexport default withStyles(styles, { withTheme: true })(SearchInput);\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport InputLabel from \"@material-ui/core/InputLabel\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport MaterialSelect from \"@material-ui/core/Select\";\nimport PropTypes from \"prop-types\";\n\nconst useStyles = makeStyles(theme => ({\n  formControl: {\n    margin: theme.spacing(1),\n    minWidth: 120\n  }\n}));\n\nconst Select = props => {\n  const classes = useStyles();\n\n  let noneOption = <div></div>;\n  if (props.noneOption) {\n    noneOption = (\n      <MenuItem value=\"\">\n        <em>None</em>\n      </MenuItem>\n    );\n  }\n\n  return (\n    <FormControl\n      variant={props.variant}\n      className={classes.formControl}\n      style={props.style}\n      hiddenLabel={props.label === undefined ? true : false}\n    >\n      <InputLabel id=\"movai-react-select\">{props.label}</InputLabel>\n      <MaterialSelect\n        labelId=\"movai-react-select\"\n        id={props.id}\n        value={props.value}\n        onChange={props.onChange}\n        inputProps={props.inputProps}\n      >\n        {noneOption}\n        {props.options.map((element, index) => {\n          return (\n            <MenuItem key={index} value={element}>\n              {element}\n            </MenuItem>\n          );\n        })}\n      </MaterialSelect>\n    </FormControl>\n  );\n};\n\nSelect.propTypes = {\n  value: PropTypes.string,\n  options: PropTypes.array,\n  noneOption: PropTypes.bool,\n  label: PropTypes.string,\n  variant: PropTypes.string,\n  style: PropTypes.object,\n  onChange: PropTypes.func,\n  id: PropTypes.string,\n  inputProps: PropTypes.object\n};\nSelect.defaultProps = {\n  value: \"option2\",\n  options: [\"option1\", \"option2\", \"option3\"],\n  variant: \"filled\",\n  noneOption: true,\n  onChange: evt => console.log(evt.target.value),\n  id: \"movai-react-select\"\n};\n\nexport default Select;\n","import * as React from \"react\";\nimport PropTypes from \"prop-types\";\nimport clsx from \"clsx\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport { capitalize } from \"@material-ui/core/utils\";\nimport { svgIcons } from \"./svg-icons/svgIcons\";\n\nexport const styles = () => {\n  return {\n    /* Styles applied to the root element. */\n    root: {\n      // borderRadius: theme.shape.borderRadius,\n      backgroundColor: \"transparent\",\n      display: \"flex\",\n      padding: \"6px 16px\"\n    },\n    /* Styles applied to the root element if `variant=\"filled\"` and `color=\"success\"`. */\n    filledSuccess: {\n      color: \"#fff\",\n      // fontWeight: theme.typography.fontWeightMedium,\n      backgroundColor: \"#4caf50\"\n    },\n    /* Styles applied to the root element if `variant=\"filled\"` and `color=\"info\"`. */\n    filledInfo: {\n      color: \"#fff\",\n      // fontWeight: theme.typography.fontWeightMedium,\n      backgroundColor: \"#2196f3\"\n    },\n    /* Styles applied to the root element if `variant=\"filled\"` and `color=\"warning\"`. */\n    filledWarning: {\n      color: \"#fff\",\n      // fontWeight: theme.typography.fontWeightMedium,\n      backgroundColor: \"#ff9800\"\n    },\n    /* Styles applied to the root element if `variant=\"filled\"` and `color=\"error\"`. */\n    filledError: {\n      color: \"#fff\",\n      // fontWeight: theme.typography.fontWeightMedium,\n      backgroundColor: \"#f44336\"\n    },\n    /* Styles applied to the icon wrapper element. */\n    icon: {\n      marginRight: 12,\n      padding: \"7px 0\",\n      display: \"flex\",\n      fontSize: 22,\n      opacity: 0.9\n    },\n    /* Styles applied to the message wrapper element. */\n    message: {\n      padding: \"8px 0\",\n      display: \"flex\",\n      flexDirection: \"column\",\n      justifyContent: \"center\"\n    },\n    /* Styles applied to the action wrapper element if `action` is provided. */\n    action: {\n      display: \"flex\",\n      alignItems: \"center\",\n      marginLeft: \"auto\",\n      paddingLeft: 16,\n      marginRight: -8\n    }\n  };\n};\n\nconst defaultIconMapping = {\n  success: svgIcons.SuccessOutlined,\n  warning: svgIcons.ReportProblemOutlined,\n  error: svgIcons.ErrorOutline,\n  info: svgIcons.InfoOutlined\n};\n\nconst Alert = props => {\n  const {\n    action,\n    children,\n    classes,\n    className,\n    closeText = \"Close\",\n    color,\n    icon,\n    iconMapping = defaultIconMapping,\n    onClose,\n    role = \"alert\",\n    severity = \"success\",\n    variant = \"standard\",\n    theme,\n    ...other\n  } = props;\n\n  return (\n    <div\n      className={clsx(\n        classes.root,\n        classes[`${variant}${capitalize(color || severity)}`],\n        className\n      )}\n      {...other}\n    >\n      {icon !== false ? (\n        <div className={classes.icon}>\n          {icon || iconMapping[severity] || defaultIconMapping[severity]}\n        </div>\n      ) : null}\n      <div className={classes.message}>{children}</div>\n      {action != null ? <div className={classes.action}>{action}</div> : null}\n      {action == null && onClose ? (\n        <div className={classes.action}>\n          <IconButton\n            size=\"small\"\n            aria-label={closeText}\n            title={closeText}\n            color=\"inherit\"\n            onClick={onClose}\n          >\n            {svgIcons.Close}\n          </IconButton>\n        </div>\n      ) : null}\n    </div>\n  );\n};\n\nAlert.propTypes = {\n  // ----------------------------- Warning --------------------------------\n  // | These PropTypes are generated from the TypeScript type definitions |\n  // |     To update them edit the d.ts file and run \"yarn proptypes\"     |\n  // ----------------------------------------------------------------------\n  /**\n   * The action to display. It renders after the message, at the end of the alert.\n   */\n  action: PropTypes.node,\n  /**\n   * The content of the component.\n   */\n  children: PropTypes.node,\n  /**\n   * Override or extend the styles applied to the component.\n   * See [CSS API](#css) below for more details.\n   */\n  classes: PropTypes.object,\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n  /**\n   * Override the default label for the *close popup* icon button.\n   *\n   * For localization purposes, you can use the provided [translations](/guides/localization/).\n   */\n  closeText: PropTypes.string,\n  /**\n   * The main color for the alert. Unless provided, the value is taken from the `severity` prop.\n   */\n  color: PropTypes.oneOf([\"error\", \"info\", \"success\", \"warning\"]),\n  /**\n   * Override the icon displayed before the children.\n   * Unless provided, the icon is mapped to the value of the `severity` prop.\n   */\n  icon: PropTypes.node,\n  /**\n   * The component maps the `severity` prop to a range of different icons,\n   * for instance success to `<SuccessOutlined>`.\n   * If you wish to change this mapping, you can provide your own.\n   * Alternatively, you can use the `icon` prop to override the icon displayed.\n   */\n  iconMapping: PropTypes.shape({\n    error: PropTypes.node,\n    info: PropTypes.node,\n    success: PropTypes.node,\n    warning: PropTypes.node\n  }),\n  /**\n   * Callback fired when the component requests to be closed.\n   * When provided and no `action` prop is set, a close icon button is displayed that triggers the callback when clicked.\n   *\n   * @param {object} event The event source of the callback.\n   */\n  onClose: PropTypes.func,\n  /**\n   * The ARIA role attribute of the element.\n   */\n  role: PropTypes.string,\n  /**\n   * The severity of the alert. This defines the color and icon used.\n   */\n  severity: PropTypes.oneOf([\"error\", \"info\", \"success\", \"warning\"]),\n  /**\n   * The variant to use.\n   */\n  variant: PropTypes.oneOf([\"filled\", \"outlined\", \"standard\"])\n};\n\nexport default withStyles(styles, { name: \"MuiAlert\" })(Alert);\n","// import * as React from \"react\";\n// import SvgIcon from \"@material-ui/core/SvgIcon\";\n\n// export default function createSvgIcon({\n//   path = \"\",\n//   style = {},\n//   fill = \"#fff\",\n//   width = \"100%\",\n//   className = \"\",\n//   height = \"100%\",\n//   viewBox = \"0 0 32 32\"\n// }) {\n//   return (\n//     <svg\n//       width={width}\n//       style={style}\n//       height={height}\n//       viewBox={viewBox}\n//       className={className}\n//       xmlns=\"http://www.w3.org/2000/svg\"\n//       xmlnsXlink=\"http://www.w3.org/1999/xlink\"\n//     >\n//       <path d={path} fill={fill} />\n//     </svg>\n//   );\n// }\n\n// export default function createSvgIcon(path, displayName) {\n//   const Component = React.memo(\n//     React.forwardRef((props, ref) => (\n//       <SvgIcon data-mui-test={`${displayName}Icon`} ref={ref} {...props}>\n//         {path}\n//       </SvgIcon>\n//       <SvgIcon>\n//         {path}\n//       </SvgIcon>\n//     ))\n//   );\n\n//   if (process.env.NODE_ENV !== \"production\") {\n//     Component.displayName = `${displayName}Icon`;\n//   }\n\n//   Component.muiName = SvgIcon.muiName;\n\n//   return Component;\n// }\n\nimport React from \"react\";\n\nconst CreateSVGIcon = ({\n  path = \"\",\n  style = {},\n  fill = \"#fff\",\n  width = \"100%\",\n  height = \"100%\",\n  className = \"\",\n  viewBox = \"0 0 24 24\"\n}) => (\n  <svg\n    width={width}\n    style={style}\n    height={height}\n    viewBox={viewBox}\n    xmlns=\"http://www.w3.org/2000/svg\"\n    className={`svg-icon ${className || \"\"}`}\n    xmlnsXlink=\"http://www.w3.org/1999/xlink\"\n  >\n    <path fill={fill} d={path} />\n  </svg>\n);\n\nexport default CreateSVGIcon;\n","import React from \"react\";\nimport CreateSVGIcon from \"./CreateSVGIcon\";\n\nexport const svgIcons = {\n  Close: (\n    <CreateSVGIcon\n      width={24}\n      path=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"\n    />\n  ),\n  ErrorOutline: (\n    <CreateSVGIcon\n      width={24}\n      path=\"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z\"\n    ></CreateSVGIcon>\n  ),\n  InfoOutlined: (\n    <CreateSVGIcon\n      width={24}\n      path=\"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z\"\n    ></CreateSVGIcon>\n  ),\n  ReportProblemOutlined: (\n    <CreateSVGIcon\n      width={24}\n      path=\"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z\"\n    ></CreateSVGIcon>\n  ),\n  SuccessOutlined: (\n    <CreateSVGIcon\n      width={24}\n      path=\"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z\"\n    ></CreateSVGIcon>\n  )\n};\n","var api = require(\"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!./Snackbar.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","// Inspired from https://github.com/GA-MO/react-confirm-alert\n\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { render, unmountComponentAtNode } from \"react-dom\";\n// import { Alert } from \"@material-ui/lab\";\nimport Alert from \"./Alert/Alert\";\n\nimport \"./Snackbar.css\";\n\nimport { svgIcons } from \"./Alert/svg-icons/svgIcons\";\n\nclass ReactConfirmAlert extends Component {\n  static propTypes = {\n    message: PropTypes.string,\n    customUI: PropTypes.func,\n    closeOnClickOutside: PropTypes.bool,\n    closeOnEscape: PropTypes.bool,\n    willUnmount: PropTypes.func,\n    onClickOutside: PropTypes.func,\n    onKeypressEscape: PropTypes.func,\n    // new props\n    severity: PropTypes.string,\n    closeText: PropTypes.string,\n    autoHideDuration: PropTypes.number,\n    closable: PropTypes.bool\n  };\n\n  autoClose = null;\n\n  static defaultProps = {\n    closeOnClickOutside: true,\n    closeOnEscape: true,\n    willUnmount: () => null,\n    onClickOutside: () => null,\n    onKeypressEscape: () => null,\n    // new props\n    severity: \"info\", // error, warning, info or success\n    closeText: \"Close\",\n    autoHideDuration: 6000,\n    closable: true\n  };\n\n  handleClickButton = button => {\n    if (button.onClick) button.onClick();\n    this.close();\n  };\n\n  handleClickOverlay = e => {\n    const { closeOnClickOutside, onClickOutside } = this.props;\n    const isClickOutside = e.target === this.overlay;\n\n    if (closeOnClickOutside && isClickOutside) {\n      onClickOutside();\n      this.close();\n    }\n  };\n\n  close = () => {\n    removeBodyClass();\n    removeElementReconfirm();\n  };\n\n  keyboardClose = event => {\n    const { closeOnEscape, onKeypressEscape } = this.props;\n    const isKeyCodeEscape = event.keyCode === 27;\n\n    if (closeOnEscape && isKeyCodeEscape) {\n      onKeypressEscape(event);\n      this.close();\n    }\n  };\n\n  componentDidMount = () => {\n    document.addEventListener(\"keydown\", this.keyboardClose, false);\n    this.autoClose = setTimeout(() => {\n      if (\n        document.getElementById(\"react-confirm-alert\") ||\n        document.getElementById(\"react-confirm-alert-body-element\")\n      ) {\n        this.close();\n      }\n    }, this.props.autoHideDuration);\n  };\n\n  componentWillUnmount = () => {\n    document.removeEventListener(\"keydown\", this.keyboardClose, false);\n    clearTimeout(this.autoClose);\n    this.props.willUnmount();\n  };\n\n  renderCustomUI = () => {\n    const { title, message, customUI } = this.props;\n    const dataCustomUI = {\n      title,\n      message,\n      onClose: this.close\n    };\n\n    return customUI(dataCustomUI);\n  };\n\n  render() {\n    const {\n      message,\n      customUI,\n      severity,\n      closeText,\n      closable,\n      theme\n    } = this.props;\n\n    return (\n      <div\n        className=\"react-confirm-alert-overlay\"\n        ref={dom => (this.overlay = dom)}\n        onClick={this.handleClickOverlay}\n      >\n        <div className=\"react-confirm-alert\">\n          {customUI ? (\n            this.renderCustomUI()\n          ) : (\n            <div className=\"react-confirm-alert-body\">\n              <Alert\n                theme={theme}\n                elevation={6}\n                variant=\"filled\"\n                severity={severity}\n                closeText={closeText}\n                action={\n                  closable ? (\n                    <div\n                      className=\"icon-container\"\n                      onClick={() => this.close()}\n                    >\n                      {svgIcons.Close}\n                    </div>\n                  ) : (\n                    undefined\n                  )\n                }\n              >\n                {message}\n              </Alert>\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\nfunction createElementReconfirm(properties, theme) {\n  let divTarget = document.getElementById(\"react-confirm-alert\");\n  if (divTarget) {\n    // Rerender - the mounted ReactConfirmAlert\n    render(<ReactConfirmAlert {...properties} theme={theme} />, divTarget);\n  } else {\n    // Mount the ReactConfirmAlert component\n    document.body.children[0].classList.add(\"react-confirm-alert-blur\");\n    divTarget = document.createElement(\"div\");\n    divTarget.id = \"react-confirm-alert\";\n    document.body.appendChild(divTarget);\n    render(<ReactConfirmAlert {...properties} theme={theme} />, divTarget);\n  }\n}\n\nfunction removeElementReconfirm() {\n  const target = document.getElementById(\"react-confirm-alert\");\n  unmountComponentAtNode(target);\n  target.parentNode.removeChild(target);\n}\n\nfunction addBodyClass() {\n  document.body.classList.add(\"react-confirm-alert-body-element\");\n}\n\nfunction removeBodyClass() {\n  document.body.classList.remove(\"react-confirm-alert-body-element\");\n}\n\nexport function snackbar(properties, theme) {\n  addBodyClass();\n  createElementReconfirm(properties, theme);\n}\n\nexport default ReactConfirmAlert;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport MaterialTable from \"material-table\";\n\nimport { forwardRef } from \"react\";\n\nimport AddBox from \"@material-ui/icons/AddBox\";\nimport ArrowDownward from \"@material-ui/icons/ArrowDownward\";\nimport Check from \"@material-ui/icons/Check\";\nimport ChevronLeft from \"@material-ui/icons/ChevronLeft\";\nimport ChevronRight from \"@material-ui/icons/ChevronRight\";\nimport Clear from \"@material-ui/icons/Clear\";\nimport DeleteOutline from \"@material-ui/icons/DeleteOutline\";\nimport Edit from \"@material-ui/icons/Edit\";\nimport FilterList from \"@material-ui/icons/FilterList\";\nimport FirstPage from \"@material-ui/icons/FirstPage\";\nimport LastPage from \"@material-ui/icons/LastPage\";\nimport Remove from \"@material-ui/icons/Remove\";\nimport SaveAlt from \"@material-ui/icons/SaveAlt\";\nimport Search from \"@material-ui/icons/Search\";\nimport ViewColumn from \"@material-ui/icons/ViewColumn\";\n\nconst tableIcons = {\n  Add: forwardRef((props, ref) => <AddBox {...props} ref={ref} />),\n  Check: forwardRef((props, ref) => <Check {...props} ref={ref} />),\n  Clear: forwardRef((props, ref) => <Clear {...props} ref={ref} />),\n  Delete: forwardRef((props, ref) => <DeleteOutline {...props} ref={ref} />),\n  DetailPanel: forwardRef((props, ref) => (\n    <ChevronRight {...props} ref={ref} />\n  )),\n  Edit: forwardRef((props, ref) => <Edit {...props} ref={ref} />),\n  Export: forwardRef((props, ref) => <SaveAlt {...props} ref={ref} />),\n  Filter: forwardRef((props, ref) => <FilterList {...props} ref={ref} />),\n  FirstPage: forwardRef((props, ref) => <FirstPage {...props} ref={ref} />),\n  LastPage: forwardRef((props, ref) => <LastPage {...props} ref={ref} />),\n  NextPage: forwardRef((props, ref) => <ChevronRight {...props} ref={ref} />),\n  PreviousPage: forwardRef((props, ref) => (\n    <ChevronLeft {...props} ref={ref} />\n  )),\n  ResetSearch: forwardRef((props, ref) => <Clear {...props} ref={ref} />),\n  Search: forwardRef((props, ref) => <Search {...props} ref={ref} />),\n  SortArrow: forwardRef((props, ref) => <ArrowDownward {...props} ref={ref} />),\n  ThirdStateCheck: forwardRef((props, ref) => <Remove {...props} ref={ref} />),\n  ViewColumn: forwardRef((props, ref) => <ViewColumn {...props} ref={ref} />),\n};\n\n// More information in: https://material-table.com/#/docs/all-props\n\nconst Table = (props) => {\n  return (\n    <MaterialTable\n      style={props.style}\n      title={props.title}\n      columns={props.columns}\n      data={props.data}\n      icons={tableIcons}\n      actions={props.actions}\n      options={props.options}\n      components={props.components}\n      localization={props.localization}\n    />\n  );\n};\n\nTable.propTypes = {\n  style: PropTypes.object,\n  title: PropTypes.string,\n  columns: PropTypes.array,\n  data: PropTypes.array,\n  actions: PropTypes.array,\n  options: PropTypes.object,\n  components: PropTypes.object,\n  localization: PropTypes.object,\n};\nTable.defaultProps = {\n  style: {},\n  title: \"\",\n  columns: [],\n  data: [],\n  actions: [],\n  options: {\n    actionsColumnIndex: -1,\n    draggable: false,\n    grouping: false,\n    search: false,\n    toolbar: false,\n    searchFieldAlignment: \"left\",\n    paging: false,\n  },\n  components: {},\n};\n\nexport default Table;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport MaterialTabs from \"@material-ui/core/Tabs\";\nimport Tab from \"@material-ui/core/Tab\";\nimport Typography from \"@material-ui/core/Typography\";\n\nfunction TabPanel(props) {\n  const { children, selectedTab, index, ...other } = props;\n\n  return (\n    <Typography\n      component=\"div\"\n      role=\"tabpanel\"\n      hidden={selectedTab !== index}\n      id={`tabpanel-${index}`}\n      aria-labelledby={`tab-${index}`}\n      {...other}\n    >\n      {selectedTab === index && children}\n    </Typography>\n  );\n}\n\nTabPanel.propTypes = {\n  children: PropTypes.node,\n  index: PropTypes.any.isRequired,\n  selectedTab: PropTypes.any.isRequired\n};\n\nfunction a11yProps(index) {\n  return {\n    id: `tab-${index}`,\n    \"aria-controls\": `tabpanel-${index}`\n  };\n}\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    flexGrow: 1,\n    height: \"100%\"\n  },\n  tabPanel: {\n    flexGrow: 1,\n    minHeight: 0,\n    height: \"calc(100% - 48px)\",\n    overflowY: \"auto\"\n  }\n}));\n\nexport default function Tabs(props) {\n  const classes = useStyles();\n  const [selectedTab, setSelectedTab] = React.useState(props.selectedTab);\n\n  React.useEffect(() => {\n    if (props.selectedTab !== selectedTab) {\n      setSelectedTab(props.selectedTab);\n    }\n  }, [props.selectedTab]);\n\n  const handleChange = (event, newSelectedTab) => {\n    setSelectedTab(newSelectedTab);\n  };\n\n  return (\n    <div className={classes.root}>\n      <MaterialTabs\n        value={selectedTab}\n        onChange={handleChange}\n        indicatorColor=\"primary\"\n        textColor=\"primary\"\n      >\n        {props.tabList.map((tab, index) => (\n          <Tab key={index} label={tab.label} {...a11yProps(index)} />\n        ))}\n      </MaterialTabs>\n      {props.tabList.map((tab, index) => (\n        <TabPanel\n          key={index}\n          selectedTab={selectedTab}\n          index={index}\n          className={props.scrollable ? classes.tabPanel : undefined}\n        >\n          {tab.component}\n        </TabPanel>\n      ))}\n    </div>\n  );\n}\n\nTabs.propTypes = {\n  tabList: PropTypes.array,\n  selectedTab: PropTypes.number,\n  scrollable: PropTypes.bool\n};\n\nTabs.defaultProps = {\n  tabList: [\n    { label: \"Tab 1\", component: <div>Component 1</div> },\n    {\n      label: \"Tab 2\",\n      component: (\n        <div>\n          Lorem Ipsum is simply dummy text of the printing and typesetting\n          industry. Lorem Ipsum has been the industry standard dummy text ever\n          since the 1500s, when an unknown printer took a galley of type and\n          scrambled it to make a type specimen book. It has survived not only\n          five centuries, but also the leap into electronic typesetting,\n          remaining essentially unchanged. It was popularised in the 1960s with\n          the release of Letraset sheets containing Lorem Ipsum passages, and\n          more recently with desktop publishing software like Aldus PageMaker\n          including versions of Lorem Ipsum.\n        </div>\n      )\n    },\n    { label: \"Tab 3\", component: <div>Component 3</div> }\n  ],\n  selectedTab: 0,\n  scrollable: true\n};\n","import React from \"react\";\nimport TextField from \"@material-ui/core/TextField\";\nimport PropTypes from \"prop-types\";\n\nconst Text = props => {\n  return <TextField {...props}></TextField>;\n};\n\nText.propTypes = {};\nText.defaultProps = {};\n\nexport default Text;\n","import React from \"react\";\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\nimport Switch from \"@material-ui/core/Switch\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { green, grey } from \"@material-ui/core/colors\";\nimport PropTypes from \"prop-types\";\n\nconst useStyles = makeStyles(theme => ({\n  label: {\n    fontFamily: \"Roboto\",\n    fontStyle: \"normal\",\n    fontWeight: \"normal\",\n    fontSize: \"14px\",\n    marginLeft: 0,\n    marginRight: 0,\n    marginBottom: 0\n  },\n  colorSwitchBase: {\n    color: grey[300],\n    \"&$colorChecked\": {\n      color: green[500],\n      \"& + $colorBar\": {\n        backgroundColor: green[500]\n      }\n    }\n  },\n  colorBar: {},\n  colorChecked: {}\n}));\n\nconst Toggle = props => {\n  const classes = useStyles();\n  return (\n    <FormControlLabel\n      control={\n        <Switch\n          checked={props.toggle}\n          onChange={props.onToggle}\n          color={props.color}\n          disabled={props.disabled}\n          hidden={props.hidden}\n          size={props.size}\n          classes={{\n            switchBase: classes.colorSwitchBase,\n            checked: classes.colorChecked,\n            track: classes.colorBar\n          }}\n        />\n      }\n      labelPlacement={props.labelPlacement}\n      label={props.label}\n      classes={{ label: classes.label }}\n      style={{ ...props.style, marginLeft: 0, marginRight: 0, marginBottom: 0 }}\n    />\n  );\n};\n\nToggle.propTypes = {\n  toggle: PropTypes.bool,\n  onToggle: PropTypes.func,\n  label: PropTypes.string,\n  color: PropTypes.string,\n  labelPlacement: PropTypes.string, // 'end', 'start', 'top', 'bottom'\n  style: PropTypes.object\n};\nToggle.defaultProps = {\n  color: \"primary\" // or secondary\n};\n\nexport default Toggle;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Tree from \"react-virtualized-tree\";\nimport \"material-icons/css/material-icons.css\";\nimport \"react-virtualized/styles.css\";\nimport \"react-virtualized-tree/lib/main.css\";\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\nimport ChevronRightIcon from \"@material-ui/icons/ChevronRight\";\nimport Box from \"@material-ui/core/Box\";\nimport Grid from \"@material-ui/core/Grid\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport _get from \"lodash/get\";\nimport { ListItemsTreeWithSearch } from \"./TreeSearch\";\n\n//========================================================================================\n/*                                                                                      *\n *                                     TODO REFACTOR                                    *\n *                                                                                      */\n//========================================================================================\n\nconst styles = theme => ({\n  horizFlex: {\n    display: \"flex\",\n    flexDirection: \"row\",\n    alignItems: \"center\"\n  },\n  spaceBetween: {\n    display: \"flex\",\n    width: \"100%\",\n    justifyContent: \"space-between\"\n  },\n  preContainer: {\n    justifyContent: \"space-between\",\n    \"& button\": {\n      display: \"none\"\n    },\n    \"&:hover\": {\n      backgroundColor: \"rgba(54,181,230, 0.15)\",\n      \"& button\": {\n        display: \"inline-flex\"\n      }\n    }\n  },\n  ellipsis: {\n    whiteSpace: \"nowrap\",\n    overflow: \"hidden\",\n    textOverflow: \"ellipsis\",\n    flex: 2\n  },\n  iconSpace: {\n    flex: 1,\n    textAlign: \"right\",\n    minWidth: \"45px\",\n    \"& button\": {\n      position: \"relative\",\n      bottom: \"7px\",\n      padding: \"7px\"\n    }\n  }\n});\n\n// const {Deletable, Expandable, Favorite} = Renderers;\n\nconst testArray = [];\n\nfor (let index = 0; index < 100; index++) {\n  testArray.push({\n    id: index,\n    name: `1.0.${index}`\n  });\n}\n\nconst EXPANDED = \"EXPANDED\";\n\nclass BasicVirtualizedTree extends Component {\n  state = {\n    selectedGroup: EXPANDED,\n    groupsEnabled: true,\n    searchValue: \"\"\n  };\n\n  searchFilter = (nodes, searchValue) => {\n    const searchValueLower = searchValue.toLowerCase();\n    const filteredNodes = nodes\n      .filter(\n        node =>\n          (!node.name.includes(\"@SM\") &&\n            node.name.toLowerCase().includes(searchValueLower)) ||\n          node.children.findIndex(ch =>\n            ch.name.toLowerCase().includes(searchValueLower)\n          ) >= 0\n      )\n      .map(node => {\n        return {\n          ...node,\n          children: (node?.children || []).filter(\n            ch =>\n              ch.name &&\n              !ch.name.includes(\"@SM\") &&\n              (node.name.toLowerCase().includes(searchValueLower) ||\n                ch.name.toLowerCase().includes(searchValueLower))\n          )\n        };\n      });\n\n    // Add children id if missing\n    filteredNodes.forEach(node => {\n      node.children.forEach((child, i) => {\n        child.id = child.id ? child.id : i;\n        if (child.children) {\n          child.children.forEach((grandChild, j) => {\n            grandChild.id = grandChild.id ? grandChild.id : j;\n          });\n        }\n      });\n    });\n\n    return filteredNodes;\n  };\n\n  handleSelectedGroupChange = selectedGroup => {\n    this.setState({ selectedGroup });\n  };\n\n  // open: true -> expand\n  //       false -> collapse\n  handleExpansion = (evt, nodes, node, open) => {\n    // const treeData = _cloneDeep(nodes);\n    // _set(treeData, [node.id, \"state\"], {\n    //   expanded: open\n    // });\n    // evt.stopPropagation();\n    // this.props.handleChange(treeData);\n  };\n\n  render() {\n    const { classes } = this.props;\n    const iconStyle = <i className=\"fas fa-home\" />;\n    const nodes = this.props.data;\n    return (\n      <div>\n        <ListItemsTreeWithSearch\n          style={{\n            overflow: \"auto\"\n          }}\n          icon={iconStyle}\n          onSearch={input => {\n            this.setState({\n              searchValue: input\n            });\n          }}\n        >\n          <div style={{ height: this.props.height }}>\n            <Tree\n              nodes={this.searchFilter(nodes, this.state.searchValue)}\n              onChange={this.props.handleChange}\n            >\n              {({ style, node, ...rest }) => {\n                // Adjust tree indentation\n                style.paddingLeft = style.marginLeft / 1.5;\n                style.marginLeft = 0;\n                // Render tree element\n                return (\n                  <div\n                    style={style}\n                    onClick={() => this.props.onClickNode(node)}\n                    onDoubleClick={() => this.props.onDoubleClickNode(node)}\n                    p={2}\n                    className={\n                      !_get(node, `children`, false) ? classes.preContainer : \"\"\n                    }\n                  >\n                    <Box p={1} className={classes.inlineFlex}>\n                      <Grid alignContent={\"space-between\"} container>\n                        {_get(node, `children`, false) &&\n                          node.state?.expanded && (\n                            <ExpandMoreIcon\n                              onClick={evt =>\n                                this.handleExpansion(evt, nodes, node, false)\n                              }\n                            />\n                          )}\n                        {_get(node, `children`, false) &&\n                          !node.state?.expanded && (\n                            <ChevronRightIcon\n                              onClick={evt =>\n                                this.handleExpansion(evt, nodes, node, true)\n                              }\n                            />\n                          )}\n\n                        <div\n                          className={\n                            !_get(node, `children`, false)\n                              ? classes.spaceBetween\n                              : \"\"\n                          }\n                        >\n                          <div className={classes.ellipsis}>{node.name}</div>\n                        </div>\n                      </Grid>\n                    </Box>\n                  </div>\n                );\n              }}\n            </Tree>\n          </div>\n        </ListItemsTreeWithSearch>\n      </div>\n    );\n  }\n}\n\nBasicVirtualizedTree.propTypes = {\n  data: PropTypes.array,\n  onClickNode: PropTypes.func,\n  onDoubleClickNode: PropTypes.func,\n  handleChange: PropTypes.func,\n  height: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n};\n\nBasicVirtualizedTree.defaultProps = {\n  data: [],\n  onClickNode: () => {},\n  onDoubleClickNode: () => {},\n  handleChange: () => {},\n  height: 700\n};\n\nexport default withStyles(styles, { withTheme: true })(BasicVirtualizedTree);\n","import React, { Component } from \"react\";\nimport {\n  List,\n  InputBase,\n  IconButton,\n  Typography,\n  Divider,\n  ListItem\n} from \"@material-ui/core\";\nimport PropTypes from \"prop-types\";\nimport SearchIcon from \"@material-ui/icons/Search\";\nimport ClearIcon from \"@material-ui/icons/Clear\";\n\nclass TreeSearch extends Component {\n  searchInput = null;\n  timer = null;\n  inputRef = React.createRef();\n\n  handleChange = evt => {\n    this.searchInput = evt.target.value;\n    if (this.timer) {\n      clearTimeout(this.timer);\n    }\n    this.timer = setTimeout(this.handleSearch, 250);\n  };\n\n  handleSearch = () => {\n    if (this.searchInput !== null) this.props.search(this.searchInput);\n  };\n\n  resetValue() {\n    const input = this.inputRef.current.children[0];\n    input.value = \"\";\n    input.focus();\n    this.searchInput = \"\";\n    this.handleSearch();\n    this.forceUpdate();\n  }\n\n  isEmpty() {\n    return this.searchInput === null || this.searchInput.trim() === \"\";\n  }\n\n  render() {\n    return (\n      <Typography\n        component=\"div\"\n        style={{\n          padding: \"2px 4px\",\n          display: \"flex\",\n          alignItems: \"center\",\n          width: \"100%\"\n        }}\n      >\n        <InputBase\n          ref={this.inputRef}\n          style={{\n            marginLeft: 10,\n            flex: 1\n          }}\n          placeholder=\"Search\"\n          onChange={this.handleChange}\n        />\n        <IconButton\n          style={{ padding: 10 }}\n          onClick={() => {\n            if (!this.isEmpty()) {\n              this.resetValue();\n            }\n          }}\n        >\n          {this.isEmpty() ? <SearchIcon /> : <ClearIcon />}\n        </IconButton>\n      </Typography>\n    );\n  }\n}\n\n/**\n *\n * @param {*} props: contains children which are Items\n */\nconst ListItemsTree = props => {\n  return (\n    <List\n      style={{ paddingLeft: \"0px\", paddingRight: \"0px\", ...props.style }}\n      dense={true}\n      component=\"div\"\n      onKeyUp={props.onKeyUp}\n    >\n      {props.children}\n    </List>\n  );\n};\n\nconst ListItemsTreeWithTitle = props => {\n  return (\n    <ListItemsTree>\n      <ListItem>\n        <Typography component={props.variant}>{props.title}</Typography>\n      </ListItem>\n      <Divider />\n      {props.children}\n    </ListItemsTree>\n  );\n};\n/* \n  TODO: think about how to generalize the search\n\n  Using either the _shared/Search method or using a predicate \n*/\nconst ListItemsTreeWithSearch = props => {\n  return (\n    <ListItemsTree\n      style={{ flexGrow: 1, paddingBottom: \"0px\", paddingTop: \"0px\" }}\n      onKeyUp={props.onKeyUp}\n    >\n      <ListItem>\n        <TreeSearch search={input => props.onSearch(input)} />\n      </ListItem>\n      <Divider />\n      <Typography style={props.style} component=\"div\">\n        {React.Children.map(props.children, x => {\n          return x;\n        })}\n      </Typography>\n    </ListItemsTree>\n  );\n};\n\nListItemsTreeWithSearch.propTypes = {\n  onSearch: PropTypes.func\n};\n\nListItemsTreeWithSearch.defaultProps = {\n  onSearch: input => console.log(input)\n};\n\nexport { ListItemsTree, ListItemsTreeWithSearch, ListItemsTreeWithTitle };\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport PropTypes from \"prop-types\";\n\nconst useStyles = makeStyles(theme => ({\n  container: {\n    height: \"100%\",\n    backgroundColor: props => props.backgroundColor,\n    width: props => props.width,\n    display: \"flex\",\n    flexDirection: \"column\"\n  },\n  logoArea: {\n    padding: \"17px\",\n    textAlign: \"center\",\n    alignItems: \"center\",\n    justifyContent: \"center\"\n  },\n  navigationArea: {\n    flexGrow: 1,\n    display: \"flex\",\n    flexDirection: \"column\",\n    //justifyContent: \"center\",\n    alignItems: \"center\"\n  },\n  accountArea: {\n    padding: props => (props.unsetAccountAreaPadding ? \"unset\" : \"17px\"),\n    textAlign: \"center\",\n    alignItems: \"center\",\n    justifyContent: \"center\"\n  }\n}));\n\nconst VerticalBar = props => {\n  const classes = useStyles(props);\n  return (\n    <div className={classes.container}>\n      <div className={classes.logoArea}>{props.upperElement}</div>\n      <div className={classes.navigationArea}>\n        {props.navigationList.map((element, index) => {\n          return (\n            <div key={index} style={{ padding: \"15px 0px\" }}>\n              {element}\n            </div>\n          );\n        })}\n      </div>\n      <div className={classes.accountArea}>{props.lowerElement}</div>\n    </div>\n  );\n};\n\nVerticalBar.propTypes = {\n  upperElement: PropTypes.node.isRequired,\n  navigationList: PropTypes.array,\n  lowerElement: PropTypes.node.isRequired,\n  width: PropTypes.string,\n  backgroundColor: PropTypes.string,\n  unsetAccountAreaPadding: PropTypes.bool\n};\nVerticalBar.defaultProps = {\n  upperElement: <div></div>,\n  navigationList: [<div></div>],\n  lowerElement: <div></div>,\n  width: \"68px\",\n  backgroundColor: \"#424242\",\n  unsetAccountAreaPadding: false\n};\n\nexport default VerticalBar;\n","class Action {\n  constructor() {\n    this.memory = {};\n  }\n\n  action(parentView) {\n    parentView.getSceneMemory().forEach(memory => {\n      memory.gizmoManager.attachedMesh = null;\n      memory.camera.attachControl(memory.canvas, true);\n    });\n    parentView.closeContextDial && parentView.closeContextDial();\n    parentView.setContextActionIndex && parentView.setContextActionIndex();\n  }\n\n  onChange(parentView) {\n    // to be overwritten by children\n  }\n}\n\nexport default Action;\n","import Util3d from \"../Util3d/Util3d\";\nimport KeyPoint from \"../NodeItem/KeyPoint\";\nimport Vec3 from \"../Math/Vec3\";\nimport { Maybe } from \"monet\";\nimport MouseKeysAction from \"./MouseKeysAction\";\nimport React from \"react\";\nimport { Color3, Axis, Vector3 } from \"@babylonjs/core\";\nimport { UndoManager } from \"mov-fe-lib-core\";\n\nclass AddKeyPointAction extends MouseKeysAction {\n  constructor() {\n    super();\n    this.key = \"addKeyPoint\";\n    this.name = \"Add Key Point [4]\";\n    this.maybeMousePos = Maybe.none();\n    this.tempMesh = null;\n    this.icon = props => <i className=\"fas fa-map-marker\" {...props}></i>;\n  }\n\n  createKeyPoint(\n    position,\n    name,\n    scene,\n    parentView,\n    is2addInServer = true,\n    color = Color3.Gray()\n  ) {\n    const rootMesh = parentView.getRootNode().item.mesh;\n\n    const keyPoint = KeyPoint.ofDict(scene, {\n      name: name,\n      color: [color.r, color.g, color.b]\n    });\n    const mesh = keyPoint.mesh;\n    mesh.parent = rootMesh;\n\n    const localPosition = Util3d.getLocalCoordFromWorld(\n      { parent: rootMesh },\n      Vec3.ofBabylon(position)\n    ).toBabylon();\n\n    mesh.setPositionWithLocalVector(\n      localPosition.add(Axis.Z.scale(KeyPoint.DEFAULT_SIZE))\n    );\n\n    if (is2addInServer) {\n      parentView.addNodeItem2Tree(keyPoint, rootMesh.name, is2addInServer);\n    }\n    return mesh;\n  }\n\n  action = parentView => {\n    super.action(parentView);\n    parentView.setSelectedAction(this);\n  };\n\n  onPointerDown = (evt, parentView) => {\n    if (evt.button !== 0) {\n      return;\n    }\n    parentView.getSceneMemory().forEach(memory => {\n      const { scene, ground, camera } = memory;\n      this.maybeMousePos = Util3d.getGroundPosition(scene, ground);\n      this.maybeMousePos.forEach(mousePos => {\n        camera.detachControl(memory.canvas);\n      });\n    });\n  };\n\n  onPointerMove = (evt, parentView) => {\n    parentView.getSceneMemory().forEach(memory => {\n      const scene = memory.scene;\n      const ground = memory.ground;\n      const maybeCurrent = Util3d.getGroundPosition(scene, ground);\n      maybeCurrent.forEach(current => {\n        this.maybeMousePos.forEach(oldMousePos => {\n          if (this.tempMesh) this.tempMesh.dispose();\n          this.tempMesh = this.createKeyPoint(\n            current,\n            TEMP_KEY_POINT_NAME,\n            scene,\n            parentView,\n            false\n          );\n        });\n      });\n    });\n  };\n\n  onPointerUp = (evt, parentView) => {\n    parentView.getSceneMemory().forEach(({ scene, camera, ground, canvas }) => {\n      const maybeCurrent = Util3d.getGroundPosition(scene, ground);\n      maybeCurrent.forEach(current => {\n        this.maybeMousePos.forEach(oldMousePos => {\n          if (this.tempMesh) this.tempMesh.dispose();\n          const name = `KeyPoint${Math.floor(Math.random() * 1e3)}`;\n          const keyPoint = this.createKeyPoint(\n            current,\n            name,\n            scene,\n            parentView,\n            true,\n            new Color3(Math.random(), Math.random(), Math.random())\n          );\n          parentView.setPropertiesWithName(name);\n          parentView\n            .getUndoManager()\n            .addIt(this.getUndoAbleAction(keyPoint, scene, parentView));\n        });\n      });\n      this.maybeMousePos = Maybe.none();\n      camera.attachControl(canvas, true);\n    });\n  };\n\n  getUndoAbleAction(mesh, scene, parentView) {\n    return UndoManager.actionBuilder()\n      .doAction(() => {\n        const keyPoint = this.createKeyPoint(\n          Vector3.Zero(),\n          mesh.name,\n          scene,\n          parentView,\n          true,\n          mesh.material.diffuseColor\n        );\n        keyPoint.position = mesh.position;\n        parentView.updateNodeInServer(mesh.name);\n      })\n      .undoAction(() => {\n        parentView.deleteNodeFromTreeUsingName(mesh.name);\n      })\n      .build();\n  }\n}\n\nconst TEMP_KEY_POINT_NAME = \"temp_key_point\";\nexport default AddKeyPointAction;\n","import Util3d from \"../Util3d/Util3d\";\nimport Vec3 from \"../Math/Vec3\";\nimport Action from \"./Action\";\nimport Map from \"../NodeItem/Map\";\nimport { Maybe } from \"monet\";\nimport React from \"react\";\nimport GlobalRef from \"../NodeItem/GlobalRef\";\nimport { Vector3 } from \"@babylonjs/core\";\nimport DefaultScene from \"../Utils/DefaultScene\";\nimport { ACTIONS } from \"../MainView/MainViewActions\";\nimport MapLoader from \"../AssetsManager/MapLoader\";\nimport { UndoManager } from \"mov-fe-lib-core\";\nimport AssetsManager from \"../AssetsManager/AssetsManager\";\n\nclass AddMapAction extends Action {\n  constructor(name, mapLoader) {\n    super();\n    this.name = name;\n    this.key = `addMap${name}`;\n    this.mapLoader = mapLoader;\n    this.icon = props => <i {...props} className=\"fas fa-map\"></i>;\n    this.firstTimeLoad = true;\n  }\n\n  addMap(parentView) {\n    parentView.getSceneMemory().forEach(async memory => {\n      const { scene, camera } = memory;\n      const {\n        textureSrc,\n        resolution,\n        origin,\n        imageSize\n      } = await this.mapLoader.load();\n\n      const width = resolution * imageSize[0];\n      const height = resolution * imageSize[1];\n      const mesh = Util3d.groundBuilder(scene)\n        .name(Maybe.fromNull(this.memory[\"name\"]).orSome(this.name))\n        .width(width)\n        .height(height)\n        .textureSrc(textureSrc)\n        .build();\n\n      const originPos = Vec3.of([-width / 2, -height / 2, 0]).sub(\n        Vec3.of(origin)\n      );\n\n      const rootNode = parentView.getRootNode();\n      const parent = rootNode.item.mesh.parent;\n      parent.position = GlobalRef.inverseCoordinates(originPos.toBabylon());\n      camera.setTarget(\n        new Vector3(parent.position.x, parent.position.y, parent.position.z)\n      );\n\n      const map = new Map(\n        mesh,\n        [width, height],\n        this.textureSrc,\n        Maybe.fromNull(this.memory[\"assetName\"]).orSome(this.name)\n      );\n\n      const isVisible = Maybe.fromNull(this.memory[\"isVisible\"]).orSome(true);\n      const is2sendServer = Maybe.fromNull(this.memory[\"isImport\"])\n        .map(x => !x)\n        .orSome(true);\n\n      mesh.setEnabled(isVisible);\n      parentView.addNodeItem2Tree(map, null, is2sendServer, isVisible);\n      memory.ground.dispose();\n      memory.ground = DefaultScene.createMeshGround(scene, width, height);\n      this.memory[\"isImport\"] = false;\n    });\n  }\n\n  action(parentView) {\n    super.action(parentView);\n    const maybeNode = parentView.getNodeFromTree(this.name);\n    maybeNode.orElseRun(() => {\n      const isImport = this.memory[\"isImport\"];\n      // you shouldn't be able to undo when importing a scene. isImport prevents removing the map when you undo.\n      // firstTimeLoad condition to prevent adding a map when fast map switch\n      if (isImport && this.firstTimeLoad) {\n        this.addMap(parentView);\n        this.firstTimeLoad = false;\n      } else {\n        parentView.getUndoManager().doIt(this.getUndoAction(parentView));\n      }\n    });\n    parentView.setSelectedAction(ACTIONS().orbit);\n  }\n\n  getUndoAction(parentView) {\n    if (parentView.getObjectTree().length < 2) {\n      return UndoManager.actionBuilder()\n        .doAction(() => {\n          this.addMap(parentView);\n        })\n        .undoAction(() => {\n          const name = parentView.getObjectTree()[1].title;\n          parentView.deleteNodeFromTreeUsingName(name);\n        })\n        .build();\n    } else {\n      const oldMapName = parentView.getObjectTree()[1].title;\n      const newMapName = this.name;\n      return UndoManager.actionBuilder()\n        .doAction(() => {\n          this.switchMaps(oldMapName, newMapName, parentView);\n        })\n        .undoAction(() => {\n          parentView.deleteNodeFromTreeUsingName(newMapName);\n          Maybe.fromNull(\n            AssetsManager.getInstance().getAssetsActionMap()[oldMapName]\n          ).forEach(a => a.action(parentView));\n        })\n        .build();\n    }\n  }\n\n  switchMaps(oldMapName, newMapName, parentView) {}\n\n  getType = () => AddMapAction.TYPE;\n\n  deleteAsset = () => {};\n\n  download = async () => {\n    const { textureSrc } = await this.mapLoader.load();\n    const { yamlSrc } = this.mapLoader;\n    const downloadLinks = (\n      <div style={{ display: \"flex\", flexDirection: \"column\" }}>\n        <div style={{ display: \"flex\", flexDirection: \"row\" }}>\n          <div style={{ marginRight: \"5px\" }}>Image:</div>\n          <a href={textureSrc} download>\n            {textureSrc}\n          </a>\n        </div>\n        <div style={{ display: \"flex\", flexDirection: \"row\" }}>\n          <div style={{ marginRight: \"5px\" }}>Yaml:</div>\n          <a href={MapLoader.getMapUrl(yamlSrc)} download>\n            {yamlSrc}\n          </a>\n        </div>\n      </div>\n    );\n  };\n\n  static TYPE = \"AddMapAction\";\n}\n\nexport default AddMapAction;\n","import Action from \"./Action\";\nimport React from \"react\";\nimport { ACTIONS } from \"../MainView/MainViewActions\";\nimport MeshLoader from \"../Utils/MeshLoader\";\nimport { Maybe } from \"monet\";\nimport Mesh from \"../NodeItem/Mesh\";\nimport { Vector3, Quaternion, Color3, StandardMaterial } from \"@babylonjs/core\";\nimport { UndoManager } from \"mov-fe-lib-core\";\n\n//\nclass AddMeshAction extends Action {\n  constructor(mesh) {\n    super();\n    this.key = mesh.id;\n    this.name = mesh.name;\n    this.icon = props => <i {...props} className=\"fas fa-draw-polygon\"></i>;\n  }\n\n  action(parentView) {\n    super.action(parentView);\n    console.log(`Mesh ${this.key} : ${this.name}`, this.memory);\n    this.addMesh(parentView);\n    parentView.setSelectedAction(ACTIONS().dragObjects);\n  }\n\n  addMesh = parentView => {\n    parentView.getSceneMemory().forEach(memory => {\n      const { scene } = memory;\n      const actionMemoryClone = { ...this.memory };\n      const isImport = this.getIsImport(actionMemoryClone);\n      const finalName = this.getFinalNameFromMemory(\n        actionMemoryClone,\n        isImport\n      );\n      if (isImport) {\n        this.loadMesh(\n          parentView,\n          scene,\n          actionMemoryClone,\n          isImport,\n          finalName\n        );\n      } else {\n        parentView\n          .getUndoManager()\n          .doIt(\n            this.getUndoAbleAction(\n              parentView,\n              scene,\n              actionMemoryClone,\n              isImport,\n              finalName\n            )\n          );\n      }\n    });\n    this.memory[\"isImport\"] = false;\n  };\n\n  getIsImport(memory) {\n    return ofNull(memory[\"isImport\"]).orSome(false);\n  }\n\n  getFinalNameFromMemory(memory, isImport) {\n    return ofNull(memory[\"nodeItemDict\"])\n      .flatMap(d => (isImport ? some(d.name) : none()))\n      .orSome(`${this.name}${Math.floor(Math.random() * 100)}`);\n  }\n\n  getUndoAbleAction(parentView, scene, actionMemory, isImport, finalName) {\n    return UndoManager.actionBuilder()\n      .doAction(() => {\n        this.loadMesh(parentView, scene, actionMemory, isImport, finalName);\n      })\n      .undoAction(() => {\n        parentView.deleteNodeFromTreeUsingName(finalName);\n      })\n      .build();\n  }\n\n  loadMesh(parentView, scene, actionMemory, isImport, finalName) {\n    MeshLoader.of(scene)\n      .load(this.key)\n      .then(this.transformMesh(parentView, scene, actionMemory, isImport))\n      .then(this.addMesh2Scene(parentView, actionMemory, isImport, finalName));\n  }\n\n  transformMesh = (parentView, scene, actionMemory, isImport) => mesh => {\n    const parentMesh = this.getParentMesh(parentView);\n    mesh.parent = parentMesh;\n    mesh.createNormals();\n    const maybeDict = ofNull(actionMemory[\"nodeItemDict\"]);\n    mesh.position = maybeDict\n      .flatMap(d => (isImport ? some(d.position) : none()))\n      .map(Vector3.FromArray)\n      .orSome(Vector3.Zero());\n    mesh.rotationQuaternion = maybeDict\n      .flatMap(d => (isImport ? some(d.quaternion) : none()))\n      .map(\n        quaternion =>\n          new Quaternion(\n            quaternion[1],\n            quaternion[2],\n            quaternion[3],\n            quaternion[0]\n          )\n      )\n      .orSome(Quaternion.Identity());\n    const material = new StandardMaterial(`Mesh${mesh.name}`, scene);\n    const color = maybeDict\n      .flatMap(d => (isImport ? some(d.color) : none()))\n      .map(Color3.FromArray)\n      .orSome(Color3.Gray());\n    material.diffuseColor = color;\n    material.emissiveColor = color;\n    mesh.material = material;\n    return mesh;\n  };\n\n  addMesh2Scene = (parentView, actionMemory, isImport, finalName) => mesh => {\n    const parentMesh = this.getParentMesh(parentView);\n    mesh.name = finalName;\n    const meshItem = new Mesh(\n      mesh,\n      this.name,\n      ofNull(actionMemory[\"nodeItemDict\"])\n        .flatMap(x => (isImport ? some(x.keyValueMap) : none()))\n        .orSome({})\n    );\n\n    parentView.addNodeItem2Tree(meshItem, parentMesh.name, !isImport);\n    parentView.renderMenus();\n  };\n\n  getParentMesh = parentView => {\n    return ofNull(this.memory[\"parentObj\"])\n      .map(parentObj => parentObj.parent)\n      .flatMap(parentName => parentView.getNodeFromTree(parentName))\n      .map(treeNode => treeNode.item.mesh)\n      .orSome(parentView.getRootNode().item.mesh);\n  };\n\n  getType = () => AddMeshAction.TYPE;\n  static TYPE = \"AddMeshAction\";\n\n  deleteAsset = () => {};\n\n  download = async () => {\n    const downloadLinks = (\n      <div style={{ display: \"flex\", flexDirection: \"column\" }}>\n        <div style={{ display: \"flex\", flexDirection: \"row\" }}>\n          <div style={{ marginRight: \"5px\" }}>Mesh:</div>\n          <a href={MeshLoader.getMeshUrl(this.key)} download>\n            {this.key}\n          </a>\n        </div>\n      </div>\n    );\n  };\n}\n\nconst ofNull = Maybe.fromNull;\nconst none = Maybe.none;\nconst some = Maybe.some;\nexport default AddMeshAction;\n","import { Maybe } from \"monet\";\nimport MouseKeysAction from \"./MouseKeysAction\";\nimport BoxRegion from \"../NodeItem/BoxRegion\";\nimport Vec3 from \"../Math/Vec3\";\nimport Util3d from \"../Util3d/Util3d\";\nimport React from \"react\";\nimport { Color3 } from \"@babylonjs/core\";\nimport { UndoManager } from \"mov-fe-lib-core\";\n\nclass BoxRegionAction extends MouseKeysAction {\n  constructor() {\n    super();\n    this.key = \"drawBoxRegion\";\n    this.name = \"Draw Box Region [3]\";\n    this.maybeMousePos = Maybe.none();\n    this.tempMesh = null;\n    this.icon = props => <i className=\"fas fa-square\" {...props} />;\n  }\n\n  action = parentView => {\n    super.action(parentView);\n    parentView.setSelectedAction(this);\n  };\n\n  onPointerDown = (evt, parentView) => {\n    if (!(evt.buttons === 1)) return;\n    parentView.getSceneMemory().forEach(memory => {\n      const scene = memory.scene;\n      const ground = memory.ground;\n      const camera = memory.camera;\n      const maybeMousePos = Util3d.getGroundPosition(scene, ground);\n      this.maybeMousePos = maybeMousePos;\n      maybeMousePos.forEach(mousePos => {\n        camera.detachControl(memory.canvas);\n      });\n    });\n  };\n\n  onPointerMove = (evt, parentView) => {\n    parentView.getSceneMemory().forEach(memory => {\n      const scene = memory.scene;\n      const ground = memory.ground;\n      const maybeCurrent = Util3d.getGroundPosition(scene, ground);\n      maybeCurrent.forEach(current => {\n        this.maybeMousePos.forEach(oldMousePos => {\n          if (this.tempMesh) this.tempMesh.dispose();\n          this.tempMesh = this.createBoxRegion(\n            [oldMousePos, current],\n            TEMP_BOX_REGION_NAME,\n            scene,\n            parentView,\n            false\n          );\n        });\n      });\n    });\n  };\n\n  onPointerUp = (evt, parentView) => {\n    parentView.getSceneMemory().forEach(memory => {\n      const scene = memory.scene;\n      const camera = memory.camera;\n      const ground = memory.ground;\n      const maybeCurrent = Util3d.getGroundPosition(scene, ground);\n      maybeCurrent.forEach(current => {\n        this.maybeMousePos.forEach(oldMousePos => {\n          if (current.subtract(oldMousePos).length() < 1e-2) return;\n          this.tempMesh.dispose();\n          const name = `BoxRegion${Math.floor(Math.random() * 1e3)}`;\n          const boxMesh = this.createBoxRegion(\n            [oldMousePos, current],\n            name,\n            scene,\n            parentView,\n            true\n          );\n          parentView.setPropertiesWithName(name);\n          parentView\n            .getUndoManager()\n            .addIt(\n              this.getUndoAbleAction(\n                [oldMousePos, current],\n                boxMesh,\n                scene,\n                parentView\n              )\n            );\n        });\n      });\n      this.maybeMousePos = Maybe.none();\n      camera.attachControl(memory.canvas, true);\n    });\n  };\n\n  getUndoAbleAction(points, mesh, scene, parentView) {\n    return UndoManager.actionBuilder()\n      .doAction(() => {\n        this.createBoxRegion(points, mesh.name, scene, parentView, true);\n      })\n      .undoAction(() => {\n        parentView.deleteNodeFromTreeUsingName(mesh.name);\n      })\n      .build();\n  }\n\n  createBoxRegion = (\n    region,\n    name,\n    scene,\n    parentView,\n    is2addInServer = true,\n    color = Color3.Red(),\n    height = 1\n  ) => {\n    const rootMesh = parentView.getRootNode().item.mesh;\n\n    const localRegion = region.map(r =>\n      Util3d.getLocalCoordFromWorld({ parent: rootMesh }, Vec3.ofBabylon(r))\n    );\n\n    localRegion[1] = localRegion[1].add(Vec3.of([0, 0, height]));\n    const middlePoint = localRegion[0].add(localRegion[1]).scale(0.5);\n    const centeredRegion = localRegion.map(r => r.sub(middlePoint));\n\n    const boxRegionItem = BoxRegion.ofDict(\n      scene,\n      {\n        name: name,\n        position: middlePoint.toArray(),\n        color: [color.r, color.g, color.b],\n        corners: centeredRegion.map(x => x.toArray())\n      },\n      parentView\n    );\n    boxRegionItem.mesh.parent = rootMesh;\n    if (is2addInServer) {\n      parentView.addNodeItem2Tree(boxRegionItem, rootMesh.name, is2addInServer);\n    }\n    return boxRegionItem.mesh;\n  };\n}\n\nconst TEMP_BOX_REGION_NAME = \"temp_box_region\";\nexport default BoxRegionAction;\n","import Util3d from \"../Util3d/Util3d\";\nimport Vec3 from \"../Math/Vec3\";\nimport { Maybe } from \"monet\";\nimport MouseKeysAction from \"./MouseKeysAction\";\nimport React from \"react\";\nimport { Vector3 } from \"@babylonjs/core\";\nimport { UndoManager } from \"mov-fe-lib-core\";\nimport Clipboard from \"../Utils/Clipboard\";\nimport { selectOneAction } from \"../Utils/Utils\";\nimport SelectionPlaceHolder from \"../Util3d/SelectionPlaceHolder\";\nimport MeshSelector from \"../MainView/MeshSelector\";\nimport Vec2 from \"../Math/Vec2\";\nimport ReactDOM from \"react-dom\";\nimport TreeObject from \"../TreeObject/TreeObject\";\nimport GlobalRef from \"../NodeItem/GlobalRef\";\nimport GraphItem from \"../NodeItem/GraphItem\";\nimport Map from \"../NodeItem/Map\";\n\nclass DragObjectsAction extends MouseKeysAction {\n  constructor() {\n    super();\n    this.key = \"dragObject\";\n    this.name = \"Grab Objects [1]\";\n    this.icon = props => <i className=\"far fa-hand-paper\" {...props}></i>;\n    this.maybeSelectedMesh = Maybe.none();\n    this.clickPointInWorld = Vec3.ZERO;\n    this.movePointInWorld = Vec3.ZERO;\n    this.startDivPos = Vec2.ZERO;\n    this.corners = [];\n  }\n\n  action = parentView => {\n    super.action(parentView);\n    parentView.setSelectedAction(this);\n  };\n\n  onPointerDown = (evt, parentView) => {\n    if (!(evt.buttons === 1 || evt.buttons === 2)) return;\n    parentView.getSceneMemory().forEach(({ scene, ground }) => {\n      this.maybeSelectedMesh = Util3d.pickMesh(scene, ground);\n      this.maybeSelectedMesh.forEach(currentMesh =>\n        this.dragDownMesh(currentMesh, parentView, evt)\n      );\n      this.maybeSelectedMesh.orLazy(() => {\n        this.dragDownWithoutMesh(parentView, evt);\n      });\n    });\n  };\n\n  onPointerMove = (evt, parentView) => {\n    if (!(evt.buttons === 1)) return;\n    parentView.getSceneMemory().forEach(({ scene, ground }) => {\n      // check that a mesh was selected\n      this.maybeSelectedMesh.forEach(selectedMesh => {\n        Util3d.getGroundPosition(scene, ground).forEach(groundPos => {\n          this.dragMoveMesh(parentView, groundPos);\n        });\n      });\n      this.maybeSelectedMesh.orLazy(() => {\n        this.dragMoveWithoutMesh(evt);\n      });\n    });\n  };\n\n  onPointerUp = (evt, parentView) => {\n    parentView.getSceneMemory().forEach(({ camera, scene, ground, canvas }) => {\n      this.maybeSelectedMesh.forEach(selectedMesh => {\n        this.dragUpMesh(selectedMesh, parentView, scene, ground);\n      });\n      this.maybeSelectedMesh.orLazy(() => {\n        this.dragUpWithoutMesh(parentView, scene);\n      });\n      // reset action\n      camera.attachControl(canvas, true);\n      this.maybeSelectedMesh = Maybe.none();\n      this.destroySelectionDiv();\n      this.corners = [];\n    });\n  };\n\n  onKeyUp = (evt, parentView) => {\n    const defaultAction = () => super.onKeyUp(evt, parentView);\n    const predicateActionList = [\n      {\n        predicate: e => [\"Backspace\", \"Delete\"].includes(e.code),\n        action: this.getDeleteButtonAction(parentView)\n      },\n      {\n        predicate: e => e.ctrlKey && e.code === \"KeyC\",\n        action: this.getCopyAction(parentView)\n      },\n      {\n        predicate: e => e.ctrlKey && e.code === \"KeyV\",\n        action: this.getPasteAction(parentView)\n      }\n    ];\n    selectOneAction(predicateActionList, defaultAction)(evt);\n  };\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                         UTILS                                        *\n   *                                                                                      */\n  //========================================================================================\n\n  dragDownMesh(currentMesh, parentView, evt) {\n    parentView.getSceneMemory().forEach(({ camera, canvas, scene, ground }) => {\n      camera.detachControl(canvas);\n      this.addSelectedMesh(evt, currentMesh, parentView);\n      this.handleMeshRightClick(evt, parentView, currentMesh);\n      Util3d.getGroundPosition(scene, ground).forEach(groundPos => {\n        this.updateMouseVars(groundPos);\n        // mesh onClick\n        currentMesh.onClick\n          ? currentMesh.onClick()\n          : parentView.closeContextDial();\n\n        if (currentMesh.isSelectionPlaceHolder) {\n          parentView.addGizmo2Mesh(\n            currentMesh,\n            () =>\n              this.notifyObservers(currentMesh, true, Vec3.ZERO, parentView),\n            () =>\n              this.notifyObservers(currentMesh, false, Vec3.ZERO, parentView)\n          );\n        } else {\n          this.selectMeshUpdateUI(parentView);\n        }\n      });\n    });\n  }\n\n  selectMeshUpdateUI(parentView) {\n    const meshSelector = MeshSelector.ofMainView(parentView);\n    const selectionPlaceHolder = SelectionPlaceHolder.ofMainView(parentView);\n    const selectedMeshes = meshSelector.meshes();\n    parentView.highlightMeshesInScene(selectedMeshes);\n    parentView.highlightNodesInTree(selectedMeshes.map(({ name }) => name));\n    if (selectedMeshes.length > 1) {\n      parentView.addGizmo2Name();\n      selectionPlaceHolder.clear();\n      selectionPlaceHolder.push(selectedMeshes);\n      this.setProperties(parentView, selectedMeshes[0].name);\n    } else {\n      selectionPlaceHolder.clear();\n      parentView.addGizmo2Name();\n      selectedMeshes.forEach(mesh => {\n        parentView.addGizmo2Name(mesh.name);\n        this.setProperties(parentView, mesh.name);\n      });\n    }\n  }\n\n  dragDownWithoutMesh(parentView, evt) {\n    parentView\n      .getMouseCoordsFromRoot()\n      .forEach(mousePosRoot =>\n        this.handleRightClickWithoutMesh(evt, parentView, mousePosRoot)\n      );\n    parentView.getSceneMemory().forEach(({ camera, canvas, scene }) => {\n      if (evt.shiftKey) {\n        camera.detachControl(canvas);\n        this.createSelectionDiv(evt);\n        this.corners.push(Vec2.of(scene.pointerX, scene.pointerY));\n      }\n    });\n  }\n\n  dragMoveMesh(parentView, groundPos) {\n    const meshSelector = MeshSelector.ofMainView(parentView);\n    const meshes = meshSelector.meshes();\n    const selector = SelectionPlaceHolder.ofMainView(parentView);\n    const newMousePosInWorld = Vec3.ofBabylon(groundPos);\n    const v = newMousePosInWorld.sub(this.movePointInWorld);\n    meshes.forEach(mesh => {\n      let vLocal = Util3d.getLocalCoordFromWorld(mesh, v, false);\n      vLocal = new Vector3(vLocal.x, vLocal.y, 0);\n      mesh.position = mesh.position.add(vLocal);\n      this.notifyObservers(mesh, false, v, parentView);\n    });\n    if (meshes.length > 1) {\n      let vLocal = Util3d.getLocalCoordFromWorld(selector.mesh, v, false);\n      vLocal = new Vector3(vLocal.x, vLocal.y, 0);\n      selector.mesh.position = selector.mesh.position.add(vLocal);\n    }\n    this.movePointInWorld = newMousePosInWorld;\n  }\n\n  dragMoveWithoutMesh(evt) {\n    this.updateSelectionDiv(evt);\n  }\n\n  dragUpMesh(selectedMesh, parentView, scene, ground) {\n    const meshSelector = MeshSelector.ofMainView(parentView);\n    const meshes = meshSelector.meshes();\n    const selectPlaceHolder = SelectionPlaceHolder.ofMainView(parentView);\n    Util3d.getGroundPosition(scene, ground).forEach(groundPos => {\n      const groundPosInWorld = Vec3.ofBabylon(groundPos);\n      const bigDisplacement = groundPosInWorld.sub(this.clickPointInWorld);\n      meshes.forEach(mesh => {\n        this.notifyObservers(mesh, true, Vec3.ZERO, parentView);\n        parentView.updateNodeInServer(mesh.name);\n      });\n      this.setProperties(parentView, selectedMesh.name);\n      if (bigDisplacement.length() > 0) {\n        parentView\n          .getUndoManager()\n          .addIt(this.getUndoAbleAction(meshes, bigDisplacement, parentView));\n      }\n      if (selectedMesh.isSelectionPlaceHolder) {\n        meshSelector.clear();\n        meshSelector.addArray(selectPlaceHolder.arrayOfMeshes);\n      }\n    });\n  }\n\n  dragUpWithoutMesh(parentView, scene) {\n    this.selectObjectsInside(scene, parentView);\n  }\n\n  handleMeshRightClick = (evt, parentView, mesh) => {\n    if (!(evt.buttons === 2)) return;\n    if (!mesh || !mesh.getMouseContextActions) return;\n    parentView.setMouseContextActions(\n      evt,\n      mesh.getMouseContextActions(parentView)\n    );\n  };\n\n  /**\n   * @param evt: event\n   * @param parentView: MainView\n   * @param mousePosFromRoot: Vector3\n   */\n  handleRightClickWithoutMesh = (evt, parentView, mousePosFromRoot) => {\n    if (!(evt.buttons === 2)) return;\n    parentView.setMouseContextActions(evt, [\n      {\n        title: \"Paste\",\n        onClick: this.getPasteOnClick(mousePosFromRoot, parentView)\n      }\n    ]);\n  };\n\n  updateMouseVars(groundPos) {\n    const groundPosInGlobal = Vec3.ofBabylon(groundPos);\n    this.movePointInWorld = groundPosInGlobal;\n    this.clickPointInWorld = groundPosInGlobal;\n  }\n\n  addSelectedMesh(evt, currentMesh, parentView) {\n    const meshSelector = MeshSelector.ofMainView(parentView);\n    // is an edge mesh\n    if (!!currentMesh.edgeIndexes) {\n      meshSelector.clear();\n      meshSelector.add(currentMesh);\n      return;\n    }\n    // not an edge mesh\n    meshSelector.filter(mesh => !mesh.edgeIndexes);\n    if (evt.shiftKey) {\n      meshSelector.add(currentMesh);\n    } else {\n      if (meshSelector.has(currentMesh)) return;\n      meshSelector.clear();\n      meshSelector.add(currentMesh);\n    }\n  }\n\n  getPasteOnClick = (mousePosFromRoot, parentView) => () => {\n    const pasteAction = Clipboard.paste();\n    if (pasteAction && typeof pasteAction === \"function\") {\n      pasteAction(mousePosFromRoot, parentView);\n    }\n  };\n\n  getDeleteButtonAction(parentView) {\n    return () => {\n      const meshSelector = MeshSelector.ofMainView(parentView);\n      const meshes = meshSelector.meshes();\n      const isOne = meshes.length === 1;\n      meshes.forEach(mesh => {\n        const maybeNode = parentView.getNodeFromTree(mesh.name);\n        maybeNode.forEach(node => parentView.onDeleteNode(node, isOne, isOne));\n        maybeNode.orElseRun(() => {\n          //TODO REFACTOR THIS;\n          if (!isOne) return;\n          const contextActions = parentView.getContextActions();\n          !!contextActions[0] && contextActions[0].action(parentView);\n        });\n      });\n      parentView.highlightNodesInTree();\n      parentView.highlightMeshesInScene();\n      parentView.addGizmo2Mesh();\n      meshSelector.clear();\n      SelectionPlaceHolder.ofMainView(parentView).clear();\n      parentView.forceUpdate();\n    };\n  }\n\n  getCopyAction(parentView) {\n    const meshSelector = MeshSelector.ofMainView(parentView);\n    const meshes = meshSelector.meshes();\n    const selectPlaceHolder = SelectionPlaceHolder.ofMainView(parentView).mesh;\n    return () => {\n      if (meshes.length <= 1) {\n        meshes\n          .filter(mesh => !!mesh.nodeItem)\n          .map(mesh => mesh.nodeItem)\n          .forEach(item => {\n            Clipboard.copy((mousePosFromRoot, someMainView) => {\n              item\n                .getCopyFunction()(mousePosFromRoot, someMainView)\n                .forEach(({ mesh: copiedMesh }) => {\n                  someMainView.addGizmo2Name(copiedMesh.name);\n                  someMainView.highlightMeshesInScene([copiedMesh]);\n                  someMainView.highlightNodesInTree([copiedMesh.name]);\n                  MeshSelector.ofMainView(someMainView).clear().add(copiedMesh);\n                });\n            });\n          });\n      } else {\n        const nodeCopyActionPairs = meshes\n          .filter(mesh => !!mesh.nodeItem)\n          .map(mesh => mesh.nodeItem)\n          .reduce((nodeActionPairs, nodeItem) => {\n            nodeActionPairs.push([nodeItem, nodeItem.getCopyFunction(false)]);\n            return nodeActionPairs;\n          }, []);\n        Clipboard.copy((mousePosFromRoot, someMainView) => {\n          const maybeCopiedItems = nodeCopyActionPairs.map(\n            ([nodeItem, copyAction]) => {\n              const displacement = Util3d.toGlobalCoord(parentView)(\n                nodeItem.mesh.absolutePosition\n              ).subtract(selectPlaceHolder.position);\n              return copyAction(\n                displacement.add(mousePosFromRoot),\n                someMainView\n              );\n            }\n          );\n          const copiedItems = maybeCopiedItems\n            .filter(maybe => maybe.isSome())\n            .map(maybe => maybe.some());\n          const copiedMeshes = copiedItems.map(({ mesh }) => mesh);\n          const copiedNames = copiedItems.map(({ name }) => name);\n          someMainView.addGizmo2Name();\n          someMainView.highlightMeshesInScene(copiedMeshes);\n          someMainView.highlightNodesInTree(copiedNames);\n          MeshSelector.ofMainView(someMainView).clear().addArray(copiedMeshes);\n          SelectionPlaceHolder.ofMainView(someMainView)\n            .clear()\n            .push(copiedMeshes);\n          someMainView.forceUpdate();\n        });\n      }\n    };\n  }\n\n  getPasteAction(parentView) {\n    return () => {\n      parentView\n        .getMouseCoordsFromRoot()\n        .forEach(mousePosRoot =>\n          this.getPasteOnClick(mousePosRoot, parentView)()\n        );\n    };\n  }\n\n  /**\n   *\n   * @param {*} mesh: Mesh\n   * @param {*} is2updateServer: Boolean\n   * @param {*} displacement: Vec3 in world coordinates\n   */\n  notifyObservers(mesh, is2updateServer, displacement, parentView) {\n    // notify  babylonjs observers\n    Maybe.fromNull(mesh.observers).forEach(obs => {\n      obs.notifyObservers({\n        updatedPointMesh: mesh,\n        is2updateServer: is2updateServer,\n        displacement: displacement.toBabylon()\n      });\n    });\n    // notify graph observers\n    Maybe.fromNull(mesh.graphVertex).forEach(({ vertexObs }) => {\n      vertexObs({\n        updatedPointMesh: mesh,\n        is2updateServer: is2updateServer,\n        displacement: displacement.toBabylon()\n      });\n    });\n    if (parentView.getNodeFromTree(mesh.name).isSome()) {\n      mesh._children\n        .filter(\n          m =>\n            (!!m.observers || !!m.graphVertex) &&\n            parentView.getNodeFromTree(m.name).isSome()\n        )\n        .forEach(m =>\n          this.notifyObservers(m, is2updateServer, displacement, parentView)\n        );\n    }\n  }\n\n  setProperties = (parentView, name) => parentView.setPropertiesWithName(name);\n\n  /**\n   *\n   * @param {*} selectedMeshes: Array<Mesh>\n   * @param {*} displacement: Vec3 in world coordinates\n   * @param {*} parentView: MainView\n   */\n  getUndoAbleAction(selectedMeshes, displacement, parentView) {\n    return UndoManager.actionBuilder()\n      .doAction(() => {\n        selectedMeshes.forEach(mesh => {\n          const localDisplacement = Util3d.getLocalCoordFromWorld(\n            mesh,\n            displacement,\n            false\n          );\n          const newPos = Vec3.ofBabylon(mesh.position).add(localDisplacement);\n          mesh.position = newPos.toBabylon();\n          this.notifyObservers(mesh, true, displacement, parentView);\n          parentView.updateNodeInServer(mesh.name);\n        });\n      })\n      .undoAction(() => {\n        selectedMeshes.forEach(mesh => {\n          const invertDisplacement = displacement.scale(-1);\n          const localDisplacement = Util3d.getLocalCoordFromWorld(\n            mesh,\n            invertDisplacement,\n            false\n          );\n          const newPos = Vec3.ofBabylon(mesh.position).add(localDisplacement);\n          mesh.position = newPos.toBabylon();\n          this.notifyObservers(mesh, true, invertDisplacement, parentView);\n          parentView.updateNodeInServer(mesh.name);\n        });\n      })\n      .build();\n  }\n\n  createSelectionDiv(e) {\n    this.startDivPos = this.findMouseInDom(e);\n    const { x, y } = this.startDivPos;\n    const outerDiv = document.createElement(\"div\");\n    outerDiv.id = ID;\n    document.body.appendChild(outerDiv);\n    ReactDOM.render(\n      <SelectDiv left={x} top={y}></SelectDiv>,\n      document.getElementById(ID)\n    );\n  }\n\n  updateSelectionDiv(e) {\n    const newMouse = this.findMouseInDom(e);\n    const oldMouse = this.startDivPos;\n    const { x: minX, y: minY } = newMouse.op(oldMouse, Math.min);\n    const { x: maxX, y: maxY } = newMouse.op(oldMouse, Math.max);\n    const outerDiv = document.getElementById(ID);\n    if (!outerDiv) return;\n    ReactDOM.render(\n      <SelectDiv\n        left={minX}\n        top={minY}\n        width={maxX - minX}\n        height={maxY - minY}\n        style={{ zIndex: 999 }}\n      ></SelectDiv>,\n      outerDiv\n    );\n  }\n\n  destroySelectionDiv() {\n    const outerDiv = document.getElementById(ID);\n    if (!outerDiv) return;\n    outerDiv.parentNode.removeChild(outerDiv);\n  }\n\n  findMouseInDom(e) {\n    const x = e.clientX; //x position within the element.\n    const y = e.clientY; //y position within the element.\n    return new Vec2(x, y);\n  }\n\n  selectObjectsInside(scene, parentView) {\n    if (this.corners.length === 0) return;\n    this.corners.push(Vec2.of(scene.pointerX, scene.pointerY));\n    const [oldMouse, newMouse] = this.corners;\n    const min = newMouse.op(oldMouse, Math.min);\n    const max = newMouse.op(oldMouse, Math.max);\n    const cornersDiv = [min, Vec2.of(max.x, min.y), max, Vec2.of(min.x, max.y)];\n    const rayCastCorners = cornersDiv.map(p => this.pickPoints(p, parentView));\n    if (rayCastCorners.some(x => x === null || x === undefined)) return;\n    const treeObj = new TreeObject(parentView.getObjectTree());\n    const insideBox = treeObj.flatten(\n      this.isItemInsideBox(rayCastCorners, parentView)\n    );\n    let insideBoxDragAbleMeshes = insideBox.map(({ item }) => item.mesh);\n    const meshSelector = MeshSelector.ofMainView(parentView);\n    meshSelector.clear();\n    if (insideBoxDragAbleMeshes.length !== 0) {\n      meshSelector.addArray(insideBoxDragAbleMeshes, false);\n    }\n    this.selectMeshUpdateUI(parentView);\n  }\n\n  /**\n   *\n   * @param {*} p: Vec2 point in canvas\n   * @param {*} parentView: MainView\n   */\n  pickPoints(p, parentView) {\n    return parentView\n      .getSceneMemory()\n      .flatMap(memory => {\n        const { scene, ground } = memory;\n        const pickInfo = scene.pick(p.x, p.y, mesh => mesh === ground);\n        if (pickInfo.hit) {\n          const floorPoint = Util3d.toGlobalCoord(parentView)(\n            pickInfo.pickedPoint\n          );\n          return Maybe.some(Vec2.of(floorPoint.x, floorPoint.y));\n        }\n        return Maybe.none();\n      })\n      .orNull();\n  }\n\n  /**\n   *\n   * @param {*} polygon: Array<Vec2>\n   * @param {*} parentView\n   */\n  isItemInsideBox(polygon, parentView) {\n    return ({ item }) => {\n      const type = item.getType();\n      if (\n        type === GlobalRef.TYPE ||\n        type === Map.TYPE ||\n        type === GraphItem.TYPE ||\n        item?.mesh?.isSelectionPlaceHolder\n      )\n        return false;\n      const { mesh } = item;\n      return this.isMeshInsideBox(polygon, parentView)(mesh);\n    };\n  }\n\n  /**\n   *\n   * @param {*} polygon: Array<Vec2>\n   * @param {*} parentView\n   */\n  isMeshInsideBox(polygon, parentView) {\n    return mesh => {\n      const p = Util3d.toGlobalCoord(parentView)(mesh.absolutePosition);\n      const planeP = new Vec2(p.x, p.y);\n      return this.isPointInsideBox(polygon)(planeP);\n    };\n  }\n\n  /**\n   *\n   * @param {*} polygon: Array<Vec2>\n   * @param {*} epsilon: Number\n   */\n  isPointInsideBox(polygon, epsilon = 1e-3) {\n    return p => {\n      let theta = 0;\n      const n = polygon.length;\n      for (let i = 0; i < n; i++) {\n        const vi = polygon[i].sub(p);\n        const vii = polygon[(i + 1) % n].sub(p);\n        theta += Math.acos(vi.dot(vii) / (vi.length() * vii.length()));\n      }\n      return Math.abs(theta - 2 * Math.PI) < epsilon;\n    };\n  }\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                     SELECTION DIV                                    *\n *                                                                                      */\n//========================================================================================\n\nconst SelectDiv = ({ left, top, width, height, style }) => {\n  return (\n    <div\n      style={{\n        position: \"absolute\",\n        top: top,\n        left: left,\n        width: width,\n        height: height,\n        borderRadius: 10,\n        border: \"solid\",\n        borderColor: \"#c7c7c7\",\n        ...style\n      }}\n    ></div>\n  );\n};\nSelectDiv.defaultProps = {\n  left: 0,\n  top: 0,\n  width: 0,\n  height: 0\n};\nconst ID = \"SELECTION_TOOL_ID\";\n//========================================================================================\n/*                                                                                      *\n *                                        EXPORT                                        *\n *                                                                                      */\n//========================================================================================\n\nexport default DragObjectsAction;\n","import MouseKeysAction from \"./MouseKeysAction\";\nimport React from \"react\";\nimport Util3d from \"../Util3d/Util3d\";\nimport { Color3 } from \"@babylonjs/core\";\nimport GraphItem from \"../NodeItem/GraphItem\";\nimport Constants from \"../Utils/Constants\";\nimport { UndoManager } from \"mov-fe-lib-core\";\nimport { selectOneAction } from \"../Utils/Utils\";\nimport Path from \"../NodeItem/Path\";\nimport { Maybe } from \"monet\";\nimport GlobalRef from \"../NodeItem/GlobalRef\";\n\nclass DrawGraphAction extends MouseKeysAction {\n  constructor() {\n    super();\n    this.key = \"drawGraph\";\n    this.name = \"Draw Graph [6]\";\n    this.icon = props => <i className=\"fas fa-project-diagram\" {...props}></i>;\n\n    this.previewMeshes = [];\n    this.firstMousePos = undefined;\n    this.firstClickedMesh = undefined;\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                            Mouse Key Action Implementation                           *\n   *                                                                                      */\n  //========================================================================================\n\n  action = parentView => {\n    super.action(parentView);\n    parentView.setSelectedAction(this);\n  };\n\n  onPointerDown = (evt, parentView) => {\n    if (!(evt.buttons === 1)) return;\n    this.mousePosConsumer(parentView)((mousePos, memory) => {\n      const { scene, ground } = memory;\n      const maybeMesh = Util3d.pickMesh(scene, ground).filter(\n        this.isConnectableMesh(parentView)\n      );\n      maybeMesh.forEach(possibleMesh => {\n        parentView.highlightMeshesInScene([possibleMesh], Color3.Green());\n        this.onPointerDownLine(mousePos, possibleMesh, memory, parentView);\n      });\n      maybeMesh.orElseRun(() => {\n        // no mesh found\n        parentView.highlightMeshesInScene();\n        this.resetPreview();\n      });\n    });\n  };\n\n  onPointerMove = (evt, parentView) => {\n    this.mousePosConsumer(parentView)((mousePos, memory) => {\n      const { scene, ground } = memory;\n      Util3d.pickMesh(scene, ground)\n        .filter(this.isConnectableMesh(parentView))\n        .cata(\n          () => parentView.highlightMeshesInScene(),\n          pickedMesh =>\n            parentView.highlightMeshesInScene([pickedMesh], Color3.Green())\n        );\n      if (!this.firstMousePos) return;\n      this.onPointerMoveLine(mousePos, memory, parentView);\n    });\n  };\n\n  onPointerUp = (evt, parentView) => {};\n\n  onKeyUp = (evt, parentView) => {\n    const escapeAction = () => this.resetPreview();\n    const predicateActionList = [\n      {\n        predicate: e => [\"Backspace\", \"Delete\", \"Escape\"].includes(e.code),\n        action: escapeAction\n      }\n    ];\n    selectOneAction(predicateActionList)(evt);\n  };\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                  Auxiliary functions                                  *\n   *                                                                                      */\n  //========================================================================================\n\n  resetPreview = () => {\n    if (!!this.firstMousePos) {\n      this.deletePreviewMeshes();\n      this.firstMousePos = undefined;\n      this.firstClickedMesh = undefined;\n    }\n  };\n\n  deletePreviewMeshes = () => {\n    this.previewMeshes.forEach(mesh => mesh.dispose());\n    this.previewMeshes = [];\n  };\n\n  mousePosConsumer = parentView => lambda => {\n    parentView.getSceneMemory().forEach(memory => {\n      const { scene, ground } = memory;\n      const maybeCurrent = Util3d.getGroundPosition(scene, ground);\n      maybeCurrent.forEach(mousePos => lambda(mousePos, memory));\n    });\n  };\n\n  /**\n   * returns a predicate(mesh => boolean) that tells if a mesh is connectable by an edge\n   * @param {*} parentView\n   */\n  isConnectableMesh = parentView => mesh => {\n    return parentView\n      .getNodeFromTree(mesh.name)\n      .cata(\n        () => {\n          // mesh is not a nodeItem, check if mesh parent is a path and is beginning or end of path\n          const parentName = mesh?.parent?.name || \"\";\n          return parentView\n            .getNodeFromTree(parentName)\n            .filter(({ item }) => item.getType() === Path.TYPE)\n            .filter(({ item }) => {\n              const index = mesh.index;\n              return index === 0 || index === item.keyPoints.length - 1;\n            });\n        },\n        ({ item }) => {\n          // mesh is a nodeItem, check if not path\n          return Maybe.some(mesh).filter(\n            _ =>\n              item.getType() !== Path.TYPE && item.getType() !== GlobalRef.TYPE\n          );\n        }\n      )\n      .orSome(false);\n  };\n\n  belongsToPath = parentView => mesh => {\n    const parentName = mesh?.parent?.name || \"\";\n    return parentView\n      .getNodeFromTree(parentName)\n      .filter(({ item }) => item.getType() === Path.TYPE)\n      .map(({ item }) => item.name);\n  };\n\n  belongs2SamePath = parentView => (meshI, meshJ) => {\n    const belongsToPath = this.belongsToPath(parentView);\n    return belongsToPath(meshI)\n      .flatMap(nameI => belongsToPath(meshJ).map(nameJ => nameI === nameJ))\n      .orSome(false);\n  };\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                       Line Edge                                      *\n   *                                                                                      */\n  //========================================================================================\n\n  onPointerDownLine = (mousePos, clickedMesh, memory, parentView) => {\n    const { scene } = memory;\n    if (!this.firstMousePos) {\n      this.firstMousePos = mousePos;\n      this.firstClickedMesh = clickedMesh;\n    } else {\n      //firstMousePos exists\n      if (\n        this.belongs2SamePath(parentView)(clickedMesh, this.firstClickedMesh)\n      ) {\n        this.resetPreview();\n      } else {\n        parentView\n          .getUndoManager()\n          .doIt(\n            this.getUndoAbleLineEdge(\n              [this.firstClickedMesh, clickedMesh],\n              scene,\n              parentView,\n              clickedMesh\n            )\n          );\n      }\n    }\n  };\n\n  getUndoAbleLineEdge = (edgeMeshes, scene, parentView) => {\n    return UndoManager.actionBuilder()\n      .doAction(() => {\n        this.createEdge(edgeMeshes, scene, parentView);\n        this.resetPreview();\n      })\n      .undoAction(() => {\n        this.deleteEdge(edgeMeshes, parentView);\n      })\n      .build();\n  };\n\n  onPointerMoveLine = (mousePos, memory, parentView) => {\n    // preview line\n    const visibility = 0.25;\n    const { scene } = memory;\n    const rootMesh = parentView.getRootNode().item.mesh;\n    const edgeEmbedding = toGlobalCoord(parentView)([\n      this.firstMousePos,\n      mousePos\n    ]);\n    this.deletePreviewMeshes();\n    this.previewMeshes = [\n      GraphItem.getEdgeMesh(\n        scene,\n        edgeEmbedding,\n        Color3.Blue(),\n        Constants.RADIUS / 4\n      )\n    ];\n    this.previewMeshes.forEach(mesh => {\n      mesh.visibility = visibility;\n      mesh.parent = rootMesh;\n      mesh.isPickable = false;\n    });\n  };\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                    Draw functions                                    *\n   *                                                                                      */\n  //========================================================================================\n\n  createEdge = (edgeMeshes, scene, parentView) => {\n    GraphItem.createGraphItemIfNone(scene, parentView);\n    parentView.getGraph().forEach(graphNode => {\n      const { item: graphItem } = graphNode;\n      graphItem.addEdge(...edgeMeshes);\n      parentView.updateNodeInServer(graphItem.name);\n    });\n  };\n\n  deleteEdge = (edgeMeshes, parentView) => {\n    parentView.getGraph().forEach(graphNode => {\n      const { item: graphItem } = graphNode;\n      graphItem.delEdge(...edgeMeshes);\n      parentView.updateNodeInServer(graphItem.name);\n    });\n  };\n}\n\nconst toGlobalCoord = Util3d.toGlobalCoord;\nexport default DrawGraphAction;\n","import Util3d from \"../Util3d/Util3d\";\nimport Vec3 from \"../Math/Vec3\";\nimport Path from \"../NodeItem/Path\";\nimport MouseKeysAction from \"./MouseKeysAction\";\nimport React from \"react\";\nimport { Color3 } from \"@babylonjs/core\";\nimport { UndoManager } from \"mov-fe-lib-core\";\nimport { selectOneAction } from \"../Utils/Utils\";\nimport GraphItem from \"../NodeItem/GraphItem\";\n\nclass DrawPathAction extends MouseKeysAction {\n  constructor() {\n    super();\n    this.key = \"drawPath\";\n    this.name = \"Draw Path [2]\";\n    this.mouseCurve = [];\n    this.icon = props => <i className=\"fas fa-bezier-curve\" {...props}></i>;\n  }\n\n  action = parentView => {\n    super.action(parentView);\n    parentView.setSelectedAction(this);\n  };\n\n  onPointerDown = (evt, parentView) => {\n    if (!(evt.buttons === 1)) return;\n    parentView.getSceneMemory().forEach(memory => {\n      const { scene, ground, camera, canvas } = memory;\n      const maybeMousePos = Util3d.getGroundPosition(scene, ground);\n      maybeMousePos.forEach(mousePos => {\n        camera.detachControl(canvas);\n        this.mouseCurve.push(mousePos);\n        parentView\n          .getUndoManager()\n          .doIt(\n            this.getUndoAbleClickAction(\n              this.mouseCurve,\n              scene,\n              parentView,\n              memory\n            )\n          );\n      });\n    });\n  };\n\n  getUndoAbleClickAction(keyPoints, scene, parentView, { camera, canvas }) {\n    const kps = [...keyPoints];\n    return UndoManager.actionBuilder()\n      .doAction(() => {\n        const finalKps = kps.length === 1 ? [kps[0], kps[0]] : kps;\n        parentView.deleteNodeFromTreeUsingName(TEMP_PATH_NAME, false, false);\n        this.createCurve(finalKps, TEMP_PATH_NAME, scene, parentView, false);\n        if (kps.length <= 2) {\n          parentView.setContextActions(\n            this.getDrawPathContextAction(camera, canvas, scene)\n          );\n        }\n        this.mouseCurve = kps;\n      })\n      .undoAction(() => {\n        parentView.deleteNodeFromTreeUsingName(TEMP_PATH_NAME);\n        const reducedKps = kps.slice(0, kps.length - 1);\n        const finalKps =\n          reducedKps.length === 1 ? [reducedKps[0], reducedKps[0]] : reducedKps;\n        reducedKps.length > 0 &&\n          this.createCurve(finalKps, TEMP_PATH_NAME, scene, parentView, false);\n        this.mouseCurve = reducedKps;\n      })\n      .build();\n  }\n\n  onPointerMove = (evt, parentView) => {\n    // empty\n  };\n\n  onPointerUp = (evt, parentView) => {\n    // empty\n  };\n\n  onKeyUp = (evt, parentView) => {\n    const defaultAction = () => super.onKeyUp(evt, parentView);\n    parentView.getSceneMemory().forEach(memory => {\n      const { scene, camera, canvas } = memory;\n      const contextActions = this.getDrawPathContextAction(\n        camera,\n        canvas,\n        scene\n      );\n      selectOneAction(\n        [\n          {\n            predicate: e => e.code === \"Enter\" || e.code === \"NumpadEnter\",\n            action: () => contextActions[1].action(parentView)\n          },\n          {\n            predicate: e => e.code === \"Delete\" || e.code === \"Backspace\",\n            action: () => contextActions[0].action(parentView)\n          },\n          {\n            predicate: e => e.code === \"Escape\",\n            action: () => {\n              if (this.mouseCurve.length === 0) {\n                super.onKeyUp(evt, parentView);\n              }\n              contextActions[0].action(parentView);\n            }\n          }\n        ],\n        defaultAction\n      )(evt);\n    });\n  };\n\n  /**\n   *\n   * @param {*} curve: Array<Vector3>\n   * @param {*} name: String\n   * @param {*} scene: Scene\n   * @param {*} parentView: MainView\n   * @param {*} is2addInServer: Boolean\n   * @param {*} color: Color3\n   */\n  createCurve = (\n    curve,\n    name,\n    scene,\n    parentView,\n    is2addInServer = true,\n    color = Color3.Gray()\n  ) => {\n    const rootMesh = parentView.getRootNode().item.mesh;\n    const localCurve = Util3d.toGlobalCoord(parentView)(curve);\n    const middlePoint = Util3d.pointAverage(localCurve);\n    const centeredCurve = localCurve.map(w => w.subtract(middlePoint));\n\n    const pathItem = Path.ofDict(\n      scene,\n      {\n        name: name,\n        position: Vec3.ofBabylon(middlePoint).toArray(),\n        color: [color.r, color.g, color.b],\n        localPath: centeredCurve.map(z => Vec3.ofBabylon(z).toArray())\n      },\n      parentView\n    );\n    pathItem.mesh.parent = rootMesh;\n    parentView.addNodeItem2Tree(\n      pathItem,\n      rootMesh.name,\n      is2addInServer,\n      true,\n      is2addInServer\n    );\n    return pathItem;\n  };\n\n  getDrawPathContextAction = (camera, canvas, scene) => {\n    const ans = [];\n    ans.push({\n      icon: props => <i className=\"fas fa-trash\" {...props}></i>,\n      action: parentView => {\n        camera.attachControl(canvas, true);\n        parentView.deleteNodeFromTreeUsingName(TEMP_PATH_NAME, false);\n        this.mouseCurve = [];\n        parentView.closeContextDial();\n      },\n      name: \"Clear Path [ESC | DEL | Backspace]\"\n    });\n    if (this.mouseCurve.length > 1) {\n      ans.push({\n        icon: props => <i className=\"fas fa-check\" {...props}></i>,\n        action: parentView => {\n          camera.attachControl(canvas, true);\n          parentView\n            .getUndoManager()\n            .doIt(\n              this.getUndoAbleEnterAction(this.mouseCurve, scene, parentView)\n            );\n        },\n        name: \"Create Path [Enter]\"\n      });\n    }\n    return ans;\n  };\n\n  getUndoAbleEnterAction(keyPoints, scene, parentView) {\n    const kps = [...keyPoints];\n    const name = `Path${Math.floor(Math.random() * 1e3)}`;\n    return UndoManager.actionBuilder()\n      .doAction(() => {\n        parentView.deleteNodeFromTreeUsingName(TEMP_PATH_NAME, false);\n        const pathItem = this.createCurve(kps, name, scene, parentView, true);\n        this.mouseCurve = [];\n        parentView.setPropertiesWithName(name);\n        parentView.closeContextDial();\n        const keyPointMeshes = pathItem.keyPoints;\n        DrawPathAction.addEdgesInKeyPoints(keyPointMeshes, scene, parentView);\n      })\n      .undoAction(() => {\n        this.deleteEdgeInKeyPoints(name, parentView);\n        parentView.deleteNodeFromTreeUsingName(name);\n        this.createCurve(kps, TEMP_PATH_NAME, scene, parentView, false);\n        this.mouseCurve = kps;\n      })\n      .build();\n  }\n\n  deleteEdgeInKeyPoints(pathName, parentView) {\n    parentView.getGraph().forEach(({ item: graph }) => {\n      parentView.getNodeFromTree(pathName).forEach(({ item: pathItem }) => {\n        const keyPointMeshes = pathItem.keyPoints;\n        const edgeMeshes = [\n          keyPointMeshes[0],\n          keyPointMeshes[keyPointMeshes.length - 1]\n        ];\n        graph.delEdge(...edgeMeshes);\n        parentView.updateNodeInServer(graph.name);\n      });\n    });\n  }\n\n  static addEdgesInKeyPoints(keyPointMeshes, scene, parentView) {\n    GraphItem.createGraphItemIfNone(scene, parentView);\n    parentView.getGraph().forEach(({ item: graph }) => {\n      const edgeMeshes = [\n        keyPointMeshes[0],\n        keyPointMeshes[keyPointMeshes.length - 1]\n      ];\n      graph.addEdge(...edgeMeshes);\n      parentView.updateNodeInServer(graph.name);\n    });\n  }\n}\n\nconst TEMP_PATH_NAME = \"temp_curve\";\nexport default DrawPathAction;\n","import Util3d from \"../Util3d/Util3d\";\nimport MouseKeysAction from \"./MouseKeysAction\";\nimport React from \"react\";\nimport { MeshBuilder } from \"@babylonjs/core\";\nimport { AdvancedDynamicTexture, TextBlock } from \"@babylonjs/gui/2D\";\nimport Vec2 from \"../Math/Vec2\";\n\nclass MeasureAction extends MouseKeysAction {\n  constructor() {\n    super();\n    this.key = \"drawWall\";\n    this.name = \"Measure [7]\";\n    this.ruler = []; // can only have to elements, start point and end point\n    this.tempMesh = null;\n    this.mesh = null;\n    this.advancedTexture = null;\n    this.text = null;\n    this.icon = props => <i className=\"fas fa-ruler\" {...props}></i>;\n  }\n\n  action = parentView => {\n    super.action(parentView);\n    parentView.setSelectedAction(this);\n  };\n\n  onPointerDown = (evt, parentView) => {\n    if (evt.button !== 0) {\n      return;\n    }\n    parentView.getSceneMemory().forEach(memory => {\n      const scene = memory.scene;\n      const ground = memory.ground;\n\n      Util3d.getGroundPosition(scene, ground).forEach(current => {\n        const currentMousePos = Util3d.toGlobalCoord(parentView)(current);\n        this.ruler.push(currentMousePos);\n        if (this.ruler.length > 2) {\n          this.mesh && this.mesh.dispose();\n          this.tempMesh && this.tempMesh.dispose();\n          this.text && this.text.dispose();\n          this.ruler = [];\n        }\n        if (this.ruler.length === 2) {\n          this.mesh = MeshBuilder.CreateLines(\n            \"ruler\",\n            {\n              points: this.ruler,\n              updatable: true\n            },\n            scene\n          );\n\n          this.addTextGUI(\n            scene,\n            this.calculateDistance(this.ruler[0], currentMousePos),\n            evt\n          );\n\n          const rootMesh = parentView.getRootNode().item.mesh;\n          this.mesh.parent = rootMesh;\n        }\n      });\n    });\n  };\n\n  onPointerMove = (evt, parentView) => {\n    parentView.getSceneMemory().forEach(memory => {\n      const scene = memory.scene;\n      const ground = memory.ground;\n\n      Util3d.getGroundPosition(scene, ground).forEach(current => {\n        const currentMousePos = Util3d.toGlobalCoord(parentView)(current);\n        // Don't add more than two point to the ruler\n        if (this.ruler.length === 1) {\n          // Remove previous element from Mesh to not overlap\n          this.tempMesh && this.tempMesh.dispose();\n\n          this.tempMesh = MeshBuilder.CreateLines(\n            \"ruler\",\n            {\n              points: [this.ruler[0], currentMousePos],\n              updatable: true\n            },\n            scene\n          );\n\n          this.addTextGUI(\n            scene,\n            this.calculateDistance(this.ruler[0], currentMousePos),\n            evt\n          );\n\n          const rootMesh = parentView.getRootNode().item.mesh;\n          this.tempMesh.parent = rootMesh;\n        }\n      });\n    });\n  };\n\n  onPointerUp = (evt, parentView) => {};\n\n  // Calculate 2D distance from starting of ruler to the end of ruler\n  calculateDistance = (start, end) => {\n    const startVec = Vec2.ofBabylon(start);\n    const endVec = Vec2.ofBabylon(end);\n    return startVec.sub(endVec).length().toFixed(3);\n  };\n\n  addTextGUI = function (scene, value, evt) {\n    this.advancedTexture && this.advancedTexture.removeControl(this.text);\n    // GUI\n    this.advancedTexture = AdvancedDynamicTexture.CreateFullscreenUI(\n      \"UI\",\n      true,\n      scene\n    );\n\n    this.text = new TextBlock();\n    this.text.text = `${value}m`;\n    this.text.fontSize = 17;\n    this.text.left = scene.pointerX - evt.target.width / 2 + 20;\n    this.text.top = scene.pointerY - evt.target.height / 2 + 20;\n    this.text.color = \"white\";\n    this.advancedTexture.addControl(this.text);\n  };\n}\n\nexport default MeasureAction;\n","import Action from \"./Action\";\n\nclass MouseKeysAction extends Action {\n  onPointerDown(evt, parentView) {\n    // to be implemented on sub classes\n  }\n\n  onPointerMove(evt, parentView) {\n    // to be implemented on sub classes\n  }\n\n  onPointerUp(evt, parentView) {\n    // to be implemented on sub classes\n  }\n\n  onKeyUp(evt, parentView) {}\n}\n\nexport default MouseKeysAction;\n","import { Maybe } from \"monet\";\nimport MouseKeysAction from \"./MouseKeysAction\";\nimport React from \"react\";\n\nclass OrbitAction extends MouseKeysAction {\n  constructor() {\n    super();\n    this.key = \"orbit\";\n    this.name = \"Orbit [ESC]\";\n    this.maybeSelectedMesh = Maybe.none();\n    this.icon = props => <i className=\"fas fa-globe\" {...props}></i>;\n  }\n\n  action = parentView => {\n    super.action(parentView);\n    parentView.setSelectedAction(this);\n  };\n\n  onPointerDown = (evt, parentView) => {};\n\n  onPointerMove = (evt, parentView) => {};\n\n  onPointerUp = (evt, parentView) => {};\n}\n\nexport default OrbitAction;\n","import MouseKeysAction from \"./MouseKeysAction\";\nimport Vec3 from \"../Math/Vec3\";\nimport Util3d from \"../Util3d/Util3d\";\nimport React from \"react\";\nimport PolygonRegion from \"../NodeItem/PolygonRegion\";\nimport { Color3 } from \"@babylonjs/core\";\nimport { UndoManager } from \"mov-fe-lib-core\";\nimport { selectOneAction } from \"../Utils/Utils\";\n\n// Similar 2 Draw Action Path\nclass PolygonRegionAction extends MouseKeysAction {\n  constructor() {\n    super();\n    this.key = \"drawPolygonRegion\";\n    this.name = \"Draw Polygon Region [5]\";\n    this.mouseCurve = [];\n    this.icon = props => <i className=\"fas fa-draw-polygon\" {...props}></i>;\n  }\n\n  action = parentView => {\n    super.action(parentView);\n    parentView.setSelectedAction(this);\n  };\n\n  onPointerDown = (evt, parentView) => {\n    if (!(evt.buttons === 1)) return;\n    parentView.getSceneMemory().forEach(memory => {\n      const scene = memory.scene;\n      const ground = memory.ground;\n      const camera = memory.camera;\n      const maybeMousePos = Util3d.getGroundPosition(scene, ground);\n      maybeMousePos.forEach(mousePos => {\n        camera.detachControl(memory.canvas);\n        this.mouseCurve.push(mousePos);\n        parentView\n          .getUndoManager()\n          .doIt(\n            this.getUndoAbleClickAction(\n              this.mouseCurve,\n              scene,\n              parentView,\n              memory\n            )\n          );\n      });\n    });\n  };\n\n  getUndoAbleClickAction(keyPoints, scene, parentView, { camera, canvas }) {\n    const kps = [...keyPoints];\n    return UndoManager.actionBuilder()\n      .doAction(() => {\n        const finalKps = kps.length === 1 ? [kps[0], kps[0]] : kps;\n        parentView.deleteNodeFromTreeUsingName(\n          TEMP_POLYGON_REGION_NAME,\n          false,\n          false\n        );\n        this.createPolygonRegion(\n          finalKps,\n          TEMP_POLYGON_REGION_NAME,\n          scene,\n          parentView,\n          false\n        );\n        parentView.setContextActions(\n          this.getDrawPolygonContextAction(camera, canvas, scene)\n        );\n        this.mouseCurve = kps;\n      })\n      .undoAction(() => {\n        parentView.deleteNodeFromTreeUsingName(TEMP_POLYGON_REGION_NAME);\n        const reducedKps = kps.slice(0, kps.length - 1);\n        const finalKps =\n          reducedKps.length === 1 ? [reducedKps[0], reducedKps[0]] : reducedKps;\n        reducedKps.length > 0 &&\n          this.createPolygonRegion(\n            finalKps,\n            TEMP_POLYGON_REGION_NAME,\n            scene,\n            parentView,\n            false\n          );\n        this.mouseCurve = reducedKps;\n      })\n      .build();\n  }\n\n  getDrawPolygonContextAction = (camera, canvas, scene) => {\n    const ans = [];\n    ans.push({\n      icon: props => <i className=\"fas fa-trash\" {...props}></i>,\n      action: parentView => {\n        camera.attachControl(canvas, true);\n        parentView.deleteNodeFromTreeUsingName(TEMP_POLYGON_REGION_NAME, false);\n        this.mouseCurve = [];\n        parentView.closeContextDial();\n      },\n      name: \"Clear Polygon [ESC | DEL | Backspace]\"\n    });\n    if (this.mouseCurve.length > 2) {\n      ans.push({\n        icon: props => <i className=\"fas fa-check\" {...props}></i>,\n        action: parentView => {\n          camera.attachControl(canvas, true);\n          parentView\n            .getUndoManager()\n            .doIt(\n              this.getUndoAbleEnterAction(this.mouseCurve, scene, parentView)\n            );\n        },\n        name: \"Create Polygon [Enter]\"\n      });\n    }\n    return ans;\n  };\n\n  getUndoAbleEnterAction(keyPoints, scene, parentView) {\n    const kps = [...keyPoints];\n    const name = `PolygonRegion${Math.floor(Math.random() * 1e3)}`;\n    return UndoManager.actionBuilder()\n      .doAction(() => {\n        parentView.deleteNodeFromTreeUsingName(TEMP_POLYGON_REGION_NAME, false);\n        this.createPolygonRegion(kps, name, scene, parentView, true);\n        this.mouseCurve = [];\n        parentView.setPropertiesWithName(name);\n        parentView.closeContextDial();\n      })\n      .undoAction(() => {\n        parentView.deleteNodeFromTreeUsingName(name);\n        this.createPolygonRegion(\n          kps,\n          TEMP_POLYGON_REGION_NAME,\n          scene,\n          parentView,\n          false\n        );\n        this.mouseCurve = kps;\n      })\n      .build();\n  }\n\n  onPointerMove = (evt, parentView) => {\n    // empty\n  };\n\n  onPointerUp = (evt, parentView) => {\n    // empty\n  };\n\n  onKeyUp = (evt, parentView) => {\n    // Warning: code duplication with PathAction\n    const defaultAction = () => super.onKeyUp(evt, parentView);\n    parentView.getSceneMemory().forEach(memory => {\n      const { scene, camera, canvas } = memory;\n      const contextActions = this.getDrawPolygonContextAction(\n        camera,\n        canvas,\n        scene\n      );\n      selectOneAction(\n        [\n          {\n            predicate: e => e.code === \"Enter\" || e.code === \"NumpadEnter\",\n            action: () => contextActions[1].action(parentView)\n          },\n          {\n            predicate: e => e.code === \"Delete\" || e.code === \"Backspace\",\n            action: () => contextActions[0].action(parentView)\n          },\n          {\n            predicate: e => e.code === \"Escape\",\n            action: () => {\n              if (this.mouseCurve.length === 0) {\n                super.onKeyUp(evt, parentView);\n              }\n              contextActions[0].action(parentView);\n            }\n          }\n        ],\n        defaultAction\n      )(evt);\n    });\n  };\n\n  createPolygonRegion = (\n    region,\n    name,\n    scene,\n    parentView,\n    is2addInServer = true,\n    color = Color3.Yellow(),\n    height = 1\n  ) => {\n    const rootMesh = parentView.getRootNode().item.mesh;\n\n    const localRegion = region.map(r =>\n      Util3d.getLocalCoordFromWorld({ parent: rootMesh }, Vec3.ofBabylon(r))\n    );\n\n    const middlePoint = Util3d.pointAverageVec3(localRegion);\n    const centeredRegion = localRegion.map(r => r.sub(middlePoint));\n\n    const polygonRegionItem = PolygonRegion.ofDict(\n      scene,\n      {\n        name: name,\n        position: middlePoint.toArray(),\n        color: [color.r, color.g, color.b],\n        localPolygon: centeredRegion.map(x => x.toArray()),\n        height: height\n      },\n      parentView\n    );\n\n    polygonRegionItem.mesh.parent = rootMesh;\n\n    parentView.addNodeItem2Tree(\n      polygonRegionItem,\n      rootMesh.name,\n      is2addInServer,\n      true,\n      is2addInServer\n    );\n  };\n}\n\nconst TEMP_POLYGON_REGION_NAME = \"temp_polygon_region\";\nexport default PolygonRegionAction;\n","import Robot from \"../NodeItem/Robot\";\nimport Action from \"./Action\";\nimport { Maybe } from \"monet\";\nimport React from \"react\";\nimport PointCloud from \"../NodeItem/PointCloud\";\nimport { ACTIONS } from \"../MainView/MainViewActions\";\nimport MeshLoader from \"../Utils/MeshLoader\";\nimport { UndoManager } from \"mov-fe-lib-core\";\n\nclass RobotAction extends Action {\n  constructor(\n    robot,\n    robotAnimatorFactory = (robot, parentView) =>\n      Robot.getDefaultAnimator(parentView)\n  ) {\n    super();\n    this.key = `robotAction${robot.name}`;\n    this.name = robot.name;\n    this.robot = robot;\n    this.robotAnimatorFactory = robotAnimatorFactory;\n    this.icon = props => <i className=\"fas fa-robot\" {...props}></i>;\n  }\n\n  action = parentView => {\n    super.action(parentView);\n    // if robot already exists, do nothing\n    parentView\n      .getNodeFromTree(this.robot.name)\n      .orElseRun(() => this.addRobot(parentView));\n    parentView.setSelectedAction(ACTIONS().dragObjects);\n  };\n\n  addRobot(parentView) {\n    parentView.getSceneMemory().forEach(memory => {\n      const { scene } = memory;\n      const actionMemoryClone = { ...this.memory };\n      const isImport = actionMemoryClone[\"isImport\"];\n      if (isImport) this.loadRobot(scene, parentView, actionMemoryClone);\n      else {\n        parentView\n          .getUndoManager()\n          .doIt(this.getUndoAbleAction(parentView, scene, actionMemoryClone));\n      }\n    });\n    this.memory[\"isImport\"] = false;\n  }\n\n  getUndoAbleAction(parentView, scene, actionMemoryClone) {\n    return UndoManager.actionBuilder()\n      .doAction(() => {\n        this.loadRobot(scene, parentView, actionMemoryClone);\n      })\n      .undoAction(() => {\n        parentView.deleteNodeFromTreeUsingName(this.name);\n      })\n      .build();\n  }\n\n  loadRobot(scene, parentView, actionMemoryClone) {\n    MeshLoader.of(scene)\n      .load(Robot.ROBOT_MESH_NAME, mesh => Robot.transformMesh(mesh, scene))\n      .then(mesh =>\n        this.createRobotFromMesh(mesh, scene, parentView, actionMemoryClone)\n      );\n  }\n\n  createRobotFromMesh(mesh, scene, parentView, memory) {\n    const parentMesh = this.getParentMesh(parentView);\n    const isImport = Maybe.fromNull(memory.isImport).orSome(false);\n    const isVisible = Maybe.fromNull(memory.isVisible).orSome(true);\n    mesh.setEnabled(isVisible);\n\n    const robot = this.getRobot(scene, mesh, parentMesh);\n    robot.animate(this.robotAnimatorFactory(robot, parentView));\n    parentView.addNodeItem2Tree(robot, parentMesh.name, !isImport, isVisible);\n\n    const cloudPoint = this.getCloudPoint(scene, parentView, robot);\n    parentView.addNodeItem2Tree(cloudPoint, robot.name, false, isVisible);\n  }\n\n  getRobot = (scene, mesh, parentMesh) => {\n    const meshTree = Robot.createRobotMeshTree(\n      this.robot.robotTree,\n      mesh,\n      scene\n    );\n    const dict = Maybe.fromNull(this.memory[\"nodeItemDict\"]);\n    return Robot.builder()\n      .id(this.robot.id)\n      .name(Maybe.fromNull(this.memory[\"name\"]).orSome(this.robot.name))\n      .assetName(\n        Maybe.fromNull(this.memory[\"assetName\"]).orSome(this.robot.name)\n      )\n      .meshTree(meshTree)\n      .parentMesh(parentMesh)\n      .scene(scene)\n      .keyValueMap(dict.map(x => x.keyValueMap).orSome({}))\n      .build();\n  };\n\n  getCloudPoint = (scene, parentView, robot) => {\n    const cloudPoint = PointCloud.ofDict(\n      scene,\n      { name: this.robot.name, id: this.robot.id },\n      parentView\n    );\n    cloudPoint.mesh.parent = robot.mesh;\n    return cloudPoint;\n  };\n\n  getParentMesh = parentView => {\n    return Maybe.fromNull(this.memory[\"parentObj\"])\n      .map(parentObj => parentObj.parent)\n      .flatMap(parentName => parentView.getNodeFromTree(parentName))\n      .map(treeNode => treeNode.item.mesh)\n      .orSome(parentView.getRootNode().item.mesh);\n  };\n\n  getType = () => RobotAction.TYPE;\n\n  static TYPE = \"RobotAction\";\n}\n\nexport default RobotAction;\n","import { Maybe } from \"monet\";\nimport { ASSETS_TYPES, AssetsTypesFactory } from \"../Utils/AssetsTypesFactory\";\nimport { MasterDB } from \"mov-fe-lib-core\";\nimport MapLoader from \"./MapLoader\";\n\n/**\n *  Graphic Assets Manager, retrieves and manages the assets that are in DB.\n */\nclass AssetsManager {\n  constructor() {\n    if (instance) return instance;\n    instance = this;\n    this.assets = {};\n    this.assetsActionMap = {};\n    this.robots = {};\n    this.observersBySceneId = {};\n    this.afterLoad = [];\n    this.finishInitialSubscribers = 0;\n    this.isLoading = true;\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                  Getters and Setters                                 *\n   *                                                                                      */\n  //========================================================================================\n\n  getAssets = () => this.assets;\n\n  getAssetsActionMap = () => this.assetsActionMap;\n\n  load = async () => {\n    await this.retrieveAssetsFromDb();\n    return this;\n  };\n\n  addAfterLoad(afterLoad) {\n    this.afterLoad.push(afterLoad);\n    return this;\n  }\n\n  addObserver(scene, observer) {\n    const sceneId = scene._uid;\n    if (!(sceneId in this.observersBySceneId)) {\n      this.observersBySceneId[sceneId] = [];\n    }\n    this.observersBySceneId[sceneId].push(observer);\n    return this;\n  }\n\n  signalObservers = () => {\n    Object.keys(this.observersBySceneId).forEach(k => {\n      this.observersBySceneId[k].forEach(obs => obs(this));\n    });\n  };\n\n  addAsset(assetKey, asset) {\n    try {\n      this.assets[assetKey] = asset;\n      this.assetsActionMap[assetKey] = AssetsTypesFactory[asset.type](asset);\n      if (!this.isLoading) this.signalObservers();\n    } catch (e) {\n      console.log(\"Caught exception while adding asset\", e);\n      throw Error(`Caught exception while adding asset ${e}`);\n    }\n  }\n\n  delAsset(assetKey) {\n    if (assetKey in this.assets) delete this.assets[assetKey];\n    if (assetKey in this.assetsActionMap) delete this.assetsActionMap[assetKey];\n    this.signalObservers();\n  }\n\n  clearObserver(scene) {\n    const sceneId = scene._uid;\n    if (sceneId in this.observersBySceneId) {\n      console.log(\"Clear asset observer\", sceneId);\n      delete this.observersBySceneId[sceneId];\n    }\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                      Subscribers                                     *\n   *                                                                                      */\n  //========================================================================================\n\n  subs = [\n    resolve =>\n      MasterDB.subscribe(\n        {\n          Scope: \"Robot\",\n          Name: \"*\",\n          RobotName: \"*\"\n        },\n        this.getRobotNameUpdate(),\n        this.getRobotNameSub(\n          ({ value }) => value,\n          () => this.finishSub(\"RobotName\", resolve)\n        )\n      ),\n    resolve =>\n      MasterDB.subscribe(\n        {\n          Scope: \"Package\",\n          File: \"*\",\n          Name: \"maps\",\n          FileLabel: \"*\"\n        },\n        this.getMapUpdater(({ key }) => key),\n        this.getMapSubscriber(\n          ({ value }) => value,\n          () => this.finishSub(\"Maps\", resolve)\n        )\n      ),\n    resolve =>\n      MasterDB.subscribe(\n        { Scope: \"Package\", File: \"*\", Name: \"meshes\", FileLabel: \"*\" },\n        this.getMeshUpdater(),\n        this.getMeshSubscriber(\n          ({ value }) => value,\n          () => this.finishSub(\"Meshes\", resolve)\n        )\n      )\n  ];\n\n  retrieveAssetsFromDb() {\n    return new Promise((re, rej) => {\n      this.subs.forEach(f => f(re));\n    });\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                         Utils                                        *\n   *                                                                                      */\n  //========================================================================================\n\n  finishSub = (place, resolve) => {\n    console.log(\"FINISH SUB \", place, this.finishInitialSubscribers);\n    if (++this.finishInitialSubscribers > this.subs.length - 1) {\n      this.afterLoad.forEach(f => f(this));\n      this.afterLoad = [];\n      this.isLoading = false;\n      resolve(true);\n    }\n  };\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                        Robots                                        *\n   *                                                                                      */\n  //========================================================================================\n\n  deleteRobot = id => {\n    this.delAsset(this.robots[id].name);\n    if (id in this.robots) delete this.robots[id];\n  };\n\n  addRobot(id, name = null) {\n    if (!(id in this.robots)) {\n      this.robots[id] = {\n        id: id,\n        name: null\n      };\n    }\n    ofNull(name).forEach(name => (this.robots[id].name = name));\n    if (Object.values(this.robots[id]).every(x => x !== null)) {\n      const localRobot = this.robots[id];\n      this.addAsset(localRobot.name, {\n        name: localRobot.name,\n        id: id,\n        type: ASSETS_TYPES.Robot,\n        robotTree: {\n          name: localRobot.name,\n          position: { x: 0, y: 0, z: 0 },\n          orientation: {\n            w: 1,\n            x: 0,\n            y: 0,\n            z: 0\n          },\n          child: []\n        }\n      });\n    }\n  }\n\n  getRobotNameSub(getter, after = () => {}) {\n    return data => {\n      ofNull(getter(data))\n        .flatMap(maybeGet(\"Robot\"))\n        .forEach(r =>\n          Object.keys(r).forEach(id => this.addRobot(id, r[id].RobotName))\n        );\n      after();\n    };\n  }\n\n  getRobotNameUpdate() {\n    const actionMap = {\n      del: data =>\n        ofNull(data.key)\n          .flatMap(maybeGet(\"Robot\"))\n          .forEach(r => Object.keys(r).forEach(this.deleteRobot)),\n      set: this.getRobotNameSub(({ key }) => key)\n    };\n    return data => {\n      console.log(\"Robot NAME UPDATE\", data);\n      actionMap[data.event](data);\n    };\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                         Maps                                         *\n   *                                                                                      */\n  //========================================================================================\n\n  getMapSubscriber = (dataGetter, after = () => {}) => {\n    return data =>\n      this.getMapFileData(dataGetter, data).forEach(fileName => {\n        Object.keys(fileName)\n          .filter(f => f.includes(\".yaml\"))\n          .forEach(this.addMap);\n        after();\n      });\n  };\n\n  getMapUpdater = dataGetter => {\n    const actionMap = {\n      del: data => {\n        this.getMapFileData(dataGetter, data).forEach(f => {\n          let filename = Object.keys(f)[0];\n          filename = filename.split(\".\")[0];\n          this.delAsset(filename);\n        });\n      },\n      set: this.getMapSubscriber(dataGetter),\n      subscribe: this.getMapSubscriber(dataGetter)\n    };\n    return data => {\n      console.log(\"MAP UPDATE\", data);\n      actionMap[data.event](data);\n    };\n  };\n\n  addMap = yamlSrc => {\n    const map = {\n      name: yamlSrc.split(\".\")[0],\n      loader: new MapLoader(yamlSrc),\n      type: ASSETS_TYPES.Map\n    };\n    this.addAsset(map.name, map);\n  };\n\n  getMapFileData = (dataGetter, data) =>\n    ofNull(dataGetter(data))\n      .flatMap(maybeGet(\"Package\"))\n      .flatMap(maybeGet(\"maps\"))\n      .flatMap(maybeGet(\"File\"));\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                         Mesh                                         *\n   *                                                                                      */\n  //========================================================================================\n\n  getMeshSubscriber = (dataGetter, after = () => {}) => data => {\n    this.getMeshFileData(dataGetter, data).forEach(d =>\n      Object.keys(d).forEach(id => {\n        const mesh = { id: id, name: d[id].FileLabel, type: ASSETS_TYPES.Mesh };\n        this.addAsset(mesh.name, mesh);\n      })\n    );\n    after();\n  };\n\n  getMeshUpdater = () => {\n    const actionMap = {\n      del: data => {\n        this.getMeshFileData(d => d.key, data).forEach(f => {\n          let filename = Object.keys(f)[0];\n          this.delAsset(filename);\n        });\n      },\n      set: this.getMeshSubscriber(d => d.key),\n      subscribe: this.getMeshSubscriber(d => d.key)\n    };\n    return data => actionMap[data.event](data);\n  };\n\n  getMeshFileData = (dataGetter, data) =>\n    ofNull(dataGetter(data))\n      .flatMap(maybeGet(\"Package\"))\n      .flatMap(maybeGet(\"meshes\"))\n      .flatMap(maybeGet(\"File\"));\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                        static                                        *\n   *                                                                                      */\n  //========================================================================================\n\n  static getInstance() {\n    return new AssetsManager();\n  }\n}\n\n// private variable\nlet instance = null;\n\n// auxiliary functions\nconst ofNull = Maybe.fromNull;\nconst get = prop => obj => obj[prop];\nconst dot = f => g => x => f(g(x));\nconst maybeGet = prop => dot(ofNull)(get(prop));\n\nexport default AssetsManager;\n","export default class MapLoader {\n  constructor(yamlSrc) {\n    this.yamlSrc = yamlSrc;\n    this.cachedMap = null;\n  }\n\n  async load() {\n    if (this.cachedMap) return this.cachedMap;\n    const response = await fetch(MapLoader.getMapUrl(this.yamlSrc));\n    const map = await this.parseYaml(await response.text());\n    const ans = {\n      textureSrc: map.image,\n      resolution: map.resolution,\n      origin: map.origin,\n      imageSize: map.size\n    };\n    this.cachedMap = ans;\n    return ans;\n  }\n\n  async parseYaml(yamlTxt) {\n    const ans = {};\n    const actionDict = {\n      image: (k, v) => (ans[k] = MapLoader.getMapUrl(v)),\n      resolution: (k, v) => (ans[k] = Number.parseFloat(v)),\n      origin: (k, v) => (ans[k] = JSON.parse(v))\n    };\n    console.log(\"Yaml text\", yamlTxt);\n    yamlTxt\n      .split(\"\\n\")\n      .map(s => s.split(\": \"))\n      .filter(split => split.length >= 2)\n      .filter(split => split[0] in actionDict)\n      .forEach(split => actionDict[split[0]](split[0], split[1]));\n    ans[\"size\"] = await this.getImageSize(ans[\"image\"]);\n    return ans;\n  }\n\n  getImageSize(src) {\n    return new Promise((resolve, reject) => {\n      const img = new Image();\n      img.src = src;\n      img.onload = () => resolve([img.naturalWidth, img.naturalHeight]);\n    });\n  }\n  static getMapUrl = src => `/static/maps/${src}`;\n}\n","//========================================================================================\n/*                                                                                      *\n *         Based from https://doc.babylonjs.com/resources/babylonjs_and_reactjs         *\n *                                                                                      */\n//========================================================================================\n\nimport { Engine, Scene } from \"@babylonjs/core\";\nimport React, { useEffect, useRef, useState } from \"react\";\nimport ReactResizeDetector from \"react-resize-detector\";\nimport PropTypes from \"prop-types\";\nconst FLEX_STYLE = {\n  display: \"flex\",\n  flexDirection: \"column\",\n  flexGrow: 1\n};\n// import EngineSingleton from \"../Util3d/EngineSingleton\";\n\nconst BaseViewer = props => {\n  const {\n    antialias,\n    engineOptions,\n    adaptToDeviceRatio,\n    sceneOptions,\n    onRender,\n    onSceneReady,\n    is2render,\n    sceneFactory,\n    ...rest\n  } = props;\n  const reactCanvas = useRef(null);\n  const [loaded, setLoaded] = useState(false);\n  const [scene, setScene] = useState(null);\n  const [size, setSize] = useState({ width: 100, height: 100 });\n\n  const setUpScene = engine => {\n    const scene = sceneFactory\n      ? sceneFactory(engine)\n      : new Scene(engine, sceneOptions);\n    setScene(scene);\n    if (scene.isReady()) {\n      onSceneReady(scene);\n    } else {\n      scene.onReadyObservable.addOnce(scene => onSceneReady(scene));\n    }\n    return scene;\n  };\n\n  const onResize = (width, height) => {\n    setSize({\n      width,\n      height\n    });\n    scene && scene.getEngine().resize();\n  };\n\n  const renderScene = (engine, nScene) => {\n    if (!is2render) return;\n    engine.runRenderLoop(() => {\n      if (typeof onRender === \"function\") {\n        onRender(nScene);\n      }\n      nScene && nScene.render();\n    });\n  };\n\n  /* eslint-disable react-hooks/exhaustive-deps */\n  useEffect(() => {\n    if (!loaded) {\n      setLoaded(true);\n      const engine = new Engine(\n        reactCanvas.current,\n        antialias,\n        engineOptions,\n        adaptToDeviceRatio\n      );\n      // const engine = new EngineSingleton(reactCanvas.current).engine;\n      const newScene = setUpScene(engine);\n      renderScene(engine, newScene);\n    }\n\n    return () => {\n      console.log(\"Disposing engine and scene\");\n      scene && scene.dispose();\n      scene && scene.getEngine() && scene.getEngine().dispose();\n    };\n  }, [reactCanvas, loaded, scene]);\n  /* eslint-enable react-hooks/exhaustive-deps */\n  // loaded && reactCanvas.current.focus();\n\n  return (\n    <div style={{ ...FLEX_STYLE, maxHeight: \"100%\" }}>\n      <canvas\n        ref={reactCanvas}\n        width={size.width}\n        height={size.height}\n        {...rest}\n      />\n      <ReactResizeDetector handleWidth handleHeight onResize={onResize} />\n    </div>\n  );\n};\n\nBaseViewer.propTypes = {\n  antialias: PropTypes.bool,\n  engineOptions: PropTypes.object,\n  adaptToDeviceRatio: PropTypes.bool,\n  sceneOptions: PropTypes.object,\n  onSceneReady: PropTypes.func,\n  onRender: PropTypes.func,\n  is2render: PropTypes.bool,\n  sceneFactory: PropTypes.func\n};\n\nBaseViewer.defaultProps = {\n  antialias: true,\n  onSceneReady: scene => {},\n  is2render: true,\n  engineOptions: { preserveDrawingBuffer: true, stencil: true }\n};\n\nexport default BaseViewer;\n","import { Maybe } from \"monet\";\n\n/**\n * Undirected Graph data structure\n */\nclass Graph {\n  #adjMap = {};\n  #vertices = {};\n  #edges = {};\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                      Public API                                      *\n   *                                                                                      */\n  //========================================================================================\n\n  addVertex(i) {\n    if (!(i in this.#vertices)) {\n      this.#vertices[i] = {};\n      this.#adjMap[i] = {};\n    }\n  }\n\n  delVertex(i) {\n    if (i in this.#vertices) {\n      delete this.#vertices[i];\n      // delete neighbors edge properties\n      Object.keys(this.#adjMap[i]).forEach(j => {\n        delete this.#edges[Graph.edgeKey(i, j)];\n        delete this.#edges[Graph.edgeKey(j, i)];\n      });\n      delete this.#adjMap[i];\n      Object.keys(this.#adjMap).forEach(j => {\n        if (i in this.#adjMap[j]) {\n          delete this.#adjMap[j][i];\n        }\n      });\n    }\n  }\n\n  /**\n   *\n   * If edge already exists, this function overwrites previous edge\n   *\n   * @param {*} i: vertex id\n   * @param {*} j: vertex id\n   */\n  addEdge(i, j) {\n    this.addVertex(i);\n    this.addVertex(j);\n    const edgeProps = {};\n    this.#edges[Graph.edgeKey(i, j)] = edgeProps;\n    this.#edges[Graph.edgeKey(j, i)] = edgeProps;\n    this.#adjMap[i][j] = true;\n    this.#adjMap[j][i] = true;\n    return this;\n  }\n\n  delEdge(i, j) {\n    const ijKey = Graph.edgeKey(i, j);\n    const jiKey = Graph.edgeKey(j, i);\n    if (ijKey in this.#edges || jiKey in this.#edges) {\n      delete this.#edges[ijKey];\n      delete this.#edges[jiKey];\n      delete this.#adjMap[i][j];\n      delete this.#adjMap[j][i];\n    }\n    // remove vertex if have no neighbors\n    [i, j].forEach(id => {\n      const neighbors = this.getNeighbors(id);\n      if (neighbors.length === 0) {\n        this.delVertex(id);\n      }\n    });\n  }\n\n  hasEdge(i, j) {\n    return this.getEdge(i, j).isSome();\n  }\n\n  getNeighbors(i) {\n    if (i in this.#adjMap) return Object.keys(this.#adjMap[i]);\n    return [];\n  }\n\n  getEdge(i, j) {\n    const edgeKey = Graph.edgeKey(i, j);\n    if (edgeKey in this.#edges) {\n      return Maybe.some(this.#edges[edgeKey]);\n    }\n    return Maybe.none();\n  }\n\n  getVertex(i) {\n    if (i in this.#vertices) {\n      return Maybe.some(this.#vertices[i]);\n    }\n    return Maybe.none();\n  }\n\n  getEdges() {\n    return this.#edges;\n  }\n\n  getVertices() {\n    return this.#vertices;\n  }\n\n  getAdjMap() {\n    return this.#adjMap;\n  }\n\n  static edgeKey = (i, j) => `${i}_${j}`;\n  static key2Edge = key => key.split(\"_\");\n}\n\nexport default Graph;\n","import DragObjectsAction from \"../Actions/DragObjectsAction\";\nimport AddKeyPointAction from \"../Actions/AddKeyPointAction\";\nimport BoxRegionAction from \"../Actions/BoxRegionAction\";\nimport DrawPathAction from \"../Actions/DrawPathAction\";\nimport PolygonRegionAction from \"../Actions/PolygonRegionAction\";\nimport OrbitAction from \"../Actions/OrbitAction\";\nimport DrawGraphAction from \"../Actions/DrawGraphAction\";\nimport MeasureAction from \"../Actions/MeasureAction\";\n// import RobotAction from \"../Actions/RobotAction\";\n// import DrawWallAction from \"../Actions/DrawWallAction\";\n\n/**\n * Order Matters\n */\nexport const ACTIONS = () => ({\n  measure: new MeasureAction(),\n  drawGraph: new DrawGraphAction(),\n  drawRegion: new PolygonRegionAction(),\n  addKeyPoint: new AddKeyPointAction(),\n  drawBoxRegion: new BoxRegionAction(),\n  drawPath: new DrawPathAction(),\n  dragObjects: new DragObjectsAction(),\n  orbit: new OrbitAction()\n  // drawWalls: new DrawWallAction()\n  // addRobot: new RobotAction({\n  //   id: \"Test\",\n  //   name: \"Test\",\n  //   robotTree: {\n  //     name: \"Test\",\n  //     position: { x: 0, y: 0, z: 0 },\n  //     orientation: {\n  //       w: 1,\n  //       x: 0,\n  //       y: 0,\n  //       z: 0\n  //     },\n  //     child: [\n  //       {\n  //         name: \"TestTF\",\n  //         position: { x: 1, y: 0, z: 1 },\n  //         orientation: {\n  //           w: Math.cos(-Math.PI / 4),\n  //           x: 0,\n  //           y: Math.sin(-Math.PI / 4),\n  //           z: 0\n  //         },\n  //         child: []\n  //       }\n  //     ]\n  //   }\n  // })\n});\n","import GlobalRef from \"../NodeItem/GlobalRef\";\nimport { Maybe } from \"monet\";\nimport { ASSETS_TYPES } from \"../Utils/AssetsTypesFactory\";\nimport NODE_ITEM_FACTORY_MAP from \"./NodeItemFactoryMap\";\n\nclass MainViewRetriever {\n  static importScene(\n    mainView,\n    serverScene = [],\n    parent = null,\n    is2addInServer = false\n  ) {\n    console.log(\"Importing scene...\", mainView, serverScene);\n    const errors = [];\n    if (serverScene.length > 0) {\n      importSceneRecursive(\n        mainView,\n        serverScene,\n        parent,\n        errors,\n        is2addInServer\n      );\n    } else {\n      importDefaultScene(mainView);\n    }\n    console.log(\"End Importing scene\");\n    return errors;\n  }\n\n  static importNodeItem(mainView, nodeDict, parent, is2addInServer = false) {\n    const nodeItemClass = NODE_ITEM_FACTORY_MAP[nodeDict.type]; //retrieve default export\n    if (nodeItemClass) {\n      mainView.getSceneMemory().forEach(({ scene }) => {\n        const nodeItem = nodeItemClass.ofDict(scene, nodeDict, mainView);\n        // pseudo lazy migration of isVisible prop\n        const isVisible =\n          nodeDict.isVisible === undefined ? true : nodeDict.isVisible;\n        nodeItem.mesh.setEnabled(isVisible);\n        mainView.getNodeFromTree(parent).forEach(treeNode => {\n          nodeItem.mesh.parent = treeNode.item.mesh;\n        });\n        mainView.addNodeItem2Tree(\n          nodeItem,\n          parent,\n          is2addInServer,\n          isVisible,\n          false\n        );\n      });\n    }\n  }\n}\n\nfunction isAsset(nodeDict) {\n  return nodeDict.type in ASSETS_TYPES;\n}\n\nfunction importAsset(mainView, nodeDict, parent, errors) {\n  const assetType = nodeDict.type;\n  const assetName = Maybe.fromNull(nodeDict.assetName).orSome(nodeDict.name);\n  const assetActionMap = mainView.getAssetsActionMap();\n  // legacy\n  const retrievedAction = Maybe.fromNull(assetActionMap[assetName]).orLazy(\n    () => assetActionMap[assetName.split(\".\")[0]]\n  );\n  if (!retrievedAction) {\n    errors.push({\n      cause: `Asset of type ${assetType} with name ${assetName}, was not found`,\n      solution: `please upload ${assetType} ${assetName}`\n    });\n    return;\n  }\n  retrievedAction.memory[\"parentObj\"] = { parent: parent };\n  retrievedAction.memory[\"nodeItemDict\"] = nodeDict;\n  retrievedAction.memory[\"assetName\"] = assetName;\n  retrievedAction.memory[\"name\"] = nodeDict.name;\n  retrievedAction.memory[\"isImport\"] = true;\n  retrievedAction.memory[\"isVisible\"] =\n    nodeDict.isVisible === undefined ? true : nodeDict.isVisible;\n  retrievedAction.action(mainView);\n}\n\nfunction importSceneRecursive(\n  mainView,\n  arrayTree,\n  parent = null,\n  errors = [],\n  is2addInServer = false\n) {\n  if (!arrayTree) return;\n  const sortArrayTree = arrayTree.sort((a, b) => {\n    // global ref is first\n    if (a.item.type === NODE_ITEM_FACTORY_MAP.GlobalRef.TYPE) return -1;\n    if (b.item.type === NODE_ITEM_FACTORY_MAP.GlobalRef.TYPE) return 1;\n    // graphItem is last\n    if (a.item.type === NODE_ITEM_FACTORY_MAP.GraphItem.TYPE) return 1;\n    if (b.item.type === NODE_ITEM_FACTORY_MAP.GraphItem.TYPE) return -1;\n    return a.name < b.name ? -1 : a.name > b.name ? 1 : 0;\n  });\n  sortArrayTree.forEach(node => {\n    if (isAsset(node.item)) {\n      importAsset(mainView, node.item, parent, errors);\n    } else {\n      MainViewRetriever.importNodeItem(\n        mainView,\n        node.item,\n        parent,\n        is2addInServer\n      );\n    }\n    if (node.children.length > 0) {\n      importSceneRecursive(\n        mainView,\n        node.children,\n        node.name,\n        errors,\n        is2addInServer\n      );\n    }\n  });\n}\n\nfunction importDefaultScene(mainView) {\n  mainView.getSceneMemory().forEach(({ scene }) => {\n    const send2server = true;\n    mainView.addNodeItem2Tree(GlobalRef.ofDict(scene), null, send2server);\n  });\n}\n\nexport default MainViewRetriever;\n","export default class MeshSelector {\n  constructor(mainView) {\n    return mainView\n      .getSceneMemory()\n      .map(({ scene }) => {\n        const sceneId = scene._uid;\n        if (sceneId in placeHolderInstance) {\n          return placeHolderInstance[sceneId];\n        }\n        this.scene = scene;\n        this.mainView = mainView;\n        this.meshSelectionSet = new Set();\n        placeHolderInstance[sceneId] = this;\n        return this;\n      })\n      .orSome(this);\n  }\n\n  /**\n   * Add mesh 2 selected meshes\n   * @param {*} mesh\n   * @param {*} isSubtractive: if true, repeated addition of meshes will be removed from selected meshes set.\n   */\n  add(mesh, isSubtractive = true) {\n    if (this.meshSelectionSet.has(mesh)) {\n      isSubtractive && this.meshSelectionSet.delete(mesh);\n    } else {\n      this.meshSelectionSet.add(mesh);\n    }\n    return this;\n  }\n\n  addArray(meshes, isSubtractive = true) {\n    meshes.forEach(mesh => this.add(mesh, isSubtractive));\n    return this;\n  }\n\n  clear() {\n    this.meshSelectionSet = new Set();\n    return this;\n  }\n\n  meshes() {\n    return [...this.meshSelectionSet];\n  }\n\n  has(mesh) {\n    return this.meshSelectionSet.has(mesh);\n  }\n\n  filter(predicate) {\n    const filteredSet = new Set();\n    this.meshSelectionSet.forEach(mesh => {\n      if (predicate(mesh)) filteredSet.add(mesh);\n    });\n    this.meshSelectionSet = filteredSet;\n    return this;\n  }\n\n  //   forEach(lambda) {\n  //     this.meshSelectionSet.forEach(lambda);\n  //     return this;\n  //   }\n\n  static ofMainView(mainView) {\n    return new MeshSelector(mainView);\n  }\n}\n\nconst placeHolderInstance = {};\n","import GlobalRef from \"../NodeItem/GlobalRef\";\nimport Box from \"../NodeItem/Box\";\nimport KeyPoint from \"../NodeItem/KeyPoint\";\nimport Path from \"../NodeItem/Path\";\nimport Wall from \"../NodeItem/Wall\";\nimport BoxRegion from \"../NodeItem/BoxRegion\";\nimport PolygonRegion from \"../NodeItem/PolygonRegion\";\nimport GraphItem from \"../NodeItem/GraphItem\";\n\nconst NODE_ITEM_FACTORY_MAP = {\n  GlobalRef: GlobalRef,\n  Box: Box,\n  KeyPoint: KeyPoint,\n  Path: Path,\n  Wall: Wall,\n  BoxRegion: BoxRegion,\n  PolygonRegion: PolygonRegion,\n  GraphItem: GraphItem\n};\n\nexport default NODE_ITEM_FACTORY_MAP;\n","import Vec3 from \"./Vec3\";\nimport { Matrix } from \"@babylonjs/core\";\n\nclass Mat3 {\n  constructor(v1, v2, v3) {\n    const v = [v1, v2, v3];\n    for (let i = 0; i < v.length; i++) {\n      if (v[i].constructor !== Array || v[i].length < 3)\n        throw Error(\"One of the inputs is not a array\");\n    }\n    this.mat3 = v.map(x => new Vec3(x));\n  }\n\n  /**\n   * Matrix prod with  3-vector\n   * @param {*} v: 3-vector\n   *\n   * returns 3-vector\n   */\n  prodVec(v) {\n    let ans = new Vec3([0, 0, 0]);\n    for (let i = 0; i < this.mat3.length; i++) {\n      ans = ans.add(this.mat3[i].scale(v.vec3[i]));\n    }\n    return ans;\n  }\n\n  /**\n   * Matrix transpose prod with 3-vec\n   * @param {*} v : 3-vector\n   */\n  dotVec(v) {\n    const ans = [0, 0, 0];\n    for (let i = 0; i < this.mat3.length; i++) {\n      ans[i] = this.mat3[i].dot(v);\n    }\n    return new Vec3(ans);\n  }\n\n  prod(m) {\n    const u = this.prodVec(m.mat3[0]);\n    const v = this.prodVec(m.mat3[1]);\n    const w = this.prodVec(m.mat3[2]);\n    return new Mat3(u.vec3, v.vec3, w.vec3);\n  }\n\n  dot(m) {\n    const u = this.dotVec(m.mat3[0]);\n    const v = this.dotVec(m.mat3[1]);\n    const w = this.dotVec(m.mat3[2]);\n    return new Mat3(u.vec3, v.vec3, w.vec3);\n  }\n\n  map(f) {\n    const u = this.mat3[0].map(f);\n    const v = this.mat3[1].map(f);\n    const w = this.mat3[2].map(f);\n    return new Mat3(u.vec3, v.vec3, w.vec3);\n  }\n\n  equals(mat) {\n    if (mat.constructor !== this.constructor) return false;\n    return this.mat3\n      .map((v, index) => v.equals(mat.mat3[index]))\n      .reduce((e, v) => e && v, true);\n  }\n\n  static ofBabylonMatrix(babylonMat) {\n    const arrayMat = Matrix.GetAsMatrix3x3(babylonMat);\n    const u = [arrayMat[0], arrayMat[1], arrayMat[2]];\n    const v = [arrayMat[3], arrayMat[4], arrayMat[5]];\n    const w = [arrayMat[6], arrayMat[7], arrayMat[8]];\n    return new Mat3(u, v, w);\n  }\n\n  static of(v1, v2, v3) {\n    return new Mat3(v1, v2, v3);\n  }\n\n  static eye() {\n    return new Mat3([1, 0, 0], [0, 1, 0], [0, 0, 1]);\n  }\n}\n\nexport default Mat3;\n","//immutable class, not managing exceptions\nclass Vec2 {\n  constructor(x, y) {\n    this.vec = [x, y].map(z => (z ? z : 0));\n  }\n\n  get x() {\n    return this.vec[0];\n  }\n\n  get y() {\n    return this.vec[1];\n  }\n\n  toArray() {\n    return this.vec;\n  }\n\n  add(y) {\n    return this.op(y, (a, b) => a + b);\n  }\n\n  sub(y) {\n    return this.op(y, (a, b) => a - b);\n  }\n\n  mul(y) {\n    return this.op(y, (a, b) => a * b);\n  }\n\n  div(y) {\n    return this.op(y, (a, b) => a / b);\n  }\n\n  dot(y) {\n    return this.vec.reduce((acc, v, i) => acc + v * y.vec[i], 0);\n  }\n\n  prod(y) {\n    return new Vec2(this.x * y.x - this.y * y.y, this.x * y.y + this.y * y.x);\n  }\n\n  length() {\n    return Math.sqrt(this.dot(this));\n  }\n\n  normalize() {\n    return this.scale(1 / this.length());\n  }\n\n  dual() {\n    return new Vec2(-this.y, this.x);\n  }\n\n  sym() {\n    return this.scale(-1);\n  }\n\n  conj() {\n    return new Vec2(this.x, -this.y);\n  }\n\n  scale(r) {\n    return this.map(z => z * r);\n  }\n\n  map(lambda) {\n    return Vec2.fromArray(this.vec.map(lambda));\n  }\n\n  /**\n   * Returns a vec2 from the operation function bilambda\n   * @param {*} y\n   * @param {*} biLambda\n   */\n  op(y, biLambda) {\n    return Vec2.fromArray(this.vec.map((v, i) => biLambda(v, y.vec[i])));\n  }\n\n  reduce(fold, initial) {\n    return this.vec.reduce(fold, initial);\n  }\n\n  toObject() {\n    return { x: this.x, y: this.y };\n  }\n\n  toString() {\n    return `{x: ${this.x}, y:${this.y}}`;\n  }\n\n  static fromArray(array) {\n    if (array.length < 2) throw new Error(\"array must have size > 2\");\n    return new Vec2(array[0], array[1]);\n  }\n\n  static of(x, y) {\n    return new Vec2(x, y);\n  }\n\n  static ofBabylon(vector3) {\n    return new Vec2(vector3.x, vector3.y);\n  }\n\n  static ZERO = new Vec2(0, 0);\n  static e1 = new Vec2(1, 0);\n  static e2 = new Vec2(0, 1);\n}\n\nexport default Vec2;\n","import { Vector3 } from \"@babylonjs/core\";\nimport Vec2 from \"./Vec2\";\n\n/**\n * Class that describes immutable 3-vectors\n */\nclass Vec3 {\n  //no for's because performance\n  constructor(array) {\n    if (array.constructor !== Array || array.length < 3)\n      throw new Error(`${array} is not a valid 3-vector`);\n    this.vec3 = [...array];\n  }\n\n  get x() {\n    return this.vec3[0];\n  }\n\n  get y() {\n    return this.vec3[1];\n  }\n\n  get z() {\n    return this.vec3[2];\n  }\n\n  add(x) {\n    return this.op(x, (a, b) => a + b);\n  }\n\n  sub(x) {\n    return this.op(x, (a, b) => a - b);\n  }\n\n  mul(x) {\n    return this.op(x, (a, b) => a * b);\n  }\n\n  op(x, operation) {\n    const ans = [];\n    ans[0] = operation(this.vec3[0], x.vec3[0]);\n    ans[1] = operation(this.vec3[1], x.vec3[1]);\n    ans[2] = operation(this.vec3[2], x.vec3[2]);\n    return new Vec3(ans);\n  }\n\n  scale(r) {\n    return this.map(x => x * r);\n  }\n\n  dot(x) {\n    return (\n      this.vec3[0] * x.vec3[0] +\n      this.vec3[1] * x.vec3[1] +\n      this.vec3[2] * x.vec3[2]\n    );\n  }\n\n  map(f) {\n    return new Vec3(this.vec3.map(f));\n  }\n\n  length() {\n    return Math.sqrt(this.dot(this));\n  }\n\n  normalize = () => {\n    const l = this.length();\n    if (l === 0) throw new Error(\"You can't normalize a zero norm vector\");\n    return this.scale(1 / l);\n  };\n\n  toBabylon() {\n    return new Vector3(this.vec3[0], this.vec3[1], this.vec3[2]);\n  }\n\n  toArray() {\n    return this.vec3;\n  }\n\n  toVec2() {\n    return new Vec2(this.x, this.y);\n  }\n\n  equals(v) {\n    if (v.constructor !== this.constructor) return false;\n    return v.vec3\n      .map((x, index) => v.vec3[index] === x)\n      .reduce((e, v) => e && v, true);\n  }\n\n  reduce(binary, initialValue) {\n    return this.vec3.reduce(binary, initialValue);\n  }\n\n  getMax() {\n    return this.reduce((a, b) => Math.max(a, b), -Number.MAX_VALUE);\n  }\n\n  getMin() {\n    return this.reduce((a, b) => Math.min(a, b), Number.MAX_VALUE);\n  }\n\n  someNaNOrInfinite() {\n    return this.vec3.some(x => isNaN(x) || !isFinite(x));\n  }\n\n  static ofBabylon(babylon) {\n    return new Vec3([babylon.x, babylon.y, babylon.z]);\n  }\n\n  static of(array) {\n    return array ? new Vec3(array) : new Vec3([0, 0, 0]);\n  }\n\n  static fromArray(array) {\n    return Vec3.of(array);\n  }\n\n  static random() {\n    return new Vec3([1, 2, 3].map(Math.random()));\n  }\n\n  /**\n   *\n   * @param {*} u: Vec3\n   */\n  static orthogonalBasisFromVector(u) {\n    const identityMatrix = [Vec3.e1, Vec3.e2, Vec3.e3];\n    //choose pivot\n    let pivot = 0;\n    for (let i = 0; i < 3; i++) {\n      if (u.vec3[i] !== 0) {\n        pivot = i;\n        break;\n      }\n    }\n    let v = identityMatrix[(pivot + 1) % 3].add(\n      identityMatrix[pivot].scale(-u.vec3[(pivot + 1) % 3] / u.vec3[pivot])\n    );\n    v = v.normalize();\n    let w = identityMatrix[(pivot + 2) % 3].add(\n      identityMatrix[pivot].scale(-u.vec3[(pivot + 2) % 3] / u.vec3[pivot])\n    );\n    w = w.normalize();\n    w = w.sub(v.scale(v.dot(w)));\n    return { u: u.normalize(), v: v, w: w.normalize() };\n  }\n\n  static ONES = Vec3.of([1, 1, 1]);\n  static ZERO = Vec3.of([0, 0, 0]);\n  static e1 = new Vec3([1, 0, 0]);\n  static e2 = new Vec3([0, 1, 0]);\n  static e3 = new Vec3([0, 0, 1]);\n}\n\nexport default Vec3;\n","import NodeItem from \"./NodeItem\";\n\nclass AssetNodeItem extends NodeItem {\n  constructor(mesh, assetName, keyValueMap = {}) {\n    super(mesh, keyValueMap);\n    this.assetName = assetName;\n  }\n\n  toDict() {\n    const ans = super.toDict();\n    ans.assetName = this.assetName;\n    return ans;\n  }\n\n  getCopyFunction = () => {\n    return (mousePosFromRoot, someMainView) => {};\n  };\n}\n\nexport default AssetNodeItem;\n","import NodeItem from \"./NodeItem\";\nimport { Maybe } from \"monet\";\nimport Util3d from \"../Util3d/Util3d\";\nimport { Color3 } from \"@babylonjs/core\";\n\nclass Box extends NodeItem {\n  static DEFAULT_SIZE = 0.5;\n\n  constructor(mesh, size = Box.DEFAULT_SIZE, keyValueMap = {}) {\n    super(mesh, keyValueMap);\n    this.size = size;\n  }\n\n  toDict() {\n    const dict = super.toDict();\n    dict.size = this.size;\n    return dict;\n  }\n\n  ofDict(scene, dict = null, mainView = null) {\n    return Box.ofDict(scene, dict, mainView);\n  }\n\n  getType = () => Box.TYPE;\n\n  static TYPE = \"Box\";\n\n  static ofDict(scene, dict = null, mainView = null) {\n    const maybeDict = Maybe.fromNull(dict);\n    const size = maybeDict\n      .flatMap(z => Maybe.fromNull(z.size))\n      .orSome(Box.DEFAULT_SIZE);\n    const name = maybeDict\n      .flatMap(z => Maybe.fromNull(z.name))\n      .orSome(`Box${Math.floor(Math.random() * 1e3)}`);\n    const keyValueMap = maybeDict\n      .flatMap(d => Maybe.fromNull(d.keyValueMap))\n      .orUndefined();\n\n    const boxMesh = Util3d.createBox(\n      scene,\n      new Color3(Math.random(), Math.random(), Math.random()),\n      size,\n      name\n    );\n    NodeItem.mapDict2Mesh(dict, boxMesh);\n    return new Box(boxMesh, size, keyValueMap);\n  }\n}\n\nexport default Box;\n","import NodeItem from \"./NodeItem\";\nimport Util3d from \"../Util3d/Util3d\";\nimport Vec3 from \"../Math/Vec3\";\nimport { Maybe } from \"monet\";\nimport Constants from \"../Utils/Constants\";\nimport {\n  Vector3,\n  Axis,\n  Color3,\n  Observable,\n  StandardMaterial,\n  Quaternion\n} from \"@babylonjs/core\";\nimport isEqual from \"lodash.isequal\";\n\nclass BoxRegion extends NodeItem {\n  constructor(mesh, corners, keyPoints, keyValueMap = {}) {\n    super(mesh, keyValueMap);\n    this.corners = corners; // in local coordinates, in relation to center of mass\n    this.keyPoints = keyPoints;\n  }\n\n  toDict() {\n    const dict = super.toDict();\n    dict.corners = this.corners;\n    return dict;\n  }\n\n  toForm() {\n    const schema = super.toForm();\n    schema.jsonSchema.properties[\"dimensions\"] = {\n      type: \"object\",\n      title: \"Dimensions\",\n      properties: {\n        lower: {\n          type: \"object\",\n          title: \"Lower Corner\",\n          properties: {\n            x: {\n              type: \"number\",\n              title: \"x\"\n            },\n            y: {\n              type: \"number\",\n              title: \"y\"\n            }\n          }\n        },\n        size: {\n          type: \"object\",\n          title: \"Size\",\n          properties: {\n            scaleX: {\n              type: \"number\",\n              title: \"scale-X\"\n            },\n            scaleY: {\n              type: \"number\",\n              title: \"scale-Y\"\n            }\n          }\n        }\n      }\n    };\n    schema.uiSchema[\"dimensions\"] = { \"ui:widget\": \"collapse\" };\n    // global ref coordinates\n    const worldCorners = this.keyPoints\n      .map(x => Util3d.getGlobalCoordinates(x, x.position))\n      .map(x => x.toArray());\n    schema.data[\"dimensions\"] = {\n      lower: {\n        x: worldCorners[0][0],\n        y: worldCorners[0][1]\n      },\n      size: {\n        // TODO: warning, doesn't take into account possible scaling\n        scaleX: this.corners[1][0] - this.corners[0][0],\n        scaleY: this.corners[1][1] - this.corners[0][1]\n      }\n    };\n    return schema;\n  }\n\n  ofForm(form) {\n    const oldForm = this.toForm();\n    const oldDimensions = oldForm.data.dimensions;\n    if (isEqual(oldDimensions, form.dimensions)) {\n      super.ofForm(form);\n    } else {\n      this.ofFormDimensions(form);\n    }\n  }\n\n  ofDict(scene, dict = null, mainView = null) {\n    return BoxRegion.ofDict(scene, dict, mainView);\n  }\n\n  getType = () => BoxRegion.TYPE;\n\n  static TYPE = \"BoxRegion\";\n\n  ofFormDimensions(form) {\n    const newLowerPositionInWorldCoordinates = Vector3.FromArray(\n      [form.dimensions.lower.x, form.dimensions.lower.y, 0].map(\n        Number.parseFloat\n      )\n    );\n    const newLocalDimensions = [\n      form.dimensions.size.scaleX,\n      form.dimensions.size.scaleY\n    ].map(Number.parseFloat);\n    let localLowerPosition = Util3d.getLocalCoordFromGlobal(\n      this.keyPoints[0],\n      newLowerPositionInWorldCoordinates\n    ).toArray();\n    const notify = (i, update = false) =>\n      this.keyPoints[i].observers.notifyObservers({\n        updatedPointMesh: this.keyPoints[i],\n        is2updateServer: update\n      });\n\n    this.keyPoints[0].position = new Vector3(\n      localLowerPosition[0],\n      localLowerPosition[1],\n      this.keyPoints[0].position.z\n    );\n    notify(0);\n    localLowerPosition = Util3d.getLocalCoordFromGlobal(\n      this.keyPoints[0],\n      newLowerPositionInWorldCoordinates\n    ).toArray();\n    this.keyPoints[1].position = new Vector3(\n      localLowerPosition[0] + newLocalDimensions[0],\n      localLowerPosition[1] + newLocalDimensions[1],\n      this.keyPoints[1].position.z\n    );\n    notify(1);\n  }\n\n  static ofDict(scene, dict = null, mainView = null) {\n    if (!dict) throw new Error(\"null dictionary describing Box region\");\n    const name = Maybe.fromNull(dict.name).orSome(\n      `BoxRegion${Math.floor(Math.random() * 1e3)}`\n    );\n    const mesh = createBoxRegionMesh(dict, name, scene);\n\n    const material = new StandardMaterial(`BoxRegionMaterial${name}`, scene);\n    const color = new Color3(dict.color[0], dict.color[1], dict.color[2]);\n    material.diffuseColor = color;\n    material.emissiveColor = color;\n    material.backFaceCulling = false;\n    mesh.material = material;\n\n    mesh.visibility = VISIBILITY;\n\n    Maybe.fromNull(dict.quaternion).forEach(quaternion => {\n      const babylonQuaternion = new Quaternion(\n        quaternion[1],\n        quaternion[2],\n        quaternion[3],\n        quaternion[0]\n      );\n      mesh.rotationQuaternion = babylonQuaternion.normalize();\n    });\n\n    const keyPoints = createPlaceHolderKeyPoints(\n      scene,\n      dict.corners.map(x => Vec3.of(x).toBabylon()),\n      mesh,\n      mainView\n    );\n    return new BoxRegion(mesh, dict.corners, keyPoints, dict.keyValueMap);\n  }\n}\n\nconst RADIUS = Constants.RADIUS;\nconst FACES = [\n  [0, 1, 2],\n  [2, 3, 0],\n  [4, 5, 6],\n  [6, 7, 4],\n  [0, 1, 5],\n  [5, 4, 0],\n  [3, 2, 6],\n  [6, 7, 3],\n  [1, 2, 6],\n  [6, 5, 1],\n  [0, 3, 7],\n  [7, 4, 0]\n];\n\n/**\n * @param boxRegion: {position: 3-array, corners: array of 3-arrays }\n */\nfunction createBoxRegionMesh(boxRegion, name, scene) {\n  // centered corners vec\n  const corners = boxRegion.corners.map(x => Vec3.of(x).toBabylon());\n  const d = corners[1].subtract(corners[0]);\n  const middlePoint = Vec3.of(boxRegion.position).toBabylon();\n  const shape = [\n    corners[0],\n    corners[0].add(Axis.X.scale(d.x)),\n    corners[0].add(new Vector3(d.x, d.y, 0)),\n    corners[0].add(Axis.Y.scale(d.y))\n  ];\n  const h = new Vector3(0, 0, d.z);\n  const boxRegionMesh = {\n    positions: [\n      shape[0],\n      shape[1],\n      shape[2],\n      shape[3],\n      shape[0].add(h),\n      shape[1].add(h),\n      shape[2].add(h),\n      shape[3].add(h)\n    ],\n    faces: FACES\n  };\n  const mesh = Util3d.meshFromPositionAndFaces(\n    name,\n    scene,\n    boxRegionMesh.positions,\n    boxRegionMesh.faces\n  );\n  mesh.position = middlePoint;\n  return mesh;\n}\n\nfunction createNewMeshFromOldUsingNewBox(newBox, scene, mesh, item) {\n  const average = Util3d.pointAverageVec3(newBox.corners.map(x => Vec3.of(x)));\n  newBox.position = average.toArray();\n  newBox.corners = newBox.corners.map(x => Vec3.of(x).sub(average).toArray());\n\n  // average in parent coord\n  const rotMat3 = Util3d.getRotationMatrix(mesh);\n  const scaleVec3 = Vec3.ofBabylon(mesh.scaling);\n  const averageInParentCoord = rotMat3\n    .prodVec(average.mul(scaleVec3))\n    .toBabylon();\n\n  const newMesh = createBoxRegionMesh(newBox, mesh.name, scene);\n  newMesh.parent = mesh.parent;\n  newMesh.rotationQuaternion = mesh.rotationQuaternion;\n  newMesh.position = averageInParentCoord.add(mesh.position);\n\n  newMesh.material = mesh.material;\n  newMesh.visibility = VISIBILITY;\n  newMesh.getMouseContextActions = mesh.getMouseContextActions;\n  newMesh.nodeItem = mesh.nodeItem;\n  newMesh.observers = mesh.observers;\n  if (!!mesh.graphVertex) newMesh.graphVertex = mesh.graphVertex;\n\n  item.mesh = newMesh;\n  item.corners = newBox.corners;\n\n  const childrenCopy = [...mesh._children];\n  childrenCopy.forEach(c => {\n    c.parent = newMesh;\n  });\n  item.keyPoints.forEach((k, j) => {\n    k.position = Vec3.of(newBox.corners[j]).toBabylon();\n  });\n  // dispose old mesh\n  mesh.dispose();\n}\n\nconst getKeyPointObserverFunction = (mainView, scene) => {\n  return ({ updatedPointMesh, is2updateServer }) => {\n    mainView\n      .getNodeFromTree(updatedPointMesh.parent.name)\n      .forEach(boxRegionTreeNode => {\n        const index = updatedPointMesh.index;\n        const item = boxRegionTreeNode.item;\n        const mesh = item.mesh;\n        const name = mesh.name;\n        let newBox = {\n          position: Vec3.ofBabylon(mesh.position).toArray(),\n          corners: item.corners\n        };\n        newBox.corners[index] = Vec3.ofBabylon(\n          updatedPointMesh.position\n        ).toArray();\n        createNewMeshFromOldUsingNewBox(newBox, scene, mesh, item);\n        mainView.addGizmo2Name();\n        if (is2updateServer) {\n          mainView.updateNodeInServer(name);\n          mainView.getNodeFromTree(name).forEach(node => {\n            mainView.setProperties(node.item.toForm());\n          });\n        }\n        // signal box region observers\n        Maybe.fromNull(item.mesh.observers).forEach(obs => {\n          obs.notifyObservers({\n            updatedPointMesh: item.mesh,\n            is2updateServer: is2updateServer,\n            displacement: Vector3.Zero()\n          });\n        });\n        Maybe.fromNull(item.mesh.graphVertex).forEach(({ vertexObs }) => {\n          vertexObs({\n            updatedPointMesh: item.mesh,\n            is2updateServer: is2updateServer,\n            displacement: Vector3.Zero()\n          });\n        });\n      });\n  };\n};\n\nconst createPlaceHolderKeyPoints = (\n  scene,\n  corners,\n  boxRegionMesh,\n  mainView\n) => {\n  const keyPoints = [];\n  corners.forEach((corner, i) => {\n    const p = corner;\n\n    const keyPoint = Util3d.createSphere(\n      scene,\n      new Color3(0.25, 0.25, 0.25),\n      RADIUS,\n      `${boxRegionMesh.name}keyPoint${i}`,\n      true\n    );\n\n    keyPoint.parent = boxRegionMesh;\n    keyPoint.position = p;\n    keyPoint.index = i;\n    keyPoint.observers = new Observable();\n    keyPoint.observers.add(getKeyPointObserverFunction(mainView, scene));\n    keyPoints.push(keyPoint);\n  });\n  return keyPoints;\n};\n\nconst VISIBILITY = 0.25;\nexport default BoxRegion;\n","import NodeItem from \"./NodeItem\";\nimport Vec3 from \"../Math/Vec3\";\nimport Util3d from \"../Util3d/Util3d\";\nimport { Maybe } from \"monet\";\nimport { Quaternion, MeshBuilder } from \"@babylonjs/core\";\n\n// ROS/RVIZ default referential\nconst THETA = -Math.PI / 2;\nconst ROS_ORIGIN = {\n  position: [0, 0, 0],\n  scaling: [1, -1, 1],\n  quaternion: [Math.cos(THETA / 2), Math.sin(THETA / 2), 0, 0]\n};\n\nclass GlobalRef extends NodeItem {\n  constructor(mesh, keyValueMap = {}) {\n    super(mesh, keyValueMap);\n  }\n\n  toForm() {\n    const form = super.toForm();\n    form.uiSchema.name = {\n      \"ui:disabled\": true\n    };\n    return form;\n  }\n\n  getMouseContextActions() {\n    return [];\n  }\n\n  getType = () => GlobalRef.TYPE;\n\n  static TYPE = \"GlobalRef\";\n\n  static NAME = \"Global ref\";\n\n  static ofDict(scene, dict = null, mainView = null) {\n    const rosOrigin = GlobalRef.getRosOrigin(scene);\n\n    const globalRefMesh = Util3d.referentialBuilder(scene)\n      .name(GlobalRef.NAME)\n      .isPickable(true)\n      .boxParams({ isVisible: true, size: 0.25 })\n      .build();\n\n    globalRefMesh.parent = rosOrigin;\n\n    NodeItem.mapDict2Mesh(dict, globalRefMesh);\n\n    return new GlobalRef(\n      globalRefMesh,\n      Maybe.fromNull(dict)\n        .flatMap(d => Maybe.fromNull(d.keyValueMap))\n        .orUndefined()\n    );\n  }\n\n  static getRosOrigin(scene) {\n    const rosOrigin = MeshBuilder.CreateBox(\n      \"ROS_ORIGIN\",\n      { size: 1e-3 },\n      scene\n    );\n    rosOrigin.isVisible = false;\n    rosOrigin.isPickable = false;\n    rosOrigin.position = Vec3.of(ROS_ORIGIN.position).toBabylon();\n    rosOrigin.scaling = Vec3.of(ROS_ORIGIN.scaling).toBabylon();\n    const quaternion = new Quaternion(\n      ROS_ORIGIN.quaternion[1],\n      ROS_ORIGIN.quaternion[2],\n      ROS_ORIGIN.quaternion[3],\n      ROS_ORIGIN.quaternion[0]\n    );\n    rosOrigin.rotationQuaternion = quaternion.normalize();\n    return rosOrigin;\n  }\n\n  /**\n   *\n   * @param {*} x: Babylon Vector3 in World coordinates\n   *\n   * returns Babylon Vector3 vector in ROS coordinates\n   */\n  static inverseCoordinates(x) {\n    /**\n     * Solves RS\\eta + p = x\n     *\n     * \\eta = S^(1)R^T(x-p)\n     */\n    const quaternion = ROS_ORIGIN.quaternion;\n    const rotationMatrix = Util3d.getRotationMatrix({\n      rotationQuaternion: new Quaternion(\n        quaternion[1],\n        quaternion[2],\n        quaternion[3],\n        quaternion[0]\n      )\n    });\n    const scaling = Vec3.of(ROS_ORIGIN.scaling).map(z => 1 / z);\n    const pos = Vec3.of(ROS_ORIGIN.position);\n    const result = scaling.mul(\n      rotationMatrix.dotVec(Vec3.ofBabylon(x).sub(pos))\n    );\n    return result.map(z => (Math.abs(z) < 1e-5 ? 0 : z)).toBabylon();\n  }\n\n  /**\n   *\n   * @param {*} x: Babylon Vector3 in ROS coordinates\n   *\n   * returns Babylon Vector3 vector in World coordinates\n   */\n  static forwardCoordinates(x) {\n    /**\n     * computes RS\\eta + p = x\n     */\n    const quaternion = ROS_ORIGIN.quaternion;\n    const rotationMatrix = Util3d.getRotationMatrix({\n      rotationQuaternion: new Quaternion(\n        quaternion[1],\n        quaternion[2],\n        quaternion[3],\n        quaternion[0]\n      )\n    });\n    const scaling = Vec3.of(ROS_ORIGIN.scaling);\n    const pos = Vec3.of(ROS_ORIGIN.position);\n    const result = rotationMatrix\n      .prodVec(scaling.mul(Vec3.ofBabylon(x)))\n      .add(pos);\n    return result.map(z => (Math.abs(z) < 1e-5 ? 0 : z)).toBabylon();\n  }\n}\n\nexport default GlobalRef;\n","import NodeItem from \"./NodeItem\";\nimport Util3d from \"../Util3d/Util3d\";\nimport { Color3, Vector3, Observable } from \"@babylonjs/core\";\nimport Constants from \"../Utils/Constants\";\nimport { Quaternion } from \"@babylonjs/core/Maths/math\";\nimport Graph from \"../Graph/Graph\";\nimport Vec3 from \"../Math/Vec3\";\nimport { Maybe } from \"monet\";\nimport React from \"react\";\nimport lodashGet from \"lodash/get\";\nimport { UndoManager } from \"mov-fe-lib-core\";\nimport Path from \"./Path\";\n\n/**\n * One graph per scene\n */\nclass GraphItem extends NodeItem {\n  constructor(scene, mainView, name = GraphItem.NAME, keyValueMap = {}) {\n    const sceneId = scene.getUniqueId();\n    // super() must be called before using _this_.\n    if (\n      sceneId in graphItemInstances &&\n      !graphItemInstances[sceneId].mesh.isDisposed()\n    ) {\n      return graphItemInstances[sceneId];\n    }\n\n    const graphPlaceHolder = getGraphPlaceHolder(scene, name);\n    graphPlaceHolder.onClick = () =>\n      (this.graphFormMapper = this.getDefaultFormMapper());\n\n    super(graphPlaceHolder, keyValueMap);\n    graphItemInstances[sceneId] = this;\n\n    // object properties\n    this.graph = new Graph();\n    this.scene = scene;\n    this.mainView = mainView;\n    this.meshByEdgeId = {};\n    this.graphFormMapper = this.getDefaultFormMapper();\n    this.vertexGenerator = 0;\n  }\n\n  getType = () => GraphItem.TYPE;\n\n  toDict() {\n    const dict = super.toDict();\n    const { graph } = this;\n    const vertices = { ...graph.getVertices() };\n    const edges = { ...graph.getEdges() };\n    Object.keys(vertices).forEach(k => {\n      graph.getVertex(k).forEach(({ data: vertexData }) => {\n        vertices[k] = {\n          position: Vec3.ofBabylon(vertexData.position).toArray(),\n          id: String(k)\n        };\n      });\n    });\n    Object.keys(edges).forEach(k => {\n      const ids = Graph.key2Edge(k);\n      graph.getEdge(...ids).forEach(({ data: edgeData }) => {\n        const [i, j] = ids.map(x => Number(x));\n        const edgeMesh = edgeData.edge.map(({ mesh }) => mesh);\n        const [belongsSrcMesh, belongsTrgMesh] = edgeMesh;\n        edges[k] = {\n          ids: ids,\n          keyValueMap: edgeData.keyValueMap,\n          weight: edgeData.weight,\n          belongsSrc:\n            i < j\n              ? this.exportBelongToData(belongsSrcMesh)\n              : this.exportBelongToData(belongsTrgMesh),\n          belongsTrg:\n            i < j\n              ? this.exportBelongToData(belongsTrgMesh)\n              : this.exportBelongToData(belongsSrcMesh)\n        };\n        if (this.doMeshesBelong2SamePath(...edgeMesh)) {\n          if (i > j) {\n            // remove edge if belongs to same path and i > j\n            delete edges[k];\n          }\n        }\n      });\n    });\n    dict[\"vertices\"] = vertices;\n    dict[\"edges\"] = edges;\n    return dict;\n  }\n\n  toForm() {\n    const form = super.toForm();\n    delete form.jsonSchema.properties.position;\n    delete form.jsonSchema.properties.quaternion;\n    delete form.jsonSchema.properties.color;\n    delete form.uiSchema.position;\n    delete form.uiSchema.quaternion;\n    delete form.uiSchema.color;\n    delete form.data.position;\n    delete form.data.quaternion;\n    delete form.data.color;\n    return this.graphFormMapper.toForm(form);\n  }\n\n  ofForm(form) {\n    this.name = form.name;\n    this.mesh.name = form.name;\n    this.graphFormMapper.ofForm(form);\n  }\n\n  getDefaultFormMapper() {\n    return {\n      toForm: form => form,\n      ofForm: form => (this.keyValueMap = { ...form.annotations })\n    };\n  }\n\n  getToFormEdge(edgeMesh) {\n    const { graph } = this;\n    return {\n      toForm: form => {\n        return graph\n          .getEdge(...edgeMesh.edgeIndexes)\n          .map(({ data: edgeData }) => {\n            form.jsonSchema.properties[\"weight\"] = {\n              type: \"number\",\n              title: \"Weight\"\n            };\n            form.data[\"weight\"] = edgeData.weight;\n            NodeItem.setAnnotations2Form(form, edgeData.keyValueMap);\n            form.jsonSchema.properties[\n              \"annotations\"\n            ].title = `Annotations Edge ${edgeMesh.edgeIndexes}`;\n            return form;\n          })\n          .orSome(form);\n      },\n      ofForm: form => {\n        const { edgeIndexes } = edgeMesh;\n        graph.getEdge(...edgeIndexes).forEach(({ data: edgeData }) => {\n          edgeData.keyValueMap = { ...lodashGet(form, \"annotations\", {}) };\n          edgeData.weight = Number.parseFloat(form.weight);\n        });\n      }\n    };\n  }\n\n  /**\n   * @override nodeItem delVertex()\n   * Delete all vertex from tree nodes\n   */\n  delVertex() {\n    // Iterate though all nodes under the root node and delete its vertexes\n    const root = this.mainView.getRootNode();\n    this.delVertexRecursively(root?.children);\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                   Graph Operations                                   *\n   *                                                                                      */\n  //========================================================================================\n\n  /**\n   *\n   * @param {*} iMesh: Mesh vertex\n   * @param {*} jMesh: Mesh vertex\n   * @param {*} edgeIndexes: Array<Integer>\n   */\n  addEdge(iMesh, jMesh, edgeIndexes = []) {\n    const [iIndex, jIndex] = edgeIndexes;\n    if (this.hasEdge(iMesh, jMesh)) return;\n    this.buildVertex(iMesh, iIndex);\n    this.buildVertex(jMesh, jIndex);\n    this.buildEdge(iMesh, jMesh);\n    return this;\n  }\n\n  delEdge(iMesh, jMesh) {\n    const { graph } = this;\n    const [i, j] = [iMesh, jMesh].map(this.getVertexIdFromMesh);\n    // if it has an edge\n    graph.getEdge(i, j).forEach(({ data: edgeData }) => {\n      const ijKey = Graph.edgeKey(i, j);\n      const jiKey = Graph.edgeKey(j, i);\n      Maybe.fromNull(this.meshByEdgeId[ijKey]).forEach(mesh => {\n        mesh.dispose();\n        delete this.meshByEdgeId[ijKey];\n        delete this.meshByEdgeId[jiKey];\n      });\n      graph.delEdge(i, j);\n    });\n  }\n\n  /**\n   *\n   * @param {*} iMesh: Mesh\n   * @param {*} jMesh: Mesh\n   */\n  hasEdge(iMesh, jMesh) {\n    const [i, j] = [iMesh, jMesh].map(this.getVertexIdFromMesh);\n    return this.graph.hasEdge(i, j);\n  }\n\n  delVertexFromMesh(iMesh, is2updateServer = true) {\n    const { graph } = this;\n    const i = this.getVertexIdFromMesh(iMesh);\n    graph.getVertex(i).forEach(_ => {\n      // if vertex found delete neighbors\n      const neighbors = graph.getNeighbors(i);\n      neighbors\n        .map(j => graph.getVertex(j))\n        .forEach(maybeV =>\n          maybeV.forEach(({ data: vertexData }) => {\n            const { mesh: jMesh } = vertexData;\n            this.delEdge(iMesh, jMesh);\n          })\n        );\n      // delete itself\n      graph.delVertex(i);\n      iMesh.graphVertex = undefined;\n      if (is2updateServer) this.mainView.updateNodeInServer(this.name);\n    });\n  }\n\n  /**\n   *\n   * @param {*} id: vertex to be updated id\n   * @param {*} newPosition: Vector3, new vertex position\n   * @param {*} is2updateServer: is to update in server boolean var\n   * @param {*} protectEdge: Pair<Int> with vertex indices\n   */\n  updateVertexPosition(id, newPosition, is2updateServer = true) {\n    const { graph } = this;\n    graph.getVertex(id).forEach(({ data: vertexData }) => {\n      vertexData.position = newPosition;\n    });\n    graph.getNeighbors(id).forEach(j => {\n      const i = id;\n      const edgeKey = Graph.edgeKey(i, j);\n      this.meshByEdgeId[edgeKey] && this.meshByEdgeId[edgeKey].dispose();\n      graph.getEdge(i, j).forEach(({ data: edgeData }) => {\n        const [iData, jData] = edgeData.edge;\n        this.buildEdge(iData.mesh, jData.mesh);\n      });\n      if (is2updateServer) this.mainView.updateNodeInServer(this.name);\n    });\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                    Private Methods                                   *\n   *                                                                                      */\n  //========================================================================================\n\n  /**\n   * Delete vertex from nodeTree children\n   * @param {*} nodeTree: List of nodes (initially root.children)\n   */\n  delVertexRecursively(nodeTree = []) {\n    nodeTree.forEach(node => {\n      if(node.item.getType() !== GraphItem.TYPE) {\n        node.item.delVertex();\n        this.delVertexRecursively(node.children);\n      }\n    });\n  }\n\n  /**\n   *\n   * @param {*} mesh: Mesh\n   * @returns Integer| Undefined\n   */\n  getVertexIdFromMesh(mesh) {\n    return mesh?.graphVertex?.vertex?.id;\n  }\n\n  /**\n   *\n   * @param {*} vertexMesh: Mesh\n   * @param {*} vertexIndex: integer representing index of vertex (can be undefined)\n   *\n   */\n  buildVertex(vertexMesh, vertexIndex) {\n    // test if vertexMesh already exists in the graph\n    const vId = this.getVertexIdFromMesh(vertexMesh);\n    const maybeVertex = this.graph.getVertex(vId);\n    maybeVertex.orElseRun(() => {\n      // if vertex doesn't exist\n      const id = vertexIndex ? vertexIndex : this.vertexGenerator++;\n      this.graph.addVertex(id);\n      this.graph.getVertex(id).forEach(vertex => {\n        vertex.data = VertexData.builder()(id, vertexMesh);\n        this.addObs2VertexMesh(vertex.data);\n      });\n    });\n  }\n\n  /**\n   *\n   * @param {*} vData: VertexData\n   */\n  addObs2VertexMesh(vData) {\n    const { mesh } = vData;\n    if (mesh !== undefined) {\n      mesh.graphVertex = {\n        vertex: vData,\n        delVertex: () => this.delVertexFromMesh(mesh),\n        vertexObs: this.getVertexMeshObs(vData)\n      };\n    }\n  }\n\n  /**\n   *\n   * @param {*} vertexData: VertexData\n   */\n  getVertexMeshObs(vertexData) {\n    return ({ updatedPointMesh, is2updateServer, _ }) => {\n      const newPos = Util3d.getGlobalCoordinates(\n        updatedPointMesh,\n        updatedPointMesh.position\n      ).toBabylon();\n      this.updateVertexPosition(vertexData.id, newPos, is2updateServer);\n    };\n  }\n\n  /**\n   *\n   * @param {*} iMesh: Mesh\n   * @param {*} jMesh: Mesh\n   * @param {*} edgeMeshes: Array<Mesh>\n   */\n  buildEdge(iMesh, jMesh) {\n    const { graph } = this;\n    // need to sort edge numbers because is undirected graph\n    const [i, j] = [iMesh, jMesh]\n      .map(this.getVertexIdFromMesh)\n      .sort((a, b) => a - b); // reason here: https://stackoverflow.com/questions/15084070/is-this-a-bug-in-array-sort\n    graph.addEdge(i, j);\n    graph.getVertex(i).forEach(({ data: iVertexD }) =>\n      graph.getVertex(j).forEach(({ data: jVertexD }) => {\n        graph.getEdge(i, j).forEach(edge => {\n          edge.data = new EdgeData(iVertexD, jVertexD);\n        });\n        // if vertices belong to same path don't build mesh\n        if (!this.doVerticesBelong2SamePath(i, j)) {\n          const edgeMesh = this.getEdgeMesh(iVertexD, jVertexD);\n          this.meshByEdgeId[Graph.edgeKey(i, j)] = edgeMesh;\n          this.meshByEdgeId[Graph.edgeKey(j, i)] = edgeMesh;\n        }\n      })\n    );\n  }\n\n  getEdgeMesh(iVertexD, jVertexD) {\n    const edgeGlobalCoord = [iVertexD, jVertexD].map(({ mesh }) => {\n      return Util3d.getGlobalCoord(mesh, mesh.position);\n    });\n    const edgeMesh = GraphItem.getEdgeMesh(\n      this.scene,\n      edgeGlobalCoord,\n      Color3.Yellow()\n    );\n    edgeMesh.parent = this.mesh;\n    edgeMesh.edgeIndexes = [iVertexD, jVertexD].map(({ id }) => id);\n    edgeMesh.getMouseContextActions = this.getEdgeMouseCtxActions(edgeMesh);\n    this.addObserver2EdgeMesh(edgeMesh);\n    this.addOnClickEdge(edgeMesh);\n    return edgeMesh;\n  }\n\n  /**\n   *\n   * @param {*} edgeMesh: Mesh\n   * @returns: () => Array<{title: String, onClick: () => {}}>\n   */\n  getEdgeMouseCtxActions = edgeMesh => () => {\n    return [\n      {\n        title: \"Delete\",\n        onClick: () =>\n          this.mainView.getUndoManager().doIt(this.getUndoDeleteEdge(edgeMesh))\n      }\n    ];\n  };\n\n  /**\n   *\n   * @param {*} edgeMesh: Mesh\n   */\n  addObserver2EdgeMesh(edgeMesh) {\n    edgeMesh.observers = new Observable();\n    edgeMesh.observers.add(this.getEdgeObs());\n  }\n\n  /**\n   * @returns ({updatedPointMesh: Mesh, is2updateServer: Boolean, displacement: Vector3}) => {}\n   */\n  getEdgeObs = () => ({ updatedPointMesh, is2updateServer, displacement }) => {\n    const v = Vec3.ofBabylon(displacement);\n    const vLocal = Util3d.getLocalCoordFromWorld(this.mesh, v, false);\n    updatedPointMesh.position = updatedPointMesh.position.add(\n      vLocal.scale(-1).toBabylon()\n    );\n    if (is2updateServer) {\n      this.graphFormMapper = this.getToFormEdge(updatedPointMesh);\n      this.mainView.setProperties(this.toForm());\n    }\n  };\n\n  /**\n   *\n   * @param {*} edgeMesh: Mesh\n   */\n  addOnClickEdge(edgeMesh) {\n    edgeMesh.onClick = this.getOnClickEdge(edgeMesh);\n  }\n\n  getOnClickEdge = edgeMesh => () => {\n    const actions = [];\n    actions.push({\n      icon: props => <i className=\"fas fa-trash\" {...props}></i>,\n      action: () => {\n        this.mainView.getUndoManager().doIt(this.getUndoDeleteEdge(edgeMesh));\n      },\n      name: \"Delete Edge [Del]\"\n    });\n    this.mainView.setContextActions(actions);\n  };\n\n  getUndoDeleteEdge(edgeMesh) {\n    const { graph } = this;\n    const { edgeIndexes } = edgeMesh;\n    const [iVertexD, jVertexD] = edgeIndexes\n      .map(i => graph.getVertex(i))\n      .map(maybeV => maybeV.some())\n      .map(({ data }) => data);\n    return this.getUndoDelLineEdge(iVertexD, jVertexD);\n  }\n\n  getUndoDelLineEdge(iVertexD, jVertexD) {\n    const { graph } = this;\n    const edgeVertexD = [iVertexD, jVertexD];\n    const [i, j] = edgeVertexD.map(({ id }) => id);\n    const edgeMeshes = edgeVertexD.map(({ mesh }) => mesh);\n    let edgeProps = { keyValueMap: {}, weight: 1, edge: {} };\n    graph.getEdge(i, j).forEach(({ data: edgeData }) => {\n      edgeProps.keyValueMap = edgeData.keyValueMap;\n      edgeProps.weight = edgeData.weight;\n      edgeProps.edge = edgeData.edge;\n    });\n    return UndoManager.actionBuilder()\n      .doAction(() => {\n        this.delEdge(...edgeMeshes);\n        this.mainView.closeContextDial();\n        this.mainView.updateNodeInServer(this.name);\n      })\n      .undoAction(() => {\n        this.addEdge(...edgeMeshes, [i, j]);\n        graph.getEdge(i, j).forEach(({ data: edgeData }) => {\n          edgeData.keyValueMap = edgeProps.keyValueMap;\n          edgeData.weight = edgeProps.weight;\n          edgeData.edge = edgeProps.edge;\n        });\n        this.mainView.updateNodeInServer(this.name);\n      })\n      .build();\n  }\n\n  /**\n   *\n   * @param {*} i: Integer\n   * @param {*} j: Integer\n   * @returns: Boolean\n   */\n  doVerticesBelong2SamePath(i, j) {\n    return this.graph\n      .getEdge(i, j)\n      .map(({ data: edgeData }) => {\n        const [iMesh, jMesh] = edgeData.edge.map(vData => vData.mesh);\n        if (iMesh === undefined || jMesh === undefined) return false;\n        return (\n          iMesh?.parent?.name === jMesh?.parent?.name &&\n          [iMesh, jMesh].map(this.isMeshBelong2Path).every(x => x)\n        );\n      })\n      .orSome(false);\n  }\n\n  isMeshBelong2Path = ({ parent }) => {\n    return this.mainView\n      .getNodeFromTree(parent?.name)\n      .filter(({ item }) => item.getType() === Path.TYPE)\n      .orSome(false);\n  };\n\n  doMeshesBelong2SamePath(iMesh, jMesh) {\n    const iParentNodeItem = iMesh?.parent?.nodeItem;\n    const jParentNodeItem = jMesh?.parent?.nodeItem;\n    return (\n      !!iParentNodeItem &&\n      !!jParentNodeItem &&\n      iParentNodeItem.name === jParentNodeItem.name &&\n      iParentNodeItem.getType() === Path.TYPE &&\n      jParentNodeItem.getType() === Path.TYPE\n    );\n  }\n\n  exportBelongToData = mesh => {\n    const { index, name } = mesh;\n    if (index === null || index === undefined) {\n      return { name };\n    }\n    // if mesh has index, then it must be a path or polygon\n    return this.mainView\n      .getNodeFromTree(mesh?.parent?.name)\n      .map(({ item }) => ({\n        name: item.name,\n        index: index > 0 ? -1 : index\n      }))\n      .orUndefined();\n  };\n  //========================================================================================\n  /*                                                                                      *\n   *                             Static Methods and Variables                             *\n   *                                                                                      */\n  //========================================================================================\n\n  static TYPE = \"GraphItem\";\n\n  static NAME = \"LogicGraph\";\n\n  static ofDict(scene, dict = null, mainView = null) {\n    if (!dict || !mainView)\n      throw new Error(\"null dictionary describing graphItem or null mainView\");\n    const graphItem = new GraphItem(\n      scene,\n      mainView,\n      dict.name,\n      dict.keyValueMap\n    );\n    const { edges } = dict;\n    let vertexCounter = Number.MIN_VALUE;\n    // create mesh of graph using addEdge\n    Object.values(edges).forEach(({ ids, belongsSrc, belongsTrg }) => {\n      const [i, j] = ids.map(x => Number(x));\n      vertexCounter = Math.max(vertexCounter, Math.max(i, j));\n      if (i < j) {\n        const edgeMeshes = getMeshesFromEdgeData(mainView, {\n          belongsSrc,\n          belongsTrg\n        });\n        graphItem.addEdge(...edgeMeshes, [i, j]);\n        // add additional data\n        graphItem.graph.getEdge(i, j).forEach(({ data: edgeData }) => {\n          const dataEdge = edges[Graph.edgeKey(i, j)];\n          edgeData.importFeatures(dataEdge);\n        });\n      }\n    });\n    graphItem.vertexGenerator = vertexCounter + 1;\n    return graphItem;\n  }\n\n  static getVertexMesh(\n    scene,\n    vertexPosition,\n    color = Color3.Gray(),\n    radius = Constants.RADIUS\n  ) {\n    const sphere = Util3d.createSphere(scene, color, radius);\n    sphere.position = vertexPosition;\n    return sphere;\n  }\n\n  /**\n   *\n   * @param {*} scene: Scene\n   * @param {*} edge: Array<Vector3>\n   * @param {*} color: Color3\n   * @param {*} radius: Number\n   */\n  static getEdgeMesh(\n    scene,\n    edge,\n    color = Color3.Gray(),\n    radius = Constants.RADIUS / 4\n  ) {\n    return Util3d.createTubeFromPoints(scene, edge, color, radius);\n  }\n\n  static createGraphItemIfNone = (scene, parentView) =>\n    parentView.getGraph().orElseRun(() => {\n      const graphItem = new GraphItem(scene, parentView);\n      graphItem.mesh.parent = parentView.getRootNode().item.mesh;\n      parentView.addNodeItem2Tree(graphItem);\n    });\n}\n\nconst graphItemInstances = {};\nconst getGraphPlaceHolder = (scene, name) => {\n  const graphPlaceHolder = Util3d.createSphere(\n    scene,\n    Color3.Gray(),\n    Number.MIN_VALUE,\n    name,\n    false\n  );\n  graphPlaceHolder.position = Vector3.Zero();\n  graphPlaceHolder.scaling = Vector3.One();\n  graphPlaceHolder.rotationQuaternion = Quaternion.Identity();\n  graphPlaceHolder.visibility = 0.0;\n  return graphPlaceHolder;\n};\n\nconst getMeshesFromEdgeData = (mainView, edgeProps) => {\n  const { belongsSrc, belongsTrg } = edgeProps;\n  const edgeMesh = [belongsSrc, belongsTrg].map(({ name, index }) => {\n    return mainView\n      .getNodeFromTree(name)\n      .map(({ item }) => {\n        if (index === null || index === undefined) return item.mesh;\n        // if has index, then it must be a path or polygon\n        const ind = index < 0 ? item.keyPoints.length - 1 : index;\n        return item.keyPoints[ind];\n      })\n      .orUndefined();\n  });\n  return edgeMesh;\n};\n\nclass VertexData {\n  /**\n   *\n   * @param {*} id: Integer\n   * @param {*} mesh: Mesh\n   * @param {*} position:\n   */\n  constructor(id, mesh, position) {\n    this.id = id;\n    this.mesh = mesh;\n    this.position = position;\n  }\n\n  static builder() {\n    return (id, mesh) => {\n      const globalPos = Util3d.getGlobalCoordinates(\n        mesh,\n        mesh.position\n      ).toBabylon();\n      return new VertexData(id, mesh, globalPos);\n    };\n  }\n}\n\nclass EdgeData {\n  constructor(vertexDataI, vertexDataJ, keyValueMap = {}) {\n    this.edge = [vertexDataI, vertexDataJ];\n    this.keyValueMap = keyValueMap;\n    this.weight = 1.0;\n  }\n\n  importFeatures({ keyValueMap, weight }) {\n    this.keyValueMap = keyValueMap;\n    this.weight = weight;\n  }\n}\n\nexport default GraphItem;\n","import NodeItem from \"./NodeItem\";\nimport Util3d from \"../Util3d/Util3d\";\nimport { Maybe } from \"monet\";\nimport { MeshBuilder, StandardMaterial } from \"@babylonjs/core\";\n\nclass KeyPoint extends NodeItem {\n  ofDict(scene, dict = null, mainView = null) {\n    return KeyPoint.ofDict(scene, dict, mainView);\n  }\n\n  getType = () => KeyPoint.TYPE;\n\n  static TYPE = \"KeyPoint\";\n\n  static ofDict(scene, dict = null, mainView = null) {\n    const name = Maybe.fromNull(dict)\n      .map(x => x.name)\n      .orSome(`KeyPoint${Math.floor(Math.random() * 1e3)}`);\n\n    const mesh = MeshBuilder.CreatePolyhedron(\n      name,\n      { custom: TRIANGULAR_ANTIPRISM, size: KeyPoint.DEFAULT_SIZE },\n      scene\n    );\n    const material = new StandardMaterial(`KeyPointMaterial${name}`, scene);\n    mesh.material = material;\n    mesh.convertToFlatShadedMesh();\n\n    const axis = Util3d.referentialBuilder(scene)\n      .isPickable(false)\n      .boxParams({ isVisible: false, size: 0.1 * KeyPoint.DEFAULT_SIZE })\n      .name(`${name}Axis`)\n      .build();\n    axis.parent = mesh;\n\n    NodeItem.mapDict2Mesh(dict, mesh);\n    return new KeyPoint(mesh, dict.keyValueMap);\n  }\n\n  static DEFAULT_SIZE = 0.25;\n}\n\nconst TRIANGULAR_ANTIPRISM = {\n  name: \"Triangular Antiprism (Octahedron)\",\n  category: [\"Antiprism\"],\n  vertex: [\n    [0, 0, 1.414214],\n    [1.414214, 0, 0],\n    [0, 1.414214, 0],\n    [-1.414214, 0, 0],\n    [0, -1.414214, 0],\n    [0, 0, -1.414214]\n  ],\n  face: [\n    [0, 1, 2],\n    [0, 2, 3],\n    [0, 3, 4],\n    [0, 4, 1],\n    [1, 4, 5],\n    [1, 5, 2],\n    [2, 5, 3],\n    [3, 5, 4]\n  ]\n};\n\nexport default KeyPoint;\n","import AssetNodeItem from \"./AssetNodeItem\";\n\nclass Map extends AssetNodeItem {\n  constructor(mesh, size, textureSrc, assetName) {\n    super(mesh, assetName);\n    this.size = size;\n    this.textureSrc = textureSrc;\n  }\n\n  dispose() {\n    super.dispose();\n  }\n\n  toDict() {\n    const dict = super.toDict();\n    dict[\"size\"] = this.size;\n    dict[\"textureSrc\"] = this.textureSrc;\n    return dict;\n  }\n\n  toForm() {\n    const info = this.toDict();\n    const schema = {\n      jsonSchema: {\n        type: \"object\",\n        properties: {\n          oldName: {\n            type: \"string\"\n          },\n          name: {\n            type: \"string\",\n            title: \"Name\"\n          },\n          type: {\n            type: \"string\",\n            title: \"Type\"\n          },\n          assetName: {\n            type: \"string\",\n            title: \"Asset Name\"\n          }\n        }\n      },\n      uiSchema: {\n        type: {\n          \"ui:disabled\": true\n        },\n        assetName: {\n          \"ui:disabled\": true\n        },\n        oldName: {\n          \"ui:widget\": \"hidden\"\n        }\n      },\n      data: {\n        oldName: info.name,\n        name: info.name,\n        type: info.type,\n        assetName: info.assetName\n      }\n    };\n    return schema;\n  }\n\n  ofForm(form) {\n    this.name = form.name;\n    this.mesh.name = form.name;\n    this.keyValueMap = { ...form.annotations };\n  }\n\n  getType = () => Map.TYPE;\n\n  static TYPE = \"Map\";\n}\n\nexport default Map;\n","import AssetNodeItem from \"./AssetNodeItem\";\n\nclass Mesh extends AssetNodeItem {\n  constructor(mesh, assetName, keyValueMap = {}) {\n    super(mesh, assetName, keyValueMap);\n  }\n\n  toDict() {\n    let dict = super.toDict();\n    return dict;\n  }\n\n  toForm() {\n    const schema = super.toForm();\n    schema.jsonSchema.properties = {\n      oldName: schema.jsonSchema.properties.oldName,\n      name: schema.jsonSchema.properties.name,\n      type: schema.jsonSchema.properties.type,\n      assetName: {\n        type: \"string\",\n        title: \"Asset Name\"\n      },\n      position: schema.jsonSchema.properties.position,\n      quaternion: schema.jsonSchema.properties.quaternion,\n      color: schema.jsonSchema.properties.color,\n      annotations: schema.jsonSchema.properties.annotations\n    };\n    schema.uiSchema[\"assetName\"] = {\n      \"ui:disabled\": true\n    };\n    schema.data[\"assetName\"] = this.assetName;\n    return schema;\n  }\n\n  getMouseContextActions(mainView) {\n    return super\n      .getMouseContextActions(mainView)\n      .filter(x => x.title === \"Delete\");\n  }\n\n  getType = () => Mesh.TYPE;\n  static TYPE = \"Mesh\";\n}\n\nexport default Mesh;\n","import Clipboard from \"../Utils/Clipboard\";\nimport Vec3 from \"../Math/Vec3\";\nimport { Maybe } from \"monet\";\nimport _capitalize from \"lodash/capitalize\";\nimport { Quaternion, Color3, Vector3 } from \"@babylonjs/core\";\nimport AnnotationManager from \"../Utils/AnnotationManager\";\nimport GlobalRef from \"./GlobalRef\";\n\nclass NodeItem {\n  constructor(mesh, keyValueMap = {}) {\n    this.name = mesh.name;\n    this.mesh = mesh;\n    this.mesh.getMouseContextActions = this.getMouseContextActions;\n    this.mesh.nodeItem = this;\n    this.keyValueMap = keyValueMap;\n  }\n\n  dispose() {\n    this.mesh.dispose();\n  }\n\n  toDict() {\n    return {\n      name: this.name,\n      type: this.getType(),\n      position: Vec3.ofBabylon(this.mesh?.position).toArray(),\n      quaternion: Maybe.fromNull(this.mesh?.rotationQuaternion)\n        .map(x => [x.w, x.x, x.y, x.z])\n        .orLazy(() => {\n          const q = Quaternion.RotationYawPitchRoll(\n            this.mesh.rotation.y,\n            this.mesh.rotation.x,\n            this.mesh.rotation.z\n          );\n          return [q.w, q.x, q.y, q.z];\n        }),\n      color: Maybe.fromNull(this.mesh?.material)\n        .flatMap(x => Maybe.fromNull(x.diffuseColor).map(z => [z.r, z.g, z.b]))\n        .orSome([0, 0, 0]),\n      keyValueMap: this.keyValueMap,\n      isVisible: this.mesh.isEnabled()\n    };\n  }\n\n  /**\n   * Generates json based on https://github.com/rjsf-team/react-jsonschema-form\n   */\n  toForm() {\n    const info = this.toDict();\n    const color = new Color3(info.color[0], info.color[1], info.color[2]);\n    const schema = {\n      jsonSchema: {\n        type: \"object\",\n        properties: {\n          oldName: {\n            type: \"string\"\n          },\n          name: {\n            type: \"string\",\n            title: \"Name\"\n          },\n          type: {\n            type: \"string\",\n            title: \"Type\"\n          },\n          position: {\n            type: \"object\",\n            title: \"Position\",\n            properties: {\n              x: {\n                type: \"number\",\n                title: \"x\"\n              },\n              y: {\n                type: \"number\",\n                title: \"y\"\n              },\n              z: {\n                type: \"number\",\n                title: \"z\"\n              }\n            }\n          },\n          quaternion: {\n            type: \"object\",\n            title: \"Orientation\",\n            properties: {\n              w: {\n                type: \"number\",\n                title: \"w\"\n              },\n              x: {\n                type: \"number\",\n                title: \"x\"\n              },\n              y: {\n                type: \"number\",\n                title: \"y\"\n              },\n              z: {\n                type: \"number\",\n                title: \"z\"\n              }\n            }\n          },\n          color: {\n            type: \"string\",\n            title: \"Color\"\n          }\n        }\n      },\n      uiSchema: {\n        type: {\n          \"ui:disabled\": true\n        },\n        color: {\n          \"ui:widget\": \"color\"\n        },\n        oldName: {\n          \"ui:widget\": \"hidden\"\n        },\n        position: {\n          \"ui:widget\": \"collapse\"\n        },\n        quaternion: {\n          \"ui:widget\": \"collapse\"\n        }\n      },\n      data: {\n        oldName: info.name,\n        name: info.name,\n        type: info.type,\n        position: {\n          x: info.position[0],\n          y: info.position[1],\n          z: info.position[2]\n        },\n        quaternion: {\n          w: info.quaternion[0],\n          x: info.quaternion[1],\n          y: info.quaternion[2],\n          z: info.quaternion[3]\n        },\n        color: color.toHexString()\n      }\n    };\n\n    NodeItem.setAnnotations2Form(schema, this.keyValueMap);\n    return schema;\n  }\n\n  /**\n   * Changes NodeItem based on a form\n   *\n   * Warning: side effect function\n   * @param {*} form\n   */\n  ofForm(form) {\n    this.name = form.name;\n    this.mesh.name = form.name;\n\n    Maybe.fromNull(form?.position).forEach(position => {\n      const pos = [position.x, position.y, position.z].map(Number.parseFloat);\n      this.mesh.position = Vector3.FromArray(pos);\n    });\n    Maybe.fromNull(form?.quaternion).forEach(quaternion => {\n      const quat = [quaternion.x, quaternion.y, quaternion.z, quaternion.w].map(\n        Number.parseFloat\n      );\n      this.mesh.rotationQuaternion = Quaternion.FromArray(quat).normalize();\n    });\n    if (this.mesh.material) {\n      this.mesh.material.diffuseColor = Color3.FromHexString(form.color);\n      this.mesh.material.emissiveColor = Color3.FromHexString(form.color);\n    }\n    this.keyValueMap = { ...form.annotations };\n  }\n\n  getType = () => NodeItem.TYPE;\n\n  getMouseContextActions = mainView => {\n    return [\n      {\n        title: \"Copy\",\n        onClick: () => Clipboard.copy(this.getCopyFunction())\n      },\n      {\n        title: \"Delete\",\n        onClick: () =>\n          mainView\n            .getNodeFromTree(this.name)\n            .forEach(node => mainView.onDeleteNode(node, false))\n      }\n    ];\n  };\n\n  getCopyFunction(isForceUpdate = true) {\n    // mousePosFromRoot : Vector3\n    return (mousePosFromRoot, someMainView) =>\n      someMainView.getSceneMemory().map(({ scene }) => {\n        const { item: rootItem } = someMainView.getRootNode();\n        const copyDict = this.toDict();\n        copyDict.name += \"_copy\" + Clipboard.getUID();\n        const newPosArray = Vec3.ofBabylon(mousePosFromRoot).toArray();\n        // preserves z-coordinate\n        newPosArray[2] = copyDict.position[2];\n        copyDict.position = newPosArray;\n        const copiedNodeItem = this.ofDict(scene, copyDict, someMainView);\n        const { mesh: copiedMesh } = copiedNodeItem;\n        copiedMesh.parent = rootItem.mesh;\n        someMainView.addNodeItem2Tree(\n          copiedNodeItem,\n          GlobalRef.NAME,\n          true,\n          true,\n          isForceUpdate\n        );\n        return copiedNodeItem;\n      });\n  }\n\n  delVertex() {\n    let delVertex = this.mesh.graphVertex?.delVertex;\n    if (!delVertex) {\n      const childrenWithDelVertex = (this.mesh?._children || [])\n        .filter(childMesh => !!childMesh.graphVertex)\n        .map(childMesh => childMesh.graphVertex.delVertex);\n      delVertex = () => childrenWithDelVertex.forEach(del => del());\n    }\n    delVertex();\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                           Static attributes/methods                                  *\n   *                                                                                      */\n  //========================================================================================\n\n  static TYPE = \"NodeItem\";\n\n  // side-effect function\n  static mapDict2Mesh(dict, mesh) {\n    if (!mesh) throw new Error(\"can't map a null mesh\");\n    Maybe.fromNull(dict).forEach(someDict => {\n      Maybe.fromNull(dict.name).forEach(name => (mesh.name = name));\n      Maybe.fromNull(someDict.position).forEach(\n        position => (mesh.position = Vec3.of(position).toBabylon())\n      );\n      Maybe.fromNull(someDict.quaternion).forEach(quaternion => {\n        const babylonQuaternion = new Quaternion(\n          quaternion[1],\n          quaternion[2],\n          quaternion[3],\n          quaternion[0]\n        );\n        mesh.rotationQuaternion = babylonQuaternion.normalize();\n      });\n      Maybe.fromNull(someDict.color).forEach(color => {\n        const babylonColor = new Color3(color[0], color[1], color[2]);\n        Maybe.fromNull(mesh.material).forEach(material => {\n          Maybe.fromNull(material.diffuseColor).forEach(\n            z => (mesh.material.diffuseColor = babylonColor)\n          );\n          Maybe.fromNull(material.emissiveColor).forEach(\n            z => (mesh.material.emissiveColor = babylonColor)\n          );\n        });\n      });\n    });\n    return mesh;\n  }\n\n  // side effect function\n  static setAnnotations2Form(schema, keyValueMap = {}) {\n    schema.jsonSchema.properties.annotations = {\n      title: \"Annotations\",\n      type: \"object\",\n      properties: {}\n    };\n    schema.uiSchema.annotations = {\n      \"ui:widget\": \"collapse\"\n    };\n    schema.data[\"annotations\"] = { ...keyValueMap };\n    const annotations = AnnotationManager.getAnnotations();\n\n    [\"safety\", \"behaviour\", \"localization\", \"navigation\"].forEach(\n      annotation => {\n        // if (annotations[annotation].labels.length > 0) {\n        schema.jsonSchema.properties.annotations.properties[annotation] = {\n          title: _capitalize(annotation),\n          type: \"string\"\n        };\n        schema.uiSchema.annotations[annotation] = {\n          \"ui:widget\": \"selectScopeModal\",\n          \"ui:options\": {\n            scopeList: \"Annotation\",\n            name: _capitalize(annotation),\n            filter: e => {\n              return annotations[annotation].names.includes(e.name);\n            }\n          }\n        };\n        // }\n      }\n    );\n  }\n}\n\nexport default NodeItem;\n","import NodeItem from \"./NodeItem\";\nimport Vec3 from \"../Math/Vec3\";\nimport Util3d from \"../Util3d/Util3d\";\nimport React from \"react\";\nimport { Maybe } from \"monet\";\nimport Constants from \"../Utils/Constants\";\nimport {\n  Observable,\n  Color3,\n  MeshBuilder,\n  Quaternion,\n  Vector3\n} from \"@babylonjs/core\";\nimport { UndoManager } from \"mov-fe-lib-core\";\n\nconst RADIUS = Constants.RADIUS;\n\nclass Path extends NodeItem {\n  /**\n   * @param {*} mesh\n   * @param {*} localPath: is an array of 3-arrays of numbers of the local coordinates in relation to mesh.position and quaternion\n   * @param {*} keyPoints: are the keyPoints meshes array\n   * @param {*} splinePath: is an array of 3-arrays of numbers of the local coordinates in relation to mesh.position and quaternion\n   * @param {*} mainView: MainView\n   * @param {*} keyValueMap: annotations\n   */\n  constructor(\n    mesh,\n    localPath,\n    keyPoints,\n    splinePath,\n    mainView,\n    weight = 1,\n    keyValueMap = {}\n  ) {\n    super(mesh, keyValueMap);\n    // Array<Vector3> points in relation to its mean\n    this.localPath = localPath;\n    // Array<Meshes> representing key points of the curve\n    this.keyPoints = keyPoints;\n    // spline points from local path\n    this.splinePath = splinePath;\n    this.selectedKeyPointIndex = -1;\n    this.mainView = mainView;\n    this.weight = weight;\n  }\n\n  toDict() {\n    const dict = super.toDict();\n    dict.localPath = this.localPath;\n    dict.splinePath = this.splinePath;\n    dict.weight = this.weight;\n    return dict;\n  }\n\n  toForm() {\n    const schema = super.toForm();\n    if (this.selectedKeyPointIndex >= 0) {\n      schema.jsonSchema.properties[\"selectedKeyPoint\"] = {\n        type: \"object\",\n        title: `KeyPoint ${this.selectedKeyPointIndex}`,\n        properties: {\n          x: {\n            type: \"number\",\n            title: \"x\"\n          },\n          y: {\n            type: \"number\",\n            title: \"y\"\n          },\n          z: {\n            type: \"number\",\n            title: \"z\"\n          }\n        }\n      };\n\n      schema.uiSchema[\"selectedKeyPoint\"] = {\n        \"ui:widget\": \"collapse\"\n      };\n      schema.uiSchema[\"position\"] = { \"ui:widget\": \"hidden\" };\n      schema.uiSchema[\"quaternion\"] = { \"ui:widget\": \"hidden\" };\n      schema.uiSchema[\"color\"] = { \"ui:widget\": \"hidden\" };\n      schema.uiSchema[\"annotations\"] = { \"ui:widget\": \"hidden\" };\n      const selectedMesh = this.keyPoints[this.selectedKeyPointIndex];\n      const position = Util3d.getGlobalCoordinates(\n        selectedMesh,\n        selectedMesh.position\n      ).toArray();\n      schema.data[\"selectedKeyPoint\"] = {\n        x: position[0],\n        y: position[1],\n        z: position[2]\n      };\n\n      return schema;\n    }\n    // re-order attributes\n    const props = { ...schema.jsonSchema.properties };\n    const newSchema = {\n      type: \"object\",\n      properties: {\n        oldName: props.oldName,\n        name: props.name,\n        type: props.type,\n        weight: {\n          type: \"number\",\n          title: \"Weight\"\n        },\n        position: props.position,\n        quaternion: props.quaternion,\n        color: props.color,\n        annotations: props.annotations\n      }\n    };\n    schema.jsonSchema = newSchema;\n    schema.data[\"weight\"] = this.weight;\n    return schema;\n  }\n\n  ofForm(form) {\n    super.ofForm(form);\n    if (this.selectedKeyPointIndex >= 0) {\n      const selectedKeyPoint = this.keyPoints[this.selectedKeyPointIndex];\n      const formPosition = form.selectedKeyPoint;\n      const newPosInWorldCoordinates = Vector3.FromArray(\n        [formPosition.x, formPosition.y, formPosition.z].map(Number.parseFloat)\n      );\n      const localPos = Util3d.getLocalCoordFromGlobal(\n        selectedKeyPoint,\n        newPosInWorldCoordinates\n      ).toArray();\n      selectedKeyPoint.position = new Vector3(\n        localPos[0],\n        localPos[1],\n        localPos[2]\n      );\n      selectedKeyPoint.observers.notifyObservers({\n        updatedPointMesh: selectedKeyPoint,\n        is2updateServer: false\n      });\n      return;\n    }\n    this.weight = Number(form.weight);\n    this.updatePathEdgeWithForm(this.weight, this.keyValueMap);\n  }\n\n  updatePathEdgeWithForm(weight, annotations) {\n    this.mainView.getGraph().forEach(({ item: graphItem }) => {\n      const { graph } = graphItem;\n      const first = this.keyPoints[0];\n      const last = this.keyPoints[this.keyPoints.length - 1];\n      const edge = [first, last]\n        .filter(v => !!v?.graphVertex?.vertex)\n        .map(v => v.graphVertex.vertex);\n      if (edge.length < 2) return;\n      const edgeIds = edge.map(v => v.id);\n      graph.getEdge(...edgeIds).forEach(({ data: edgeData }) => {\n        edgeData.weight = weight;\n        edgeData.keyValueMap = annotations;\n      });\n      this.mainView.updateNodeInServer(graphItem.name);\n    });\n  }\n\n  ofDict(scene, dict = null, mainView = null) {\n    return Path.ofDict(scene, dict, mainView);\n  }\n\n  getCopyFunction(isForceUpdate = true) {\n    // mousePosFromRoot : Vector3\n    return (mousePosFromRoot, someMainView) => {\n      return super\n        .getCopyFunction(isForceUpdate)(mousePosFromRoot, someMainView)\n        .map(copiedPath => {\n          const kp = copiedPath?.keyPoints;\n          if (kp !== undefined && isPathOnGraph(this)) {\n            Path.updateGraph(someMainView, kp, copiedPath, true);\n          }\n          return copiedPath;\n        });\n    };\n  }\n\n  getType = () => Path.TYPE;\n\n  static TYPE = \"Path\";\n\n  static ofDict(scene, dict = null, mainView = null) {\n    if (!dict || !mainView)\n      throw new Error(\"null dictionary describing path or null mainView\");\n\n    const name = dict.name;\n    const curve = dict.localPath.map(z => Vec3.of(z).toBabylon());\n    const spline = Util3d.getSplineFromCurve(curve);\n    const { points } = spline;\n    let mesh = null;\n    //hack for creating 1 point curves\n    if (points.length === 1) {\n      mesh = MeshBuilder.CreateLines(\n        name,\n        { points: points, updatable: true },\n        scene\n      );\n    } else {\n      mesh = Util3d.createTubeFromPoints(\n        scene,\n        points,\n        Color3.Gray(),\n        RADIUS / 8,\n        name\n      );\n    }\n    mesh.position = Vec3.of(dict.position).toBabylon();\n    mesh.material = Util3d.getMaterialFromColor(\n      Color3.FromArray(dict.color),\n      scene,\n      `PathMaterial${name}`\n    );\n    mesh.rotationQuaternion = Maybe.fromNull(dict.quaternion)\n      .map(quaternion =>\n        new Quaternion(\n          quaternion[1],\n          quaternion[2],\n          quaternion[3],\n          quaternion[0]\n        ).normalize()\n      )\n      .orSome(Quaternion.Identity());\n    const splinePath = Util3d.splineObj2redis(spline);\n    const keyPoints = createPlaceHolderKeyPoints(\n      scene,\n      { ...dict, mesh, splinePath },\n      mainView\n    );\n    const path2return = new Path(\n      mesh,\n      curve.map(point => [point.x, point.y, point.z]),\n      keyPoints,\n      splinePath,\n      mainView,\n      dict.weight,\n      dict.keyValueMap\n    );\n    mesh.onClick = getMeshOnClick(mainView, path2return);\n    mesh.observers = new Observable();\n    mesh.observers.add(getMeshObserver(keyPoints));\n    return path2return;\n  }\n\n  /**\n   * Create new mesh from old, has side effects\n   *\n   * @param {*} newPoints: Vector3\n   * @param {*} scene: Scene\n   * @param {*} item: PathItem\n   * @param {*} mainView: MainView\n   * @param {*} keyPointUpdateFunction: (scene, mainView, mesh, item) => Array<Mesh>\n   */\n  static createNewMeshFromOldUsingNewPoints(\n    newPoints,\n    scene,\n    item,\n    mainView,\n    keyPointUpdateFunction = defaultKeyPointUpdate\n  ) {\n    const { mesh: oldMesh } = item;\n    const average = Util3d.pointAverage(newPoints);\n    newPoints = newPoints.map(x => x.subtract(average));\n\n    const spline = Util3d.getSplineFromCurve(newPoints);\n    const newMesh = Util3d.createTubeFromPoints(\n      scene,\n      spline.points,\n      Color3.Gray(),\n      RADIUS / 8,\n      oldMesh.name\n    );\n\n    // average in parent coord\n    const rotMat3 = Util3d.getRotationMatrix(oldMesh);\n    const scaleVec3 = Vec3.ofBabylon(oldMesh.scaling);\n    const averageInParentCoord = rotMat3\n      .prodVec(Vec3.ofBabylon(average).mul(scaleVec3))\n      .toBabylon();\n\n    newMesh.parent = oldMesh.parent;\n    newMesh.rotationQuaternion = oldMesh.rotationQuaternion;\n    newMesh.position = averageInParentCoord.add(oldMesh.position);\n\n    newMesh.material = oldMesh.material;\n    newMesh.visibility = oldMesh.visibility;\n    newMesh.onClick = oldMesh.onClick;\n    newMesh.getMouseContextActions = oldMesh.getMouseContextActions;\n    newMesh.nodeItem = oldMesh.nodeItem;\n    newMesh.observers = oldMesh.observers;\n    item.localPath = newPoints.map(x => Vec3.ofBabylon(x).toArray());\n    item.splinePath = Util3d.splineObj2redis(spline);\n    item.mesh = newMesh;\n    const oldKeyPoints = item.keyPoints;\n    item.keyPoints = keyPointUpdateFunction(scene, mainView, oldMesh, item);\n    // update observer that triggers keypoints observers\n    item.mesh.observers.clear();\n    item.mesh.observers.add(getMeshObserver(item.keyPoints));\n\n    Path.updateGraph(\n      mainView,\n      oldKeyPoints,\n      item,\n      oldKeyPoints.length !== item.keyPoints.length\n    );\n\n    oldMesh.dispose();\n    return item;\n  }\n\n  static deleteKeyPoint(scene, keyPointMesh, mainView) {\n    const index = keyPointMesh.index;\n    const name = keyPointMesh.parent.name;\n    mainView.getNodeFromTree(name).forEach(({ item }) => {\n      const { mesh } = item;\n      const copyPosition = { ...mesh.position };\n      let newPoints = item.localPath.map(x => Vec3.of(x).toBabylon());\n      mainView\n        .getUndoManager()\n        .doIt(\n          Path.getUndoDeleteKeyPoint(\n            name,\n            index,\n            copyPosition,\n            newPoints,\n            scene,\n            item,\n            mainView\n          )\n        );\n    });\n  }\n\n  static getUndoDeleteKeyPoint(\n    name,\n    index,\n    copyPosition,\n    newPoints,\n    scene,\n    item,\n    mainView\n  ) {\n    return UndoManager.actionBuilder()\n      .doAction(() => {\n        const copyPoints = [...newPoints];\n        copyPoints.splice(index, 1);\n        Path.createNewMeshFromOldUsingNewPoints(\n          copyPoints,\n          scene,\n          item,\n          mainView,\n          Path.onAddNewPointKeyPointUpdate\n        );\n        mainView.updateNodeInServer(name);\n      })\n      .undoAction(() => {\n        const copyPoints = [...newPoints];\n        item.mesh.position = copyPosition;\n        Path.createNewMeshFromOldUsingNewPoints(\n          copyPoints,\n          scene,\n          item,\n          mainView,\n          Path.onAddNewPointKeyPointUpdate\n        );\n        mainView.updateNodeInServer(name);\n      })\n      .build();\n  }\n\n  static onAddNewPointKeyPointUpdate(scene, mainView, oldMesh, item) {\n    // used when new keypoint is added\n    return createPlaceHolderKeyPoints(scene, item, mainView);\n  }\n\n  /**\n   *\n   * @param {*} scene\n   * @param {*} keyPointMesh\n   * @param {*} curveMesh\n   * @param {*} mainView\n   * @param {*} orientation: it belongs to the set {-1,1}, represents orientation\n   */\n  static addKeyPointInBetween(scene, keyPointMesh, mainView, orientation) {\n    const index = keyPointMesh.index;\n    const name = keyPointMesh.parent.name;\n    mainView.getNodeFromTree(name).forEach(({ item }) => {\n      const points = item.localPath.map(x => Vec3.of(x).toBabylon());\n      const copyPosition = { ...item.mesh.position };\n      mainView\n        .getUndoManager()\n        .doIt(\n          Path.getUndoAddKeyPointInBetween(\n            name,\n            index,\n            orientation,\n            item,\n            points,\n            copyPosition,\n            scene,\n            mainView\n          )\n        );\n    });\n  }\n\n  static getUndoAddKeyPointInBetween(\n    name,\n    index,\n    orientation,\n    item,\n    points,\n    copyPosition,\n    scene,\n    mainView\n  ) {\n    return UndoManager.actionBuilder()\n      .doAction(() => {\n        const nextIndex = index + orientation;\n        const numberOfPoints = item.localPath.length;\n        let newPoints = [];\n        const oldPoints = [...points];\n        if (nextIndex < 0) {\n          newPoints = [\n            oldPoints[0].scale(3).subtract(oldPoints[1]).scale(0.5)\n          ].concat(oldPoints);\n        } else if (nextIndex > numberOfPoints - 1) {\n          newPoints = oldPoints.concat([\n            oldPoints[numberOfPoints - 1]\n              .scale(3)\n              .subtract(oldPoints[numberOfPoints - 2])\n              .scale(0.5)\n          ]);\n        } else {\n          const specialIndex = index + Math.max(0, orientation);\n          for (let i = 0; i < specialIndex; i++) {\n            newPoints.push(oldPoints[i]);\n          }\n          newPoints.push(oldPoints[nextIndex].add(oldPoints[index]).scale(0.5));\n          for (let i = specialIndex; i < numberOfPoints; i++) {\n            newPoints.push(oldPoints[i]);\n          }\n        }\n\n        Path.createNewMeshFromOldUsingNewPoints(\n          newPoints,\n          scene,\n          item,\n          mainView,\n          Path.onAddNewPointKeyPointUpdate\n        );\n\n        mainView.updateNodeInServer(name);\n      })\n      .undoAction(() => {\n        const copyPoints = [...points];\n        item.mesh.position = copyPosition;\n        Path.createNewMeshFromOldUsingNewPoints(\n          copyPoints,\n          scene,\n          item,\n          mainView,\n          Path.onAddNewPointKeyPointUpdate\n        );\n\n        mainView.updateNodeInServer(name);\n      })\n      .build();\n  }\n\n  /**\n   *\n   * @param {*} mainView: MainView\n   * @param {*} oldKpMeshes: Mesh\n   * @param {*} pathItem: PathItem\n   * @param {*} isTopologyChange: boolean\n   */\n  static updateGraph(mainView, oldKpMeshes, pathItem, isTopologyChange) {\n    if (!isTopologyChange) return;\n    mainView.getGraph().forEach(({ item: graph }) => {\n      //naive algorithm, delete all vertices\n      oldKpMeshes.forEach(kp => {\n        graph.delVertexFromMesh(kp, false);\n      });\n      // add final edge\n      const keyPoints = pathItem.keyPoints;\n      const edgeMeshes = [keyPoints[0], keyPoints[keyPoints.length - 1]];\n      graph.addEdge(...edgeMeshes);\n      mainView.updateNodeInServer(graph.name);\n    });\n  }\n}\n\nexport default Path;\n\nconst getMeshOnClick = (mainView, nodeItem) => () => {\n  mainView.closeContextDial();\n  mainView\n    .getNodeFromTree(nodeItem.name)\n    .forEach(node => (node.item.selectedKeyPointIndex = -1));\n};\n\nconst getMeshObserver = keypoints => ({\n  updatedPointMesh,\n  is2updateServer,\n  displacement\n}) => {\n  keypoints.forEach(k => {\n    if (!!k.graphVertex) {\n      k.graphVertex.vertexObs({\n        updatedPointMesh: k,\n        is2updateServer,\n        displacement\n      });\n    }\n  });\n};\n\nfunction defaultKeyPointUpdate(scene, mainView, oldMesh, item) {\n  // used when key point is updated\n  const childrenCopy = [...oldMesh._children];\n  const spline = item.splinePath.map(z => new Vector3(z[0], z[1], 0));\n  childrenCopy.forEach(c => {\n    c.parent = item.mesh;\n  });\n  return item.keyPoints.map((k, i) => {\n    k.index = i;\n    k.name = `${oldMesh.name}keyPointSpline${i}`;\n    k.position = Vec3.of(item.localPath[i]).toBabylon();\n    k.rotationQuaternion = Quaternion.Identity();\n    if (!!oldMesh.graphVertex) k.graphVertex = oldMesh.graphVertex;\n    if (i > 0 && i < item.keyPoints.length - 1) {\n      k._children.forEach(kChild => kChild.dispose());\n      const c = getConeMesh(\n        scene,\n        k.material.diffuseColor,\n        item.mesh,\n        i,\n        spline,\n        k.position\n      )();\n      c.parent = k;\n    }\n    return k;\n  });\n}\n\nconst getKeyPointObserverFunction = (scene, mainView) => {\n  return ({ updatedPointMesh, is2updateServer, displacement }) => {\n    if (!updatedPointMesh.parent) return;\n    mainView\n      .getNodeFromTree(updatedPointMesh.parent.name)\n      .forEach(({ item }) => {\n        const { index } = updatedPointMesh;\n        const { mesh } = item;\n        let newPoints = item.localPath.map(x => Vec3.of(x).toBabylon());\n        newPoints[index] = updatedPointMesh.position;\n        Path.createNewMeshFromOldUsingNewPoints(\n          newPoints,\n          scene,\n          item,\n          mainView\n        );\n        if (index > 0 && index < newPoints.length - 1) {\n          // we know by construction that this keyPoint has children\n          mainView.highlightMeshesInScene([item.keyPoints[index]._children[0]]);\n        }\n        if (is2updateServer) {\n          mainView.updateNodeInServer(mesh.name);\n          mainView.setProperties(item.toForm());\n        }\n      });\n  };\n};\n\nconst getKeyPointActions = (scene, keyPointMesh, mainView) => {\n  const actions = [];\n\n  mainView.getNodeFromTree(keyPointMesh.parent.name).forEach(pathTreeNode => {\n    const item = pathTreeNode.item;\n    const curve = item.localPath;\n\n    if (curve.length !== 2) {\n      actions.push({\n        icon: props => <i className=\"fas fa-trash\" {...props}></i>,\n        action: parentView => {\n          Path.deleteKeyPoint(scene, keyPointMesh, parentView);\n          parentView.closeContextDial();\n        },\n        name: \"Delete node [DEL]\"\n      });\n    }\n\n    actions.push({\n      icon: props => <i className=\"fas fa-less-than\" {...props}></i>,\n      action: parentView => {\n        Path.addKeyPointInBetween(scene, keyPointMesh, parentView, -1);\n        parentView.closeContextDial();\n      },\n      name: \"Add previous\"\n    });\n\n    actions.push({\n      icon: props => <i className=\"fas fa-greater-than\" {...props}></i>,\n      action: parentView => {\n        Path.addKeyPointInBetween(scene, keyPointMesh, parentView, 1);\n        parentView.closeContextDial();\n      },\n      name: \"Add next\"\n    });\n  });\n\n  return actions;\n};\n\nconst createPlaceHolderKeyPoints = (scene, item, mainView) => {\n  const color = new Color3(0.25, 0.25, 0.25);\n  const keyPoints = [];\n  const curve = item.localPath.map(z => Vec3.of(z).toBabylon());\n  const spline = item.splinePath.map(z => new Vector3(z[0], z[1], 0));\n  const curveMesh = item.mesh;\n  curve.forEach((p, i) => {\n    const sphere = getSphereMesh(scene, color, curveMesh, i);\n    const cone = () => {\n      const c = getConeMesh(scene, color, curveMesh, i, spline, p)();\n      const s = getSphereMesh(scene, color, curveMesh, i)();\n      s.visibility = 0.1;\n      c.parent = s;\n      return s;\n    };\n\n    const keyPoint = i === 0 || i === curve.length - 1 ? sphere() : cone();\n    keyPoint.parent = curveMesh;\n    keyPoint.position = p;\n    keyPoint.index = i;\n    keyPoint.observers = new Observable();\n\n    keyPoints.push(keyPoint);\n\n    keyPoint.observers.add(getKeyPointObserverFunction(scene, mainView));\n  });\n\n  keyPoints.forEach(kp => {\n    kp.onClick = () => {\n      mainView.setContextActions(getKeyPointActions(scene, kp, mainView));\n      mainView.getNodeFromTree(kp.parent.name).forEach(node => {\n        node.item.selectedKeyPointIndex = kp.index;\n        mainView.setProperties(node.item.toForm());\n      });\n    };\n  });\n  return keyPoints;\n};\n\nfunction getConeMesh(scene, color, curveMesh, i, spline, p) {\n  return () => {\n    const index = spline\n      .map(z => p.subtract(z).length())\n      .reduce((e, x, i) => (e.value < x ? e : { value: x, index: i }), {\n        value: Number.MAX_VALUE,\n        index: -1\n      }).index;\n    const u = spline[index + 1]\n      .subtract(spline[index])\n      .normalize()\n      .scale(RADIUS);\n    const c = Util3d.createOrientedCone(\n      scene,\n      u,\n      color,\n      `${curveMesh.name}keyPointCone${i}`,\n      false\n    );\n    return c;\n  };\n}\n\nfunction getSphereMesh(scene, color, curveMesh, i) {\n  return () =>\n    Util3d.createSphere(\n      scene,\n      color,\n      RADIUS,\n      `${curveMesh.name}keyPointSpline${i}`,\n      true\n    );\n}\n\nfunction isPathOnGraph(pathItem) {\n  return [\n    pathItem.keyPoints[0]?.graphVertex,\n    pathItem.keyPoints[pathItem.keyPoints.length - 1]?.graphVertex\n  ].every(v => !!v);\n}\n","import NodeItem from \"./NodeItem\";\nimport { Mesh, StandardMaterial, Color3, VertexData } from \"@babylonjs/core\";\nimport { Maybe } from \"monet\";\nimport { Utils, MasterDB } from \"mov-fe-lib-core\";\nconst ofNull = Utils.ofNull;\n\nclass PointCloud extends NodeItem {\n  /**\n   *\n   * @param {*} mesh\n   * @param {*} robot: {name: string, id: string} representing a robot\n   */\n  constructor(mesh, robot) {\n    super(mesh);\n    this.robot = robot;\n    this.pointCloudSubscribe();\n  }\n\n  pointCloudSubscribe() {\n    MasterDB.subscribe(\n      {\n        Scope: \"Robot\",\n        Name: this.robot.id,\n        Parameter: \"front_lidar\"\n      },\n      data => {\n        Maybe.fromNull(data)\n          .flatMap(d => ofNull(d.key))\n          .flatMap(k => ofNull(k.Robot[this.robot.id]))\n          .flatMap(r => ofNull(r.Parameter))\n          .flatMap(p => ofNull(p.front_lidar))\n          .flatMap(f => ofNull(f.Value))\n          .flatMap(v => ofNull(v.points))\n          .forEach(points => this.updatePointCloud(points));\n      },\n      data => {\n        Maybe.fromNull(data.value)\n          .flatMap(v => ofNull(v.Robot))\n          .flatMap(r => ofNull(r[this.robot.id]))\n          .flatMap(r => ofNull(r.Parameter))\n          .flatMap(p => ofNull(p.front_lidar))\n          .flatMap(f => ofNull(f.Value))\n          .flatMap(v => ofNull(v.points))\n          .forEach(points => this.updatePointCloud(points));\n      }\n    );\n  }\n\n  /**\n   *\n   * @param {*} points: Array<3-Array>\n   */\n  updatePointCloud(points) {\n    const vertexData = new VertexData();\n    //Assign positions\n    vertexData.positions = points.flatMap(x => x);\n    const colors = new Array(4 * points.length);\n    vertexData.colors = colors.fill(1.0);\n    //Apply vertexData to custom mesh\n    vertexData.applyToMesh(this.mesh, true);\n  }\n\n  dispose() {\n    super.dispose();\n    MasterDB.unsubscribe({\n      Scope: \"Robot\",\n      Name: this.robot.id,\n      Parameter: \"front_lidar\"\n    });\n  }\n\n  getType = () => PointCloud.TYPE;\n\n  static TYPE = \"PointCloud\";\n\n  static ofDict(scene, dict = null, mainView = null) {\n    if (!dict || !mainView)\n      throw new Error(\n        \"null dictionary describing point cloud or null mainView\"\n      );\n\n    const pointCloudMesh = new Mesh(`cloudPoint${dict.name}`, scene);\n    const mat = new StandardMaterial(`cloudPoint${dict.name}Material`, scene);\n    mat.emissiveColor = new Color3(1, 1, 1);\n    mat.disableLighting = true;\n    mat.pointsCloud = true;\n    mat.pointSize = 2;\n    pointCloudMesh.material = mat;\n\n    return new PointCloud(pointCloudMesh, dict);\n  }\n}\n\nexport default PointCloud;\n","import NodeItem from \"./NodeItem\";\nimport Vec3 from \"../Math/Vec3\";\nimport Util3d from \"../Util3d/Util3d\";\nimport { Maybe } from \"monet\";\nimport React from \"react\";\nimport { Utils } from \"mov-fe-lib-core\";\nimport Constants from \"../Utils/Constants\";\nimport {\n  Vector3,\n  Observable,\n  Color3,\n  StandardMaterial,\n  Quaternion\n} from \"@babylonjs/core\";\nimport { UndoManager } from \"mov-fe-lib-core\";\n\nconst RADIUS = Constants.RADIUS;\nconst positiveMod = Utils.mod;\n\nclass PolygonRegion extends NodeItem {\n  /**\n   * @param {*} mesh\n   * @param {*} localPolygon: is an array of 3-arrays of numbers of the local coordinates in relation to mesh.position and quaternion\n   * @param {*} keyPoints: are the keyPoints meshes array\n   */\n  constructor(mesh, localPolygon, height, keyPoints, keyValueMap = {}) {\n    super(mesh, keyValueMap);\n    this.localPolygon = localPolygon;\n    this.height = height;\n    this.keyPoints = keyPoints;\n  }\n\n  toDict() {\n    const dict = super.toDict();\n    dict.localPolygon = this.localPolygon;\n    dict.height = this.height;\n    return dict;\n  }\n\n  ofDict(scene, dict = null, mainView = null) {\n    return PolygonRegion.ofDict(scene, dict, mainView);\n  }\n\n  getType = () => PolygonRegion.TYPE;\n\n  static TYPE = \"PolygonRegion\";\n\n  static ofDict(scene, dict = null, mainView = null) {\n    if (!dict || !mainView)\n      throw new Error(\"null dictionary describing polygon or null mainView\");\n\n    const polygon = dict.localPolygon.map(z => Vec3.of(z).toBabylon());\n    const middlePoint = Vec3.of(dict.position).toBabylon();\n\n    const mesh = createExtrudedPolygonMesh(\n      scene,\n      polygon,\n      dict.height,\n      dict.name\n    );\n    mesh.position = middlePoint;\n\n    const material = new StandardMaterial(`PolygonMaterial${dict.name}`, scene);\n    const color = new Color3(dict.color[0], dict.color[1], dict.color[2]);\n    material.diffuseColor = color;\n    material.emissiveColor = color;\n    mesh.material = material;\n    mesh.visibility = 0.5;\n    Maybe.fromNull(dict.quaternion).forEach(quaternion => {\n      const babylonQuaternion = new Quaternion(\n        quaternion[1],\n        quaternion[2],\n        quaternion[3],\n        quaternion[0]\n      );\n      mesh.rotationQuaternion = babylonQuaternion.normalize();\n    });\n\n    const keypoints = createPlaceHolderKeyPoints(\n      scene,\n      polygon,\n      mesh,\n      mainView\n    );\n\n    return new PolygonRegion(\n      mesh,\n      polygon.map(point => [point.x, point.y, point.z]),\n      dict.height,\n      keypoints,\n      dict.keyValueMap\n    );\n  }\n\n  /**\n   * Create new mesh from old, has side effects\n   *\n   * @param {*} newPoints: Vector3\n   * @param {*} scene: Scene\n   * @param {*} item: PathItem\n   * @param {*} mainView: MainView\n   * @param {*} keyPointUpdateFunction: (scene, mainView, mesh, item) => Array<Mesh>\n   */\n  static createNewMeshFromOldUsingNewPoints(\n    newPoints,\n    scene,\n    item,\n    mainView,\n    keyPointUpdateFunction = defaultKeyPointUpdate\n  ) {\n    const { mesh: oldMesh } = item;\n    const average = Util3d.pointAverage(newPoints);\n    newPoints = newPoints.map(x => x.subtract(average));\n\n    // average in parent coord\n    const rotMat3 = Util3d.getRotationMatrix(oldMesh);\n    const scaleVec3 = Vec3.ofBabylon(oldMesh.scaling);\n    const averageInParentCoord = rotMat3\n      .prodVec(Vec3.ofBabylon(average).mul(scaleVec3))\n      .toBabylon();\n\n    // update mesh\n    const newMesh = createExtrudedPolygonMesh(\n      scene,\n      newPoints,\n      item.height,\n      oldMesh.name\n    );\n\n    newMesh.parent = oldMesh.parent;\n    newMesh.rotationQuaternion = oldMesh.rotationQuaternion;\n    newMesh.position = averageInParentCoord.add(oldMesh.position);\n\n    newMesh.material = oldMesh.material;\n    newMesh.visibility = oldMesh.visibility;\n    newMesh.onClick = oldMesh.onClick;\n    newMesh.getMouseContextActions = oldMesh.getMouseContextActions;\n    newMesh.nodeItem = oldMesh.nodeItem;\n    newMesh.observers = oldMesh.observers;\n    if (!!oldMesh.graphVertex) newMesh.graphVertex = oldMesh.graphVertex;\n\n    item.localPolygon = newPoints.map(x => Vec3.ofBabylon(x).toArray());\n    item.mesh = newMesh;\n    item.keyPoints = keyPointUpdateFunction(scene, mainView, oldMesh, item);\n\n    oldMesh.dispose();\n    return newPoints;\n  }\n\n  static deleteKeyPoint(scene, keyPointMesh, mainView) {\n    const index = keyPointMesh.index;\n    const name = keyPointMesh.parent.name;\n    mainView.getNodeFromTree(name).forEach(({ item }) => {\n      const { mesh } = item;\n      const copyPosition = { ...mesh.position };\n      let newPoints = item.localPolygon.map(x => Vec3.of(x).toBabylon());\n      mainView\n        .getUndoManager()\n        .doIt(\n          PolygonRegion.getUndoDeleteKeyPoint(\n            name,\n            index,\n            copyPosition,\n            newPoints,\n            scene,\n            item,\n            mainView\n          )\n        );\n    });\n  }\n\n  static getUndoDeleteKeyPoint(\n    name,\n    index,\n    copyPosition,\n    newPoints,\n    scene,\n    item,\n    mainView\n  ) {\n    return UndoManager.actionBuilder()\n      .doAction(() => {\n        const copyPoints = [...newPoints];\n        copyPoints.splice(index, 1);\n        PolygonRegion.createNewMeshFromOldUsingNewPoints(\n          copyPoints,\n          scene,\n          item,\n          mainView,\n          PolygonRegion.onAddNewPointKeyPointUpdate\n        );\n        mainView.updateNodeInServer(name);\n      })\n      .undoAction(() => {\n        const copyPoints = [...newPoints];\n        item.mesh.position = copyPosition;\n        PolygonRegion.createNewMeshFromOldUsingNewPoints(\n          copyPoints,\n          scene,\n          item,\n          mainView,\n          PolygonRegion.onAddNewPointKeyPointUpdate\n        );\n        mainView.updateNodeInServer(name);\n      })\n      .build();\n  }\n\n  static onAddNewPointKeyPointUpdate(scene, mainView, oldMesh, item) {\n    // used when new keypoint is added\n    return createPlaceHolderKeyPoints(\n      scene,\n      item.localPolygon.map(x => Vec3.of(x).toBabylon()),\n      item.mesh,\n      mainView\n    );\n  }\n\n  /**\n   *\n   * @param {*} scene\n   * @param {*} keyPointMesh\n   * @param {*} curveMesh\n   * @param {*} mainView\n   * @param {*} orientation: it belongs to the set {-1,1}, represents orientation\n   */\n  static addKeyPointInBetween = (\n    scene,\n    keyPointMesh,\n    mainView,\n    orientation\n  ) => {\n    const index = keyPointMesh.index;\n    const name = keyPointMesh.parent.name;\n    mainView.getNodeFromTree(name).forEach(({ item }) => {\n      const copyPosition = { ...item.mesh.position };\n      const points = item.localPolygon.map(x => Vec3.of(x).toBabylon());\n      mainView\n        .getUndoManager()\n        .doIt(\n          PolygonRegion.getUndoAddKeyPointInBetween(\n            name,\n            index,\n            orientation,\n            item,\n            points,\n            copyPosition,\n            scene,\n            mainView\n          )\n        );\n    });\n  };\n\n  static getUndoAddKeyPointInBetween(\n    name,\n    index,\n    orientation,\n    item,\n    points,\n    copyPosition,\n    scene,\n    mainView\n  ) {\n    return UndoManager.actionBuilder()\n      .doAction(() => {\n        const numberOfPoints = points.length;\n        const nextIndex = positiveMod(index + orientation, numberOfPoints);\n        let newPoints = [];\n        const specialIndex = index + Math.max(0, orientation);\n        for (let i = 0; i < specialIndex; i++) {\n          newPoints.push(points[i]);\n        }\n        newPoints.push(points[nextIndex].add(points[index]).scale(0.5));\n        for (let i = specialIndex; i < numberOfPoints; i++) {\n          newPoints.push(points[i]);\n        }\n        PolygonRegion.createNewMeshFromOldUsingNewPoints(\n          newPoints,\n          scene,\n          item,\n          mainView,\n          PolygonRegion.onAddNewPointKeyPointUpdate\n        );\n        mainView.updateNodeInServer(name);\n      })\n      .undoAction(() => {\n        const copyPoints = [...points];\n        item.mesh.position = copyPosition;\n        PolygonRegion.createNewMeshFromOldUsingNewPoints(\n          copyPoints,\n          scene,\n          item,\n          mainView,\n          PolygonRegion.onAddNewPointKeyPointUpdate\n        );\n        mainView.updateNodeInServer(name);\n      })\n      .build();\n  }\n}\n\n/**\n *\n * @param {*} polygon: boundary as babylonjs vec3\n */\nconst stitchingBoundaries = polygon => {\n  const n = polygon.length;\n  const orientation = Util3d.computeOrientation(polygon);\n  const ans = [];\n  for (let i = 0; i < n; i++) {\n    const modi = (i + 1) % n;\n    ans.push([i, n + modi, modi]);\n    ans.push([i, n + i, n + modi]);\n  }\n  return orientation > 0 ? ans : ans.map(reverseOrientation);\n};\n\nconst reverseOrientation = triangleIndex => {\n  const ans = [];\n  ans.push(triangleIndex[1]);\n  ans.push(triangleIndex[0]);\n  ans.push(triangleIndex[2]);\n  return ans;\n};\n\n/**\n *\n * @param {*} scene\n * @param {*} polygon array of babylon js vector3\n * @param {*} height\n * @param {*} name\n */\nconst createExtrudedPolygonMesh = (scene, polygon, height, name) => {\n  const h = new Vector3(0, 0, height);\n  const polygonRegionMesh = {\n    positions: [],\n    faces: []\n  };\n  polygonRegionMesh.positions = [...polygon];\n  for (let i = 0; i < polygon.length; i++) {\n    polygonRegionMesh.positions.push(polygon[i].add(h));\n  }\n  const n = polygon.length;\n  const lowerTriangulation = Util3d.triangulatePolygon(polygon);\n  const upperTriangulation = Util3d.triangulatePolygon(\n    polygonRegionMesh.positions.slice(n)\n  )\n    .map(x => x.map(z => z + n))\n    .map(reverseOrientation);\n  const stitchTriangulation = stitchingBoundaries(polygon);\n  polygonRegionMesh.faces = lowerTriangulation\n    .concat(upperTriangulation)\n    .concat(stitchTriangulation);\n  const mesh = Util3d.meshFromPositionAndFaces(\n    name,\n    scene,\n    polygonRegionMesh.positions,\n    polygonRegionMesh.faces\n  );\n  return mesh;\n};\n\nfunction defaultKeyPointUpdate(scene, mainView, oldMesh, item) {\n  // used when keypoint is updated or deleted\n  const childrenCopy = [...oldMesh._children];\n  childrenCopy.forEach(c => {\n    c.parent = item.mesh;\n    console.log(\"Moving parents of child\", c.name);\n  });\n\n  return item.keyPoints.map((k, i) => {\n    k.observers = new Observable();\n    k.observers.add(getKeyPointObserverFunction(scene, mainView));\n    k.index = i;\n    k.name = `${oldMesh.name}keyPoint${i}`;\n    k.position = Vec3.of(item.localPolygon[i]).toBabylon();\n    return k;\n  });\n}\n\nconst getKeyPointObserverFunction = (scene, mainView) => {\n  return ({ updatedPointMesh, is2updateServer }) => {\n    if (!updatedPointMesh.parent) return;\n    mainView\n      .getNodeFromTree(updatedPointMesh.parent.name)\n      .forEach(polygonTreeNode => {\n        const index = updatedPointMesh.index;\n        const item = polygonTreeNode.item;\n        const mesh = item.mesh;\n        const name = mesh.name;\n        let newPoints = item.localPolygon.map(x => Vec3.of(x).toBabylon());\n        newPoints[index] = updatedPointMesh.position;\n        PolygonRegion.createNewMeshFromOldUsingNewPoints(\n          newPoints,\n          scene,\n          item,\n          mainView\n        );\n        if (is2updateServer) {\n          mainView.updateNodeInServer(name);\n        }\n        // signal observers\n        Maybe.fromNull(item.mesh.observers).forEach(obs => {\n          //side effect update absolute position\n          item.mesh.getAbsolutePosition();\n          obs.notifyObservers({\n            updatedPointMesh: item.mesh,\n            is2updateServer: is2updateServer,\n            displacement: Vector3.Zero()\n          });\n        });\n        Maybe.fromNull(item.mesh.graphVertex).forEach(({ vertexObs }) => {\n          item.mesh.getAbsolutePosition();\n          vertexObs({\n            updatedPointMesh: item.mesh,\n            is2updateServer: is2updateServer,\n            displacement: Vector3.Zero()\n          });\n        });\n      });\n  };\n};\n\nconst getKeyPointActions = (scene, keyPointMesh, mainView) => {\n  const actions = [];\n  mainView.getNodeFromTree(keyPointMesh.parent.name).forEach(pathTreeNode => {\n    const item = pathTreeNode.item;\n    const polygon = item.localPolygon;\n    if (polygon.length > 3) {\n      actions.push({\n        icon: props => <i className=\"fas fa-trash\" {...props}></i>,\n        action: parentView => {\n          PolygonRegion.deleteKeyPoint(scene, keyPointMesh, parentView);\n          parentView.closeContextDial();\n        },\n        name: \"Delete node [DEL]\"\n      });\n    }\n    actions.push({\n      icon: props => <i className=\"fas fa-less-than\" {...props}></i>,\n      action: parentView => {\n        PolygonRegion.addKeyPointInBetween(scene, keyPointMesh, parentView, -1);\n        parentView.closeContextDial();\n      },\n      name: \"Add previous\"\n    });\n    actions.push({\n      icon: props => <i className=\"fas fa-greater-than\" {...props}></i>,\n      action: parentView => {\n        PolygonRegion.addKeyPointInBetween(scene, keyPointMesh, parentView, 1);\n        parentView.closeContextDial();\n      },\n      name: \"Add next\"\n    });\n  });\n\n  return actions;\n};\n\nconst createPlaceHolderKeyPoints = (scene, polygon, polygonMesh, mainView) => {\n  const keyPoints = [];\n  polygon.forEach((p, i) => {\n    const color = new Color3(0.25, 0.25, 0.25);\n    const keyPoint = Util3d.createSphere(\n      scene,\n      color,\n      RADIUS,\n      `${polygonMesh.name}keyPointPolygon${i}`,\n      true\n    );\n    keyPoint.parent = polygonMesh;\n    keyPoint.position = p;\n    keyPoint.index = i;\n    keyPoint.observers = new Observable();\n\n    keyPoints.push(keyPoint);\n\n    keyPoint.observers.add(getKeyPointObserverFunction(scene, mainView));\n  });\n\n  keyPoints.forEach(x => {\n    x.onClick = () => {\n      mainView.setContextActions(getKeyPointActions(scene, x, mainView));\n    };\n  });\n\n  return keyPoints;\n};\n\nexport default PolygonRegion;\n","import Vec3 from \"../Math/Vec3\";\nimport Util3d from \"../Util3d/Util3d\";\nimport { Database } from \"mov-fe-lib-core\";\nimport AssetNodeItem from \"./AssetNodeItem\";\nimport { Axis, Space, Vector3, Quaternion, Color3 } from \"@babylonjs/core\";\nimport _get from \"lodash/get\";\n\nclass Robot extends AssetNodeItem {\n  static ROBOT_MESH_NAME = \"Tugbot.stl\";\n\n  constructor(meshTree, assetName, keyValueMap = {}) {\n    super(meshTree.mesh, assetName, keyValueMap);\n    this.requestAnimationFrameId = null;\n    this.meshTree = meshTree;\n    this.timeSinceLastUpdate = 0;\n    this.isOnline = true;\n    this.speed = Vector3.Zero();\n    this.qSpeed = Quaternion.Zero();\n    this.newPos = Vector3.Zero();\n    this.newOri = Quaternion.Identity();\n    this.db = new Database();\n  }\n\n  toDict() {\n    let dict = super.toDict();\n    return dict;\n  }\n\n  toForm() {\n    const schema = super.toForm();\n    schema.jsonSchema.properties = {\n      oldName: schema.jsonSchema.properties.oldName,\n      name: schema.jsonSchema.properties.name,\n      type: schema.jsonSchema.properties.type,\n      assetName: {\n        type: \"string\",\n        title: \"Asset Name\"\n      },\n      position: schema.jsonSchema.properties.position,\n      quaternion: schema.jsonSchema.properties.quaternion,\n      color: schema.jsonSchema.properties.color,\n      annotations: schema.jsonSchema.properties.annotations\n    };\n    schema.uiSchema[\"assetName\"] = {\n      \"ui:disabled\": true\n    };\n    schema.data[\"assetName\"] = this.assetName;\n    return schema;\n  }\n\n  dispose() {\n    super.dispose();\n    this.db.unsubscribe({\n      Scope: \"Robot\",\n      Name: this.meshTree.id,\n      Parameter: \"tf\"\n    });\n    window.cancelAnimationFrame(this.requestAnimationFrameId);\n  }\n\n  updateRobot = (robot, oldTimeInMillis, robotAnimator) => {\n    const time = new Date().getTime();\n    const dt = 1e-3 * (time - oldTimeInMillis);\n    robotAnimator(robot, dt);\n    this.requestAnimationFrameId = requestAnimationFrame(() =>\n      this.updateRobot(robot, time, robotAnimator)\n    );\n  };\n\n  animate = robotAnimator => {\n    this.requestAnimationFrameId = requestAnimationFrame(() =>\n      this.updateRobot(this, new Date().getTime(), robotAnimator)\n    );\n  };\n\n  getType = () => Robot.TYPE;\n\n  toOffline() {\n    if (this.mesh.isDisposed()) return;\n    this.mesh._children[0]._children[0].visibility = 0.1;\n    this.speed = Vector3.Zero();\n    this.qSpeed = Quaternion.Zero();\n    this.isOnline = false;\n  }\n\n  toOnline() {\n    if (this.mesh.isDisposed()) return;\n    this.mesh._children[0]._children[0].visibility = 1;\n    this.isOnline = true;\n  }\n  //========================================================================================\n  /*                                                                                      *\n   *                                   Static Functions                                   *\n   *                                                                                      */\n  //========================================================================================\n\n  static TYPE = \"Robot\";\n\n  static TIME_2_BE_OFFLINE_IN_SEC = 10;\n\n  static getDefaultAnimator = parentView => (robot, dt) => {\n    const mesh = robot.mesh;\n    const speed = 3;\n    const vel = Util3d.getRotationMatrix(mesh)\n      .prodVec(new Vec3([speed, 0, 0]))\n      .toBabylon();\n    mesh.position = mesh.position.add(vel.scale(dt));\n    mesh.rotate(Axis.Z, (-Math.PI / 2) * dt, Space.LOCAL);\n  };\n\n  static updateRobotMeshTree(newRobotTf, robot) {\n    const lastPosition = robot.mesh.position;\n    const lastOrientation = robot.mesh.rotationQuaternion;\n    const newPosition = new Vector3(\n      newRobotTf.position.x,\n      newRobotTf.position.y,\n      newRobotTf.position.z\n    );\n    const newOrientation = new Quaternion(\n      newRobotTf.orientation.x,\n      newRobotTf.orientation.y,\n      newRobotTf.orientation.z,\n      newRobotTf.orientation.w\n    ).normalize();\n\n    const dtReciprocal = 1 / robot.timeSinceLastUpdate;\n    robot.speed = newPosition.subtract(lastPosition).scale(dtReciprocal);\n    robot.qSpeed = newOrientation.subtract(lastOrientation).scale(dtReciprocal);\n    robot.newPos = newPosition;\n    robot.newOri = newOrientation;\n    robot.timeSinceLastUpdate = 0;\n  }\n\n  static getSocketAnimator = (robot, parentView) => {\n    robot.db.subscribe(\n      { Scope: \"Robot\", Name: robot.meshTree.id, Parameter: \"tf\" },\n      data => {\n        const tf = _get(\n          data,\n          `key.Robot.${robot.meshTree.id}.Parameter.tf.Value`,\n          undefined\n        );\n        if (tf) Robot.updateRobotMeshTree(tf, robot);\n      },\n      data => {\n        const tf = _get(\n          data,\n          `key.Robot.${robot.meshTree.id}.Parameter.tf.Value`,\n          undefined\n        );\n        if (tf) Robot.updateRobotMeshTree(tf, robot);\n      }\n    );\n    return (robot2Animate, dt) => {\n      const epsilon = 1e-2;\n      const n = 1 / epsilon;\n      const biasedCoin = robot2Animate.timeSinceLastUpdate % n; // Math.random() < epsilon\n      robot2Animate.timeSinceLastUpdate += dt;\n      if (Vec3.ofBabylon(robot2Animate.speed).someNaNOrInfinite()) return;\n      if (Vec3.ofBabylon(robot2Animate.qSpeed).someNaNOrInfinite()) return;\n      robot2Animate.mesh.position = biasedCoin\n        ? robot2Animate.newPos\n        : robot2Animate.mesh.position.add(robot2Animate.speed.scale(dt));\n      robot2Animate.mesh.rotationQuaternion = biasedCoin\n        ? robot2Animate.newOri\n        : robot2Animate.mesh.rotationQuaternion\n            .add(robot.qSpeed.scale(dt))\n            .normalize();\n      Robot.setOnOffLine(robot2Animate);\n    };\n  };\n\n  static setOnOffLine(robot) {\n    if (robot.timeSinceLastUpdate > Robot.TIME_2_BE_OFFLINE_IN_SEC) {\n      robot.toOffline();\n    } else {\n      if (!robot.isOnline) robot.toOnline();\n    }\n  }\n\n  /**\n   * Side effect function\n   */\n  static transformMesh(mesh, scene) {\n    const thetaX = Math.PI / 2;\n    const translate = 0.25;\n    const boundScale = 1.9;\n\n    const boundingSphere = mesh.getBoundingInfo().boundingSphere;\n    mesh.position.set(\n      -boundingSphere.center.x,\n      -boundingSphere.center.y,\n      -boundingSphere.center.z\n    );\n\n    const tfSphereMesh = Util3d.createSphere(\n      scene,\n      new Color3(0.0, 0.0, 0.0),\n      0.5 * boundingSphere.radius,\n      `tfsphere${mesh.name}`,\n      false\n    );\n    tfSphereMesh.visibility = 0.25;\n    tfSphereMesh.scaling = Vec3.ONES.scale(\n      1 / boundingSphere.radius\n    ).toBabylon();\n\n    tfSphereMesh.addRotation(thetaX, 0, 0);\n    tfSphereMesh.position.set(0, 0, translate);\n    const spherePlaceHolder = Util3d.createSphere(\n      scene,\n      new Color3(0.0, 0.0, 0.0),\n      boundScale,\n      mesh.name,\n      true\n    );\n    spherePlaceHolder.visibility = 0.1;\n\n    mesh.parent = tfSphereMesh;\n    tfSphereMesh.parent = spherePlaceHolder;\n    return spherePlaceHolder;\n  }\n\n  static createRobotMeshTreeRecursive(node, mesh, parent, scene) {\n    if (!mesh) {\n      mesh = Util3d.createSphere(\n        scene,\n        new Color3(0.0, 0.0, 0.0),\n        0.5,\n        node.name,\n        false\n      );\n    }\n    const meshTree = {\n      mesh: mesh,\n      children: []\n    };\n    const position = new Vector3(\n      node.position.x,\n      node.position.y,\n      node.position.z\n    );\n    const quaternion = new Quaternion(\n      node.orientation.x,\n      node.orientation.y,\n      node.orientation.z,\n      node.orientation.w\n    );\n    mesh.position = position;\n    mesh.rotationQuaternion = quaternion;\n    if (parent) {\n      mesh.parent = parent;\n    }\n    meshTree[\"children\"] = node.child.map(child => {\n      return this.createRobotMeshTreeRecursive(\n        child,\n        Util3d.referentialBuilder(scene)\n          .boxParams({ isVisible: false, size: 0.1 })\n          .build(),\n        mesh,\n        scene\n      );\n    });\n    return meshTree;\n  }\n\n  static createRobotMeshTree(robotTree, robotMesh, scene) {\n    return Robot.createRobotMeshTreeRecursive(\n      robotTree,\n      robotMesh,\n      null,\n      scene\n    );\n  }\n\n  static builder() {\n    return new RobotBuilder();\n  }\n}\n\nclass RobotBuilder {\n  constructor() {\n    this._name = null;\n    this._meshTree = null;\n    this._parentMesh = null;\n    this._scene = null;\n    this._isPickable = true;\n    this._id = null;\n    this._keyValueMap = {};\n    this._assetName = null;\n  }\n\n  name(name) {\n    this._name = name;\n    return this;\n  }\n\n  meshTree(meshTree) {\n    this._meshTree = meshTree;\n    return this;\n  }\n\n  parentMesh(parentMesh) {\n    this._parentMesh = parentMesh;\n    return this;\n  }\n\n  scene(scene) {\n    this._scene = scene;\n    return this;\n  }\n\n  isPickable(isPickable) {\n    this._isPickable = isPickable;\n    return this;\n  }\n\n  id(id) {\n    this._id = id;\n    return this;\n  }\n\n  keyValueMap(keyValueMap) {\n    this._keyValueMap = keyValueMap;\n    return this;\n  }\n\n  assetName(assetName) {\n    this._assetName = assetName;\n    return this;\n  }\n\n  build() {\n    const variables = Object.keys(this)\n      .filter(x => x !== \"_parentMesh\")\n      .map(x => this[x]);\n\n    variables.forEach(x => {\n      if (x === null)\n        throw new Error(\n          `There are missing variables to build a robot, e.g ${x}`\n        );\n    });\n\n    this._meshTree.id = this._id;\n    this._meshTree.name = this._name;\n    this._meshTree.mesh.name = this._name;\n    this._meshTree.mesh.isPickable = this._isPickable;\n    this._meshTree.mesh.parent = this._parentMesh;\n\n    const baseAxis = Util3d.referentialBuilder(this._scene)\n      .isPickable(false)\n      .boxParams({ isVisible: false, size: 0.1 })\n      .name(`${this._name}Axis`)\n      .build();\n    baseAxis.parent = this._meshTree.mesh;\n\n    return new Robot(this._meshTree, this._assetName, this._keyValueMap);\n  }\n}\n\nexport default Robot;\n","import NodeItem from \"./NodeItem\";\nimport Vec3 from \"../Math/Vec3\";\nimport { Maybe } from \"monet\";\nimport Util3d from \"../Util3d/Util3d\";\nimport Constants from \"../Utils/Constants\";\nimport { Vector3, Color3, Observable, StandardMaterial } from \"@babylonjs/core\";\n/**\n * Will be deprecated\n */\nclass Wall extends NodeItem {\n  constructor(mesh, localWall, size, keyPoints = {}, keyValueMap = {}) {\n    super(mesh, keyValueMap);\n    this.localWall = localWall;\n    this.size = size;\n    this.keyPoints = keyPoints;\n  }\n\n  toDict() {\n    const dict = super.toDict();\n    dict.localWall = this.localWall;\n    dict.size = this.size;\n    return dict;\n  }\n\n  ofDict(scene, dict = null, mainView = null) {\n    return Wall.ofDict(scene, dict, mainView);\n  }\n\n  getType = () => Wall.TYPE;\n\n  static TYPE = \"Wall\";\n\n  static ofDict(scene, dict = null, mainView = null) {\n    if (!dict) throw new Error(\"null dictionary describing wall\");\n    const name = Maybe.fromNull(dict.name).orSome(\n      `Wall${Math.floor(Math.random() * 1e3)}`\n    );\n    const mesh = createWallMesh(dict, name, scene);\n\n    const material = new StandardMaterial(`WallMaterial${name}`, scene);\n    const color = new Color3(dict.color[0], dict.color[1], dict.color[2]);\n    material.diffuseColor = color;\n    material.emissiveColor = color;\n    mesh.material = material;\n    // babylonjs highlight shader flickers when floor intersect\n    mesh.position.z += 1e-3;\n\n    const keypoints = createPlaceHolderKeyPoints(\n      scene,\n      dict.localWall.map(x => Vec3.of(x).toBabylon()),\n      mesh,\n      mainView\n    );\n    return new Wall(\n      mesh,\n      dict.localWall,\n      dict.size,\n      keypoints,\n      dict.keyValueMap\n    );\n  }\n}\n\nconst RADIUS = Constants.RADIUS;\nconst FACES = [\n  [0, 1, 2],\n  [2, 3, 0],\n  [4, 6, 5],\n  [6, 4, 7],\n  [0, 5, 1],\n  [5, 0, 4],\n  [3, 2, 6],\n  [6, 7, 3],\n  [1, 6, 2],\n  [6, 1, 5],\n  [0, 3, 7],\n  [7, 4, 0]\n];\n\nfunction createWallMesh(dict, name, scene) {\n  const centeredWall = dict.localWall.map(x => Vec3.of(x).toBabylon());\n  const middlePoint = Vec3.of(dict.position).toBabylon();\n  const tangent = centeredWall[1].subtract(centeredWall[0]).normalize();\n  const normal = new Vector3(-tangent.y, tangent.x, 0);\n  const shape = [\n    centeredWall[0].add(normal.scale(dict.size.width)),\n    centeredWall[0].subtract(normal.scale(dict.size.width)),\n    centeredWall[1].subtract(normal.scale(dict.size.width)),\n    centeredWall[1].add(normal.scale(dict.size.width))\n  ];\n  const h = new Vector3(0, 0, dict.size.height);\n  const wallMesh = {\n    positions: [\n      shape[0],\n      shape[1],\n      shape[2],\n      shape[3],\n      shape[0].add(h),\n      shape[1].add(h),\n      shape[2].add(h),\n      shape[3].add(h)\n    ],\n    faces: FACES\n  };\n  const mesh = Util3d.meshFromPositionAndFaces(\n    name,\n    scene,\n    wallMesh.positions,\n    wallMesh.faces\n  );\n  mesh.position = middlePoint;\n  return mesh;\n}\n\nfunction createNewMeshFromOldUsingNewPoints(newWall, scene, mesh, item) {\n  const average = Util3d.pointAverageVec3(\n    newWall.localWall.map(x => Vec3.of(x))\n  );\n  newWall.position = average.toArray();\n  newWall.localWall = newWall.localWall.map(x =>\n    Vec3.of(x).sub(average).toArray()\n  );\n\n  const newMesh = createWallMesh(newWall, mesh.name, scene);\n  newMesh.position = mesh.position;\n  newMesh.rotationQuaternion = mesh.rotationQuaternion;\n  newMesh.locallyTranslate(average.toBabylon());\n  newMesh.material = mesh.material;\n  newMesh.visibility = mesh.visibility;\n  newMesh.parent = mesh.parent;\n  newMesh.getMouseContextActions = mesh.getMouseContextActions;\n  newMesh.nodeItem = mesh.nodeItem;\n\n  item.mesh = newMesh;\n  item.localWall = newWall.localWall;\n\n  const childrenCopy = [...mesh._children];\n  childrenCopy.forEach(c => {\n    mesh.removeChild(c);\n    c.parent = newMesh;\n  });\n  item.keyPoints.forEach((k, j) => {\n    k.position = Vec3.of(newWall.localWall[j]).toBabylon();\n  });\n  // dispose old mesh\n  mesh.dispose();\n}\n\nconst getKeyPointObserverFunction = (mainView, scene) => {\n  return ({ updatedPointMesh, is2updateServer }) => {\n    mainView.getNodeFromTree(updatedPointMesh.parent.name).forEach(wallNode => {\n      const index = updatedPointMesh.index;\n      const item = wallNode.item;\n      const mesh = item.mesh;\n      let newWall = {\n        position: Vec3.ofBabylon(mesh.position).toArray(),\n        localWall: item.localWall,\n        size: item.size\n      };\n      newWall.localWall[index] = Vec3.ofBabylon(\n        updatedPointMesh.position\n      ).toArray();\n\n      createNewMeshFromOldUsingNewPoints(newWall, scene, mesh, item);\n\n      if (is2updateServer) {\n        mainView.updateNodeInServer(mesh.name);\n      }\n    });\n  };\n};\n\nconst createPlaceHolderKeyPoints = (scene, wall, wallMesh, mainView) => {\n  const keyPoints = [];\n  wall.forEach((p, i) => {\n    const keyPoint = Util3d.createSphere(\n      scene,\n      new Color3(0.25, 0.25, 0.25),\n      RADIUS,\n      `${wallMesh.name}keyPointWall${i}`,\n      true\n    );\n    keyPoint.parent = wallMesh;\n    keyPoint.position = p;\n    keyPoint.index = i;\n    keyPoint.observers = new Observable();\n    keyPoint.observers.add(getKeyPointObserverFunction(mainView, scene));\n    keyPoints.push(keyPoint);\n  });\n  return keyPoints;\n};\n\nexport default Wall;\n","import React, { Component } from \"react\";\nimport BaseViewer from \"./BaseViewer/BaseViewer\";\nimport PropTypes from \"prop-types\";\nimport { HighlightLayer, Vector3 } from \"@babylonjs/core\";\nimport { Maybe } from \"monet\";\nimport MainViewRetriever from \"./MainView/MainViewRetriever\";\nimport DefaultScene from \"./Utils/DefaultScene\";\nimport GlobalRef from \"./NodeItem/GlobalRef\";\nimport SceneServerUtils from \"./Utils/SceneServerUtils\";\nimport TreeServerUtils from \"./Utils/TreeServerUtils\";\nimport AssetsManager from \"./AssetsManager/AssetsManager\";\nimport TreeObject from \"./TreeObject/TreeObject\";\nimport GraphItem from \"./NodeItem/GraphItem\";\nimport DefaultMouseEvents from \"./Utils/DefaultMouseEvents\";\nimport Util3d from \"./Util3d/Util3d\";\nimport Vec3 from \"./Math/Vec3\";\nimport ReactResizeDetector from \"react-resize-detector\";\nimport ConfirmAlertModal from \"../Modal/ConfirmAlertModal\";\nimport { UndoManager } from \"mov-fe-lib-core\";\n\n//========================================================================================\n/*                                                                                      *\n *                                      SceneViewer                                     *\n *                                                                                      */\n//========================================================================================\n\nclass SceneViewer extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { errorList: [] };\n    this.sceneName = props.sceneName.Value;\n    this.sceneMemory = Maybe.none();\n    this.objectTree = [];\n    this.undoManager = new UndoManager();\n    // camera properties\n    this.isPanned = false;\n    this.isRotated = false;\n    this.targetPos = undefined;\n    this.cameraSpeed = Vector3.Zero();\n    this.time = new Date().getTime() * 1e-3;\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                   Getters & Setters                                  *\n   *                                                                                      */\n  //========================================================================================\n\n  getSceneMemory = () => this.sceneMemory;\n\n  getAssetsActionMap = () => AssetsManager.getInstance().getAssetsActionMap();\n\n  getRootNode = (tree = [...this.objectTree]) => {\n    return tree.filter(x => x.title === GlobalRef.NAME)[0];\n  };\n\n  getObjectTree = () => this.objectTree;\n\n  setSelectedAction = () => {\n    /* empty */\n  };\n\n  getGraph() {\n    return new TreeObject(this.objectTree).getNode(\n      x => GraphItem.TYPE === x.item.getType()\n    );\n  }\n\n  getUndoManager = () => this.undoManager;\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                    Utils functions                                   *\n   *                                                                                      */\n  //========================================================================================\n\n  getNodeFromTree = (name, objectTree = [...this.objectTree]) => {\n    return TreeServerUtils.ofScene(this.sceneName).getNodeFromTree(\n      name,\n      objectTree\n    );\n  };\n\n  deleteNodeFromTreeUsingName = () => {\n    throw new Error(\"Delete Node in viewer Exception\");\n  };\n\n  updateNodeInServer = (name, oldName = null) => {\n    TreeServerUtils.ofScene(this.sceneName).updateNodeInServer(\n      name,\n      [...this.objectTree],\n      oldName\n    );\n  };\n\n  addNodeItem2Tree = (\n    nodeItem,\n    parentName = GlobalRef.NAME,\n    is2addInServer = true,\n    isVisible = true\n  ) => {\n    const newObjectTree = TreeServerUtils.ofScene(\n      this.sceneName\n    ).addNodeItem2Tree(\n      [...this.objectTree],\n      nodeItem,\n      parentName,\n      is2addInServer,\n      isVisible\n    );\n    this.objectTree = newObjectTree;\n  };\n\n  setCameraToTarget = () => {\n    this.sceneMemory.forEach(({ camera }) => {\n      const focusObject = this.isPanned ? \"\" : this.props.focusObject.Value;\n      this.getNodeFromTree(focusObject).forEach(\n        x => {\n          console.log(\"Set Camera, Found Object\", x.item.mesh);\n          const dt = new Date().getTime() * 1e-3 - this.time;\n          this.time = new Date().getTime() * 1e-3;\n          const pos = x.item.mesh._absolutePosition.clone();\n          this.cameraSpeed = !this.targetPos ? Vector3.Zero() : pos.subtract(this.targetPos);\n          this.targetPos = pos;  \n          camera.setTarget(pos);\n          camera.position = camera.position.add(this.cameraSpeed.scale(dt))\n          camera.beta = this.isRotated ? camera.beta : 0;\n          // move target object for debug\n          // const p = x.item.mesh.position;\n          // x.item.mesh.position = p.add(new Vector3(p.x, p.y, 0).scale(1e-2)); \n        }\n      );\n    });\n  };\n\n  addCanvasEventListeners(canvas) {\n    const events = [\n      {\n        name: \"pointerdown\",\n        function: evt => this.onPointerDown(evt)\n      },\n      { name: \"pointerup\", function: evt => this.onPointerUp(evt) },\n      {\n        name: \"pointermove\",\n        function: evt => this.onPointerMove(evt)\n      }\n    ];\n    events.forEach(event =>\n      canvas.addEventListener(event.name, event.function, false)\n    );\n  }\n\n  onPointerDown = evt => {\n    this.isRotated = true;\n    DefaultMouseEvents.onPointerDown(this)(evt);\n  };\n\n  onPointerUp = evt => {\n    DefaultMouseEvents.onPointerUp(this)(evt);\n  };\n\n  onPointerMove = evt => {\n    if(evt.buttons === 4) this.isPanned = true;\n    DefaultMouseEvents.onPointerMove(this)(evt);\n  };\n\n  getMouseCoordsFromRoot() {\n    return this.sceneMemory.flatMap(({ scene, ground }) => {\n      const maybeCurrent = Util3d.getGroundPosition(scene, ground);\n      return maybeCurrent.flatMap(current =>\n        Maybe.fromNull(this.getRootNode()).map(rootNode =>\n          Util3d.getLocalCoordFromWorld(\n            rootNode.item.mesh,\n            Vec3.ofBabylon(current)\n          ).toBabylon()\n        )\n      );\n    });\n  }\n\n  onResize = (w, h) => {\n    if (w === 0 && h === 0) return;\n    this.getSceneMemory().forEach(({ mouseLocationText }) => {\n      mouseLocationText.left = -w / 2 + w / 17;\n      mouseLocationText.top = -h / 2 + h / 30;\n    });\n  };\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                    Scene functions                                   *\n   *                                                                                      */\n  //========================================================================================\n\n  retrieveSceneFromServer = (afterLoading = () => {}) => {\n    SceneServerUtils.retrieveScene(this.sceneName, data => {\n      const errorList = MainViewRetriever.importScene(this, data.result);\n      this.setState({ errorList });\n      afterLoading();\n    });\n  };\n\n  loadAssets = async () => {\n    const assetManager = AssetsManager.getInstance();\n    if (Object.values(assetManager.getAssets()).length === 0) {\n      await assetManager.load();\n    }\n  };\n\n  loadScene = async () => {\n    await this.loadAssets();\n    this.retrieveSceneFromServer(this.renderScene);\n  };\n\n  renderScene = () => {\n    this.getSceneMemory().forEach(({ engine, scene }) =>\n      engine.runRenderLoop(() => {\n        this.time = new Date().getTime() * 1e-3;\n        scene.render()\n        this.setCameraToTarget();\n      })\n    );\n  };\n\n  onSceneReady = scene => {\n    const engine = scene.getEngine();\n    const canvas = engine.getRenderingCanvas();\n    this.addCanvasEventListeners(canvas);\n    const mouseLocationText = DefaultScene.createMouseLocationText(scene);\n    this.sceneMemory = Maybe.some({\n      engine: engine,\n      canvas: canvas,\n      scene: scene,\n      camera: DefaultScene.createCamera(scene, canvas),\n      light: DefaultScene.createLight(scene),\n      ground: DefaultScene.createMeshGround(scene),\n      gizmoManager: DefaultScene.createGizmo(scene),\n      highlightLayer: {\n        layer: new HighlightLayer(\"hl1\", scene),\n        lastHlMeshes: []\n      },\n      mouseLocationText: mouseLocationText\n    });\n    return scene;\n  };\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                   Render functions                                   *\n   *                                                                                      */\n  //========================================================================================\n\n  renderMenus = () => {\n    // to implement interface of MainView\n  };\n\n  componentDidUpdate = prevProps => {\n    const predicateAction = [\n      {\n        propVar: x => x.sceneName.Value,\n        action: () => (this.sceneName = this.props.sceneName.Value)\n      },\n      {\n        propVar: x => x.focusObject.Value,\n        action:() => {\n          this.isPanned = false;\n          this.isRotated = false;\n          this.setCameraToTarget()\n        } \n      }\n    ];\n    predicateAction.forEach(({ propVar, action }) => {\n      if (propVar(this.props) !== propVar(prevProps)) {\n        action();\n      }\n    });\n  };\n\n  componentDidMount = () => {\n    console.log(\"SceneViewer Did Mount!! \");\n    this.loadScene();\n  };\n\n  render() {\n    const { errorList } = this.state;\n    const resetErrorList = () => this.setState({ errorList: [] });\n    return (\n      <div style={{ display: \"flex\", flexGrow: 1, maxHeight: \"100%\" }}>\n        <BaseViewer\n          onSceneReady={this.onSceneReady}\n          is2render={false}\n          sceneFactory={DefaultScene.createScene}\n        />\n        <ConfirmAlertModal\n          onSubmit={resetErrorList}\n          onCancel={resetErrorList}\n          open={errorList?.length > 0}\n          title={\"Scene Viewer\"}\n          message={\"An error occurred while loading the scene\"}\n          submitText={\"OK\"}\n          submitColor={\"primary\"}\n          cancelText={\"Cancel\"}\n          cancelColor={\"secondary\"}\n        >\n          {getErrorSolutionList(errorList)}\n        </ConfirmAlertModal>\n        <ReactResizeDetector\n          handleWidth\n          handleHeight\n          onResize={this.onResize}\n        />\n      </div>\n    );\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                   Static functions                                   *\n   *                                                                                      */\n  //========================================================================================\n\n  static getComponentFactory(sceneName) {\n    return masterProps => {\n      const augmentProps = {\n        sceneName,\n        ...masterProps\n      };\n      return <SceneViewer {...augmentProps} />;\n    };\n  }\n\n  static EXTENSION = \".3d\";\n}\n\nSceneViewer.propTypes = {\n  sceneName: PropTypes.shape({ Value: PropTypes.string }),\n  focusObject: PropTypes.shape({ Value: PropTypes.string })\n};\n\nSceneViewer.defaultProps = {\n  sceneName: { Value: \"Pedro\" },\n  focusObject: { Value: \"\" }\n};\n\nfunction getErrorSolutionList(errorList) {\n  return !errorList ? (\n    []\n  ) : (\n    <ul>\n      {errorList.map(({ cause, solution }, i) => {\n        return <li key={\"error\" + i}>{`${cause}, ${solution}`}</li>;\n      })}\n    </ul>\n  );\n}\n\nexport default SceneViewer;\n","class TreeNode {\n  constructor(title, item, children, expanded, isVisible) {\n    this.title = title;\n    this.item = item;\n    this.children = children;\n    this.expanded = expanded;\n    this.isVisible = isVisible;\n  }\n\n  static dispose(node) {\n    /*\n     * function must be defined here, otherwise it wouldn't work on the UI Tree change method\n     */\n    node.item.dispose();\n    node.children.forEach(child => {\n      TreeNode.dispose(child);\n    });\n  }\n\n  /**\n   *\n   * @param {*} node\n   */\n  static toDict(node) {\n    /*\n     * function must be defined here, otherwise it wouldn't work on the UI Tree change method\n     */\n    return {\n      name: node.title,\n      item: node.item.toDict(),\n      children: node.children.map(child => TreeNode.toDict(child))\n    };\n  }\n\n  static builder() {\n    return new TreeNodeBuilder();\n  }\n}\n\nclass TreeNodeBuilder {\n  constructor() {\n    this._title = null;\n    this._item = {};\n    this._children = [];\n    this._expanded = false;\n    this._isVisible = true;\n  }\n\n  title(title) {\n    this._title = title;\n    return this;\n  }\n\n  item(item) {\n    this._item = item;\n    return this;\n  }\n\n  children(children) {\n    this._children = children;\n    return this;\n  }\n\n  expanded(expanded) {\n    this._expanded = expanded;\n    return this;\n  }\n\n  isVisible(isVisible) {\n    this._isVisible = isVisible;\n    return this;\n  }\n\n  build() {\n    Object.values(this).forEach(value => {\n      if (value === null)\n        throw new Error(\n          `There are missing variables to build a TreeNode, e.g ${value}`\n        );\n    });\n    return new TreeNode(\n      this._title,\n      this._item,\n      this._children,\n      this._expanded,\n      this._isVisible\n    );\n  }\n}\n\nexport default TreeNode;\n","import { Maybe } from \"monet\";\n\nfunction getNodeRecursive(tree, predicate) {\n  for (let i = 0; i < tree.length; i++) {\n    const node = tree[i];\n    if (predicate(node)) return Maybe.some(node);\n    const answer = getNodeRecursive(node.children, predicate);\n    if (answer.isSome()) return answer;\n  }\n  return Maybe.none();\n}\n\nfunction getParentNodeRecursive(tree, predicate, parent) {\n  const foundChild = tree\n    .map(x => predicate(x))\n    .reduce((e, x) => e || x, false);\n  if (foundChild) return Maybe.fromNull(parent);\n  for (let i = 0; i < tree.length; i++) {\n    const node = tree[i];\n    const answer = getParentNodeRecursive(node.children, predicate, node);\n    if (answer.isSome()) return answer;\n  }\n  return Maybe.none();\n}\n\nfunction compareTreesRecursive(treeA, treeB, nodeEquality) {\n  if (treeA.length === treeB.length) {\n    let ans = true;\n    for (let i = 0; i < treeA.length; i++) {\n      const nodeA = treeA[i];\n      const nodeB = treeB[i];\n      if (nodeEquality(nodeA, nodeB)) {\n        ans =\n          ans &&\n          compareTreesRecursive(nodeA.children, nodeB.children, nodeEquality);\n      } else {\n        return false;\n      }\n    }\n    return ans;\n  }\n  return false;\n}\n\nfunction mapRecursive(tree, newTree, map) {\n  tree.forEach(nod => {\n    const node = { ...nod };\n    const mappedNode = map(node);\n    mappedNode.children = mapRecursive(node.children, [], map);\n    newTree.push(mappedNode);\n  });\n  return newTree;\n}\n\nfunction forEachRecursive(tree = [], forEach = () => {}) {\n  tree.forEach(node => {\n    forEach(node);\n    forEachRecursive(node.children, forEach);\n  });\n}\n\nfunction expand(node) {\n  node.expanded = true;\n  return node;\n}\n\nfunction filterTree(tree = [], predicate = node => true) {\n  if (!tree || tree.length === 0) return [];\n  let result = [];\n  tree.forEach(nod => {\n    const node = { ...nod };\n    if (predicate(node)) {\n      const expanded = expand(node);\n      expanded.children = filterTree(expanded.children, predicate);\n      result.push(expanded);\n    } else if (node.children) {\n      const children = filterTree(node.children, predicate);\n      if (children.length !== 0) {\n        node.children = children;\n        result.push(expand(node));\n      }\n    }\n  });\n  return result;\n}\n\nfunction flatten(tree = [], predicate = node => true) {\n  if (!tree || tree.length === 0) return [];\n  let result = [];\n  tree.forEach(nod => {\n    const node = { ...nod };\n    if (predicate(node)) result.push(node);\n    result = result.concat(flatten(node.children, predicate));\n  });\n  return result;\n}\n\n/**\n * General purpose tree\n *\n * It just need a basic structure as input:\n *  Tree: Array<Node>\n *  Node: {children: Array<Node>}\n */\nclass TreeObject {\n  constructor(tree) {\n    this.tree = tree;\n  }\n  /**\n   * Return maybe node based on predicate\n   * @param {*} predicate\n   */\n  getNode(predicate) {\n    return getNodeRecursive(this.tree, predicate);\n  }\n\n  /**\n   * return maybe parent node based on the child predicate\n   * @param {*} childPredicate\n   */\n  getParentNode(childPredicate) {\n    return getParentNodeRecursive(this.tree, childPredicate, null);\n  }\n\n  equals(tree, nodeEquality = (a, b) => a === b) {\n    if (tree.constructor === TreeObject) {\n      return compareTreesRecursive(this.tree, tree.tree, nodeEquality);\n    }\n    return compareTreesRecursive(this.tree, tree, nodeEquality);\n  }\n\n  map(nodeMap) {\n    return new TreeObject(mapRecursive(this.tree, [], nodeMap));\n  }\n\n  filter(predicate = node => true) {\n    return new TreeObject(filterTree(this.tree, predicate));\n  }\n\n  /**\n   *\n   * @param {*} predicate: node => Boolean\n   * @returns Array with flattened tree while filtering values with predicate\n   */\n  flatten(predicate = node => true) {\n    return flatten(this.tree, predicate);\n  }\n\n  forEach(map) {\n    forEachRecursive(this.tree, map);\n  }\n}\n\nexport default TreeObject;\n","import { ArcRotateCamera } from \"@babylonjs/core\";\n\nclass CameraBuilder {\n  constructor(scene) {\n    this._scene = scene;\n    this._sphericalCoordinates = null;\n    this._target = null;\n    this._name = `camera${Math.floor(Math.random() * 1e3)}`;\n  }\n\n  name(name) {\n    this._name = name;\n    return this;\n  }\n\n  sphericalCoordinates(sphericalCoordinates) {\n    this._sphericalCoordinates = sphericalCoordinates;\n    return this;\n  }\n\n  target(target) {\n    this._target = target;\n    return this;\n  }\n\n  build() {\n    const variables = Object.values(this);\n    variables.forEach(x => {\n      if (x === null)\n        throw new Error(\n          `There are missing variables to build a camera, e.g ${x}`\n        );\n    });\n    return new ArcRotateCamera(\n      this._name,\n      this._sphericalCoordinates.x,\n      this._sphericalCoordinates.y,\n      this._sphericalCoordinates.z,\n      this._target,\n      this._scene\n    );\n  }\n}\n\nexport default CameraBuilder;\n","import { DirectionalLight } from \"@babylonjs/core\";\n\nclass DirectionalLightBuilder {\n  constructor(scene) {\n    this._scene = scene;\n    this._direction = null;\n    this._name = `Dlight${Math.floor(Math.random() * 1e3)}`;\n    this._intensity = 1;\n  }\n\n  direction(direction) {\n    this._direction = direction;\n    return this;\n  }\n\n  name(name) {\n    this._name = name;\n    return this;\n  }\n\n  intensity(intensity) {\n    this._intensity = intensity;\n    return this;\n  }\n\n  build() {\n    const variables = Object.values(this);\n    variables.forEach(x => {\n      if (x === null)\n        throw new Error(\n          `There are missing variables to build a light, e.g ${x}`\n        );\n    });\n    const light = new DirectionalLight(\n      this._name,\n      this._direction.normalize(),\n      this._scene\n    );\n    light.intensity = this._intensity;\n    return light;\n  }\n}\n\nexport default DirectionalLightBuilder;\n","import { GizmoManager } from \"@babylonjs/core\";\n\nclass GizmoManagerBuilder {\n  constructor(scene) {\n    this._scene = scene;\n    this._isPosition = false;\n    this._isRotation = false;\n    this._isBoundingBox = false;\n    this._isScale = false;\n    this._usePointerToAttachGizmos = false;\n  }\n\n  isPosition(v) {\n    this._isPosition = v;\n    return this;\n  }\n\n  isRotation(v) {\n    this._isRotation = v;\n    return this;\n  }\n\n  isBoundingBox(v) {\n    this._isBoundingBox = v;\n    return this;\n  }\n\n  isScale(v) {\n    this._isScale = v;\n    return this;\n  }\n\n  usePointerToAttachGizmos(v) {\n    this._usePointerToAttachGizmos = v;\n    return this;\n  }\n\n  build() {\n    const gizmoManager = new GizmoManager(this._scene);\n    gizmoManager.positionGizmoEnabled = this._isPosition;\n    gizmoManager.rotationGizmoEnabled = this._isRotation;\n    gizmoManager.boundingBoxGizmoEnabled = this._isBoundingBox;\n    gizmoManager.scaleGizmoEnabled = this._isScale;\n    gizmoManager.usePointerToAttachGizmos = this._usePointerToAttachGizmos;\n    return gizmoManager;\n  }\n}\n\nexport default GizmoManagerBuilder;\n","import {\n  Mesh,\n  Vector3,\n  StandardMaterial,\n  Texture,\n  Space\n} from \"@babylonjs/core\";\n\nclass GroundBuilder {\n  constructor(scene) {\n    this._scene = scene;\n    this._name = `camera${Math.floor(Math.random() * 1e3)}`;\n    this._width = 1;\n    this._height = 1;\n    this._textureSrc = null;\n    this._isPickable = false;\n  }\n\n  name(name) {\n    this._name = name;\n    return this;\n  }\n\n  width(width) {\n    this._width = width;\n    return this;\n  }\n\n  height(height) {\n    this._height = height;\n    return this;\n  }\n\n  textureSrc(textureSrc) {\n    this._textureSrc = textureSrc;\n    return this;\n  }\n\n  isPickable(isPickable) {\n    this._isPickable = isPickable;\n    return this;\n  }\n\n  build() {\n    const ground = Mesh.CreateGround(\n      this._name,\n      this._width,\n      this._height,\n      1,\n      this._scene\n    );\n    ground.translate(new Vector3(0, -1, 0), 1e-1, Space.WORLD);\n    if (this._textureSrc) {\n      ground.material = new StandardMaterial(\n        `Texture${this._name}`,\n        this._scene\n      );\n      ground.material.ambientTexture = new Texture(\n        this._textureSrc,\n        this._scene\n      );\n      ground.material.ambientTexture.uScale = 1;\n      ground.material.ambientTexture.vScale = 1;\n    }\n    ground.isPickable = this._isPickable;\n    return ground;\n  }\n}\n\nexport default GroundBuilder;\n","import { PointLight } from \"@babylonjs/core\";\n\nclass PositionalLightBuilder {\n  constructor(scene) {\n    this._scene = scene;\n    this._position = null;\n    this._name = `light${Math.floor(Math.random() * 1e3)}`;\n    this._intensity = 1;\n  }\n\n  position(position) {\n    this._position = position;\n    return this;\n  }\n\n  name(name) {\n    this._name = name;\n    return this;\n  }\n\n  intensity(intensity) {\n    this._intensity = intensity;\n    return this;\n  }\n\n  build() {\n    const variables = Object.values(this);\n    variables.forEach(x => {\n      if (x === null)\n        throw new Error(\n          `There are missing variables to build a light, e.g ${x}`\n        );\n    });\n    const light = new PointLight(this._name, this._position, this._scene);\n    light.intensity = this._intensity;\n    return light;\n  }\n}\n\nexport default PositionalLightBuilder;\n","import { Mesh, Vector3, Color3, MeshBuilder } from \"@babylonjs/core\";\nclass ReferentialBuilder {\n  constructor(scene) {\n    this._scene = scene;\n    this._name = `referential${Math.floor(Math.random() * 1e3)}`;\n    this._isPickable = true;\n    this._boxParams = { isVisible: true, size: 0.25 };\n    this._size = 1;\n  }\n\n  name(name) {\n    this._name = name;\n    return this;\n  }\n\n  isPickable(isPickable) {\n    this._isPickable = isPickable;\n    return this;\n  }\n\n  boxParams(boxParams) {\n    this._boxParams = boxParams;\n    return this;\n  }\n\n  size(size) {\n    this._size = size;\n    return this;\n  }\n\n  build() {\n    const size = this._size;\n    const axisX = Mesh.CreateLines(\n      `axisX${this._name}`,\n      [\n        new Vector3.Zero(),\n        new Vector3(size, 0, 0),\n        new Vector3(size * 0.95, 0.05 * size, 0),\n        new Vector3(size, 0, 0),\n        new Vector3(size * 0.95, -0.05 * size, 0)\n      ],\n      this._scene\n    );\n    axisX.color = new Color3(1, 0, 0);\n    axisX.isPickable = false;\n    const axisY = Mesh.CreateLines(\n      `axisY${this._name}`,\n      [\n        new Vector3.Zero(),\n        new Vector3(0, size, 0),\n        new Vector3(-0.05 * size, size * 0.95, 0),\n        new Vector3(0, size, 0),\n        new Vector3(0.05 * size, size * 0.95, 0)\n      ],\n      this._scene\n    );\n    axisY.color = new Color3(0, 1, 0);\n    axisY.isPickable = false;\n    const axisZ = Mesh.CreateLines(\n      `axisZ${this._name}`,\n      [\n        new Vector3.Zero(),\n        new Vector3(0, 0, size),\n        new Vector3(0, -0.05 * size, size * 0.95),\n        new Vector3(0, 0, size),\n        new Vector3(0, 0.05 * size, size * 0.95)\n      ],\n      this._scene\n    );\n    axisZ.color = new Color3(0, 0, 1);\n    axisZ.isPickable = false;\n\n    const localOrigin = MeshBuilder.CreateBox(\n      this._name,\n      { size: this._boxParams.size },\n      this._scene\n    );\n    localOrigin.isVisible = this._boxParams.isVisible;\n    localOrigin.isPickable = this._isPickable;\n\n    axisX.parent = localOrigin;\n    axisY.parent = localOrigin;\n    axisZ.parent = localOrigin;\n\n    return localOrigin;\n  }\n}\n\nexport default ReferentialBuilder;\n","import _uniqBy from \"lodash/uniqBy\";\nimport Util3d from \"../Util3d/Util3d\";\nimport KeyPoint from \"../NodeItem/KeyPoint\";\nimport {\n  Quaternion,\n  Observable,\n  Vector3,\n  ShaderMaterial,\n  Effect\n} from \"@babylonjs/core\";\nimport { Maybe } from \"monet\";\nimport Vec3 from \"../Math/Vec3\";\nimport Vec2 from \"../Math/Vec2\";\nimport MeshSelector from \"../MainView/MeshSelector\";\n\nclass SelectionPlaceHolder {\n  constructor(mainView) {\n    return mainView\n      .getSceneMemory()\n      .map(({ scene }) => {\n        const sceneId = scene._uid;\n        if (sceneId in placeHolderInstance) {\n          return placeHolderInstance[sceneId];\n        }\n        this.scene = scene;\n        this.mesh = null;\n        this.arrayOfMeshes = [];\n        this.angleByMeshName = {};\n        this.mainView = mainView;\n        this.theta = 0;\n        placeHolderInstance[sceneId] = this;\n        return this;\n      })\n      .orSome(this);\n  }\n\n  push(arrayOfMeshes) {\n    if (arrayOfMeshes.length === 0) return this;\n    arrayOfMeshes = Array.isArray(arrayOfMeshes)\n      ? arrayOfMeshes\n      : [arrayOfMeshes];\n    this.arrayOfMeshes = _uniqBy(\n      this.arrayOfMeshes.concat(arrayOfMeshes),\n      mesh => mesh.name\n    );\n    this.angleByMeshName = this.arrayOfMeshes.reduce((map, m) => {\n      map[m.name] = getAngleFromMesh(m);\n      return map;\n    }, {});\n    const placeHolderPosition = Util3d.pointAverage(\n      this.arrayOfMeshes.map(mesh =>\n        Util3d.getGlobalCoordinates(mesh, mesh.position).toBabylon()\n      )\n    );\n    this.createPlaceHolderIn(placeHolderPosition);\n    return this;\n  }\n\n  clear() {\n    this.arrayOfMeshes = [];\n    this.mesh && this.mesh.dispose();\n    return this;\n  }\n\n  createPlaceHolderIn(p) {\n    if (this.mesh === null || this.mesh.isDisposed()) {\n      this.mesh = KeyPoint.ofDict(this.scene, {\n        name: NAME,\n        type: SelectionPlaceHolder,\n        position: [0, 0, 0],\n        quaternion: Quaternion.Identity(),\n        color: [0.5, 0.5, 0.5],\n        keyValueMap: {},\n        isVisible: true\n      }).mesh;\n      this.mesh.material = getShaderMaterial(this.scene)();\n    }\n    const that = this;\n    this.mesh.getMouseContextActions = () => [\n      {\n        title: \"Delete\",\n        onClick: () => {\n          that.mainView.addGizmo2Mesh();\n          that.clear();\n          MeshSelector.ofMainView(this.mainView).clear();\n          that.mainView.highlightMeshesInScene();\n          that.mainView.highlightNodesInTree();\n        }\n      }\n    ];\n    this.mesh.onClick = () => {};\n    this.mesh.isSelectionPlaceHolder = true;\n    this.mesh.parent = this.mainView.getRootNode().item.mesh;\n    this.mesh.position = p.add(new Vector3(0, 0, HEIGHT));\n    this.mesh.observers = new Observable();\n    this.mesh.observers.add(this.getPlaceHolderObs());\n    return this.mesh;\n  }\n\n  getPlaceHolderObs() {\n    const that = this;\n    return ({\n      updatedPointMesh: placeHolder,\n      is2updateServer,\n      displacement\n    }) => {\n      const filteredMeshes = that.arrayOfMeshes.filter(\n        mesh => !mesh.isDisposed()\n      );\n      const theta = getAngleFromMesh(placeHolder);\n      const dTheta = theta - that.theta;\n      that.theta = theta;\n\n      filteredMeshes.forEach(mesh => {\n        handleMotion(theta, mesh, displacement, placeHolder, dTheta, that);\n        if (is2updateServer) {\n          that.mainView.updateNodeInServer(mesh.name);\n          that.mesh.rotationQuaternion = Quaternion.Identity();\n          that.angleByMeshName[mesh.name] = getAngleFromMesh(mesh);\n          that.theta = 0;\n        }\n        // notify babylonjs observers\n        Maybe.fromNull(mesh.observers).forEach(obs =>\n          obs.notifyObservers({\n            updatedPointMesh: mesh,\n            is2updateServer,\n            displacement\n          })\n        );\n        // notify graph observers\n        Maybe.fromNull(mesh.graphVertex).forEach(({ vertexObs }) => {\n          vertexObs({\n            updatedPointMesh: mesh,\n            is2updateServer,\n            displacement\n          });\n        });\n      });\n      if (filteredMeshes.length === 0) {\n        that.clear();\n      }\n    };\n  }\n\n  static ofMainView(mainView) {\n    return new SelectionPlaceHolder(mainView);\n  }\n}\n\nconst getShaderMaterial = scene => (vertex = VERTEX, frag = FRAG) => {\n  Effect.ShadersStore[\"customVertexShader\"] = vertex;\n  Effect.ShadersStore[\"customFragmentShader\"] = frag;\n  const shaderMaterial = new ShaderMaterial(\n    \"shader\",\n    scene,\n    { vertex: \"custom\", fragment: \"custom\" },\n    {\n      attributes: [\"position\", \"normal\", \"uv\"],\n      uniforms: [\n        \"world\",\n        \"worldView\",\n        \"worldViewProjection\",\n        \"view\",\n        \"projection\",\n        \"time\"\n      ]\n    }\n  );\n  shaderMaterial.backFaceCulling = false;\n  let time = 0;\n  let T = new Date().getTime();\n  shaderMaterial.onBindObservable.add(() => {\n    const dt = (new Date().getTime() - T) / 1000;\n    shaderMaterial.setFloat(\"time\", time);\n    time = time + dt;\n    T = new Date().getTime();\n  });\n  return shaderMaterial;\n};\n\nconst VERTEX = `precision highp float;\n\n// Attributes\nattribute vec3 position;\nattribute vec3 normal;\n\n// Uniforms\nuniform mat4 worldViewProjection;\n\n// Varying\nvarying vec3 vPosition;\nvarying vec3 vNormal;\n\nvoid main(void) {\n    gl_Position = worldViewProjection * vec4(position, 1.0);\n    vPosition = position;\n    vNormal = normal;\n}`;\n\nconst FRAG = `precision highp float;\n\n// Varying\nvarying vec3 vPosition;\nvarying vec3 vNormal;\n\n// Uniforms\nuniform mat4 world;\nuniform float time;\n\nvoid main(void) {\n    // World values\n    vec3 p = vec3(world * vec4(vPosition, 1.0));\n    vec3 n = normalize(vec3(world * vec4(vNormal, 0.0)));\n    float spatialFreq = 10.;\n    float timeFreq = 10.;\n    float power = sin(spatialFreq * p.y - timeFreq * time);\n    vec3 color = power *  vec3( 1, 0, 0 ) + (1. - power) * vec3(1,0.5,0.5);\n    gl_FragColor = vec4(color, 1.);\n}`;\n\nconst getAngleFromMesh = mesh =>\n  Maybe.fromNull(mesh.rotationQuaternion)\n    .map(q => 2 * Math.atan2(q.z, q.w))\n    .orSome(0);\n\nconst placeHolderInstance = {};\nconst NAME = \"placeholder\";\nconst HEIGHT = 1.5;\n\nfunction handleMotion(theta, mesh, displacement, placeHolder, dTheta, that) {\n  if (Math.abs(theta) < 1e-3) {\n    handleTranslation(mesh, displacement);\n  } else {\n    handleRotation(placeHolder, mesh, dTheta, that, theta);\n  }\n}\n\nfunction handleRotation(placeHolder, mesh, dTheta, that, theta) {\n  const baseCoord = Vec3.ofBabylon(placeHolder.position);\n  const v = Vec3.ofBabylon(mesh.position).sub(baseCoord).toVec2();\n  const eITheta = Vec2.of(Math.cos(dTheta), Math.sin(dTheta));\n  const rV = eITheta.prod(v);\n  const finalV = Vec3.of([rV.x, rV.y, 0]).toBabylon();\n  mesh.position = new Vector3(\n    placeHolder.position.x,\n    placeHolder.position.y,\n    mesh.position.z\n  ).add(finalV);\n  const finalTheta = that.angleByMeshName[mesh.name] + theta;\n  // divide by 2 because of quaternion multiplication.\n  mesh.rotationQuaternion = new Quaternion(\n    0,\n    0,\n    Math.sin(finalTheta / 2),\n    Math.cos(finalTheta / 2)\n  );\n}\n\nfunction handleTranslation(mesh, displacement) {\n  const localDisplacement = Util3d.getLocalCoordFromWorld(\n    mesh,\n    Vec3.ofBabylon(displacement),\n    false\n  );\n  const newPos = Vec3.ofBabylon(mesh.position).add(localDisplacement);\n  // translating\n  mesh.position = newPos.toBabylon();\n}\n\nexport default SelectionPlaceHolder;\n","import Vec3 from \"../Math/Vec3\";\nimport Mat3 from \"../Math/Mat3\";\nimport { Maybe } from \"monet\";\nimport GizmoManagerBuilder from \"./GizmoManagerBuilder.js\";\nimport CameraBuilder from \"./CameraBuilder\";\nimport PositionalLightBuilder from \"./PositionalLightBuilder\";\nimport ReferentialBuilder from \"./ReferentialBuilder\";\nimport GroundBuilder from \"./GroundBuilder\";\nimport DirectionalLightBuilder from \"./DirectionalLightBuilder\";\nimport earcut from \"earcut\";\nimport {\n  Vector3,\n  Color3,\n  Quaternion,\n  StandardMaterial,\n  VertexData,\n  Mesh,\n  Matrix,\n  MeshBuilder,\n  VertexBuffer,\n  Curve3\n} from \"@babylonjs/core\";\nimport GlobalRef from \"../NodeItem/GlobalRef\";\nimport Box from \"../NodeItem/Box\";\n\nclass Util3d {\n  /**\n   *\n   * @param {*} mesh\n   * @param {*} localPosition: Vector3\n   * @returns Vec3\n   */\n  static getGlobalCoordinates(mesh, localPosition) {\n    if (\n      (mesh.parent && mesh.parent.name === GlobalRef.NAME) ||\n      mesh.name === GlobalRef.NAME\n    ) {\n      return Vec3.ofBabylon(localPosition);\n    }\n    const meshParent = mesh.parent;\n    const meshParentPos = Vec3.ofBabylon(meshParent.position);\n    const meshParentRotMat = Util3d.getRotationMatrix(meshParent);\n    const meshParentScaling = Vec3.ofBabylon(meshParent.scaling);\n    return meshParentRotMat\n      .prodVec(\n        meshParentScaling.mul(\n          Util3d.getGlobalCoordinates(mesh.parent, localPosition)\n        )\n      )\n      .add(meshParentPos);\n  }\n\n  /**\n   *\n   * @param {*} mesh\n   * @param {*} x: Vector3 in mesh local coord\n   * @returns Vector3\n   */\n  static getGlobalCoord(mesh, x) {\n    if (\n      (mesh.parent && mesh.parent.name === GlobalRef.NAME) ||\n      mesh.name === GlobalRef.NAME\n    ) {\n      return x;\n    }\n    const meshParent = mesh.parent;\n    const meshParentPos = Vec3.ofBabylon(meshParent.position);\n    const meshParentRotMat = Util3d.getRotationMatrix(meshParent);\n    const meshParentScaling = Vec3.ofBabylon(meshParent.scaling);\n    const childPos = meshParentRotMat\n      .prodVec(meshParentScaling.mul(Vec3.ofBabylon(x)))\n      .add(meshParentPos);\n    return Util3d.getGlobalCoord(meshParent, childPos.toBabylon());\n  }\n\n  static getBabylonCoordinates(positionInWorld) {\n    return GlobalRef.forwardCoordinates(positionInWorld);\n  }\n\n  /**\n   *\n   * @param {*} mesh\n   * @param {*} worldPosition: Vector3 from GlobalRef coordinate frame\n   */\n  static getLocalCoordFromGlobal(mesh, worldPosition, withTranslation = true) {\n    if (\n      (mesh.parent && mesh.parent.name === GlobalRef.NAME) ||\n      mesh.name === GlobalRef.NAME\n    )\n      return Vec3.ofBabylon(worldPosition);\n    const meshParent = mesh.parent;\n    const meshParentPos = withTranslation\n      ? Vec3.ofBabylon(meshParent.position)\n      : Vec3.ZERO;\n    const meshParentRotMat = Util3d.getRotationMatrix(meshParent);\n    const meshParentScaling = Vec3.ofBabylon(meshParent.scaling);\n    return meshParentScaling\n      .map(z => 1 / z)\n      .mul(\n        meshParentRotMat.dotVec(\n          Util3d.getLocalCoordFromGlobal(\n            meshParent,\n            worldPosition,\n            withTranslation\n          ).sub(meshParentPos)\n        )\n      );\n  }\n\n  /**\n   *\n   * @param {*} mesh\n   * @param {*} worldPosition: Vec3 from World(Babylon) coordinate frame\n   *\n   * @returns localPosition: Vec3\n   */\n  static getLocalCoordFromWorld(mesh, worldPosition, withTranslation = true) {\n    /// WARNING: very similar with getLocalCoordFromGlobal\n    if (!mesh.parent) {\n      return worldPosition;\n    }\n    const meshParent = mesh.parent;\n    const meshParentPos = withTranslation\n      ? Vec3.ofBabylon(meshParent.position)\n      : Vec3.ZERO;\n    const meshParentRotMat = Util3d.getRotationMatrix(meshParent);\n    const meshParentScaling = Vec3.ofBabylon(meshParent.scaling);\n    // assume scaling != 0\n    const inverseScaling = meshParentScaling.map(x => 1.0 / x);\n\n    return inverseScaling.mul(\n      meshParentRotMat.dotVec(\n        Util3d.getLocalCoordFromWorld(\n          meshParent,\n          worldPosition,\n          withTranslation\n        ).sub(meshParentPos)\n      )\n    );\n  }\n\n  /**\n   * World to Global coords\n   * @param {*} parentView: MainView\n   */\n  static toGlobalCoord = parentView => {\n    const rootMesh = parentView.getRootNode().item.mesh;\n    return arrayOfVector3 => {\n      const transform = p =>\n        Util3d.getLocalCoordFromWorld(\n          { parent: rootMesh },\n          Vec3.ofBabylon(p)\n        ).toBabylon();\n      if (Array.isArray(arrayOfVector3)) {\n        return arrayOfVector3.map(transform);\n      }\n      return transform(arrayOfVector3);\n    };\n  };\n\n  static getRotationMatrix(mesh) {\n    const localRotationMatrix = new Matrix();\n    const maybeQuaternion = Maybe.fromNull(mesh?.rotationQuaternion);\n    maybeQuaternion.forEach(quaternion =>\n      quaternion.toRotationMatrix(localRotationMatrix)\n    );\n    maybeQuaternion.orElseRun(() => {\n      const quaternion = Quaternion.RotationYawPitchRoll(\n        mesh.rotation.y,\n        mesh.rotation.x,\n        mesh.rotation.z\n      );\n      quaternion.toRotationMatrix(localRotationMatrix);\n    });\n    return Mat3.ofBabylonMatrix(localRotationMatrix);\n  }\n\n  static showNormals(scene, mesh, size = 1, color = Color3.Red()) {\n    const normals = mesh.getVerticesData(VertexBuffer.NormalKind);\n    const positions = mesh.getVerticesData(VertexBuffer.PositionKind);\n    const lines = [];\n    for (let i = 0; i < normals.length; i += 3) {\n      const v1 = Vector3.FromArray(positions, i);\n      const v2 = v1.add(Vector3.FromArray(normals, i).scaleInPlace(size));\n      lines.push([v1.add(mesh.position), v2.add(mesh.position)]);\n    }\n    const normalLines = MeshBuilder.CreateLineSystem(\n      \"normalLines\",\n      { lines: lines },\n      scene\n    );\n    normalLines.color = color;\n    normalLines.parent = mesh;\n    return normalLines;\n  }\n\n  static orthogonalBasisFromVector(u) {\n    const identityMatrix = [\n      new Vector3(1, 0, 0),\n      new Vector3(0, 1, 0),\n      new Vector3(0, 0, 1)\n    ];\n    const uArray = [u.x, u.y, u.z];\n    // choose pivot\n    let pivot = 0;\n    for (let i = 0; i < 3; i++) {\n      if (uArray[i] !== 0) {\n        pivot = i;\n        break;\n      }\n    }\n    let v = identityMatrix[(pivot + 1) % 3].add(\n      identityMatrix[pivot].scale(-uArray[(pivot + 1) % 3] / uArray[pivot])\n    );\n    v = v.normalize();\n    let w = identityMatrix[(pivot + 2) % 3].add(\n      identityMatrix[pivot].scale(-uArray[(pivot + 2) % 3] / uArray[pivot])\n    );\n    w = w.normalize();\n    w = w.subtract(v.scale(Vector3.Dot(v, w)));\n    return { u: Vector3.FromArray(uArray).normalize(), v: v, w: w.normalize() };\n  }\n\n  static createOrientedCone = (\n    scene,\n    u = new Vector3(1, 0, 0),\n    color = Color3.Gray(),\n    name = `OrientedCone${randomDigits()}`,\n    isPickable = true,\n    segments = 16\n  ) => {\n    const surface = {\n      positions: [],\n      faces: []\n    };\n    const d = u.length() / 3;\n    const mat3 = Util3d.orthogonalBasisFromVector(u);\n    const v = mat3.v;\n    const w = mat3.w;\n\n    const orientation = Math.sign(Vector3.Dot(Vector3.Cross(v, w), u));\n    // positions\n    for (let i = 0; i < segments; i++) {\n      const theta = orientation * ((2 * Math.PI) / segments) * i;\n      surface.positions.push(\n        v.scale(d * Math.cos(theta)).add(w.scale(d * Math.sin(theta)))\n      );\n    }\n\n    surface.positions.push(Vector3.Zero());\n    surface.positions.push(u);\n\n    const zeroIndex = surface.positions.length - 1;\n    const uIndex = surface.positions.length - 2;\n\n    for (let i = 0; i < segments; i++) {\n      // bottom faces\n      surface.faces.push([zeroIndex, (i + 1) % segments, i]);\n      // cone faces\n      surface.faces.push([uIndex, i, (i + 1) % segments]);\n    }\n\n    // mesh\n    const mesh = Util3d.meshFromPositionAndFaces(\n      name,\n      scene,\n      surface.positions,\n      surface.faces\n    );\n    mesh.convertToFlatShadedMesh();\n    const material = new StandardMaterial(`OrientedConeMaterial${name}`, scene);\n    material.diffuseColor = color;\n    material.emissiveColor = color;\n    mesh.material = material;\n    mesh.isPickable = isPickable;\n    return mesh;\n  };\n\n  static createSphere = (\n    scene,\n    color = Color3.Gray(),\n    diameter = 1,\n    name = `Sphere${randomDigits()}`,\n    isPickable = true\n  ) => {\n    const sphere = Mesh.CreateSphere(name, 16, diameter, scene);\n    const material = Util3d.getMaterialFromColor(\n      color,\n      scene,\n      `SphereMaterial${name}`\n    );\n    sphere.material = material;\n    sphere.isPickable = isPickable;\n    return sphere;\n  };\n\n  static createBox = (\n    scene,\n    color = Color3.Gray(),\n    size = Box.DEFAULT_SIZE,\n    name = `Box${randomDigits()}`,\n    isPickable = true\n  ) => {\n    const box = Mesh.CreateBox(name, size, scene);\n    const material = new StandardMaterial(`BoxMaterial${name}`, scene);\n    material.diffuseColor = color;\n    material.emissiveColor = color;\n    box.material = material;\n    box.isPickable = isPickable;\n    return box;\n  };\n\n  static createTubeFromPoints = (\n    scene,\n    points,\n    color = Color3.Gray(),\n    radius = 1,\n    name = `Tube${randomDigits()}`,\n    isPickable = true\n  ) => {\n    const mesh = MeshBuilder.CreateTube(\n      name,\n      {\n        path: points,\n        radius: radius,\n        sideOrientation: Mesh.DOUBLESIDE,\n        updatable: true,\n        cap: Mesh.CAP_ALL\n      },\n      scene\n    );\n    mesh.material = Util3d.getMaterialFromColor(\n      color,\n      scene,\n      `Material${name}`\n    );\n    mesh.isPickable = isPickable;\n    return mesh;\n  };\n\n  static positionalLightBuilder = scene => {\n    return new PositionalLightBuilder(scene);\n  };\n\n  static directionalLightBuilder = scene => {\n    return new DirectionalLightBuilder(scene);\n  };\n\n  static cameraBuilder(scene) {\n    return new CameraBuilder(scene);\n  }\n\n  static gizmoManagerBuilder(scene) {\n    return new GizmoManagerBuilder(scene);\n  }\n\n  static referentialBuilder = scene => {\n    return new ReferentialBuilder(scene);\n  };\n\n  /**\n   * Return a maybe position of intersection of the mouse and a ground mesh\n   *\n   * @param {Scene} scene Babylon scene\n   * @param {Ground} ground a Babylon mesh that represents the ground\n   * @returns {Maybe} a maybe Vector3 representing the mouse ground intersection\n   */\n  static getGroundPosition = function (scene, ground) {\n    // Use a predicate to get position on the ground\n    const pickInfo = scene.pick(\n      scene.pointerX,\n      scene.pointerY,\n      mesh => mesh === ground\n    );\n    if (pickInfo.hit) return Maybe.some(pickInfo.pickedPoint);\n    return Maybe.none();\n  };\n\n  static pickMesh = (scene, ground) => {\n    const pickInfo = scene.pick(\n      scene.pointerX,\n      scene.pointerY,\n      mesh => mesh !== ground && mesh.isEnabled()\n    );\n    if (pickInfo.hit && pickInfo.pickedMesh.isPickable) {\n      return Maybe.some(pickInfo.pickedMesh);\n    }\n    return Maybe.none();\n  };\n\n  static groundBuilder = scene => {\n    return new GroundBuilder(scene);\n  };\n\n  static meshFromPositionAndFaces(\n    name,\n    scene,\n    positions,\n    faces,\n    updatable = true\n  ) {\n    const vertexData = new VertexData();\n\n    vertexData.positions = positions.flatMap(z => [z.x, z.y, z.z]);\n    vertexData.indices = faces.flatMap(z => z);\n\n    let mesh = new Mesh(name, scene);\n    vertexData.applyToMesh(mesh, updatable);\n    // mesh.createNormals();\n    return mesh;\n  }\n\n  /**\n   *\n   * @param {*} polygon: Array of babylonjs vector3, representing a boundary of a polygon\n   */\n  static triangulatePolygon(polygon) {\n    const triangulation = earcut(\n      polygon.map(x => [x.x, x.y, x.z]).flatMap(x => x),\n      null,\n      3\n    );\n    const len = triangulation.length / 3;\n    const ans = [];\n    for (let i = 0; i < len; i++) {\n      const i3 = 3 * i;\n      ans.push([\n        triangulation[i3],\n        triangulation[i3 + 1],\n        triangulation[i3 + 2]\n      ]);\n    }\n    return ans;\n  }\n\n  /**\n   *\n   * @param {*} polygon: Array of babylonjs vector3, representing a boundary of a polygon\n   * Returns a real number representing the orientation of the curve, if positive represents a counterclockwise orientation, clockwise otherwise.\n   */\n  static computeOrientation(polygon) {\n    const n = polygon.length;\n    const vec3Poly = polygon.map(x => Vec3.ofBabylon(x));\n    let orientation = 0;\n    vec3Poly.forEach((a, i) => {\n      const modi = (i + 1) % n;\n      const edge = vec3Poly[modi].sub(vec3Poly[i]);\n      orientation += Vec3.of([-a.y, a.x, a.z]).dot(edge);\n    });\n    return orientation / 2;\n  }\n\n  /**\n   * @param {*} arrayOfPoints: array of babylon vec3\n   * Returns the average\n   */\n  static pointAverage(arrayOfPoints) {\n    if (!arrayOfPoints || arrayOfPoints.length === 0) return Vector3.Zero();\n    return arrayOfPoints\n      .reduce((e, x) => e.add(x), Vector3.Zero())\n      .scale(1 / arrayOfPoints.length);\n  }\n\n  static pointAverageVec3(arrayOfPoints) {\n    if (!arrayOfPoints || arrayOfPoints.length === 0) return Vec3.ZERO;\n    return arrayOfPoints\n      .reduce((e, x) => e.add(x), Vec3.ZERO)\n      .scale(1 / arrayOfPoints.length);\n  }\n\n  static randomVector3(a, b) {\n    return new Vector3.FromArray(\n      [0, 0, 0].map(x => a + (b - a) * Math.random())\n    );\n  }\n\n  static getMaterialFromColor(\n    color,\n    scene,\n    name = `MaterialFromColor${randomDigits()}`\n  ) {\n    const material = new StandardMaterial(name, scene);\n    material.diffuseColor = color;\n    material.emissiveColor = color;\n    return material;\n  }\n\n  static piecewiseCurveDistance = curve => {\n    let distance = 0;\n    for (let i = 0; i < curve.length - 1; i++) {\n      const v = curve[i + 1].subtract(curve[i]);\n      distance += v.length();\n    }\n    return distance;\n  };\n\n  static getCurveOrientations = curve => {\n    const orientations = [];\n    for (let i = 0; i < curve.length - 1; i++) {\n      const v = curve[i + 1].subtract(curve[i]);\n      orientations.push(Math.atan2(v.y, v.x));\n    }\n    orientations.push(orientations[orientations.length - 1]);\n    return orientations;\n  };\n\n  static getSplineFromCurve = (curve, nbPoints = 7) => {\n    const closed = false;\n    return {\n      points: Curve3.CreateCatmullRomSpline(curve, nbPoints, closed).getPoints()\n    };\n  };\n\n  static splineObj2redis = splineObj => {\n    const orientations = Util3d.getCurveOrientations(splineObj.points);\n    return splineObj.points.map((x, i) => {\n      return [x.x, x.y, orientations[i]];\n    });\n  };\n}\n\nconst randomDigits = () => {\n  return Math.floor(Math.random() * 1e3);\n};\n\nexport default Util3d;\n","export class Animator {\n  constructor(state, next, doWhile) {\n    this.state = state;\n    this.next = next;\n    this.while = doWhile;\n    this.requestAnimeId = null;\n  }\n\n  play() {\n    this.requestAnimeId = requestAnimationFrame(() => {\n      if (!this.while(this.state)) return this.stop();\n      this.state = this.next(this.state);\n      this.play();\n    });\n    return this;\n  }\n\n  stop() {\n    cancelAnimationFrame(this.requestAnimeId);\n    return this;\n  }\n\n  static builder() {\n    return new AnimatorBuilder();\n  }\n}\n\nclass AnimatorBuilder {\n  constructor() {\n    this._state = null;\n    this._next = null;\n    this._end = null;\n  }\n\n  initialState(state) {\n    this._state = state;\n    return this;\n  }\n\n  nextState(next) {\n    this._next = next;\n    return this;\n  }\n\n  while(end) {\n    this._end = end;\n    return this;\n  }\n\n  build() {\n    const someAreEmpty = [this._state, this._next, this._end].some(\n      x => x === null || x === undefined\n    );\n    if (someAreEmpty) throw new Error(\"Animator properties are missing\");\n    return new Animator(this._state, this._next, this._end);\n  }\n}\n","import { MasterDB } from \"mov-fe-lib-core\";\n\nclass AnnotationManager {\n  constructor() {\n    if (instance) return instance;\n    instance = this;\n    this.annotations = {};\n    this.observersBySceneId = {};\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                   Getters & Setters                                  *\n   *                                                                                      */\n  //========================================================================================\n\n  getAnnotations = () => this.annotations;\n\n  load() {\n    this.retrieveAnnotationsFromDb();\n    return this;\n  }\n  /**\n   *\n   * @param {*} scene: Scene\n   * @param {*} lambda: AnnotationManager -> {}\n   */\n  pushObserver(scene, lambda) {\n    const sceneId = scene._uid;\n\n    if (!(sceneId in this.observersBySceneId)) {\n      this.observersBySceneId[sceneId] = [];\n    }\n    this.observersBySceneId[sceneId].push(lambda);\n    return this;\n  }\n\n  clearObserver(scene) {\n    const sceneId = scene._uid;\n    if (sceneId in this.observersBySceneId) {\n      delete this.observersBySceneId[sceneId];\n    }\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                         Utils                                        *\n   *                                                                                      */\n  //========================================================================================\n\n  retrieveAnnotationsFromDb() {\n    MasterDB.subscribe(\n      { Scope: \"Annotation\", Name: \"*\" },\n      data => {\n        console.log(\"Annotation update\", data);\n        const actionMap = {\n          del: annotation => this.delAnnotation(annotation),\n          set: annotation => this.addAnnotation(annotation)\n        };\n        const annotation = data.key.Annotation;\n        if (data.event in actionMap) {\n          actionMap[data.event](annotation);\n          Object.keys(this.observersBySceneId).forEach(k =>\n            this.observersBySceneId[k].forEach(f => f(this))\n          );\n        }\n      },\n      data => {\n        console.log(\"Annotation start\", data);\n        const annotation = data.value.Annotation;\n        this.addAnnotation(annotation);\n      }\n    );\n  }\n\n  delAnnotation(annotation) {\n    if (!annotation) return;\n    const names2delete = Object.keys(annotation).reduce((e, x) => {\n      e.push(x);\n      return e;\n    }, []);\n    Object.keys(this.annotations).forEach(annotationType => {\n      const value = this.annotations[annotationType];\n      value.names = value.names.filter(x => !names2delete.includes(x));\n      value.labels = value.labels.filter(x => !names2delete.includes(x));\n    });\n  }\n\n  addAnnotation(annotation) {\n    if (!annotation) return;\n    Object.keys(annotation).forEach(name => {\n      const annotationObj = annotation[name];\n      if (!annotationObj.Type) return;\n      const type = annotationObj.Type.toLowerCase();\n      const label = annotationObj.Label;\n      if (!(type in this.annotations)) {\n        this.annotations[type] = { names: [], labels: [] };\n      }\n      this.annotations[type].names.push(name);\n      this.annotations[type].labels.push(label ? label : name);\n    });\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                        Static                                        *\n   *                                                                                      */\n  //========================================================================================\n\n  static getInstance() {\n    return new AnnotationManager();\n  }\n\n  static getAnnotations() {\n    return AnnotationManager.getInstance().getAnnotations();\n  }\n}\nlet instance = null;\nexport default AnnotationManager;\n","import AddMapAction from \"../Actions/AddMapAction\";\nimport RobotAction from \"../Actions/RobotAction\";\nimport Robot from \"../NodeItem/Robot\";\nimport AddMeshAction from \"../Actions/AddMeshAction\";\n\nexport const ASSETS_TYPES = {\n  Map: \"Map\",\n  Robot: \"Robot\",\n  Mesh: \"Mesh\"\n};\n\nexport const AssetsTypesFactory = {\n  Map: map => new AddMapAction(map.name, map.loader),\n  Robot: robot => new RobotAction(robot, Robot.getSocketAnimator),\n  Mesh: mesh => new AddMeshAction(mesh)\n};\n","import { Clipboard as Clip } from \"mov-fe-lib-core\";\n\nconst SCENE_CONTEXT = \"scene\";\nlet COPY_PASTE_UID = 0;\n\nexport default class Clipboard {\n  static copy(value) {\n    Clip.write(SCENE_CONTEXT, value);\n  }\n  static paste() {\n    return Clip.read(SCENE_CONTEXT);\n  }\n\n  static getUID() {\n    return COPY_PASTE_UID++;\n  }\n}\n","const Constants = {\n  RADIUS: 0.4,\n  POINTS_DENSITY: 2,\n  CLOUD_FUNCTION_NAME: \"backend.viewer\"\n};\n\nexport default Constants;\n","import { Vector3 } from \"@babylonjs/core\";\nimport Util3d from \"../Util3d/Util3d\";\nimport { Animator } from \"./Animator\";\n\nexport default class DefaultMouseEvents {\n  static onPointerDown = mainView => evt => {\n    mainView.mousePosClick = mainView\n      .getMouseCoordsFromRoot()\n      .orSome(Vector3.Zero());\n    mainView.mousePosMove = mainView.mousePosClick;\n    mainView.sceneMemory.forEach(({ camera, canvas }) => {\n      if (evt.buttons === 2 || evt.buttons === 4 || evt.ctrlKey) {\n        camera.detachControl(canvas);\n      }\n    });\n  };\n\n  static onPointerUp = mainView => evt => {\n    mainView.sceneMemory.forEach(({ camera, canvas }) => {\n      camera.attachControl(canvas, true);\n    });\n  };\n\n  static onPointerMove = mainView => evt => {\n    mainView.sceneMemory.forEach(({ mouseLocationText, camera }) => {\n      mainView.getMouseCoordsFromRoot().forEach(currentLocal => {\n        setMouseLocationTxt(mouseLocationText, currentLocal);\n        const panCamera = () => {\n          const v = currentLocal.subtract(mainView.mousePosMove);\n          const vBabylon = Util3d.getBabylonCoordinates(v).scale(-1);\n          animateCamera(camera, vBabylon);\n          mainView.mousePosMove = currentLocal;\n        };\n        const mouseButtonActions = [\n          { predicate: evt.ctrlKey && evt.buttons === 1, action: panCamera },\n          { predicate: evt.buttons === 4, action: panCamera }\n        ];\n        const filterActions = mouseButtonActions.filter(\n          ({ predicate }) => predicate\n        );\n        if (filterActions.length > 0) filterActions[0].action();\n      });\n    });\n  };\n}\n\nfunction animateCamera(camera, v) {\n  Animator.builder()\n    .initialState({\n      camera: camera,\n      time: 0,\n      T: new Date().getTime()\n    })\n    .nextState(s => {\n      const { camera, time } = s;\n      const dt = 0.1; //(new Date().getTime() - T) / 1000;\n      const vdt = v.scale(dt);\n      camera.position = camera.position.add(vdt);\n      camera.setTarget(camera.target.add(vdt));\n      return {\n        camera: camera,\n        time: time + dt,\n        T: new Date().getTime()\n      };\n    })\n    .while(s => s.time <= 1)\n    .build()\n    .play();\n}\n\nfunction setMouseLocationTxt(mouseLocationText, currentLocal) {\n  mouseLocationText.text = `x: ${currentLocal.x.toFixed(\n    2\n  )}, y: ${currentLocal.y.toFixed(2)}`;\n}\n","import {\n  Scene,\n  Color3,\n  RotationGizmo,\n  UtilityLayerRenderer,\n  Vector3,\n  StandardMaterial,\n  Mesh,\n  Space\n} from \"@babylonjs/core\";\nimport { TextBlock, AdvancedDynamicTexture } from \"@babylonjs/gui/2D\";\nimport Util3d from \"../Util3d/Util3d\";\nimport \"@babylonjs/core/Debug/debugLayer\";\nimport \"@babylonjs/inspector\";\n\nclass DefaultScene {\n  static createGizmo = scene => {\n    const gizmoManager = new RotationGizmo(new UtilityLayerRenderer(scene));\n    gizmoManager.xGizmo.dragBehavior.detach();\n    gizmoManager.xGizmo.scaleRatio = 0.0;\n    gizmoManager.yGizmo.dragBehavior.detach();\n    gizmoManager.yGizmo.scaleRatio = 0.0;\n    return gizmoManager;\n  };\n\n  static createCamera = (scene, canvas, forEach = camera => {}) => {\n    const COLLISION_RADIUS = 1;\n    const camera = Util3d.cameraBuilder(scene)\n      .sphericalCoordinates(new Vector3(0, 0, 14))\n      .target(Vector3.Zero())\n      .name(\"camera\")\n      .build();\n    camera.attachControl(canvas, false);\n    camera.inertia = 0.7;\n    camera.collisionRadius = new Vector3(\n      COLLISION_RADIUS,\n      COLLISION_RADIUS,\n      COLLISION_RADIUS\n    );\n    camera.panningInertia = 0.5;\n    camera.checkCollisions = true;\n    camera.panningSensibility = 0;\n    camera.lowerRadiusLimit = 2;\n    forEach(camera);\n    return camera;\n  };\n\n  static createLight = scene => {\n    return Util3d.directionalLightBuilder(scene)\n      .name(\"light\")\n      .direction(new Vector3(0, -1, 0))\n      .intensity(0.35)\n      .build();\n  };\n\n  static createMeshGround = (scene, width = 20, height = 20) => {\n    const ground = Mesh.CreateGround(\"groundMesh\", width, height, 20, scene);\n    ground.translate(new Vector3(0, -1, 0), 1e-2, Space.WORLD);\n    ground.material = new StandardMaterial(\"wireframe\", scene);\n    ground.material.wireframe = true;\n    ground.isPickable = false;\n    ground.checkCollisions = true;\n    return ground;\n  };\n\n  static createScene = engine => {\n    const scene = new Scene(engine);\n    scene.clearColor = Color3.Black;\n    scene.collisionsEnabled = true;\n    scene._uid = scene.getUniqueId();\n    // scene.debugLayer.show({\n    //   embedMode: true,\n    //   globalRoot: document.body,\n    //   overlay: true\n    // });\n    return scene;\n  };\n\n  static createMouseLocationText = scene => {\n    const advancedTexture = AdvancedDynamicTexture.CreateFullscreenUI(\n      \"UI\",\n      true,\n      scene\n    );\n    const text = new TextBlock();\n    text.text = \"\";\n    text.color = \"white\";\n    text.fontSize = 17;\n    text.left = -560;\n    text.top = -145;\n    advancedTexture.addControl(text);\n    return text;\n  };\n}\n\nexport default DefaultScene;\n","import { Maybe } from \"monet\";\n/**\n * Mesh cache for each scene.\n *\n * Each mesh is associated with a scene therefore we must have a cache per scene.\n *\n */\nclass MeshCache {\n  constructor() {\n    if (instance) return instance;\n    instance = this;\n    this.meshCacheBySceneId = {};\n    this.count = 0;\n  }\n\n  static getInstance() {\n    return new MeshCache();\n  }\n\n  hasKey(key, scene) {\n    const sceneId = scene._uid;\n    return Maybe.fromNull(this.meshCacheBySceneId[sceneId])\n      .flatMap(meshCache => ofNull(meshCache[key]))\n      .cata(\n        () => false,\n        () => true\n      );\n  }\n\n  put(key, scene, mesh) {\n    const sceneId = scene._uid;\n    if (!(sceneId in this.meshCacheBySceneId)) {\n      this.meshCacheBySceneId[sceneId] = {};\n    }\n    this.meshCacheBySceneId[sceneId][key] = mesh;\n    mesh.setEnabled(false);\n    return this;\n  }\n\n  get(key, scene) {\n    const sceneId = scene._uid;\n    return Maybe.fromNull(this.meshCacheBySceneId[sceneId])\n      .flatMap(meshCache => ofNull(meshCache[key]))\n      .map(mesh => {\n        console.log(\n          \"#Mesh: Found Mesh in cache, retrieving copy number\",\n          this.count\n        );\n        const cloneMesh = mesh.clone(`${key}${this.count++}`);\n        console.log(\"#Mesh:\", cloneMesh);\n        cloneMesh.setEnabled(true);\n        return cloneMesh;\n      })\n      .orNull();\n  }\n\n  del(scene) {\n    const sceneId = scene._uid;\n    if (sceneId in this.meshCacheBySceneId) {\n      delete this.meshCacheBySceneId[sceneId];\n    }\n  }\n}\n\nconst ofNull = x => Maybe.fromNull(x);\n// private instance\nlet instance = null;\nexport default MeshCache;\n","import MeshCache from \"./MeshCache\";\nimport { AssetsManager } from \"@babylonjs/core\";\nimport \"@babylonjs/loaders\";\n\nclass MeshLoader {\n  constructor(scene) {\n    this.scene = scene;\n  }\n\n  static of(scene) {\n    return new MeshLoader(scene);\n  }\n\n  load = (meshName, mapFunction = mesh => mesh) =>\n    new Promise((re, rej) => {\n      const meshCache = MeshCache.getInstance();\n      if (meshCache.hasKey(meshName, this.scene)) {\n        console.log(`Found Mesh ${meshName} in cache for scene ${this.scene}`);\n        re(mapFunction(meshCache.get(meshName, this.scene)));\n      } else {\n        console.log(\"Loading mesh....\");\n        const assetsManager = new AssetsManager(this.scene);\n        const meshTask = assetsManager.addMeshTask(\"\", \"\", MESH_URL, meshName);\n        meshTask.onSuccess = task => {\n          console.log(\"Load Success\", meshName);\n          const mesh = task.loadedMeshes[0];\n          mesh.name = meshName;\n          meshCache.put(meshName, this.scene, mesh);\n        };\n        meshTask.onError = (task, message, exception) =>\n          rej({ message, exception });\n        assetsManager.onFinish = task => {\n          console.log(\"Load finish \");\n          re(mapFunction(meshCache.get(meshName, this.scene)));\n        };\n        assetsManager.load();\n      }\n    });\n\n  static getMeshUrl = src => `${MESH_URL}${src}`;\n}\n\nconst MESH_URL = `/static/meshes/`;\nexport default MeshLoader;\n","import { MasterDB } from \"mov-fe-lib-core\";\nimport Constants from \"./Constants\";\n\nclass SceneServerUtils {\n  static retrieveScene = (\n    sceneName,\n    successCallback = DEFAULT_SUCCESS,\n    failCallback = DEFAULT_FAILURE(\"retrieving scene\")\n  ) => {\n    MasterDB.cloudFunction(\n      Constants.CLOUD_FUNCTION_NAME,\n      \"retrieveScene\",\n      sceneName,\n      data => successFailIf(data, successCallback, failCallback)\n    );\n  };\n}\n\nconst DEFAULT_FAILURE = failureLocation => data => {\n  throw new Error(`Exception caught in ${failureLocation}: ${data.error}`);\n};\n\nconst DEFAULT_SUCCESS = data => {};\n\nconst successFailIf = (data, successCallback, failCallback) => {\n  if (data.success) {\n    successCallback(data);\n  } else {\n    failCallback(data);\n  }\n};\nexport default SceneServerUtils;\n","import TreeObject from \"../TreeObject/TreeObject\";\nimport TreeNode from \"../TreeObject/TreeNode\";\nimport GlobalRef from \"../NodeItem/GlobalRef\";\nimport { MasterDB } from \"mov-fe-lib-core\";\nimport Constants from \"./Constants\";\n\nconst CLOUD_FUNCTION_NAME = Constants.CLOUD_FUNCTION_NAME;\n\nclass TreeServerUtils {\n  constructor(sceneName) {\n    this.sceneName = sceneName;\n  }\n\n  static ofScene(sceneName) {\n    return new TreeServerUtils(sceneName);\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                    Util functions                                    *\n   *                                                                                      */\n  //========================================================================================\n\n  getNodeFromTree = (name, objectTree) => {\n    return new TreeObject(objectTree).getNode(x => name === x.title);\n  };\n\n  getParentFromChild = (childName, objectTree) => {\n    return new TreeObject(objectTree).getParentNode(x => childName === x.title);\n  };\n\n  deleteNodeFromTreeUsingName = (name, objectTree, is2delInServer = true) => {\n    this.getNodeFromTree(name, objectTree).forEach(node => {\n      // destroy treeNode\n      TreeNode.dispose(node);\n\n      if (is2delInServer) {\n        this.deleteNodeInServer(name);\n      }\n\n      const maybeParent = this.getParentFromChild(name, objectTree);\n      maybeParent.forEach(parentNode => {\n        parentNode.children = parentNode.children.filter(x => x.title !== name);\n      });\n\n      objectTree = objectTree.filter(x => x.title !== name);\n    });\n    return objectTree;\n  };\n\n  getNodeFromTreeWithPredicate = (predicate, objectTree) => {\n    return new TreeObject(objectTree).getNode(predicate);\n  };\n\n  addNodeItem2Tree = (\n    objectTree,\n    nodeItem,\n    parentName = GlobalRef.NAME,\n    is2addInServer = true,\n    isVisible = true\n  ) => {\n    // delete if already exist\n    this.deleteNodeFromTreeUsingName(nodeItem.name, objectTree, is2addInServer);\n\n    const node2Add = TreeNode.builder()\n      .title(nodeItem.name)\n      .item(nodeItem)\n      .isVisible(isVisible)\n      .build();\n\n    if (parentName) {\n      const maybeParentNode = this.getNodeFromTree(parentName, objectTree);\n      maybeParentNode.forEach(parentNode => {\n        if (is2addInServer) this.addNodeItem2Server(node2Add, parentNode.title);\n        parentNode.children.push(node2Add);\n      });\n    } else {\n      objectTree.push(node2Add);\n      if (is2addInServer) this.addNodeItem2Server(node2Add, null);\n    }\n    return objectTree;\n  };\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                   Server functions                                   *\n   *                                                                                      */\n  //========================================================================================\n\n  updateNodeInServer = (name, objectTree, oldName = null) => {\n    console.log(\"updateNodeInServer!\", name, this.sceneName);\n    this.getNodeFromTree(name, objectTree).forEach(node => {\n      const parentName = this.getParentFromChild(name, objectTree)\n        .map(x => x.title)\n        .orNull();\n      MasterDB.cloudFunction(\n        CLOUD_FUNCTION_NAME,\n        \"updateNode\",\n        [TreeNode.toDict(node), parentName, oldName, this.sceneName],\n        data => {\n          console.log(\"Update node with success?\", data.success, data.error);\n        }\n      );\n    });\n  };\n\n  addNodeItem2Server = (treeNode, parentName) => {\n    MasterDB.cloudFunction(\n      CLOUD_FUNCTION_NAME,\n      \"addNodeItem\",\n      [TreeNode.toDict(treeNode), parentName, this.sceneName],\n      data => {\n        console.log(\"Add node with success?\", data.success);\n      }\n    );\n  };\n\n  deleteNodeInServer = name => {\n    MasterDB.cloudFunction(\n      CLOUD_FUNCTION_NAME,\n      \"deleteNodeByName\",\n      [name, this.sceneName],\n      data => {\n        console.log(\"Deleted node with success?\", data.success);\n      }\n    );\n  };\n}\n\nexport default TreeServerUtils;\n","export function selectOneAction(predicateActionList, defaultAction = () => {}) {\n  return input => {\n    predicateActionList.push({ predicate: e => true, action: defaultAction });\n    for (let i = 0; i < predicateActionList.length; i++) {\n      const predicateAction = predicateActionList[i];\n      if (predicateAction.predicate(input)) {\n        predicateAction.action();\n        break;\n      }\n    }\n  };\n}\n","import { createGlobalStyle } from \"styled-components\";\nimport { Style as S } from \"mov-fe-lib-core\";\n\nconst Style = createGlobalStyle`${S}`;\nexport default Style;\n","import { createMuiTheme } from \"@material-ui/core/styles\";\nimport \"fontsource-roboto\";\nimport \"fontsource-open-sans\";\n\nconst themeFactory = particular => ({\n  ...particular,\n  typography: {\n    fontFamily: \"Open Sans\",\n    h1: {\n      fontFamily: \"Open Sans\"\n    },\n    h2: {\n      fontFamily: \"Open Sans\"\n    },\n    h3: {\n      fontFamily: \"Open Sans\"\n    },\n    h4: {\n      fontFamily: \"Open Sans\"\n    },\n    h5: {\n      fontFamily: \"Open Sans\"\n    },\n    h6: {\n      fontFamily: \"Open Sans\"\n    },\n    body1: {\n      fontFamily: \"Roboto\"\n    }\n  },\n  cursorDefault: {\n    cursor: \"default\"\n  },\n  cursorPointer: {\n    cursor: \"pointer\"\n  }\n});\n\nconst Themes = {\n  dark: createMuiTheme(\n    themeFactory({\n      label: \"dark\",\n      backgroundColor:\n        \"linear-gradient(114.01deg, #212121 0%, #050505 100.43%)\",\n      bottomNavigation: { background: \"#212121\" },\n      globalStats: {\n        borderColor: \"#474747\",\n        subTextColor: \"#CDCDCD\",\n        upperTextColor: \"#E6E6E6\"\n      },\n      palette: {\n        type: \"dark\", // Switching the dark mode on, is a single property value change.\n        primary: {\n          main: \"#36b5e6\"\n        },\n        secondary: {\n          main: \"#CF6679\"\n        },\n        green: {\n          main: \"#03DAC5\"\n        }\n      },\n      overrides: {\n        MuiButton: {\n          outlined: {\n            margin: \"8px\"\n          },\n          text: {\n            margin: \"8px\"\n          },\n          contained: {\n            margin: \"8px\"\n          },\n          containedPrimary: {\n            color: \"inherit\",\n            margin: \"8px\"\n          },\n          containedSecondary: {\n            color: \"inherit\",\n            margin: \"8px\"\n          }\n        },\n        MuiButtonGroup: {\n          root: {\n            margin: \"0\"\n          },\n          groupedContainedPrimary: {\n            margin: \"0\"\n          },\n          groupedOutlined: {\n            margin: \"0\"\n          },\n          groupedText: {\n            margin: \"0\"\n          }\n        },\n        MuiIconButton: {\n          root: {\n            color: \"#36b5e6\"\n          }\n        },\n        MuiListItem: {\n          button: {\n            \"&:hover\": {\n              backgroundColor: \"rgba(54,181,230, 0.15)\"\n            }\n          }\n        },\n        MuiFormControlLabel: {\n          label: {\n            color: \"rgba(255,255,255,0.8)\"\n          }\n        },\n        MuiInputBase: {\n          input: {\n            font: \"Roboto\"\n          }\n        },\n        MuiFilledInput: {\n          root: {\n            border: \"4px\"\n          },\n          underline: {\n            \"&::before\": {\n              borderRadius: \"4px\"\n            }\n          }\n        }\n      }\n    })\n  ),\n  light: createMuiTheme(\n    themeFactory({\n      font: {\n        Roboto: {\n          fontFamily: \"Roboto\"\n        },\n        OpenSans: {\n          fontFamily: \"Open Sans\"\n        }\n      },\n      label: \"light\",\n      backgroundColor:\n        \"linear-gradient(122.19deg, #FFFFFF 2.58%, #FFFFFF 76.23%)\", // it was white before\n      bottomNavigation: { background: \"#c3c3c3\" },\n      globalStats: {\n        borderColor: \"#E6E6E6\",\n        subTextColor: \"#717171\",\n        upperTextColor: \"#474747\"\n      },\n      palette: {\n        primary: {\n          main: \"#007197\"\n        },\n        secondary: {\n          main: \"#BE2424\"\n        },\n        green: {\n          main: \"#03DAC5\"\n        }\n      },\n      overrides: {\n        MuiButton: {\n          outlined: {\n            margin: \"8px\"\n          },\n          text: {\n            margin: \"8px\"\n          },\n          contained: {\n            margin: \"8px\"\n          },\n          containedPrimary: {\n            color: \"white\",\n            margin: \"8px\"\n          },\n          containedSecondary: {\n            color: \"white\",\n            margin: \"8px\"\n          }\n        },\n        MuiButtonGroup: {\n          root: {\n            margin: \"0\"\n          },\n          groupedContainedPrimary: {\n            margin: \"0\"\n          },\n          groupedOutlined: {\n            margin: \"0\"\n          },\n          groupedText: {\n            margin: \"0\"\n          }\n        },\n        MuiIconButton: {\n          root: {\n            color: \"#007197\"\n          }\n        },\n        MuiListItem: {\n          button: {\n            \"&:hover\": {\n              backgroundColor: \"rgba(0,113,151, 0.15)\"\n            }\n          }\n        },\n        MuiFormControlLabel: {\n          label: {\n            color: \"rgba(0,0,0,0.8)\"\n          }\n        },\n        MuiInputBase: {\n          input: {\n            font: \"Roboto\"\n          }\n        },\n        MuiFilledInput: {\n          root: {\n            border: \"4px\"\n          },\n          underline: {\n            \"&::before\": {\n              borderRadius: \"4px\"\n            }\n          }\n        }\n      }\n    })\n  )\n};\n\nThemes.getTheme = () => {\n  const theme = window.localStorage.getItem(\"movai.theme\"); // dark or light\n  return theme ? theme : \"dark\";\n};\n\nThemes.setTheme = value => {\n  window.localStorage.setItem(\"movai.theme\", value);\n};\n\nexport default Themes;\n","module.exports = require(\"@babel/runtime/helpers/esm/assertThisInitialized\");","module.exports = require(\"@babel/runtime/helpers/esm/asyncToGenerator\");","module.exports = require(\"@babel/runtime/helpers/esm/classCallCheck\");","module.exports = require(\"@babel/runtime/helpers/esm/classPrivateFieldGet\");","module.exports = require(\"@babel/runtime/helpers/esm/createClass\");","module.exports = require(\"@babel/runtime/helpers/esm/defineProperty\");","module.exports = require(\"@babel/runtime/helpers/esm/extends\");","module.exports = require(\"@babel/runtime/helpers/esm/get\");","module.exports = require(\"@babel/runtime/helpers/esm/getPrototypeOf\");","module.exports = require(\"@babel/runtime/helpers/esm/inherits\");","module.exports = require(\"@babel/runtime/helpers/esm/objectWithoutProperties\");","module.exports = require(\"@babel/runtime/helpers/esm/possibleConstructorReturn\");","module.exports = require(\"@babel/runtime/helpers/esm/slicedToArray\");","module.exports = require(\"@babel/runtime/helpers/esm/taggedTemplateLiteral\");","module.exports = require(\"@babel/runtime/helpers/esm/toConsumableArray\");","module.exports = require(\"@babel/runtime/helpers/esm/typeof\");","module.exports = require(\"@babel/runtime/regenerator\");","module.exports = require(\"@babylonjs/core\");","module.exports = require(\"@babylonjs/core/Debug/debugLayer\");","module.exports = require(\"@babylonjs/core/Maths/math\");","module.exports = require(\"@babylonjs/gui/2D\");","module.exports = require(\"@babylonjs/inspector\");","module.exports = require(\"@babylonjs/loaders\");","module.exports = require(\"@date-io/date-fns\");","module.exports = require(\"@material-ui/core\");","module.exports = require(\"@material-ui/core/Backdrop\");","module.exports = require(\"@material-ui/core/Box\");","module.exports = require(\"@material-ui/core/Breadcrumbs\");","module.exports = require(\"@material-ui/core/Button\");","module.exports = require(\"@material-ui/core/Checkbox\");","module.exports = require(\"@material-ui/core/Chip\");","module.exports = require(\"@material-ui/core/CircularProgress\");","module.exports = require(\"@material-ui/core/Collapse\");","module.exports = require(\"@material-ui/core/Divider\");","module.exports = require(\"@material-ui/core/Drawer\");","module.exports = require(\"@material-ui/core/FormControl\");","module.exports = require(\"@material-ui/core/FormControlLabel\");","module.exports = require(\"@material-ui/core/FormHelperText\");","module.exports = require(\"@material-ui/core/Grid\");","module.exports = require(\"@material-ui/core/IconButton\");","module.exports = require(\"@material-ui/core/Input\");","module.exports = require(\"@material-ui/core/InputAdornment\");","module.exports = require(\"@material-ui/core/InputBase\");","module.exports = require(\"@material-ui/core/InputLabel\");","module.exports = require(\"@material-ui/core/ListItemText\");","module.exports = require(\"@material-ui/core/Menu\");","module.exports = require(\"@material-ui/core/MenuItem\");","module.exports = require(\"@material-ui/core/Paper\");","module.exports = require(\"@material-ui/core/Select\");","module.exports = require(\"@material-ui/core/Switch\");","module.exports = require(\"@material-ui/core/Tab\");","module.exports = require(\"@material-ui/core/TableCell\");","module.exports = require(\"@material-ui/core/Tabs\");","module.exports = require(\"@material-ui/core/TextField\");","module.exports = require(\"@material-ui/core/Typography\");","module.exports = require(\"@material-ui/core/colors\");","module.exports = require(\"@material-ui/core/styles\");","module.exports = require(\"@material-ui/core/styles/colorManipulator\");","module.exports = require(\"@material-ui/core/utils\");","module.exports = require(\"@material-ui/icons/Add\");","module.exports = require(\"@material-ui/icons/AddBox\");","module.exports = require(\"@material-ui/icons/ArrowDownward\");","module.exports = require(\"@material-ui/icons/Check\");","module.exports = require(\"@material-ui/icons/ChevronLeft\");","module.exports = require(\"@material-ui/icons/ChevronRight\");","module.exports = require(\"@material-ui/icons/Clear\");","module.exports = require(\"@material-ui/icons/Close\");","module.exports = require(\"@material-ui/icons/DeleteOutline\");","module.exports = require(\"@material-ui/icons/Edit\");","module.exports = require(\"@material-ui/icons/ExpandMore\");","module.exports = require(\"@material-ui/icons/FilterList\");","module.exports = require(\"@material-ui/icons/FirstPage\");","module.exports = require(\"@material-ui/icons/Label\");","module.exports = require(\"@material-ui/icons/LastPage\");","module.exports = require(\"@material-ui/icons/NavigateNext\");","module.exports = require(\"@material-ui/icons/Remove\");","module.exports = require(\"@material-ui/icons/SaveAlt\");","module.exports = require(\"@material-ui/icons/Search\");","module.exports = require(\"@material-ui/icons/Settings\");","module.exports = require(\"@material-ui/icons/Today\");","module.exports = require(\"@material-ui/icons/ViewColumn\");","module.exports = require(\"@material-ui/pickers\");","module.exports = require(\"clsx\");","module.exports = require(\"earcut\");","module.exports = require(\"fontsource-open-sans\");","module.exports = require(\"fontsource-roboto\");","module.exports = require(\"lodash.isequal\");","module.exports = require(\"lodash/capitalize\");","module.exports = require(\"lodash/cloneDeep\");","module.exports = require(\"lodash/get\");","module.exports = require(\"lodash/isEmpty\");","module.exports = require(\"lodash/isEqual\");","module.exports = require(\"lodash/set\");","module.exports = require(\"lodash/uniqBy\");","module.exports = require(\"material-icons/css/material-icons.css\");","module.exports = require(\"material-table\");","module.exports = require(\"monet\");","module.exports = require(\"mov-fe-lib-core\");","module.exports = require(\"prop-types\");","module.exports = require(\"react\");","module.exports = require(\"react-dom\");","module.exports = require(\"react-resize-detector\");","module.exports = require(\"react-virtualized\");","module.exports = require(\"react-virtualized-tree\");","module.exports = require(\"react-virtualized-tree/lib/main.css\");","module.exports = require(\"react-virtualized/styles.css\");","module.exports = require(\"styled-components\");"],"sourceRoot":""}