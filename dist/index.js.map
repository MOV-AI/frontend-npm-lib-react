{"version":3,"sources":["webpack://MovaiReact/webpack/universalModuleDefinition","webpack://MovaiReact/webpack/bootstrap","webpack://MovaiReact/./index.js","webpack://MovaiReact/./src/Components/Logs/Logs.css","webpack://MovaiReact/./src/Components/Snackbar/Snackbar.css","webpack://MovaiReact/./node_modules/css-loader/dist/runtime/api.js","webpack://MovaiReact/./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack://MovaiReact/./node_modules/timers-browserify/main.js","webpack://MovaiReact/(webpack)/buildin/global.js","webpack://MovaiReact/./resources/alert-error.png","webpack://MovaiReact/./resources/movai_red.svg","webpack://MovaiReact/./src/Components/Breadcrumb.js","webpack://MovaiReact/./src/Components/Button.js","webpack://MovaiReact/./src/Components/Collapse.js","webpack://MovaiReact/./src/Components/ContextMenu.js","webpack://MovaiReact/./src/Components/Drawer.js","webpack://MovaiReact/./src/Components/HOCs/withAuthentication.js","webpack://MovaiReact/./src/Components/HOCs/withOfflineValidation.js","webpack://MovaiReact/./src/Components/LoginForm/LoginForm.js","webpack://MovaiReact/./src/Components/LoginForm/movai_red.svg","webpack://MovaiReact/./src/Components/Logs/Logs.css?4c9f","webpack://MovaiReact/./src/Components/Logs/Logs.js","webpack://MovaiReact/./src/Components/Logs/LogsFilterBar/FiltersIcon/FiltersIcon.js","webpack://MovaiReact/./src/Components/Logs/LogsFilterBar/LogsFilterBar.js","webpack://MovaiReact/./src/Components/Logs/LogsTable/LogsTable.js","webpack://MovaiReact/./src/Components/Logs/utils/Utils.js","webpack://MovaiReact/./src/Components/Modal/AbstractModal.js","webpack://MovaiReact/./src/Components/Modal/ConfirmAlertModal.js","webpack://MovaiReact/./src/Components/Modal/RobotLogModal.js","webpack://MovaiReact/./src/Components/Modal/SelectScopeModal.js","webpack://MovaiReact/./src/Components/ProfileMenu.js","webpack://MovaiReact/./src/Components/SearchInput.js","webpack://MovaiReact/./src/Components/Select.js","webpack://MovaiReact/./src/Components/Snackbar/Alert/Alert.js","webpack://MovaiReact/./src/Components/Snackbar/Alert/svg-icons/CreateSVGIcon.js","webpack://MovaiReact/./src/Components/Snackbar/Alert/svg-icons/svgIcons.js","webpack://MovaiReact/./src/Components/Snackbar/Snackbar.css?c276","webpack://MovaiReact/./src/Components/Snackbar/Snackbar.js","webpack://MovaiReact/./src/Components/Table.js","webpack://MovaiReact/./src/Components/Tabs.js","webpack://MovaiReact/./src/Components/Text.js","webpack://MovaiReact/./src/Components/Toggle.js","webpack://MovaiReact/./src/Components/Tree/BasicVirtualizedTree.js","webpack://MovaiReact/./src/Components/Tree/TreeSearch.js","webpack://MovaiReact/./src/Components/VerticalBar.js","webpack://MovaiReact/./src/Components/Viewer/Actions/Action.js","webpack://MovaiReact/./src/Components/Viewer/Actions/AddKeyPointAction.js","webpack://MovaiReact/./src/Components/Viewer/Actions/AddMapAction.js","webpack://MovaiReact/./src/Components/Viewer/Actions/AddMeshAction.js","webpack://MovaiReact/./src/Components/Viewer/Actions/BoxRegionAction.js","webpack://MovaiReact/./src/Components/Viewer/Actions/DragObjectsAction.js","webpack://MovaiReact/./src/Components/Viewer/Actions/DrawGraphAction.js","webpack://MovaiReact/./src/Components/Viewer/Actions/DrawPathAction.js","webpack://MovaiReact/./src/Components/Viewer/Actions/MeasureAction.js","webpack://MovaiReact/./src/Components/Viewer/Actions/MouseKeysAction.js","webpack://MovaiReact/./src/Components/Viewer/Actions/NavigationPreviewAction.js","webpack://MovaiReact/./src/Components/Viewer/Actions/OrbitAction.js","webpack://MovaiReact/./src/Components/Viewer/Actions/PolygonRegionAction.js","webpack://MovaiReact/./src/Components/Viewer/Actions/RobotAction.js","webpack://MovaiReact/./src/Components/Viewer/AssetsManager/AssetsManager.js","webpack://MovaiReact/./src/Components/Viewer/AssetsManager/MapLoader.js","webpack://MovaiReact/./src/Components/Viewer/BaseViewer/BaseViewer.js","webpack://MovaiReact/./src/Components/Viewer/Graph/Graph.js","webpack://MovaiReact/./src/Components/Viewer/MainView/MainViewActions.js","webpack://MovaiReact/./src/Components/Viewer/MainView/MainViewRetriever.js","webpack://MovaiReact/./src/Components/Viewer/MainView/MeshSelector.js","webpack://MovaiReact/./src/Components/Viewer/MainView/NodeItemFactoryMap.js","webpack://MovaiReact/./src/Components/Viewer/Math/Mat3.js","webpack://MovaiReact/./src/Components/Viewer/Math/Vec2.js","webpack://MovaiReact/./src/Components/Viewer/Math/Vec3.js","webpack://MovaiReact/./src/Components/Viewer/NodeItem/AssetNodeItem.js","webpack://MovaiReact/./src/Components/Viewer/NodeItem/Box.js","webpack://MovaiReact/./src/Components/Viewer/NodeItem/BoxRegion.js","webpack://MovaiReact/./src/Components/Viewer/NodeItem/GlobalRef.js","webpack://MovaiReact/./src/Components/Viewer/NodeItem/GraphItem.js","webpack://MovaiReact/./src/Components/Viewer/NodeItem/KeyPoint.js","webpack://MovaiReact/./src/Components/Viewer/NodeItem/Map.js","webpack://MovaiReact/./src/Components/Viewer/NodeItem/Mesh.js","webpack://MovaiReact/./src/Components/Viewer/NodeItem/NavigationPreviewItem.js","webpack://MovaiReact/./src/Components/Viewer/NodeItem/NodeItem.js","webpack://MovaiReact/./src/Components/Viewer/NodeItem/Path.js","webpack://MovaiReact/./src/Components/Viewer/NodeItem/PointCloud.js","webpack://MovaiReact/./src/Components/Viewer/NodeItem/PolygonRegion.js","webpack://MovaiReact/./src/Components/Viewer/NodeItem/Robot.js","webpack://MovaiReact/./src/Components/Viewer/NodeItem/Wall.js","webpack://MovaiReact/./src/Components/Viewer/SceneViewer.js","webpack://MovaiReact/./src/Components/Viewer/TreeObject/TreeNode.js","webpack://MovaiReact/./src/Components/Viewer/TreeObject/TreeObject.js","webpack://MovaiReact/./src/Components/Viewer/Util3d/CameraBuilder.js","webpack://MovaiReact/./src/Components/Viewer/Util3d/DirectionalLightBuilder.js","webpack://MovaiReact/./src/Components/Viewer/Util3d/GizmoManagerBuilder.js","webpack://MovaiReact/./src/Components/Viewer/Util3d/GroundBuilder.js","webpack://MovaiReact/./src/Components/Viewer/Util3d/PositionalLightBuilder.js","webpack://MovaiReact/./src/Components/Viewer/Util3d/ReferentialBuilder.js","webpack://MovaiReact/./src/Components/Viewer/Util3d/SelectionPlaceHolder.js","webpack://MovaiReact/./src/Components/Viewer/Util3d/TooltipBuilder.js","webpack://MovaiReact/./src/Components/Viewer/Util3d/Util3d.js","webpack://MovaiReact/./src/Components/Viewer/Utils/Animator.js","webpack://MovaiReact/./src/Components/Viewer/Utils/AnnotationManager.js","webpack://MovaiReact/./src/Components/Viewer/Utils/AssetsTypesFactory.js","webpack://MovaiReact/./src/Components/Viewer/Utils/Clipboard.js","webpack://MovaiReact/./src/Components/Viewer/Utils/Constants.js","webpack://MovaiReact/./src/Components/Viewer/Utils/DefaultMouseEvents.js","webpack://MovaiReact/./src/Components/Viewer/Utils/DefaultScene.js","webpack://MovaiReact/./src/Components/Viewer/Utils/LoadingScreen.js","webpack://MovaiReact/./src/Components/Viewer/Utils/MaterialCache.js","webpack://MovaiReact/./src/Components/Viewer/Utils/MeshCache.js","webpack://MovaiReact/./src/Components/Viewer/Utils/MeshLoader.js","webpack://MovaiReact/./src/Components/Viewer/Utils/SceneServerUtils.js","webpack://MovaiReact/./src/Components/Viewer/Utils/Statistics.js","webpack://MovaiReact/./src/Components/Viewer/Utils/TreeServerUtils.js","webpack://MovaiReact/./src/Components/Viewer/Utils/Utils.js","webpack://MovaiReact/./src/i18n/i18n.js","webpack://MovaiReact/./src/styles/Style.js","webpack://MovaiReact/./src/styles/Themes.js","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/assertThisInitialized\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/asyncToGenerator\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/classCallCheck\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/classPrivateFieldGet\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/createClass\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/defineProperty\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/extends\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/get\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/getPrototypeOf\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/inherits\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/objectWithoutProperties\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/possibleConstructorReturn\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/slicedToArray\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/taggedTemplateLiteral\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/toArray\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/toConsumableArray\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/typeof\"","webpack://MovaiReact/external \"@babel/runtime/regenerator\"","webpack://MovaiReact/external \"@babylonjs/core\"","webpack://MovaiReact/external \"@babylonjs/core/Debug/debugLayer\"","webpack://MovaiReact/external \"@babylonjs/core/Maths/math\"","webpack://MovaiReact/external \"@babylonjs/gui\"","webpack://MovaiReact/external \"@babylonjs/gui/2D\"","webpack://MovaiReact/external \"@babylonjs/inspector\"","webpack://MovaiReact/external \"@babylonjs/loaders\"","webpack://MovaiReact/external \"@date-io/date-fns\"","webpack://MovaiReact/external \"@material-ui/core\"","webpack://MovaiReact/external \"@material-ui/core/Avatar\"","webpack://MovaiReact/external \"@material-ui/core/Backdrop\"","webpack://MovaiReact/external \"@material-ui/core/Box\"","webpack://MovaiReact/external \"@material-ui/core/Breadcrumbs\"","webpack://MovaiReact/external \"@material-ui/core/Button\"","webpack://MovaiReact/external \"@material-ui/core/Checkbox\"","webpack://MovaiReact/external \"@material-ui/core/Chip\"","webpack://MovaiReact/external \"@material-ui/core/CircularProgress\"","webpack://MovaiReact/external \"@material-ui/core/Collapse\"","webpack://MovaiReact/external \"@material-ui/core/Divider\"","webpack://MovaiReact/external \"@material-ui/core/Drawer\"","webpack://MovaiReact/external \"@material-ui/core/FormControl\"","webpack://MovaiReact/external \"@material-ui/core/FormControlLabel\"","webpack://MovaiReact/external \"@material-ui/core/FormHelperText\"","webpack://MovaiReact/external \"@material-ui/core/Grid\"","webpack://MovaiReact/external \"@material-ui/core/IconButton\"","webpack://MovaiReact/external \"@material-ui/core/Input\"","webpack://MovaiReact/external \"@material-ui/core/InputAdornment\"","webpack://MovaiReact/external \"@material-ui/core/InputBase\"","webpack://MovaiReact/external \"@material-ui/core/InputLabel\"","webpack://MovaiReact/external \"@material-ui/core/List\"","webpack://MovaiReact/external \"@material-ui/core/ListItemText\"","webpack://MovaiReact/external \"@material-ui/core/Menu\"","webpack://MovaiReact/external \"@material-ui/core/MenuItem\"","webpack://MovaiReact/external \"@material-ui/core/Paper\"","webpack://MovaiReact/external \"@material-ui/core/Select\"","webpack://MovaiReact/external \"@material-ui/core/Switch\"","webpack://MovaiReact/external \"@material-ui/core/Tab\"","webpack://MovaiReact/external \"@material-ui/core/TableCell\"","webpack://MovaiReact/external \"@material-ui/core/Tabs\"","webpack://MovaiReact/external \"@material-ui/core/TextField\"","webpack://MovaiReact/external \"@material-ui/core/Typography\"","webpack://MovaiReact/external \"@material-ui/core/colors\"","webpack://MovaiReact/external \"@material-ui/core/styles\"","webpack://MovaiReact/external \"@material-ui/core/styles/colorManipulator\"","webpack://MovaiReact/external \"@material-ui/core/utils\"","webpack://MovaiReact/external \"@material-ui/icons/Add\"","webpack://MovaiReact/external \"@material-ui/icons/AddBox\"","webpack://MovaiReact/external \"@material-ui/icons/ArrowDownward\"","webpack://MovaiReact/external \"@material-ui/icons/Chat\"","webpack://MovaiReact/external \"@material-ui/icons/Check\"","webpack://MovaiReact/external \"@material-ui/icons/ChevronLeft\"","webpack://MovaiReact/external \"@material-ui/icons/ChevronRight\"","webpack://MovaiReact/external \"@material-ui/icons/Clear\"","webpack://MovaiReact/external \"@material-ui/icons/Close\"","webpack://MovaiReact/external \"@material-ui/icons/DeleteOutline\"","webpack://MovaiReact/external \"@material-ui/icons/Edit\"","webpack://MovaiReact/external \"@material-ui/icons/ExpandMore\"","webpack://MovaiReact/external \"@material-ui/icons/FilterList\"","webpack://MovaiReact/external \"@material-ui/icons/FirstPage\"","webpack://MovaiReact/external \"@material-ui/icons/Label\"","webpack://MovaiReact/external \"@material-ui/icons/LastPage\"","webpack://MovaiReact/external \"@material-ui/icons/NavigateNext\"","webpack://MovaiReact/external \"@material-ui/icons/Remove\"","webpack://MovaiReact/external \"@material-ui/icons/SaveAlt\"","webpack://MovaiReact/external \"@material-ui/icons/Schedule\"","webpack://MovaiReact/external \"@material-ui/icons/Search\"","webpack://MovaiReact/external \"@material-ui/icons/Settings\"","webpack://MovaiReact/external \"@material-ui/icons/Today\"","webpack://MovaiReact/external \"@material-ui/icons/ViewColumn\"","webpack://MovaiReact/external \"@material-ui/icons/ViewModule\"","webpack://MovaiReact/external \"@material-ui/icons/Warning\"","webpack://MovaiReact/external \"@material-ui/lab/Alert\"","webpack://MovaiReact/external \"@material-ui/pickers\"","webpack://MovaiReact/external \"@material-ui/styles\"","webpack://MovaiReact/external \"clsx\"","webpack://MovaiReact/external \"earcut\"","webpack://MovaiReact/external \"fontsource-open-sans\"","webpack://MovaiReact/external \"fontsource-roboto\"","webpack://MovaiReact/external \"i18next\"","webpack://MovaiReact/external \"jwt-decode\"","webpack://MovaiReact/external \"lodash.isequal\"","webpack://MovaiReact/external \"lodash/capitalize\"","webpack://MovaiReact/external \"lodash/cloneDeep\"","webpack://MovaiReact/external \"lodash/debounce\"","webpack://MovaiReact/external \"lodash/get\"","webpack://MovaiReact/external \"lodash/isEmpty\"","webpack://MovaiReact/external \"lodash/isEqual\"","webpack://MovaiReact/external \"lodash/set\"","webpack://MovaiReact/external \"lodash/uniqBy\"","webpack://MovaiReact/external \"material-icons/css/material-icons.css\"","webpack://MovaiReact/external \"material-table\"","webpack://MovaiReact/external \"monet\"","webpack://MovaiReact/external \"mov-fe-lib-core\"","webpack://MovaiReact/external \"prop-types\"","webpack://MovaiReact/external \"react\"","webpack://MovaiReact/external \"react-dom\"","webpack://MovaiReact/external \"react-i18next\"","webpack://MovaiReact/external \"react-resize-detector\"","webpack://MovaiReact/external \"react-virtualized\"","webpack://MovaiReact/external \"react-virtualized-tree\"","webpack://MovaiReact/external \"react-virtualized-tree/lib/main.css\"","webpack://MovaiReact/external \"react-virtualized/styles.css\"","webpack://MovaiReact/external \"roslib\"","webpack://MovaiReact/external \"setimmediate\"","webpack://MovaiReact/external \"styled-components\""],"names":["useStyles","makeStyles","theme","root","marginTop","spacing","link","fontSize","fontWeight","fontFamily","cursor","textDecoration","lastLabel","Breadcrumb","props","classes","style","pathList","map","element","index","length","label","propTypes","PropTypes","array","defaultProps","console","log","Button","className","onClick","color","variant","size","startIcon","disabled","children","object","func","string","isRequired","node","bool","undefined","Collapse","React","useState","open","setOpen","useEffect","handleClickFactory","clickLambda","iconStyle","width","item","divided","ContextMenu","anchorEl","setAnchorEl","handleClick","event","currentTarget","handleClose","cloneElement","evt","Boolean","menuList","reduce","result","push","onClose","navigationList","lowerElement","backgroundColor","Drawer","anchor","ANCHOR","left","right","top","bottom","withAuthentication","Component","RECHECK_VALID_DELAY","firstRender","useRef","loggedIn","setLoggedIn","checkLogin","setCheckLogin","Authentication","now","Math","floor","Date","token","window","localStorage","getItem","exp","jwtDecode","expDelta","Error","setTimeout","error","handleLogOut","logout","handleFirstRender","current","state","alert","position","withOfflineValidation","isConnected","setConnected","showSuccessAlert","setSuccessAlert","validator","setValidator","loading","setLoading","_validator","MasterDB","offlineValidation","onOnline","onOffline","retryConnection","then","styles","padding","borderRadius","LoginForm","username","password","remember","errorMessage","capsLockOn","login","apiResponse","setState","key","capsLock","getModifierState","logo","paddingTop","defaultLogo","display","marginLeft","marginRight","formControl","target","value","checkCapsLock","sendCreds","logs","any","withStyles","withTheme","UI_TAG","tableContainer","flexGrow","minHeight","overflow","Logs","selectedRobots","levels","limit","logsData","messageRegex","selectedFromDate","selectedToDate","columns","tags","advancedMode","height","levelsList","createRef","robotsData","filter","robot","ip","setSelectedRobots","elem","isSelected","robotId","updateRobot","findIndex","id","clearTimeout","logsTimeout","getLogs","robots","Promise","all","robotState","robotStates","off","getRobotLogData","dataArrays","prevState","finalArray","dataArray","forEach","data","sort","a","b","time","robotSelected","re","rej","timeoutHandle","dynamicURL","getRequestLevels","getRequestTags","getRequestMessage","get","res","e","logModal","rowData","divElement","clientHeight","updateSelectedRobots","prevProps","_isEqual","flexDirection","updateRobotSelection","columnList","Object","keys","includes","tagText","findsUniqueKey","tagToDelete","filteredTags","tag","text","newDate","keyToChange","simpleLevelsList","advancedLevelsList","filterByFromToDates","onRowClick","name","timestamp","battery","temp","okay","dataKey","render","getJustDateFromServer","Time","getJustTimeFromServer","Level","Module","Robot","Message","button","margin","palette","primary","main","borderColor","iconActive","fade","buttonApplyFilters","background","fontStyle","dark","icon","checkbox","limitText","StyledMenu","paper","boxShadow","vertical","horizontal","FilterIcon","otherFilters","t","tooltip","title","isActive","input","flex","paddingLeft","searchText","minWidth","addTagText","toggleContainer","tagsContainer","tagsList","chip","maxWidth","filtersButton","columnsFilter","iconButton","LogsFilterBar","setTagText","handleRobotChange","arrayEvent","selectedId","getRobotSelector","paddingRight","selected","selectedNames","join","MenuProps","robotIndex","getSearchInput","handleMessageRegex","startAdornment","endAdornment","getLevels","handleLevels","labels","level","indexOf","getTags","isAdvancedMode","keyCode","handleAddTag","handleDeleteTag","getTimeFilters","DateFnsUtils","handleDateChange","getSettings","handleAdvancedMode","handleLimit","shrink","handleColumns","_get","column","ITEM_HEIGHT","ITEM_PADDING_TOP","PaperProps","maxHeight","getContentAnchorEl","number","selectToDate","arePropsEqual","nextProps","memo","flexContainer","alignItems","boxSizing","table","flip","direction","tableRow","tableRowHover","tableCell","whiteSpace","textOverflow","flexColumn","noClick","colorCoding","MuiVirtualizedTable","rowHeight","headerHeight","tableProps","getRowClassName","clsx","cellRenderer","cellData","columnIndex","numeric","headerRenderer","other","headerProps","LogsTable","INFO","WARNING","DEBUG","ERROR","CRITICAL","keyName","k","j","levelsArray","Array","isArray","toLowerCase","tagsArray","_isEmpty","message","parsedMessageToUrl","replace","getTimeFromServer","serverTime","toLocaleString","toLocaleDateString","toLocaleTimeString","formatLogsData","stdout","binaryIndexOf","criteria","minIndex","maxIndex","currentIndex","currentElement","comparison","fromDate","toDate","lowerIndex","upperIndex","dateList","getTime","slice","addNestedName","nestedName","newName","updateRunningNodes","treeList","runningNodesList","status","removeDeleteContainer","deleteIndex","splice","i","parentId","detectContainerLoop","flowId","flowIndex","currentFlow","card","closeButton","textColor","AbstractModal","debounceSubmit","_debounce","onSubmit","onKeyPress","submit","cancel","onCancel","justifyContent","overflowY","marginBottom","hasSubmitButton","submitColor","i18n","submitText","hasCancelButton","cancelColor","cancelText","ConfirmAlertModal","breakWord","wordBreak","RobotLogModal","hasButton","alertButton","JSON","parse","action","service","module","buttonText","buttonAction","getRobotAlertAction","callback","cloudFunction","renderAlertInfo","SelectScopeModal","initialData","scope","setData","selectedWorkspace","setSelectedWorkspace","selectedScopeItem","setSelectedScopeItem","workSpaceList","setWorkSpaceList","isLoading","setIsLoading","scopeFilteredData","scopeList","Workspace","getAll","response","getAllData","filteredData","_cloneDeep","changeWorkspace","workspace","dataToSet","getDocs","sortedScopeItems","scopes","ref","localeCompare","url","requestScopeVersions","mapObj","indexToSet","isExpanded","_set","expanded","parents","versionList","versions","index2ndLevel","deepness","confirmNodeSelection","getModalTitle","vowels","pronoun","textAlign","paddingBottom","allowArchive","overflowX","zIndex","nodes","menuItemSpacing","cursorDefault","profileMenuFooter","ProfileMenu","welcomeLabel","userName","extraItems","darkThemeLabel","handleToggleTheme","isDarkTheme","cursorPointer","handleLogout","logoutLabel","version","search","shape","common","white","breakpoints","up","searchIcon","pointerEvents","inputRoot","inputInput","transition","transitions","create","SearchInput","searchInput","enableTimeout","timer","handleSearch","onChange","placeholder","setSearchInput","handleChange","Select","noneOption","inputProps","options","filledSuccess","filledInfo","filledWarning","filledError","opacity","defaultIconMapping","success","svgIcons","SuccessOutlined","warning","ReportProblemOutlined","ErrorOutline","info","InfoOutlined","Alert","closeText","iconMapping","role","severity","capitalize","Close","oneOf","CreateSVGIcon","path","fill","viewBox","ReactConfirmAlert","close","closeOnClickOutside","onClickOutside","isClickOutside","overlay","removeBodyClass","removeElementReconfirm","closeOnEscape","onKeypressEscape","isKeyCodeEscape","document","addEventListener","keyboardClose","autoClose","getElementById","autoHideDuration","removeEventListener","willUnmount","customUI","dataCustomUI","closable","dom","handleClickOverlay","renderCustomUI","createElementReconfirm","properties","divTarget","body","classList","add","createElement","appendChild","unmountComponentAtNode","parentNode","removeChild","addBodyClass","remove","snackbar","tableIcons","Add","forwardRef","Check","Clear","Delete","DetailPanel","Edit","Export","Filter","FirstPage","LastPage","NextPage","PreviousPage","ResetSearch","Search","SortArrow","ThirdStateCheck","ViewColumn","Table","actions","components","localization","actionsColumnIndex","draggable","grouping","toolbar","searchFieldAlignment","paging","TabPanel","selectedTab","a11yProps","tabPanel","Tabs","setSelectedTab","newSelectedTab","tabList","tab","scrollable","component","Text","colorSwitchBase","grey","green","colorBar","colorChecked","Toggle","toggle","onToggle","hidden","switchBase","checked","track","labelPlacement","horizFlex","spaceBetween","preContainer","ellipsis","iconSpace","testArray","EXPANDED","BasicVirtualizedTree","selectedGroup","groupsEnabled","searchValue","searchValueLower","filteredNodes","ch","child","grandChild","searchFilter","rest","onClickNode","onDoubleClickNode","inlineFlex","handleExpansion","oneOfType","TreeSearch","inputRef","focus","forceUpdate","trim","isEmpty","resetValue","ListItemsTree","onKeyUp","ListItemsTreeWithTitle","ListItemsTreeWithSearch","onSearch","Children","x","container","logoArea","navigationArea","accountArea","unsetAccountAreaPadding","VerticalBar","upperElement","Action","memory","parentView","getSceneMemory","gizmoManager","attachedMesh","camera","attachControl","canvas","closeContextDial","setContextActionIndex","AddKeyPointAction","setSelectedAction","scene","ground","maybeMousePos","Util3d","getGroundPosition","mousePos","detachControl","maybeCurrent","oldMousePos","tempMesh","dispose","createKeyPoint","TEMP_KEY_POINT_NAME","random","keyPoint","Color3","setPropertiesWithName","getUndoManager","addIt","getUndoAbleAction","Maybe","none","is2addInServer","Gray","rootMesh","getRootNode","mesh","KeyPoint","ofDict","r","g","parent","localPosition","getLocalCoordFromWorld","Vec3","ofBabylon","toBabylon","setPositionWithLocalVector","Axis","Z","scale","DEFAULT_SIZE","addNodeItem2Tree","UndoManager","actionBuilder","doAction","Vector3","Zero","material","diffuseColor","updateNodeInServer","undoAction","is2UpdateInServer","deleteNodeFromTreeUsingName","build","MouseKeysAction","AddMapAction","mapLoader","TYPE","firstTimeLoad","load","textureSrc","resolution","origin","imageSize","groundBuilder","fromNull","orSome","xOrigin","yOrigin","yawOrigin","originPos","of","sub","rootNode","GlobalRef","inverseCoordinates","rotationQuaternion","Quaternion","ROS_ORIGIN","quaternion","rotate","Space","LOCAL","setTarget","y","z","Map","isVisible","is2sendServer","setEnabled","DefaultScene","createMeshGround","maybeNode","getNodeFromTree","orElseRun","isImport","addMap","doIt","getUndoAction","ACTIONS","orbit","getObjectTree","oldMapName","newMapName","switchMaps","AssetsManager","getInstance","getAssetsActionMap","AddMeshAction","actionMemoryClone","getIsImport","finalName","getFinalNameFromMemory","loadMesh","actionMemory","parentMesh","getParentMesh","createNormals","maybeDict","ofNull","flatMap","d","some","FromArray","Identity","StandardMaterial","emissiveColor","meshItem","Mesh","keyValueMap","renderMenus","parentObj","parentName","treeNode","addMesh","dragObjects","MeshLoader","transformMesh","addMesh2Scene","BoxRegionAction","buttons","createBoxRegion","TEMP_BOX_REGION_NAME","subtract","boxMesh","region","Red","localRegion","middlePoint","centeredRegion","boxRegionItem","BoxRegion","toArray","corners","points","DragObjectsAction","ctrlKey","maybeSelectedMesh","pickMesh","currentMesh","dragDownMesh","orLazy","dragDownWithoutMesh","selectedMesh","groundPos","dragMoveMesh","dragMoveWithoutMesh","dragUpMesh","dragUpWithoutMesh","destroySelectionDiv","predicateActionList","predicate","code","getDeleteAction","getCopyAction","getPasteAction","selectOneAction","getMouseContextActions","setMouseContextActions","mousePosFromRoot","getPasteOnClick","pasteAction","Clipboard","paste","nodeTree","is2updateServer","displacement","m","observers","graphVertex","isSome","notifyObservers","_children","notifyChildrenObserversRecursively","clickPointInWorld","ZERO","movePointInWorld","startDivPos","Vec2","isStatic","addSelectedMesh","handleMeshRightClick","updateMouseVars","isSelectionPlaceHolder","addGizmo2Mesh","selectMeshUpdateUI","meshSelector","MeshSelector","ofMainView","selectionPlaceHolder","SelectionPlaceHolder","selectedMeshes","meshes","highlightMeshesInScene","highlightNodesInTree","addGizmo2Name","clear","setProperties","getMouseCoordsFromRoot","mousePosRoot","handleRightClickWithoutMesh","shiftKey","createSelectionDiv","pointerX","pointerY","selector","newMousePosInWorld","v","vLocal","updateSelectionDiv","selectPlaceHolder","groundPosInWorld","bigDisplacement","isBigDisplacement","isBigDisplaceOrIsEdgeMesh","edgeIndexes","addArray","arrayOfMeshes","mergePathsIfAny","selectObjectsInside","groundPosInGlobal","has","isOne","onDeleteNode","onDel","selectPlaceHolderMesh","copyOne","copyMany","copy","someMainView","uuid","getUID","itemCopyFunctions","nodeItem","getCopyFunction","maybeCopiedItem","copiedMesh","toForm","nodeItems","uuids","maybeCopiedItems","itemCopyFunction","toGlobalCoord","absolutePosition","copiedItems","maybe","copiedMeshes","copiedNames","obs","updatedPointMesh","vertexObs","meshesStruct","keypointIndex","sendMesh","finalDisplacement","localDisplacement","newPos","moveMesh","dir","maybeNodeItem","None","nodeMesh","keyPoints","findMouseInDom","outerDiv","ID","ReactDOM","newMouse","oldMouse","op","min","minX","minY","max","maxX","maxY","clientX","clientY","cornersDiv","rayCastCorners","p","pickPoints","treeObj","TreeObject","insideBox","flatten","isItemInsideBox","insideBoxDragAbleMeshes","pickInfo","pick","hit","floorPoint","pickedPoint","orNull","polygon","type","getType","GraphItem","isMeshInsideBox","planeP","isPointInsideBox","epsilon","theta","n","vi","vii","acos","dot","abs","PI","Path","isKeyPointMesh","isEnabled","ray","hits","multiPickWithRay","keyPointHits","pickedMesh","hitMesh","first","second","areKeyPointsCompatible","firstPath","secondPath","oldPaths","dict","toDict","mergeName","mergePaths","unMergePaths","SelectDiv","border","DrawGraphAction","getGraph","mousePosConsumer","maybeMesh","isConnectableMesh","possibleMesh","Green","onPointerDownLine","resetPreview","cata","firstMousePos","onPointerMoveLine","escapeAction","deletePreviewMeshes","firstClickedMesh","previewMeshes","lambda","_","meshI","meshJ","belongsToPath","nameI","nameJ","clickedMesh","belongs2SamePath","isInvalidEdge","getUndoAbleLineEdge","edgeMeshes","createEdge","deleteEdge","visibility","edgeEmbedding","getEdgeMesh","Blue","Constants","RADIUS","isPickable","createGraphItemIfNone","graphNode","graphItem","addEdge","delEdge","DrawPathAction","mouseCurve","getUndoAbleEnterAction","spherePlaceHolder","isDisposed","createPointInCurve","getUndoAbleClickAction","kps","finalKps","TEMP_PATH_NAME","createCurve","setContextActions","getDrawPathContextAction","reducedKps","addKeyPointPlaceHolder","contextActions","curve","localCurve","pointAverage","centeredCurve","w","pathItem","localPath","ans","keyPointMeshes","addEdgesInKeyPoints","deleteEdgeInKeyPoints","pathName","graph","createSphere","oldPoints","oldPosition","insertPointInCurve","createNewMeshFromOldUsingNewPoints","onAddNewPointKeyPointUpdate","localGround","sortedDistances","distance","localPathB","newPoints","MeasureAction","resetMeasure","currentMousePos","ruler","rulerMesh","createRulerMesh","addTextGUI","calculateDistance","pressure","deltaY","start","end","startVec","endVec","toFixed","advancedTexture","AdvancedDynamicTexture","CreateFullscreenUI","removeControl","TextBlock","addControl","MeshBuilder","CreateLines","updatable","NavigationPreviewAction","uIInOut","poses","resetData","maybeFirstClickPos","firstClickPos","secondClickPos","previewPoseMesh","createPreviewPose","poseMesh","poseMeshes","atan2","orientation","cos","sin","createNavPreviewNode","schema","jsonSchema","config","uiSchema","NavigationPreviewItem","normalize","maxLength","finalLength","finalEnd","arrowMesh","getArrow","navName","navPreviewNode","robotConfig","OrbitAction","PolygonRegionAction","TEMP_POLYGON_REGION_NAME","defaultAction","getDrawPolygonContextAction","Yellow","pointAverageVec3","polygonRegionItem","PolygonRegion","localPolygon","createPolygonRegion","RobotAction","robotAnimatorFactory","getDefaultAnimator","errorCallback","addRobot","meshName","meshTree","createRobotMeshTree","robotTree","builder","assetName","cloudPoint","PointCloud","loadRobot","createRobotFromMesh","err","getRobot","animate","getCloudPoint","assets","assetsActionMap","retrieveAssetsFromDb","observersBySceneId","resolve","subscribe","Scope","Name","RobotName","getRobotUpdate","getRobotNameSub","addRobots","finishSub","Parameter","getRobotMeshSub","File","FileLabel","getMapUpdater","getMapSubscriber","getMeshUpdater","getMeshSubscriber","place","finishInitialSubscribers","subs","afterLoad","f","hasOwnProperty","delAsset","dataGetter","after","getMapFileData","fileName","actionMap","del","filename","split","set","yamlSrc","loader","MapLoader","ASSETS_TYPES","addAsset","maybeGet","getMeshFileData","instance","observer","sceneId","_uid","assetKey","asset","AssetsTypesFactory","signalObservers","values","every","localRobot","createBaseObject","robotName","robotMeshName","setRobot","Value","ROBOT_MESH_NAME","pattern","patterns","deleteRobot","prop","obj","cachedMap","fetch","getMapUrl","parseYaml","image","yamlTxt","actionDict","Number","parseFloat","s","getImageSize","src","reject","img","Image","onload","naturalWidth","naturalHeight","FLEX_STYLE","loaderContainer","loaderImage","transform","BaseViewer","antialias","engineOptions","adaptToDeviceRatio","sceneOptions","onRender","onSceneReady","is2render","sceneFactory","useTheme","reactCanvas","loaded","setLoaded","setScene","setSize","setUpScene","engine","Scene","isReady","onReadyObservable","addOnce","onResize","getEngine","resize","renderScene","nScene","runRenderLoop","Engine","loadingScreen","LoadingScreen","newScene","clearColor","SCENE_BACKGROUND","preserveDrawingBuffer","stencil","Graph","edgeKey","addVertex","edgeProps","getEdge","ijKey","jiKey","neighbors","getNeighbors","delVertex","viewOnly","measure","robotPreview","reactFactory","drawGraph","drawRegion","addKeyPoint","drawBoxRegion","drawPath","MainViewRetriever","mainView","serverScene","updateErrorList","errors","importSceneRecursive","importDefaultScene","nodeDict","nodeItemClass","NODE_ITEM_FACTORY_MAP","isAsset","importAsset","assetType","assetActionMap","retrievedAction","defaultRobot","cause","solution","exception","arrayTree","sortArrayTree","importNodeItem","send2server","placeHolderInstance","meshSelectionSet","Set","isSubtractive","filteredSet","Box","Wall","Mat3","v1","v2","v3","constructor","mat3","vec3","u","prodVec","dotVec","mat","equals","babylonMat","arrayMat","Matrix","GetAsMatrix3x3","vec","acc","sqrt","fromArray","biLambda","fold","initial","vector3","l","operation","binary","initialValue","MAX_VALUE","isNaN","isFinite","babylon","identityMatrix","e1","e2","e3","pivot","AssetNodeItem","NodeItem","orUndefined","createBox","mapDict2Mesh","lower","scaleX","scaleY","worldCorners","getGlobalCoordinates","form","oldForm","oldDimensions","dimensions","isEqual","ofFormDimensions","newLowerPositionInWorldCoordinates","newLocalDimensions","localLowerPosition","getLocalCoordFromGlobal","notify","update","createBoxRegionMesh","backFaceCulling","VISIBILITY","babylonQuaternion","createPlaceHolderKeyPoints","FACES","boxRegion","X","Y","h","boxRegionMesh","positions","faces","meshFromPositionAndFaces","createNewMeshFromOldUsingNewBox","newBox","average","rotMat3","getRotationMatrix","scaleVec3","scaling","averageInParentCoord","mul","newMesh","vertex","childrenCopy","c","saveZ","getKeyPointObserverFunction","boxRegionTreeNode","MIN_VALUE","corner","Observable","THETA","rosOrigin","getRosOrigin","globalRefMesh","referentialBuilder","NAME","boxParams","CreateBox","rotationMatrix","pos","getUniqueId","graphItemInstances","graphPlaceHolder","getGraphPlaceHolder","graphFormMapper","getDefaultFormMapper","edgeMesh","getUndoDeleteEdgeLineAction","confirmationAlert","onConfirm","getUndoDeleteEdge","getToFormEdge","isMeshBelong2Path","meshByEdgeId","vertexGenerator","vertices","getVertices","edges","getEdges","getVertex","vertexData","String","ids","key2Edge","edgeData","edge","belongsSrcMesh","belongsTrgMesh","weight","belongsSrc","exportBelongToData","belongsTrg","doMeshesBelong2SamePath","checkInvalidEdges","rotation","ofForm","annotations","setAnnotations2Form","lodashGet","delVertexRecursively","iMesh","jMesh","iIndex","jIndex","hasEdge","buildVertex","buildEdge","getVertexIdFromMesh","maybeV","iParentNodeItem","jParentNodeItem","newPosition","iData","jData","vertexI","vertexJ","vertexMesh","vertexIndex","vId","maybeVertex","VertexData","addObs2VertexMesh","vData","delVertexFromMesh","getVertexMeshObs","updateVertexPosition","iVertexD","jVertexD","EdgeData","forwardDirection","getDirectionFromMeshes","backwardDirection","edgeInGlobal","getGlobalCoord","getEdgeMaterial","speed","getEdgeMouseCtxActions","onDeleteEdgeLine","addObserver2EdgeMesh","addOnClickEdge","getEdgeObs","getOnClickEdge","getUndoDelLineEdge","edgeVertexD","edgeMeshesContainsPath","srcMesh","getMeshName","trgMesh","vertexCounter","getMeshesFromEdgeData","foundMeshes","dataEdge","importFeatures","vertexPosition","radius","sphere","createTubeFromPoints","frequency","getShaderMaterial","VERTEX","frag","FRAG","firstMesh","secondMesh","validateDirection","firstMeshParent","secondMeshParent","validationError","getNodeItemTypeFromMesh","One","ind","globalPos","vertexDataI","vertexDataJ","freq","CreatePolyhedron","custom","TRIANGULAR_ANTIPRISM","convertToFlatShadedMesh","axis","category","face","oldName","MESSAGES","failGenerateCurve","arrowMeshes","createArrowMeshes","navPath","createNavPath","arrow","pose","beginPos","endPos","getChildren","getMaterialFromColor","freeze","getArrowObserver","NavigationPath","play","navPreviewItem","navItem","pathPromise","getPathFromService","pathPoses","getNavigationPathMesh","animator","getAnimator","stop","Animator","initialState","T","indices","nextState","indexSpeed","dt","iPrev","iNext","ceil","updateVerticesData","VertexBuffer","PositionKind","pointCloudMesh","disableLighting","pointsCloud","pointSize","colors","applyToMesh","startPose","endPose","ros","Ros","BRIDE_CONNECTION","inputMessage","sceneName","robot_config","initial_pose","rosPoseFromPose","final_pose","on","getDefaultPath","navigationService","Service","SERVICE_NAME","serviceType","SERVICE_TYPE","request","ServiceRequest","callService","msg","NAV_CLOUD_NAME","getPathFromPoses","showAlert","samples","startPos","nextPoint","nextNextPoint","splineCage","polyInterpolation","point","cage","tail","pairs","zip","newCage","lerp","q","RotationYawPitchRoll","euler","toEulerAngles","RAD2DEG","angles","deg","DEG2RAD","FromEulerAngles","isForceUpdate","nameGenerator","old","rootItem","copyDict","newPosArray","copiedNodeItem","childrenWithDelVertex","childMesh","someDict","babylonColor","AnnotationManager","getAnnotations","annotation","_capitalize","names","toString","splinePath","selectedKeyPointIndex","newSchema","selectedKeyPoint","formPosition","newPosInWorldCoordinates","localPos","updatePathEdgeWithForm","last","edgeIds","copiedPath","kp","isPathOnGraph","updateGraph","spline","getSplineFromCurve","splineObj2redis","path2return","getMeshOnClick","getMeshObserver","keyPointUpdateFunction","defaultKeyPointUpdate","oldMesh","oldKeyPoints","isJust","keyPointMesh","copyPosition","getUndoDeleteKeyPoint","copyPoints","keypoints","getUndoAddKeyPointInBetween","nextIndex","numberOfPoints","concat","specialIndex","oldKpMeshes","isTopologyChange","firstLastKpNeighborEdges","firstLastOldKp","oldEdge","neigh","vp","neighborEdges","edgeVertexObj","oldNeighEdge","isInteger","leftPath","rightPath","leftPathName","rightPathName","leftChildren","rightChildren","leftDict","rightPointsInLeftCoord","newPath","translate","updateNodeItemInTree","newChildPos","kChild","getConeMesh","getKeyPointActions","pathTreeNode","deleteKeyPointWithUndo","addKeyPointInBetween","pseudoItem","curveMesh","getSphereMesh","cone","getKpMouseContextActions","splitCurve","unSplitCurve","edgesByCurveBoundary","oldPath","oldCenter","pathParent","splitAtIndex","splitPath","boundary","colorArray","clone","quaternionArray","numberOfSplits","newKeyPoints","newEdge","oldPathItem","oldPathName","oldPathNameSplit","leftSplit","rightSplit","nextSplinePoint","currentSplinePoint","createOrientedCone","Utils","pointCloudSubscribe","front_lidar","updatePointCloud","unsubscribe","positiveMod","mod","navigationAllowed","newJsonSchema","createExtrudedPolygonMesh","stitchingBoundaries","computeOrientation","modi","reverseOrientation","triangleIndex","polygonRegionMesh","lowerTriangulation","triangulatePolygon","upperTriangulation","stitchTriangulation","polygonTreeNode","getAbsolutePosition","polygonMesh","oldTimeInMillis","robotAnimator","requestAnimationFrameId","requestAnimationFrame","getRobotManager","isOnline","numberOfIte","is2UsePos","timeSinceLastUpdate","isSubscribedToLogs","speedStats","Statistics","loggerSubscription","qSpeed","newOri","alertMesh","buildAlertMesh","robotIP","getIP","onGetIP","startLogger","addClickActionToMesh","onMeshAlertClick","CreateDisc","sideOrientation","DOUBLESIDE","White","ambientTexture","Texture","errorIcon","billboardMode","BILLBOARDMODE_ALL","showRobotAlertModal","stopLogger","property","propValue","cancelAnimationFrame","subscribeToLogs","updateAlertState","is2RemoveAlertMesh","unsubscribeToLogs","newRobotTf","lastPosition","lastOrientation","newOrientation","isZero","dtInv","vel","SAMPLES","isOutlier","TIME_2_BE_OFFLINE_IN_SEC","toOffline","toOnline","createRobotMeshTreeRecursive","robotMesh","RobotBuilder","randomId","updateTF","tf","updateRobotMeshTree","onLoad","onUpdate","robot2Animate","someNaNOrInfinite","setOnOffLine","_name","_meshTree","_parentMesh","_parentView","_scene","_isPickable","_id","_keyValueMap","_assetName","variables","baseAxis","localWall","createWallMesh","centeredWall","tangent","normal","wallMesh","newWall","locallyTranslate","wallNode","wall","SceneViewer","robotManager","sceneMemory","tree","objectTree","undoManager","TreeServerUtils","ofScene","newObjectTree","focusObject","isPanned","_absolutePosition","cameraSpeed","targetPos","beta","isRotated","DefaultMouseEvents","onPointerDown","onPointerUp","onPointerMove","mouseLocationText","afterLoading","SceneServerUtils","retrieveScene","errorList","importScene","resizeGround","assetManager","getAssets","loadAssets","retrieveSceneFromServer","setCameraToTarget","getRenderingCanvas","addCanvasEventListeners","createMouseLocationText","createCamera","light","createLight","createGizmo","highlightLayer","layer","HighlightLayer","lastHlMeshes","robotAlertModal","predicateAction","propVar","loadScene","RobotManager","getNode","el","events","defaultSize","getWorldExtends","diff","is2Small","getRobots","clearObserver","MeshCache","resetErrorList","createScene","getErrorSolutionList","masterProps","augmentProps","TreeNode","TreeNodeBuilder","_title","_item","_expanded","_isVisible","_isStatic","getNodeRecursive","answer","getParentNodeRecursive","foundChild","compareTreesRecursive","treeA","treeB","nodeEquality","nodeA","nodeB","mapRecursive","newTree","nod","mappedNode","forEachRecursive","expand","filterTree","childPredicate","nodeMap","CameraBuilder","_sphericalCoordinates","_target","sphericalCoordinates","ArcRotateCamera","DirectionalLightBuilder","_direction","_intensity","intensity","DirectionalLight","GizmoManagerBuilder","_isPosition","_isRotation","_isBoundingBox","_isScale","_usePointerToAttachGizmos","GizmoManager","positionGizmoEnabled","rotationGizmoEnabled","boundingBoxGizmoEnabled","scaleGizmoEnabled","usePointerToAttachGizmos","GroundBuilder","_width","_height","_textureSrc","CreateGround","WORLD","uScale","vScale","PositionalLightBuilder","_position","PointLight","ReferentialBuilder","_boxParams","_size","axisX","axisY","axisZ","localOrigin","angleByMeshName","_uniqBy","getAngleFromMesh","placeHolderPosition","createPlaceHolderIn","getSelPlaceHolderShader","that","HEIGHT","getPlaceHolderObs","placeHolder","filteredMeshes","dTheta","handleMotion","handleTranslation","handleRotation","baseCoord","toVec2","eITheta","rV","prod","finalV","finalTheta","TooltipBuilder","_mesh","_thickness","_linkOffsetX","_linkOffsetY","_background","_alpha","_scaleX","_scaleY","_cornerRadius","_text","_color","_fontSize","_padding","linkOffsetX","linkOffsetY","alpha","cornerRadius","useInvalidateRectOptimization","tooltipBox","Rectangle","thickness","transformCenterX","transformCenterY","adaptWidthToChildren","adaptHeightToChildren","linkWithMesh","textBlock","textVerticalAlignment","Control","VERTICAL_ALIGNMENT_TOP","textHorizontalAlignment","HORIZONTAL_ALIGNMENT_CENTER","resizeToFit","actionManager","ActionManager","scaleXAnimation","Animation","ANIMATIONTYPE_FLOAT","ANIMATIONLOOPMODE_CONSTANT","scaleYAnimation","frame","setKeys","animations","registerAction","ExecuteCodeAction","OnPointerOverTrigger","beginAnimation","OnPointerOutTrigger","meshParent","meshParentPos","meshParentRotMat","meshParentScaling","withTranslation","childPos","positionInWorld","forwardCoordinates","worldPosition","inverseScaling","localRotationMatrix","maybeQuaternion","toRotationMatrix","ofBabylonMatrix","normals","getVerticesData","NormalKind","lines","scaleInPlace","normalLines","CreateLineSystem","uArray","Dot","triangulation","earcut","len","i3","vec3Poly","arrayOfPoints","randomDigits","mode","Camera","ORTHOGRAPHIC_CAMERA","aspect","getAspectRatio","orthoLeft","orthoRight","orthoBottom","orthoTop","PERSPECTIVE_CAMERA","begin","arrowTube","arrowCone","tooltipText","OnPickDownTrigger","unfreeze","arrayOfVector3","segments","surface","orthogonalBasisFromVector","sign","Cross","zeroIndex","uIndex","materialName","MATERIAL_CACHE","put","diameter","CreateSphere","box","CreateTube","cap","CAP_ALL","orientations","nbPoints","closed","Curve3","CreateCatmullRomSpline","getPoints","splineObj","getCurveOrientations","onBindObservable","SHADER_BIND","preProcessShader","SHADER_PRE","shaderMaterial","ShaderMaterial","vertexSource","fragmentSource","attributes","uniforms","isMeshFromPath","setFloat","setVector3","activeCamera","lights","MaterialCache","next","doWhile","requestAnimeId","AnimatorBuilder","_state","_next","_end","someAreEmpty","retrieveAnnotationsFromDb","delAnnotation","addAnnotation","Annotation","names2delete","annotationType","annotationObj","Type","Label","getSocketAnimator","SCENE_CONTEXT","COPY_PASTE_UID","Clip","write","read","POINTS_DENSITY","CLOUD_FUNCTION_NAME","LOGGER_STATUS","init","running","paused","terminated","Black","mousePosClick","mousePosMove","currentLocal","setMouseLocationTxt","panCamera","vBabylon","getWorldVector","animateCamera","mouseButtonActions","filterActions","vdt","worldFrameMesh","matrix","RotationGizmo","UtilityLayerRenderer","xGizmo","dragBehavior","detach","scaleRatio","yGizmo","COLLISION_RADIUS","cameraBuilder","inertia","collisionRadius","panningInertia","checkCollisions","panningSensibility","lowerRadiusLimit","browser","get_browser","wheelPrecision","directionalLightBuilder","wireframe","collisionsEnabled","debugLayer","show","embedMode","globalRoot","ua","navigator","userAgent","tem","M","match","test","exec","appName","appVersion","loadingUIText","loadingUIBackgroundColor","prototype","displayLoadingUI","hideLoadingUI","materialCacheBySceneId","count","materialCache","meshCacheBySceneId","meshCache","cloneMesh","mapFunction","hasKey","assetsManager","meshTask","addMeshTask","MESH_URL","onSuccess","task","loadedMeshes","onError","onFinish","meshParam","Float32Array","newNormals","numberOfVertices","setVerticesData","successCallback","DEFAULT_SUCCESS","failCallback","DEFAULT_FAILURE","successFailIf","failureLocation","_count","_mean","_M2","delta","delta2","NaN","sigmas","zScore","mean","variance","childName","getParentNode","is2delInServer","deleteNodeInServer","maybeParent","getParentFromChild","staticNodeTypes","node2Add","maybeParentNode","addNodeItem2Server","undo","setImmediate","warn","utils","lostConnection","resources","SERVER_DATA","Languages","en","translation","translationEN","pt","translationPT","language","Language","use","initReactI18next","lng","fallbackLng","debug","interpolation","escapeValue","Style","createGlobalStyle","S","CONSTANTS","borderBottom","secondary","themeFactory","particular","typography","h1","h2","h3","h4","h5","h6","body1","Themes","createMuiTheme","bottomNavigation","globalStats","subTextColor","upperTextColor","accent","hoverColor","stripColor","verticalBar","iconColor","overrides","MuiTableCell","MuiAppBar","colorDefault","colorInherit","MuiButton","outlined","contained","containedPrimary","containedSecondary","MuiButtonGroup","groupedContainedPrimary","groupedOutlined","groupedText","MuiIconButton","MuiListItem","MuiFormControlLabel","MuiInputBase","font","MuiFilledInput","underline","Roboto","OpenSans","MuiPaper","MuiTableRow","head","getTheme","setTheme","setItem"],"mappings":"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AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,8BAA8B;;AAE9B;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA,CAAC;;;AAGD;AACA;AACA;AACA,qDAAqD,cAAc;AACnE;AACA,C;;;;;;;;;;;;AC7Fa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA,uDAAuD;;AAEvD;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;;AAEA;AACA;;AAEA,iBAAiB,wBAAwB;AACzC;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,iBAAiB,iBAAiB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,gBAAgB,KAAwC,GAAG,sBAAiB,GAAG,SAAI;;AAEnF;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA,qEAAqE,qBAAqB,aAAa;;AAEvG;;AAEA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA,yDAAyD;AACzD,GAAG;;AAEH;;;AAGA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA,0BAA0B;AAC1B;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,mBAAmB,4BAA4B;AAC/C;AACA;AACA;AACA;;AAEA;;AAEA,oBAAoB,6BAA6B;AACjD;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,E;;;;;;;;;;;AC5QA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA,mBAAO,CAAC,kCAAc;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AC9DA;;AAEA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;;AAEA;AACA;AACA,4CAA4C;;AAE5C;;;;;;;;;;;;;ACnBA;AAAe,+EAAgB,wrjB;;;;;;;;;;;ACA/B,miF;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAEA,IAAMA,SAAS,GAAGC,2EAAU,CAAC,UAAAC,KAAK;AAAA,SAAK;AACrCC,QAAI,EAAE;AACJ,mBAAa;AACXC,iBAAS,EAAEF,KAAK,CAACG,OAAN,CAAc,CAAd;AADA;AADT,KAD+B;AAMrCC,QAAI,EAAE;AACJC,cAAQ,EAAE,MADN;AAEJC,gBAAU,EAAE,GAFR;AAGJC,gBAAU,EAAE,WAHR;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;;;;;;ACAA,iD;;;;;;;;;;;ACAA,+C;;;;;;;;;;;ACAA,8C;;;;;;;;;;;ACAA,8C;;;;;;;;;;;ACAA,qD;;;;;;;;;;;ACAA,uD;;;;;;;;;;;ACAA,kD;;;;;;;;;;;ACAA,0D;;;;;;;;;;;ACAA,qD;;;;;;;;;;;ACAA,uD;;;;;;;;;;;ACAA,mD;;;;;;;;;;;ACAA,+D;;;;;;;;;;;ACAA,uD;;;;;;;;;;;ACAA,sD;;;;;;;;;;;ACAA,qD;;;;;;;;;;;ACAA,0D;;;;;;;;;;;ACAA,+D;;;;;;;;;;;ACAA,6D;;;;;;;;;;;ACAA,mD;;;;;;;;;;;ACAA,yD;;;;;;;;;;;ACAA,oD;;;;;;;;;;;ACAA,6D;;;;;;;;;;;ACAA,wD;;;;;;;;;;;ACAA,yD;;;;;;;;;;;ACAA,mD;;;;;;;;;;;ACAA,2D;;;;;;;;;;;ACAA,mD;;;;;;;;;;;ACAA,uD;;;;;;;;;;;ACAA,oD;;;;;;;;;;;ACAA,qD;;;;;;;;;;;ACAA,qD;;;;;;;;;;;ACAA,kD;;;;;;;;;;;ACAA,wD;;;;;;;;;;;ACAA,mD;;;;;;;;;;;ACAA,wD;;;;;;;;;;;ACAA,yD;;;;;;;;;;;ACAA,qD;;;;;;;;;;;ACAA,qD;;;;;;;;;;;ACAA,sE;;;;;;;;;;;ACAA,oD;;;;;;;;;;;ACAA,mD;;;;;;;;;;;ACAA,sD;;;;;;;;;;;ACAA,6D;;;;;;;;;;;ACAA,oD;;;;;;;;;;;ACAA,qD;;;;;;;;;;;ACAA,2D;;;;;;;;;;;ACAA,4D;;;;;;;;;;;ACAA,qD;;;;;;;;;;;ACAA,qD;;;;;;;;;;;ACAA,6D;;;;;;;;;;;ACAA,oD;;;;;;;;;;;ACAA,0D;;;;;;;;;;;ACAA,0D;;;;;;;;;;;ACAA,yD;;;;;;;;;;;ACAA,qD;;;;;;;;;;;ACAA,wD;;;;;;;;;;;ACAA,4D;;;;;;;;;;;ACAA,sD;;;;;;;;;;;ACAA,uD;;;;;;;;;;;ACAA,wD;;;;;;;;;;;ACAA,sD;;;;;;;;;;;ACAA,wD;;;;;;;;;;;ACAA,qD;;;;;;;;;;;ACAA,0D;;;;;;;;;;;ACAA,0D;;;;;;;;;;;ACAA,uD;;;;;;;;;;;ACAA,mD;;;;;;;;;;;ACAA,iD;;;;;;;;;;;ACAA,gD;;;;;;;;;;;ACAA,iC;;;;;;;;;;;ACAA,mC;;;;;;;;;;;ACAA,iD;;;;;;;;;;;ACAA,8C;;;;;;;;;;;ACAA,oC;;;;;;;;;;;ACAA,uC;;;;;;;;;;;ACAA,2C;;;;;;;;;;;ACAA,8C;;;;;;;;;;;ACAA,6C;;;;;;;;;;;ACAA,4C;;;;;;;;;;;ACAA,uC;;;;;;;;;;;ACAA,2C;;;;;;;;;;;ACAA,2C;;;;;;;;;;;ACAA,uC;;;;;;;;;;;ACAA,0C;;;;;;;;;;;ACAA,kE;;;;;;;;;;;ACAA,2C;;;;;;;;;;;ACAA,kC;;;;;;;;;;;ACAA,4C;;;;;;;;;;;ACAA,uC;;;;;;;;;;;ACAA,kC;;;;;;;;;;;ACAA,sC;;;;;;;;;;;ACAA,0C;;;;;;;;;;;ACAA,kD;;;;;;;;;;;ACAA,8C;;;;;;;;;;;ACAA,mD;;;;;;;;;;;ACAA,gE;;;;;;;;;;;ACAA,yD;;;;;;;;;;;ACAA,mC;;;;;;;;;;;ACAA,yC;;;;;;;;;;;ACAA,8C","file":"dist/index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"MovaiReact\"] = factory();\n\telse\n\t\troot[\"MovaiReact\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./index.js\");\n","import Button from \"./src/Components/Button\";\nimport AbstractModal from \"./src/Components/Modal/AbstractModal\";\nimport ConfirmAlertModal from \"./src/Components/Modal/ConfirmAlertModal\";\nimport RobotLogModal from \"./src/Components/Modal/RobotLogModal\";\nimport Drawer from \"./src/Components/Drawer\";\nimport Collapse from \"./src/Components/Collapse\";\nimport VerticalBar from \"./src/Components/VerticalBar\";\nimport ContextMenu from \"./src/Components/ContextMenu\";\nimport Table from \"./src/Components/Table\";\nimport Tabs from \"./src/Components/Tabs\";\nimport Text from \"./src/Components/Text\";\nimport Toggle from \"./src/Components/Toggle\";\nimport SearchInput from \"./src/Components/SearchInput\";\nimport Breadcrumb from \"./src/Components/Breadcrumb\";\nimport SceneViewer from \"./src/Components/Viewer/SceneViewer\";\nimport Select from \"./src/Components/Select\";\nimport { snackbar } from \"./src/Components/Snackbar/Snackbar\";\nimport Themes from \"./src/styles/Themes\";\nimport Style from \"./src/styles/Style\";\nimport Logs from \"./src/Components/Logs/Logs\";\nimport LoginForm from \"./src/Components/LoginForm/LoginForm\";\nimport ProfileMenu from \"./src/Components/ProfileMenu\";\nimport FilterIcon from \"./src/Components/Logs/LogsFilterBar/FiltersIcon/FiltersIcon\";\nimport SelectScopeModal from \"./src/Components/Modal/SelectScopeModal\";\n// import HOCs\nimport withOfflineValidation from \"./src/Components/HOCs/withOfflineValidation\";\nimport withAuthentication from \"./src/Components/HOCs/withAuthentication\";\n\nexport {\n  withOfflineValidation,\n  withAuthentication,\n  Button,\n  AbstractModal,\n  ConfirmAlertModal,\n  SelectScopeModal,\n  RobotLogModal,\n  Drawer,\n  Collapse,\n  VerticalBar,\n  ContextMenu,\n  Table,\n  Tabs,\n  Text,\n  Themes,\n  Toggle,\n  SearchInput,\n  Breadcrumb,\n  SceneViewer,\n  Select,\n  snackbar,\n  Style,\n  Logs,\n  FilterIcon,\n  LoginForm,\n  ProfileMenu\n};\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".flow-action {\\n  display: flex;\\n  background: transparent;\\n  width: 35px;\\n  height: 35px;\\n  margin: 6px;\\n  border-radius: 50%;\\n  justify-content: center;\\n  align-items: center;\\n  transition: background-color 0.5s;\\n}\\n\\n.flow-action:hover {\\n  background: rgba(11, 106, 138, 0.2);\\n  cursor: pointer;\\n}\\n\\n.robot-logs-container {\\n  display: flex;\\n  flex-direction: column;\\n  height: 1px;\\n  flex-grow: 1;\\n}\\n\\n.tree-grow-overflow {\\n  flex-grow: 0.5;\\n  overflow-y: auto;\\n  min-height: 0;\\n  height: 100%;\\n}\\n\\n.logs-grow-overflow {\\n  flex-grow: 1;\\n  overflow-y: auto;\\n  min-height: 0;\\n  height: 100%;\\n}\\n\\n.saving {\\n  /* font-size: 40px; */\\n  margin: 0;\\n}\\n\\n.saving span {\\n  font-size: 15px;\\n  animation-name: blink;\\n  animation-duration: 1.4s;\\n  animation-iteration-count: infinite;\\n  animation-fill-mode: both;\\n}\\n\\n.saving span:nth-child(2) {\\n  animation-delay: 0.2s;\\n}\\n\\n.saving span:nth-child(3) {\\n  animation-delay: 0.4s;\\n}\\n\\n@keyframes blink {\\n  0% {\\n    opacity: 0.2;\\n  }\\n  20% {\\n    opacity: 1;\\n  }\\n  100% {\\n    opacity: 0.2;\\n  }\\n}\\n\\n.MuiPickersToolbarButton-toolbarBtn {\\n  padding: 0 !important;\\n  min-width: 16px !important;\\n  margin: 0 !important;\\n  text-transform: none !important;\\n}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"body.react-confirm-alert-body-element {\\n  overflow: hidden;\\n}\\n\\n.react-confirm-alert-blur {\\n  filter: url(#gaussian-blur);\\n  filter: blur(2px);\\n  -webkit-filter: blur(2px);\\n}\\n\\n.react-confirm-alert-overlay {\\n  position: fixed;\\n  top: calc(100vh - 300px);\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n  z-index: 99;\\n  display: -webkit-flex;\\n  display: -moz-flex;\\n  display: -ms-flex;\\n  display: -o-flex;\\n  display: flex;\\n  justify-content: flex-start;\\n  -ms-align-items: center;\\n  align-items: flex-end;\\n  opacity: 1;\\n}\\n\\n.react-confirm-alert-body {\\n  width: 400px;\\n  padding: 30px;\\n}\\n\\n.react-confirm-alert-svg {\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n}\\n\\n.react-confirm-alert-body > h1 {\\n  margin-top: 0;\\n}\\n\\n.react-confirm-alert-body > h3 {\\n  margin: 0;\\n  font-size: 16px;\\n}\\n\\n.react-confirm-alert-button-group {\\n  display: -webkit-flex;\\n  display: -moz-flex;\\n  display: -ms-flex;\\n  display: -o-flex;\\n  display: flex;\\n  justify-content: flex-start;\\n  margin-top: 20px;\\n}\\n\\n.react-confirm-alert-button-group > button {\\n  outline: none;\\n  background: #333;\\n  border: none;\\n  display: inline-block;\\n  padding: 6px 18px;\\n  color: #eee;\\n  margin-right: 10px;\\n  border-radius: 5px;\\n  font-size: 12px;\\n  cursor: pointer;\\n}\\n\\n.icon-container {\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n}\\n\\n.icon-container:hover {\\n  cursor: pointer;\\n}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\n// eslint-disable-next-line func-names\nmodule.exports = function (useSourceMap) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item, useSourceMap);\n\n      if (item[2]) {\n        return \"@media \".concat(item[2], \" {\").concat(content, \"}\");\n      }\n\n      return content;\n    }).join('');\n  }; // import a list of modules into the list\n  // eslint-disable-next-line func-names\n\n\n  list.i = function (modules, mediaQuery, dedupe) {\n    if (typeof modules === 'string') {\n      // eslint-disable-next-line no-param-reassign\n      modules = [[null, modules, '']];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var i = 0; i < this.length; i++) {\n        // eslint-disable-next-line prefer-destructuring\n        var id = this[i][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _i = 0; _i < modules.length; _i++) {\n      var item = [].concat(modules[_i]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        // eslint-disable-next-line no-continue\n        continue;\n      }\n\n      if (mediaQuery) {\n        if (!item[2]) {\n          item[2] = mediaQuery;\n        } else {\n          item[2] = \"\".concat(mediaQuery, \" and \").concat(item[2]);\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n  var content = item[1] || ''; // eslint-disable-next-line prefer-destructuring\n\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (useSourceMap && typeof btoa === 'function') {\n    var sourceMapping = toComment(cssMapping);\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot || '').concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n  }\n\n  return [content].join('\\n');\n} // Adapted from convert-source-map (MIT)\n\n\nfunction toComment(sourceMap) {\n  // eslint-disable-next-line no-undef\n  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n  var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n  return \"/*# \".concat(data, \" */\");\n}","\"use strict\";\n\nvar isOldIE = function isOldIE() {\n  var memo;\n  return function memorize() {\n    if (typeof memo === 'undefined') {\n      // Test for IE <= 9 as proposed by Browserhacks\n      // @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n      // Tests for existence of standard globals is to allow style-loader\n      // to operate correctly into non-standard environments\n      // @see https://github.com/webpack-contrib/style-loader/issues/177\n      memo = Boolean(window && document && document.all && !window.atob);\n    }\n\n    return memo;\n  };\n}();\n\nvar getTarget = function getTarget() {\n  var memo = {};\n  return function memorize(target) {\n    if (typeof memo[target] === 'undefined') {\n      var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n      if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n        try {\n          // This will throw an exception if access to iframe is blocked\n          // due to cross-origin restrictions\n          styleTarget = styleTarget.contentDocument.head;\n        } catch (e) {\n          // istanbul ignore next\n          styleTarget = null;\n        }\n      }\n\n      memo[target] = styleTarget;\n    }\n\n    return memo[target];\n  };\n}();\n\nvar stylesInDom = [];\n\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n\n  for (var i = 0; i < stylesInDom.length; i++) {\n    if (stylesInDom[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var index = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3]\n    };\n\n    if (index !== -1) {\n      stylesInDom[index].references++;\n      stylesInDom[index].updater(obj);\n    } else {\n      stylesInDom.push({\n        identifier: identifier,\n        updater: addStyle(obj, options),\n        references: 1\n      });\n    }\n\n    identifiers.push(identifier);\n  }\n\n  return identifiers;\n}\n\nfunction insertStyleElement(options) {\n  var style = document.createElement('style');\n  var attributes = options.attributes || {};\n\n  if (typeof attributes.nonce === 'undefined') {\n    var nonce = typeof __webpack_nonce__ !== 'undefined' ? __webpack_nonce__ : null;\n\n    if (nonce) {\n      attributes.nonce = nonce;\n    }\n  }\n\n  Object.keys(attributes).forEach(function (key) {\n    style.setAttribute(key, attributes[key]);\n  });\n\n  if (typeof options.insert === 'function') {\n    options.insert(style);\n  } else {\n    var target = getTarget(options.insert || 'head');\n\n    if (!target) {\n      throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n    }\n\n    target.appendChild(style);\n  }\n\n  return style;\n}\n\nfunction removeStyleElement(style) {\n  // istanbul ignore if\n  if (style.parentNode === null) {\n    return false;\n  }\n\n  style.parentNode.removeChild(style);\n}\n/* istanbul ignore next  */\n\n\nvar replaceText = function replaceText() {\n  var textStore = [];\n  return function replace(index, replacement) {\n    textStore[index] = replacement;\n    return textStore.filter(Boolean).join('\\n');\n  };\n}();\n\nfunction applyToSingletonTag(style, index, remove, obj) {\n  var css = remove ? '' : obj.media ? \"@media \".concat(obj.media, \" {\").concat(obj.css, \"}\") : obj.css; // For old IE\n\n  /* istanbul ignore if  */\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = replaceText(index, css);\n  } else {\n    var cssNode = document.createTextNode(css);\n    var childNodes = style.childNodes;\n\n    if (childNodes[index]) {\n      style.removeChild(childNodes[index]);\n    }\n\n    if (childNodes.length) {\n      style.insertBefore(cssNode, childNodes[index]);\n    } else {\n      style.appendChild(cssNode);\n    }\n  }\n}\n\nfunction applyToTag(style, options, obj) {\n  var css = obj.css;\n  var media = obj.media;\n  var sourceMap = obj.sourceMap;\n\n  if (media) {\n    style.setAttribute('media', media);\n  } else {\n    style.removeAttribute('media');\n  }\n\n  if (sourceMap && typeof btoa !== 'undefined') {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    while (style.firstChild) {\n      style.removeChild(style.firstChild);\n    }\n\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar singleton = null;\nvar singletonCounter = 0;\n\nfunction addStyle(obj, options) {\n  var style;\n  var update;\n  var remove;\n\n  if (options.singleton) {\n    var styleIndex = singletonCounter++;\n    style = singleton || (singleton = insertStyleElement(options));\n    update = applyToSingletonTag.bind(null, style, styleIndex, false);\n    remove = applyToSingletonTag.bind(null, style, styleIndex, true);\n  } else {\n    style = insertStyleElement(options);\n    update = applyToTag.bind(null, style, options);\n\n    remove = function remove() {\n      removeStyleElement(style);\n    };\n  }\n\n  update(obj);\n  return function updateStyle(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {\n        return;\n      }\n\n      update(obj = newObj);\n    } else {\n      remove();\n    }\n  };\n}\n\nmodule.exports = function (list, options) {\n  options = options || {}; // Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n  // tags it will allow on a page\n\n  if (!options.singleton && typeof options.singleton !== 'boolean') {\n    options.singleton = isOldIE();\n  }\n\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n\n    if (Object.prototype.toString.call(newList) !== '[object Array]') {\n      return;\n    }\n\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDom[index].references--;\n    }\n\n    var newLastIdentifiers = modulesToDom(newList, options);\n\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n\n      var _index = getIndexByIdentifier(_identifier);\n\n      if (stylesInDom[_index].references === 0) {\n        stylesInDom[_index].updater();\n\n        stylesInDom.splice(_index, 1);\n      }\n    }\n\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","var scope = (typeof global !== \"undefined\" && global) ||\n            (typeof self !== \"undefined\" && self) ||\n            window;\nvar apply = Function.prototype.apply;\n\n// DOM APIs, for completeness\n\nexports.setTimeout = function() {\n  return new Timeout(apply.call(setTimeout, scope, arguments), clearTimeout);\n};\nexports.setInterval = function() {\n  return new Timeout(apply.call(setInterval, scope, arguments), clearInterval);\n};\nexports.clearTimeout =\nexports.clearInterval = function(timeout) {\n  if (timeout) {\n    timeout.close();\n  }\n};\n\nfunction Timeout(id, clearFn) {\n  this._id = id;\n  this._clearFn = clearFn;\n}\nTimeout.prototype.unref = Timeout.prototype.ref = function() {};\nTimeout.prototype.close = function() {\n  this._clearFn.call(scope, this._id);\n};\n\n// Does not start the time, just sets up the members needed.\nexports.enroll = function(item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n};\n\nexports.unenroll = function(item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n};\n\nexports._unrefActive = exports.active = function(item) {\n  clearTimeout(item._idleTimeoutId);\n\n  var msecs = item._idleTimeout;\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout)\n        item._onTimeout();\n    }, msecs);\n  }\n};\n\n// setimmediate attaches itself to the global object\nrequire(\"setimmediate\");\n// On some exotic environments, it's not clear which object `setimmediate` was\n// able to install onto.  Search each possibility in the same order as the\n// `setimmediate` library.\nexports.setImmediate = (typeof self !== \"undefined\" && self.setImmediate) ||\n                       (typeof global !== \"undefined\" && global.setImmediate) ||\n                       (this && this.setImmediate);\nexports.clearImmediate = (typeof self !== \"undefined\" && self.clearImmediate) ||\n                         (typeof global !== \"undefined\" && global.clearImmediate) ||\n                         (this && this.clearImmediate);\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","export default \"data:image/png;base64,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\"","module.exports = \"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' version='1.0' width='400.000000' height='400.000000' preserveAspectRatio='xMidYMid meet'%3E%3Crect id='backgroundrect' width='100%25' height='100%25' x='0' y='0' fill='none' stroke='none'/%3E %3Cg class='currentLayer' style=''%3E%3Ctitle%3ELayer 1%3C/title%3E%3Cg transform='translate(0,400) scale(0.10000000149011612,-0.10000000149011612) ' fill='%23d31b1b' stroke='none' id='svg_1' class='' fill-opacity='1'%3E %3Cpath d='M1770 3990 c-682 -83 -1271 -501 -1570 -1115 -103 -211 -167 -437 -191 -673 -14 -129 -6 -404 14 -522 85 -495 339 -929 729 -1242 232 -187 539 -332 836 -393 957 -199 1909 314 2272 1224 204 512 180 1116 -64 1606 -115 232 -229 387 -412 565 -296 286 -639 460 -1059 536 -106 19 -443 27 -555 14z m-998 -1105 c3 -3 -23 -48 -57 -99 -113 -172 -182 -338 -226 -546 -32 -149 -33 -448 -1 -593 31 -145 70 -258 134 -387 65 -132 64 -140 -28 -140 -66 0 -100 13 -143 53 -74 70 -71 38 -71 748 0 555 2 642 16 690 43 144 129 236 248 265 54 13 119 18 128 9z m2621 -21 c99 -34 192 -157 216 -288 14 -78 15 -1256 1 -1307 -13 -48 -82 -125 -124 -139 -55 -18 -166 -12 -166 9 0 4 25 57 55 118 195 391 215 839 55 1247 -41 105 -117 247 -176 327 -18 25 -30 49 -26 54 10 11 109 -2 165 -21z m-251 -61 c128 -170 217 -370 265 -594 13 -63 18 -129 18 -264 0 -199 -13 -285 -66 -448 -33 -101 -114 -277 -128 -277 -26 0 -31 80 -32 549 0 267 -4 495 -8 505 -6 16 -20 4 -87 -77 -43 -53 -81 -96 -84 -96 -3 -1 -16 41 -29 92 -27 106 -74 215 -132 304 -32 48 -38 66 -31 80 34 61 243 273 271 273 4 0 23 -21 43 -47z m-2206 15 c52 -39 95 -82 171 -170 l74 -88 -42 -61 c-23 -34 -54 -89 -69 -123 -35 -76 -80 -219 -80 -252 0 -13 -4 -24 -8 -24 -4 0 -43 43 -87 95 -43 52 -83 95 -87 95 -4 0 -8 -224 -9 -497 0 -492 -5 -565 -34 -565 -16 0 -94 166 -130 279 -52 159 -69 294 -62 493 8 230 47 384 147 585 56 112 154 255 174 255 7 0 26 -10 42 -22z m458 -511 l133 -157 -20 -58 c-13 -39 -19 -85 -19 -147 -1 -150 44 -260 151 -365 107 -105 214 -150 361 -150 241 0 443 162 500 399 16 69 8 222 -15 278 l-17 43 132 157 c73 87 136 159 140 161 24 9 119 -186 148 -303 11 -44 22 -104 25 -134 l4 -54 -329 -388 c-343 -405 -362 -424 -466 -455 -101 -31 -258 -12 -341 41 -48 29 -83 69 -607 691 -52 62 -94 121 -94 131 0 52 33 202 60 271 33 86 99 204 112 200 5 -2 68 -74 142 -161z m376 -444 c85 -102 167 -194 182 -204 62 -45 81 -30 292 224 76 92 142 165 146 162 13 -8 20 -110 10 -167 -27 -170 -153 -299 -324 -334 -130 -27 -257 9 -356 102 -61 57 -116 162 -125 239 -8 57 1 165 13 164 4 0 77 -84 162 -186z' id='svg_2' fill='%23d31b1b' fill-opacity='1'/%3E %3C/g%3E%3C/g%3E%3C/svg%3E\"","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Breadcrumbs from \"@material-ui/core/Breadcrumbs\";\nimport NavigateNextIcon from \"@material-ui/icons/NavigateNext\";\nimport Typography from \"@material-ui/core/Typography\";\nimport PropTypes from \"prop-types\";\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    \"& > * + *\": {\n      marginTop: theme.spacing(2)\n    }\n  },\n  link: {\n    fontSize: \"24px\",\n    fontWeight: 800,\n    fontFamily: \"Open Sans\",\n    \"&:hover\": {\n      cursor: \"pointer\",\n      textDecoration: \"underline\"\n    }\n  },\n  lastLabel: {\n    fontSize: \"24px\",\n    fontWeight: 800,\n    fontFamily: \"Open Sans\"\n  }\n}));\n\nconst Breadcrumb = props => {\n  const classes = useStyles();\n  return (\n    <div className={classes.root}>\n      <Breadcrumbs\n        separator={<NavigateNextIcon fontSize=\"small\" />}\n        aria-label=\"breadcrumb\"\n        style={props.style}\n      >\n        {props.pathList.map((element, index) => {\n          if (props.pathList.length - 1 !== index) {\n            return (\n              <Typography\n                key={index}\n                color=\"primary\"\n                variant=\"inherit\"\n                className={classes.link}\n                onClick={element.function}\n              >\n                {element.label}\n              </Typography>\n            );\n          }\n        })}\n        <Typography color=\"textPrimary\" className={classes.lastLabel}>\n          {props.pathList[props.pathList.length - 1].label}\n        </Typography>\n      </Breadcrumbs>\n    </div>\n  );\n};\n\nBreadcrumb.propTypes = {\n  pathList: PropTypes.array\n};\n\nBreadcrumb.defaultProps = {\n  pathList: [\n    { label: \"Mov.ai\", function: () => console.log(\"pth1/\") },\n    { label: \"User\", function: () => console.log(\"path1/path2\") },\n    { label: \"John Doe\" }\n  ]\n};\n\nexport default Breadcrumb;\n","import React from \"react\";\nimport MaterialButton from \"@material-ui/core/Button\";\nimport PropTypes from \"prop-types\";\n\nconst Button = props => {\n  return (\n    <MaterialButton\n      className={props.className}\n      style={props.style}\n      onClick={props.onClick}\n      color={props.color}\n      variant={props.variant}\n      size={props.size}\n      startIcon={props.startIcon}\n      disabled={props.disabled}\n    >\n      {props.children}\n    </MaterialButton>\n  );\n};\n\nButton.propTypes = {\n  style: PropTypes.object,\n  onClick: PropTypes.func,\n  color: PropTypes.string,\n  variant: PropTypes.string.isRequired,\n  size: PropTypes.string,\n  startIcon: PropTypes.element,\n  children: PropTypes.node.isRequired,\n  disabled: PropTypes.bool\n};\nButton.defaultProps = {\n  style: {},\n  onClick: () => console.log(\"Click MOV.AI button\"),\n  color: \"default\", // default, inherit, primary or secondary\n  variant: \"contained\", // text, outlined, contained\n  size: \"medium\", // small, medium, large\n  startIcon: undefined,\n  children: <div></div>,\n  disabled: false\n};\n\nexport default Button;\n","import React from \"react\";\nimport ChevronRightIcon from \"@material-ui/icons/ChevronRight\";\nimport ExpandMore from \"@material-ui/icons/ExpandMore\";\nimport PropTypes from \"prop-types\";\nimport MaterialCollapse from \"@material-ui/core/Collapse\";\nimport { Divider, ListItem, List } from \"@material-ui/core\";\n\nconst Collapse = props => {\n  const [open, setOpen] = React.useState(props.open);\n\n  React.useEffect(() => {\n    if (props.open !== open) {\n      setOpen(props.open);\n    }\n  }, [props.open]);\n\n  const handleClickFactory = clickLambda => () => {\n    setOpen(!open);\n    clickLambda();\n  };\n\n  return (\n    <List>\n      <ListItem button onClick={handleClickFactory(props.onClick)}>\n        {open ? (\n          <ExpandMore style={{ ...props.iconStyle }} />\n        ) : (\n          <ChevronRightIcon style={{ ...props.iconStyle }} />\n        )}\n        <div style={{ width: \"100%\" }}>{props.item}</div>\n      </ListItem>\n      {props.divided ? <Divider /> : []}\n      <MaterialCollapse\n        className={props.className}\n        style={props.style}\n        in={open}\n      >\n        {props.children}\n      </MaterialCollapse>\n    </List>\n  );\n};\n\nCollapse.propTypes = {\n  item: PropTypes.object,\n  onClick: PropTypes.func,\n  open: PropTypes.bool,\n  divided: PropTypes.bool,\n  iconStyle: PropTypes.object\n};\n\nCollapse.defaultProps = {\n  item: <div></div>,\n  onClick: () => {},\n  open: false,\n  divided: false,\n  style: {},\n  iconStyle: {}\n};\n\nexport default Collapse;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Menu from \"@material-ui/core/Menu\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\n\nconst ContextMenu = props => {\n  const { style } = props;\n  const [anchorEl, setAnchorEl] = React.useState(null);\n\n  const handleClick = event => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  return (\n    <div style={style}>\n      {React.cloneElement(props.element, {\n        onClick: evt => {\n          if (props.element.props.onClick !== undefined) {\n            props.element.props.onClick(); // If user defined a onClick\n          }\n          handleClick(evt); // opens the contextMenu\n        }\n      })}\n      <Menu\n        id=\"simple-menu\"\n        anchorEl={anchorEl}\n        keepMounted\n        open={Boolean(anchorEl)}\n        onClose={handleClose}\n      >\n        {props.menuList.reduce((result, item, index) => {\n          if (item && typeof item !== \"function\") {\n            result.push(\n              <MenuItem\n                onClick={() => {\n                  item.onClick();\n                  if (item.onClose || item.onClose === undefined) {\n                    handleClose();\n                  }\n                }}\n                key={index}\n              >\n                {item.element}\n              </MenuItem>\n            );\n          }\n          return result;\n        }, [])}\n      </Menu>\n    </div>\n  );\n};\n\nContextMenu.propTypes = {\n  element: PropTypes.node.isRequired,\n  navigationList: PropTypes.array,\n  lowerElement: PropTypes.node.isRequired,\n  width: PropTypes.string,\n  backgroundColor: PropTypes.string\n};\nContextMenu.defaultProps = {\n  element: <div>Ahaha</div>,\n  menuList: [\n    {\n      onClick: () => console.log(\"clicked 1\"),\n      element: \"Profile\",\n      onClose: true\n    }\n  ],\n  lowerElement: <div></div>,\n  width: \"68px\",\n  backgroundColor: \"#424242\",\n  style: {}\n};\n\nexport default ContextMenu;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport MaterialDrawer from \"@material-ui/core/Drawer\";\n\nconst Drawer = props => {\n  return (\n    <MaterialDrawer\n      style={props.style}\n      anchor={props.anchor}\n      open={props.open}\n      onClose={props.onClose}\n    >\n      {props.children}\n    </MaterialDrawer>\n  );\n};\n\nDrawer.propTypes = {\n  style: PropTypes.object,\n  anchor: PropTypes.string,\n  open: PropTypes.bool,\n  children: PropTypes.object\n};\n\nDrawer.defaultProps = {\n  style: {},\n  anchor: \"left\",\n  open: false,\n  children: <div></div>\n};\n\nDrawer.ANCHOR = { left: \"left\", right: \"right\", top: \"top\", bottom: \"bottom\" };\n\nexport default Drawer;\n","import React, { useState, useEffect, useRef } from \"react\";\nimport { Modal } from \"@material-ui/core\";\nimport { Authentication } from \"mov-fe-lib-core\";\nimport LoginForm from \"../LoginForm/LoginForm\";\nimport jwtDecode from \"jwt-decode\";\n\nexport default function withAuthentication(Component) {\n  return function (props) {\n    const RECHECK_VALID_DELAY = 2000; // milliseconds\n\n    const firstRender = useRef(true);\n\n    const [loggedIn, setLoggedIn] = useState(false);\n    const [checkLogin, setCheckLogin] = useState(0);\n\n    /**\n     * check if the user is authenticated\n     */\n    useEffect(() => {\n      async function checkLogin() {\n        return await Authentication.checkLogin();\n      }\n\n      setLoggedIn(checkLogin());\n    }, []);\n\n    /**\n     * Checks if the refresh token is still valid\n     * sets loggedIn accordingly.\n     * Setting checkLogin or loggedIn will trigger execution\n     */\n    useEffect(() => {\n      const now = Math.floor(Date.now() * 0.001);\n      const token = window.localStorage.getItem(\"movai.refreshToken\");\n\n      try {\n        // decode the token and get exp value\n        const exp = jwtDecode(token).exp || now;\n\n        // check if token expiration time is still valid\n        const expDelta = exp - now;\n        if (expDelta <= 0) {\n          throw new Error(\"Token expired\");\n        }\n\n        // check again in expire time + RECHECK_VALID_DELAY\n        setTimeout(\n          () => setCheckLogin(now),\n          expDelta * 1000 + RECHECK_VALID_DELAY\n        );\n\n        setLoggedIn(true);\n      } catch (error) {\n        // token expired or no token\n        setLoggedIn(false);\n      }\n    }, [checkLogin, loggedIn]);\n\n    /**\n     * handleLogOut - log out the user\n     */\n    const handleLogOut = () => {\n      Authentication.logout();\n    };\n\n    /**\n     * handleFirstRender - If the user is not logged in and it is the first render\n     * then show the login form without the application on the background.\n     * After the first login, the login form can be showned as a modal instead.\n     */\n    const handleFirstRender = () => {\n      firstRender.current = false;\n      return <LoginForm setLoggedIn={state => setLoggedIn(state)} />;\n    };\n\n    /**\n     * renders the Login form if the user is not logged in\n     */\n    return (\n      <React.Fragment>\n        {!loggedIn && firstRender.current ? (\n          handleFirstRender()\n        ) : (\n          <React.Fragment>\n            <Component\n              handleLogOut={handleLogOut}\n              loggedIn={loggedIn}\n              {...props}\n            />\n            <Modal open={!loggedIn}>\n              <LoginForm setLoggedIn={state => setLoggedIn(state)} />\n            </Modal>\n          </React.Fragment>\n        )}\n      </React.Fragment>\n    );\n  };\n}\n","import React, { useEffect } from \"react\";\nimport { MasterDB } from \"mov-fe-lib-core\";\nimport Alert from \"@material-ui/lab/Alert\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport { makeStyles } from \"@material-ui/styles\";\nimport { Button } from \"@material-ui/core\";\n\nconst useStyles = makeStyles(theme => ({\n  alert: { position: \"absolute\", bottom: 0, width: \"100%\" }\n}));\n\nexport default function withOfflineValidation(Component) {\n  return function (props) {\n    const [isConnected, setConnected] = React.useState(true);\n    const [showSuccessAlert, setSuccessAlert] = React.useState(false);\n    const [validator, setValidator] = React.useState(null);\n    const [loading, setLoading] = React.useState(false);\n    const classes = useStyles();\n\n    /**\n     * Start offline validation\n     */\n    useEffect(() => {\n      const _validator = MasterDB.offlineValidation({ onOnline, onOffline });\n      setValidator(_validator);\n    }, []);\n\n    const onOnline = () => {\n      setConnected(true);\n      setSuccessAlert(true);\n      setTimeout(() => setSuccessAlert(false), 2000);\n    };\n\n    const onOffline = () => {\n      setConnected(false);\n    };\n\n    const retryConnection = () => {\n      setLoading(true);\n      validator.retryConnection().then(() => setLoading(false));\n    };\n\n    /**\n     * renders the Login form if the user is not logged in\n     */\n    return (\n      <React.Fragment>\n        <React.Fragment>\n          <Component {...props} />\n          {!isConnected && (\n            <Alert\n              className={classes.alert}\n              variant=\"filled\"\n              severity=\"error\"\n              action={\n                <Button color=\"inherit\" size=\"small\" onClick={retryConnection}>\n                  {loading ? (\n                    <CircularProgress\n                      size={20}\n                      color=\"inherit\"\n                    ></CircularProgress>\n                  ) : (\n                    \"RETRY\"\n                  )}\n                </Button>\n              }\n            >\n              Connection failed... You're now in offline mode, please wait to\n              reconnect.\n            </Alert>\n          )}\n          {isConnected && showSuccessAlert && (\n            <Alert\n              className={classes.alert}\n              variant=\"filled\"\n              severity=\"success\"\n            >\n              You're now online!\n            </Alert>\n          )}\n        </React.Fragment>\n      </React.Fragment>\n    );\n  };\n}\n","import React, { Component } from \"react\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Button from \"@material-ui/core/Button\";\nimport Grid from \"@material-ui/core/Grid\";\nimport defaultLogo from \"./movai_red.svg\";\nimport Paper from \"@material-ui/core/Paper\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport FormHelperText from \"@material-ui/core/FormHelperText\";\nimport Input from \"@material-ui/core/Input\";\nimport InputLabel from \"@material-ui/core/InputLabel\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport { Authentication } from \"mov-fe-lib-core\";\nimport PropTypes from \"prop-types\";\n\nconst styles = theme => ({\n  root: {\n    padding: theme.spacing(4, 4),\n    borderRadius: 10\n  }\n});\n\nclass LoginForm extends Component {\n  state = {\n    username: \"\",\n    password: \"\",\n    remember: false,\n    error: false,\n    errorMessage: \"\",\n    capsLockOn: false\n  };\n\n  sendCreds = async () => {\n    try {\n      const apiResponse = await Authentication.login(\n        this.state.username,\n        this.state.password,\n        this.state.remember\n      );\n      // If successfully logged in\n      if (!apiResponse.error) {\n        this.props.setLoggedIn(true);\n      } else {\n        // Show the error in red\n        this.setState({\n          error: true,\n          errorMessage: apiResponse.error\n        });\n      }\n    } catch (e) {\n      this.setState({\n        error: true,\n        errorMessage: e\n      });\n    }\n  };\n\n  checkCapsLock = event => {\n    if (event.key === \"CapsLock\" && this.state.capsLockOn)\n      this.setState({ capsLockOn: false });\n    else {\n      const capsLock = event.getModifierState(\"CapsLock\");\n      this.setState({ capsLockOn: capsLock });\n    }\n  };\n\n  render() {\n    const { classes, logo } = this.props;\n\n    return (\n      <Grid\n        style={{ paddingTop: \"5%\" }}\n        container\n        direction=\"column\"\n        alignItems=\"center\"\n        justify=\"space-evenly\"\n      >\n        <Paper elevation={10} className={classes.root}>\n          <Grid item>\n            <img\n              src={logo ? logo : defaultLogo}\n              className=\"center\"\n              alt=\"logo\"\n              style={{\n                display: \"block\",\n                marginLeft: \"auto\",\n                marginRight: \"auto\",\n                width: \"50%\"\n              }}\n            />\n          </Grid>\n          <Grid>\n            <Typography align=\"center\" variant=\"subtitle1\" gutterBottom>\n              <FormControl\n                className={classes.formControl}\n                error={this.state.error}\n              >\n                <InputLabel htmlFor=\"component-username-error\">\n                  Username\n                </InputLabel>\n                <Input\n                  id=\"component-username-error\"\n                  value={this.state.username}\n                  aria-describedby=\"component-username-error-text\"\n                  onChange={event =>\n                    this.setState({ username: event.target.value })\n                  }\n                />\n              </FormControl>\n            </Typography>\n          </Grid>\n          <Grid>\n            <Typography align=\"center\" variant=\"subtitle1\" gutterBottom>\n              <FormControl\n                className={classes.formControl}\n                error={this.state.error}\n              >\n                <InputLabel htmlFor=\"component-password-error\">\n                  Password\n                </InputLabel>\n                <Input\n                  id=\"component-password-error\"\n                  type=\"password\"\n                  value={this.state.password}\n                  aria-describedby=\"component-password-error-text\"\n                  onChange={event =>\n                    this.setState({ password: event.target.value })\n                  }\n                  onKeyUp={event => {\n                    this.checkCapsLock(event);\n                    if (event.key === \"Enter\") {\n                      this.sendCreds();\n                    }\n                  }}\n                />\n                {this.state.error && (\n                  <FormHelperText id=\"component-error-text\">\n                    {this.state.errorMessage}\n                  </FormHelperText>\n                )}\n                {this.state.capsLockOn && (\n                  <FormHelperText id=\"component-warning-text\">\n                    Warning: Caps lock is ON!\n                  </FormHelperText>\n                )}\n              </FormControl>\n            </Typography>\n          </Grid>\n          <Grid>\n            <Typography align=\"center\" gutterBottom>\n              <Button onClick={() => this.sendCreds()}>Login</Button>\n            </Typography>\n          </Grid>\n        </Paper>\n      </Grid>\n    );\n  }\n}\n\nLoginForm.propTypes = {\n  logs: PropTypes.any, // expects a svg element\n  setLoggedIn: PropTypes.func\n};\n\nLoginForm.defaultProps = {\n  setLoggedIn: loggedIn => console.log(loggedIn)\n};\n\nexport default withStyles(styles, { withTheme: true })(LoginForm);\n","module.exports = \"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' version='1.0' width='400.000000' height='400.000000' preserveAspectRatio='xMidYMid meet'%3E%3Crect id='backgroundrect' width='100%25' height='100%25' x='0' y='0' fill='none' stroke='none'/%3E %3Cg class='currentLayer' style=''%3E%3Ctitle%3ELayer 1%3C/title%3E%3Cg transform='translate(0,400) scale(0.10000000149011612,-0.10000000149011612) ' fill='%23d31b1b' stroke='none' id='svg_1' class='' fill-opacity='1'%3E %3Cpath d='M1770 3990 c-682 -83 -1271 -501 -1570 -1115 -103 -211 -167 -437 -191 -673 -14 -129 -6 -404 14 -522 85 -495 339 -929 729 -1242 232 -187 539 -332 836 -393 957 -199 1909 314 2272 1224 204 512 180 1116 -64 1606 -115 232 -229 387 -412 565 -296 286 -639 460 -1059 536 -106 19 -443 27 -555 14z m-998 -1105 c3 -3 -23 -48 -57 -99 -113 -172 -182 -338 -226 -546 -32 -149 -33 -448 -1 -593 31 -145 70 -258 134 -387 65 -132 64 -140 -28 -140 -66 0 -100 13 -143 53 -74 70 -71 38 -71 748 0 555 2 642 16 690 43 144 129 236 248 265 54 13 119 18 128 9z m2621 -21 c99 -34 192 -157 216 -288 14 -78 15 -1256 1 -1307 -13 -48 -82 -125 -124 -139 -55 -18 -166 -12 -166 9 0 4 25 57 55 118 195 391 215 839 55 1247 -41 105 -117 247 -176 327 -18 25 -30 49 -26 54 10 11 109 -2 165 -21z m-251 -61 c128 -170 217 -370 265 -594 13 -63 18 -129 18 -264 0 -199 -13 -285 -66 -448 -33 -101 -114 -277 -128 -277 -26 0 -31 80 -32 549 0 267 -4 495 -8 505 -6 16 -20 4 -87 -77 -43 -53 -81 -96 -84 -96 -3 -1 -16 41 -29 92 -27 106 -74 215 -132 304 -32 48 -38 66 -31 80 34 61 243 273 271 273 4 0 23 -21 43 -47z m-2206 15 c52 -39 95 -82 171 -170 l74 -88 -42 -61 c-23 -34 -54 -89 -69 -123 -35 -76 -80 -219 -80 -252 0 -13 -4 -24 -8 -24 -4 0 -43 43 -87 95 -43 52 -83 95 -87 95 -4 0 -8 -224 -9 -497 0 -492 -5 -565 -34 -565 -16 0 -94 166 -130 279 -52 159 -69 294 -62 493 8 230 47 384 147 585 56 112 154 255 174 255 7 0 26 -10 42 -22z m458 -511 l133 -157 -20 -58 c-13 -39 -19 -85 -19 -147 -1 -150 44 -260 151 -365 107 -105 214 -150 361 -150 241 0 443 162 500 399 16 69 8 222 -15 278 l-17 43 132 157 c73 87 136 159 140 161 24 9 119 -186 148 -303 11 -44 22 -104 25 -134 l4 -54 -329 -388 c-343 -405 -362 -424 -466 -455 -101 -31 -258 -12 -341 41 -48 29 -83 69 -607 691 -52 62 -94 121 -94 131 0 52 33 202 60 271 33 86 99 204 112 200 5 -2 68 -74 142 -161z m376 -444 c85 -102 167 -194 182 -204 62 -45 81 -30 292 224 76 92 142 165 146 162 13 -8 20 -110 10 -167 -27 -170 -153 -299 -324 -334 -130 -27 -257 9 -356 102 -61 57 -116 162 -125 239 -8 57 1 165 13 164 4 0 77 -84 162 -186z' id='svg_2' fill='%23d31b1b' fill-opacity='1'/%3E %3C/g%3E%3C/g%3E%3C/svg%3E\"","var api = require(\"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!./Logs.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","import React, { Component, createRef } from \"react\";\nimport LogsFilterBar from \"./LogsFilterBar/LogsFilterBar\";\nimport \"./Logs.css\";\nimport { MasterDB } from \"mov-fe-lib-core\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport RobotLogModal from \"../Modal/RobotLogModal\";\nimport {\n  getRequestLevels,\n  getRequestTags,\n  getRequestMessage,\n  filterByFromToDates,\n  findsUniqueKey,\n  getJustDateFromServer,\n  getJustTimeFromServer\n} from \"./utils/Utils\";\nimport LogsTable from \"./LogsTable/LogsTable\";\nimport _isEqual from \"lodash/isEqual\";\nimport PropTypes from \"prop-types\";\n\nconst UI_TAG = { key: 0, label: \"ui\" };\n\nconst styles = theme => ({\n  tableContainer: {\n    flexGrow: 1,\n    minHeight: 0,\n    overflow: \"hidden\"\n  }\n});\n\nclass Logs extends Component {\n  state = {\n    selectedRobots: [],\n    levels: [\"INFO\", \"ERROR\"],\n    limit: 50,\n    logsData: [],\n    messageRegex: \"\",\n    selectedFromDate: null,\n    selectedToDate: null,\n    columns: [\"Time\", \"Robot\", \"Message\"],\n    tags: this.props.advancedMode ? [] : [UI_TAG],\n    height: 0, //LogsTable height\n    levelsList: this.props.advancedMode\n      ? [\n          { value: \"INFO\", label: \"Info\" },\n          { value: \"WARNING\", label: \"Warnings\" },\n          { value: \"DEBUG\", label: \"Debug\" },\n          { value: \"ERROR\", label: \"Error\" },\n          { value: \"CRITICAL\", label: \"Critical\" }\n        ]\n      : [\n          { value: \"INFO\", label: \"Robot Status\" },\n          { value: \"ERROR\", label: \"Alerts\" }\n        ],\n    advancedMode: this.props.advancedMode\n  };\n  logsTimeout = undefined;\n  logModal = createRef();\n\n  simpleLevelsList = [\n    { value: \"INFO\", label: \"Robot Status\" },\n    { value: \"ERROR\", label: \"Alerts\" }\n  ];\n\n  advancedLevelsList = [\n    { value: \"INFO\", label: \"Info\" },\n    { value: \"WARNING\", label: \"Warnings\" },\n    { value: \"DEBUG\", label: \"Debug\" },\n    { value: \"ERROR\", label: \"Error\" },\n    { value: \"CRITICAL\", label: \"Critical\" }\n  ];\n\n  resizeHandler() {\n    const height = this.divElement.clientHeight;\n    this.setState({ height });\n  }\n\n  componentDidMount() {\n    this.updateSelectedRobots();\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (_isEqual(prevProps.robotsData, this.props.robotsData)) return;\n    this.updateSelectedRobots();\n  }\n\n  updateSelectedRobots = () => {\n    if (\n      this.props.robotsData.length &&\n      this.props.robotsData.filter(robot => robot.ip).length\n    )\n      this.setSelectedRobots(\n        this.props.robotsData.map(elem => ({ ...elem, isSelected: true }))\n      );\n  };\n\n  componentWillUnmount() {\n    if (this.logsTimeout) {\n      clearTimeout(this.logsTimeout);\n    }\n  }\n\n  // This function is responsible to check/unckeck the list of robots\n  updateRobotSelection = robotId => {\n    const selectedRobots = [...this.state.selectedRobots];\n    const updateRobot =\n      selectedRobots[selectedRobots.findIndex(elem => elem.id === robotId)];\n    updateRobot.isSelected = !updateRobot.isSelected;\n    this.setState({ selectedRobots });\n  };\n\n  setSelectedRobots = selectedRobots => {\n    clearTimeout(this.logsTimeout);\n    this.setState({ selectedRobots });\n    this.getLogs(selectedRobots);\n  };\n\n  getLogs = async robots => {\n    await Promise.all(\n      robots\n        .filter(robot => robot.robotState !== this.props.robotStates.off) // If robot is offline doesn't bother making the request\n        .filter(robot => robot.isSelected)\n        .map(robot => this.getRobotLogData(robot))\n    ).then(dataArrays => {\n      this.setState(prevState => {\n        const finalArray = dataArrays.reduce((all, dataArray) => {\n          dataArray && dataArray.forEach(data => all.push(data));\n          return all;\n        }, []);\n        this.logsTimeout = setTimeout(\n          this.getLogs,\n          3000,\n          prevState.selectedRobots\n        );\n        return { logsData: finalArray.sort((a, b) => b.time - a.time) };\n      });\n    });\n  };\n\n  getRobotLogData = robotSelected => {\n    return new Promise((re, rej) => {\n      // Failsafe timer to prevent the promise all from hanging\n      const timeoutHandle = setTimeout(() => {\n        console.error(\"MOV.AI: One of the promises reached timeout\");\n        re([]);\n      }, 2000);\n\n      if (robotSelected.ip) {\n        const dynamicURL = `http://${\n          robotSelected.ip\n        }/api/v1/logs/?${getRequestLevels(\n          this.state.levels,\n          this.state.levelsList\n        )}&limit=${this.state.limit}${getRequestTags(\n          this.state.tags\n        )}${getRequestMessage(this.state.messageRegex)}`;\n\n        MasterDB.get(dynamicURL, (res, e) => {\n          re(res?.data || []);\n          clearTimeout(timeoutHandle);\n        });\n      } else {\n        re([]);\n      }\n    }).catch(() => console.log(\"Failed getRobotLogData\"));\n  };\n\n  onRowClick = log => {\n    this.logModal.current.open(log.rowData);\n  };\n\n  render() {\n    return (\n      <div\n        style={{\n          width: \"100%\",\n          height: \"100%\",\n          display: \"flex\",\n          flexDirection: \"column\"\n        }}\n      >\n        <div\n          style={{\n            flexGrow: \"1\",\n            height: \"100%\",\n            display: \"flex\",\n            flexDirection: \"column\"\n          }}\n        >\n          <LogsFilterBar\n            selectedRobots={this.state.selectedRobots}\n            updateRobotSelection={this.updateRobotSelection}\n            levels={this.state.levels}\n            levelsList={this.state.levelsList}\n            handleLevels={event => {\n              this.setState({ levels: event.target.value });\n            }}\n            limit={this.state.limit}\n            handleLimit={evt => {\n              if (evt.target.value === \"\") {\n                this.setState({ limit: 0 });\n              } else {\n                this.setState({ limit: evt.target.value });\n              }\n            }}\n            columns={this.state.columns}\n            columnList={this.props.columnList}\n            handleColumns={event => {\n              // make sure columns are always with the same order\n              const columns = Object.keys(this.props.columnList).filter(elem =>\n                event.target.value.includes(elem)\n              );\n              this.setState({ columns });\n            }}\n            tags={this.state.tags}\n            handleAddTag={tagText => {\n              const { tags } = this.state;\n              // Don't add tag if it's empty or duplicate\n              if (\n                tagText !== \"\" &&\n                tags.findIndex(elem => elem.label === tagText) < 0\n              ) {\n                tags.push({\n                  key: findsUniqueKey(tags, \"key\"),\n                  label: tagText\n                });\n                this.setState({ tags });\n              }\n            }}\n            handleDeleteTag={tagToDelete => {\n              const { tags } = this.state;\n              const filteredTags = tags.filter(\n                tag => tag.key !== tagToDelete.key\n              );\n              this.setState({ tags: filteredTags });\n            }}\n            messageRegex={this.state.messageRegex}\n            handleMessageRegex={text => this.setState({ messageRegex: text })}\n            selectedFromDate={this.state.selectedFromDate}\n            selectedToDate={this.state.selectedToDate}\n            handleDateChange={(newDate, keyToChange) => {\n              this.setState({ [keyToChange]: newDate });\n            }}\n            advancedMode={this.state.advancedMode}\n            handleAdvancedMode={evt => {\n              // Toggle advanced mode: change the levels\n              const advancedMode = !this.state.advancedMode;\n              this.setState({\n                advancedMode: advancedMode,\n                levelsList: this.state.advancedMode\n                  ? this.simpleLevelsList\n                  : this.advancedLevelsList,\n                tags: advancedMode ? [] : [UI_TAG]\n              });\n            }}\n          ></LogsFilterBar>\n          <div\n            ref={divElement => {\n              this.divElement = divElement;\n            }}\n            className={this.props.classes.tableContainer}\n          >\n            <LogsTable\n              columns={this.state.columns}\n              columnList={this.props.columnList}\n              logsData={filterByFromToDates(\n                this.state.logsData,\n                this.state.selectedFromDate,\n                this.state.selectedToDate\n              )}\n              height={this.state.height}\n              levelsList={this.state.levelsList}\n              onRowClick={this.onRowClick}\n            ></LogsTable>\n          </div>\n        </div>\n        <RobotLogModal\n          ref={this.logModal}\n          props={[\"module\", \"service\"]}\n        ></RobotLogModal>\n      </div>\n    );\n  }\n}\n\nLogs.propTypes = {\n  robotsData: PropTypes.array,\n  robotStates: PropTypes.object,\n  columnList: PropTypes.object,\n  advancedMode: PropTypes.bool\n};\nLogs.defaultProps = {\n  robotsData: [\n    {\n      name: \"robot\",\n      id: \"032cf6207ff34ad0a68cc45034f61b41\",\n      timestamp: 1604334778.6494586,\n      robotState: \"okay\",\n      battery: 78,\n      ip: \"127.0.0.1\"\n    },\n    {\n      name: \"robot_test\",\n      id: \"4df900e30cb44adba33ae74bb2596d88\",\n      timestamp: 1603969723.997914,\n      robotState: \"off\",\n      battery: 22,\n      ip: \"127.0.0.1\"\n    }\n  ],\n  robotStates: {\n    error: \"error\",\n    temp: \"temp\",\n    okay: \"okay\",\n    off: \"off\"\n  },\n  columnList: {\n    Date: {\n      label: \"Date\",\n      dataKey: \"time\",\n      width: 100,\n      render: time => getJustDateFromServer(time)\n    },\n    Time: {\n      label: \"Time\",\n      dataKey: \"time\",\n      width: 100,\n      render: time => getJustTimeFromServer(time)\n    },\n    Level: {\n      label: \"Level\",\n      dataKey: \"level\",\n      width: 100\n    },\n    Module: {\n      label: \"Module\",\n      dataKey: \"module\",\n      width: 100\n    },\n    Robot: {\n      label: \"Robot\",\n      dataKey: \"robot\",\n      width: 100\n    },\n    Message: {\n      label: \"Message\",\n      dataKey: \"message\",\n      width: 100\n    }\n  },\n  advancedMode: false\n};\n\nexport default withStyles(styles, { withTheme: true })(Logs);\n","import React, { Component } from \"react\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport Menu from \"@material-ui/core/Menu\";\nimport { Typography, Tooltip } from \"@material-ui/core\";\nimport { fade } from \"@material-ui/core/styles/colorManipulator\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport PropTypes from \"prop-types\";\n\nconst styles = theme => ({\n  button: {\n    margin: theme.spacing(1),\n    color: theme.palette.primary.main,\n    borderColor: theme.palette.primary.main\n  },\n  iconActive: {\n    color: theme.palette.primary.main,\n    borderColor: theme.palette.primary.main,\n    backgroundColor: fade(theme.palette.primary.main, 0.1)\n  },\n  buttonApplyFilters: {\n    background: theme.palette.primary.main,\n    fontFamily: \"Roboto\",\n    fontStyle: \"normal\",\n    fontWeight: \"bold\",\n    fontSize: \"14px\",\n    color: \"#FAFAFA\",\n    margin: \"0px 20px 10px 20px\",\n    \"&:hover\": { background: theme.palette.primary.dark }\n  },\n  icon: {\n    // fontSize: \"18px\",\n    // height: \"21px\",\n    // width: \"15px\",\n    //color: theme.palette.primary.main,\n    \"&:hover\": { cursor: \"pointer\" }\n  },\n  height: { height: \"100%\" },\n  checkbox: { marginLeft: \"10px\" },\n  limitText: {\n    width: \"50px\",\n    margin: theme.spacing(0, 3, 0, 3)\n  }\n});\n\nconst StyledMenu = withStyles(theme => ({\n  paper: {\n    // border: \"1px solid #F0F0F0\",\n    borderRadius: \"8px\",\n    width: \"242px\",\n    height: \"411px\",\n    boxShadow: \"2px 2px 4px rgba(0, 0, 0, 0.25)\"\n  }\n}))(props => (\n  <Menu\n    elevation={0}\n    getContentAnchorEl={null}\n    anchorOrigin={{\n      vertical: \"bottom\",\n      horizontal: \"center\"\n    }}\n    transformOrigin={{\n      vertical: \"top\",\n      horizontal: \"center\"\n    }}\n    autoFocus={false}\n    {...props}\n  />\n));\n\nclass FilterIcon extends Component {\n  state = { anchorEl: null, otherFilters: [] };\n\n  handleClick = event => {\n    this.setState({ anchorEl: event.currentTarget });\n  };\n\n  handleClose = () => {\n    this.setState({\n      anchorEl: null,\n      otherFilters: []\n    });\n  };\n\n  render() {\n    const { classes, t, disabled, tooltip, title } = this.props;\n    return (\n      <React.Fragment>\n        <Tooltip title={tooltip || title}>\n          <IconButton\n            size=\"small\"\n            onClick={this.handleClick}\n            disabled={disabled}\n            className={this.props.isActive ? classes.iconActive : classes.icon}\n          >\n            {this.props.icon}\n          </IconButton>\n        </Tooltip>\n        <StyledMenu\n          id=\"customized-menu\"\n          anchorEl={this.state.anchorEl}\n          open={Boolean(this.state.anchorEl)}\n          onClose={this.handleClose}\n          className={classes.height}\n        >\n          <div\n            style={{\n              display: \"flex\",\n              flexDirection: \"column\",\n              height: \"-webkit-fill-available\"\n            }}\n          >\n            <Typography\n              component=\"div\"\n              style={{\n                padding: \"10px 10px 0px 20px\",\n                display: \"flex\",\n                flexDirection: \"row\"\n              }}\n            >\n              <Typography\n                component=\"div\"\n                style={{\n                  fontSize: \"24px\",\n                  fontFamily: \"Open Sans\",\n                  fontWeight: 500\n                }}\n              >\n                {this.props.title}\n              </Typography>\n              <Typography\n                component=\"div\"\n                style={{\n                  flexGrow: 1\n                }}\n              ></Typography>\n              <Typography\n                component=\"div\"\n                onClick={this.handleClose}\n                className={classes.icon}\n              >\n                <i className=\"fas fa-times\"></i>\n              </Typography>\n            </Typography>\n            <div\n              style={{\n                flexGrow: 1,\n                display: \"flex\",\n                flexDirection: \"column\",\n                margin: \"10px 0px 0px 10px\"\n              }}\n            >\n              {this.props.children}\n            </div>\n          </div>\n        </StyledMenu>\n      </React.Fragment>\n    );\n  }\n}\n\nFilterIcon.propTypes = {\n  isActive: PropTypes.bool,\n  disabled: PropTypes.bool,\n  tooltip: PropTypes.string,\n  title: PropTypes.string\n};\n\nFilterIcon.defaultProps = {\n  isActive: false,\n  disabled: false,\n  tooltip: \"\",\n  title: \"Filters\"\n};\n\nexport default withStyles(styles, { withTheme: true })(FilterIcon);\n","import React, { memo } from \"react\";\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport SearchIcon from \"@material-ui/icons/Search\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport {\n  AppBar,\n  FormControlLabel,\n  Switch,\n  TextField,\n  Toolbar\n} from \"@material-ui/core\";\nimport ResetSearch from \"@material-ui/icons/Close\";\nimport FiltersIcon from \"./FiltersIcon/FiltersIcon\";\nimport LabelIcon from \"@material-ui/icons/Label\";\nimport Chip from \"@material-ui/core/Chip\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport TodayIcon from \"@material-ui/icons/Today\";\nimport { Typography } from \"@material-ui/core\";\nimport Input from \"@material-ui/core/Input\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport Select from \"@material-ui/core/Select\";\nimport SettingsIcon from \"@material-ui/icons/Settings\";\nimport Checkbox from \"@material-ui/core/Checkbox\";\nimport {\n  KeyboardDateTimePicker,\n  MuiPickersUtilsProvider\n} from \"@material-ui/pickers\";\nimport DateFnsUtils from \"@date-io/date-fns\";\nimport PropTypes from \"prop-types\";\nimport _isEqual from \"lodash/isEqual\";\nimport _get from \"lodash/get\";\n\nconst useStyles = makeStyles(theme => ({\n  input: {\n    flex: 1,\n    paddingLeft: \"10px\",\n    fontSize: \"medium\"\n  },\n  searchText: {\n    minWidth: 150,\n    paddingLeft: theme.spacing(3)\n  },\n  addTagText: {\n    width: \"100%\"\n  },\n  limitText: {\n    width: \"50px\",\n    margin: theme.spacing(0, 3, 0, 3)\n  },\n  toggleContainer: {\n    margin: theme.spacing(2)\n  },\n  tagsContainer: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    padding: theme.spacing(0.5),\n    margin: theme.spacing(0, 3, 0, 3)\n  },\n  tagsList: {\n    marginTop: theme.spacing(3)\n  },\n  chip: {\n    margin: theme.spacing(0.5)\n  },\n  formControl: {\n    margin: theme.spacing(1),\n    minWidth: 120,\n    maxWidth: 300\n  },\n  filtersButton: {\n    display: \"flex\",\n    flexDirection: \"row\"\n  },\n  columnsFilter: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    marginTop: 6\n  },\n  iconButton: {\n    color: \"#0B6A8A\",\n    \"&:hover\": {\n      color: \"#22c7ff\"\n    }\n  }\n}));\n\nconst LogsFilterBar = props => {\n  const classes = useStyles();\n  const [tagText, setTagText] = React.useState(\"\");\n\n  const handleRobotChange = event => {\n    const arrayEvent = event?.target?.value;\n    const selectedId = arrayEvent[arrayEvent.length - 1];\n    props.updateRobotSelection(selectedId);\n  };\n  const getRobotSelector = () => {\n    return (\n      <div className={classes.toggleContainer}>\n        <svg\n          width=\"20\"\n          height=\"18\"\n          viewBox=\"0 0 30 27\"\n          fill=\"none\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n          style={{ paddingTop: \"5px\", paddingRight: \"5px\" }}\n        >\n          <path\n            fillRule=\"evenodd\"\n            clipRule=\"evenodd\"\n            d=\"M16.7753 1.35706L15.9587 2.61119L16.3648 2.87846L18.4001 4.18898L17.1052 6.20016H25.437C26.5487 6.20016 27.45 7.10137 27.45 8.21307V12.8244H28.0955C28.6514 12.8244 29.102 13.275 29.102 13.8308V16.0643C29.102 16.6201 28.6514 17.0707 28.0955 17.0707H27.45V21.2901C27.45 22.4018 26.5487 23.303 25.437 23.303H4.12161C3.00991 23.303 2.1087 22.4017 2.1087 21.29V17.0707H1.42467C0.868819 17.0707 0.418213 16.6201 0.418213 16.0643V13.8308C0.418213 13.275 0.868819 12.8244 1.42467 12.8244H2.1087V8.21307C2.1087 7.10137 3.00991 6.20016 4.12161 6.20016H13.5141L14.8252 4.16395L13.2875 3.15192L13.2966 3.13812L13.2875 3.1322L15.1377 0.290771L16.7753 1.35706ZM24.4306 9.21953H5.12807V20.2836H24.4306V9.21953ZM7.18098 12.1324C6.68518 12.1324 6.28325 12.5343 6.28325 13.0301C6.28325 13.5259 6.68518 13.9278 7.18098 13.9278H9.04635C9.54216 13.9278 9.94409 13.5259 9.94409 13.0301C9.94409 12.5343 9.54216 12.1324 9.04635 12.1324H7.18098ZM20.6901 12.1324C20.1943 12.1324 19.7924 12.5343 19.7924 13.0301C19.7924 13.5259 20.1943 13.9278 20.6901 13.9278H22.5555C23.0513 13.9278 23.4532 13.5259 23.4532 13.0301C23.4532 12.5343 23.0513 12.1324 22.5555 12.1324H20.6901ZM9.17669 17.6512H11.3239V19.253H9.17669V17.6512ZM14.3432 17.6513H12.196V19.253H14.3432V17.6513ZM15.2154 17.6513H17.3626V19.253H15.2154V17.6513ZM20.382 17.6513H18.2348V19.253H20.382V17.6513ZM10.9568 23.69H18.6019V25.7029C18.6019 26.2587 18.1513 26.7093 17.5954 26.7093H11.9632C11.4074 26.7093 10.9568 26.2587 10.9568 25.7029V23.69Z\"\n            fill=\"#9E9E9E\"\n          />\n        </svg>\n        <FormControl className={classes.formControl}>\n          <Select\n            labelId=\"select-label\"\n            id=\"select\"\n            multiple\n            value={props.selectedRobots}\n            onChange={handleRobotChange}\n            renderValue={selected => {\n              const selectedNames = selected\n                .filter(({ isSelected }) => isSelected)\n                .map(({ name }) => name);\n              return selectedNames.length > 2\n                ? [selectedNames[0], selectedNames[1]].join(\" , \") + \"...\"\n                : selectedNames.join(\" , \");\n            }}\n            input={<Input />}\n            MenuProps={MenuProps}\n          >\n            {/* <MenuItem key={`robotList-Default`} value={robotDefault}>\n              Default\n            </MenuItem> */}\n            {props.selectedRobots.map((robot, robotIndex) => {\n              return (\n                <MenuItem key={`robotList-${robotIndex}`} value={robot.id}>\n                  <Checkbox checked={robot.isSelected} />\n                  <ListItemText primary={robot.name} />\n                </MenuItem>\n              );\n            })}\n          </Select>\n        </FormControl>\n      </div>\n    );\n  };\n\n  const getSearchInput = () => {\n    return (\n      <TextField\n        className={classes.searchText}\n        label=\"\"\n        placeholder=\"Search (regex)\"\n        value={props.messageRegex}\n        onChange={evt => props.handleMessageRegex(evt.target.value)}\n        InputProps={{\n          startAdornment: (\n            <InputAdornment style={{ paddingRight: 8 }}>\n              <SearchIcon fontSize=\"small\" />\n            </InputAdornment>\n          ),\n          endAdornment: (\n            <InputAdornment position=\"end\">\n              <IconButton\n                disabled={!props.messageRegex}\n                onClick={() => props.handleMessageRegex(\"\")}\n              >\n                <ResetSearch color=\"inherit\" fontSize=\"small\" />\n              </IconButton>\n            </InputAdornment>\n          )\n        }}\n        size=\"small\"\n      />\n    );\n  };\n\n  const getLevels = () => {\n    return (\n      <div className={classes.toggleContainer}>\n        <FormControl className={classes.formControl}>\n          <Select\n            labelId=\"demo-mutiple-checkbox-label\"\n            id=\"demo-mutiple-checkbox\"\n            style={{ minWidth: \"290px\" }}\n            multiple\n            value={props.levels}\n            onChange={props.handleLevels}\n            input={<Input />}\n            renderValue={selected => {\n              // selected comes from state, for example [\"ERROR\", \"INFO\"]\n              // but want to show the lables, for example [\"Alerts\", \"State of Robot\"]\n              const labels = props.levelsList\n                .filter(level => selected.includes(level.value))\n                .map(elem => elem.label);\n              return labels.join(\", \");\n            }}\n            MenuProps={MenuProps}\n          >\n            {props.levelsList.map(level => (\n              <MenuItem key={level.value} value={level.value}>\n                <Checkbox checked={props.levels.indexOf(level.value) > -1} />\n                <ListItemText primary={level.label} />\n              </MenuItem>\n            ))}\n          </Select>\n        </FormControl>\n      </div>\n    );\n  };\n\n  const getTags = isAdvancedMode => {\n    return (\n      <FiltersIcon\n        icon={<LabelIcon></LabelIcon>}\n        title=\"Tags\"\n        disabled={!isAdvancedMode}\n        isActive={props.tags.length > 0}\n      >\n        <div className={classes.tagsContainer}>\n          <TextField\n            className={classes.addTagText}\n            value={tagText}\n            onChange={evt => setTagText(evt.target.value)}\n            onKeyUp={event => {\n              // User pressed Enter\n              if (event.keyCode === 13) {\n                props.handleAddTag(tagText);\n                setTagText(\"\");\n              }\n            }}\n            label=\"Add Tag\"\n            InputProps={{\n              endAdornment: (\n                <InputAdornment>\n                  <IconButton\n                    onClick={() => {\n                      props.handleAddTag(tagText);\n                      setTagText(\"\");\n                    }}\n                  >\n                    <AddIcon />\n                  </IconButton>\n                </InputAdornment>\n              )\n            }}\n            size=\"small\"\n          />\n          <div className={classes.tagsList}>\n            {props.tags.map(data => {\n              return (\n                <li key={data.key}>\n                  <Chip\n                    label={data.label}\n                    onDelete={() => props.handleDeleteTag(data)}\n                    className={classes.chip}\n                    size=\"small\"\n                  />\n                </li>\n              );\n            })}\n          </div>\n        </div>\n      </FiltersIcon>\n    );\n  };\n\n  const getTimeFilters = () => {\n    return (\n      <FiltersIcon\n        icon={<TodayIcon></TodayIcon>}\n        title={props.t(\"Date Range\")}\n        isActive={\n          props.selectedFromDate !== null || props.selectedToDate !== null\n        }\n      >\n        {/* From -> To Date */}\n        <MuiPickersUtilsProvider utils={DateFnsUtils}>\n          <KeyboardDateTimePicker\n            key=\"time-picker\"\n            size=\"small\"\n            variant=\"inline\"\n            ampm={false}\n            label={props.t(\"From date\")}\n            value={props.selectedFromDate}\n            onChange={newDate =>\n              props.handleDateChange(newDate, \"selectedFromDate\")\n            }\n            onError={console.log}\n            format=\"yyyy/MM/dd HH:mm\"\n          />\n          <KeyboardDateTimePicker\n            key=\"time-picker2\"\n            size=\"small\"\n            variant=\"inline\"\n            ampm={false}\n            label={props.t(\"To date\")}\n            value={props.selectedToDate}\n            onChange={newDate =>\n              props.handleDateChange(newDate, \"selectedToDate\")\n            }\n            onError={console.log}\n            format=\"yyyy/MM/dd HH:mm\"\n          />\n        </MuiPickersUtilsProvider>\n      </FiltersIcon>\n    );\n  };\n\n  const getSettings = () => {\n    return (\n      <FiltersIcon\n        icon={<SettingsIcon></SettingsIcon>}\n        title={props.t(\"Configuration\")}\n      >\n        {/* Advanced/Simple Mode */}\n        <FormControlLabel\n          control={\n            <Switch\n              checked={props.advancedMode}\n              onChange={props.handleAdvancedMode}\n            />\n          }\n          label={props.advancedMode ? \"Advanced\" : \"Simple\"}\n        />\n        <div className={classes.filtersButton}>\n          {/* Limit Input */}\n          <Typography\n            component=\"div\"\n            style={{\n              fontSize: \"1rem\",\n              fontFamily: \"Open Sans\",\n              fontWeight: 500\n            }}\n          >\n            {`${props.t(\"Limit p/Robot\")}:`}\n          </Typography>\n          <TextField\n            value={props.limit}\n            onChange={props.handleLimit}\n            className={classes.limitText}\n            id=\"outlined-number\"\n            // label=\"limit\"\n            placeholder={props.t(\"limit\")}\n            type=\"number\"\n            InputLabelProps={{\n              shrink: true\n            }}\n            // variant=\"outlined\"\n            size=\"small\"\n          />\n        </div>\n        <div className={classes.columnsFilter}>\n          {/* Limit Input */}\n          <Typography\n            component=\"div\"\n            style={{\n              fontSize: \"1rem\",\n              fontFamily: \"Open Sans\",\n              fontWeight: 500\n            }}\n          >\n            {`${props.t(\"Columns\")}:`}\n          </Typography>\n          <FormControl className={classes.formControl}>\n            <Select\n              labelId=\"demo-mutiple-checkbox-label\"\n              id=\"demo-mutiple-checkbox\"\n              multiple\n              value={props.columns}\n              onChange={props.handleColumns}\n              input={<Input />}\n              renderValue={selected =>\n                selected\n                  .map(elem => _get(props, `columnList[${elem}].label`, \"\"))\n                  .join(`, `)\n              }\n              MenuProps={MenuProps}\n            >\n              {Object.keys(props.columnList).map((column, index) => {\n                return (\n                  <MenuItem key={index} value={column}>\n                    <Checkbox checked={props.columns.indexOf(column) > -1} />\n                    <ListItemText primary={props.columnList[column].label} />\n                  </MenuItem>\n                );\n              })}\n            </Select>\n          </FormControl>\n        </div>\n      </FiltersIcon>\n    );\n  };\n\n  return (\n    <AppBar position=\"static\" color=\"inherit\">\n      <Toolbar variant=\"dense\">\n        {getRobotSelector()}\n        {/* Search Input */}\n        {getSearchInput()}\n        {/* Toggle: INFO, DEBUG, ERROR, CRITICAL */}\n        {getLevels()}\n        {/* Tags */}\n        {getTags(props.advancedMode)}\n        {/* Date time filter */}\n        {getTimeFilters()}\n        <div style={{ flexGrow: 1 }}></div>\n        {getSettings()}\n      </Toolbar>\n    </AppBar>\n  );\n};\n\nconst ITEM_HEIGHT = 48;\nconst ITEM_PADDING_TOP = 8;\nconst MenuProps = {\n  PaperProps: {\n    style: {\n      maxHeight: ITEM_HEIGHT * 4.5 + ITEM_PADDING_TOP,\n      width: 250\n    }\n  },\n  getContentAnchorEl: null\n};\n\nLogsFilterBar.propTypes = {\n  levels: PropTypes.array,\n  levelsList: PropTypes.array,\n  handleLevels: PropTypes.func,\n  limit: PropTypes.number,\n  handleLimit: PropTypes.func,\n  columns: PropTypes.array,\n  columnList: PropTypes.object,\n  handleColumns: PropTypes.func,\n  handleDeleteTag: PropTypes.func,\n  messageRegex: PropTypes.string,\n  handleMessageRegex: PropTypes.func,\n  selectedFromDate: PropTypes.string,\n  selectToDate: PropTypes.string,\n  handleDateChange: PropTypes.func,\n  selectedRobots: PropTypes.array,\n  updateRobotSelection: PropTypes.func,\n  advancedMode: PropTypes.bool,\n  handleAdvancedMode: PropTypes.func,\n  t: PropTypes.func\n};\n\nLogsFilterBar.defaultProps = {\n  levels: [],\n  levelsList: [],\n  handleLevels: () => {},\n  limit: 1,\n  handleLimit: () => {},\n  columns: [],\n  columnList: {},\n  handleColumns: () => {},\n  handleDeleteTag: () => {},\n  messageRegex: \"\",\n  handleMessageRegex: () => {},\n  selectedFromDate: \"\",\n  selectToDate: \"\",\n  handleDateChange: () => {},\n  selectedRobots: [],\n  updateRobotSelection: () => {},\n  advancedMode: false,\n  handleAdvancedMode: () => {},\n  t: string => string\n};\n\n//The function returns true when the compared props equal, preventing the component from re-rendering\nfunction arePropsEqual(prevProps, nextProps) {\n  return _isEqual(prevProps, nextProps);\n}\n\nexport default memo(LogsFilterBar, arePropsEqual);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport clsx from \"clsx\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport { AutoSizer, Column, Table } from \"react-virtualized\";\nimport { colorCoding } from \"../utils/Utils\";\n\nconst useStyles = makeStyles(theme => {\n  return {\n    flexContainer: {\n      display: \"flex\",\n      alignItems: \"center\",\n      boxSizing: \"border-box\"\n    },\n    table: {\n      // temporary right-to-left patch, waiting for\n      // // https://github.com/bvaughn/react-virtualized/issues/454\n      \"& .ReactVirtualized__Table__headerRow\": {\n        flip: false,\n        paddingRight: theme.direction === \"rtl\" ? \"0 !important\" : undefined\n      }\n    },\n    tableRow: {\n      cursor: \"pointer\"\n    },\n    tableRowHover: {\n      \"&:hover\": {\n        backgroundColor: \"rgba(0, 5, 58, 0.3)\"\n      }\n    },\n    tableCell: {\n      flexGrow: 1,\n      whiteSpace: \"nowrap\",\n      overflow: \"hidden\",\n      textOverflow: \"ellipsis\",\n      display: \"inline-block\"\n    },\n    flexColumn: {\n      flex: 1,\n      alignItems: \"center\"\n    },\n    noClick: {\n      cursor: \"initial\"\n    },\n    ...colorCoding\n  };\n});\n\nconst MuiVirtualizedTable = props => {\n  const { columns, rowHeight, headerHeight, onRowClick, ...tableProps } = props;\n  const classes = useStyles();\n\n  const getRowClassName = ({ index }) => {\n    const { data } = props;\n    const rowData = data[index];\n    return clsx(\n      classes.tableRow,\n      classes.flexContainer,\n      index !== -1 && classes[rowData.level],\n      {\n        [classes.tableRowHover]: index !== -1 && onRowClick != null\n      }\n    );\n  };\n\n  const cellRenderer = render => ({ cellData, columnIndex }) => {\n    return (\n      <TableCell\n        component=\"div\"\n        className={`${classes.tableCell} ${classes.flexContainer}`}\n        variant=\"body\"\n        style={{ height: rowHeight }}\n        align={\n          (columnIndex != null && columns[columnIndex].numeric) || false\n            ? \"right\"\n            : \"left\"\n        }\n      >\n        {render ? render(cellData) : cellData}\n      </TableCell>\n    );\n  };\n\n  const headerRenderer = ({ label, columnIndex }) => {\n    return (\n      <TableCell\n        component=\"div\"\n        className={clsx(\n          classes.tableCell,\n          classes.flexContainer,\n          classes.noClick\n        )}\n        variant=\"head\"\n        style={{ height: headerHeight }}\n        align={columns[columnIndex].numeric || false ? \"right\" : \"left\"}\n      >\n        <span>{label}</span>\n      </TableCell>\n    );\n  };\n\n  return (\n    <AutoSizer>\n      {({ height, width }) => (\n        <Table\n          height={height}\n          width={width}\n          onRowClick={onRowClick}\n          rowHeight={rowHeight}\n          gridStyle={{\n            direction: \"inherit\"\n          }}\n          headerHeight={headerHeight}\n          className={classes.table}\n          {...tableProps}\n          rowClassName={getRowClassName}\n        >\n          {columns.map(({ dataKey, render, ...other }, index) => {\n            return (\n              <Column\n                key={dataKey}\n                headerRenderer={headerProps => {\n                  return headerRenderer({\n                    ...headerProps,\n                    columnIndex: index\n                  });\n                }}\n                flexGrow={dataKey === \"message\" ? 1 : undefined}\n                className={classes.flexContainer}\n                cellRenderer={cellRenderer(render)}\n                dataKey={dataKey}\n                {...other}\n              />\n            );\n          })}\n        </Table>\n      )}\n    </AutoSizer>\n  );\n};\n\n// const VirtualizedTable = withStyles(styles)(MuiVirtualizedTable);\n\nexport default function LogsTable(props) {\n  return (\n    <MuiVirtualizedTable\n      rowHeight={48}\n      headerHeight={48}\n      rowCount={props.logsData.length}\n      rowGetter={({ index }) => props.logsData[index]}\n      data={props.logsData}\n      columns={props.columns.map(elem => props.columnList[elem])}\n      onRowClick={props.onRowClick}\n    />\n  );\n}\n\nLogsTable.propTypes = {\n  columns: PropTypes.array,\n  columnList: PropTypes.object,\n  logsData: PropTypes.array,\n  height: PropTypes.number,\n  onRowClick: PropTypes.func\n};\n\nLogsTable.defaultProps = {\n  columns: [],\n  columnList: {},\n  logsData: [],\n  height: 10\n};\n","import React from \"react\";\nimport _isEmpty from \"lodash/isEmpty\";\n\n// export const levels = [\n//   { value: \"INFO\", label: i18n.t(\"Robot Status\") },\n//   // { value: \"WARNING\", label: \"Warnings\" },\n//   // { value: \"DEBUG\", label: \"Debug\" },\n//   { value: \"ERROR\", label: i18n.t(\"Alerts\") }\n//   // { value: \"CRITICAL\", label: \"Critical\" }\n// ];\n\nexport const colorCoding = {\n  INFO: {\n    backgroundColor: \"rgba(33, 150, 243, 0.1)\"\n  },\n  WARNING: {\n    backgroundColor: \"rgba(255, 152, 0, 0.1)\"\n  },\n  DEBUG: {\n    backgroundColor: \"rgba(76, 175, 80, 0.1)\"\n  },\n  ERROR: {\n    backgroundColor: \"rgba(244, 67, 54, 0.1)\"\n  },\n  CRITICAL: {\n    backgroundColor: \"rgba(255, 19, 1, 0.1)\"\n  }\n};\n\n// export const fixedColumns = {\n//   Date: {\n//     label: i18n.t(\"Date\"),\n//     dataKey: \"time\",\n//     width: 100,\n//     render: time => getJustDateFromServer(time)\n//   },\n//   Time: {\n//     label: i18n.t(\"Time\"),\n//     dataKey: \"time\",\n//     render: time => getJustTimeFromServer(time),\n//     width: 100\n//   },\n//   Level: {\n//     label: i18n.t(\"Level\"),\n//     dataKey: \"level\",\n//     width: 100\n//   },\n//   Module: {\n//     label: i18n.t(\"Module\"),\n//     dataKey: \"module\",\n//     width: 100\n//   },\n//   Function: {\n//     label: \"Function\",\n//     dataKey: \"funcName\",\n//     width: 100\n//   },\n//   Callback: {\n//     label: i18n.t(\"Callback\"),\n//     dataKey: \"callback\",\n//     width: 100\n//   },\n//   Node: {\n//     label: i18n.t(\"Node\"),\n//     dataKey: \"node\",\n//     width: 100\n//   },\n//   Fleet: {\n//     label: i18n.t(\"Fleet\"),\n//     dataKey: \"fleet\",\n//     width: 100\n//   },\n//   Robot: {\n//     label: i18n.t(\"Robot\"),\n//     dataKey: \"robot\",\n//     width: 100\n//   },\n//   Message: {\n//     label: i18n.t(\"Message\"),\n//     dataKey: \"message\",\n//     width: 100\n//   }\n// };\n\n// Makes sure to find unique \"i\" of chip array\n// Input: [{key: 0, label: \"Chip1\"}, {key: 2, label: \"Chip3\"}], keyName= \"key\"\n// Output: 1\nexport function findsUniqueKey(array, keyName) {\n  const length = array.length;\n  // If empty, return 0\n  if (length === 0 || array === undefined) {\n    return 0;\n  }\n  for (let k = 0; k < length; k++) {\n    for (let j = 0; j < length; j++) {\n      if (k === array[j][keyName]) {\n        break;\n      }\n      if (j === length - 1) {\n        return k;\n      }\n    }\n  }\n\n  return length;\n}\n\n// Converts the levels in the state for the string for the request\n//  Input: [\"INFO\", \"DEBUG\"]\n//  Output: \"level=info,debug\"\nexport function getRequestLevels(levelsArray, levelsList) {\n  let res = \"\";\n  if (Array.isArray(levelsArray) && levelsArray.length === levelsList.length) {\n    return res;\n  }\n\n  try {\n    levelsArray.forEach(level => {\n      if (res === \"\") {\n        res = `${level.toLowerCase()}`;\n      } else {\n        res = `${res},${level.toLowerCase()}`;\n      }\n    });\n    return `level=${res}`;\n  } catch (error) {\n    return \"\";\n  }\n}\n// Converts the levels in the state for the string for the request\n//  Input: [{ key: 0, label: \"UI\" }, { key: 1, label: \"TASKS\" }]\n//  Output: \"&tags=UI,TASKS\"\nexport function getRequestTags(tagsArray) {\n  let res = \"\";\n\n  if (_isEmpty(tagsArray)) {\n    return res;\n  }\n\n  tagsArray.forEach(tag => {\n    if (res === \"\") {\n      res = `${tag.label}`;\n    } else {\n      res = `${res},${tag.label}`;\n    }\n  });\n\n  return `&tags=${res}`;\n}\n// Converts the levels in the state for the string for the request\n//  Input: \"r'started\\.$\"\n//  Output: \"&message=r'started\\.$\"\nexport function getRequestMessage(message) {\n  if (!message || message === \"\") {\n    return \"\";\n  }\n  // Parse message to URL and return\n  const parsedMessageToUrl = message.replace(/ /g, \"+\");\n  return `&message=${parsedMessageToUrl}`;\n}\n\n// Convert Date format to a human readable format\n// Input: 1586370146\n// Output: \"08/04/2020 19:22:26\"\nexport const getTimeFromServer = serverTime => {\n  const time = new Date(serverTime * 1000);\n  return `${time.toLocaleString(\"pt\")}`;\n};\n// Convert Date format to a human readable format\n// Input: 1586370146\n// Output: \"08/04/2020\"\nexport const getJustDateFromServer = serverTime => {\n  const time = new Date(serverTime * 1000);\n  return `${time.toLocaleDateString(\"pt\")}`;\n};\n// Convert Date format to a human readable format\n// Input: 1586370146\n// Output: \"19:22:26\"\nexport const getJustTimeFromServer = serverTime => {\n  const time = new Date(serverTime * 1000);\n  return `${time.toLocaleTimeString(\"pt\")}`;\n};\n\n// Convert array of object to array of strings for LogList\n// Input:\n// [\n//   {\n//     time: 1586370146,\n//     level: \"INFO\",\n//     message: \"UI Tag Log Test: 12\"\n//   },\n//   {\n//     time: 1586370147,\n//     level: \"INFO\",\n//     message: \"UI Tag Log Test: 13\"\n//   }\n// ];\n// Output\n// [\n//   \"[08/04/2020 19:22:26] [INFO] : UI Tag Log Test: 12\",\n//   \"[08/04/2020 19:21:31] [INFO] : UI Tag Log Test: 56\"\n// ];\n\nexport const formatLogsData = data => {\n  return data.map(\n    elem => elem.stdout\n    // `[${getTimeFromServer(elem.time)}] [${elem.level}] : ${elem.message}`\n  );\n};\n\nfunction binaryIndexOf(data, criteria) {\n  var minIndex = 0;\n  var maxIndex = data.length - 1;\n  var currentIndex;\n  var currentElement;\n  var result = null;\n\n  while (minIndex <= maxIndex) {\n    currentIndex = ((minIndex + maxIndex) / 2) | 0;\n    currentElement = data[currentIndex];\n    var comparison = criteria(currentElement);\n\n    if (comparison[0] === \"right\") {\n      minIndex = currentIndex + 1;\n    } else {\n      maxIndex = currentIndex - 1;\n    }\n\n    if (comparison[1]) {\n      result = currentIndex;\n    }\n  }\n\n  return result;\n}\n\nexport const filterByFromToDates = (logsData, fromDate, toDate) => {\n  // If there is a problem fetching the logs, show nothing\n  if (!logsData) {\n    return [];\n  }\n\n  let lowerIndex = 0;\n  let upperIndex = logsData.length;\n\n  // If nothing is selected, do nothing\n  if (!fromDate && !toDate) {\n    return logsData;\n  }\n\n  // List of time format. Array is sorted in descending order (Newer -> Older)\n  const dateList = logsData.map(log => log.time);\n  if (toDate) {\n    // First log that is <= toDate (first index that fits criteria)\n    lowerIndex = binaryIndexOf(dateList, function (value) {\n      return value >= toDate.getTime() / 1000\n        ? [\"right\", false]\n        : [\"left\", true];\n    });\n  }\n  if (fromDate) {\n    // First log that is >= fromDate (last index that still fits criteria)\n    upperIndex = binaryIndexOf(dateList, function (value) {\n      return value <= fromDate.getTime() / 1000\n        ? [\"left\", false]\n        : [\"right\", true];\n    });\n  }\n  return logsData.slice(lowerIndex, upperIndex + 1);\n};\n\n// This function is to get the same string as the one you get in\n// Robot:Status nodes_lchd and persistent_nodes_lchd\nexport const addNestedName = (nestedName, newName) => {\n  if (nestedName === \"\") {\n    return newName;\n  } else {\n    return `${nestedName}__${newName}`;\n  }\n};\n\n// Will update according with the list of running nodes all the nodes to running or stopped\nexport const updateRunningNodes = (treeList, runningNodesList) => {\n  return treeList.map(elem => {\n    // Only update the status of nodes, not containers\n    if (elem.status) {\n      if (runningNodesList.includes(elem.nestedName)) {\n        return { ...elem, status: \"running\" };\n      } else {\n        return { ...elem, status: \"stopped\" };\n      }\n    } else {\n      return elem;\n    }\n  });\n};\n\n// This will remove the deleted container from the treeList and its respective children\nexport const removeDeleteContainer = (treeList, id) => {\n  // Get the id of the Container to remove\n  const deleteIndex = treeList.findIndex(elem => elem.id === id);\n  treeList.splice(deleteIndex, 1);\n  // Remove children: find all children with parentId that is the id\n  for (let i = 0; i < treeList.length; i++) {\n    if (treeList[i].parentId === id) {\n      removeDeleteContainer(treeList, treeList[i].id);\n    }\n  }\n};\n\n// Detects if there are loops within nested containers\n// Returns true if it finds a loop, false otherwise\nexport const detectContainerLoop = (treeList, parentId, flowId) => {\n  // If first level there are no loops\n  if (parentId === 0) {\n    return false;\n  }\n  // index of container to add\n  let flowIndex = treeList.findIndex(elem => elem.id === parentId);\n  let currentFlow = treeList[flowIndex];\n  // Stop when reaches the root of the tree\n  while (currentFlow.parentId) {\n    // get the parentId of the current container\n    const parentId = currentFlow.parentId;\n    // get the index of that parent in the array\n    flowIndex = treeList.findIndex(elem => elem.id === parentId);\n    currentFlow = treeList[flowIndex];\n    if (currentFlow.flowId === flowId) {\n      console.error(\"Found Flow Loop :0\");\n      return true;\n    }\n  }\n  return false;\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport CloseIcon from \"@material-ui/icons/Close\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport _debounce from \"lodash/debounce\";\nimport {\n  Card,\n  Typography,\n  CardContent,\n  Divider,\n  Button,\n  CardActions,\n  Modal\n} from \"@material-ui/core\";\nimport i18n from \"../../i18n/i18n.js\";\n\nconst useStyles = makeStyles(theme => {\n  return {\n    card: {\n      margin: \"auto\",\n      position: \"absolute\",\n      overflow: \"auto\",\n      display: \"flex\",\n      flexDirection: \"column\",\n      maxHeight: \"98%\"\n    },\n    closeButton: {\n      cursor: \"pointer\",\n      position: \"absolute\",\n      color: theme.textColor,\n      top: 15,\n      right: 15,\n      \"&:hover\": {\n        color: \"gray\"\n      }\n    }\n  };\n});\n\nconst AbstractModal = props => {\n  const classes = useStyles();\n\n  const debounceSubmit = _debounce(() => {\n    props.onSubmit();\n  }, 50);\n\n  const onKeyPress = e => {\n    if (e.key === \"Enter\") {\n      submit();\n    }\n  };\n\n  const submit = () => {\n    debounceSubmit();\n  };\n\n  const cancel = () => {\n    props.onCancel();\n  };\n\n  return (\n    <Modal\n      onKeyPress={onKeyPress}\n      open={props.open}\n      onClose={cancel}\n      style={{\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\"\n      }}\n    >\n      <Card\n        className={classes.card}\n        style={{\n          ...props.style,\n          minWidth: props.width,\n          minHeight: props.height\n        }}\n      >\n        <CardContent\n          style={{\n            flexGrow: 1,\n            maxHeight: \"calc(100% - 70px)\",\n            overflowY: \"auto\"\n          }}\n        >\n          <Typography variant=\"h5\">{props.title}</Typography>\n          <Typography\n            component=\"div\"\n            className={classes.closeButton}\n            onClick={() => props.onCancel()}\n          >\n            <CloseIcon></CloseIcon>\n          </Typography>\n          <Divider style={{ marginBottom: \"12px\" }} />\n          <div\n            style={{\n              maxHeight: \"calc(100% - 35px)\",\n              overflowY: \"auto\",\n              paddingTop: 5\n            }}\n          >\n            {props.children}\n          </div>\n        </CardContent>\n        <Divider />\n        <CardActions>\n          {props.hasSubmitButton && (\n            <Button color={props.submitColor} onClick={submit}>\n              {`${i18n.t(props.submitText)}`}\n            </Button>\n          )}\n          {props.hasCancelButton && (\n            <Button onClick={cancel} color={props.cancelColor}>\n              {`${i18n.t(props.cancelText)}`}\n            </Button>\n          )}\n        </CardActions>\n      </Card>\n    </Modal>\n  );\n};\n\nAbstractModal.propTypes = {\n  onSubmit: PropTypes.func,\n  onCancel: PropTypes.func,\n  open: PropTypes.bool,\n  title: PropTypes.string,\n  submitText: PropTypes.string,\n  submitColor: PropTypes.string,\n  cancelText: PropTypes.string,\n  cancelColor: PropTypes.string,\n  width: PropTypes.string,\n  height: PropTypes.string,\n  style: PropTypes.object,\n  hasSubmitButton: PropTypes.bool,\n  hasCancelButton: PropTypes.bool\n};\n\nAbstractModal.defaultProps = {\n  onSubmit: () => {},\n  onCancel: () => {},\n  open: false,\n  title: \"New\",\n  submitText: \"Confirm\",\n  submitColor: \"primary\",\n  cancelText: \"Cancel\",\n  cancelColor: \"secondary\",\n  width: \"25%\",\n  height: \"25%\",\n  style: {},\n  hasSubmitButton: true,\n  hasCancelButton: true\n};\n\nexport default AbstractModal;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport AbstractModal from \"./AbstractModal\";\n\nconst ConfirmAlertModal = props => {\n  return (\n    <AbstractModal\n      onSubmit={props.onSubmit}\n      onCancel={props.onCancel}\n      open={props.open}\n      title={props.title}\n      submitText={props.submitText}\n      submitColor={props.submitColor}\n      cancelText={props.cancelText}\n      cancelColor={props.cancelColor}\n    >\n      <div>{props.message}</div>\n      <div>{props.children}</div>\n    </AbstractModal>\n  );\n};\n\nConfirmAlertModal.propTypes = {\n  title: PropTypes.string,\n  message: PropTypes.string,\n  onSubmit: PropTypes.func,\n  onCancel: PropTypes.func,\n  open: PropTypes.bool,\n  submitText: PropTypes.string,\n  submitColor: PropTypes.string,\n  cancelText: PropTypes.string,\n  cancelColor: PropTypes.string\n};\n\nConfirmAlertModal.defaultProps = {\n  title: \"Insert Text here\",\n  message: \"Are you sure?\",\n  onSubmit: () => {},\n  onCancel: () => {},\n  open: false,\n  submitText: \"Delete\",\n  submitColor: \"secondary\",\n  cancelText: \"Cancel\",\n  cancelColor: \"primary\"\n};\n\nexport default ConfirmAlertModal;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport List from \"@material-ui/core/List\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport Divider from \"@material-ui/core/Divider\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { ListItem, ListItemAvatar, ListItemText } from \"@material-ui/core\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport ScheduleIcon from \"@material-ui/icons/Schedule\";\nimport WarningIcon from \"@material-ui/icons/Warning\";\nimport ViewModuleIcon from \"@material-ui/icons/ViewModule\";\nimport ChatIcon from \"@material-ui/icons/Chat\";\nimport { MasterDB } from \"mov-fe-lib-core\";\nimport AbstractModal from \"./AbstractModal\";\n\nconst styles = theme => ({\n  breakWord: {\n    wordBreak: \"break-all\"\n  }\n});\n\nclass RobotLogModal extends Component {\n  state = {\n    data: {},\n    open: false,\n    hasButton: false\n  };\n\n  open = alert => {\n    const { data } = this.state;\n    // Format time\n    const time = new Date(alert.time * 1000);\n    const alertButton = alert.button\n      ? JSON.parse(alert.button.replace(/'/g, '\"'))\n      : null;\n    data.time = `${time.toLocaleTimeString(\"pt\")}`;\n    data.action = alert.action;\n    data.message = alert.message;\n    data.robot = alert.robot;\n    data.service = alert.service;\n    data.module = alert.module;\n    if (alertButton) {\n      data.buttonText = alertButton.label;\n      data.buttonAction = this.getRobotAlertAction(alertButton);\n    }\n    // Update state variables\n    this.setState({\n      data,\n      open: true,\n      hasButton: !!alertButton\n    });\n  };\n\n  getRobotAlertAction = ({ callback, data }) => {\n    // Trigger callback to clear log\n    if (callback) {\n      return () => {\n        MasterDB.cloudFunction(callback, \"\", data, res => {\n          this.setState({ open: false });\n        });\n      };\n    }\n    // Default case (just close modal)\n    else {\n      return () => this.setState({ open: false });\n    }\n  };\n\n  renderAlertInfo = () => {\n    const { data } = this.state;\n    const { props, classes } = this.props;\n    return (\n      <Typography component=\"div\">\n        <List style={{ width: \"100%\" }}>\n          <ListItem>\n            <ListItemAvatar>\n              <Avatar>\n                <i className=\"fas fa-robot\"></i>\n              </Avatar>\n            </ListItemAvatar>\n            <ListItemText primary={data.robot} />\n          </ListItem>\n          <Divider variant=\"inset\" component=\"li\" />\n          <ListItem>\n            <ListItemAvatar>\n              <Avatar>\n                <ScheduleIcon />\n              </Avatar>\n            </ListItemAvatar>\n            <ListItemText primary={data.time} />\n          </ListItem>\n          <Divider variant=\"inset\" component=\"li\" />\n          {props.includes(\"service\") && (\n            <div>\n              <ListItem>\n                <ListItemAvatar>\n                  <Avatar>\n                    <WarningIcon />\n                  </Avatar>\n                </ListItemAvatar>\n                <ListItemText\n                  primary={data.service}\n                  className={classes.breakWord}\n                />\n              </ListItem>\n              <Divider variant=\"inset\" component=\"li\" />\n            </div>\n          )}\n          {props.includes(\"module\") && (\n            <div>\n              <ListItem>\n                <ListItemAvatar>\n                  <Avatar>\n                    <ViewModuleIcon />\n                  </Avatar>\n                </ListItemAvatar>\n                <ListItemText\n                  primary={data.module}\n                  className={classes.breakWord}\n                />\n              </ListItem>\n              <Divider variant=\"inset\" component=\"li\" />\n            </div>\n          )}\n          <ListItem>\n            <ListItemAvatar>\n              <Avatar>\n                <ChatIcon />\n              </Avatar>\n            </ListItemAvatar>\n            <ListItemText\n              primary={data.message}\n              className={classes.breakWord}\n            />\n          </ListItem>\n        </List>\n        {data.action && (\n          <div>\n            <Divider />\n            <List style={{ width: \"100%\" }}>\n              <ListItem>\n                <ListItemText\n                  primary={data.action}\n                  className={classes.breakWord}\n                />\n              </ListItem>\n            </List>\n          </div>\n        )}\n      </Typography>\n    );\n  };\n\n  render() {\n    const { data, open, hasButton } = this.state;\n    const { title } = this.props;\n    return (\n      <AbstractModal\n        open={open}\n        title={title}\n        style={{ maxWidth: 500 }}\n        onCancel={() => this.setState({ open: false })}\n        onSubmit={data.buttonAction}\n        submitText={data.buttonText}\n        submitColor={\"primary\"}\n        hasSubmitButton={hasButton}\n        hasCancelButton={false}\n      >\n        {this.renderAlertInfo()}\n      </AbstractModal>\n    );\n  }\n}\n\nRobotLogModal.propTypes = {\n  title: PropTypes.string,\n  props: PropTypes.array\n};\n\nRobotLogModal.defaultProps = {\n  title: \"Log Details\",\n  props: []\n};\n\nexport default withStyles(styles, { withTheme: true })(RobotLogModal);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport _set from \"lodash/set\";\nimport _get from \"lodash/get\";\nimport _cloneDeep from \"lodash/cloneDeep\";\nimport {\n  FormControl,\n  Grid,\n  InputLabel,\n  MenuItem,\n  Select,\n  Typography\n} from \"@material-ui/core\";\nimport { Workspace } from \"mov-fe-lib-core\";\nimport BasicVirtualizedTree from \"../Tree/BasicVirtualizedTree\";\nimport AbstractModal from \"./AbstractModal\";\nimport Backdrop from \"@material-ui/core/Backdrop\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport i18n from \"../../i18n/i18n.js\";\n\n//========================================================================================\n/*                                                                                      *\n *                                    TEMPORARY CODE                                    *\n *                                                                                      */\n//========================================================================================\n\nconst SelectScopeModal = props => {\n  const initialData = [\n    {\n      id: 0,\n      name: i18n.t(\"Annotations\"),\n      scope: \"Annotation\",\n      children: []\n    },\n    {\n      id: 1,\n      name: i18n.t(\"Callback\"),\n      scope: \"Callback\",\n      children: []\n    },\n    {\n      id: 2,\n      name: i18n.t(\"Configuration\"),\n      scope: \"Configuration\",\n      children: []\n    },\n    {\n      id: 3,\n      name: i18n.t(\"Flow\"),\n      scope: \"Flow\",\n      children: []\n    },\n    {\n      id: 4,\n      name: i18n.t(\"Nodes\"),\n      scope: \"Node\",\n      children: []\n    },\n    {\n      id: 5,\n      name: i18n.t(\"Layouts\"),\n      scope: \"Layout\",\n      children: []\n    },\n    {\n      id: 6,\n      name: i18n.t(\"Scenes\"),\n      scope: \"GraphicScene\",\n      children: []\n    }\n  ];\n\n  const [data, setData] = React.useState(initialData);\n  const [selectedWorkspace, setSelectedWorkspace] = React.useState(\"global\");\n  const [selectedScopeItem, setSelectedScopeItem] = React.useState(\n    props.selected\n  );\n  const [workSpaceList, setWorkSpaceList] = React.useState({});\n  const [isLoading, setIsLoading] = React.useState(true);\n\n  const scopeFilteredData = initialData.filter(elem =>\n    props.scopeList.includes(elem.scope)\n  );\n\n  /* eslint-disable react-hooks/exhaustive-deps */\n  React.useEffect(() => {\n    //get list of workspace\n    Workspace.getAll()\n      .then(response => setWorkSpaceList(response))\n      .catch(error => console.log(error));\n\n    // get all information in the scopes (not filtered by message)\n    getAllData(selectedWorkspace);\n    //Unmount\n    return () => {};\n  }, [props.scopeList]);\n\n  // Filter Results based on props.filter\n  React.useEffect(() => {\n    if (isLoading || selectedWorkspace !== \"global\" || !props.filter) return;\n    const filteredData = _cloneDeep(data);\n    data.forEach((scope, index) => {\n      filteredData[index].children = scope.children.filter(props.filter);\n    });\n    // Set filtered data\n    setData(filteredData);\n  }, [props.filter, isLoading]);\n  /* eslint-enable react-hooks/exhaustive-deps */\n\n  const changeWorkspace = evt => {\n    // Update the selector\n    setSelectedWorkspace(evt.target.value);\n    // When you switch workspaces reset Data\n    getAllData(evt.target.value);\n    setIsLoading(true);\n  };\n\n  const getAllData = workspace => {\n    const dataToSet = _cloneDeep(scopeFilteredData);\n\n    dataToSet.forEach((element, index) => {\n      // Get all scope items\n      Workspace.getDocs({ workspace: workspace, scope: element.scope })\n        .then(response => {\n          let sortedScopeItems = response.scopes\n            .sort((a, b) => a.ref.localeCompare(b.ref))\n            .map((elem, i) => {\n              return {\n                id: i,\n                url: elem.url,\n                name: elem.ref,\n                children: [{ name: \"\" }]\n              };\n            });\n\n          dataToSet[index].children = sortedScopeItems;\n          setData(dataToSet);\n          setIsLoading(false);\n        })\n        .catch(error => console.error(error));\n    });\n  };\n\n  const requestScopeVersions = node => {\n    const dataToSet = _cloneDeep(data);\n    const mapObj = {\n      0: () => {\n        const indexToSet = dataToSet.findIndex(elem => elem.id === node.id);\n\n        // Toggle the expansion of the panel\n        const isExpanded = _get(\n          dataToSet,\n          [indexToSet, \"state\", \"expanded\"],\n          false\n        );\n        _set(dataToSet, [indexToSet, \"state\"], {\n          expanded: !isExpanded\n        });\n\n        setData(dataToSet);\n      },\n      1: () => {\n        // second level, ask for versions (versions of scope items)\n\n        // find index of selected node in first level\n        const indexToSet = dataToSet.findIndex(\n          elem => elem.id === node.parents[0]\n        );\n\n        Workspace.getDocs({\n          workspace: selectedWorkspace,\n          scope: dataToSet[indexToSet].scope,\n          id: node.name\n        })\n          .then(response => {\n            // Tailor data Data comes with \"ref\" key but we want \"name\"\n            const versionList = response.versions.map((elem, index) => {\n              return {\n                url: elem.url,\n                name: elem.tag,\n                id: index\n              };\n            });\n\n            // find index of selected node in the second level\n            const index2ndLevel = dataToSet[indexToSet].children.findIndex(\n              elem => elem.id === node.id\n            );\n\n            // Toggle the expansion of the panel\n            const isExpanded = _get(\n              dataToSet,\n              [indexToSet, \"children\", index2ndLevel, \"state\", \"expanded\"],\n              false\n            );\n            _set(dataToSet, [indexToSet, \"children\", index2ndLevel, \"state\"], {\n              expanded: !isExpanded\n            });\n\n            // Set version list into the Tree\n            _set(\n              dataToSet,\n              [indexToSet, \"children\", index2ndLevel, \"children\"],\n              versionList\n            );\n            setData(dataToSet);\n          })\n          .catch(error => console.error(error));\n      },\n      2: () => {\n        // Display the selected option\n        setSelectedScopeItem(`${node.url}`);\n      }\n    };\n    _get(mapObj, node.deepness, () => {})();\n  };\n\n  const confirmNodeSelection = node => {\n    // Display the selected option and confirm selection\n    if (selectedWorkspace !== \"global\" && node.deepness <= 1) return;\n    setSelectedScopeItem(node.url);\n    props.onSubmit(node.url);\n  };\n\n  const getModalTitle = scope => {\n    const vowels = [\"a\", \"e\", \"i\", \"o\", \"u\"];\n    const pronoun = vowels.includes(scope[0].toLowerCase())\n      ? i18n.t(\"an\")\n      : i18n.t(\"a\");\n    return `${i18n.t(\"Select\")} ${pronoun} ${i18n.t(scope)}`;\n  };\n\n  return (\n    <AbstractModal\n      onSubmit={() => props.onSubmit(selectedScopeItem)}\n      onCancel={props.onCancel}\n      open={props.open}\n      title={getModalTitle(props.scopeList[0])}\n      width=\"50%\"\n    >\n      <Grid container>\n        <Grid\n          item\n          xs={12}\n          style={{\n            textAlign: \"center\",\n            paddingBottom: \"6px\",\n            paddingTop: \"10px\"\n          }}\n        >\n          <FormControl style={{ width: \"50%\" }}>\n            <InputLabel>{i18n.t(\"Workspace\")}</InputLabel>\n            <Select\n              value={selectedWorkspace}\n              onChange={changeWorkspace}\n              disabled={!props.allowArchive}\n            >\n              {Object.keys(workSpaceList).map((key, index) => (\n                <MenuItem key={index} value={key}>\n                  {workSpaceList[key].label}\n                </MenuItem>\n              ))}\n            </Select>\n          </FormControl>\n        </Grid>\n        <Typography\n          component=\"div\"\n          style={{\n            overflowY: \"auto\",\n            overflowX: \"hidden\",\n            justifyContent: \"center\",\n            width: \"100%\"\n          }}\n        >\n          {isLoading ? (\n            <Backdrop\n              style={{\n                position: \"relative\",\n                height: \"50vh\",\n                width: \"inherit\",\n                color: \"#fff\",\n                zIndex: 99999\n              }}\n              open={isLoading}\n            >\n              <CircularProgress color=\"inherit\" />\n            </Backdrop>\n          ) : (\n            <BasicVirtualizedTree\n              onClickNode={node => requestScopeVersions(node)}\n              onDoubleClickNode={data => confirmNodeSelection(data)}\n              data={data}\n              handleChange={nodes => setData(nodes)}\n              showIcons={false}\n              height=\"400px\"\n            ></BasicVirtualizedTree>\n          )}\n        </Typography>\n        <Grid item xs={12} style={{ textAlign: \"center\" }}>\n          <Typography\n            label={i18n.t(\"Message\")}\n            value={\"selected\"}\n            margin=\"normal\"\n          >\n            {selectedScopeItem === \"\"\n              ? i18n.t(\"Nothing selected\")\n              : selectedScopeItem}\n          </Typography>\n        </Grid>\n      </Grid>\n    </AbstractModal>\n  );\n};\n\nSelectScopeModal.propTypes = {\n  allowArchive: PropTypes.bool,\n  onSubmit: PropTypes.func,\n  onCancel: PropTypes.func,\n  open: PropTypes.bool,\n  scopeList: PropTypes.array,\n  message: PropTypes.string,\n  selected: PropTypes.string,\n  filter: PropTypes.func\n};\n\nSelectScopeModal.defaultProps = {\n  title: i18n.t(\"Insert Text here\"),\n  message: i18n.t(\"Are you sure?\"),\n  allowArchive: true,\n  onSubmit: () => {},\n  onCancel: () => {},\n  open: false,\n  scopeList: [\"Callback\"],\n  selected: \"\"\n};\n\nexport default SelectScopeModal;\n","import React from \"react\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Menu from \"@material-ui/core/Menu\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport SettingsIcon from \"@material-ui/icons/Settings\";\nimport PropTypes from \"prop-types\";\nimport Toggle from \"./Toggle\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Divider from \"@material-ui/core/Divider\";\nimport { Typography } from \"@material-ui/core\";\n\nconst useStyles = makeStyles(theme => {\n  return {\n    menuItemSpacing: {\n      fontSize: \"18px\",\n      minHeight: \"18px\",\n      padding: theme.spacing(1.25, 2),\n      ...theme.cursorDefault\n    },\n    profileMenuFooter: {\n      fontSize: \"14px\",\n      textAlign: \"end\"\n    }\n  };\n});\n\nconst ProfileMenu = props => {\n  const classes = useStyles();\n  const [anchorEl, setAnchorEl] = React.useState(null);\n\n  const handleClick = event => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  return (\n    <div>\n      <IconButton\n        aria-controls=\"simple-menu\"\n        aria-haspopup=\"true\"\n        onClick={handleClick}\n      >\n        <SettingsIcon />\n      </IconButton>\n      <Menu\n        id=\"simple-menu\"\n        anchorEl={anchorEl}\n        keepMounted\n        open={Boolean(anchorEl)}\n        onClose={handleClose}\n      >\n        <Typography component=\"div\" variant=\"body1\">\n          <div className={classes.menuItemSpacing}>\n            {props.welcomeLabel}, {props.userName}\n          </div>\n          <Divider variant=\"middle\" />\n          {props.extraItems?.map(item => (\n            <MenuItem\n              className={classes.menuItemSpacing}\n              onClick={() => item.func}\n            >\n              {item.label}\n            </MenuItem>\n          ))}\n          <div className={classes.menuItemSpacing}>\n            {props.darkThemeLabel}\n            <Toggle\n              onToggle={() => props.handleToggleTheme()}\n              toggle={props.isDarkTheme}\n            ></Toggle>\n          </div>\n          <MenuItem\n            className={(classes.menuItemSpacing, classes.cursorPointer)}\n            onClick={props.handleLogout}\n          >\n            {props.logoutLabel}\n          </MenuItem>\n          <Divider variant=\"middle\" />\n          <div\n            className={\n              classes.menuItemSpacing + \" \" + classes.profileMenuFooter\n            }\n          >\n            {props.version}\n          </div>\n        </Typography>\n      </Menu>\n    </div>\n  );\n};\nProfileMenu.propTypes = {\n  welcomeLabel: PropTypes.string,\n  userName: PropTypes.string,\n  darkThemeLabel: PropTypes.string,\n  logoutLabel: PropTypes.string,\n  version: PropTypes.string,\n  extraItems: PropTypes.array,\n  isDarkTheme: PropTypes.bool,\n  handleLogout: PropTypes.func,\n  handleToggleTheme: PropTypes.func\n};\n\nProfileMenu.defaultProps = {\n  welcomeLabel: \"Hello\",\n  userName: \"User\",\n  darkThemeLabel: \"Dark Theme\",\n  logoutLabel: \"Logout\",\n  version: \"\",\n  extraItems: [],\n  isDarkTheme: true,\n  handleLogout: () => console.log(\"logout\"),\n  handleToggleTheme: () => console.log(\"toggle\")\n};\n\nexport default ProfileMenu;\n","import React, { Component } from \"react\";\nimport { fade, withStyles } from \"@material-ui/core/styles\";\nimport InputBase from \"@material-ui/core/InputBase\";\nimport SearchIcon from \"@material-ui/icons/Search\";\nimport PropTypes from \"prop-types\";\n\nconst styles = theme => ({\n  search: {\n    position: \"relative\",\n    borderRadius: theme.shape.borderRadius,\n    backgroundColor: fade(theme.palette.common.white, 0.15),\n    \"&:hover\": {\n      backgroundColor: fade(theme.palette.common.white, 0.25)\n    },\n    marginRight: theme.spacing(2),\n    marginLeft: 0,\n    width: \"100%\",\n    [theme.breakpoints.up(\"sm\")]: {\n      marginLeft: theme.spacing(3),\n      width: \"auto\"\n    }\n  },\n  searchIcon: {\n    width: theme.spacing(7),\n    height: \"100%\",\n    position: \"absolute\",\n    pointerEvents: \"none\",\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\"\n  },\n  inputRoot: {\n    color: \"inherit\"\n  },\n  inputInput: {\n    padding: theme.spacing(1, 1, 1, 7),\n    transition: theme.transitions.create(\"width\"),\n    width: \"100%\",\n    [theme.breakpoints.up(\"md\")]: {\n      width: 200\n    }\n  }\n});\n\nclass SearchInput extends Component {\n  searchInput = undefined;\n  timer = undefined;\n\n  handleChange = evt => {\n    this.searchInput = evt.target.value;\n    if (this.props.enableTimeout) {\n      if (this.timer) {\n        clearTimeout(this.timer);\n      }\n      this.timer = setTimeout(this.handleSearch, this.props.time);\n    } else {\n      this.handleSearch();\n    }\n  };\n\n  handleSearch = () => {\n    if (this.searchInput !== undefined) this.props.onChange(this.searchInput);\n  };\n\n  render() {\n    const { classes, style, placeholder } = this.props;\n    return (\n      <div className={classes.search} style={style}>\n        <div className={classes.searchIcon}>\n          <SearchIcon />\n        </div>\n        <InputBase\n          ref={this.setSearchInput}\n          placeholder={placeholder}\n          classes={{\n            root: classes.inputRoot,\n            input: classes.inputInput\n          }}\n          inputProps={{ \"aria-label\": \"search\" }}\n          onChange={this.handleChange}\n        />\n      </div>\n    );\n  }\n}\n\nSearchInput.propTypes = {\n  placeholder: PropTypes.string,\n  onChange: PropTypes.func,\n  time: PropTypes.number,\n  enableTimeout: PropTypes.bool,\n  style: PropTypes.object\n};\n\nSearchInput.defaultProps = {\n  placeholder: \"Search...\",\n  onChange: input => {\n    console.log(input);\n  },\n  time: 250,\n  enableTimeout: true,\n  style: {}\n};\n\nexport default withStyles(styles, { withTheme: true })(SearchInput);\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport InputLabel from \"@material-ui/core/InputLabel\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport MaterialSelect from \"@material-ui/core/Select\";\nimport PropTypes from \"prop-types\";\n\nconst useStyles = makeStyles(theme => ({\n  formControl: {\n    margin: theme.spacing(1),\n    minWidth: 120\n  }\n}));\n\nconst Select = props => {\n  const classes = useStyles();\n\n  let noneOption = <div></div>;\n  if (props.noneOption) {\n    noneOption = (\n      <MenuItem value=\"\">\n        <em>None</em>\n      </MenuItem>\n    );\n  }\n\n  return (\n    <FormControl\n      variant={props.variant}\n      className={classes.formControl}\n      style={props.style}\n      hiddenLabel={props.label === undefined ? true : false}\n    >\n      <InputLabel id=\"movai-react-select\">{props.label}</InputLabel>\n      <MaterialSelect\n        labelId=\"movai-react-select\"\n        id={props.id}\n        value={props.value}\n        onChange={props.onChange}\n        inputProps={props.inputProps}\n      >\n        {noneOption}\n        {props.options.map((element, index) => {\n          return (\n            <MenuItem key={index} value={element}>\n              {element}\n            </MenuItem>\n          );\n        })}\n      </MaterialSelect>\n    </FormControl>\n  );\n};\n\nSelect.propTypes = {\n  value: PropTypes.string,\n  options: PropTypes.array,\n  noneOption: PropTypes.bool,\n  label: PropTypes.string,\n  variant: PropTypes.string,\n  style: PropTypes.object,\n  onChange: PropTypes.func,\n  id: PropTypes.string,\n  inputProps: PropTypes.object\n};\nSelect.defaultProps = {\n  value: \"option2\",\n  options: [\"option1\", \"option2\", \"option3\"],\n  variant: \"filled\",\n  noneOption: true,\n  onChange: evt => console.log(evt.target.value),\n  id: \"movai-react-select\"\n};\n\nexport default Select;\n","import * as React from \"react\";\nimport PropTypes from \"prop-types\";\nimport clsx from \"clsx\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport { capitalize } from \"@material-ui/core/utils\";\nimport { svgIcons } from \"./svg-icons/svgIcons\";\n\nexport const styles = () => {\n  return {\n    /* Styles applied to the root element. */\n    root: {\n      // borderRadius: theme.shape.borderRadius,\n      backgroundColor: \"transparent\",\n      display: \"flex\",\n      padding: \"6px 16px\"\n    },\n    /* Styles applied to the root element if `variant=\"filled\"` and `color=\"success\"`. */\n    filledSuccess: {\n      color: \"#fff\",\n      // fontWeight: theme.typography.fontWeightMedium,\n      backgroundColor: \"#4caf50\"\n    },\n    /* Styles applied to the root element if `variant=\"filled\"` and `color=\"info\"`. */\n    filledInfo: {\n      color: \"#fff\",\n      // fontWeight: theme.typography.fontWeightMedium,\n      backgroundColor: \"#2196f3\"\n    },\n    /* Styles applied to the root element if `variant=\"filled\"` and `color=\"warning\"`. */\n    filledWarning: {\n      color: \"#fff\",\n      // fontWeight: theme.typography.fontWeightMedium,\n      backgroundColor: \"#ff9800\"\n    },\n    /* Styles applied to the root element if `variant=\"filled\"` and `color=\"error\"`. */\n    filledError: {\n      color: \"#fff\",\n      // fontWeight: theme.typography.fontWeightMedium,\n      backgroundColor: \"#f44336\"\n    },\n    /* Styles applied to the icon wrapper element. */\n    icon: {\n      marginRight: 12,\n      padding: \"7px 0\",\n      display: \"flex\",\n      fontSize: 22,\n      opacity: 0.9\n    },\n    /* Styles applied to the message wrapper element. */\n    message: {\n      padding: \"8px 0\",\n      display: \"flex\",\n      flexDirection: \"column\",\n      justifyContent: \"center\"\n    },\n    /* Styles applied to the action wrapper element if `action` is provided. */\n    action: {\n      display: \"flex\",\n      alignItems: \"center\",\n      marginLeft: \"auto\",\n      paddingLeft: 16,\n      marginRight: -8\n    }\n  };\n};\n\nconst defaultIconMapping = {\n  success: svgIcons.SuccessOutlined,\n  warning: svgIcons.ReportProblemOutlined,\n  error: svgIcons.ErrorOutline,\n  info: svgIcons.InfoOutlined\n};\n\nconst Alert = props => {\n  const {\n    action,\n    children,\n    classes,\n    className,\n    closeText = \"Close\",\n    color,\n    icon,\n    iconMapping = defaultIconMapping,\n    onClose,\n    role = \"alert\",\n    severity = \"success\",\n    variant = \"standard\",\n    theme,\n    ...other\n  } = props;\n\n  return (\n    <div\n      className={clsx(\n        classes.root,\n        classes[`${variant}${capitalize(color || severity)}`],\n        className\n      )}\n      {...other}\n    >\n      {icon !== false ? (\n        <div className={classes.icon}>\n          {icon || iconMapping[severity] || defaultIconMapping[severity]}\n        </div>\n      ) : null}\n      <div className={classes.message}>{children}</div>\n      {action != null ? <div className={classes.action}>{action}</div> : null}\n      {action == null && onClose ? (\n        <div className={classes.action}>\n          <IconButton\n            size=\"small\"\n            aria-label={closeText}\n            title={closeText}\n            color=\"inherit\"\n            onClick={onClose}\n          >\n            {svgIcons.Close}\n          </IconButton>\n        </div>\n      ) : null}\n    </div>\n  );\n};\n\nAlert.propTypes = {\n  // ----------------------------- Warning --------------------------------\n  // | These PropTypes are generated from the TypeScript type definitions |\n  // |     To update them edit the d.ts file and run \"yarn proptypes\"     |\n  // ----------------------------------------------------------------------\n  /**\n   * The action to display. It renders after the message, at the end of the alert.\n   */\n  action: PropTypes.node,\n  /**\n   * The content of the component.\n   */\n  children: PropTypes.node,\n  /**\n   * Override or extend the styles applied to the component.\n   * See [CSS API](#css) below for more details.\n   */\n  classes: PropTypes.object,\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n  /**\n   * Override the default label for the *close popup* icon button.\n   *\n   * For localization purposes, you can use the provided [translations](/guides/localization/).\n   */\n  closeText: PropTypes.string,\n  /**\n   * The main color for the alert. Unless provided, the value is taken from the `severity` prop.\n   */\n  color: PropTypes.oneOf([\"error\", \"info\", \"success\", \"warning\"]),\n  /**\n   * Override the icon displayed before the children.\n   * Unless provided, the icon is mapped to the value of the `severity` prop.\n   */\n  icon: PropTypes.node,\n  /**\n   * The component maps the `severity` prop to a range of different icons,\n   * for instance success to `<SuccessOutlined>`.\n   * If you wish to change this mapping, you can provide your own.\n   * Alternatively, you can use the `icon` prop to override the icon displayed.\n   */\n  iconMapping: PropTypes.shape({\n    error: PropTypes.node,\n    info: PropTypes.node,\n    success: PropTypes.node,\n    warning: PropTypes.node\n  }),\n  /**\n   * Callback fired when the component requests to be closed.\n   * When provided and no `action` prop is set, a close icon button is displayed that triggers the callback when clicked.\n   *\n   * @param {object} event The event source of the callback.\n   */\n  onClose: PropTypes.func,\n  /**\n   * The ARIA role attribute of the element.\n   */\n  role: PropTypes.string,\n  /**\n   * The severity of the alert. This defines the color and icon used.\n   */\n  severity: PropTypes.oneOf([\"error\", \"info\", \"success\", \"warning\"]),\n  /**\n   * The variant to use.\n   */\n  variant: PropTypes.oneOf([\"filled\", \"outlined\", \"standard\"])\n};\n\nexport default withStyles(styles, { name: \"MuiAlert\" })(Alert);\n","// import * as React from \"react\";\n// import SvgIcon from \"@material-ui/core/SvgIcon\";\n\n// export default function createSvgIcon({\n//   path = \"\",\n//   style = {},\n//   fill = \"#fff\",\n//   width = \"100%\",\n//   className = \"\",\n//   height = \"100%\",\n//   viewBox = \"0 0 32 32\"\n// }) {\n//   return (\n//     <svg\n//       width={width}\n//       style={style}\n//       height={height}\n//       viewBox={viewBox}\n//       className={className}\n//       xmlns=\"http://www.w3.org/2000/svg\"\n//       xmlnsXlink=\"http://www.w3.org/1999/xlink\"\n//     >\n//       <path d={path} fill={fill} />\n//     </svg>\n//   );\n// }\n\n// export default function createSvgIcon(path, displayName) {\n//   const Component = React.memo(\n//     React.forwardRef((props, ref) => (\n//       <SvgIcon data-mui-test={`${displayName}Icon`} ref={ref} {...props}>\n//         {path}\n//       </SvgIcon>\n//       <SvgIcon>\n//         {path}\n//       </SvgIcon>\n//     ))\n//   );\n\n//   if (process.env.NODE_ENV !== \"production\") {\n//     Component.displayName = `${displayName}Icon`;\n//   }\n\n//   Component.muiName = SvgIcon.muiName;\n\n//   return Component;\n// }\n\nimport React from \"react\";\n\nconst CreateSVGIcon = ({\n  path = \"\",\n  style = {},\n  fill = \"#fff\",\n  width = \"100%\",\n  height = \"100%\",\n  className = \"\",\n  viewBox = \"0 0 24 24\"\n}) => (\n  <svg\n    width={width}\n    style={style}\n    height={height}\n    viewBox={viewBox}\n    xmlns=\"http://www.w3.org/2000/svg\"\n    className={`svg-icon ${className || \"\"}`}\n    xmlnsXlink=\"http://www.w3.org/1999/xlink\"\n  >\n    <path fill={fill} d={path} />\n  </svg>\n);\n\nexport default CreateSVGIcon;\n","import React from \"react\";\nimport CreateSVGIcon from \"./CreateSVGIcon\";\n\nexport const svgIcons = {\n  Close: (\n    <CreateSVGIcon\n      width={24}\n      path=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"\n    />\n  ),\n  ErrorOutline: (\n    <CreateSVGIcon\n      width={24}\n      path=\"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z\"\n    ></CreateSVGIcon>\n  ),\n  InfoOutlined: (\n    <CreateSVGIcon\n      width={24}\n      path=\"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z\"\n    ></CreateSVGIcon>\n  ),\n  ReportProblemOutlined: (\n    <CreateSVGIcon\n      width={24}\n      path=\"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z\"\n    ></CreateSVGIcon>\n  ),\n  SuccessOutlined: (\n    <CreateSVGIcon\n      width={24}\n      path=\"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z\"\n    ></CreateSVGIcon>\n  )\n};\n","var api = require(\"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!./Snackbar.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","// Inspired from https://github.com/GA-MO/react-confirm-alert\n\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { render, unmountComponentAtNode } from \"react-dom\";\n// import { Alert } from \"@material-ui/lab\";\nimport Alert from \"./Alert/Alert\";\n\nimport \"./Snackbar.css\";\n\nimport { svgIcons } from \"./Alert/svg-icons/svgIcons\";\n\nclass ReactConfirmAlert extends Component {\n  static propTypes = {\n    message: PropTypes.string,\n    customUI: PropTypes.func,\n    closeOnClickOutside: PropTypes.bool,\n    closeOnEscape: PropTypes.bool,\n    willUnmount: PropTypes.func,\n    onClickOutside: PropTypes.func,\n    onKeypressEscape: PropTypes.func,\n    // new props\n    severity: PropTypes.string,\n    closeText: PropTypes.string,\n    autoHideDuration: PropTypes.number,\n    closable: PropTypes.bool\n  };\n\n  autoClose = null;\n\n  static defaultProps = {\n    closeOnClickOutside: true,\n    closeOnEscape: true,\n    willUnmount: () => null,\n    onClickOutside: () => null,\n    onKeypressEscape: () => null,\n    // new props\n    severity: \"info\", // error, warning, info or success\n    closeText: \"Close\",\n    autoHideDuration: 6000,\n    closable: true\n  };\n\n  handleClickButton = button => {\n    if (button.onClick) button.onClick();\n    this.close();\n  };\n\n  handleClickOverlay = e => {\n    const { closeOnClickOutside, onClickOutside } = this.props;\n    const isClickOutside = e.target === this.overlay;\n\n    if (closeOnClickOutside && isClickOutside) {\n      onClickOutside();\n      this.close();\n    }\n  };\n\n  close = () => {\n    removeBodyClass();\n    removeElementReconfirm();\n  };\n\n  keyboardClose = event => {\n    const { closeOnEscape, onKeypressEscape } = this.props;\n    const isKeyCodeEscape = event.keyCode === 27;\n\n    if (closeOnEscape && isKeyCodeEscape) {\n      onKeypressEscape(event);\n      this.close();\n    }\n  };\n\n  componentDidMount = () => {\n    document.addEventListener(\"keydown\", this.keyboardClose, false);\n    this.autoClose = setTimeout(() => {\n      if (\n        document.getElementById(\"react-confirm-alert\") ||\n        document.getElementById(\"react-confirm-alert-body-element\")\n      ) {\n        this.close();\n      }\n    }, this.props.autoHideDuration);\n  };\n\n  componentWillUnmount = () => {\n    document.removeEventListener(\"keydown\", this.keyboardClose, false);\n    clearTimeout(this.autoClose);\n    this.props.willUnmount();\n  };\n\n  renderCustomUI = () => {\n    const { title, message, customUI } = this.props;\n    const dataCustomUI = {\n      title,\n      message,\n      onClose: this.close\n    };\n\n    return customUI(dataCustomUI);\n  };\n\n  render() {\n    const {\n      message,\n      customUI,\n      severity,\n      closeText,\n      closable,\n      theme\n    } = this.props;\n\n    return (\n      <div\n        className=\"react-confirm-alert-overlay\"\n        ref={dom => (this.overlay = dom)}\n        onClick={this.handleClickOverlay}\n      >\n        <div className=\"react-confirm-alert\">\n          {customUI ? (\n            this.renderCustomUI()\n          ) : (\n            <div className=\"react-confirm-alert-body\">\n              <Alert\n                theme={theme}\n                elevation={6}\n                variant=\"filled\"\n                severity={severity}\n                closeText={closeText}\n                action={\n                  closable ? (\n                    <div\n                      className=\"icon-container\"\n                      onClick={() => this.close()}\n                    >\n                      {svgIcons.Close}\n                    </div>\n                  ) : (\n                    undefined\n                  )\n                }\n              >\n                {message}\n              </Alert>\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\nfunction createElementReconfirm(properties, theme) {\n  let divTarget = document.getElementById(\"react-confirm-alert\");\n  if (divTarget) {\n    // Rerender - the mounted ReactConfirmAlert\n    render(<ReactConfirmAlert {...properties} theme={theme} />, divTarget);\n  } else {\n    // Mount the ReactConfirmAlert component\n    document.body.children[0].classList.add(\"react-confirm-alert-blur\");\n    divTarget = document.createElement(\"div\");\n    divTarget.id = \"react-confirm-alert\";\n    document.body.appendChild(divTarget);\n    render(<ReactConfirmAlert {...properties} theme={theme} />, divTarget);\n  }\n}\n\nfunction removeElementReconfirm() {\n  const target = document.getElementById(\"react-confirm-alert\");\n  unmountComponentAtNode(target);\n  target.parentNode.removeChild(target);\n}\n\nfunction addBodyClass() {\n  document.body.classList.add(\"react-confirm-alert-body-element\");\n}\n\nfunction removeBodyClass() {\n  document.body.classList.remove(\"react-confirm-alert-body-element\");\n}\n\nexport function snackbar(properties, theme) {\n  addBodyClass();\n  createElementReconfirm(properties, theme);\n}\n\nexport default ReactConfirmAlert;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport MaterialTable from \"material-table\";\n\nimport { forwardRef } from \"react\";\n\nimport AddBox from \"@material-ui/icons/AddBox\";\nimport ArrowDownward from \"@material-ui/icons/ArrowDownward\";\nimport Check from \"@material-ui/icons/Check\";\nimport ChevronLeft from \"@material-ui/icons/ChevronLeft\";\nimport ChevronRight from \"@material-ui/icons/ChevronRight\";\nimport Clear from \"@material-ui/icons/Clear\";\nimport DeleteOutline from \"@material-ui/icons/DeleteOutline\";\nimport Edit from \"@material-ui/icons/Edit\";\nimport FilterList from \"@material-ui/icons/FilterList\";\nimport FirstPage from \"@material-ui/icons/FirstPage\";\nimport LastPage from \"@material-ui/icons/LastPage\";\nimport Remove from \"@material-ui/icons/Remove\";\nimport SaveAlt from \"@material-ui/icons/SaveAlt\";\nimport Search from \"@material-ui/icons/Search\";\nimport ViewColumn from \"@material-ui/icons/ViewColumn\";\n\nconst tableIcons = {\n  Add: forwardRef((props, ref) => <AddBox {...props} ref={ref} />),\n  Check: forwardRef((props, ref) => <Check {...props} ref={ref} />),\n  Clear: forwardRef((props, ref) => <Clear {...props} ref={ref} />),\n  Delete: forwardRef((props, ref) => <DeleteOutline {...props} ref={ref} />),\n  DetailPanel: forwardRef((props, ref) => (\n    <ChevronRight {...props} ref={ref} />\n  )),\n  Edit: forwardRef((props, ref) => <Edit {...props} ref={ref} />),\n  Export: forwardRef((props, ref) => <SaveAlt {...props} ref={ref} />),\n  Filter: forwardRef((props, ref) => <FilterList {...props} ref={ref} />),\n  FirstPage: forwardRef((props, ref) => <FirstPage {...props} ref={ref} />),\n  LastPage: forwardRef((props, ref) => <LastPage {...props} ref={ref} />),\n  NextPage: forwardRef((props, ref) => <ChevronRight {...props} ref={ref} />),\n  PreviousPage: forwardRef((props, ref) => (\n    <ChevronLeft {...props} ref={ref} />\n  )),\n  ResetSearch: forwardRef((props, ref) => <Clear {...props} ref={ref} />),\n  Search: forwardRef((props, ref) => <Search {...props} ref={ref} />),\n  SortArrow: forwardRef((props, ref) => <ArrowDownward {...props} ref={ref} />),\n  ThirdStateCheck: forwardRef((props, ref) => <Remove {...props} ref={ref} />),\n  ViewColumn: forwardRef((props, ref) => <ViewColumn {...props} ref={ref} />),\n};\n\n// More information in: https://material-table.com/#/docs/all-props\n\nconst Table = (props) => {\n  return (\n    <MaterialTable\n      style={props.style}\n      title={props.title}\n      columns={props.columns}\n      data={props.data}\n      icons={tableIcons}\n      actions={props.actions}\n      options={props.options}\n      components={props.components}\n      localization={props.localization}\n    />\n  );\n};\n\nTable.propTypes = {\n  style: PropTypes.object,\n  title: PropTypes.string,\n  columns: PropTypes.array,\n  data: PropTypes.array,\n  actions: PropTypes.array,\n  options: PropTypes.object,\n  components: PropTypes.object,\n  localization: PropTypes.object,\n};\nTable.defaultProps = {\n  style: {},\n  title: \"\",\n  columns: [],\n  data: [],\n  actions: [],\n  options: {\n    actionsColumnIndex: -1,\n    draggable: false,\n    grouping: false,\n    search: false,\n    toolbar: false,\n    searchFieldAlignment: \"left\",\n    paging: false,\n  },\n  components: {},\n};\n\nexport default Table;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport MaterialTabs from \"@material-ui/core/Tabs\";\nimport Tab from \"@material-ui/core/Tab\";\nimport Typography from \"@material-ui/core/Typography\";\n\nfunction TabPanel(props) {\n  const { children, selectedTab, index, ...other } = props;\n\n  return (\n    <Typography\n      component=\"div\"\n      role=\"tabpanel\"\n      hidden={selectedTab !== index}\n      id={`tabpanel-${index}`}\n      aria-labelledby={`tab-${index}`}\n      {...other}\n    >\n      {selectedTab === index && children}\n    </Typography>\n  );\n}\n\nTabPanel.propTypes = {\n  children: PropTypes.node,\n  index: PropTypes.any.isRequired,\n  selectedTab: PropTypes.any.isRequired\n};\n\nfunction a11yProps(index) {\n  return {\n    id: `tab-${index}`,\n    \"aria-controls\": `tabpanel-${index}`\n  };\n}\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    flexGrow: 1,\n    height: \"100%\"\n  },\n  tabPanel: {\n    flexGrow: 1,\n    minHeight: 0,\n    height: \"calc(100% - 48px)\",\n    overflowY: \"auto\"\n  }\n}));\n\nexport default function Tabs(props) {\n  const classes = useStyles();\n  const [selectedTab, setSelectedTab] = React.useState(props.selectedTab);\n\n  React.useEffect(() => {\n    if (props.selectedTab !== selectedTab) {\n      setSelectedTab(props.selectedTab);\n    }\n  }, [props.selectedTab]);\n\n  const handleChange = (event, newSelectedTab) => {\n    setSelectedTab(newSelectedTab);\n  };\n\n  return (\n    <div className={classes.root}>\n      <MaterialTabs\n        value={selectedTab}\n        onChange={handleChange}\n        indicatorColor=\"primary\"\n        textColor=\"primary\"\n      >\n        {props.tabList.map((tab, index) => (\n          <Tab key={index} label={tab.label} {...a11yProps(index)} />\n        ))}\n      </MaterialTabs>\n      {props.tabList.map((tab, index) => (\n        <TabPanel\n          key={index}\n          selectedTab={selectedTab}\n          index={index}\n          className={props.scrollable ? classes.tabPanel : undefined}\n        >\n          {tab.component}\n        </TabPanel>\n      ))}\n    </div>\n  );\n}\n\nTabs.propTypes = {\n  tabList: PropTypes.array,\n  selectedTab: PropTypes.number,\n  scrollable: PropTypes.bool\n};\n\nTabs.defaultProps = {\n  tabList: [\n    { label: \"Tab 1\", component: <div>Component 1</div> },\n    {\n      label: \"Tab 2\",\n      component: (\n        <div>\n          Lorem Ipsum is simply dummy text of the printing and typesetting\n          industry. Lorem Ipsum has been the industry standard dummy text ever\n          since the 1500s, when an unknown printer took a galley of type and\n          scrambled it to make a type specimen book. It has survived not only\n          five centuries, but also the leap into electronic typesetting,\n          remaining essentially unchanged. It was popularised in the 1960s with\n          the release of Letraset sheets containing Lorem Ipsum passages, and\n          more recently with desktop publishing software like Aldus PageMaker\n          including versions of Lorem Ipsum.\n        </div>\n      )\n    },\n    { label: \"Tab 3\", component: <div>Component 3</div> }\n  ],\n  selectedTab: 0,\n  scrollable: true\n};\n","import React from \"react\";\nimport TextField from \"@material-ui/core/TextField\";\nimport PropTypes from \"prop-types\";\n\nconst Text = props => {\n  return <TextField {...props}></TextField>;\n};\n\nText.propTypes = {};\nText.defaultProps = {};\n\nexport default Text;\n","import React from \"react\";\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\nimport Switch from \"@material-ui/core/Switch\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { green, grey } from \"@material-ui/core/colors\";\nimport PropTypes from \"prop-types\";\n\nconst useStyles = makeStyles(theme => ({\n  label: {\n    fontFamily: \"Roboto\",\n    fontStyle: \"normal\",\n    fontWeight: \"normal\",\n    fontSize: \"14px\",\n    marginLeft: 0,\n    marginRight: 0,\n    marginBottom: 0\n  },\n  colorSwitchBase: {\n    color: grey[300],\n    \"&$colorChecked\": {\n      color: green[500],\n      \"& + $colorBar\": {\n        backgroundColor: green[500]\n      }\n    }\n  },\n  colorBar: {},\n  colorChecked: {}\n}));\n\nconst Toggle = props => {\n  const classes = useStyles();\n  return (\n    <FormControlLabel\n      control={\n        <Switch\n          checked={props.toggle}\n          onChange={props.onToggle}\n          color={props.color}\n          disabled={props.disabled}\n          hidden={props.hidden}\n          size={props.size}\n          classes={{\n            switchBase: classes.colorSwitchBase,\n            checked: classes.colorChecked,\n            track: classes.colorBar\n          }}\n        />\n      }\n      labelPlacement={props.labelPlacement}\n      label={props.label}\n      classes={{ label: classes.label }}\n      style={{ ...props.style, marginLeft: 0, marginRight: 0, marginBottom: 0 }}\n    />\n  );\n};\n\nToggle.propTypes = {\n  toggle: PropTypes.bool,\n  onToggle: PropTypes.func,\n  label: PropTypes.string,\n  color: PropTypes.string,\n  labelPlacement: PropTypes.string, // 'end', 'start', 'top', 'bottom'\n  style: PropTypes.object\n};\nToggle.defaultProps = {\n  color: \"primary\" // or secondary\n};\n\nexport default Toggle;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Tree from \"react-virtualized-tree\";\nimport \"material-icons/css/material-icons.css\";\nimport \"react-virtualized/styles.css\";\nimport \"react-virtualized-tree/lib/main.css\";\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\nimport ChevronRightIcon from \"@material-ui/icons/ChevronRight\";\nimport Box from \"@material-ui/core/Box\";\nimport Grid from \"@material-ui/core/Grid\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport _get from \"lodash/get\";\nimport { ListItemsTreeWithSearch } from \"./TreeSearch\";\n\n//========================================================================================\n/*                                                                                      *\n *                                     TODO REFACTOR                                    *\n *                                                                                      */\n//========================================================================================\n\nconst styles = theme => ({\n  horizFlex: {\n    display: \"flex\",\n    flexDirection: \"row\",\n    alignItems: \"center\"\n  },\n  spaceBetween: {\n    display: \"flex\",\n    width: \"100%\",\n    justifyContent: \"space-between\"\n  },\n  preContainer: {\n    justifyContent: \"space-between\",\n    \"& button\": {\n      display: \"none\"\n    },\n    \"&:hover\": {\n      backgroundColor: \"rgba(54,181,230, 0.15)\",\n      \"& button\": {\n        display: \"inline-flex\"\n      }\n    }\n  },\n  ellipsis: {\n    whiteSpace: \"nowrap\",\n    overflow: \"hidden\",\n    textOverflow: \"ellipsis\",\n    flex: 2\n  },\n  iconSpace: {\n    flex: 1,\n    textAlign: \"right\",\n    minWidth: \"45px\",\n    \"& button\": {\n      position: \"relative\",\n      bottom: \"7px\",\n      padding: \"7px\"\n    }\n  }\n});\n\n// const {Deletable, Expandable, Favorite} = Renderers;\n\nconst testArray = [];\n\nfor (let index = 0; index < 100; index++) {\n  testArray.push({\n    id: index,\n    name: `1.0.${index}`\n  });\n}\n\nconst EXPANDED = \"EXPANDED\";\n\nclass BasicVirtualizedTree extends Component {\n  state = {\n    selectedGroup: EXPANDED,\n    groupsEnabled: true,\n    searchValue: \"\"\n  };\n\n  searchFilter = (nodes, searchValue) => {\n    const searchValueLower = searchValue.toLowerCase();\n    const filteredNodes = nodes\n      .filter(\n        node =>\n          (!node.name.includes(\"@SM\") &&\n            node.name.toLowerCase().includes(searchValueLower)) ||\n          node.children.findIndex(ch =>\n            ch.name.toLowerCase().includes(searchValueLower)\n          ) >= 0\n      )\n      .map(node => {\n        return {\n          ...node,\n          children: (node?.children || []).filter(\n            ch =>\n              ch.name &&\n              !ch.name.includes(\"@SM\") &&\n              (node.name.toLowerCase().includes(searchValueLower) ||\n                ch.name.toLowerCase().includes(searchValueLower))\n          )\n        };\n      });\n\n    // Add children id if missing\n    filteredNodes.forEach(node => {\n      node.children.forEach((child, i) => {\n        child.id = child.id ? child.id : i;\n        if (child.children) {\n          child.children.forEach((grandChild, j) => {\n            grandChild.id = grandChild.id ? grandChild.id : j;\n          });\n        }\n      });\n    });\n\n    return filteredNodes;\n  };\n\n  handleSelectedGroupChange = selectedGroup => {\n    this.setState({ selectedGroup });\n  };\n\n  // open: true -> expand\n  //       false -> collapse\n  handleExpansion = (evt, nodes, node, open) => {\n    // const treeData = _cloneDeep(nodes);\n    // _set(treeData, [node.id, \"state\"], {\n    //   expanded: open\n    // });\n    // evt.stopPropagation();\n    // this.props.handleChange(treeData);\n  };\n\n  render() {\n    const { classes } = this.props;\n    const iconStyle = <i className=\"fas fa-home\" />;\n    const nodes = this.props.data;\n    return (\n      <div>\n        <ListItemsTreeWithSearch\n          style={{\n            overflow: \"auto\"\n          }}\n          icon={iconStyle}\n          onSearch={input => {\n            this.setState({\n              searchValue: input\n            });\n          }}\n        >\n          <div style={{ height: this.props.height }}>\n            <Tree\n              nodes={this.searchFilter(nodes, this.state.searchValue)}\n              onChange={this.props.handleChange}\n            >\n              {({ style, node, ...rest }) => {\n                // Adjust tree indentation\n                style.paddingLeft = style.marginLeft / 1.5;\n                style.marginLeft = 0;\n                // Render tree element\n                return (\n                  <div\n                    style={style}\n                    onClick={() => this.props.onClickNode(node)}\n                    onDoubleClick={() => this.props.onDoubleClickNode(node)}\n                    p={2}\n                    className={\n                      !_get(node, `children`, false) ? classes.preContainer : \"\"\n                    }\n                  >\n                    <Box p={1} className={classes.inlineFlex}>\n                      <Grid alignContent={\"space-between\"} container>\n                        {_get(node, `children`, false) &&\n                          node.state?.expanded && (\n                            <ExpandMoreIcon\n                              onClick={evt =>\n                                this.handleExpansion(evt, nodes, node, false)\n                              }\n                            />\n                          )}\n                        {_get(node, `children`, false) &&\n                          !node.state?.expanded && (\n                            <ChevronRightIcon\n                              onClick={evt =>\n                                this.handleExpansion(evt, nodes, node, true)\n                              }\n                            />\n                          )}\n\n                        <div\n                          className={\n                            !_get(node, `children`, false)\n                              ? classes.spaceBetween\n                              : \"\"\n                          }\n                        >\n                          <div className={classes.ellipsis}>{node.name}</div>\n                        </div>\n                      </Grid>\n                    </Box>\n                  </div>\n                );\n              }}\n            </Tree>\n          </div>\n        </ListItemsTreeWithSearch>\n      </div>\n    );\n  }\n}\n\nBasicVirtualizedTree.propTypes = {\n  data: PropTypes.array,\n  onClickNode: PropTypes.func,\n  onDoubleClickNode: PropTypes.func,\n  handleChange: PropTypes.func,\n  height: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n};\n\nBasicVirtualizedTree.defaultProps = {\n  data: [],\n  onClickNode: () => {},\n  onDoubleClickNode: () => {},\n  handleChange: () => {},\n  height: 700\n};\n\nexport default withStyles(styles, { withTheme: true })(BasicVirtualizedTree);\n","import React, { Component } from \"react\";\nimport {\n  List,\n  InputBase,\n  IconButton,\n  Typography,\n  Divider,\n  ListItem\n} from \"@material-ui/core\";\nimport PropTypes from \"prop-types\";\nimport SearchIcon from \"@material-ui/icons/Search\";\nimport ClearIcon from \"@material-ui/icons/Clear\";\nimport i18n from \"../../i18n/i18n.js\";\n\nclass TreeSearch extends Component {\n  searchInput = null;\n  timer = null;\n  inputRef = React.createRef();\n\n  handleChange = evt => {\n    this.searchInput = evt.target.value;\n    if (this.timer) {\n      clearTimeout(this.timer);\n    }\n    this.timer = setTimeout(this.handleSearch, 250);\n  };\n\n  handleSearch = () => {\n    if (this.searchInput !== null) this.props.search(this.searchInput);\n  };\n\n  resetValue() {\n    const input = this.inputRef.current.children[0];\n    input.value = \"\";\n    input.focus();\n    this.searchInput = \"\";\n    this.handleSearch();\n    this.forceUpdate();\n  }\n\n  isEmpty() {\n    return this.searchInput === null || this.searchInput.trim() === \"\";\n  }\n\n  render() {\n    return (\n      <Typography\n        component=\"div\"\n        style={{\n          padding: \"2px 4px\",\n          display: \"flex\",\n          alignItems: \"center\",\n          width: \"100%\"\n        }}\n      >\n        <InputBase\n          ref={this.inputRef}\n          style={{\n            marginLeft: 10,\n            flex: 1\n          }}\n          placeholder={i18n.t(\"Search\")}\n          onChange={this.handleChange}\n        />\n        <IconButton\n          style={{ padding: 10 }}\n          onClick={() => {\n            if (!this.isEmpty()) {\n              this.resetValue();\n            }\n          }}\n        >\n          {this.isEmpty() ? <SearchIcon /> : <ClearIcon />}\n        </IconButton>\n      </Typography>\n    );\n  }\n}\n\n/**\n *\n * @param {*} props: contains children which are Items\n */\nconst ListItemsTree = props => {\n  return (\n    <List\n      style={{ paddingLeft: \"0px\", paddingRight: \"0px\", ...props.style }}\n      dense={true}\n      component=\"div\"\n      onKeyUp={props.onKeyUp}\n    >\n      {props.children}\n    </List>\n  );\n};\n\nconst ListItemsTreeWithTitle = props => {\n  return (\n    <ListItemsTree>\n      <ListItem>\n        <Typography component={props.variant}>{props.title}</Typography>\n      </ListItem>\n      <Divider />\n      {props.children}\n    </ListItemsTree>\n  );\n};\n/* \n  TODO: think about how to generalize the search\n\n  Using either the _shared/Search method or using a predicate \n*/\nconst ListItemsTreeWithSearch = props => {\n  return (\n    <ListItemsTree\n      style={{ flexGrow: 1, paddingBottom: \"0px\", paddingTop: \"0px\" }}\n      onKeyUp={props.onKeyUp}\n    >\n      <ListItem>\n        <TreeSearch search={input => props.onSearch(input)} />\n      </ListItem>\n      <Divider />\n      <Typography style={props.style} component=\"div\">\n        {React.Children.map(props.children, x => {\n          return x;\n        })}\n      </Typography>\n    </ListItemsTree>\n  );\n};\n\nListItemsTreeWithSearch.propTypes = {\n  onSearch: PropTypes.func\n};\n\nListItemsTreeWithSearch.defaultProps = {\n  onSearch: input => console.log(input)\n};\n\nexport { ListItemsTree, ListItemsTreeWithSearch, ListItemsTreeWithTitle };\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport PropTypes from \"prop-types\";\n\nconst useStyles = makeStyles(theme => ({\n  container: {\n    width: 65,\n    height: \"100%\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    backgroundColor: props => props.backgroundColor\n  },\n  logoArea: {\n    padding: \"17px\",\n    textAlign: \"center\",\n    alignItems: \"center\",\n    justifyContent: \"center\"\n  },\n  navigationArea: {\n    flexGrow: 1,\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\"\n  },\n  accountArea: {\n    padding: props => (props.unsetAccountAreaPadding ? \"unset\" : \"17px\"),\n    textAlign: \"center\",\n    alignItems: \"center\",\n    justifyContent: \"center\"\n  }\n}));\n\nconst VerticalBar = props => {\n  const classes = useStyles(props);\n  return (\n    <div className={classes.container}>\n      <div className={classes.logoArea}>{props.upperElement}</div>\n      <div className={classes.navigationArea}>\n        {props.navigationList.map((element, index) => {\n          return (\n            <div key={index} style={{ padding: \"15px 0px\" }}>\n              {element}\n            </div>\n          );\n        })}\n      </div>\n      <div className={classes.accountArea}>{props.lowerElement}</div>\n    </div>\n  );\n};\n\nVerticalBar.propTypes = {\n  upperElement: PropTypes.node,\n  navigationList: PropTypes.array,\n  lowerElement: PropTypes.node.isRequired,\n  backgroundColor: PropTypes.string,\n  unsetAccountAreaPadding: PropTypes.bool\n};\nVerticalBar.defaultProps = {\n  upperElement: <div></div>,\n  navigationList: [<div></div>],\n  lowerElement: <div></div>,\n  backgroundColor: \"#424242\",\n  unsetAccountAreaPadding: false\n};\n\nexport default VerticalBar;\n","class Action {\n  constructor() {\n    this.memory = {};\n  }\n\n  action(parentView) {\n    parentView.getSceneMemory().forEach(memory => {\n      memory.gizmoManager.attachedMesh = null;\n      memory.camera.attachControl(memory.canvas, true);\n    });\n    parentView.closeContextDial && parentView.closeContextDial();\n    parentView.setContextActionIndex && parentView.setContextActionIndex();\n  }\n\n  onChange(parentView) {\n    // to be overwritten by children\n  }\n}\n\nexport default Action;\n","import Util3d from \"../Util3d/Util3d\";\nimport KeyPoint from \"../NodeItem/KeyPoint\";\nimport Vec3 from \"../Math/Vec3\";\nimport { Maybe } from \"monet\";\nimport MouseKeysAction from \"./MouseKeysAction\";\nimport React from \"react\";\nimport { Color3, Axis, Vector3 } from \"@babylonjs/core\";\nimport { UndoManager } from \"mov-fe-lib-core\";\n\nclass AddKeyPointAction extends MouseKeysAction {\n  constructor() {\n    super();\n    this.key = \"addKeyPoint\";\n    this.name = \"Add Key Point [4]\";\n    this.maybeMousePos = Maybe.none();\n    this.tempMesh = null;\n    this.icon = props => <i className=\"fas fa-map-marker\" {...props}></i>;\n  }\n\n  createKeyPoint(\n    position,\n    name,\n    scene,\n    parentView,\n    is2addInServer = true,\n    color = Color3.Gray()\n  ) {\n    const rootMesh = parentView.getRootNode().item.mesh;\n\n    const keyPoint = KeyPoint.ofDict(scene, {\n      name: name,\n      color: [color.r, color.g, color.b]\n    });\n    const mesh = keyPoint.mesh;\n    mesh.parent = rootMesh;\n\n    const localPosition = Util3d.getLocalCoordFromWorld(\n      { parent: rootMesh },\n      Vec3.ofBabylon(position)\n    ).toBabylon();\n\n    mesh.setPositionWithLocalVector(\n      localPosition.add(Axis.Z.scale(KeyPoint.DEFAULT_SIZE))\n    );\n\n    if (is2addInServer) {\n      parentView.addNodeItem2Tree(keyPoint, rootMesh.name, is2addInServer);\n    }\n    return mesh;\n  }\n\n  action = parentView => {\n    super.action(parentView);\n    parentView.setSelectedAction(this);\n  };\n\n  onPointerDown = (evt, parentView) => {\n    if (evt.button !== 0) {\n      return;\n    }\n    parentView.getSceneMemory().forEach(memory => {\n      const { scene, ground, camera } = memory;\n      this.maybeMousePos = Util3d.getGroundPosition(scene, ground);\n      this.maybeMousePos.forEach(mousePos => {\n        camera.detachControl(memory.canvas);\n      });\n    });\n  };\n\n  onPointerMove = (evt, parentView) => {\n    parentView.getSceneMemory().forEach(memory => {\n      const scene = memory.scene;\n      const ground = memory.ground;\n      const maybeCurrent = Util3d.getGroundPosition(scene, ground);\n      maybeCurrent.forEach(current => {\n        this.maybeMousePos.forEach(oldMousePos => {\n          if (this.tempMesh) this.tempMesh.dispose();\n          this.tempMesh = this.createKeyPoint(\n            current,\n            TEMP_KEY_POINT_NAME,\n            scene,\n            parentView,\n            false\n          );\n        });\n      });\n    });\n  };\n\n  onPointerUp = (evt, parentView) => {\n    parentView.getSceneMemory().forEach(({ scene, camera, ground, canvas }) => {\n      const maybeCurrent = Util3d.getGroundPosition(scene, ground);\n      maybeCurrent.forEach(current => {\n        this.maybeMousePos.forEach(oldMousePos => {\n          if (this.tempMesh) this.tempMesh.dispose();\n          const name = `KeyPoint${Math.floor(Math.random() * 1e3)}`;\n          const keyPoint = this.createKeyPoint(\n            current,\n            name,\n            scene,\n            parentView,\n            true,\n            new Color3(Math.random(), Math.random(), Math.random())\n          );\n          parentView.setPropertiesWithName(name);\n          parentView\n            .getUndoManager()\n            .addIt(this.getUndoAbleAction(keyPoint, scene, parentView));\n        });\n      });\n      this.maybeMousePos = Maybe.none();\n      camera.attachControl(canvas, true);\n    });\n  };\n\n  getUndoAbleAction(mesh, scene, parentView) {\n    return UndoManager.actionBuilder()\n      .doAction(() => {\n        const keyPoint = this.createKeyPoint(\n          Vector3.Zero(),\n          mesh.name,\n          scene,\n          parentView,\n          true,\n          mesh.material.diffuseColor\n        );\n        keyPoint.position = mesh.position;\n        parentView.updateNodeInServer(mesh.name);\n      })\n      .undoAction(({ is2UpdateInServer = true }) => {\n        parentView.deleteNodeFromTreeUsingName(mesh.name, is2UpdateInServer);\n      })\n      .build();\n  }\n}\n\nconst TEMP_KEY_POINT_NAME = \"temp_key_point\";\nexport default AddKeyPointAction;\n","import Util3d from \"../Util3d/Util3d\";\nimport Vec3 from \"../Math/Vec3\";\nimport Action from \"./Action\";\nimport Map from \"../NodeItem/Map\";\nimport { Maybe } from \"monet\";\nimport React from \"react\";\nimport GlobalRef, { ROS_ORIGIN } from \"../NodeItem/GlobalRef\";\nimport { Axis, Space, Vector3, Quaternion } from \"@babylonjs/core\";\nimport DefaultScene from \"../Utils/DefaultScene\";\nimport { ACTIONS } from \"../MainView/MainViewActions\";\nimport { UndoManager } from \"mov-fe-lib-core\";\nimport AssetsManager from \"../AssetsManager/AssetsManager\";\n\nclass AddMapAction extends Action {\n  constructor(name, mapLoader) {\n    super();\n    this.name = name;\n    this.key = `addMap${name}`;\n    this.mapLoader = mapLoader;\n    this.icon = props => <i {...props} className=\"fas fa-map\"></i>;\n    this.firstTimeLoad = true;\n  }\n\n  addMap(parentView) {\n    parentView.getSceneMemory().forEach(async memory => {\n      const { scene, camera } = memory;\n      const {\n        textureSrc,\n        resolution,\n        origin,\n        imageSize\n      } = await this.mapLoader.load();\n\n      const width = resolution * imageSize[0];\n      const height = resolution * imageSize[1];\n      const mesh = Util3d.groundBuilder(scene)\n        .name(Maybe.fromNull(this.memory[\"name\"]).orSome(this.name))\n        .width(width)\n        .height(height)\n        .textureSrc(textureSrc)\n        .build();\n\n      const [xOrigin, yOrigin, yawOrigin] = origin;\n      const originPos = Vec3.of([-width / 2, -height / 2, 0]).sub(\n        Vec3.of([xOrigin, yOrigin, 0])\n      );\n\n      const rootNode = parentView.getRootNode();\n      const parent = rootNode.item.mesh.parent;\n      parent.position = GlobalRef.inverseCoordinates(originPos.toBabylon());\n      parent.rotationQuaternion = new Quaternion(\n        ROS_ORIGIN.quaternion[1],\n        ROS_ORIGIN.quaternion[2],\n        ROS_ORIGIN.quaternion[3],\n        ROS_ORIGIN.quaternion[0]\n      );\n\n      parent.rotate(Axis.Z, -yawOrigin, Space.LOCAL);\n      camera.setTarget(\n        new Vector3(parent.position.x, parent.position.y, parent.position.z)\n      );\n\n      const map = new Map(\n        mesh,\n        [width, height],\n        this.textureSrc,\n        Maybe.fromNull(this.memory[\"assetName\"]).orSome(this.name)\n      );\n\n      const isVisible = Maybe.fromNull(this.memory[\"isVisible\"]).orSome(true);\n      const is2sendServer = Maybe.fromNull(this.memory[\"isImport\"])\n        .map(x => !x)\n        .orSome(true);\n\n      mesh.setEnabled(isVisible);\n      parentView.addNodeItem2Tree(map, null, is2sendServer, isVisible);\n      memory.ground.dispose();\n      memory.ground = DefaultScene.createMeshGround(scene, width, height);\n      this.memory[\"isImport\"] = false;\n    });\n  }\n\n  action(parentView) {\n    super.action(parentView);\n    const maybeNode = parentView.getNodeFromTree(this.name);\n    maybeNode.orElseRun(() => {\n      const isImport = this.memory[\"isImport\"];\n      // you shouldn't be able to undo when importing a scene. isImport prevents removing the map when you undo.\n      // firstTimeLoad condition to prevent adding a map when fast map switch, TODO: doesn't work\n      if (isImport) {\n        this.addMap(parentView);\n        this.firstTimeLoad = false;\n      } else {\n        parentView.getUndoManager().doIt(this.getUndoAction(parentView));\n      }\n    });\n    parentView.setSelectedAction(ACTIONS().orbit);\n  }\n\n  getUndoAction(parentView) {\n    if (parentView.getObjectTree().length < 2) {\n      return UndoManager.actionBuilder()\n        .doAction(() => {\n          this.addMap(parentView);\n        })\n        .undoAction(({ is2UpdateInServer = true }) => {\n          const name = parentView.getObjectTree()[1].title;\n          parentView.deleteNodeFromTreeUsingName(name, is2UpdateInServer);\n        })\n        .build();\n    } else {\n      const oldMapName = parentView.getObjectTree()[1].title;\n      const newMapName = this.name;\n      return UndoManager.actionBuilder()\n        .doAction(() => {\n          this.switchMaps(oldMapName, newMapName, parentView);\n        })\n        .undoAction(({ is2UpdateInServer = true }) => {\n          parentView.deleteNodeFromTreeUsingName(newMapName, is2UpdateInServer);\n          Maybe.fromNull(\n            AssetsManager.getInstance().getAssetsActionMap()[oldMapName]\n          ).forEach(a => a.action(parentView));\n        })\n        .build();\n    }\n  }\n\n  switchMaps(oldMapName, newMapName, parentView) {}\n\n  getType = () => AddMapAction.TYPE;\n\n  deleteAsset = () => {};\n\n  download = async () => {};\n\n  static TYPE = \"AddMapAction\";\n}\n\nexport default AddMapAction;\n","import Action from \"./Action\";\nimport React from \"react\";\nimport { ACTIONS } from \"../MainView/MainViewActions\";\nimport MeshLoader from \"../Utils/MeshLoader\";\nimport { Maybe } from \"monet\";\nimport Mesh from \"../NodeItem/Mesh\";\nimport { Vector3, Quaternion, Color3, StandardMaterial } from \"@babylonjs/core\";\nimport { UndoManager } from \"mov-fe-lib-core\";\n\n//\nclass AddMeshAction extends Action {\n  constructor(mesh) {\n    super();\n    this.key = mesh.id;\n    this.name = mesh.name;\n    this.icon = props => <i {...props} className=\"fas fa-draw-polygon\"></i>;\n  }\n\n  action(parentView) {\n    super.action(parentView);\n    console.log(`Mesh ${this.key} : ${this.name}`, this.memory);\n    this.addMesh(parentView);\n    parentView.setSelectedAction(ACTIONS().dragObjects);\n  }\n\n  addMesh = parentView => {\n    parentView.getSceneMemory().forEach(memory => {\n      const { scene } = memory;\n      const actionMemoryClone = { ...this.memory };\n      const isImport = this.getIsImport(actionMemoryClone);\n      const finalName = this.getFinalNameFromMemory(\n        actionMemoryClone,\n        isImport\n      );\n      if (isImport) {\n        this.loadMesh(\n          parentView,\n          scene,\n          actionMemoryClone,\n          isImport,\n          finalName\n        );\n      } else {\n        parentView\n          .getUndoManager()\n          .doIt(\n            this.getUndoAbleAction(\n              parentView,\n              scene,\n              actionMemoryClone,\n              isImport,\n              finalName\n            )\n          );\n      }\n    });\n    this.memory[\"isImport\"] = false;\n  };\n\n  getIsImport(memory) {\n    return ofNull(memory[\"isImport\"]).orSome(false);\n  }\n\n  getFinalNameFromMemory(memory, isImport) {\n    return ofNull(memory[\"nodeItemDict\"])\n      .flatMap(d => (isImport ? some(d.name) : none()))\n      .orSome(`${this.name}${Math.floor(Math.random() * 100)}`);\n  }\n\n  getUndoAbleAction(parentView, scene, actionMemory, isImport, finalName) {\n    return UndoManager.actionBuilder()\n      .doAction(() => {\n        this.loadMesh(parentView, scene, actionMemory, isImport, finalName);\n      })\n      .undoAction(({ is2UpdateInServer = true }) => {\n        parentView.deleteNodeFromTreeUsingName(finalName, is2UpdateInServer);\n      })\n      .build();\n  }\n\n  loadMesh(parentView, scene, actionMemory, isImport, finalName) {\n    MeshLoader.of(scene)\n      .load(this.key)\n      .then(this.transformMesh(parentView, scene, actionMemory, isImport))\n      .then(this.addMesh2Scene(parentView, actionMemory, isImport, finalName));\n  }\n\n  transformMesh = (parentView, scene, actionMemory, isImport) => mesh => {\n    const parentMesh = this.getParentMesh(parentView);\n    mesh.parent = parentMesh;\n    mesh.createNormals();\n    const maybeDict = ofNull(actionMemory[\"nodeItemDict\"]);\n    mesh.position = maybeDict\n      .flatMap(d => (isImport ? some(d.position) : none()))\n      .map(Vector3.FromArray)\n      .orSome(Vector3.Zero());\n    mesh.rotationQuaternion = maybeDict\n      .flatMap(d => (isImport ? some(d.quaternion) : none()))\n      .map(\n        quaternion =>\n          new Quaternion(\n            quaternion[1],\n            quaternion[2],\n            quaternion[3],\n            quaternion[0]\n          )\n      )\n      .orSome(Quaternion.Identity());\n    const material = new StandardMaterial(`Mesh${mesh.name}`, scene);\n    const color = maybeDict\n      .flatMap(d => (isImport ? some(d.color) : none()))\n      .map(Color3.FromArray)\n      .orSome(Color3.Gray());\n    material.diffuseColor = color;\n    material.emissiveColor = color;\n    mesh.material = material;\n    return mesh;\n  };\n\n  addMesh2Scene = (parentView, actionMemory, isImport, finalName) => mesh => {\n    const parentMesh = this.getParentMesh(parentView);\n    mesh.name = finalName;\n    const meshItem = new Mesh(\n      mesh,\n      this.name,\n      ofNull(actionMemory[\"nodeItemDict\"])\n        .flatMap(x => (isImport ? some(x.keyValueMap) : none()))\n        .orSome({})\n    );\n\n    parentView.addNodeItem2Tree(meshItem, parentMesh.name, !isImport);\n    parentView.renderMenus();\n  };\n\n  getParentMesh = parentView => {\n    return ofNull(this.memory[\"parentObj\"])\n      .map(parentObj => parentObj.parent)\n      .flatMap(parentName => parentView.getNodeFromTree(parentName))\n      .map(treeNode => treeNode.item.mesh)\n      .orSome(parentView.getRootNode().item.mesh);\n  };\n\n  getType = () => AddMeshAction.TYPE;\n  static TYPE = \"AddMeshAction\";\n\n  deleteAsset = () => {};\n\n  download = async () => {};\n}\n\nconst ofNull = Maybe.fromNull;\nconst none = Maybe.none;\nconst some = Maybe.some;\nexport default AddMeshAction;\n","import { Maybe } from \"monet\";\nimport MouseKeysAction from \"./MouseKeysAction\";\nimport BoxRegion from \"../NodeItem/BoxRegion\";\nimport Vec3 from \"../Math/Vec3\";\nimport Util3d from \"../Util3d/Util3d\";\nimport React from \"react\";\nimport { Color3 } from \"@babylonjs/core\";\nimport { UndoManager } from \"mov-fe-lib-core\";\n\nclass BoxRegionAction extends MouseKeysAction {\n  constructor() {\n    super();\n    this.key = \"drawBoxRegion\";\n    this.name = \"Draw Box Region [3]\";\n    this.maybeMousePos = Maybe.none();\n    this.tempMesh = null;\n    this.icon = props => <i className=\"fas fa-square\" {...props} />;\n  }\n\n  action = parentView => {\n    super.action(parentView);\n    parentView.setSelectedAction(this);\n  };\n\n  onPointerDown = (evt, parentView) => {\n    if (!(evt.buttons === 1)) return;\n    parentView.getSceneMemory().forEach(memory => {\n      const scene = memory.scene;\n      const ground = memory.ground;\n      const camera = memory.camera;\n      const maybeMousePos = Util3d.getGroundPosition(scene, ground);\n      this.maybeMousePos = maybeMousePos;\n      maybeMousePos.forEach(mousePos => {\n        camera.detachControl(memory.canvas);\n      });\n    });\n  };\n\n  onPointerMove = (evt, parentView) => {\n    parentView.getSceneMemory().forEach(memory => {\n      const scene = memory.scene;\n      const ground = memory.ground;\n      const maybeCurrent = Util3d.getGroundPosition(scene, ground);\n      maybeCurrent.forEach(current => {\n        this.maybeMousePos.forEach(oldMousePos => {\n          if (this.tempMesh) this.tempMesh.dispose();\n          this.tempMesh = this.createBoxRegion(\n            [oldMousePos, current],\n            TEMP_BOX_REGION_NAME,\n            scene,\n            parentView,\n            false\n          );\n        });\n      });\n    });\n  };\n\n  onPointerUp = (evt, parentView) => {\n    parentView.getSceneMemory().forEach(memory => {\n      const scene = memory.scene;\n      const camera = memory.camera;\n      const ground = memory.ground;\n      const maybeCurrent = Util3d.getGroundPosition(scene, ground);\n      maybeCurrent.forEach(current => {\n        this.maybeMousePos.forEach(oldMousePos => {\n          if (current.subtract(oldMousePos).length() < 1e-2) return;\n          this.tempMesh.dispose();\n          const name = `BoxRegion${Math.floor(Math.random() * 1e3)}`;\n          const boxMesh = this.createBoxRegion(\n            [oldMousePos, current],\n            name,\n            scene,\n            parentView,\n            true\n          );\n          parentView.setPropertiesWithName(name);\n          parentView\n            .getUndoManager()\n            .addIt(\n              this.getUndoAbleAction(\n                [oldMousePos, current],\n                boxMesh,\n                scene,\n                parentView\n              )\n            );\n        });\n      });\n      this.maybeMousePos = Maybe.none();\n      camera.attachControl(memory.canvas, true);\n    });\n  };\n\n  getUndoAbleAction(points, mesh, scene, parentView) {\n    return UndoManager.actionBuilder()\n      .doAction(() => {\n        this.createBoxRegion(points, mesh.name, scene, parentView, true);\n      })\n      .undoAction(({ is2UpdateInServer = true }) => {\n        parentView.deleteNodeFromTreeUsingName(mesh.name, is2UpdateInServer);\n      })\n      .build();\n  }\n\n  createBoxRegion = (\n    region,\n    name,\n    scene,\n    parentView,\n    is2addInServer = true,\n    color = Color3.Red(),\n    height = 1\n  ) => {\n    const rootMesh = parentView.getRootNode().item.mesh;\n\n    const localRegion = region.map(r =>\n      Util3d.getLocalCoordFromWorld({ parent: rootMesh }, Vec3.ofBabylon(r))\n    );\n\n    localRegion[1] = localRegion[1].add(Vec3.of([0, 0, height]));\n    const middlePoint = localRegion[0].add(localRegion[1]).scale(0.5);\n    const centeredRegion = localRegion.map(r => r.sub(middlePoint));\n\n    const boxRegionItem = BoxRegion.ofDict(\n      scene,\n      {\n        name: name,\n        position: middlePoint.toArray(),\n        color: [color.r, color.g, color.b],\n        corners: centeredRegion.map(x => x.toArray())\n      },\n      parentView\n    );\n    boxRegionItem.mesh.parent = rootMesh;\n    if (is2addInServer) {\n      parentView.addNodeItem2Tree(boxRegionItem, rootMesh.name, is2addInServer);\n    }\n    return boxRegionItem.mesh;\n  };\n}\n\nconst TEMP_BOX_REGION_NAME = \"temp_box_region\";\nexport default BoxRegionAction;\n","import Util3d from \"../Util3d/Util3d\";\nimport Vec3 from \"../Math/Vec3\";\nimport { Maybe } from \"monet\";\nimport MouseKeysAction from \"./MouseKeysAction\";\nimport React from \"react\";\nimport { Vector3 } from \"@babylonjs/core\";\nimport { UndoManager } from \"mov-fe-lib-core\";\nimport Clipboard from \"../Utils/Clipboard\";\nimport { selectOneAction } from \"../Utils/Utils\";\nimport SelectionPlaceHolder from \"../Util3d/SelectionPlaceHolder\";\nimport MeshSelector from \"../MainView/MeshSelector\";\nimport Vec2 from \"../Math/Vec2\";\nimport ReactDOM from \"react-dom\";\nimport TreeObject from \"../TreeObject/TreeObject\";\nimport GlobalRef from \"../NodeItem/GlobalRef\";\nimport GraphItem from \"../NodeItem/GraphItem\";\nimport Map from \"../NodeItem/Map\";\nimport Path from \"../NodeItem/Path\";\n\nclass DragObjectsAction extends MouseKeysAction {\n  constructor() {\n    super();\n    this.key = \"dragObject\";\n    this.name = \"Grab Objects [1]\";\n    this.icon = props => <i className=\"far fa-hand-paper\" {...props}></i>;\n    this.maybeSelectedMesh = Maybe.none();\n    this.clickPointInWorld = Vec3.ZERO;\n    this.movePointInWorld = Vec3.ZERO;\n    this.startDivPos = Vec2.ZERO;\n    this.corners = [];\n  }\n\n  action = parentView => {\n    super.action(parentView);\n    parentView.setSelectedAction(this);\n  };\n\n  onPointerDown = (evt, parentView) => {\n    if (!(evt.buttons === 1 || evt.buttons === 2) || evt.ctrlKey) return;\n    parentView.getSceneMemory().forEach(({ scene, ground }) => {\n      this.maybeSelectedMesh = Util3d.pickMesh(scene, ground);\n      this.maybeSelectedMesh.forEach(currentMesh =>\n        this.dragDownMesh(currentMesh, parentView, evt)\n      );\n      this.maybeSelectedMesh.orLazy(() => {\n        this.dragDownWithoutMesh(parentView, evt);\n      });\n    });\n  };\n\n  onPointerMove = (evt, parentView) => {\n    if (!(evt.buttons === 1) || evt.ctrlKey) return;\n    parentView.getSceneMemory().forEach(({ scene, ground }) => {\n      // check that a mesh was selected\n      this.maybeSelectedMesh.forEach(selectedMesh => {\n        Util3d.getGroundPosition(scene, ground).forEach(groundPos => {\n          this.dragMoveMesh(parentView, groundPos);\n        });\n      });\n      this.maybeSelectedMesh.orLazy(() => {\n        this.dragMoveWithoutMesh(evt);\n      });\n    });\n  };\n\n  onPointerUp = (evt, parentView) => {\n    parentView.getSceneMemory().forEach(({ camera, scene, ground, canvas }) => {\n      this.maybeSelectedMesh.forEach(selectedMesh => {\n        this.dragUpMesh(selectedMesh, parentView, scene, ground);\n      });\n      this.maybeSelectedMesh.orLazy(() => {\n        this.dragUpWithoutMesh(parentView, scene);\n      });\n      // reset action\n      camera.attachControl(canvas, true);\n      this.maybeSelectedMesh = Maybe.none();\n      this.destroySelectionDiv();\n      this.corners = [];\n    });\n  };\n\n  onKeyUp = (evt, parentView) => {\n    const predicateActionList = [\n      {\n        predicate: e => [\"Backspace\", \"Delete\"].includes(e.code),\n        action: this.getDeleteAction(parentView)\n      },\n      {\n        predicate: e => e.ctrlKey && e.code === \"KeyC\",\n        action: this.getCopyAction(parentView)\n      },\n      {\n        predicate: e => e.ctrlKey && e.code === \"KeyV\",\n        action: this.getPasteAction(parentView)\n      }\n    ];\n    selectOneAction(predicateActionList)(evt);\n  };\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                         UTILS                                        *\n   *                                                                                      */\n  //========================================================================================\n\n  dragDownMesh(currentMesh, parentView, evt) {\n    if (currentMesh.isStatic) return;\n    parentView.getSceneMemory().forEach(({ camera, canvas, scene, ground }) => {\n      camera.detachControl(canvas);\n      this.addSelectedMesh(evt, currentMesh, parentView);\n      this.handleMeshRightClick(evt, parentView, currentMesh);\n      Util3d.getGroundPosition(scene, ground).forEach(groundPos => {\n        this.updateMouseVars(groundPos);\n        // mesh onClick\n        currentMesh.onClick\n          ? currentMesh.onClick()\n          : parentView.closeContextDial();\n\n        if (currentMesh.isSelectionPlaceHolder) {\n          parentView.addGizmo2Mesh(\n            currentMesh,\n            () => {\n              this.notifyObservers(currentMesh, false, Vec3.ZERO, parentView);\n            },\n            () => {\n              this.notifyObservers(currentMesh, true, Vec3.ZERO, parentView);\n            }\n          );\n        } else {\n          this.selectMeshUpdateUI(parentView);\n        }\n      });\n    });\n  }\n\n  selectMeshUpdateUI(parentView) {\n    const meshSelector = MeshSelector.ofMainView(parentView);\n    const selectionPlaceHolder = SelectionPlaceHolder.ofMainView(parentView);\n    const selectedMeshes = meshSelector.meshes();\n    parentView.highlightMeshesInScene(selectedMeshes);\n    parentView.highlightNodesInTree(selectedMeshes.map(({ name }) => name));\n    if (selectedMeshes.length > 1) {\n      parentView.addGizmo2Name();\n      selectionPlaceHolder.clear();\n      selectionPlaceHolder.push(selectedMeshes);\n      this.setProperties(parentView, selectedMeshes[0].name);\n    } else {\n      selectionPlaceHolder.clear();\n      parentView.addGizmo2Name();\n      selectedMeshes.forEach(mesh => {\n        parentView.addGizmo2Name(mesh.name);\n        this.setProperties(parentView, mesh.name);\n      });\n    }\n  }\n\n  dragDownWithoutMesh(parentView, evt) {\n    parentView\n      .getMouseCoordsFromRoot()\n      .forEach(mousePosRoot =>\n        this.handleRightClickWithoutMesh(evt, parentView, mousePosRoot)\n      );\n    parentView.getSceneMemory().forEach(({ camera, canvas, scene }) => {\n      if (evt.shiftKey) {\n        camera.detachControl(canvas);\n        this.createSelectionDiv(evt);\n        this.corners.push(Vec2.of(scene.pointerX, scene.pointerY));\n      }\n    });\n  }\n\n  dragMoveMesh(parentView, groundPos) {\n    const meshSelector = MeshSelector.ofMainView(parentView);\n    const meshes = meshSelector.meshes();\n    const selector = SelectionPlaceHolder.ofMainView(parentView);\n    const newMousePosInWorld = Vec3.ofBabylon(groundPos);\n    const v = newMousePosInWorld.sub(this.movePointInWorld);\n    meshes.forEach(mesh => {\n      let vLocal = Util3d.getLocalCoordFromWorld(mesh, v, false);\n      vLocal = new Vector3(vLocal.x, vLocal.y, 0);\n      mesh.position = mesh.position.add(vLocal);\n      this.notifyObservers(mesh, false, v, parentView);\n    });\n    if (meshes.length > 1) {\n      let vLocal = Util3d.getLocalCoordFromWorld(selector.mesh, v, false);\n      vLocal = new Vector3(vLocal.x, vLocal.y, 0);\n      selector.mesh.position = selector.mesh.position.add(vLocal);\n    }\n    this.movePointInWorld = newMousePosInWorld;\n  }\n\n  dragMoveWithoutMesh(evt) {\n    this.updateSelectionDiv(evt);\n  }\n\n  dragUpMesh(selectedMesh, parentView, scene, ground) {\n    const meshSelector = MeshSelector.ofMainView(parentView);\n    const meshes = meshSelector.meshes();\n    const selectPlaceHolder = SelectionPlaceHolder.ofMainView(parentView);\n    Util3d.getGroundPosition(scene, ground).forEach(groundPos => {\n      const groundPosInWorld = Vec3.ofBabylon(groundPos);\n      const bigDisplacement = groundPosInWorld.sub(this.clickPointInWorld);\n      const isBigDisplacement = bigDisplacement.length() > 1e-3;\n      meshes.forEach(mesh => {\n        // TODO: find better way without edge if\n        const isBigDisplaceOrIsEdgeMesh =\n          isBigDisplacement || !!mesh.edgeIndexes;\n        this.notifyObservers(\n          mesh,\n          isBigDisplaceOrIsEdgeMesh,\n          Vec3.ZERO,\n          parentView\n        );\n        if (isBigDisplacement) parentView.updateNodeInServer(mesh.name);\n      });\n      this.setProperties(parentView, selectedMesh.name);\n      if (isBigDisplacement) {\n        parentView\n          .getUndoManager()\n          .addIt(this.getUndoAbleAction(meshes, bigDisplacement, parentView));\n      }\n      if (selectedMesh.isSelectionPlaceHolder) {\n        meshSelector.clear();\n        meshSelector.addArray(selectPlaceHolder.arrayOfMeshes);\n      }\n      this.mergePathsIfAny(selectedMesh, parentView, scene, ground);\n    });\n  }\n\n  dragUpWithoutMesh(parentView, scene) {\n    this.selectObjectsInside(scene, parentView);\n  }\n\n  handleMeshRightClick = (evt, parentView, mesh) => {\n    if (!(evt.buttons === 2)) return;\n    if (!mesh || !mesh.getMouseContextActions) return;\n    parentView.setMouseContextActions(\n      evt,\n      mesh.getMouseContextActions(parentView)\n    );\n  };\n\n  /**\n   * @param evt: event\n   * @param parentView: MainView\n   * @param mousePosFromRoot: Vector3\n   */\n  handleRightClickWithoutMesh = (evt, parentView, mousePosFromRoot) => {\n    if (!(evt.buttons === 2)) return;\n    parentView.setMouseContextActions(evt, [\n      {\n        title: \"Paste\",\n        onClick: this.getPasteOnClick(mousePosFromRoot, parentView)\n      }\n    ]);\n  };\n\n  updateMouseVars(groundPos) {\n    const groundPosInGlobal = Vec3.ofBabylon(groundPos);\n    this.movePointInWorld = groundPosInGlobal;\n    this.clickPointInWorld = groundPosInGlobal;\n  }\n\n  addSelectedMesh(evt, currentMesh, parentView) {\n    const meshSelector = MeshSelector.ofMainView(parentView);\n    // is an edge mesh\n    if (!!currentMesh.edgeIndexes) {\n      meshSelector.clear();\n      meshSelector.add(currentMesh);\n      return;\n    }\n    // not an edge mesh\n    meshSelector.filter(mesh => !mesh.edgeIndexes);\n    if (evt.shiftKey) {\n      meshSelector.add(currentMesh);\n    } else {\n      if (meshSelector.has(currentMesh)) return;\n      meshSelector.clear();\n      meshSelector.add(currentMesh);\n    }\n  }\n\n  getPasteOnClick = (mousePosFromRoot, parentView) => () => {\n    const pasteAction = Clipboard.paste();\n    if (pasteAction && typeof pasteAction === \"function\") {\n      pasteAction(mousePosFromRoot, parentView);\n    }\n  };\n\n  getDeleteAction(parentView) {\n    return () => {\n      const meshSelector = MeshSelector.ofMainView(parentView);\n      const meshes = meshSelector.meshes();\n      const isOne = meshes.length === 1;\n      meshes.forEach(mesh => {\n        const maybeNode = parentView.getNodeFromTree(mesh.name);\n        maybeNode.forEach(node => parentView.onDeleteNode(node, isOne, isOne));\n        maybeNode.orElseRun(() => {\n          if (!isOne) return;\n          mesh.onDel && mesh.onDel();\n        });\n      });\n      parentView.highlightNodesInTree();\n      parentView.highlightMeshesInScene();\n      parentView.addGizmo2Mesh();\n      meshSelector.clear();\n      SelectionPlaceHolder.ofMainView(parentView).clear();\n      parentView.renderMenus();\n    };\n  }\n\n  getCopyAction(parentView) {\n    const meshSelector = MeshSelector.ofMainView(parentView);\n    const meshes = meshSelector.meshes();\n    const selectPlaceHolderMesh = SelectionPlaceHolder.ofMainView(parentView)\n      .mesh;\n    return () => {\n      if (meshes.length <= 1) {\n        this.copyOne(meshes);\n      } else {\n        this.copyMany(meshes, selectPlaceHolderMesh);\n      }\n    };\n  }\n\n  copyOne(meshes) {\n    Clipboard.copy((mousePosFromRoot, someMainView) => {\n      const uuid = Clipboard.getUID();\n      const itemCopyFunctions = meshes\n        .filter(mesh => !!mesh.nodeItem)\n        .map(mesh => mesh.nodeItem)\n        .map(item => item.getCopyFunction(true, name => name + \"_copy\" + uuid));\n      if (itemCopyFunctions.length === 0) return;\n      const doAction = () => {\n        const maybeCopiedItem = itemCopyFunctions[0](\n          mousePosFromRoot,\n          someMainView\n        );\n        maybeCopiedItem.forEach(item => {\n          const copiedMesh = item.mesh;\n          someMainView.addGizmo2Name(copiedMesh.name);\n          someMainView.highlightMeshesInScene([copiedMesh]);\n          someMainView.highlightNodesInTree([copiedMesh.name]);\n          MeshSelector.ofMainView(someMainView).clear().add(copiedMesh);\n          someMainView.setProperties(item.toForm());\n          someMainView.renderMenus();\n        });\n        return maybeCopiedItem;\n      };\n      const maybeCopiedItem = doAction();\n      someMainView.getUndoManager().addIt(\n        UndoManager.actionBuilder()\n          .doAction(doAction)\n          .undoAction(() => {\n            maybeCopiedItem.forEach(({ mesh: copiedMesh }) => {\n              someMainView.deleteNodeFromTreeUsingName(copiedMesh.name);\n              someMainView.highlightMeshesInScene();\n              someMainView.highlightNodesInTree();\n              someMainView.renderMenus();\n            });\n          })\n          .build()\n      );\n    });\n  }\n\n  copyMany(meshes, selectPlaceHolderMesh) {\n    Clipboard.copy((mousePosFromRoot, someMainView) => {\n      const nodeItems = meshes\n        .filter(mesh => !!mesh.nodeItem)\n        .map(mesh => mesh.nodeItem);\n      const uuids = nodeItems.map(() => Clipboard.getUID());\n      const itemCopyFunctions = nodeItems.map((item, i) =>\n        item.getCopyFunction(false, name => name + \"_copy\" + uuids[i])\n      );\n      const doAction = () => {\n        const maybeCopiedItems = itemCopyFunctions.map(\n          (itemCopyFunction, i) => {\n            const displacement = Util3d.toGlobalCoord(someMainView)(\n              nodeItems[i].mesh.absolutePosition\n            ).subtract(selectPlaceHolderMesh.position);\n            return itemCopyFunction(\n              displacement.add(mousePosFromRoot),\n              someMainView\n            );\n          }\n        );\n        const copiedItems = maybeCopiedItems\n          .filter(maybe => maybe.isSome())\n          .map(maybe => maybe.some());\n        const copiedMeshes = copiedItems.map(({ mesh }) => mesh);\n        const copiedNames = copiedItems.map(({ name }) => name);\n        someMainView.addGizmo2Name();\n        someMainView.highlightMeshesInScene(copiedMeshes);\n        someMainView.highlightNodesInTree(copiedNames);\n        MeshSelector.ofMainView(someMainView).clear().addArray(copiedMeshes);\n        SelectionPlaceHolder.ofMainView(someMainView)\n          .clear()\n          .push(copiedMeshes);\n        someMainView.renderMenus();\n        someMainView.forceUpdate();\n        return copiedItems;\n      };\n      const copiedItems = doAction();\n      someMainView.getUndoManager().addIt(\n        UndoManager.actionBuilder()\n          .doAction(doAction)\n          .undoAction(() => {\n            copiedItems.forEach(({ mesh }) => {\n              someMainView.deleteNodeFromTreeUsingName(mesh.name, true, false);\n            });\n            someMainView.highlightMeshesInScene();\n            someMainView.highlightNodesInTree();\n            MeshSelector.ofMainView(someMainView).clear();\n            SelectionPlaceHolder.ofMainView(someMainView).clear();\n            someMainView.renderMenus();\n            someMainView.forceUpdate();\n          })\n          .build()\n      );\n    });\n  }\n\n  getPasteAction(parentView) {\n    return () => {\n      parentView\n        .getMouseCoordsFromRoot()\n        .forEach(mousePosRoot =>\n          this.getPasteOnClick(mousePosRoot, parentView)()\n        );\n    };\n  }\n\n  /**\n   *\n   * @param {*} mesh: Mesh\n   * @param {*} is2updateServer: Boolean\n   * @param {*} displacement: Vec3 in world coordinates\n   */\n  notifyObservers(mesh, is2updateServer, displacement, parentView) {\n    // notify  babylonjs observers\n    Maybe.fromNull(mesh.observers).forEach(obs => {\n      obs.notifyObservers({\n        updatedPointMesh: mesh,\n        is2updateServer: is2updateServer,\n        displacement: displacement.toBabylon()\n      });\n    });\n    // notify graph observers\n    Maybe.fromNull(mesh.graphVertex).forEach(({ vertexObs }) => {\n      vertexObs({\n        updatedPointMesh: mesh,\n        is2updateServer: is2updateServer,\n        displacement: displacement.toBabylon()\n      });\n    });\n    if (parentView.getNodeFromTree(mesh.name).isSome()) {\n      this.notifyChildrenObserversRecursively(\n        mesh?._children || [],\n        is2updateServer,\n        displacement,\n        parentView\n      );\n    }\n  }\n\n  notifyChildrenObserversRecursively = (\n    nodeTree,\n    is2updateServer,\n    displacement,\n    parentView\n  ) => {\n    nodeTree.forEach(m => {\n      if (\n        (!!m.observers || !!m.graphVertex) &&\n        parentView.getNodeFromTree(m.name).isSome()\n      ) {\n        this.notifyObservers(m, is2updateServer, displacement, parentView);\n      }\n      if (m._children && m._children.length)\n        this.notifyChildrenObserversRecursively(\n          m._children,\n          is2updateServer,\n          displacement,\n          parentView\n        );\n    });\n  };\n\n  setProperties = (parentView, name) => parentView.setPropertiesWithName(name);\n\n  /**\n   *\n   * @param {*} selectedMeshes: Array<Mesh>\n   * @param {*} displacement: Vec3 in world coordinates\n   * @param {*} parentView: MainView\n   */\n  getUndoAbleAction(selectedMeshes, displacement, parentView) {\n    const meshesStruct = [...selectedMeshes].map(m => ({\n      mesh: m,\n      parent: m.parent,\n      keypointIndex: m.index || -1\n    }));\n    const sendMesh = (mesh, finalDisplacement, is2UpdateInServer = true) => {\n      const localDisplacement = Util3d.getLocalCoordFromWorld(\n        mesh,\n        finalDisplacement,\n        false\n      );\n      const newPos = Vec3.ofBabylon(mesh.position).add(localDisplacement);\n      mesh.position = newPos.toBabylon();\n      this.notifyObservers(\n        mesh,\n        is2UpdateInServer,\n        finalDisplacement,\n        parentView\n      );\n    };\n    const moveMesh = (dir = 1, is2UpdateInServer = true) => ({\n      mesh,\n      parent,\n      keypointIndex\n    }) => {\n      const finalDisplacement = displacement.scale(dir);\n      let maybeNodeItem = Maybe.None();\n      if (keypointIndex >= 0) {\n        maybeNodeItem = parentView.getNodeFromTree(parent.name);\n        maybeNodeItem.forEach(({ item }) => {\n          const nodeMesh = item.keyPoints[keypointIndex];\n          sendMesh(nodeMesh, finalDisplacement, is2UpdateInServer);\n          if (is2UpdateInServer) parentView.updateNodeInServer(item.name);\n        });\n        maybeNodeItem.orElseRun(() => {});\n      } else {\n        maybeNodeItem = parentView.getNodeFromTree(mesh.name);\n        maybeNodeItem.forEach(({ item }) => {\n          const nodeMesh = item.mesh;\n          sendMesh(nodeMesh, finalDisplacement, is2UpdateInServer);\n          if (is2UpdateInServer) parentView.updateNodeInServer(nodeMesh.name);\n        });\n      }\n      maybeNodeItem.orElseRun(() => {\n        sendMesh(mesh, finalDisplacement, is2UpdateInServer);\n        if (is2UpdateInServer) parentView.updateNodeInServer(mesh.name);\n      });\n    };\n    return UndoManager.actionBuilder()\n      .doAction(() => {\n        meshesStruct.forEach(moveMesh());\n      })\n      .undoAction(({ is2UpdateInServer = true }) => {\n        meshesStruct.forEach(moveMesh(-1, is2UpdateInServer));\n      })\n      .build();\n  }\n\n  createSelectionDiv(e) {\n    this.startDivPos = this.findMouseInDom(e);\n    const { x, y } = this.startDivPos;\n    const outerDiv = document.createElement(\"div\");\n    outerDiv.id = ID;\n    document.body.appendChild(outerDiv);\n    ReactDOM.render(\n      <SelectDiv left={x} top={y}></SelectDiv>,\n      document.getElementById(ID)\n    );\n  }\n\n  updateSelectionDiv(e) {\n    const newMouse = this.findMouseInDom(e);\n    const oldMouse = this.startDivPos;\n    const { x: minX, y: minY } = newMouse.op(oldMouse, Math.min);\n    const { x: maxX, y: maxY } = newMouse.op(oldMouse, Math.max);\n    const outerDiv = document.getElementById(ID);\n    if (!outerDiv) return;\n    ReactDOM.render(\n      <SelectDiv\n        left={minX}\n        top={minY}\n        width={maxX - minX}\n        height={maxY - minY}\n        style={{ zIndex: 999 }}\n      ></SelectDiv>,\n      outerDiv\n    );\n  }\n\n  destroySelectionDiv() {\n    const outerDiv = document.getElementById(ID);\n    if (!outerDiv) return;\n    outerDiv.parentNode.removeChild(outerDiv);\n  }\n\n  findMouseInDom(e) {\n    const x = e.clientX; //x position within the element.\n    const y = e.clientY; //y position within the element.\n    return new Vec2(x, y);\n  }\n\n  selectObjectsInside(scene, parentView) {\n    if (this.corners.length === 0) return;\n    this.corners.push(Vec2.of(scene.pointerX, scene.pointerY));\n    const [oldMouse, newMouse] = this.corners;\n    const min = newMouse.op(oldMouse, Math.min);\n    const max = newMouse.op(oldMouse, Math.max);\n    const cornersDiv = [min, Vec2.of(max.x, min.y), max, Vec2.of(min.x, max.y)];\n    const rayCastCorners = cornersDiv.map(p => this.pickPoints(p, parentView));\n    if (rayCastCorners.some(x => x === null || x === undefined)) return;\n    const treeObj = new TreeObject(parentView.getObjectTree());\n    const insideBox = treeObj.flatten(\n      this.isItemInsideBox(rayCastCorners, parentView)\n    );\n    let insideBoxDragAbleMeshes = insideBox.map(({ item }) => item.mesh);\n    const meshSelector = MeshSelector.ofMainView(parentView);\n    meshSelector.clear();\n    if (insideBoxDragAbleMeshes.length !== 0) {\n      meshSelector.addArray(insideBoxDragAbleMeshes, false);\n    }\n    this.selectMeshUpdateUI(parentView);\n  }\n\n  /**\n   *\n   * @param {*} p: Vec2 point in canvas\n   * @param {*} parentView: MainView\n   */\n  pickPoints(p, parentView) {\n    return parentView\n      .getSceneMemory()\n      .flatMap(memory => {\n        const { scene, ground } = memory;\n        const pickInfo = scene.pick(p.x, p.y, mesh => mesh === ground);\n        if (pickInfo.hit) {\n          const floorPoint = Util3d.toGlobalCoord(parentView)(\n            pickInfo.pickedPoint\n          );\n          return Maybe.some(Vec2.of(floorPoint.x, floorPoint.y));\n        }\n        return Maybe.none();\n      })\n      .orNull();\n  }\n\n  /**\n   *\n   * @param {*} polygon: Array<Vec2>\n   * @param {*} parentView\n   */\n  isItemInsideBox(polygon, parentView) {\n    return ({ item }) => {\n      const type = item.getType();\n      if (\n        type === GlobalRef.TYPE ||\n        type === Map.TYPE ||\n        type === GraphItem.TYPE ||\n        item?.mesh?.isSelectionPlaceHolder\n      )\n        return false;\n      const { mesh } = item;\n      return this.isMeshInsideBox(polygon, parentView)(mesh);\n    };\n  }\n\n  /**\n   *\n   * @param {*} polygon: Array<Vec2>\n   * @param {*} parentView\n   */\n  isMeshInsideBox(polygon, parentView) {\n    return mesh => {\n      const p = Util3d.toGlobalCoord(parentView)(mesh.absolutePosition);\n      const planeP = new Vec2(p.x, p.y);\n      return this.isPointInsideBox(polygon)(planeP);\n    };\n  }\n\n  /**\n   *\n   * @param {*} polygon: Array<Vec2>\n   * @param {*} epsilon: Number\n   */\n  isPointInsideBox(polygon, epsilon = 1e-3) {\n    return p => {\n      let theta = 0;\n      const n = polygon.length;\n      for (let i = 0; i < n; i++) {\n        const vi = polygon[i].sub(p);\n        const vii = polygon[(i + 1) % n].sub(p);\n        theta += Math.acos(vi.dot(vii) / (vi.length() * vii.length()));\n      }\n      return Math.abs(theta - 2 * Math.PI) < epsilon;\n    };\n  }\n\n  /**\n   *\n   * Merge paths if boundary keypoints are dragged together and have same orientation\n   *\n   * @param {*} selectedMesh\n   * @param {*} parentView\n   * @param {*} scene\n   * @param {*} ground\n   * @returns\n   */\n  mergePathsIfAny(selectedMesh, parentView, scene, ground) {\n    if (!Path.isKeyPointMesh(selectedMesh, parentView)) return;\n    const pickInfo = scene.pick(\n      scene.pointerX,\n      scene.pointerY,\n      mesh => mesh !== ground && mesh.isEnabled()\n    );\n    if (pickInfo.hit) {\n      const ray = pickInfo.ray;\n      var hits = scene.multiPickWithRay(ray);\n      if (hits) {\n        const keyPointHits = hits\n          .map(({ pickedMesh }) => pickedMesh)\n          .filter(hitMesh => Path.isKeyPointMesh(hitMesh, parentView));\n        // Are hits a keypoint of path\n        if (keyPointHits.length >= 2) {\n          const [first, second] = keyPointHits;\n          const left = first.index > second.index ? first : second;\n          const right = first.index <= second.index ? first : second;\n          // do they belong to the same path\n          if (left.parent.name !== right.parent.name) {\n            if (Path.areKeyPointsCompatible(left, right, parentView)) {\n              parentView\n                .getNodeFromTree(left.parent.name)\n                .forEach(({ item: firstPath }) => {\n                  parentView\n                    .getNodeFromTree(right.parent.name)\n                    .forEach(({ item: secondPath }) => {\n                      const oldPaths = [firstPath, secondPath].map(path => {\n                        return {\n                          parent: path.mesh.parent,\n                          dict: path.toDict(),\n                          children: [...path.mesh._children]\n                        };\n                      });\n                      const mergeName = firstPath.name + \"_\" + secondPath.name;\n                      parentView.getUndoManager().doIt(\n                        UndoManager.actionBuilder()\n                          .doAction(() => {\n                            Path.mergePaths(\n                              firstPath.name,\n                              secondPath.name,\n                              mergeName,\n                              parentView\n                            );\n                          })\n                          .undoAction(({ is2UpdateInServer = true }) => {\n                            Path.unMergePaths(\n                              oldPaths,\n                              mergeName,\n                              parentView,\n                              is2UpdateInServer\n                            );\n                          })\n                          .build()\n                      );\n                    });\n                });\n            }\n          }\n        }\n      }\n    }\n  }\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                     SELECTION DIV                                    *\n *                                                                                      */\n//========================================================================================\n\nconst SelectDiv = ({ left, top, width, height, style }) => {\n  return (\n    <div\n      style={{\n        position: \"absolute\",\n        top: top,\n        left: left,\n        width: width,\n        height: height,\n        borderRadius: 10,\n        border: \"solid\",\n        borderColor: \"#c7c7c7\",\n        ...style\n      }}\n    ></div>\n  );\n};\nSelectDiv.defaultProps = {\n  left: 0,\n  top: 0,\n  width: 0,\n  height: 0\n};\nconst ID = \"SELECTION_TOOL_ID\";\n//========================================================================================\n/*                                                                                      *\n *                                        EXPORT                                        *\n *                                                                                      */\n//========================================================================================\n\nexport default DragObjectsAction;\n","import MouseKeysAction from \"./MouseKeysAction\";\nimport React from \"react\";\nimport Util3d from \"../Util3d/Util3d\";\nimport { Color3 } from \"@babylonjs/core\";\nimport GraphItem from \"../NodeItem/GraphItem\";\nimport Constants from \"../Utils/Constants\";\nimport { UndoManager } from \"mov-fe-lib-core\";\nimport { selectOneAction } from \"../Utils/Utils\";\nimport Path from \"../NodeItem/Path\";\nimport { Maybe } from \"monet\";\nimport GlobalRef from \"../NodeItem/GlobalRef\";\n\nclass DrawGraphAction extends MouseKeysAction {\n  constructor() {\n    super();\n    this.key = \"drawGraph\";\n    this.name = \"Draw Graph [6]\";\n    this.icon = props => <i className=\"fas fa-project-diagram\" {...props}></i>;\n\n    this.previewMeshes = [];\n    this.firstMousePos = undefined;\n    this.firstClickedMesh = undefined;\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                            Mouse Key Action Implementation                           *\n   *                                                                                      */\n  //========================================================================================\n\n  action = parentView => {\n    super.action(parentView);\n    parentView.setSelectedAction(this);\n    // Make LogicGraph visible when action is selected\n    parentView.getGraph().forEach(node => {\n      if (!node.isVisible) {\n        node.item.mesh.setEnabled(true);\n      }\n    });\n  };\n\n  onPointerDown = (evt, parentView) => {\n    if (!(evt.buttons === 1)) return;\n    this.mousePosConsumer(parentView)((mousePos, memory) => {\n      const { scene, ground } = memory;\n      const maybeMesh = Util3d.pickMesh(scene, ground).filter(\n        this.isConnectableMesh(parentView)\n      );\n      maybeMesh.forEach(possibleMesh => {\n        parentView.highlightMeshesInScene([possibleMesh], Color3.Green());\n        this.onPointerDownLine(mousePos, possibleMesh, memory, parentView);\n      });\n      maybeMesh.orElseRun(() => {\n        // no mesh found\n        parentView.highlightMeshesInScene();\n        this.resetPreview();\n      });\n    });\n  };\n\n  onPointerMove = (evt, parentView) => {\n    this.mousePosConsumer(parentView)((mousePos, memory) => {\n      const { scene, ground } = memory;\n      Util3d.pickMesh(scene, ground)\n        .filter(this.isConnectableMesh(parentView))\n        .cata(\n          () => parentView.highlightMeshesInScene(),\n          pickedMesh =>\n            parentView.highlightMeshesInScene([pickedMesh], Color3.Green())\n        );\n      if (!this.firstMousePos) return;\n      this.onPointerMoveLine(mousePos, memory, parentView);\n    });\n  };\n\n  onPointerUp = (evt, parentView) => {};\n\n  onKeyUp = (evt, parentView) => {\n    const escapeAction = () => this.resetPreview();\n    const predicateActionList = [\n      {\n        predicate: e => [\"Backspace\", \"Delete\", \"Escape\"].includes(e.code),\n        action: escapeAction\n      }\n    ];\n    selectOneAction(predicateActionList)(evt);\n  };\n\n  onChange() {\n    this.resetPreview();\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                  Auxiliary functions                                  *\n   *                                                                                      */\n  //========================================================================================\n\n  resetPreview = () => {\n    if (!!this.firstMousePos) {\n      this.deletePreviewMeshes();\n      this.firstMousePos = undefined;\n      this.firstClickedMesh = undefined;\n    }\n  };\n\n  deletePreviewMeshes = () => {\n    this.previewMeshes.forEach(mesh => mesh.dispose());\n    this.previewMeshes = [];\n  };\n\n  mousePosConsumer = parentView => lambda => {\n    parentView.getSceneMemory().forEach(memory => {\n      const { scene, ground } = memory;\n      const maybeCurrent = Util3d.getGroundPosition(scene, ground);\n      maybeCurrent.forEach(mousePos => lambda(mousePos, memory));\n    });\n  };\n\n  /**\n   * returns a predicate(mesh => boolean) that tells if a mesh is connectable by an edge\n   * @param {*} parentView\n   */\n  isConnectableMesh = parentView => mesh => {\n    return parentView\n      .getNodeFromTree(mesh.name)\n      .cata(\n        () => {\n          // mesh is not a nodeItem, check if mesh parent is a path and is beginning or end of path\n          const parentName = mesh?.parent?.name || \"\";\n          return parentView\n            .getNodeFromTree(parentName)\n            .filter(({ item }) => item.getType() === Path.TYPE)\n            .filter(({ item }) => {\n              const index = mesh.index;\n              return index === 0 || index === item.keyPoints.length - 1;\n            });\n        },\n        ({ item }) => {\n          // mesh is a nodeItem, check if not path\n          return Maybe.some(mesh).filter(\n            _ =>\n              item.getType() !== Path.TYPE && item.getType() !== GlobalRef.TYPE\n          );\n        }\n      )\n      .orSome(false);\n  };\n\n  belongsToPath = parentView => mesh => {\n    const parentName = mesh?.parent?.name || \"\";\n    return parentView\n      .getNodeFromTree(parentName)\n      .filter(({ item }) => item.getType() === Path.TYPE)\n      .map(({ item }) => item.name);\n  };\n\n  belongs2SamePath = parentView => (meshI, meshJ) => {\n    const belongsToPath = this.belongsToPath(parentView);\n    return belongsToPath(meshI)\n      .flatMap(nameI => belongsToPath(meshJ).map(nameJ => nameI === nameJ))\n      .orSome(false);\n  };\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                       Line Edge                                      *\n   *                                                                                      */\n  //========================================================================================\n\n  onPointerDownLine = (mousePos, clickedMesh, memory, parentView) => {\n    const { scene } = memory;\n    if (!this.firstMousePos) {\n      this.firstMousePos = mousePos;\n      this.firstClickedMesh = clickedMesh;\n    } else {\n      //firstMousePos exists\n      if (\n        this.belongs2SamePath(parentView)(clickedMesh, this.firstClickedMesh) ||\n        GraphItem.isInvalidEdge(this.firstClickedMesh, clickedMesh)\n      ) {\n        this.resetPreview();\n      } else {\n        parentView\n          .getUndoManager()\n          .doIt(\n            this.getUndoAbleLineEdge(\n              [this.firstClickedMesh, clickedMesh],\n              scene,\n              parentView,\n              clickedMesh\n            )\n          );\n      }\n    }\n  };\n\n  getUndoAbleLineEdge = (edgeMeshes, scene, parentView) => {\n    return UndoManager.actionBuilder()\n      .doAction(() => {\n        this.createEdge(edgeMeshes, scene, parentView);\n        this.resetPreview();\n      })\n      .undoAction(({ is2UpdateInServer = true }) => {\n        this.deleteEdge(edgeMeshes, parentView, is2UpdateInServer);\n      })\n      .build();\n  };\n\n  onPointerMoveLine = (mousePos, memory, parentView) => {\n    // preview line\n    const visibility = 0.25;\n    const { scene } = memory;\n    const rootMesh = parentView.getRootNode().item.mesh;\n    const edgeEmbedding = toGlobalCoord(parentView)([\n      this.firstMousePos,\n      mousePos\n    ]);\n    this.deletePreviewMeshes();\n    this.previewMeshes = [\n      GraphItem.getEdgeMesh(\n        scene,\n        edgeEmbedding,\n        \"previewEdge\",\n        Color3.Blue(),\n        Constants.RADIUS / 4\n      )\n    ];\n    this.previewMeshes.forEach(mesh => {\n      mesh.visibility = visibility;\n      mesh.parent = rootMesh;\n      mesh.isPickable = false;\n    });\n  };\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                    Draw functions                                    *\n   *                                                                                      */\n  //========================================================================================\n\n  createEdge = (edgeMeshes, scene, parentView) => {\n    GraphItem.createGraphItemIfNone(scene, parentView);\n    parentView.getGraph().forEach(graphNode => {\n      const { item: graphItem } = graphNode;\n      graphItem.addEdge(...edgeMeshes);\n      parentView.updateNodeInServer(graphItem.name);\n    });\n  };\n\n  deleteEdge = (edgeMeshes, parentView, is2UpdateInServer) => {\n    parentView.getGraph().forEach(graphNode => {\n      const { item: graphItem } = graphNode;\n      graphItem.delEdge(...edgeMeshes);\n      if (is2UpdateInServer) parentView.updateNodeInServer(graphItem.name);\n    });\n  };\n}\n\nconst toGlobalCoord = Util3d.toGlobalCoord;\nexport default DrawGraphAction;\n","import Util3d from \"../Util3d/Util3d\";\nimport Vec3 from \"../Math/Vec3\";\nimport Path from \"../NodeItem/Path\";\nimport MouseKeysAction from \"./MouseKeysAction\";\nimport React from \"react\";\nimport { Color3 } from \"@babylonjs/core\";\nimport { UndoManager } from \"mov-fe-lib-core\";\nimport { selectOneAction } from \"../Utils/Utils\";\nimport Constants from \"../Utils/Constants\";\n\nclass DrawPathAction extends MouseKeysAction {\n  constructor() {\n    super();\n    this.key = \"drawPath\";\n    this.name = \"Draw Path [2]\";\n    this.icon = props => <i className=\"fas fa-bezier-curve\" {...props}></i>;\n    this.mouseCurve = [];\n    this.spherePlaceHolder = { dispose: () => {}, isDisposed: () => true };\n  }\n\n  action = parentView => {\n    super.action(parentView);\n    parentView.setSelectedAction(this);\n  };\n\n  onChange = parentView => {\n    if (this.mouseCurve.length > 1) {\n      parentView.getSceneMemory().forEach(({ scene }) => {\n        parentView\n          .getUndoManager()\n          .doIt(\n            this.getUndoAbleEnterAction(this.mouseCurve, scene, parentView)\n          );\n      });\n    }\n  };\n\n  onPointerDown = (evt, parentView) => {\n    if (!(evt.buttons === 1)) return;\n    if (!this.spherePlaceHolder.isDisposed()) {\n      this.createPointInCurve(parentView);\n      return;\n    }\n    parentView.getSceneMemory().forEach(memory => {\n      const { scene, ground, camera, canvas } = memory;\n      const maybeMousePos = Util3d.getGroundPosition(scene, ground);\n      maybeMousePos.forEach(mousePos => {\n        camera.detachControl(canvas);\n        this.mouseCurve.push(mousePos);\n        parentView\n          .getUndoManager()\n          .doIt(\n            this.getUndoAbleClickAction(\n              this.mouseCurve,\n              scene,\n              parentView,\n              memory\n            )\n          );\n      });\n    });\n  };\n\n  getUndoAbleClickAction = (\n    keyPoints,\n    scene,\n    parentView,\n    { camera, canvas }\n  ) => {\n    const kps = keyPoints.map(x => Vec3.ofBabylon(x));\n    return UndoManager.actionBuilder()\n      .doAction(() => {\n        const finalKps = kps.length === 1 ? [kps[0], kps[0]] : [...kps];\n        parentView.deleteNodeFromTreeUsingName(TEMP_PATH_NAME, false, false);\n        this.createCurve(finalKps, TEMP_PATH_NAME, scene, parentView, false);\n        if (kps.length <= 2) {\n          parentView.setContextActions(\n            this.getDrawPathContextAction(camera, canvas, scene)\n          );\n        }\n        this.mouseCurve = [...kps];\n      })\n      .undoAction(({ is2UpdateInServer = true }) => {\n        parentView.deleteNodeFromTreeUsingName(\n          TEMP_PATH_NAME,\n          is2UpdateInServer\n        );\n        const reducedKps = kps.slice(0, kps.length - 1);\n        const finalKps =\n          reducedKps.length === 1 ? [reducedKps[0], reducedKps[0]] : reducedKps;\n        if (is2UpdateInServer) {\n          reducedKps.length > 0 &&\n            this.createCurve(\n              finalKps,\n              TEMP_PATH_NAME,\n              scene,\n              parentView,\n              false\n            );\n          this.mouseCurve = reducedKps;\n        } else {\n          this.mouseCurve = [];\n        }\n      })\n      .build();\n  };\n\n  onPointerMove = (evt, parentView) => {\n    this.addKeyPointPlaceHolder(parentView);\n  };\n\n  onPointerUp = (evt, parentView) => {\n    // empty\n  };\n\n  onKeyUp = (evt, parentView) => {\n    parentView.getSceneMemory().forEach(memory => {\n      const { scene, camera, canvas } = memory;\n      const contextActions = this.getDrawPathContextAction(\n        camera,\n        canvas,\n        scene\n      );\n      const actions = [\n        {\n          predicate: e => e.code === \"Enter\" || e.code === \"NumpadEnter\",\n          action: () => contextActions[1].action(parentView)\n        },\n        {\n          predicate: e => e.code === \"Delete\" || e.code === \"Backspace\",\n          action: () => contextActions[0].action(parentView)\n        },\n        {\n          predicate: e => e.code === \"Escape\",\n          action: () => {\n            contextActions[0].action(parentView);\n          }\n        }\n      ];\n      selectOneAction(actions)(evt);\n    });\n  };\n\n  /**\n   *\n   * @param {*} curve: Array<Vector3>\n   * @param {*} name: String\n   * @param {*} scene: Scene\n   * @param {*} parentView: MainView\n   * @param {*} is2addInServer: Boolean\n   * @param {*} color: Color3\n   */\n  createCurve = (\n    curve,\n    name,\n    scene,\n    parentView,\n    is2addInServer = true,\n    color = Color3.Gray()\n  ) => {\n    const rootMesh = parentView.getRootNode().item.mesh;\n    const localCurve = Util3d.toGlobalCoord(parentView)(curve);\n    const middlePoint = Util3d.pointAverage(localCurve);\n    const centeredCurve = localCurve.map(w => w.subtract(middlePoint));\n\n    const pathItem = Path.ofDict(\n      scene,\n      {\n        name: name,\n        position: Vec3.ofBabylon(middlePoint).toArray(),\n        color: [color.r, color.g, color.b],\n        localPath: centeredCurve.map(z => Vec3.ofBabylon(z).toArray())\n      },\n      parentView\n    );\n    pathItem.mesh.parent = rootMesh;\n    parentView.addNodeItem2Tree(\n      pathItem,\n      rootMesh.name,\n      is2addInServer,\n      true,\n      is2addInServer\n    );\n    return pathItem;\n  };\n\n  getDrawPathContextAction = (camera, canvas, scene) => {\n    const ans = [];\n    ans.push({\n      icon: props => <i className=\"fas fa-trash\" {...props}></i>,\n      action: parentView => {\n        camera.attachControl(canvas, true);\n        parentView.deleteNodeFromTreeUsingName(TEMP_PATH_NAME, false);\n        this.mouseCurve = [];\n        parentView.closeContextDial();\n      },\n      name: \"Clear Path [ESC | DEL | Backspace]\"\n    });\n    if (this.mouseCurve.length > 1) {\n      ans.push({\n        icon: props => <i className=\"fas fa-check\" {...props}></i>,\n        action: parentView => {\n          camera.attachControl(canvas, true);\n          parentView\n            .getUndoManager()\n            .doIt(\n              this.getUndoAbleEnterAction(this.mouseCurve, scene, parentView)\n            );\n        },\n        name: \"Create Path [Enter]\"\n      });\n    }\n    return ans;\n  };\n\n  getUndoAbleEnterAction(keyPoints, scene, parentView) {\n    const kps = [...keyPoints];\n    const name = `Path${Math.floor(Math.random() * 1e3)}`;\n    return UndoManager.actionBuilder()\n      .doAction(() => {\n        parentView.deleteNodeFromTreeUsingName(TEMP_PATH_NAME, false);\n        const pathItem = this.createCurve(kps, name, scene, parentView, true);\n        this.mouseCurve = [];\n        parentView.setPropertiesWithName(name);\n        parentView.closeContextDial();\n        if (pathItem && pathItem.keyPoints) {\n          const keyPointMeshes = pathItem.keyPoints;\n          Path.addEdgesInKeyPoints(keyPointMeshes, scene, parentView);\n        }\n      })\n      .undoAction(({ is2UpdateInServer = true }) => {\n        this.deleteEdgeInKeyPoints(name, parentView, is2UpdateInServer);\n        parentView.deleteNodeFromTreeUsingName(name, is2UpdateInServer);\n        if (is2UpdateInServer) {\n          this.createCurve(kps, TEMP_PATH_NAME, scene, parentView, false);\n          this.mouseCurve = kps;\n        } else {\n          this.mouseCurve = [];\n          parentView.deleteNodeFromTreeUsingName(TEMP_PATH_NAME, false);\n        }\n      })\n      .build();\n  }\n\n  deleteEdgeInKeyPoints(pathName, parentView, is2UpdateInServer = true) {\n    parentView.getGraph().forEach(({ item: graph }) => {\n      parentView.getNodeFromTree(pathName).forEach(({ item: pathItem }) => {\n        const keyPointMeshes = pathItem.keyPoints;\n        const edgeMeshes = [\n          keyPointMeshes[0],\n          keyPointMeshes[keyPointMeshes.length - 1]\n        ];\n        graph.delEdge(...edgeMeshes);\n        if (is2UpdateInServer) parentView.updateNodeInServer(graph.name);\n      });\n    });\n  }\n\n  addKeyPointPlaceHolder(parentView) {\n    this.spherePlaceHolder.dispose();\n    parentView.getSceneMemory().forEach(({ scene, ground }) => {\n      Util3d.pickMesh(scene, ground).forEach(mesh => {\n        if (mesh.name === TEMP_PATH_NAME) return;\n        parentView.getNodeFromTree(mesh.name).forEach(({ item: nodeItem }) => {\n          if (nodeItem.getType() === Path.TYPE) {\n            Util3d.getGroundPosition(scene, ground).forEach(groundPos => {\n              const rootMesh = parentView.getRootNode().item.mesh;\n              this.spherePlaceHolder = Util3d.createSphere(\n                scene,\n                Color3.Gray(),\n                Constants.RADIUS,\n                \"sphereInsertPlaceHolder\",\n                false\n              );\n              this.spherePlaceHolder.parent = rootMesh;\n              this.spherePlaceHolder.position = Util3d.toGlobalCoord(\n                parentView\n              )(groundPos);\n              this.spherePlaceHolder.visibility = 0.5;\n            });\n          }\n        });\n      });\n    });\n  }\n\n  createPointInCurve(parentView) {\n    parentView.getSceneMemory().forEach(({ scene, ground }) => {\n      // dispose mesh before pick mesh\n      this.spherePlaceHolder.dispose();\n      // it can be shown that the picked mesh is the curve we want to edit\n      Util3d.pickMesh(scene, ground).forEach(({ name }) => {\n        parentView.getNodeFromTree(name).forEach(({ item: pathItem }) => {\n          Util3d.getGroundPosition(scene, ground).forEach(groundPos => {\n            const oldPoints = [...pathItem.localPath].map(p =>\n              Vec3.of(p).toBabylon()\n            );\n            const oldPosition = pathItem.mesh.position;\n            parentView.getUndoManager().doIt(\n              UndoManager.actionBuilder()\n                .doAction(() => {\n                  this.insertPointInCurve(\n                    scene,\n                    parentView,\n                    pathItem,\n                    groundPos\n                  );\n                  parentView.updateNodeInServer(pathItem.name);\n                })\n                .undoAction(({ is2UpdateInServer = true }) => {\n                  Path.createNewMeshFromOldUsingNewPoints(\n                    oldPoints,\n                    scene,\n                    pathItem,\n                    parentView,\n                    Path.onAddNewPointKeyPointUpdate\n                  );\n                  pathItem.mesh.position = oldPosition;\n                  if (is2UpdateInServer)\n                    parentView.updateNodeInServer(pathItem.name);\n                })\n                .build()\n            );\n          });\n        });\n      });\n    });\n  }\n\n  insertPointInCurve(scene, parentView, pathItem, groundPosInWorld) {\n    const localGround = Util3d.getLocalCoordFromWorld(\n      { parent: pathItem.mesh },\n      Vec3.ofBabylon(groundPosInWorld)\n    );\n    const localPath = pathItem.localPath.map(p => Vec3.of(p));\n    const sortedDistances = localPath\n      .map((p, i) => ({\n        distance: localGround.sub(p).length(),\n        index: i\n      }))\n      .sort((a, b) => a.distance - b.distance);\n    // all paths have 2 points at least\n    const minIndex = Math.min(\n      sortedDistances[0].index,\n      sortedDistances[1].index\n    );\n    const localPathB = localPath.map(p => p.toBabylon());\n    const newPoints = [\n      ...localPathB.slice(0, minIndex + 1),\n      localGround.toBabylon(),\n      ...localPathB.slice(minIndex + 1)\n    ];\n    Path.createNewMeshFromOldUsingNewPoints(\n      newPoints,\n      scene,\n      pathItem,\n      parentView,\n      Path.onAddNewPointKeyPointUpdate\n    );\n  }\n}\n\nconst TEMP_PATH_NAME = \"temp_curve\";\nexport default DrawPathAction;\n","import Util3d from \"../Util3d/Util3d\";\nimport MouseKeysAction from \"./MouseKeysAction\";\nimport React from \"react\";\nimport { MeshBuilder } from \"@babylonjs/core\";\nimport { AdvancedDynamicTexture, TextBlock } from \"@babylonjs/gui/2D\";\nimport Vec2 from \"../Math/Vec2\";\n\nclass MeasureAction extends MouseKeysAction {\n  constructor() {\n    super();\n    this.key = \"drawWall\";\n    this.name = \"Measure [7]\";\n    this.icon = props => <i className=\"fas fa-ruler\" {...props}></i>;\n    this.ruler = []; // can only have two elements, start point and end point\n    this.rulerMesh = null;\n    this.advancedTexture = null;\n    this.text = null;\n  }\n\n  action = parentView => {\n    super.action(parentView);\n    parentView.setSelectedAction(this);\n  };\n\n  onChange = parentView => {\n    this.resetMeasure(parentView);\n  };\n\n  onPointerDown = (evt, parentView) => {\n    if (evt.button !== 0) {\n      return;\n    }\n    parentView.getSceneMemory().forEach(({ scene, ground, camera, canvas }) => {\n      Util3d.getGroundPosition(scene, ground).forEach(current => {\n        const currentMousePos = Util3d.toGlobalCoord(parentView)(current);\n        this.ruler.push(currentMousePos);\n        if (this.ruler.length > 2) {\n          this.resetMeasure(parentView);\n        } else if (this.ruler.length === 2) {\n          // remove temp mesh\n          this.rulerMesh && this.rulerMesh.dispose();\n          this.rulerMesh = this.createRulerMesh(this.ruler, scene, parentView);\n          this.addTextGUI(\n            scene,\n            this.calculateDistance(this.ruler[0], currentMousePos),\n            evt\n          );\n          camera.attachControl(canvas, true);\n        } else {\n          camera.detachControl(canvas);\n        }\n      });\n    });\n  };\n\n  onPointerMove = (evt, parentView) => {\n    parentView.getSceneMemory().forEach(({ scene, ground }) => {\n      Util3d.getGroundPosition(scene, ground).forEach(current => {\n        const currentMousePos = Util3d.toGlobalCoord(parentView)(current);\n        // If the user pressed the mouse wheel or is rotating the view, it will delete the ruler\n        if (\n          this.ruler.length >= 2 &&\n          (evt.buttons === 4 || evt.pressure === 0.5)\n        ) {\n          this.resetMeasure(parentView);\n        }\n        // Fixed one point so display the ruler real time\n        if (this.ruler.length === 1) {\n          // Remove previous element from Mesh to not overlap\n          this.rulerMesh && this.rulerMesh.dispose();\n          this.rulerMesh = this.createRulerMesh(\n            [this.ruler[0], currentMousePos],\n            scene,\n            parentView\n          );\n          this.addTextGUI(\n            scene,\n            this.calculateDistance(this.ruler[0], currentMousePos),\n            evt\n          );\n        }\n      });\n    });\n  };\n\n  onPointerUp = (evt, parentView) => {};\n\n  onWheel = (evt, parentView) => {\n    if (Math.abs(evt.deltaY) > 0) {\n      this.resetMeasure(parentView);\n    }\n  };\n\n  // Calculate 2D distance from starting of ruler to the end of ruler\n  calculateDistance = (start, end) => {\n    const startVec = Vec2.ofBabylon(start);\n    const endVec = Vec2.ofBabylon(end);\n    return startVec.sub(endVec).length().toFixed(3);\n  };\n\n  addTextGUI = function (scene, value, evt) {\n    // TODO: maybe should use mouse coordinates  advanced texture from mainView\n    if (!this.advancedTexture) {\n      this.advancedTexture = AdvancedDynamicTexture.CreateFullscreenUI(\n        \"UI Ruler\",\n        true,\n        scene\n      );\n    }\n    this.text && this.advancedTexture.removeControl(this.text);\n    this.text = new TextBlock();\n    this.text.text = `${value}m`;\n    this.text.fontSize = 17;\n    this.text.left = scene.pointerX - evt.target.width / 2 + 20;\n    this.text.top = scene.pointerY - evt.target.height / 2 + 20;\n    this.text.color = \"white\";\n    this.advancedTexture.addControl(this.text);\n  };\n\n  resetMeasure(parentView) {\n    this.rulerMesh && this.rulerMesh.dispose();\n    this.text && this.text.dispose();\n    this.ruler = [];\n    parentView &&\n      parentView.getSceneMemory().forEach(({ camera, canvas }) => {\n        camera.attachControl(canvas, true);\n      });\n  }\n\n  createRulerMesh(points, scene, parentView) {\n    const rulerMesh = MeshBuilder.CreateLines(\n      \"ruler\",\n      {\n        points: points,\n        updatable: true\n      },\n      scene\n    );\n    const rootMesh = parentView.getRootNode().item.mesh;\n    rulerMesh.parent = rootMesh;\n    return rulerMesh;\n  }\n}\n\nexport default MeasureAction;\n","import Action from \"./Action\";\n\nclass MouseKeysAction extends Action {\n  onPointerDown(evt, parentView) {\n    // to be implemented on sub classes\n  }\n\n  onPointerMove(evt, parentView) {\n    // to be implemented on sub classes\n  }\n\n  onPointerUp(evt, parentView) {\n    // to be implemented on sub classes\n  }\n\n  onKeyUp(evt, parentView) {\n    // to be implemented on sub classes\n  }\n\n  onWheel(evt, parentView) {\n    // to be implemented on sub classes\n  }\n}\n\nexport default MouseKeysAction;\n","import MouseKeysAction from \"./MouseKeysAction\";\nimport React from \"react\";\nimport Util3d from \"../Util3d/Util3d\";\nimport { Maybe } from \"monet\";\nimport Constants from \"../Utils/Constants\";\nimport Vec3 from \"../Math/Vec3\";\n// import JsonToReact from \"../../_shared/JsonToReact/JsonToReact\";\nimport NavigationPreviewItem from \"../NodeItem/NavigationPreviewItem\";\nimport { UndoManager } from \"mov-fe-lib-core\";\n\nclass NavigationPreviewAction extends MouseKeysAction {\n  /**\n   *\n   * @param {*} uIInOut: (title, reactFactory) => {}\n   */\n  constructor(uIInOut) {\n    super();\n    this.key = \"navigationPreviewAction\";\n    this.name = \"Add navigation preview [8]\";\n    this.icon = props => <i className=\"fas fa-road\" {...props}></i>;\n    this.uIInOut = uIInOut;\n    this.maybeFirstClickPos = Maybe.none();\n    this.previewPoseMesh = undefined;\n    this.poses = [];\n    this.poseMeshes = [];\n    this.schema = {\n      jsonSchema: {\n        type: \"object\",\n        properties: {\n          type: {\n            type: \"string\",\n            title: \"Type\"\n          },\n          config: {\n            type: \"string\",\n            title: \"Robot Configuration\"\n          }\n        }\n      },\n      uiSchema: {\n        type: {\n          \"ui:disabled\": true\n        },\n        config: {\n          \"ui:widget\": \"selectScopeModal\",\n          \"ui:options\": {\n            scopeList: \"Configuration\",\n            name: \"Robot Config\",\n            filter: e => true\n          }\n        }\n      },\n      data: {\n        type: NavigationPreviewItem.TYPE,\n        config: \"\"\n      }\n    };\n  }\n\n  action = parentView => {\n    setTimeout(() => {\n      this.uIInOut(\"Navigation preview params\", () => (\n        <div style={{ marginTop: \"7px\" }}>\n          {/* <JsonToReact\n            schema={this.schema.jsonSchema}\n            uiSchema={this.schema.uiSchema}\n            formData={this.schema.data}\n            onSubmit={({ formData }) => {\n              this.schema.data.config = formData.config;\n            }}\n            disable={false}\n          /> */}\n        </div>\n      ));\n    });\n    parentView.setSelectedAction(this);\n  };\n\n  onChange(parentView) {\n    parentView.renderMenus();\n    this.resetData();\n  }\n\n  onPointerDown = (evt, parentView) => {\n    if (evt.button !== 0) {\n      return;\n    }\n    parentView.getSceneMemory().forEach(({ scene, ground, camera, canvas }) => {\n      const maybeMousePos = Util3d.getGroundPosition(scene, ground);\n      maybeMousePos.forEach(mousePos => {\n        camera.detachControl(canvas);\n        if (this.poses.length >= 2) {\n          this.resetData();\n        }\n        this.maybeFirstClickPos = Maybe.some(\n          Util3d.toGlobalCoord(parentView)(mousePos)\n        );\n      });\n    });\n  };\n\n  onPointerMove = (evt, parentView) => {\n    this.maybeFirstClickPos.forEach(firstClickPos => {\n      parentView.getSceneMemory().forEach(({ scene, ground }) => {\n        const maybeMousePos = Util3d.getGroundPosition(scene, ground);\n        maybeMousePos.forEach(mousePos => {\n          const secondClickPos = Util3d.toGlobalCoord(parentView)(mousePos);\n          this.previewPoseMesh && this.previewPoseMesh.dispose();\n          this.previewPoseMesh = this.createPreviewPose(\n            scene,\n            parentView,\n            firstClickPos,\n            secondClickPos\n          );\n        });\n      });\n    });\n  };\n\n  onPointerUp = (evt, parentView) => {\n    parentView.getSceneMemory().forEach(({ scene, ground, camera, canvas }) => {\n      this.maybeFirstClickPos.forEach(firstClickPos => {\n        const maybeMousePos = Util3d.getGroundPosition(scene, ground);\n        maybeMousePos.forEach(mousePos => {\n          const secondClickPos = Util3d.toGlobalCoord(parentView)(mousePos);\n          const poseMesh = this.createPreviewPose(\n            scene,\n            parentView,\n            firstClickPos,\n            secondClickPos,\n            true\n          );\n          poseMesh.material = this.poseMeshes.push(poseMesh);\n          const first = Vec3.ofBabylon(firstClickPos);\n          const v = Vec3.ofBabylon(secondClickPos).sub(first);\n          const theta = Math.atan2(v.y, v.x);\n          this.poses.push({\n            position: first.toArray(),\n            orientation: [Math.cos(theta / 2), 0, 0, Math.sin(theta / 2)]\n          });\n          if (this.poses.length === 2) {\n            this.createNavPreviewNode(scene, parentView);\n            this.resetData();\n          }\n        });\n      });\n      camera.attachControl(canvas, true);\n      this.previewPoseMesh && this.previewPoseMesh.dispose();\n      this.maybeFirstClickPos = Maybe.none();\n    });\n  };\n\n  resetData() {\n    this.maybeFirstClickPos = Maybe.none();\n    this.previewPoseMesh && this.previewPoseMesh.dispose();\n    this.poses = [];\n    this.poseMeshes.forEach(mesh => mesh.dispose());\n    this.poseMeshes = [];\n  }\n\n  createPreviewPose(scene, parentView, start, end, normalize = false) {\n    const maxLength = 1.3;\n    const v = end.subtract(start);\n    const length = v.length();\n    const finalLength = normalize\n      ? maxLength / length\n      : Math.min(maxLength / length, length);\n    const finalEnd = start.add(v.scale(finalLength));\n\n    const arrowMesh = Util3d.getArrow(\n      scene,\n      \"previewPose\",\n      start,\n      finalEnd,\n      Constants.RADIUS / 6\n    );\n    const rootMesh = parentView.getRootNode().item.mesh;\n    arrowMesh.parent = rootMesh;\n    return arrowMesh;\n  }\n\n  createNavPreviewNode(scene, parentView) {\n    const navName = `Navigation${Math.floor(Math.random() * 1e2)}`;\n    const poses = [...this.poses];\n    const config = this.schema.data.config;\n    parentView.getUndoManager().doIt(\n      UndoManager.actionBuilder()\n        .doAction(() => {\n          const root = parentView.getRootNode().item.mesh;\n          const navPreviewNode = NavigationPreviewItem.ofDict(\n            scene,\n            {\n              name: navName,\n              poses: poses,\n              robotConfig: config\n            },\n            parentView\n          );\n          navPreviewNode.mesh.parent = root;\n          parentView.addNodeItem2Tree(navPreviewNode, root.name);\n        })\n        .undoAction(() => {\n          parentView.deleteNodeFromTreeUsingName(navName);\n        })\n        .build()\n    );\n  }\n}\n\nexport default NavigationPreviewAction;\n","import { Maybe } from \"monet\";\nimport MouseKeysAction from \"./MouseKeysAction\";\nimport React from \"react\";\n\nclass OrbitAction extends MouseKeysAction {\n  constructor() {\n    super();\n    this.key = \"orbit\";\n    this.name = \"Orbit [ESC]\";\n    this.maybeSelectedMesh = Maybe.none();\n    this.icon = props => <i className=\"fas fa-globe\" {...props}></i>;\n  }\n\n  action = parentView => {\n    super.action(parentView);\n    parentView.setSelectedAction(this);\n  };\n\n  onPointerDown = (evt, parentView) => {};\n\n  onPointerMove = (evt, parentView) => {};\n\n  onPointerUp = (evt, parentView) => {};\n}\n\nexport default OrbitAction;\n","import MouseKeysAction from \"./MouseKeysAction\";\nimport Vec3 from \"../Math/Vec3\";\nimport Util3d from \"../Util3d/Util3d\";\nimport React from \"react\";\nimport PolygonRegion from \"../NodeItem/PolygonRegion\";\nimport { Color3 } from \"@babylonjs/core\";\nimport { UndoManager } from \"mov-fe-lib-core\";\nimport { selectOneAction } from \"../Utils/Utils\";\n\n// Similar 2 Draw Action Path\nclass PolygonRegionAction extends MouseKeysAction {\n  constructor() {\n    super();\n    this.key = \"drawPolygonRegion\";\n    this.name = \"Draw Polygon Region [5]\";\n    this.mouseCurve = [];\n    this.icon = props => <i className=\"fas fa-draw-polygon\" {...props}></i>;\n  }\n\n  action = parentView => {\n    super.action(parentView);\n    parentView.setSelectedAction(this);\n  };\n\n  onChange = parentView => {\n    if (this.mouseCurve.length > 2) {\n      parentView.getSceneMemory().forEach(({ scene }) => {\n        parentView\n          .getUndoManager()\n          .doIt(\n            this.getUndoAbleEnterAction(this.mouseCurve, scene, parentView)\n          );\n      });\n    }\n  };\n\n  onPointerDown = (evt, parentView) => {\n    if (!(evt.buttons === 1)) return;\n    parentView.getSceneMemory().forEach(memory => {\n      const scene = memory.scene;\n      const ground = memory.ground;\n      const camera = memory.camera;\n      const maybeMousePos = Util3d.getGroundPosition(scene, ground);\n      maybeMousePos.forEach(mousePos => {\n        camera.detachControl(memory.canvas);\n        this.mouseCurve.push(mousePos);\n        parentView\n          .getUndoManager()\n          .doIt(\n            this.getUndoAbleClickAction(\n              this.mouseCurve,\n              scene,\n              parentView,\n              memory\n            )\n          );\n      });\n    });\n  };\n\n  getUndoAbleClickAction(keyPoints, scene, parentView, { camera, canvas }) {\n    const kps = [...keyPoints];\n    return UndoManager.actionBuilder()\n      .doAction(() => {\n        const finalKps = kps.length === 1 ? [kps[0], kps[0]] : kps;\n        parentView.deleteNodeFromTreeUsingName(\n          TEMP_POLYGON_REGION_NAME,\n          false,\n          false\n        );\n        this.createPolygonRegion(\n          finalKps,\n          TEMP_POLYGON_REGION_NAME,\n          scene,\n          parentView,\n          false\n        );\n        parentView.setContextActions(\n          this.getDrawPolygonContextAction(camera, canvas, scene)\n        );\n        this.mouseCurve = kps;\n      })\n      .undoAction(({ is2UpdateInServer = true }) => {\n        parentView.deleteNodeFromTreeUsingName(\n          TEMP_POLYGON_REGION_NAME,\n          is2UpdateInServer\n        );\n        const reducedKps = kps.slice(0, kps.length - 1);\n        const finalKps =\n          reducedKps.length === 1 ? [reducedKps[0], reducedKps[0]] : reducedKps;\n        if (is2UpdateInServer)\n          reducedKps.length > 0 &&\n            this.createPolygonRegion(\n              finalKps,\n              TEMP_POLYGON_REGION_NAME,\n              scene,\n              parentView,\n              false\n            );\n        this.mouseCurve = reducedKps;\n      })\n      .build();\n  }\n\n  getDrawPolygonContextAction = (camera, canvas, scene) => {\n    const ans = [];\n    ans.push({\n      icon: props => <i className=\"fas fa-trash\" {...props}></i>,\n      action: parentView => {\n        camera.attachControl(canvas, true);\n        parentView.deleteNodeFromTreeUsingName(TEMP_POLYGON_REGION_NAME, false);\n        this.mouseCurve = [];\n        parentView.closeContextDial();\n      },\n      name: \"Clear Polygon [ESC | DEL | Backspace]\"\n    });\n    if (this.mouseCurve.length > 2) {\n      ans.push({\n        icon: props => <i className=\"fas fa-check\" {...props}></i>,\n        action: parentView => {\n          camera.attachControl(canvas, true);\n          parentView\n            .getUndoManager()\n            .doIt(\n              this.getUndoAbleEnterAction(this.mouseCurve, scene, parentView)\n            );\n        },\n        name: \"Create Polygon [Enter]\"\n      });\n    }\n    return ans;\n  };\n\n  getUndoAbleEnterAction(keyPoints, scene, parentView) {\n    const kps = [...keyPoints];\n    const name = `PolygonRegion${Math.floor(Math.random() * 1e3)}`;\n    return UndoManager.actionBuilder()\n      .doAction(() => {\n        parentView.deleteNodeFromTreeUsingName(TEMP_POLYGON_REGION_NAME, false);\n        this.createPolygonRegion(kps, name, scene, parentView, true);\n        this.mouseCurve = [];\n        parentView.setPropertiesWithName(name);\n        parentView.closeContextDial();\n      })\n      .undoAction(({ is2UpdateInServer = true }) => {\n        parentView.deleteNodeFromTreeUsingName(name, is2UpdateInServer);\n        if (is2UpdateInServer) {\n          this.createPolygonRegion(\n            kps,\n            TEMP_POLYGON_REGION_NAME,\n            scene,\n            parentView,\n            false\n          );\n          this.mouseCurve = kps;\n        }\n      })\n      .build();\n  }\n\n  onPointerMove = (evt, parentView) => {\n    // empty\n  };\n\n  onPointerUp = (evt, parentView) => {\n    // empty\n  };\n\n  onKeyUp = (evt, parentView) => {\n    // Warning: code duplication with PathAction\n    const defaultAction = () => super.onKeyUp(evt, parentView);\n    parentView.getSceneMemory().forEach(memory => {\n      const { scene, camera, canvas } = memory;\n      const contextActions = this.getDrawPolygonContextAction(\n        camera,\n        canvas,\n        scene\n      );\n      selectOneAction(\n        [\n          {\n            predicate: e => e.code === \"Enter\" || e.code === \"NumpadEnter\",\n            action: () => contextActions[1].action(parentView)\n          },\n          {\n            predicate: e => e.code === \"Delete\" || e.code === \"Backspace\",\n            action: () => contextActions[0].action(parentView)\n          },\n          {\n            predicate: e => e.code === \"Escape\",\n            action: () => {\n              contextActions[0].action(parentView);\n            }\n          }\n        ],\n        defaultAction\n      )(evt);\n    });\n  };\n\n  createPolygonRegion = (\n    region,\n    name,\n    scene,\n    parentView,\n    is2addInServer = true,\n    color = Color3.Yellow(),\n    height = 1\n  ) => {\n    const rootMesh = parentView.getRootNode().item.mesh;\n\n    const localRegion = region.map(r =>\n      Util3d.getLocalCoordFromWorld({ parent: rootMesh }, Vec3.ofBabylon(r))\n    );\n\n    const middlePoint = Util3d.pointAverageVec3(localRegion);\n    const centeredRegion = localRegion.map(r => r.sub(middlePoint));\n\n    const polygonRegionItem = PolygonRegion.ofDict(\n      scene,\n      {\n        name: name,\n        position: middlePoint.toArray(),\n        color: [color.r, color.g, color.b],\n        localPolygon: centeredRegion.map(x => x.toArray()),\n        height: height\n      },\n      parentView\n    );\n\n    polygonRegionItem.mesh.parent = rootMesh;\n\n    parentView.addNodeItem2Tree(\n      polygonRegionItem,\n      rootMesh.name,\n      is2addInServer,\n      true,\n      is2addInServer\n    );\n  };\n}\n\nconst TEMP_POLYGON_REGION_NAME = \"temp_polygon_region\";\nexport default PolygonRegionAction;\n","import Robot from \"../NodeItem/Robot\";\nimport Action from \"./Action\";\nimport { Maybe } from \"monet\";\nimport React from \"react\";\nimport PointCloud from \"../NodeItem/PointCloud\";\nimport { ACTIONS } from \"../MainView/MainViewActions\";\nimport MeshLoader from \"../Utils/MeshLoader\";\nimport { UndoManager } from \"mov-fe-lib-core\";\n\nclass RobotAction extends Action {\n  constructor(\n    robot,\n    robotAnimatorFactory = (robot, parentView) =>\n      Robot.getDefaultAnimator(parentView)\n  ) {\n    super();\n    this.key = `robotAction${robot.name}`;\n    this.name = robot.name;\n    this.robot = robot;\n    this.robotAnimatorFactory = robotAnimatorFactory;\n    this.icon = props => <i className=\"fas fa-robot\" {...props}></i>;\n  }\n\n  action = (parentView, errorCallback = () => {}) => {\n    super.action(parentView);\n    // If robot doesn't exists: Add robot\n    parentView\n      .getNodeFromTree(this.robot.name)\n      .orElseRun(() => this.addRobot(parentView, errorCallback));\n    // If robot already exist in node tree : Update robot if mesh is different\n    parentView.getNodeFromTree(this.robot.name).forEach(({ item }) => {\n      if (!item.mesh.id.includes(this.robot.meshName)) {\n        parentView.deleteNodeFromTreeUsingName(this.name, true, true);\n        this.addRobot(parentView, errorCallback);\n      }\n    });\n    parentView.setSelectedAction(ACTIONS().dragObjects);\n  };\n\n  addRobot(parentView, errorCallback = () => {}) {\n    parentView.getSceneMemory().forEach(memory => {\n      const { scene } = memory;\n      const actionMemoryClone = { ...this.memory };\n      const isImport = actionMemoryClone[\"isImport\"];\n      if (isImport)\n        this.loadRobot(scene, parentView, actionMemoryClone, errorCallback);\n      else {\n        parentView\n          .getUndoManager()\n          .doIt(this.getUndoAbleAction(parentView, scene, actionMemoryClone));\n      }\n    });\n    this.memory[\"isImport\"] = false;\n  }\n\n  getUndoAbleAction(parentView, scene, actionMemoryClone) {\n    return UndoManager.actionBuilder()\n      .doAction(() => {\n        this.loadRobot(scene, parentView, actionMemoryClone);\n      })\n      .undoAction(({ is2UpdateInServer = true }) => {\n        parentView.deleteNodeFromTreeUsingName(this.name, is2UpdateInServer);\n      })\n      .build();\n  }\n\n  loadRobot(scene, parentView, actionMemoryClone, errorCallback = () => {}) {\n    MeshLoader.of(scene)\n      .load(this.robot.meshName)\n      .then(mesh =>\n        this.createRobotFromMesh(mesh, scene, parentView, actionMemoryClone)\n      )\n      .catch(err => errorCallback(err));\n  }\n\n  createRobotFromMesh(mesh, scene, parentView, memory) {\n    const parentMesh = this.getParentMesh(parentView);\n    const isImport = Maybe.fromNull(memory.isImport).orSome(false);\n    const isVisible = Maybe.fromNull(memory.isVisible).orSome(true);\n    mesh.setEnabled(isVisible);\n\n    const robot = this.getRobot(scene, mesh, parentMesh, parentView);\n    robot.animate(this.robotAnimatorFactory(robot, parentView));\n    parentView.addNodeItem2Tree(robot, parentMesh.name, !isImport, isVisible);\n\n    const cloudPoint = this.getCloudPoint(scene, parentView, robot);\n    parentView.addNodeItem2Tree(cloudPoint, robot.name, false, isVisible);\n  }\n\n  getRobot = (scene, mesh, parentMesh, parentView) => {\n    const meshTree = Robot.createRobotMeshTree(\n      this.robot.robotTree,\n      mesh,\n      scene\n    );\n    const dict = Maybe.fromNull(this.memory[\"nodeItemDict\"]);\n    return Robot.builder()\n      .id(this.robot.id)\n      .name(Maybe.fromNull(this.memory[\"name\"]).orSome(this.robot.name))\n      .assetName(\n        Maybe.fromNull(this.memory[\"assetName\"]).orSome(this.robot.name)\n      )\n      .meshTree(meshTree)\n      .parentMesh(parentMesh)\n      .parentView(parentView)\n      .scene(scene)\n      .keyValueMap(dict.map(x => x.keyValueMap).orSome({}))\n      .build();\n  };\n\n  getCloudPoint = (scene, parentView, robot) => {\n    const cloudPoint = PointCloud.ofDict(\n      scene,\n      { name: this.robot.name, id: this.robot.id },\n      parentView\n    );\n    cloudPoint.mesh.parent = robot.mesh;\n    return cloudPoint;\n  };\n\n  getParentMesh = parentView => {\n    return Maybe.fromNull(this.memory[\"parentObj\"])\n      .map(parentObj => parentObj.parent)\n      .flatMap(parentName => parentView.getNodeFromTree(parentName))\n      .map(treeNode => treeNode.item.mesh)\n      .orSome(parentView.getRootNode().item.mesh);\n  };\n\n  getType = () => RobotAction.TYPE;\n\n  static TYPE = \"RobotAction\";\n}\n\nexport default RobotAction;\n","import { Maybe } from \"monet\";\nimport { ASSETS_TYPES, AssetsTypesFactory } from \"../Utils/AssetsTypesFactory\";\nimport { MasterDB } from \"mov-fe-lib-core\";\nimport MapLoader from \"./MapLoader\";\nimport Robot from \"../NodeItem/Robot\";\n\n/**\n *  Graphic Assets Manager, retrieves and manages the assets that are in DB.\n */\nclass AssetsManager {\n  constructor() {\n    if (instance) return instance;\n    instance = this;\n    this.assets = {};\n    this.assetsActionMap = {};\n    this.robots = {};\n    this.observersBySceneId = {};\n    this.afterLoad = [];\n    this.finishInitialSubscribers = 0;\n    this.isLoading = true;\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                  Getters and Setters                                 *\n   *                                                                                      */\n  //========================================================================================\n\n  getAssets = () => this.assets;\n\n  getAssetsActionMap = () => this.assetsActionMap;\n\n  load = async () => {\n    await this.retrieveAssetsFromDb();\n    return this;\n  };\n\n  addAfterLoad(afterLoad) {\n    this.afterLoad.push(afterLoad);\n    return this;\n  }\n\n  addObserver(scene, observer) {\n    const sceneId = scene._uid;\n    if (!(sceneId in this.observersBySceneId)) {\n      this.observersBySceneId[sceneId] = [];\n    }\n    this.observersBySceneId[sceneId].push(observer);\n    return this;\n  }\n\n  signalObservers = () => {\n    Object.keys(this.observersBySceneId).forEach(k => {\n      this.observersBySceneId[k].forEach(obs => obs(this));\n    });\n  };\n\n  addAsset(assetKey, asset) {\n    try {\n      this.assets[assetKey] = asset;\n      this.assetsActionMap[assetKey] = AssetsTypesFactory[asset.type](asset);\n      if (!this.isLoading) this.signalObservers();\n    } catch (e) {\n      console.log(\"Caught exception while adding asset\", e);\n      throw Error(`Caught exception while adding asset ${e}`);\n    }\n  }\n\n  delAsset(assetKey) {\n    if (assetKey in this.assets) delete this.assets[assetKey];\n    if (assetKey in this.assetsActionMap) delete this.assetsActionMap[assetKey];\n    this.signalObservers();\n  }\n\n  clearObserver(scene) {\n    const sceneId = scene._uid;\n    if (sceneId in this.observersBySceneId) {\n      console.log(\"Clear asset observer\", sceneId);\n      delete this.observersBySceneId[sceneId];\n    }\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                      Subscribers                                     *\n   *                                                                                      */\n  //========================================================================================\n\n  subs = [\n    resolve =>\n      MasterDB.subscribe(\n        {\n          Scope: \"Robot\",\n          Name: \"*\",\n          RobotName: \"*\"\n        },\n        this.getRobotUpdate(),\n        (data) => this.getRobotNameSub(\n          data.value,\n          () => {\n            this.addRobots();\n            this.finishSub(\"RobotName\", resolve);\n          }\n        )\n      ),\n    resolve => \n      MasterDB.subscribe(\n        {\n          Scope: \"Robot\",\n          Name: \"*\",\n          Parameter: \"mesh\"\n        },\n        this.getRobotUpdate(),\n        (data) => this.getRobotMeshSub(\n          data.value,\n          () => {\n            this.addRobots();\n            this.finishSub(\"RobotMesh\", resolve);\n          }\n        )\n      ),\n    resolve =>\n      MasterDB.subscribe(\n        {\n          Scope: \"Package\",\n          File: \"*\",\n          Name: \"maps\",\n          FileLabel: \"*\"\n        },\n        this.getMapUpdater(({ key }) => key),\n        this.getMapSubscriber(\n          ({ value }) => value,\n          () => this.finishSub(\"Maps\", resolve)\n        )\n      ),\n    resolve =>\n      MasterDB.subscribe(\n        { Scope: \"Package\", File: \"*\", Name: \"meshes\", FileLabel: \"*\" },\n        this.getMeshUpdater(),\n        this.getMeshSubscriber(\n          ({ value }) => value,\n          () => this.finishSub(\"Meshes\", resolve)\n        )\n      )\n  ];\n\n  retrieveAssetsFromDb() {\n    return new Promise((re, rej) => {\n      this.subs.forEach(f => f(re));\n    });\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                         Utils                                        *\n   *                                                                                      */\n  //========================================================================================\n\n  finishSub = (place, resolve) => {\n    console.log(\"FINISH SUB \", place, this.finishInitialSubscribers);\n    if (++this.finishInitialSubscribers > this.subs.length - 1) {\n      this.afterLoad.forEach(f => f(this));\n      this.afterLoad = [];\n      this.isLoading = false;\n      resolve(true);\n    }\n  };\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                        Robots                                        *\n   *                                                                                      */\n  //========================================================================================\n\n  deleteRobot = id => {\n    if(!this.robots.hasOwnProperty(id)) return;\n    this.delAsset(this.robots[id].name);\n    if (id in this.robots) delete this.robots[id];\n  };\n\n  setRobot(id, name = null, meshName = null) {\n    if (!(id in this.robots)) {\n      this.robots[id] = {\n        id: id,\n        name: null,\n        meshName: null,\n      };\n    }\n    ofNull(name).forEach(name => (this.robots[id].name = name));\n    ofNull(meshName).forEach(meshName => (this.robots[id].meshName = meshName));\n  }\n\n  addRobots(robots = this.robots) {\n    Object.keys(robots).forEach((id) => {\n      if (Object.values(this.robots[id]).every(x => x !== null)) {\n        const localRobot = this.robots[id];\n        this.addAsset(\n          localRobot.name, \n          Robot.createBaseObject({robotName: localRobot.name, robotMeshName: localRobot.meshName, id })\n        );\n      }\n    })\n  }\n\n  getRobotNameSub(data, after = () => {}) {\n    ofNull(data)\n      .flatMap(maybeGet(\"Robot\"))\n      .forEach(r =>\n        Object.keys(r).forEach(id => this.setRobot(id, r[id].RobotName))\n      );\n    after();\n  }\n\n  getRobotMeshSub(data, after = () => {}) {\n    ofNull(data)\n      .flatMap(maybeGet(\"Robot\"))\n      .forEach(r =>\n        Object.keys(r).forEach(id => this.setRobot(id, r[id].RobotName, r[id].Parameter.mesh.Value))\n      );\n    Object.keys(this.robots).forEach((id) => {\n      this.robots[id].meshName = this.robots[id].meshName \n        ? this.robots[id].meshName \n        : Robot.ROBOT_MESH_NAME;\n    });\n    after();\n  }\n\n  getRobotUpdate() {\n    const actionMap = {\n      del: data => {\n        const pattern = data.patterns[0];\n        // del event from RobotName pattern\n        if(pattern.hasOwnProperty('RobotName')) {\n          ofNull(data.key)\n            .flatMap(maybeGet(\"Robot\"))\n            .forEach(r => Object.keys(r).forEach(this.deleteRobot));\n        }\n        // del event from RobotMesh pattern\n        else if(pattern.hasOwnProperty('Parameter')) {\n          ofNull(data.key)\n            .flatMap(maybeGet(\"Robot\"))\n            .forEach(r => Object.keys(r).forEach(robotId => {\n              this.robots[robotId].meshName = Robot.ROBOT_MESH_NAME;\n            }));\n        }\n      },\n      set: data => {\n        const pattern = data.patterns[0];\n        const robots = { ...data.key.Robot }\n        // set event from RobotName pattern\n        if(pattern.hasOwnProperty('RobotName'))\n          this.getRobotNameSub(data.key, () => this.addRobots(robots))\n        // set event from RobotMesh pattern\n        else if(pattern.hasOwnProperty('Parameter'))\n          this.getRobotMeshSub(data.key, () => this.addRobots(robots))\n      }\n    };\n    return data => {\n      console.log(\"Robot NAME UPDATE\", data);\n      actionMap[data.event](data);\n    };\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                         Maps                                         *\n   *                                                                                      */\n  //========================================================================================\n\n  getMapSubscriber = (dataGetter, after = () => {}) => {\n    return data =>\n      this.getMapFileData(dataGetter, data).forEach(fileName => {\n        Object.keys(fileName)\n          .filter(f => f.includes(\".yaml\"))\n          .forEach(this.addMap);\n        after();\n      });\n  };\n\n  getMapUpdater = dataGetter => {\n    const actionMap = {\n      del: data => {\n        this.getMapFileData(dataGetter, data).forEach(f => {\n          let filename = Object.keys(f)[0];\n          filename = filename.split(\".\")[0];\n          this.delAsset(filename);\n        });\n      },\n      set: this.getMapSubscriber(dataGetter),\n      subscribe: this.getMapSubscriber(dataGetter)\n    };\n    return data => {\n      console.log(\"MAP UPDATE\", data);\n      actionMap[data.event](data);\n    };\n  };\n\n  addMap = yamlSrc => {\n    const map = {\n      name: yamlSrc.split(\".\")[0],\n      loader: new MapLoader(yamlSrc),\n      type: ASSETS_TYPES.Map\n    };\n    this.addAsset(map.name, map);\n  };\n\n  getMapFileData = (dataGetter, data) =>\n    ofNull(dataGetter(data))\n      .flatMap(maybeGet(\"Package\"))\n      .flatMap(maybeGet(\"maps\"))\n      .flatMap(maybeGet(\"File\"));\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                         Mesh                                         *\n   *                                                                                      */\n  //========================================================================================\n\n  getMeshSubscriber = (dataGetter, after = () => {}) => data => {\n    this.getMeshFileData(dataGetter, data).forEach(d =>\n      Object.keys(d).forEach(id => {\n        const mesh = { id: id, name: d[id].FileLabel, type: ASSETS_TYPES.Mesh };\n        this.addAsset(mesh.name, mesh);\n      })\n    );\n    after();\n  };\n\n  getMeshUpdater = () => {\n    const actionMap = {\n      del: data => {\n        this.getMeshFileData(d => d.key, data).forEach(f => {\n          let filename = Object.keys(f)[0];\n          this.delAsset(filename);\n        });\n      },\n      set: this.getMeshSubscriber(d => d.key),\n      subscribe: this.getMeshSubscriber(d => d.key)\n    };\n    return data => actionMap[data.event](data);\n  };\n\n  getMeshFileData = (dataGetter, data) =>\n    ofNull(dataGetter(data))\n      .flatMap(maybeGet(\"Package\"))\n      .flatMap(maybeGet(\"meshes\"))\n      .flatMap(maybeGet(\"File\"));\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                        static                                        *\n   *                                                                                      */\n  //========================================================================================\n\n  static getInstance() {\n    return new AssetsManager();\n  }\n}\n\n// private variable\nlet instance = null;\n\n// auxiliary functions\nconst ofNull = Maybe.fromNull;\nconst get = prop => obj => obj[prop];\nconst dot = f => g => x => f(g(x));\nconst maybeGet = prop => dot(ofNull)(get(prop));\n\nexport default AssetsManager;\n","export default class MapLoader {\n  constructor(yamlSrc) {\n    this.yamlSrc = yamlSrc;\n    this.cachedMap = null;\n  }\n\n  async load() {\n    if (this.cachedMap) return this.cachedMap;\n    const response = await fetch(MapLoader.getMapUrl(this.yamlSrc));\n    const map = await this.parseYaml(await response.text());\n    const ans = {\n      textureSrc: map.image,\n      resolution: map.resolution,\n      origin: map.origin,\n      imageSize: map.size\n    };\n    this.cachedMap = ans;\n    return ans;\n  }\n\n  async parseYaml(yamlTxt) {\n    const ans = {};\n    const actionDict = {\n      image: (k, v) => (ans[k] = MapLoader.getMapUrl(v)),\n      resolution: (k, v) => (ans[k] = Number.parseFloat(v)),\n      origin: (k, v) => (ans[k] = JSON.parse(v))\n    };\n    console.log(\"Yaml text\", yamlTxt);\n    yamlTxt\n      .split(\"\\n\")\n      .map(s => s.split(\": \"))\n      .filter(split => split.length >= 2)\n      .filter(split => split[0] in actionDict)\n      .forEach(split => actionDict[split[0]](split[0], split[1]));\n    ans[\"size\"] = await this.getImageSize(ans[\"image\"]);\n    return ans;\n  }\n\n  getImageSize(src) {\n    return new Promise((resolve, reject) => {\n      const img = new Image();\n      img.src = src;\n      img.onload = () => resolve([img.naturalWidth, img.naturalHeight]);\n    });\n  }\n  static getMapUrl = src => `/static/maps/${src}`;\n}\n","//========================================================================================\n/*                                                                                      *\n *         Based from https://doc.babylonjs.com/resources/babylonjs_and_reactjs         *\n *                                                                                      */\n//========================================================================================\n\nimport { Engine, Scene } from \"@babylonjs/core\";\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { useTheme, makeStyles } from \"@material-ui/core/styles\";\nimport ReactResizeDetector from \"react-resize-detector\";\nimport PropTypes from \"prop-types\";\nimport { SCENE_BACKGROUND } from \"../Utils/Constants\";\nimport LoadingScreen from \"../Utils/LoadingScreen\";\nimport loader from \"../../../../resources/movai_red.svg\";\nimport { LinearProgress } from \"@material-ui/core\";\n\nconst useStyles = makeStyles(theme => {\n  return {\n    root: {\n      ...FLEX_STYLE,\n      maxHeight: \"100%\",\n      position: \"relative\"\n    },\n    loaderContainer: {\n      // backgroundColor: theme.palette.background.secondary,\n      backgroundColor: \"black\",\n      display: \"none\",\n      height: \"100%\",\n      position: \"absolute\",\n      textAlign: \"center\",\n      top: 0,\n      left: 0,\n      width: \"100%\",\n      zIndex: 1051 // Must be greater than 1050 to be on top of floating buttons\n    },\n    loaderImage: {\n      position: \"absolute\",\n      left: \"50%\",\n      top: \"50%\",\n      transform: \"translate(-50%, -50%)\"\n    }\n  };\n});\nconst FLEX_STYLE = {\n  display: \"flex\",\n  flexDirection: \"column\",\n  flexGrow: 1\n};\n\nconst BaseViewer = props => {\n  const {\n    antialias,\n    engineOptions,\n    adaptToDeviceRatio,\n    sceneOptions,\n    onRender,\n    onSceneReady,\n    is2render,\n    sceneFactory,\n    ...rest\n  } = props;\n  const theme = useTheme();\n  const classes = useStyles();\n  const reactCanvas = useRef(null);\n  const [loaded, setLoaded] = useState(false);\n  const [scene, setScene] = useState(null);\n  const [size, setSize] = useState({ width: 100, height: 100 });\n\n  const setUpScene = engine => {\n    const scene = sceneFactory\n      ? sceneFactory(engine)\n      : new Scene(engine, sceneOptions);\n    setScene(scene);\n    if (scene.isReady()) {\n      onSceneReady(scene);\n    } else {\n      scene.onReadyObservable.addOnce(scene => onSceneReady(scene));\n    }\n    return scene;\n  };\n\n  const onResize = (width, height) => {\n    setSize({\n      width,\n      height\n    });\n    scene && scene.getEngine().resize();\n  };\n\n  const renderScene = (engine, nScene) => {\n    if (!is2render) return;\n    engine.runRenderLoop(() => {\n      if (typeof onRender === \"function\") {\n        onRender(nScene);\n      }\n      nScene && nScene.render();\n    });\n  };\n\n  /* eslint-disable react-hooks/exhaustive-deps */\n  useEffect(() => {\n    if (!loaded) {\n      setLoaded(true);\n      const engine = new Engine(\n        reactCanvas.current,\n        antialias,\n        engineOptions,\n        adaptToDeviceRatio\n      );\n      // Set custom loading screen and display loading\n      const loadingScreen = new LoadingScreen();\n      engine.loadingScreen = loadingScreen;\n      // Setup and render scene\n      const newScene = setUpScene(engine);\n      renderScene(engine, newScene);\n    }\n\n    return () => {\n      console.log(\"Disposing engine and scene\");\n      scene && scene.dispose();\n      scene && scene.getEngine() && scene.getEngine().dispose();\n    };\n  }, [reactCanvas, loaded, scene]);\n  /* eslint-enable react-hooks/exhaustive-deps */\n  // loaded && reactCanvas.current.focus();\n\n  // On toggle theme update scene background color\n  useEffect(() => {\n    if (!scene) return;\n    scene.clearColor = SCENE_BACKGROUND[theme?.label || \"default\"];\n  }, [classes, theme.label, scene]);\n\n  return (\n    <div className={classes.root}>\n      <div id=\"loading-scene\" className={classes.loaderContainer}>\n        <div className={classes.loaderImage}>\n          <img src={loader} alt=\"loading\" width={200}></img>\n          <LinearProgress color=\"secondary\" style={{ marginTop: 50 }} />\n        </div>\n      </div>\n      <canvas\n        ref={reactCanvas}\n        width={size.width}\n        height={size.height}\n        {...rest}\n      />\n      <ReactResizeDetector handleWidth handleHeight onResize={onResize} />\n    </div>\n  );\n};\n\nBaseViewer.propTypes = {\n  antialias: PropTypes.bool,\n  engineOptions: PropTypes.object,\n  adaptToDeviceRatio: PropTypes.bool,\n  sceneOptions: PropTypes.object,\n  onSceneReady: PropTypes.func,\n  onRender: PropTypes.func,\n  is2render: PropTypes.bool,\n  sceneFactory: PropTypes.func\n};\n\nBaseViewer.defaultProps = {\n  antialias: true,\n  onSceneReady: scene => {},\n  is2render: true,\n  engineOptions: { preserveDrawingBuffer: true, stencil: true }\n};\n\nexport default BaseViewer;\n","import { Maybe } from \"monet\";\n\n/**\n * Undirected Graph data structure\n */\nclass Graph {\n  #adjMap = {};\n  #vertices = {};\n  #edges = {};\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                      Public API                                      *\n   *                                                                                      */\n  //========================================================================================\n\n  addVertex(i) {\n    if (!(i in this.#vertices)) {\n      this.#vertices[i] = {};\n      this.#adjMap[i] = {};\n    }\n  }\n\n  delVertex(i) {\n    if (i in this.#vertices) {\n      delete this.#vertices[i];\n      // delete neighbors edge properties\n      Object.keys(this.#adjMap[i]).forEach(j => {\n        delete this.#edges[Graph.edgeKey(i, j)];\n        delete this.#edges[Graph.edgeKey(j, i)];\n      });\n      delete this.#adjMap[i];\n      Object.keys(this.#adjMap).forEach(j => {\n        if (i in this.#adjMap[j]) {\n          delete this.#adjMap[j][i];\n        }\n      });\n    }\n  }\n\n  /**\n   *\n   * If edge already exists, this function overwrites previous edge\n   *\n   * @param {*} i: vertex id\n   * @param {*} j: vertex id\n   */\n  addEdge(i, j) {\n    this.addVertex(i);\n    this.addVertex(j);\n    const edgeProps = this.getEdge(i, j).orSome({});\n    this.#edges[Graph.edgeKey(i, j)] = edgeProps;\n    this.#edges[Graph.edgeKey(j, i)] = edgeProps;\n    this.#adjMap[i][j] = true;\n    this.#adjMap[j][i] = true;\n    return this;\n  }\n\n  delEdge(i, j) {\n    const ijKey = Graph.edgeKey(i, j);\n    const jiKey = Graph.edgeKey(j, i);\n    if (ijKey in this.#edges || jiKey in this.#edges) {\n      delete this.#edges[ijKey];\n      delete this.#edges[jiKey];\n      delete this.#adjMap[i][j];\n      delete this.#adjMap[j][i];\n    }\n    // remove vertex if have no neighbors\n    [i, j].forEach(id => {\n      const neighbors = this.getNeighbors(id);\n      if (neighbors.length === 0) {\n        this.delVertex(id);\n      }\n    });\n  }\n\n  hasEdge(i, j) {\n    return this.getEdge(i, j).isSome();\n  }\n\n  getNeighbors(i) {\n    if (i in this.#adjMap) return Object.keys(this.#adjMap[i]);\n    return [];\n  }\n\n  getEdge(i, j) {\n    const edgeKey = Graph.edgeKey(i, j);\n    if (edgeKey in this.#edges) {\n      return Maybe.some(this.#edges[edgeKey]);\n    }\n    return Maybe.none();\n  }\n\n  getVertex(i) {\n    if (i in this.#vertices) {\n      return Maybe.some(this.#vertices[i]);\n    }\n    return Maybe.none();\n  }\n\n  getEdges() {\n    return this.#edges;\n  }\n\n  getVertices() {\n    return this.#vertices;\n  }\n\n  getAdjMap() {\n    return this.#adjMap;\n  }\n\n  static edgeKey = (i, j) => `${i}_${j}`;\n  static key2Edge = key => key.split(\"_\");\n}\n\nexport default Graph;\n","import DragObjectsAction from \"../Actions/DragObjectsAction\";\nimport AddKeyPointAction from \"../Actions/AddKeyPointAction\";\nimport BoxRegionAction from \"../Actions/BoxRegionAction\";\nimport DrawPathAction from \"../Actions/DrawPathAction\";\nimport PolygonRegionAction from \"../Actions/PolygonRegionAction\";\nimport OrbitAction from \"../Actions/OrbitAction\";\nimport DrawGraphAction from \"../Actions/DrawGraphAction\";\nimport MeasureAction from \"../Actions/MeasureAction\";\nimport NavigationPreviewAction from \"../Actions/NavigationPreviewAction\";\n\n/**\n * Order Matters\n */\nexport const ACTIONS = viewOnly =>\n  viewOnly\n    ? {\n        measure: new MeasureAction(),\n        orbit: new OrbitAction()\n      }\n    : {\n        robotPreview: new NavigationPreviewAction((title, reactFactory) => {}),\n        measure: new MeasureAction(),\n        drawGraph: new DrawGraphAction(),\n        drawRegion: new PolygonRegionAction(),\n        addKeyPoint: new AddKeyPointAction(),\n        drawBoxRegion: new BoxRegionAction(),\n        drawPath: new DrawPathAction(),\n        dragObjects: new DragObjectsAction(),\n        orbit: new OrbitAction()\n      };\n","import GlobalRef from \"../NodeItem/GlobalRef\";\nimport { Maybe } from \"monet\";\nimport { ASSETS_TYPES, AssetsTypesFactory } from \"../Utils/AssetsTypesFactory\";\nimport NODE_ITEM_FACTORY_MAP from \"./NodeItemFactoryMap\";\nimport Robot from \"../NodeItem/Robot\";\n\nclass MainViewRetriever {\n  static updateErrorList = () => {};\n\n  static importScene(\n    mainView,\n    serverScene = [],\n    parent = null,\n    is2addInServer = false,\n    updateErrorList = () => {}\n  ) {\n    console.log(\"Importing scene...\", mainView, serverScene);\n    MainViewRetriever.updateErrorList = updateErrorList;\n    const errors = [];\n    if (serverScene.length > 0) {\n      importSceneRecursive(\n        mainView,\n        serverScene,\n        parent,\n        errors,\n        is2addInServer\n      );\n    } else {\n      importDefaultScene(mainView);\n    }\n    console.log(\"End Importing scene\");\n    return errors;\n  }\n\n  static importNodeItem(mainView, nodeDict, parent, is2addInServer = false) {\n    const nodeItemClass = NODE_ITEM_FACTORY_MAP[nodeDict.type]; //retrieve default export\n    if (nodeItemClass) {\n      mainView.getSceneMemory().forEach(({ scene }) => {\n        const nodeItem = nodeItemClass.ofDict(scene, nodeDict, mainView);\n        // pseudo lazy migration of isVisible prop\n        const isVisible =\n          nodeDict.isVisible === undefined ? true : nodeDict.isVisible;\n        nodeItem.mesh.setEnabled(isVisible);\n        mainView.getNodeFromTree(parent).forEach(treeNode => {\n          nodeItem.mesh.parent = treeNode.item.mesh;\n        });\n        mainView.addNodeItem2Tree(\n          nodeItem,\n          parent,\n          is2addInServer,\n          isVisible,\n          false\n        );\n      });\n    }\n  }\n}\n\nfunction isAsset(nodeDict) {\n  return nodeDict.type in ASSETS_TYPES;\n}\n\nfunction importAsset(mainView, nodeDict, parent, errors) {\n  const assetType = nodeDict.type;\n  const assetName = Maybe.fromNull(nodeDict.assetName).orSome(nodeDict.name);\n  const assetActionMap = mainView.getAssetsActionMap();\n  // legacy\n  let retrievedAction = Maybe.fromNull(assetActionMap[assetName]).orLazy(\n    () => assetActionMap[assetName.split(\".\")[0]]\n  );\n  if (!retrievedAction && assetType === ASSETS_TYPES.Robot) {\n    const defaultRobot = Robot.createBaseObject({\n      robotName: assetName,\n      nodeDict\n    });\n    retrievedAction = AssetsTypesFactory.Robot(defaultRobot);\n  }\n  if (!retrievedAction) {\n    errors.push({\n      cause: `Asset of type ${assetType} with name ${assetName}, was not found`,\n      solution: `please upload ${assetType} ${assetName}`\n    });\n    return;\n  }\n  retrievedAction.memory[\"parentObj\"] = { parent: parent };\n  retrievedAction.memory[\"nodeItemDict\"] = nodeDict;\n  retrievedAction.memory[\"assetName\"] = assetName;\n  retrievedAction.memory[\"name\"] = nodeDict.name;\n  retrievedAction.memory[\"isImport\"] = true;\n  retrievedAction.memory[\"isVisible\"] =\n    nodeDict.isVisible === undefined ? true : nodeDict.isVisible;\n  // Execute action\n  retrievedAction.action(mainView, err => {\n    if (err?.exception?.name === \"RequestFileError\") {\n      errors.push({\n        cause: `Asset of type ${err.assetType} with name ${err.assetName}, was not found`,\n        solution: `please upload ${err.assetType} ${err.assetName}`\n      });\n      MainViewRetriever.updateErrorList(errors);\n    }\n  });\n}\n\nfunction importSceneRecursive(\n  mainView,\n  arrayTree,\n  parent = null,\n  errors = [],\n  is2addInServer = false\n) {\n  if (!arrayTree) return;\n  const sortArrayTree = arrayTree.sort((a, b) => {\n    // global ref is first\n    if (a.item.type === NODE_ITEM_FACTORY_MAP.GlobalRef.TYPE) return -1;\n    if (b.item.type === NODE_ITEM_FACTORY_MAP.GlobalRef.TYPE) return 1;\n    // graphItem is last\n    if (a.item.type === NODE_ITEM_FACTORY_MAP.GraphItem.TYPE) return 1;\n    if (b.item.type === NODE_ITEM_FACTORY_MAP.GraphItem.TYPE) return -1;\n    return a.name < b.name ? -1 : a.name > b.name ? 1 : 0;\n  });\n  sortArrayTree.forEach(node => {\n    if (isAsset(node.item)) {\n      importAsset(mainView, node.item, parent, errors);\n    } else {\n      MainViewRetriever.importNodeItem(\n        mainView,\n        node.item,\n        parent,\n        is2addInServer\n      );\n    }\n    if (node.children.length > 0) {\n      importSceneRecursive(\n        mainView,\n        node.children,\n        node.name,\n        errors,\n        is2addInServer\n      );\n    }\n  });\n}\n\nfunction importDefaultScene(mainView) {\n  mainView.getSceneMemory().forEach(({ scene }) => {\n    const send2server = true;\n    mainView.addNodeItem2Tree(GlobalRef.ofDict(scene), null, send2server);\n  });\n}\n\nexport default MainViewRetriever;\n","export default class MeshSelector {\n  constructor(mainView) {\n    return mainView\n      .getSceneMemory()\n      .map(({ scene }) => {\n        const sceneId = scene._uid;\n        if (sceneId in placeHolderInstance) {\n          return placeHolderInstance[sceneId];\n        }\n        this.scene = scene;\n        this.mainView = mainView;\n        this.meshSelectionSet = new Set();\n        placeHolderInstance[sceneId] = this;\n        return this;\n      })\n      .orSome(this);\n  }\n\n  /**\n   * Add mesh 2 selected meshes\n   * @param {*} mesh\n   * @param {*} isSubtractive: if true, repeated addition of meshes will be removed from selected meshes set.\n   */\n  add(mesh, isSubtractive = true) {\n    if (this.meshSelectionSet.has(mesh)) {\n      isSubtractive && this.meshSelectionSet.delete(mesh);\n    } else {\n      this.meshSelectionSet.add(mesh);\n    }\n    return this;\n  }\n\n  addArray(meshes, isSubtractive = true) {\n    meshes.forEach(mesh => this.add(mesh, isSubtractive));\n    return this;\n  }\n\n  clear() {\n    this.meshSelectionSet = new Set();\n    return this;\n  }\n\n  meshes() {\n    return [...this.meshSelectionSet];\n  }\n\n  has(mesh) {\n    return this.meshSelectionSet.has(mesh);\n  }\n\n  filter(predicate) {\n    const filteredSet = new Set();\n    this.meshSelectionSet.forEach(mesh => {\n      if (predicate(mesh)) filteredSet.add(mesh);\n    });\n    this.meshSelectionSet = filteredSet;\n    return this;\n  }\n\n  //   forEach(lambda) {\n  //     this.meshSelectionSet.forEach(lambda);\n  //     return this;\n  //   }\n\n  static ofMainView(mainView) {\n    return new MeshSelector(mainView);\n  }\n}\n\nconst placeHolderInstance = {};\n","import GlobalRef from \"../NodeItem/GlobalRef\";\nimport Box from \"../NodeItem/Box\";\nimport KeyPoint from \"../NodeItem/KeyPoint\";\nimport Path from \"../NodeItem/Path\";\nimport Wall from \"../NodeItem/Wall\";\nimport BoxRegion from \"../NodeItem/BoxRegion\";\nimport PolygonRegion from \"../NodeItem/PolygonRegion\";\nimport GraphItem from \"../NodeItem/GraphItem\";\nimport NavigationPreviewItem from \"../NodeItem/NavigationPreviewItem\";\n\nconst NODE_ITEM_FACTORY_MAP = {\n  GlobalRef: GlobalRef,\n  Box: Box,\n  KeyPoint: KeyPoint,\n  Path: Path,\n  Wall: Wall,\n  BoxRegion: BoxRegion,\n  PolygonRegion: PolygonRegion,\n  GraphItem: GraphItem,\n  NavigationPreviewItem: NavigationPreviewItem\n};\n\nexport default NODE_ITEM_FACTORY_MAP;\n","import Vec3 from \"./Vec3\";\nimport { Matrix } from \"@babylonjs/core\";\n\nclass Mat3 {\n  constructor(v1, v2, v3) {\n    const v = [v1, v2, v3];\n    for (let i = 0; i < v.length; i++) {\n      if (v[i].constructor !== Array || v[i].length < 3)\n        throw Error(\"One of the inputs is not a array\");\n    }\n    this.mat3 = v.map(x => new Vec3(x));\n  }\n\n  /**\n   * Matrix prod with  3-vector\n   * @param {*} v: 3-vector\n   *\n   * returns 3-vector\n   */\n  prodVec(v) {\n    let ans = new Vec3([0, 0, 0]);\n    for (let i = 0; i < this.mat3.length; i++) {\n      ans = ans.add(this.mat3[i].scale(v.vec3[i]));\n    }\n    return ans;\n  }\n\n  /**\n   * Matrix transpose prod with 3-vec\n   * @param {*} v : 3-vector\n   */\n  dotVec(v) {\n    const ans = [0, 0, 0];\n    for (let i = 0; i < this.mat3.length; i++) {\n      ans[i] = this.mat3[i].dot(v);\n    }\n    return new Vec3(ans);\n  }\n\n  prod(m) {\n    const u = this.prodVec(m.mat3[0]);\n    const v = this.prodVec(m.mat3[1]);\n    const w = this.prodVec(m.mat3[2]);\n    return new Mat3(u.vec3, v.vec3, w.vec3);\n  }\n\n  dot(m) {\n    const u = this.dotVec(m.mat3[0]);\n    const v = this.dotVec(m.mat3[1]);\n    const w = this.dotVec(m.mat3[2]);\n    return new Mat3(u.vec3, v.vec3, w.vec3);\n  }\n\n  map(f) {\n    const u = this.mat3[0].map(f);\n    const v = this.mat3[1].map(f);\n    const w = this.mat3[2].map(f);\n    return new Mat3(u.vec3, v.vec3, w.vec3);\n  }\n\n  equals(mat) {\n    if (mat.constructor !== this.constructor) return false;\n    return this.mat3\n      .map((v, index) => v.equals(mat.mat3[index]))\n      .reduce((e, v) => e && v, true);\n  }\n\n  static ofBabylonMatrix(babylonMat) {\n    const arrayMat = Matrix.GetAsMatrix3x3(babylonMat);\n    const u = [arrayMat[0], arrayMat[1], arrayMat[2]];\n    const v = [arrayMat[3], arrayMat[4], arrayMat[5]];\n    const w = [arrayMat[6], arrayMat[7], arrayMat[8]];\n    return new Mat3(u, v, w);\n  }\n\n  static of(v1, v2, v3) {\n    return new Mat3(v1, v2, v3);\n  }\n\n  static eye() {\n    return new Mat3([1, 0, 0], [0, 1, 0], [0, 0, 1]);\n  }\n}\n\nexport default Mat3;\n","//immutable class, not managing exceptions\nclass Vec2 {\n  constructor(x, y) {\n    this.vec = [x, y].map(z => (z ? z : 0));\n  }\n\n  get x() {\n    return this.vec[0];\n  }\n\n  get y() {\n    return this.vec[1];\n  }\n\n  toArray() {\n    return this.vec;\n  }\n\n  add(y) {\n    return this.op(y, (a, b) => a + b);\n  }\n\n  sub(y) {\n    return this.op(y, (a, b) => a - b);\n  }\n\n  mul(y) {\n    return this.op(y, (a, b) => a * b);\n  }\n\n  div(y) {\n    return this.op(y, (a, b) => a / b);\n  }\n\n  dot(y) {\n    return this.vec.reduce((acc, v, i) => acc + v * y.vec[i], 0);\n  }\n\n  prod(y) {\n    return new Vec2(this.x * y.x - this.y * y.y, this.x * y.y + this.y * y.x);\n  }\n\n  length() {\n    return Math.sqrt(this.dot(this));\n  }\n\n  normalize() {\n    return this.scale(1 / this.length());\n  }\n\n  dual() {\n    return new Vec2(-this.y, this.x);\n  }\n\n  sym() {\n    return this.scale(-1);\n  }\n\n  conj() {\n    return new Vec2(this.x, -this.y);\n  }\n\n  scale(r) {\n    return this.map(z => z * r);\n  }\n\n  map(lambda) {\n    return Vec2.fromArray(this.vec.map(lambda));\n  }\n\n  /**\n   * Returns a vec2 from the operation function bilambda\n   * @param {*} y\n   * @param {*} biLambda\n   */\n  op(y, biLambda) {\n    return Vec2.fromArray(this.vec.map((v, i) => biLambda(v, y.vec[i])));\n  }\n\n  reduce(fold, initial) {\n    return this.vec.reduce(fold, initial);\n  }\n\n  toObject() {\n    return { x: this.x, y: this.y };\n  }\n\n  toString() {\n    return `{x: ${this.x}, y:${this.y}}`;\n  }\n\n  static fromArray(array) {\n    if (array.length < 2) throw new Error(\"array must have size > 2\");\n    return new Vec2(array[0], array[1]);\n  }\n\n  static of(x, y) {\n    return new Vec2(x, y);\n  }\n\n  static ofBabylon(vector3) {\n    return new Vec2(vector3.x, vector3.y);\n  }\n\n  static ZERO = new Vec2(0, 0);\n  static e1 = new Vec2(1, 0);\n  static e2 = new Vec2(0, 1);\n}\n\nexport default Vec2;\n","import { Vector3 } from \"@babylonjs/core\";\nimport Vec2 from \"./Vec2\";\n\n/**\n * Class that describes immutable 3-vectors\n */\nclass Vec3 {\n  //no for's because performance\n  constructor(array) {\n    if (array.constructor !== Array || array.length < 3)\n      throw new Error(`${array} is not a valid 3-vector`);\n    this.vec3 = [...array];\n  }\n\n  get x() {\n    return this.vec3[0];\n  }\n\n  get y() {\n    return this.vec3[1];\n  }\n\n  get z() {\n    return this.vec3[2];\n  }\n\n  add(x) {\n    return this.op(x, (a, b) => a + b);\n  }\n\n  sub(x) {\n    return this.op(x, (a, b) => a - b);\n  }\n\n  mul(x) {\n    return this.op(x, (a, b) => a * b);\n  }\n\n  op(x, operation) {\n    const ans = [];\n    ans[0] = operation(this.vec3[0], x.vec3[0]);\n    ans[1] = operation(this.vec3[1], x.vec3[1]);\n    ans[2] = operation(this.vec3[2], x.vec3[2]);\n    return new Vec3(ans);\n  }\n\n  scale(r) {\n    return this.map(x => x * r);\n  }\n\n  dot(x) {\n    return (\n      this.vec3[0] * x.vec3[0] +\n      this.vec3[1] * x.vec3[1] +\n      this.vec3[2] * x.vec3[2]\n    );\n  }\n\n  map(f) {\n    return new Vec3(this.vec3.map(f));\n  }\n\n  length() {\n    return Math.sqrt(this.dot(this));\n  }\n\n  normalize = () => {\n    const l = this.length();\n    if (l === 0) throw new Error(\"You can't normalize a zero norm vector\");\n    return this.scale(1 / l);\n  };\n\n  toBabylon() {\n    return new Vector3(this.vec3[0], this.vec3[1], this.vec3[2]);\n  }\n\n  toArray() {\n    return this.vec3;\n  }\n\n  toVec2() {\n    return new Vec2(this.x, this.y);\n  }\n\n  equals(v) {\n    if (v.constructor !== this.constructor) return false;\n    return v.vec3\n      .map((x, index) => v.vec3[index] === x)\n      .reduce((e, v) => e && v, true);\n  }\n\n  reduce(binary, initialValue) {\n    return this.vec3.reduce(binary, initialValue);\n  }\n\n  getMax() {\n    return this.reduce((a, b) => Math.max(a, b), -Number.MAX_VALUE);\n  }\n\n  getMin() {\n    return this.reduce((a, b) => Math.min(a, b), Number.MAX_VALUE);\n  }\n\n  someNaNOrInfinite() {\n    return this.vec3.some(x => isNaN(x) || !isFinite(x));\n  }\n\n  static ofBabylon(babylon) {\n    return new Vec3([babylon.x, babylon.y, babylon.z]);\n  }\n\n  static of(array) {\n    return array ? new Vec3(array) : new Vec3([0, 0, 0]);\n  }\n\n  static fromArray(array) {\n    return Vec3.of(array);\n  }\n\n  static random() {\n    return new Vec3([1, 2, 3].map(Math.random()));\n  }\n\n  /**\n   *\n   * @param {*} u: Vec3\n   */\n  static orthogonalBasisFromVector(u) {\n    const identityMatrix = [Vec3.e1, Vec3.e2, Vec3.e3];\n    //choose pivot\n    let pivot = 0;\n    for (let i = 0; i < 3; i++) {\n      if (u.vec3[i] !== 0) {\n        pivot = i;\n        break;\n      }\n    }\n    let v = identityMatrix[(pivot + 1) % 3].add(\n      identityMatrix[pivot].scale(-u.vec3[(pivot + 1) % 3] / u.vec3[pivot])\n    );\n    v = v.normalize();\n    let w = identityMatrix[(pivot + 2) % 3].add(\n      identityMatrix[pivot].scale(-u.vec3[(pivot + 2) % 3] / u.vec3[pivot])\n    );\n    w = w.normalize();\n    w = w.sub(v.scale(v.dot(w)));\n    return { u: u.normalize(), v: v, w: w.normalize() };\n  }\n\n  static ONES = Vec3.of([1, 1, 1]);\n  static ZERO = Vec3.of([0, 0, 0]);\n  static e1 = new Vec3([1, 0, 0]);\n  static e2 = new Vec3([0, 1, 0]);\n  static e3 = new Vec3([0, 0, 1]);\n}\n\nexport default Vec3;\n","import NodeItem from \"./NodeItem\";\n\nclass AssetNodeItem extends NodeItem {\n  constructor(mesh, assetName, keyValueMap = {}) {\n    super(mesh, keyValueMap);\n    this.assetName = assetName;\n  }\n\n  toDict() {\n    const ans = super.toDict();\n    ans.assetName = this.assetName;\n    return ans;\n  }\n\n  getCopyFunction = () => {\n    return (mousePosFromRoot, someMainView) => {};\n  };\n}\n\nexport default AssetNodeItem;\n","import NodeItem from \"./NodeItem\";\nimport { Maybe } from \"monet\";\nimport Util3d from \"../Util3d/Util3d\";\nimport { Color3 } from \"@babylonjs/core\";\n\nclass Box extends NodeItem {\n  static DEFAULT_SIZE = 0.5;\n\n  constructor(mesh, size = Box.DEFAULT_SIZE, keyValueMap = {}) {\n    super(mesh, keyValueMap);\n    this.size = size;\n  }\n\n  toDict() {\n    const dict = super.toDict();\n    dict.size = this.size;\n    return dict;\n  }\n\n  ofDict(scene, dict = null, mainView = null) {\n    return Box.ofDict(scene, dict, mainView);\n  }\n\n  getType = () => Box.TYPE;\n\n  static TYPE = \"Box\";\n\n  static ofDict(scene, dict = null, mainView = null) {\n    const maybeDict = Maybe.fromNull(dict);\n    const size = maybeDict\n      .flatMap(z => Maybe.fromNull(z.size))\n      .orSome(Box.DEFAULT_SIZE);\n    const name = maybeDict\n      .flatMap(z => Maybe.fromNull(z.name))\n      .orSome(`Box${Math.floor(Math.random() * 1e3)}`);\n    const keyValueMap = maybeDict\n      .flatMap(d => Maybe.fromNull(d.keyValueMap))\n      .orUndefined();\n\n    const boxMesh = Util3d.createBox(\n      scene,\n      new Color3(Math.random(), Math.random(), Math.random()),\n      size,\n      name\n    );\n    NodeItem.mapDict2Mesh(dict, boxMesh);\n    return new Box(boxMesh, size, keyValueMap);\n  }\n}\n\nexport default Box;\n","import NodeItem from \"./NodeItem\";\nimport Util3d from \"../Util3d/Util3d\";\nimport Vec3 from \"../Math/Vec3\";\nimport { Maybe } from \"monet\";\nimport Constants from \"../Utils/Constants\";\nimport {\n  Vector3,\n  Axis,\n  Color3,\n  Observable,\n  StandardMaterial,\n  Quaternion\n} from \"@babylonjs/core\";\nimport isEqual from \"lodash.isequal\";\n\nclass BoxRegion extends NodeItem {\n  constructor(mesh, corners, keyPoints, keyValueMap = {}) {\n    super(mesh, keyValueMap);\n    this.corners = corners; // in local coordinates, in relation to center of mass\n    this.keyPoints = keyPoints;\n  }\n\n  toDict() {\n    const dict = super.toDict();\n    dict.corners = this.corners;\n    return dict;\n  }\n\n  toForm() {\n    const schema = super.toForm();\n    schema.jsonSchema.properties[\"dimensions\"] = {\n      type: \"object\",\n      title: \"Dimensions\",\n      properties: {\n        lower: {\n          type: \"object\",\n          title: \"Lower Corner\",\n          properties: {\n            x: {\n              type: \"number\",\n              title: \"x\"\n            },\n            y: {\n              type: \"number\",\n              title: \"y\"\n            }\n          }\n        },\n        size: {\n          type: \"object\",\n          title: \"Size\",\n          properties: {\n            scaleX: {\n              type: \"number\",\n              title: \"scale-X\"\n            },\n            scaleY: {\n              type: \"number\",\n              title: \"scale-Y\"\n            }\n          }\n        }\n      }\n    };\n    schema.uiSchema[\"dimensions\"] = { \"ui:widget\": \"collapse\" };\n    // global ref coordinates\n    const worldCorners = this.keyPoints\n      .map(x => Util3d.getGlobalCoordinates(x, x.position))\n      .map(x => x.toArray());\n    schema.data[\"dimensions\"] = {\n      lower: {\n        x: worldCorners[0][0],\n        y: worldCorners[0][1]\n      },\n      size: {\n        // TODO: warning, doesn't take into account possible scaling\n        scaleX: this.corners[1][0] - this.corners[0][0],\n        scaleY: this.corners[1][1] - this.corners[0][1]\n      }\n    };\n    return schema;\n  }\n\n  ofForm(form) {\n    const oldForm = this.toForm();\n    const oldDimensions = oldForm.data.dimensions;\n    if (isEqual(oldDimensions, form.dimensions)) {\n      super.ofForm(form);\n    } else {\n      this.ofFormDimensions(form);\n    }\n  }\n\n  ofDict(scene, dict = null, mainView = null) {\n    return BoxRegion.ofDict(scene, dict, mainView);\n  }\n\n  getType = () => BoxRegion.TYPE;\n\n  static TYPE = \"BoxRegion\";\n\n  ofFormDimensions(form) {\n    const newLowerPositionInWorldCoordinates = Vector3.FromArray(\n      [form.dimensions.lower.x, form.dimensions.lower.y, 0].map(\n        Number.parseFloat\n      )\n    );\n    const newLocalDimensions = [\n      form.dimensions.size.scaleX,\n      form.dimensions.size.scaleY\n    ].map(Number.parseFloat);\n    let localLowerPosition = Util3d.getLocalCoordFromGlobal(\n      this.keyPoints[0],\n      newLowerPositionInWorldCoordinates\n    ).toArray();\n    const notify = (i, update = false) =>\n      this.keyPoints[i].observers.notifyObservers({\n        updatedPointMesh: this.keyPoints[i],\n        is2updateServer: update\n      });\n\n    this.keyPoints[0].position = new Vector3(\n      localLowerPosition[0],\n      localLowerPosition[1],\n      this.keyPoints[0].position.z\n    );\n    notify(0);\n    localLowerPosition = Util3d.getLocalCoordFromGlobal(\n      this.keyPoints[0],\n      newLowerPositionInWorldCoordinates\n    ).toArray();\n    this.keyPoints[1].position = new Vector3(\n      localLowerPosition[0] + newLocalDimensions[0],\n      localLowerPosition[1] + newLocalDimensions[1],\n      this.keyPoints[1].position.z\n    );\n    notify(1);\n  }\n\n  static ofDict(scene, dict = null, mainView = null) {\n    if (!dict) throw new Error(\"null dictionary describing Box region\");\n    const name = Maybe.fromNull(dict.name).orSome(\n      `BoxRegion${Math.floor(Math.random() * 1e3)}`\n    );\n    const mesh = createBoxRegionMesh(dict, name, scene);\n\n    const material = new StandardMaterial(`BoxRegionMaterial${name}`, scene);\n    const color = new Color3(dict.color[0], dict.color[1], dict.color[2]);\n    material.diffuseColor = color;\n    material.emissiveColor = color;\n    material.backFaceCulling = false;\n    mesh.material = material;\n\n    mesh.visibility = dict.color[3] || VISIBILITY;\n\n    Maybe.fromNull(dict.quaternion).forEach(quaternion => {\n      const babylonQuaternion = new Quaternion(\n        quaternion[1],\n        quaternion[2],\n        quaternion[3],\n        quaternion[0]\n      );\n      mesh.rotationQuaternion = babylonQuaternion.normalize();\n    });\n\n    const keyPoints = createPlaceHolderKeyPoints(\n      scene,\n      dict.corners.map(x => Vec3.of(x).toBabylon()),\n      mesh,\n      mainView\n    );\n    return new BoxRegion(mesh, dict.corners, keyPoints, dict.keyValueMap);\n  }\n}\n\nconst RADIUS = Constants.RADIUS;\nconst FACES = [\n  [0, 1, 2],\n  [2, 3, 0],\n  [4, 5, 6],\n  [6, 7, 4],\n  [0, 1, 5],\n  [5, 4, 0],\n  [3, 2, 6],\n  [6, 7, 3],\n  [1, 2, 6],\n  [6, 5, 1],\n  [0, 3, 7],\n  [7, 4, 0]\n];\n\n/**\n * @param boxRegion: {position: 3-array, corners: array of 3-arrays }\n */\nfunction createBoxRegionMesh(boxRegion, name, scene) {\n  // centered corners vec\n  const corners = boxRegion.corners.map(x => Vec3.of(x).toBabylon());\n  const d = corners[1].subtract(corners[0]);\n  const middlePoint = Vec3.of(boxRegion.position).toBabylon();\n  const shape = [\n    corners[0],\n    corners[0].add(Axis.X.scale(d.x)),\n    corners[0].add(new Vector3(d.x, d.y, 0)),\n    corners[0].add(Axis.Y.scale(d.y))\n  ];\n  const h = new Vector3(0, 0, d.z);\n  const boxRegionMesh = {\n    positions: [\n      shape[0],\n      shape[1],\n      shape[2],\n      shape[3],\n      shape[0].add(h),\n      shape[1].add(h),\n      shape[2].add(h),\n      shape[3].add(h)\n    ],\n    faces: FACES\n  };\n  const mesh = Util3d.meshFromPositionAndFaces(\n    name,\n    scene,\n    boxRegionMesh.positions,\n    boxRegionMesh.faces\n  );\n  mesh.position = middlePoint;\n  mesh.rotationQuaternion = Quaternion.Identity();\n  return mesh;\n}\n\nfunction createNewMeshFromOldUsingNewBox(newBox, scene, mesh, item) {\n  const average = Util3d.pointAverageVec3(newBox.corners.map(x => Vec3.of(x)));\n  newBox.position = average.toArray();\n  newBox.corners = newBox.corners.map(x => Vec3.of(x).sub(average).toArray());\n\n  // average in parent coord\n  const rotMat3 = Util3d.getRotationMatrix(mesh);\n  const scaleVec3 = Vec3.ofBabylon(mesh.scaling);\n  const averageInParentCoord = rotMat3\n    .prodVec(average.mul(scaleVec3))\n    .toBabylon();\n\n  const newMesh = createBoxRegionMesh(newBox, mesh.name, scene);\n  newMesh.parent = mesh.parent;\n  newMesh.rotationQuaternion = mesh.rotationQuaternion;\n  newMesh.position = averageInParentCoord.add(mesh.position);\n\n  newMesh.material = mesh.material;\n  newMesh.visibility = mesh.visibility;\n  newMesh.getMouseContextActions = mesh.getMouseContextActions;\n  newMesh.nodeItem = mesh.nodeItem;\n  newMesh.observers = mesh.observers;\n  if (!!mesh.graphVertex) {\n    newMesh.graphVertex = mesh.graphVertex;\n    newMesh.graphVertex.vertex.mesh = newMesh;\n  }\n  item.mesh = newMesh;\n  item.corners = newBox.corners;\n\n  const childrenCopy = [...mesh._children];\n  childrenCopy.forEach(c => {\n    c.parent = newMesh;\n  });\n  item.keyPoints.forEach((k, j) => {\n    const saveZ = k.position.z;\n    k.position = Vec3.of(newBox.corners[j]).toBabylon();\n    k.position.z = saveZ;\n  });\n  // dispose old mesh\n  mesh.dispose();\n}\n\nconst getKeyPointObserverFunction = (mainView, scene) => {\n  return ({ updatedPointMesh, is2updateServer }) => {\n    mainView\n      .getNodeFromTree(updatedPointMesh.parent.name)\n      .forEach(boxRegionTreeNode => {\n        const index = updatedPointMesh.index;\n        const item = boxRegionTreeNode.item;\n        const mesh = item.mesh;\n        const name = mesh.name;\n        let newBox = {\n          position: Vec3.ofBabylon(mesh.position).toArray(),\n          corners: item.corners\n        };\n        newBox.corners[index] = [\n          updatedPointMesh.position.x,\n          updatedPointMesh.position.y,\n          newBox.corners[index][2]\n        ];\n        createNewMeshFromOldUsingNewBox(newBox, scene, mesh, item);\n        mainView.addGizmo2Name();\n        if (is2updateServer) {\n          mainView.updateNodeInServer(name);\n          mainView.getNodeFromTree(name).forEach(node => {\n            mainView.setProperties(node.item.toForm());\n          });\n        }\n        // signal box region observers\n        Maybe.fromNull(item.mesh.observers).forEach(obs => {\n          obs.notifyObservers({\n            updatedPointMesh: item.mesh,\n            is2updateServer: is2updateServer,\n            displacement: Vector3.Zero()\n          });\n        });\n        Maybe.fromNull(item.mesh.graphVertex).forEach(({ vertexObs }) => {\n          vertexObs({\n            updatedPointMesh: item.mesh,\n            is2updateServer: is2updateServer,\n            displacement: Vector3.Zero()\n          });\n        });\n      });\n  };\n};\n\nconst createPlaceHolderKeyPoints = (\n  scene,\n  corners,\n  boxRegionMesh,\n  mainView\n) => {\n  const keyPoints = [];\n  const maxHeight = corners.reduce(\n    (max, x) => Math.max(max, x.z),\n    Number.MIN_VALUE\n  );\n  corners.forEach((corner, i) => {\n    const p = corner;\n\n    const keyPoint = Util3d.createSphere(\n      scene,\n      new Color3(0.25, 0.25, 0.25),\n      RADIUS,\n      `${boxRegionMesh.name}keyPoint${i}`,\n      true\n    );\n\n    keyPoint.parent = boxRegionMesh;\n    keyPoint.position = p;\n    keyPoint.position.z = maxHeight;\n    keyPoint.index = i;\n    keyPoint.observers = new Observable();\n    keyPoint.observers.add(getKeyPointObserverFunction(mainView, scene));\n    keyPoints.push(keyPoint);\n  });\n  return keyPoints;\n};\n\nconst VISIBILITY = 0.25;\nexport default BoxRegion;\n","import NodeItem from \"./NodeItem\";\nimport Vec3 from \"../Math/Vec3\";\nimport Util3d from \"../Util3d/Util3d\";\nimport { Maybe } from \"monet\";\nimport { Quaternion, MeshBuilder } from \"@babylonjs/core\";\n\n// ROS/RVIZ default referential\nconst THETA = -Math.PI / 2;\nexport const ROS_ORIGIN = {\n  position: [0, 0, 0],\n  scaling: [1, -1, 1],\n  quaternion: [Math.cos(THETA / 2), Math.sin(THETA / 2), 0, 0]\n};\n\nclass GlobalRef extends NodeItem {\n  constructor(mesh, keyValueMap = {}) {\n    super(mesh, keyValueMap);\n  }\n\n  toForm() {\n    const form = super.toForm();\n    form.uiSchema.name = {\n      \"ui:disabled\": true\n    };\n    return form;\n  }\n\n  getMouseContextActions() {\n    return [];\n  }\n\n  getType = () => GlobalRef.TYPE;\n\n  static TYPE = \"GlobalRef\";\n\n  static NAME = \"Global ref\";\n\n  static ofDict(scene, dict = null, mainView = null) {\n    const rosOrigin = GlobalRef.getRosOrigin(scene);\n\n    const globalRefMesh = Util3d.referentialBuilder(scene)\n      .name(GlobalRef.NAME)\n      .isPickable(true)\n      .boxParams({ isVisible: true, size: 0.25 })\n      .build();\n\n    globalRefMesh.parent = rosOrigin;\n\n    NodeItem.mapDict2Mesh(dict, globalRefMesh);\n\n    return new GlobalRef(\n      globalRefMesh,\n      Maybe.fromNull(dict)\n        .flatMap(d => Maybe.fromNull(d.keyValueMap))\n        .orUndefined()\n    );\n  }\n\n  static getRosOrigin(scene) {\n    const rosOrigin = MeshBuilder.CreateBox(\n      \"ROS_ORIGIN\",\n      { size: 1e-3 },\n      scene\n    );\n    rosOrigin.isVisible = false;\n    rosOrigin.isPickable = false;\n    rosOrigin.position = Vec3.of(ROS_ORIGIN.position).toBabylon();\n    rosOrigin.scaling = Vec3.of(ROS_ORIGIN.scaling).toBabylon();\n    const quaternion = new Quaternion(\n      ROS_ORIGIN.quaternion[1],\n      ROS_ORIGIN.quaternion[2],\n      ROS_ORIGIN.quaternion[3],\n      ROS_ORIGIN.quaternion[0]\n    );\n    rosOrigin.rotationQuaternion = quaternion.normalize();\n    return rosOrigin;\n  }\n\n  /**\n   *\n   * @param {*} x: Babylon Vector3 in World coordinates\n   *\n   * returns Babylon Vector3 vector in ROS coordinates\n   */\n  static inverseCoordinates(x) {\n    /**\n     * Solves RS\\eta + p = x\n     *\n     * \\eta = S^(⁻1)R^T(x-p)\n     */\n    const quaternion = ROS_ORIGIN.quaternion;\n    const rotationMatrix = Util3d.getRotationMatrix({\n      rotationQuaternion: new Quaternion(\n        quaternion[1],\n        quaternion[2],\n        quaternion[3],\n        quaternion[0]\n      )\n    });\n    const scaling = Vec3.of(ROS_ORIGIN.scaling).map(z => 1 / z);\n    const pos = Vec3.of(ROS_ORIGIN.position);\n    const result = scaling.mul(\n      rotationMatrix.dotVec(Vec3.ofBabylon(x).sub(pos))\n    );\n    return result.map(z => (Math.abs(z) < 1e-5 ? 0 : z)).toBabylon();\n  }\n\n  /**\n   *\n   * @param {*} x: Babylon Vector3 in ROS coordinates\n   *\n   * returns Babylon Vector3 vector in World coordinates\n   */\n  static forwardCoordinates(x) {\n    /**\n     * computes RS\\eta + p = x\n     */\n    const quaternion = ROS_ORIGIN.quaternion;\n    const rotationMatrix = Util3d.getRotationMatrix({\n      rotationQuaternion: new Quaternion(\n        quaternion[1],\n        quaternion[2],\n        quaternion[3],\n        quaternion[0]\n      )\n    });\n    const scaling = Vec3.of(ROS_ORIGIN.scaling);\n    const pos = Vec3.of(ROS_ORIGIN.position);\n    const result = rotationMatrix\n      .prodVec(scaling.mul(Vec3.ofBabylon(x)))\n      .add(pos);\n    return result.map(z => (Math.abs(z) < 1e-5 ? 0 : z)).toBabylon();\n  }\n}\n\nexport default GlobalRef;\n","import NodeItem from \"./NodeItem\";\nimport Util3d from \"../Util3d/Util3d\";\nimport { Color3, Vector3, Observable } from \"@babylonjs/core\";\nimport Constants from \"../Utils/Constants\";\nimport { Quaternion } from \"@babylonjs/core/Maths/math\";\nimport Graph from \"../Graph/Graph\";\nimport Vec3 from \"../Math/Vec3\";\nimport { Maybe } from \"monet\";\nimport React from \"react\";\nimport lodashGet from \"lodash/get\";\nimport { UndoManager } from \"mov-fe-lib-core\";\nimport Path from \"./Path\";\nimport KeyPoint from \"./KeyPoint\";\n\n/**\n * One graph per scene\n */\nclass GraphItem extends NodeItem {\n  constructor(scene, mainView, name = GraphItem.NAME, keyValueMap = {}) {\n    const sceneId = scene.getUniqueId();\n    // super() must be called before using _this_.\n    if (\n      sceneId in graphItemInstances &&\n      !graphItemInstances[sceneId].mesh.isDisposed()\n    ) {\n      return graphItemInstances[sceneId];\n    }\n\n    const graphPlaceHolder = getGraphPlaceHolder(scene, name);\n    graphPlaceHolder.onClick = () =>\n      (this.graphFormMapper = this.getDefaultFormMapper());\n\n    super(graphPlaceHolder, keyValueMap);\n    graphItemInstances[sceneId] = this;\n\n    // object properties\n    this.graph = new Graph();\n    this.scene = scene;\n    this.mainView = mainView;\n    this.meshByEdgeId = {};\n    this.graphFormMapper = this.getDefaultFormMapper();\n    this.vertexGenerator = 0;\n  }\n\n  getType = () => GraphItem.TYPE;\n\n  toDict() {\n    const dict = super.toDict();\n    const { graph } = this;\n    const vertices = { ...graph.getVertices() };\n    const edges = { ...graph.getEdges() };\n    Object.keys(vertices).forEach(k => {\n      graph.getVertex(k).forEach(({ data: vertexData }) => {\n        vertices[k] = {\n          position: Vec3.ofBabylon(vertexData.position).toArray(),\n          id: String(k)\n        };\n      });\n    });\n    // export directed graph\n    Object.keys(edges).forEach(k => {\n      const ids = Graph.key2Edge(k);\n      graph.getEdge(...ids).forEach(({ data: edgeData }) => {\n        const [i, j] = ids.map(x => Number(x));\n        const edgeMesh = edgeData.edge.map(({ mesh }) => mesh);\n        const [belongsSrcMesh, belongsTrgMesh] = edgeMesh;\n        edges[k] = {\n          ids: ids,\n          keyValueMap: edgeData.keyValueMap,\n          weight: edgeData.weight,\n          belongsSrc:\n            i < j\n              ? this.exportBelongToData(belongsSrcMesh)\n              : this.exportBelongToData(belongsTrgMesh),\n          belongsTrg:\n            i < j\n              ? this.exportBelongToData(belongsTrgMesh)\n              : this.exportBelongToData(belongsSrcMesh)\n        };\n        if (this.doMeshesBelong2SamePath(...edgeMesh)) {\n          if (i > j) {\n            // remove edge if belongs to same path and i > j\n            delete edges[k];\n          }\n        } else {\n          if (this.checkInvalidEdges(...edgeMesh, edges[k])) {\n            // remove edge if is invalid edge\n            delete edges[k];\n          }\n        }\n      });\n    });\n    dict[\"vertices\"] = vertices;\n    dict[\"edges\"] = edges;\n    return dict;\n  }\n\n  toForm() {\n    const form = super.toForm();\n    delete form.jsonSchema.properties.position;\n    delete form.jsonSchema.properties.rotation;\n    delete form.jsonSchema.properties.color;\n    delete form.uiSchema.position;\n    delete form.uiSchema.rotation;\n    delete form.uiSchema.color;\n    delete form.data.position;\n    delete form.data.rotation;\n    delete form.data.color;\n    return this.graphFormMapper.toForm(form);\n  }\n\n  ofForm(form) {\n    this.name = form.name;\n    this.mesh.name = form.name;\n    this.graphFormMapper.ofForm(form);\n  }\n\n  getDefaultFormMapper() {\n    return {\n      toForm: form => form,\n      ofForm: form => (this.keyValueMap = { ...form.annotations })\n    };\n  }\n\n  getToFormEdge(edgeMesh) {\n    const { graph } = this;\n    return {\n      toForm: form => {\n        return graph\n          .getEdge(...edgeMesh.edgeIndexes)\n          .map(({ data: edgeData }) => {\n            form.jsonSchema.properties[\"weight\"] = {\n              type: \"number\",\n              title: \"Weight\"\n            };\n            form.data[\"weight\"] = edgeData.weight;\n            NodeItem.setAnnotations2Form(form, edgeData.keyValueMap);\n            form.jsonSchema.properties[\n              \"annotations\"\n            ].title = `Annotations Edge ${edgeMesh.edgeIndexes}`;\n            return form;\n          })\n          .orSome(form);\n      },\n      ofForm: form => {\n        const { edgeIndexes } = edgeMesh;\n        graph.getEdge(...edgeIndexes).forEach(({ data: edgeData }) => {\n          edgeData.keyValueMap = { ...lodashGet(form, \"annotations\", {}) };\n          edgeData.weight = Number.parseFloat(form.weight);\n        });\n      }\n    };\n  }\n\n  /**\n   * @override nodeItem delVertex()\n   * Delete all vertex from tree nodes\n   */\n  delVertex() {\n    // Iterate though all nodes under the root node and delete its vertexes\n    const root = this.mainView.getRootNode();\n    this.delVertexRecursively(root?.children);\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                   Graph Operations                                   *\n   *                                                                                      */\n  //========================================================================================\n\n  /**\n   *\n   * @param {*} iMesh: Mesh vertex\n   * @param {*} jMesh: Mesh vertex\n   * @param {*} edgeIndexes: Array<Integer>\n   */\n  addEdge(iMesh, jMesh, edgeIndexes = []) {\n    const [iIndex, jIndex] = edgeIndexes;\n    if (this.hasEdge(iMesh, jMesh)) return;\n    this.buildVertex(iMesh, iIndex);\n    this.buildVertex(jMesh, jIndex);\n    this.buildEdge(iMesh, jMesh);\n    return this;\n  }\n\n  getEdge(iMesh, jMesh) {\n    const { graph } = this;\n    const [i, j] = [iMesh, jMesh].map(this.getVertexIdFromMesh);\n    // if it has an edge\n    return graph.getEdge(i, j).map(({ data }) => data);\n  }\n\n  delEdge(iMesh, jMesh) {\n    const { graph } = this;\n    const [i, j] = [iMesh, jMesh].map(this.getVertexIdFromMesh);\n    // if it has an edge\n    graph.getEdge(i, j).forEach(({ data: edgeData }) => {\n      const ijKey = Graph.edgeKey(i, j);\n      const jiKey = Graph.edgeKey(j, i);\n      Maybe.fromNull(this.meshByEdgeId[ijKey]).forEach(mesh => {\n        mesh.dispose();\n        delete this.meshByEdgeId[ijKey];\n        delete this.meshByEdgeId[jiKey];\n      });\n      graph.delEdge(i, j);\n    });\n    // Reset right menu to display scene details\n    this.mainView.setProperties();\n  }\n\n  /**\n   *\n   * @param {*} iMesh: Mesh\n   * @param {*} jMesh: Mesh\n   */\n  hasEdge(iMesh, jMesh) {\n    const [i, j] = [iMesh, jMesh].map(this.getVertexIdFromMesh);\n    return this.graph.hasEdge(i, j);\n  }\n\n  delVertexFromMesh(iMesh, is2updateServer = true) {\n    const { graph } = this;\n    const i = this.getVertexIdFromMesh(iMesh);\n    graph.getVertex(i).forEach(_ => {\n      // if vertex found delete neighbors\n      const neighbors = graph.getNeighbors(i);\n      neighbors\n        .map(j => graph.getVertex(j))\n        .forEach(maybeV =>\n          maybeV.forEach(({ data: vertexData }) => {\n            const { mesh: jMesh } = vertexData;\n            this.delEdge(iMesh, jMesh);\n          })\n        );\n      // delete itself\n      graph.delVertex(i);\n      iMesh.graphVertex = undefined;\n      if (is2updateServer) this.mainView.updateNodeInServer(this.name);\n    });\n  }\n  /**\n   *\n   * @param {*} iMesh\n   * @returns {*} Maybe<Vertex>\n   */\n  getVertex(iMesh) {\n    const { graph } = this;\n    const i = this.getVertexIdFromMesh(iMesh);\n    return graph.getVertex(i).map(({ data }) => data);\n  }\n\n  /**\n   *\n   * @param {*} iMesh\n   * @returns {*} Array<Vertex>\n   */\n  getNeighbors(iMesh) {\n    const { graph } = this;\n    const i = this.getVertexIdFromMesh(iMesh);\n    return graph\n      .getNeighbors(i)\n      .map(id => graph.getVertex(id).orNull())\n      .map(({ data }) => data)\n      .filter(x => !!x);\n  }\n\n  doMeshesBelong2SamePath(iMesh, jMesh) {\n    const iParentNodeItem = iMesh?.parent?.nodeItem;\n    const jParentNodeItem = jMesh?.parent?.nodeItem;\n    return (\n      !!iParentNodeItem &&\n      !!jParentNodeItem &&\n      iParentNodeItem.name === jParentNodeItem.name &&\n      iParentNodeItem.getType() === Path.TYPE &&\n      jParentNodeItem.getType() === Path.TYPE\n    );\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                    Private Methods                                   *\n   *                                                                                      */\n  //========================================================================================\n  /**\n   *\n   * @param {*} id: vertex to be updated id\n   * @param {*} newPosition: Vector3, new vertex position\n   * @param {*} is2updateServer: is to update in server boolean var\n   * @param {*} protectEdge: Pair<Int> with vertex indices\n   */\n  updateVertexPosition(id, newPosition, is2updateServer = true) {\n    const { graph } = this;\n    graph.getVertex(id).forEach(({ data: vertexData }) => {\n      vertexData.position = newPosition;\n    });\n    graph.getNeighbors(id).forEach(j => {\n      const i = id;\n      const edgeKey = Graph.edgeKey(i, j);\n      this.meshByEdgeId[edgeKey] && this.meshByEdgeId[edgeKey].dispose();\n      graph.getEdge(i, j).forEach(({ data: edgeData }) => {\n        const [iData, jData] = edgeData.edge;\n        this.buildEdge(iData.mesh, jData.mesh);\n      });\n      if (is2updateServer) this.mainView.updateNodeInServer(this.name);\n    });\n  }\n\n  /**\n   * Get edge directions from meshes\n   * @param {Array} ids : Array with vertexes ids\n   * @returns {Integer} should return always one of the following\n   *  +1  -> if target id is greater than source\n   *  0   -> if ids is not provided\n   *  -1  -> if source id is greater than target\n   */\n  getDirectionFromMeshes(iMesh, jMesh) {\n    if (GraphItem.isInvalidEdge(iMesh, jMesh, true)) return 0;\n    const vertexI = this.getVertexIdFromMesh(iMesh);\n    const vertexJ = this.getVertexIdFromMesh(jMesh);\n    const [i, j] = [vertexI, vertexJ].map(x => Number(x));\n    return (j - i) / Math.abs(j - i);\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                    Private Methods                                   *\n   *                                                                                      */\n  //========================================================================================\n\n  /**\n   * Delete vertex from nodeTree children\n   * @param {*} nodeTree: List of nodes (initially root.children)\n   */\n  delVertexRecursively(nodeTree = []) {\n    nodeTree.forEach(node => {\n      if (node.item.getType() !== GraphItem.TYPE) {\n        node.item.delVertex();\n        this.delVertexRecursively(node.children);\n      }\n    });\n  }\n\n  /**\n   *\n   * @param {*} mesh: Mesh\n   * @returns Integer| Undefined\n   */\n  getVertexIdFromMesh(mesh) {\n    return mesh?.graphVertex?.vertex?.id;\n  }\n\n  /**\n   *\n   * @param {*} vertexMesh: Mesh\n   * @param {*} vertexIndex: integer representing index of vertex (can be undefined)\n   *\n   */\n  buildVertex(vertexMesh, vertexIndex) {\n    // test if vertexMesh already exists in the graph\n    const vId = this.getVertexIdFromMesh(vertexMesh);\n    const maybeVertex = this.graph.getVertex(vId);\n    maybeVertex.orElseRun(() => {\n      // if vertex doesn't exist\n      const id = vertexIndex ? vertexIndex : this.vertexGenerator++;\n      this.graph.addVertex(id);\n      this.graph.getVertex(id).forEach(vertex => {\n        vertex.data = VertexData.builder()(id, vertexMesh);\n        this.addObs2VertexMesh(vertex.data);\n      });\n    });\n  }\n\n  /**\n   *\n   * @param {*} vData: VertexData\n   */\n  addObs2VertexMesh(vData) {\n    const { mesh } = vData;\n    if (mesh !== undefined) {\n      mesh.graphVertex = {\n        vertex: vData,\n        delVertex: () => this.delVertexFromMesh(mesh),\n        vertexObs: this.getVertexMeshObs(vData)\n      };\n    }\n  }\n\n  /**\n   *\n   * @param {*} vertexData: VertexData\n   */\n  getVertexMeshObs(vertexData) {\n    return ({ updatedPointMesh, is2updateServer, _ }) => {\n      if (updatedPointMesh.isDisposed()) return;\n      const newPos = Util3d.getGlobalCoordinates(\n        updatedPointMesh,\n        updatedPointMesh.position\n      ).toBabylon();\n      this.updateVertexPosition(vertexData.id, newPos, is2updateServer);\n    };\n  }\n\n  /**\n   *\n   * @param {*} iMesh: Mesh\n   * @param {*} jMesh: Mesh\n   * @param {*} edgeMeshes: Array<Mesh>\n   */\n  buildEdge(iMesh, jMesh) {\n    const { graph } = this;\n    // need to sort edge numbers because is undirected graph\n    const [i, j] = [iMesh, jMesh]\n      .map(this.getVertexIdFromMesh)\n      .sort((a, b) => a - b); // reason here: https://stackoverflow.com/questions/15084070/is-this-a-bug-in-array-sort\n    graph.addEdge(i, j);\n    graph.getVertex(i).forEach(({ data: iVertexD }) =>\n      graph.getVertex(j).forEach(({ data: jVertexD }) => {\n        graph.getEdge(i, j).forEach(edge => {\n          if (!edge.data) {\n            edge.data = new EdgeData(iVertexD, jVertexD);\n          } else {\n            edge.data.edge = [iVertexD, jVertexD];\n          }\n        });\n        // if vertices belong to same path don't build mesh\n        if (!this.doMeshesBelong2SamePath(iMesh, jMesh)) {\n          // Get edge forward/backward directions\n          const forwardDirection = this.getDirectionFromMeshes(iMesh, jMesh);\n          const backwardDirection = this.getDirectionFromMeshes(jMesh, iMesh);\n          const direction = forwardDirection + backwardDirection;\n          const edgeMesh = this.getEdgeMesh(iVertexD, jVertexD, direction);\n          this.meshByEdgeId[Graph.edgeKey(i, j)] = edgeMesh;\n          this.meshByEdgeId[Graph.edgeKey(j, i)] = edgeMesh;\n        }\n      })\n    );\n  }\n\n  getEdgeMesh(iVertexD, jVertexD, direction = 0) {\n    const edgeInGlobal = [iVertexD, jVertexD].map(({ mesh }) =>\n      Util3d.getGlobalCoord(mesh, mesh.position)\n    );\n    const edgeMesh = GraphItem.getEdgeMesh(\n      this.scene,\n      edgeInGlobal,\n      `edgeMesh${iVertexD.id}_${jVertexD.id}`,\n      Color3.Yellow()\n    );\n    edgeMesh.visibility = 0.99;\n    edgeMesh.material = GraphItem.getEdgeMaterial(this.scene, {\n      speed: 8 * direction\n    });\n    edgeMesh.parent = this.mesh;\n    edgeMesh.edgeIndexes = [iVertexD, jVertexD].map(({ id }) => id);\n    edgeMesh.getMouseContextActions = this.getEdgeMouseCtxActions(edgeMesh);\n    edgeMesh.onDel = this.onDeleteEdgeLine(edgeMesh);\n    this.addObserver2EdgeMesh(edgeMesh);\n    this.addOnClickEdge(edgeMesh);\n    return edgeMesh;\n  }\n\n  /**\n   *\n   * @param {*} edgeMesh: Mesh\n   * @returns: () => Array<{title: String, onClick: () => {}}>\n   */\n  getEdgeMouseCtxActions = edgeMesh => () => {\n    return [\n      {\n        title: \"Delete\",\n        onClick: this.getUndoDeleteEdgeLineAction(edgeMesh)\n      }\n    ];\n  };\n\n  /**\n   * Prompt confirmation to delete edge line\n   * @param {Mesh} edgeMesh : Edge line mesh to delete\n   * @returns Function to prompt confirmation to delete edge line\n   */\n  onDeleteEdgeLine = edgeMesh => () => {\n    this.mainView.confirmationAlert({\n      title: \"Confirm to delete\",\n      message: \"Are you sure you want to delete this edge?\",\n      onConfirm: this.getUndoDeleteEdgeLineAction(edgeMesh)\n    });\n  };\n\n  /**\n   * Use undoManager to delete edge line\n   * @param {Mesh} edgeMesh : Edge line mesh to delete\n   * @returns Function to delete edge line using undoManager\n   */\n  getUndoDeleteEdgeLineAction = edgeMesh => () =>\n    this.mainView.getUndoManager().doIt(this.getUndoDeleteEdge(edgeMesh));\n\n  /**\n   *\n   * @param {*} edgeMesh: Mesh\n   */\n  addObserver2EdgeMesh(edgeMesh) {\n    edgeMesh.observers = new Observable();\n    edgeMesh.observers.add(this.getEdgeObs());\n  }\n\n  /**\n   * @returns ({updatedPointMesh: Mesh, is2updateServer: Boolean, displacement: Vector3}) => {}\n   */\n  getEdgeObs =\n    () =>\n    ({ updatedPointMesh, is2updateServer, displacement }) => {\n      const v = Vec3.ofBabylon(displacement);\n      const vLocal = Util3d.getLocalCoordFromWorld(this.mesh, v, false);\n      updatedPointMesh.position = updatedPointMesh.position.add(\n        vLocal.scale(-1).toBabylon()\n      );\n      if (is2updateServer) {\n        this.graphFormMapper = this.getToFormEdge(updatedPointMesh);\n        this.mainView.setProperties(this.toForm());\n      }\n    };\n\n  /**\n   *\n   * @param {*} edgeMesh: Mesh\n   */\n  addOnClickEdge(edgeMesh) {\n    edgeMesh.onClick = this.getOnClickEdge(edgeMesh);\n  }\n\n  getOnClickEdge = edgeMesh => () => {\n    const actions = [];\n    actions.push({\n      icon: props => <i className=\"fas fa-trash\" {...props}></i>,\n      action: () => {\n        this.mainView.getUndoManager().doIt(this.getUndoDeleteEdge(edgeMesh));\n      },\n      name: \"Delete Edge [Del]\"\n    });\n    this.mainView.setContextActions(actions);\n  };\n\n  getUndoDeleteEdge(edgeMesh) {\n    const { graph } = this;\n    const { edgeIndexes } = edgeMesh;\n    const [iVertexD, jVertexD] = edgeIndexes\n      .map(i => graph.getVertex(i))\n      .map(maybeV => maybeV.some())\n      .map(({ data }) => data);\n    return this.getUndoDelLineEdge(iVertexD, jVertexD);\n  }\n\n  getUndoDelLineEdge(iVertexD, jVertexD) {\n    const { graph } = this;\n    const edgeVertexD = [iVertexD, jVertexD];\n    const [i, j] = edgeVertexD.map(({ id }) => id);\n    const edgeMeshes = edgeVertexD.map(({ mesh }) => mesh);\n    let edgeProps = { keyValueMap: {}, weight: 1, edge: {} };\n    graph.getEdge(i, j).forEach(({ data: edgeData }) => {\n      edgeProps.keyValueMap = edgeData.keyValueMap;\n      edgeProps.weight = edgeData.weight;\n      edgeProps.edge = edgeData.edge;\n    });\n    return UndoManager.actionBuilder()\n      .doAction(() => {\n        this.delEdge(...edgeMeshes);\n        this.mainView.closeContextDial();\n        this.mainView.updateNodeInServer(this.name);\n      })\n      .undoAction(({ is2UpdateInServer = true }) => {\n        this.addEdge(...edgeMeshes, [i, j]);\n        graph.getEdge(i, j).forEach(({ data: edgeData }) => {\n          edgeData.keyValueMap = edgeProps.keyValueMap;\n          edgeData.weight = edgeProps.weight;\n          edgeData.edge = edgeProps.edge;\n        });\n        if (is2UpdateInServer) this.mainView.updateNodeInServer(this.name);\n      })\n      .build();\n  }\n\n  isMeshBelong2Path = ({ parent }) => {\n    return this.mainView\n      .getNodeFromTree(parent?.name)\n      .filter(({ item }) => item.getType() === Path.TYPE)\n      .orSome(false);\n  };\n\n  /**\n   * Get item name from mesh\n   * @param {Mesh} mesh : Mesh to retrieve name\n   * @returns {String}\n   *  If mesh is a key point belonging to a path, returns parent name\n   *  and returns the mesh name otherwise\n   */\n  getMeshName = mesh => {\n    return this.isMeshBelong2Path(mesh) ? mesh.parent.name : mesh.name;\n  };\n\n  /**\n   * Check if edgeData linking Mesh1 and Mesh2 is valid\n   * @param {Mesh} iMesh : Mesh 1\n   * @param {Mesh} jMesh : Mesh 2\n   * @param {*} edgeData : Edge to be evaluated\n   * @returns {Boolean} True if is invalid and False otherwise\n   */\n  checkInvalidEdges(iMesh, jMesh, edgeData) {\n    // Check if at least one of the meshes is Path\n    //  returns false if any of the meshes is Path\n    const edgeMeshesContainsPath = [iMesh, jMesh]\n      .map(this.isMeshBelong2Path)\n      .some(x => x);\n    if (!edgeMeshesContainsPath) return false;\n    // Identify source and target meshes\n    const srcMesh = [iMesh, jMesh].filter(\n      mesh => this.getMeshName(mesh) === edgeData.belongsSrc.name\n    )[0];\n    const trgMesh = [iMesh, jMesh].filter(\n      mesh => this.getMeshName(mesh) === edgeData.belongsTrg.name\n    )[0];\n    // Call GraphItem.isInvalidEdge function to validate\n    return srcMesh && trgMesh\n      ? GraphItem.isInvalidEdge(srcMesh, trgMesh, true)\n      : false;\n  }\n\n  exportBelongToData = mesh => {\n    const { index, name } = mesh;\n    if (index === null || index === undefined) {\n      return { name };\n    }\n    // if mesh has index, then it must be a path or polygon\n    return this.mainView\n      .getNodeFromTree(mesh?.parent?.name)\n      .map(({ item }) => ({\n        name: item.name,\n        index: index > 0 ? -1 : index\n      }))\n      .orUndefined();\n  };\n  //========================================================================================\n  /*                                                                                      *\n   *                             Static Methods and Variables                             *\n   *                                                                                      */\n  //========================================================================================\n\n  static TYPE = \"GraphItem\";\n\n  static NAME = \"LogicGraph\";\n\n  static ofDict(scene, dict = null, mainView = null) {\n    if (!dict || !mainView)\n      throw new Error(\"null dictionary describing graphItem or null mainView\");\n    const graphItem = new GraphItem(\n      scene,\n      mainView,\n      dict.name,\n      dict.keyValueMap\n    );\n    const { edges } = dict;\n    let vertexCounter = Number.MIN_VALUE;\n    // create mesh of graph using addEdge\n    // map directed graph -> undirected graph\n    Object.values(edges).forEach(({ ids, belongsSrc, belongsTrg }) => {\n      const [i, j] = ids.map(x => Number(x));\n      // update vertex counter\n      vertexCounter = Math.max(vertexCounter, Math.max(i, j));\n      const edgeMeshes = getMeshesFromEdgeData(mainView, {\n        belongsSrc,\n        belongsTrg\n      });\n      const foundMeshes = edgeMeshes.reduce(\n        (e, x) => e && x !== null && x !== undefined,\n        true\n      );\n      if (foundMeshes) {\n        graphItem.addEdge(...edgeMeshes, [i, j]);\n        // add additional data\n        graphItem.graph.getEdge(i, j).forEach(({ data: edgeData }) => {\n          const dataEdge = edges[Graph.edgeKey(i, j)];\n          edgeData.importFeatures(dataEdge);\n        });\n      }\n    });\n    graphItem.vertexGenerator = vertexCounter + 1;\n    return graphItem;\n  }\n\n  static getVertexMesh(\n    scene,\n    vertexPosition,\n    color = Color3.Gray(),\n    radius = Constants.RADIUS\n  ) {\n    const sphere = Util3d.createSphere(scene, color, radius);\n    sphere.position = vertexPosition;\n    return sphere;\n  }\n\n  /**\n   *\n   * @param {*} scene: Scene\n   * @param {*} edge: Array<Vector3>\n   * @param {*} color: Color3\n   * @param {*} radius: Number\n   */\n  static getEdgeMesh(\n    scene,\n    edge,\n    name,\n    color = Color3.Gray(),\n    radius = Constants.RADIUS / 4\n  ) {\n    return Util3d.createTubeFromPoints(scene, edge, color, radius, name);\n  }\n\n  static getEdgeMaterial(\n    scene,\n    { color = Color3.Yellow(), frequency = 8, speed = 0 }\n  ) {\n    return Util3d.getShaderMaterial({\n      vertex: VERTEX,\n      frag: FRAG(frequency, speed, [color.r, color.g, color.b])\n    })(scene);\n  }\n\n  static createGraphItemIfNone = (scene, parentView) =>\n    parentView.getGraph().orElseRun(() => {\n      const graphItem = new GraphItem(scene, parentView);\n      graphItem.mesh.parent = parentView.getRootNode().item.mesh;\n      parentView.addNodeItem2Tree(graphItem);\n    });\n\n  /**\n   * Check if edge being draw is invalid\n   *    Invalid Edge 1   : validate direction\n   *    Invalid Edge 1.1 : not possible link from start to end, only end to start\n   *    Invalid Edge 1.2 : not possible link from start of a path to a keyPoint, only keyPoint to start of path\n   *    Invalid Edge 1.3 : not possible link from keyPoint to end of a path, only end of path to keyPoint\n   *    Invalid Edge 2   : from the end of a path to the end of another path\n   *    Invalid Edge 3   : from the start of a path to the start of another path\n   *    Invalid Edge 4   : firstMesh and secondMesh has same name (impossible to link mesh to itself)\n   *\n   * @param {Mesh} firstMesh: origin/source edge mesh\n   * @param {Mesh} secondMesh: destination/target edge mesh\n   * @param {Boolean} validateDirection : Flag to inform if function should validate direction (false by default)\n   * @returns {Boolean} True if has any validation error and False otherwise\n   */\n  static isInvalidEdge = (firstMesh, secondMesh, validateDirection = false) => {\n    const firstMeshParent = firstMesh.parent?.nodeItem;\n    const secondMeshParent = secondMesh.parent?.nodeItem;\n    const validationError = [];\n    // Validate invalid edges between paths\n    if (\n      Util3d.getNodeItemTypeFromMesh(firstMesh) === Path.TYPE &&\n      Util3d.getNodeItemTypeFromMesh(secondMesh) === Path.TYPE\n    ) {\n      const origin = firstMesh.index / (firstMeshParent.keyPoints.length - 1);\n      const target = secondMesh.index / (secondMeshParent.keyPoints.length - 1);\n      // Validate direction\n      if (validateDirection) {\n        // Invalid Edge 1.1 validation\n        if (origin === 0 && target === 1) validationError.push(1.1);\n      }\n      // Invalid Edge 2 validation\n      if (origin === 1 && target === 1) validationError.push(2);\n      // Invalid Edge 3 validation\n      if (origin === 0 && target === 0) validationError.push(3);\n    }\n    // Validate direction\n    if (validateDirection) {\n      // Invalid Edge 1.2 validation\n      if (\n        Util3d.getNodeItemTypeFromMesh(firstMesh) === Path.TYPE &&\n        Util3d.getNodeItemTypeFromMesh(secondMesh) === KeyPoint.TYPE\n      ) {\n        if (firstMesh.index / (firstMeshParent.keyPoints.length - 1) === 0)\n          validationError.push(1.2);\n      }\n      // Invalid Edge 1.3 validation\n      if (\n        Util3d.getNodeItemTypeFromMesh(firstMesh) === KeyPoint.TYPE &&\n        Util3d.getNodeItemTypeFromMesh(secondMesh) === Path.TYPE\n      ) {\n        if (secondMesh.index / (secondMeshParent.keyPoints.length - 1) === 1)\n          validationError.push(1.3);\n      }\n    }\n    // Invalid Edge 4 validation\n    if (firstMesh.name === secondMesh.name) validationError.push(4);\n    // Return if there's any validation error\n    return validationError.length > 0;\n  };\n}\n\nconst graphItemInstances = {};\nconst getGraphPlaceHolder = (scene, name) => {\n  const graphPlaceHolder = Util3d.createSphere(\n    scene,\n    Color3.Gray(),\n    Number.MIN_VALUE,\n    name,\n    false\n  );\n  graphPlaceHolder.position = Vector3.Zero();\n  graphPlaceHolder.scaling = Vector3.One();\n  graphPlaceHolder.rotationQuaternion = Quaternion.Identity();\n  graphPlaceHolder.visibility = 0.0;\n  return graphPlaceHolder;\n};\n\nconst getMeshesFromEdgeData = (mainView, edgeProps) => {\n  const { belongsSrc, belongsTrg } = edgeProps;\n  const edgeMesh = [belongsSrc, belongsTrg].map(({ name, index }) => {\n    return mainView\n      .getNodeFromTree(name)\n      .map(({ item }) => {\n        if (index === null || index === undefined) return item.mesh;\n        // if has index, then it must be a path or polygon\n        const ind = index < 0 ? item.keyPoints.length - 1 : index;\n        return item.keyPoints[ind];\n      })\n      .orUndefined();\n  });\n  return edgeMesh;\n};\n\nclass VertexData {\n  /**\n   *\n   * @param {*} id: Integer\n   * @param {*} mesh: Mesh\n   * @param {*} position:\n   */\n  constructor(id, mesh, position) {\n    this.id = id;\n    this.mesh = mesh;\n    this.position = position;\n  }\n\n  static builder() {\n    return (id, mesh) => {\n      const globalPos = Util3d.getGlobalCoordinates(\n        mesh,\n        mesh.position\n      ).toBabylon();\n      return new VertexData(id, mesh, globalPos);\n    };\n  }\n}\n\nclass EdgeData {\n  constructor(vertexDataI, vertexDataJ, keyValueMap = {}) {\n    this.edge = [vertexDataI, vertexDataJ];\n    this.keyValueMap = keyValueMap;\n    this.weight = 1.0;\n  }\n\n  importFeatures({ keyValueMap, weight }) {\n    this.keyValueMap = keyValueMap;\n    this.weight = weight;\n  }\n}\n\nconst VERTEX = `\nprecision highp float;\n// Attributes\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 uv;\n\n// Uniforms\nuniform mat4 worldViewProjection;\n\n// Varying\nvarying vec3 vPosition;\nvarying vec3 vNormal;\nvarying vec2 vUV;\n\nvoid main(void) {\n    vec4 outPosition = worldViewProjection * vec4(position, 1.0);\n    gl_Position = outPosition;\n\n    vUV = uv;\n    vPosition = position;\n    vNormal = normal;\n}`;\n\nconst FRAG = (freq = 8, speed = 2, color) => `\n#define PI 3.1415926538\nprecision highp float;\n\n// Varying\nvarying vec3 vPosition;\nvarying vec3 vNormal;\nvarying vec2 vUV;\n\n// Refs\nuniform float time;\n\nvoid main(void) {\n    vec3 color = vec3(${color[0]}, ${color[1]}, ${color[2]});\n    float frequency = ${Number(freq).toFixed(1)};\n    float speed = ${Number(speed).toFixed(1)};\n    gl_FragColor = vec4(color, max(0.,sin(2. * PI * vUV.y * frequency - speed * time)));\n}`;\n\nexport default GraphItem;\n","import NodeItem from \"./NodeItem\";\nimport Util3d from \"../Util3d/Util3d\";\nimport { Maybe } from \"monet\";\nimport { MeshBuilder, Quaternion, StandardMaterial } from \"@babylonjs/core\";\n\nclass KeyPoint extends NodeItem {\n  ofDict(scene, dict = null, mainView = null) {\n    return KeyPoint.ofDict(scene, dict, mainView);\n  }\n\n  getType = () => KeyPoint.TYPE;\n\n  static TYPE = \"KeyPoint\";\n\n  static ofDict(scene, dict = null, mainView = null) {\n    const name = Maybe.fromNull(dict)\n      .map(x => x.name)\n      .orSome(`KeyPoint${Math.floor(Math.random() * 1e3)}`);\n\n    const mesh = MeshBuilder.CreatePolyhedron(\n      name,\n      { custom: TRIANGULAR_ANTIPRISM, size: KeyPoint.DEFAULT_SIZE },\n      scene\n    );\n    const material = new StandardMaterial(`KeyPointMaterial${name}`, scene);\n    mesh.material = material;\n    mesh.convertToFlatShadedMesh();\n    mesh.rotationQuaternion = Quaternion.Identity();\n\n    const axis = Util3d.referentialBuilder(scene)\n      .isPickable(false)\n      .boxParams({ isVisible: false, size: 0.1 * KeyPoint.DEFAULT_SIZE })\n      .name(`${name}Axis`)\n      .build();\n    axis.parent = mesh;\n\n    NodeItem.mapDict2Mesh(dict, mesh);\n    return new KeyPoint(mesh, dict.keyValueMap);\n  }\n\n  static DEFAULT_SIZE = 0.25;\n}\n\nconst TRIANGULAR_ANTIPRISM = {\n  name: \"Triangular Antiprism (Octahedron)\",\n  category: [\"Antiprism\"],\n  vertex: [\n    [0, 0, 1.414214],\n    [1.414214, 0, 0],\n    [0, 1.414214, 0],\n    [-1.414214, 0, 0],\n    [0, -1.414214, 0],\n    [0, 0, -1.414214]\n  ],\n  face: [\n    [0, 1, 2],\n    [0, 2, 3],\n    [0, 3, 4],\n    [0, 4, 1],\n    [1, 4, 5],\n    [1, 5, 2],\n    [2, 5, 3],\n    [3, 5, 4]\n  ]\n};\n\nexport default KeyPoint;\n","import AssetNodeItem from \"./AssetNodeItem\";\n\nclass Map extends AssetNodeItem {\n  constructor(mesh, size, textureSrc, assetName) {\n    super(mesh, assetName);\n    this.size = size;\n    this.textureSrc = textureSrc;\n  }\n\n  dispose() {\n    super.dispose();\n  }\n\n  toDict() {\n    const dict = super.toDict();\n    dict[\"size\"] = this.size;\n    dict[\"textureSrc\"] = this.textureSrc;\n    return dict;\n  }\n\n  toForm() {\n    const info = this.toDict();\n    const schema = {\n      jsonSchema: {\n        type: \"object\",\n        properties: {\n          oldName: {\n            type: \"string\"\n          },\n          name: {\n            type: \"string\",\n            title: \"Name\"\n          },\n          type: {\n            type: \"string\",\n            title: \"Type\"\n          },\n          assetName: {\n            type: \"string\",\n            title: \"Asset Name\"\n          }\n        }\n      },\n      uiSchema: {\n        type: {\n          \"ui:disabled\": true\n        },\n        assetName: {\n          \"ui:disabled\": true\n        },\n        oldName: {\n          \"ui:widget\": \"hidden\"\n        }\n      },\n      data: {\n        oldName: info.name,\n        name: info.name,\n        type: info.type,\n        assetName: info.assetName\n      }\n    };\n    return schema;\n  }\n\n  ofForm(form) {\n    this.name = form.name;\n    this.mesh.name = form.name;\n    this.keyValueMap = { ...form.annotations };\n  }\n\n  getType = () => Map.TYPE;\n\n  static TYPE = \"Map\";\n}\n\nexport default Map;\n","import AssetNodeItem from \"./AssetNodeItem\";\n\nclass Mesh extends AssetNodeItem {\n  constructor(mesh, assetName, keyValueMap = {}) {\n    super(mesh, assetName, keyValueMap);\n  }\n\n  toDict() {\n    let dict = super.toDict();\n    return dict;\n  }\n\n  getMouseContextActions(mainView) {\n    return super\n      .getMouseContextActions(mainView)\n      .filter(x => x.title === \"Delete\");\n  }\n\n  getType = () => Mesh.TYPE;\n  static TYPE = \"Mesh\";\n}\n\nexport default Mesh;\n","import NodeItem from \"./NodeItem\";\nimport Util3d from \"../Util3d/Util3d\";\nimport { Maybe } from \"monet\";\nimport {\n  Color3,\n  Mesh,\n  Observable,\n  Quaternion,\n  StandardMaterial,\n  Vector3,\n  VertexBuffer,\n  VertexData\n} from \"@babylonjs/core\";\nimport Vec3 from \"../Math/Vec3\";\nimport Constants from \"../Utils/Constants\";\nimport { Animator } from \"../Utils/Animator\";\nimport { Service, ServiceRequest, Ros } from \"roslib\";\nimport { MasterDB } from \"mov-fe-lib-core\";\n\nconst MESSAGES = {\n  failGenerateCurve: \"Fail to generate navigation preview.\"\n};\n\nclass NavigationPreviewItem extends NodeItem {\n  /**\n   *\n   * @param {*} mesh: Mesh\n   * @param {*} poses\n   * @param {*} robotConfig\n   * @param {*} scene\n   * @param {*} mainView\n   */\n  constructor(mesh, poses, robotConfig, scene, mainView) {\n    super(mesh, {});\n    this.poses = poses;\n    this.robotConfig = robotConfig;\n    this.scene = scene;\n    this.mainView = mainView;\n    this.arrowMeshes = this.createArrowMeshes();\n    this.navPath = this.createNavPath();\n  }\n\n  ofDict(scene, dict = null, mainView = null) {\n    return NavigationPreviewItem.ofDict(scene, dict, mainView);\n  }\n\n  dispose() {\n    this.navPath && this.navPath.dispose();\n    this.arrowMeshes.forEach(arrow => arrow.dispose());\n  }\n\n  toDict() {\n    const dict = super.toDict();\n    dict.poses = this.poses;\n    dict.robotConfig = this.robotConfig;\n    return dict;\n  }\n\n  toForm() {\n    const form = super.toForm();\n    delete form.jsonSchema.properties.position;\n    delete form.jsonSchema.properties.rotation;\n    delete form.jsonSchema.properties.color;\n    delete form.jsonSchema.properties.annotations;\n    delete form.uiSchema.position;\n    delete form.uiSchema.rotation;\n    delete form.uiSchema.color;\n    delete form.data.position;\n    delete form.data.rotation;\n    delete form.data.color;\n    delete form.data.annotations;\n    form.jsonSchema.properties.config = {\n      type: \"string\",\n      title: \"Robot Configuration\"\n    };\n    form.uiSchema.config = {\n      \"ui:widget\": \"selectScopeModal\",\n      \"ui:options\": {\n        scopeList: \"Configuration\",\n        name: \"Robot Config\",\n        filter: e => true\n      }\n    };\n    form.data.config = this.robotConfig;\n    return form;\n  }\n\n  ofForm(form) {\n    this.name = form.name;\n    this.mesh.name = form.name;\n    this.robotConfig = form.config;\n  }\n\n  createArrowMeshes() {\n    return this.poses.map((pose, i) => {\n      const beginPos = Vec3.of(pose.position).toBabylon();\n      const theta = 2 * Math.atan2(pose.orientation[3], pose.orientation[0]);\n      const endPos = new Vector3(Math.cos(theta), Math.sin(theta), 0).add(\n        beginPos\n      );\n      const arrowMesh = Util3d.getArrow(\n        this.scene,\n        `${this.name}Pose${i}`,\n        beginPos,\n        endPos,\n        Constants.RADIUS / 6\n      );\n      arrowMesh.parent = this.mesh;\n      arrowMesh.getChildren().forEach(m => {\n        m.material = Util3d.getMaterialFromColor(\n          i % 2 === 0 ? Color3.Red() : Color3.Green()\n        );\n        m.material.freeze();\n        m.observers = new Observable();\n        m.observers.add(this.getArrowObserver(this.mainView));\n        m.onClick = () => {\n          this.mainView.highlightNodesInTree([this.name]);\n          this.mainView.setProperties(this.toForm());\n          setTimeout(() => {\n            this.mainView.highlightMeshesInScene(\n              this.arrowMeshes.flatMap(m => m.getChildren())\n            );\n          });\n        };\n        m.onDel = () => this.mainView.deleteNodeFromTreeUsingName(this.name);\n      });\n      return arrowMesh;\n    });\n  }\n\n  createNavPath() {\n    const navPath = new NavigationPath(this);\n    navPath.play();\n    return navPath;\n  }\n\n  getType = () => NavigationPreviewItem.TYPE;\n\n  static TYPE = \"NavigationPreviewItem\";\n\n  static ofDict(scene, dict = null, mainView = null) {\n    const name = Maybe.fromNull(dict)\n      .map(x => x.name)\n      .orSome(`NavPreview${Math.floor(Math.random() * 1e3)}`);\n\n    const mesh = new Mesh(name, scene);\n    mesh.position = Vector3.Zero();\n    mesh.scaling = Vector3.One();\n    mesh.rotationQuaternion = Quaternion.Identity();\n    mesh.isPickable = false;\n    const navPreviewItem = new NavigationPreviewItem(\n      mesh,\n      dict.poses,\n      dict.robotConfig,\n      scene,\n      mainView\n    );\n    return navPreviewItem;\n  }\n\n  getArrowObserver(mainView) {\n    return ({ updatedPointMesh, is2updateServer, displacement }) => {\n      const v = Vec3.ofBabylon(displacement);\n      const vLocal = Util3d.getLocalCoordFromWorld(this.mesh, v, false);\n      updatedPointMesh.position = updatedPointMesh.position.add(\n        vLocal.scale(-1).toBabylon()\n      );\n      if (is2updateServer) {\n        mainView.setProperties(this.toForm());\n      }\n    };\n  }\n}\n\nclass NavigationPath {\n  constructor(navItem) {\n    this.navItem = navItem;\n    this.scene = navItem.scene;\n    this.mainView = navItem.mainView;\n    this.pathPromise = this.getPathFromService(\n      this.navItem.poses,\n      this.navItem.robotConfig\n    );\n    this.pathPromise.then(({ path }) => {\n      this.pathPoses = path.poses.map(x => x.pose);\n      this.mesh = this.getNavigationPathMesh(this.pathPoses);\n      this.animator = this.getAnimator();\n    });\n  }\n\n  play() {\n    this.pathPromise.then(() => {\n      this.animator.play();\n    });\n  }\n\n  stop() {\n    this.pathPromise.then(() => {\n      this.animator.stop();\n    });\n  }\n\n  dispose() {\n    this.mesh && this.mesh.dispose();\n    this.stop();\n  }\n\n  getAnimator() {\n    const n = this.pathPoses.length;\n    return Animator.builder()\n      .initialState({\n        time: 0,\n        T: new Date().getTime(),\n        indices: [...Array(n)].map((_, i) => i)\n      })\n      .nextState(s => {\n        const { time, T, indices } = s;\n        const indexSpeed = 3;\n        const dt = (new Date().getTime() - T) / 1000;\n        const positions = [...Array(n)];\n        // with circle topology, check modular arithmetic below\n        indices.forEach(\n          (index, i) => (indices[i] = (index + indexSpeed * dt) % n)\n        );\n        positions.forEach((_, i) => {\n          let iPrev = Math.floor(indices[i]);\n          let iNext = Math.ceil(indices[i]);\n          const t = (indices[i] - iPrev) / (iNext - iPrev);\n          if (indices[i] > n - 1) {\n            iPrev = 0;\n            iNext = 1;\n          }\n          positions[i] = Vec3.of([\n            this.pathPoses[iPrev].position.x,\n            this.pathPoses[iPrev].position.y,\n            this.pathPoses[iPrev].position.z\n          ])\n            .scale(1 - t)\n            .add(\n              Vec3.of([\n                this.pathPoses[iNext].position.x,\n                this.pathPoses[iNext].position.y,\n                this.pathPoses[iNext].position.z\n              ]).scale(t)\n            )\n            .toArray();\n        });\n        this.mesh.updateVerticesData(\n          VertexBuffer.PositionKind,\n          positions.flatMap(x => x)\n        );\n        return {\n          time: time + dt,\n          T: new Date().getTime(),\n          indices\n        };\n      })\n      .while(_ => !this.scene.isDisposed)\n      .build();\n  }\n\n  getNavigationPathMesh(pathPoses) {\n    const pointCloudMesh = new Mesh(\n      `cloudPoint${this.navItem.name}`,\n      this.scene\n    );\n    const mat = new StandardMaterial(\n      `cloudPoint${this.navItem.name}Material`,\n      this.scene\n    );\n    mat.emissiveColor = new Color3(1, 1, 1);\n    mat.disableLighting = true;\n    mat.pointsCloud = true;\n    mat.pointSize = 5;\n    pointCloudMesh.material = mat;\n    pointCloudMesh.isPickable = false;\n\n    const vertexData = new VertexData();\n    const points = pathPoses.map(({ position }) => [\n      position.x,\n      position.y,\n      position.z\n    ]);\n    //Assign positions\n    vertexData.positions = points.flatMap(x => x);\n    const colors = new Array(4 * points.length);\n    vertexData.colors = colors.fill(1.0);\n    //Apply vertexData to custom mesh\n    vertexData.applyToMesh(pointCloudMesh, true);\n    pointCloudMesh.parent = this.navItem.mesh;\n    return pointCloudMesh;\n  }\n\n  getPathFromService([startPose, endPose], robotConfig) {\n    const ros = new Ros({\n      url: BRIDE_CONNECTION\n    });\n    const inputMessage = {\n      scene: this.mainView.sceneName,\n      robot_config: this.navItem.robotConfig,\n      initial_pose: rosPoseFromPose(startPose),\n      final_pose: rosPoseFromPose(endPose)\n    };\n\n    return new Promise(res => {\n      // If there is an error on the backend, an 'error' emit will be emitted.\n      ros.on(\"error\", error => {\n        console.log(\"Navigation Service \", error);\n        // fall back to default\n        this.getDefaultPath(inputMessage, res);\n      });\n      // Find out exactly when we made a connection.\n      ros.on(\"connection\", () => {\n        console.log(\"Navigation Service Connection made!\");\n      });\n\n      ros.on(\"close\", () => {\n        console.log(\"Navigation Service Connection closed.\");\n      });\n\n      const navigationService = new Service({\n        ros: ros,\n        name: SERVICE_NAME,\n        serviceType: SERVICE_TYPE\n      });\n      const request = new ServiceRequest(inputMessage);\n      navigationService.callService(\n        request,\n        result => {\n          ros.close();\n          res(result);\n        },\n        error => {\n          // fall back to default\n          this.getDefaultPath(inputMessage, res);\n        }\n      );\n    });\n  }\n\n  getDefaultPath(msg, resolve) {\n    MasterDB.cloudFunction(\n      Constants.NAV_CLOUD_NAME,\n      \"generate_path\",\n      [msg.scene, msg.initial_pose, msg.final_pose, msg.robot_config],\n      data => {\n        console.log(\"Got default path\", data.success);\n        if (data.success) {\n          resolve({ path: data.result });\n        } else {\n          console.log(\"Caught exception in default path\", data.error);\n          this.getPathFromPoses(this.navItem.poses)\n            .then(path => resolve({ path }))\n            .catch(err => {\n              console.log(\"Caught error in getPathFromPoses\", err);\n              this.mainView.showAlert(MESSAGES.failGenerateCurve, \"error\");\n            });\n        }\n      }\n    ).catch(error => {\n      console.log(\"debug couldn't execute default generate path\", error);\n      this.getPathFromPoses(this.navItem.poses)\n        .then(path => resolve({ path }))\n        .catch(err => {\n          console.log(\"Caught error in getPathFromPoses\", err);\n          this.mainView.showAlert(MESSAGES.failGenerateCurve, \"error\");\n        });\n    });\n  }\n\n  getPathFromPoses(poses, samples = 25) {\n    const [start, end] = poses;\n    const startPos = Vec3.of(start.position);\n    const endPos = Vec3.of(end.position);\n    const v = endPos.sub(startPos);\n    const nextPoint = startPos\n      .add(v.scale(0.5))\n      .add(Vec3.of([start.orientation[0], start.orientation[3], 0]).scale(2));\n    const nextNextPoint = endPos\n      .add(v.scale(-0.5))\n      .add(Vec3.of([end.orientation[0], end.orientation[3], 0]).scale(2));\n    const splineCage = [startPos, nextPoint, nextNextPoint, endPos];\n    const path = [...Array(samples)];\n    for (let i = 0; i < samples; i++) {\n      path[i] = polyInterpolation(splineCage, i / (samples - 1)).toArray();\n    }\n    return new Promise(re =>\n      re({\n        poses: path.map(point => ({\n          pose: {\n            position: { x: point[0], y: point[1], z: point[2] },\n            orientation: { x: 0, y: 0, z: 0, w: 1 }\n          }\n        }))\n      })\n    );\n  }\n}\n\n/**\n *\n * @param {*} cage: Array<Vec3>\n * @param {*} t: [0,1] real\n * @returns\n */\nfunction polyInterpolation(cage, t) {\n  if (cage.length === 1) return cage[0];\n  const [, ...tail] = cage;\n  let pairs = zip(cage, tail);\n  pairs.splice(-1, 1);\n  const newCage = pairs.map(([x, y]) => {\n    return lerp(x, y)(t);\n  });\n  return polyInterpolation(newCage, t);\n}\n/**\n *\n * @param {*} x: Vec3\n * @param {*} y: Vec3\n * @returns t: [0,1] real => Vec3\n */\nfunction lerp(x, y) {\n  return t => {\n    return x.scale(1 - t).add(y.scale(t));\n  };\n}\n/**\n *\n * @param {*} a: Array\n * @param {*} b: Array\n * @returns\n */\nfunction zip(a, b) {\n  return a.map((x, i) => [x, b[i]]);\n}\n\nfunction rosPoseFromPose({ position, orientation }) {\n  return {\n    position: {\n      x: position[0],\n      y: position[1],\n      z: position[2]\n    },\n    orientation: {\n      w: orientation[0],\n      x: orientation[1],\n      y: orientation[2],\n      z: orientation[3]\n    }\n  };\n}\n\nconst SERVICE_NAME = \"/generate_path/path_points/in\";\nconst SERVICE_TYPE = \"movai_common/GeneratePath\";\nconst BRIDE_CONNECTION = \"ws://localhost:9090\";\n\nexport default NavigationPreviewItem;\n","import Clipboard from \"../Utils/Clipboard\";\nimport Vec3 from \"../Math/Vec3\";\nimport { Maybe } from \"monet\";\nimport _capitalize from \"lodash/capitalize\";\nimport { Quaternion, Color3, Vector3 } from \"@babylonjs/core\";\nimport AnnotationManager from \"../Utils/AnnotationManager\";\nimport GlobalRef from \"./GlobalRef\";\nimport Constants from \"../Utils/Constants\";\n\nclass NodeItem {\n  constructor(mesh, keyValueMap = {}) {\n    this.name = mesh.name;\n    this.mesh = mesh;\n    this.mesh.getMouseContextActions = this.getMouseContextActions;\n    this.mesh.nodeItem = this;\n    this.keyValueMap = keyValueMap;\n  }\n\n  dispose() {\n    this.delVertex();\n    this.mesh.dispose();\n  }\n\n  toDict() {\n    return {\n      name: this.name,\n      type: this.getType(),\n      position: Vec3.ofBabylon(this.mesh?.position).toArray(),\n      quaternion: Maybe.fromNull(this.mesh?.rotationQuaternion)\n        .map(x => [x.w, x.x, x.y, x.z])\n        .orLazy(() => {\n          const q = Quaternion.RotationYawPitchRoll(\n            this.mesh.rotation.y,\n            this.mesh.rotation.x,\n            this.mesh.rotation.z\n          );\n          return [q.w, q.x, q.y, q.z];\n        }),\n      color: Maybe.fromNull(this.mesh?.material)\n        .flatMap(x =>\n          Maybe.fromNull(x.diffuseColor).map(z => [\n            z.r,\n            z.g,\n            z.b,\n            this.mesh.visibility\n          ])\n        )\n        .orSome([0, 0, 0, 1]),\n      keyValueMap: this.keyValueMap,\n      isVisible: this.mesh.isEnabled()\n    };\n  }\n\n  /**\n   * Generates json based on https://github.com/rjsf-team/react-jsonschema-form\n   */\n  toForm() {\n    const info = this.toDict();\n    const color = new Color3(info.color[0], info.color[1], info.color[2]);\n    const q = new Quaternion(\n      info.quaternion[1],\n      info.quaternion[2],\n      info.quaternion[3],\n      info.quaternion[0]\n    );\n    const euler = q.toEulerAngles();\n\n    const schema = {\n      jsonSchema: {\n        type: \"object\",\n        properties: {\n          oldName: {\n            type: \"string\"\n          },\n          name: {\n            type: \"string\",\n            title: \"Name\"\n          },\n          type: {\n            type: \"string\",\n            title: \"Type\"\n          },\n          position: {\n            type: \"object\",\n            title: \"Position\",\n            properties: {\n              x: {\n                type: \"number\",\n                title: \"x\"\n              },\n              y: {\n                type: \"number\",\n                title: \"y\"\n              },\n              z: {\n                type: \"number\",\n                title: \"z\"\n              }\n            }\n          },\n          rotation: {\n            type: \"object\",\n            title: \"Rotation\",\n            properties: {\n              x: {\n                type: \"number\",\n                title: \"x\"\n              },\n              y: {\n                type: \"number\",\n                title: \"y\"\n              },\n              z: {\n                type: \"number\",\n                title: \"z\"\n              }\n            }\n          },\n          color: {\n            type: \"object\",\n            title: \"Color\",\n            properties: {\n              r: {\n                type: \"number\"\n              },\n              g: {\n                type: \"number\"\n              },\n              b: {\n                type: \"number\"\n              },\n              a: {\n                type: \"number\"\n              }\n            }\n          }\n        }\n      },\n      uiSchema: {\n        type: {\n          \"ui:disabled\": true\n        },\n        color: {\n          \"ui:widget\": \"color\"\n        },\n        oldName: {\n          \"ui:widget\": \"hidden\"\n        },\n        position: {\n          \"ui:widget\": \"collapse\"\n        },\n        rotation: {\n          \"ui:widget\": \"collapse\"\n        }\n      },\n      data: {\n        oldName: info.name,\n        name: info.name,\n        type: info.type,\n        position: {\n          x: info.position[0],\n          y: info.position[1],\n          z: info.position[2]\n        },\n        rotation: {\n          x: euler.x * Constants.RAD2DEG,\n          y: euler.y * Constants.RAD2DEG,\n          z: euler.z * Constants.RAD2DEG\n        },\n        color: {\n          r: color.r,\n          g: color.g,\n          b: color.b,\n          a: this.mesh.visibility\n        }\n      }\n    };\n\n    NodeItem.setAnnotations2Form(schema, this.keyValueMap);\n    return schema;\n  }\n\n  /**\n   * Changes NodeItem based on a form\n   *\n   * Warning: side effect function\n   * @param {*} form\n   */\n  ofForm(form) {\n    this.name = form.name;\n    this.mesh.name = form.name;\n\n    Maybe.fromNull(form?.position).forEach(position => {\n      const pos = [position.x, position.y, position.z].map(Number.parseFloat);\n      this.mesh.position = Vector3.FromArray(pos);\n    });\n    Maybe.fromNull(form?.rotation).forEach(euler => {\n      const angles = [euler.x, euler.y, euler.z]\n        .map(Number.parseFloat)\n        .map(deg => deg * Constants.DEG2RAD);\n      this.mesh.rotationQuaternion = Quaternion.FromEulerAngles(...angles);\n    });\n    if (this.mesh.material) {\n      const color = new Color3(form.color.r, form.color.g, form.color.b);\n      this.mesh.material.diffuseColor = color;\n      this.mesh.material.emissiveColor = color;\n      this.mesh.visibility = form.color.a;\n    }\n    this.keyValueMap = { ...form.annotations };\n  }\n\n  getType = () => NodeItem.TYPE;\n\n  getMouseContextActions = mainView => {\n    return [\n      {\n        title: \"Copy\",\n        onClick: () => Clipboard.copy(this.getCopyFunction())\n      },\n      {\n        title: \"Delete\",\n        onClick: () =>\n          mainView\n            .getNodeFromTree(this.name)\n            .forEach(node => mainView.onDeleteNode(node, false))\n      }\n    ];\n  };\n\n  getCopyFunction(\n    isForceUpdate = true,\n    nameGenerator = old => old + \"_copy\" + Clipboard.getUID()\n  ) {\n    // mousePosFromRoot : Vector3\n    return (mousePosFromRoot, someMainView) =>\n      someMainView.getSceneMemory().map(({ scene }) => {\n        const { item: rootItem } = someMainView.getRootNode();\n        const copyDict = this.toDict();\n        copyDict.name = nameGenerator(copyDict.name);\n        const newPosArray = Vec3.ofBabylon(mousePosFromRoot).toArray();\n        // preserves z-coordinate\n        newPosArray[2] = copyDict.position[2];\n        copyDict.position = newPosArray;\n        const copiedNodeItem = this.ofDict(scene, copyDict, someMainView);\n        const { mesh: copiedMesh } = copiedNodeItem;\n        copiedMesh.parent = rootItem.mesh;\n        someMainView.addNodeItem2Tree(\n          copiedNodeItem,\n          GlobalRef.NAME,\n          true,\n          true,\n          isForceUpdate\n        );\n        return copiedNodeItem;\n      });\n  }\n\n  delVertex() {\n    let delVertex = this.mesh.graphVertex?.delVertex;\n    if (!delVertex) {\n      const childrenWithDelVertex = (this.mesh?._children || [])\n        .filter(childMesh => !!childMesh.graphVertex)\n        .map(childMesh => childMesh.graphVertex.delVertex);\n      delVertex = () => childrenWithDelVertex.forEach(del => del());\n    }\n    delVertex();\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                           Static attributes/methods                                  *\n   *                                                                                      */\n  //========================================================================================\n\n  static TYPE = \"NodeItem\";\n\n  // side-effect function\n  static mapDict2Mesh(dict, mesh) {\n    if (!mesh) throw new Error(\"can't map a null mesh\");\n    Maybe.fromNull(dict).forEach(someDict => {\n      Maybe.fromNull(dict.name).forEach(name => (mesh.name = name));\n      Maybe.fromNull(someDict.position).forEach(\n        position => (mesh.position = Vec3.of(position).toBabylon())\n      );\n      Maybe.fromNull(someDict.quaternion).forEach(quaternion => {\n        const babylonQuaternion = new Quaternion(\n          quaternion[1],\n          quaternion[2],\n          quaternion[3],\n          quaternion[0]\n        );\n        mesh.rotationQuaternion = babylonQuaternion.normalize();\n      });\n      Maybe.fromNull(someDict.color).forEach(color => {\n        const babylonColor = new Color3(color[0], color[1], color[2]);\n        Maybe.fromNull(mesh.material).forEach(material => {\n          Maybe.fromNull(material.diffuseColor).forEach(\n            z => (mesh.material.diffuseColor = babylonColor)\n          );\n          Maybe.fromNull(material.emissiveColor).forEach(\n            z => (mesh.material.emissiveColor = babylonColor)\n          );\n        });\n      });\n    });\n    return mesh;\n  }\n\n  // side effect function\n  static setAnnotations2Form(schema, keyValueMap = {}) {\n    schema.jsonSchema.properties.annotations = {\n      title: \"Annotations\",\n      type: \"object\",\n      properties: {}\n    };\n    schema.uiSchema.annotations = {\n      \"ui:widget\": \"collapse\"\n    };\n    schema.data[\"annotations\"] = { ...keyValueMap };\n    const annotations = AnnotationManager.getAnnotations();\n\n    [\"safety\", \"behaviour\", \"localization\", \"navigation\"].forEach(\n      annotation => {\n        // if (annotations[annotation].labels.length > 0) {\n        schema.jsonSchema.properties.annotations.properties[annotation] = {\n          title: _capitalize(annotation),\n          type: \"string\"\n        };\n        schema.uiSchema.annotations[annotation] = {\n          \"ui:widget\": \"selectScopeModal\",\n          \"ui:options\": {\n            scopeList: \"Annotation\",\n            name: _capitalize(annotation),\n            filter: e => {\n              return (\n                annotations[annotation] &&\n                annotations[annotation].names.includes(e.name)\n              );\n            }\n          }\n        };\n        // }\n      }\n    );\n  }\n\n  static randomId() {\n    return \"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\".replace(/[xy]/g, function (c) {\n      // eslint-disable-next-line no-mixed-operators\n      var r = (Math.random() * 16) | 0,\n        v = c === \"x\" ? r : (r & 0x3) | 0x8;\n      return v.toString(16);\n    });\n  }\n}\n\nexport default NodeItem;\n","import NodeItem from \"./NodeItem\";\nimport Vec3 from \"../Math/Vec3\";\nimport Util3d from \"../Util3d/Util3d\";\nimport React from \"react\";\nimport { Maybe } from \"monet\";\nimport Constants from \"../Utils/Constants\";\nimport {\n  Observable,\n  Color3,\n  MeshBuilder,\n  Quaternion,\n  Vector3,\n  Space\n} from \"@babylonjs/core\";\nimport { UndoManager } from \"mov-fe-lib-core\";\nimport GraphItem from \"./GraphItem\";\n\nconst RADIUS = Constants.RADIUS;\n\nclass Path extends NodeItem {\n  /**\n   * @param {*} mesh\n   * @param {*} localPath: is an array of 3-arrays of numbers of the local coordinates in relation to mesh.position and quaternion\n   * @param {*} keyPoints: are the keyPoints meshes array\n   * @param {*} splinePath: is an array of 3-arrays of numbers of the local coordinates in relation to mesh.position and quaternion\n   * @param {*} mainView: MainView\n   * @param {*} keyValueMap: annotations\n   */\n  constructor(\n    mesh,\n    localPath,\n    keyPoints,\n    splinePath,\n    mainView,\n    weight = 1,\n    keyValueMap = {}\n  ) {\n    super(mesh, keyValueMap);\n    // Array<Vector3> points in relation to its mean\n    this.localPath = localPath;\n    // Array<Meshes> representing key points of the curve\n    this.keyPoints = keyPoints;\n    // spline points from local path\n    this.splinePath = splinePath;\n    this.selectedKeyPointIndex = -1;\n    this.mainView = mainView;\n    this.weight = weight;\n  }\n\n  toDict() {\n    const dict = super.toDict();\n    dict.localPath = this.localPath;\n    dict.splinePath = this.splinePath;\n    dict.weight = this.weight;\n    return dict;\n  }\n\n  toForm() {\n    const schema = super.toForm();\n    if (this.selectedKeyPointIndex >= 0) {\n      schema.jsonSchema.properties[\"selectedKeyPoint\"] = {\n        type: \"object\",\n        title: `KeyPoint ${this.selectedKeyPointIndex}`,\n        properties: {\n          x: {\n            type: \"number\",\n            title: \"x\"\n          },\n          y: {\n            type: \"number\",\n            title: \"y\"\n          },\n          z: {\n            type: \"number\",\n            title: \"z\"\n          }\n        }\n      };\n      schema.uiSchema[\"selectedKeyPoint\"] = {\n        \"ui:widget\": \"collapse\"\n      };\n      schema.uiSchema[\"position\"] = { \"ui:widget\": \"hidden\" };\n      schema.uiSchema[\"rotation\"] = { \"ui:widget\": \"hidden\" };\n      schema.uiSchema[\"color\"] = { \"ui:widget\": \"hidden\" };\n      schema.uiSchema[\"annotations\"] = { \"ui:widget\": \"hidden\" };\n      const selectedMesh = this.keyPoints[this.selectedKeyPointIndex];\n      const position = Util3d.getGlobalCoordinates(\n        selectedMesh,\n        selectedMesh.position\n      ).toArray();\n      schema.data[\"selectedKeyPoint\"] = {\n        x: position[0],\n        y: position[1],\n        z: position[2]\n      };\n\n      return schema;\n    }\n    // re-order attributes\n    const props = { ...schema.jsonSchema.properties };\n    const newSchema = {\n      type: \"object\",\n      properties: {\n        oldName: props.oldName,\n        name: props.name,\n        type: props.type,\n        weight: {\n          type: \"number\",\n          title: \"Weight\"\n        },\n        position: props.position,\n        rotation: props.rotation,\n        color: props.color,\n        annotations: props.annotations\n      }\n    };\n    schema.jsonSchema = newSchema;\n    schema.data[\"weight\"] = this.weight;\n    return schema;\n  }\n\n  ofForm(form) {\n    super.ofForm(form);\n    if (this.selectedKeyPointIndex >= 0) {\n      const selectedKeyPoint = this.keyPoints[this.selectedKeyPointIndex];\n      const formPosition = form.selectedKeyPoint;\n      const newPosInWorldCoordinates = Vector3.FromArray(\n        [formPosition.x, formPosition.y, formPosition.z].map(Number.parseFloat)\n      );\n      const localPos = Util3d.getLocalCoordFromGlobal(\n        selectedKeyPoint,\n        newPosInWorldCoordinates\n      ).toArray();\n      selectedKeyPoint.position = new Vector3(\n        localPos[0],\n        localPos[1],\n        localPos[2]\n      );\n      selectedKeyPoint.observers.notifyObservers({\n        updatedPointMesh: selectedKeyPoint,\n        is2updateServer: false\n      });\n      return;\n    }\n    this.weight = Number(form.weight);\n    this.updatePathEdgeWithForm(this.weight, this.keyValueMap);\n  }\n\n  updatePathEdgeWithForm(weight, annotations) {\n    this.mainView.getGraph().forEach(({ item: graphItem }) => {\n      const { graph } = graphItem;\n      const first = this.keyPoints[0];\n      const last = this.keyPoints[this.keyPoints.length - 1];\n      const edge = [first, last]\n        .filter(v => !!v?.graphVertex?.vertex)\n        .map(v => v.graphVertex.vertex);\n      if (edge.length < 2) return;\n      const edgeIds = edge.map(v => v.id);\n      graph.getEdge(...edgeIds).forEach(({ data: edgeData }) => {\n        edgeData.weight = weight;\n        edgeData.keyValueMap = annotations;\n      });\n      this.mainView.updateNodeInServer(graphItem.name);\n    });\n  }\n\n  ofDict(scene, dict = null, mainView = null) {\n    return Path.ofDict(scene, dict, mainView);\n  }\n\n  getCopyFunction(isForceUpdate, nameGenerator) {\n    // mousePosFromRoot : Vector3\n    return (mousePosFromRoot, someMainView) => {\n      return super\n        .getCopyFunction(isForceUpdate, nameGenerator)(\n          mousePosFromRoot,\n          someMainView\n        )\n        .map(copiedPath => {\n          const kp = copiedPath?.keyPoints;\n          if (kp !== undefined && isPathOnGraph(this)) {\n            Path.updateGraph(someMainView, kp, copiedPath, true);\n          }\n          return copiedPath;\n        });\n    };\n  }\n\n  getType = () => Path.TYPE;\n\n  /**\n   * Import path features\n   * @param {*} pathItem\n   */\n  importFeatures(pathItem = new Path({}, {}, {}, {}, {})) {\n    this.keyValueMap = pathItem.keyValueMap;\n    this.weight = pathItem.weight;\n  }\n\n  static TYPE = \"Path\";\n\n  static ofDict(scene, dict = null, mainView = null) {\n    if (!dict || !mainView)\n      throw new Error(\"null dictionary describing path or null mainView\");\n\n    const name = dict.name;\n    const curve = dict.localPath.map(z => Vec3.of(z).toBabylon());\n    const spline = Util3d.getSplineFromCurve(curve);\n    const { points } = spline;\n    let mesh = null;\n    //hack for creating 1 point curves\n    if (points.length === 1) {\n      mesh = MeshBuilder.CreateLines(\n        name,\n        { points: points, updatable: true },\n        scene\n      );\n    } else {\n      mesh = Util3d.createTubeFromPoints(\n        scene,\n        points,\n        Color3.Gray(),\n        RADIUS / 8,\n        name\n      );\n    }\n    mesh.position = Vec3.of(dict.position).toBabylon();\n    mesh.material = Util3d.getMaterialFromColor(\n      Color3.FromArray(dict.color),\n      scene,\n      `PathMaterial${name}`\n    );\n    mesh.rotationQuaternion = Maybe.fromNull(dict.quaternion)\n      .map(quaternion =>\n        new Quaternion(\n          quaternion[1],\n          quaternion[2],\n          quaternion[3],\n          quaternion[0]\n        ).normalize()\n      )\n      .orSome(Quaternion.Identity());\n    const splinePath = Util3d.splineObj2redis(spline);\n    const keyPoints = createPlaceHolderKeyPoints(\n      scene,\n      { ...dict, mesh, splinePath },\n      mainView\n    );\n    const path2return = new Path(\n      mesh,\n      curve.map(point => [point.x, point.y, point.z]),\n      keyPoints,\n      splinePath,\n      mainView,\n      dict.weight,\n      dict.keyValueMap\n    );\n    mesh.onClick = getMeshOnClick(mainView, path2return);\n    mesh.observers = new Observable();\n    mesh.observers.add(getMeshObserver(keyPoints));\n    return path2return;\n  }\n\n  /**\n   * Create new mesh from old, has side effects\n   *\n   * @param {*} newPoints: Vector3\n   * @param {*} scene: Scene\n   * @param {*} item: PathItem\n   * @param {*} mainView: MainView\n   * @param {*} keyPointUpdateFunction: (scene, mainView, mesh, item) => Array<Mesh>\n   */\n  static createNewMeshFromOldUsingNewPoints(\n    newPoints,\n    scene,\n    item,\n    mainView,\n    keyPointUpdateFunction = defaultKeyPointUpdate\n  ) {\n    const { mesh: oldMesh } = item;\n    const average = Util3d.pointAverage(newPoints);\n    newPoints = newPoints.map(x => x.subtract(average));\n\n    const spline = Util3d.getSplineFromCurve(newPoints);\n    const newMesh = Util3d.createTubeFromPoints(\n      scene,\n      spline.points,\n      Color3.Gray(),\n      RADIUS / 8,\n      oldMesh.name\n    );\n\n    // average in parent coord\n    const rotMat3 = Util3d.getRotationMatrix(oldMesh);\n    const scaleVec3 = Vec3.ofBabylon(oldMesh.scaling);\n    const averageInParentCoord = rotMat3\n      .prodVec(Vec3.ofBabylon(average).mul(scaleVec3))\n      .toBabylon();\n\n    newMesh.parent = oldMesh.parent;\n    newMesh.rotationQuaternion = oldMesh.rotationQuaternion;\n    newMesh.position = averageInParentCoord.add(oldMesh.position);\n\n    newMesh.material = oldMesh.material;\n    newMesh.visibility = oldMesh.visibility;\n    newMesh.onClick = oldMesh.onClick;\n    newMesh.getMouseContextActions = oldMesh.getMouseContextActions;\n    newMesh.nodeItem = oldMesh.nodeItem;\n    newMesh.observers = oldMesh.observers;\n    item.localPath = newPoints.map(x => Vec3.ofBabylon(x).toArray());\n    item.splinePath = Util3d.splineObj2redis(spline);\n    item.mesh = newMesh;\n    const oldKeyPoints = [...item.keyPoints];\n    item.keyPoints = keyPointUpdateFunction(scene, mainView, oldMesh, item);\n    // update children\n    const childrenCopy = [...oldMesh._children];\n    childrenCopy\n      .filter(c => mainView.getNodeFromTree(c.name).isJust())\n      .forEach(c => {\n        c.parent = item.mesh;\n      });\n    // update observer that triggers keypoints observers\n    item.mesh.observers.clear();\n    item.mesh.observers.add(getMeshObserver(item.keyPoints));\n\n    Path.updateGraph(\n      mainView,\n      oldKeyPoints,\n      item,\n      oldKeyPoints.length !== item.keyPoints.length\n    );\n    oldMesh.dispose();\n    return item;\n  }\n\n  static deleteKeyPointWithUndo(scene, keyPointMesh, mainView) {\n    const index = keyPointMesh.index;\n    const name = keyPointMesh.parent.name;\n    mainView.getNodeFromTree(name).forEach(({ item }) => {\n      const { mesh } = item;\n      const copyPosition = { ...mesh.position };\n      let newPoints = item.localPath.map(x => Vec3.of(x).toBabylon());\n      if (newPoints.length === 2) return;\n      mainView\n        .getUndoManager()\n        .doIt(\n          Path.getUndoDeleteKeyPoint(\n            name,\n            index,\n            copyPosition,\n            newPoints,\n            scene,\n            item,\n            mainView\n          )\n        );\n    });\n  }\n\n  static getUndoDeleteKeyPoint(\n    name,\n    index,\n    copyPosition,\n    newPoints,\n    scene,\n    item,\n    mainView\n  ) {\n    return UndoManager.actionBuilder()\n      .doAction(() => {\n        const copyPoints = [...newPoints];\n        copyPoints.splice(index, 1);\n        Path.createNewMeshFromOldUsingNewPoints(\n          copyPoints,\n          scene,\n          item,\n          mainView,\n          Path.onAddNewPointKeyPointUpdate\n        );\n        mainView.updateNodeInServer(name);\n      })\n      .undoAction(({ is2UpdateInServer = true }) => {\n        const copyPoints = [...newPoints];\n        item.mesh.position = copyPosition;\n        Path.createNewMeshFromOldUsingNewPoints(\n          copyPoints,\n          scene,\n          item,\n          mainView,\n          Path.onAddNewPointKeyPointUpdate\n        );\n        if (is2UpdateInServer) mainView.updateNodeInServer(name);\n      })\n      .build();\n  }\n\n  static onAddNewPointKeyPointUpdate(scene, mainView, oldMesh, item) {\n    // used when new keypoint is added\n    const keypoints = createPlaceHolderKeyPoints(scene, item, mainView);\n    return keypoints;\n  }\n\n  /**\n   *\n   * @param {*} scene\n   * @param {*} keyPointMesh\n   * @param {*} curveMesh\n   * @param {*} mainView\n   * @param {*} orientation: it belongs to the set {-1,1}, represents orientation\n   */\n  static addKeyPointInBetween(scene, keyPointMesh, mainView, orientation) {\n    const index = keyPointMesh.index;\n    const name = keyPointMesh.parent.name;\n    mainView.getNodeFromTree(name).forEach(({ item }) => {\n      const points = item.localPath.map(x => Vec3.of(x).toBabylon());\n      const copyPosition = { ...item.mesh.position };\n      mainView\n        .getUndoManager()\n        .doIt(\n          Path.getUndoAddKeyPointInBetween(\n            name,\n            index,\n            orientation,\n            item,\n            points,\n            copyPosition,\n            scene,\n            mainView\n          )\n        );\n    });\n  }\n\n  static getUndoAddKeyPointInBetween(\n    name,\n    index,\n    orientation,\n    item,\n    points,\n    copyPosition,\n    scene,\n    mainView\n  ) {\n    return UndoManager.actionBuilder()\n      .doAction(() => {\n        const nextIndex = index + orientation;\n        const numberOfPoints = item.localPath.length;\n        let newPoints = [];\n        const oldPoints = [...points];\n        if (nextIndex < 0) {\n          newPoints = [\n            oldPoints[0].scale(3).subtract(oldPoints[1]).scale(0.5)\n          ].concat(oldPoints);\n        } else if (nextIndex > numberOfPoints - 1) {\n          newPoints = oldPoints.concat([\n            oldPoints[numberOfPoints - 1]\n              .scale(3)\n              .subtract(oldPoints[numberOfPoints - 2])\n              .scale(0.5)\n          ]);\n        } else {\n          // TODO: consider doing using slice\n          const specialIndex = index + Math.max(0, orientation);\n          for (let i = 0; i < specialIndex; i++) {\n            newPoints.push(oldPoints[i]);\n          }\n          newPoints.push(oldPoints[nextIndex].add(oldPoints[index]).scale(0.5));\n          for (let i = specialIndex; i < numberOfPoints; i++) {\n            newPoints.push(oldPoints[i]);\n          }\n        }\n\n        Path.createNewMeshFromOldUsingNewPoints(\n          newPoints,\n          scene,\n          item,\n          mainView,\n          Path.onAddNewPointKeyPointUpdate\n        );\n\n        mainView.updateNodeInServer(name);\n      })\n      .undoAction(({ is2UpdateInServer = true }) => {\n        const copyPoints = [...points];\n        item.mesh.position = copyPosition;\n        Path.createNewMeshFromOldUsingNewPoints(\n          copyPoints,\n          scene,\n          item,\n          mainView,\n          Path.onAddNewPointKeyPointUpdate\n        );\n        if (is2UpdateInServer) mainView.updateNodeInServer(name);\n      })\n      .build();\n  }\n\n  /**\n   *\n   * @param {*} mainView: MainView\n   * @param {*} oldKpMeshes: Mesh\n   * @param {*} pathItem: PathItem\n   * @param {*} isTopologyChange: boolean, vertex added or deleted from curve\n   */\n  static updateGraph(mainView, oldKpMeshes, pathItem, isTopologyChange) {\n    if (!isTopologyChange) return;\n    mainView.getGraph().forEach(({ item: graph }) => {\n      const keyPoints = pathItem.keyPoints;\n      const edgeMeshes = [keyPoints[0], keyPoints[keyPoints.length - 1]];\n      const firstLastKpNeighborEdges = [];\n      const firstLastOldKp = [\n        oldKpMeshes[0],\n        oldKpMeshes[oldKpMeshes.length - 1]\n      ];\n      graph.getEdge(...firstLastOldKp).forEach(oldEdge => {\n        // get keypoint neighbors edges, besides the edge of the path itself\n        firstLastOldKp.forEach(kp => {\n          const edges = [];\n          graph\n            .getNeighbors(kp)\n            .filter(v => !graph.doMeshesBelong2SamePath(kp, v.mesh))\n            .forEach(neigh => {\n              edges.push({\n                edge: graph.getEdge(kp, neigh.mesh),\n                vertex: neigh\n              });\n            });\n          firstLastKpNeighborEdges.push(edges);\n        });\n        // remove old path vertices\n        firstLastOldKp.forEach(vp => graph.delVertexFromMesh(vp));\n        // add new path edge\n        graph.addEdge(...edgeMeshes);\n        graph.getEdge(...edgeMeshes).forEach(edge => {\n          edge.importFeatures(oldEdge);\n        });\n        // add old neighbors to path endpoints\n        firstLastKpNeighborEdges.forEach((neighborEdges, i) => {\n          neighborEdges.forEach(edgeVertexObj => {\n            graph.addEdge(edgeMeshes[i], edgeVertexObj.vertex.mesh);\n            graph\n              .getEdge(edgeMeshes[i], edgeVertexObj.vertex.mesh)\n              .forEach(edge =>\n                edgeVertexObj.edge.forEach(oldNeighEdge => {\n                  edge.importFeatures(oldNeighEdge);\n                })\n              );\n          });\n        });\n        mainView.updateNodeInServer(graph.name);\n      });\n    });\n  }\n\n  static isKeyPointMesh(mesh, mainView) {\n    return (\n      Number.isInteger(mesh.index) &&\n      mainView\n        .getNodeFromTree(mesh.parent.name)\n        .filter(({ item }) => item.getType() === Path.TYPE)\n        .orSome(false)\n    );\n  }\n\n  /**\n   *\n   * @param {*} left: keypoint mesh\n   * @param {*} right: keypoint mesh\n   * @param {*} mainView\n   */\n  static areKeyPointsCompatible(left, right, mainView) {\n    return mainView\n      .getNodeFromTree(left.parent.name)\n      .flatMap(({ item: leftPath }) =>\n        mainView\n          .getNodeFromTree(right.parent.name)\n          .map(({ item: rightPath }) => {\n            let i = left.index;\n            let j = right.index;\n            const n = leftPath.localPath.length;\n            const m = rightPath.localPath.length;\n            // keypoint must be a boundary\n            if (!((i === 0 || i === n - 1) && (j === 0 || j === m - 1)))\n              return false;\n            i = i === 0 ? 1 : -1;\n            j = j === 0 ? 1 : -1;\n            // must preserve orientation\n            if (i * j > 0) return false;\n            return true;\n          })\n      )\n      .orSome(false);\n  }\n  /**\n   * Merge simple paths, function\n   * Not commutative action\n   * @param {*} leftPath\n   * @param {*} rightPath\n   * @param {*} mergeName\n   * @param {*} mainView\n   */\n  static mergePaths(leftPathName, rightPathName, mergeName, mainView) {\n    mainView.getNodeFromTree(leftPathName).forEach(({ item: leftPath }) => {\n      mainView.getNodeFromTree(rightPathName).forEach(({ item: rightPath }) => {\n        const parent = leftPath.mesh.parent;\n        const leftChildren = leftPath.mesh._children.filter(\n          kp => kp.index === undefined\n        );\n        const rightChildren = rightPath.mesh._children.filter(\n          kp => kp.index === undefined\n        );\n        const leftDict = leftPath.toDict();\n        const rightPointsInLeftCoord = rightPath.keyPoints\n          .splice(1)\n          .map(kp =>\n            Util3d.getLocalCoordFromWorld(\n              { parent: leftPath.mesh },\n              Vec3.ofBabylon(kp.absolutePosition)\n            )\n          );\n        leftDict.name = mergeName;\n        // concat new path\n        leftDict.localPath = leftDict.localPath.concat(\n          rightPointsInLeftCoord.map(kp => kp.toArray())\n        );\n        const average = Util3d.pointAverageVec3(\n          leftDict.localPath.map(x => Vec3.of(x))\n        );\n\n        // center curve\n        leftDict.localPath = leftDict.localPath.map(x =>\n          Vec3.of(x).sub(average).toArray()\n        );\n        mainView.getSceneMemory().forEach(({ scene }) => {\n          const newPath = Path.ofDict(scene, leftDict, mainView);\n          newPath.mesh.parent = parent;\n          newPath.mesh.translate(average.toBabylon(), 1, Space.LOCAL);\n          //import default features\n          newPath.importFeatures();\n          mainView.addNodeItem2Tree(newPath, parent.name);\n          Path.addEdgesInKeyPoints(newPath.keyPoints, scene, mainView);\n          leftChildren.forEach(child => {\n            mainView.getNodeFromTree(child.name).forEach(({ item }) => {\n              mainView.updateNodeItemInTree(item, newPath.name);\n              const newChildPos = Util3d.getLocalCoordFromWorld(\n                { parent: newPath.mesh },\n                Vec3.ofBabylon(child.absolutePosition)\n              );\n              child.position = newChildPos.toBabylon();\n              child.parent = newPath.mesh;\n            });\n          });\n          rightChildren.forEach(child => {\n            mainView.getNodeFromTree(child.name).forEach(({ item }) => {\n              mainView.updateNodeItemInTree(item, newPath.name);\n              const newChildPos = Util3d.getLocalCoordFromWorld(\n                { parent: newPath.mesh },\n                Vec3.ofBabylon(child.absolutePosition)\n              );\n              child.position = newChildPos.toBabylon();\n              child.parent = newPath.mesh;\n            });\n          });\n          mainView.deleteNodeFromTreeUsingName(leftPath.name);\n          mainView.deleteNodeFromTreeUsingName(rightPath.name);\n        });\n      });\n    });\n  }\n\n  static unMergePaths(oldPaths, mergeName, mainView, is2UpdateInServer = true) {\n    oldPaths.forEach(path => {\n      mainView.getSceneMemory().forEach(({ scene }) => {\n        const pathItem = Path.ofDict(scene, path.dict, mainView);\n        pathItem.mesh.parent = path.parent;\n        mainView.addNodeItem2Tree(\n          pathItem,\n          path.parent.name,\n          is2UpdateInServer\n        );\n        Path.addEdgesInKeyPoints(\n          pathItem.keyPoints,\n          scene,\n          mainView,\n          is2UpdateInServer\n        );\n        path.children.forEach(child => {\n          mainView.getNodeFromTree(child.name).forEach(({ item }) => {\n            mainView.updateNodeItemInTree(\n              item,\n              pathItem.name,\n              is2UpdateInServer\n            );\n            const newChildPos = Util3d.getLocalCoordFromWorld(\n              { parent: pathItem.mesh },\n              Vec3.ofBabylon(child.absolutePosition)\n            );\n            child.position = newChildPos.toBabylon();\n            child.parent = pathItem.mesh;\n          });\n        });\n      });\n    });\n    mainView.deleteNodeFromTreeUsingName(mergeName, is2UpdateInServer);\n  }\n\n  static addEdgesInKeyPoints(\n    keyPointMeshes,\n    scene,\n    mainView,\n    is2UpdateInServer = true\n  ) {\n    GraphItem.createGraphItemIfNone(scene, mainView);\n    mainView.getGraph().forEach(({ item: graph }) => {\n      const edgeMeshes = [\n        keyPointMeshes[0],\n        keyPointMeshes[keyPointMeshes.length - 1]\n      ];\n      graph.addEdge(...edgeMeshes);\n      if (is2UpdateInServer) mainView.updateNodeInServer(graph.name);\n    });\n  }\n}\n\nexport default Path;\n\nconst getMeshOnClick = (mainView, nodeItem) => () => {\n  mainView.closeContextDial();\n  mainView\n    .getNodeFromTree(nodeItem.name)\n    .forEach(node => (node.item.selectedKeyPointIndex = -1));\n};\n\nconst getMeshObserver =\n  keypoints =>\n  ({ updatedPointMesh, is2updateServer, displacement }) => {\n    keypoints.forEach(k => {\n      if (!!k.graphVertex) {\n        k.graphVertex.vertexObs({\n          updatedPointMesh: k,\n          is2updateServer,\n          displacement\n        });\n      }\n    });\n  };\n\nfunction defaultKeyPointUpdate(scene, mainView, oldMesh, item) {\n  // used when key point is updated\n  const childrenCopy = [...oldMesh._children];\n  const spline = item.splinePath.map(z => new Vector3(z[0], z[1], 0));\n  childrenCopy.forEach(c => {\n    c.parent = item.mesh;\n  });\n  return item.keyPoints.map((k, i) => {\n    k.index = i;\n    k.name = `${oldMesh.name}keyPointSpline${i}`;\n    k.position = Vec3.of(item.localPath[i]).toBabylon();\n    k.rotationQuaternion = Quaternion.Identity();\n    if (!!oldMesh.graphVertex) k.graphVertex = oldMesh.graphVertex;\n    if (i > 0 && i < item.keyPoints.length - 1) {\n      k._children.forEach(kChild => kChild.dispose());\n      const c = getConeMesh(\n        scene,\n        k.material.diffuseColor,\n        item.mesh,\n        i,\n        spline,\n        k.position\n      )();\n      c.parent = k;\n    }\n    return k;\n  });\n}\n\nconst getKeyPointObserverFunction = (scene, mainView) => {\n  return ({ updatedPointMesh, is2updateServer, displacement }) => {\n    if (!updatedPointMesh.parent) return;\n    mainView\n      .getNodeFromTree(updatedPointMesh.parent.name)\n      .forEach(({ item }) => {\n        const { index } = updatedPointMesh;\n        const { mesh } = item;\n        let newPoints = item.localPath.map(x => Vec3.of(x).toBabylon());\n        newPoints[index] = updatedPointMesh.position;\n        Path.createNewMeshFromOldUsingNewPoints(\n          newPoints,\n          scene,\n          item,\n          mainView\n        );\n        if (index > 0 && index < newPoints.length - 1) {\n          // we know by construction that this keyPoint has children\n          mainView.highlightMeshesInScene([item.keyPoints[index]._children[0]]);\n        }\n        if (is2updateServer) {\n          mainView.updateNodeInServer(mesh.name);\n          mainView.setProperties(item.toForm());\n        }\n      });\n  };\n};\n\nconst getKeyPointActions = (scene, keyPointMesh, mainView) => {\n  const actions = [];\n\n  mainView.getNodeFromTree(keyPointMesh.parent.name).forEach(pathTreeNode => {\n    const item = pathTreeNode.item;\n    const curve = item.localPath;\n\n    if (curve.length !== 2) {\n      actions.push({\n        icon: props => <i className=\"fas fa-trash\" {...props}></i>,\n        action: parentView => {\n          Path.deleteKeyPointWithUndo(scene, keyPointMesh, parentView);\n          parentView.closeContextDial();\n        },\n        name: \"Delete node [DEL]\"\n      });\n    }\n\n    actions.push({\n      icon: props => <i className=\"fas fa-less-than\" {...props}></i>,\n      action: parentView => {\n        Path.addKeyPointInBetween(scene, keyPointMesh, parentView, -1);\n        parentView.closeContextDial();\n      },\n      name: \"Add previous\"\n    });\n\n    actions.push({\n      icon: props => <i className=\"fas fa-greater-than\" {...props}></i>,\n      action: parentView => {\n        Path.addKeyPointInBetween(scene, keyPointMesh, parentView, 1);\n        parentView.closeContextDial();\n      },\n      name: \"Add next\"\n    });\n  });\n\n  return actions;\n};\n\nconst createPlaceHolderKeyPoints = (scene, pseudoItem, mainView) => {\n  const color = new Color3(0.25, 0.25, 0.25);\n  const keyPoints = [];\n  const curve = pseudoItem.localPath.map(z => Vec3.of(z).toBabylon());\n  const spline = pseudoItem.splinePath.map(z => new Vector3(z[0], z[1], 0));\n  const curveMesh = pseudoItem.mesh;\n  curve.forEach((p, i) => {\n    const sphere = getSphereMesh(scene, color, curveMesh, i);\n    const cone = () => {\n      const c = getConeMesh(scene, color, curveMesh, i, spline, p)();\n      const s = getSphereMesh(scene, color, curveMesh, i)();\n      s.visibility = 0.1;\n      c.parent = s;\n      return s;\n    };\n\n    const keyPoint = i === 0 || i === curve.length - 1 ? sphere() : cone();\n    keyPoint.parent = curveMesh;\n    keyPoint.position = p;\n    keyPoint.index = i;\n    keyPoint.observers = new Observable();\n    keyPoints.push(keyPoint);\n    keyPoint.observers.add(getKeyPointObserverFunction(scene, mainView));\n  });\n\n  keyPoints.forEach(kp => {\n    kp.onClick = () => {\n      mainView.setContextActions(getKeyPointActions(scene, kp, mainView));\n      mainView.getNodeFromTree(kp.parent.name).forEach(node => {\n        node.item.selectedKeyPointIndex = kp.index;\n        mainView.setProperties(node.item.toForm());\n      });\n    };\n    kp.getMouseContextActions = getKpMouseContextActions(\n      scene,\n      kp,\n      pseudoItem.name\n    );\n    kp.onDel = () => Path.deleteKeyPointWithUndo(scene, kp, mainView);\n  });\n  return keyPoints;\n};\n\nfunction getKpMouseContextActions(scene, kp, pathName) {\n  return mainView => {\n    const actions = [];\n    mainView.getNodeFromTree(pathName).forEach(({ item: pathItem }) => {\n      const n = pathItem.localPath.length;\n      if (n <= 2) {\n        return;\n      }\n      if (kp.index > 0 && kp.index < n - 1) {\n        actions.push({\n          title: \"Split curve\",\n          onClick: () => {\n            mainView.getUndoManager().doIt(\n              UndoManager.actionBuilder()\n                .doAction(() => {\n                  splitCurve(mainView, scene, kp, pathItem.name);\n                })\n                .undoAction(({ is2UpdateInServer = true }) => {\n                  unSplitCurve(mainView, scene, pathItem, is2UpdateInServer);\n                })\n                .build()\n            );\n          }\n        });\n      }\n    });\n    actions.push({\n      title: \"Delete point\",\n      onClick: () => {\n        Path.deleteKeyPointWithUndo(scene, kp, mainView);\n      }\n    });\n    return actions;\n  };\n}\n\nfunction splitCurve(mainView, scene, kp, pathName) {\n  // TODO: very similar to unSplitCurve\n  mainView.getGraph().forEach(({ item: graph }) => {\n    mainView.getNodeFromTree(pathName).forEach(({ item }) => {\n      const edgesByCurveBoundary = [[], []];\n      const oldPath = item.localPath;\n      const oldCenter = Vec3.ofBabylon(item.mesh.position);\n      const pathParent = item?.mesh.parent;\n      // creating split path positions\n      const splitAtIndex = kp.index;\n      const splitPath = [[], []];\n      oldPath.forEach((point, i) => {\n        if (i <= splitAtIndex) {\n          splitPath[0].push(point);\n        } else {\n          if (i === splitAtIndex + 1) splitPath[1].push(oldPath[splitAtIndex]);\n          splitPath[1].push(point);\n        }\n      });\n      // retrieve edges from path boundary\n      const keyPoints = item.keyPoints;\n      const boundary = [keyPoints[0], keyPoints[keyPoints.length - 1]];\n      boundary.forEach((keyPoint, i) => {\n        graph\n          .getNeighbors(keyPoint)\n          .filter(v => !graph.doMeshesBelong2SamePath(keyPoint, v.mesh))\n          .forEach(neigh => {\n            edgesByCurveBoundary[i].push({\n              edge: graph.getEdge(keyPoint, neigh.mesh),\n              vertex: neigh\n            });\n          });\n      });\n      // delete boundary vertex from graph\n      boundary.forEach(keyPoint => {\n        graph.delVertexFromMesh(keyPoint);\n      });\n      // remove old path\n      mainView.deleteNodeFromTreeUsingName(pathName);\n      // create new paths\n      splitPath.forEach((localPath, i) => {\n        // set props of new paths from old path\n        const middlePoint = Util3d.pointAverage(\n          localPath.map(p => Vec3.of(p).toBabylon())\n        );\n        const centeredCurve = localPath.map(v =>\n          Vec3.of(v).sub(Vec3.ofBabylon(middlePoint)).toBabylon()\n        );\n        // set colorArray\n        const colorArray = [];\n        item.mesh.material.diffuseColor.toArray(colorArray);\n        // set quaternion\n        const quaternion =\n          item.mesh.rotationQuaternion.clone() || Quaternion.Identity();\n        const quaternionArray = [\n          quaternion.w,\n          quaternion.x,\n          quaternion.y,\n          quaternion.z\n        ];\n        const newPath = Path.ofDict(\n          scene,\n          {\n            name: i === 0 ? pathName : `${pathName}_split${numberOfSplits++}`,\n            position: oldCenter.toArray(),\n            quaternion: quaternionArray,\n            color: colorArray,\n            localPath: centeredCurve.map(z => Vec3.ofBabylon(z).toArray())\n          },\n          mainView\n        );\n        newPath.mesh.translate(middlePoint, 1, Space.LOCAL);\n        newPath.mesh.parent = pathParent;\n        newPath.importFeatures(item);\n        mainView.addNodeItem2Tree(newPath, pathParent.name);\n        // add edge of new path\n        const newKeyPoints = newPath.keyPoints;\n        const newEdge = [\n          newKeyPoints[0],\n          newKeyPoints[newKeyPoints.length - 1]\n        ];\n        graph.addEdge(...newEdge);\n        graph.getEdge(...newEdge).forEach(edge => {\n          edge.importFeatures(newPath);\n        });\n        // add old edges to the new paths\n        edgesByCurveBoundary[i].forEach(edgeVertexObj => {\n          graph.addEdge(newEdge[i], edgeVertexObj.vertex.mesh);\n          graph.getEdge(newEdge[i], edgeVertexObj.vertex.mesh).forEach(edge => {\n            edgeVertexObj.edge.forEach(oldNeighEdge => {\n              edge.importFeatures(oldNeighEdge);\n            });\n          });\n        });\n      });\n      mainView.updateNodeInServer(graph.name);\n    });\n  });\n}\n\nfunction unSplitCurve(mainView, scene, oldPathItem, is2UpdateInServer = true) {\n  mainView.getGraph().forEach(({ item: graph }) => {\n    const oldPathName = oldPathItem.name;\n    const oldPathNameSplit = `${oldPathName}_split${--numberOfSplits}`;\n    mainView.getNodeFromTree(oldPathName).forEach(({ item: leftSplit }) => {\n      mainView\n        .getNodeFromTree(oldPathNameSplit)\n        .forEach(({ item: rightSplit }) => {\n          const pathParent = leftSplit.mesh.parent;\n          const edgesByCurveBoundary = [[], []];\n          // retrieve edges from split paths\n          const boundary = [\n            leftSplit.keyPoints[0],\n            rightSplit.keyPoints[rightSplit.keyPoints.length - 1]\n          ];\n          boundary.forEach((keyPoint, i) => {\n            graph\n              .getNeighbors(keyPoint)\n              .filter(v => !graph.doMeshesBelong2SamePath(keyPoint, v.mesh))\n              .forEach(neigh => {\n                edgesByCurveBoundary[i].push({\n                  edge: graph.getEdge(keyPoint, neigh.mesh),\n                  vertex: neigh\n                });\n              });\n          });\n          // delete graph vertices from split path\n          // delete boundary vertex from graph\n          boundary.forEach(keyPoint => {\n            graph.delVertexFromMesh(keyPoint);\n          });\n          // remove split paths\n          mainView.deleteNodeFromTreeUsingName(oldPathName, is2UpdateInServer);\n          mainView.deleteNodeFromTreeUsingName(\n            oldPathNameSplit,\n            is2UpdateInServer\n          );\n          // create oldPathItem\n          // set colorArray\n          const colorArray = [];\n          oldPathItem.mesh.material.diffuseColor.toArray(colorArray);\n          const newPath = Path.ofDict(\n            scene,\n            {\n              name: oldPathName,\n              position: Vec3.ofBabylon(oldPathItem.mesh.position).toArray(),\n              color: colorArray,\n              localPath: oldPathItem.localPath\n            },\n            mainView\n          );\n          newPath.mesh.parent = pathParent;\n          newPath.importFeatures(oldPathItem);\n          mainView.addNodeItem2Tree(\n            newPath,\n            pathParent.name,\n            is2UpdateInServer\n          );\n          // add oldPathItem path edge\n          const newKeyPoints = newPath.keyPoints;\n          const newEdge = [\n            newKeyPoints[0],\n            newKeyPoints[newKeyPoints.length - 1]\n          ];\n          graph.addEdge(...newEdge);\n          graph.getEdge(...newEdge).forEach(edge => {\n            edge.importFeatures(newPath);\n          });\n          // add boundary edges of the split\n          edgesByCurveBoundary.forEach((edges, i) => {\n            edges.forEach(edgeVertexObj => {\n              graph.addEdge(newEdge[i], edgeVertexObj.vertex.mesh);\n              graph\n                .getEdge(newEdge[i], edgeVertexObj.vertex.mesh)\n                .forEach(edge => {\n                  edgeVertexObj.edge.forEach(oldNeighEdge => {\n                    edge.importFeatures(oldNeighEdge);\n                  });\n                });\n            });\n          });\n          if (is2UpdateInServer) mainView.updateNodeInServer(graph.name);\n        });\n    });\n  });\n}\n\nfunction getConeMesh(scene, color, curveMesh, i, spline, p) {\n  return () => {\n    const index = spline\n      .map(z => p.subtract(z).length())\n      .reduce((e, x, i) => (e.value < x ? e : { value: x, index: i }), {\n        value: Number.MAX_VALUE,\n        index: -1\n      }).index;\n    const nextSplinePoint = spline[index + 1]\n      ? spline[index + 1]\n      : spline[index];\n    const currentSplinePoint = spline[index];\n    const u = nextSplinePoint\n      .subtract(currentSplinePoint)\n      .normalize()\n      .scale(RADIUS);\n    const c = Util3d.createOrientedCone(\n      scene,\n      u,\n      color,\n      `${curveMesh.name}keyPointCone${i}`,\n      false\n    );\n    return c;\n  };\n}\n\nfunction getSphereMesh(scene, color, curveMesh, i) {\n  return () =>\n    Util3d.createSphere(\n      scene,\n      color,\n      RADIUS,\n      `${curveMesh.name}keyPointSpline${i}`,\n      true\n    );\n}\n\nfunction isPathOnGraph(pathItem) {\n  return [\n    pathItem.keyPoints[0]?.graphVertex,\n    pathItem.keyPoints[pathItem.keyPoints.length - 1]?.graphVertex\n  ].every(v => !!v);\n}\n\nlet numberOfSplits = 0;\n","import NodeItem from \"./NodeItem\";\nimport { Mesh, StandardMaterial, Color3, VertexData } from \"@babylonjs/core\";\nimport { Maybe } from \"monet\";\nimport { MasterDB, Utils } from \"mov-fe-lib-core\";\n\nconst { ofNull } = Utils;\n\nclass PointCloud extends NodeItem {\n  /**\n   *\n   * @param {*} mesh\n   * @param {*} robot: {name: string, id: string} representing a robot\n   */\n  constructor(mesh, robot) {\n    super(mesh);\n    this.robot = robot;\n    this.pointCloudSubscribe();\n  }\n\n  pointCloudSubscribe() {\n    MasterDB.subscribe(\n      {\n        Scope: \"Robot\",\n        Name: this.robot.id,\n        Parameter: \"front_lidar\"\n      },\n      data => {\n        Maybe.fromNull(data)\n          .flatMap(d => ofNull(d.key))\n          .flatMap(k => ofNull(k.Robot[this.robot.id]))\n          .flatMap(r => ofNull(r.Parameter))\n          .flatMap(p => ofNull(p.front_lidar))\n          .flatMap(f => ofNull(f.Value))\n          .flatMap(v => ofNull(v.points))\n          .forEach(points => this.updatePointCloud(points));\n      },\n      data => {\n        Maybe.fromNull(data.value)\n          .flatMap(v => ofNull(v.Robot))\n          .flatMap(r => ofNull(r[this.robot.id]))\n          .flatMap(r => ofNull(r.Parameter))\n          .flatMap(p => ofNull(p.front_lidar))\n          .flatMap(f => ofNull(f.Value))\n          .flatMap(v => ofNull(v.points))\n          .forEach(points => this.updatePointCloud(points));\n      }\n    );\n  }\n\n  /**\n   *\n   * @param {*} points: Array<3-Array>\n   */\n  updatePointCloud(points) {\n    const vertexData = new VertexData();\n    //Assign positions\n    vertexData.positions = points.flatMap(x => x);\n    const colors = new Array(4 * points.length);\n    vertexData.colors = colors.fill(1.0);\n    //Apply vertexData to custom mesh\n    vertexData.applyToMesh(this.mesh, true);\n  }\n\n  dispose() {\n    super.dispose();\n    MasterDB.unsubscribe({\n      Scope: \"Robot\",\n      Name: this.robot.id,\n      Parameter: \"front_lidar\"\n    });\n  }\n\n  getType = () => PointCloud.TYPE;\n\n  static TYPE = \"PointCloud\";\n\n  static ofDict(scene, dict = null, mainView = null) {\n    if (!dict || !mainView)\n      throw new Error(\n        \"null dictionary describing point cloud or null mainView\"\n      );\n\n    const pointCloudMesh = new Mesh(`cloudPoint${dict.name}`, scene);\n    const mat = new StandardMaterial(`cloudPoint${dict.name}Material`, scene);\n    mat.emissiveColor = new Color3(1, 1, 1);\n    mat.disableLighting = true;\n    mat.pointsCloud = true;\n    mat.pointSize = 2;\n    pointCloudMesh.material = mat;\n\n    return new PointCloud(pointCloudMesh, dict);\n  }\n}\n\nexport default PointCloud;\n","import NodeItem from \"./NodeItem\";\nimport Vec3 from \"../Math/Vec3\";\nimport Util3d from \"../Util3d/Util3d\";\nimport { Maybe } from \"monet\";\nimport React from \"react\";\nimport { Utils } from \"mov-fe-lib-core\";\nimport Constants from \"../Utils/Constants\";\nimport {\n  Vector3,\n  Observable,\n  Color3,\n  StandardMaterial,\n  Quaternion\n} from \"@babylonjs/core\";\nimport { UndoManager } from \"mov-fe-lib-core\";\n\nconst RADIUS = Constants.RADIUS;\n\nconst { mod: positiveMod } = Utils;\n\nclass PolygonRegion extends NodeItem {\n  /**\n   * @param {*} mesh\n   * @param {*} localPolygon: is an array of 3-arrays of numbers of the local coordinates in relation to mesh.position and quaternion\n   * @param {*} keyPoints: are the keyPoints meshes array\n   */\n  constructor(\n    mesh,\n    localPolygon,\n    height,\n    keyPoints,\n    keyValueMap = {},\n    navigationAllowed = true\n  ) {\n    super(mesh, keyValueMap);\n    this.localPolygon = localPolygon;\n    this.height = height;\n    this.keyPoints = keyPoints;\n    this.navigationAllowed = navigationAllowed;\n  }\n\n  toDict() {\n    const dict = super.toDict();\n    dict.localPolygon = this.localPolygon;\n    dict.height = this.height;\n    dict.navigationAllowed = this.navigationAllowed;\n    return dict;\n  }\n\n  ofDict(scene, dict = null, mainView = null) {\n    return PolygonRegion.ofDict(scene, dict, mainView);\n  }\n\n  toForm() {\n    const schema = super.toForm();\n    const props = { ...schema.jsonSchema.properties };\n    const newJsonSchema = {\n      type: \"object\",\n      properties: {\n        oldName: props.oldName,\n        name: props.name,\n        type: props.type,\n        navigationAllowed: {\n          type: \"boolean\",\n          title: \"Navigation allowed\"\n        },\n        position: props.position,\n        rotation: props.rotation,\n        color: props.color,\n        annotations: props.annotations\n      }\n    };\n    schema.jsonSchema = newJsonSchema;\n    schema.data[\"navigationAllowed\"] = this.navigationAllowed;\n    return schema;\n  }\n\n  ofForm(form) {\n    super.ofForm(form);\n    this.navigationAllowed = Boolean(form.navigationAllowed);\n  }\n\n  getType = () => PolygonRegion.TYPE;\n\n  static TYPE = \"PolygonRegion\";\n\n  static ofDict(scene, dict = null, mainView = null) {\n    if (!dict || !mainView)\n      throw new Error(\"null dictionary describing polygon or null mainView\");\n\n    const polygon = dict.localPolygon.map(z => Vec3.of(z).toBabylon());\n    const middlePoint = Vec3.of(dict.position).toBabylon();\n\n    const mesh = createExtrudedPolygonMesh(\n      scene,\n      polygon,\n      dict.height,\n      dict.name\n    );\n    mesh.position = middlePoint;\n    mesh.rotationQuaternion = Quaternion.Identity();\n\n    const material = new StandardMaterial(`PolygonMaterial${dict.name}`, scene);\n    const color = new Color3(dict.color[0], dict.color[1], dict.color[2]);\n    material.diffuseColor = color;\n    material.emissiveColor = color;\n    mesh.material = material;\n    mesh.visibility = dict.color[3] || VISIBILITY;\n    Maybe.fromNull(dict.quaternion).forEach(quaternion => {\n      const babylonQuaternion = new Quaternion(\n        quaternion[1],\n        quaternion[2],\n        quaternion[3],\n        quaternion[0]\n      );\n      mesh.rotationQuaternion = babylonQuaternion.normalize();\n    });\n\n    const keypoints = createPlaceHolderKeyPoints(\n      scene,\n      polygon,\n      mesh,\n      mainView\n    );\n\n    return new PolygonRegion(\n      mesh,\n      polygon.map(point => [point.x, point.y, point.z]),\n      dict.height,\n      keypoints,\n      dict.keyValueMap,\n      dict.navigationAllowed\n    );\n  }\n\n  /**\n   * Create new mesh from old, has side effects\n   *\n   * @param {*} newPoints: Vector3\n   * @param {*} scene: Scene\n   * @param {*} item: PathItem\n   * @param {*} mainView: MainView\n   * @param {*} keyPointUpdateFunction: (scene, mainView, mesh, item) => Array<Mesh>\n   */\n  static createNewMeshFromOldUsingNewPoints(\n    newPoints,\n    scene,\n    item,\n    mainView,\n    keyPointUpdateFunction = defaultKeyPointUpdate\n  ) {\n    const { mesh: oldMesh } = item;\n    const average = Util3d.pointAverage(newPoints);\n    newPoints = newPoints.map(x => x.subtract(average));\n\n    // average in parent coord\n    const rotMat3 = Util3d.getRotationMatrix(oldMesh);\n    const scaleVec3 = Vec3.ofBabylon(oldMesh.scaling);\n    const averageInParentCoord = rotMat3\n      .prodVec(Vec3.ofBabylon(average).mul(scaleVec3))\n      .toBabylon();\n\n    // update mesh\n    const newMesh = createExtrudedPolygonMesh(\n      scene,\n      newPoints,\n      item.height,\n      oldMesh.name\n    );\n\n    newMesh.parent = oldMesh.parent;\n    newMesh.rotationQuaternion = oldMesh.rotationQuaternion;\n    newMesh.position = averageInParentCoord.add(oldMesh.position);\n\n    newMesh.material = oldMesh.material;\n    newMesh.visibility = oldMesh.visibility;\n    newMesh.onClick = oldMesh.onClick;\n    newMesh.getMouseContextActions = oldMesh.getMouseContextActions;\n    newMesh.nodeItem = oldMesh.nodeItem;\n    newMesh.observers = oldMesh.observers;\n    if (!!oldMesh.graphVertex) {\n      newMesh.graphVertex = oldMesh.graphVertex;\n      newMesh.graphVertex.vertex.mesh = newMesh;\n    }\n\n    item.localPolygon = newPoints.map(x => Vec3.ofBabylon(x).toArray());\n    item.mesh = newMesh;\n    item.keyPoints = keyPointUpdateFunction(scene, mainView, oldMesh, item);\n    // update children\n    const childrenCopy = [...oldMesh._children];\n    childrenCopy\n      .filter(c => mainView.getNodeFromTree(c.name).isJust())\n      .forEach(c => {\n        c.parent = item.mesh;\n      });\n    oldMesh.dispose();\n    return newPoints;\n  }\n\n  static deleteKeyPointWithUndo(scene, keyPointMesh, mainView) {\n    const index = keyPointMesh.index;\n    const name = keyPointMesh.parent.name;\n    mainView.getNodeFromTree(name).forEach(({ item }) => {\n      const { mesh } = item;\n      const copyPosition = { ...mesh.position };\n      let newPoints = item.localPolygon.map(x => Vec3.of(x).toBabylon());\n      if (newPoints.length === 3) return;\n      mainView\n        .getUndoManager()\n        .doIt(\n          PolygonRegion.getUndoDeleteKeyPoint(\n            name,\n            index,\n            copyPosition,\n            newPoints,\n            scene,\n            item,\n            mainView\n          )\n        );\n    });\n  }\n\n  static getUndoDeleteKeyPoint(\n    name,\n    index,\n    copyPosition,\n    newPoints,\n    scene,\n    item,\n    mainView\n  ) {\n    return UndoManager.actionBuilder()\n      .doAction(() => {\n        const copyPoints = [...newPoints];\n        copyPoints.splice(index, 1);\n        PolygonRegion.createNewMeshFromOldUsingNewPoints(\n          copyPoints,\n          scene,\n          item,\n          mainView,\n          PolygonRegion.onAddNewPointKeyPointUpdate\n        );\n        mainView.updateNodeInServer(name);\n      })\n      .undoAction(({ is2UpdateInServer = true }) => {\n        const copyPoints = [...newPoints];\n        item.mesh.position = copyPosition;\n        PolygonRegion.createNewMeshFromOldUsingNewPoints(\n          copyPoints,\n          scene,\n          item,\n          mainView,\n          PolygonRegion.onAddNewPointKeyPointUpdate\n        );\n        if (is2UpdateInServer) mainView.updateNodeInServer(name);\n      })\n      .build();\n  }\n\n  static onAddNewPointKeyPointUpdate(scene, mainView, oldMesh, item) {\n    // used when new keypoint is added\n    return createPlaceHolderKeyPoints(\n      scene,\n      item.localPolygon.map(x => Vec3.of(x).toBabylon()),\n      item.mesh,\n      mainView\n    );\n  }\n\n  /**\n   *\n   * @param {*} scene\n   * @param {*} keyPointMesh\n   * @param {*} curveMesh\n   * @param {*} mainView\n   * @param {*} orientation: it belongs to the set {-1,1}, represents orientation\n   */\n  static addKeyPointInBetween = (\n    scene,\n    keyPointMesh,\n    mainView,\n    orientation\n  ) => {\n    const index = keyPointMesh.index;\n    const name = keyPointMesh.parent.name;\n    mainView.getNodeFromTree(name).forEach(({ item }) => {\n      const copyPosition = { ...item.mesh.position };\n      const points = item.localPolygon.map(x => Vec3.of(x).toBabylon());\n      mainView\n        .getUndoManager()\n        .doIt(\n          PolygonRegion.getUndoAddKeyPointInBetween(\n            name,\n            index,\n            orientation,\n            item,\n            points,\n            copyPosition,\n            scene,\n            mainView\n          )\n        );\n    });\n  };\n\n  static getUndoAddKeyPointInBetween(\n    name,\n    index,\n    orientation,\n    item,\n    points,\n    copyPosition,\n    scene,\n    mainView\n  ) {\n    return UndoManager.actionBuilder()\n      .doAction(() => {\n        const numberOfPoints = points.length;\n        const nextIndex = positiveMod(index + orientation, numberOfPoints);\n        let newPoints = [];\n        const specialIndex = index + Math.max(0, orientation);\n        for (let i = 0; i < specialIndex; i++) {\n          newPoints.push(points[i]);\n        }\n        newPoints.push(points[nextIndex].add(points[index]).scale(0.5));\n        for (let i = specialIndex; i < numberOfPoints; i++) {\n          newPoints.push(points[i]);\n        }\n        PolygonRegion.createNewMeshFromOldUsingNewPoints(\n          newPoints,\n          scene,\n          item,\n          mainView,\n          PolygonRegion.onAddNewPointKeyPointUpdate\n        );\n        mainView.updateNodeInServer(name);\n      })\n      .undoAction(({ is2UpdateInServer = true }) => {\n        const copyPoints = [...points];\n        item.mesh.position = copyPosition;\n        PolygonRegion.createNewMeshFromOldUsingNewPoints(\n          copyPoints,\n          scene,\n          item,\n          mainView,\n          PolygonRegion.onAddNewPointKeyPointUpdate\n        );\n        if (is2UpdateInServer) mainView.updateNodeInServer(name);\n      })\n      .build();\n  }\n}\n\n/**\n *\n * @param {*} polygon: boundary as babylonjs vec3\n */\nconst stitchingBoundaries = polygon => {\n  const n = polygon.length;\n  const orientation = Util3d.computeOrientation(polygon);\n  const ans = [];\n  for (let i = 0; i < n; i++) {\n    const modi = (i + 1) % n;\n    ans.push([i, n + modi, modi]);\n    ans.push([i, n + i, n + modi]);\n  }\n  return orientation > 0 ? ans : ans.map(reverseOrientation);\n};\n\nconst reverseOrientation = triangleIndex => {\n  const ans = [];\n  ans.push(triangleIndex[1]);\n  ans.push(triangleIndex[0]);\n  ans.push(triangleIndex[2]);\n  return ans;\n};\n\n/**\n *\n * @param {*} scene\n * @param {*} polygon array of babylon js vector3\n * @param {*} height\n * @param {*} name\n */\nconst createExtrudedPolygonMesh = (scene, polygon, height, name) => {\n  const h = new Vector3(0, 0, height);\n  const polygonRegionMesh = {\n    positions: [],\n    faces: []\n  };\n  polygonRegionMesh.positions = [...polygon];\n  for (let i = 0; i < polygon.length; i++) {\n    polygonRegionMesh.positions.push(polygon[i].add(h));\n  }\n  const n = polygon.length;\n  const lowerTriangulation = Util3d.triangulatePolygon(polygon);\n  const upperTriangulation = Util3d.triangulatePolygon(\n    polygonRegionMesh.positions.slice(n)\n  )\n    .map(x => x.map(z => z + n))\n    .map(reverseOrientation);\n  const stitchTriangulation = stitchingBoundaries(polygon);\n  polygonRegionMesh.faces = lowerTriangulation\n    .concat(upperTriangulation)\n    .concat(stitchTriangulation);\n  const mesh = Util3d.meshFromPositionAndFaces(\n    name,\n    scene,\n    polygonRegionMesh.positions,\n    polygonRegionMesh.faces\n  );\n  return mesh;\n};\n\nfunction defaultKeyPointUpdate(scene, mainView, oldMesh, item) {\n  // used when keypoint is updated or deleted\n  const childrenCopy = [...oldMesh._children];\n  childrenCopy.forEach(c => {\n    c.parent = item.mesh;\n    console.log(\"Moving parents of child\", c.name);\n  });\n\n  return item.keyPoints.map((k, i) => {\n    k.observers = new Observable();\n    k.observers.add(getKeyPointObserverFunction(scene, mainView));\n    k.index = i;\n    k.name = `${oldMesh.name}keyPoint${i}`;\n    k.position = Vec3.of(item.localPolygon[i]).toBabylon();\n    return k;\n  });\n}\n\nconst getKeyPointObserverFunction = (scene, mainView) => {\n  return ({ updatedPointMesh, is2updateServer }) => {\n    if (!updatedPointMesh.parent) return;\n    mainView\n      .getNodeFromTree(updatedPointMesh.parent.name)\n      .forEach(polygonTreeNode => {\n        const index = updatedPointMesh.index;\n        const item = polygonTreeNode.item;\n        const mesh = item.mesh;\n        const name = mesh.name;\n        let newPoints = item.localPolygon.map(x => Vec3.of(x).toBabylon());\n        newPoints[index] = updatedPointMesh.position;\n        PolygonRegion.createNewMeshFromOldUsingNewPoints(\n          newPoints,\n          scene,\n          item,\n          mainView\n        );\n        if (is2updateServer) {\n          mainView.updateNodeInServer(name);\n        }\n        // signal observers\n        Maybe.fromNull(item.mesh.observers).forEach(obs => {\n          //side effect update absolute position\n          item.mesh.getAbsolutePosition();\n          obs.notifyObservers({\n            updatedPointMesh: item.mesh,\n            is2updateServer: is2updateServer,\n            displacement: Vector3.Zero()\n          });\n        });\n        Maybe.fromNull(item.mesh.graphVertex).forEach(({ vertexObs }) => {\n          item.mesh.getAbsolutePosition();\n          vertexObs({\n            updatedPointMesh: item.mesh,\n            is2updateServer: is2updateServer,\n            displacement: Vector3.Zero()\n          });\n        });\n      });\n  };\n};\n\nconst getKeyPointActions = (scene, keyPointMesh, mainView) => {\n  const actions = [];\n  mainView.getNodeFromTree(keyPointMesh.parent.name).forEach(pathTreeNode => {\n    const item = pathTreeNode.item;\n    const polygon = item.localPolygon;\n    if (polygon.length > 3) {\n      actions.push({\n        icon: props => <i className=\"fas fa-trash\" {...props}></i>,\n        action: parentView => {\n          PolygonRegion.deleteKeyPointWithUndo(scene, keyPointMesh, parentView);\n          parentView.closeContextDial();\n        },\n        name: \"Delete node [DEL]\"\n      });\n    }\n    actions.push({\n      icon: props => <i className=\"fas fa-less-than\" {...props}></i>,\n      action: parentView => {\n        PolygonRegion.addKeyPointInBetween(scene, keyPointMesh, parentView, -1);\n        parentView.closeContextDial();\n      },\n      name: \"Add previous\"\n    });\n    actions.push({\n      icon: props => <i className=\"fas fa-greater-than\" {...props}></i>,\n      action: parentView => {\n        PolygonRegion.addKeyPointInBetween(scene, keyPointMesh, parentView, 1);\n        parentView.closeContextDial();\n      },\n      name: \"Add next\"\n    });\n  });\n\n  return actions;\n};\n\nconst createPlaceHolderKeyPoints = (scene, polygon, polygonMesh, mainView) => {\n  const keyPoints = [];\n  polygon.forEach((p, i) => {\n    const color = new Color3(0.25, 0.25, 0.25);\n    const keyPoint = Util3d.createSphere(\n      scene,\n      color,\n      RADIUS,\n      `${polygonMesh.name}keyPointPolygon${i}`,\n      true\n    );\n    keyPoint.parent = polygonMesh;\n    keyPoint.position = p;\n    keyPoint.index = i;\n    keyPoint.observers = new Observable();\n    keyPoints.push(keyPoint);\n    keyPoint.observers.add(getKeyPointObserverFunction(scene, mainView));\n  });\n\n  keyPoints.forEach(kp => {\n    kp.onClick = () => {\n      mainView.setContextActions(getKeyPointActions(scene, kp, mainView));\n    };\n    kp.onDel = () => PolygonRegion.deleteKeyPointWithUndo(scene, kp, mainView);\n  });\n\n  return keyPoints;\n};\n\nconst VISIBILITY = 0.5;\nexport default PolygonRegion;\n","import Vec3 from \"../Math/Vec3\";\nimport Util3d from \"../Util3d/Util3d\";\nimport AssetNodeItem from \"./AssetNodeItem\";\nimport errorIcon from \"../../../../resources/alert-error.png\";\nimport {\n  Axis,\n  Space,\n  Vector3,\n  Quaternion,\n  Color3,\n  MeshBuilder,\n  Mesh,\n  StandardMaterial,\n  Texture\n} from \"@babylonjs/core\";\nimport _get from \"lodash/get\";\nimport Statistics from \"../Utils/Statistics\";\n\nclass Robot extends AssetNodeItem {\n  static ROBOT_MESH_NAME = \"Tugbot.stl\";\n\n  constructor(meshTree, assetName, keyValueMap = {}, scene, parentView) {\n    super(meshTree.mesh, assetName, keyValueMap);\n    this.robot = parentView.getRobotManager().getRobot(meshTree.id);\n    this.scene = scene;\n    this.isOnline = true;\n    this.numberOfIte = 0;\n    this.is2UsePos = true;\n    this.meshTree = meshTree;\n    this.parentView = parentView;\n    this.timeSinceLastUpdate = 0;\n    this.isSubscribedToLogs = true;\n    this.speedStats = new Statistics();\n    this.alert = null;\n    this.loggerSubscription = null;\n    this.requestAnimationFrameId = null;\n    this.speed = Vector3.Zero();\n    this.qSpeed = Quaternion.Zero();\n    this.newPos = Vector3.Zero();\n    this.newOri = Quaternion.Identity();\n    // Build alert mesh\n    this.alertMesh = this.buildAlertMesh(meshTree, scene);\n    // Get robot ip to start logger\n    const robotIP = this.robot.getIP(this.onGetIP(this));\n    if (robotIP) this.startLogger();\n    // Add click action to alertMesh\n    Util3d.addClickActionToMesh(\n      this.alertMesh,\n      scene,\n      this.onMeshAlertClick(this)\n    );\n  }\n\n  buildAlertMesh(meshTree, scene) {\n    if (this.alertMesh) return this.alertMesh;\n    const alertMesh = MeshBuilder.CreateDisc(`AlertDisc${meshTree.name}`, {\n      radius: 0.2,\n      sideOrientation: Mesh.DOUBLESIDE\n    });\n    const material = new StandardMaterial(`AlertMat${meshTree.name}`, scene);\n    material.emissiveColor = new Color3.White();\n    material.ambientTexture = new Texture(errorIcon, scene);\n    material.freeze();\n    alertMesh.material = material;\n    alertMesh.isStatic = true;\n    alertMesh.position.y = -1.5;\n    alertMesh.parent = meshTree.mesh;\n    alertMesh.setEnabled(false);\n    alertMesh.billboardMode = Mesh.BILLBOARDMODE_ALL;\n    return alertMesh;\n  }\n\n  /**\n   * On alert mesh click handler\n   *\n   * @param {*} robot: Robot class instance (this)\n   * @returns {Function} Function to be triggered whenever there's a click on the alert mesh\n   */\n  onMeshAlertClick(robot) {\n    return () => {\n      robot.parentView.showRobotAlertModal(robot.alert);\n    };\n  }\n\n  toDict() {\n    let dict = super.toDict();\n    dict.isSubscribedToLogs = this.isSubscribedToLogs;\n    return dict;\n  }\n\n  toForm() {\n    const schema = super.toForm();\n    const props = { ...schema.jsonSchema.properties };\n    const newJsonSchema = {\n      type: \"object\",\n      properties: {\n        oldName: props.oldName,\n        name: props.name,\n        type: props.type,\n        // isSubscribedToLogs: {\n        //   type: \"boolean\",\n        //   title: \"Subscribe to alerts\"\n        // },\n        position: props.position,\n        rotation: props.rotation,\n        color: props.color,\n        annotations: props.annotations\n      }\n    };\n    schema.jsonSchema = newJsonSchema;\n    schema.data[\"isSubscribedToLogs\"] = this.isSubscribedToLogs;\n    return schema;\n  }\n\n  ofForm(form) {\n    super.ofForm(form);\n    this.isSubscribedToLogs = Boolean(form.isSubscribedToLogs);\n    // Start/Stop logger based on isSubscribedToLogs property\n    if (form.isSubscribedToLogs && this.robot.ip) this.startLogger();\n    else this.stopLogger(true);\n  }\n\n  dispose() {\n    super.dispose();\n    this.robot.unsubscribe({\n      property: \"Parameter\",\n      propValue: \"tf\"\n    });\n    window.cancelAnimationFrame(this.requestAnimationFrameId);\n  }\n\n  updateRobot = (robot, oldTimeInMillis, robotAnimator) => {\n    const time = new Date().getTime();\n    const dt = 1e-3 * (time - oldTimeInMillis);\n    robotAnimator(robot, dt);\n    this.requestAnimationFrameId = requestAnimationFrame(() =>\n      this.updateRobot(robot, time, robotAnimator)\n    );\n  };\n\n  animate = robotAnimator => {\n    this.requestAnimationFrameId = requestAnimationFrame(() =>\n      this.updateRobot(this, new Date().getTime(), robotAnimator)\n    );\n  };\n\n  getType = () => Robot.TYPE;\n\n  toOffline() {\n    if (this.mesh.isDisposed()) return;\n    this.mesh.visibility = 0.1;\n    this.speed = Vector3.Zero();\n    this.qSpeed = Quaternion.Zero();\n    this.isOnline = false;\n    this.numberOfIte = 0;\n    this.speedStats = new Statistics();\n    this.stopLogger();\n  }\n\n  toOnline() {\n    if (this.mesh.isDisposed()) return;\n    this.mesh.visibility = 1;\n    this.isOnline = true;\n    this.startLogger();\n  }\n\n  /**\n   * Start robot logger\n   */\n  startLogger() {\n    if (!this.loggerSubscription) {\n      this.loggerSubscription = this.robot.subscribeToLogs(\n        this.updateAlertState(this)\n      );\n    }\n  }\n\n  /**\n   * Stop robot logger\n   *\n   * @param {Boolean} is2RemoveAlertMesh: If true: remove alert mesh\n   */\n  stopLogger(is2RemoveAlertMesh) {\n    if (this.loggerSubscription) {\n      this.robot.unsubscribeToLogs(this.loggerSubscription);\n      this.loggerSubscription = null;\n    }\n    // Remove robot alert mesh\n    if (is2RemoveAlertMesh) this.alertMesh.setEnabled(false);\n  }\n\n  /**\n   * Update robot alert state\n   *\n   * @param {*} robot: Robot class instance (this)\n   * @returns {Function} Function to be triggered whenever there's a new log for this robot\n   */\n  updateAlertState(robot) {\n    return logs => {\n      robot.timeSinceLastUpdate = 0;\n      if (\n        logs.length > 0 &&\n        (logs[0].level === \"ERROR\" || logs[0].level === \"CRITICAL\")\n      ) {\n        robot.alert = logs[0];\n        robot.alertMesh.setEnabled(true);\n      }\n      // If last log is not error/critical then clean alert (set it to null)\n      else {\n        robot.alertMesh.setEnabled(false);\n      }\n    };\n  }\n\n  /**\n   * Start logger after receiving robot IP\n   *\n   * @param {*} robot: Robot class instance (this)\n   * @returns {Function} Function to be triggered when receive robot ip\n   */\n  onGetIP(robot) {\n    return ip => {\n      // If robot IP were not found doesn't start logger\n      if (!ip) return;\n      robot.startLogger();\n    };\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                   Static Functions                                   *\n   *                                                                                      */\n  //========================================================================================\n\n  static TYPE = \"Robot\";\n\n  static TIME_2_BE_OFFLINE_IN_SEC = 10;\n\n  static createBaseObject = ({\n    robotName,\n    robotMeshName = Robot.ROBOT_MESH_NAME,\n    id = Robot.randomId(),\n    nodeDict = {\n      position: [0, 0, 0],\n      quaternion: [1, 0, 0, 0]\n    }\n  }) => {\n    return {\n      id: id,\n      name: robotName,\n      type: Robot.TYPE,\n      meshName: robotMeshName,\n      robotTree: {\n        name: robotName,\n        child: [],\n        position: {\n          x: nodeDict.position[0],\n          y: nodeDict.position[1],\n          z: nodeDict.position[2]\n        },\n        orientation: {\n          w: nodeDict.quaternion[0],\n          x: nodeDict.quaternion[1],\n          y: nodeDict.quaternion[2],\n          z: nodeDict.quaternion[3]\n        }\n      }\n    };\n  };\n\n  static getDefaultAnimator = parentView => (robot, dt) => {\n    const mesh = robot.mesh;\n    const speed = 3;\n    const vel = Util3d.getRotationMatrix(mesh)\n      .prodVec(new Vec3([speed, 0, 0]))\n      .toBabylon();\n    mesh.position = mesh.position.add(vel.scale(dt));\n    mesh.rotate(Axis.Z, (-Math.PI / 2) * dt, Space.LOCAL);\n  };\n\n  static updateRobotMeshTree(newRobotTf, robot) {\n    const lastPosition = robot.mesh.position;\n    const lastOrientation = robot.mesh.rotationQuaternion;\n    const newPosition = new Vector3(\n      newRobotTf.position.x,\n      newRobotTf.position.y,\n      newRobotTf.position.z\n    );\n    const newOrientation = new Quaternion(\n      newRobotTf.orientation.x,\n      newRobotTf.orientation.y,\n      newRobotTf.orientation.z,\n      newRobotTf.orientation.w\n    ).normalize();\n\n    robot.numberOfIte++;\n    const isZero = robot.timeSinceLastUpdate === 0;\n    const dtInv = isZero ? 1.0 : Math.min(1.0 / robot.timeSinceLastUpdate, 1.0);\n\n    const speed = newPosition.subtract(lastPosition).scale(dtInv);\n    const qSpeed = newOrientation.subtract(lastOrientation).scale(dtInv);\n    const vel = speed.length();\n\n    if (robot.numberOfIte < SAMPLES) {\n      robot.speedStats.update(vel);\n    }\n    if (robot.speedStats.isOutlier(vel)) {\n      robot.is2UsePos = true;\n    } else {\n      robot.speedStats.update(vel);\n      robot.speed = speed;\n      robot.qSpeed = qSpeed;\n      robot.is2UsePos = false;\n    }\n    robot.newPos = newPosition;\n    robot.newOri = newOrientation;\n    robot.timeSinceLastUpdate = 0;\n  }\n\n  static getSocketAnimator = (robot, parentView) => {\n    const updateTF = data => {\n      const tf = _get(\n        data,\n        `Robot.${robot.meshTree.id}.Parameter.tf.Value`,\n        undefined\n      );\n      if (tf) Robot.updateRobotMeshTree(tf, robot);\n    };\n    // Subscribe to tf parameter\n    robot.robot.subscribe({\n      property: \"Parameter\",\n      propValue: \"tf\",\n      onLoad: data => updateTF(data?.value),\n      onUpdate: data => updateTF(data?.key)\n    });\n\n    // Animate\n    return (robot2Animate, dt) => {\n      robot2Animate.timeSinceLastUpdate += dt;\n      dt = Math.min(dt, 1);\n      if (Vec3.ofBabylon(robot2Animate.speed).someNaNOrInfinite()) return;\n      if (Vec3.ofBabylon(robot2Animate.qSpeed).someNaNOrInfinite()) return;\n      if (robot2Animate.is2UsePos) {\n        robot2Animate.mesh.position = robot2Animate.newPos;\n        robot2Animate.mesh.rotationQuaternion = robot2Animate.newOri;\n      } else {\n        robot2Animate.mesh.position = robot2Animate.mesh.position.add(\n          robot2Animate.speed.scale(dt)\n        );\n        robot2Animate.mesh.rotationQuaternion = robot2Animate.mesh.rotationQuaternion\n          .add(robot.qSpeed.scale(dt))\n          .normalize();\n      }\n      Robot.setOnOffLine(robot2Animate);\n    };\n  };\n\n  static setOnOffLine(robot) {\n    if (robot.timeSinceLastUpdate > Robot.TIME_2_BE_OFFLINE_IN_SEC) {\n      if (robot.isOnline) robot.toOffline();\n    } else {\n      if (robot.timeSinceLastUpdate > Robot.TIME_2_BE_OFFLINE_IN_SEC / 4) {\n        robot.is2UsePos = true;\n      }\n      if (!robot.isOnline) robot.toOnline();\n    }\n  }\n\n  static createRobotMeshTreeRecursive(node, mesh, parent, scene) {\n    if (!mesh) {\n      mesh = Util3d.createSphere(\n        scene,\n        new Color3(0.0, 0.0, 0.0),\n        0.5,\n        node.name,\n        false\n      );\n    }\n    const meshTree = {\n      mesh: mesh,\n      children: []\n    };\n    const position = new Vector3(\n      node.position.x,\n      node.position.y,\n      node.position.z\n    );\n    const quaternion = new Quaternion(\n      node.orientation.x,\n      node.orientation.y,\n      node.orientation.z,\n      node.orientation.w\n    );\n    mesh.position = position;\n    mesh.rotationQuaternion = quaternion;\n    if (parent) {\n      mesh.parent = parent;\n    }\n    meshTree[\"children\"] = node.child.map(child => {\n      return this.createRobotMeshTreeRecursive(\n        child,\n        Util3d.referentialBuilder(scene)\n          .boxParams({ isVisible: false, size: 0.1 })\n          .build(),\n        mesh,\n        scene\n      );\n    });\n    return meshTree;\n  }\n\n  static createRobotMeshTree(robotTree, robotMesh, scene) {\n    return Robot.createRobotMeshTreeRecursive(\n      robotTree,\n      robotMesh,\n      null,\n      scene\n    );\n  }\n\n  static builder() {\n    return new RobotBuilder();\n  }\n}\n\nclass RobotBuilder {\n  constructor() {\n    this._name = null;\n    this._meshTree = null;\n    this._parentMesh = null;\n    this._parentView = null;\n    this._scene = null;\n    this._isPickable = true;\n    this._id = null;\n    this._keyValueMap = {};\n    this._assetName = null;\n  }\n\n  name(name) {\n    this._name = name;\n    return this;\n  }\n\n  meshTree(meshTree) {\n    this._meshTree = meshTree;\n    return this;\n  }\n\n  parentMesh(parentMesh) {\n    this._parentMesh = parentMesh;\n    return this;\n  }\n\n  parentView(parentView) {\n    this._parentView = parentView;\n    return this;\n  }\n\n  scene(scene) {\n    this._scene = scene;\n    return this;\n  }\n\n  isPickable(isPickable) {\n    this._isPickable = isPickable;\n    return this;\n  }\n\n  id(id) {\n    this._id = id;\n    return this;\n  }\n\n  keyValueMap(keyValueMap) {\n    this._keyValueMap = keyValueMap;\n    return this;\n  }\n\n  assetName(assetName) {\n    this._assetName = assetName;\n    return this;\n  }\n\n  build() {\n    const variables = Object.keys(this)\n      .filter(x => x !== \"_parentMesh\")\n      .map(x => this[x]);\n\n    variables.forEach(x => {\n      if (x === null)\n        throw new Error(\n          `There are missing variables to build a robot, e.g ${x}`\n        );\n    });\n\n    this._meshTree.id = this._id;\n    this._meshTree.name = this._name;\n    this._meshTree.mesh.name = this._name;\n    this._meshTree.mesh.isPickable = this._isPickable;\n    this._meshTree.mesh.parent = this._parentMesh;\n\n    const baseAxis = Util3d.referentialBuilder(this._scene)\n      .isPickable(false)\n      .boxParams({ isVisible: false, size: 0.1 })\n      .name(`${this._name}Axis`)\n      .build();\n    baseAxis.parent = this._meshTree.mesh;\n\n    return new Robot(\n      this._meshTree,\n      this._assetName,\n      this._keyValueMap,\n      this._scene,\n      this._parentView\n    );\n  }\n}\n//========================================================================================\n/*                                                                                      *\n *                                       CONSTANTS                                      *\n *                                                                                      */\n//========================================================================================\n\nconst SAMPLES = 30;\n\n//========================================================================================\n/*                                                                                      *\n *                                        EXPORT                                        *\n *                                                                                      */\n//========================================================================================\n\nexport default Robot;\n","import NodeItem from \"./NodeItem\";\nimport Vec3 from \"../Math/Vec3\";\nimport { Maybe } from \"monet\";\nimport Util3d from \"../Util3d/Util3d\";\nimport Constants from \"../Utils/Constants\";\nimport { Vector3, Color3, Observable, StandardMaterial } from \"@babylonjs/core\";\n/**\n * Will be deprecated\n */\nclass Wall extends NodeItem {\n  constructor(mesh, localWall, size, keyPoints = {}, keyValueMap = {}) {\n    super(mesh, keyValueMap);\n    this.localWall = localWall;\n    this.size = size;\n    this.keyPoints = keyPoints;\n  }\n\n  toDict() {\n    const dict = super.toDict();\n    dict.localWall = this.localWall;\n    dict.size = this.size;\n    return dict;\n  }\n\n  ofDict(scene, dict = null, mainView = null) {\n    return Wall.ofDict(scene, dict, mainView);\n  }\n\n  getType = () => Wall.TYPE;\n\n  static TYPE = \"Wall\";\n\n  static ofDict(scene, dict = null, mainView = null) {\n    if (!dict) throw new Error(\"null dictionary describing wall\");\n    const name = Maybe.fromNull(dict.name).orSome(\n      `Wall${Math.floor(Math.random() * 1e3)}`\n    );\n    const mesh = createWallMesh(dict, name, scene);\n\n    const material = new StandardMaterial(`WallMaterial${name}`, scene);\n    const color = new Color3(dict.color[0], dict.color[1], dict.color[2]);\n    material.diffuseColor = color;\n    material.emissiveColor = color;\n    mesh.material = material;\n    // babylonjs highlight shader flickers when floor intersect\n    mesh.position.z += 1e-3;\n\n    const keypoints = createPlaceHolderKeyPoints(\n      scene,\n      dict.localWall.map(x => Vec3.of(x).toBabylon()),\n      mesh,\n      mainView\n    );\n    return new Wall(\n      mesh,\n      dict.localWall,\n      dict.size,\n      keypoints,\n      dict.keyValueMap\n    );\n  }\n}\n\nconst RADIUS = Constants.RADIUS;\nconst FACES = [\n  [0, 1, 2],\n  [2, 3, 0],\n  [4, 6, 5],\n  [6, 4, 7],\n  [0, 5, 1],\n  [5, 0, 4],\n  [3, 2, 6],\n  [6, 7, 3],\n  [1, 6, 2],\n  [6, 1, 5],\n  [0, 3, 7],\n  [7, 4, 0]\n];\n\nfunction createWallMesh(dict, name, scene) {\n  const centeredWall = dict.localWall.map(x => Vec3.of(x).toBabylon());\n  const middlePoint = Vec3.of(dict.position).toBabylon();\n  const tangent = centeredWall[1].subtract(centeredWall[0]).normalize();\n  const normal = new Vector3(-tangent.y, tangent.x, 0);\n  const shape = [\n    centeredWall[0].add(normal.scale(dict.size.width)),\n    centeredWall[0].subtract(normal.scale(dict.size.width)),\n    centeredWall[1].subtract(normal.scale(dict.size.width)),\n    centeredWall[1].add(normal.scale(dict.size.width))\n  ];\n  const h = new Vector3(0, 0, dict.size.height);\n  const wallMesh = {\n    positions: [\n      shape[0],\n      shape[1],\n      shape[2],\n      shape[3],\n      shape[0].add(h),\n      shape[1].add(h),\n      shape[2].add(h),\n      shape[3].add(h)\n    ],\n    faces: FACES\n  };\n  const mesh = Util3d.meshFromPositionAndFaces(\n    name,\n    scene,\n    wallMesh.positions,\n    wallMesh.faces\n  );\n  mesh.position = middlePoint;\n  return mesh;\n}\n\nfunction createNewMeshFromOldUsingNewPoints(newWall, scene, mesh, item) {\n  const average = Util3d.pointAverageVec3(\n    newWall.localWall.map(x => Vec3.of(x))\n  );\n  newWall.position = average.toArray();\n  newWall.localWall = newWall.localWall.map(x =>\n    Vec3.of(x).sub(average).toArray()\n  );\n\n  const newMesh = createWallMesh(newWall, mesh.name, scene);\n  newMesh.position = mesh.position;\n  newMesh.rotationQuaternion = mesh.rotationQuaternion;\n  newMesh.locallyTranslate(average.toBabylon());\n  newMesh.material = mesh.material;\n  newMesh.visibility = mesh.visibility;\n  newMesh.parent = mesh.parent;\n  newMesh.getMouseContextActions = mesh.getMouseContextActions;\n  newMesh.nodeItem = mesh.nodeItem;\n\n  item.mesh = newMesh;\n  item.localWall = newWall.localWall;\n\n  const childrenCopy = [...mesh._children];\n  childrenCopy.forEach(c => {\n    mesh.removeChild(c);\n    c.parent = newMesh;\n  });\n  item.keyPoints.forEach((k, j) => {\n    k.position = Vec3.of(newWall.localWall[j]).toBabylon();\n  });\n  // dispose old mesh\n  mesh.dispose();\n}\n\nconst getKeyPointObserverFunction = (mainView, scene) => {\n  return ({ updatedPointMesh, is2updateServer }) => {\n    mainView.getNodeFromTree(updatedPointMesh.parent.name).forEach(wallNode => {\n      const index = updatedPointMesh.index;\n      const item = wallNode.item;\n      const mesh = item.mesh;\n      let newWall = {\n        position: Vec3.ofBabylon(mesh.position).toArray(),\n        localWall: item.localWall,\n        size: item.size\n      };\n      newWall.localWall[index] = Vec3.ofBabylon(\n        updatedPointMesh.position\n      ).toArray();\n\n      createNewMeshFromOldUsingNewPoints(newWall, scene, mesh, item);\n\n      if (is2updateServer) {\n        mainView.updateNodeInServer(mesh.name);\n      }\n    });\n  };\n};\n\nconst createPlaceHolderKeyPoints = (scene, wall, wallMesh, mainView) => {\n  const keyPoints = [];\n  wall.forEach((p, i) => {\n    const keyPoint = Util3d.createSphere(\n      scene,\n      new Color3(0.25, 0.25, 0.25),\n      RADIUS,\n      `${wallMesh.name}keyPointWall${i}`,\n      true\n    );\n    keyPoint.parent = wallMesh;\n    keyPoint.position = p;\n    keyPoint.index = i;\n    keyPoint.observers = new Observable();\n    keyPoint.observers.add(getKeyPointObserverFunction(mainView, scene));\n    keyPoints.push(keyPoint);\n  });\n  return keyPoints;\n};\n\nexport default Wall;\n","import React, { Component } from \"react\";\nimport BaseViewer from \"./BaseViewer/BaseViewer\";\nimport PropTypes from \"prop-types\";\nimport { HighlightLayer, Vector3 } from \"@babylonjs/core\";\nimport { Maybe } from \"monet\";\nimport MainViewRetriever from \"./MainView/MainViewRetriever\";\nimport DefaultScene from \"./Utils/DefaultScene\";\nimport GlobalRef from \"./NodeItem/GlobalRef\";\nimport SceneServerUtils from \"./Utils/SceneServerUtils\";\nimport TreeServerUtils from \"./Utils/TreeServerUtils\";\nimport AssetsManager from \"./AssetsManager/AssetsManager\";\nimport TreeObject from \"./TreeObject/TreeObject\";\nimport GraphItem from \"./NodeItem/GraphItem\";\nimport DefaultMouseEvents from \"./Utils/DefaultMouseEvents\";\nimport Util3d from \"./Util3d/Util3d\";\nimport Vec3 from \"./Math/Vec3\";\nimport ReactResizeDetector from \"react-resize-detector\";\nimport { UndoManager, RobotManager } from \"mov-fe-lib-core\";\nimport ConfirmAlertModal from \"../Modal/ConfirmAlertModal\";\nimport RobotLogModal from \"../Modal/RobotLogModal\";\nimport MeshCache from \"./Utils/MeshCache\";\nimport Robot from \"./NodeItem/Robot\";\n\n//========================================================================================\n/*                                                                                      *\n *                                      SceneViewer                                     *\n *                                                                                      */\n//========================================================================================\n\nclass SceneViewer extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { errorList: [] };\n    this.sceneName = props.sceneName.Value;\n    this.sceneMemory = Maybe.none();\n    this.objectTree = [];\n    this.undoManager = new UndoManager();\n    // camera properties\n    this.isPanned = false;\n    this.isRotated = false;\n    this.targetPos = undefined;\n    this.cameraSpeed = Vector3.Zero();\n    this.time = new Date().getTime() * 1e-3;\n    this.robotManager = new RobotManager();\n    this.robotAlertModal = React.createRef();\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                   Getters & Setters                                  *\n   *                                                                                      */\n  //========================================================================================\n\n  getRobotManager = () => this.robotManager;\n\n  getSceneMemory = () => this.sceneMemory;\n\n  getAssetsActionMap = () => AssetsManager.getInstance().getAssetsActionMap();\n\n  getRootNode = (tree = [...this.objectTree]) => {\n    return tree.filter(x => x.title === GlobalRef.NAME)[0];\n  };\n\n  getObjectTree = () => this.objectTree;\n\n  setSelectedAction = () => {\n    /* empty */\n  };\n\n  getGraph() {\n    return new TreeObject(this.objectTree).getNode(\n      x => GraphItem.TYPE === x.item.getType()\n    );\n  }\n\n  getRobots() {\n    return this.getRootNode()\n      .children.filter(x => x.item.getType() === Robot.TYPE)\n      .map(el => el.item);\n  }\n\n  getUndoManager = () => this.undoManager;\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                    Utils functions                                   *\n   *                                                                                      */\n  //========================================================================================\n\n  getNodeFromTree = (name, objectTree = [...this.objectTree]) => {\n    return TreeServerUtils.ofScene(\n      this.sceneName,\n      this.undoManager\n    ).getNodeFromTree(name, objectTree);\n  };\n\n  deleteNodeFromTreeUsingName = () => {\n    throw new Error(\"Delete Node in viewer Exception\");\n  };\n\n  updateNodeInServer = (name, oldName = null) => {\n    TreeServerUtils.ofScene(\n      this.sceneName,\n      this.undoManager\n    ).updateNodeInServer(name, [...this.objectTree], oldName);\n  };\n\n  addNodeItem2Tree = (\n    nodeItem,\n    parentName = GlobalRef.NAME,\n    is2addInServer = true,\n    isVisible = true\n  ) => {\n    const newObjectTree = TreeServerUtils.ofScene(\n      this.sceneName,\n      this.undoManager\n    ).addNodeItem2Tree(\n      [...this.objectTree],\n      nodeItem,\n      parentName,\n      is2addInServer,\n      isVisible\n    );\n    this.objectTree = newObjectTree;\n  };\n\n  setCameraToTarget = () => {\n    this.sceneMemory.forEach(({ camera }) => {\n      const focusObject = this.isPanned ? \"\" : this.props.focusObject.Value;\n      this.getNodeFromTree(focusObject).forEach(x => {\n        console.log(\"Set Camera, Found Object\", x.item.mesh);\n        const dt = new Date().getTime() * 1e-3 - this.time;\n        this.time = new Date().getTime() * 1e-3;\n        const pos = x.item.mesh._absolutePosition.clone();\n        this.cameraSpeed = !this.targetPos\n          ? Vector3.Zero()\n          : pos.subtract(this.targetPos);\n        this.targetPos = pos;\n        camera.setTarget(pos);\n        camera.position = camera.position.add(this.cameraSpeed.scale(dt));\n        camera.beta = this.isRotated ? camera.beta : 0;\n        // move target object for debug\n        // const p = x.item.mesh.position;\n        // x.item.mesh.position = p.add(new Vector3(p.x, p.y, 0).scale(1e-2));\n      });\n    });\n  };\n\n  addCanvasEventListeners(canvas) {\n    const events = [\n      {\n        name: \"pointerdown\",\n        function: evt => this.onPointerDown(evt)\n      },\n      { name: \"pointerup\", function: evt => this.onPointerUp(evt) },\n      {\n        name: \"pointermove\",\n        function: evt => this.onPointerMove(evt)\n      }\n    ];\n    events.forEach(event =>\n      canvas.addEventListener(event.name, event.function, false)\n    );\n  }\n\n  onPointerDown = evt => {\n    this.isRotated = true;\n    DefaultMouseEvents.onPointerDown(this)(evt);\n  };\n\n  onPointerUp = evt => {\n    DefaultMouseEvents.onPointerUp(this)(evt);\n  };\n\n  onPointerMove = evt => {\n    if (evt.buttons === 4) this.isPanned = true;\n    DefaultMouseEvents.onPointerMove(this)(evt);\n  };\n\n  getMouseCoordsFromRoot() {\n    // TODO: code repetition in mainView\n    return this.sceneMemory.flatMap(({ scene, ground }) => {\n      const maybeCurrent = Util3d.getGroundPosition(scene, ground);\n      return maybeCurrent.flatMap(current =>\n        Maybe.fromNull(this.getRootNode()).map(rootNode =>\n          Util3d.getLocalCoordFromWorld(\n            rootNode.item.mesh,\n            Vec3.ofBabylon(current)\n          ).toBabylon()\n        )\n      );\n    });\n  }\n\n  onResize = (w, h) => {\n    if (w === 0 && h === 0) return;\n    this.getSceneMemory().forEach(({ mouseLocationText }) => {\n      mouseLocationText.left = -w / 2 + w / 17;\n      mouseLocationText.top = -h / 2 + h / 30;\n    });\n  };\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                    Scene functions                                   *\n   *                                                                                      */\n  //========================================================================================\n\n  retrieveSceneFromServer = (afterLoading = () => {}) => {\n    SceneServerUtils.retrieveScene(this.sceneName, data => {\n      const errorList = MainViewRetriever.importScene(this, data.result);\n      this.resizeGround();\n      this.setState({ errorList });\n      afterLoading();\n    });\n  };\n\n  loadAssets = async () => {\n    const assetManager = AssetsManager.getInstance();\n    if (Object.values(assetManager.getAssets()).length === 0) {\n      await assetManager.load();\n    }\n  };\n\n  loadScene = async () => {\n    await this.loadAssets();\n    this.retrieveSceneFromServer(this.renderScene);\n  };\n\n  renderScene = () => {\n    this.getSceneMemory().forEach(({ engine, scene }) =>\n      engine.runRenderLoop(() => {\n        this.time = new Date().getTime() * 1e-3;\n        scene.render();\n        this.setCameraToTarget();\n      })\n    );\n  };\n\n  onSceneReady = scene => {\n    const engine = scene.getEngine();\n    const canvas = engine.getRenderingCanvas();\n    this.addCanvasEventListeners(canvas);\n    const mouseLocationText = DefaultScene.createMouseLocationText(scene);\n    this.sceneMemory = Maybe.some({\n      engine: engine,\n      canvas: canvas,\n      scene: scene,\n      camera: DefaultScene.createCamera(scene, canvas),\n      light: DefaultScene.createLight(scene),\n      ground: DefaultScene.createMeshGround(scene),\n      gizmoManager: DefaultScene.createGizmo(scene),\n      highlightLayer: {\n        layer: new HighlightLayer(\"hl1\", scene),\n        lastHlMeshes: []\n      },\n      mouseLocationText: mouseLocationText\n    });\n    return scene;\n  };\n\n  resizeGround(defaultSize = 30) {\n    this.getSceneMemory().forEach(memory => {\n      memory.ground.dispose();\n      const scene = memory.scene;\n      const { max, min } = scene.getWorldExtends();\n      let diff = max.subtract(min);\n      let is2Small = false;\n      if (diff.length() < defaultSize) {\n        diff = new Vector3(defaultSize, 0, defaultSize);\n        is2Small = true;\n      }\n      memory.ground = DefaultScene.createMeshGround(scene, diff.x, diff.z);\n      memory.ground.position = new Vector3(\n        min.x + (is2Small ? 0 : diff.x / 2),\n        memory.ground.position.y,\n        min.z + (is2Small ? 0 : diff.z / 2)\n      );\n    });\n  }\n\n  showRobotAlertModal = alert => {\n    this.robotAlertModal.current.open(alert);\n  };\n\n  showAlert = (message, type) => {\n    alert(`type:${type} ` + message);\n  };\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                   Render functions                                   *\n   *                                                                                      */\n  //========================================================================================\n\n  renderMenus = () => {\n    // to implement interface of MainView\n  };\n\n  componentDidUpdate = prevProps => {\n    const predicateAction = [\n      {\n        propVar: x => x.sceneName.Value,\n        action: () => (this.sceneName = this.props.sceneName.Value)\n      },\n      {\n        propVar: x => x.focusObject.Value,\n        action: () => {\n          this.isPanned = false;\n          this.isRotated = false;\n          this.setCameraToTarget();\n        }\n      }\n    ];\n    predicateAction.forEach(({ propVar, action }) => {\n      if (propVar(this.props) !== propVar(prevProps)) {\n        action();\n      }\n    });\n  };\n\n  componentDidMount = () => {\n    console.log(\"SceneViewer Did Mount!! \");\n    this.loadScene();\n  };\n\n  componentWillUnmount() {\n    this.sceneMemory.forEach(({ scene }) => {\n      // Unsubscribe robots from robot logger\n      this.getRobots().forEach(nodeItem => {\n        nodeItem.dispose();\n        if (nodeItem.loggerSubscription)\n          nodeItem.robot.unsubscribeToLogs(nodeItem.loggerSubscription);\n      });\n      // Clear observers and clean scene objects\n      AssetsManager.getInstance().clearObserver(scene);\n      MeshCache.getInstance().del(scene);\n      delete this.objectTree;\n      delete this.sceneMemory;\n      delete this.undoManager;\n    });\n  }\n\n  render() {\n    const { errorList } = this.state;\n    const resetErrorList = () => this.setState({ errorList: [] });\n    return (\n      <div style={{ display: \"flex\", flexGrow: 1, maxHeight: \"100%\" }}>\n        <BaseViewer\n          onSceneReady={this.onSceneReady}\n          is2render={false}\n          sceneFactory={DefaultScene.createScene}\n        />\n        <ConfirmAlertModal\n          onSubmit={resetErrorList}\n          onCancel={resetErrorList}\n          open={errorList?.length > 0}\n          title={\"Scene Viewer\"}\n          message={\"An error occurred while loading the scene\"}\n          submitText={\"OK\"}\n          submitColor={\"primary\"}\n          cancelText={\"Cancel\"}\n          cancelColor={\"secondary\"}\n        >\n          {getErrorSolutionList(errorList)}\n        </ConfirmAlertModal>\n        <RobotLogModal ref={this.robotAlertModal} title=\"Alert\" />\n        <ReactResizeDetector\n          handleWidth\n          handleHeight\n          onResize={this.onResize}\n        />\n      </div>\n    );\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                   Static functions                                   *\n   *                                                                                      */\n  //========================================================================================\n\n  static getComponentFactory(sceneName) {\n    return masterProps => {\n      const augmentProps = {\n        sceneName,\n        ...masterProps\n      };\n      return <SceneViewer {...augmentProps} />;\n    };\n  }\n\n  static EXTENSION = \".3d\";\n}\n\nSceneViewer.propTypes = {\n  sceneName: PropTypes.shape({ Value: PropTypes.string }),\n  focusObject: PropTypes.shape({ Value: PropTypes.string })\n};\n\nSceneViewer.defaultProps = {\n  sceneName: { Value: \"Pedro\" },\n  focusObject: { Value: \"\" }\n};\n\nfunction getErrorSolutionList(errorList) {\n  return !errorList ? (\n    []\n  ) : (\n    <ul>\n      {errorList.map(({ cause, solution }, i) => {\n        return <li key={\"error\" + i}>{`${cause}, ${solution}`}</li>;\n      })}\n    </ul>\n  );\n}\n\nexport default SceneViewer;\n","class TreeNode {\n  constructor(title, item, children, expanded, isVisible, isStatic = false) {\n    this.title = title;\n    this.item = item;\n    this.children = children;\n    this.expanded = expanded;\n    this.isVisible = isVisible;\n    this.isStatic = isStatic;\n  }\n\n  static dispose(node) {\n    /*\n     * function must be defined here, otherwise it wouldn't work on the UI Tree change method\n     */\n    node.item.dispose();\n    node.children.forEach(child => {\n      TreeNode.dispose(child);\n    });\n  }\n\n  /**\n   *\n   * @param {*} node\n   */\n  static toDict(node) {\n    /*\n     * function must be defined here, otherwise it wouldn't work on the UI Tree change method\n     */\n    return {\n      name: node.title,\n      item: node.item.toDict(),\n      children: node.children.map(child => TreeNode.toDict(child))\n    };\n  }\n\n  static builder() {\n    return new TreeNodeBuilder();\n  }\n}\n\nclass TreeNodeBuilder {\n  constructor() {\n    this._title = null;\n    this._item = {};\n    this._children = [];\n    this._expanded = false;\n    this._isVisible = true;\n    this._isStatic = false;\n  }\n\n  /**\n   * Node title shown on the tree\n   * @param {*} title : Node name displayed on the tree\n  */\n  title(title) {\n    this._title = title;\n    return this;\n  }\n\n  /**\n   * Represents the node item - an instance of the NodeItem class\n   * @param {*} item : Node item\n  */\n  item(item) {\n    this._item = item;\n    return this;\n  }\n\n  /**\n   * List of nodes children under the object\n   * @param {*} children : Children list\n  */\n  children(children) {\n    this._children = children;\n    return this;\n  }\n\n  /**\n   * Indicate the node expansion state, if true means the node is expanded in the scene\n   * @param {*} expanded : expansion state\n  */\n  expanded(expanded) {\n    this._expanded = expanded;\n    return this;\n  }\n\n  /**\n   * Indicate the node visibility state, if true means the node is visible in the scene\n   * @param {*} isVisible : visibility state\n  */\n  isVisible(isVisible) {\n    this._isVisible = isVisible;\n    return this;\n  }\n\n  /**\n   * A static node can't have any children in the object tree and its parent must be of type GlobalRef\n   * @param {*} isStatic : static state\n  */\n  isStatic(isStatic) {\n    this._isStatic = isStatic;\n    return this;\n  }\n\n  /**\n   * Build the TreeNode object\n  */\n  build() {\n    Object.values(this).forEach(value => {\n      if (value === null)\n        throw new Error(\n          `There are missing variables to build a TreeNode, e.g ${value}`\n        );\n    });\n    return new TreeNode(\n      this._title,\n      this._item,\n      this._children,\n      this._expanded,\n      this._isVisible,\n      this._isStatic,\n    );\n  }\n}\n\nexport default TreeNode;\n","import { Maybe } from \"monet\";\n\nfunction getNodeRecursive(tree, predicate) {\n  for (let i = 0; i < tree.length; i++) {\n    const node = tree[i];\n    if (predicate(node)) return Maybe.some(node);\n    const answer = getNodeRecursive(node.children, predicate);\n    if (answer.isSome()) return answer;\n  }\n  return Maybe.none();\n}\n\nfunction getParentNodeRecursive(tree, predicate, parent) {\n  const foundChild = tree\n    .map(x => predicate(x))\n    .reduce((e, x) => e || x, false);\n  if (foundChild) return Maybe.fromNull(parent);\n  for (let i = 0; i < tree.length; i++) {\n    const node = tree[i];\n    const answer = getParentNodeRecursive(node.children, predicate, node);\n    if (answer.isSome()) return answer;\n  }\n  return Maybe.none();\n}\n\nfunction compareTreesRecursive(treeA, treeB, nodeEquality) {\n  if (treeA.length === treeB.length) {\n    let ans = true;\n    for (let i = 0; i < treeA.length; i++) {\n      const nodeA = treeA[i];\n      const nodeB = treeB[i];\n      if (nodeEquality(nodeA, nodeB)) {\n        ans =\n          ans &&\n          compareTreesRecursive(nodeA.children, nodeB.children, nodeEquality);\n      } else {\n        return false;\n      }\n    }\n    return ans;\n  }\n  return false;\n}\n\nfunction mapRecursive(tree, newTree, map) {\n  tree.forEach(nod => {\n    const node = { ...nod };\n    const mappedNode = map(node);\n    mappedNode.children = mapRecursive(node.children, [], map);\n    newTree.push(mappedNode);\n  });\n  return newTree;\n}\n\nfunction forEachRecursive(tree = [], forEach = () => {}) {\n  tree.forEach(node => {\n    forEach(node);\n    forEachRecursive(node.children, forEach);\n  });\n}\n\nfunction expand(node) {\n  node.expanded = true;\n  return node;\n}\n\nfunction filterTree(tree = [], predicate = node => true) {\n  if (!tree || tree.length === 0) return [];\n  let result = [];\n  tree.forEach(nod => {\n    const node = { ...nod };\n    if (predicate(node)) {\n      const expanded = expand(node);\n      expanded.children = filterTree(expanded.children, predicate);\n      result.push(expanded);\n    } else if (node.children) {\n      const children = filterTree(node.children, predicate);\n      if (children.length !== 0) {\n        node.children = children;\n        result.push(expand(node));\n      }\n    }\n  });\n  return result;\n}\n\nfunction flatten(tree = [], predicate = node => true) {\n  if (!tree || tree.length === 0) return [];\n  let result = [];\n  tree.forEach(nod => {\n    const node = { ...nod };\n    if (predicate(node)) result.push(node);\n    result = result.concat(flatten(node.children, predicate));\n  });\n  return result;\n}\n\n/**\n * General purpose tree\n *\n * It just need a basic structure as input:\n *  Tree: Array<Node>\n *  Node: {children: Array<Node>}\n */\nclass TreeObject {\n  constructor(tree) {\n    this.tree = tree;\n  }\n  /**\n   * Return maybe node based on predicate\n   * @param {*} predicate\n   */\n  getNode(predicate) {\n    return getNodeRecursive(this.tree, predicate);\n  }\n\n  /**\n   * return maybe parent node based on the child predicate\n   * @param {*} childPredicate\n   */\n  getParentNode(childPredicate) {\n    return getParentNodeRecursive(this.tree, childPredicate, null);\n  }\n\n  equals(tree, nodeEquality = (a, b) => a === b) {\n    if (tree.constructor === TreeObject) {\n      return compareTreesRecursive(this.tree, tree.tree, nodeEquality);\n    }\n    return compareTreesRecursive(this.tree, tree, nodeEquality);\n  }\n\n  map(nodeMap) {\n    return new TreeObject(mapRecursive(this.tree, [], nodeMap));\n  }\n\n  filter(predicate = node => true) {\n    return new TreeObject(filterTree(this.tree, predicate));\n  }\n\n  /**\n   *\n   * @param {*} predicate: node => Boolean\n   * @returns Array with flattened tree while filtering values with predicate\n   */\n  flatten(predicate = node => true) {\n    return flatten(this.tree, predicate);\n  }\n\n  forEach(map) {\n    forEachRecursive(this.tree, map);\n  }\n}\n\nexport default TreeObject;\n","import { ArcRotateCamera } from \"@babylonjs/core\";\n\nclass CameraBuilder {\n  constructor(scene) {\n    this._scene = scene;\n    this._sphericalCoordinates = null;\n    this._target = null;\n    this._name = `camera${Math.floor(Math.random() * 1e3)}`;\n  }\n\n  name(name) {\n    this._name = name;\n    return this;\n  }\n\n  sphericalCoordinates(sphericalCoordinates) {\n    this._sphericalCoordinates = sphericalCoordinates;\n    return this;\n  }\n\n  target(target) {\n    this._target = target;\n    return this;\n  }\n\n  build() {\n    const variables = Object.values(this);\n    variables.forEach(x => {\n      if (x === null)\n        throw new Error(\n          `There are missing variables to build a camera, e.g ${x}`\n        );\n    });\n    return new ArcRotateCamera(\n      this._name,\n      this._sphericalCoordinates.x,\n      this._sphericalCoordinates.y,\n      this._sphericalCoordinates.z,\n      this._target,\n      this._scene\n    );\n  }\n}\n\nexport default CameraBuilder;\n","import { DirectionalLight } from \"@babylonjs/core\";\n\nclass DirectionalLightBuilder {\n  constructor(scene) {\n    this._scene = scene;\n    this._direction = null;\n    this._name = `Dlight${Math.floor(Math.random() * 1e3)}`;\n    this._intensity = 1;\n  }\n\n  direction(direction) {\n    this._direction = direction;\n    return this;\n  }\n\n  name(name) {\n    this._name = name;\n    return this;\n  }\n\n  intensity(intensity) {\n    this._intensity = intensity;\n    return this;\n  }\n\n  build() {\n    const variables = Object.values(this);\n    variables.forEach(x => {\n      if (x === null)\n        throw new Error(\n          `There are missing variables to build a light, e.g ${x}`\n        );\n    });\n    const light = new DirectionalLight(\n      this._name,\n      this._direction.normalize(),\n      this._scene\n    );\n    light.intensity = this._intensity;\n    return light;\n  }\n}\n\nexport default DirectionalLightBuilder;\n","import { GizmoManager } from \"@babylonjs/core\";\n\nclass GizmoManagerBuilder {\n  constructor(scene) {\n    this._scene = scene;\n    this._isPosition = false;\n    this._isRotation = false;\n    this._isBoundingBox = false;\n    this._isScale = false;\n    this._usePointerToAttachGizmos = false;\n  }\n\n  isPosition(v) {\n    this._isPosition = v;\n    return this;\n  }\n\n  isRotation(v) {\n    this._isRotation = v;\n    return this;\n  }\n\n  isBoundingBox(v) {\n    this._isBoundingBox = v;\n    return this;\n  }\n\n  isScale(v) {\n    this._isScale = v;\n    return this;\n  }\n\n  usePointerToAttachGizmos(v) {\n    this._usePointerToAttachGizmos = v;\n    return this;\n  }\n\n  build() {\n    const gizmoManager = new GizmoManager(this._scene);\n    gizmoManager.positionGizmoEnabled = this._isPosition;\n    gizmoManager.rotationGizmoEnabled = this._isRotation;\n    gizmoManager.boundingBoxGizmoEnabled = this._isBoundingBox;\n    gizmoManager.scaleGizmoEnabled = this._isScale;\n    gizmoManager.usePointerToAttachGizmos = this._usePointerToAttachGizmos;\n    return gizmoManager;\n  }\n}\n\nexport default GizmoManagerBuilder;\n","import {\n  Mesh,\n  Vector3,\n  StandardMaterial,\n  Texture,\n  Space\n} from \"@babylonjs/core\";\n\nclass GroundBuilder {\n  constructor(scene) {\n    this._scene = scene;\n    this._name = `camera${Math.floor(Math.random() * 1e3)}`;\n    this._width = 1;\n    this._height = 1;\n    this._textureSrc = null;\n    this._isPickable = false;\n  }\n\n  name(name) {\n    this._name = name;\n    return this;\n  }\n\n  width(width) {\n    this._width = width;\n    return this;\n  }\n\n  height(height) {\n    this._height = height;\n    return this;\n  }\n\n  textureSrc(textureSrc) {\n    this._textureSrc = textureSrc;\n    return this;\n  }\n\n  isPickable(isPickable) {\n    this._isPickable = isPickable;\n    return this;\n  }\n\n  build() {\n    const ground = Mesh.CreateGround(\n      this._name,\n      this._width,\n      this._height,\n      1,\n      this._scene\n    );\n    ground.translate(new Vector3(0, -1, 0), 1e-1, Space.WORLD);\n    if (this._textureSrc) {\n      ground.material = new StandardMaterial(\n        `Texture${this._name}`,\n        this._scene\n      );\n      ground.material.ambientTexture = new Texture(\n        this._textureSrc,\n        this._scene\n      );\n      ground.material.ambientTexture.uScale = 1;\n      ground.material.ambientTexture.vScale = 1;\n    }\n    ground.isPickable = this._isPickable;\n    return ground;\n  }\n}\n\nexport default GroundBuilder;\n","import { PointLight } from \"@babylonjs/core\";\n\nclass PositionalLightBuilder {\n  constructor(scene) {\n    this._scene = scene;\n    this._position = null;\n    this._name = `light${Math.floor(Math.random() * 1e3)}`;\n    this._intensity = 1;\n  }\n\n  position(position) {\n    this._position = position;\n    return this;\n  }\n\n  name(name) {\n    this._name = name;\n    return this;\n  }\n\n  intensity(intensity) {\n    this._intensity = intensity;\n    return this;\n  }\n\n  build() {\n    const variables = Object.values(this);\n    variables.forEach(x => {\n      if (x === null)\n        throw new Error(\n          `There are missing variables to build a light, e.g ${x}`\n        );\n    });\n    const light = new PointLight(this._name, this._position, this._scene);\n    light.intensity = this._intensity;\n    return light;\n  }\n}\n\nexport default PositionalLightBuilder;\n","import { Mesh, Vector3, Color3, MeshBuilder } from \"@babylonjs/core\";\nclass ReferentialBuilder {\n  constructor(scene) {\n    this._scene = scene;\n    this._name = `referential${Math.floor(Math.random() * 1e3)}`;\n    this._isPickable = true;\n    this._boxParams = { isVisible: true, size: 0.25 };\n    this._size = 1;\n  }\n\n  name(name) {\n    this._name = name;\n    return this;\n  }\n\n  isPickable(isPickable) {\n    this._isPickable = isPickable;\n    return this;\n  }\n\n  boxParams(boxParams) {\n    this._boxParams = boxParams;\n    return this;\n  }\n\n  size(size) {\n    this._size = size;\n    return this;\n  }\n\n  build() {\n    const size = this._size;\n    const axisX = Mesh.CreateLines(\n      `axisX${this._name}`,\n      [\n        new Vector3.Zero(),\n        new Vector3(size, 0, 0),\n        new Vector3(size * 0.95, 0.05 * size, 0),\n        new Vector3(size, 0, 0),\n        new Vector3(size * 0.95, -0.05 * size, 0)\n      ],\n      this._scene\n    );\n    axisX.color = new Color3(1, 0, 0);\n    axisX.isPickable = false;\n    const axisY = Mesh.CreateLines(\n      `axisY${this._name}`,\n      [\n        new Vector3.Zero(),\n        new Vector3(0, size, 0),\n        new Vector3(-0.05 * size, size * 0.95, 0),\n        new Vector3(0, size, 0),\n        new Vector3(0.05 * size, size * 0.95, 0)\n      ],\n      this._scene\n    );\n    axisY.color = new Color3(0, 1, 0);\n    axisY.isPickable = false;\n    const axisZ = Mesh.CreateLines(\n      `axisZ${this._name}`,\n      [\n        new Vector3.Zero(),\n        new Vector3(0, 0, size),\n        new Vector3(0, -0.05 * size, size * 0.95),\n        new Vector3(0, 0, size),\n        new Vector3(0, 0.05 * size, size * 0.95)\n      ],\n      this._scene\n    );\n    axisZ.color = new Color3(0, 0, 1);\n    axisZ.isPickable = false;\n\n    const localOrigin = MeshBuilder.CreateBox(\n      this._name,\n      { size: this._boxParams.size },\n      this._scene\n    );\n    localOrigin.isVisible = this._boxParams.isVisible;\n    localOrigin.isPickable = this._isPickable;\n\n    axisX.parent = localOrigin;\n    axisY.parent = localOrigin;\n    axisZ.parent = localOrigin;\n\n    return localOrigin;\n  }\n}\n\nexport default ReferentialBuilder;\n","import _uniqBy from \"lodash/uniqBy\";\nimport Util3d from \"../Util3d/Util3d\";\nimport KeyPoint from \"../NodeItem/KeyPoint\";\nimport { Quaternion, Observable, Vector3 } from \"@babylonjs/core\";\nimport { Maybe } from \"monet\";\nimport Vec3 from \"../Math/Vec3\";\nimport Vec2 from \"../Math/Vec2\";\nimport MeshSelector from \"../MainView/MeshSelector\";\n\nclass SelectionPlaceHolder {\n  constructor(mainView) {\n    return mainView\n      .getSceneMemory()\n      .map(({ scene }) => {\n        const sceneId = scene._uid;\n        if (sceneId in placeHolderInstance) {\n          return placeHolderInstance[sceneId];\n        }\n        this.scene = scene;\n        this.mesh = null;\n        this.arrayOfMeshes = [];\n        this.angleByMeshName = {};\n        this.mainView = mainView;\n        this.theta = 0;\n        placeHolderInstance[sceneId] = this;\n        return this;\n      })\n      .orSome(this);\n  }\n\n  push(arrayOfMeshes) {\n    if (arrayOfMeshes.length === 0) return this;\n    arrayOfMeshes = Array.isArray(arrayOfMeshes)\n      ? arrayOfMeshes\n      : [arrayOfMeshes];\n    this.arrayOfMeshes = _uniqBy(\n      this.arrayOfMeshes.concat(arrayOfMeshes),\n      mesh => mesh.name\n    );\n    this.angleByMeshName = this.arrayOfMeshes.reduce((map, m) => {\n      map[m.name] = getAngleFromMesh(m);\n      return map;\n    }, {});\n    const placeHolderPosition = Util3d.pointAverage(\n      this.arrayOfMeshes.map(mesh =>\n        Util3d.getGlobalCoordinates(mesh, mesh.position).toBabylon()\n      )\n    );\n    this.createPlaceHolderIn(placeHolderPosition);\n    return this;\n  }\n\n  clear() {\n    this.arrayOfMeshes = [];\n    this.mesh && this.mesh.dispose();\n    return this;\n  }\n\n  createPlaceHolderIn(p) {\n    if (this.mesh === null || this.mesh.isDisposed()) {\n      this.mesh = KeyPoint.ofDict(this.scene, {\n        name: NAME,\n        type: SelectionPlaceHolder,\n        position: [0, 0, 0],\n        quaternion: Quaternion.Identity(),\n        color: [0.5, 0.5, 0.5],\n        keyValueMap: {},\n        isVisible: true\n      }).mesh;\n      this.mesh.material = this.getSelPlaceHolderShader();\n    }\n    const that = this;\n    this.mesh.getMouseContextActions = () => [\n      {\n        title: \"Delete\",\n        onClick: () => {\n          that.mainView.addGizmo2Mesh();\n          that.clear();\n          MeshSelector.ofMainView(this.mainView).clear();\n          that.mainView.highlightMeshesInScene();\n          that.mainView.highlightNodesInTree();\n        }\n      }\n    ];\n    this.mesh.onClick = () => {};\n    this.mesh.isSelectionPlaceHolder = true;\n    this.mesh.parent = this.mainView.getRootNode().item.mesh;\n    this.mesh.position = p.add(new Vector3(0, 0, HEIGHT));\n    this.mesh.observers = new Observable();\n    this.mesh.observers.add(this.getPlaceHolderObs());\n    return this.mesh;\n  }\n\n  getSelPlaceHolderShader() {\n    return Util3d.getShaderMaterial({\n      name: \"placeHolderShader\",\n      vertex: VERTEX,\n      frag: FRAG\n    })(this.scene);\n  }\n\n  getPlaceHolderObs() {\n    const that = this;\n    return ({\n      updatedPointMesh: placeHolder,\n      is2updateServer,\n      displacement\n    }) => {\n      const filteredMeshes = that.arrayOfMeshes.filter(\n        mesh => !mesh.isDisposed()\n      );\n      const theta = getAngleFromMesh(placeHolder);\n      const dTheta = theta - that.theta;\n      that.theta = theta;\n\n      filteredMeshes.forEach(mesh => {\n        handleMotion(theta, mesh, displacement, placeHolder, dTheta, that);\n        if (is2updateServer) {\n          that.mainView.updateNodeInServer(mesh.name);\n        }\n        // notify babylonjs observers\n        Maybe.fromNull(mesh.observers).forEach(obs =>\n          obs.notifyObservers({\n            updatedPointMesh: mesh,\n            is2updateServer,\n            displacement\n          })\n        );\n        // notify graph observers\n        Maybe.fromNull(mesh.graphVertex).forEach(({ vertexObs }) => {\n          vertexObs({\n            updatedPointMesh: mesh,\n            is2updateServer,\n            displacement\n          });\n        });\n      });\n      if (filteredMeshes.length === 0) {\n        that.clear();\n      }\n    };\n  }\n\n  static ofMainView(mainView) {\n    return new SelectionPlaceHolder(mainView);\n  }\n}\n\nconst VERTEX = `precision highp float;\n\n// Attributes\nattribute vec3 position;\nattribute vec3 normal;\n\n// Uniforms\nuniform mat4 worldViewProjection;\n\n// Varying\nvarying vec3 vPosition;\nvarying vec3 vNormal;\n\nvoid main(void) {\n    gl_Position = worldViewProjection * vec4(position, 1.0);\n    vPosition = position;\n    vNormal = normal;\n}`;\n\nconst FRAG = `\nprecision highp float;\n\n// Varying\nvarying vec3 vPosition;\nvarying vec3 vNormal;\n\n// Uniforms\nuniform mat4 world;\nuniform float time;\n\nvoid main(void) {\n    // World values\n    vec3 p = vec3(world * vec4(vPosition, 1.0));\n    vec3 n = normalize(vec3(world * vec4(vNormal, 0.0)));\n    vec3 nColor = n * 0.5 + 0.5;\n    float spatialFreq = 20.;\n    float timeFreq = 10.;\n    float power = sin(spatialFreq * p.y - timeFreq * time);\n    power *= power;\n    vec3 color = power *  nColor + (1. - power) * vec3(1,1,1);\n    gl_FragColor = vec4(color, 1.);\n}`;\n\nconst getAngleFromMesh = mesh =>\n  Maybe.fromNull(mesh.rotationQuaternion)\n    .map(q => 2 * Math.atan2(q.z, q.w))\n    .orSome(0);\n\nconst placeHolderInstance = {};\nconst NAME = \"placeholder\";\nconst HEIGHT = 1.5;\n\nfunction handleMotion(theta, mesh, displacement, placeHolder, dTheta, that) {\n  if (Math.abs(dTheta) < 1e-3) {\n    handleTranslation(mesh, displacement);\n  } else {\n    handleRotation(placeHolder, mesh, dTheta, that, theta);\n  }\n}\n\nfunction handleRotation(placeHolder, mesh, dTheta, that, theta) {\n  const baseCoord = Vec3.ofBabylon(placeHolder.position);\n  const v = Vec3.ofBabylon(mesh.position).sub(baseCoord).toVec2();\n  const eITheta = Vec2.of(Math.cos(dTheta), Math.sin(dTheta));\n  const rV = eITheta.prod(v);\n  const finalV = Vec3.of([rV.x, rV.y, 0]).toBabylon();\n  mesh.position = new Vector3(\n    placeHolder.position.x,\n    placeHolder.position.y,\n    mesh.position.z\n  ).add(finalV);\n  const finalTheta = that.angleByMeshName[mesh.name] + theta;\n  // divide by 2 because of quaternion multiplication.\n  mesh.rotationQuaternion = new Quaternion(\n    0,\n    0,\n    Math.sin(finalTheta / 2),\n    Math.cos(finalTheta / 2)\n  );\n}\n\nfunction handleTranslation(mesh, displacement) {\n  const localDisplacement = Util3d.getLocalCoordFromWorld(\n    mesh,\n    Vec3.ofBabylon(displacement),\n    false\n  );\n  const newPos = Vec3.ofBabylon(mesh.position).add(localDisplacement);\n  // translating\n  mesh.position = newPos.toBabylon();\n}\n\nexport default SelectionPlaceHolder;\n","import { Animation, ActionManager, ExecuteCodeAction } from \"@babylonjs/core\";\nimport {\n  Rectangle,\n  TextBlock,\n  Control,\n  AdvancedDynamicTexture\n} from \"@babylonjs/gui\";\n\nclass TooltipBuilder {\n  constructor(mesh, scene) {\n    this._mesh = mesh;\n    this._scene = scene;\n    this._name = `tooltip${Math.floor(Math.random() * 1e3)}`;\n    // Tooltip box (Rectangle) properties\n    this._width = null;\n    this._height = null;\n    this._thickness = 2;\n    this._linkOffsetX = \"100px\";\n    this._linkOffsetY = \"-50px\";\n    this._background = \"grey\";\n    this._alpha = 0.7;\n    this._scaleX = 0;\n    this._scaleY = 0;\n    this._cornerRadius = 30;\n    // Tooltip text (TextBlock) properties\n    this._text = \"\";\n    this._color = \"White\";\n    this._fontSize = 14;\n    this._padding = \"20px\";\n  }\n\n  name(name) {\n    this._name = name;\n    return this;\n  }\n\n  mesh(mesh) {\n    this._mesh = mesh;\n    return this;\n  }\n\n  // Rectangle properties\n\n  width(width) {\n    this._width = width;\n    return this;\n  }\n\n  height(height) {\n    this._height = height;\n    return this;\n  }\n\n  linkOffsetX(linkOffsetX) {\n    this._linkOffsetX = linkOffsetX;\n    return this;\n  }\n\n  linkOffsetY(linkOffsetY) {\n    this._linkOffsetY = linkOffsetY;\n    return this;\n  }\n\n  background(background) {\n    this._background = background;\n    return this;\n  }\n\n  alpha(alpha) {\n    this._alpha = alpha;\n    return this;\n  }\n\n  scaleX(scaleX) {\n    this._scaleX = scaleX;\n    return this;\n  }\n\n  scaleY(scaleY) {\n    this._scaleY = scaleY;\n    return this;\n  }\n\n  cornerRadius(cornerRadius) {\n    this._cornerRadius = cornerRadius;\n    return this;\n  }\n\n  // Tooltip properties\n\n  text(text) {\n    this._text = text;\n    return this;\n  }\n\n  color(color) {\n    this._color = color;\n    return this;\n  }\n\n  fontSize(fontSize) {\n    this._fontSize = fontSize;\n    return this;\n  }\n\n  padding(padding) {\n    this._padding = padding;\n    return this;\n  }\n\n  build() {\n    // GUI\n    const builder = this;\n    const advancedTexture = AdvancedDynamicTexture.CreateFullscreenUI(\"UI\");\n    advancedTexture.useInvalidateRectOptimization = false;\n    // Set tooltip rectangle box\n    const tooltipBox = new Rectangle(this._name);\n    advancedTexture.addControl(tooltipBox);\n    tooltipBox.thickness = 2;\n    if (this._width) tooltipBox.width = this._width;\n    if (this._height) tooltipBox.height = this._height;\n    tooltipBox.linkOffsetX = this._linkOffsetX;\n    tooltipBox.linkOffsetY = this._linkOffsetY;\n    tooltipBox.transformCenterX = 0;\n    tooltipBox.transformCenterY = 1;\n    tooltipBox.background = this._background;\n    tooltipBox.alpha = this._alpha;\n    tooltipBox.scaleX = this._scaleX;\n    tooltipBox.scaleY = this._scaleY;\n    tooltipBox.cornerRadius = this._cornerRadius;\n    tooltipBox.adaptWidthToChildren = true;\n    tooltipBox.adaptHeightToChildren = true;\n    tooltipBox.linkWithMesh(this._mesh);\n    // Set tooltip text block\n    const textBlock = new TextBlock();\n    textBlock.text = this._text;\n    textBlock.color = this._color;\n    textBlock.fontSize = this._fontSize;\n    textBlock.textVerticalAlignment = Control.VERTICAL_ALIGNMENT_TOP;\n    textBlock.textHorizontalAlignment = Control.HORIZONTAL_ALIGNMENT_CENTER;\n    tooltipBox.addControl(textBlock);\n    textBlock.alpha = 1 / textBlock.parent.alpha;\n    textBlock.paddingTop = this._padding;\n    textBlock.paddingBottom = this._padding;\n    textBlock.paddingLeft = this._padding;\n    textBlock.paddingRight = this._padding;\n    textBlock.resizeToFit = true;\n    // Set mesh action manager\n    const actionManager = new ActionManager(this._scene);\n    this._mesh.actionManager = actionManager;\n    // Animation to show/hide tooltip\n    const scaleXAnimation = new Animation(\n      \"tooltipAnimation\",\n      \"scaleX\",\n      30,\n      Animation.ANIMATIONTYPE_FLOAT,\n      Animation.ANIMATIONLOOPMODE_CONSTANT\n    );\n    const scaleYAnimation = new Animation(\n      \"tooltipAnimation\",\n      \"scaleY\",\n      30,\n      Animation.ANIMATIONTYPE_FLOAT,\n      Animation.ANIMATIONLOOPMODE_CONSTANT\n    );\n    const keys = [\n      {\n        frame: 0,\n        value: 0\n      },\n      {\n        frame: 10,\n        value: 1\n      }\n    ];\n    scaleXAnimation.setKeys(keys);\n    scaleYAnimation.setKeys(keys);\n    tooltipBox.animations = [];\n    tooltipBox.animations.push(scaleXAnimation);\n    tooltipBox.animations.push(scaleYAnimation);\n    // Register actions: OnPointerOverTrigger\n    actionManager.registerAction(\n      new ExecuteCodeAction(ActionManager.OnPointerOverTrigger, function (_) {\n        builder._scene.beginAnimation(tooltipBox, 0, 10, false);\n      })\n    );\n    // Register actions: OnPointerOutTrigger\n    actionManager.registerAction(\n      new ExecuteCodeAction(ActionManager.OnPointerOutTrigger, function (_) {\n        builder._scene.beginAnimation(tooltipBox, 10, 0, false);\n      })\n    );\n    return textBlock;\n  }\n}\n\nexport default TooltipBuilder;\n","import Vec3 from \"../Math/Vec3\";\nimport Mat3 from \"../Math/Mat3\";\nimport { Maybe } from \"monet\";\nimport GizmoManagerBuilder from \"./GizmoManagerBuilder.js\";\nimport CameraBuilder from \"./CameraBuilder\";\nimport PositionalLightBuilder from \"./PositionalLightBuilder\";\nimport ReferentialBuilder from \"./ReferentialBuilder\";\nimport GroundBuilder from \"./GroundBuilder\";\nimport TooltipBuilder from \"./TooltipBuilder\";\nimport DirectionalLightBuilder from \"./DirectionalLightBuilder\";\nimport earcut from \"earcut\";\nimport {\n  Vector3,\n  Color3,\n  Quaternion,\n  StandardMaterial,\n  VertexData,\n  Mesh,\n  Matrix,\n  MeshBuilder,\n  VertexBuffer,\n  Curve3,\n  ActionManager,\n  ExecuteCodeAction,\n  ShaderMaterial,\n  Camera\n} from \"@babylonjs/core\";\nimport GlobalRef from \"../NodeItem/GlobalRef\";\nimport Box from \"../NodeItem/Box\";\nimport Path from \"../NodeItem/Path\";\nimport MaterialCache from \"../Utils/MaterialCache\";\n\nclass Util3d {\n  /**\n   *\n   * @param {*} mesh\n   * @param {*} localPosition: Vector3\n   * @returns Vec3\n   */\n  static getGlobalCoordinates(mesh, localPosition) {\n    if (\n      (mesh.parent && mesh.parent.name === GlobalRef.NAME) ||\n      mesh.name === GlobalRef.NAME\n    ) {\n      return Vec3.ofBabylon(localPosition);\n    }\n    const meshParent = mesh.parent;\n    const meshParentPos = Vec3.ofBabylon(meshParent.position);\n    const meshParentRotMat = Util3d.getRotationMatrix(meshParent);\n    const meshParentScaling = Vec3.ofBabylon(meshParent.scaling);\n    return meshParentRotMat\n      .prodVec(\n        meshParentScaling.mul(\n          Util3d.getGlobalCoordinates(mesh.parent, localPosition)\n        )\n      )\n      .add(meshParentPos);\n  }\n\n  /**\n   *\n   * @param {*} mesh\n   * @param {*} localPosition : Vec3\n   * @returns\n   */\n  static getParentCoord(mesh, localPosition, withTranslation = true) {\n    const meshParent = mesh.parent;\n    const meshParentPos = withTranslation\n      ? Vec3.ofBabylon(meshParent.position)\n      : Vec3.ZERO;\n    const meshParentRotMat = Util3d.getRotationMatrix(meshParent);\n    const meshParentScaling = Vec3.ofBabylon(meshParent.scaling);\n    return meshParentRotMat\n      .prodVec(meshParentScaling.mul(localPosition))\n      .add(meshParentPos);\n  }\n\n  /**\n   *\n   * @param {*} mesh\n   * @param {*} x: Vector3 in mesh local coord\n   * @returns Vector3\n   */\n  static getGlobalCoord(mesh, x) {\n    if (\n      (mesh.parent && mesh.parent.name === GlobalRef.NAME) ||\n      mesh.name === GlobalRef.NAME\n    ) {\n      return x;\n    }\n    const meshParent = mesh.parent;\n    const meshParentPos = Vec3.ofBabylon(meshParent.position);\n    const meshParentRotMat = Util3d.getRotationMatrix(meshParent);\n    const meshParentScaling = Vec3.ofBabylon(meshParent.scaling);\n    const childPos = meshParentRotMat\n      .prodVec(meshParentScaling.mul(Vec3.ofBabylon(x)))\n      .add(meshParentPos);\n    return Util3d.getGlobalCoord(meshParent, childPos.toBabylon());\n  }\n\n  static getBabylonCoordinates(positionInWorld) {\n    return GlobalRef.forwardCoordinates(positionInWorld);\n  }\n\n  /**\n   *\n   * @param {*} mesh\n   * @param {*} worldPosition: Vector3 from GlobalRef coordinate frame\n   */\n  static getLocalCoordFromGlobal(mesh, worldPosition, withTranslation = true) {\n    if (\n      (mesh.parent && mesh.parent.name === GlobalRef.NAME) ||\n      mesh.name === GlobalRef.NAME\n    )\n      return Vec3.ofBabylon(worldPosition);\n    const meshParent = mesh.parent;\n    const meshParentPos = withTranslation\n      ? Vec3.ofBabylon(meshParent.position)\n      : Vec3.ZERO;\n    const meshParentRotMat = Util3d.getRotationMatrix(meshParent);\n    const meshParentScaling = Vec3.ofBabylon(meshParent.scaling);\n    return meshParentScaling\n      .map(z => 1 / z)\n      .mul(\n        meshParentRotMat.dotVec(\n          Util3d.getLocalCoordFromGlobal(\n            meshParent,\n            worldPosition,\n            withTranslation\n          ).sub(meshParentPos)\n        )\n      );\n  }\n\n  /**\n   *\n   * @param {*} mesh\n   * @param {*} worldPosition: Vec3 from World(Babylon) coordinate frame\n   *\n   * @returns localPosition: Vec3\n   */\n  static getLocalCoordFromWorld(mesh, worldPosition, withTranslation = true) {\n    /// WARNING: very similar with getLocalCoordFromGlobal\n    if (!mesh.parent) {\n      return worldPosition;\n    }\n    const meshParent = mesh.parent;\n    const meshParentPos = withTranslation\n      ? Vec3.ofBabylon(meshParent.position)\n      : Vec3.ZERO;\n    const meshParentRotMat = Util3d.getRotationMatrix(meshParent);\n    const meshParentScaling = Vec3.ofBabylon(meshParent.scaling);\n    // assume scaling != 0\n    const inverseScaling = meshParentScaling.map(x => 1.0 / x);\n\n    return inverseScaling.mul(\n      meshParentRotMat.dotVec(\n        Util3d.getLocalCoordFromWorld(\n          meshParent,\n          worldPosition,\n          withTranslation\n        ).sub(meshParentPos)\n      )\n    );\n  }\n\n  /**\n   * World to Global coords\n   * @param {*} parentView: MainView\n   */\n  static toGlobalCoord = parentView => {\n    const rootMesh = parentView.getRootNode().item.mesh;\n    return arrayOfVector3 => {\n      const transform = p =>\n        Util3d.getLocalCoordFromWorld(\n          { parent: rootMesh },\n          Vec3.ofBabylon(p)\n        ).toBabylon();\n      if (Array.isArray(arrayOfVector3)) {\n        return arrayOfVector3.map(transform);\n      }\n      return transform(arrayOfVector3);\n    };\n  };\n\n  static getRotationMatrix(mesh) {\n    const localRotationMatrix = new Matrix();\n    const maybeQuaternion = Maybe.fromNull(mesh?.rotationQuaternion);\n    maybeQuaternion.forEach(quaternion =>\n      quaternion.toRotationMatrix(localRotationMatrix)\n    );\n    maybeQuaternion.orElseRun(() => {\n      const quaternion = Quaternion.RotationYawPitchRoll(\n        mesh.rotation.y,\n        mesh.rotation.x,\n        mesh.rotation.z\n      );\n      quaternion.toRotationMatrix(localRotationMatrix);\n    });\n    return Mat3.ofBabylonMatrix(localRotationMatrix);\n  }\n\n  static showNormals(scene, mesh, size = 1, color = Color3.Red()) {\n    const normals = mesh.getVerticesData(VertexBuffer.NormalKind);\n    const positions = mesh.getVerticesData(VertexBuffer.PositionKind);\n    const lines = [];\n    for (let i = 0; i < normals.length; i += 3) {\n      const v1 = Vector3.FromArray(positions, i);\n      const v2 = v1.add(Vector3.FromArray(normals, i).scaleInPlace(size));\n      lines.push([v1.add(mesh.position), v2.add(mesh.position)]);\n    }\n    const normalLines = MeshBuilder.CreateLineSystem(\n      \"normalLines\",\n      { lines: lines },\n      scene\n    );\n    normalLines.color = color;\n    normalLines.parent = mesh;\n    return normalLines;\n  }\n\n  static orthogonalBasisFromVector(u) {\n    const identityMatrix = [\n      new Vector3(1, 0, 0),\n      new Vector3(0, 1, 0),\n      new Vector3(0, 0, 1)\n    ];\n    const uArray = [u.x, u.y, u.z];\n    // choose pivot\n    let pivot = 0;\n    for (let i = 0; i < 3; i++) {\n      if (uArray[i] !== 0) {\n        pivot = i;\n        break;\n      }\n    }\n    let v = identityMatrix[(pivot + 1) % 3].add(\n      identityMatrix[pivot].scale(-uArray[(pivot + 1) % 3] / uArray[pivot])\n    );\n    v = v.normalize();\n    let w = identityMatrix[(pivot + 2) % 3].add(\n      identityMatrix[pivot].scale(-uArray[(pivot + 2) % 3] / uArray[pivot])\n    );\n    w = w.normalize();\n    w = w.subtract(v.scale(Vector3.Dot(v, w)));\n    return { u: Vector3.FromArray(uArray).normalize(), v: v, w: w.normalize() };\n  }\n\n  static createOrientedCone = (\n    scene,\n    u = new Vector3(1, 0, 0),\n    color = Color3.Gray(),\n    name = `OrientedCone${randomDigits()}`,\n    isPickable = true,\n    segments = 16\n  ) => {\n    const surface = {\n      positions: [],\n      faces: []\n    };\n    const d = u.length() / 3;\n    const mat3 = Util3d.orthogonalBasisFromVector(u);\n    const v = mat3.v;\n    const w = mat3.w;\n\n    const orientation = Math.sign(Vector3.Dot(Vector3.Cross(v, w), u));\n    // positions\n    for (let i = 0; i < segments; i++) {\n      const theta = orientation * ((2 * Math.PI) / segments) * i;\n      surface.positions.push(\n        v.scale(d * Math.cos(theta)).add(w.scale(d * Math.sin(theta)))\n      );\n    }\n\n    surface.positions.push(Vector3.Zero());\n    surface.positions.push(u);\n\n    const zeroIndex = surface.positions.length - 1;\n    const uIndex = surface.positions.length - 2;\n\n    for (let i = 0; i < segments; i++) {\n      // bottom faces\n      surface.faces.push([zeroIndex, (i + 1) % segments, i]);\n      // cone faces\n      surface.faces.push([uIndex, i, (i + 1) % segments]);\n    }\n\n    // mesh\n    const mesh = Util3d.meshFromPositionAndFaces(\n      name,\n      scene,\n      surface.positions,\n      surface.faces\n    );\n    mesh.convertToFlatShadedMesh();\n\n    const materialName = `OrientedConeMaterial${name}`;\n    mesh.material = MATERIAL_CACHE.get(materialName, scene).orLazy(() => {\n      const material = Util3d.getMaterialFromColor(color, scene, materialName);\n      MATERIAL_CACHE.put(materialName, scene, material);\n      return material;\n    });\n    mesh.isPickable = isPickable;\n    return mesh;\n  };\n\n  static createSphere = (\n    scene,\n    color = Color3.Gray(),\n    diameter = 1,\n    name = `Sphere${randomDigits()}`,\n    isPickable = true\n  ) => {\n    const sphere = Mesh.CreateSphere(name, 16, diameter, scene);\n    const material = Util3d.getMaterialFromColor(\n      color,\n      scene,\n      `SphereMaterial${name}`\n    );\n    sphere.material = material;\n    sphere.isPickable = isPickable;\n    return sphere;\n  };\n\n  static createBox = (\n    scene,\n    color = Color3.Gray(),\n    size = Box.DEFAULT_SIZE,\n    name = `Box${randomDigits()}`,\n    isPickable = true\n  ) => {\n    const box = Mesh.CreateBox(name, size, scene);\n    const material = new StandardMaterial(`BoxMaterial${name}`, scene);\n    material.diffuseColor = color;\n    material.emissiveColor = color;\n    box.material = material;\n    box.isPickable = isPickable;\n    return box;\n  };\n\n  static createTubeFromPoints = (\n    scene,\n    points,\n    color = Color3.Gray(),\n    radius = 1,\n    name = `Tube${randomDigits()}`,\n    isPickable = true\n  ) => {\n    const mesh = MeshBuilder.CreateTube(\n      name,\n      {\n        path: points,\n        radius: radius,\n        sideOrientation: Mesh.DOUBLESIDE,\n        updatable: true,\n        cap: Mesh.CAP_ALL\n      },\n      scene\n    );\n    const materialName = `Material${name}`;\n    mesh.material = MATERIAL_CACHE.get(materialName, scene).orLazy(() => {\n      const material = Util3d.getMaterialFromColor(color, scene, materialName);\n      MATERIAL_CACHE.put(materialName, scene, material);\n      return material;\n    });\n    mesh.isPickable = isPickable;\n    return mesh;\n  };\n\n  static positionalLightBuilder = scene => {\n    return new PositionalLightBuilder(scene);\n  };\n\n  static directionalLightBuilder = scene => {\n    return new DirectionalLightBuilder(scene);\n  };\n\n  static cameraBuilder(scene) {\n    return new CameraBuilder(scene);\n  }\n\n  static gizmoManagerBuilder(scene) {\n    return new GizmoManagerBuilder(scene);\n  }\n\n  static referentialBuilder = scene => {\n    return new ReferentialBuilder(scene);\n  };\n\n  /**\n   * Return a maybe position of intersection of the mouse and a ground mesh\n   *\n   * @param {Scene} scene Babylon scene\n   * @param {Ground} ground a Babylon mesh that represents the ground\n   * @returns {Maybe} a maybe Vector3 representing the mouse ground intersection\n   */\n  static getGroundPosition = function (scene, ground) {\n    // Use a predicate to get position on the ground\n    const pickInfo = scene.pick(\n      scene.pointerX,\n      scene.pointerY,\n      mesh => mesh === ground\n    );\n    if (pickInfo.hit) return Maybe.some(pickInfo.pickedPoint);\n    return Maybe.none();\n  };\n\n  static pickMesh = (scene, ground) => {\n    const pickInfo = scene.pick(\n      scene.pointerX,\n      scene.pointerY,\n      mesh => mesh !== ground && mesh.isEnabled()\n    );\n    if (pickInfo.hit && pickInfo.pickedMesh.isPickable) {\n      return Maybe.some(pickInfo.pickedMesh);\n    }\n    return Maybe.none();\n  };\n\n  static groundBuilder = scene => {\n    return new GroundBuilder(scene);\n  };\n\n  static meshFromPositionAndFaces(\n    name,\n    scene,\n    positions,\n    faces,\n    updatable = true\n  ) {\n    const vertexData = new VertexData();\n\n    vertexData.positions = positions.flatMap(z => [z.x, z.y, z.z]);\n    vertexData.indices = faces.flatMap(z => z);\n\n    let mesh = new Mesh(name, scene);\n    vertexData.applyToMesh(mesh, updatable);\n    // mesh.createNormals();\n    return mesh;\n  }\n\n  /**\n   *\n   * @param {*} polygon: Array of babylonjs vector3, representing a boundary of a polygon\n   */\n  static triangulatePolygon(polygon) {\n    const triangulation = earcut(\n      polygon.map(x => [x.x, x.y, x.z]).flatMap(x => x),\n      null,\n      3\n    );\n    const len = triangulation.length / 3;\n    const ans = [];\n    for (let i = 0; i < len; i++) {\n      const i3 = 3 * i;\n      ans.push([\n        triangulation[i3],\n        triangulation[i3 + 1],\n        triangulation[i3 + 2]\n      ]);\n    }\n    return ans;\n  }\n\n  /**\n   *\n   * @param {*} polygon: Array of babylonjs vector3, representing a boundary of a polygon\n   * Returns a real number representing the orientation of the curve, if positive represents a counterclockwise orientation, clockwise otherwise.\n   */\n  static computeOrientation(polygon) {\n    const n = polygon.length;\n    const vec3Poly = polygon.map(x => Vec3.ofBabylon(x));\n    let orientation = 0;\n    vec3Poly.forEach((a, i) => {\n      const modi = (i + 1) % n;\n      const edge = vec3Poly[modi].sub(vec3Poly[i]);\n      orientation += Vec3.of([-a.y, a.x, a.z]).dot(edge);\n    });\n    return orientation / 2;\n  }\n\n  /**\n   * @param {*} arrayOfPoints: array of babylon vec3\n   * Returns the average\n   */\n  static pointAverage(arrayOfPoints) {\n    if (!arrayOfPoints || arrayOfPoints.length === 0) return Vector3.Zero();\n    return arrayOfPoints\n      .reduce((e, x) => e.add(x), Vector3.Zero())\n      .scale(1 / arrayOfPoints.length);\n  }\n\n  static pointAverageVec3(arrayOfPoints) {\n    if (!arrayOfPoints || arrayOfPoints.length === 0) return Vec3.ZERO;\n    return arrayOfPoints\n      .reduce((e, x) => e.add(x), Vec3.ZERO)\n      .scale(1 / arrayOfPoints.length);\n  }\n\n  static randomVector3(a, b) {\n    return new Vector3.FromArray(\n      [0, 0, 0].map(x => a + (b - a) * Math.random())\n    );\n  }\n\n  static getMaterialFromColor(\n    color,\n    scene,\n    name = `MaterialFromColor${randomDigits()}`\n  ) {\n    const material = new StandardMaterial(name, scene);\n    material.diffuseColor = color;\n    material.emissiveColor = color;\n    return material;\n  }\n\n  static piecewiseCurveDistance = curve => {\n    let distance = 0;\n    for (let i = 0; i < curve.length - 1; i++) {\n      const v = curve[i + 1].subtract(curve[i]);\n      distance += v.length();\n    }\n    return distance;\n  };\n\n  static getCurveOrientations = curve => {\n    const orientations = [];\n    for (let i = 0; i < curve.length - 1; i++) {\n      const v = curve[i + 1].subtract(curve[i]);\n      orientations.push(Math.atan2(v.y, v.x));\n    }\n    orientations.push(orientations[orientations.length - 1]);\n    return orientations;\n  };\n\n  static getSplineFromCurve = (curve, nbPoints = 7) => {\n    const closed = false;\n    return {\n      points: Curve3.CreateCatmullRomSpline(curve, nbPoints, closed).getPoints()\n    };\n  };\n\n  static splineObj2redis = splineObj => {\n    const orientations = Util3d.getCurveOrientations(splineObj.points);\n    return splineObj.points.map((x, i) => {\n      return [x.x, x.y, orientations[i]];\n    });\n  };\n\n  static getShaderMaterial =\n    ({\n      name = `CustomShader${randomDigits()}`,\n      vertex = VERTEX,\n      frag = FRAG,\n      onBindObservable = SHADER_BIND,\n      preProcessShader = SHADER_PRE\n    }) =>\n    scene => {\n      /**\n       * Check this for shader re-usage, if a problem appears\n       * https://playground.babylonjs.com/#KJ3BVA#4\n       * */\n      const shaderMaterial = new ShaderMaterial(\n        name,\n        scene,\n        { vertexSource: vertex, fragmentSource: frag },\n        {\n          attributes: [\"position\", \"normal\", \"uv\"],\n          uniforms: [\n            \"world\",\n            \"worldView\",\n            \"worldViewProjection\",\n            \"view\",\n            \"projection\"\n          ]\n        }\n      );\n      preProcessShader(scene, shaderMaterial);\n      shaderMaterial.onBindObservable.add(() => {\n        onBindObservable(scene, shaderMaterial);\n      });\n      return shaderMaterial;\n    };\n\n  static setOrthoView(camera, scene) {\n    camera.mode = Camera.ORTHOGRAPHIC_CAMERA;\n    const aspect = scene.getEngine().getAspectRatio(camera);\n    const distance = camera.position.length();\n    camera.orthoLeft = -distance / 2;\n    camera.orthoRight = distance / 2;\n    camera.orthoBottom = camera.orthoLeft * aspect;\n    camera.orthoTop = camera.orthoRight * aspect;\n  }\n\n  static setPerspectiveView(camera, scene) {\n    camera.mode = Camera.PERSPECTIVE_CAMERA;\n  }\n\n  /**\n   *\n   * @param {*} scene: Babylonjs Scene\n   * @param {*} name: String\n   * @param {*} begin: Vector3\n   * @param {*} end: Vector3\n   */\n  static getArrow(scene, name, begin, end, radius = 1) {\n    const arrowTube = Util3d.createTubeFromPoints(\n      scene,\n      [begin, end],\n      Color3.Gray(),\n      radius,\n      name + \"tube\"\n    );\n    const arrowCone = Util3d.createOrientedCone(\n      scene,\n      end\n        .subtract(begin)\n        .normalize()\n        .scale(radius * 7),\n      Color3.Gray(),\n      name + \"cone\"\n    );\n    arrowCone.position = end;\n    const arrowMesh = new Mesh(name, scene);\n    arrowTube.parent = arrowMesh;\n    arrowCone.parent = arrowMesh;\n    return arrowMesh;\n  }\n\n  /*\n   * Show tooltip on mesh on mouse over\n   *\n   * @param {Mesh} mesh: Mesh to add the tooltip\n   * @param {Scene} scene: Scene\n   * @param {String} tooltipText: Text to be added to the tooltip\n   *\n   * @returns {TextBlock} TextBlock instance to allow dynamic changes\n   *  on the tooltip content by: textBlock.text = \"new text\"\n   */\n  static addTooltipToMesh(mesh, scene, tooltipText = \"\") {\n    return new TooltipBuilder(mesh, scene).text(tooltipText).build();\n  }\n\n  /**\n   * Add click action to mesh in scene\n   * @param {Mesh} mesh : Mesh to add click action\n   * @param {Scene} scene : Scene object\n   * @param {Function} callback : Function to be called on click\n   */\n  static addClickActionToMesh(mesh, scene, callback) {\n    // Set mesh action manager\n    const actionManager = new ActionManager(scene);\n    mesh.actionManager = actionManager;\n    // Register actions: OnPickDownTrigger (click action)\n    actionManager.registerAction(\n      new ExecuteCodeAction(ActionManager.OnPickDownTrigger, function (_) {\n        callback();\n      })\n    );\n    // Register actions: OnPointerOverTrigger (hover effect)\n    actionManager.registerAction(\n      new ExecuteCodeAction(ActionManager.OnPointerOverTrigger, function (_) {\n        mesh.material.unfreeze();\n        mesh.material.emissiveColor = Color3.Gray();\n      })\n    );\n    // Register actions: OnPointerOutTrigger (clear hover effect)\n    actionManager.registerAction(\n      new ExecuteCodeAction(ActionManager.OnPointerOutTrigger, function (_) {\n        mesh.material.emissiveColor = Color3.White();\n        setTimeout(() => mesh.material.freeze(), 10);\n      })\n    );\n  }\n\n  /**\n   * Get node item type from mesh\n   * @param {Mesh} mesh : Node Item mesh\n   * @returns {String} NodeItem type\n   */\n  static getNodeItemTypeFromMesh = mesh => {\n    const isMeshFromPath = mesh.parent?.nodeItem.getType() === Path.TYPE;\n    return isMeshFromPath\n      ? mesh.parent?.nodeItem.getType()\n      : mesh.nodeItem.getType();\n  };\n}\n\nconst randomDigits = () => {\n  return Math.floor(Math.random() * 1e3);\n};\n\nconst VERTEX = `precision highp float;\n\n// Attributes\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 uv;\n\n// Uniforms\nuniform mat4 worldViewProjection;\n\n// Varying\nvarying vec3 vPosition;\nvarying vec3 vNormal;\nvarying vec2 vUV;\n\nvoid main(void) {\n    vec4 outPosition = worldViewProjection * vec4(position, 1.0);\n    gl_Position = outPosition;\n\n    vUV = uv;\n    vPosition = position;\n    vNormal = normal;\n}`;\nconst FRAG = `\nprecision highp float;\n\n// Varying\nvarying vec3 vPosition;\nvarying vec3 vNormal;\nvarying vec2 vUV;\n\n// Uniforms\nuniform mat4 world;\n\n// Refs\nuniform vec3 cameraPosition;\nuniform vec3 lightPosition;\nuniform float time;\n\nvoid main(void) {\n    vec3 vLightPosition = lightPosition;\n\n    // World values\n    vec3 vPositionW = vec3(world * vec4(vPosition, 1.0));\n    vec3 vNormalW = normalize(vec3(world * vec4(vNormal, 0.0)));\n    vec3 viewDirectionW = normalize(cameraPosition - vPositionW);\n\n    // Light\n    vec3 lightVectorW = normalize(vLightPosition - vPositionW);\n    vec3 color = vec3(0.5,0.,1.);\n\n    // diffuse\n    float ndl = max(0., dot(vNormalW, lightVectorW));\n\n    // Specular\n    vec3 angleW = normalize(viewDirectionW + lightVectorW);\n    float specComp = max(0., dot(vNormalW, angleW));\n    specComp = pow(specComp, max(1., 64.)) * 2.;\n\n    gl_FragColor = vec4(color * ndl + vec3(specComp), 1.);\n}\n`;\n\nconst SHADER_BIND = (() => {\n  let time = 0;\n  let T = new Date().getTime();\n  return (scene, shaderMaterial) => {\n    const dt = (new Date().getTime() - T) / 1000;\n    shaderMaterial.setFloat(\"time\", time);\n    shaderMaterial.setVector3(\"cameraPosition\", scene.activeCamera.position);\n    if (scene.lights.length > 0) {\n      shaderMaterial.setVector3(\"lightPosition\", scene.lights[0].position);\n    }\n    time = time + dt;\n    T = new Date().getTime();\n  };\n})();\n\nconst SHADER_PRE = (scene, shaderMaterial) => {\n  shaderMaterial.backFaceCulling = false;\n  shaderMaterial.setFloat(\"time\", 0);\n  shaderMaterial.setVector3(\"cameraPosition\", scene.activeCamera.position);\n  shaderMaterial.setVector3(\"lightPosition\", new Vector3(0, 20, 10));\n};\n\nconst MATERIAL_CACHE = MaterialCache.getInstance();\n\nexport default Util3d;\n","export class Animator {\n  constructor(state, next, doWhile) {\n    this.state = state;\n    this.next = next;\n    this.while = doWhile;\n    this.requestAnimeId = null;\n  }\n\n  play() {\n    this.requestAnimeId = requestAnimationFrame(() => {\n      if (!this.while(this.state)) return this.stop();\n      this.state = this.next(this.state);\n      this.play();\n    });\n    return this;\n  }\n\n  stop() {\n    cancelAnimationFrame(this.requestAnimeId);\n    return this;\n  }\n\n  static builder() {\n    return new AnimatorBuilder();\n  }\n}\n\nclass AnimatorBuilder {\n  constructor() {\n    this._state = null;\n    this._next = null;\n    this._end = null;\n  }\n\n  initialState(state) {\n    this._state = state;\n    return this;\n  }\n\n  nextState(next) {\n    this._next = next;\n    return this;\n  }\n\n  while(end) {\n    this._end = end;\n    return this;\n  }\n\n  build() {\n    const someAreEmpty = [this._state, this._next, this._end].some(\n      x => x === null || x === undefined\n    );\n    if (someAreEmpty) throw new Error(\"Animator properties are missing\");\n    return new Animator(this._state, this._next, this._end);\n  }\n}\n","import { MasterDB } from \"mov-fe-lib-core\";\n\nclass AnnotationManager {\n  constructor() {\n    if (instance) return instance;\n    instance = this;\n    this.annotations = {};\n    this.observersBySceneId = {};\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                   Getters & Setters                                  *\n   *                                                                                      */\n  //========================================================================================\n\n  getAnnotations = () => this.annotations;\n\n  load() {\n    this.retrieveAnnotationsFromDb();\n    return this;\n  }\n  /**\n   *\n   * @param {*} scene: Scene\n   * @param {*} lambda: AnnotationManager -> {}\n   */\n  pushObserver(scene, lambda) {\n    const sceneId = scene._uid;\n\n    if (!(sceneId in this.observersBySceneId)) {\n      this.observersBySceneId[sceneId] = [];\n    }\n    this.observersBySceneId[sceneId].push(lambda);\n    return this;\n  }\n\n  clearObserver(scene) {\n    const sceneId = scene._uid;\n    if (sceneId in this.observersBySceneId) {\n      delete this.observersBySceneId[sceneId];\n    }\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                         Utils                                        *\n   *                                                                                      */\n  //========================================================================================\n\n  retrieveAnnotationsFromDb() {\n    MasterDB.subscribe(\n      { Scope: \"Annotation\", Name: \"*\" },\n      data => {\n        console.log(\"Annotation update\", data);\n        const actionMap = {\n          del: annotation => this.delAnnotation(annotation),\n          set: annotation => this.addAnnotation(annotation)\n        };\n        const annotation = data.key.Annotation;\n        if (data.event in actionMap) {\n          actionMap[data.event](annotation);\n          Object.keys(this.observersBySceneId).forEach(k =>\n            this.observersBySceneId[k].forEach(f => f(this))\n          );\n        }\n      },\n      data => {\n        console.log(\"Annotation start\", data);\n        const annotation = data.value.Annotation;\n        this.addAnnotation(annotation);\n      }\n    );\n  }\n\n  delAnnotation(annotation) {\n    if (!annotation) return;\n    const names2delete = Object.keys(annotation).reduce((e, x) => {\n      e.push(x);\n      return e;\n    }, []);\n    Object.keys(this.annotations).forEach(annotationType => {\n      const value = this.annotations[annotationType];\n      value.names = value.names.filter(x => !names2delete.includes(x));\n      value.labels = value.labels.filter(x => !names2delete.includes(x));\n    });\n  }\n\n  addAnnotation(annotation) {\n    if (!annotation) return;\n    Object.keys(annotation).forEach(name => {\n      const annotationObj = annotation[name];\n      if (!annotationObj.Type) return;\n      const type = annotationObj.Type.toLowerCase();\n      const label = annotationObj.Label;\n      if (!(type in this.annotations)) {\n        this.annotations[type] = { names: [], labels: [] };\n      }\n      this.annotations[type].names.push(name);\n      this.annotations[type].labels.push(label ? label : name);\n    });\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                        Static                                        *\n   *                                                                                      */\n  //========================================================================================\n\n  static getInstance() {\n    return new AnnotationManager();\n  }\n\n  static getAnnotations() {\n    return AnnotationManager.getInstance().getAnnotations();\n  }\n}\nlet instance = null;\nexport default AnnotationManager;\n","import AddMapAction from \"../Actions/AddMapAction\";\nimport RobotAction from \"../Actions/RobotAction\";\nimport Robot from \"../NodeItem/Robot\";\nimport AddMeshAction from \"../Actions/AddMeshAction\";\n\nexport const ASSETS_TYPES = {\n  Map: \"Map\",\n  Robot: \"Robot\",\n  Mesh: \"Mesh\"\n};\n\nexport const AssetsTypesFactory = {\n  Map: map => new AddMapAction(map.name, map.loader),\n  Robot: robot => new RobotAction(robot, Robot.getSocketAnimator),\n  Mesh: mesh => new AddMeshAction(mesh)\n};\n","import { Clipboard as Clip } from \"mov-fe-lib-core\";\n\nconst SCENE_CONTEXT = \"scene\";\nlet COPY_PASTE_UID = 0;\n\nexport default class Clipboard {\n  static copy(value) {\n    Clip.write(SCENE_CONTEXT, value);\n  }\n  static paste() {\n    return Clip.read(SCENE_CONTEXT);\n  }\n\n  static getUID() {\n    return COPY_PASTE_UID++;\n  }\n}\n","import { Color3 } from \"@babylonjs/core\";\n\nconst Constants = {\n  RADIUS: 0.25,\n  POINTS_DENSITY: 2,\n  CLOUD_FUNCTION_NAME: \"backend.viewer\",\n  NAV_CLOUD_NAME: \"backend.generate_path\",\n  RAD2DEG: 180 / Math.PI,\n  DEG2RAD: Math.PI / 180,\n  DEBUG: false\n};\n\nexport const LOGGER_STATUS = {\n  init: 0,\n  running: 1,\n  paused: 2,\n  terminated: 3\n};\n\nexport const SCENE_BACKGROUND = {\n  dark: Color3.Black(),\n  light: Color3.Gray(),\n  default: Color3.Black()\n};\n\nexport default Constants;\n","import { Vector3 } from \"@babylonjs/core\";\nimport Vec3 from \"../Math/Vec3\";\nimport Util3d from \"../Util3d/Util3d\";\nimport { Animator } from \"./Animator\";\n\nexport default class DefaultMouseEvents {\n  static onPointerDown = mainView => evt => {\n    mainView.mousePosClick = mainView\n      .getMouseCoordsFromRoot()\n      .orSome(Vector3.Zero());\n    mainView.mousePosMove = mainView.mousePosClick;\n    mainView.sceneMemory.forEach(({ camera, canvas }) => {\n      if (evt.buttons === 2 || evt.buttons === 4 || evt.ctrlKey) {\n        camera.detachControl(canvas);\n      }\n    });\n  };\n\n  static onPointerUp = mainView => () => {\n    mainView.sceneMemory.forEach(({ camera, canvas }) => {\n      camera.attachControl(canvas, true);\n    });\n  };\n\n  static onPointerMove = mainView => evt => {\n    mainView.sceneMemory.forEach(({ mouseLocationText, camera }) => {\n      mainView.getMouseCoordsFromRoot().forEach(currentLocal => {\n        setMouseLocationTxt(mouseLocationText, currentLocal);\n        const panCamera = () => {\n          const v = currentLocal.subtract(mainView.mousePosMove);\n          const vBabylon = getWorldVector(mainView, v);\n          animateCamera(camera, vBabylon.scale(-1));\n          mainView.mousePosMove = currentLocal;\n        };\n        const mouseButtonActions = [\n          { predicate: evt.ctrlKey && evt.buttons === 1, action: panCamera },\n          { predicate: evt.buttons === 4, action: panCamera }\n        ];\n        const filterActions = mouseButtonActions.filter(\n          ({ predicate }) => predicate\n        );\n        if (filterActions.length > 0) filterActions[0].action();\n      });\n    });\n  };\n}\n\nfunction animateCamera(camera, v) {\n  Animator.builder()\n    .initialState({\n      camera: camera,\n      time: 0,\n      T: new Date().getTime()\n    })\n    .nextState(s => {\n      const { camera, time } = s;\n      const dt = 0.1; //(new Date().getTime() - T) / 1000;\n      const vdt = v.scale(dt);\n      camera.position = camera.position.add(vdt);\n      camera.setTarget(camera.target.add(vdt));\n      return {\n        camera: camera,\n        time: time + dt,\n        T: new Date().getTime()\n      };\n    })\n    .while(s => s.time <= 1)\n    .build()\n    .play();\n}\n\nfunction setMouseLocationTxt(mouseLocationText, currentLocal) {\n  mouseLocationText.text = `x: ${currentLocal.x.toFixed(\n    2\n  )}, y: ${currentLocal.y.toFixed(2)}`;\n}\n\nfunction getWorldVector(mainView, vector3) {\n  const worldFrameMesh = mainView.getRootNode().item.mesh.parent;\n  // compute world coordinates from GlobalRef (similar to Util3d.getBabylonCoordinates)\n  const matrix = Util3d.getRotationMatrix(worldFrameMesh);\n  const scale = Vec3.ofBabylon(worldFrameMesh.scaling);\n  const vBabylon = matrix\n    .prodVec(scale.mul(Vec3.ofBabylon(vector3)))\n    .toBabylon();\n  return vBabylon;\n}\n","import {\n  Scene,\n  RotationGizmo,\n  UtilityLayerRenderer,\n  Vector3,\n  StandardMaterial,\n  Mesh,\n  Space\n} from \"@babylonjs/core\";\nimport { TextBlock, AdvancedDynamicTexture } from \"@babylonjs/gui/2D\";\nimport Util3d from \"../Util3d/Util3d\";\nimport \"@babylonjs/core/Debug/debugLayer\";\nimport \"@babylonjs/inspector\";\nimport Constants from \"./Constants\";\n\nclass DefaultScene {\n  static createGizmo = scene => {\n    const gizmoManager = new RotationGizmo(new UtilityLayerRenderer(scene));\n    gizmoManager.xGizmo.dragBehavior.detach();\n    gizmoManager.xGizmo.scaleRatio = 0.0;\n    gizmoManager.yGizmo.dragBehavior.detach();\n    gizmoManager.yGizmo.scaleRatio = 0.0;\n    return gizmoManager;\n  };\n\n  static createCamera = (scene, canvas, forEach = camera => {}) => {\n    const COLLISION_RADIUS = 1;\n    const camera = Util3d.cameraBuilder(scene)\n      .sphericalCoordinates(new Vector3(0, 0, 14))\n      .target(Vector3.Zero())\n      .name(\"camera\")\n      .build();\n    camera.attachControl(canvas, false);\n    camera.inertia = 0.7;\n    camera.collisionRadius = new Vector3(\n      COLLISION_RADIUS,\n      COLLISION_RADIUS,\n      COLLISION_RADIUS\n    );\n    camera.panningInertia = 0.5;\n    camera.checkCollisions = true;\n    camera.panningSensibility = 0;\n    camera.lowerRadiusLimit = 2;\n    const browser = get_browser();\n    if (browser.name === \"Firefox\" && browser.version <= 89) {\n      camera.wheelPrecision = 100;\n    }\n    forEach(camera);\n    return camera;\n  };\n\n  static createLight = scene => {\n    return Util3d.directionalLightBuilder(scene)\n      .name(\"light\")\n      .direction(new Vector3(0, -1, 0))\n      .intensity(0.35)\n      .build();\n  };\n\n  static createMeshGround = (scene, width = 20, height = 20) => {\n    const ground = Mesh.CreateGround(\"groundMesh\", width, height, 20, scene);\n    ground.translate(new Vector3(0, -1, 0), 1e-2, Space.WORLD);\n    ground.material = new StandardMaterial(\"wireframe\", scene);\n    ground.material.wireframe = true;\n    ground.isPickable = false;\n    ground.checkCollisions = true;\n    return ground;\n  };\n\n  static createScene = engine => {\n    const scene = new Scene(engine);\n    scene.collisionsEnabled = true;\n    scene._uid = scene.getUniqueId();\n    if (Constants.DEBUG) {\n      scene.debugLayer.show({\n        embedMode: true,\n        globalRoot: document.body,\n        overlay: true\n      });\n    }\n    return scene;\n  };\n\n  static createMouseLocationText = scene => {\n    const advancedTexture = AdvancedDynamicTexture.CreateFullscreenUI(\n      \"UI\",\n      true,\n      scene\n    );\n    const text = new TextBlock();\n    text.text = \"\";\n    text.color = \"white\";\n    text.fontSize = 17;\n    text.left = -560;\n    text.top = -145;\n    advancedTexture.addControl(text);\n    return text;\n  };\n}\n\n/**\n * From https://stackoverflow.com/questions/5916900/how-can-you-detect-the-version-of-a-browser\n */\nfunction get_browser() {\n  var ua = navigator.userAgent,\n    tem,\n    M =\n      ua.match(\n        /(opera|chrome|safari|firefox|msie|trident(?=\\/))\\/?\\s*(\\d+)/i\n      ) || [];\n  if (/trident/i.test(M[1])) {\n    tem = /\\brv[ :]+(\\d+)/g.exec(ua) || [];\n    return { name: \"IE\", version: tem[1] || \"\" };\n  }\n  if (M[1] === \"Chrome\") {\n    tem = ua.match(/\\bOPR|Edge\\/(\\d+)/);\n    if (tem != null) {\n      return { name: \"Opera\", version: tem[1] };\n    }\n  }\n  M = M[2] ? [M[1], M[2]] : [navigator.appName, navigator.appVersion, \"-?\"];\n  if ((tem = ua.match(/version\\/(\\d+)/i)) != null) {\n    M.splice(1, 1, tem[1]);\n  }\n  return {\n    name: M[0],\n    version: M[1]\n  };\n}\n\nexport default DefaultScene;\n","/**\n * Class implementing ILoadingScreen interface from Babylon\n *  https://doc.babylonjs.com/typedoc/interfaces/babylon.iloadingscreen\n *\n * @param {String} text : Sets the text to display while loading\n * @param {String} backgroundColor : Sets the color to use for the background\n */\nfunction LoadingScreen(text = \"Loading...\", backgroundColor = \"black\") {\n  // init the loader\n  this.loadingUIText = text;\n  this.loadingUIBackgroundColor = backgroundColor;\n}\n\n/**\n * Function called to display the loading screen\n */\nLoadingScreen.prototype.displayLoadingUI = function () {\n  document.getElementById(\"loading-scene\").style.display = \"block\";\n};\n\n/**\n * Function called to hide the loading screen\n */\nLoadingScreen.prototype.hideLoadingUI = function () {\n  document.getElementById(\"loading-scene\").style.display = \"none\";\n};\n\nexport default LoadingScreen;\n","import { Maybe } from \"monet\";\n/**\n * Material cache for each scene.\n *\n * Each material is associated with a scene therefore we must have a cache per scene.\n *\n * TODO: to similar with mesh cache, therefore there is possibility of abstraction\n *\n */\nclass MaterialCache {\n  constructor() {\n    if (instance) return instance;\n    instance = this;\n    this.materialCacheBySceneId = {};\n    this.count = 0;\n  }\n\n  static getInstance() {\n    return new MaterialCache();\n  }\n\n  hasKey(key, scene) {\n    const sceneId = scene._uid;\n    return Maybe.fromNull(this.materialCacheBySceneId[sceneId])\n      .flatMap(materialCache => ofNull(materialCache[key]))\n      .cata(\n        () => false,\n        () => true\n      );\n  }\n\n  put(key, scene, material) {\n    const sceneId = scene._uid;\n    if (!(sceneId in this.materialCacheBySceneId)) {\n      this.materialCacheBySceneId[sceneId] = {};\n    }\n    this.materialCacheBySceneId[sceneId][key] = material;\n    return this;\n  }\n\n  get(key, scene) {\n    const sceneId = scene._uid;\n    return Maybe.fromNull(this.materialCacheBySceneId[sceneId])\n      .flatMap(materialCache => ofNull(materialCache[key]))\n      .map(material => {\n        this.count++;\n        return material;\n      });\n  }\n\n  del(scene) {\n    const sceneId = scene._uid;\n    if (sceneId in this.materialCacheBySceneId) {\n      delete this.materialCacheBySceneId[sceneId];\n    }\n  }\n}\n\nconst ofNull = x => Maybe.fromNull(x);\n// private instance\nlet instance = null;\nexport default MaterialCache;\n","import { Maybe } from \"monet\";\n/**\n * Mesh cache for each scene.\n *\n * Each mesh is associated with a scene therefore we must have a cache per scene.\n *\n */\nclass MeshCache {\n  constructor() {\n    if (instance) return instance;\n    instance = this;\n    this.meshCacheBySceneId = {};\n    this.count = 0;\n  }\n\n  static getInstance() {\n    return new MeshCache();\n  }\n\n  hasKey(key, scene) {\n    const sceneId = scene._uid;\n    return Maybe.fromNull(this.meshCacheBySceneId[sceneId])\n      .flatMap(meshCache => ofNull(meshCache[key]))\n      .cata(\n        () => false,\n        () => true\n      );\n  }\n\n  put(key, scene, mesh) {\n    const sceneId = scene._uid;\n    if (!(sceneId in this.meshCacheBySceneId)) {\n      this.meshCacheBySceneId[sceneId] = {};\n    }\n    this.meshCacheBySceneId[sceneId][key] = mesh;\n    mesh.setEnabled(false);\n    return this;\n  }\n\n  get(key, scene) {\n    const sceneId = scene._uid;\n    return Maybe.fromNull(this.meshCacheBySceneId[sceneId])\n      .flatMap(meshCache => ofNull(meshCache[key]))\n      .map(mesh => {\n        console.log(\n          \"#Mesh: Found Mesh in cache, retrieving copy number\",\n          this.count\n        );\n        const cloneMesh = mesh.clone(`${key}${this.count++}`);\n        console.log(\"#Mesh:\", cloneMesh);\n        cloneMesh.setEnabled(true);\n        return cloneMesh;\n      })\n      .orNull();\n  }\n\n  del(scene) {\n    const sceneId = scene._uid;\n    if (sceneId in this.meshCacheBySceneId) {\n      delete this.meshCacheBySceneId[sceneId];\n    }\n  }\n}\n\nconst ofNull = x => Maybe.fromNull(x);\n// private instance\nlet instance = null;\nexport default MeshCache;\n","import MeshCache from \"./MeshCache\";\nimport {\n  AssetsManager,\n  Quaternion,\n  Vector3,\n  VertexBuffer\n} from \"@babylonjs/core\";\nimport { ASSETS_TYPES } from \"../Utils/AssetsTypesFactory\";\nimport \"@babylonjs/loaders\";\n\nclass MeshLoader {\n  constructor(scene) {\n    this.scene = scene;\n  }\n\n  static of(scene) {\n    return new MeshLoader(scene);\n  }\n\n  load = (meshName, mapFunction = MeshLoader.transformMesh) =>\n    new Promise((re, rej) => {\n      const meshCache = MeshCache.getInstance();\n      if (meshCache.hasKey(meshName, this.scene)) {\n        console.log(`Found Mesh ${meshName} in cache for scene ${this.scene}`);\n        re(meshCache.get(meshName, this.scene));\n      } else {\n        console.log(\"Loading mesh....\");\n        const assetsManager = new AssetsManager(this.scene);\n        const meshTask = assetsManager.addMeshTask(\"\", \"\", MESH_URL, meshName);\n        meshTask.onSuccess = task => {\n          console.log(\"Load Success\", meshName);\n          const mesh = task.loadedMeshes[0];\n          mesh.name = meshName;\n          mesh.rotationQuaternion = Quaternion.Identity();\n          mesh.position = Vector3.Zero();\n          meshCache.put(meshName, this.scene, mesh);\n        };\n        meshTask.onError = (task, message, exception) => {\n          console.log(\"Load error =>\", message);\n          rej({\n            message,\n            exception,\n            assetName: meshName,\n            assetType: ASSETS_TYPES.Mesh\n          });\n        };\n        assetsManager.onFinish = task => {\n          console.log(\"Load finish \");\n          const meshParam = meshCache.get(meshName, this.scene);\n          if (meshParam !== null) re(mapFunction(meshParam));\n        };\n        assetsManager.load();\n      }\n    });\n\n  static getMeshUrl = src => `${MESH_URL}${src}`;\n  /**\n   * Side effect function\n   */\n  static transformMesh(mesh) {\n    const theta = Math.PI / 2;\n    const positions = mesh.getVerticesData(VertexBuffer.PositionKind);\n    const normals = mesh.getVerticesData(VertexBuffer.NormalKind);\n    const newPos = new Float32Array(positions.length);\n    const newNormals = new Float32Array(positions.length);\n    const cos = Math.cos(theta);\n    const sin = Math.sin(theta);\n    const numberOfVertices = positions.length / 3;\n    for (let i = 0; i < numberOfVertices; i++) {\n      newPos[i * 3] = positions[i * 3];\n      newPos[i * 3 + 1] =\n        positions[i * 3 + 1] * cos - positions[i * 3 + 2] * sin;\n      newPos[i * 3 + 2] =\n        positions[i * 3 + 1] * sin - positions[i * 3 + 2] * cos;\n      newNormals[i * 3] = normals[i * 3];\n      newNormals[i * 3 + 1] =\n        normals[i * 3 + 1] * cos - normals[i * 3 + 2] * sin;\n      newNormals[i * 3 + 2] =\n        normals[i * 3 + 1] * sin - normals[i * 3 + 2] * cos;\n    }\n    mesh.setVerticesData(VertexBuffer.PositionKind, newPos, true);\n    mesh.setVerticesData(VertexBuffer.NormalKind, newNormals, true);\n    return mesh;\n  }\n}\n\nconst MESH_URL = `/static/meshes/`;\nexport default MeshLoader;\n","import { MasterDB } from \"mov-fe-lib-core\";\nimport Constants from \"./Constants\";\n\nclass SceneServerUtils {\n  static retrieveScene = (\n    sceneName,\n    successCallback = DEFAULT_SUCCESS,\n    failCallback = DEFAULT_FAILURE(\"retrieving scene\")\n  ) => {\n    MasterDB.cloudFunction(\n      Constants.CLOUD_FUNCTION_NAME,\n      \"retrieveScene\",\n      sceneName,\n      data => successFailIf(data, successCallback, failCallback)\n    );\n  };\n}\n\nconst DEFAULT_FAILURE = failureLocation => data => {};\n\nconst DEFAULT_SUCCESS = data => {};\n\nconst successFailIf = (data, successCallback, failCallback) => {\n  if (data.success) {\n    successCallback(data);\n  } else {\n    failCallback(data);\n  }\n};\nexport default SceneServerUtils;\n","/**\n * Inspired by https://en.wikipedia.org/wiki/Algorithms_for_calculating_variance\n * Hope it works, didn't found good lib in js for this.\n */\n\nexport default class Statistics {\n  constructor() {\n    this._count = 0;\n    this._mean = 0;\n    this._M2 = 0;\n  }\n\n  update(x) {\n    this._count += 1;\n    const delta = x - this._mean;\n    this._mean += delta / this._count;\n    const delta2 = x - this._mean;\n    this._M2 += delta * delta2;\n    return this;\n  }\n\n  get count() {\n    return this._count;\n  }\n\n  get mean() {\n    if (this._count < 2) {\n      return Number.NaN;\n    }\n    return this._mean;\n  }\n\n  get variance() {\n    if (this._count < 2) {\n      return Number.NaN;\n    }\n    return this._M2 / this._count;\n  }\n\n  get sampleVar() {\n    if (this._count < 2) {\n      return Number.NaN;\n    }\n    return this._M2 / (this._count - 1);\n  }\n\n  isOutlier(x, sigmas = 3) {\n    const zScore = (x - this.mean) / Math.sqrt(this.variance);\n    return Number.isNaN(zScore) || Math.abs(zScore) > sigmas;\n  }\n}\n","import TreeObject from \"../TreeObject/TreeObject\";\nimport TreeNode from \"../TreeObject/TreeNode\";\nimport GlobalRef from \"../NodeItem/GlobalRef\";\nimport { MasterDB } from \"mov-fe-lib-core\";\nimport Constants from \"./Constants\";\nimport GraphItem from \"../NodeItem/GraphItem\";\nimport NavigationPreviewItem from \"../NodeItem/NavigationPreviewItem\";\nimport _debounce from \"lodash/debounce\";\n\nconst CLOUD_FUNCTION_NAME = Constants.CLOUD_FUNCTION_NAME;\n\nclass TreeServerUtils {\n  constructor(sceneName, undoManager, alert = window.alert) {\n    this.sceneName = sceneName;\n    this.undoManager = undoManager;\n    this.alert = (msg, type) => alert(msg, type);\n    this.staticNodeTypes = [GraphItem.TYPE, NavigationPreviewItem.TYPE];\n  }\n\n  static ofScene(sceneName, undoManager, alert) {\n    return new TreeServerUtils(sceneName, undoManager, alert);\n  }\n\n  static undoAction = _debounce(utils => utils.lostConnection(), 500);\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                    Util functions                                    *\n   *                                                                                      */\n  //========================================================================================\n\n  getNodeFromTree = (name, objectTree) => {\n    return new TreeObject(objectTree).getNode(x => name === x.title);\n  };\n\n  getParentFromChild = (childName, objectTree) => {\n    return new TreeObject(objectTree).getParentNode(x => childName === x.title);\n  };\n\n  deleteNodeFromTreeUsingName = (name, objectTree, is2delInServer = true) => {\n    this.getNodeFromTree(name, objectTree).forEach(node => {\n      // destroy treeNode\n      TreeNode.dispose(node);\n\n      if (is2delInServer) {\n        this.deleteNodeInServer(name);\n      }\n\n      const maybeParent = this.getParentFromChild(name, objectTree);\n      maybeParent.forEach(parentNode => {\n        parentNode.children = parentNode.children.filter(x => x.title !== name);\n      });\n\n      objectTree = objectTree.filter(x => x.title !== name);\n    });\n    return objectTree;\n  };\n\n  getNodeFromTreeWithPredicate = (predicate, objectTree) => {\n    return new TreeObject(objectTree).getNode(predicate);\n  };\n\n  addNodeItem2Tree = (\n    objectTree,\n    nodeItem,\n    parentName = GlobalRef.NAME,\n    is2addInServer = true,\n    isVisible = true\n  ) => {\n    // delete if already exist\n    this.deleteNodeFromTreeUsingName(nodeItem.name, objectTree, is2addInServer);\n    const isStatic = this.staticNodeTypes.includes(nodeItem.getType());\n\n    const node2Add = TreeNode.builder()\n      .title(nodeItem.name)\n      .item(nodeItem)\n      .isVisible(isVisible)\n      .isStatic(isStatic)\n      .build();\n\n    if (parentName) {\n      const maybeParentNode = this.getNodeFromTree(parentName, objectTree);\n      maybeParentNode.forEach(parentNode => {\n        if (is2addInServer) this.addNodeItem2Server(node2Add, parentNode.title);\n        parentNode.children.push(node2Add);\n      });\n    } else {\n      objectTree.push(node2Add);\n      if (is2addInServer) this.addNodeItem2Server(node2Add, null);\n    }\n    return objectTree;\n  };\n\n  lostConnection = () => {\n    this.undoManager.undo({ is2UpdateInServer: false });\n    setImmediate(() => {\n      this.alert(\n        \"Sorry, work not saved. Please check internet connection\",\n        \"error\"\n      );\n    });\n  };\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                   Server functions                                   *\n   *                                                                                      */\n  //========================================================================================\n\n  updateNodeInServer = (name, objectTree, oldName = null) => {\n    console.log(\"updateNodeInServer!\", name, this.sceneName);\n    this.getNodeFromTree(name, objectTree).forEach(node => {\n      const parentName = this.getParentFromChild(name, objectTree)\n        .map(x => x.title)\n        .orNull();\n      MasterDB.cloudFunction(\n        CLOUD_FUNCTION_NAME,\n        \"updateNode\",\n        [TreeNode.toDict(node), parentName, oldName, this.sceneName],\n        data => {\n          console.log(\"Update node with success?\", data.success, data.error);\n        }\n      ).catch(err => {\n        console.warn(\"Update node error\", name, err);\n        TreeServerUtils.undoAction(this);\n      });\n    });\n  };\n\n  addNodeItem2Server = (treeNode, parentName) => {\n    MasterDB.cloudFunction(\n      CLOUD_FUNCTION_NAME,\n      \"addNodeItem\",\n      [TreeNode.toDict(treeNode), parentName, this.sceneName],\n      data => {\n        console.log(\"Add node with success?\", data.success);\n      }\n    ).catch(err => {\n      console.warn(\"Add node error\", treeNode.title, err);\n      TreeServerUtils.undoAction(this);\n    });\n  };\n\n  deleteNodeInServer = name => {\n    MasterDB.cloudFunction(\n      CLOUD_FUNCTION_NAME,\n      \"deleteNodeByName\",\n      [name, this.sceneName],\n      data => {\n        console.log(\"Deleted node with success?\", data.success);\n      }\n    ).catch(err => {\n      console.warn(\"Deleted node error\", name, err);\n      TreeServerUtils.undoAction(this);\n    });\n  };\n}\n\nexport default TreeServerUtils;\n","export function selectOneAction(predicateActionList, defaultAction = () => {}) {\n  return input => {\n    predicateActionList.push({ predicate: e => true, action: defaultAction });\n    for (let i = 0; i < predicateActionList.length; i++) {\n      const predicateAction = predicateActionList[i];\n      if (predicateAction.predicate(input)) {\n        predicateAction.action();\n        break;\n      }\n    }\n  };\n}\n","import i18n from \"i18next\";\nimport { initReactI18next } from \"react-i18next\";\n\n// import Backend from 'i18next-xhr-backend';\n// import LanguageDetector from 'i18next-browser-languagedetector';\n// not like to use this?\n// have a look at the Quick start guide\n// for passing in lng and translations on init\n\nimport translationEN from \"./locales/en/translation.json\";\nimport translationPT from \"./locales/pt/translation.json\";\n\n// the translations\nconst resources =\n  window.SERVER_DATA === undefined || window.SERVER_DATA.Languages === undefined\n    ? {\n        en: { translation: translationEN },\n        pt: { translation: translationPT }\n      }\n    : window.SERVER_DATA.Languages;\n\n// default language\nconst language =\n  window.SERVER_DATA === undefined || window.SERVER_DATA.Language === undefined\n    ? \"en\"\n    : window.SERVER_DATA.Language;\n\ni18n\n  // load translation using xhr -> see /public/locales (i.e. https://github.com/i18next/react-i18next/tree/master/example/react/public/locales)\n  // learn more: https://github.com/i18next/i18next-xhr-backend\n  //   .use(Backend)\n  // detect user language\n  // learn more: https://github.com/i18next/i18next-browser-languageDetector\n  //   .use(LanguageDetector)\n  // pass the i18n instance to react-i18next.\n  .use(initReactI18next)\n  // init i18next\n  // for all options read: https://www.i18next.com/overview/configuration-options\n  .init({\n    resources,\n    lng: language,\n    fallbackLng: \"en\",\n    debug: false,\n\n    interpolation: {\n      escapeValue: false // not needed for react as it escapes by default\n    }\n  });\n//   .changeLanguage(\"en\", (err, t) => {\n//     if (err) return console.log(\"something went wrong loading\", err);\n//   });\n\nexport default i18n;\n","import { createGlobalStyle } from \"styled-components\";\nimport { Style as S } from \"mov-fe-lib-core\";\n\nconst Style = createGlobalStyle`${S}`;\nexport default Style;\n","import { createMuiTheme } from \"@material-ui/core/styles\";\nimport \"fontsource-roboto\";\nimport \"fontsource-open-sans\";\n\nconst CONSTANTS = {\n  dark: {\n    borderBottom: \"1px solid #212121\",\n    textColor: \"white\",\n    background: {\n      primary: \"#424242\",\n      secondary: \"#212121\"\n    }\n  },\n  light: {\n    borderBottom: \"1px solid #ccc\",\n    textColor: \"rgba(0, 0, 0, 0.87)\",\n    background: {\n      primary: \"#e2e2e2\",\n      secondary: \"#b2b2b2\"\n    }\n  }\n};\n\nconst themeFactory = particular => ({\n  ...particular,\n  typography: {\n    fontFamily: \"Open Sans\",\n    h1: {\n      fontFamily: \"Open Sans\"\n    },\n    h2: {\n      fontFamily: \"Open Sans\"\n    },\n    h3: {\n      fontFamily: \"Open Sans\"\n    },\n    h4: {\n      fontFamily: \"Open Sans\"\n    },\n    h5: {\n      fontFamily: \"Open Sans\"\n    },\n    h6: {\n      fontFamily: \"Open Sans\"\n    },\n    body1: {\n      fontFamily: \"Roboto\"\n    }\n  },\n  cursorDefault: {\n    cursor: \"default\"\n  },\n  cursorPointer: {\n    cursor: \"pointer\"\n  }\n});\n\nconst Themes = {\n  dark: createMuiTheme(\n    themeFactory({\n      label: \"dark\",\n      textColor: CONSTANTS.dark.textColor,\n      backgroundColor:\n        \"linear-gradient(114.01deg, #212121 0%, #050505 100.43%)\",\n      bottomNavigation: { background: \"#212121\" },\n      globalStats: {\n        borderColor: \"#474747\",\n        subTextColor: \"#CDCDCD\",\n        upperTextColor: \"#E6E6E6\"\n      },\n      palette: {\n        type: \"dark\", // Switching the dark mode on, is a single property value change.\n        primary: {\n          main: \"#36b5e6\"\n        },\n        secondary: {\n          main: \"#CF6679\"\n        },\n        green: {\n          main: \"#03DAC5\"\n        },\n        background: {\n          primary: CONSTANTS.dark.background.primary,\n          secondary: CONSTANTS.dark.background.secondary\n        },\n        accent: {\n          background: \"#f5f5f9\",\n          color: \"rgba(0, 0, 0, 0.87)\",\n          border: \"#dadde9\"\n        }\n      },\n      icon: { color: \"#c6c6c6\", hoverColor: \"white\" },\n      table: { stripColor: \"#505050\" },\n      verticalBar: {\n        iconColor: \"#9e9e9e\"\n      },\n      overrides: {\n        MuiTableCell: {\n          body: {\n            color: CONSTANTS.dark.textColor\n          }\n        },\n        MuiAppBar: {\n          colorDefault: {\n            color: CONSTANTS.dark.textColor,\n            borderColor: \"black\",\n            backgroundColor: CONSTANTS.dark.background.secondary\n          },\n          colorInherit: {\n            color: CONSTANTS.dark.textColor,\n            backgroundColor: \"#353535\"\n          }\n        },\n        MuiButton: {\n          outlined: {\n            margin: \"8px\"\n          },\n          text: {\n            margin: \"8px\"\n          },\n          contained: {\n            margin: \"8px\"\n          },\n          containedPrimary: {\n            color: \"inherit\",\n            margin: \"8px\"\n          },\n          containedSecondary: {\n            color: \"inherit\",\n            margin: \"8px\"\n          }\n        },\n        MuiButtonGroup: {\n          root: {\n            margin: \"0\"\n          },\n          groupedContainedPrimary: {\n            margin: \"0\"\n          },\n          groupedOutlined: {\n            margin: \"0\"\n          },\n          groupedText: {\n            margin: \"0\"\n          }\n        },\n        MuiIconButton: {\n          root: {\n            color: \"#36b5e6\"\n          }\n        },\n        MuiListItem: {\n          button: {\n            \"&:hover\": {\n              backgroundColor: \"rgba(54,181,230, 0.15)\"\n            }\n          }\n        },\n        MuiFormControlLabel: {\n          label: {\n            color: \"rgba(255,255,255,0.8)\"\n          }\n        },\n        MuiInputBase: {\n          input: {\n            font: \"Roboto\"\n          }\n        },\n        MuiFilledInput: {\n          root: {\n            border: \"4px\"\n          },\n          underline: {\n            \"&::before\": {\n              borderRadius: \"4px\"\n            }\n          }\n        }\n      }\n    })\n  ),\n  light: createMuiTheme(\n    themeFactory({\n      font: {\n        Roboto: {\n          fontFamily: \"Roboto\"\n        },\n        OpenSans: {\n          fontFamily: \"Open Sans\"\n        }\n      },\n      label: \"light\",\n      textColor: CONSTANTS.light.textColor,\n      backgroundColor:\n        \"linear-gradient(122.19deg, #FFFFFF 2.58%, #FFFFFF 76.23%)\", // it was white before\n      bottomNavigation: { background: \"#c3c3c3\" },\n      icon: { color: \"#757575\", hoverColor: \"black\" },\n      table: { stripColor: \"whitesmoke\" },\n      globalStats: {\n        borderColor: \"#E6E6E6\",\n        subTextColor: \"#717171\",\n        upperTextColor: \"#474747\"\n      },\n      palette: {\n        primary: {\n          main: \"#007197\"\n        },\n        secondary: {\n          main: \"#BE2424\"\n        },\n        green: {\n          main: \"#03DAC5\"\n        },\n        background: {\n          primary: CONSTANTS.light.background.primary,\n          secondary: CONSTANTS.light.background.secondary\n        },\n        accent: {\n          background: \"whitesmoke\",\n          color: CONSTANTS.light.textColor,\n          border: \"darkgray\"\n        }\n      },\n      verticalBar: {\n        iconColor: \"#616161\"\n      },\n      overrides: {\n        MuiTableCell: {\n          body: {\n            color: CONSTANTS.light.textColor\n          }\n        },\n        MuiAppBar: {\n          colorDefault: {\n            color: CONSTANTS.light.textColor,\n            borderColor: CONSTANTS.light.borderBottom,\n            backgroundColor: CONSTANTS.light.background.secondary\n          },\n          colorInherit: {\n            color: CONSTANTS.light.textColor,\n            backgroundColor: \"#d2d2d2\"\n          }\n        },\n        MuiButton: {\n          outlined: {\n            margin: \"8px\"\n          },\n          text: {\n            margin: \"8px\"\n          },\n          contained: {\n            margin: \"8px\"\n          },\n          containedPrimary: {\n            color: \"white\",\n            margin: \"8px\"\n          },\n          containedSecondary: {\n            color: \"white\",\n            margin: \"8px\"\n          }\n        },\n        MuiButtonGroup: {\n          root: {\n            margin: \"0\"\n          },\n          groupedContainedPrimary: {\n            margin: \"0\"\n          },\n          groupedOutlined: {\n            margin: \"0\"\n          },\n          groupedText: {\n            margin: \"0\"\n          }\n        },\n        MuiIconButton: {\n          root: {\n            color: \"#007197\"\n          }\n        },\n        MuiListItem: {\n          button: {\n            \"&:hover\": {\n              backgroundColor: \"rgba(0,113,151, 0.15)\"\n            }\n          }\n        },\n        MuiFormControlLabel: {\n          label: {\n            color: \"rgba(0,0,0,0.8)\"\n          }\n        },\n        MuiInputBase: {\n          input: {\n            font: \"Roboto\"\n          }\n        },\n        MuiFilledInput: {\n          root: {\n            border: \"4px\"\n          },\n          underline: {\n            \"&::before\": {\n              borderRadius: \"4px\"\n            }\n          }\n        },\n        MuiPaper: {\n          root: {\n            color: \"#272727\",\n            backgroundColor: CONSTANTS.light.background.primary\n          }\n        },\n        MuiTableRow: {\n          head: {\n            \"& th\": {\n              backgroundColor: CONSTANTS.light.background.primary,\n              borderBottom: CONSTANTS.light.borderBottom\n            }\n          },\n          root: {\n            \"& td\": {\n              borderBottom: CONSTANTS.light.borderBottom\n            }\n          }\n        }\n      }\n    })\n  )\n};\n\nThemes.getTheme = () => {\n  const theme = window.localStorage.getItem(\"movai.theme\"); // dark or light\n  return theme ? theme : \"dark\";\n};\n\nThemes.setTheme = value => {\n  window.localStorage.setItem(\"movai.theme\", value);\n};\n\nexport default Themes;\n","module.exports = require(\"@babel/runtime/helpers/esm/assertThisInitialized\");","module.exports = require(\"@babel/runtime/helpers/esm/asyncToGenerator\");","module.exports = require(\"@babel/runtime/helpers/esm/classCallCheck\");","module.exports = require(\"@babel/runtime/helpers/esm/classPrivateFieldGet\");","module.exports = require(\"@babel/runtime/helpers/esm/createClass\");","module.exports = require(\"@babel/runtime/helpers/esm/defineProperty\");","module.exports = require(\"@babel/runtime/helpers/esm/extends\");","module.exports = require(\"@babel/runtime/helpers/esm/get\");","module.exports = require(\"@babel/runtime/helpers/esm/getPrototypeOf\");","module.exports = require(\"@babel/runtime/helpers/esm/inherits\");","module.exports = require(\"@babel/runtime/helpers/esm/objectWithoutProperties\");","module.exports = require(\"@babel/runtime/helpers/esm/possibleConstructorReturn\");","module.exports = require(\"@babel/runtime/helpers/esm/slicedToArray\");","module.exports = require(\"@babel/runtime/helpers/esm/taggedTemplateLiteral\");","module.exports = require(\"@babel/runtime/helpers/esm/toArray\");","module.exports = require(\"@babel/runtime/helpers/esm/toConsumableArray\");","module.exports = require(\"@babel/runtime/helpers/esm/typeof\");","module.exports = require(\"@babel/runtime/regenerator\");","module.exports = require(\"@babylonjs/core\");","module.exports = require(\"@babylonjs/core/Debug/debugLayer\");","module.exports = require(\"@babylonjs/core/Maths/math\");","module.exports = require(\"@babylonjs/gui\");","module.exports = require(\"@babylonjs/gui/2D\");","module.exports = require(\"@babylonjs/inspector\");","module.exports = require(\"@babylonjs/loaders\");","module.exports = require(\"@date-io/date-fns\");","module.exports = require(\"@material-ui/core\");","module.exports = require(\"@material-ui/core/Avatar\");","module.exports = require(\"@material-ui/core/Backdrop\");","module.exports = require(\"@material-ui/core/Box\");","module.exports = require(\"@material-ui/core/Breadcrumbs\");","module.exports = require(\"@material-ui/core/Button\");","module.exports = require(\"@material-ui/core/Checkbox\");","module.exports = require(\"@material-ui/core/Chip\");","module.exports = require(\"@material-ui/core/CircularProgress\");","module.exports = require(\"@material-ui/core/Collapse\");","module.exports = require(\"@material-ui/core/Divider\");","module.exports = require(\"@material-ui/core/Drawer\");","module.exports = require(\"@material-ui/core/FormControl\");","module.exports = require(\"@material-ui/core/FormControlLabel\");","module.exports = require(\"@material-ui/core/FormHelperText\");","module.exports = require(\"@material-ui/core/Grid\");","module.exports = require(\"@material-ui/core/IconButton\");","module.exports = require(\"@material-ui/core/Input\");","module.exports = require(\"@material-ui/core/InputAdornment\");","module.exports = require(\"@material-ui/core/InputBase\");","module.exports = require(\"@material-ui/core/InputLabel\");","module.exports = require(\"@material-ui/core/List\");","module.exports = require(\"@material-ui/core/ListItemText\");","module.exports = require(\"@material-ui/core/Menu\");","module.exports = require(\"@material-ui/core/MenuItem\");","module.exports = require(\"@material-ui/core/Paper\");","module.exports = require(\"@material-ui/core/Select\");","module.exports = require(\"@material-ui/core/Switch\");","module.exports = require(\"@material-ui/core/Tab\");","module.exports = require(\"@material-ui/core/TableCell\");","module.exports = require(\"@material-ui/core/Tabs\");","module.exports = require(\"@material-ui/core/TextField\");","module.exports = require(\"@material-ui/core/Typography\");","module.exports = require(\"@material-ui/core/colors\");","module.exports = require(\"@material-ui/core/styles\");","module.exports = require(\"@material-ui/core/styles/colorManipulator\");","module.exports = require(\"@material-ui/core/utils\");","module.exports = require(\"@material-ui/icons/Add\");","module.exports = require(\"@material-ui/icons/AddBox\");","module.exports = require(\"@material-ui/icons/ArrowDownward\");","module.exports = require(\"@material-ui/icons/Chat\");","module.exports = require(\"@material-ui/icons/Check\");","module.exports = require(\"@material-ui/icons/ChevronLeft\");","module.exports = require(\"@material-ui/icons/ChevronRight\");","module.exports = require(\"@material-ui/icons/Clear\");","module.exports = require(\"@material-ui/icons/Close\");","module.exports = require(\"@material-ui/icons/DeleteOutline\");","module.exports = require(\"@material-ui/icons/Edit\");","module.exports = require(\"@material-ui/icons/ExpandMore\");","module.exports = require(\"@material-ui/icons/FilterList\");","module.exports = require(\"@material-ui/icons/FirstPage\");","module.exports = require(\"@material-ui/icons/Label\");","module.exports = require(\"@material-ui/icons/LastPage\");","module.exports = require(\"@material-ui/icons/NavigateNext\");","module.exports = require(\"@material-ui/icons/Remove\");","module.exports = require(\"@material-ui/icons/SaveAlt\");","module.exports = require(\"@material-ui/icons/Schedule\");","module.exports = require(\"@material-ui/icons/Search\");","module.exports = require(\"@material-ui/icons/Settings\");","module.exports = require(\"@material-ui/icons/Today\");","module.exports = require(\"@material-ui/icons/ViewColumn\");","module.exports = require(\"@material-ui/icons/ViewModule\");","module.exports = require(\"@material-ui/icons/Warning\");","module.exports = require(\"@material-ui/lab/Alert\");","module.exports = require(\"@material-ui/pickers\");","module.exports = require(\"@material-ui/styles\");","module.exports = require(\"clsx\");","module.exports = require(\"earcut\");","module.exports = require(\"fontsource-open-sans\");","module.exports = require(\"fontsource-roboto\");","module.exports = require(\"i18next\");","module.exports = require(\"jwt-decode\");","module.exports = require(\"lodash.isequal\");","module.exports = require(\"lodash/capitalize\");","module.exports = require(\"lodash/cloneDeep\");","module.exports = require(\"lodash/debounce\");","module.exports = require(\"lodash/get\");","module.exports = require(\"lodash/isEmpty\");","module.exports = require(\"lodash/isEqual\");","module.exports = require(\"lodash/set\");","module.exports = require(\"lodash/uniqBy\");","module.exports = require(\"material-icons/css/material-icons.css\");","module.exports = require(\"material-table\");","module.exports = require(\"monet\");","module.exports = require(\"mov-fe-lib-core\");","module.exports = require(\"prop-types\");","module.exports = require(\"react\");","module.exports = require(\"react-dom\");","module.exports = require(\"react-i18next\");","module.exports = require(\"react-resize-detector\");","module.exports = require(\"react-virtualized\");","module.exports = require(\"react-virtualized-tree\");","module.exports = require(\"react-virtualized-tree/lib/main.css\");","module.exports = require(\"react-virtualized/styles.css\");","module.exports = require(\"roslib\");","module.exports = require(\"setimmediate\");","module.exports = require(\"styled-components\");"],"sourceRoot":""}