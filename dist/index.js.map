{"version":3,"sources":["webpack://MovaiReact/webpack/universalModuleDefinition","webpack://MovaiReact/webpack/bootstrap","webpack://MovaiReact/./index.js","webpack://MovaiReact/./src/Components/Logs/Logs.css","webpack://MovaiReact/./src/Components/Snackbar/Snackbar.css","webpack://MovaiReact/./node_modules/css-loader/dist/runtime/api.js","webpack://MovaiReact/./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack://MovaiReact/./src/Components/Breadcrumb.js","webpack://MovaiReact/./src/Components/Button.js","webpack://MovaiReact/./src/Components/Collapse.js","webpack://MovaiReact/./src/Components/ContextMenu.js","webpack://MovaiReact/./src/Components/Drawer.js","webpack://MovaiReact/./src/Components/HOCs/withAuthentication.js","webpack://MovaiReact/./src/Components/HOCs/withOfflineValidation.js","webpack://MovaiReact/./src/Components/LoginForm/LoginForm.js","webpack://MovaiReact/./src/Components/LoginForm/movai_red.svg","webpack://MovaiReact/./src/Components/Logs/Logs.css?4c9f","webpack://MovaiReact/./src/Components/Logs/Logs.js","webpack://MovaiReact/./src/Components/Logs/LogsFilterBar/FiltersIcon/FiltersIcon.js","webpack://MovaiReact/./src/Components/Logs/LogsFilterBar/LogsFilterBar.js","webpack://MovaiReact/./src/Components/Logs/LogsTable/LogsTable.js","webpack://MovaiReact/./src/Components/Logs/utils/Utils.js","webpack://MovaiReact/./src/Components/Modal/AbstractModal.js","webpack://MovaiReact/./src/Components/Modal/ConfirmAlertModal.js","webpack://MovaiReact/./src/Components/Modal/RobotLogModal.js","webpack://MovaiReact/./src/Components/Modal/SelectScopeModal.js","webpack://MovaiReact/./src/Components/ProfileMenu.js","webpack://MovaiReact/./src/Components/SearchInput.js","webpack://MovaiReact/./src/Components/Select.js","webpack://MovaiReact/./src/Components/Snackbar/Alert/Alert.js","webpack://MovaiReact/./src/Components/Snackbar/Alert/svg-icons/CreateSVGIcon.js","webpack://MovaiReact/./src/Components/Snackbar/Alert/svg-icons/svgIcons.js","webpack://MovaiReact/./src/Components/Snackbar/Snackbar.css?c276","webpack://MovaiReact/./src/Components/Snackbar/Snackbar.js","webpack://MovaiReact/./src/Components/Table.js","webpack://MovaiReact/./src/Components/Tabs.js","webpack://MovaiReact/./src/Components/Text.js","webpack://MovaiReact/./src/Components/Toggle.js","webpack://MovaiReact/./src/Components/Tree/BasicVirtualizedTree.js","webpack://MovaiReact/./src/Components/Tree/TreeSearch.js","webpack://MovaiReact/./src/Components/VerticalBar.js","webpack://MovaiReact/./src/Components/Viewer/Actions/Action.js","webpack://MovaiReact/./src/Components/Viewer/Actions/AddKeyPointAction.js","webpack://MovaiReact/./src/Components/Viewer/Actions/AddMapAction.js","webpack://MovaiReact/./src/Components/Viewer/Actions/AddMeshAction.js","webpack://MovaiReact/./src/Components/Viewer/Actions/BoxRegionAction.js","webpack://MovaiReact/./src/Components/Viewer/Actions/DragObjectsAction.js","webpack://MovaiReact/./src/Components/Viewer/Actions/DrawGraphAction.js","webpack://MovaiReact/./src/Components/Viewer/Actions/DrawPathAction.js","webpack://MovaiReact/./src/Components/Viewer/Actions/MeasureAction.js","webpack://MovaiReact/./src/Components/Viewer/Actions/MouseKeysAction.js","webpack://MovaiReact/./src/Components/Viewer/Actions/OrbitAction.js","webpack://MovaiReact/./src/Components/Viewer/Actions/PolygonRegionAction.js","webpack://MovaiReact/./src/Components/Viewer/Actions/RobotAction.js","webpack://MovaiReact/./src/Components/Viewer/AssetsManager/AssetsManager.js","webpack://MovaiReact/./src/Components/Viewer/AssetsManager/MapLoader.js","webpack://MovaiReact/./src/Components/Viewer/BaseViewer/BaseViewer.js","webpack://MovaiReact/./src/Components/Viewer/Graph/Graph.js","webpack://MovaiReact/./src/Components/Viewer/MainView/MainViewActions.js","webpack://MovaiReact/./src/Components/Viewer/MainView/MainViewRetriever.js","webpack://MovaiReact/./src/Components/Viewer/MainView/MeshSelector.js","webpack://MovaiReact/./src/Components/Viewer/MainView/NodeItemFactoryMap.js","webpack://MovaiReact/./src/Components/Viewer/Math/Mat3.js","webpack://MovaiReact/./src/Components/Viewer/Math/Vec2.js","webpack://MovaiReact/./src/Components/Viewer/Math/Vec3.js","webpack://MovaiReact/./src/Components/Viewer/NodeItem/AssetNodeItem.js","webpack://MovaiReact/./src/Components/Viewer/NodeItem/Box.js","webpack://MovaiReact/./src/Components/Viewer/NodeItem/BoxRegion.js","webpack://MovaiReact/./src/Components/Viewer/NodeItem/GlobalRef.js","webpack://MovaiReact/./src/Components/Viewer/NodeItem/GraphItem.js","webpack://MovaiReact/./src/Components/Viewer/NodeItem/KeyPoint.js","webpack://MovaiReact/./src/Components/Viewer/NodeItem/Map.js","webpack://MovaiReact/./src/Components/Viewer/NodeItem/Mesh.js","webpack://MovaiReact/./src/Components/Viewer/NodeItem/NodeItem.js","webpack://MovaiReact/./src/Components/Viewer/NodeItem/Path.js","webpack://MovaiReact/./src/Components/Viewer/NodeItem/PointCloud.js","webpack://MovaiReact/./src/Components/Viewer/NodeItem/PolygonRegion.js","webpack://MovaiReact/./src/Components/Viewer/NodeItem/Robot.js","webpack://MovaiReact/./src/Components/Viewer/NodeItem/Wall.js","webpack://MovaiReact/./src/Components/Viewer/SceneViewer.js","webpack://MovaiReact/./src/Components/Viewer/TreeObject/TreeNode.js","webpack://MovaiReact/./src/Components/Viewer/TreeObject/TreeObject.js","webpack://MovaiReact/./src/Components/Viewer/Util3d/CameraBuilder.js","webpack://MovaiReact/./src/Components/Viewer/Util3d/DirectionalLightBuilder.js","webpack://MovaiReact/./src/Components/Viewer/Util3d/GizmoManagerBuilder.js","webpack://MovaiReact/./src/Components/Viewer/Util3d/GroundBuilder.js","webpack://MovaiReact/./src/Components/Viewer/Util3d/PositionalLightBuilder.js","webpack://MovaiReact/./src/Components/Viewer/Util3d/ReferentialBuilder.js","webpack://MovaiReact/./src/Components/Viewer/Util3d/SelectionPlaceHolder.js","webpack://MovaiReact/./src/Components/Viewer/Util3d/Util3d.js","webpack://MovaiReact/./src/Components/Viewer/Utils/Animator.js","webpack://MovaiReact/./src/Components/Viewer/Utils/AnnotationManager.js","webpack://MovaiReact/./src/Components/Viewer/Utils/AssetsTypesFactory.js","webpack://MovaiReact/./src/Components/Viewer/Utils/Clipboard.js","webpack://MovaiReact/./src/Components/Viewer/Utils/Constants.js","webpack://MovaiReact/./src/Components/Viewer/Utils/DefaultMouseEvents.js","webpack://MovaiReact/./src/Components/Viewer/Utils/DefaultScene.js","webpack://MovaiReact/./src/Components/Viewer/Utils/MeshCache.js","webpack://MovaiReact/./src/Components/Viewer/Utils/MeshLoader.js","webpack://MovaiReact/./src/Components/Viewer/Utils/SceneServerUtils.js","webpack://MovaiReact/./src/Components/Viewer/Utils/TreeServerUtils.js","webpack://MovaiReact/./src/Components/Viewer/Utils/Utils.js","webpack://MovaiReact/./src/styles/Style.js","webpack://MovaiReact/./src/styles/Themes.js","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/assertThisInitialized\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/asyncToGenerator\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/classCallCheck\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/classPrivateFieldGet\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/createClass\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/defineProperty\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/extends\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/get\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/getPrototypeOf\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/inherits\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/objectWithoutProperties\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/possibleConstructorReturn\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/slicedToArray\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/taggedTemplateLiteral\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/toConsumableArray\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/typeof\"","webpack://MovaiReact/external \"@babel/runtime/regenerator\"","webpack://MovaiReact/external \"@babylonjs/core\"","webpack://MovaiReact/external \"@babylonjs/core/Debug/debugLayer\"","webpack://MovaiReact/external \"@babylonjs/core/Maths/math\"","webpack://MovaiReact/external \"@babylonjs/gui/2D\"","webpack://MovaiReact/external \"@babylonjs/inspector\"","webpack://MovaiReact/external \"@babylonjs/loaders\"","webpack://MovaiReact/external \"@date-io/date-fns\"","webpack://MovaiReact/external \"@material-ui/core\"","webpack://MovaiReact/external \"@material-ui/core/Avatar\"","webpack://MovaiReact/external \"@material-ui/core/Backdrop\"","webpack://MovaiReact/external \"@material-ui/core/Box\"","webpack://MovaiReact/external \"@material-ui/core/Breadcrumbs\"","webpack://MovaiReact/external \"@material-ui/core/Button\"","webpack://MovaiReact/external \"@material-ui/core/Checkbox\"","webpack://MovaiReact/external \"@material-ui/core/Chip\"","webpack://MovaiReact/external \"@material-ui/core/CircularProgress\"","webpack://MovaiReact/external \"@material-ui/core/Collapse\"","webpack://MovaiReact/external \"@material-ui/core/Divider\"","webpack://MovaiReact/external \"@material-ui/core/Drawer\"","webpack://MovaiReact/external \"@material-ui/core/FormControl\"","webpack://MovaiReact/external \"@material-ui/core/FormControlLabel\"","webpack://MovaiReact/external \"@material-ui/core/FormHelperText\"","webpack://MovaiReact/external \"@material-ui/core/Grid\"","webpack://MovaiReact/external \"@material-ui/core/IconButton\"","webpack://MovaiReact/external \"@material-ui/core/Input\"","webpack://MovaiReact/external \"@material-ui/core/InputAdornment\"","webpack://MovaiReact/external \"@material-ui/core/InputBase\"","webpack://MovaiReact/external \"@material-ui/core/InputLabel\"","webpack://MovaiReact/external \"@material-ui/core/List\"","webpack://MovaiReact/external \"@material-ui/core/ListItemText\"","webpack://MovaiReact/external \"@material-ui/core/Menu\"","webpack://MovaiReact/external \"@material-ui/core/MenuItem\"","webpack://MovaiReact/external \"@material-ui/core/Paper\"","webpack://MovaiReact/external \"@material-ui/core/Select\"","webpack://MovaiReact/external \"@material-ui/core/Switch\"","webpack://MovaiReact/external \"@material-ui/core/Tab\"","webpack://MovaiReact/external \"@material-ui/core/TableCell\"","webpack://MovaiReact/external \"@material-ui/core/Tabs\"","webpack://MovaiReact/external \"@material-ui/core/TextField\"","webpack://MovaiReact/external \"@material-ui/core/Typography\"","webpack://MovaiReact/external \"@material-ui/core/colors\"","webpack://MovaiReact/external \"@material-ui/core/styles\"","webpack://MovaiReact/external \"@material-ui/core/styles/colorManipulator\"","webpack://MovaiReact/external \"@material-ui/core/utils\"","webpack://MovaiReact/external \"@material-ui/icons/Add\"","webpack://MovaiReact/external \"@material-ui/icons/AddBox\"","webpack://MovaiReact/external \"@material-ui/icons/ArrowDownward\"","webpack://MovaiReact/external \"@material-ui/icons/Chat\"","webpack://MovaiReact/external \"@material-ui/icons/Check\"","webpack://MovaiReact/external \"@material-ui/icons/ChevronLeft\"","webpack://MovaiReact/external \"@material-ui/icons/ChevronRight\"","webpack://MovaiReact/external \"@material-ui/icons/Clear\"","webpack://MovaiReact/external \"@material-ui/icons/Close\"","webpack://MovaiReact/external \"@material-ui/icons/DeleteOutline\"","webpack://MovaiReact/external \"@material-ui/icons/Edit\"","webpack://MovaiReact/external \"@material-ui/icons/ExpandMore\"","webpack://MovaiReact/external \"@material-ui/icons/FilterList\"","webpack://MovaiReact/external \"@material-ui/icons/FirstPage\"","webpack://MovaiReact/external \"@material-ui/icons/Label\"","webpack://MovaiReact/external \"@material-ui/icons/LastPage\"","webpack://MovaiReact/external \"@material-ui/icons/NavigateNext\"","webpack://MovaiReact/external \"@material-ui/icons/Remove\"","webpack://MovaiReact/external \"@material-ui/icons/SaveAlt\"","webpack://MovaiReact/external \"@material-ui/icons/Schedule\"","webpack://MovaiReact/external \"@material-ui/icons/Search\"","webpack://MovaiReact/external \"@material-ui/icons/Settings\"","webpack://MovaiReact/external \"@material-ui/icons/Today\"","webpack://MovaiReact/external \"@material-ui/icons/ViewColumn\"","webpack://MovaiReact/external \"@material-ui/icons/ViewModule\"","webpack://MovaiReact/external \"@material-ui/icons/Warning\"","webpack://MovaiReact/external \"@material-ui/lab/Alert\"","webpack://MovaiReact/external \"@material-ui/pickers\"","webpack://MovaiReact/external \"@material-ui/styles\"","webpack://MovaiReact/external \"clsx\"","webpack://MovaiReact/external \"earcut\"","webpack://MovaiReact/external \"fontsource-open-sans\"","webpack://MovaiReact/external \"fontsource-roboto\"","webpack://MovaiReact/external \"jwt-decode\"","webpack://MovaiReact/external \"lodash.isequal\"","webpack://MovaiReact/external \"lodash/capitalize\"","webpack://MovaiReact/external \"lodash/cloneDeep\"","webpack://MovaiReact/external \"lodash/get\"","webpack://MovaiReact/external \"lodash/isEmpty\"","webpack://MovaiReact/external \"lodash/isEqual\"","webpack://MovaiReact/external \"lodash/set\"","webpack://MovaiReact/external \"lodash/uniqBy\"","webpack://MovaiReact/external \"material-icons/css/material-icons.css\"","webpack://MovaiReact/external \"material-table\"","webpack://MovaiReact/external \"monet\"","webpack://MovaiReact/external \"mov-fe-lib-core\"","webpack://MovaiReact/external \"prop-types\"","webpack://MovaiReact/external \"react\"","webpack://MovaiReact/external \"react-dom\"","webpack://MovaiReact/external \"react-resize-detector\"","webpack://MovaiReact/external \"react-virtualized\"","webpack://MovaiReact/external \"react-virtualized-tree\"","webpack://MovaiReact/external \"react-virtualized-tree/lib/main.css\"","webpack://MovaiReact/external \"react-virtualized/styles.css\"","webpack://MovaiReact/external \"styled-components\""],"names":["useStyles","makeStyles","theme","root","marginTop","spacing","link","fontSize","fontWeight","fontFamily","cursor","textDecoration","lastLabel","Breadcrumb","props","classes","style","pathList","map","element","index","length","label","propTypes","PropTypes","array","defaultProps","console","log","Button","className","onClick","color","variant","size","startIcon","disabled","children","object","func","string","isRequired","node","bool","undefined","Collapse","React","useState","open","setOpen","useEffect","handleClickFactory","clickLambda","iconStyle","width","item","divided","ContextMenu","anchorEl","setAnchorEl","handleClick","event","currentTarget","handleClose","cloneElement","evt","Boolean","menuList","reduce","result","push","onClose","navigationList","lowerElement","backgroundColor","Drawer","anchor","ANCHOR","left","right","top","bottom","withAuthentication","Component","RECHECK_VALID_DELAY","firstRender","useRef","loggedIn","setLoggedIn","checkLogin","setCheckLogin","Authentication","now","Math","floor","Date","token","window","localStorage","getItem","exp","jwtDecode","expDelta","Error","setTimeout","error","handleLogOut","logout","handleFirstRender","current","state","alert","position","withOfflineValidation","isConnected","setConnected","showSuccessAlert","setSuccessAlert","validator","setValidator","loading","setLoading","_validator","MasterDB","offlineValidation","onOnline","onOffline","retryConnection","then","styles","padding","borderRadius","LoginForm","username","password","remember","errorMessage","capsLockOn","login","apiResponse","setState","key","capsLock","getModifierState","logo","paddingTop","defaultLogo","display","marginLeft","marginRight","formControl","target","value","checkCapsLock","sendCreds","logs","any","withStyles","withTheme","UI_TAG","tableContainer","flexGrow","minHeight","overflow","Logs","selectedRobots","levels","limit","logsData","messageRegex","selectedFromDate","selectedToDate","columns","tags","advancedMode","height","levelsList","createRef","robotsData","filter","robot","ip","setSelectedRobots","elem","isSelected","robotId","updateRobot","findIndex","id","clearTimeout","logsTimeout","getLogs","robots","Promise","all","robotState","robotStates","off","getRobotLogData","dataArrays","prevState","finalArray","dataArray","forEach","data","sort","a","b","time","robotSelected","re","rej","timeoutHandle","dynamicURL","getRequestLevels","getRequestTags","getRequestMessage","get","res","e","logModal","rowData","divElement","clientHeight","updateSelectedRobots","prevProps","_isEqual","flexDirection","updateRobotSelection","columnList","Object","keys","includes","tagText","findsUniqueKey","tagToDelete","filteredTags","tag","text","newDate","keyToChange","simpleLevelsList","advancedLevelsList","filterByFromToDates","onRowClick","name","timestamp","battery","temp","okay","dataKey","render","getJustDateFromServer","Time","getJustTimeFromServer","Level","Module","Robot","Message","button","margin","palette","primary","main","borderColor","iconActive","fade","buttonApplyFilters","background","fontStyle","dark","icon","checkbox","limitText","StyledMenu","paper","boxShadow","vertical","horizontal","FilterIcon","otherFilters","t","tooltip","title","isActive","input","flex","paddingLeft","searchText","minWidth","addTagText","toggleContainer","tagsContainer","tagsList","chip","maxWidth","filtersButton","columnsFilter","iconButton","LogsFilterBar","setTagText","handleRobotChange","arrayEvent","selectedId","getRobotSelector","paddingRight","selected","selectedNames","join","MenuProps","robotIndex","getSearchInput","handleMessageRegex","startAdornment","endAdornment","getLevels","handleLevels","labels","level","indexOf","getTags","isAdvancedMode","keyCode","handleAddTag","handleDeleteTag","getTimeFilters","DateFnsUtils","handleDateChange","getSettings","handleAdvancedMode","handleLimit","shrink","handleColumns","_get","column","ITEM_HEIGHT","ITEM_PADDING_TOP","PaperProps","maxHeight","getContentAnchorEl","number","selectToDate","arePropsEqual","nextProps","memo","flexContainer","alignItems","boxSizing","table","flip","direction","tableRow","tableRowHover","tableCell","whiteSpace","textOverflow","flexColumn","noClick","colorCoding","MuiVirtualizedTable","rowHeight","headerHeight","tableProps","getRowClassName","clsx","cellRenderer","cellData","columnIndex","numeric","headerRenderer","other","headerProps","LogsTable","INFO","WARNING","DEBUG","ERROR","CRITICAL","keyName","k","j","levelsArray","Array","isArray","toLowerCase","tagsArray","_isEmpty","message","getTimeFromServer","serverTime","toLocaleString","toLocaleDateString","toLocaleTimeString","formatLogsData","stdout","binaryIndexOf","criteria","minIndex","maxIndex","currentIndex","currentElement","comparison","fromDate","toDate","lowerIndex","upperIndex","dateList","getTime","slice","addNestedName","nestedName","newName","updateRunningNodes","treeList","runningNodesList","status","removeDeleteContainer","deleteIndex","splice","i","parentId","detectContainerLoop","flowId","flowIndex","currentFlow","card","closeButton","textColor","AbstractModal","onKeyPress","submit","onSubmit","cancel","onCancel","justifyContent","overflowY","marginBottom","hasSubmitButton","submitColor","submitText","hasCancelButton","cancelColor","cancelText","ConfirmAlertModal","breakWord","wordBreak","RobotLogModal","hasButton","alertButton","JSON","parse","replace","action","service","module","buttonText","buttonAction","getRobotAlertAction","callback","cloudFunction","renderAlertInfo","SelectScopeModal","initialData","scope","setData","selectedWorkspace","setSelectedWorkspace","selectedScopeItem","setSelectedScopeItem","workSpaceList","setWorkSpaceList","isLoading","setIsLoading","firstTime","scopeFilteredData","scopeList","Workspace","getAll","response","getAllData","changeWorkspace","workspace","dataToSet","_cloneDeep","getDocs","sortedScopeItems","scopes","ref","url","requestScopeVersions","mapObj","indexToSet","isExpanded","_set","expanded","parents","versionList","versions","index2ndLevel","deepness","confirmNodeSelection","getModalTitle","vowels","pronoun","textAlign","paddingBottom","overflowX","zIndex","nodes","menuItemSpacing","cursorDefault","profileMenuFooter","ProfileMenu","welcomeLabel","userName","extraItems","darkThemeLabel","handleToggleTheme","isDarkTheme","cursorPointer","handleLogout","logoutLabel","version","search","shape","common","white","breakpoints","up","searchIcon","pointerEvents","inputRoot","inputInput","transition","transitions","create","SearchInput","searchInput","enableTimeout","timer","handleSearch","onChange","placeholder","setSearchInput","handleChange","Select","noneOption","inputProps","options","filledSuccess","filledInfo","filledWarning","filledError","opacity","defaultIconMapping","success","svgIcons","SuccessOutlined","warning","ReportProblemOutlined","ErrorOutline","info","InfoOutlined","Alert","closeText","iconMapping","role","severity","capitalize","Close","oneOf","CreateSVGIcon","path","fill","viewBox","ReactConfirmAlert","close","closeOnClickOutside","onClickOutside","isClickOutside","overlay","removeBodyClass","removeElementReconfirm","closeOnEscape","onKeypressEscape","isKeyCodeEscape","document","addEventListener","keyboardClose","autoClose","getElementById","autoHideDuration","removeEventListener","willUnmount","customUI","dataCustomUI","closable","dom","handleClickOverlay","renderCustomUI","createElementReconfirm","properties","divTarget","body","classList","add","createElement","appendChild","unmountComponentAtNode","parentNode","removeChild","addBodyClass","remove","snackbar","tableIcons","Add","forwardRef","Check","Clear","Delete","DetailPanel","Edit","Export","Filter","FirstPage","LastPage","NextPage","PreviousPage","ResetSearch","Search","SortArrow","ThirdStateCheck","ViewColumn","Table","actions","components","localization","actionsColumnIndex","draggable","grouping","toolbar","searchFieldAlignment","paging","TabPanel","selectedTab","a11yProps","tabPanel","Tabs","setSelectedTab","newSelectedTab","tabList","tab","scrollable","component","Text","colorSwitchBase","grey","green","colorBar","colorChecked","Toggle","toggle","onToggle","hidden","switchBase","checked","track","labelPlacement","horizFlex","spaceBetween","preContainer","ellipsis","iconSpace","testArray","EXPANDED","BasicVirtualizedTree","selectedGroup","groupsEnabled","searchValue","searchValueLower","filteredNodes","ch","child","grandChild","searchFilter","rest","onClickNode","onDoubleClickNode","inlineFlex","handleExpansion","oneOfType","TreeSearch","inputRef","focus","forceUpdate","trim","isEmpty","resetValue","ListItemsTree","onKeyUp","ListItemsTreeWithTitle","ListItemsTreeWithSearch","onSearch","Children","x","container","logoArea","navigationArea","accountArea","unsetAccountAreaPadding","VerticalBar","upperElement","Action","memory","parentView","getSceneMemory","gizmoManager","attachedMesh","camera","attachControl","canvas","closeContextDial","setContextActionIndex","AddKeyPointAction","setSelectedAction","scene","ground","maybeMousePos","Util3d","getGroundPosition","mousePos","detachControl","maybeCurrent","oldMousePos","tempMesh","dispose","createKeyPoint","TEMP_KEY_POINT_NAME","random","keyPoint","Color3","setPropertiesWithName","getUndoManager","addIt","getUndoAbleAction","Maybe","none","is2addInServer","Gray","rootMesh","getRootNode","mesh","KeyPoint","ofDict","r","g","parent","localPosition","getLocalCoordFromWorld","Vec3","ofBabylon","toBabylon","setPositionWithLocalVector","Axis","Z","scale","DEFAULT_SIZE","addNodeItem2Tree","UndoManager","actionBuilder","doAction","Vector3","Zero","material","diffuseColor","updateNodeInServer","undoAction","deleteNodeFromTreeUsingName","build","MouseKeysAction","AddMapAction","mapLoader","TYPE","load","textureSrc","yamlSrc","downloadLinks","MapLoader","getMapUrl","firstTimeLoad","resolution","origin","imageSize","groundBuilder","fromNull","orSome","originPos","of","sub","rootNode","GlobalRef","inverseCoordinates","setTarget","y","z","Map","isVisible","is2sendServer","setEnabled","DefaultScene","createMeshGround","maybeNode","getNodeFromTree","orElseRun","isImport","addMap","doIt","getUndoAction","ACTIONS","orbit","getObjectTree","oldMapName","newMapName","switchMaps","AssetsManager","getInstance","getAssetsActionMap","AddMeshAction","actionMemoryClone","getIsImport","finalName","getFinalNameFromMemory","loadMesh","actionMemory","parentMesh","getParentMesh","createNormals","maybeDict","ofNull","flatMap","d","some","FromArray","rotationQuaternion","quaternion","Quaternion","Identity","StandardMaterial","emissiveColor","meshItem","Mesh","keyValueMap","renderMenus","parentObj","parentName","treeNode","MeshLoader","getMeshUrl","addMesh","dragObjects","transformMesh","addMesh2Scene","BoxRegionAction","buttons","createBoxRegion","TEMP_BOX_REGION_NAME","subtract","boxMesh","region","Red","localRegion","middlePoint","centeredRegion","boxRegionItem","BoxRegion","toArray","corners","points","DragObjectsAction","maybeSelectedMesh","pickMesh","currentMesh","dragDownMesh","orLazy","dragDownWithoutMesh","selectedMesh","groundPos","dragMoveMesh","dragMoveWithoutMesh","dragUpMesh","dragUpWithoutMesh","destroySelectionDiv","defaultAction","predicateActionList","predicate","code","getDeleteButtonAction","ctrlKey","getCopyAction","getPasteAction","selectOneAction","getMouseContextActions","setMouseContextActions","mousePosFromRoot","getPasteOnClick","pasteAction","Clipboard","paste","clickPointInWorld","ZERO","movePointInWorld","startDivPos","Vec2","addSelectedMesh","handleMeshRightClick","updateMouseVars","isSelectionPlaceHolder","addGizmo2Mesh","notifyObservers","selectMeshUpdateUI","meshSelector","MeshSelector","ofMainView","selectionPlaceHolder","SelectionPlaceHolder","selectedMeshes","meshes","highlightMeshesInScene","highlightNodesInTree","addGizmo2Name","clear","setProperties","getMouseCoordsFromRoot","mousePosRoot","handleRightClickWithoutMesh","shiftKey","createSelectionDiv","pointerX","pointerY","selector","newMousePosInWorld","v","vLocal","updateSelectionDiv","selectPlaceHolder","groundPosInWorld","bigDisplacement","addArray","arrayOfMeshes","selectObjectsInside","groundPosInGlobal","edgeIndexes","has","isOne","onDeleteNode","contextActions","getContextActions","nodeItem","copy","someMainView","getCopyFunction","copiedMesh","nodeCopyActionPairs","nodeActionPairs","maybeCopiedItems","copyAction","displacement","toGlobalCoord","absolutePosition","copiedItems","maybe","isSome","copiedMeshes","copiedNames","is2updateServer","observers","obs","updatedPointMesh","graphVertex","vertexObs","_children","m","localDisplacement","newPos","invertDisplacement","findMouseInDom","outerDiv","ID","ReactDOM","newMouse","oldMouse","op","min","minX","minY","max","maxX","maxY","clientX","clientY","cornersDiv","rayCastCorners","p","pickPoints","treeObj","TreeObject","insideBox","flatten","isItemInsideBox","insideBoxDragAbleMeshes","pickInfo","pick","hit","floorPoint","pickedPoint","orNull","polygon","type","getType","GraphItem","isMeshInsideBox","planeP","isPointInsideBox","epsilon","theta","n","vi","vii","acos","dot","abs","PI","SelectDiv","border","DrawGraphAction","mousePosConsumer","maybeMesh","isConnectableMesh","possibleMesh","Green","onPointerDownLine","resetPreview","cata","pickedMesh","firstMousePos","onPointerMoveLine","escapeAction","deletePreviewMeshes","firstClickedMesh","previewMeshes","lambda","Path","keyPoints","_","meshI","meshJ","belongsToPath","nameI","nameJ","clickedMesh","belongs2SamePath","getUndoAbleLineEdge","edgeMeshes","createEdge","deleteEdge","visibility","edgeEmbedding","getEdgeMesh","Blue","Constants","RADIUS","isPickable","createGraphItemIfNone","getGraph","graphNode","graphItem","addEdge","delEdge","DrawPathAction","mouseCurve","getUndoAbleClickAction","getDrawPathContextAction","curve","localCurve","pointAverage","centeredCurve","w","pathItem","localPath","ans","TEMP_PATH_NAME","getUndoAbleEnterAction","kps","finalKps","createCurve","setContextActions","reducedKps","keyPointMeshes","addEdgesInKeyPoints","deleteEdgeInKeyPoints","pathName","graph","MeasureAction","currentMousePos","ruler","MeshBuilder","CreateLines","updatable","addTextGUI","calculateDistance","start","end","startVec","endVec","toFixed","advancedTexture","removeControl","AdvancedDynamicTexture","CreateFullscreenUI","TextBlock","addControl","OrbitAction","PolygonRegionAction","TEMP_POLYGON_REGION_NAME","getDrawPolygonContextAction","Yellow","pointAverageVec3","polygonRegionItem","PolygonRegion","localPolygon","createPolygonRegion","RobotAction","robotAnimatorFactory","getDefaultAnimator","addRobot","meshTree","createRobotMeshTree","robotTree","dict","builder","assetName","cloudPoint","PointCloud","loadRobot","ROBOT_MESH_NAME","createRobotFromMesh","getRobot","animate","getCloudPoint","assets","assetsActionMap","retrieveAssetsFromDb","observersBySceneId","resolve","subscribe","Scope","Name","RobotName","getRobotNameUpdate","getRobotNameSub","finishSub","File","FileLabel","getMapUpdater","getMapSubscriber","getMeshUpdater","getMeshSubscriber","place","finishInitialSubscribers","subs","afterLoad","f","delAsset","dataGetter","after","getMapFileData","fileName","actionMap","del","filename","split","set","loader","ASSETS_TYPES","addAsset","maybeGet","getMeshFileData","instance","observer","sceneId","_uid","assetKey","asset","AssetsTypesFactory","signalObservers","values","every","localRobot","orientation","getter","deleteRobot","prop","obj","cachedMap","fetch","parseYaml","image","yamlTxt","actionDict","Number","parseFloat","s","getImageSize","src","reject","img","Image","onload","naturalWidth","naturalHeight","FLEX_STYLE","BaseViewer","antialias","engineOptions","adaptToDeviceRatio","sceneOptions","onRender","onSceneReady","is2render","sceneFactory","reactCanvas","loaded","setLoaded","setScene","setSize","setUpScene","engine","Scene","isReady","onReadyObservable","addOnce","onResize","getEngine","resize","renderScene","nScene","runRenderLoop","Engine","newScene","preserveDrawingBuffer","stencil","Graph","edgeKey","addVertex","edgeProps","ijKey","jiKey","neighbors","getNeighbors","delVertex","getEdge","measure","drawGraph","drawRegion","addKeyPoint","drawBoxRegion","drawPath","MainViewRetriever","mainView","serverScene","errors","importSceneRecursive","importDefaultScene","nodeDict","nodeItemClass","NODE_ITEM_FACTORY_MAP","isAsset","importAsset","assetType","assetActionMap","retrievedAction","cause","solution","arrayTree","sortArrayTree","importNodeItem","send2server","placeHolderInstance","meshSelectionSet","Set","isSubtractive","filteredSet","Box","Wall","Mat3","v1","v2","v3","constructor","mat3","vec3","u","prodVec","dotVec","mat","equals","babylonMat","arrayMat","Matrix","GetAsMatrix3x3","vec","acc","sqrt","fromArray","biLambda","fold","initial","vector3","l","operation","binary","initialValue","MAX_VALUE","isNaN","isFinite","babylon","identityMatrix","e1","e2","e3","pivot","normalize","AssetNodeItem","NodeItem","orUndefined","createBox","mapDict2Mesh","schema","jsonSchema","lower","scaleX","scaleY","uiSchema","worldCorners","getGlobalCoordinates","form","oldForm","toForm","oldDimensions","dimensions","isEqual","ofFormDimensions","newLowerPositionInWorldCoordinates","newLocalDimensions","localLowerPosition","getLocalCoordFromGlobal","notify","update","createBoxRegionMesh","backFaceCulling","VISIBILITY","babylonQuaternion","createPlaceHolderKeyPoints","FACES","boxRegion","X","Y","h","boxRegionMesh","positions","faces","meshFromPositionAndFaces","createNewMeshFromOldUsingNewBox","newBox","average","rotMat3","getRotationMatrix","scaleVec3","scaling","averageInParentCoord","mul","newMesh","childrenCopy","c","getKeyPointObserverFunction","boxRegionTreeNode","corner","createSphere","Observable","THETA","ROS_ORIGIN","cos","sin","rosOrigin","getRosOrigin","globalRefMesh","referentialBuilder","NAME","boxParams","CreateBox","rotationMatrix","pos","getUniqueId","graphItemInstances","isDisposed","graphPlaceHolder","getGraphPlaceHolder","graphFormMapper","getDefaultFormMapper","edgeMesh","getUndoDeleteEdge","getToFormEdge","meshByEdgeId","vertexGenerator","vertices","getVertices","edges","getEdges","getVertex","vertexData","String","ids","key2Edge","edgeData","edge","belongsSrcMesh","belongsTrgMesh","weight","belongsSrc","exportBelongToData","belongsTrg","doMeshesBelong2SamePath","ofForm","annotations","setAnnotations2Form","lodashGet","delVertexRecursively","iMesh","jMesh","iIndex","jIndex","hasEdge","buildVertex","buildEdge","getVertexIdFromMesh","maybeV","newPosition","iData","jData","nodeTree","vertex","vertexMesh","vertexIndex","vId","maybeVertex","VertexData","addObs2VertexMesh","vData","delVertexFromMesh","getVertexMeshObs","updateVertexPosition","iVertexD","jVertexD","EdgeData","doVerticesBelong2SamePath","edgeGlobalCoord","getGlobalCoord","getEdgeMouseCtxActions","addObserver2EdgeMesh","addOnClickEdge","getEdgeObs","getOnClickEdge","getUndoDelLineEdge","edgeVertexD","isMeshBelong2Path","iParentNodeItem","jParentNodeItem","vertexCounter","MIN_VALUE","getMeshesFromEdgeData","dataEdge","importFeatures","vertexPosition","radius","sphere","createTubeFromPoints","One","ind","globalPos","vertexDataI","vertexDataJ","CreatePolyhedron","custom","TRIANGULAR_ANTIPRISM","convertToFlatShadedMesh","axis","category","face","toDict","oldName","q","RotationYawPitchRoll","rotation","isEnabled","toHexString","quat","FromHexString","isForceUpdate","rootItem","copyDict","getUID","newPosArray","copiedNodeItem","childrenWithDelVertex","childMesh","someDict","babylonColor","AnnotationManager","getAnnotations","annotation","_capitalize","names","splinePath","selectedKeyPointIndex","newSchema","selectedKeyPoint","formPosition","newPosInWorldCoordinates","localPos","updatePathEdgeWithForm","first","last","edgeIds","copiedPath","kp","isPathOnGraph","updateGraph","spline","getSplineFromCurve","getMaterialFromColor","splineObj2redis","path2return","point","getMeshOnClick","getMeshObserver","newPoints","keyPointUpdateFunction","defaultKeyPointUpdate","oldMesh","oldKeyPoints","keyPointMesh","copyPosition","getUndoDeleteKeyPoint","copyPoints","createNewMeshFromOldUsingNewPoints","onAddNewPointKeyPointUpdate","getUndoAddKeyPointInBetween","nextIndex","numberOfPoints","oldPoints","concat","specialIndex","oldKpMeshes","isTopologyChange","keypoints","kChild","getConeMesh","getKeyPointActions","pathTreeNode","deleteKeyPoint","addKeyPointInBetween","curveMesh","getSphereMesh","cone","createOrientedCone","Utils","pointCloudSubscribe","Parameter","front_lidar","Value","updatePointCloud","colors","applyToMesh","unsubscribe","pointCloudMesh","disableLighting","pointsCloud","pointSize","positiveMod","mod","createExtrudedPolygonMesh","stitchingBoundaries","computeOrientation","modi","reverseOrientation","triangleIndex","polygonRegionMesh","lowerTriangulation","triangulatePolygon","upperTriangulation","stitchTriangulation","polygonTreeNode","getAbsolutePosition","polygonMesh","oldTimeInMillis","robotAnimator","dt","requestAnimationFrameId","requestAnimationFrame","timeSinceLastUpdate","isOnline","speed","qSpeed","newOri","db","Database","cancelAnimationFrame","newRobotTf","lastPosition","lastOrientation","newOrientation","dtReciprocal","TIME_2_BE_OFFLINE_IN_SEC","toOffline","toOnline","thetaX","translate","boundScale","boundingSphere","getBoundingInfo","center","tfSphereMesh","ONES","addRotation","spherePlaceHolder","createRobotMeshTreeRecursive","robotMesh","RobotBuilder","vel","rotate","Space","LOCAL","tf","updateRobotMeshTree","robot2Animate","biasedCoin","someNaNOrInfinite","setOnOffLine","_name","_meshTree","_parentMesh","_scene","_isPickable","_id","_keyValueMap","_assetName","variables","baseAxis","localWall","createWallMesh","centeredWall","tangent","normal","wallMesh","newWall","locallyTranslate","wallNode","wall","SceneViewer","sceneMemory","tree","objectTree","undoManager","TreeServerUtils","ofScene","sceneName","newObjectTree","focusObject","isPanned","_absolutePosition","clone","cameraSpeed","targetPos","beta","isRotated","DefaultMouseEvents","onPointerDown","onPointerUp","onPointerMove","mouseLocationText","afterLoading","SceneServerUtils","retrieveScene","errorList","importScene","assetManager","getAssets","loadAssets","retrieveSceneFromServer","setCameraToTarget","getRenderingCanvas","addCanvasEventListeners","createMouseLocationText","createCamera","light","createLight","createGizmo","highlightLayer","layer","HighlightLayer","lastHlMeshes","predicateAction","propVar","loadScene","getNode","events","resetErrorList","createScene","getErrorSolutionList","masterProps","augmentProps","TreeNode","TreeNodeBuilder","_title","_item","_expanded","_isVisible","getNodeRecursive","answer","getParentNodeRecursive","foundChild","compareTreesRecursive","treeA","treeB","nodeEquality","nodeA","nodeB","mapRecursive","newTree","nod","mappedNode","forEachRecursive","expand","filterTree","childPredicate","nodeMap","CameraBuilder","_sphericalCoordinates","_target","sphericalCoordinates","ArcRotateCamera","DirectionalLightBuilder","_direction","_intensity","intensity","DirectionalLight","GizmoManagerBuilder","_isPosition","_isRotation","_isBoundingBox","_isScale","_usePointerToAttachGizmos","GizmoManager","positionGizmoEnabled","rotationGizmoEnabled","boundingBoxGizmoEnabled","scaleGizmoEnabled","usePointerToAttachGizmos","GroundBuilder","_width","_height","_textureSrc","CreateGround","WORLD","ambientTexture","Texture","uScale","vScale","PositionalLightBuilder","_position","PointLight","ReferentialBuilder","_boxParams","_size","axisX","axisY","axisZ","localOrigin","angleByMeshName","_uniqBy","getAngleFromMesh","placeHolderPosition","createPlaceHolderIn","getShaderMaterial","that","HEIGHT","getPlaceHolderObs","placeHolder","filteredMeshes","dTheta","handleMotion","VERTEX","frag","FRAG","Effect","ShadersStore","shaderMaterial","ShaderMaterial","fragment","attributes","uniforms","T","onBindObservable","setFloat","atan2","handleTranslation","handleRotation","baseCoord","toVec2","eITheta","rV","prod","finalV","finalTheta","meshParent","meshParentPos","meshParentRotMat","meshParentScaling","childPos","positionInWorld","forwardCoordinates","worldPosition","withTranslation","inverseScaling","localRotationMatrix","maybeQuaternion","toRotationMatrix","ofBabylonMatrix","normals","getVerticesData","VertexBuffer","NormalKind","PositionKind","lines","scaleInPlace","normalLines","CreateLineSystem","uArray","Dot","indices","triangulation","earcut","len","i3","vec3Poly","arrayOfPoints","randomDigits","arrayOfVector3","transform","segments","surface","orthogonalBasisFromVector","sign","Cross","zeroIndex","uIndex","diameter","CreateSphere","box","CreateTube","sideOrientation","DOUBLESIDE","cap","CAP_ALL","distance","orientations","nbPoints","closed","Curve3","CreateCatmullRomSpline","getPoints","splineObj","getCurveOrientations","Animator","next","doWhile","requestAnimeId","stop","play","AnimatorBuilder","_state","_next","_end","someAreEmpty","retrieveAnnotationsFromDb","delAnnotation","addAnnotation","Annotation","names2delete","annotationType","annotationObj","Type","Label","getSocketAnimator","SCENE_CONTEXT","COPY_PASTE_UID","Clip","write","read","POINTS_DENSITY","CLOUD_FUNCTION_NAME","mousePosClick","mousePosMove","currentLocal","setMouseLocationTxt","panCamera","vBabylon","getBabylonCoordinates","animateCamera","mouseButtonActions","filterActions","initialState","nextState","vdt","RotationGizmo","UtilityLayerRenderer","xGizmo","dragBehavior","detach","scaleRatio","yGizmo","COLLISION_RADIUS","cameraBuilder","inertia","collisionRadius","panningInertia","checkCollisions","panningSensibility","lowerRadiusLimit","directionalLightBuilder","wireframe","clearColor","Black","collisionsEnabled","MeshCache","meshCacheBySceneId","count","meshCache","cloneMesh","meshName","mapFunction","hasKey","assetsManager","meshTask","addMeshTask","MESH_URL","onSuccess","task","loadedMeshes","put","onError","exception","onFinish","successCallback","DEFAULT_SUCCESS","failCallback","DEFAULT_FAILURE","successFailIf","failureLocation","childName","getParentNode","is2delInServer","deleteNodeInServer","maybeParent","getParentFromChild","node2Add","maybeParentNode","addNodeItem2Server","Style","createGlobalStyle","S","CONSTANTS","borderBottom","secondary","themeFactory","particular","typography","h1","h2","h3","h4","h5","h6","body1","Themes","createMuiTheme","bottomNavigation","globalStats","subTextColor","upperTextColor","accent","hoverColor","stripColor","overrides","MuiTableCell","MuiAppBar","colorDefault","colorInherit","MuiButton","outlined","contained","containedPrimary","containedSecondary","MuiButtonGroup","groupedContainedPrimary","groupedOutlined","groupedText","MuiIconButton","MuiListItem","MuiFormControlLabel","MuiInputBase","font","MuiFilledInput","underline","Roboto","OpenSans","MuiPaper","MuiTableRow","head","getTheme","setTheme","setItem"],"mappings":"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,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,8BAA8B;;AAE9B;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA,CAAC;;;AAGD;AACA;AACA;AACA,qDAAqD,cAAc;AACnE;AACA,C;;;;;;;;;;;;AC7Fa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA,uDAAuD;;AAEvD;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;;AAEA;AACA;;AAEA,iBAAiB,wBAAwB;AACzC;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,iBAAiB,iBAAiB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,gBAAgB,KAAwC,GAAG,sBAAiB,GAAG,SAAI;;AAEnF;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA,qEAAqE,qBAAqB,aAAa;;AAEvG;;AAEA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA,yDAAyD;AACzD,GAAG;;AAEH;;;AAGA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AA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QAAP,GAAkB,YAAM;AACtB,MAAM3+D,KAAK,GAAG+F,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,aAA5B,CAAd,CADsB,CACoC;;AAC1D,SAAOjG,KAAK,GAAGA,KAAH,GAAW,MAAvB;AACD,CAHD;;AAKAw8D,MAAM,CAACoC,QAAP,GAAkB,UAAAt1D,KAAK,EAAI;AACzBvD,QAAM,CAACC,YAAP,CAAoB64D,OAApB,CAA4B,aAA5B,EAA2Cv1D,KAA3C;AACD,CAFD;;AAIekzD,qEAAf,E;;;;;;;;;;;AC/UA,6E;;;;;;;;;;;ACAA,wE;;;;;;;;;;;ACAA,sE;;;;;;;;;;;ACAA,4E;;;;;;;;;;;ACAA,mE;;;;;;;;;;;ACAA,sE;;;;;;;;;;;ACAA,+D;;;;;;;;;;;ACAA,2D;;;;;;;;;;;ACAA,sE;;;;;;;;;;;ACAA,gE;;;;;;;;;;;ACAA,+E;;;;;;;;;;;ACAA,iF;;;;;;;;;;;ACAA,qE;;;;;;;;;;;ACAA,6E;;;;;;;;;;;ACAA,yE;;;;;;;;;;;ACAA,8D;;;;;;;;;;;ACAA,uD;;;;;;;;;;;ACAA,4C;;;;;;;;;;;ACAA,6D;;;;;;;;;;;ACAA,uD;;;;;;;;;;;ACAA,8C;;;;;;;;;;;ACAA,iD;;;;;;;;;;;ACAA,+C;;;;;;;;;;;ACAA,8C;;;;;;;;;;;ACAA,8C;;;;;;;;;;;ACAA,qD;;;;;;;;;;;ACAA,uD;;;;;;;;;;;ACAA,kD;;;;;;;;;;;ACAA,0D;;;;;;;;;;;ACAA,qD;;;;;;;;;;;ACAA,uD;;;;;;;;;;;ACAA,mD;;;;;;;;;;;ACAA,+D;;;;;;;;;;;ACAA,uD;;;;;;;;;;;ACAA,sD;;;;;;;;;;;ACAA,qD;;;;;;;;;;;ACAA,0D;;;;;;;;;;;ACAA,+D;;;;;;;;;;;ACAA,6D;;;;;;;;;;;ACAA,mD;;;;;;;;;;;ACAA,yD;;;;;;;;;;;ACAA,oD;;;;;;;;;;;ACAA,6D;;;;;;;;;;;ACAA,wD;;;;;;;;;;;ACAA,yD;;;;;;;;;;;ACAA,mD;;;;;;;;;;;ACAA,2D;;;;;;;;;;;ACAA,mD;;;;;;;;;;;ACAA,uD;;;;;;;;;;;ACAA,oD;;;;;;;;;;;ACAA,qD;;;;;;;;;;;ACAA,qD;;;;;;;;;;;ACAA,kD;;;;;;;;;;;ACAA,wD;;;;;;;;;;;ACAA,mD;;;;;;;;;;;ACAA,wD;;;;;;;;;;;ACAA,yD;;;;;;;;;;;ACAA,qD;;;;;;;;;;;ACAA,qD;;;;;;;;;;;ACAA,sE;;;;;;;;;;;ACAA,oD;;;;;;;;;;;ACAA,mD;;;;;;;;;;;ACAA,sD;;;;;;;;;;;ACAA,6D;;;;;;;;;;;ACAA,oD;;;;;;;;;;;ACAA,qD;;;;;;;;;;;ACAA,2D;;;;;;;;;;;ACAA,4D;;;;;;;;;;;ACAA,qD;;;;;;;;;;;ACAA,qD;;;;;;;;;;;ACAA,6D;;;;;;;;;;;ACAA,oD;;;;;;;;;;;ACAA,0D;;;;;;;;;;;ACAA,0D;;;;;;;;;;;ACAA,yD;;;;;;;;;;;ACAA,qD;;;;;;;;;;;ACAA,wD;;;;;;;;;;;ACAA,4D;;;;;;;;;;;ACAA,sD;;;;;;;;;;;ACAA,uD;;;;;;;;;;;ACAA,wD;;;;;;;;;;;ACAA,sD;;;;;;;;;;;ACAA,wD;;;;;;;;;;;ACAA,qD;;;;;;;;;;;ACAA,0D;;;;;;;;;;;ACAA,0D;;;;;;;;;;;ACAA,uD;;;;;;;;;;;ACAA,mD;;;;;;;;;;;ACAA,iD;;;;;;;;;;;ACAA,gD;;;;;;;;;;;ACAA,iC;;;;;;;;;;;ACAA,mC;;;;;;;;;;;ACAA,iD;;;;;;;;;;;ACAA,8C;;;;;;;;;;;ACAA,uC;;;;;;;;;;;ACAA,2C;;;;;;;;;;;ACAA,8C;;;;;;;;;;;ACAA,6C;;;;;;;;;;;ACAA,uC;;;;;;;;;;;ACAA,2C;;;;;;;;;;;ACAA,2C;;;;;;;;;;;ACAA,uC;;;;;;;;;;;ACAA,0C;;;;;;;;;;;ACAA,kE;;;;;;;;;;;ACAA,2C;;;;;;;;;;;ACAA,kC;;;;;;;;;;;ACAA,4C;;;;;;;;;;;ACAA,uC;;;;;;;;;;;ACAA,kC;;;;;;;;;;;ACAA,sC;;;;;;;;;;;ACAA,kD;;;;;;;;;;;ACAA,8C;;;;;;;;;;;ACAA,mD;;;;;;;;;;;ACAA,gE;;;;;;;;;;;ACAA,yD;;;;;;;;;;;ACAA,8C","file":"dist/index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"MovaiReact\"] = factory();\n\telse\n\t\troot[\"MovaiReact\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./index.js\");\n","import Button from \"./src/Components/Button\";\nimport AbstractModal from \"./src/Components/Modal/AbstractModal\";\nimport ConfirmAlertModal from \"./src/Components/Modal/ConfirmAlertModal\";\nimport RobotLogModal from \"./src/Components/Modal/RobotLogModal\";\nimport Drawer from \"./src/Components/Drawer\";\nimport Collapse from \"./src/Components/Collapse\";\nimport VerticalBar from \"./src/Components/VerticalBar\";\nimport ContextMenu from \"./src/Components/ContextMenu\";\nimport Table from \"./src/Components/Table\";\nimport Tabs from \"./src/Components/Tabs\";\nimport Text from \"./src/Components/Text\";\nimport Toggle from \"./src/Components/Toggle\";\nimport SearchInput from \"./src/Components/SearchInput\";\nimport Breadcrumb from \"./src/Components/Breadcrumb\";\nimport SceneViewer from \"./src/Components/Viewer/SceneViewer\";\nimport Select from \"./src/Components/Select\";\nimport { snackbar } from \"./src/Components/Snackbar/Snackbar\";\nimport Themes from \"./src/styles/Themes\";\nimport Style from \"./src/styles/Style\";\nimport Logs from \"./src/Components/Logs/Logs\";\nimport LoginForm from \"./src/Components/LoginForm/LoginForm\";\nimport ProfileMenu from \"./src/Components/ProfileMenu\";\nimport FilterIcon from \"./src/Components/Logs/LogsFilterBar/FiltersIcon/FiltersIcon\";\nimport SelectScopeModal from \"./src/Components/Modal/SelectScopeModal\";\n// import HOCs\nimport withOfflineValidation from \"./src/Components/HOCs/withOfflineValidation\";\nimport withAuthentication from \"./src/Components/HOCs/withAuthentication\";\n\nexport {\n  withOfflineValidation,\n  withAuthentication,\n  Button,\n  AbstractModal,\n  ConfirmAlertModal,\n  SelectScopeModal,\n  RobotLogModal,\n  Drawer,\n  Collapse,\n  VerticalBar,\n  ContextMenu,\n  Table,\n  Tabs,\n  Text,\n  Themes,\n  Toggle,\n  SearchInput,\n  Breadcrumb,\n  SceneViewer,\n  Select,\n  snackbar,\n  Style,\n  Logs,\n  FilterIcon,\n  LoginForm,\n  ProfileMenu\n};\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".flow-action {\\n  display: flex;\\n  background: transparent;\\n  width: 35px;\\n  height: 35px;\\n  margin: 6px;\\n  border-radius: 50%;\\n  justify-content: center;\\n  align-items: center;\\n  transition: background-color 0.5s;\\n}\\n\\n.flow-action:hover {\\n  background: rgba(11, 106, 138, 0.2);\\n  cursor: pointer;\\n}\\n\\n.robot-logs-container {\\n  display: flex;\\n  flex-direction: column;\\n  height: 1px;\\n  flex-grow: 1;\\n}\\n\\n.tree-grow-overflow {\\n  flex-grow: 0.5;\\n  overflow-y: auto;\\n  min-height: 0;\\n  height: 100%;\\n}\\n\\n.logs-grow-overflow {\\n  flex-grow: 1;\\n  overflow-y: auto;\\n  min-height: 0;\\n  height: 100%;\\n}\\n\\n.saving {\\n  /* font-size: 40px; */\\n  margin: 0;\\n}\\n\\n.saving span {\\n  font-size: 15px;\\n  animation-name: blink;\\n  animation-duration: 1.4s;\\n  animation-iteration-count: infinite;\\n  animation-fill-mode: both;\\n}\\n\\n.saving span:nth-child(2) {\\n  animation-delay: 0.2s;\\n}\\n\\n.saving span:nth-child(3) {\\n  animation-delay: 0.4s;\\n}\\n\\n@keyframes blink {\\n  0% {\\n    opacity: 0.2;\\n  }\\n  20% {\\n    opacity: 1;\\n  }\\n  100% {\\n    opacity: 0.2;\\n  }\\n}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"body.react-confirm-alert-body-element {\\n  overflow: hidden;\\n}\\n\\n.react-confirm-alert-blur {\\n  filter: url(#gaussian-blur);\\n  filter: blur(2px);\\n  -webkit-filter: blur(2px);\\n}\\n\\n.react-confirm-alert-overlay {\\n  position: fixed;\\n  top: calc(100vh - 300px);\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n  z-index: 99;\\n  display: -webkit-flex;\\n  display: -moz-flex;\\n  display: -ms-flex;\\n  display: -o-flex;\\n  display: flex;\\n  justify-content: flex-start;\\n  -ms-align-items: center;\\n  align-items: flex-end;\\n  opacity: 1;\\n}\\n\\n.react-confirm-alert-body {\\n  width: 400px;\\n  padding: 30px;\\n}\\n\\n.react-confirm-alert-svg {\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n}\\n\\n.react-confirm-alert-body > h1 {\\n  margin-top: 0;\\n}\\n\\n.react-confirm-alert-body > h3 {\\n  margin: 0;\\n  font-size: 16px;\\n}\\n\\n.react-confirm-alert-button-group {\\n  display: -webkit-flex;\\n  display: -moz-flex;\\n  display: -ms-flex;\\n  display: -o-flex;\\n  display: flex;\\n  justify-content: flex-start;\\n  margin-top: 20px;\\n}\\n\\n.react-confirm-alert-button-group > button {\\n  outline: none;\\n  background: #333;\\n  border: none;\\n  display: inline-block;\\n  padding: 6px 18px;\\n  color: #eee;\\n  margin-right: 10px;\\n  border-radius: 5px;\\n  font-size: 12px;\\n  cursor: pointer;\\n}\\n\\n.icon-container {\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n}\\n\\n.icon-container:hover {\\n  cursor: pointer;\\n}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\n// eslint-disable-next-line func-names\nmodule.exports = function (useSourceMap) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item, useSourceMap);\n\n      if (item[2]) {\n        return \"@media \".concat(item[2], \" {\").concat(content, \"}\");\n      }\n\n      return content;\n    }).join('');\n  }; // import a list of modules into the list\n  // eslint-disable-next-line func-names\n\n\n  list.i = function (modules, mediaQuery, dedupe) {\n    if (typeof modules === 'string') {\n      // eslint-disable-next-line no-param-reassign\n      modules = [[null, modules, '']];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var i = 0; i < this.length; i++) {\n        // eslint-disable-next-line prefer-destructuring\n        var id = this[i][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _i = 0; _i < modules.length; _i++) {\n      var item = [].concat(modules[_i]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        // eslint-disable-next-line no-continue\n        continue;\n      }\n\n      if (mediaQuery) {\n        if (!item[2]) {\n          item[2] = mediaQuery;\n        } else {\n          item[2] = \"\".concat(mediaQuery, \" and \").concat(item[2]);\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n  var content = item[1] || ''; // eslint-disable-next-line prefer-destructuring\n\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (useSourceMap && typeof btoa === 'function') {\n    var sourceMapping = toComment(cssMapping);\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot || '').concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n  }\n\n  return [content].join('\\n');\n} // Adapted from convert-source-map (MIT)\n\n\nfunction toComment(sourceMap) {\n  // eslint-disable-next-line no-undef\n  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n  var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n  return \"/*# \".concat(data, \" */\");\n}","\"use strict\";\n\nvar isOldIE = function isOldIE() {\n  var memo;\n  return function memorize() {\n    if (typeof memo === 'undefined') {\n      // Test for IE <= 9 as proposed by Browserhacks\n      // @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n      // Tests for existence of standard globals is to allow style-loader\n      // to operate correctly into non-standard environments\n      // @see https://github.com/webpack-contrib/style-loader/issues/177\n      memo = Boolean(window && document && document.all && !window.atob);\n    }\n\n    return memo;\n  };\n}();\n\nvar getTarget = function getTarget() {\n  var memo = {};\n  return function memorize(target) {\n    if (typeof memo[target] === 'undefined') {\n      var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n      if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n        try {\n          // This will throw an exception if access to iframe is blocked\n          // due to cross-origin restrictions\n          styleTarget = styleTarget.contentDocument.head;\n        } catch (e) {\n          // istanbul ignore next\n          styleTarget = null;\n        }\n      }\n\n      memo[target] = styleTarget;\n    }\n\n    return memo[target];\n  };\n}();\n\nvar stylesInDom = [];\n\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n\n  for (var i = 0; i < stylesInDom.length; i++) {\n    if (stylesInDom[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var index = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3]\n    };\n\n    if (index !== -1) {\n      stylesInDom[index].references++;\n      stylesInDom[index].updater(obj);\n    } else {\n      stylesInDom.push({\n        identifier: identifier,\n        updater: addStyle(obj, options),\n        references: 1\n      });\n    }\n\n    identifiers.push(identifier);\n  }\n\n  return identifiers;\n}\n\nfunction insertStyleElement(options) {\n  var style = document.createElement('style');\n  var attributes = options.attributes || {};\n\n  if (typeof attributes.nonce === 'undefined') {\n    var nonce = typeof __webpack_nonce__ !== 'undefined' ? __webpack_nonce__ : null;\n\n    if (nonce) {\n      attributes.nonce = nonce;\n    }\n  }\n\n  Object.keys(attributes).forEach(function (key) {\n    style.setAttribute(key, attributes[key]);\n  });\n\n  if (typeof options.insert === 'function') {\n    options.insert(style);\n  } else {\n    var target = getTarget(options.insert || 'head');\n\n    if (!target) {\n      throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n    }\n\n    target.appendChild(style);\n  }\n\n  return style;\n}\n\nfunction removeStyleElement(style) {\n  // istanbul ignore if\n  if (style.parentNode === null) {\n    return false;\n  }\n\n  style.parentNode.removeChild(style);\n}\n/* istanbul ignore next  */\n\n\nvar replaceText = function replaceText() {\n  var textStore = [];\n  return function replace(index, replacement) {\n    textStore[index] = replacement;\n    return textStore.filter(Boolean).join('\\n');\n  };\n}();\n\nfunction applyToSingletonTag(style, index, remove, obj) {\n  var css = remove ? '' : obj.media ? \"@media \".concat(obj.media, \" {\").concat(obj.css, \"}\") : obj.css; // For old IE\n\n  /* istanbul ignore if  */\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = replaceText(index, css);\n  } else {\n    var cssNode = document.createTextNode(css);\n    var childNodes = style.childNodes;\n\n    if (childNodes[index]) {\n      style.removeChild(childNodes[index]);\n    }\n\n    if (childNodes.length) {\n      style.insertBefore(cssNode, childNodes[index]);\n    } else {\n      style.appendChild(cssNode);\n    }\n  }\n}\n\nfunction applyToTag(style, options, obj) {\n  var css = obj.css;\n  var media = obj.media;\n  var sourceMap = obj.sourceMap;\n\n  if (media) {\n    style.setAttribute('media', media);\n  } else {\n    style.removeAttribute('media');\n  }\n\n  if (sourceMap && typeof btoa !== 'undefined') {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    while (style.firstChild) {\n      style.removeChild(style.firstChild);\n    }\n\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar singleton = null;\nvar singletonCounter = 0;\n\nfunction addStyle(obj, options) {\n  var style;\n  var update;\n  var remove;\n\n  if (options.singleton) {\n    var styleIndex = singletonCounter++;\n    style = singleton || (singleton = insertStyleElement(options));\n    update = applyToSingletonTag.bind(null, style, styleIndex, false);\n    remove = applyToSingletonTag.bind(null, style, styleIndex, true);\n  } else {\n    style = insertStyleElement(options);\n    update = applyToTag.bind(null, style, options);\n\n    remove = function remove() {\n      removeStyleElement(style);\n    };\n  }\n\n  update(obj);\n  return function updateStyle(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {\n        return;\n      }\n\n      update(obj = newObj);\n    } else {\n      remove();\n    }\n  };\n}\n\nmodule.exports = function (list, options) {\n  options = options || {}; // Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n  // tags it will allow on a page\n\n  if (!options.singleton && typeof options.singleton !== 'boolean') {\n    options.singleton = isOldIE();\n  }\n\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n\n    if (Object.prototype.toString.call(newList) !== '[object Array]') {\n      return;\n    }\n\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDom[index].references--;\n    }\n\n    var newLastIdentifiers = modulesToDom(newList, options);\n\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n\n      var _index = getIndexByIdentifier(_identifier);\n\n      if (stylesInDom[_index].references === 0) {\n        stylesInDom[_index].updater();\n\n        stylesInDom.splice(_index, 1);\n      }\n    }\n\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Breadcrumbs from \"@material-ui/core/Breadcrumbs\";\nimport NavigateNextIcon from \"@material-ui/icons/NavigateNext\";\nimport Typography from \"@material-ui/core/Typography\";\nimport PropTypes from \"prop-types\";\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    \"& > * + *\": {\n      marginTop: theme.spacing(2)\n    }\n  },\n  link: {\n    fontSize: \"24px\",\n    fontWeight: 800,\n    fontFamily: \"Open Sans\",\n    \"&:hover\": {\n      cursor: \"pointer\",\n      textDecoration: \"underline\"\n    }\n  },\n  lastLabel: {\n    fontSize: \"24px\",\n    fontWeight: 800,\n    fontFamily: \"Open Sans\"\n  }\n}));\n\nconst Breadcrumb = props => {\n  const classes = useStyles();\n  return (\n    <div className={classes.root}>\n      <Breadcrumbs\n        separator={<NavigateNextIcon fontSize=\"small\" />}\n        aria-label=\"breadcrumb\"\n        style={props.style}\n      >\n        {props.pathList.map((element, index) => {\n          if (props.pathList.length - 1 !== index) {\n            return (\n              <Typography\n                key={index}\n                color=\"primary\"\n                variant=\"inherit\"\n                className={classes.link}\n                onClick={element.function}\n              >\n                {element.label}\n              </Typography>\n            );\n          }\n        })}\n        <Typography color=\"textPrimary\" className={classes.lastLabel}>\n          {props.pathList[props.pathList.length - 1].label}\n        </Typography>\n      </Breadcrumbs>\n    </div>\n  );\n};\n\nBreadcrumb.propTypes = {\n  pathList: PropTypes.array\n};\n\nBreadcrumb.defaultProps = {\n  pathList: [\n    { label: \"Mov.ai\", function: () => console.log(\"pth1/\") },\n    { label: \"User\", function: () => console.log(\"path1/path2\") },\n    { label: \"John Doe\" }\n  ]\n};\n\nexport default Breadcrumb;\n","import React from \"react\";\nimport MaterialButton from \"@material-ui/core/Button\";\nimport PropTypes from \"prop-types\";\n\nconst Button = props => {\n  return (\n    <MaterialButton\n      className={props.className}\n      style={props.style}\n      onClick={props.onClick}\n      color={props.color}\n      variant={props.variant}\n      size={props.size}\n      startIcon={props.startIcon}\n      disabled={props.disabled}\n    >\n      {props.children}\n    </MaterialButton>\n  );\n};\n\nButton.propTypes = {\n  style: PropTypes.object,\n  onClick: PropTypes.func,\n  color: PropTypes.string,\n  variant: PropTypes.string.isRequired,\n  size: PropTypes.string,\n  startIcon: PropTypes.element,\n  children: PropTypes.node.isRequired,\n  disabled: PropTypes.bool\n};\nButton.defaultProps = {\n  style: {},\n  onClick: () => console.log(\"Click MOV.AI button\"),\n  color: \"default\", // default, inherit, primary or secondary\n  variant: \"contained\", // text, outlined, contained\n  size: \"medium\", // small, medium, large\n  startIcon: undefined,\n  children: <div></div>,\n  disabled: false\n};\n\nexport default Button;\n","import React from \"react\";\nimport ChevronRightIcon from \"@material-ui/icons/ChevronRight\";\nimport ExpandMore from \"@material-ui/icons/ExpandMore\";\nimport PropTypes from \"prop-types\";\nimport MaterialCollapse from \"@material-ui/core/Collapse\";\nimport { Divider, ListItem, List } from \"@material-ui/core\";\n\nconst Collapse = props => {\n  const [open, setOpen] = React.useState(props.open);\n\n  React.useEffect(() => {\n    if (props.open !== open) {\n      setOpen(props.open);\n    }\n  }, [props.open]);\n\n  const handleClickFactory = clickLambda => () => {\n    setOpen(!open);\n    clickLambda();\n  };\n\n  return (\n    <List>\n      <ListItem button onClick={handleClickFactory(props.onClick)}>\n        {open ? (\n          <ExpandMore style={{ ...props.iconStyle }} />\n        ) : (\n          <ChevronRightIcon style={{ ...props.iconStyle }} />\n        )}\n        <div style={{ width: \"100%\" }}>{props.item}</div>\n      </ListItem>\n      {props.divided ? <Divider /> : []}\n      <MaterialCollapse\n        className={props.className}\n        style={props.style}\n        in={open}\n      >\n        {props.children}\n      </MaterialCollapse>\n    </List>\n  );\n};\n\nCollapse.propTypes = {\n  item: PropTypes.object,\n  onClick: PropTypes.func,\n  open: PropTypes.bool,\n  divided: PropTypes.bool,\n  iconStyle: PropTypes.object\n};\n\nCollapse.defaultProps = {\n  item: <div></div>,\n  onClick: () => {},\n  open: false,\n  divided: false,\n  style: {},\n  iconStyle: {}\n};\n\nexport default Collapse;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Menu from \"@material-ui/core/Menu\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\n\nconst ContextMenu = props => {\n  const { style } = props;\n  const [anchorEl, setAnchorEl] = React.useState(null);\n\n  const handleClick = event => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  return (\n    <div style={style}>\n      {React.cloneElement(props.element, {\n        onClick: evt => {\n          if (props.element.props.onClick !== undefined) {\n            props.element.props.onClick(); // If user defined a onClick\n          }\n          handleClick(evt); // opens the contextMenu\n        }\n      })}\n      <Menu\n        id=\"simple-menu\"\n        anchorEl={anchorEl}\n        keepMounted\n        open={Boolean(anchorEl)}\n        onClose={handleClose}\n      >\n        {props.menuList.reduce((result, item, index) => {\n          if (item && typeof item !== \"function\") {\n            result.push(\n              <MenuItem\n                onClick={() => {\n                  item.onClick();\n                  if (item.onClose || item.onClose === undefined) {\n                    handleClose();\n                  }\n                }}\n                key={index}\n              >\n                {item.element}\n              </MenuItem>\n            );\n          }\n          return result;\n        }, [])}\n      </Menu>\n    </div>\n  );\n};\n\nContextMenu.propTypes = {\n  element: PropTypes.node.isRequired,\n  navigationList: PropTypes.array,\n  lowerElement: PropTypes.node.isRequired,\n  width: PropTypes.string,\n  backgroundColor: PropTypes.string\n};\nContextMenu.defaultProps = {\n  element: <div>Ahaha</div>,\n  menuList: [\n    {\n      onClick: () => console.log(\"clicked 1\"),\n      element: \"Profile\",\n      onClose: true\n    }\n  ],\n  lowerElement: <div></div>,\n  width: \"68px\",\n  backgroundColor: \"#424242\",\n  style: {}\n};\n\nexport default ContextMenu;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport MaterialDrawer from \"@material-ui/core/Drawer\";\n\nconst Drawer = props => {\n  return (\n    <MaterialDrawer\n      style={props.style}\n      anchor={props.anchor}\n      open={props.open}\n      onClose={props.onClose}\n    >\n      {props.children}\n    </MaterialDrawer>\n  );\n};\n\nDrawer.propTypes = {\n  style: PropTypes.object,\n  anchor: PropTypes.string,\n  open: PropTypes.bool,\n  children: PropTypes.object\n};\n\nDrawer.defaultProps = {\n  style: {},\n  anchor: \"left\",\n  open: false,\n  children: <div></div>\n};\n\nDrawer.ANCHOR = { left: \"left\", right: \"right\", top: \"top\", bottom: \"bottom\" };\n\nexport default Drawer;\n","import React, { useState, useEffect, useRef } from \"react\";\nimport { Modal } from \"@material-ui/core\";\nimport { Authentication } from \"mov-fe-lib-core\";\nimport LoginForm from \"../LoginForm/LoginForm\";\nimport jwtDecode from \"jwt-decode\";\n\nexport default function withAuthentication(Component) {\n  return function (props) {\n    const RECHECK_VALID_DELAY = 2000; // milliseconds\n\n    const firstRender = useRef(true);\n\n    const [loggedIn, setLoggedIn] = useState(false);\n    const [checkLogin, setCheckLogin] = useState(0);\n\n    /**\n     * check if the user is authenticated\n     */\n    useEffect(() => {\n      async function checkLogin() {\n        return await Authentication.checkLogin();\n      }\n\n      setLoggedIn(checkLogin());\n    }, []);\n\n    /**\n     * Checks if the refresh token is still valid\n     * sets loggedIn accordingly.\n     * Setting checkLogin or loggedIn will trigger execution\n     */\n    useEffect(() => {\n      const now = Math.floor(Date.now() * 0.001);\n      const token = window.localStorage.getItem(\"movai.refreshToken\");\n\n      try {\n        // decode the token and get exp value\n        const exp = jwtDecode(token).exp || now;\n\n        // check if token expiration time is still valid\n        const expDelta = exp - now;\n        if (expDelta <= 0) {\n          throw new Error(\"Token expired\");\n        }\n\n        // check again in expire time + RECHECK_VALID_DELAY\n        setTimeout(\n          () => setCheckLogin(now),\n          expDelta * 1000 + RECHECK_VALID_DELAY\n        );\n\n        setLoggedIn(true);\n      } catch (error) {\n        // token expired or no token\n        setLoggedIn(false);\n      }\n    }, [checkLogin, loggedIn]);\n\n    /**\n     * handleLogOut - log out the user\n     */\n    const handleLogOut = () => {\n      Authentication.logout();\n    };\n\n    /**\n     * handleFirstRender - If the user is not logged in and it is the first render\n     * then show the login form without the application on the background.\n     * After the first login, the login form can be showned as a modal instead.\n     */\n    const handleFirstRender = () => {\n      firstRender.current = false;\n      return <LoginForm setLoggedIn={state => setLoggedIn(state)} />;\n    };\n\n    /**\n     * renders the Login form if the user is not logged in\n     */\n    return (\n      <React.Fragment>\n        {!loggedIn && firstRender.current ? (\n          handleFirstRender()\n        ) : (\n          <React.Fragment>\n            <Component\n              handleLogOut={handleLogOut}\n              loggedIn={loggedIn}\n              {...props}\n            />\n            <Modal open={!loggedIn}>\n              <LoginForm setLoggedIn={state => setLoggedIn(state)} />\n            </Modal>\n          </React.Fragment>\n        )}\n      </React.Fragment>\n    );\n  };\n}\n","import React, { useEffect } from \"react\";\nimport { MasterDB } from \"mov-fe-lib-core\";\nimport Alert from \"@material-ui/lab/Alert\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport { makeStyles } from \"@material-ui/styles\";\nimport { Button } from \"@material-ui/core\";\n\nconst useStyles = makeStyles(theme => ({\n  alert: { position: \"absolute\", bottom: 0, width: \"100%\" }\n}));\n\nexport default function withOfflineValidation(Component) {\n  return function (props) {\n    const [isConnected, setConnected] = React.useState(true);\n    const [showSuccessAlert, setSuccessAlert] = React.useState(false);\n    const [validator, setValidator] = React.useState(null);\n    const [loading, setLoading] = React.useState(false);\n    const classes = useStyles();\n\n    /**\n     * Start offline validation\n     */\n    useEffect(() => {\n      const _validator = MasterDB.offlineValidation({ onOnline, onOffline });\n      setValidator(_validator);\n    }, []);\n\n    const onOnline = () => {\n      setConnected(true);\n      setSuccessAlert(true);\n      setTimeout(() => setSuccessAlert(false), 2000);\n    };\n\n    const onOffline = () => {\n      setConnected(false);\n    };\n\n    const retryConnection = () => {\n      setLoading(true);\n      validator.retryConnection().then(() => setLoading(false));\n    };\n\n    /**\n     * renders the Login form if the user is not logged in\n     */\n    return (\n      <React.Fragment>\n        <React.Fragment>\n          <Component {...props} />\n          {!isConnected && (\n            <Alert\n              className={classes.alert}\n              variant=\"filled\"\n              severity=\"error\"\n              action={\n                <Button color=\"inherit\" size=\"small\" onClick={retryConnection}>\n                  {loading ? (\n                    <CircularProgress\n                      size={20}\n                      color=\"inherit\"\n                    ></CircularProgress>\n                  ) : (\n                    \"RETRY\"\n                  )}\n                </Button>\n              }\n            >\n              Connection failed... You're now in offline mode, please wait to\n              reconnect.\n            </Alert>\n          )}\n          {isConnected && showSuccessAlert && (\n            <Alert\n              className={classes.alert}\n              variant=\"filled\"\n              severity=\"success\"\n            >\n              You're now online!\n            </Alert>\n          )}\n        </React.Fragment>\n      </React.Fragment>\n    );\n  };\n}\n","import React, { Component } from \"react\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Button from \"@material-ui/core/Button\";\nimport Grid from \"@material-ui/core/Grid\";\nimport defaultLogo from \"./movai_red.svg\";\nimport Paper from \"@material-ui/core/Paper\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport FormHelperText from \"@material-ui/core/FormHelperText\";\nimport Input from \"@material-ui/core/Input\";\nimport InputLabel from \"@material-ui/core/InputLabel\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport { Authentication } from \"mov-fe-lib-core\";\nimport PropTypes from \"prop-types\";\n\nconst styles = theme => ({\n  root: {\n    padding: theme.spacing(4, 4),\n    borderRadius: 10\n  }\n});\n\nclass LoginForm extends Component {\n  state = {\n    username: \"\",\n    password: \"\",\n    remember: false,\n    error: false,\n    errorMessage: \"\",\n    capsLockOn: false\n  };\n\n  sendCreds = async () => {\n    try {\n      const apiResponse = await Authentication.login(\n        this.state.username,\n        this.state.password,\n        this.state.remember\n      );\n      // If successfully logged in\n      if (!apiResponse.error) {\n        this.props.setLoggedIn(true);\n      } else {\n        // Show the error in red\n        this.setState({\n          error: true,\n          errorMessage: apiResponse.error\n        });\n      }\n    } catch (e) {\n      this.setState({\n        error: true,\n        errorMessage: e\n      });\n    }\n  };\n\n  checkCapsLock = event => {\n    if (event.key === \"CapsLock\" && this.state.capsLockOn)\n      this.setState({ capsLockOn: false });\n    else {\n      const capsLock = event.getModifierState(\"CapsLock\");\n      this.setState({ capsLockOn: capsLock });\n    }\n  };\n\n  render() {\n    const { classes, logo } = this.props;\n\n    return (\n      <Grid\n        style={{ paddingTop: \"5%\" }}\n        container\n        direction=\"column\"\n        alignItems=\"center\"\n        justify=\"space-evenly\"\n      >\n        <Paper elevation={10} className={classes.root}>\n          <Grid item>\n            <img\n              src={logo ? logo : defaultLogo}\n              className=\"center\"\n              alt=\"logo\"\n              style={{\n                display: \"block\",\n                marginLeft: \"auto\",\n                marginRight: \"auto\",\n                width: \"50%\"\n              }}\n            />\n          </Grid>\n          <Grid>\n            <Typography align=\"center\" variant=\"subtitle1\" gutterBottom>\n              <FormControl\n                className={classes.formControl}\n                error={this.state.error}\n              >\n                <InputLabel htmlFor=\"component-username-error\">\n                  Username\n                </InputLabel>\n                <Input\n                  id=\"component-username-error\"\n                  value={this.state.username}\n                  aria-describedby=\"component-username-error-text\"\n                  onChange={event =>\n                    this.setState({ username: event.target.value })\n                  }\n                />\n              </FormControl>\n            </Typography>\n          </Grid>\n          <Grid>\n            <Typography align=\"center\" variant=\"subtitle1\" gutterBottom>\n              <FormControl\n                className={classes.formControl}\n                error={this.state.error}\n              >\n                <InputLabel htmlFor=\"component-password-error\">\n                  Password\n                </InputLabel>\n                <Input\n                  id=\"component-password-error\"\n                  type=\"password\"\n                  value={this.state.password}\n                  aria-describedby=\"component-password-error-text\"\n                  onChange={event =>\n                    this.setState({ password: event.target.value })\n                  }\n                  onKeyUp={event => {\n                    this.checkCapsLock(event);\n                    if (event.key === \"Enter\") {\n                      this.sendCreds();\n                    }\n                  }}\n                />\n                {this.state.error && (\n                  <FormHelperText id=\"component-error-text\">\n                    {this.state.errorMessage}\n                  </FormHelperText>\n                )}\n                {this.state.capsLockOn && (\n                  <FormHelperText id=\"component-warning-text\">\n                    Warning: Caps lock is ON!\n                  </FormHelperText>\n                )}\n              </FormControl>\n            </Typography>\n          </Grid>\n          <Grid>\n            <Typography align=\"center\" gutterBottom>\n              <Button onClick={() => this.sendCreds()}>Login</Button>\n            </Typography>\n          </Grid>\n        </Paper>\n      </Grid>\n    );\n  }\n}\n\nLoginForm.propTypes = {\n  logs: PropTypes.any, // expects a svg element\n  setLoggedIn: PropTypes.func\n};\n\nLoginForm.defaultProps = {\n  setLoggedIn: loggedIn => console.log(loggedIn)\n};\n\nexport default withStyles(styles, { withTheme: true })(LoginForm);\n","module.exports = \"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' version='1.0' width='400.000000' height='400.000000' preserveAspectRatio='xMidYMid meet'%3E%3Crect id='backgroundrect' width='100%25' height='100%25' x='0' y='0' fill='none' stroke='none'/%3E %3Cg class='currentLayer' style=''%3E%3Ctitle%3ELayer 1%3C/title%3E%3Cg transform='translate(0,400) scale(0.10000000149011612,-0.10000000149011612) ' fill='%23d31b1b' stroke='none' id='svg_1' class='' fill-opacity='1'%3E %3Cpath d='M1770 3990 c-682 -83 -1271 -501 -1570 -1115 -103 -211 -167 -437 -191 -673 -14 -129 -6 -404 14 -522 85 -495 339 -929 729 -1242 232 -187 539 -332 836 -393 957 -199 1909 314 2272 1224 204 512 180 1116 -64 1606 -115 232 -229 387 -412 565 -296 286 -639 460 -1059 536 -106 19 -443 27 -555 14z m-998 -1105 c3 -3 -23 -48 -57 -99 -113 -172 -182 -338 -226 -546 -32 -149 -33 -448 -1 -593 31 -145 70 -258 134 -387 65 -132 64 -140 -28 -140 -66 0 -100 13 -143 53 -74 70 -71 38 -71 748 0 555 2 642 16 690 43 144 129 236 248 265 54 13 119 18 128 9z m2621 -21 c99 -34 192 -157 216 -288 14 -78 15 -1256 1 -1307 -13 -48 -82 -125 -124 -139 -55 -18 -166 -12 -166 9 0 4 25 57 55 118 195 391 215 839 55 1247 -41 105 -117 247 -176 327 -18 25 -30 49 -26 54 10 11 109 -2 165 -21z m-251 -61 c128 -170 217 -370 265 -594 13 -63 18 -129 18 -264 0 -199 -13 -285 -66 -448 -33 -101 -114 -277 -128 -277 -26 0 -31 80 -32 549 0 267 -4 495 -8 505 -6 16 -20 4 -87 -77 -43 -53 -81 -96 -84 -96 -3 -1 -16 41 -29 92 -27 106 -74 215 -132 304 -32 48 -38 66 -31 80 34 61 243 273 271 273 4 0 23 -21 43 -47z m-2206 15 c52 -39 95 -82 171 -170 l74 -88 -42 -61 c-23 -34 -54 -89 -69 -123 -35 -76 -80 -219 -80 -252 0 -13 -4 -24 -8 -24 -4 0 -43 43 -87 95 -43 52 -83 95 -87 95 -4 0 -8 -224 -9 -497 0 -492 -5 -565 -34 -565 -16 0 -94 166 -130 279 -52 159 -69 294 -62 493 8 230 47 384 147 585 56 112 154 255 174 255 7 0 26 -10 42 -22z m458 -511 l133 -157 -20 -58 c-13 -39 -19 -85 -19 -147 -1 -150 44 -260 151 -365 107 -105 214 -150 361 -150 241 0 443 162 500 399 16 69 8 222 -15 278 l-17 43 132 157 c73 87 136 159 140 161 24 9 119 -186 148 -303 11 -44 22 -104 25 -134 l4 -54 -329 -388 c-343 -405 -362 -424 -466 -455 -101 -31 -258 -12 -341 41 -48 29 -83 69 -607 691 -52 62 -94 121 -94 131 0 52 33 202 60 271 33 86 99 204 112 200 5 -2 68 -74 142 -161z m376 -444 c85 -102 167 -194 182 -204 62 -45 81 -30 292 224 76 92 142 165 146 162 13 -8 20 -110 10 -167 -27 -170 -153 -299 -324 -334 -130 -27 -257 9 -356 102 -61 57 -116 162 -125 239 -8 57 1 165 13 164 4 0 77 -84 162 -186z' id='svg_2' fill='%23d31b1b' fill-opacity='1'/%3E %3C/g%3E%3C/g%3E%3C/svg%3E\"","var api = require(\"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!./Logs.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","import React, { Component, createRef } from \"react\";\nimport LogsFilterBar from \"./LogsFilterBar/LogsFilterBar\";\nimport \"./Logs.css\";\nimport { MasterDB } from \"mov-fe-lib-core\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport RobotLogModal from \"../Modal/RobotLogModal\";\nimport {\n  getRequestLevels,\n  getRequestTags,\n  getRequestMessage,\n  filterByFromToDates,\n  findsUniqueKey,\n  getJustDateFromServer,\n  getJustTimeFromServer\n} from \"./utils/Utils\";\nimport LogsTable from \"./LogsTable/LogsTable\";\nimport _isEqual from \"lodash/isEqual\";\nimport PropTypes from \"prop-types\";\n\nconst UI_TAG = { key: 0, label: \"ui\" };\n\nconst styles = theme => ({\n  tableContainer: {\n    flexGrow: 1,\n    minHeight: 0,\n    overflow: \"hidden\"\n  }\n});\n\nclass Logs extends Component {\n  state = {\n    selectedRobots: [],\n    levels: [\"INFO\", \"ERROR\"],\n    limit: 50,\n    logsData: [],\n    messageRegex: \"\",\n    selectedFromDate: null,\n    selectedToDate: null,\n    columns: [\"Time\", \"Robot\", \"Message\"],\n    tags: this.props.advancedMode ? [] : [UI_TAG],\n    height: 0, //LogsTable height\n    levelsList: this.props.advancedMode\n      ? [\n          { value: \"INFO\", label: \"Info\" },\n          { value: \"WARNING\", label: \"Warnings\" },\n          { value: \"DEBUG\", label: \"Debug\" },\n          { value: \"ERROR\", label: \"Error\" },\n          { value: \"CRITICAL\", label: \"Critical\" }\n        ]\n      : [\n          { value: \"INFO\", label: \"Robot Status\" },\n          { value: \"ERROR\", label: \"Alerts\" }\n        ],\n    advancedMode: this.props.advancedMode\n  };\n  logsTimeout = undefined;\n  logModal = createRef();\n\n  simpleLevelsList = [\n    { value: \"INFO\", label: \"Robot Status\" },\n    { value: \"ERROR\", label: \"Alerts\" }\n  ];\n\n  advancedLevelsList = [\n    { value: \"INFO\", label: \"Info\" },\n    { value: \"WARNING\", label: \"Warnings\" },\n    { value: \"DEBUG\", label: \"Debug\" },\n    { value: \"ERROR\", label: \"Error\" },\n    { value: \"CRITICAL\", label: \"Critical\" }\n  ];\n\n  resizeHandler() {\n    const height = this.divElement.clientHeight;\n    this.setState({ height });\n  }\n\n  componentDidMount() {\n    this.updateSelectedRobots();\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (_isEqual(prevProps.robotsData, this.props.robotsData)) return;\n    this.updateSelectedRobots();\n  }\n\n  updateSelectedRobots = () => {\n    if (\n      this.props.robotsData.length &&\n      this.props.robotsData.filter(robot => robot.ip).length\n    )\n      this.setSelectedRobots(\n        this.props.robotsData.map(elem => ({ ...elem, isSelected: true }))\n      );\n  };\n\n  componentWillUnmount() {\n    if (this.logsTimeout) {\n      clearTimeout(this.logsTimeout);\n    }\n  }\n\n  // This function is responsible to check/unckeck the list of robots\n  updateRobotSelection = robotId => {\n    const selectedRobots = [...this.state.selectedRobots];\n    const updateRobot =\n      selectedRobots[selectedRobots.findIndex(elem => elem.id === robotId)];\n    updateRobot.isSelected = !updateRobot.isSelected;\n    this.setState({ selectedRobots });\n  };\n\n  setSelectedRobots = selectedRobots => {\n    clearTimeout(this.logsTimeout);\n    this.setState({ selectedRobots });\n    this.getLogs(selectedRobots);\n  };\n\n  getLogs = async robots => {\n    await Promise.all(\n      robots\n        .filter(robot => robot.robotState !== this.props.robotStates.off) // If robot is offline doesn't bother making the request\n        .filter(robot => robot.isSelected)\n        .map(robot => this.getRobotLogData(robot))\n    ).then(dataArrays => {\n      this.setState(prevState => {\n        const finalArray = dataArrays.reduce((all, dataArray) => {\n          dataArray && dataArray.forEach(data => all.push(data));\n          return all;\n        }, []);\n        this.logsTimeout = setTimeout(\n          this.getLogs,\n          3000,\n          prevState.selectedRobots\n        );\n        return { logsData: finalArray.sort((a, b) => b.time - a.time) };\n      });\n    });\n  };\n\n  getRobotLogData = robotSelected => {\n    return new Promise((re, rej) => {\n      // Failsafe timer to prevent the promise all from hanging\n      const timeoutHandle = setTimeout(() => {\n        console.error(\"MOV.AI: One of the promises reached timeout\");\n        re([]);\n      }, 2000);\n\n      if (robotSelected.ip) {\n        const dynamicURL = `http://${\n          robotSelected.ip\n        }/api/v1/logs/?${getRequestLevels(\n          this.state.levels,\n          this.state.levelsList\n        )}&limit=${this.state.limit}${getRequestTags(\n          this.state.tags\n        )}${getRequestMessage(this.state.messageRegex)}`;\n\n        MasterDB.get(dynamicURL, (res, e) => {\n          re(res?.data || []);\n          clearTimeout(timeoutHandle);\n        });\n      } else {\n        re([]);\n      }\n    }).catch(() => console.log(\"Failed getRobotLogData\"));\n  };\n\n  onRowClick = log => {\n    this.logModal.current.open(log.rowData);\n  };\n\n  render() {\n    return (\n      <div\n        style={{\n          width: \"100%\",\n          height: \"100%\",\n          display: \"flex\",\n          flexDirection: \"column\"\n        }}\n      >\n        <div\n          style={{\n            flexGrow: \"1\",\n            height: \"100%\",\n            display: \"flex\",\n            flexDirection: \"column\"\n          }}\n        >\n          <LogsFilterBar\n            selectedRobots={this.state.selectedRobots}\n            updateRobotSelection={this.updateRobotSelection}\n            levels={this.state.levels}\n            levelsList={this.state.levelsList}\n            handleLevels={event => {\n              this.setState({ levels: event.target.value });\n            }}\n            limit={this.state.limit}\n            handleLimit={evt => {\n              if (evt.target.value === \"\") {\n                this.setState({ limit: 0 });\n              } else {\n                this.setState({ limit: evt.target.value });\n              }\n            }}\n            columns={this.state.columns}\n            columnList={this.props.columnList}\n            handleColumns={event => {\n              // make sure columns are always with the same order\n              const columns = Object.keys(this.props.columnList).filter(elem =>\n                event.target.value.includes(elem)\n              );\n              this.setState({ columns });\n            }}\n            tags={this.state.tags}\n            handleAddTag={tagText => {\n              const { tags } = this.state;\n              // Don't add tag if it's empty or duplicate\n              if (\n                tagText !== \"\" &&\n                tags.findIndex(elem => elem.label === tagText) < 0\n              ) {\n                tags.push({\n                  key: findsUniqueKey(tags, \"key\"),\n                  label: tagText\n                });\n                this.setState({ tags });\n              }\n            }}\n            handleDeleteTag={tagToDelete => {\n              const { tags } = this.state;\n              const filteredTags = tags.filter(\n                tag => tag.key !== tagToDelete.key\n              );\n              this.setState({ tags: filteredTags });\n            }}\n            messageRegex={this.state.messageRegex}\n            handleMessageRegex={text => this.setState({ messageRegex: text })}\n            selectedFromDate={this.state.selectedFromDate}\n            selectedToDate={this.state.selectedToDate}\n            handleDateChange={(newDate, keyToChange) => {\n              this.setState({ [keyToChange]: newDate });\n            }}\n            advancedMode={this.state.advancedMode}\n            handleAdvancedMode={evt => {\n              // Toggle advanced mode: change the levels\n              const advancedMode = !this.state.advancedMode;\n              this.setState({\n                advancedMode: advancedMode,\n                levelsList: this.state.advancedMode\n                  ? this.simpleLevelsList\n                  : this.advancedLevelsList,\n                tags: advancedMode ? [] : [UI_TAG]\n              });\n            }}\n          ></LogsFilterBar>\n          <div\n            ref={divElement => {\n              this.divElement = divElement;\n            }}\n            className={this.props.classes.tableContainer}\n          >\n            <LogsTable\n              columns={this.state.columns}\n              columnList={this.props.columnList}\n              logsData={filterByFromToDates(\n                this.state.logsData,\n                this.state.selectedFromDate,\n                this.state.selectedToDate\n              )}\n              height={this.state.height}\n              levelsList={this.state.levelsList}\n              onRowClick={this.onRowClick}\n            ></LogsTable>\n          </div>\n        </div>\n        <RobotLogModal\n          ref={this.logModal}\n          props={[\"module\", \"service\"]}\n        ></RobotLogModal>\n      </div>\n    );\n  }\n}\n\nLogs.propTypes = {\n  robotsData: PropTypes.array,\n  robotStates: PropTypes.object,\n  columnList: PropTypes.object,\n  advancedMode: PropTypes.bool\n};\nLogs.defaultProps = {\n  robotsData: [\n    {\n      name: \"robot\",\n      id: \"032cf6207ff34ad0a68cc45034f61b41\",\n      timestamp: 1604334778.6494586,\n      robotState: \"okay\",\n      battery: 78,\n      ip: \"127.0.0.1\"\n    },\n    {\n      name: \"robot_test\",\n      id: \"4df900e30cb44adba33ae74bb2596d88\",\n      timestamp: 1603969723.997914,\n      robotState: \"off\",\n      battery: 22,\n      ip: \"127.0.0.1\"\n    }\n  ],\n  robotStates: {\n    error: \"error\",\n    temp: \"temp\",\n    okay: \"okay\",\n    off: \"off\"\n  },\n  columnList: {\n    Date: {\n      label: \"Date\",\n      dataKey: \"time\",\n      width: 100,\n      render: time => getJustDateFromServer(time)\n    },\n    Time: {\n      label: \"Time\",\n      dataKey: \"time\",\n      width: 100,\n      render: time => getJustTimeFromServer(time)\n    },\n    Level: {\n      label: \"Level\",\n      dataKey: \"level\",\n      width: 100\n    },\n    Module: {\n      label: \"Module\",\n      dataKey: \"module\",\n      width: 100\n    },\n    Robot: {\n      label: \"Robot\",\n      dataKey: \"robot\",\n      width: 100\n    },\n    Message: {\n      label: \"Message\",\n      dataKey: \"message\",\n      width: 100\n    }\n  },\n  advancedMode: false\n};\n\nexport default withStyles(styles, { withTheme: true })(Logs);\n","import React, { Component } from \"react\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport Menu from \"@material-ui/core/Menu\";\nimport { Typography, Tooltip } from \"@material-ui/core\";\nimport { fade } from \"@material-ui/core/styles/colorManipulator\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport PropTypes from \"prop-types\";\n\nconst styles = theme => ({\n  button: {\n    margin: theme.spacing(1),\n    color: theme.palette.primary.main,\n    borderColor: theme.palette.primary.main\n  },\n  iconActive: {\n    color: theme.palette.primary.main,\n    borderColor: theme.palette.primary.main,\n    backgroundColor: fade(theme.palette.primary.main, 0.1)\n  },\n  buttonApplyFilters: {\n    background: theme.palette.primary.main,\n    fontFamily: \"Roboto\",\n    fontStyle: \"normal\",\n    fontWeight: \"bold\",\n    fontSize: \"14px\",\n    color: \"#FAFAFA\",\n    margin: \"0px 20px 10px 20px\",\n    \"&:hover\": { background: theme.palette.primary.dark }\n  },\n  icon: {\n    // fontSize: \"18px\",\n    // height: \"21px\",\n    // width: \"15px\",\n    //color: theme.palette.primary.main,\n    \"&:hover\": { cursor: \"pointer\" }\n  },\n  height: { height: \"100%\" },\n  checkbox: { marginLeft: \"10px\" },\n  limitText: {\n    width: \"50px\",\n    margin: theme.spacing(0, 3, 0, 3)\n  }\n});\n\nconst StyledMenu = withStyles(theme => ({\n  paper: {\n    // border: \"1px solid #F0F0F0\",\n    borderRadius: \"8px\",\n    width: \"242px\",\n    height: \"411px\",\n    boxShadow: \"2px 2px 4px rgba(0, 0, 0, 0.25)\"\n  }\n}))(props => (\n  <Menu\n    elevation={0}\n    getContentAnchorEl={null}\n    anchorOrigin={{\n      vertical: \"bottom\",\n      horizontal: \"center\"\n    }}\n    transformOrigin={{\n      vertical: \"top\",\n      horizontal: \"center\"\n    }}\n    autoFocus={false}\n    {...props}\n  />\n));\n\nclass FilterIcon extends Component {\n  state = { anchorEl: null, otherFilters: [] };\n\n  handleClick = event => {\n    this.setState({ anchorEl: event.currentTarget });\n  };\n\n  handleClose = () => {\n    this.setState({\n      anchorEl: null,\n      otherFilters: []\n    });\n  };\n\n  render() {\n    const { classes, t, disabled, tooltip, title } = this.props;\n    return (\n      <React.Fragment>\n        <Tooltip title={tooltip || title}>\n          <IconButton\n            size=\"small\"\n            onClick={this.handleClick}\n            disabled={disabled}\n            className={this.props.isActive ? classes.iconActive : classes.icon}\n          >\n            {this.props.icon}\n          </IconButton>\n        </Tooltip>\n        <StyledMenu\n          id=\"customized-menu\"\n          anchorEl={this.state.anchorEl}\n          open={Boolean(this.state.anchorEl)}\n          onClose={this.handleClose}\n          className={classes.height}\n        >\n          <div\n            style={{\n              display: \"flex\",\n              flexDirection: \"column\",\n              height: \"-webkit-fill-available\"\n            }}\n          >\n            <Typography\n              component=\"div\"\n              style={{\n                padding: \"10px 10px 0px 20px\",\n                display: \"flex\",\n                flexDirection: \"row\"\n              }}\n            >\n              <Typography\n                component=\"div\"\n                style={{\n                  fontSize: \"24px\",\n                  fontFamily: \"Open Sans\",\n                  fontWeight: 500\n                }}\n              >\n                {this.props.title}\n              </Typography>\n              <Typography\n                component=\"div\"\n                style={{\n                  flexGrow: 1\n                }}\n              ></Typography>\n              <Typography\n                component=\"div\"\n                onClick={this.handleClose}\n                className={classes.icon}\n              >\n                <i className=\"fas fa-times\"></i>\n              </Typography>\n            </Typography>\n            <div\n              style={{\n                flexGrow: 1,\n                display: \"flex\",\n                flexDirection: \"column\",\n                margin: \"10px 0px 0px 10px\"\n              }}\n            >\n              {this.props.children}\n            </div>\n          </div>\n        </StyledMenu>\n      </React.Fragment>\n    );\n  }\n}\n\nFilterIcon.propTypes = {\n  isActive: PropTypes.bool,\n  disabled: PropTypes.bool,\n  tooltip: PropTypes.string,\n  title: PropTypes.string\n};\n\nFilterIcon.defaultProps = {\n  isActive: false,\n  disabled: false,\n  tooltip: \"\",\n  title: \"Filters\"\n};\n\nexport default withStyles(styles, { withTheme: true })(FilterIcon);\n","import React, { memo } from \"react\";\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport SearchIcon from \"@material-ui/icons/Search\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport {\n  AppBar,\n  FormControlLabel,\n  Switch,\n  TextField,\n  Toolbar\n} from \"@material-ui/core\";\nimport ResetSearch from \"@material-ui/icons/Close\";\nimport FiltersIcon from \"./FiltersIcon/FiltersIcon\";\nimport LabelIcon from \"@material-ui/icons/Label\";\nimport Chip from \"@material-ui/core/Chip\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport TodayIcon from \"@material-ui/icons/Today\";\nimport { Typography } from \"@material-ui/core\";\nimport Input from \"@material-ui/core/Input\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport Select from \"@material-ui/core/Select\";\nimport SettingsIcon from \"@material-ui/icons/Settings\";\nimport Checkbox from \"@material-ui/core/Checkbox\";\nimport {\n  KeyboardDateTimePicker,\n  MuiPickersUtilsProvider\n} from \"@material-ui/pickers\";\nimport DateFnsUtils from \"@date-io/date-fns\";\nimport PropTypes from \"prop-types\";\nimport _isEqual from \"lodash/isEqual\";\nimport _get from \"lodash/get\";\n\nconst useStyles = makeStyles(theme => ({\n  input: {\n    flex: 1,\n    paddingLeft: \"10px\",\n    fontSize: \"medium\"\n  },\n  searchText: {\n    minWidth: 150,\n    paddingLeft: theme.spacing(3)\n  },\n  addTagText: {\n    width: \"100%\"\n  },\n  limitText: {\n    width: \"50px\",\n    margin: theme.spacing(0, 3, 0, 3)\n  },\n  toggleContainer: {\n    margin: theme.spacing(2)\n  },\n  tagsContainer: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    padding: theme.spacing(0.5),\n    margin: theme.spacing(0, 3, 0, 3)\n  },\n  tagsList: {\n    marginTop: theme.spacing(3)\n  },\n  chip: {\n    margin: theme.spacing(0.5)\n  },\n  formControl: {\n    margin: theme.spacing(1),\n    minWidth: 120,\n    maxWidth: 300\n  },\n  filtersButton: {\n    display: \"flex\",\n    flexDirection: \"row\"\n  },\n  columnsFilter: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    marginTop: 6\n  },\n  iconButton: {\n    color: \"#0B6A8A\",\n    \"&:hover\": {\n      color: \"#22c7ff\"\n    }\n  }\n}));\n\nconst LogsFilterBar = props => {\n  const classes = useStyles();\n  const [tagText, setTagText] = React.useState(\"\");\n\n  const handleRobotChange = event => {\n    const arrayEvent = event?.target?.value;\n    const selectedId = arrayEvent[arrayEvent.length - 1];\n    props.updateRobotSelection(selectedId);\n  };\n  const getRobotSelector = () => {\n    return (\n      <div className={classes.toggleContainer}>\n        <svg\n          width=\"20\"\n          height=\"18\"\n          viewBox=\"0 0 30 27\"\n          fill=\"none\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n          style={{ paddingTop: \"5px\", paddingRight: \"5px\" }}\n        >\n          <path\n            fillRule=\"evenodd\"\n            clipRule=\"evenodd\"\n            d=\"M16.7753 1.35706L15.9587 2.61119L16.3648 2.87846L18.4001 4.18898L17.1052 6.20016H25.437C26.5487 6.20016 27.45 7.10137 27.45 8.21307V12.8244H28.0955C28.6514 12.8244 29.102 13.275 29.102 13.8308V16.0643C29.102 16.6201 28.6514 17.0707 28.0955 17.0707H27.45V21.2901C27.45 22.4018 26.5487 23.303 25.437 23.303H4.12161C3.00991 23.303 2.1087 22.4017 2.1087 21.29V17.0707H1.42467C0.868819 17.0707 0.418213 16.6201 0.418213 16.0643V13.8308C0.418213 13.275 0.868819 12.8244 1.42467 12.8244H2.1087V8.21307C2.1087 7.10137 3.00991 6.20016 4.12161 6.20016H13.5141L14.8252 4.16395L13.2875 3.15192L13.2966 3.13812L13.2875 3.1322L15.1377 0.290771L16.7753 1.35706ZM24.4306 9.21953H5.12807V20.2836H24.4306V9.21953ZM7.18098 12.1324C6.68518 12.1324 6.28325 12.5343 6.28325 13.0301C6.28325 13.5259 6.68518 13.9278 7.18098 13.9278H9.04635C9.54216 13.9278 9.94409 13.5259 9.94409 13.0301C9.94409 12.5343 9.54216 12.1324 9.04635 12.1324H7.18098ZM20.6901 12.1324C20.1943 12.1324 19.7924 12.5343 19.7924 13.0301C19.7924 13.5259 20.1943 13.9278 20.6901 13.9278H22.5555C23.0513 13.9278 23.4532 13.5259 23.4532 13.0301C23.4532 12.5343 23.0513 12.1324 22.5555 12.1324H20.6901ZM9.17669 17.6512H11.3239V19.253H9.17669V17.6512ZM14.3432 17.6513H12.196V19.253H14.3432V17.6513ZM15.2154 17.6513H17.3626V19.253H15.2154V17.6513ZM20.382 17.6513H18.2348V19.253H20.382V17.6513ZM10.9568 23.69H18.6019V25.7029C18.6019 26.2587 18.1513 26.7093 17.5954 26.7093H11.9632C11.4074 26.7093 10.9568 26.2587 10.9568 25.7029V23.69Z\"\n            fill=\"#9E9E9E\"\n          />\n        </svg>\n        <FormControl className={classes.formControl}>\n          <Select\n            labelId=\"select-label\"\n            id=\"select\"\n            multiple\n            value={props.selectedRobots}\n            onChange={handleRobotChange}\n            renderValue={selected => {\n              const selectedNames = selected\n                .filter(({ isSelected }) => isSelected)\n                .map(({ name }) => name);\n              return selectedNames.length > 2\n                ? [selectedNames[0], selectedNames[1]].join(\" , \") + \"...\"\n                : selectedNames.join(\" , \");\n            }}\n            input={<Input />}\n            MenuProps={MenuProps}\n          >\n            {/* <MenuItem key={`robotList-Default`} value={robotDefault}>\n              Default\n            </MenuItem> */}\n            {props.selectedRobots.map((robot, robotIndex) => {\n              return (\n                <MenuItem key={`robotList-${robotIndex}`} value={robot.id}>\n                  <Checkbox checked={robot.isSelected} />\n                  <ListItemText primary={robot.name} />\n                </MenuItem>\n              );\n            })}\n          </Select>\n        </FormControl>\n      </div>\n    );\n  };\n\n  const getSearchInput = () => {\n    return (\n      <TextField\n        className={classes.searchText}\n        label=\"\"\n        placeholder=\"Search (regex)\"\n        value={props.messageRegex}\n        onChange={evt => props.handleMessageRegex(evt.target.value)}\n        InputProps={{\n          startAdornment: (\n            <InputAdornment style={{ paddingRight: 8 }}>\n              <SearchIcon fontSize=\"small\" />\n            </InputAdornment>\n          ),\n          endAdornment: (\n            <InputAdornment position=\"end\">\n              <IconButton\n                disabled={!props.messageRegex}\n                onClick={() => props.handleMessageRegex(\"\")}\n              >\n                <ResetSearch color=\"inherit\" fontSize=\"small\" />\n              </IconButton>\n            </InputAdornment>\n          )\n        }}\n        size=\"small\"\n      />\n    );\n  };\n\n  const getLevels = () => {\n    return (\n      <div className={classes.toggleContainer}>\n        <FormControl className={classes.formControl}>\n          <Select\n            labelId=\"demo-mutiple-checkbox-label\"\n            id=\"demo-mutiple-checkbox\"\n            style={{ minWidth: \"290px\" }}\n            multiple\n            value={props.levels}\n            onChange={props.handleLevels}\n            input={<Input />}\n            renderValue={selected => {\n              // selected comes from state, for example [\"ERROR\", \"INFO\"]\n              // but want to show the lables, for example [\"Alerts\", \"State of Robot\"]\n              const labels = props.levelsList\n                .filter(level => selected.includes(level.value))\n                .map(elem => elem.label);\n              return labels.join(\", \");\n            }}\n            MenuProps={MenuProps}\n          >\n            {props.levelsList.map(level => (\n              <MenuItem key={level.value} value={level.value}>\n                <Checkbox checked={props.levels.indexOf(level.value) > -1} />\n                <ListItemText primary={level.label} />\n              </MenuItem>\n            ))}\n          </Select>\n        </FormControl>\n      </div>\n    );\n  };\n\n  const getTags = isAdvancedMode => {\n    return (\n      <FiltersIcon\n        icon={<LabelIcon></LabelIcon>}\n        title=\"Tags\"\n        disabled={!isAdvancedMode}\n        isActive={props.tags.length > 0}\n      >\n        <div className={classes.tagsContainer}>\n          <TextField\n            className={classes.addTagText}\n            value={tagText}\n            onChange={evt => setTagText(evt.target.value)}\n            onKeyUp={event => {\n              // User pressed Enter\n              if (event.keyCode === 13) {\n                props.handleAddTag(tagText);\n                setTagText(\"\");\n              }\n            }}\n            label=\"Add Tag\"\n            InputProps={{\n              endAdornment: (\n                <InputAdornment>\n                  <IconButton\n                    onClick={() => {\n                      props.handleAddTag(tagText);\n                      setTagText(\"\");\n                    }}\n                  >\n                    <AddIcon />\n                  </IconButton>\n                </InputAdornment>\n              )\n            }}\n            size=\"small\"\n          />\n          <div className={classes.tagsList}>\n            {props.tags.map(data => {\n              return (\n                <li key={data.key}>\n                  <Chip\n                    label={data.label}\n                    onDelete={() => props.handleDeleteTag(data)}\n                    className={classes.chip}\n                    size=\"small\"\n                  />\n                </li>\n              );\n            })}\n          </div>\n        </div>\n      </FiltersIcon>\n    );\n  };\n\n  const getTimeFilters = () => {\n    return (\n      <FiltersIcon\n        icon={<TodayIcon></TodayIcon>}\n        title={props.t(\"Date Range\")}\n        isActive={\n          props.selectedFromDate !== null || props.selectedToDate !== null\n        }\n      >\n        {/* From -> To Date */}\n        <MuiPickersUtilsProvider utils={DateFnsUtils}>\n          <KeyboardDateTimePicker\n            key=\"time-picker\"\n            size=\"small\"\n            variant=\"inline\"\n            ampm={false}\n            label={props.t(\"From date\")}\n            value={props.selectedFromDate}\n            onChange={newDate =>\n              props.handleDateChange(newDate, \"selectedFromDate\")\n            }\n            onError={console.log}\n            format=\"yyyy/MM/dd HH:mm\"\n          />\n          <KeyboardDateTimePicker\n            key=\"time-picker2\"\n            size=\"small\"\n            variant=\"inline\"\n            ampm={false}\n            label={props.t(\"To date\")}\n            value={props.selectedToDate}\n            onChange={newDate =>\n              props.handleDateChange(newDate, \"selectedToDate\")\n            }\n            onError={console.log}\n            format=\"yyyy/MM/dd HH:mm\"\n          />\n        </MuiPickersUtilsProvider>\n      </FiltersIcon>\n    );\n  };\n\n  const getSettings = () => {\n    return (\n      <FiltersIcon\n        icon={<SettingsIcon></SettingsIcon>}\n        title={props.t(\"Configuration\")}\n      >\n        {/* Advanced/Simple Mode */}\n        <FormControlLabel\n          control={\n            <Switch\n              checked={props.advancedMode}\n              onChange={props.handleAdvancedMode}\n            />\n          }\n          label={props.advancedMode ? \"Advanced\" : \"Simple\"}\n        />\n        <div className={classes.filtersButton}>\n          {/* Limit Input */}\n          <Typography\n            component=\"div\"\n            style={{\n              fontSize: \"1rem\",\n              fontFamily: \"Open Sans\",\n              fontWeight: 500\n            }}\n          >\n            {`${props.t(\"Limit p/Robot\")}:`}\n          </Typography>\n          <TextField\n            value={props.limit}\n            onChange={props.handleLimit}\n            className={classes.limitText}\n            id=\"outlined-number\"\n            // label=\"limit\"\n            placeholder={props.t(\"limit\")}\n            type=\"number\"\n            InputLabelProps={{\n              shrink: true\n            }}\n            // variant=\"outlined\"\n            size=\"small\"\n          />\n        </div>\n        <div className={classes.columnsFilter}>\n          {/* Limit Input */}\n          <Typography\n            component=\"div\"\n            style={{\n              fontSize: \"1rem\",\n              fontFamily: \"Open Sans\",\n              fontWeight: 500\n            }}\n          >\n            {`${props.t(\"Columns\")}:`}\n          </Typography>\n          <FormControl className={classes.formControl}>\n            <Select\n              labelId=\"demo-mutiple-checkbox-label\"\n              id=\"demo-mutiple-checkbox\"\n              multiple\n              value={props.columns}\n              onChange={props.handleColumns}\n              input={<Input />}\n              renderValue={selected =>\n                selected\n                  .map(elem => _get(props, `columnList[${elem}].label`, \"\"))\n                  .join(`, `)\n              }\n              MenuProps={MenuProps}\n            >\n              {Object.keys(props.columnList).map((column, index) => {\n                return (\n                  <MenuItem key={index} value={column}>\n                    <Checkbox checked={props.columns.indexOf(column) > -1} />\n                    <ListItemText primary={props.columnList[column].label} />\n                  </MenuItem>\n                );\n              })}\n            </Select>\n          </FormControl>\n        </div>\n      </FiltersIcon>\n    );\n  };\n\n  return (\n    <AppBar position=\"static\" color=\"inherit\">\n      <Toolbar variant=\"dense\">\n        {getRobotSelector()}\n        {/* Search Input */}\n        {getSearchInput()}\n        {/* Toggle: INFO, DEBUG, ERROR, CRITICAL */}\n        {getLevels()}\n        {/* Tags */}\n        {getTags(props.advancedMode)}\n        {/* Date time filter */}\n        {getTimeFilters()}\n        <div style={{ flexGrow: 1 }}></div>\n        {getSettings()}\n      </Toolbar>\n    </AppBar>\n  );\n};\n\nconst ITEM_HEIGHT = 48;\nconst ITEM_PADDING_TOP = 8;\nconst MenuProps = {\n  PaperProps: {\n    style: {\n      maxHeight: ITEM_HEIGHT * 4.5 + ITEM_PADDING_TOP,\n      width: 250\n    }\n  },\n  getContentAnchorEl: null\n};\n\nLogsFilterBar.propTypes = {\n  levels: PropTypes.array,\n  levelsList: PropTypes.array,\n  handleLevels: PropTypes.func,\n  limit: PropTypes.number,\n  handleLimit: PropTypes.func,\n  columns: PropTypes.array,\n  columnList: PropTypes.object,\n  handleColumns: PropTypes.func,\n  handleDeleteTag: PropTypes.func,\n  messageRegex: PropTypes.string,\n  handleMessageRegex: PropTypes.func,\n  selectedFromDate: PropTypes.string,\n  selectToDate: PropTypes.string,\n  handleDateChange: PropTypes.func,\n  selectedRobots: PropTypes.array,\n  updateRobotSelection: PropTypes.func,\n  advancedMode: PropTypes.bool,\n  handleAdvancedMode: PropTypes.func,\n  t: PropTypes.func\n};\n\nLogsFilterBar.defaultProps = {\n  levels: [],\n  levelsList: [],\n  handleLevels: () => {},\n  limit: 1,\n  handleLimit: () => {},\n  columns: [],\n  columnList: {},\n  handleColumns: () => {},\n  handleDeleteTag: () => {},\n  messageRegex: \"\",\n  handleMessageRegex: () => {},\n  selectedFromDate: \"\",\n  selectToDate: \"\",\n  handleDateChange: () => {},\n  selectedRobots: [],\n  updateRobotSelection: () => {},\n  advancedMode: false,\n  handleAdvancedMode: () => {},\n  t: string => string\n};\n\n//The function returns true when the compared props equal, preventing the component from re-rendering\nfunction arePropsEqual(prevProps, nextProps) {\n  return _isEqual(prevProps, nextProps);\n}\n\nexport default memo(LogsFilterBar, arePropsEqual);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport clsx from \"clsx\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport { AutoSizer, Column, Table } from \"react-virtualized\";\nimport { colorCoding } from \"../utils/Utils\";\n\nconst useStyles = makeStyles(theme => {\n  return {\n    flexContainer: {\n      display: \"flex\",\n      alignItems: \"center\",\n      boxSizing: \"border-box\"\n    },\n    table: {\n      // temporary right-to-left patch, waiting for\n      // // https://github.com/bvaughn/react-virtualized/issues/454\n      \"& .ReactVirtualized__Table__headerRow\": {\n        flip: false,\n        paddingRight: theme.direction === \"rtl\" ? \"0 !important\" : undefined\n      }\n    },\n    tableRow: {\n      cursor: \"pointer\"\n    },\n    tableRowHover: {\n      \"&:hover\": {\n        backgroundColor: \"rgba(0, 5, 58, 0.3)\"\n      }\n    },\n    tableCell: {\n      flexGrow: 1,\n      whiteSpace: \"nowrap\",\n      overflow: \"hidden\",\n      textOverflow: \"ellipsis\",\n      display: \"inline-block\"\n    },\n    flexColumn: {\n      flex: 1,\n      alignItems: \"center\"\n    },\n    noClick: {\n      cursor: \"initial\"\n    },\n    ...colorCoding\n  };\n});\n\nconst MuiVirtualizedTable = props => {\n  const { columns, rowHeight, headerHeight, onRowClick, ...tableProps } = props;\n  const classes = useStyles();\n\n  const getRowClassName = ({ index }) => {\n    const { data } = props;\n    const rowData = data[index];\n    return clsx(\n      classes.tableRow,\n      classes.flexContainer,\n      index !== -1 && classes[rowData.level],\n      {\n        [classes.tableRowHover]: index !== -1 && onRowClick != null\n      }\n    );\n  };\n\n  const cellRenderer = render => ({ cellData, columnIndex }) => {\n    return (\n      <TableCell\n        component=\"div\"\n        className={`${classes.tableCell} ${classes.flexContainer}`}\n        variant=\"body\"\n        style={{ height: rowHeight }}\n        align={\n          (columnIndex != null && columns[columnIndex].numeric) || false\n            ? \"right\"\n            : \"left\"\n        }\n      >\n        {render ? render(cellData) : cellData}\n      </TableCell>\n    );\n  };\n\n  const headerRenderer = ({ label, columnIndex }) => {\n    return (\n      <TableCell\n        component=\"div\"\n        className={clsx(\n          classes.tableCell,\n          classes.flexContainer,\n          classes.noClick\n        )}\n        variant=\"head\"\n        style={{ height: headerHeight }}\n        align={columns[columnIndex].numeric || false ? \"right\" : \"left\"}\n      >\n        <span>{label}</span>\n      </TableCell>\n    );\n  };\n\n  return (\n    <AutoSizer>\n      {({ height, width }) => (\n        <Table\n          height={height}\n          width={width}\n          onRowClick={onRowClick}\n          rowHeight={rowHeight}\n          gridStyle={{\n            direction: \"inherit\"\n          }}\n          headerHeight={headerHeight}\n          className={classes.table}\n          {...tableProps}\n          rowClassName={getRowClassName}\n        >\n          {columns.map(({ dataKey, render, ...other }, index) => {\n            return (\n              <Column\n                key={dataKey}\n                headerRenderer={headerProps => {\n                  return headerRenderer({\n                    ...headerProps,\n                    columnIndex: index\n                  });\n                }}\n                flexGrow={dataKey === \"message\" ? 1 : undefined}\n                className={classes.flexContainer}\n                cellRenderer={cellRenderer(render)}\n                dataKey={dataKey}\n                {...other}\n              />\n            );\n          })}\n        </Table>\n      )}\n    </AutoSizer>\n  );\n};\n\n// const VirtualizedTable = withStyles(styles)(MuiVirtualizedTable);\n\nexport default function LogsTable(props) {\n  return (\n    <MuiVirtualizedTable\n      rowHeight={48}\n      headerHeight={48}\n      rowCount={props.logsData.length}\n      rowGetter={({ index }) => props.logsData[index]}\n      data={props.logsData}\n      columns={props.columns.map(elem => props.columnList[elem])}\n      onRowClick={props.onRowClick}\n    />\n  );\n}\n\nLogsTable.propTypes = {\n  columns: PropTypes.array,\n  columnList: PropTypes.object,\n  logsData: PropTypes.array,\n  height: PropTypes.number,\n  onRowClick: PropTypes.func\n};\n\nLogsTable.defaultProps = {\n  columns: [],\n  columnList: {},\n  logsData: [],\n  height: 10\n};\n","import React from \"react\";\nimport _isEmpty from \"lodash/isEmpty\";\n\n// export const levels = [\n//   { value: \"INFO\", label: i18n.t(\"Robot Status\") },\n//   // { value: \"WARNING\", label: \"Warnings\" },\n//   // { value: \"DEBUG\", label: \"Debug\" },\n//   { value: \"ERROR\", label: i18n.t(\"Alerts\") }\n//   // { value: \"CRITICAL\", label: \"Critical\" }\n// ];\n\nexport const colorCoding = {\n  INFO: {\n    backgroundColor: \"rgba(33, 150, 243, 0.1)\"\n  },\n  WARNING: {\n    backgroundColor: \"rgba(255, 152, 0, 0.1)\"\n  },\n  DEBUG: {\n    backgroundColor: \"rgba(76, 175, 80, 0.1)\"\n  },\n  ERROR: {\n    backgroundColor: \"rgba(244, 67, 54, 0.1)\"\n  },\n  CRITICAL: {\n    backgroundColor: \"rgba(255, 19, 1, 0.1)\"\n  }\n};\n\n// export const fixedColumns = {\n//   Date: {\n//     label: i18n.t(\"Date\"),\n//     dataKey: \"time\",\n//     width: 100,\n//     render: time => getJustDateFromServer(time)\n//   },\n//   Time: {\n//     label: i18n.t(\"Time\"),\n//     dataKey: \"time\",\n//     render: time => getJustTimeFromServer(time),\n//     width: 100\n//   },\n//   Level: {\n//     label: i18n.t(\"Level\"),\n//     dataKey: \"level\",\n//     width: 100\n//   },\n//   Module: {\n//     label: i18n.t(\"Module\"),\n//     dataKey: \"module\",\n//     width: 100\n//   },\n//   Function: {\n//     label: \"Function\",\n//     dataKey: \"funcName\",\n//     width: 100\n//   },\n//   Callback: {\n//     label: i18n.t(\"Callback\"),\n//     dataKey: \"callback\",\n//     width: 100\n//   },\n//   Node: {\n//     label: i18n.t(\"Node\"),\n//     dataKey: \"node\",\n//     width: 100\n//   },\n//   Fleet: {\n//     label: i18n.t(\"Fleet\"),\n//     dataKey: \"fleet\",\n//     width: 100\n//   },\n//   Robot: {\n//     label: i18n.t(\"Robot\"),\n//     dataKey: \"robot\",\n//     width: 100\n//   },\n//   Message: {\n//     label: i18n.t(\"Message\"),\n//     dataKey: \"message\",\n//     width: 100\n//   }\n// };\n\n// Makes sure to find unique \"i\" of chip array\n// Input: [{key: 0, label: \"Chip1\"}, {key: 2, label: \"Chip3\"}], keyName= \"key\"\n// Output: 1\nexport function findsUniqueKey(array, keyName) {\n  const length = array.length;\n  // If empty, return 0\n  if (length === 0 || array === undefined) {\n    return 0;\n  }\n  for (let k = 0; k < length; k++) {\n    for (let j = 0; j < length; j++) {\n      if (k === array[j][keyName]) {\n        break;\n      }\n      if (j === length - 1) {\n        return k;\n      }\n    }\n  }\n\n  return length;\n}\n\n// Converts the levels in the state for the string for the request\n//  Input: [\"INFO\", \"DEBUG\"]\n//  Output: \"level=info,debug\"\nexport function getRequestLevels(levelsArray, levelsList) {\n  let res = \"\";\n  if (Array.isArray(levelsArray) && levelsArray.length === levelsList.length) {\n    return res;\n  }\n\n  try {\n    levelsArray.forEach(level => {\n      if (res === \"\") {\n        res = `${level.toLowerCase()}`;\n      } else {\n        res = `${res},${level.toLowerCase()}`;\n      }\n    });\n    return `level=${res}`;\n  } catch (error) {\n    return \"\";\n  }\n}\n// Converts the levels in the state for the string for the request\n//  Input: [{ key: 0, label: \"UI\" }, { key: 1, label: \"TASKS\" }]\n//  Output: \"&tags=UI,TASKS\"\nexport function getRequestTags(tagsArray) {\n  let res = \"\";\n\n  if (_isEmpty(tagsArray)) {\n    return res;\n  }\n\n  tagsArray.forEach(tag => {\n    if (res === \"\") {\n      res = `${tag.label}`;\n    } else {\n      res = `${res},${tag.label}`;\n    }\n  });\n\n  return `&tags=${res}`;\n}\n// Converts the levels in the state for the string for the request\n//  Input: \"r'started\\.$\"\n//  Output: \"&message=r'started\\.$\"\nexport function getRequestMessage(message) {\n  if (!message || message === \"\") {\n    return \"\";\n  }\n\n  return `&message=${message}`;\n}\n\n// Convert Date format to a human readable format\n// Input: 1586370146\n// Output: \"08/04/2020 19:22:26\"\nexport const getTimeFromServer = serverTime => {\n  const time = new Date(serverTime * 1000);\n  return `${time.toLocaleString(\"pt\")}`;\n};\n// Convert Date format to a human readable format\n// Input: 1586370146\n// Output: \"08/04/2020\"\nexport const getJustDateFromServer = serverTime => {\n  const time = new Date(serverTime * 1000);\n  return `${time.toLocaleDateString(\"pt\")}`;\n};\n// Convert Date format to a human readable format\n// Input: 1586370146\n// Output: \"19:22:26\"\nexport const getJustTimeFromServer = serverTime => {\n  const time = new Date(serverTime * 1000);\n  return `${time.toLocaleTimeString(\"pt\")}`;\n};\n\n// Convert array of object to array of strings for LogList\n// Input:\n// [\n//   {\n//     time: 1586370146,\n//     level: \"INFO\",\n//     message: \"UI Tag Log Test: 12\"\n//   },\n//   {\n//     time: 1586370147,\n//     level: \"INFO\",\n//     message: \"UI Tag Log Test: 13\"\n//   }\n// ];\n// Output\n// [\n//   \"[08/04/2020 19:22:26] [INFO] : UI Tag Log Test: 12\",\n//   \"[08/04/2020 19:21:31] [INFO] : UI Tag Log Test: 56\"\n// ];\n\nexport const formatLogsData = data => {\n  return data.map(\n    elem => elem.stdout\n    // `[${getTimeFromServer(elem.time)}] [${elem.level}] : ${elem.message}`\n  );\n};\n\nfunction binaryIndexOf(data, criteria) {\n  var minIndex = 0;\n  var maxIndex = data.length - 1;\n  var currentIndex;\n  var currentElement;\n  var result = null;\n\n  while (minIndex <= maxIndex) {\n    currentIndex = ((minIndex + maxIndex) / 2) | 0;\n    currentElement = data[currentIndex];\n    var comparison = criteria(currentElement);\n\n    if (comparison[0] === \"right\") {\n      minIndex = currentIndex + 1;\n    } else {\n      maxIndex = currentIndex - 1;\n    }\n\n    if (comparison[1]) {\n      result = currentIndex;\n    }\n  }\n\n  return result;\n}\n\nexport const filterByFromToDates = (logsData, fromDate, toDate) => {\n  // If there is a problem fetching the logs, show nothing\n  if (!logsData) {\n    return [];\n  }\n\n  let lowerIndex = 0;\n  let upperIndex = logsData.length;\n\n  // If nothing is selected, do nothing\n  if (!fromDate && !toDate) {\n    return logsData;\n  }\n\n  // List of time format. Array is sorted in descending order (Newer -> Older)\n  const dateList = logsData.map(log => log.time);\n  if (toDate) {\n    // First log that is <= toDate (first index that fits criteria)\n    lowerIndex = binaryIndexOf(dateList, function (value) {\n      return value >= toDate.getTime() / 1000\n        ? [\"right\", false]\n        : [\"left\", true];\n    });\n  }\n  if (fromDate) {\n    // First log that is >= fromDate (last index that still fits criteria)\n    upperIndex = binaryIndexOf(dateList, function (value) {\n      return value <= fromDate.getTime() / 1000\n        ? [\"left\", false]\n        : [\"right\", true];\n    });\n  }\n  return logsData.slice(lowerIndex, upperIndex + 1);\n};\n\n// This function is to get the same string as the one you get in\n// Robot:Status nodes_lchd and persistent_nodes_lchd\nexport const addNestedName = (nestedName, newName) => {\n  if (nestedName === \"\") {\n    return newName;\n  } else {\n    return `${nestedName}__${newName}`;\n  }\n};\n\n// Will update according with the list of running nodes all the nodes to running or stopped\nexport const updateRunningNodes = (treeList, runningNodesList) => {\n  return treeList.map(elem => {\n    // Only update the status of nodes, not containers\n    if (elem.status) {\n      if (runningNodesList.includes(elem.nestedName)) {\n        return { ...elem, status: \"running\" };\n      } else {\n        return { ...elem, status: \"stopped\" };\n      }\n    } else {\n      return elem;\n    }\n  });\n};\n\n// This will remove the deleted container from the treeList and its respective children\nexport const removeDeleteContainer = (treeList, id) => {\n  // Get the id of the Container to remove\n  const deleteIndex = treeList.findIndex(elem => elem.id === id);\n  treeList.splice(deleteIndex, 1);\n  // Remove children: find all children with parentId that is the id\n  for (let i = 0; i < treeList.length; i++) {\n    if (treeList[i].parentId === id) {\n      removeDeleteContainer(treeList, treeList[i].id);\n    }\n  }\n};\n\n// Detects if there are loops within nested containers\n// Returns true if it finds a loop, false otherwise\nexport const detectContainerLoop = (treeList, parentId, flowId) => {\n  // If first level there are no loops\n  if (parentId === 0) {\n    return false;\n  }\n  // index of container to add\n  let flowIndex = treeList.findIndex(elem => elem.id === parentId);\n  let currentFlow = treeList[flowIndex];\n  // Stop when reaches the root of the tree\n  while (currentFlow.parentId) {\n    // get the parentId of the current container\n    const parentId = currentFlow.parentId;\n    // get the index of that parent in the array\n    flowIndex = treeList.findIndex(elem => elem.id === parentId);\n    currentFlow = treeList[flowIndex];\n    if (currentFlow.flowId === flowId) {\n      console.error(\"Found Flow Loop :0\");\n      return true;\n    }\n  }\n  return false;\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport CloseIcon from \"@material-ui/icons/Close\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport {\n  Card,\n  Typography,\n  CardContent,\n  Divider,\n  Button,\n  CardActions,\n  Modal\n} from \"@material-ui/core\";\n\nconst useStyles = makeStyles(theme => {\n  return {\n    card: {\n      margin: \"auto\",\n      position: \"absolute\",\n      overflow: \"auto\",\n      display: \"flex\",\n      flexDirection: \"column\",\n      maxHeight: \"98%\"\n    },\n    closeButton: {\n      cursor: \"pointer\",\n      position: \"absolute\",\n      color: theme.textColor,\n      top: 15,\n      right: 15,\n      \"&:hover\": {\n        color: \"gray\"\n      }\n    }\n  };\n});\n\nconst AbstractModal = props => {\n  const classes = useStyles();\n\n  const onKeyPress = e => {\n    if (e.key === \"Enter\") {\n      submit();\n    }\n  };\n\n  const submit = () => {\n    props.onSubmit();\n  };\n\n  const cancel = () => {\n    props.onCancel();\n  };\n\n  return (\n    <Modal\n      onKeyPress={onKeyPress}\n      open={props.open}\n      onClose={cancel}\n      style={{\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\"\n      }}\n    >\n      <Card\n        className={classes.card}\n        style={{\n          ...props.style,\n          minWidth: props.width,\n          minHeight: props.height\n        }}\n      >\n        <CardContent\n          style={{\n            flexGrow: 1,\n            maxHeight: \"calc(100% - 70px)\",\n            overflowY: \"auto\"\n          }}\n        >\n          <Typography variant=\"h5\">{props.title}</Typography>\n          <Typography\n            component=\"div\"\n            className={classes.closeButton}\n            onClick={() => props.onCancel()}\n          >\n            <CloseIcon></CloseIcon>\n          </Typography>\n          <Divider style={{ marginBottom: \"12px\" }} />\n          <div\n            style={{\n              maxHeight: \"calc(100% - 35px)\",\n              overflowY: \"auto\",\n              paddingTop: 5\n            }}\n          >\n            {props.children}\n          </div>\n        </CardContent>\n        <Divider />\n        <CardActions>\n          {props.hasSubmitButton && (\n            <Button color={props.submitColor} onClick={submit}>\n              {props.submitText}\n            </Button>\n          )}\n          {props.hasCancelButton && (\n            <Button onClick={cancel} color={props.cancelColor}>\n              {props.cancelText}\n            </Button>\n          )}\n        </CardActions>\n      </Card>\n    </Modal>\n  );\n};\n\nAbstractModal.propTypes = {\n  onSubmit: PropTypes.func,\n  onCancel: PropTypes.func,\n  open: PropTypes.bool,\n  title: PropTypes.string,\n  submitText: PropTypes.string,\n  submitColor: PropTypes.string,\n  cancelText: PropTypes.string,\n  cancelColor: PropTypes.string,\n  width: PropTypes.string,\n  height: PropTypes.string,\n  style: PropTypes.object,\n  hasSubmitButton: PropTypes.bool,\n  hasCancelButton: PropTypes.bool\n};\n\nAbstractModal.defaultProps = {\n  onSubmit: () => {},\n  onCancel: () => {},\n  open: false,\n  title: \"New\",\n  submitText: \"Confirm\",\n  submitColor: \"primary\",\n  cancelText: \"Cancel\",\n  cancelColor: \"secondary\",\n  width: \"25%\",\n  height: \"25%\",\n  style: {},\n  hasSubmitButton: true,\n  hasCancelButton: true\n};\n\nexport default AbstractModal;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport AbstractModal from \"./AbstractModal\";\n\nconst ConfirmAlertModal = props => {\n  return (\n    <AbstractModal\n      onSubmit={props.onSubmit}\n      onCancel={props.onCancel}\n      open={props.open}\n      title={props.title}\n      submitText={props.submitText}\n      submitColor={props.submitColor}\n      cancelText={props.cancelText}\n      cancelColor={props.cancelColor}\n    >\n      <div>{props.message}</div>\n      <div>{props.children}</div>\n    </AbstractModal>\n  );\n};\n\nConfirmAlertModal.propTypes = {\n  title: PropTypes.string,\n  message: PropTypes.string,\n  onSubmit: PropTypes.func,\n  onCancel: PropTypes.func,\n  open: PropTypes.bool,\n  submitText: PropTypes.string,\n  submitColor: PropTypes.string,\n  cancelText: PropTypes.string,\n  cancelColor: PropTypes.string\n};\n\nConfirmAlertModal.defaultProps = {\n  title: \"Insert Text here\",\n  message: \"Are you sure?\",\n  onSubmit: () => {},\n  onCancel: () => {},\n  open: false,\n  submitText: \"Delete\",\n  submitColor: \"secondary\",\n  cancelText: \"Cancel\",\n  cancelColor: \"primary\"\n};\n\nexport default ConfirmAlertModal;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport List from \"@material-ui/core/List\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport Divider from \"@material-ui/core/Divider\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { ListItem, ListItemAvatar, ListItemText } from \"@material-ui/core\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport ScheduleIcon from \"@material-ui/icons/Schedule\";\nimport WarningIcon from \"@material-ui/icons/Warning\";\nimport ViewModuleIcon from \"@material-ui/icons/ViewModule\";\nimport ChatIcon from \"@material-ui/icons/Chat\";\nimport { MasterDB } from \"mov-fe-lib-core\";\nimport AbstractModal from \"./AbstractModal\";\n\nconst styles = theme => ({\n  breakWord: {\n    wordBreak: \"break-all\"\n  }\n});\n\nclass RobotLogModal extends Component {\n  state = {\n    data: {},\n    open: false,\n    hasButton: false\n  };\n\n  open = alert => {\n    const { data } = this.state;\n    // Format time\n    const time = new Date(alert.time * 1000);\n    const alertButton = alert.button\n      ? JSON.parse(alert.button.replace(/'/g, '\"'))\n      : null;\n    data.time = `${time.toLocaleTimeString(\"pt\")}`;\n    data.action = alert.action;\n    data.message = alert.message;\n    data.robot = alert.robot;\n    data.service = alert.service;\n    data.module = alert.module;\n    if (alertButton) {\n      data.buttonText = alertButton.label;\n      data.buttonAction = this.getRobotAlertAction(alertButton);\n    }\n    // Update state variables\n    this.setState({\n      data,\n      open: true,\n      hasButton: !!alertButton\n    });\n  };\n\n  getRobotAlertAction = ({ callback, data }) => {\n    // Trigger callback to clear log\n    if (callback) {\n      return () => {\n        MasterDB.cloudFunction(callback, \"\", data, res => {\n          this.setState({ open: false });\n        });\n      };\n    }\n    // Default case (just close modal)\n    else {\n      return () => this.setState({ open: false });\n    }\n  };\n\n  renderAlertInfo = () => {\n    const { data } = this.state;\n    const { props, classes } = this.props;\n    return (\n      <Typography component=\"div\">\n        <List style={{ width: \"100%\" }}>\n          <ListItem>\n            <ListItemAvatar>\n              <Avatar>\n                <i className=\"fas fa-robot\"></i>\n              </Avatar>\n            </ListItemAvatar>\n            <ListItemText primary={data.robot} />\n          </ListItem>\n          <Divider variant=\"inset\" component=\"li\" />\n          <ListItem>\n            <ListItemAvatar>\n              <Avatar>\n                <ScheduleIcon />\n              </Avatar>\n            </ListItemAvatar>\n            <ListItemText primary={data.time} />\n          </ListItem>\n          <Divider variant=\"inset\" component=\"li\" />\n          {props.includes(\"service\") && (\n            <div>\n              <ListItem>\n                <ListItemAvatar>\n                  <Avatar>\n                    <WarningIcon />\n                  </Avatar>\n                </ListItemAvatar>\n                <ListItemText\n                  primary={data.service}\n                  className={classes.breakWord}\n                />\n              </ListItem>\n              <Divider variant=\"inset\" component=\"li\" />\n            </div>\n          )}\n          {props.includes(\"module\") && (\n            <div>\n              <ListItem>\n                <ListItemAvatar>\n                  <Avatar>\n                    <ViewModuleIcon />\n                  </Avatar>\n                </ListItemAvatar>\n                <ListItemText\n                  primary={data.module}\n                  className={classes.breakWord}\n                />\n              </ListItem>\n              <Divider variant=\"inset\" component=\"li\" />\n            </div>\n          )}\n          <ListItem>\n            <ListItemAvatar>\n              <Avatar>\n                <ChatIcon />\n              </Avatar>\n            </ListItemAvatar>\n            <ListItemText\n              primary={data.message}\n              className={classes.breakWord}\n            />\n          </ListItem>\n        </List>\n        {data.action && (\n          <div>\n            <Divider />\n            <List style={{ width: \"100%\" }}>\n              <ListItem>\n                <ListItemText\n                  primary={data.action}\n                  className={classes.breakWord}\n                />\n              </ListItem>\n            </List>\n          </div>\n        )}\n      </Typography>\n    );\n  };\n\n  render() {\n    const { data, open, hasButton } = this.state;\n    const { title } = this.props;\n    return (\n      <AbstractModal\n        open={open}\n        title={title}\n        style={{ maxWidth: 500 }}\n        onCancel={() => this.setState({ open: false })}\n        onSubmit={data.buttonAction}\n        submitText={data.buttonText}\n        submitColor={\"primary\"}\n        hasSubmitButton={hasButton}\n        hasCancelButton={false}\n      >\n        {this.renderAlertInfo()}\n      </AbstractModal>\n    );\n  }\n}\n\nRobotLogModal.propTypes = {\n  title: PropTypes.string,\n  props: PropTypes.array\n};\n\nRobotLogModal.defaultProps = {\n  title: \"Log Details\",\n  props: []\n};\n\nexport default withStyles(styles, { withTheme: true })(RobotLogModal);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport _set from \"lodash/set\";\nimport _get from \"lodash/get\";\nimport _cloneDeep from \"lodash/cloneDeep\";\nimport {\n  FormControl,\n  Grid,\n  InputLabel,\n  MenuItem,\n  Select,\n  Typography\n} from \"@material-ui/core\";\nimport { Workspace } from \"mov-fe-lib-core\";\nimport BasicVirtualizedTree from \"../Tree/BasicVirtualizedTree\";\nimport AbstractModal from \"./AbstractModal\";\nimport Backdrop from \"@material-ui/core/Backdrop\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\n\n//========================================================================================\n/*                                                                                      *\n *                                    TEMPORARY CODE                                    *\n *                                                                                      */\n//========================================================================================\n\nconst SelectScopeModal = props => {\n  const initialData = [\n    {\n      id: 0,\n      name: \"Annotations\",\n      scope: \"Annotation\",\n      children: []\n    },\n    {\n      id: 1,\n      name: \"Callback\",\n      scope: \"Callback\",\n      children: []\n    },\n    {\n      id: 2,\n      name: \"Configuration\",\n      scope: \"Configuration\",\n      children: []\n    },\n    {\n      id: 3,\n      name: \"Flow\",\n      scope: \"Flow\",\n      children: []\n    },\n    {\n      id: 4,\n      name: \"Nodes\",\n      scope: \"Node\",\n      children: []\n    },\n    {\n      id: 5,\n      name: \"Layouts\",\n      scope: \"Layout\",\n      children: []\n    },\n    {\n      id: 6,\n      name: \"Scenes\",\n      scope: \"GraphicScene\",\n      children: []\n    }\n  ];\n\n  const [data, setData] = React.useState(initialData);\n  const [selectedWorkspace, setSelectedWorkspace] = React.useState(\"global\");\n  const [selectedScopeItem, setSelectedScopeItem] = React.useState(\n    props.selected\n  );\n  const [workSpaceList, setWorkSpaceList] = React.useState({});\n  const [isLoading, setIsLoading] = React.useState(true);\n  let firstTime = true; // this is to avoid repeating getAllData() which is a costly operation\n\n  const scopeFilteredData = initialData.filter(elem =>\n    props.scopeList.includes(elem.scope)\n  );\n\n  /* eslint-disable react-hooks/exhaustive-deps */\n  React.useEffect(() => {\n    // Only fetch information the first time the modal is opened\n    if (firstTime) {\n      //get list of workspace\n      Workspace.getAll()\n        .then(response => setWorkSpaceList(response))\n        .catch(error => console.log(error));\n\n      // get all information in the scopes (not filtered by message)\n      getAllData(selectedWorkspace);\n      firstTime = false;\n    }\n\n    //Unmount\n    return () => {};\n  }, [props.scopeList]);\n  /* eslint-enable react-hooks/exhaustive-deps */\n\n  const changeWorkspace = evt => {\n    // Update the selector\n    setSelectedWorkspace(evt.target.value);\n\n    // When you switch workspaces reset Data\n    getAllData(evt.target.value);\n    setIsLoading(true);\n  };\n\n  const getAllData = workspace => {\n    const dataToSet = _cloneDeep(scopeFilteredData);\n\n    dataToSet.forEach((element, index) => {\n      // Get all scope items\n      Workspace.getDocs({ workspace: workspace, scope: element.scope })\n        .then(response => {\n          let sortedScopeItems = response.scopes\n            .sort((a, b) => a.ref.toLowerCase() > b.ref.toLowerCase())\n            .map((elem, i) => {\n              return {\n                id: i,\n                url: elem.url,\n                name: elem.ref,\n                children: [{ name: \"\" }]\n              };\n            });\n\n          if (workspace === \"global\") {\n            sortedScopeItems = sortedScopeItems.filter((elem, index) => {\n              return props.filter(elem, index);\n            });\n          }\n\n          dataToSet[index].children = sortedScopeItems;\n          setData(dataToSet);\n          setIsLoading(false);\n        })\n        .catch(error => console.error(error));\n    });\n  };\n\n  const requestScopeVersions = node => {\n    const dataToSet = _cloneDeep(data);\n    const mapObj = {\n      0: () => {\n        const indexToSet = dataToSet.findIndex(elem => elem.id === node.id);\n\n        // Toggle the expansion of the panel\n        const isExpanded = _get(\n          dataToSet,\n          [indexToSet, \"state\", \"expanded\"],\n          false\n        );\n        _set(dataToSet, [indexToSet, \"state\"], {\n          expanded: !isExpanded\n        });\n\n        setData(dataToSet);\n      },\n      1: () => {\n        // second level, ask for versions (versions of scope items)\n\n        // find index of selected node in first level\n        const indexToSet = dataToSet.findIndex(\n          elem => elem.id === node.parents[0]\n        );\n\n        Workspace.getDocs({\n          workspace: selectedWorkspace,\n          scope: dataToSet[indexToSet].scope,\n          id: node.name\n        })\n          .then(response => {\n            // Tailor data Data comes with \"ref\" key but we want \"name\"\n            const versionList = response.versions.map((elem, index) => {\n              return {\n                url: elem.url,\n                name: elem.tag,\n                id: index\n              };\n            });\n\n            // find index of selected node in the second level\n            const index2ndLevel = dataToSet[indexToSet].children.findIndex(\n              elem => elem.id === node.id\n            );\n\n            // Toggle the expansion of the panel\n            const isExpanded = _get(\n              dataToSet,\n              [indexToSet, \"children\", index2ndLevel, \"state\", \"expanded\"],\n              false\n            );\n            _set(dataToSet, [indexToSet, \"children\", index2ndLevel, \"state\"], {\n              expanded: !isExpanded\n            });\n\n            // Set version list into the Tree\n            _set(\n              dataToSet,\n              [indexToSet, \"children\", index2ndLevel, \"children\"],\n              versionList\n            );\n            setData(dataToSet);\n          })\n          .catch(error => console.error(error));\n      },\n      2: () => {\n        // Display the selected option\n        setSelectedScopeItem(`${node.url}`);\n      }\n    };\n    _get(mapObj, node.deepness, () => {})();\n  };\n\n  const confirmNodeSelection = node => {\n    // Display the selected option and confirm selection\n    if (selectedWorkspace !== \"global\" && node.deepness <= 1) return;\n    setSelectedScopeItem(node.url);\n    props.onSubmit(node.url);\n  };\n\n  const getModalTitle = scope => {\n    const vowels = [\"a\", \"e\", \"i\", \"o\", \"u\"];\n    const pronoun = vowels.includes(scope[0].toLowerCase()) ? \"an\" : \"a\";\n    return `Select ${pronoun} ${scope}`;\n  };\n\n  return (\n    <AbstractModal\n      onSubmit={() => props.onSubmit(selectedScopeItem)}\n      onCancel={props.onCancel}\n      open={props.open}\n      title={getModalTitle(props.scopeList[0])}\n      width=\"50%\"\n      // ioports\n      // height=\"70%\"\n    >\n      <Grid container>\n        <Grid\n          item\n          xs={12}\n          style={{\n            textAlign: \"center\",\n            paddingBottom: \"6px\",\n            paddingTop: \"10px\"\n          }}\n        >\n          <FormControl style={{ width: \"50%\" }}>\n            <InputLabel>Workspace</InputLabel>\n            <Select\n              value={selectedWorkspace}\n              // shared\n              // defaultValue=\"\"\n              onChange={changeWorkspace}\n            >\n              {/* shared  */}\n              {Object.keys(workSpaceList).map((key, index) => (\n                <MenuItem key={index} value={key}>\n                  {workSpaceList[key].label}\n                </MenuItem>\n              ))}\n            </Select>\n          </FormControl>\n        </Grid>\n        <Typography\n          component=\"div\"\n          style={{\n            overflowY: \"auto\",\n            overflowX: \"hidden\",\n            justifyContent: \"center\",\n            width: \"100%\"\n          }}\n        >\n          {isLoading ? (\n            <Backdrop\n              style={{\n                position: \"relative\",\n                height: \"50vh\",\n                width: \"inherit\",\n                color: \"#fff\",\n                zIndex: 99999\n              }}\n              open={isLoading}\n            >\n              <CircularProgress color=\"inherit\" />\n            </Backdrop>\n          ) : (\n            <BasicVirtualizedTree\n              onClickNode={node => requestScopeVersions(node)}\n              // shared\n              onDoubleClickNode={data => confirmNodeSelection(data)}\n              data={data}\n              handleChange={nodes => setData(nodes)}\n              showIcons={false}\n              height=\"400px\"\n            ></BasicVirtualizedTree>\n          )}\n        </Typography>\n        <Grid item xs={12} style={{ textAlign: \"center\" }}>\n          <Typography label=\"Message\" value={\"selected\"} margin=\"normal\">\n            {selectedScopeItem === \"\" ? \"Nothing selected\" : selectedScopeItem}\n          </Typography>\n        </Grid>\n      </Grid>\n    </AbstractModal>\n  );\n};\n\nSelectScopeModal.propTypes = {\n  onSubmit: PropTypes.func,\n  onCancel: PropTypes.func,\n  open: PropTypes.bool,\n  scopeList: PropTypes.array,\n  message: PropTypes.string,\n  selected: PropTypes.string,\n  filter: PropTypes.func\n};\n\nSelectScopeModal.defaultProps = {\n  title: \"Insert Text here\",\n  message: \"Are you sure?\",\n  onSubmit: () => {},\n  onCancel: () => {},\n  open: false,\n  scopeList: [\"Callback\"],\n  selected: \"\",\n  filter: () => true\n};\n\nexport default SelectScopeModal;\n","import React from \"react\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Menu from \"@material-ui/core/Menu\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport SettingsIcon from \"@material-ui/icons/Settings\";\nimport PropTypes from \"prop-types\";\nimport Toggle from \"./Toggle\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Divider from \"@material-ui/core/Divider\";\nimport { Typography } from \"@material-ui/core\";\n\nconst useStyles = makeStyles(theme => {\n  return {\n    menuItemSpacing: {\n      fontSize: \"18px\",\n      minHeight: \"18px\",\n      padding: theme.spacing(1.25, 2),\n      ...theme.cursorDefault\n    },\n    profileMenuFooter: {\n      fontSize: \"14px\",\n      textAlign: \"end\"\n    }\n  };\n});\n\nconst ProfileMenu = props => {\n  const classes = useStyles();\n  const [anchorEl, setAnchorEl] = React.useState(null);\n\n  const handleClick = event => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  return (\n    <div>\n      <IconButton\n        aria-controls=\"simple-menu\"\n        aria-haspopup=\"true\"\n        onClick={handleClick}\n      >\n        <SettingsIcon />\n      </IconButton>\n      <Menu\n        id=\"simple-menu\"\n        anchorEl={anchorEl}\n        keepMounted\n        open={Boolean(anchorEl)}\n        onClose={handleClose}\n      >\n        <Typography component=\"div\" variant=\"body1\">\n          <div className={classes.menuItemSpacing}>\n            {props.welcomeLabel}, {props.userName}\n          </div>\n          <Divider variant=\"middle\" />\n          {props.extraItems?.map(item => (\n            <MenuItem\n              className={classes.menuItemSpacing}\n              onClick={() => item.func}\n            >\n              {item.label}\n            </MenuItem>\n          ))}\n          <div className={classes.menuItemSpacing}>\n            {props.darkThemeLabel}\n            <Toggle\n              onToggle={() => props.handleToggleTheme()}\n              toggle={props.isDarkTheme}\n            ></Toggle>\n          </div>\n          <MenuItem\n            className={(classes.menuItemSpacing, classes.cursorPointer)}\n            onClick={props.handleLogout}\n          >\n            {props.logoutLabel}\n          </MenuItem>\n          <Divider variant=\"middle\" />\n          <div\n            className={\n              classes.menuItemSpacing + \" \" + classes.profileMenuFooter\n            }\n          >\n            {props.version}\n          </div>\n        </Typography>\n      </Menu>\n    </div>\n  );\n};\nProfileMenu.propTypes = {\n  welcomeLabel: PropTypes.string,\n  userName: PropTypes.string,\n  darkThemeLabel: PropTypes.string,\n  logoutLabel: PropTypes.string,\n  version: PropTypes.string,\n  extraItems: PropTypes.array,\n  isDarkTheme: PropTypes.bool,\n  handleLogout: PropTypes.func,\n  handleToggleTheme: PropTypes.func\n};\n\nProfileMenu.defaultProps = {\n  welcomeLabel: \"Hello\",\n  userName: \"User\",\n  darkThemeLabel: \"Dark Theme\",\n  logoutLabel: \"Logout\",\n  version: \"\",\n  extraItems: [],\n  isDarkTheme: true,\n  handleLogout: () => console.log(\"logout\"),\n  handleToggleTheme: () => console.log(\"toggle\")\n};\n\nexport default ProfileMenu;\n","import React, { Component } from \"react\";\nimport { fade, withStyles } from \"@material-ui/core/styles\";\nimport InputBase from \"@material-ui/core/InputBase\";\nimport SearchIcon from \"@material-ui/icons/Search\";\nimport PropTypes from \"prop-types\";\n\nconst styles = theme => ({\n  search: {\n    position: \"relative\",\n    borderRadius: theme.shape.borderRadius,\n    backgroundColor: fade(theme.palette.common.white, 0.15),\n    \"&:hover\": {\n      backgroundColor: fade(theme.palette.common.white, 0.25)\n    },\n    marginRight: theme.spacing(2),\n    marginLeft: 0,\n    width: \"100%\",\n    [theme.breakpoints.up(\"sm\")]: {\n      marginLeft: theme.spacing(3),\n      width: \"auto\"\n    }\n  },\n  searchIcon: {\n    width: theme.spacing(7),\n    height: \"100%\",\n    position: \"absolute\",\n    pointerEvents: \"none\",\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\"\n  },\n  inputRoot: {\n    color: \"inherit\"\n  },\n  inputInput: {\n    padding: theme.spacing(1, 1, 1, 7),\n    transition: theme.transitions.create(\"width\"),\n    width: \"100%\",\n    [theme.breakpoints.up(\"md\")]: {\n      width: 200\n    }\n  }\n});\n\nclass SearchInput extends Component {\n  searchInput = undefined;\n  timer = undefined;\n\n  handleChange = evt => {\n    this.searchInput = evt.target.value;\n    if (this.props.enableTimeout) {\n      if (this.timer) {\n        clearTimeout(this.timer);\n      }\n      this.timer = setTimeout(this.handleSearch, this.props.time);\n    } else {\n      this.handleSearch();\n    }\n  };\n\n  handleSearch = () => {\n    if (this.searchInput !== undefined) this.props.onChange(this.searchInput);\n  };\n\n  render() {\n    const { classes, style, placeholder } = this.props;\n    return (\n      <div className={classes.search} style={style}>\n        <div className={classes.searchIcon}>\n          <SearchIcon />\n        </div>\n        <InputBase\n          ref={this.setSearchInput}\n          placeholder={placeholder}\n          classes={{\n            root: classes.inputRoot,\n            input: classes.inputInput\n          }}\n          inputProps={{ \"aria-label\": \"search\" }}\n          onChange={this.handleChange}\n        />\n      </div>\n    );\n  }\n}\n\nSearchInput.propTypes = {\n  placeholder: PropTypes.string,\n  onChange: PropTypes.func,\n  time: PropTypes.number,\n  enableTimeout: PropTypes.bool,\n  style: PropTypes.object\n};\n\nSearchInput.defaultProps = {\n  placeholder: \"Search...\",\n  onChange: input => {\n    console.log(input);\n  },\n  time: 250,\n  enableTimeout: true,\n  style: {}\n};\n\nexport default withStyles(styles, { withTheme: true })(SearchInput);\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport InputLabel from \"@material-ui/core/InputLabel\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport MaterialSelect from \"@material-ui/core/Select\";\nimport PropTypes from \"prop-types\";\n\nconst useStyles = makeStyles(theme => ({\n  formControl: {\n    margin: theme.spacing(1),\n    minWidth: 120\n  }\n}));\n\nconst Select = props => {\n  const classes = useStyles();\n\n  let noneOption = <div></div>;\n  if (props.noneOption) {\n    noneOption = (\n      <MenuItem value=\"\">\n        <em>None</em>\n      </MenuItem>\n    );\n  }\n\n  return (\n    <FormControl\n      variant={props.variant}\n      className={classes.formControl}\n      style={props.style}\n      hiddenLabel={props.label === undefined ? true : false}\n    >\n      <InputLabel id=\"movai-react-select\">{props.label}</InputLabel>\n      <MaterialSelect\n        labelId=\"movai-react-select\"\n        id={props.id}\n        value={props.value}\n        onChange={props.onChange}\n        inputProps={props.inputProps}\n      >\n        {noneOption}\n        {props.options.map((element, index) => {\n          return (\n            <MenuItem key={index} value={element}>\n              {element}\n            </MenuItem>\n          );\n        })}\n      </MaterialSelect>\n    </FormControl>\n  );\n};\n\nSelect.propTypes = {\n  value: PropTypes.string,\n  options: PropTypes.array,\n  noneOption: PropTypes.bool,\n  label: PropTypes.string,\n  variant: PropTypes.string,\n  style: PropTypes.object,\n  onChange: PropTypes.func,\n  id: PropTypes.string,\n  inputProps: PropTypes.object\n};\nSelect.defaultProps = {\n  value: \"option2\",\n  options: [\"option1\", \"option2\", \"option3\"],\n  variant: \"filled\",\n  noneOption: true,\n  onChange: evt => console.log(evt.target.value),\n  id: \"movai-react-select\"\n};\n\nexport default Select;\n","import * as React from \"react\";\nimport PropTypes from \"prop-types\";\nimport clsx from \"clsx\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport { capitalize } from \"@material-ui/core/utils\";\nimport { svgIcons } from \"./svg-icons/svgIcons\";\n\nexport const styles = () => {\n  return {\n    /* Styles applied to the root element. */\n    root: {\n      // borderRadius: theme.shape.borderRadius,\n      backgroundColor: \"transparent\",\n      display: \"flex\",\n      padding: \"6px 16px\"\n    },\n    /* Styles applied to the root element if `variant=\"filled\"` and `color=\"success\"`. */\n    filledSuccess: {\n      color: \"#fff\",\n      // fontWeight: theme.typography.fontWeightMedium,\n      backgroundColor: \"#4caf50\"\n    },\n    /* Styles applied to the root element if `variant=\"filled\"` and `color=\"info\"`. */\n    filledInfo: {\n      color: \"#fff\",\n      // fontWeight: theme.typography.fontWeightMedium,\n      backgroundColor: \"#2196f3\"\n    },\n    /* Styles applied to the root element if `variant=\"filled\"` and `color=\"warning\"`. */\n    filledWarning: {\n      color: \"#fff\",\n      // fontWeight: theme.typography.fontWeightMedium,\n      backgroundColor: \"#ff9800\"\n    },\n    /* Styles applied to the root element if `variant=\"filled\"` and `color=\"error\"`. */\n    filledError: {\n      color: \"#fff\",\n      // fontWeight: theme.typography.fontWeightMedium,\n      backgroundColor: \"#f44336\"\n    },\n    /* Styles applied to the icon wrapper element. */\n    icon: {\n      marginRight: 12,\n      padding: \"7px 0\",\n      display: \"flex\",\n      fontSize: 22,\n      opacity: 0.9\n    },\n    /* Styles applied to the message wrapper element. */\n    message: {\n      padding: \"8px 0\",\n      display: \"flex\",\n      flexDirection: \"column\",\n      justifyContent: \"center\"\n    },\n    /* Styles applied to the action wrapper element if `action` is provided. */\n    action: {\n      display: \"flex\",\n      alignItems: \"center\",\n      marginLeft: \"auto\",\n      paddingLeft: 16,\n      marginRight: -8\n    }\n  };\n};\n\nconst defaultIconMapping = {\n  success: svgIcons.SuccessOutlined,\n  warning: svgIcons.ReportProblemOutlined,\n  error: svgIcons.ErrorOutline,\n  info: svgIcons.InfoOutlined\n};\n\nconst Alert = props => {\n  const {\n    action,\n    children,\n    classes,\n    className,\n    closeText = \"Close\",\n    color,\n    icon,\n    iconMapping = defaultIconMapping,\n    onClose,\n    role = \"alert\",\n    severity = \"success\",\n    variant = \"standard\",\n    theme,\n    ...other\n  } = props;\n\n  return (\n    <div\n      className={clsx(\n        classes.root,\n        classes[`${variant}${capitalize(color || severity)}`],\n        className\n      )}\n      {...other}\n    >\n      {icon !== false ? (\n        <div className={classes.icon}>\n          {icon || iconMapping[severity] || defaultIconMapping[severity]}\n        </div>\n      ) : null}\n      <div className={classes.message}>{children}</div>\n      {action != null ? <div className={classes.action}>{action}</div> : null}\n      {action == null && onClose ? (\n        <div className={classes.action}>\n          <IconButton\n            size=\"small\"\n            aria-label={closeText}\n            title={closeText}\n            color=\"inherit\"\n            onClick={onClose}\n          >\n            {svgIcons.Close}\n          </IconButton>\n        </div>\n      ) : null}\n    </div>\n  );\n};\n\nAlert.propTypes = {\n  // ----------------------------- Warning --------------------------------\n  // | These PropTypes are generated from the TypeScript type definitions |\n  // |     To update them edit the d.ts file and run \"yarn proptypes\"     |\n  // ----------------------------------------------------------------------\n  /**\n   * The action to display. It renders after the message, at the end of the alert.\n   */\n  action: PropTypes.node,\n  /**\n   * The content of the component.\n   */\n  children: PropTypes.node,\n  /**\n   * Override or extend the styles applied to the component.\n   * See [CSS API](#css) below for more details.\n   */\n  classes: PropTypes.object,\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n  /**\n   * Override the default label for the *close popup* icon button.\n   *\n   * For localization purposes, you can use the provided [translations](/guides/localization/).\n   */\n  closeText: PropTypes.string,\n  /**\n   * The main color for the alert. Unless provided, the value is taken from the `severity` prop.\n   */\n  color: PropTypes.oneOf([\"error\", \"info\", \"success\", \"warning\"]),\n  /**\n   * Override the icon displayed before the children.\n   * Unless provided, the icon is mapped to the value of the `severity` prop.\n   */\n  icon: PropTypes.node,\n  /**\n   * The component maps the `severity` prop to a range of different icons,\n   * for instance success to `<SuccessOutlined>`.\n   * If you wish to change this mapping, you can provide your own.\n   * Alternatively, you can use the `icon` prop to override the icon displayed.\n   */\n  iconMapping: PropTypes.shape({\n    error: PropTypes.node,\n    info: PropTypes.node,\n    success: PropTypes.node,\n    warning: PropTypes.node\n  }),\n  /**\n   * Callback fired when the component requests to be closed.\n   * When provided and no `action` prop is set, a close icon button is displayed that triggers the callback when clicked.\n   *\n   * @param {object} event The event source of the callback.\n   */\n  onClose: PropTypes.func,\n  /**\n   * The ARIA role attribute of the element.\n   */\n  role: PropTypes.string,\n  /**\n   * The severity of the alert. This defines the color and icon used.\n   */\n  severity: PropTypes.oneOf([\"error\", \"info\", \"success\", \"warning\"]),\n  /**\n   * The variant to use.\n   */\n  variant: PropTypes.oneOf([\"filled\", \"outlined\", \"standard\"])\n};\n\nexport default withStyles(styles, { name: \"MuiAlert\" })(Alert);\n","// import * as React from \"react\";\n// import SvgIcon from \"@material-ui/core/SvgIcon\";\n\n// export default function createSvgIcon({\n//   path = \"\",\n//   style = {},\n//   fill = \"#fff\",\n//   width = \"100%\",\n//   className = \"\",\n//   height = \"100%\",\n//   viewBox = \"0 0 32 32\"\n// }) {\n//   return (\n//     <svg\n//       width={width}\n//       style={style}\n//       height={height}\n//       viewBox={viewBox}\n//       className={className}\n//       xmlns=\"http://www.w3.org/2000/svg\"\n//       xmlnsXlink=\"http://www.w3.org/1999/xlink\"\n//     >\n//       <path d={path} fill={fill} />\n//     </svg>\n//   );\n// }\n\n// export default function createSvgIcon(path, displayName) {\n//   const Component = React.memo(\n//     React.forwardRef((props, ref) => (\n//       <SvgIcon data-mui-test={`${displayName}Icon`} ref={ref} {...props}>\n//         {path}\n//       </SvgIcon>\n//       <SvgIcon>\n//         {path}\n//       </SvgIcon>\n//     ))\n//   );\n\n//   if (process.env.NODE_ENV !== \"production\") {\n//     Component.displayName = `${displayName}Icon`;\n//   }\n\n//   Component.muiName = SvgIcon.muiName;\n\n//   return Component;\n// }\n\nimport React from \"react\";\n\nconst CreateSVGIcon = ({\n  path = \"\",\n  style = {},\n  fill = \"#fff\",\n  width = \"100%\",\n  height = \"100%\",\n  className = \"\",\n  viewBox = \"0 0 24 24\"\n}) => (\n  <svg\n    width={width}\n    style={style}\n    height={height}\n    viewBox={viewBox}\n    xmlns=\"http://www.w3.org/2000/svg\"\n    className={`svg-icon ${className || \"\"}`}\n    xmlnsXlink=\"http://www.w3.org/1999/xlink\"\n  >\n    <path fill={fill} d={path} />\n  </svg>\n);\n\nexport default CreateSVGIcon;\n","import React from \"react\";\nimport CreateSVGIcon from \"./CreateSVGIcon\";\n\nexport const svgIcons = {\n  Close: (\n    <CreateSVGIcon\n      width={24}\n      path=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"\n    />\n  ),\n  ErrorOutline: (\n    <CreateSVGIcon\n      width={24}\n      path=\"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z\"\n    ></CreateSVGIcon>\n  ),\n  InfoOutlined: (\n    <CreateSVGIcon\n      width={24}\n      path=\"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z\"\n    ></CreateSVGIcon>\n  ),\n  ReportProblemOutlined: (\n    <CreateSVGIcon\n      width={24}\n      path=\"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z\"\n    ></CreateSVGIcon>\n  ),\n  SuccessOutlined: (\n    <CreateSVGIcon\n      width={24}\n      path=\"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z\"\n    ></CreateSVGIcon>\n  )\n};\n","var api = require(\"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!./Snackbar.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","// Inspired from https://github.com/GA-MO/react-confirm-alert\n\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { render, unmountComponentAtNode } from \"react-dom\";\n// import { Alert } from \"@material-ui/lab\";\nimport Alert from \"./Alert/Alert\";\n\nimport \"./Snackbar.css\";\n\nimport { svgIcons } from \"./Alert/svg-icons/svgIcons\";\n\nclass ReactConfirmAlert extends Component {\n  static propTypes = {\n    message: PropTypes.string,\n    customUI: PropTypes.func,\n    closeOnClickOutside: PropTypes.bool,\n    closeOnEscape: PropTypes.bool,\n    willUnmount: PropTypes.func,\n    onClickOutside: PropTypes.func,\n    onKeypressEscape: PropTypes.func,\n    // new props\n    severity: PropTypes.string,\n    closeText: PropTypes.string,\n    autoHideDuration: PropTypes.number,\n    closable: PropTypes.bool\n  };\n\n  autoClose = null;\n\n  static defaultProps = {\n    closeOnClickOutside: true,\n    closeOnEscape: true,\n    willUnmount: () => null,\n    onClickOutside: () => null,\n    onKeypressEscape: () => null,\n    // new props\n    severity: \"info\", // error, warning, info or success\n    closeText: \"Close\",\n    autoHideDuration: 6000,\n    closable: true\n  };\n\n  handleClickButton = button => {\n    if (button.onClick) button.onClick();\n    this.close();\n  };\n\n  handleClickOverlay = e => {\n    const { closeOnClickOutside, onClickOutside } = this.props;\n    const isClickOutside = e.target === this.overlay;\n\n    if (closeOnClickOutside && isClickOutside) {\n      onClickOutside();\n      this.close();\n    }\n  };\n\n  close = () => {\n    removeBodyClass();\n    removeElementReconfirm();\n  };\n\n  keyboardClose = event => {\n    const { closeOnEscape, onKeypressEscape } = this.props;\n    const isKeyCodeEscape = event.keyCode === 27;\n\n    if (closeOnEscape && isKeyCodeEscape) {\n      onKeypressEscape(event);\n      this.close();\n    }\n  };\n\n  componentDidMount = () => {\n    document.addEventListener(\"keydown\", this.keyboardClose, false);\n    this.autoClose = setTimeout(() => {\n      if (\n        document.getElementById(\"react-confirm-alert\") ||\n        document.getElementById(\"react-confirm-alert-body-element\")\n      ) {\n        this.close();\n      }\n    }, this.props.autoHideDuration);\n  };\n\n  componentWillUnmount = () => {\n    document.removeEventListener(\"keydown\", this.keyboardClose, false);\n    clearTimeout(this.autoClose);\n    this.props.willUnmount();\n  };\n\n  renderCustomUI = () => {\n    const { title, message, customUI } = this.props;\n    const dataCustomUI = {\n      title,\n      message,\n      onClose: this.close\n    };\n\n    return customUI(dataCustomUI);\n  };\n\n  render() {\n    const {\n      message,\n      customUI,\n      severity,\n      closeText,\n      closable,\n      theme\n    } = this.props;\n\n    return (\n      <div\n        className=\"react-confirm-alert-overlay\"\n        ref={dom => (this.overlay = dom)}\n        onClick={this.handleClickOverlay}\n      >\n        <div className=\"react-confirm-alert\">\n          {customUI ? (\n            this.renderCustomUI()\n          ) : (\n            <div className=\"react-confirm-alert-body\">\n              <Alert\n                theme={theme}\n                elevation={6}\n                variant=\"filled\"\n                severity={severity}\n                closeText={closeText}\n                action={\n                  closable ? (\n                    <div\n                      className=\"icon-container\"\n                      onClick={() => this.close()}\n                    >\n                      {svgIcons.Close}\n                    </div>\n                  ) : (\n                    undefined\n                  )\n                }\n              >\n                {message}\n              </Alert>\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\nfunction createElementReconfirm(properties, theme) {\n  let divTarget = document.getElementById(\"react-confirm-alert\");\n  if (divTarget) {\n    // Rerender - the mounted ReactConfirmAlert\n    render(<ReactConfirmAlert {...properties} theme={theme} />, divTarget);\n  } else {\n    // Mount the ReactConfirmAlert component\n    document.body.children[0].classList.add(\"react-confirm-alert-blur\");\n    divTarget = document.createElement(\"div\");\n    divTarget.id = \"react-confirm-alert\";\n    document.body.appendChild(divTarget);\n    render(<ReactConfirmAlert {...properties} theme={theme} />, divTarget);\n  }\n}\n\nfunction removeElementReconfirm() {\n  const target = document.getElementById(\"react-confirm-alert\");\n  unmountComponentAtNode(target);\n  target.parentNode.removeChild(target);\n}\n\nfunction addBodyClass() {\n  document.body.classList.add(\"react-confirm-alert-body-element\");\n}\n\nfunction removeBodyClass() {\n  document.body.classList.remove(\"react-confirm-alert-body-element\");\n}\n\nexport function snackbar(properties, theme) {\n  addBodyClass();\n  createElementReconfirm(properties, theme);\n}\n\nexport default ReactConfirmAlert;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport MaterialTable from \"material-table\";\n\nimport { forwardRef } from \"react\";\n\nimport AddBox from \"@material-ui/icons/AddBox\";\nimport ArrowDownward from \"@material-ui/icons/ArrowDownward\";\nimport Check from \"@material-ui/icons/Check\";\nimport ChevronLeft from \"@material-ui/icons/ChevronLeft\";\nimport ChevronRight from \"@material-ui/icons/ChevronRight\";\nimport Clear from \"@material-ui/icons/Clear\";\nimport DeleteOutline from \"@material-ui/icons/DeleteOutline\";\nimport Edit from \"@material-ui/icons/Edit\";\nimport FilterList from \"@material-ui/icons/FilterList\";\nimport FirstPage from \"@material-ui/icons/FirstPage\";\nimport LastPage from \"@material-ui/icons/LastPage\";\nimport Remove from \"@material-ui/icons/Remove\";\nimport SaveAlt from \"@material-ui/icons/SaveAlt\";\nimport Search from \"@material-ui/icons/Search\";\nimport ViewColumn from \"@material-ui/icons/ViewColumn\";\n\nconst tableIcons = {\n  Add: forwardRef((props, ref) => <AddBox {...props} ref={ref} />),\n  Check: forwardRef((props, ref) => <Check {...props} ref={ref} />),\n  Clear: forwardRef((props, ref) => <Clear {...props} ref={ref} />),\n  Delete: forwardRef((props, ref) => <DeleteOutline {...props} ref={ref} />),\n  DetailPanel: forwardRef((props, ref) => (\n    <ChevronRight {...props} ref={ref} />\n  )),\n  Edit: forwardRef((props, ref) => <Edit {...props} ref={ref} />),\n  Export: forwardRef((props, ref) => <SaveAlt {...props} ref={ref} />),\n  Filter: forwardRef((props, ref) => <FilterList {...props} ref={ref} />),\n  FirstPage: forwardRef((props, ref) => <FirstPage {...props} ref={ref} />),\n  LastPage: forwardRef((props, ref) => <LastPage {...props} ref={ref} />),\n  NextPage: forwardRef((props, ref) => <ChevronRight {...props} ref={ref} />),\n  PreviousPage: forwardRef((props, ref) => (\n    <ChevronLeft {...props} ref={ref} />\n  )),\n  ResetSearch: forwardRef((props, ref) => <Clear {...props} ref={ref} />),\n  Search: forwardRef((props, ref) => <Search {...props} ref={ref} />),\n  SortArrow: forwardRef((props, ref) => <ArrowDownward {...props} ref={ref} />),\n  ThirdStateCheck: forwardRef((props, ref) => <Remove {...props} ref={ref} />),\n  ViewColumn: forwardRef((props, ref) => <ViewColumn {...props} ref={ref} />),\n};\n\n// More information in: https://material-table.com/#/docs/all-props\n\nconst Table = (props) => {\n  return (\n    <MaterialTable\n      style={props.style}\n      title={props.title}\n      columns={props.columns}\n      data={props.data}\n      icons={tableIcons}\n      actions={props.actions}\n      options={props.options}\n      components={props.components}\n      localization={props.localization}\n    />\n  );\n};\n\nTable.propTypes = {\n  style: PropTypes.object,\n  title: PropTypes.string,\n  columns: PropTypes.array,\n  data: PropTypes.array,\n  actions: PropTypes.array,\n  options: PropTypes.object,\n  components: PropTypes.object,\n  localization: PropTypes.object,\n};\nTable.defaultProps = {\n  style: {},\n  title: \"\",\n  columns: [],\n  data: [],\n  actions: [],\n  options: {\n    actionsColumnIndex: -1,\n    draggable: false,\n    grouping: false,\n    search: false,\n    toolbar: false,\n    searchFieldAlignment: \"left\",\n    paging: false,\n  },\n  components: {},\n};\n\nexport default Table;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport MaterialTabs from \"@material-ui/core/Tabs\";\nimport Tab from \"@material-ui/core/Tab\";\nimport Typography from \"@material-ui/core/Typography\";\n\nfunction TabPanel(props) {\n  const { children, selectedTab, index, ...other } = props;\n\n  return (\n    <Typography\n      component=\"div\"\n      role=\"tabpanel\"\n      hidden={selectedTab !== index}\n      id={`tabpanel-${index}`}\n      aria-labelledby={`tab-${index}`}\n      {...other}\n    >\n      {selectedTab === index && children}\n    </Typography>\n  );\n}\n\nTabPanel.propTypes = {\n  children: PropTypes.node,\n  index: PropTypes.any.isRequired,\n  selectedTab: PropTypes.any.isRequired\n};\n\nfunction a11yProps(index) {\n  return {\n    id: `tab-${index}`,\n    \"aria-controls\": `tabpanel-${index}`\n  };\n}\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    flexGrow: 1,\n    height: \"100%\"\n  },\n  tabPanel: {\n    flexGrow: 1,\n    minHeight: 0,\n    height: \"calc(100% - 48px)\",\n    overflowY: \"auto\"\n  }\n}));\n\nexport default function Tabs(props) {\n  const classes = useStyles();\n  const [selectedTab, setSelectedTab] = React.useState(props.selectedTab);\n\n  React.useEffect(() => {\n    if (props.selectedTab !== selectedTab) {\n      setSelectedTab(props.selectedTab);\n    }\n  }, [props.selectedTab]);\n\n  const handleChange = (event, newSelectedTab) => {\n    setSelectedTab(newSelectedTab);\n  };\n\n  return (\n    <div className={classes.root}>\n      <MaterialTabs\n        value={selectedTab}\n        onChange={handleChange}\n        indicatorColor=\"primary\"\n        textColor=\"primary\"\n      >\n        {props.tabList.map((tab, index) => (\n          <Tab key={index} label={tab.label} {...a11yProps(index)} />\n        ))}\n      </MaterialTabs>\n      {props.tabList.map((tab, index) => (\n        <TabPanel\n          key={index}\n          selectedTab={selectedTab}\n          index={index}\n          className={props.scrollable ? classes.tabPanel : undefined}\n        >\n          {tab.component}\n        </TabPanel>\n      ))}\n    </div>\n  );\n}\n\nTabs.propTypes = {\n  tabList: PropTypes.array,\n  selectedTab: PropTypes.number,\n  scrollable: PropTypes.bool\n};\n\nTabs.defaultProps = {\n  tabList: [\n    { label: \"Tab 1\", component: <div>Component 1</div> },\n    {\n      label: \"Tab 2\",\n      component: (\n        <div>\n          Lorem Ipsum is simply dummy text of the printing and typesetting\n          industry. Lorem Ipsum has been the industry standard dummy text ever\n          since the 1500s, when an unknown printer took a galley of type and\n          scrambled it to make a type specimen book. It has survived not only\n          five centuries, but also the leap into electronic typesetting,\n          remaining essentially unchanged. It was popularised in the 1960s with\n          the release of Letraset sheets containing Lorem Ipsum passages, and\n          more recently with desktop publishing software like Aldus PageMaker\n          including versions of Lorem Ipsum.\n        </div>\n      )\n    },\n    { label: \"Tab 3\", component: <div>Component 3</div> }\n  ],\n  selectedTab: 0,\n  scrollable: true\n};\n","import React from \"react\";\nimport TextField from \"@material-ui/core/TextField\";\nimport PropTypes from \"prop-types\";\n\nconst Text = props => {\n  return <TextField {...props}></TextField>;\n};\n\nText.propTypes = {};\nText.defaultProps = {};\n\nexport default Text;\n","import React from \"react\";\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\nimport Switch from \"@material-ui/core/Switch\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { green, grey } from \"@material-ui/core/colors\";\nimport PropTypes from \"prop-types\";\n\nconst useStyles = makeStyles(theme => ({\n  label: {\n    fontFamily: \"Roboto\",\n    fontStyle: \"normal\",\n    fontWeight: \"normal\",\n    fontSize: \"14px\",\n    marginLeft: 0,\n    marginRight: 0,\n    marginBottom: 0\n  },\n  colorSwitchBase: {\n    color: grey[300],\n    \"&$colorChecked\": {\n      color: green[500],\n      \"& + $colorBar\": {\n        backgroundColor: green[500]\n      }\n    }\n  },\n  colorBar: {},\n  colorChecked: {}\n}));\n\nconst Toggle = props => {\n  const classes = useStyles();\n  return (\n    <FormControlLabel\n      control={\n        <Switch\n          checked={props.toggle}\n          onChange={props.onToggle}\n          color={props.color}\n          disabled={props.disabled}\n          hidden={props.hidden}\n          size={props.size}\n          classes={{\n            switchBase: classes.colorSwitchBase,\n            checked: classes.colorChecked,\n            track: classes.colorBar\n          }}\n        />\n      }\n      labelPlacement={props.labelPlacement}\n      label={props.label}\n      classes={{ label: classes.label }}\n      style={{ ...props.style, marginLeft: 0, marginRight: 0, marginBottom: 0 }}\n    />\n  );\n};\n\nToggle.propTypes = {\n  toggle: PropTypes.bool,\n  onToggle: PropTypes.func,\n  label: PropTypes.string,\n  color: PropTypes.string,\n  labelPlacement: PropTypes.string, // 'end', 'start', 'top', 'bottom'\n  style: PropTypes.object\n};\nToggle.defaultProps = {\n  color: \"primary\" // or secondary\n};\n\nexport default Toggle;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Tree from \"react-virtualized-tree\";\nimport \"material-icons/css/material-icons.css\";\nimport \"react-virtualized/styles.css\";\nimport \"react-virtualized-tree/lib/main.css\";\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\nimport ChevronRightIcon from \"@material-ui/icons/ChevronRight\";\nimport Box from \"@material-ui/core/Box\";\nimport Grid from \"@material-ui/core/Grid\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport _get from \"lodash/get\";\nimport { ListItemsTreeWithSearch } from \"./TreeSearch\";\n\n//========================================================================================\n/*                                                                                      *\n *                                     TODO REFACTOR                                    *\n *                                                                                      */\n//========================================================================================\n\nconst styles = theme => ({\n  horizFlex: {\n    display: \"flex\",\n    flexDirection: \"row\",\n    alignItems: \"center\"\n  },\n  spaceBetween: {\n    display: \"flex\",\n    width: \"100%\",\n    justifyContent: \"space-between\"\n  },\n  preContainer: {\n    justifyContent: \"space-between\",\n    \"& button\": {\n      display: \"none\"\n    },\n    \"&:hover\": {\n      backgroundColor: \"rgba(54,181,230, 0.15)\",\n      \"& button\": {\n        display: \"inline-flex\"\n      }\n    }\n  },\n  ellipsis: {\n    whiteSpace: \"nowrap\",\n    overflow: \"hidden\",\n    textOverflow: \"ellipsis\",\n    flex: 2\n  },\n  iconSpace: {\n    flex: 1,\n    textAlign: \"right\",\n    minWidth: \"45px\",\n    \"& button\": {\n      position: \"relative\",\n      bottom: \"7px\",\n      padding: \"7px\"\n    }\n  }\n});\n\n// const {Deletable, Expandable, Favorite} = Renderers;\n\nconst testArray = [];\n\nfor (let index = 0; index < 100; index++) {\n  testArray.push({\n    id: index,\n    name: `1.0.${index}`\n  });\n}\n\nconst EXPANDED = \"EXPANDED\";\n\nclass BasicVirtualizedTree extends Component {\n  state = {\n    selectedGroup: EXPANDED,\n    groupsEnabled: true,\n    searchValue: \"\"\n  };\n\n  searchFilter = (nodes, searchValue) => {\n    const searchValueLower = searchValue.toLowerCase();\n    const filteredNodes = nodes\n      .filter(\n        node =>\n          (!node.name.includes(\"@SM\") &&\n            node.name.toLowerCase().includes(searchValueLower)) ||\n          node.children.findIndex(ch =>\n            ch.name.toLowerCase().includes(searchValueLower)\n          ) >= 0\n      )\n      .map(node => {\n        return {\n          ...node,\n          children: (node?.children || []).filter(\n            ch =>\n              ch.name &&\n              !ch.name.includes(\"@SM\") &&\n              (node.name.toLowerCase().includes(searchValueLower) ||\n                ch.name.toLowerCase().includes(searchValueLower))\n          )\n        };\n      });\n\n    // Add children id if missing\n    filteredNodes.forEach(node => {\n      node.children.forEach((child, i) => {\n        child.id = child.id ? child.id : i;\n        if (child.children) {\n          child.children.forEach((grandChild, j) => {\n            grandChild.id = grandChild.id ? grandChild.id : j;\n          });\n        }\n      });\n    });\n\n    return filteredNodes;\n  };\n\n  handleSelectedGroupChange = selectedGroup => {\n    this.setState({ selectedGroup });\n  };\n\n  // open: true -> expand\n  //       false -> collapse\n  handleExpansion = (evt, nodes, node, open) => {\n    // const treeData = _cloneDeep(nodes);\n    // _set(treeData, [node.id, \"state\"], {\n    //   expanded: open\n    // });\n    // evt.stopPropagation();\n    // this.props.handleChange(treeData);\n  };\n\n  render() {\n    const { classes } = this.props;\n    const iconStyle = <i className=\"fas fa-home\" />;\n    const nodes = this.props.data;\n    return (\n      <div>\n        <ListItemsTreeWithSearch\n          style={{\n            overflow: \"auto\"\n          }}\n          icon={iconStyle}\n          onSearch={input => {\n            this.setState({\n              searchValue: input\n            });\n          }}\n        >\n          <div style={{ height: this.props.height }}>\n            <Tree\n              nodes={this.searchFilter(nodes, this.state.searchValue)}\n              onChange={this.props.handleChange}\n            >\n              {({ style, node, ...rest }) => {\n                // Adjust tree indentation\n                style.paddingLeft = style.marginLeft / 1.5;\n                style.marginLeft = 0;\n                // Render tree element\n                return (\n                  <div\n                    style={style}\n                    onClick={() => this.props.onClickNode(node)}\n                    onDoubleClick={() => this.props.onDoubleClickNode(node)}\n                    p={2}\n                    className={\n                      !_get(node, `children`, false) ? classes.preContainer : \"\"\n                    }\n                  >\n                    <Box p={1} className={classes.inlineFlex}>\n                      <Grid alignContent={\"space-between\"} container>\n                        {_get(node, `children`, false) &&\n                          node.state?.expanded && (\n                            <ExpandMoreIcon\n                              onClick={evt =>\n                                this.handleExpansion(evt, nodes, node, false)\n                              }\n                            />\n                          )}\n                        {_get(node, `children`, false) &&\n                          !node.state?.expanded && (\n                            <ChevronRightIcon\n                              onClick={evt =>\n                                this.handleExpansion(evt, nodes, node, true)\n                              }\n                            />\n                          )}\n\n                        <div\n                          className={\n                            !_get(node, `children`, false)\n                              ? classes.spaceBetween\n                              : \"\"\n                          }\n                        >\n                          <div className={classes.ellipsis}>{node.name}</div>\n                        </div>\n                      </Grid>\n                    </Box>\n                  </div>\n                );\n              }}\n            </Tree>\n          </div>\n        </ListItemsTreeWithSearch>\n      </div>\n    );\n  }\n}\n\nBasicVirtualizedTree.propTypes = {\n  data: PropTypes.array,\n  onClickNode: PropTypes.func,\n  onDoubleClickNode: PropTypes.func,\n  handleChange: PropTypes.func,\n  height: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n};\n\nBasicVirtualizedTree.defaultProps = {\n  data: [],\n  onClickNode: () => {},\n  onDoubleClickNode: () => {},\n  handleChange: () => {},\n  height: 700\n};\n\nexport default withStyles(styles, { withTheme: true })(BasicVirtualizedTree);\n","import React, { Component } from \"react\";\nimport {\n  List,\n  InputBase,\n  IconButton,\n  Typography,\n  Divider,\n  ListItem\n} from \"@material-ui/core\";\nimport PropTypes from \"prop-types\";\nimport SearchIcon from \"@material-ui/icons/Search\";\nimport ClearIcon from \"@material-ui/icons/Clear\";\n\nclass TreeSearch extends Component {\n  searchInput = null;\n  timer = null;\n  inputRef = React.createRef();\n\n  handleChange = evt => {\n    this.searchInput = evt.target.value;\n    if (this.timer) {\n      clearTimeout(this.timer);\n    }\n    this.timer = setTimeout(this.handleSearch, 250);\n  };\n\n  handleSearch = () => {\n    if (this.searchInput !== null) this.props.search(this.searchInput);\n  };\n\n  resetValue() {\n    const input = this.inputRef.current.children[0];\n    input.value = \"\";\n    input.focus();\n    this.searchInput = \"\";\n    this.handleSearch();\n    this.forceUpdate();\n  }\n\n  isEmpty() {\n    return this.searchInput === null || this.searchInput.trim() === \"\";\n  }\n\n  render() {\n    return (\n      <Typography\n        component=\"div\"\n        style={{\n          padding: \"2px 4px\",\n          display: \"flex\",\n          alignItems: \"center\",\n          width: \"100%\"\n        }}\n      >\n        <InputBase\n          ref={this.inputRef}\n          style={{\n            marginLeft: 10,\n            flex: 1\n          }}\n          placeholder=\"Search\"\n          onChange={this.handleChange}\n        />\n        <IconButton\n          style={{ padding: 10 }}\n          onClick={() => {\n            if (!this.isEmpty()) {\n              this.resetValue();\n            }\n          }}\n        >\n          {this.isEmpty() ? <SearchIcon /> : <ClearIcon />}\n        </IconButton>\n      </Typography>\n    );\n  }\n}\n\n/**\n *\n * @param {*} props: contains children which are Items\n */\nconst ListItemsTree = props => {\n  return (\n    <List\n      style={{ paddingLeft: \"0px\", paddingRight: \"0px\", ...props.style }}\n      dense={true}\n      component=\"div\"\n      onKeyUp={props.onKeyUp}\n    >\n      {props.children}\n    </List>\n  );\n};\n\nconst ListItemsTreeWithTitle = props => {\n  return (\n    <ListItemsTree>\n      <ListItem>\n        <Typography component={props.variant}>{props.title}</Typography>\n      </ListItem>\n      <Divider />\n      {props.children}\n    </ListItemsTree>\n  );\n};\n/* \n  TODO: think about how to generalize the search\n\n  Using either the _shared/Search method or using a predicate \n*/\nconst ListItemsTreeWithSearch = props => {\n  return (\n    <ListItemsTree\n      style={{ flexGrow: 1, paddingBottom: \"0px\", paddingTop: \"0px\" }}\n      onKeyUp={props.onKeyUp}\n    >\n      <ListItem>\n        <TreeSearch search={input => props.onSearch(input)} />\n      </ListItem>\n      <Divider />\n      <Typography style={props.style} component=\"div\">\n        {React.Children.map(props.children, x => {\n          return x;\n        })}\n      </Typography>\n    </ListItemsTree>\n  );\n};\n\nListItemsTreeWithSearch.propTypes = {\n  onSearch: PropTypes.func\n};\n\nListItemsTreeWithSearch.defaultProps = {\n  onSearch: input => console.log(input)\n};\n\nexport { ListItemsTree, ListItemsTreeWithSearch, ListItemsTreeWithTitle };\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport PropTypes from \"prop-types\";\n\nconst useStyles = makeStyles(theme => ({\n  container: {\n    height: \"100%\",\n    backgroundColor: props => props.backgroundColor,\n    width: props => props.width,\n    display: \"flex\",\n    flexDirection: \"column\"\n  },\n  logoArea: {\n    padding: \"17px\",\n    textAlign: \"center\",\n    alignItems: \"center\",\n    justifyContent: \"center\"\n  },\n  navigationArea: {\n    flexGrow: 1,\n    display: \"flex\",\n    flexDirection: \"column\",\n    //justifyContent: \"center\",\n    alignItems: \"center\"\n  },\n  accountArea: {\n    padding: props => (props.unsetAccountAreaPadding ? \"unset\" : \"17px\"),\n    textAlign: \"center\",\n    alignItems: \"center\",\n    justifyContent: \"center\"\n  }\n}));\n\nconst VerticalBar = props => {\n  const classes = useStyles(props);\n  return (\n    <div className={classes.container}>\n      <div className={classes.logoArea}>{props.upperElement}</div>\n      <div className={classes.navigationArea}>\n        {props.navigationList.map((element, index) => {\n          return (\n            <div key={index} style={{ padding: \"15px 0px\" }}>\n              {element}\n            </div>\n          );\n        })}\n      </div>\n      <div className={classes.accountArea}>{props.lowerElement}</div>\n    </div>\n  );\n};\n\nVerticalBar.propTypes = {\n  upperElement: PropTypes.node.isRequired,\n  navigationList: PropTypes.array,\n  lowerElement: PropTypes.node.isRequired,\n  width: PropTypes.string,\n  backgroundColor: PropTypes.string,\n  unsetAccountAreaPadding: PropTypes.bool\n};\nVerticalBar.defaultProps = {\n  upperElement: <div></div>,\n  navigationList: [<div></div>],\n  lowerElement: <div></div>,\n  width: \"68px\",\n  backgroundColor: \"#424242\",\n  unsetAccountAreaPadding: false\n};\n\nexport default VerticalBar;\n","class Action {\n  constructor() {\n    this.memory = {};\n  }\n\n  action(parentView) {\n    parentView.getSceneMemory().forEach(memory => {\n      memory.gizmoManager.attachedMesh = null;\n      memory.camera.attachControl(memory.canvas, true);\n    });\n    parentView.closeContextDial && parentView.closeContextDial();\n    parentView.setContextActionIndex && parentView.setContextActionIndex();\n  }\n\n  onChange(parentView) {\n    // to be overwritten by children\n  }\n}\n\nexport default Action;\n","import Util3d from \"../Util3d/Util3d\";\nimport KeyPoint from \"../NodeItem/KeyPoint\";\nimport Vec3 from \"../Math/Vec3\";\nimport { Maybe } from \"monet\";\nimport MouseKeysAction from \"./MouseKeysAction\";\nimport React from \"react\";\nimport { Color3, Axis, Vector3 } from \"@babylonjs/core\";\nimport { UndoManager } from \"mov-fe-lib-core\";\n\nclass AddKeyPointAction extends MouseKeysAction {\n  constructor() {\n    super();\n    this.key = \"addKeyPoint\";\n    this.name = \"Add Key Point [4]\";\n    this.maybeMousePos = Maybe.none();\n    this.tempMesh = null;\n    this.icon = props => <i className=\"fas fa-map-marker\" {...props}></i>;\n  }\n\n  createKeyPoint(\n    position,\n    name,\n    scene,\n    parentView,\n    is2addInServer = true,\n    color = Color3.Gray()\n  ) {\n    const rootMesh = parentView.getRootNode().item.mesh;\n\n    const keyPoint = KeyPoint.ofDict(scene, {\n      name: name,\n      color: [color.r, color.g, color.b]\n    });\n    const mesh = keyPoint.mesh;\n    mesh.parent = rootMesh;\n\n    const localPosition = Util3d.getLocalCoordFromWorld(\n      { parent: rootMesh },\n      Vec3.ofBabylon(position)\n    ).toBabylon();\n\n    mesh.setPositionWithLocalVector(\n      localPosition.add(Axis.Z.scale(KeyPoint.DEFAULT_SIZE))\n    );\n\n    if (is2addInServer) {\n      parentView.addNodeItem2Tree(keyPoint, rootMesh.name, is2addInServer);\n    }\n    return mesh;\n  }\n\n  action = parentView => {\n    super.action(parentView);\n    parentView.setSelectedAction(this);\n  };\n\n  onPointerDown = (evt, parentView) => {\n    if (evt.button !== 0) {\n      return;\n    }\n    parentView.getSceneMemory().forEach(memory => {\n      const { scene, ground, camera } = memory;\n      this.maybeMousePos = Util3d.getGroundPosition(scene, ground);\n      this.maybeMousePos.forEach(mousePos => {\n        camera.detachControl(memory.canvas);\n      });\n    });\n  };\n\n  onPointerMove = (evt, parentView) => {\n    parentView.getSceneMemory().forEach(memory => {\n      const scene = memory.scene;\n      const ground = memory.ground;\n      const maybeCurrent = Util3d.getGroundPosition(scene, ground);\n      maybeCurrent.forEach(current => {\n        this.maybeMousePos.forEach(oldMousePos => {\n          if (this.tempMesh) this.tempMesh.dispose();\n          this.tempMesh = this.createKeyPoint(\n            current,\n            TEMP_KEY_POINT_NAME,\n            scene,\n            parentView,\n            false\n          );\n        });\n      });\n    });\n  };\n\n  onPointerUp = (evt, parentView) => {\n    parentView.getSceneMemory().forEach(({ scene, camera, ground, canvas }) => {\n      const maybeCurrent = Util3d.getGroundPosition(scene, ground);\n      maybeCurrent.forEach(current => {\n        this.maybeMousePos.forEach(oldMousePos => {\n          if (this.tempMesh) this.tempMesh.dispose();\n          const name = `KeyPoint${Math.floor(Math.random() * 1e3)}`;\n          const keyPoint = this.createKeyPoint(\n            current,\n            name,\n            scene,\n            parentView,\n            true,\n            new Color3(Math.random(), Math.random(), Math.random())\n          );\n          parentView.setPropertiesWithName(name);\n          parentView\n            .getUndoManager()\n            .addIt(this.getUndoAbleAction(keyPoint, scene, parentView));\n        });\n      });\n      this.maybeMousePos = Maybe.none();\n      camera.attachControl(canvas, true);\n    });\n  };\n\n  getUndoAbleAction(mesh, scene, parentView) {\n    return UndoManager.actionBuilder()\n      .doAction(() => {\n        const keyPoint = this.createKeyPoint(\n          Vector3.Zero(),\n          mesh.name,\n          scene,\n          parentView,\n          true,\n          mesh.material.diffuseColor\n        );\n        keyPoint.position = mesh.position;\n        parentView.updateNodeInServer(mesh.name);\n      })\n      .undoAction(() => {\n        parentView.deleteNodeFromTreeUsingName(mesh.name);\n      })\n      .build();\n  }\n}\n\nconst TEMP_KEY_POINT_NAME = \"temp_key_point\";\nexport default AddKeyPointAction;\n","import Util3d from \"../Util3d/Util3d\";\nimport Vec3 from \"../Math/Vec3\";\nimport Action from \"./Action\";\nimport Map from \"../NodeItem/Map\";\nimport { Maybe } from \"monet\";\nimport React from \"react\";\nimport GlobalRef from \"../NodeItem/GlobalRef\";\nimport { Vector3 } from \"@babylonjs/core\";\nimport DefaultScene from \"../Utils/DefaultScene\";\nimport { ACTIONS } from \"../MainView/MainViewActions\";\nimport MapLoader from \"../AssetsManager/MapLoader\";\nimport { UndoManager } from \"mov-fe-lib-core\";\nimport AssetsManager from \"../AssetsManager/AssetsManager\";\n\nclass AddMapAction extends Action {\n  constructor(name, mapLoader) {\n    super();\n    this.name = name;\n    this.key = `addMap${name}`;\n    this.mapLoader = mapLoader;\n    this.icon = props => <i {...props} className=\"fas fa-map\"></i>;\n    this.firstTimeLoad = true;\n  }\n\n  addMap(parentView) {\n    parentView.getSceneMemory().forEach(async memory => {\n      const { scene, camera } = memory;\n      const {\n        textureSrc,\n        resolution,\n        origin,\n        imageSize\n      } = await this.mapLoader.load();\n\n      const width = resolution * imageSize[0];\n      const height = resolution * imageSize[1];\n      const mesh = Util3d.groundBuilder(scene)\n        .name(Maybe.fromNull(this.memory[\"name\"]).orSome(this.name))\n        .width(width)\n        .height(height)\n        .textureSrc(textureSrc)\n        .build();\n\n      const originPos = Vec3.of([-width / 2, -height / 2, 0]).sub(\n        Vec3.of(origin)\n      );\n\n      const rootNode = parentView.getRootNode();\n      const parent = rootNode.item.mesh.parent;\n      parent.position = GlobalRef.inverseCoordinates(originPos.toBabylon());\n      camera.setTarget(\n        new Vector3(parent.position.x, parent.position.y, parent.position.z)\n      );\n\n      const map = new Map(\n        mesh,\n        [width, height],\n        this.textureSrc,\n        Maybe.fromNull(this.memory[\"assetName\"]).orSome(this.name)\n      );\n\n      const isVisible = Maybe.fromNull(this.memory[\"isVisible\"]).orSome(true);\n      const is2sendServer = Maybe.fromNull(this.memory[\"isImport\"])\n        .map(x => !x)\n        .orSome(true);\n\n      mesh.setEnabled(isVisible);\n      parentView.addNodeItem2Tree(map, null, is2sendServer, isVisible);\n      memory.ground.dispose();\n      memory.ground = DefaultScene.createMeshGround(scene, width, height);\n      this.memory[\"isImport\"] = false;\n    });\n  }\n\n  action(parentView) {\n    super.action(parentView);\n    const maybeNode = parentView.getNodeFromTree(this.name);\n    maybeNode.orElseRun(() => {\n      const isImport = this.memory[\"isImport\"];\n      // you shouldn't be able to undo when importing a scene. isImport prevents removing the map when you undo.\n      // firstTimeLoad condition to prevent adding a map when fast map switch\n      if (isImport && this.firstTimeLoad) {\n        this.addMap(parentView);\n        this.firstTimeLoad = false;\n      } else {\n        parentView.getUndoManager().doIt(this.getUndoAction(parentView));\n      }\n    });\n    parentView.setSelectedAction(ACTIONS().orbit);\n  }\n\n  getUndoAction(parentView) {\n    if (parentView.getObjectTree().length < 2) {\n      return UndoManager.actionBuilder()\n        .doAction(() => {\n          this.addMap(parentView);\n        })\n        .undoAction(() => {\n          const name = parentView.getObjectTree()[1].title;\n          parentView.deleteNodeFromTreeUsingName(name);\n        })\n        .build();\n    } else {\n      const oldMapName = parentView.getObjectTree()[1].title;\n      const newMapName = this.name;\n      return UndoManager.actionBuilder()\n        .doAction(() => {\n          this.switchMaps(oldMapName, newMapName, parentView);\n        })\n        .undoAction(() => {\n          parentView.deleteNodeFromTreeUsingName(newMapName);\n          Maybe.fromNull(\n            AssetsManager.getInstance().getAssetsActionMap()[oldMapName]\n          ).forEach(a => a.action(parentView));\n        })\n        .build();\n    }\n  }\n\n  switchMaps(oldMapName, newMapName, parentView) {}\n\n  getType = () => AddMapAction.TYPE;\n\n  deleteAsset = () => {};\n\n  download = async () => {\n    const { textureSrc } = await this.mapLoader.load();\n    const { yamlSrc } = this.mapLoader;\n    const downloadLinks = (\n      <div style={{ display: \"flex\", flexDirection: \"column\" }}>\n        <div style={{ display: \"flex\", flexDirection: \"row\" }}>\n          <div style={{ marginRight: \"5px\" }}>Image:</div>\n          <a href={textureSrc} download>\n            {textureSrc}\n          </a>\n        </div>\n        <div style={{ display: \"flex\", flexDirection: \"row\" }}>\n          <div style={{ marginRight: \"5px\" }}>Yaml:</div>\n          <a href={MapLoader.getMapUrl(yamlSrc)} download>\n            {yamlSrc}\n          </a>\n        </div>\n      </div>\n    );\n  };\n\n  static TYPE = \"AddMapAction\";\n}\n\nexport default AddMapAction;\n","import Action from \"./Action\";\nimport React from \"react\";\nimport { ACTIONS } from \"../MainView/MainViewActions\";\nimport MeshLoader from \"../Utils/MeshLoader\";\nimport { Maybe } from \"monet\";\nimport Mesh from \"../NodeItem/Mesh\";\nimport { Vector3, Quaternion, Color3, StandardMaterial } from \"@babylonjs/core\";\nimport { UndoManager } from \"mov-fe-lib-core\";\n\n//\nclass AddMeshAction extends Action {\n  constructor(mesh) {\n    super();\n    this.key = mesh.id;\n    this.name = mesh.name;\n    this.icon = props => <i {...props} className=\"fas fa-draw-polygon\"></i>;\n  }\n\n  action(parentView) {\n    super.action(parentView);\n    console.log(`Mesh ${this.key} : ${this.name}`, this.memory);\n    this.addMesh(parentView);\n    parentView.setSelectedAction(ACTIONS().dragObjects);\n  }\n\n  addMesh = parentView => {\n    parentView.getSceneMemory().forEach(memory => {\n      const { scene } = memory;\n      const actionMemoryClone = { ...this.memory };\n      const isImport = this.getIsImport(actionMemoryClone);\n      const finalName = this.getFinalNameFromMemory(\n        actionMemoryClone,\n        isImport\n      );\n      if (isImport) {\n        this.loadMesh(\n          parentView,\n          scene,\n          actionMemoryClone,\n          isImport,\n          finalName\n        );\n      } else {\n        parentView\n          .getUndoManager()\n          .doIt(\n            this.getUndoAbleAction(\n              parentView,\n              scene,\n              actionMemoryClone,\n              isImport,\n              finalName\n            )\n          );\n      }\n    });\n    this.memory[\"isImport\"] = false;\n  };\n\n  getIsImport(memory) {\n    return ofNull(memory[\"isImport\"]).orSome(false);\n  }\n\n  getFinalNameFromMemory(memory, isImport) {\n    return ofNull(memory[\"nodeItemDict\"])\n      .flatMap(d => (isImport ? some(d.name) : none()))\n      .orSome(`${this.name}${Math.floor(Math.random() * 100)}`);\n  }\n\n  getUndoAbleAction(parentView, scene, actionMemory, isImport, finalName) {\n    return UndoManager.actionBuilder()\n      .doAction(() => {\n        this.loadMesh(parentView, scene, actionMemory, isImport, finalName);\n      })\n      .undoAction(() => {\n        parentView.deleteNodeFromTreeUsingName(finalName);\n      })\n      .build();\n  }\n\n  loadMesh(parentView, scene, actionMemory, isImport, finalName) {\n    MeshLoader.of(scene)\n      .load(this.key)\n      .then(this.transformMesh(parentView, scene, actionMemory, isImport))\n      .then(this.addMesh2Scene(parentView, actionMemory, isImport, finalName));\n  }\n\n  transformMesh = (parentView, scene, actionMemory, isImport) => mesh => {\n    const parentMesh = this.getParentMesh(parentView);\n    mesh.parent = parentMesh;\n    mesh.createNormals();\n    const maybeDict = ofNull(actionMemory[\"nodeItemDict\"]);\n    mesh.position = maybeDict\n      .flatMap(d => (isImport ? some(d.position) : none()))\n      .map(Vector3.FromArray)\n      .orSome(Vector3.Zero());\n    mesh.rotationQuaternion = maybeDict\n      .flatMap(d => (isImport ? some(d.quaternion) : none()))\n      .map(\n        quaternion =>\n          new Quaternion(\n            quaternion[1],\n            quaternion[2],\n            quaternion[3],\n            quaternion[0]\n          )\n      )\n      .orSome(Quaternion.Identity());\n    const material = new StandardMaterial(`Mesh${mesh.name}`, scene);\n    const color = maybeDict\n      .flatMap(d => (isImport ? some(d.color) : none()))\n      .map(Color3.FromArray)\n      .orSome(Color3.Gray());\n    material.diffuseColor = color;\n    material.emissiveColor = color;\n    mesh.material = material;\n    return mesh;\n  };\n\n  addMesh2Scene = (parentView, actionMemory, isImport, finalName) => mesh => {\n    const parentMesh = this.getParentMesh(parentView);\n    mesh.name = finalName;\n    const meshItem = new Mesh(\n      mesh,\n      this.name,\n      ofNull(actionMemory[\"nodeItemDict\"])\n        .flatMap(x => (isImport ? some(x.keyValueMap) : none()))\n        .orSome({})\n    );\n\n    parentView.addNodeItem2Tree(meshItem, parentMesh.name, !isImport);\n    parentView.renderMenus();\n  };\n\n  getParentMesh = parentView => {\n    return ofNull(this.memory[\"parentObj\"])\n      .map(parentObj => parentObj.parent)\n      .flatMap(parentName => parentView.getNodeFromTree(parentName))\n      .map(treeNode => treeNode.item.mesh)\n      .orSome(parentView.getRootNode().item.mesh);\n  };\n\n  getType = () => AddMeshAction.TYPE;\n  static TYPE = \"AddMeshAction\";\n\n  deleteAsset = () => {};\n\n  download = async () => {\n    const downloadLinks = (\n      <div style={{ display: \"flex\", flexDirection: \"column\" }}>\n        <div style={{ display: \"flex\", flexDirection: \"row\" }}>\n          <div style={{ marginRight: \"5px\" }}>Mesh:</div>\n          <a href={MeshLoader.getMeshUrl(this.key)} download>\n            {this.key}\n          </a>\n        </div>\n      </div>\n    );\n  };\n}\n\nconst ofNull = Maybe.fromNull;\nconst none = Maybe.none;\nconst some = Maybe.some;\nexport default AddMeshAction;\n","import { Maybe } from \"monet\";\nimport MouseKeysAction from \"./MouseKeysAction\";\nimport BoxRegion from \"../NodeItem/BoxRegion\";\nimport Vec3 from \"../Math/Vec3\";\nimport Util3d from \"../Util3d/Util3d\";\nimport React from \"react\";\nimport { Color3 } from \"@babylonjs/core\";\nimport { UndoManager } from \"mov-fe-lib-core\";\n\nclass BoxRegionAction extends MouseKeysAction {\n  constructor() {\n    super();\n    this.key = \"drawBoxRegion\";\n    this.name = \"Draw Box Region [3]\";\n    this.maybeMousePos = Maybe.none();\n    this.tempMesh = null;\n    this.icon = props => <i className=\"fas fa-square\" {...props} />;\n  }\n\n  action = parentView => {\n    super.action(parentView);\n    parentView.setSelectedAction(this);\n  };\n\n  onPointerDown = (evt, parentView) => {\n    if (!(evt.buttons === 1)) return;\n    parentView.getSceneMemory().forEach(memory => {\n      const scene = memory.scene;\n      const ground = memory.ground;\n      const camera = memory.camera;\n      const maybeMousePos = Util3d.getGroundPosition(scene, ground);\n      this.maybeMousePos = maybeMousePos;\n      maybeMousePos.forEach(mousePos => {\n        camera.detachControl(memory.canvas);\n      });\n    });\n  };\n\n  onPointerMove = (evt, parentView) => {\n    parentView.getSceneMemory().forEach(memory => {\n      const scene = memory.scene;\n      const ground = memory.ground;\n      const maybeCurrent = Util3d.getGroundPosition(scene, ground);\n      maybeCurrent.forEach(current => {\n        this.maybeMousePos.forEach(oldMousePos => {\n          if (this.tempMesh) this.tempMesh.dispose();\n          this.tempMesh = this.createBoxRegion(\n            [oldMousePos, current],\n            TEMP_BOX_REGION_NAME,\n            scene,\n            parentView,\n            false\n          );\n        });\n      });\n    });\n  };\n\n  onPointerUp = (evt, parentView) => {\n    parentView.getSceneMemory().forEach(memory => {\n      const scene = memory.scene;\n      const camera = memory.camera;\n      const ground = memory.ground;\n      const maybeCurrent = Util3d.getGroundPosition(scene, ground);\n      maybeCurrent.forEach(current => {\n        this.maybeMousePos.forEach(oldMousePos => {\n          if (current.subtract(oldMousePos).length() < 1e-2) return;\n          this.tempMesh.dispose();\n          const name = `BoxRegion${Math.floor(Math.random() * 1e3)}`;\n          const boxMesh = this.createBoxRegion(\n            [oldMousePos, current],\n            name,\n            scene,\n            parentView,\n            true\n          );\n          parentView.setPropertiesWithName(name);\n          parentView\n            .getUndoManager()\n            .addIt(\n              this.getUndoAbleAction(\n                [oldMousePos, current],\n                boxMesh,\n                scene,\n                parentView\n              )\n            );\n        });\n      });\n      this.maybeMousePos = Maybe.none();\n      camera.attachControl(memory.canvas, true);\n    });\n  };\n\n  getUndoAbleAction(points, mesh, scene, parentView) {\n    return UndoManager.actionBuilder()\n      .doAction(() => {\n        this.createBoxRegion(points, mesh.name, scene, parentView, true);\n      })\n      .undoAction(() => {\n        parentView.deleteNodeFromTreeUsingName(mesh.name);\n      })\n      .build();\n  }\n\n  createBoxRegion = (\n    region,\n    name,\n    scene,\n    parentView,\n    is2addInServer = true,\n    color = Color3.Red(),\n    height = 1\n  ) => {\n    const rootMesh = parentView.getRootNode().item.mesh;\n\n    const localRegion = region.map(r =>\n      Util3d.getLocalCoordFromWorld({ parent: rootMesh }, Vec3.ofBabylon(r))\n    );\n\n    localRegion[1] = localRegion[1].add(Vec3.of([0, 0, height]));\n    const middlePoint = localRegion[0].add(localRegion[1]).scale(0.5);\n    const centeredRegion = localRegion.map(r => r.sub(middlePoint));\n\n    const boxRegionItem = BoxRegion.ofDict(\n      scene,\n      {\n        name: name,\n        position: middlePoint.toArray(),\n        color: [color.r, color.g, color.b],\n        corners: centeredRegion.map(x => x.toArray())\n      },\n      parentView\n    );\n    boxRegionItem.mesh.parent = rootMesh;\n    if (is2addInServer) {\n      parentView.addNodeItem2Tree(boxRegionItem, rootMesh.name, is2addInServer);\n    }\n    return boxRegionItem.mesh;\n  };\n}\n\nconst TEMP_BOX_REGION_NAME = \"temp_box_region\";\nexport default BoxRegionAction;\n","import Util3d from \"../Util3d/Util3d\";\nimport Vec3 from \"../Math/Vec3\";\nimport { Maybe } from \"monet\";\nimport MouseKeysAction from \"./MouseKeysAction\";\nimport React from \"react\";\nimport { Vector3 } from \"@babylonjs/core\";\nimport { UndoManager } from \"mov-fe-lib-core\";\nimport Clipboard from \"../Utils/Clipboard\";\nimport { selectOneAction } from \"../Utils/Utils\";\nimport SelectionPlaceHolder from \"../Util3d/SelectionPlaceHolder\";\nimport MeshSelector from \"../MainView/MeshSelector\";\nimport Vec2 from \"../Math/Vec2\";\nimport ReactDOM from \"react-dom\";\nimport TreeObject from \"../TreeObject/TreeObject\";\nimport GlobalRef from \"../NodeItem/GlobalRef\";\nimport GraphItem from \"../NodeItem/GraphItem\";\nimport Map from \"../NodeItem/Map\";\n\nclass DragObjectsAction extends MouseKeysAction {\n  constructor() {\n    super();\n    this.key = \"dragObject\";\n    this.name = \"Grab Objects [1]\";\n    this.icon = props => <i className=\"far fa-hand-paper\" {...props}></i>;\n    this.maybeSelectedMesh = Maybe.none();\n    this.clickPointInWorld = Vec3.ZERO;\n    this.movePointInWorld = Vec3.ZERO;\n    this.startDivPos = Vec2.ZERO;\n    this.corners = [];\n  }\n\n  action = parentView => {\n    super.action(parentView);\n    parentView.setSelectedAction(this);\n  };\n\n  onPointerDown = (evt, parentView) => {\n    if (!(evt.buttons === 1 || evt.buttons === 2)) return;\n    parentView.getSceneMemory().forEach(({ scene, ground }) => {\n      this.maybeSelectedMesh = Util3d.pickMesh(scene, ground);\n      this.maybeSelectedMesh.forEach(currentMesh =>\n        this.dragDownMesh(currentMesh, parentView, evt)\n      );\n      this.maybeSelectedMesh.orLazy(() => {\n        this.dragDownWithoutMesh(parentView, evt);\n      });\n    });\n  };\n\n  onPointerMove = (evt, parentView) => {\n    if (!(evt.buttons === 1)) return;\n    parentView.getSceneMemory().forEach(({ scene, ground }) => {\n      // check that a mesh was selected\n      this.maybeSelectedMesh.forEach(selectedMesh => {\n        Util3d.getGroundPosition(scene, ground).forEach(groundPos => {\n          this.dragMoveMesh(parentView, groundPos);\n        });\n      });\n      this.maybeSelectedMesh.orLazy(() => {\n        this.dragMoveWithoutMesh(evt);\n      });\n    });\n  };\n\n  onPointerUp = (evt, parentView) => {\n    parentView.getSceneMemory().forEach(({ camera, scene, ground, canvas }) => {\n      this.maybeSelectedMesh.forEach(selectedMesh => {\n        this.dragUpMesh(selectedMesh, parentView, scene, ground);\n      });\n      this.maybeSelectedMesh.orLazy(() => {\n        this.dragUpWithoutMesh(parentView, scene);\n      });\n      // reset action\n      camera.attachControl(canvas, true);\n      this.maybeSelectedMesh = Maybe.none();\n      this.destroySelectionDiv();\n      this.corners = [];\n    });\n  };\n\n  onKeyUp = (evt, parentView) => {\n    const defaultAction = () => super.onKeyUp(evt, parentView);\n    const predicateActionList = [\n      {\n        predicate: e => [\"Backspace\", \"Delete\"].includes(e.code),\n        action: this.getDeleteButtonAction(parentView)\n      },\n      {\n        predicate: e => e.ctrlKey && e.code === \"KeyC\",\n        action: this.getCopyAction(parentView)\n      },\n      {\n        predicate: e => e.ctrlKey && e.code === \"KeyV\",\n        action: this.getPasteAction(parentView)\n      }\n    ];\n    selectOneAction(predicateActionList, defaultAction)(evt);\n  };\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                         UTILS                                        *\n   *                                                                                      */\n  //========================================================================================\n\n  dragDownMesh(currentMesh, parentView, evt) {\n    parentView.getSceneMemory().forEach(({ camera, canvas, scene, ground }) => {\n      camera.detachControl(canvas);\n      this.addSelectedMesh(evt, currentMesh, parentView);\n      this.handleMeshRightClick(evt, parentView, currentMesh);\n      Util3d.getGroundPosition(scene, ground).forEach(groundPos => {\n        this.updateMouseVars(groundPos);\n        // mesh onClick\n        currentMesh.onClick\n          ? currentMesh.onClick()\n          : parentView.closeContextDial();\n\n        if (currentMesh.isSelectionPlaceHolder) {\n          parentView.addGizmo2Mesh(\n            currentMesh,\n            () =>\n              this.notifyObservers(currentMesh, true, Vec3.ZERO, parentView),\n            () =>\n              this.notifyObservers(currentMesh, false, Vec3.ZERO, parentView)\n          );\n        } else {\n          this.selectMeshUpdateUI(parentView);\n        }\n      });\n    });\n  }\n\n  selectMeshUpdateUI(parentView) {\n    const meshSelector = MeshSelector.ofMainView(parentView);\n    const selectionPlaceHolder = SelectionPlaceHolder.ofMainView(parentView);\n    const selectedMeshes = meshSelector.meshes();\n    parentView.highlightMeshesInScene(selectedMeshes);\n    parentView.highlightNodesInTree(selectedMeshes.map(({ name }) => name));\n    if (selectedMeshes.length > 1) {\n      parentView.addGizmo2Name();\n      selectionPlaceHolder.clear();\n      selectionPlaceHolder.push(selectedMeshes);\n      this.setProperties(parentView, selectedMeshes[0].name);\n    } else {\n      selectionPlaceHolder.clear();\n      parentView.addGizmo2Name();\n      selectedMeshes.forEach(mesh => {\n        parentView.addGizmo2Name(mesh.name);\n        this.setProperties(parentView, mesh.name);\n      });\n    }\n  }\n\n  dragDownWithoutMesh(parentView, evt) {\n    parentView\n      .getMouseCoordsFromRoot()\n      .forEach(mousePosRoot =>\n        this.handleRightClickWithoutMesh(evt, parentView, mousePosRoot)\n      );\n    parentView.getSceneMemory().forEach(({ camera, canvas, scene }) => {\n      if (evt.shiftKey) {\n        camera.detachControl(canvas);\n        this.createSelectionDiv(evt);\n        this.corners.push(Vec2.of(scene.pointerX, scene.pointerY));\n      }\n    });\n  }\n\n  dragMoveMesh(parentView, groundPos) {\n    const meshSelector = MeshSelector.ofMainView(parentView);\n    const meshes = meshSelector.meshes();\n    const selector = SelectionPlaceHolder.ofMainView(parentView);\n    const newMousePosInWorld = Vec3.ofBabylon(groundPos);\n    const v = newMousePosInWorld.sub(this.movePointInWorld);\n    meshes.forEach(mesh => {\n      let vLocal = Util3d.getLocalCoordFromWorld(mesh, v, false);\n      vLocal = new Vector3(vLocal.x, vLocal.y, 0);\n      mesh.position = mesh.position.add(vLocal);\n      this.notifyObservers(mesh, false, v, parentView);\n    });\n    if (meshes.length > 1) {\n      let vLocal = Util3d.getLocalCoordFromWorld(selector.mesh, v, false);\n      vLocal = new Vector3(vLocal.x, vLocal.y, 0);\n      selector.mesh.position = selector.mesh.position.add(vLocal);\n    }\n    this.movePointInWorld = newMousePosInWorld;\n  }\n\n  dragMoveWithoutMesh(evt) {\n    this.updateSelectionDiv(evt);\n  }\n\n  dragUpMesh(selectedMesh, parentView, scene, ground) {\n    const meshSelector = MeshSelector.ofMainView(parentView);\n    const meshes = meshSelector.meshes();\n    const selectPlaceHolder = SelectionPlaceHolder.ofMainView(parentView);\n    Util3d.getGroundPosition(scene, ground).forEach(groundPos => {\n      const groundPosInWorld = Vec3.ofBabylon(groundPos);\n      const bigDisplacement = groundPosInWorld.sub(this.clickPointInWorld);\n      meshes.forEach(mesh => {\n        this.notifyObservers(mesh, true, Vec3.ZERO, parentView);\n        parentView.updateNodeInServer(mesh.name);\n      });\n      this.setProperties(parentView, selectedMesh.name);\n      if (bigDisplacement.length() > 0) {\n        parentView\n          .getUndoManager()\n          .addIt(this.getUndoAbleAction(meshes, bigDisplacement, parentView));\n      }\n      if (selectedMesh.isSelectionPlaceHolder) {\n        meshSelector.clear();\n        meshSelector.addArray(selectPlaceHolder.arrayOfMeshes);\n      }\n    });\n  }\n\n  dragUpWithoutMesh(parentView, scene) {\n    this.selectObjectsInside(scene, parentView);\n  }\n\n  handleMeshRightClick = (evt, parentView, mesh) => {\n    if (!(evt.buttons === 2)) return;\n    if (!mesh || !mesh.getMouseContextActions) return;\n    parentView.setMouseContextActions(\n      evt,\n      mesh.getMouseContextActions(parentView)\n    );\n  };\n\n  /**\n   * @param evt: event\n   * @param parentView: MainView\n   * @param mousePosFromRoot: Vector3\n   */\n  handleRightClickWithoutMesh = (evt, parentView, mousePosFromRoot) => {\n    if (!(evt.buttons === 2)) return;\n    parentView.setMouseContextActions(evt, [\n      {\n        title: \"Paste\",\n        onClick: this.getPasteOnClick(mousePosFromRoot, parentView)\n      }\n    ]);\n  };\n\n  updateMouseVars(groundPos) {\n    const groundPosInGlobal = Vec3.ofBabylon(groundPos);\n    this.movePointInWorld = groundPosInGlobal;\n    this.clickPointInWorld = groundPosInGlobal;\n  }\n\n  addSelectedMesh(evt, currentMesh, parentView) {\n    const meshSelector = MeshSelector.ofMainView(parentView);\n    // is an edge mesh\n    if (!!currentMesh.edgeIndexes) {\n      meshSelector.clear();\n      meshSelector.add(currentMesh);\n      return;\n    }\n    // not an edge mesh\n    meshSelector.filter(mesh => !mesh.edgeIndexes);\n    if (evt.shiftKey) {\n      meshSelector.add(currentMesh);\n    } else {\n      if (meshSelector.has(currentMesh)) return;\n      meshSelector.clear();\n      meshSelector.add(currentMesh);\n    }\n  }\n\n  getPasteOnClick = (mousePosFromRoot, parentView) => () => {\n    const pasteAction = Clipboard.paste();\n    if (pasteAction && typeof pasteAction === \"function\") {\n      pasteAction(mousePosFromRoot, parentView);\n    }\n  };\n\n  getDeleteButtonAction(parentView) {\n    return () => {\n      const meshSelector = MeshSelector.ofMainView(parentView);\n      const meshes = meshSelector.meshes();\n      const isOne = meshes.length === 1;\n      meshes.forEach(mesh => {\n        const maybeNode = parentView.getNodeFromTree(mesh.name);\n        maybeNode.forEach(node => parentView.onDeleteNode(node, isOne, isOne));\n        maybeNode.orElseRun(() => {\n          //TODO REFACTOR THIS;\n          if (!isOne) return;\n          const contextActions = parentView.getContextActions();\n          !!contextActions[0] && contextActions[0].action(parentView);\n        });\n      });\n      parentView.highlightNodesInTree();\n      parentView.highlightMeshesInScene();\n      parentView.addGizmo2Mesh();\n      meshSelector.clear();\n      SelectionPlaceHolder.ofMainView(parentView).clear();\n      parentView.forceUpdate();\n    };\n  }\n\n  getCopyAction(parentView) {\n    const meshSelector = MeshSelector.ofMainView(parentView);\n    const meshes = meshSelector.meshes();\n    const selectPlaceHolder = SelectionPlaceHolder.ofMainView(parentView).mesh;\n    return () => {\n      if (meshes.length <= 1) {\n        meshes\n          .filter(mesh => !!mesh.nodeItem)\n          .map(mesh => mesh.nodeItem)\n          .forEach(item => {\n            Clipboard.copy((mousePosFromRoot, someMainView) => {\n              item\n                .getCopyFunction()(mousePosFromRoot, someMainView)\n                .forEach(({ mesh: copiedMesh }) => {\n                  someMainView.addGizmo2Name(copiedMesh.name);\n                  someMainView.highlightMeshesInScene([copiedMesh]);\n                  someMainView.highlightNodesInTree([copiedMesh.name]);\n                  MeshSelector.ofMainView(someMainView).clear().add(copiedMesh);\n                });\n            });\n          });\n      } else {\n        const nodeCopyActionPairs = meshes\n          .filter(mesh => !!mesh.nodeItem)\n          .map(mesh => mesh.nodeItem)\n          .reduce((nodeActionPairs, nodeItem) => {\n            nodeActionPairs.push([nodeItem, nodeItem.getCopyFunction(false)]);\n            return nodeActionPairs;\n          }, []);\n        Clipboard.copy((mousePosFromRoot, someMainView) => {\n          const maybeCopiedItems = nodeCopyActionPairs.map(\n            ([nodeItem, copyAction]) => {\n              const displacement = Util3d.toGlobalCoord(parentView)(\n                nodeItem.mesh.absolutePosition\n              ).subtract(selectPlaceHolder.position);\n              return copyAction(\n                displacement.add(mousePosFromRoot),\n                someMainView\n              );\n            }\n          );\n          const copiedItems = maybeCopiedItems\n            .filter(maybe => maybe.isSome())\n            .map(maybe => maybe.some());\n          const copiedMeshes = copiedItems.map(({ mesh }) => mesh);\n          const copiedNames = copiedItems.map(({ name }) => name);\n          someMainView.addGizmo2Name();\n          someMainView.highlightMeshesInScene(copiedMeshes);\n          someMainView.highlightNodesInTree(copiedNames);\n          MeshSelector.ofMainView(someMainView).clear().addArray(copiedMeshes);\n          SelectionPlaceHolder.ofMainView(someMainView)\n            .clear()\n            .push(copiedMeshes);\n          someMainView.forceUpdate();\n        });\n      }\n    };\n  }\n\n  getPasteAction(parentView) {\n    return () => {\n      parentView\n        .getMouseCoordsFromRoot()\n        .forEach(mousePosRoot =>\n          this.getPasteOnClick(mousePosRoot, parentView)()\n        );\n    };\n  }\n\n  /**\n   *\n   * @param {*} mesh: Mesh\n   * @param {*} is2updateServer: Boolean\n   * @param {*} displacement: Vec3 in world coordinates\n   */\n  notifyObservers(mesh, is2updateServer, displacement, parentView) {\n    // notify  babylonjs observers\n    Maybe.fromNull(mesh.observers).forEach(obs => {\n      obs.notifyObservers({\n        updatedPointMesh: mesh,\n        is2updateServer: is2updateServer,\n        displacement: displacement.toBabylon()\n      });\n    });\n    // notify graph observers\n    Maybe.fromNull(mesh.graphVertex).forEach(({ vertexObs }) => {\n      vertexObs({\n        updatedPointMesh: mesh,\n        is2updateServer: is2updateServer,\n        displacement: displacement.toBabylon()\n      });\n    });\n    if (parentView.getNodeFromTree(mesh.name).isSome()) {\n      mesh._children\n        .filter(\n          m =>\n            (!!m.observers || !!m.graphVertex) &&\n            parentView.getNodeFromTree(m.name).isSome()\n        )\n        .forEach(m =>\n          this.notifyObservers(m, is2updateServer, displacement, parentView)\n        );\n    }\n  }\n\n  setProperties = (parentView, name) => parentView.setPropertiesWithName(name);\n\n  /**\n   *\n   * @param {*} selectedMeshes: Array<Mesh>\n   * @param {*} displacement: Vec3 in world coordinates\n   * @param {*} parentView: MainView\n   */\n  getUndoAbleAction(selectedMeshes, displacement, parentView) {\n    return UndoManager.actionBuilder()\n      .doAction(() => {\n        selectedMeshes.forEach(mesh => {\n          const localDisplacement = Util3d.getLocalCoordFromWorld(\n            mesh,\n            displacement,\n            false\n          );\n          const newPos = Vec3.ofBabylon(mesh.position).add(localDisplacement);\n          mesh.position = newPos.toBabylon();\n          this.notifyObservers(mesh, true, displacement, parentView);\n          parentView.updateNodeInServer(mesh.name);\n        });\n      })\n      .undoAction(() => {\n        selectedMeshes.forEach(mesh => {\n          const invertDisplacement = displacement.scale(-1);\n          const localDisplacement = Util3d.getLocalCoordFromWorld(\n            mesh,\n            invertDisplacement,\n            false\n          );\n          const newPos = Vec3.ofBabylon(mesh.position).add(localDisplacement);\n          mesh.position = newPos.toBabylon();\n          this.notifyObservers(mesh, true, invertDisplacement, parentView);\n          parentView.updateNodeInServer(mesh.name);\n        });\n      })\n      .build();\n  }\n\n  createSelectionDiv(e) {\n    this.startDivPos = this.findMouseInDom(e);\n    const { x, y } = this.startDivPos;\n    const outerDiv = document.createElement(\"div\");\n    outerDiv.id = ID;\n    document.body.appendChild(outerDiv);\n    ReactDOM.render(\n      <SelectDiv left={x} top={y}></SelectDiv>,\n      document.getElementById(ID)\n    );\n  }\n\n  updateSelectionDiv(e) {\n    const newMouse = this.findMouseInDom(e);\n    const oldMouse = this.startDivPos;\n    const { x: minX, y: minY } = newMouse.op(oldMouse, Math.min);\n    const { x: maxX, y: maxY } = newMouse.op(oldMouse, Math.max);\n    const outerDiv = document.getElementById(ID);\n    if (!outerDiv) return;\n    ReactDOM.render(\n      <SelectDiv\n        left={minX}\n        top={minY}\n        width={maxX - minX}\n        height={maxY - minY}\n        style={{ zIndex: 999 }}\n      ></SelectDiv>,\n      outerDiv\n    );\n  }\n\n  destroySelectionDiv() {\n    const outerDiv = document.getElementById(ID);\n    if (!outerDiv) return;\n    outerDiv.parentNode.removeChild(outerDiv);\n  }\n\n  findMouseInDom(e) {\n    const x = e.clientX; //x position within the element.\n    const y = e.clientY; //y position within the element.\n    return new Vec2(x, y);\n  }\n\n  selectObjectsInside(scene, parentView) {\n    if (this.corners.length === 0) return;\n    this.corners.push(Vec2.of(scene.pointerX, scene.pointerY));\n    const [oldMouse, newMouse] = this.corners;\n    const min = newMouse.op(oldMouse, Math.min);\n    const max = newMouse.op(oldMouse, Math.max);\n    const cornersDiv = [min, Vec2.of(max.x, min.y), max, Vec2.of(min.x, max.y)];\n    const rayCastCorners = cornersDiv.map(p => this.pickPoints(p, parentView));\n    if (rayCastCorners.some(x => x === null || x === undefined)) return;\n    const treeObj = new TreeObject(parentView.getObjectTree());\n    const insideBox = treeObj.flatten(\n      this.isItemInsideBox(rayCastCorners, parentView)\n    );\n    let insideBoxDragAbleMeshes = insideBox.map(({ item }) => item.mesh);\n    const meshSelector = MeshSelector.ofMainView(parentView);\n    meshSelector.clear();\n    if (insideBoxDragAbleMeshes.length !== 0) {\n      meshSelector.addArray(insideBoxDragAbleMeshes, false);\n    }\n    this.selectMeshUpdateUI(parentView);\n  }\n\n  /**\n   *\n   * @param {*} p: Vec2 point in canvas\n   * @param {*} parentView: MainView\n   */\n  pickPoints(p, parentView) {\n    return parentView\n      .getSceneMemory()\n      .flatMap(memory => {\n        const { scene, ground } = memory;\n        const pickInfo = scene.pick(p.x, p.y, mesh => mesh === ground);\n        if (pickInfo.hit) {\n          const floorPoint = Util3d.toGlobalCoord(parentView)(\n            pickInfo.pickedPoint\n          );\n          return Maybe.some(Vec2.of(floorPoint.x, floorPoint.y));\n        }\n        return Maybe.none();\n      })\n      .orNull();\n  }\n\n  /**\n   *\n   * @param {*} polygon: Array<Vec2>\n   * @param {*} parentView\n   */\n  isItemInsideBox(polygon, parentView) {\n    return ({ item }) => {\n      const type = item.getType();\n      if (\n        type === GlobalRef.TYPE ||\n        type === Map.TYPE ||\n        type === GraphItem.TYPE ||\n        item?.mesh?.isSelectionPlaceHolder\n      )\n        return false;\n      const { mesh } = item;\n      return this.isMeshInsideBox(polygon, parentView)(mesh);\n    };\n  }\n\n  /**\n   *\n   * @param {*} polygon: Array<Vec2>\n   * @param {*} parentView\n   */\n  isMeshInsideBox(polygon, parentView) {\n    return mesh => {\n      const p = Util3d.toGlobalCoord(parentView)(mesh.absolutePosition);\n      const planeP = new Vec2(p.x, p.y);\n      return this.isPointInsideBox(polygon)(planeP);\n    };\n  }\n\n  /**\n   *\n   * @param {*} polygon: Array<Vec2>\n   * @param {*} epsilon: Number\n   */\n  isPointInsideBox(polygon, epsilon = 1e-3) {\n    return p => {\n      let theta = 0;\n      const n = polygon.length;\n      for (let i = 0; i < n; i++) {\n        const vi = polygon[i].sub(p);\n        const vii = polygon[(i + 1) % n].sub(p);\n        theta += Math.acos(vi.dot(vii) / (vi.length() * vii.length()));\n      }\n      return Math.abs(theta - 2 * Math.PI) < epsilon;\n    };\n  }\n}\n\n//========================================================================================\n/*                                                                                      *\n *                                     SELECTION DIV                                    *\n *                                                                                      */\n//========================================================================================\n\nconst SelectDiv = ({ left, top, width, height, style }) => {\n  return (\n    <div\n      style={{\n        position: \"absolute\",\n        top: top,\n        left: left,\n        width: width,\n        height: height,\n        borderRadius: 10,\n        border: \"solid\",\n        borderColor: \"#c7c7c7\",\n        ...style\n      }}\n    ></div>\n  );\n};\nSelectDiv.defaultProps = {\n  left: 0,\n  top: 0,\n  width: 0,\n  height: 0\n};\nconst ID = \"SELECTION_TOOL_ID\";\n//========================================================================================\n/*                                                                                      *\n *                                        EXPORT                                        *\n *                                                                                      */\n//========================================================================================\n\nexport default DragObjectsAction;\n","import MouseKeysAction from \"./MouseKeysAction\";\nimport React from \"react\";\nimport Util3d from \"../Util3d/Util3d\";\nimport { Color3 } from \"@babylonjs/core\";\nimport GraphItem from \"../NodeItem/GraphItem\";\nimport Constants from \"../Utils/Constants\";\nimport { UndoManager } from \"mov-fe-lib-core\";\nimport { selectOneAction } from \"../Utils/Utils\";\nimport Path from \"../NodeItem/Path\";\nimport { Maybe } from \"monet\";\nimport GlobalRef from \"../NodeItem/GlobalRef\";\n\nclass DrawGraphAction extends MouseKeysAction {\n  constructor() {\n    super();\n    this.key = \"drawGraph\";\n    this.name = \"Draw Graph [6]\";\n    this.icon = props => <i className=\"fas fa-project-diagram\" {...props}></i>;\n\n    this.previewMeshes = [];\n    this.firstMousePos = undefined;\n    this.firstClickedMesh = undefined;\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                            Mouse Key Action Implementation                           *\n   *                                                                                      */\n  //========================================================================================\n\n  action = parentView => {\n    super.action(parentView);\n    parentView.setSelectedAction(this);\n  };\n\n  onPointerDown = (evt, parentView) => {\n    if (!(evt.buttons === 1)) return;\n    this.mousePosConsumer(parentView)((mousePos, memory) => {\n      const { scene, ground } = memory;\n      const maybeMesh = Util3d.pickMesh(scene, ground).filter(\n        this.isConnectableMesh(parentView)\n      );\n      maybeMesh.forEach(possibleMesh => {\n        parentView.highlightMeshesInScene([possibleMesh], Color3.Green());\n        this.onPointerDownLine(mousePos, possibleMesh, memory, parentView);\n      });\n      maybeMesh.orElseRun(() => {\n        // no mesh found\n        parentView.highlightMeshesInScene();\n        this.resetPreview();\n      });\n    });\n  };\n\n  onPointerMove = (evt, parentView) => {\n    this.mousePosConsumer(parentView)((mousePos, memory) => {\n      const { scene, ground } = memory;\n      Util3d.pickMesh(scene, ground)\n        .filter(this.isConnectableMesh(parentView))\n        .cata(\n          () => parentView.highlightMeshesInScene(),\n          pickedMesh =>\n            parentView.highlightMeshesInScene([pickedMesh], Color3.Green())\n        );\n      if (!this.firstMousePos) return;\n      this.onPointerMoveLine(mousePos, memory, parentView);\n    });\n  };\n\n  onPointerUp = (evt, parentView) => {};\n\n  onKeyUp = (evt, parentView) => {\n    const escapeAction = () => this.resetPreview();\n    const predicateActionList = [\n      {\n        predicate: e => [\"Backspace\", \"Delete\", \"Escape\"].includes(e.code),\n        action: escapeAction\n      }\n    ];\n    selectOneAction(predicateActionList)(evt);\n  };\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                  Auxiliary functions                                  *\n   *                                                                                      */\n  //========================================================================================\n\n  resetPreview = () => {\n    if (!!this.firstMousePos) {\n      this.deletePreviewMeshes();\n      this.firstMousePos = undefined;\n      this.firstClickedMesh = undefined;\n    }\n  };\n\n  deletePreviewMeshes = () => {\n    this.previewMeshes.forEach(mesh => mesh.dispose());\n    this.previewMeshes = [];\n  };\n\n  mousePosConsumer = parentView => lambda => {\n    parentView.getSceneMemory().forEach(memory => {\n      const { scene, ground } = memory;\n      const maybeCurrent = Util3d.getGroundPosition(scene, ground);\n      maybeCurrent.forEach(mousePos => lambda(mousePos, memory));\n    });\n  };\n\n  /**\n   * returns a predicate(mesh => boolean) that tells if a mesh is connectable by an edge\n   * @param {*} parentView\n   */\n  isConnectableMesh = parentView => mesh => {\n    return parentView\n      .getNodeFromTree(mesh.name)\n      .cata(\n        () => {\n          // mesh is not a nodeItem, check if mesh parent is a path and is beginning or end of path\n          const parentName = mesh?.parent?.name || \"\";\n          return parentView\n            .getNodeFromTree(parentName)\n            .filter(({ item }) => item.getType() === Path.TYPE)\n            .filter(({ item }) => {\n              const index = mesh.index;\n              return index === 0 || index === item.keyPoints.length - 1;\n            });\n        },\n        ({ item }) => {\n          // mesh is a nodeItem, check if not path\n          return Maybe.some(mesh).filter(\n            _ =>\n              item.getType() !== Path.TYPE && item.getType() !== GlobalRef.TYPE\n          );\n        }\n      )\n      .orSome(false);\n  };\n\n  belongsToPath = parentView => mesh => {\n    const parentName = mesh?.parent?.name || \"\";\n    return parentView\n      .getNodeFromTree(parentName)\n      .filter(({ item }) => item.getType() === Path.TYPE)\n      .map(({ item }) => item.name);\n  };\n\n  belongs2SamePath = parentView => (meshI, meshJ) => {\n    const belongsToPath = this.belongsToPath(parentView);\n    return belongsToPath(meshI)\n      .flatMap(nameI => belongsToPath(meshJ).map(nameJ => nameI === nameJ))\n      .orSome(false);\n  };\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                       Line Edge                                      *\n   *                                                                                      */\n  //========================================================================================\n\n  onPointerDownLine = (mousePos, clickedMesh, memory, parentView) => {\n    const { scene } = memory;\n    if (!this.firstMousePos) {\n      this.firstMousePos = mousePos;\n      this.firstClickedMesh = clickedMesh;\n    } else {\n      //firstMousePos exists\n      if (\n        this.belongs2SamePath(parentView)(clickedMesh, this.firstClickedMesh)\n      ) {\n        this.resetPreview();\n      } else {\n        parentView\n          .getUndoManager()\n          .doIt(\n            this.getUndoAbleLineEdge(\n              [this.firstClickedMesh, clickedMesh],\n              scene,\n              parentView,\n              clickedMesh\n            )\n          );\n      }\n    }\n  };\n\n  getUndoAbleLineEdge = (edgeMeshes, scene, parentView) => {\n    return UndoManager.actionBuilder()\n      .doAction(() => {\n        this.createEdge(edgeMeshes, scene, parentView);\n        this.resetPreview();\n      })\n      .undoAction(() => {\n        this.deleteEdge(edgeMeshes, parentView);\n      })\n      .build();\n  };\n\n  onPointerMoveLine = (mousePos, memory, parentView) => {\n    // preview line\n    const visibility = 0.25;\n    const { scene } = memory;\n    const rootMesh = parentView.getRootNode().item.mesh;\n    const edgeEmbedding = toGlobalCoord(parentView)([\n      this.firstMousePos,\n      mousePos\n    ]);\n    this.deletePreviewMeshes();\n    this.previewMeshes = [\n      GraphItem.getEdgeMesh(\n        scene,\n        edgeEmbedding,\n        Color3.Blue(),\n        Constants.RADIUS / 4\n      )\n    ];\n    this.previewMeshes.forEach(mesh => {\n      mesh.visibility = visibility;\n      mesh.parent = rootMesh;\n      mesh.isPickable = false;\n    });\n  };\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                    Draw functions                                    *\n   *                                                                                      */\n  //========================================================================================\n\n  createEdge = (edgeMeshes, scene, parentView) => {\n    GraphItem.createGraphItemIfNone(scene, parentView);\n    parentView.getGraph().forEach(graphNode => {\n      const { item: graphItem } = graphNode;\n      graphItem.addEdge(...edgeMeshes);\n      parentView.updateNodeInServer(graphItem.name);\n    });\n  };\n\n  deleteEdge = (edgeMeshes, parentView) => {\n    parentView.getGraph().forEach(graphNode => {\n      const { item: graphItem } = graphNode;\n      graphItem.delEdge(...edgeMeshes);\n      parentView.updateNodeInServer(graphItem.name);\n    });\n  };\n}\n\nconst toGlobalCoord = Util3d.toGlobalCoord;\nexport default DrawGraphAction;\n","import Util3d from \"../Util3d/Util3d\";\nimport Vec3 from \"../Math/Vec3\";\nimport Path from \"../NodeItem/Path\";\nimport MouseKeysAction from \"./MouseKeysAction\";\nimport React from \"react\";\nimport { Color3 } from \"@babylonjs/core\";\nimport { UndoManager } from \"mov-fe-lib-core\";\nimport { selectOneAction } from \"../Utils/Utils\";\nimport GraphItem from \"../NodeItem/GraphItem\";\n\nclass DrawPathAction extends MouseKeysAction {\n  constructor() {\n    super();\n    this.key = \"drawPath\";\n    this.name = \"Draw Path [2]\";\n    this.mouseCurve = [];\n    this.icon = props => <i className=\"fas fa-bezier-curve\" {...props}></i>;\n  }\n\n  action = parentView => {\n    super.action(parentView);\n    parentView.setSelectedAction(this);\n  };\n\n  onPointerDown = (evt, parentView) => {\n    if (!(evt.buttons === 1)) return;\n    parentView.getSceneMemory().forEach(memory => {\n      const { scene, ground, camera, canvas } = memory;\n      const maybeMousePos = Util3d.getGroundPosition(scene, ground);\n      maybeMousePos.forEach(mousePos => {\n        camera.detachControl(canvas);\n        this.mouseCurve.push(mousePos);\n        parentView\n          .getUndoManager()\n          .doIt(\n            this.getUndoAbleClickAction(\n              this.mouseCurve,\n              scene,\n              parentView,\n              memory\n            )\n          );\n      });\n    });\n  };\n\n  getUndoAbleClickAction(keyPoints, scene, parentView, { camera, canvas }) {\n    const kps = [...keyPoints];\n    return UndoManager.actionBuilder()\n      .doAction(() => {\n        const finalKps = kps.length === 1 ? [kps[0], kps[0]] : kps;\n        parentView.deleteNodeFromTreeUsingName(TEMP_PATH_NAME, false, false);\n        this.createCurve(finalKps, TEMP_PATH_NAME, scene, parentView, false);\n        if (kps.length <= 2) {\n          parentView.setContextActions(\n            this.getDrawPathContextAction(camera, canvas, scene)\n          );\n        }\n        this.mouseCurve = kps;\n      })\n      .undoAction(() => {\n        parentView.deleteNodeFromTreeUsingName(TEMP_PATH_NAME);\n        const reducedKps = kps.slice(0, kps.length - 1);\n        const finalKps =\n          reducedKps.length === 1 ? [reducedKps[0], reducedKps[0]] : reducedKps;\n        reducedKps.length > 0 &&\n          this.createCurve(finalKps, TEMP_PATH_NAME, scene, parentView, false);\n        this.mouseCurve = reducedKps;\n      })\n      .build();\n  }\n\n  onPointerMove = (evt, parentView) => {\n    // empty\n  };\n\n  onPointerUp = (evt, parentView) => {\n    // empty\n  };\n\n  onKeyUp = (evt, parentView) => {\n    const defaultAction = () => super.onKeyUp(evt, parentView);\n    parentView.getSceneMemory().forEach(memory => {\n      const { scene, camera, canvas } = memory;\n      const contextActions = this.getDrawPathContextAction(\n        camera,\n        canvas,\n        scene\n      );\n      selectOneAction(\n        [\n          {\n            predicate: e => e.code === \"Enter\" || e.code === \"NumpadEnter\",\n            action: () => contextActions[1].action(parentView)\n          },\n          {\n            predicate: e => e.code === \"Delete\" || e.code === \"Backspace\",\n            action: () => contextActions[0].action(parentView)\n          },\n          {\n            predicate: e => e.code === \"Escape\",\n            action: () => {\n              if (this.mouseCurve.length === 0) {\n                super.onKeyUp(evt, parentView);\n              }\n              contextActions[0].action(parentView);\n            }\n          }\n        ],\n        defaultAction\n      )(evt);\n    });\n  };\n\n  /**\n   *\n   * @param {*} curve: Array<Vector3>\n   * @param {*} name: String\n   * @param {*} scene: Scene\n   * @param {*} parentView: MainView\n   * @param {*} is2addInServer: Boolean\n   * @param {*} color: Color3\n   */\n  createCurve = (\n    curve,\n    name,\n    scene,\n    parentView,\n    is2addInServer = true,\n    color = Color3.Gray()\n  ) => {\n    const rootMesh = parentView.getRootNode().item.mesh;\n    const localCurve = Util3d.toGlobalCoord(parentView)(curve);\n    const middlePoint = Util3d.pointAverage(localCurve);\n    const centeredCurve = localCurve.map(w => w.subtract(middlePoint));\n\n    const pathItem = Path.ofDict(\n      scene,\n      {\n        name: name,\n        position: Vec3.ofBabylon(middlePoint).toArray(),\n        color: [color.r, color.g, color.b],\n        localPath: centeredCurve.map(z => Vec3.ofBabylon(z).toArray())\n      },\n      parentView\n    );\n    pathItem.mesh.parent = rootMesh;\n    parentView.addNodeItem2Tree(\n      pathItem,\n      rootMesh.name,\n      is2addInServer,\n      true,\n      is2addInServer\n    );\n    return pathItem;\n  };\n\n  getDrawPathContextAction = (camera, canvas, scene) => {\n    const ans = [];\n    ans.push({\n      icon: props => <i className=\"fas fa-trash\" {...props}></i>,\n      action: parentView => {\n        camera.attachControl(canvas, true);\n        parentView.deleteNodeFromTreeUsingName(TEMP_PATH_NAME, false);\n        this.mouseCurve = [];\n        parentView.closeContextDial();\n      },\n      name: \"Clear Path [ESC | DEL | Backspace]\"\n    });\n    if (this.mouseCurve.length > 1) {\n      ans.push({\n        icon: props => <i className=\"fas fa-check\" {...props}></i>,\n        action: parentView => {\n          camera.attachControl(canvas, true);\n          parentView\n            .getUndoManager()\n            .doIt(\n              this.getUndoAbleEnterAction(this.mouseCurve, scene, parentView)\n            );\n        },\n        name: \"Create Path [Enter]\"\n      });\n    }\n    return ans;\n  };\n\n  getUndoAbleEnterAction(keyPoints, scene, parentView) {\n    const kps = [...keyPoints];\n    const name = `Path${Math.floor(Math.random() * 1e3)}`;\n    return UndoManager.actionBuilder()\n      .doAction(() => {\n        parentView.deleteNodeFromTreeUsingName(TEMP_PATH_NAME, false);\n        const pathItem = this.createCurve(kps, name, scene, parentView, true);\n        this.mouseCurve = [];\n        parentView.setPropertiesWithName(name);\n        parentView.closeContextDial();\n        const keyPointMeshes = pathItem.keyPoints;\n        DrawPathAction.addEdgesInKeyPoints(keyPointMeshes, scene, parentView);\n      })\n      .undoAction(() => {\n        this.deleteEdgeInKeyPoints(name, parentView);\n        parentView.deleteNodeFromTreeUsingName(name);\n        this.createCurve(kps, TEMP_PATH_NAME, scene, parentView, false);\n        this.mouseCurve = kps;\n      })\n      .build();\n  }\n\n  deleteEdgeInKeyPoints(pathName, parentView) {\n    parentView.getGraph().forEach(({ item: graph }) => {\n      parentView.getNodeFromTree(pathName).forEach(({ item: pathItem }) => {\n        const keyPointMeshes = pathItem.keyPoints;\n        const edgeMeshes = [\n          keyPointMeshes[0],\n          keyPointMeshes[keyPointMeshes.length - 1]\n        ];\n        graph.delEdge(...edgeMeshes);\n        parentView.updateNodeInServer(graph.name);\n      });\n    });\n  }\n\n  static addEdgesInKeyPoints(keyPointMeshes, scene, parentView) {\n    GraphItem.createGraphItemIfNone(scene, parentView);\n    parentView.getGraph().forEach(({ item: graph }) => {\n      const edgeMeshes = [\n        keyPointMeshes[0],\n        keyPointMeshes[keyPointMeshes.length - 1]\n      ];\n      graph.addEdge(...edgeMeshes);\n      parentView.updateNodeInServer(graph.name);\n    });\n  }\n}\n\nconst TEMP_PATH_NAME = \"temp_curve\";\nexport default DrawPathAction;\n","import Util3d from \"../Util3d/Util3d\";\nimport MouseKeysAction from \"./MouseKeysAction\";\nimport React from \"react\";\nimport { MeshBuilder } from \"@babylonjs/core\";\nimport { AdvancedDynamicTexture, TextBlock } from \"@babylonjs/gui/2D\";\nimport Vec2 from \"../Math/Vec2\";\n\nclass MeasureAction extends MouseKeysAction {\n  constructor() {\n    super();\n    this.key = \"drawWall\";\n    this.name = \"Measure [7]\";\n    this.ruler = []; // can only have to elements, start point and end point\n    this.tempMesh = null;\n    this.mesh = null;\n    this.advancedTexture = null;\n    this.text = null;\n    this.icon = props => <i className=\"fas fa-ruler\" {...props}></i>;\n  }\n\n  action = parentView => {\n    super.action(parentView);\n    parentView.setSelectedAction(this);\n  };\n\n  onPointerDown = (evt, parentView) => {\n    if (evt.button !== 0) {\n      return;\n    }\n    parentView.getSceneMemory().forEach(memory => {\n      const scene = memory.scene;\n      const ground = memory.ground;\n\n      Util3d.getGroundPosition(scene, ground).forEach(current => {\n        const currentMousePos = Util3d.toGlobalCoord(parentView)(current);\n        this.ruler.push(currentMousePos);\n        if (this.ruler.length > 2) {\n          this.mesh && this.mesh.dispose();\n          this.tempMesh && this.tempMesh.dispose();\n          this.text && this.text.dispose();\n          this.ruler = [];\n        }\n        if (this.ruler.length === 2) {\n          this.mesh = MeshBuilder.CreateLines(\n            \"ruler\",\n            {\n              points: this.ruler,\n              updatable: true\n            },\n            scene\n          );\n\n          this.addTextGUI(\n            scene,\n            this.calculateDistance(this.ruler[0], currentMousePos),\n            evt\n          );\n\n          const rootMesh = parentView.getRootNode().item.mesh;\n          this.mesh.parent = rootMesh;\n        }\n      });\n    });\n  };\n\n  onPointerMove = (evt, parentView) => {\n    parentView.getSceneMemory().forEach(memory => {\n      const scene = memory.scene;\n      const ground = memory.ground;\n\n      Util3d.getGroundPosition(scene, ground).forEach(current => {\n        const currentMousePos = Util3d.toGlobalCoord(parentView)(current);\n        // Don't add more than two point to the ruler\n        if (this.ruler.length === 1) {\n          // Remove previous element from Mesh to not overlap\n          this.tempMesh && this.tempMesh.dispose();\n\n          this.tempMesh = MeshBuilder.CreateLines(\n            \"ruler\",\n            {\n              points: [this.ruler[0], currentMousePos],\n              updatable: true\n            },\n            scene\n          );\n\n          this.addTextGUI(\n            scene,\n            this.calculateDistance(this.ruler[0], currentMousePos),\n            evt\n          );\n\n          const rootMesh = parentView.getRootNode().item.mesh;\n          this.tempMesh.parent = rootMesh;\n        }\n      });\n    });\n  };\n\n  onPointerUp = (evt, parentView) => {};\n\n  // Calculate 2D distance from starting of ruler to the end of ruler\n  calculateDistance = (start, end) => {\n    const startVec = Vec2.ofBabylon(start);\n    const endVec = Vec2.ofBabylon(end);\n    return startVec.sub(endVec).length().toFixed(3);\n  };\n\n  addTextGUI = function (scene, value, evt) {\n    this.advancedTexture && this.advancedTexture.removeControl(this.text);\n    // GUI\n    this.advancedTexture = AdvancedDynamicTexture.CreateFullscreenUI(\n      \"UI\",\n      true,\n      scene\n    );\n\n    this.text = new TextBlock();\n    this.text.text = `${value}m`;\n    this.text.fontSize = 17;\n    this.text.left = scene.pointerX - evt.target.width / 2 + 20;\n    this.text.top = scene.pointerY - evt.target.height / 2 + 20;\n    this.text.color = \"white\";\n    this.advancedTexture.addControl(this.text);\n  };\n}\n\nexport default MeasureAction;\n","import Action from \"./Action\";\n\nclass MouseKeysAction extends Action {\n  onPointerDown(evt, parentView) {\n    // to be implemented on sub classes\n  }\n\n  onPointerMove(evt, parentView) {\n    // to be implemented on sub classes\n  }\n\n  onPointerUp(evt, parentView) {\n    // to be implemented on sub classes\n  }\n\n  onKeyUp(evt, parentView) {}\n}\n\nexport default MouseKeysAction;\n","import { Maybe } from \"monet\";\nimport MouseKeysAction from \"./MouseKeysAction\";\nimport React from \"react\";\n\nclass OrbitAction extends MouseKeysAction {\n  constructor() {\n    super();\n    this.key = \"orbit\";\n    this.name = \"Orbit [ESC]\";\n    this.maybeSelectedMesh = Maybe.none();\n    this.icon = props => <i className=\"fas fa-globe\" {...props}></i>;\n  }\n\n  action = parentView => {\n    super.action(parentView);\n    parentView.setSelectedAction(this);\n  };\n\n  onPointerDown = (evt, parentView) => {};\n\n  onPointerMove = (evt, parentView) => {};\n\n  onPointerUp = (evt, parentView) => {};\n}\n\nexport default OrbitAction;\n","import MouseKeysAction from \"./MouseKeysAction\";\nimport Vec3 from \"../Math/Vec3\";\nimport Util3d from \"../Util3d/Util3d\";\nimport React from \"react\";\nimport PolygonRegion from \"../NodeItem/PolygonRegion\";\nimport { Color3 } from \"@babylonjs/core\";\nimport { UndoManager } from \"mov-fe-lib-core\";\nimport { selectOneAction } from \"../Utils/Utils\";\n\n// Similar 2 Draw Action Path\nclass PolygonRegionAction extends MouseKeysAction {\n  constructor() {\n    super();\n    this.key = \"drawPolygonRegion\";\n    this.name = \"Draw Polygon Region [5]\";\n    this.mouseCurve = [];\n    this.icon = props => <i className=\"fas fa-draw-polygon\" {...props}></i>;\n  }\n\n  action = parentView => {\n    super.action(parentView);\n    parentView.setSelectedAction(this);\n  };\n\n  onPointerDown = (evt, parentView) => {\n    if (!(evt.buttons === 1)) return;\n    parentView.getSceneMemory().forEach(memory => {\n      const scene = memory.scene;\n      const ground = memory.ground;\n      const camera = memory.camera;\n      const maybeMousePos = Util3d.getGroundPosition(scene, ground);\n      maybeMousePos.forEach(mousePos => {\n        camera.detachControl(memory.canvas);\n        this.mouseCurve.push(mousePos);\n        parentView\n          .getUndoManager()\n          .doIt(\n            this.getUndoAbleClickAction(\n              this.mouseCurve,\n              scene,\n              parentView,\n              memory\n            )\n          );\n      });\n    });\n  };\n\n  getUndoAbleClickAction(keyPoints, scene, parentView, { camera, canvas }) {\n    const kps = [...keyPoints];\n    return UndoManager.actionBuilder()\n      .doAction(() => {\n        const finalKps = kps.length === 1 ? [kps[0], kps[0]] : kps;\n        parentView.deleteNodeFromTreeUsingName(\n          TEMP_POLYGON_REGION_NAME,\n          false,\n          false\n        );\n        this.createPolygonRegion(\n          finalKps,\n          TEMP_POLYGON_REGION_NAME,\n          scene,\n          parentView,\n          false\n        );\n        parentView.setContextActions(\n          this.getDrawPolygonContextAction(camera, canvas, scene)\n        );\n        this.mouseCurve = kps;\n      })\n      .undoAction(() => {\n        parentView.deleteNodeFromTreeUsingName(TEMP_POLYGON_REGION_NAME);\n        const reducedKps = kps.slice(0, kps.length - 1);\n        const finalKps =\n          reducedKps.length === 1 ? [reducedKps[0], reducedKps[0]] : reducedKps;\n        reducedKps.length > 0 &&\n          this.createPolygonRegion(\n            finalKps,\n            TEMP_POLYGON_REGION_NAME,\n            scene,\n            parentView,\n            false\n          );\n        this.mouseCurve = reducedKps;\n      })\n      .build();\n  }\n\n  getDrawPolygonContextAction = (camera, canvas, scene) => {\n    const ans = [];\n    ans.push({\n      icon: props => <i className=\"fas fa-trash\" {...props}></i>,\n      action: parentView => {\n        camera.attachControl(canvas, true);\n        parentView.deleteNodeFromTreeUsingName(TEMP_POLYGON_REGION_NAME, false);\n        this.mouseCurve = [];\n        parentView.closeContextDial();\n      },\n      name: \"Clear Polygon [ESC | DEL | Backspace]\"\n    });\n    if (this.mouseCurve.length > 2) {\n      ans.push({\n        icon: props => <i className=\"fas fa-check\" {...props}></i>,\n        action: parentView => {\n          camera.attachControl(canvas, true);\n          parentView\n            .getUndoManager()\n            .doIt(\n              this.getUndoAbleEnterAction(this.mouseCurve, scene, parentView)\n            );\n        },\n        name: \"Create Polygon [Enter]\"\n      });\n    }\n    return ans;\n  };\n\n  getUndoAbleEnterAction(keyPoints, scene, parentView) {\n    const kps = [...keyPoints];\n    const name = `PolygonRegion${Math.floor(Math.random() * 1e3)}`;\n    return UndoManager.actionBuilder()\n      .doAction(() => {\n        parentView.deleteNodeFromTreeUsingName(TEMP_POLYGON_REGION_NAME, false);\n        this.createPolygonRegion(kps, name, scene, parentView, true);\n        this.mouseCurve = [];\n        parentView.setPropertiesWithName(name);\n        parentView.closeContextDial();\n      })\n      .undoAction(() => {\n        parentView.deleteNodeFromTreeUsingName(name);\n        this.createPolygonRegion(\n          kps,\n          TEMP_POLYGON_REGION_NAME,\n          scene,\n          parentView,\n          false\n        );\n        this.mouseCurve = kps;\n      })\n      .build();\n  }\n\n  onPointerMove = (evt, parentView) => {\n    // empty\n  };\n\n  onPointerUp = (evt, parentView) => {\n    // empty\n  };\n\n  onKeyUp = (evt, parentView) => {\n    // Warning: code duplication with PathAction\n    const defaultAction = () => super.onKeyUp(evt, parentView);\n    parentView.getSceneMemory().forEach(memory => {\n      const { scene, camera, canvas } = memory;\n      const contextActions = this.getDrawPolygonContextAction(\n        camera,\n        canvas,\n        scene\n      );\n      selectOneAction(\n        [\n          {\n            predicate: e => e.code === \"Enter\" || e.code === \"NumpadEnter\",\n            action: () => contextActions[1].action(parentView)\n          },\n          {\n            predicate: e => e.code === \"Delete\" || e.code === \"Backspace\",\n            action: () => contextActions[0].action(parentView)\n          },\n          {\n            predicate: e => e.code === \"Escape\",\n            action: () => {\n              if (this.mouseCurve.length === 0) {\n                super.onKeyUp(evt, parentView);\n              }\n              contextActions[0].action(parentView);\n            }\n          }\n        ],\n        defaultAction\n      )(evt);\n    });\n  };\n\n  createPolygonRegion = (\n    region,\n    name,\n    scene,\n    parentView,\n    is2addInServer = true,\n    color = Color3.Yellow(),\n    height = 1\n  ) => {\n    const rootMesh = parentView.getRootNode().item.mesh;\n\n    const localRegion = region.map(r =>\n      Util3d.getLocalCoordFromWorld({ parent: rootMesh }, Vec3.ofBabylon(r))\n    );\n\n    const middlePoint = Util3d.pointAverageVec3(localRegion);\n    const centeredRegion = localRegion.map(r => r.sub(middlePoint));\n\n    const polygonRegionItem = PolygonRegion.ofDict(\n      scene,\n      {\n        name: name,\n        position: middlePoint.toArray(),\n        color: [color.r, color.g, color.b],\n        localPolygon: centeredRegion.map(x => x.toArray()),\n        height: height\n      },\n      parentView\n    );\n\n    polygonRegionItem.mesh.parent = rootMesh;\n\n    parentView.addNodeItem2Tree(\n      polygonRegionItem,\n      rootMesh.name,\n      is2addInServer,\n      true,\n      is2addInServer\n    );\n  };\n}\n\nconst TEMP_POLYGON_REGION_NAME = \"temp_polygon_region\";\nexport default PolygonRegionAction;\n","import Robot from \"../NodeItem/Robot\";\nimport Action from \"./Action\";\nimport { Maybe } from \"monet\";\nimport React from \"react\";\nimport PointCloud from \"../NodeItem/PointCloud\";\nimport { ACTIONS } from \"../MainView/MainViewActions\";\nimport MeshLoader from \"../Utils/MeshLoader\";\nimport { UndoManager } from \"mov-fe-lib-core\";\n\nclass RobotAction extends Action {\n  constructor(\n    robot,\n    robotAnimatorFactory = (robot, parentView) =>\n      Robot.getDefaultAnimator(parentView)\n  ) {\n    super();\n    this.key = `robotAction${robot.name}`;\n    this.name = robot.name;\n    this.robot = robot;\n    this.robotAnimatorFactory = robotAnimatorFactory;\n    this.icon = props => <i className=\"fas fa-robot\" {...props}></i>;\n  }\n\n  action = parentView => {\n    super.action(parentView);\n    // if robot already exists, do nothing\n    parentView\n      .getNodeFromTree(this.robot.name)\n      .orElseRun(() => this.addRobot(parentView));\n    parentView.setSelectedAction(ACTIONS().dragObjects);\n  };\n\n  addRobot(parentView) {\n    parentView.getSceneMemory().forEach(memory => {\n      const { scene } = memory;\n      const actionMemoryClone = { ...this.memory };\n      const isImport = actionMemoryClone[\"isImport\"];\n      if (isImport) this.loadRobot(scene, parentView, actionMemoryClone);\n      else {\n        parentView\n          .getUndoManager()\n          .doIt(this.getUndoAbleAction(parentView, scene, actionMemoryClone));\n      }\n    });\n    this.memory[\"isImport\"] = false;\n  }\n\n  getUndoAbleAction(parentView, scene, actionMemoryClone) {\n    return UndoManager.actionBuilder()\n      .doAction(() => {\n        this.loadRobot(scene, parentView, actionMemoryClone);\n      })\n      .undoAction(() => {\n        parentView.deleteNodeFromTreeUsingName(this.name);\n      })\n      .build();\n  }\n\n  loadRobot(scene, parentView, actionMemoryClone) {\n    MeshLoader.of(scene)\n      .load(Robot.ROBOT_MESH_NAME, mesh => Robot.transformMesh(mesh, scene))\n      .then(mesh =>\n        this.createRobotFromMesh(mesh, scene, parentView, actionMemoryClone)\n      );\n  }\n\n  createRobotFromMesh(mesh, scene, parentView, memory) {\n    const parentMesh = this.getParentMesh(parentView);\n    const isImport = Maybe.fromNull(memory.isImport).orSome(false);\n    const isVisible = Maybe.fromNull(memory.isVisible).orSome(true);\n    mesh.setEnabled(isVisible);\n\n    const robot = this.getRobot(scene, mesh, parentMesh);\n    robot.animate(this.robotAnimatorFactory(robot, parentView));\n    parentView.addNodeItem2Tree(robot, parentMesh.name, !isImport, isVisible);\n\n    const cloudPoint = this.getCloudPoint(scene, parentView, robot);\n    parentView.addNodeItem2Tree(cloudPoint, robot.name, false, isVisible);\n  }\n\n  getRobot = (scene, mesh, parentMesh) => {\n    const meshTree = Robot.createRobotMeshTree(\n      this.robot.robotTree,\n      mesh,\n      scene\n    );\n    const dict = Maybe.fromNull(this.memory[\"nodeItemDict\"]);\n    return Robot.builder()\n      .id(this.robot.id)\n      .name(Maybe.fromNull(this.memory[\"name\"]).orSome(this.robot.name))\n      .assetName(\n        Maybe.fromNull(this.memory[\"assetName\"]).orSome(this.robot.name)\n      )\n      .meshTree(meshTree)\n      .parentMesh(parentMesh)\n      .scene(scene)\n      .keyValueMap(dict.map(x => x.keyValueMap).orSome({}))\n      .build();\n  };\n\n  getCloudPoint = (scene, parentView, robot) => {\n    const cloudPoint = PointCloud.ofDict(\n      scene,\n      { name: this.robot.name, id: this.robot.id },\n      parentView\n    );\n    cloudPoint.mesh.parent = robot.mesh;\n    return cloudPoint;\n  };\n\n  getParentMesh = parentView => {\n    return Maybe.fromNull(this.memory[\"parentObj\"])\n      .map(parentObj => parentObj.parent)\n      .flatMap(parentName => parentView.getNodeFromTree(parentName))\n      .map(treeNode => treeNode.item.mesh)\n      .orSome(parentView.getRootNode().item.mesh);\n  };\n\n  getType = () => RobotAction.TYPE;\n\n  static TYPE = \"RobotAction\";\n}\n\nexport default RobotAction;\n","import { Maybe } from \"monet\";\nimport { ASSETS_TYPES, AssetsTypesFactory } from \"../Utils/AssetsTypesFactory\";\nimport { MasterDB } from \"mov-fe-lib-core\";\nimport MapLoader from \"./MapLoader\";\n\n/**\n *  Graphic Assets Manager, retrieves and manages the assets that are in DB.\n */\nclass AssetsManager {\n  constructor() {\n    if (instance) return instance;\n    instance = this;\n    this.assets = {};\n    this.assetsActionMap = {};\n    this.robots = {};\n    this.observersBySceneId = {};\n    this.afterLoad = [];\n    this.finishInitialSubscribers = 0;\n    this.isLoading = true;\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                  Getters and Setters                                 *\n   *                                                                                      */\n  //========================================================================================\n\n  getAssets = () => this.assets;\n\n  getAssetsActionMap = () => this.assetsActionMap;\n\n  load = async () => {\n    await this.retrieveAssetsFromDb();\n    return this;\n  };\n\n  addAfterLoad(afterLoad) {\n    this.afterLoad.push(afterLoad);\n    return this;\n  }\n\n  addObserver(scene, observer) {\n    const sceneId = scene._uid;\n    if (!(sceneId in this.observersBySceneId)) {\n      this.observersBySceneId[sceneId] = [];\n    }\n    this.observersBySceneId[sceneId].push(observer);\n    return this;\n  }\n\n  signalObservers = () => {\n    Object.keys(this.observersBySceneId).forEach(k => {\n      this.observersBySceneId[k].forEach(obs => obs(this));\n    });\n  };\n\n  addAsset(assetKey, asset) {\n    try {\n      this.assets[assetKey] = asset;\n      this.assetsActionMap[assetKey] = AssetsTypesFactory[asset.type](asset);\n      if (!this.isLoading) this.signalObservers();\n    } catch (e) {\n      console.log(\"Caught exception while adding asset\", e);\n      throw Error(`Caught exception while adding asset ${e}`);\n    }\n  }\n\n  delAsset(assetKey) {\n    if (assetKey in this.assets) delete this.assets[assetKey];\n    if (assetKey in this.assetsActionMap) delete this.assetsActionMap[assetKey];\n    this.signalObservers();\n  }\n\n  clearObserver(scene) {\n    const sceneId = scene._uid;\n    if (sceneId in this.observersBySceneId) {\n      console.log(\"Clear asset observer\", sceneId);\n      delete this.observersBySceneId[sceneId];\n    }\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                      Subscribers                                     *\n   *                                                                                      */\n  //========================================================================================\n\n  subs = [\n    resolve =>\n      MasterDB.subscribe(\n        {\n          Scope: \"Robot\",\n          Name: \"*\",\n          RobotName: \"*\"\n        },\n        this.getRobotNameUpdate(),\n        this.getRobotNameSub(\n          ({ value }) => value,\n          () => this.finishSub(\"RobotName\", resolve)\n        )\n      ),\n    resolve =>\n      MasterDB.subscribe(\n        {\n          Scope: \"Package\",\n          File: \"*\",\n          Name: \"maps\",\n          FileLabel: \"*\"\n        },\n        this.getMapUpdater(({ key }) => key),\n        this.getMapSubscriber(\n          ({ value }) => value,\n          () => this.finishSub(\"Maps\", resolve)\n        )\n      ),\n    resolve =>\n      MasterDB.subscribe(\n        { Scope: \"Package\", File: \"*\", Name: \"meshes\", FileLabel: \"*\" },\n        this.getMeshUpdater(),\n        this.getMeshSubscriber(\n          ({ value }) => value,\n          () => this.finishSub(\"Meshes\", resolve)\n        )\n      )\n  ];\n\n  retrieveAssetsFromDb() {\n    return new Promise((re, rej) => {\n      this.subs.forEach(f => f(re));\n    });\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                         Utils                                        *\n   *                                                                                      */\n  //========================================================================================\n\n  finishSub = (place, resolve) => {\n    console.log(\"FINISH SUB \", place, this.finishInitialSubscribers);\n    if (++this.finishInitialSubscribers > this.subs.length - 1) {\n      this.afterLoad.forEach(f => f(this));\n      this.afterLoad = [];\n      this.isLoading = false;\n      resolve(true);\n    }\n  };\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                        Robots                                        *\n   *                                                                                      */\n  //========================================================================================\n\n  deleteRobot = id => {\n    this.delAsset(this.robots[id].name);\n    if (id in this.robots) delete this.robots[id];\n  };\n\n  addRobot(id, name = null) {\n    if (!(id in this.robots)) {\n      this.robots[id] = {\n        id: id,\n        name: null\n      };\n    }\n    ofNull(name).forEach(name => (this.robots[id].name = name));\n    if (Object.values(this.robots[id]).every(x => x !== null)) {\n      const localRobot = this.robots[id];\n      this.addAsset(localRobot.name, {\n        name: localRobot.name,\n        id: id,\n        type: ASSETS_TYPES.Robot,\n        robotTree: {\n          name: localRobot.name,\n          position: { x: 0, y: 0, z: 0 },\n          orientation: {\n            w: 1,\n            x: 0,\n            y: 0,\n            z: 0\n          },\n          child: []\n        }\n      });\n    }\n  }\n\n  getRobotNameSub(getter, after = () => {}) {\n    return data => {\n      ofNull(getter(data))\n        .flatMap(maybeGet(\"Robot\"))\n        .forEach(r =>\n          Object.keys(r).forEach(id => this.addRobot(id, r[id].RobotName))\n        );\n      after();\n    };\n  }\n\n  getRobotNameUpdate() {\n    const actionMap = {\n      del: data =>\n        ofNull(data.key)\n          .flatMap(maybeGet(\"Robot\"))\n          .forEach(r => Object.keys(r).forEach(this.deleteRobot)),\n      set: this.getRobotNameSub(({ key }) => key)\n    };\n    return data => {\n      console.log(\"Robot NAME UPDATE\", data);\n      actionMap[data.event](data);\n    };\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                         Maps                                         *\n   *                                                                                      */\n  //========================================================================================\n\n  getMapSubscriber = (dataGetter, after = () => {}) => {\n    return data =>\n      this.getMapFileData(dataGetter, data).forEach(fileName => {\n        Object.keys(fileName)\n          .filter(f => f.includes(\".yaml\"))\n          .forEach(this.addMap);\n        after();\n      });\n  };\n\n  getMapUpdater = dataGetter => {\n    const actionMap = {\n      del: data => {\n        this.getMapFileData(dataGetter, data).forEach(f => {\n          let filename = Object.keys(f)[0];\n          filename = filename.split(\".\")[0];\n          this.delAsset(filename);\n        });\n      },\n      set: this.getMapSubscriber(dataGetter),\n      subscribe: this.getMapSubscriber(dataGetter)\n    };\n    return data => {\n      console.log(\"MAP UPDATE\", data);\n      actionMap[data.event](data);\n    };\n  };\n\n  addMap = yamlSrc => {\n    const map = {\n      name: yamlSrc.split(\".\")[0],\n      loader: new MapLoader(yamlSrc),\n      type: ASSETS_TYPES.Map\n    };\n    this.addAsset(map.name, map);\n  };\n\n  getMapFileData = (dataGetter, data) =>\n    ofNull(dataGetter(data))\n      .flatMap(maybeGet(\"Package\"))\n      .flatMap(maybeGet(\"maps\"))\n      .flatMap(maybeGet(\"File\"));\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                         Mesh                                         *\n   *                                                                                      */\n  //========================================================================================\n\n  getMeshSubscriber = (dataGetter, after = () => {}) => data => {\n    this.getMeshFileData(dataGetter, data).forEach(d =>\n      Object.keys(d).forEach(id => {\n        const mesh = { id: id, name: d[id].FileLabel, type: ASSETS_TYPES.Mesh };\n        this.addAsset(mesh.name, mesh);\n      })\n    );\n    after();\n  };\n\n  getMeshUpdater = () => {\n    const actionMap = {\n      del: data => {\n        this.getMeshFileData(d => d.key, data).forEach(f => {\n          let filename = Object.keys(f)[0];\n          this.delAsset(filename);\n        });\n      },\n      set: this.getMeshSubscriber(d => d.key),\n      subscribe: this.getMeshSubscriber(d => d.key)\n    };\n    return data => actionMap[data.event](data);\n  };\n\n  getMeshFileData = (dataGetter, data) =>\n    ofNull(dataGetter(data))\n      .flatMap(maybeGet(\"Package\"))\n      .flatMap(maybeGet(\"meshes\"))\n      .flatMap(maybeGet(\"File\"));\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                        static                                        *\n   *                                                                                      */\n  //========================================================================================\n\n  static getInstance() {\n    return new AssetsManager();\n  }\n}\n\n// private variable\nlet instance = null;\n\n// auxiliary functions\nconst ofNull = Maybe.fromNull;\nconst get = prop => obj => obj[prop];\nconst dot = f => g => x => f(g(x));\nconst maybeGet = prop => dot(ofNull)(get(prop));\n\nexport default AssetsManager;\n","export default class MapLoader {\n  constructor(yamlSrc) {\n    this.yamlSrc = yamlSrc;\n    this.cachedMap = null;\n  }\n\n  async load() {\n    if (this.cachedMap) return this.cachedMap;\n    const response = await fetch(MapLoader.getMapUrl(this.yamlSrc));\n    const map = await this.parseYaml(await response.text());\n    const ans = {\n      textureSrc: map.image,\n      resolution: map.resolution,\n      origin: map.origin,\n      imageSize: map.size\n    };\n    this.cachedMap = ans;\n    return ans;\n  }\n\n  async parseYaml(yamlTxt) {\n    const ans = {};\n    const actionDict = {\n      image: (k, v) => (ans[k] = MapLoader.getMapUrl(v)),\n      resolution: (k, v) => (ans[k] = Number.parseFloat(v)),\n      origin: (k, v) => (ans[k] = JSON.parse(v))\n    };\n    console.log(\"Yaml text\", yamlTxt);\n    yamlTxt\n      .split(\"\\n\")\n      .map(s => s.split(\": \"))\n      .filter(split => split.length >= 2)\n      .filter(split => split[0] in actionDict)\n      .forEach(split => actionDict[split[0]](split[0], split[1]));\n    ans[\"size\"] = await this.getImageSize(ans[\"image\"]);\n    return ans;\n  }\n\n  getImageSize(src) {\n    return new Promise((resolve, reject) => {\n      const img = new Image();\n      img.src = src;\n      img.onload = () => resolve([img.naturalWidth, img.naturalHeight]);\n    });\n  }\n  static getMapUrl = src => `/static/maps/${src}`;\n}\n","//========================================================================================\n/*                                                                                      *\n *         Based from https://doc.babylonjs.com/resources/babylonjs_and_reactjs         *\n *                                                                                      */\n//========================================================================================\n\nimport { Engine, Scene } from \"@babylonjs/core\";\nimport React, { useEffect, useRef, useState } from \"react\";\nimport ReactResizeDetector from \"react-resize-detector\";\nimport PropTypes from \"prop-types\";\nconst FLEX_STYLE = {\n  display: \"flex\",\n  flexDirection: \"column\",\n  flexGrow: 1\n};\n// import EngineSingleton from \"../Util3d/EngineSingleton\";\n\nconst BaseViewer = props => {\n  const {\n    antialias,\n    engineOptions,\n    adaptToDeviceRatio,\n    sceneOptions,\n    onRender,\n    onSceneReady,\n    is2render,\n    sceneFactory,\n    ...rest\n  } = props;\n  const reactCanvas = useRef(null);\n  const [loaded, setLoaded] = useState(false);\n  const [scene, setScene] = useState(null);\n  const [size, setSize] = useState({ width: 100, height: 100 });\n\n  const setUpScene = engine => {\n    const scene = sceneFactory\n      ? sceneFactory(engine)\n      : new Scene(engine, sceneOptions);\n    setScene(scene);\n    if (scene.isReady()) {\n      onSceneReady(scene);\n    } else {\n      scene.onReadyObservable.addOnce(scene => onSceneReady(scene));\n    }\n    return scene;\n  };\n\n  const onResize = (width, height) => {\n    setSize({\n      width,\n      height\n    });\n    scene && scene.getEngine().resize();\n  };\n\n  const renderScene = (engine, nScene) => {\n    if (!is2render) return;\n    engine.runRenderLoop(() => {\n      if (typeof onRender === \"function\") {\n        onRender(nScene);\n      }\n      nScene && nScene.render();\n    });\n  };\n\n  /* eslint-disable react-hooks/exhaustive-deps */\n  useEffect(() => {\n    if (!loaded) {\n      setLoaded(true);\n      const engine = new Engine(\n        reactCanvas.current,\n        antialias,\n        engineOptions,\n        adaptToDeviceRatio\n      );\n      // const engine = new EngineSingleton(reactCanvas.current).engine;\n      const newScene = setUpScene(engine);\n      renderScene(engine, newScene);\n    }\n\n    return () => {\n      console.log(\"Disposing engine and scene\");\n      scene && scene.dispose();\n      scene && scene.getEngine() && scene.getEngine().dispose();\n    };\n  }, [reactCanvas, loaded, scene]);\n  /* eslint-enable react-hooks/exhaustive-deps */\n  // loaded && reactCanvas.current.focus();\n\n  return (\n    <div style={{ ...FLEX_STYLE, maxHeight: \"100%\" }}>\n      <canvas\n        ref={reactCanvas}\n        width={size.width}\n        height={size.height}\n        {...rest}\n      />\n      <ReactResizeDetector handleWidth handleHeight onResize={onResize} />\n    </div>\n  );\n};\n\nBaseViewer.propTypes = {\n  antialias: PropTypes.bool,\n  engineOptions: PropTypes.object,\n  adaptToDeviceRatio: PropTypes.bool,\n  sceneOptions: PropTypes.object,\n  onSceneReady: PropTypes.func,\n  onRender: PropTypes.func,\n  is2render: PropTypes.bool,\n  sceneFactory: PropTypes.func\n};\n\nBaseViewer.defaultProps = {\n  antialias: true,\n  onSceneReady: scene => {},\n  is2render: true,\n  engineOptions: { preserveDrawingBuffer: true, stencil: true }\n};\n\nexport default BaseViewer;\n","import { Maybe } from \"monet\";\n\n/**\n * Undirected Graph data structure\n */\nclass Graph {\n  #adjMap = {};\n  #vertices = {};\n  #edges = {};\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                      Public API                                      *\n   *                                                                                      */\n  //========================================================================================\n\n  addVertex(i) {\n    if (!(i in this.#vertices)) {\n      this.#vertices[i] = {};\n      this.#adjMap[i] = {};\n    }\n  }\n\n  delVertex(i) {\n    if (i in this.#vertices) {\n      delete this.#vertices[i];\n      // delete neighbors edge properties\n      Object.keys(this.#adjMap[i]).forEach(j => {\n        delete this.#edges[Graph.edgeKey(i, j)];\n        delete this.#edges[Graph.edgeKey(j, i)];\n      });\n      delete this.#adjMap[i];\n      Object.keys(this.#adjMap).forEach(j => {\n        if (i in this.#adjMap[j]) {\n          delete this.#adjMap[j][i];\n        }\n      });\n    }\n  }\n\n  /**\n   *\n   * If edge already exists, this function overwrites previous edge\n   *\n   * @param {*} i: vertex id\n   * @param {*} j: vertex id\n   */\n  addEdge(i, j) {\n    this.addVertex(i);\n    this.addVertex(j);\n    const edgeProps = {};\n    this.#edges[Graph.edgeKey(i, j)] = edgeProps;\n    this.#edges[Graph.edgeKey(j, i)] = edgeProps;\n    this.#adjMap[i][j] = true;\n    this.#adjMap[j][i] = true;\n    return this;\n  }\n\n  delEdge(i, j) {\n    const ijKey = Graph.edgeKey(i, j);\n    const jiKey = Graph.edgeKey(j, i);\n    if (ijKey in this.#edges || jiKey in this.#edges) {\n      delete this.#edges[ijKey];\n      delete this.#edges[jiKey];\n      delete this.#adjMap[i][j];\n      delete this.#adjMap[j][i];\n    }\n    // remove vertex if have no neighbors\n    [i, j].forEach(id => {\n      const neighbors = this.getNeighbors(id);\n      if (neighbors.length === 0) {\n        this.delVertex(id);\n      }\n    });\n  }\n\n  hasEdge(i, j) {\n    return this.getEdge(i, j).isSome();\n  }\n\n  getNeighbors(i) {\n    if (i in this.#adjMap) return Object.keys(this.#adjMap[i]);\n    return [];\n  }\n\n  getEdge(i, j) {\n    const edgeKey = Graph.edgeKey(i, j);\n    if (edgeKey in this.#edges) {\n      return Maybe.some(this.#edges[edgeKey]);\n    }\n    return Maybe.none();\n  }\n\n  getVertex(i) {\n    if (i in this.#vertices) {\n      return Maybe.some(this.#vertices[i]);\n    }\n    return Maybe.none();\n  }\n\n  getEdges() {\n    return this.#edges;\n  }\n\n  getVertices() {\n    return this.#vertices;\n  }\n\n  getAdjMap() {\n    return this.#adjMap;\n  }\n\n  static edgeKey = (i, j) => `${i}_${j}`;\n  static key2Edge = key => key.split(\"_\");\n}\n\nexport default Graph;\n","import DragObjectsAction from \"../Actions/DragObjectsAction\";\nimport AddKeyPointAction from \"../Actions/AddKeyPointAction\";\nimport BoxRegionAction from \"../Actions/BoxRegionAction\";\nimport DrawPathAction from \"../Actions/DrawPathAction\";\nimport PolygonRegionAction from \"../Actions/PolygonRegionAction\";\nimport OrbitAction from \"../Actions/OrbitAction\";\nimport DrawGraphAction from \"../Actions/DrawGraphAction\";\nimport MeasureAction from \"../Actions/MeasureAction\";\n// import RobotAction from \"../Actions/RobotAction\";\n// import DrawWallAction from \"../Actions/DrawWallAction\";\n\n/**\n * Order Matters\n */\nexport const ACTIONS = () => ({\n  measure: new MeasureAction(),\n  drawGraph: new DrawGraphAction(),\n  drawRegion: new PolygonRegionAction(),\n  addKeyPoint: new AddKeyPointAction(),\n  drawBoxRegion: new BoxRegionAction(),\n  drawPath: new DrawPathAction(),\n  dragObjects: new DragObjectsAction(),\n  orbit: new OrbitAction()\n  // drawWalls: new DrawWallAction()\n  // addRobot: new RobotAction({\n  //   id: \"Test\",\n  //   name: \"Test\",\n  //   robotTree: {\n  //     name: \"Test\",\n  //     position: { x: 0, y: 0, z: 0 },\n  //     orientation: {\n  //       w: 1,\n  //       x: 0,\n  //       y: 0,\n  //       z: 0\n  //     },\n  //     child: [\n  //       {\n  //         name: \"TestTF\",\n  //         position: { x: 1, y: 0, z: 1 },\n  //         orientation: {\n  //           w: Math.cos(-Math.PI / 4),\n  //           x: 0,\n  //           y: Math.sin(-Math.PI / 4),\n  //           z: 0\n  //         },\n  //         child: []\n  //       }\n  //     ]\n  //   }\n  // })\n});\n","import GlobalRef from \"../NodeItem/GlobalRef\";\nimport { Maybe } from \"monet\";\nimport { ASSETS_TYPES } from \"../Utils/AssetsTypesFactory\";\nimport NODE_ITEM_FACTORY_MAP from \"./NodeItemFactoryMap\";\n\nclass MainViewRetriever {\n  static importScene(\n    mainView,\n    serverScene = [],\n    parent = null,\n    is2addInServer = false\n  ) {\n    console.log(\"Importing scene...\", mainView, serverScene);\n    const errors = [];\n    if (serverScene.length > 0) {\n      importSceneRecursive(\n        mainView,\n        serverScene,\n        parent,\n        errors,\n        is2addInServer\n      );\n    } else {\n      importDefaultScene(mainView);\n    }\n    console.log(\"End Importing scene\");\n    return errors;\n  }\n\n  static importNodeItem(mainView, nodeDict, parent, is2addInServer = false) {\n    const nodeItemClass = NODE_ITEM_FACTORY_MAP[nodeDict.type]; //retrieve default export\n    if (nodeItemClass) {\n      mainView.getSceneMemory().forEach(({ scene }) => {\n        const nodeItem = nodeItemClass.ofDict(scene, nodeDict, mainView);\n        // pseudo lazy migration of isVisible prop\n        const isVisible =\n          nodeDict.isVisible === undefined ? true : nodeDict.isVisible;\n        nodeItem.mesh.setEnabled(isVisible);\n        mainView.getNodeFromTree(parent).forEach(treeNode => {\n          nodeItem.mesh.parent = treeNode.item.mesh;\n        });\n        mainView.addNodeItem2Tree(\n          nodeItem,\n          parent,\n          is2addInServer,\n          isVisible,\n          false\n        );\n      });\n    }\n  }\n}\n\nfunction isAsset(nodeDict) {\n  return nodeDict.type in ASSETS_TYPES;\n}\n\nfunction importAsset(mainView, nodeDict, parent, errors) {\n  const assetType = nodeDict.type;\n  const assetName = Maybe.fromNull(nodeDict.assetName).orSome(nodeDict.name);\n  const assetActionMap = mainView.getAssetsActionMap();\n  // legacy\n  const retrievedAction = Maybe.fromNull(assetActionMap[assetName]).orLazy(\n    () => assetActionMap[assetName.split(\".\")[0]]\n  );\n  if (!retrievedAction) {\n    errors.push({\n      cause: `Asset of type ${assetType} with name ${assetName}, was not found`,\n      solution: `please upload ${assetType} ${assetName}`\n    });\n    return;\n  }\n  retrievedAction.memory[\"parentObj\"] = { parent: parent };\n  retrievedAction.memory[\"nodeItemDict\"] = nodeDict;\n  retrievedAction.memory[\"assetName\"] = assetName;\n  retrievedAction.memory[\"name\"] = nodeDict.name;\n  retrievedAction.memory[\"isImport\"] = true;\n  retrievedAction.memory[\"isVisible\"] =\n    nodeDict.isVisible === undefined ? true : nodeDict.isVisible;\n  retrievedAction.action(mainView);\n}\n\nfunction importSceneRecursive(\n  mainView,\n  arrayTree,\n  parent = null,\n  errors = [],\n  is2addInServer = false\n) {\n  if (!arrayTree) return;\n  const sortArrayTree = arrayTree.sort((a, b) => {\n    // global ref is first\n    if (a.item.type === NODE_ITEM_FACTORY_MAP.GlobalRef.TYPE) return -1;\n    if (b.item.type === NODE_ITEM_FACTORY_MAP.GlobalRef.TYPE) return 1;\n    // graphItem is last\n    if (a.item.type === NODE_ITEM_FACTORY_MAP.GraphItem.TYPE) return 1;\n    if (b.item.type === NODE_ITEM_FACTORY_MAP.GraphItem.TYPE) return -1;\n    return a.name < b.name ? -1 : a.name > b.name ? 1 : 0;\n  });\n  sortArrayTree.forEach(node => {\n    if (isAsset(node.item)) {\n      importAsset(mainView, node.item, parent, errors);\n    } else {\n      MainViewRetriever.importNodeItem(\n        mainView,\n        node.item,\n        parent,\n        is2addInServer\n      );\n    }\n    if (node.children.length > 0) {\n      importSceneRecursive(\n        mainView,\n        node.children,\n        node.name,\n        errors,\n        is2addInServer\n      );\n    }\n  });\n}\n\nfunction importDefaultScene(mainView) {\n  mainView.getSceneMemory().forEach(({ scene }) => {\n    const send2server = true;\n    mainView.addNodeItem2Tree(GlobalRef.ofDict(scene), null, send2server);\n  });\n}\n\nexport default MainViewRetriever;\n","export default class MeshSelector {\n  constructor(mainView) {\n    return mainView\n      .getSceneMemory()\n      .map(({ scene }) => {\n        const sceneId = scene._uid;\n        if (sceneId in placeHolderInstance) {\n          return placeHolderInstance[sceneId];\n        }\n        this.scene = scene;\n        this.mainView = mainView;\n        this.meshSelectionSet = new Set();\n        placeHolderInstance[sceneId] = this;\n        return this;\n      })\n      .orSome(this);\n  }\n\n  /**\n   * Add mesh 2 selected meshes\n   * @param {*} mesh\n   * @param {*} isSubtractive: if true, repeated addition of meshes will be removed from selected meshes set.\n   */\n  add(mesh, isSubtractive = true) {\n    if (this.meshSelectionSet.has(mesh)) {\n      isSubtractive && this.meshSelectionSet.delete(mesh);\n    } else {\n      this.meshSelectionSet.add(mesh);\n    }\n    return this;\n  }\n\n  addArray(meshes, isSubtractive = true) {\n    meshes.forEach(mesh => this.add(mesh, isSubtractive));\n    return this;\n  }\n\n  clear() {\n    this.meshSelectionSet = new Set();\n    return this;\n  }\n\n  meshes() {\n    return [...this.meshSelectionSet];\n  }\n\n  has(mesh) {\n    return this.meshSelectionSet.has(mesh);\n  }\n\n  filter(predicate) {\n    const filteredSet = new Set();\n    this.meshSelectionSet.forEach(mesh => {\n      if (predicate(mesh)) filteredSet.add(mesh);\n    });\n    this.meshSelectionSet = filteredSet;\n    return this;\n  }\n\n  //   forEach(lambda) {\n  //     this.meshSelectionSet.forEach(lambda);\n  //     return this;\n  //   }\n\n  static ofMainView(mainView) {\n    return new MeshSelector(mainView);\n  }\n}\n\nconst placeHolderInstance = {};\n","import GlobalRef from \"../NodeItem/GlobalRef\";\nimport Box from \"../NodeItem/Box\";\nimport KeyPoint from \"../NodeItem/KeyPoint\";\nimport Path from \"../NodeItem/Path\";\nimport Wall from \"../NodeItem/Wall\";\nimport BoxRegion from \"../NodeItem/BoxRegion\";\nimport PolygonRegion from \"../NodeItem/PolygonRegion\";\nimport GraphItem from \"../NodeItem/GraphItem\";\n\nconst NODE_ITEM_FACTORY_MAP = {\n  GlobalRef: GlobalRef,\n  Box: Box,\n  KeyPoint: KeyPoint,\n  Path: Path,\n  Wall: Wall,\n  BoxRegion: BoxRegion,\n  PolygonRegion: PolygonRegion,\n  GraphItem: GraphItem\n};\n\nexport default NODE_ITEM_FACTORY_MAP;\n","import Vec3 from \"./Vec3\";\nimport { Matrix } from \"@babylonjs/core\";\n\nclass Mat3 {\n  constructor(v1, v2, v3) {\n    const v = [v1, v2, v3];\n    for (let i = 0; i < v.length; i++) {\n      if (v[i].constructor !== Array || v[i].length < 3)\n        throw Error(\"One of the inputs is not a array\");\n    }\n    this.mat3 = v.map(x => new Vec3(x));\n  }\n\n  /**\n   * Matrix prod with  3-vector\n   * @param {*} v: 3-vector\n   *\n   * returns 3-vector\n   */\n  prodVec(v) {\n    let ans = new Vec3([0, 0, 0]);\n    for (let i = 0; i < this.mat3.length; i++) {\n      ans = ans.add(this.mat3[i].scale(v.vec3[i]));\n    }\n    return ans;\n  }\n\n  /**\n   * Matrix transpose prod with 3-vec\n   * @param {*} v : 3-vector\n   */\n  dotVec(v) {\n    const ans = [0, 0, 0];\n    for (let i = 0; i < this.mat3.length; i++) {\n      ans[i] = this.mat3[i].dot(v);\n    }\n    return new Vec3(ans);\n  }\n\n  prod(m) {\n    const u = this.prodVec(m.mat3[0]);\n    const v = this.prodVec(m.mat3[1]);\n    const w = this.prodVec(m.mat3[2]);\n    return new Mat3(u.vec3, v.vec3, w.vec3);\n  }\n\n  dot(m) {\n    const u = this.dotVec(m.mat3[0]);\n    const v = this.dotVec(m.mat3[1]);\n    const w = this.dotVec(m.mat3[2]);\n    return new Mat3(u.vec3, v.vec3, w.vec3);\n  }\n\n  map(f) {\n    const u = this.mat3[0].map(f);\n    const v = this.mat3[1].map(f);\n    const w = this.mat3[2].map(f);\n    return new Mat3(u.vec3, v.vec3, w.vec3);\n  }\n\n  equals(mat) {\n    if (mat.constructor !== this.constructor) return false;\n    return this.mat3\n      .map((v, index) => v.equals(mat.mat3[index]))\n      .reduce((e, v) => e && v, true);\n  }\n\n  static ofBabylonMatrix(babylonMat) {\n    const arrayMat = Matrix.GetAsMatrix3x3(babylonMat);\n    const u = [arrayMat[0], arrayMat[1], arrayMat[2]];\n    const v = [arrayMat[3], arrayMat[4], arrayMat[5]];\n    const w = [arrayMat[6], arrayMat[7], arrayMat[8]];\n    return new Mat3(u, v, w);\n  }\n\n  static of(v1, v2, v3) {\n    return new Mat3(v1, v2, v3);\n  }\n\n  static eye() {\n    return new Mat3([1, 0, 0], [0, 1, 0], [0, 0, 1]);\n  }\n}\n\nexport default Mat3;\n","//immutable class, not managing exceptions\nclass Vec2 {\n  constructor(x, y) {\n    this.vec = [x, y].map(z => (z ? z : 0));\n  }\n\n  get x() {\n    return this.vec[0];\n  }\n\n  get y() {\n    return this.vec[1];\n  }\n\n  toArray() {\n    return this.vec;\n  }\n\n  add(y) {\n    return this.op(y, (a, b) => a + b);\n  }\n\n  sub(y) {\n    return this.op(y, (a, b) => a - b);\n  }\n\n  mul(y) {\n    return this.op(y, (a, b) => a * b);\n  }\n\n  div(y) {\n    return this.op(y, (a, b) => a / b);\n  }\n\n  dot(y) {\n    return this.vec.reduce((acc, v, i) => acc + v * y.vec[i], 0);\n  }\n\n  prod(y) {\n    return new Vec2(this.x * y.x - this.y * y.y, this.x * y.y + this.y * y.x);\n  }\n\n  length() {\n    return Math.sqrt(this.dot(this));\n  }\n\n  normalize() {\n    return this.scale(1 / this.length());\n  }\n\n  dual() {\n    return new Vec2(-this.y, this.x);\n  }\n\n  sym() {\n    return this.scale(-1);\n  }\n\n  conj() {\n    return new Vec2(this.x, -this.y);\n  }\n\n  scale(r) {\n    return this.map(z => z * r);\n  }\n\n  map(lambda) {\n    return Vec2.fromArray(this.vec.map(lambda));\n  }\n\n  /**\n   * Returns a vec2 from the operation function bilambda\n   * @param {*} y\n   * @param {*} biLambda\n   */\n  op(y, biLambda) {\n    return Vec2.fromArray(this.vec.map((v, i) => biLambda(v, y.vec[i])));\n  }\n\n  reduce(fold, initial) {\n    return this.vec.reduce(fold, initial);\n  }\n\n  toObject() {\n    return { x: this.x, y: this.y };\n  }\n\n  toString() {\n    return `{x: ${this.x}, y:${this.y}}`;\n  }\n\n  static fromArray(array) {\n    if (array.length < 2) throw new Error(\"array must have size > 2\");\n    return new Vec2(array[0], array[1]);\n  }\n\n  static of(x, y) {\n    return new Vec2(x, y);\n  }\n\n  static ofBabylon(vector3) {\n    return new Vec2(vector3.x, vector3.y);\n  }\n\n  static ZERO = new Vec2(0, 0);\n  static e1 = new Vec2(1, 0);\n  static e2 = new Vec2(0, 1);\n}\n\nexport default Vec2;\n","import { Vector3 } from \"@babylonjs/core\";\nimport Vec2 from \"./Vec2\";\n\n/**\n * Class that describes immutable 3-vectors\n */\nclass Vec3 {\n  //no for's because performance\n  constructor(array) {\n    if (array.constructor !== Array || array.length < 3)\n      throw new Error(`${array} is not a valid 3-vector`);\n    this.vec3 = [...array];\n  }\n\n  get x() {\n    return this.vec3[0];\n  }\n\n  get y() {\n    return this.vec3[1];\n  }\n\n  get z() {\n    return this.vec3[2];\n  }\n\n  add(x) {\n    return this.op(x, (a, b) => a + b);\n  }\n\n  sub(x) {\n    return this.op(x, (a, b) => a - b);\n  }\n\n  mul(x) {\n    return this.op(x, (a, b) => a * b);\n  }\n\n  op(x, operation) {\n    const ans = [];\n    ans[0] = operation(this.vec3[0], x.vec3[0]);\n    ans[1] = operation(this.vec3[1], x.vec3[1]);\n    ans[2] = operation(this.vec3[2], x.vec3[2]);\n    return new Vec3(ans);\n  }\n\n  scale(r) {\n    return this.map(x => x * r);\n  }\n\n  dot(x) {\n    return (\n      this.vec3[0] * x.vec3[0] +\n      this.vec3[1] * x.vec3[1] +\n      this.vec3[2] * x.vec3[2]\n    );\n  }\n\n  map(f) {\n    return new Vec3(this.vec3.map(f));\n  }\n\n  length() {\n    return Math.sqrt(this.dot(this));\n  }\n\n  normalize = () => {\n    const l = this.length();\n    if (l === 0) throw new Error(\"You can't normalize a zero norm vector\");\n    return this.scale(1 / l);\n  };\n\n  toBabylon() {\n    return new Vector3(this.vec3[0], this.vec3[1], this.vec3[2]);\n  }\n\n  toArray() {\n    return this.vec3;\n  }\n\n  toVec2() {\n    return new Vec2(this.x, this.y);\n  }\n\n  equals(v) {\n    if (v.constructor !== this.constructor) return false;\n    return v.vec3\n      .map((x, index) => v.vec3[index] === x)\n      .reduce((e, v) => e && v, true);\n  }\n\n  reduce(binary, initialValue) {\n    return this.vec3.reduce(binary, initialValue);\n  }\n\n  getMax() {\n    return this.reduce((a, b) => Math.max(a, b), -Number.MAX_VALUE);\n  }\n\n  getMin() {\n    return this.reduce((a, b) => Math.min(a, b), Number.MAX_VALUE);\n  }\n\n  someNaNOrInfinite() {\n    return this.vec3.some(x => isNaN(x) || !isFinite(x));\n  }\n\n  static ofBabylon(babylon) {\n    return new Vec3([babylon.x, babylon.y, babylon.z]);\n  }\n\n  static of(array) {\n    return array ? new Vec3(array) : new Vec3([0, 0, 0]);\n  }\n\n  static fromArray(array) {\n    return Vec3.of(array);\n  }\n\n  static random() {\n    return new Vec3([1, 2, 3].map(Math.random()));\n  }\n\n  /**\n   *\n   * @param {*} u: Vec3\n   */\n  static orthogonalBasisFromVector(u) {\n    const identityMatrix = [Vec3.e1, Vec3.e2, Vec3.e3];\n    //choose pivot\n    let pivot = 0;\n    for (let i = 0; i < 3; i++) {\n      if (u.vec3[i] !== 0) {\n        pivot = i;\n        break;\n      }\n    }\n    let v = identityMatrix[(pivot + 1) % 3].add(\n      identityMatrix[pivot].scale(-u.vec3[(pivot + 1) % 3] / u.vec3[pivot])\n    );\n    v = v.normalize();\n    let w = identityMatrix[(pivot + 2) % 3].add(\n      identityMatrix[pivot].scale(-u.vec3[(pivot + 2) % 3] / u.vec3[pivot])\n    );\n    w = w.normalize();\n    w = w.sub(v.scale(v.dot(w)));\n    return { u: u.normalize(), v: v, w: w.normalize() };\n  }\n\n  static ONES = Vec3.of([1, 1, 1]);\n  static ZERO = Vec3.of([0, 0, 0]);\n  static e1 = new Vec3([1, 0, 0]);\n  static e2 = new Vec3([0, 1, 0]);\n  static e3 = new Vec3([0, 0, 1]);\n}\n\nexport default Vec3;\n","import NodeItem from \"./NodeItem\";\n\nclass AssetNodeItem extends NodeItem {\n  constructor(mesh, assetName, keyValueMap = {}) {\n    super(mesh, keyValueMap);\n    this.assetName = assetName;\n  }\n\n  toDict() {\n    const ans = super.toDict();\n    ans.assetName = this.assetName;\n    return ans;\n  }\n\n  getCopyFunction = () => {\n    return (mousePosFromRoot, someMainView) => {};\n  };\n}\n\nexport default AssetNodeItem;\n","import NodeItem from \"./NodeItem\";\nimport { Maybe } from \"monet\";\nimport Util3d from \"../Util3d/Util3d\";\nimport { Color3 } from \"@babylonjs/core\";\n\nclass Box extends NodeItem {\n  static DEFAULT_SIZE = 0.5;\n\n  constructor(mesh, size = Box.DEFAULT_SIZE, keyValueMap = {}) {\n    super(mesh, keyValueMap);\n    this.size = size;\n  }\n\n  toDict() {\n    const dict = super.toDict();\n    dict.size = this.size;\n    return dict;\n  }\n\n  ofDict(scene, dict = null, mainView = null) {\n    return Box.ofDict(scene, dict, mainView);\n  }\n\n  getType = () => Box.TYPE;\n\n  static TYPE = \"Box\";\n\n  static ofDict(scene, dict = null, mainView = null) {\n    const maybeDict = Maybe.fromNull(dict);\n    const size = maybeDict\n      .flatMap(z => Maybe.fromNull(z.size))\n      .orSome(Box.DEFAULT_SIZE);\n    const name = maybeDict\n      .flatMap(z => Maybe.fromNull(z.name))\n      .orSome(`Box${Math.floor(Math.random() * 1e3)}`);\n    const keyValueMap = maybeDict\n      .flatMap(d => Maybe.fromNull(d.keyValueMap))\n      .orUndefined();\n\n    const boxMesh = Util3d.createBox(\n      scene,\n      new Color3(Math.random(), Math.random(), Math.random()),\n      size,\n      name\n    );\n    NodeItem.mapDict2Mesh(dict, boxMesh);\n    return new Box(boxMesh, size, keyValueMap);\n  }\n}\n\nexport default Box;\n","import NodeItem from \"./NodeItem\";\nimport Util3d from \"../Util3d/Util3d\";\nimport Vec3 from \"../Math/Vec3\";\nimport { Maybe } from \"monet\";\nimport Constants from \"../Utils/Constants\";\nimport {\n  Vector3,\n  Axis,\n  Color3,\n  Observable,\n  StandardMaterial,\n  Quaternion\n} from \"@babylonjs/core\";\nimport isEqual from \"lodash.isequal\";\n\nclass BoxRegion extends NodeItem {\n  constructor(mesh, corners, keyPoints, keyValueMap = {}) {\n    super(mesh, keyValueMap);\n    this.corners = corners; // in local coordinates, in relation to center of mass\n    this.keyPoints = keyPoints;\n  }\n\n  toDict() {\n    const dict = super.toDict();\n    dict.corners = this.corners;\n    return dict;\n  }\n\n  toForm() {\n    const schema = super.toForm();\n    schema.jsonSchema.properties[\"dimensions\"] = {\n      type: \"object\",\n      title: \"Dimensions\",\n      properties: {\n        lower: {\n          type: \"object\",\n          title: \"Lower Corner\",\n          properties: {\n            x: {\n              type: \"number\",\n              title: \"x\"\n            },\n            y: {\n              type: \"number\",\n              title: \"y\"\n            }\n          }\n        },\n        size: {\n          type: \"object\",\n          title: \"Size\",\n          properties: {\n            scaleX: {\n              type: \"number\",\n              title: \"scale-X\"\n            },\n            scaleY: {\n              type: \"number\",\n              title: \"scale-Y\"\n            }\n          }\n        }\n      }\n    };\n    schema.uiSchema[\"dimensions\"] = { \"ui:widget\": \"collapse\" };\n    // global ref coordinates\n    const worldCorners = this.keyPoints\n      .map(x => Util3d.getGlobalCoordinates(x, x.position))\n      .map(x => x.toArray());\n    schema.data[\"dimensions\"] = {\n      lower: {\n        x: worldCorners[0][0],\n        y: worldCorners[0][1]\n      },\n      size: {\n        // TODO: warning, doesn't take into account possible scaling\n        scaleX: this.corners[1][0] - this.corners[0][0],\n        scaleY: this.corners[1][1] - this.corners[0][1]\n      }\n    };\n    return schema;\n  }\n\n  ofForm(form) {\n    const oldForm = this.toForm();\n    const oldDimensions = oldForm.data.dimensions;\n    if (isEqual(oldDimensions, form.dimensions)) {\n      super.ofForm(form);\n    } else {\n      this.ofFormDimensions(form);\n    }\n  }\n\n  ofDict(scene, dict = null, mainView = null) {\n    return BoxRegion.ofDict(scene, dict, mainView);\n  }\n\n  getType = () => BoxRegion.TYPE;\n\n  static TYPE = \"BoxRegion\";\n\n  ofFormDimensions(form) {\n    const newLowerPositionInWorldCoordinates = Vector3.FromArray(\n      [form.dimensions.lower.x, form.dimensions.lower.y, 0].map(\n        Number.parseFloat\n      )\n    );\n    const newLocalDimensions = [\n      form.dimensions.size.scaleX,\n      form.dimensions.size.scaleY\n    ].map(Number.parseFloat);\n    let localLowerPosition = Util3d.getLocalCoordFromGlobal(\n      this.keyPoints[0],\n      newLowerPositionInWorldCoordinates\n    ).toArray();\n    const notify = (i, update = false) =>\n      this.keyPoints[i].observers.notifyObservers({\n        updatedPointMesh: this.keyPoints[i],\n        is2updateServer: update\n      });\n\n    this.keyPoints[0].position = new Vector3(\n      localLowerPosition[0],\n      localLowerPosition[1],\n      this.keyPoints[0].position.z\n    );\n    notify(0);\n    localLowerPosition = Util3d.getLocalCoordFromGlobal(\n      this.keyPoints[0],\n      newLowerPositionInWorldCoordinates\n    ).toArray();\n    this.keyPoints[1].position = new Vector3(\n      localLowerPosition[0] + newLocalDimensions[0],\n      localLowerPosition[1] + newLocalDimensions[1],\n      this.keyPoints[1].position.z\n    );\n    notify(1);\n  }\n\n  static ofDict(scene, dict = null, mainView = null) {\n    if (!dict) throw new Error(\"null dictionary describing Box region\");\n    const name = Maybe.fromNull(dict.name).orSome(\n      `BoxRegion${Math.floor(Math.random() * 1e3)}`\n    );\n    const mesh = createBoxRegionMesh(dict, name, scene);\n\n    const material = new StandardMaterial(`BoxRegionMaterial${name}`, scene);\n    const color = new Color3(dict.color[0], dict.color[1], dict.color[2]);\n    material.diffuseColor = color;\n    material.emissiveColor = color;\n    material.backFaceCulling = false;\n    mesh.material = material;\n\n    mesh.visibility = VISIBILITY;\n\n    Maybe.fromNull(dict.quaternion).forEach(quaternion => {\n      const babylonQuaternion = new Quaternion(\n        quaternion[1],\n        quaternion[2],\n        quaternion[3],\n        quaternion[0]\n      );\n      mesh.rotationQuaternion = babylonQuaternion.normalize();\n    });\n\n    const keyPoints = createPlaceHolderKeyPoints(\n      scene,\n      dict.corners.map(x => Vec3.of(x).toBabylon()),\n      mesh,\n      mainView\n    );\n    return new BoxRegion(mesh, dict.corners, keyPoints, dict.keyValueMap);\n  }\n}\n\nconst RADIUS = Constants.RADIUS;\nconst FACES = [\n  [0, 1, 2],\n  [2, 3, 0],\n  [4, 5, 6],\n  [6, 7, 4],\n  [0, 1, 5],\n  [5, 4, 0],\n  [3, 2, 6],\n  [6, 7, 3],\n  [1, 2, 6],\n  [6, 5, 1],\n  [0, 3, 7],\n  [7, 4, 0]\n];\n\n/**\n * @param boxRegion: {position: 3-array, corners: array of 3-arrays }\n */\nfunction createBoxRegionMesh(boxRegion, name, scene) {\n  // centered corners vec\n  const corners = boxRegion.corners.map(x => Vec3.of(x).toBabylon());\n  const d = corners[1].subtract(corners[0]);\n  const middlePoint = Vec3.of(boxRegion.position).toBabylon();\n  const shape = [\n    corners[0],\n    corners[0].add(Axis.X.scale(d.x)),\n    corners[0].add(new Vector3(d.x, d.y, 0)),\n    corners[0].add(Axis.Y.scale(d.y))\n  ];\n  const h = new Vector3(0, 0, d.z);\n  const boxRegionMesh = {\n    positions: [\n      shape[0],\n      shape[1],\n      shape[2],\n      shape[3],\n      shape[0].add(h),\n      shape[1].add(h),\n      shape[2].add(h),\n      shape[3].add(h)\n    ],\n    faces: FACES\n  };\n  const mesh = Util3d.meshFromPositionAndFaces(\n    name,\n    scene,\n    boxRegionMesh.positions,\n    boxRegionMesh.faces\n  );\n  mesh.position = middlePoint;\n  return mesh;\n}\n\nfunction createNewMeshFromOldUsingNewBox(newBox, scene, mesh, item) {\n  const average = Util3d.pointAverageVec3(newBox.corners.map(x => Vec3.of(x)));\n  newBox.position = average.toArray();\n  newBox.corners = newBox.corners.map(x => Vec3.of(x).sub(average).toArray());\n\n  // average in parent coord\n  const rotMat3 = Util3d.getRotationMatrix(mesh);\n  const scaleVec3 = Vec3.ofBabylon(mesh.scaling);\n  const averageInParentCoord = rotMat3\n    .prodVec(average.mul(scaleVec3))\n    .toBabylon();\n\n  const newMesh = createBoxRegionMesh(newBox, mesh.name, scene);\n  newMesh.parent = mesh.parent;\n  newMesh.rotationQuaternion = mesh.rotationQuaternion;\n  newMesh.position = averageInParentCoord.add(mesh.position);\n\n  newMesh.material = mesh.material;\n  newMesh.visibility = VISIBILITY;\n  newMesh.getMouseContextActions = mesh.getMouseContextActions;\n  newMesh.nodeItem = mesh.nodeItem;\n  newMesh.observers = mesh.observers;\n  if (!!mesh.graphVertex) newMesh.graphVertex = mesh.graphVertex;\n\n  item.mesh = newMesh;\n  item.corners = newBox.corners;\n\n  const childrenCopy = [...mesh._children];\n  childrenCopy.forEach(c => {\n    c.parent = newMesh;\n  });\n  item.keyPoints.forEach((k, j) => {\n    k.position = Vec3.of(newBox.corners[j]).toBabylon();\n  });\n  // dispose old mesh\n  mesh.dispose();\n}\n\nconst getKeyPointObserverFunction = (mainView, scene) => {\n  return ({ updatedPointMesh, is2updateServer }) => {\n    mainView\n      .getNodeFromTree(updatedPointMesh.parent.name)\n      .forEach(boxRegionTreeNode => {\n        const index = updatedPointMesh.index;\n        const item = boxRegionTreeNode.item;\n        const mesh = item.mesh;\n        const name = mesh.name;\n        let newBox = {\n          position: Vec3.ofBabylon(mesh.position).toArray(),\n          corners: item.corners\n        };\n        newBox.corners[index] = Vec3.ofBabylon(\n          updatedPointMesh.position\n        ).toArray();\n        createNewMeshFromOldUsingNewBox(newBox, scene, mesh, item);\n        mainView.addGizmo2Name();\n        if (is2updateServer) {\n          mainView.updateNodeInServer(name);\n          mainView.getNodeFromTree(name).forEach(node => {\n            mainView.setProperties(node.item.toForm());\n          });\n        }\n        // signal box region observers\n        Maybe.fromNull(item.mesh.observers).forEach(obs => {\n          obs.notifyObservers({\n            updatedPointMesh: item.mesh,\n            is2updateServer: is2updateServer,\n            displacement: Vector3.Zero()\n          });\n        });\n        Maybe.fromNull(item.mesh.graphVertex).forEach(({ vertexObs }) => {\n          vertexObs({\n            updatedPointMesh: item.mesh,\n            is2updateServer: is2updateServer,\n            displacement: Vector3.Zero()\n          });\n        });\n      });\n  };\n};\n\nconst createPlaceHolderKeyPoints = (\n  scene,\n  corners,\n  boxRegionMesh,\n  mainView\n) => {\n  const keyPoints = [];\n  corners.forEach((corner, i) => {\n    const p = corner;\n\n    const keyPoint = Util3d.createSphere(\n      scene,\n      new Color3(0.25, 0.25, 0.25),\n      RADIUS,\n      `${boxRegionMesh.name}keyPoint${i}`,\n      true\n    );\n\n    keyPoint.parent = boxRegionMesh;\n    keyPoint.position = p;\n    keyPoint.index = i;\n    keyPoint.observers = new Observable();\n    keyPoint.observers.add(getKeyPointObserverFunction(mainView, scene));\n    keyPoints.push(keyPoint);\n  });\n  return keyPoints;\n};\n\nconst VISIBILITY = 0.25;\nexport default BoxRegion;\n","import NodeItem from \"./NodeItem\";\nimport Vec3 from \"../Math/Vec3\";\nimport Util3d from \"../Util3d/Util3d\";\nimport { Maybe } from \"monet\";\nimport { Quaternion, MeshBuilder } from \"@babylonjs/core\";\n\n// ROS/RVIZ default referential\nconst THETA = -Math.PI / 2;\nconst ROS_ORIGIN = {\n  position: [0, 0, 0],\n  scaling: [1, -1, 1],\n  quaternion: [Math.cos(THETA / 2), Math.sin(THETA / 2), 0, 0]\n};\n\nclass GlobalRef extends NodeItem {\n  constructor(mesh, keyValueMap = {}) {\n    super(mesh, keyValueMap);\n  }\n\n  toForm() {\n    const form = super.toForm();\n    form.uiSchema.name = {\n      \"ui:disabled\": true\n    };\n    return form;\n  }\n\n  getMouseContextActions() {\n    return [];\n  }\n\n  getType = () => GlobalRef.TYPE;\n\n  static TYPE = \"GlobalRef\";\n\n  static NAME = \"Global ref\";\n\n  static ofDict(scene, dict = null, mainView = null) {\n    const rosOrigin = GlobalRef.getRosOrigin(scene);\n\n    const globalRefMesh = Util3d.referentialBuilder(scene)\n      .name(GlobalRef.NAME)\n      .isPickable(true)\n      .boxParams({ isVisible: true, size: 0.25 })\n      .build();\n\n    globalRefMesh.parent = rosOrigin;\n\n    NodeItem.mapDict2Mesh(dict, globalRefMesh);\n\n    return new GlobalRef(\n      globalRefMesh,\n      Maybe.fromNull(dict)\n        .flatMap(d => Maybe.fromNull(d.keyValueMap))\n        .orUndefined()\n    );\n  }\n\n  static getRosOrigin(scene) {\n    const rosOrigin = MeshBuilder.CreateBox(\n      \"ROS_ORIGIN\",\n      { size: 1e-3 },\n      scene\n    );\n    rosOrigin.isVisible = false;\n    rosOrigin.isPickable = false;\n    rosOrigin.position = Vec3.of(ROS_ORIGIN.position).toBabylon();\n    rosOrigin.scaling = Vec3.of(ROS_ORIGIN.scaling).toBabylon();\n    const quaternion = new Quaternion(\n      ROS_ORIGIN.quaternion[1],\n      ROS_ORIGIN.quaternion[2],\n      ROS_ORIGIN.quaternion[3],\n      ROS_ORIGIN.quaternion[0]\n    );\n    rosOrigin.rotationQuaternion = quaternion.normalize();\n    return rosOrigin;\n  }\n\n  /**\n   *\n   * @param {*} x: Babylon Vector3 in World coordinates\n   *\n   * returns Babylon Vector3 vector in ROS coordinates\n   */\n  static inverseCoordinates(x) {\n    /**\n     * Solves RS\\eta + p = x\n     *\n     * \\eta = S^(⁻1)R^T(x-p)\n     */\n    const quaternion = ROS_ORIGIN.quaternion;\n    const rotationMatrix = Util3d.getRotationMatrix({\n      rotationQuaternion: new Quaternion(\n        quaternion[1],\n        quaternion[2],\n        quaternion[3],\n        quaternion[0]\n      )\n    });\n    const scaling = Vec3.of(ROS_ORIGIN.scaling).map(z => 1 / z);\n    const pos = Vec3.of(ROS_ORIGIN.position);\n    const result = scaling.mul(\n      rotationMatrix.dotVec(Vec3.ofBabylon(x).sub(pos))\n    );\n    return result.map(z => (Math.abs(z) < 1e-5 ? 0 : z)).toBabylon();\n  }\n\n  /**\n   *\n   * @param {*} x: Babylon Vector3 in ROS coordinates\n   *\n   * returns Babylon Vector3 vector in World coordinates\n   */\n  static forwardCoordinates(x) {\n    /**\n     * computes RS\\eta + p = x\n     */\n    const quaternion = ROS_ORIGIN.quaternion;\n    const rotationMatrix = Util3d.getRotationMatrix({\n      rotationQuaternion: new Quaternion(\n        quaternion[1],\n        quaternion[2],\n        quaternion[3],\n        quaternion[0]\n      )\n    });\n    const scaling = Vec3.of(ROS_ORIGIN.scaling);\n    const pos = Vec3.of(ROS_ORIGIN.position);\n    const result = rotationMatrix\n      .prodVec(scaling.mul(Vec3.ofBabylon(x)))\n      .add(pos);\n    return result.map(z => (Math.abs(z) < 1e-5 ? 0 : z)).toBabylon();\n  }\n}\n\nexport default GlobalRef;\n","import NodeItem from \"./NodeItem\";\nimport Util3d from \"../Util3d/Util3d\";\nimport { Color3, Vector3, Observable } from \"@babylonjs/core\";\nimport Constants from \"../Utils/Constants\";\nimport { Quaternion } from \"@babylonjs/core/Maths/math\";\nimport Graph from \"../Graph/Graph\";\nimport Vec3 from \"../Math/Vec3\";\nimport { Maybe } from \"monet\";\nimport React from \"react\";\nimport lodashGet from \"lodash/get\";\nimport { UndoManager } from \"mov-fe-lib-core\";\nimport Path from \"./Path\";\n\n/**\n * One graph per scene\n */\nclass GraphItem extends NodeItem {\n  constructor(scene, mainView, name = GraphItem.NAME, keyValueMap = {}) {\n    const sceneId = scene.getUniqueId();\n    // super() must be called before using _this_.\n    if (\n      sceneId in graphItemInstances &&\n      !graphItemInstances[sceneId].mesh.isDisposed()\n    ) {\n      return graphItemInstances[sceneId];\n    }\n\n    const graphPlaceHolder = getGraphPlaceHolder(scene, name);\n    graphPlaceHolder.onClick = () =>\n      (this.graphFormMapper = this.getDefaultFormMapper());\n\n    super(graphPlaceHolder, keyValueMap);\n    graphItemInstances[sceneId] = this;\n\n    // object properties\n    this.graph = new Graph();\n    this.scene = scene;\n    this.mainView = mainView;\n    this.meshByEdgeId = {};\n    this.graphFormMapper = this.getDefaultFormMapper();\n    this.vertexGenerator = 0;\n  }\n\n  getType = () => GraphItem.TYPE;\n\n  toDict() {\n    const dict = super.toDict();\n    const { graph } = this;\n    const vertices = { ...graph.getVertices() };\n    const edges = { ...graph.getEdges() };\n    Object.keys(vertices).forEach(k => {\n      graph.getVertex(k).forEach(({ data: vertexData }) => {\n        vertices[k] = {\n          position: Vec3.ofBabylon(vertexData.position).toArray(),\n          id: String(k)\n        };\n      });\n    });\n    Object.keys(edges).forEach(k => {\n      const ids = Graph.key2Edge(k);\n      graph.getEdge(...ids).forEach(({ data: edgeData }) => {\n        const [i, j] = ids.map(x => Number(x));\n        const edgeMesh = edgeData.edge.map(({ mesh }) => mesh);\n        const [belongsSrcMesh, belongsTrgMesh] = edgeMesh;\n        edges[k] = {\n          ids: ids,\n          keyValueMap: edgeData.keyValueMap,\n          weight: edgeData.weight,\n          belongsSrc:\n            i < j\n              ? this.exportBelongToData(belongsSrcMesh)\n              : this.exportBelongToData(belongsTrgMesh),\n          belongsTrg:\n            i < j\n              ? this.exportBelongToData(belongsTrgMesh)\n              : this.exportBelongToData(belongsSrcMesh)\n        };\n        if (this.doMeshesBelong2SamePath(...edgeMesh)) {\n          if (i > j) {\n            // remove edge if belongs to same path and i > j\n            delete edges[k];\n          }\n        }\n      });\n    });\n    dict[\"vertices\"] = vertices;\n    dict[\"edges\"] = edges;\n    return dict;\n  }\n\n  toForm() {\n    const form = super.toForm();\n    delete form.jsonSchema.properties.position;\n    delete form.jsonSchema.properties.quaternion;\n    delete form.jsonSchema.properties.color;\n    delete form.uiSchema.position;\n    delete form.uiSchema.quaternion;\n    delete form.uiSchema.color;\n    delete form.data.position;\n    delete form.data.quaternion;\n    delete form.data.color;\n    return this.graphFormMapper.toForm(form);\n  }\n\n  ofForm(form) {\n    this.name = form.name;\n    this.mesh.name = form.name;\n    this.graphFormMapper.ofForm(form);\n  }\n\n  getDefaultFormMapper() {\n    return {\n      toForm: form => form,\n      ofForm: form => (this.keyValueMap = { ...form.annotations })\n    };\n  }\n\n  getToFormEdge(edgeMesh) {\n    const { graph } = this;\n    return {\n      toForm: form => {\n        return graph\n          .getEdge(...edgeMesh.edgeIndexes)\n          .map(({ data: edgeData }) => {\n            form.jsonSchema.properties[\"weight\"] = {\n              type: \"number\",\n              title: \"Weight\"\n            };\n            form.data[\"weight\"] = edgeData.weight;\n            NodeItem.setAnnotations2Form(form, edgeData.keyValueMap);\n            form.jsonSchema.properties[\n              \"annotations\"\n            ].title = `Annotations Edge ${edgeMesh.edgeIndexes}`;\n            return form;\n          })\n          .orSome(form);\n      },\n      ofForm: form => {\n        const { edgeIndexes } = edgeMesh;\n        graph.getEdge(...edgeIndexes).forEach(({ data: edgeData }) => {\n          edgeData.keyValueMap = { ...lodashGet(form, \"annotations\", {}) };\n          edgeData.weight = Number.parseFloat(form.weight);\n        });\n      }\n    };\n  }\n\n  /**\n   * @override nodeItem delVertex()\n   * Delete all vertex from tree nodes\n   */\n  delVertex() {\n    // Iterate though all nodes under the root node and delete its vertexes\n    const root = this.mainView.getRootNode();\n    this.delVertexRecursively(root?.children);\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                   Graph Operations                                   *\n   *                                                                                      */\n  //========================================================================================\n\n  /**\n   *\n   * @param {*} iMesh: Mesh vertex\n   * @param {*} jMesh: Mesh vertex\n   * @param {*} edgeIndexes: Array<Integer>\n   */\n  addEdge(iMesh, jMesh, edgeIndexes = []) {\n    const [iIndex, jIndex] = edgeIndexes;\n    if (this.hasEdge(iMesh, jMesh)) return;\n    this.buildVertex(iMesh, iIndex);\n    this.buildVertex(jMesh, jIndex);\n    this.buildEdge(iMesh, jMesh);\n    return this;\n  }\n\n  delEdge(iMesh, jMesh) {\n    const { graph } = this;\n    const [i, j] = [iMesh, jMesh].map(this.getVertexIdFromMesh);\n    // if it has an edge\n    graph.getEdge(i, j).forEach(({ data: edgeData }) => {\n      const ijKey = Graph.edgeKey(i, j);\n      const jiKey = Graph.edgeKey(j, i);\n      Maybe.fromNull(this.meshByEdgeId[ijKey]).forEach(mesh => {\n        mesh.dispose();\n        delete this.meshByEdgeId[ijKey];\n        delete this.meshByEdgeId[jiKey];\n      });\n      graph.delEdge(i, j);\n    });\n  }\n\n  /**\n   *\n   * @param {*} iMesh: Mesh\n   * @param {*} jMesh: Mesh\n   */\n  hasEdge(iMesh, jMesh) {\n    const [i, j] = [iMesh, jMesh].map(this.getVertexIdFromMesh);\n    return this.graph.hasEdge(i, j);\n  }\n\n  delVertexFromMesh(iMesh, is2updateServer = true) {\n    const { graph } = this;\n    const i = this.getVertexIdFromMesh(iMesh);\n    graph.getVertex(i).forEach(_ => {\n      // if vertex found delete neighbors\n      const neighbors = graph.getNeighbors(i);\n      neighbors\n        .map(j => graph.getVertex(j))\n        .forEach(maybeV =>\n          maybeV.forEach(({ data: vertexData }) => {\n            const { mesh: jMesh } = vertexData;\n            this.delEdge(iMesh, jMesh);\n          })\n        );\n      // delete itself\n      graph.delVertex(i);\n      iMesh.graphVertex = undefined;\n      if (is2updateServer) this.mainView.updateNodeInServer(this.name);\n    });\n  }\n\n  /**\n   *\n   * @param {*} id: vertex to be updated id\n   * @param {*} newPosition: Vector3, new vertex position\n   * @param {*} is2updateServer: is to update in server boolean var\n   * @param {*} protectEdge: Pair<Int> with vertex indices\n   */\n  updateVertexPosition(id, newPosition, is2updateServer = true) {\n    const { graph } = this;\n    graph.getVertex(id).forEach(({ data: vertexData }) => {\n      vertexData.position = newPosition;\n    });\n    graph.getNeighbors(id).forEach(j => {\n      const i = id;\n      const edgeKey = Graph.edgeKey(i, j);\n      this.meshByEdgeId[edgeKey] && this.meshByEdgeId[edgeKey].dispose();\n      graph.getEdge(i, j).forEach(({ data: edgeData }) => {\n        const [iData, jData] = edgeData.edge;\n        this.buildEdge(iData.mesh, jData.mesh);\n      });\n      if (is2updateServer) this.mainView.updateNodeInServer(this.name);\n    });\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                    Private Methods                                   *\n   *                                                                                      */\n  //========================================================================================\n\n  /**\n   * Delete vertex from nodeTree children\n   * @param {*} nodeTree: List of nodes (initially root.children)\n   */\n  delVertexRecursively(nodeTree = []) {\n    nodeTree.forEach(node => {\n      if(node.item.getType() !== GraphItem.TYPE) {\n        node.item.delVertex();\n        this.delVertexRecursively(node.children);\n      }\n    });\n  }\n\n  /**\n   *\n   * @param {*} mesh: Mesh\n   * @returns Integer| Undefined\n   */\n  getVertexIdFromMesh(mesh) {\n    return mesh?.graphVertex?.vertex?.id;\n  }\n\n  /**\n   *\n   * @param {*} vertexMesh: Mesh\n   * @param {*} vertexIndex: integer representing index of vertex (can be undefined)\n   *\n   */\n  buildVertex(vertexMesh, vertexIndex) {\n    // test if vertexMesh already exists in the graph\n    const vId = this.getVertexIdFromMesh(vertexMesh);\n    const maybeVertex = this.graph.getVertex(vId);\n    maybeVertex.orElseRun(() => {\n      // if vertex doesn't exist\n      const id = vertexIndex ? vertexIndex : this.vertexGenerator++;\n      this.graph.addVertex(id);\n      this.graph.getVertex(id).forEach(vertex => {\n        vertex.data = VertexData.builder()(id, vertexMesh);\n        this.addObs2VertexMesh(vertex.data);\n      });\n    });\n  }\n\n  /**\n   *\n   * @param {*} vData: VertexData\n   */\n  addObs2VertexMesh(vData) {\n    const { mesh } = vData;\n    if (mesh !== undefined) {\n      mesh.graphVertex = {\n        vertex: vData,\n        delVertex: () => this.delVertexFromMesh(mesh),\n        vertexObs: this.getVertexMeshObs(vData)\n      };\n    }\n  }\n\n  /**\n   *\n   * @param {*} vertexData: VertexData\n   */\n  getVertexMeshObs(vertexData) {\n    return ({ updatedPointMesh, is2updateServer, _ }) => {\n      const newPos = Util3d.getGlobalCoordinates(\n        updatedPointMesh,\n        updatedPointMesh.position\n      ).toBabylon();\n      this.updateVertexPosition(vertexData.id, newPos, is2updateServer);\n    };\n  }\n\n  /**\n   *\n   * @param {*} iMesh: Mesh\n   * @param {*} jMesh: Mesh\n   * @param {*} edgeMeshes: Array<Mesh>\n   */\n  buildEdge(iMesh, jMesh) {\n    const { graph } = this;\n    // need to sort edge numbers because is undirected graph\n    const [i, j] = [iMesh, jMesh]\n      .map(this.getVertexIdFromMesh)\n      .sort((a, b) => a - b); // reason here: https://stackoverflow.com/questions/15084070/is-this-a-bug-in-array-sort\n    graph.addEdge(i, j);\n    graph.getVertex(i).forEach(({ data: iVertexD }) =>\n      graph.getVertex(j).forEach(({ data: jVertexD }) => {\n        graph.getEdge(i, j).forEach(edge => {\n          edge.data = new EdgeData(iVertexD, jVertexD);\n        });\n        // if vertices belong to same path don't build mesh\n        if (!this.doVerticesBelong2SamePath(i, j)) {\n          const edgeMesh = this.getEdgeMesh(iVertexD, jVertexD);\n          this.meshByEdgeId[Graph.edgeKey(i, j)] = edgeMesh;\n          this.meshByEdgeId[Graph.edgeKey(j, i)] = edgeMesh;\n        }\n      })\n    );\n  }\n\n  getEdgeMesh(iVertexD, jVertexD) {\n    const edgeGlobalCoord = [iVertexD, jVertexD].map(({ mesh }) => {\n      return Util3d.getGlobalCoord(mesh, mesh.position);\n    });\n    const edgeMesh = GraphItem.getEdgeMesh(\n      this.scene,\n      edgeGlobalCoord,\n      Color3.Yellow()\n    );\n    edgeMesh.parent = this.mesh;\n    edgeMesh.edgeIndexes = [iVertexD, jVertexD].map(({ id }) => id);\n    edgeMesh.getMouseContextActions = this.getEdgeMouseCtxActions(edgeMesh);\n    this.addObserver2EdgeMesh(edgeMesh);\n    this.addOnClickEdge(edgeMesh);\n    return edgeMesh;\n  }\n\n  /**\n   *\n   * @param {*} edgeMesh: Mesh\n   * @returns: () => Array<{title: String, onClick: () => {}}>\n   */\n  getEdgeMouseCtxActions = edgeMesh => () => {\n    return [\n      {\n        title: \"Delete\",\n        onClick: () =>\n          this.mainView.getUndoManager().doIt(this.getUndoDeleteEdge(edgeMesh))\n      }\n    ];\n  };\n\n  /**\n   *\n   * @param {*} edgeMesh: Mesh\n   */\n  addObserver2EdgeMesh(edgeMesh) {\n    edgeMesh.observers = new Observable();\n    edgeMesh.observers.add(this.getEdgeObs());\n  }\n\n  /**\n   * @returns ({updatedPointMesh: Mesh, is2updateServer: Boolean, displacement: Vector3}) => {}\n   */\n  getEdgeObs = () => ({ updatedPointMesh, is2updateServer, displacement }) => {\n    const v = Vec3.ofBabylon(displacement);\n    const vLocal = Util3d.getLocalCoordFromWorld(this.mesh, v, false);\n    updatedPointMesh.position = updatedPointMesh.position.add(\n      vLocal.scale(-1).toBabylon()\n    );\n    if (is2updateServer) {\n      this.graphFormMapper = this.getToFormEdge(updatedPointMesh);\n      this.mainView.setProperties(this.toForm());\n    }\n  };\n\n  /**\n   *\n   * @param {*} edgeMesh: Mesh\n   */\n  addOnClickEdge(edgeMesh) {\n    edgeMesh.onClick = this.getOnClickEdge(edgeMesh);\n  }\n\n  getOnClickEdge = edgeMesh => () => {\n    const actions = [];\n    actions.push({\n      icon: props => <i className=\"fas fa-trash\" {...props}></i>,\n      action: () => {\n        this.mainView.getUndoManager().doIt(this.getUndoDeleteEdge(edgeMesh));\n      },\n      name: \"Delete Edge [Del]\"\n    });\n    this.mainView.setContextActions(actions);\n  };\n\n  getUndoDeleteEdge(edgeMesh) {\n    const { graph } = this;\n    const { edgeIndexes } = edgeMesh;\n    const [iVertexD, jVertexD] = edgeIndexes\n      .map(i => graph.getVertex(i))\n      .map(maybeV => maybeV.some())\n      .map(({ data }) => data);\n    return this.getUndoDelLineEdge(iVertexD, jVertexD);\n  }\n\n  getUndoDelLineEdge(iVertexD, jVertexD) {\n    const { graph } = this;\n    const edgeVertexD = [iVertexD, jVertexD];\n    const [i, j] = edgeVertexD.map(({ id }) => id);\n    const edgeMeshes = edgeVertexD.map(({ mesh }) => mesh);\n    let edgeProps = { keyValueMap: {}, weight: 1, edge: {} };\n    graph.getEdge(i, j).forEach(({ data: edgeData }) => {\n      edgeProps.keyValueMap = edgeData.keyValueMap;\n      edgeProps.weight = edgeData.weight;\n      edgeProps.edge = edgeData.edge;\n    });\n    return UndoManager.actionBuilder()\n      .doAction(() => {\n        this.delEdge(...edgeMeshes);\n        this.mainView.closeContextDial();\n        this.mainView.updateNodeInServer(this.name);\n      })\n      .undoAction(() => {\n        this.addEdge(...edgeMeshes, [i, j]);\n        graph.getEdge(i, j).forEach(({ data: edgeData }) => {\n          edgeData.keyValueMap = edgeProps.keyValueMap;\n          edgeData.weight = edgeProps.weight;\n          edgeData.edge = edgeProps.edge;\n        });\n        this.mainView.updateNodeInServer(this.name);\n      })\n      .build();\n  }\n\n  /**\n   *\n   * @param {*} i: Integer\n   * @param {*} j: Integer\n   * @returns: Boolean\n   */\n  doVerticesBelong2SamePath(i, j) {\n    return this.graph\n      .getEdge(i, j)\n      .map(({ data: edgeData }) => {\n        const [iMesh, jMesh] = edgeData.edge.map(vData => vData.mesh);\n        if (iMesh === undefined || jMesh === undefined) return false;\n        return (\n          iMesh?.parent?.name === jMesh?.parent?.name &&\n          [iMesh, jMesh].map(this.isMeshBelong2Path).every(x => x)\n        );\n      })\n      .orSome(false);\n  }\n\n  isMeshBelong2Path = ({ parent }) => {\n    return this.mainView\n      .getNodeFromTree(parent?.name)\n      .filter(({ item }) => item.getType() === Path.TYPE)\n      .orSome(false);\n  };\n\n  doMeshesBelong2SamePath(iMesh, jMesh) {\n    const iParentNodeItem = iMesh?.parent?.nodeItem;\n    const jParentNodeItem = jMesh?.parent?.nodeItem;\n    return (\n      !!iParentNodeItem &&\n      !!jParentNodeItem &&\n      iParentNodeItem.name === jParentNodeItem.name &&\n      iParentNodeItem.getType() === Path.TYPE &&\n      jParentNodeItem.getType() === Path.TYPE\n    );\n  }\n\n  exportBelongToData = mesh => {\n    const { index, name } = mesh;\n    if (index === null || index === undefined) {\n      return { name };\n    }\n    // if mesh has index, then it must be a path or polygon\n    return this.mainView\n      .getNodeFromTree(mesh?.parent?.name)\n      .map(({ item }) => ({\n        name: item.name,\n        index: index > 0 ? -1 : index\n      }))\n      .orUndefined();\n  };\n  //========================================================================================\n  /*                                                                                      *\n   *                             Static Methods and Variables                             *\n   *                                                                                      */\n  //========================================================================================\n\n  static TYPE = \"GraphItem\";\n\n  static NAME = \"LogicGraph\";\n\n  static ofDict(scene, dict = null, mainView = null) {\n    if (!dict || !mainView)\n      throw new Error(\"null dictionary describing graphItem or null mainView\");\n    const graphItem = new GraphItem(\n      scene,\n      mainView,\n      dict.name,\n      dict.keyValueMap\n    );\n    const { edges } = dict;\n    let vertexCounter = Number.MIN_VALUE;\n    // create mesh of graph using addEdge\n    Object.values(edges).forEach(({ ids, belongsSrc, belongsTrg }) => {\n      const [i, j] = ids.map(x => Number(x));\n      vertexCounter = Math.max(vertexCounter, Math.max(i, j));\n      if (i < j) {\n        const edgeMeshes = getMeshesFromEdgeData(mainView, {\n          belongsSrc,\n          belongsTrg\n        });\n        graphItem.addEdge(...edgeMeshes, [i, j]);\n        // add additional data\n        graphItem.graph.getEdge(i, j).forEach(({ data: edgeData }) => {\n          const dataEdge = edges[Graph.edgeKey(i, j)];\n          edgeData.importFeatures(dataEdge);\n        });\n      }\n    });\n    graphItem.vertexGenerator = vertexCounter + 1;\n    return graphItem;\n  }\n\n  static getVertexMesh(\n    scene,\n    vertexPosition,\n    color = Color3.Gray(),\n    radius = Constants.RADIUS\n  ) {\n    const sphere = Util3d.createSphere(scene, color, radius);\n    sphere.position = vertexPosition;\n    return sphere;\n  }\n\n  /**\n   *\n   * @param {*} scene: Scene\n   * @param {*} edge: Array<Vector3>\n   * @param {*} color: Color3\n   * @param {*} radius: Number\n   */\n  static getEdgeMesh(\n    scene,\n    edge,\n    color = Color3.Gray(),\n    radius = Constants.RADIUS / 4\n  ) {\n    return Util3d.createTubeFromPoints(scene, edge, color, radius);\n  }\n\n  static createGraphItemIfNone = (scene, parentView) =>\n    parentView.getGraph().orElseRun(() => {\n      const graphItem = new GraphItem(scene, parentView);\n      graphItem.mesh.parent = parentView.getRootNode().item.mesh;\n      parentView.addNodeItem2Tree(graphItem);\n    });\n}\n\nconst graphItemInstances = {};\nconst getGraphPlaceHolder = (scene, name) => {\n  const graphPlaceHolder = Util3d.createSphere(\n    scene,\n    Color3.Gray(),\n    Number.MIN_VALUE,\n    name,\n    false\n  );\n  graphPlaceHolder.position = Vector3.Zero();\n  graphPlaceHolder.scaling = Vector3.One();\n  graphPlaceHolder.rotationQuaternion = Quaternion.Identity();\n  graphPlaceHolder.visibility = 0.0;\n  return graphPlaceHolder;\n};\n\nconst getMeshesFromEdgeData = (mainView, edgeProps) => {\n  const { belongsSrc, belongsTrg } = edgeProps;\n  const edgeMesh = [belongsSrc, belongsTrg].map(({ name, index }) => {\n    return mainView\n      .getNodeFromTree(name)\n      .map(({ item }) => {\n        if (index === null || index === undefined) return item.mesh;\n        // if has index, then it must be a path or polygon\n        const ind = index < 0 ? item.keyPoints.length - 1 : index;\n        return item.keyPoints[ind];\n      })\n      .orUndefined();\n  });\n  return edgeMesh;\n};\n\nclass VertexData {\n  /**\n   *\n   * @param {*} id: Integer\n   * @param {*} mesh: Mesh\n   * @param {*} position:\n   */\n  constructor(id, mesh, position) {\n    this.id = id;\n    this.mesh = mesh;\n    this.position = position;\n  }\n\n  static builder() {\n    return (id, mesh) => {\n      const globalPos = Util3d.getGlobalCoordinates(\n        mesh,\n        mesh.position\n      ).toBabylon();\n      return new VertexData(id, mesh, globalPos);\n    };\n  }\n}\n\nclass EdgeData {\n  constructor(vertexDataI, vertexDataJ, keyValueMap = {}) {\n    this.edge = [vertexDataI, vertexDataJ];\n    this.keyValueMap = keyValueMap;\n    this.weight = 1.0;\n  }\n\n  importFeatures({ keyValueMap, weight }) {\n    this.keyValueMap = keyValueMap;\n    this.weight = weight;\n  }\n}\n\nexport default GraphItem;\n","import NodeItem from \"./NodeItem\";\nimport Util3d from \"../Util3d/Util3d\";\nimport { Maybe } from \"monet\";\nimport { MeshBuilder, StandardMaterial } from \"@babylonjs/core\";\n\nclass KeyPoint extends NodeItem {\n  ofDict(scene, dict = null, mainView = null) {\n    return KeyPoint.ofDict(scene, dict, mainView);\n  }\n\n  getType = () => KeyPoint.TYPE;\n\n  static TYPE = \"KeyPoint\";\n\n  static ofDict(scene, dict = null, mainView = null) {\n    const name = Maybe.fromNull(dict)\n      .map(x => x.name)\n      .orSome(`KeyPoint${Math.floor(Math.random() * 1e3)}`);\n\n    const mesh = MeshBuilder.CreatePolyhedron(\n      name,\n      { custom: TRIANGULAR_ANTIPRISM, size: KeyPoint.DEFAULT_SIZE },\n      scene\n    );\n    const material = new StandardMaterial(`KeyPointMaterial${name}`, scene);\n    mesh.material = material;\n    mesh.convertToFlatShadedMesh();\n\n    const axis = Util3d.referentialBuilder(scene)\n      .isPickable(false)\n      .boxParams({ isVisible: false, size: 0.1 * KeyPoint.DEFAULT_SIZE })\n      .name(`${name}Axis`)\n      .build();\n    axis.parent = mesh;\n\n    NodeItem.mapDict2Mesh(dict, mesh);\n    return new KeyPoint(mesh, dict.keyValueMap);\n  }\n\n  static DEFAULT_SIZE = 0.25;\n}\n\nconst TRIANGULAR_ANTIPRISM = {\n  name: \"Triangular Antiprism (Octahedron)\",\n  category: [\"Antiprism\"],\n  vertex: [\n    [0, 0, 1.414214],\n    [1.414214, 0, 0],\n    [0, 1.414214, 0],\n    [-1.414214, 0, 0],\n    [0, -1.414214, 0],\n    [0, 0, -1.414214]\n  ],\n  face: [\n    [0, 1, 2],\n    [0, 2, 3],\n    [0, 3, 4],\n    [0, 4, 1],\n    [1, 4, 5],\n    [1, 5, 2],\n    [2, 5, 3],\n    [3, 5, 4]\n  ]\n};\n\nexport default KeyPoint;\n","import AssetNodeItem from \"./AssetNodeItem\";\n\nclass Map extends AssetNodeItem {\n  constructor(mesh, size, textureSrc, assetName) {\n    super(mesh, assetName);\n    this.size = size;\n    this.textureSrc = textureSrc;\n  }\n\n  dispose() {\n    super.dispose();\n  }\n\n  toDict() {\n    const dict = super.toDict();\n    dict[\"size\"] = this.size;\n    dict[\"textureSrc\"] = this.textureSrc;\n    return dict;\n  }\n\n  toForm() {\n    const info = this.toDict();\n    const schema = {\n      jsonSchema: {\n        type: \"object\",\n        properties: {\n          oldName: {\n            type: \"string\"\n          },\n          name: {\n            type: \"string\",\n            title: \"Name\"\n          },\n          type: {\n            type: \"string\",\n            title: \"Type\"\n          },\n          assetName: {\n            type: \"string\",\n            title: \"Asset Name\"\n          }\n        }\n      },\n      uiSchema: {\n        type: {\n          \"ui:disabled\": true\n        },\n        assetName: {\n          \"ui:disabled\": true\n        },\n        oldName: {\n          \"ui:widget\": \"hidden\"\n        }\n      },\n      data: {\n        oldName: info.name,\n        name: info.name,\n        type: info.type,\n        assetName: info.assetName\n      }\n    };\n    return schema;\n  }\n\n  ofForm(form) {\n    this.name = form.name;\n    this.mesh.name = form.name;\n    this.keyValueMap = { ...form.annotations };\n  }\n\n  getType = () => Map.TYPE;\n\n  static TYPE = \"Map\";\n}\n\nexport default Map;\n","import AssetNodeItem from \"./AssetNodeItem\";\n\nclass Mesh extends AssetNodeItem {\n  constructor(mesh, assetName, keyValueMap = {}) {\n    super(mesh, assetName, keyValueMap);\n  }\n\n  toDict() {\n    let dict = super.toDict();\n    return dict;\n  }\n\n  toForm() {\n    const schema = super.toForm();\n    schema.jsonSchema.properties = {\n      oldName: schema.jsonSchema.properties.oldName,\n      name: schema.jsonSchema.properties.name,\n      type: schema.jsonSchema.properties.type,\n      assetName: {\n        type: \"string\",\n        title: \"Asset Name\"\n      },\n      position: schema.jsonSchema.properties.position,\n      quaternion: schema.jsonSchema.properties.quaternion,\n      color: schema.jsonSchema.properties.color,\n      annotations: schema.jsonSchema.properties.annotations\n    };\n    schema.uiSchema[\"assetName\"] = {\n      \"ui:disabled\": true\n    };\n    schema.data[\"assetName\"] = this.assetName;\n    return schema;\n  }\n\n  getMouseContextActions(mainView) {\n    return super\n      .getMouseContextActions(mainView)\n      .filter(x => x.title === \"Delete\");\n  }\n\n  getType = () => Mesh.TYPE;\n  static TYPE = \"Mesh\";\n}\n\nexport default Mesh;\n","import Clipboard from \"../Utils/Clipboard\";\nimport Vec3 from \"../Math/Vec3\";\nimport { Maybe } from \"monet\";\nimport _capitalize from \"lodash/capitalize\";\nimport { Quaternion, Color3, Vector3 } from \"@babylonjs/core\";\nimport AnnotationManager from \"../Utils/AnnotationManager\";\nimport GlobalRef from \"./GlobalRef\";\n\nclass NodeItem {\n  constructor(mesh, keyValueMap = {}) {\n    this.name = mesh.name;\n    this.mesh = mesh;\n    this.mesh.getMouseContextActions = this.getMouseContextActions;\n    this.mesh.nodeItem = this;\n    this.keyValueMap = keyValueMap;\n  }\n\n  dispose() {\n    this.mesh.dispose();\n  }\n\n  toDict() {\n    return {\n      name: this.name,\n      type: this.getType(),\n      position: Vec3.ofBabylon(this.mesh?.position).toArray(),\n      quaternion: Maybe.fromNull(this.mesh?.rotationQuaternion)\n        .map(x => [x.w, x.x, x.y, x.z])\n        .orLazy(() => {\n          const q = Quaternion.RotationYawPitchRoll(\n            this.mesh.rotation.y,\n            this.mesh.rotation.x,\n            this.mesh.rotation.z\n          );\n          return [q.w, q.x, q.y, q.z];\n        }),\n      color: Maybe.fromNull(this.mesh?.material)\n        .flatMap(x => Maybe.fromNull(x.diffuseColor).map(z => [z.r, z.g, z.b]))\n        .orSome([0, 0, 0]),\n      keyValueMap: this.keyValueMap,\n      isVisible: this.mesh.isEnabled()\n    };\n  }\n\n  /**\n   * Generates json based on https://github.com/rjsf-team/react-jsonschema-form\n   */\n  toForm() {\n    const info = this.toDict();\n    const color = new Color3(info.color[0], info.color[1], info.color[2]);\n    const schema = {\n      jsonSchema: {\n        type: \"object\",\n        properties: {\n          oldName: {\n            type: \"string\"\n          },\n          name: {\n            type: \"string\",\n            title: \"Name\"\n          },\n          type: {\n            type: \"string\",\n            title: \"Type\"\n          },\n          position: {\n            type: \"object\",\n            title: \"Position\",\n            properties: {\n              x: {\n                type: \"number\",\n                title: \"x\"\n              },\n              y: {\n                type: \"number\",\n                title: \"y\"\n              },\n              z: {\n                type: \"number\",\n                title: \"z\"\n              }\n            }\n          },\n          quaternion: {\n            type: \"object\",\n            title: \"Orientation\",\n            properties: {\n              w: {\n                type: \"number\",\n                title: \"w\"\n              },\n              x: {\n                type: \"number\",\n                title: \"x\"\n              },\n              y: {\n                type: \"number\",\n                title: \"y\"\n              },\n              z: {\n                type: \"number\",\n                title: \"z\"\n              }\n            }\n          },\n          color: {\n            type: \"string\",\n            title: \"Color\"\n          }\n        }\n      },\n      uiSchema: {\n        type: {\n          \"ui:disabled\": true\n        },\n        color: {\n          \"ui:widget\": \"color\"\n        },\n        oldName: {\n          \"ui:widget\": \"hidden\"\n        },\n        position: {\n          \"ui:widget\": \"collapse\"\n        },\n        quaternion: {\n          \"ui:widget\": \"collapse\"\n        }\n      },\n      data: {\n        oldName: info.name,\n        name: info.name,\n        type: info.type,\n        position: {\n          x: info.position[0],\n          y: info.position[1],\n          z: info.position[2]\n        },\n        quaternion: {\n          w: info.quaternion[0],\n          x: info.quaternion[1],\n          y: info.quaternion[2],\n          z: info.quaternion[3]\n        },\n        color: color.toHexString()\n      }\n    };\n\n    NodeItem.setAnnotations2Form(schema, this.keyValueMap);\n    return schema;\n  }\n\n  /**\n   * Changes NodeItem based on a form\n   *\n   * Warning: side effect function\n   * @param {*} form\n   */\n  ofForm(form) {\n    this.name = form.name;\n    this.mesh.name = form.name;\n\n    Maybe.fromNull(form?.position).forEach(position => {\n      const pos = [position.x, position.y, position.z].map(Number.parseFloat);\n      this.mesh.position = Vector3.FromArray(pos);\n    });\n    Maybe.fromNull(form?.quaternion).forEach(quaternion => {\n      const quat = [quaternion.x, quaternion.y, quaternion.z, quaternion.w].map(\n        Number.parseFloat\n      );\n      this.mesh.rotationQuaternion = Quaternion.FromArray(quat).normalize();\n    });\n    if (this.mesh.material) {\n      this.mesh.material.diffuseColor = Color3.FromHexString(form.color);\n      this.mesh.material.emissiveColor = Color3.FromHexString(form.color);\n    }\n    this.keyValueMap = { ...form.annotations };\n  }\n\n  getType = () => NodeItem.TYPE;\n\n  getMouseContextActions = mainView => {\n    return [\n      {\n        title: \"Copy\",\n        onClick: () => Clipboard.copy(this.getCopyFunction())\n      },\n      {\n        title: \"Delete\",\n        onClick: () =>\n          mainView\n            .getNodeFromTree(this.name)\n            .forEach(node => mainView.onDeleteNode(node, false))\n      }\n    ];\n  };\n\n  getCopyFunction(isForceUpdate = true) {\n    // mousePosFromRoot : Vector3\n    return (mousePosFromRoot, someMainView) =>\n      someMainView.getSceneMemory().map(({ scene }) => {\n        const { item: rootItem } = someMainView.getRootNode();\n        const copyDict = this.toDict();\n        copyDict.name += \"_copy\" + Clipboard.getUID();\n        const newPosArray = Vec3.ofBabylon(mousePosFromRoot).toArray();\n        // preserves z-coordinate\n        newPosArray[2] = copyDict.position[2];\n        copyDict.position = newPosArray;\n        const copiedNodeItem = this.ofDict(scene, copyDict, someMainView);\n        const { mesh: copiedMesh } = copiedNodeItem;\n        copiedMesh.parent = rootItem.mesh;\n        someMainView.addNodeItem2Tree(\n          copiedNodeItem,\n          GlobalRef.NAME,\n          true,\n          true,\n          isForceUpdate\n        );\n        return copiedNodeItem;\n      });\n  }\n\n  delVertex() {\n    let delVertex = this.mesh.graphVertex?.delVertex;\n    if (!delVertex) {\n      const childrenWithDelVertex = (this.mesh?._children || [])\n        .filter(childMesh => !!childMesh.graphVertex)\n        .map(childMesh => childMesh.graphVertex.delVertex);\n      delVertex = () => childrenWithDelVertex.forEach(del => del());\n    }\n    delVertex();\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                           Static attributes/methods                                  *\n   *                                                                                      */\n  //========================================================================================\n\n  static TYPE = \"NodeItem\";\n\n  // side-effect function\n  static mapDict2Mesh(dict, mesh) {\n    if (!mesh) throw new Error(\"can't map a null mesh\");\n    Maybe.fromNull(dict).forEach(someDict => {\n      Maybe.fromNull(dict.name).forEach(name => (mesh.name = name));\n      Maybe.fromNull(someDict.position).forEach(\n        position => (mesh.position = Vec3.of(position).toBabylon())\n      );\n      Maybe.fromNull(someDict.quaternion).forEach(quaternion => {\n        const babylonQuaternion = new Quaternion(\n          quaternion[1],\n          quaternion[2],\n          quaternion[3],\n          quaternion[0]\n        );\n        mesh.rotationQuaternion = babylonQuaternion.normalize();\n      });\n      Maybe.fromNull(someDict.color).forEach(color => {\n        const babylonColor = new Color3(color[0], color[1], color[2]);\n        Maybe.fromNull(mesh.material).forEach(material => {\n          Maybe.fromNull(material.diffuseColor).forEach(\n            z => (mesh.material.diffuseColor = babylonColor)\n          );\n          Maybe.fromNull(material.emissiveColor).forEach(\n            z => (mesh.material.emissiveColor = babylonColor)\n          );\n        });\n      });\n    });\n    return mesh;\n  }\n\n  // side effect function\n  static setAnnotations2Form(schema, keyValueMap = {}) {\n    schema.jsonSchema.properties.annotations = {\n      title: \"Annotations\",\n      type: \"object\",\n      properties: {}\n    };\n    schema.uiSchema.annotations = {\n      \"ui:widget\": \"collapse\"\n    };\n    schema.data[\"annotations\"] = { ...keyValueMap };\n    const annotations = AnnotationManager.getAnnotations();\n\n    [\"safety\", \"behaviour\", \"localization\", \"navigation\"].forEach(\n      annotation => {\n        // if (annotations[annotation].labels.length > 0) {\n        schema.jsonSchema.properties.annotations.properties[annotation] = {\n          title: _capitalize(annotation),\n          type: \"string\"\n        };\n        schema.uiSchema.annotations[annotation] = {\n          \"ui:widget\": \"selectScopeModal\",\n          \"ui:options\": {\n            scopeList: \"Annotation\",\n            name: _capitalize(annotation),\n            filter: e => {\n              return annotations[annotation].names.includes(e.name);\n            }\n          }\n        };\n        // }\n      }\n    );\n  }\n}\n\nexport default NodeItem;\n","import NodeItem from \"./NodeItem\";\nimport Vec3 from \"../Math/Vec3\";\nimport Util3d from \"../Util3d/Util3d\";\nimport React from \"react\";\nimport { Maybe } from \"monet\";\nimport Constants from \"../Utils/Constants\";\nimport {\n  Observable,\n  Color3,\n  MeshBuilder,\n  Quaternion,\n  Vector3\n} from \"@babylonjs/core\";\nimport { UndoManager } from \"mov-fe-lib-core\";\n\nconst RADIUS = Constants.RADIUS;\n\nclass Path extends NodeItem {\n  /**\n   * @param {*} mesh\n   * @param {*} localPath: is an array of 3-arrays of numbers of the local coordinates in relation to mesh.position and quaternion\n   * @param {*} keyPoints: are the keyPoints meshes array\n   * @param {*} splinePath: is an array of 3-arrays of numbers of the local coordinates in relation to mesh.position and quaternion\n   * @param {*} mainView: MainView\n   * @param {*} keyValueMap: annotations\n   */\n  constructor(\n    mesh,\n    localPath,\n    keyPoints,\n    splinePath,\n    mainView,\n    weight = 1,\n    keyValueMap = {}\n  ) {\n    super(mesh, keyValueMap);\n    // Array<Vector3> points in relation to its mean\n    this.localPath = localPath;\n    // Array<Meshes> representing key points of the curve\n    this.keyPoints = keyPoints;\n    // spline points from local path\n    this.splinePath = splinePath;\n    this.selectedKeyPointIndex = -1;\n    this.mainView = mainView;\n    this.weight = weight;\n  }\n\n  toDict() {\n    const dict = super.toDict();\n    dict.localPath = this.localPath;\n    dict.splinePath = this.splinePath;\n    dict.weight = this.weight;\n    return dict;\n  }\n\n  toForm() {\n    const schema = super.toForm();\n    if (this.selectedKeyPointIndex >= 0) {\n      schema.jsonSchema.properties[\"selectedKeyPoint\"] = {\n        type: \"object\",\n        title: `KeyPoint ${this.selectedKeyPointIndex}`,\n        properties: {\n          x: {\n            type: \"number\",\n            title: \"x\"\n          },\n          y: {\n            type: \"number\",\n            title: \"y\"\n          },\n          z: {\n            type: \"number\",\n            title: \"z\"\n          }\n        }\n      };\n\n      schema.uiSchema[\"selectedKeyPoint\"] = {\n        \"ui:widget\": \"collapse\"\n      };\n      schema.uiSchema[\"position\"] = { \"ui:widget\": \"hidden\" };\n      schema.uiSchema[\"quaternion\"] = { \"ui:widget\": \"hidden\" };\n      schema.uiSchema[\"color\"] = { \"ui:widget\": \"hidden\" };\n      schema.uiSchema[\"annotations\"] = { \"ui:widget\": \"hidden\" };\n      const selectedMesh = this.keyPoints[this.selectedKeyPointIndex];\n      const position = Util3d.getGlobalCoordinates(\n        selectedMesh,\n        selectedMesh.position\n      ).toArray();\n      schema.data[\"selectedKeyPoint\"] = {\n        x: position[0],\n        y: position[1],\n        z: position[2]\n      };\n\n      return schema;\n    }\n    // re-order attributes\n    const props = { ...schema.jsonSchema.properties };\n    const newSchema = {\n      type: \"object\",\n      properties: {\n        oldName: props.oldName,\n        name: props.name,\n        type: props.type,\n        weight: {\n          type: \"number\",\n          title: \"Weight\"\n        },\n        position: props.position,\n        quaternion: props.quaternion,\n        color: props.color,\n        annotations: props.annotations\n      }\n    };\n    schema.jsonSchema = newSchema;\n    schema.data[\"weight\"] = this.weight;\n    return schema;\n  }\n\n  ofForm(form) {\n    super.ofForm(form);\n    if (this.selectedKeyPointIndex >= 0) {\n      const selectedKeyPoint = this.keyPoints[this.selectedKeyPointIndex];\n      const formPosition = form.selectedKeyPoint;\n      const newPosInWorldCoordinates = Vector3.FromArray(\n        [formPosition.x, formPosition.y, formPosition.z].map(Number.parseFloat)\n      );\n      const localPos = Util3d.getLocalCoordFromGlobal(\n        selectedKeyPoint,\n        newPosInWorldCoordinates\n      ).toArray();\n      selectedKeyPoint.position = new Vector3(\n        localPos[0],\n        localPos[1],\n        localPos[2]\n      );\n      selectedKeyPoint.observers.notifyObservers({\n        updatedPointMesh: selectedKeyPoint,\n        is2updateServer: false\n      });\n      return;\n    }\n    this.weight = Number(form.weight);\n    this.updatePathEdgeWithForm(this.weight, this.keyValueMap);\n  }\n\n  updatePathEdgeWithForm(weight, annotations) {\n    this.mainView.getGraph().forEach(({ item: graphItem }) => {\n      const { graph } = graphItem;\n      const first = this.keyPoints[0];\n      const last = this.keyPoints[this.keyPoints.length - 1];\n      const edge = [first, last]\n        .filter(v => !!v?.graphVertex?.vertex)\n        .map(v => v.graphVertex.vertex);\n      if (edge.length < 2) return;\n      const edgeIds = edge.map(v => v.id);\n      graph.getEdge(...edgeIds).forEach(({ data: edgeData }) => {\n        edgeData.weight = weight;\n        edgeData.keyValueMap = annotations;\n      });\n      this.mainView.updateNodeInServer(graphItem.name);\n    });\n  }\n\n  ofDict(scene, dict = null, mainView = null) {\n    return Path.ofDict(scene, dict, mainView);\n  }\n\n  getCopyFunction(isForceUpdate = true) {\n    // mousePosFromRoot : Vector3\n    return (mousePosFromRoot, someMainView) => {\n      return super\n        .getCopyFunction(isForceUpdate)(mousePosFromRoot, someMainView)\n        .map(copiedPath => {\n          const kp = copiedPath?.keyPoints;\n          if (kp !== undefined && isPathOnGraph(this)) {\n            Path.updateGraph(someMainView, kp, copiedPath, true);\n          }\n          return copiedPath;\n        });\n    };\n  }\n\n  getType = () => Path.TYPE;\n\n  static TYPE = \"Path\";\n\n  static ofDict(scene, dict = null, mainView = null) {\n    if (!dict || !mainView)\n      throw new Error(\"null dictionary describing path or null mainView\");\n\n    const name = dict.name;\n    const curve = dict.localPath.map(z => Vec3.of(z).toBabylon());\n    const spline = Util3d.getSplineFromCurve(curve);\n    const { points } = spline;\n    let mesh = null;\n    //hack for creating 1 point curves\n    if (points.length === 1) {\n      mesh = MeshBuilder.CreateLines(\n        name,\n        { points: points, updatable: true },\n        scene\n      );\n    } else {\n      mesh = Util3d.createTubeFromPoints(\n        scene,\n        points,\n        Color3.Gray(),\n        RADIUS / 8,\n        name\n      );\n    }\n    mesh.position = Vec3.of(dict.position).toBabylon();\n    mesh.material = Util3d.getMaterialFromColor(\n      Color3.FromArray(dict.color),\n      scene,\n      `PathMaterial${name}`\n    );\n    mesh.rotationQuaternion = Maybe.fromNull(dict.quaternion)\n      .map(quaternion =>\n        new Quaternion(\n          quaternion[1],\n          quaternion[2],\n          quaternion[3],\n          quaternion[0]\n        ).normalize()\n      )\n      .orSome(Quaternion.Identity());\n    const splinePath = Util3d.splineObj2redis(spline);\n    const keyPoints = createPlaceHolderKeyPoints(\n      scene,\n      { ...dict, mesh, splinePath },\n      mainView\n    );\n    const path2return = new Path(\n      mesh,\n      curve.map(point => [point.x, point.y, point.z]),\n      keyPoints,\n      splinePath,\n      mainView,\n      dict.weight,\n      dict.keyValueMap\n    );\n    mesh.onClick = getMeshOnClick(mainView, path2return);\n    mesh.observers = new Observable();\n    mesh.observers.add(getMeshObserver(keyPoints));\n    return path2return;\n  }\n\n  /**\n   * Create new mesh from old, has side effects\n   *\n   * @param {*} newPoints: Vector3\n   * @param {*} scene: Scene\n   * @param {*} item: PathItem\n   * @param {*} mainView: MainView\n   * @param {*} keyPointUpdateFunction: (scene, mainView, mesh, item) => Array<Mesh>\n   */\n  static createNewMeshFromOldUsingNewPoints(\n    newPoints,\n    scene,\n    item,\n    mainView,\n    keyPointUpdateFunction = defaultKeyPointUpdate\n  ) {\n    const { mesh: oldMesh } = item;\n    const average = Util3d.pointAverage(newPoints);\n    newPoints = newPoints.map(x => x.subtract(average));\n\n    const spline = Util3d.getSplineFromCurve(newPoints);\n    const newMesh = Util3d.createTubeFromPoints(\n      scene,\n      spline.points,\n      Color3.Gray(),\n      RADIUS / 8,\n      oldMesh.name\n    );\n\n    // average in parent coord\n    const rotMat3 = Util3d.getRotationMatrix(oldMesh);\n    const scaleVec3 = Vec3.ofBabylon(oldMesh.scaling);\n    const averageInParentCoord = rotMat3\n      .prodVec(Vec3.ofBabylon(average).mul(scaleVec3))\n      .toBabylon();\n\n    newMesh.parent = oldMesh.parent;\n    newMesh.rotationQuaternion = oldMesh.rotationQuaternion;\n    newMesh.position = averageInParentCoord.add(oldMesh.position);\n\n    newMesh.material = oldMesh.material;\n    newMesh.visibility = oldMesh.visibility;\n    newMesh.onClick = oldMesh.onClick;\n    newMesh.getMouseContextActions = oldMesh.getMouseContextActions;\n    newMesh.nodeItem = oldMesh.nodeItem;\n    newMesh.observers = oldMesh.observers;\n    item.localPath = newPoints.map(x => Vec3.ofBabylon(x).toArray());\n    item.splinePath = Util3d.splineObj2redis(spline);\n    item.mesh = newMesh;\n    const oldKeyPoints = item.keyPoints;\n    item.keyPoints = keyPointUpdateFunction(scene, mainView, oldMesh, item);\n    // update observer that triggers keypoints observers\n    item.mesh.observers.clear();\n    item.mesh.observers.add(getMeshObserver(item.keyPoints));\n\n    Path.updateGraph(\n      mainView,\n      oldKeyPoints,\n      item,\n      oldKeyPoints.length !== item.keyPoints.length\n    );\n\n    oldMesh.dispose();\n    return item;\n  }\n\n  static deleteKeyPoint(scene, keyPointMesh, mainView) {\n    const index = keyPointMesh.index;\n    const name = keyPointMesh.parent.name;\n    mainView.getNodeFromTree(name).forEach(({ item }) => {\n      const { mesh } = item;\n      const copyPosition = { ...mesh.position };\n      let newPoints = item.localPath.map(x => Vec3.of(x).toBabylon());\n      mainView\n        .getUndoManager()\n        .doIt(\n          Path.getUndoDeleteKeyPoint(\n            name,\n            index,\n            copyPosition,\n            newPoints,\n            scene,\n            item,\n            mainView\n          )\n        );\n    });\n  }\n\n  static getUndoDeleteKeyPoint(\n    name,\n    index,\n    copyPosition,\n    newPoints,\n    scene,\n    item,\n    mainView\n  ) {\n    return UndoManager.actionBuilder()\n      .doAction(() => {\n        const copyPoints = [...newPoints];\n        copyPoints.splice(index, 1);\n        Path.createNewMeshFromOldUsingNewPoints(\n          copyPoints,\n          scene,\n          item,\n          mainView,\n          Path.onAddNewPointKeyPointUpdate\n        );\n        mainView.updateNodeInServer(name);\n      })\n      .undoAction(() => {\n        const copyPoints = [...newPoints];\n        item.mesh.position = copyPosition;\n        Path.createNewMeshFromOldUsingNewPoints(\n          copyPoints,\n          scene,\n          item,\n          mainView,\n          Path.onAddNewPointKeyPointUpdate\n        );\n        mainView.updateNodeInServer(name);\n      })\n      .build();\n  }\n\n  static onAddNewPointKeyPointUpdate(scene, mainView, oldMesh, item) {\n    // used when new keypoint is added\n    return createPlaceHolderKeyPoints(scene, item, mainView);\n  }\n\n  /**\n   *\n   * @param {*} scene\n   * @param {*} keyPointMesh\n   * @param {*} curveMesh\n   * @param {*} mainView\n   * @param {*} orientation: it belongs to the set {-1,1}, represents orientation\n   */\n  static addKeyPointInBetween(scene, keyPointMesh, mainView, orientation) {\n    const index = keyPointMesh.index;\n    const name = keyPointMesh.parent.name;\n    mainView.getNodeFromTree(name).forEach(({ item }) => {\n      const points = item.localPath.map(x => Vec3.of(x).toBabylon());\n      const copyPosition = { ...item.mesh.position };\n      mainView\n        .getUndoManager()\n        .doIt(\n          Path.getUndoAddKeyPointInBetween(\n            name,\n            index,\n            orientation,\n            item,\n            points,\n            copyPosition,\n            scene,\n            mainView\n          )\n        );\n    });\n  }\n\n  static getUndoAddKeyPointInBetween(\n    name,\n    index,\n    orientation,\n    item,\n    points,\n    copyPosition,\n    scene,\n    mainView\n  ) {\n    return UndoManager.actionBuilder()\n      .doAction(() => {\n        const nextIndex = index + orientation;\n        const numberOfPoints = item.localPath.length;\n        let newPoints = [];\n        const oldPoints = [...points];\n        if (nextIndex < 0) {\n          newPoints = [\n            oldPoints[0].scale(3).subtract(oldPoints[1]).scale(0.5)\n          ].concat(oldPoints);\n        } else if (nextIndex > numberOfPoints - 1) {\n          newPoints = oldPoints.concat([\n            oldPoints[numberOfPoints - 1]\n              .scale(3)\n              .subtract(oldPoints[numberOfPoints - 2])\n              .scale(0.5)\n          ]);\n        } else {\n          const specialIndex = index + Math.max(0, orientation);\n          for (let i = 0; i < specialIndex; i++) {\n            newPoints.push(oldPoints[i]);\n          }\n          newPoints.push(oldPoints[nextIndex].add(oldPoints[index]).scale(0.5));\n          for (let i = specialIndex; i < numberOfPoints; i++) {\n            newPoints.push(oldPoints[i]);\n          }\n        }\n\n        Path.createNewMeshFromOldUsingNewPoints(\n          newPoints,\n          scene,\n          item,\n          mainView,\n          Path.onAddNewPointKeyPointUpdate\n        );\n\n        mainView.updateNodeInServer(name);\n      })\n      .undoAction(() => {\n        const copyPoints = [...points];\n        item.mesh.position = copyPosition;\n        Path.createNewMeshFromOldUsingNewPoints(\n          copyPoints,\n          scene,\n          item,\n          mainView,\n          Path.onAddNewPointKeyPointUpdate\n        );\n\n        mainView.updateNodeInServer(name);\n      })\n      .build();\n  }\n\n  /**\n   *\n   * @param {*} mainView: MainView\n   * @param {*} oldKpMeshes: Mesh\n   * @param {*} pathItem: PathItem\n   * @param {*} isTopologyChange: boolean\n   */\n  static updateGraph(mainView, oldKpMeshes, pathItem, isTopologyChange) {\n    if (!isTopologyChange) return;\n    mainView.getGraph().forEach(({ item: graph }) => {\n      //naive algorithm, delete all vertices\n      oldKpMeshes.forEach(kp => {\n        graph.delVertexFromMesh(kp, false);\n      });\n      // add final edge\n      const keyPoints = pathItem.keyPoints;\n      const edgeMeshes = [keyPoints[0], keyPoints[keyPoints.length - 1]];\n      graph.addEdge(...edgeMeshes);\n      mainView.updateNodeInServer(graph.name);\n    });\n  }\n}\n\nexport default Path;\n\nconst getMeshOnClick = (mainView, nodeItem) => () => {\n  mainView.closeContextDial();\n  mainView\n    .getNodeFromTree(nodeItem.name)\n    .forEach(node => (node.item.selectedKeyPointIndex = -1));\n};\n\nconst getMeshObserver = keypoints => ({\n  updatedPointMesh,\n  is2updateServer,\n  displacement\n}) => {\n  keypoints.forEach(k => {\n    if (!!k.graphVertex) {\n      k.graphVertex.vertexObs({\n        updatedPointMesh: k,\n        is2updateServer,\n        displacement\n      });\n    }\n  });\n};\n\nfunction defaultKeyPointUpdate(scene, mainView, oldMesh, item) {\n  // used when key point is updated\n  const childrenCopy = [...oldMesh._children];\n  const spline = item.splinePath.map(z => new Vector3(z[0], z[1], 0));\n  childrenCopy.forEach(c => {\n    c.parent = item.mesh;\n  });\n  return item.keyPoints.map((k, i) => {\n    k.index = i;\n    k.name = `${oldMesh.name}keyPointSpline${i}`;\n    k.position = Vec3.of(item.localPath[i]).toBabylon();\n    k.rotationQuaternion = Quaternion.Identity();\n    if (!!oldMesh.graphVertex) k.graphVertex = oldMesh.graphVertex;\n    if (i > 0 && i < item.keyPoints.length - 1) {\n      k._children.forEach(kChild => kChild.dispose());\n      const c = getConeMesh(\n        scene,\n        k.material.diffuseColor,\n        item.mesh,\n        i,\n        spline,\n        k.position\n      )();\n      c.parent = k;\n    }\n    return k;\n  });\n}\n\nconst getKeyPointObserverFunction = (scene, mainView) => {\n  return ({ updatedPointMesh, is2updateServer, displacement }) => {\n    if (!updatedPointMesh.parent) return;\n    mainView\n      .getNodeFromTree(updatedPointMesh.parent.name)\n      .forEach(({ item }) => {\n        const { index } = updatedPointMesh;\n        const { mesh } = item;\n        let newPoints = item.localPath.map(x => Vec3.of(x).toBabylon());\n        newPoints[index] = updatedPointMesh.position;\n        Path.createNewMeshFromOldUsingNewPoints(\n          newPoints,\n          scene,\n          item,\n          mainView\n        );\n        if (index > 0 && index < newPoints.length - 1) {\n          // we know by construction that this keyPoint has children\n          mainView.highlightMeshesInScene([item.keyPoints[index]._children[0]]);\n        }\n        if (is2updateServer) {\n          mainView.updateNodeInServer(mesh.name);\n          mainView.setProperties(item.toForm());\n        }\n      });\n  };\n};\n\nconst getKeyPointActions = (scene, keyPointMesh, mainView) => {\n  const actions = [];\n\n  mainView.getNodeFromTree(keyPointMesh.parent.name).forEach(pathTreeNode => {\n    const item = pathTreeNode.item;\n    const curve = item.localPath;\n\n    if (curve.length !== 2) {\n      actions.push({\n        icon: props => <i className=\"fas fa-trash\" {...props}></i>,\n        action: parentView => {\n          Path.deleteKeyPoint(scene, keyPointMesh, parentView);\n          parentView.closeContextDial();\n        },\n        name: \"Delete node [DEL]\"\n      });\n    }\n\n    actions.push({\n      icon: props => <i className=\"fas fa-less-than\" {...props}></i>,\n      action: parentView => {\n        Path.addKeyPointInBetween(scene, keyPointMesh, parentView, -1);\n        parentView.closeContextDial();\n      },\n      name: \"Add previous\"\n    });\n\n    actions.push({\n      icon: props => <i className=\"fas fa-greater-than\" {...props}></i>,\n      action: parentView => {\n        Path.addKeyPointInBetween(scene, keyPointMesh, parentView, 1);\n        parentView.closeContextDial();\n      },\n      name: \"Add next\"\n    });\n  });\n\n  return actions;\n};\n\nconst createPlaceHolderKeyPoints = (scene, item, mainView) => {\n  const color = new Color3(0.25, 0.25, 0.25);\n  const keyPoints = [];\n  const curve = item.localPath.map(z => Vec3.of(z).toBabylon());\n  const spline = item.splinePath.map(z => new Vector3(z[0], z[1], 0));\n  const curveMesh = item.mesh;\n  curve.forEach((p, i) => {\n    const sphere = getSphereMesh(scene, color, curveMesh, i);\n    const cone = () => {\n      const c = getConeMesh(scene, color, curveMesh, i, spline, p)();\n      const s = getSphereMesh(scene, color, curveMesh, i)();\n      s.visibility = 0.1;\n      c.parent = s;\n      return s;\n    };\n\n    const keyPoint = i === 0 || i === curve.length - 1 ? sphere() : cone();\n    keyPoint.parent = curveMesh;\n    keyPoint.position = p;\n    keyPoint.index = i;\n    keyPoint.observers = new Observable();\n\n    keyPoints.push(keyPoint);\n\n    keyPoint.observers.add(getKeyPointObserverFunction(scene, mainView));\n  });\n\n  keyPoints.forEach(kp => {\n    kp.onClick = () => {\n      mainView.setContextActions(getKeyPointActions(scene, kp, mainView));\n      mainView.getNodeFromTree(kp.parent.name).forEach(node => {\n        node.item.selectedKeyPointIndex = kp.index;\n        mainView.setProperties(node.item.toForm());\n      });\n    };\n  });\n  return keyPoints;\n};\n\nfunction getConeMesh(scene, color, curveMesh, i, spline, p) {\n  return () => {\n    const index = spline\n      .map(z => p.subtract(z).length())\n      .reduce((e, x, i) => (e.value < x ? e : { value: x, index: i }), {\n        value: Number.MAX_VALUE,\n        index: -1\n      }).index;\n    const u = spline[index + 1]\n      .subtract(spline[index])\n      .normalize()\n      .scale(RADIUS);\n    const c = Util3d.createOrientedCone(\n      scene,\n      u,\n      color,\n      `${curveMesh.name}keyPointCone${i}`,\n      false\n    );\n    return c;\n  };\n}\n\nfunction getSphereMesh(scene, color, curveMesh, i) {\n  return () =>\n    Util3d.createSphere(\n      scene,\n      color,\n      RADIUS,\n      `${curveMesh.name}keyPointSpline${i}`,\n      true\n    );\n}\n\nfunction isPathOnGraph(pathItem) {\n  return [\n    pathItem.keyPoints[0]?.graphVertex,\n    pathItem.keyPoints[pathItem.keyPoints.length - 1]?.graphVertex\n  ].every(v => !!v);\n}\n","import NodeItem from \"./NodeItem\";\nimport { Mesh, StandardMaterial, Color3, VertexData } from \"@babylonjs/core\";\nimport { Maybe } from \"monet\";\nimport { Utils, MasterDB } from \"mov-fe-lib-core\";\nconst ofNull = Utils.ofNull;\n\nclass PointCloud extends NodeItem {\n  /**\n   *\n   * @param {*} mesh\n   * @param {*} robot: {name: string, id: string} representing a robot\n   */\n  constructor(mesh, robot) {\n    super(mesh);\n    this.robot = robot;\n    this.pointCloudSubscribe();\n  }\n\n  pointCloudSubscribe() {\n    MasterDB.subscribe(\n      {\n        Scope: \"Robot\",\n        Name: this.robot.id,\n        Parameter: \"front_lidar\"\n      },\n      data => {\n        Maybe.fromNull(data)\n          .flatMap(d => ofNull(d.key))\n          .flatMap(k => ofNull(k.Robot[this.robot.id]))\n          .flatMap(r => ofNull(r.Parameter))\n          .flatMap(p => ofNull(p.front_lidar))\n          .flatMap(f => ofNull(f.Value))\n          .flatMap(v => ofNull(v.points))\n          .forEach(points => this.updatePointCloud(points));\n      },\n      data => {\n        Maybe.fromNull(data.value)\n          .flatMap(v => ofNull(v.Robot))\n          .flatMap(r => ofNull(r[this.robot.id]))\n          .flatMap(r => ofNull(r.Parameter))\n          .flatMap(p => ofNull(p.front_lidar))\n          .flatMap(f => ofNull(f.Value))\n          .flatMap(v => ofNull(v.points))\n          .forEach(points => this.updatePointCloud(points));\n      }\n    );\n  }\n\n  /**\n   *\n   * @param {*} points: Array<3-Array>\n   */\n  updatePointCloud(points) {\n    const vertexData = new VertexData();\n    //Assign positions\n    vertexData.positions = points.flatMap(x => x);\n    const colors = new Array(4 * points.length);\n    vertexData.colors = colors.fill(1.0);\n    //Apply vertexData to custom mesh\n    vertexData.applyToMesh(this.mesh, true);\n  }\n\n  dispose() {\n    super.dispose();\n    MasterDB.unsubscribe({\n      Scope: \"Robot\",\n      Name: this.robot.id,\n      Parameter: \"front_lidar\"\n    });\n  }\n\n  getType = () => PointCloud.TYPE;\n\n  static TYPE = \"PointCloud\";\n\n  static ofDict(scene, dict = null, mainView = null) {\n    if (!dict || !mainView)\n      throw new Error(\n        \"null dictionary describing point cloud or null mainView\"\n      );\n\n    const pointCloudMesh = new Mesh(`cloudPoint${dict.name}`, scene);\n    const mat = new StandardMaterial(`cloudPoint${dict.name}Material`, scene);\n    mat.emissiveColor = new Color3(1, 1, 1);\n    mat.disableLighting = true;\n    mat.pointsCloud = true;\n    mat.pointSize = 2;\n    pointCloudMesh.material = mat;\n\n    return new PointCloud(pointCloudMesh, dict);\n  }\n}\n\nexport default PointCloud;\n","import NodeItem from \"./NodeItem\";\nimport Vec3 from \"../Math/Vec3\";\nimport Util3d from \"../Util3d/Util3d\";\nimport { Maybe } from \"monet\";\nimport React from \"react\";\nimport { Utils } from \"mov-fe-lib-core\";\nimport Constants from \"../Utils/Constants\";\nimport {\n  Vector3,\n  Observable,\n  Color3,\n  StandardMaterial,\n  Quaternion\n} from \"@babylonjs/core\";\nimport { UndoManager } from \"mov-fe-lib-core\";\n\nconst RADIUS = Constants.RADIUS;\nconst positiveMod = Utils.mod;\n\nclass PolygonRegion extends NodeItem {\n  /**\n   * @param {*} mesh\n   * @param {*} localPolygon: is an array of 3-arrays of numbers of the local coordinates in relation to mesh.position and quaternion\n   * @param {*} keyPoints: are the keyPoints meshes array\n   */\n  constructor(mesh, localPolygon, height, keyPoints, keyValueMap = {}) {\n    super(mesh, keyValueMap);\n    this.localPolygon = localPolygon;\n    this.height = height;\n    this.keyPoints = keyPoints;\n  }\n\n  toDict() {\n    const dict = super.toDict();\n    dict.localPolygon = this.localPolygon;\n    dict.height = this.height;\n    return dict;\n  }\n\n  ofDict(scene, dict = null, mainView = null) {\n    return PolygonRegion.ofDict(scene, dict, mainView);\n  }\n\n  getType = () => PolygonRegion.TYPE;\n\n  static TYPE = \"PolygonRegion\";\n\n  static ofDict(scene, dict = null, mainView = null) {\n    if (!dict || !mainView)\n      throw new Error(\"null dictionary describing polygon or null mainView\");\n\n    const polygon = dict.localPolygon.map(z => Vec3.of(z).toBabylon());\n    const middlePoint = Vec3.of(dict.position).toBabylon();\n\n    const mesh = createExtrudedPolygonMesh(\n      scene,\n      polygon,\n      dict.height,\n      dict.name\n    );\n    mesh.position = middlePoint;\n\n    const material = new StandardMaterial(`PolygonMaterial${dict.name}`, scene);\n    const color = new Color3(dict.color[0], dict.color[1], dict.color[2]);\n    material.diffuseColor = color;\n    material.emissiveColor = color;\n    mesh.material = material;\n    mesh.visibility = 0.5;\n    Maybe.fromNull(dict.quaternion).forEach(quaternion => {\n      const babylonQuaternion = new Quaternion(\n        quaternion[1],\n        quaternion[2],\n        quaternion[3],\n        quaternion[0]\n      );\n      mesh.rotationQuaternion = babylonQuaternion.normalize();\n    });\n\n    const keypoints = createPlaceHolderKeyPoints(\n      scene,\n      polygon,\n      mesh,\n      mainView\n    );\n\n    return new PolygonRegion(\n      mesh,\n      polygon.map(point => [point.x, point.y, point.z]),\n      dict.height,\n      keypoints,\n      dict.keyValueMap\n    );\n  }\n\n  /**\n   * Create new mesh from old, has side effects\n   *\n   * @param {*} newPoints: Vector3\n   * @param {*} scene: Scene\n   * @param {*} item: PathItem\n   * @param {*} mainView: MainView\n   * @param {*} keyPointUpdateFunction: (scene, mainView, mesh, item) => Array<Mesh>\n   */\n  static createNewMeshFromOldUsingNewPoints(\n    newPoints,\n    scene,\n    item,\n    mainView,\n    keyPointUpdateFunction = defaultKeyPointUpdate\n  ) {\n    const { mesh: oldMesh } = item;\n    const average = Util3d.pointAverage(newPoints);\n    newPoints = newPoints.map(x => x.subtract(average));\n\n    // average in parent coord\n    const rotMat3 = Util3d.getRotationMatrix(oldMesh);\n    const scaleVec3 = Vec3.ofBabylon(oldMesh.scaling);\n    const averageInParentCoord = rotMat3\n      .prodVec(Vec3.ofBabylon(average).mul(scaleVec3))\n      .toBabylon();\n\n    // update mesh\n    const newMesh = createExtrudedPolygonMesh(\n      scene,\n      newPoints,\n      item.height,\n      oldMesh.name\n    );\n\n    newMesh.parent = oldMesh.parent;\n    newMesh.rotationQuaternion = oldMesh.rotationQuaternion;\n    newMesh.position = averageInParentCoord.add(oldMesh.position);\n\n    newMesh.material = oldMesh.material;\n    newMesh.visibility = oldMesh.visibility;\n    newMesh.onClick = oldMesh.onClick;\n    newMesh.getMouseContextActions = oldMesh.getMouseContextActions;\n    newMesh.nodeItem = oldMesh.nodeItem;\n    newMesh.observers = oldMesh.observers;\n    if (!!oldMesh.graphVertex) newMesh.graphVertex = oldMesh.graphVertex;\n\n    item.localPolygon = newPoints.map(x => Vec3.ofBabylon(x).toArray());\n    item.mesh = newMesh;\n    item.keyPoints = keyPointUpdateFunction(scene, mainView, oldMesh, item);\n\n    oldMesh.dispose();\n    return newPoints;\n  }\n\n  static deleteKeyPoint(scene, keyPointMesh, mainView) {\n    const index = keyPointMesh.index;\n    const name = keyPointMesh.parent.name;\n    mainView.getNodeFromTree(name).forEach(({ item }) => {\n      const { mesh } = item;\n      const copyPosition = { ...mesh.position };\n      let newPoints = item.localPolygon.map(x => Vec3.of(x).toBabylon());\n      mainView\n        .getUndoManager()\n        .doIt(\n          PolygonRegion.getUndoDeleteKeyPoint(\n            name,\n            index,\n            copyPosition,\n            newPoints,\n            scene,\n            item,\n            mainView\n          )\n        );\n    });\n  }\n\n  static getUndoDeleteKeyPoint(\n    name,\n    index,\n    copyPosition,\n    newPoints,\n    scene,\n    item,\n    mainView\n  ) {\n    return UndoManager.actionBuilder()\n      .doAction(() => {\n        const copyPoints = [...newPoints];\n        copyPoints.splice(index, 1);\n        PolygonRegion.createNewMeshFromOldUsingNewPoints(\n          copyPoints,\n          scene,\n          item,\n          mainView,\n          PolygonRegion.onAddNewPointKeyPointUpdate\n        );\n        mainView.updateNodeInServer(name);\n      })\n      .undoAction(() => {\n        const copyPoints = [...newPoints];\n        item.mesh.position = copyPosition;\n        PolygonRegion.createNewMeshFromOldUsingNewPoints(\n          copyPoints,\n          scene,\n          item,\n          mainView,\n          PolygonRegion.onAddNewPointKeyPointUpdate\n        );\n        mainView.updateNodeInServer(name);\n      })\n      .build();\n  }\n\n  static onAddNewPointKeyPointUpdate(scene, mainView, oldMesh, item) {\n    // used when new keypoint is added\n    return createPlaceHolderKeyPoints(\n      scene,\n      item.localPolygon.map(x => Vec3.of(x).toBabylon()),\n      item.mesh,\n      mainView\n    );\n  }\n\n  /**\n   *\n   * @param {*} scene\n   * @param {*} keyPointMesh\n   * @param {*} curveMesh\n   * @param {*} mainView\n   * @param {*} orientation: it belongs to the set {-1,1}, represents orientation\n   */\n  static addKeyPointInBetween = (\n    scene,\n    keyPointMesh,\n    mainView,\n    orientation\n  ) => {\n    const index = keyPointMesh.index;\n    const name = keyPointMesh.parent.name;\n    mainView.getNodeFromTree(name).forEach(({ item }) => {\n      const copyPosition = { ...item.mesh.position };\n      const points = item.localPolygon.map(x => Vec3.of(x).toBabylon());\n      mainView\n        .getUndoManager()\n        .doIt(\n          PolygonRegion.getUndoAddKeyPointInBetween(\n            name,\n            index,\n            orientation,\n            item,\n            points,\n            copyPosition,\n            scene,\n            mainView\n          )\n        );\n    });\n  };\n\n  static getUndoAddKeyPointInBetween(\n    name,\n    index,\n    orientation,\n    item,\n    points,\n    copyPosition,\n    scene,\n    mainView\n  ) {\n    return UndoManager.actionBuilder()\n      .doAction(() => {\n        const numberOfPoints = points.length;\n        const nextIndex = positiveMod(index + orientation, numberOfPoints);\n        let newPoints = [];\n        const specialIndex = index + Math.max(0, orientation);\n        for (let i = 0; i < specialIndex; i++) {\n          newPoints.push(points[i]);\n        }\n        newPoints.push(points[nextIndex].add(points[index]).scale(0.5));\n        for (let i = specialIndex; i < numberOfPoints; i++) {\n          newPoints.push(points[i]);\n        }\n        PolygonRegion.createNewMeshFromOldUsingNewPoints(\n          newPoints,\n          scene,\n          item,\n          mainView,\n          PolygonRegion.onAddNewPointKeyPointUpdate\n        );\n        mainView.updateNodeInServer(name);\n      })\n      .undoAction(() => {\n        const copyPoints = [...points];\n        item.mesh.position = copyPosition;\n        PolygonRegion.createNewMeshFromOldUsingNewPoints(\n          copyPoints,\n          scene,\n          item,\n          mainView,\n          PolygonRegion.onAddNewPointKeyPointUpdate\n        );\n        mainView.updateNodeInServer(name);\n      })\n      .build();\n  }\n}\n\n/**\n *\n * @param {*} polygon: boundary as babylonjs vec3\n */\nconst stitchingBoundaries = polygon => {\n  const n = polygon.length;\n  const orientation = Util3d.computeOrientation(polygon);\n  const ans = [];\n  for (let i = 0; i < n; i++) {\n    const modi = (i + 1) % n;\n    ans.push([i, n + modi, modi]);\n    ans.push([i, n + i, n + modi]);\n  }\n  return orientation > 0 ? ans : ans.map(reverseOrientation);\n};\n\nconst reverseOrientation = triangleIndex => {\n  const ans = [];\n  ans.push(triangleIndex[1]);\n  ans.push(triangleIndex[0]);\n  ans.push(triangleIndex[2]);\n  return ans;\n};\n\n/**\n *\n * @param {*} scene\n * @param {*} polygon array of babylon js vector3\n * @param {*} height\n * @param {*} name\n */\nconst createExtrudedPolygonMesh = (scene, polygon, height, name) => {\n  const h = new Vector3(0, 0, height);\n  const polygonRegionMesh = {\n    positions: [],\n    faces: []\n  };\n  polygonRegionMesh.positions = [...polygon];\n  for (let i = 0; i < polygon.length; i++) {\n    polygonRegionMesh.positions.push(polygon[i].add(h));\n  }\n  const n = polygon.length;\n  const lowerTriangulation = Util3d.triangulatePolygon(polygon);\n  const upperTriangulation = Util3d.triangulatePolygon(\n    polygonRegionMesh.positions.slice(n)\n  )\n    .map(x => x.map(z => z + n))\n    .map(reverseOrientation);\n  const stitchTriangulation = stitchingBoundaries(polygon);\n  polygonRegionMesh.faces = lowerTriangulation\n    .concat(upperTriangulation)\n    .concat(stitchTriangulation);\n  const mesh = Util3d.meshFromPositionAndFaces(\n    name,\n    scene,\n    polygonRegionMesh.positions,\n    polygonRegionMesh.faces\n  );\n  return mesh;\n};\n\nfunction defaultKeyPointUpdate(scene, mainView, oldMesh, item) {\n  // used when keypoint is updated or deleted\n  const childrenCopy = [...oldMesh._children];\n  childrenCopy.forEach(c => {\n    c.parent = item.mesh;\n    console.log(\"Moving parents of child\", c.name);\n  });\n\n  return item.keyPoints.map((k, i) => {\n    k.observers = new Observable();\n    k.observers.add(getKeyPointObserverFunction(scene, mainView));\n    k.index = i;\n    k.name = `${oldMesh.name}keyPoint${i}`;\n    k.position = Vec3.of(item.localPolygon[i]).toBabylon();\n    return k;\n  });\n}\n\nconst getKeyPointObserverFunction = (scene, mainView) => {\n  return ({ updatedPointMesh, is2updateServer }) => {\n    if (!updatedPointMesh.parent) return;\n    mainView\n      .getNodeFromTree(updatedPointMesh.parent.name)\n      .forEach(polygonTreeNode => {\n        const index = updatedPointMesh.index;\n        const item = polygonTreeNode.item;\n        const mesh = item.mesh;\n        const name = mesh.name;\n        let newPoints = item.localPolygon.map(x => Vec3.of(x).toBabylon());\n        newPoints[index] = updatedPointMesh.position;\n        PolygonRegion.createNewMeshFromOldUsingNewPoints(\n          newPoints,\n          scene,\n          item,\n          mainView\n        );\n        if (is2updateServer) {\n          mainView.updateNodeInServer(name);\n        }\n        // signal observers\n        Maybe.fromNull(item.mesh.observers).forEach(obs => {\n          //side effect update absolute position\n          item.mesh.getAbsolutePosition();\n          obs.notifyObservers({\n            updatedPointMesh: item.mesh,\n            is2updateServer: is2updateServer,\n            displacement: Vector3.Zero()\n          });\n        });\n        Maybe.fromNull(item.mesh.graphVertex).forEach(({ vertexObs }) => {\n          item.mesh.getAbsolutePosition();\n          vertexObs({\n            updatedPointMesh: item.mesh,\n            is2updateServer: is2updateServer,\n            displacement: Vector3.Zero()\n          });\n        });\n      });\n  };\n};\n\nconst getKeyPointActions = (scene, keyPointMesh, mainView) => {\n  const actions = [];\n  mainView.getNodeFromTree(keyPointMesh.parent.name).forEach(pathTreeNode => {\n    const item = pathTreeNode.item;\n    const polygon = item.localPolygon;\n    if (polygon.length > 3) {\n      actions.push({\n        icon: props => <i className=\"fas fa-trash\" {...props}></i>,\n        action: parentView => {\n          PolygonRegion.deleteKeyPoint(scene, keyPointMesh, parentView);\n          parentView.closeContextDial();\n        },\n        name: \"Delete node [DEL]\"\n      });\n    }\n    actions.push({\n      icon: props => <i className=\"fas fa-less-than\" {...props}></i>,\n      action: parentView => {\n        PolygonRegion.addKeyPointInBetween(scene, keyPointMesh, parentView, -1);\n        parentView.closeContextDial();\n      },\n      name: \"Add previous\"\n    });\n    actions.push({\n      icon: props => <i className=\"fas fa-greater-than\" {...props}></i>,\n      action: parentView => {\n        PolygonRegion.addKeyPointInBetween(scene, keyPointMesh, parentView, 1);\n        parentView.closeContextDial();\n      },\n      name: \"Add next\"\n    });\n  });\n\n  return actions;\n};\n\nconst createPlaceHolderKeyPoints = (scene, polygon, polygonMesh, mainView) => {\n  const keyPoints = [];\n  polygon.forEach((p, i) => {\n    const color = new Color3(0.25, 0.25, 0.25);\n    const keyPoint = Util3d.createSphere(\n      scene,\n      color,\n      RADIUS,\n      `${polygonMesh.name}keyPointPolygon${i}`,\n      true\n    );\n    keyPoint.parent = polygonMesh;\n    keyPoint.position = p;\n    keyPoint.index = i;\n    keyPoint.observers = new Observable();\n\n    keyPoints.push(keyPoint);\n\n    keyPoint.observers.add(getKeyPointObserverFunction(scene, mainView));\n  });\n\n  keyPoints.forEach(x => {\n    x.onClick = () => {\n      mainView.setContextActions(getKeyPointActions(scene, x, mainView));\n    };\n  });\n\n  return keyPoints;\n};\n\nexport default PolygonRegion;\n","import Vec3 from \"../Math/Vec3\";\nimport Util3d from \"../Util3d/Util3d\";\nimport { Database } from \"mov-fe-lib-core\";\nimport AssetNodeItem from \"./AssetNodeItem\";\nimport { Axis, Space, Vector3, Quaternion, Color3 } from \"@babylonjs/core\";\nimport _get from \"lodash/get\";\n\nclass Robot extends AssetNodeItem {\n  static ROBOT_MESH_NAME = \"Tugbot.stl\";\n\n  constructor(meshTree, assetName, keyValueMap = {}) {\n    super(meshTree.mesh, assetName, keyValueMap);\n    this.requestAnimationFrameId = null;\n    this.meshTree = meshTree;\n    this.timeSinceLastUpdate = 0;\n    this.isOnline = true;\n    this.speed = Vector3.Zero();\n    this.qSpeed = Quaternion.Zero();\n    this.newPos = Vector3.Zero();\n    this.newOri = Quaternion.Identity();\n    this.db = new Database();\n  }\n\n  toDict() {\n    let dict = super.toDict();\n    return dict;\n  }\n\n  toForm() {\n    const schema = super.toForm();\n    schema.jsonSchema.properties = {\n      oldName: schema.jsonSchema.properties.oldName,\n      name: schema.jsonSchema.properties.name,\n      type: schema.jsonSchema.properties.type,\n      assetName: {\n        type: \"string\",\n        title: \"Asset Name\"\n      },\n      position: schema.jsonSchema.properties.position,\n      quaternion: schema.jsonSchema.properties.quaternion,\n      color: schema.jsonSchema.properties.color,\n      annotations: schema.jsonSchema.properties.annotations\n    };\n    schema.uiSchema[\"assetName\"] = {\n      \"ui:disabled\": true\n    };\n    schema.data[\"assetName\"] = this.assetName;\n    return schema;\n  }\n\n  dispose() {\n    super.dispose();\n    this.db.unsubscribe({\n      Scope: \"Robot\",\n      Name: this.meshTree.id,\n      Parameter: \"tf\"\n    });\n    window.cancelAnimationFrame(this.requestAnimationFrameId);\n  }\n\n  updateRobot = (robot, oldTimeInMillis, robotAnimator) => {\n    const time = new Date().getTime();\n    const dt = 1e-3 * (time - oldTimeInMillis);\n    robotAnimator(robot, dt);\n    this.requestAnimationFrameId = requestAnimationFrame(() =>\n      this.updateRobot(robot, time, robotAnimator)\n    );\n  };\n\n  animate = robotAnimator => {\n    this.requestAnimationFrameId = requestAnimationFrame(() =>\n      this.updateRobot(this, new Date().getTime(), robotAnimator)\n    );\n  };\n\n  getType = () => Robot.TYPE;\n\n  toOffline() {\n    if (this.mesh.isDisposed()) return;\n    this.mesh._children[0]._children[0].visibility = 0.1;\n    this.speed = Vector3.Zero();\n    this.qSpeed = Quaternion.Zero();\n    this.isOnline = false;\n  }\n\n  toOnline() {\n    if (this.mesh.isDisposed()) return;\n    this.mesh._children[0]._children[0].visibility = 1;\n    this.isOnline = true;\n  }\n  //========================================================================================\n  /*                                                                                      *\n   *                                   Static Functions                                   *\n   *                                                                                      */\n  //========================================================================================\n\n  static TYPE = \"Robot\";\n\n  static TIME_2_BE_OFFLINE_IN_SEC = 10;\n\n  static getDefaultAnimator = parentView => (robot, dt) => {\n    const mesh = robot.mesh;\n    const speed = 3;\n    const vel = Util3d.getRotationMatrix(mesh)\n      .prodVec(new Vec3([speed, 0, 0]))\n      .toBabylon();\n    mesh.position = mesh.position.add(vel.scale(dt));\n    mesh.rotate(Axis.Z, (-Math.PI / 2) * dt, Space.LOCAL);\n  };\n\n  static updateRobotMeshTree(newRobotTf, robot) {\n    const lastPosition = robot.mesh.position;\n    const lastOrientation = robot.mesh.rotationQuaternion;\n    const newPosition = new Vector3(\n      newRobotTf.position.x,\n      newRobotTf.position.y,\n      newRobotTf.position.z\n    );\n    const newOrientation = new Quaternion(\n      newRobotTf.orientation.x,\n      newRobotTf.orientation.y,\n      newRobotTf.orientation.z,\n      newRobotTf.orientation.w\n    ).normalize();\n\n    const dtReciprocal = 1 / robot.timeSinceLastUpdate;\n    robot.speed = newPosition.subtract(lastPosition).scale(dtReciprocal);\n    robot.qSpeed = newOrientation.subtract(lastOrientation).scale(dtReciprocal);\n    robot.newPos = newPosition;\n    robot.newOri = newOrientation;\n    robot.timeSinceLastUpdate = 0;\n  }\n\n  static getSocketAnimator = (robot, parentView) => {\n    robot.db.subscribe(\n      { Scope: \"Robot\", Name: robot.meshTree.id, Parameter: \"tf\" },\n      data => {\n        const tf = _get(\n          data,\n          `key.Robot.${robot.meshTree.id}.Parameter.tf.Value`,\n          undefined\n        );\n        if (tf) Robot.updateRobotMeshTree(tf, robot);\n      },\n      data => {\n        const tf = _get(\n          data,\n          `key.Robot.${robot.meshTree.id}.Parameter.tf.Value`,\n          undefined\n        );\n        if (tf) Robot.updateRobotMeshTree(tf, robot);\n      }\n    );\n    return (robot2Animate, dt) => {\n      const epsilon = 1e-2;\n      const n = 1 / epsilon;\n      const biasedCoin = robot2Animate.timeSinceLastUpdate % n; // Math.random() < epsilon\n      robot2Animate.timeSinceLastUpdate += dt;\n      if (Vec3.ofBabylon(robot2Animate.speed).someNaNOrInfinite()) return;\n      if (Vec3.ofBabylon(robot2Animate.qSpeed).someNaNOrInfinite()) return;\n      robot2Animate.mesh.position = biasedCoin\n        ? robot2Animate.newPos\n        : robot2Animate.mesh.position.add(robot2Animate.speed.scale(dt));\n      robot2Animate.mesh.rotationQuaternion = biasedCoin\n        ? robot2Animate.newOri\n        : robot2Animate.mesh.rotationQuaternion\n            .add(robot.qSpeed.scale(dt))\n            .normalize();\n      Robot.setOnOffLine(robot2Animate);\n    };\n  };\n\n  static setOnOffLine(robot) {\n    if (robot.timeSinceLastUpdate > Robot.TIME_2_BE_OFFLINE_IN_SEC) {\n      robot.toOffline();\n    } else {\n      if (!robot.isOnline) robot.toOnline();\n    }\n  }\n\n  /**\n   * Side effect function\n   */\n  static transformMesh(mesh, scene) {\n    const thetaX = Math.PI / 2;\n    const translate = 0.25;\n    const boundScale = 1.9;\n\n    const boundingSphere = mesh.getBoundingInfo().boundingSphere;\n    mesh.position.set(\n      -boundingSphere.center.x,\n      -boundingSphere.center.y,\n      -boundingSphere.center.z\n    );\n\n    const tfSphereMesh = Util3d.createSphere(\n      scene,\n      new Color3(0.0, 0.0, 0.0),\n      0.5 * boundingSphere.radius,\n      `tfsphere${mesh.name}`,\n      false\n    );\n    tfSphereMesh.visibility = 0.25;\n    tfSphereMesh.scaling = Vec3.ONES.scale(\n      1 / boundingSphere.radius\n    ).toBabylon();\n\n    tfSphereMesh.addRotation(thetaX, 0, 0);\n    tfSphereMesh.position.set(0, 0, translate);\n    const spherePlaceHolder = Util3d.createSphere(\n      scene,\n      new Color3(0.0, 0.0, 0.0),\n      boundScale,\n      mesh.name,\n      true\n    );\n    spherePlaceHolder.visibility = 0.1;\n\n    mesh.parent = tfSphereMesh;\n    tfSphereMesh.parent = spherePlaceHolder;\n    return spherePlaceHolder;\n  }\n\n  static createRobotMeshTreeRecursive(node, mesh, parent, scene) {\n    if (!mesh) {\n      mesh = Util3d.createSphere(\n        scene,\n        new Color3(0.0, 0.0, 0.0),\n        0.5,\n        node.name,\n        false\n      );\n    }\n    const meshTree = {\n      mesh: mesh,\n      children: []\n    };\n    const position = new Vector3(\n      node.position.x,\n      node.position.y,\n      node.position.z\n    );\n    const quaternion = new Quaternion(\n      node.orientation.x,\n      node.orientation.y,\n      node.orientation.z,\n      node.orientation.w\n    );\n    mesh.position = position;\n    mesh.rotationQuaternion = quaternion;\n    if (parent) {\n      mesh.parent = parent;\n    }\n    meshTree[\"children\"] = node.child.map(child => {\n      return this.createRobotMeshTreeRecursive(\n        child,\n        Util3d.referentialBuilder(scene)\n          .boxParams({ isVisible: false, size: 0.1 })\n          .build(),\n        mesh,\n        scene\n      );\n    });\n    return meshTree;\n  }\n\n  static createRobotMeshTree(robotTree, robotMesh, scene) {\n    return Robot.createRobotMeshTreeRecursive(\n      robotTree,\n      robotMesh,\n      null,\n      scene\n    );\n  }\n\n  static builder() {\n    return new RobotBuilder();\n  }\n}\n\nclass RobotBuilder {\n  constructor() {\n    this._name = null;\n    this._meshTree = null;\n    this._parentMesh = null;\n    this._scene = null;\n    this._isPickable = true;\n    this._id = null;\n    this._keyValueMap = {};\n    this._assetName = null;\n  }\n\n  name(name) {\n    this._name = name;\n    return this;\n  }\n\n  meshTree(meshTree) {\n    this._meshTree = meshTree;\n    return this;\n  }\n\n  parentMesh(parentMesh) {\n    this._parentMesh = parentMesh;\n    return this;\n  }\n\n  scene(scene) {\n    this._scene = scene;\n    return this;\n  }\n\n  isPickable(isPickable) {\n    this._isPickable = isPickable;\n    return this;\n  }\n\n  id(id) {\n    this._id = id;\n    return this;\n  }\n\n  keyValueMap(keyValueMap) {\n    this._keyValueMap = keyValueMap;\n    return this;\n  }\n\n  assetName(assetName) {\n    this._assetName = assetName;\n    return this;\n  }\n\n  build() {\n    const variables = Object.keys(this)\n      .filter(x => x !== \"_parentMesh\")\n      .map(x => this[x]);\n\n    variables.forEach(x => {\n      if (x === null)\n        throw new Error(\n          `There are missing variables to build a robot, e.g ${x}`\n        );\n    });\n\n    this._meshTree.id = this._id;\n    this._meshTree.name = this._name;\n    this._meshTree.mesh.name = this._name;\n    this._meshTree.mesh.isPickable = this._isPickable;\n    this._meshTree.mesh.parent = this._parentMesh;\n\n    const baseAxis = Util3d.referentialBuilder(this._scene)\n      .isPickable(false)\n      .boxParams({ isVisible: false, size: 0.1 })\n      .name(`${this._name}Axis`)\n      .build();\n    baseAxis.parent = this._meshTree.mesh;\n\n    return new Robot(this._meshTree, this._assetName, this._keyValueMap);\n  }\n}\n\nexport default Robot;\n","import NodeItem from \"./NodeItem\";\nimport Vec3 from \"../Math/Vec3\";\nimport { Maybe } from \"monet\";\nimport Util3d from \"../Util3d/Util3d\";\nimport Constants from \"../Utils/Constants\";\nimport { Vector3, Color3, Observable, StandardMaterial } from \"@babylonjs/core\";\n/**\n * Will be deprecated\n */\nclass Wall extends NodeItem {\n  constructor(mesh, localWall, size, keyPoints = {}, keyValueMap = {}) {\n    super(mesh, keyValueMap);\n    this.localWall = localWall;\n    this.size = size;\n    this.keyPoints = keyPoints;\n  }\n\n  toDict() {\n    const dict = super.toDict();\n    dict.localWall = this.localWall;\n    dict.size = this.size;\n    return dict;\n  }\n\n  ofDict(scene, dict = null, mainView = null) {\n    return Wall.ofDict(scene, dict, mainView);\n  }\n\n  getType = () => Wall.TYPE;\n\n  static TYPE = \"Wall\";\n\n  static ofDict(scene, dict = null, mainView = null) {\n    if (!dict) throw new Error(\"null dictionary describing wall\");\n    const name = Maybe.fromNull(dict.name).orSome(\n      `Wall${Math.floor(Math.random() * 1e3)}`\n    );\n    const mesh = createWallMesh(dict, name, scene);\n\n    const material = new StandardMaterial(`WallMaterial${name}`, scene);\n    const color = new Color3(dict.color[0], dict.color[1], dict.color[2]);\n    material.diffuseColor = color;\n    material.emissiveColor = color;\n    mesh.material = material;\n    // babylonjs highlight shader flickers when floor intersect\n    mesh.position.z += 1e-3;\n\n    const keypoints = createPlaceHolderKeyPoints(\n      scene,\n      dict.localWall.map(x => Vec3.of(x).toBabylon()),\n      mesh,\n      mainView\n    );\n    return new Wall(\n      mesh,\n      dict.localWall,\n      dict.size,\n      keypoints,\n      dict.keyValueMap\n    );\n  }\n}\n\nconst RADIUS = Constants.RADIUS;\nconst FACES = [\n  [0, 1, 2],\n  [2, 3, 0],\n  [4, 6, 5],\n  [6, 4, 7],\n  [0, 5, 1],\n  [5, 0, 4],\n  [3, 2, 6],\n  [6, 7, 3],\n  [1, 6, 2],\n  [6, 1, 5],\n  [0, 3, 7],\n  [7, 4, 0]\n];\n\nfunction createWallMesh(dict, name, scene) {\n  const centeredWall = dict.localWall.map(x => Vec3.of(x).toBabylon());\n  const middlePoint = Vec3.of(dict.position).toBabylon();\n  const tangent = centeredWall[1].subtract(centeredWall[0]).normalize();\n  const normal = new Vector3(-tangent.y, tangent.x, 0);\n  const shape = [\n    centeredWall[0].add(normal.scale(dict.size.width)),\n    centeredWall[0].subtract(normal.scale(dict.size.width)),\n    centeredWall[1].subtract(normal.scale(dict.size.width)),\n    centeredWall[1].add(normal.scale(dict.size.width))\n  ];\n  const h = new Vector3(0, 0, dict.size.height);\n  const wallMesh = {\n    positions: [\n      shape[0],\n      shape[1],\n      shape[2],\n      shape[3],\n      shape[0].add(h),\n      shape[1].add(h),\n      shape[2].add(h),\n      shape[3].add(h)\n    ],\n    faces: FACES\n  };\n  const mesh = Util3d.meshFromPositionAndFaces(\n    name,\n    scene,\n    wallMesh.positions,\n    wallMesh.faces\n  );\n  mesh.position = middlePoint;\n  return mesh;\n}\n\nfunction createNewMeshFromOldUsingNewPoints(newWall, scene, mesh, item) {\n  const average = Util3d.pointAverageVec3(\n    newWall.localWall.map(x => Vec3.of(x))\n  );\n  newWall.position = average.toArray();\n  newWall.localWall = newWall.localWall.map(x =>\n    Vec3.of(x).sub(average).toArray()\n  );\n\n  const newMesh = createWallMesh(newWall, mesh.name, scene);\n  newMesh.position = mesh.position;\n  newMesh.rotationQuaternion = mesh.rotationQuaternion;\n  newMesh.locallyTranslate(average.toBabylon());\n  newMesh.material = mesh.material;\n  newMesh.visibility = mesh.visibility;\n  newMesh.parent = mesh.parent;\n  newMesh.getMouseContextActions = mesh.getMouseContextActions;\n  newMesh.nodeItem = mesh.nodeItem;\n\n  item.mesh = newMesh;\n  item.localWall = newWall.localWall;\n\n  const childrenCopy = [...mesh._children];\n  childrenCopy.forEach(c => {\n    mesh.removeChild(c);\n    c.parent = newMesh;\n  });\n  item.keyPoints.forEach((k, j) => {\n    k.position = Vec3.of(newWall.localWall[j]).toBabylon();\n  });\n  // dispose old mesh\n  mesh.dispose();\n}\n\nconst getKeyPointObserverFunction = (mainView, scene) => {\n  return ({ updatedPointMesh, is2updateServer }) => {\n    mainView.getNodeFromTree(updatedPointMesh.parent.name).forEach(wallNode => {\n      const index = updatedPointMesh.index;\n      const item = wallNode.item;\n      const mesh = item.mesh;\n      let newWall = {\n        position: Vec3.ofBabylon(mesh.position).toArray(),\n        localWall: item.localWall,\n        size: item.size\n      };\n      newWall.localWall[index] = Vec3.ofBabylon(\n        updatedPointMesh.position\n      ).toArray();\n\n      createNewMeshFromOldUsingNewPoints(newWall, scene, mesh, item);\n\n      if (is2updateServer) {\n        mainView.updateNodeInServer(mesh.name);\n      }\n    });\n  };\n};\n\nconst createPlaceHolderKeyPoints = (scene, wall, wallMesh, mainView) => {\n  const keyPoints = [];\n  wall.forEach((p, i) => {\n    const keyPoint = Util3d.createSphere(\n      scene,\n      new Color3(0.25, 0.25, 0.25),\n      RADIUS,\n      `${wallMesh.name}keyPointWall${i}`,\n      true\n    );\n    keyPoint.parent = wallMesh;\n    keyPoint.position = p;\n    keyPoint.index = i;\n    keyPoint.observers = new Observable();\n    keyPoint.observers.add(getKeyPointObserverFunction(mainView, scene));\n    keyPoints.push(keyPoint);\n  });\n  return keyPoints;\n};\n\nexport default Wall;\n","import React, { Component } from \"react\";\nimport BaseViewer from \"./BaseViewer/BaseViewer\";\nimport PropTypes from \"prop-types\";\nimport { HighlightLayer, Vector3 } from \"@babylonjs/core\";\nimport { Maybe } from \"monet\";\nimport MainViewRetriever from \"./MainView/MainViewRetriever\";\nimport DefaultScene from \"./Utils/DefaultScene\";\nimport GlobalRef from \"./NodeItem/GlobalRef\";\nimport SceneServerUtils from \"./Utils/SceneServerUtils\";\nimport TreeServerUtils from \"./Utils/TreeServerUtils\";\nimport AssetsManager from \"./AssetsManager/AssetsManager\";\nimport TreeObject from \"./TreeObject/TreeObject\";\nimport GraphItem from \"./NodeItem/GraphItem\";\nimport DefaultMouseEvents from \"./Utils/DefaultMouseEvents\";\nimport Util3d from \"./Util3d/Util3d\";\nimport Vec3 from \"./Math/Vec3\";\nimport ReactResizeDetector from \"react-resize-detector\";\nimport ConfirmAlertModal from \"../Modal/ConfirmAlertModal\";\nimport { UndoManager } from \"mov-fe-lib-core\";\n\n//========================================================================================\n/*                                                                                      *\n *                                      SceneViewer                                     *\n *                                                                                      */\n//========================================================================================\n\nclass SceneViewer extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { errorList: [] };\n    this.sceneName = props.sceneName.Value;\n    this.sceneMemory = Maybe.none();\n    this.objectTree = [];\n    this.undoManager = new UndoManager();\n    // camera properties\n    this.isPanned = false;\n    this.isRotated = false;\n    this.targetPos = undefined;\n    this.cameraSpeed = Vector3.Zero();\n    this.time = new Date().getTime() * 1e-3;\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                   Getters & Setters                                  *\n   *                                                                                      */\n  //========================================================================================\n\n  getSceneMemory = () => this.sceneMemory;\n\n  getAssetsActionMap = () => AssetsManager.getInstance().getAssetsActionMap();\n\n  getRootNode = (tree = [...this.objectTree]) => {\n    return tree.filter(x => x.title === GlobalRef.NAME)[0];\n  };\n\n  getObjectTree = () => this.objectTree;\n\n  setSelectedAction = () => {\n    /* empty */\n  };\n\n  getGraph() {\n    return new TreeObject(this.objectTree).getNode(\n      x => GraphItem.TYPE === x.item.getType()\n    );\n  }\n\n  getUndoManager = () => this.undoManager;\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                    Utils functions                                   *\n   *                                                                                      */\n  //========================================================================================\n\n  getNodeFromTree = (name, objectTree = [...this.objectTree]) => {\n    return TreeServerUtils.ofScene(this.sceneName).getNodeFromTree(\n      name,\n      objectTree\n    );\n  };\n\n  deleteNodeFromTreeUsingName = () => {\n    throw new Error(\"Delete Node in viewer Exception\");\n  };\n\n  updateNodeInServer = (name, oldName = null) => {\n    TreeServerUtils.ofScene(this.sceneName).updateNodeInServer(\n      name,\n      [...this.objectTree],\n      oldName\n    );\n  };\n\n  addNodeItem2Tree = (\n    nodeItem,\n    parentName = GlobalRef.NAME,\n    is2addInServer = true,\n    isVisible = true\n  ) => {\n    const newObjectTree = TreeServerUtils.ofScene(\n      this.sceneName\n    ).addNodeItem2Tree(\n      [...this.objectTree],\n      nodeItem,\n      parentName,\n      is2addInServer,\n      isVisible\n    );\n    this.objectTree = newObjectTree;\n  };\n\n  setCameraToTarget = () => {\n    this.sceneMemory.forEach(({ camera }) => {\n      const focusObject = this.isPanned ? \"\" : this.props.focusObject.Value;\n      this.getNodeFromTree(focusObject).forEach(\n        x => {\n          console.log(\"Set Camera, Found Object\", x.item.mesh);\n          const dt = new Date().getTime() * 1e-3 - this.time;\n          this.time = new Date().getTime() * 1e-3;\n          const pos = x.item.mesh._absolutePosition.clone();\n          this.cameraSpeed = !this.targetPos ? Vector3.Zero() : pos.subtract(this.targetPos);\n          this.targetPos = pos;  \n          camera.setTarget(pos);\n          camera.position = camera.position.add(this.cameraSpeed.scale(dt))\n          camera.beta = this.isRotated ? camera.beta : 0;\n          // move target object for debug\n          // const p = x.item.mesh.position;\n          // x.item.mesh.position = p.add(new Vector3(p.x, p.y, 0).scale(1e-2)); \n        }\n      );\n    });\n  };\n\n  addCanvasEventListeners(canvas) {\n    const events = [\n      {\n        name: \"pointerdown\",\n        function: evt => this.onPointerDown(evt)\n      },\n      { name: \"pointerup\", function: evt => this.onPointerUp(evt) },\n      {\n        name: \"pointermove\",\n        function: evt => this.onPointerMove(evt)\n      }\n    ];\n    events.forEach(event =>\n      canvas.addEventListener(event.name, event.function, false)\n    );\n  }\n\n  onPointerDown = evt => {\n    this.isRotated = true;\n    DefaultMouseEvents.onPointerDown(this)(evt);\n  };\n\n  onPointerUp = evt => {\n    DefaultMouseEvents.onPointerUp(this)(evt);\n  };\n\n  onPointerMove = evt => {\n    if(evt.buttons === 4) this.isPanned = true;\n    DefaultMouseEvents.onPointerMove(this)(evt);\n  };\n\n  getMouseCoordsFromRoot() {\n    return this.sceneMemory.flatMap(({ scene, ground }) => {\n      const maybeCurrent = Util3d.getGroundPosition(scene, ground);\n      return maybeCurrent.flatMap(current =>\n        Maybe.fromNull(this.getRootNode()).map(rootNode =>\n          Util3d.getLocalCoordFromWorld(\n            rootNode.item.mesh,\n            Vec3.ofBabylon(current)\n          ).toBabylon()\n        )\n      );\n    });\n  }\n\n  onResize = (w, h) => {\n    if (w === 0 && h === 0) return;\n    this.getSceneMemory().forEach(({ mouseLocationText }) => {\n      mouseLocationText.left = -w / 2 + w / 17;\n      mouseLocationText.top = -h / 2 + h / 30;\n    });\n  };\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                    Scene functions                                   *\n   *                                                                                      */\n  //========================================================================================\n\n  retrieveSceneFromServer = (afterLoading = () => {}) => {\n    SceneServerUtils.retrieveScene(this.sceneName, data => {\n      const errorList = MainViewRetriever.importScene(this, data.result);\n      this.setState({ errorList });\n      afterLoading();\n    });\n  };\n\n  loadAssets = async () => {\n    const assetManager = AssetsManager.getInstance();\n    if (Object.values(assetManager.getAssets()).length === 0) {\n      await assetManager.load();\n    }\n  };\n\n  loadScene = async () => {\n    await this.loadAssets();\n    this.retrieveSceneFromServer(this.renderScene);\n  };\n\n  renderScene = () => {\n    this.getSceneMemory().forEach(({ engine, scene }) =>\n      engine.runRenderLoop(() => {\n        this.time = new Date().getTime() * 1e-3;\n        scene.render()\n        this.setCameraToTarget();\n      })\n    );\n  };\n\n  onSceneReady = scene => {\n    const engine = scene.getEngine();\n    const canvas = engine.getRenderingCanvas();\n    this.addCanvasEventListeners(canvas);\n    const mouseLocationText = DefaultScene.createMouseLocationText(scene);\n    this.sceneMemory = Maybe.some({\n      engine: engine,\n      canvas: canvas,\n      scene: scene,\n      camera: DefaultScene.createCamera(scene, canvas),\n      light: DefaultScene.createLight(scene),\n      ground: DefaultScene.createMeshGround(scene),\n      gizmoManager: DefaultScene.createGizmo(scene),\n      highlightLayer: {\n        layer: new HighlightLayer(\"hl1\", scene),\n        lastHlMeshes: []\n      },\n      mouseLocationText: mouseLocationText\n    });\n    return scene;\n  };\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                   Render functions                                   *\n   *                                                                                      */\n  //========================================================================================\n\n  renderMenus = () => {\n    // to implement interface of MainView\n  };\n\n  componentDidUpdate = prevProps => {\n    const predicateAction = [\n      {\n        propVar: x => x.sceneName.Value,\n        action: () => (this.sceneName = this.props.sceneName.Value)\n      },\n      {\n        propVar: x => x.focusObject.Value,\n        action:() => {\n          this.isPanned = false;\n          this.isRotated = false;\n          this.setCameraToTarget()\n        } \n      }\n    ];\n    predicateAction.forEach(({ propVar, action }) => {\n      if (propVar(this.props) !== propVar(prevProps)) {\n        action();\n      }\n    });\n  };\n\n  componentDidMount = () => {\n    console.log(\"SceneViewer Did Mount!! \");\n    this.loadScene();\n  };\n\n  render() {\n    const { errorList } = this.state;\n    const resetErrorList = () => this.setState({ errorList: [] });\n    return (\n      <div style={{ display: \"flex\", flexGrow: 1, maxHeight: \"100%\" }}>\n        <BaseViewer\n          onSceneReady={this.onSceneReady}\n          is2render={false}\n          sceneFactory={DefaultScene.createScene}\n        />\n        <ConfirmAlertModal\n          onSubmit={resetErrorList}\n          onCancel={resetErrorList}\n          open={errorList?.length > 0}\n          title={\"Scene Viewer\"}\n          message={\"An error occurred while loading the scene\"}\n          submitText={\"OK\"}\n          submitColor={\"primary\"}\n          cancelText={\"Cancel\"}\n          cancelColor={\"secondary\"}\n        >\n          {getErrorSolutionList(errorList)}\n        </ConfirmAlertModal>\n        <ReactResizeDetector\n          handleWidth\n          handleHeight\n          onResize={this.onResize}\n        />\n      </div>\n    );\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                   Static functions                                   *\n   *                                                                                      */\n  //========================================================================================\n\n  static getComponentFactory(sceneName) {\n    return masterProps => {\n      const augmentProps = {\n        sceneName,\n        ...masterProps\n      };\n      return <SceneViewer {...augmentProps} />;\n    };\n  }\n\n  static EXTENSION = \".3d\";\n}\n\nSceneViewer.propTypes = {\n  sceneName: PropTypes.shape({ Value: PropTypes.string }),\n  focusObject: PropTypes.shape({ Value: PropTypes.string })\n};\n\nSceneViewer.defaultProps = {\n  sceneName: { Value: \"Pedro\" },\n  focusObject: { Value: \"\" }\n};\n\nfunction getErrorSolutionList(errorList) {\n  return !errorList ? (\n    []\n  ) : (\n    <ul>\n      {errorList.map(({ cause, solution }, i) => {\n        return <li key={\"error\" + i}>{`${cause}, ${solution}`}</li>;\n      })}\n    </ul>\n  );\n}\n\nexport default SceneViewer;\n","class TreeNode {\n  constructor(title, item, children, expanded, isVisible) {\n    this.title = title;\n    this.item = item;\n    this.children = children;\n    this.expanded = expanded;\n    this.isVisible = isVisible;\n  }\n\n  static dispose(node) {\n    /*\n     * function must be defined here, otherwise it wouldn't work on the UI Tree change method\n     */\n    node.item.dispose();\n    node.children.forEach(child => {\n      TreeNode.dispose(child);\n    });\n  }\n\n  /**\n   *\n   * @param {*} node\n   */\n  static toDict(node) {\n    /*\n     * function must be defined here, otherwise it wouldn't work on the UI Tree change method\n     */\n    return {\n      name: node.title,\n      item: node.item.toDict(),\n      children: node.children.map(child => TreeNode.toDict(child))\n    };\n  }\n\n  static builder() {\n    return new TreeNodeBuilder();\n  }\n}\n\nclass TreeNodeBuilder {\n  constructor() {\n    this._title = null;\n    this._item = {};\n    this._children = [];\n    this._expanded = false;\n    this._isVisible = true;\n  }\n\n  title(title) {\n    this._title = title;\n    return this;\n  }\n\n  item(item) {\n    this._item = item;\n    return this;\n  }\n\n  children(children) {\n    this._children = children;\n    return this;\n  }\n\n  expanded(expanded) {\n    this._expanded = expanded;\n    return this;\n  }\n\n  isVisible(isVisible) {\n    this._isVisible = isVisible;\n    return this;\n  }\n\n  build() {\n    Object.values(this).forEach(value => {\n      if (value === null)\n        throw new Error(\n          `There are missing variables to build a TreeNode, e.g ${value}`\n        );\n    });\n    return new TreeNode(\n      this._title,\n      this._item,\n      this._children,\n      this._expanded,\n      this._isVisible\n    );\n  }\n}\n\nexport default TreeNode;\n","import { Maybe } from \"monet\";\n\nfunction getNodeRecursive(tree, predicate) {\n  for (let i = 0; i < tree.length; i++) {\n    const node = tree[i];\n    if (predicate(node)) return Maybe.some(node);\n    const answer = getNodeRecursive(node.children, predicate);\n    if (answer.isSome()) return answer;\n  }\n  return Maybe.none();\n}\n\nfunction getParentNodeRecursive(tree, predicate, parent) {\n  const foundChild = tree\n    .map(x => predicate(x))\n    .reduce((e, x) => e || x, false);\n  if (foundChild) return Maybe.fromNull(parent);\n  for (let i = 0; i < tree.length; i++) {\n    const node = tree[i];\n    const answer = getParentNodeRecursive(node.children, predicate, node);\n    if (answer.isSome()) return answer;\n  }\n  return Maybe.none();\n}\n\nfunction compareTreesRecursive(treeA, treeB, nodeEquality) {\n  if (treeA.length === treeB.length) {\n    let ans = true;\n    for (let i = 0; i < treeA.length; i++) {\n      const nodeA = treeA[i];\n      const nodeB = treeB[i];\n      if (nodeEquality(nodeA, nodeB)) {\n        ans =\n          ans &&\n          compareTreesRecursive(nodeA.children, nodeB.children, nodeEquality);\n      } else {\n        return false;\n      }\n    }\n    return ans;\n  }\n  return false;\n}\n\nfunction mapRecursive(tree, newTree, map) {\n  tree.forEach(nod => {\n    const node = { ...nod };\n    const mappedNode = map(node);\n    mappedNode.children = mapRecursive(node.children, [], map);\n    newTree.push(mappedNode);\n  });\n  return newTree;\n}\n\nfunction forEachRecursive(tree = [], forEach = () => {}) {\n  tree.forEach(node => {\n    forEach(node);\n    forEachRecursive(node.children, forEach);\n  });\n}\n\nfunction expand(node) {\n  node.expanded = true;\n  return node;\n}\n\nfunction filterTree(tree = [], predicate = node => true) {\n  if (!tree || tree.length === 0) return [];\n  let result = [];\n  tree.forEach(nod => {\n    const node = { ...nod };\n    if (predicate(node)) {\n      const expanded = expand(node);\n      expanded.children = filterTree(expanded.children, predicate);\n      result.push(expanded);\n    } else if (node.children) {\n      const children = filterTree(node.children, predicate);\n      if (children.length !== 0) {\n        node.children = children;\n        result.push(expand(node));\n      }\n    }\n  });\n  return result;\n}\n\nfunction flatten(tree = [], predicate = node => true) {\n  if (!tree || tree.length === 0) return [];\n  let result = [];\n  tree.forEach(nod => {\n    const node = { ...nod };\n    if (predicate(node)) result.push(node);\n    result = result.concat(flatten(node.children, predicate));\n  });\n  return result;\n}\n\n/**\n * General purpose tree\n *\n * It just need a basic structure as input:\n *  Tree: Array<Node>\n *  Node: {children: Array<Node>}\n */\nclass TreeObject {\n  constructor(tree) {\n    this.tree = tree;\n  }\n  /**\n   * Return maybe node based on predicate\n   * @param {*} predicate\n   */\n  getNode(predicate) {\n    return getNodeRecursive(this.tree, predicate);\n  }\n\n  /**\n   * return maybe parent node based on the child predicate\n   * @param {*} childPredicate\n   */\n  getParentNode(childPredicate) {\n    return getParentNodeRecursive(this.tree, childPredicate, null);\n  }\n\n  equals(tree, nodeEquality = (a, b) => a === b) {\n    if (tree.constructor === TreeObject) {\n      return compareTreesRecursive(this.tree, tree.tree, nodeEquality);\n    }\n    return compareTreesRecursive(this.tree, tree, nodeEquality);\n  }\n\n  map(nodeMap) {\n    return new TreeObject(mapRecursive(this.tree, [], nodeMap));\n  }\n\n  filter(predicate = node => true) {\n    return new TreeObject(filterTree(this.tree, predicate));\n  }\n\n  /**\n   *\n   * @param {*} predicate: node => Boolean\n   * @returns Array with flattened tree while filtering values with predicate\n   */\n  flatten(predicate = node => true) {\n    return flatten(this.tree, predicate);\n  }\n\n  forEach(map) {\n    forEachRecursive(this.tree, map);\n  }\n}\n\nexport default TreeObject;\n","import { ArcRotateCamera } from \"@babylonjs/core\";\n\nclass CameraBuilder {\n  constructor(scene) {\n    this._scene = scene;\n    this._sphericalCoordinates = null;\n    this._target = null;\n    this._name = `camera${Math.floor(Math.random() * 1e3)}`;\n  }\n\n  name(name) {\n    this._name = name;\n    return this;\n  }\n\n  sphericalCoordinates(sphericalCoordinates) {\n    this._sphericalCoordinates = sphericalCoordinates;\n    return this;\n  }\n\n  target(target) {\n    this._target = target;\n    return this;\n  }\n\n  build() {\n    const variables = Object.values(this);\n    variables.forEach(x => {\n      if (x === null)\n        throw new Error(\n          `There are missing variables to build a camera, e.g ${x}`\n        );\n    });\n    return new ArcRotateCamera(\n      this._name,\n      this._sphericalCoordinates.x,\n      this._sphericalCoordinates.y,\n      this._sphericalCoordinates.z,\n      this._target,\n      this._scene\n    );\n  }\n}\n\nexport default CameraBuilder;\n","import { DirectionalLight } from \"@babylonjs/core\";\n\nclass DirectionalLightBuilder {\n  constructor(scene) {\n    this._scene = scene;\n    this._direction = null;\n    this._name = `Dlight${Math.floor(Math.random() * 1e3)}`;\n    this._intensity = 1;\n  }\n\n  direction(direction) {\n    this._direction = direction;\n    return this;\n  }\n\n  name(name) {\n    this._name = name;\n    return this;\n  }\n\n  intensity(intensity) {\n    this._intensity = intensity;\n    return this;\n  }\n\n  build() {\n    const variables = Object.values(this);\n    variables.forEach(x => {\n      if (x === null)\n        throw new Error(\n          `There are missing variables to build a light, e.g ${x}`\n        );\n    });\n    const light = new DirectionalLight(\n      this._name,\n      this._direction.normalize(),\n      this._scene\n    );\n    light.intensity = this._intensity;\n    return light;\n  }\n}\n\nexport default DirectionalLightBuilder;\n","import { GizmoManager } from \"@babylonjs/core\";\n\nclass GizmoManagerBuilder {\n  constructor(scene) {\n    this._scene = scene;\n    this._isPosition = false;\n    this._isRotation = false;\n    this._isBoundingBox = false;\n    this._isScale = false;\n    this._usePointerToAttachGizmos = false;\n  }\n\n  isPosition(v) {\n    this._isPosition = v;\n    return this;\n  }\n\n  isRotation(v) {\n    this._isRotation = v;\n    return this;\n  }\n\n  isBoundingBox(v) {\n    this._isBoundingBox = v;\n    return this;\n  }\n\n  isScale(v) {\n    this._isScale = v;\n    return this;\n  }\n\n  usePointerToAttachGizmos(v) {\n    this._usePointerToAttachGizmos = v;\n    return this;\n  }\n\n  build() {\n    const gizmoManager = new GizmoManager(this._scene);\n    gizmoManager.positionGizmoEnabled = this._isPosition;\n    gizmoManager.rotationGizmoEnabled = this._isRotation;\n    gizmoManager.boundingBoxGizmoEnabled = this._isBoundingBox;\n    gizmoManager.scaleGizmoEnabled = this._isScale;\n    gizmoManager.usePointerToAttachGizmos = this._usePointerToAttachGizmos;\n    return gizmoManager;\n  }\n}\n\nexport default GizmoManagerBuilder;\n","import {\n  Mesh,\n  Vector3,\n  StandardMaterial,\n  Texture,\n  Space\n} from \"@babylonjs/core\";\n\nclass GroundBuilder {\n  constructor(scene) {\n    this._scene = scene;\n    this._name = `camera${Math.floor(Math.random() * 1e3)}`;\n    this._width = 1;\n    this._height = 1;\n    this._textureSrc = null;\n    this._isPickable = false;\n  }\n\n  name(name) {\n    this._name = name;\n    return this;\n  }\n\n  width(width) {\n    this._width = width;\n    return this;\n  }\n\n  height(height) {\n    this._height = height;\n    return this;\n  }\n\n  textureSrc(textureSrc) {\n    this._textureSrc = textureSrc;\n    return this;\n  }\n\n  isPickable(isPickable) {\n    this._isPickable = isPickable;\n    return this;\n  }\n\n  build() {\n    const ground = Mesh.CreateGround(\n      this._name,\n      this._width,\n      this._height,\n      1,\n      this._scene\n    );\n    ground.translate(new Vector3(0, -1, 0), 1e-1, Space.WORLD);\n    if (this._textureSrc) {\n      ground.material = new StandardMaterial(\n        `Texture${this._name}`,\n        this._scene\n      );\n      ground.material.ambientTexture = new Texture(\n        this._textureSrc,\n        this._scene\n      );\n      ground.material.ambientTexture.uScale = 1;\n      ground.material.ambientTexture.vScale = 1;\n    }\n    ground.isPickable = this._isPickable;\n    return ground;\n  }\n}\n\nexport default GroundBuilder;\n","import { PointLight } from \"@babylonjs/core\";\n\nclass PositionalLightBuilder {\n  constructor(scene) {\n    this._scene = scene;\n    this._position = null;\n    this._name = `light${Math.floor(Math.random() * 1e3)}`;\n    this._intensity = 1;\n  }\n\n  position(position) {\n    this._position = position;\n    return this;\n  }\n\n  name(name) {\n    this._name = name;\n    return this;\n  }\n\n  intensity(intensity) {\n    this._intensity = intensity;\n    return this;\n  }\n\n  build() {\n    const variables = Object.values(this);\n    variables.forEach(x => {\n      if (x === null)\n        throw new Error(\n          `There are missing variables to build a light, e.g ${x}`\n        );\n    });\n    const light = new PointLight(this._name, this._position, this._scene);\n    light.intensity = this._intensity;\n    return light;\n  }\n}\n\nexport default PositionalLightBuilder;\n","import { Mesh, Vector3, Color3, MeshBuilder } from \"@babylonjs/core\";\nclass ReferentialBuilder {\n  constructor(scene) {\n    this._scene = scene;\n    this._name = `referential${Math.floor(Math.random() * 1e3)}`;\n    this._isPickable = true;\n    this._boxParams = { isVisible: true, size: 0.25 };\n    this._size = 1;\n  }\n\n  name(name) {\n    this._name = name;\n    return this;\n  }\n\n  isPickable(isPickable) {\n    this._isPickable = isPickable;\n    return this;\n  }\n\n  boxParams(boxParams) {\n    this._boxParams = boxParams;\n    return this;\n  }\n\n  size(size) {\n    this._size = size;\n    return this;\n  }\n\n  build() {\n    const size = this._size;\n    const axisX = Mesh.CreateLines(\n      `axisX${this._name}`,\n      [\n        new Vector3.Zero(),\n        new Vector3(size, 0, 0),\n        new Vector3(size * 0.95, 0.05 * size, 0),\n        new Vector3(size, 0, 0),\n        new Vector3(size * 0.95, -0.05 * size, 0)\n      ],\n      this._scene\n    );\n    axisX.color = new Color3(1, 0, 0);\n    axisX.isPickable = false;\n    const axisY = Mesh.CreateLines(\n      `axisY${this._name}`,\n      [\n        new Vector3.Zero(),\n        new Vector3(0, size, 0),\n        new Vector3(-0.05 * size, size * 0.95, 0),\n        new Vector3(0, size, 0),\n        new Vector3(0.05 * size, size * 0.95, 0)\n      ],\n      this._scene\n    );\n    axisY.color = new Color3(0, 1, 0);\n    axisY.isPickable = false;\n    const axisZ = Mesh.CreateLines(\n      `axisZ${this._name}`,\n      [\n        new Vector3.Zero(),\n        new Vector3(0, 0, size),\n        new Vector3(0, -0.05 * size, size * 0.95),\n        new Vector3(0, 0, size),\n        new Vector3(0, 0.05 * size, size * 0.95)\n      ],\n      this._scene\n    );\n    axisZ.color = new Color3(0, 0, 1);\n    axisZ.isPickable = false;\n\n    const localOrigin = MeshBuilder.CreateBox(\n      this._name,\n      { size: this._boxParams.size },\n      this._scene\n    );\n    localOrigin.isVisible = this._boxParams.isVisible;\n    localOrigin.isPickable = this._isPickable;\n\n    axisX.parent = localOrigin;\n    axisY.parent = localOrigin;\n    axisZ.parent = localOrigin;\n\n    return localOrigin;\n  }\n}\n\nexport default ReferentialBuilder;\n","import _uniqBy from \"lodash/uniqBy\";\nimport Util3d from \"../Util3d/Util3d\";\nimport KeyPoint from \"../NodeItem/KeyPoint\";\nimport {\n  Quaternion,\n  Observable,\n  Vector3,\n  ShaderMaterial,\n  Effect\n} from \"@babylonjs/core\";\nimport { Maybe } from \"monet\";\nimport Vec3 from \"../Math/Vec3\";\nimport Vec2 from \"../Math/Vec2\";\nimport MeshSelector from \"../MainView/MeshSelector\";\n\nclass SelectionPlaceHolder {\n  constructor(mainView) {\n    return mainView\n      .getSceneMemory()\n      .map(({ scene }) => {\n        const sceneId = scene._uid;\n        if (sceneId in placeHolderInstance) {\n          return placeHolderInstance[sceneId];\n        }\n        this.scene = scene;\n        this.mesh = null;\n        this.arrayOfMeshes = [];\n        this.angleByMeshName = {};\n        this.mainView = mainView;\n        this.theta = 0;\n        placeHolderInstance[sceneId] = this;\n        return this;\n      })\n      .orSome(this);\n  }\n\n  push(arrayOfMeshes) {\n    if (arrayOfMeshes.length === 0) return this;\n    arrayOfMeshes = Array.isArray(arrayOfMeshes)\n      ? arrayOfMeshes\n      : [arrayOfMeshes];\n    this.arrayOfMeshes = _uniqBy(\n      this.arrayOfMeshes.concat(arrayOfMeshes),\n      mesh => mesh.name\n    );\n    this.angleByMeshName = this.arrayOfMeshes.reduce((map, m) => {\n      map[m.name] = getAngleFromMesh(m);\n      return map;\n    }, {});\n    const placeHolderPosition = Util3d.pointAverage(\n      this.arrayOfMeshes.map(mesh =>\n        Util3d.getGlobalCoordinates(mesh, mesh.position).toBabylon()\n      )\n    );\n    this.createPlaceHolderIn(placeHolderPosition);\n    return this;\n  }\n\n  clear() {\n    this.arrayOfMeshes = [];\n    this.mesh && this.mesh.dispose();\n    return this;\n  }\n\n  createPlaceHolderIn(p) {\n    if (this.mesh === null || this.mesh.isDisposed()) {\n      this.mesh = KeyPoint.ofDict(this.scene, {\n        name: NAME,\n        type: SelectionPlaceHolder,\n        position: [0, 0, 0],\n        quaternion: Quaternion.Identity(),\n        color: [0.5, 0.5, 0.5],\n        keyValueMap: {},\n        isVisible: true\n      }).mesh;\n      this.mesh.material = getShaderMaterial(this.scene)();\n    }\n    const that = this;\n    this.mesh.getMouseContextActions = () => [\n      {\n        title: \"Delete\",\n        onClick: () => {\n          that.mainView.addGizmo2Mesh();\n          that.clear();\n          MeshSelector.ofMainView(this.mainView).clear();\n          that.mainView.highlightMeshesInScene();\n          that.mainView.highlightNodesInTree();\n        }\n      }\n    ];\n    this.mesh.onClick = () => {};\n    this.mesh.isSelectionPlaceHolder = true;\n    this.mesh.parent = this.mainView.getRootNode().item.mesh;\n    this.mesh.position = p.add(new Vector3(0, 0, HEIGHT));\n    this.mesh.observers = new Observable();\n    this.mesh.observers.add(this.getPlaceHolderObs());\n    return this.mesh;\n  }\n\n  getPlaceHolderObs() {\n    const that = this;\n    return ({\n      updatedPointMesh: placeHolder,\n      is2updateServer,\n      displacement\n    }) => {\n      const filteredMeshes = that.arrayOfMeshes.filter(\n        mesh => !mesh.isDisposed()\n      );\n      const theta = getAngleFromMesh(placeHolder);\n      const dTheta = theta - that.theta;\n      that.theta = theta;\n\n      filteredMeshes.forEach(mesh => {\n        handleMotion(theta, mesh, displacement, placeHolder, dTheta, that);\n        if (is2updateServer) {\n          that.mainView.updateNodeInServer(mesh.name);\n          that.mesh.rotationQuaternion = Quaternion.Identity();\n          that.angleByMeshName[mesh.name] = getAngleFromMesh(mesh);\n          that.theta = 0;\n        }\n        // notify babylonjs observers\n        Maybe.fromNull(mesh.observers).forEach(obs =>\n          obs.notifyObservers({\n            updatedPointMesh: mesh,\n            is2updateServer,\n            displacement\n          })\n        );\n        // notify graph observers\n        Maybe.fromNull(mesh.graphVertex).forEach(({ vertexObs }) => {\n          vertexObs({\n            updatedPointMesh: mesh,\n            is2updateServer,\n            displacement\n          });\n        });\n      });\n      if (filteredMeshes.length === 0) {\n        that.clear();\n      }\n    };\n  }\n\n  static ofMainView(mainView) {\n    return new SelectionPlaceHolder(mainView);\n  }\n}\n\nconst getShaderMaterial = scene => (vertex = VERTEX, frag = FRAG) => {\n  Effect.ShadersStore[\"customVertexShader\"] = vertex;\n  Effect.ShadersStore[\"customFragmentShader\"] = frag;\n  const shaderMaterial = new ShaderMaterial(\n    \"shader\",\n    scene,\n    { vertex: \"custom\", fragment: \"custom\" },\n    {\n      attributes: [\"position\", \"normal\", \"uv\"],\n      uniforms: [\n        \"world\",\n        \"worldView\",\n        \"worldViewProjection\",\n        \"view\",\n        \"projection\",\n        \"time\"\n      ]\n    }\n  );\n  shaderMaterial.backFaceCulling = false;\n  let time = 0;\n  let T = new Date().getTime();\n  shaderMaterial.onBindObservable.add(() => {\n    const dt = (new Date().getTime() - T) / 1000;\n    shaderMaterial.setFloat(\"time\", time);\n    time = time + dt;\n    T = new Date().getTime();\n  });\n  return shaderMaterial;\n};\n\nconst VERTEX = `precision highp float;\n\n// Attributes\nattribute vec3 position;\nattribute vec3 normal;\n\n// Uniforms\nuniform mat4 worldViewProjection;\n\n// Varying\nvarying vec3 vPosition;\nvarying vec3 vNormal;\n\nvoid main(void) {\n    gl_Position = worldViewProjection * vec4(position, 1.0);\n    vPosition = position;\n    vNormal = normal;\n}`;\n\nconst FRAG = `precision highp float;\n\n// Varying\nvarying vec3 vPosition;\nvarying vec3 vNormal;\n\n// Uniforms\nuniform mat4 world;\nuniform float time;\n\nvoid main(void) {\n    // World values\n    vec3 p = vec3(world * vec4(vPosition, 1.0));\n    vec3 n = normalize(vec3(world * vec4(vNormal, 0.0)));\n    float spatialFreq = 10.;\n    float timeFreq = 10.;\n    float power = sin(spatialFreq * p.y - timeFreq * time);\n    vec3 color = power *  vec3( 1, 0, 0 ) + (1. - power) * vec3(1,0.5,0.5);\n    gl_FragColor = vec4(color, 1.);\n}`;\n\nconst getAngleFromMesh = mesh =>\n  Maybe.fromNull(mesh.rotationQuaternion)\n    .map(q => 2 * Math.atan2(q.z, q.w))\n    .orSome(0);\n\nconst placeHolderInstance = {};\nconst NAME = \"placeholder\";\nconst HEIGHT = 1.5;\n\nfunction handleMotion(theta, mesh, displacement, placeHolder, dTheta, that) {\n  if (Math.abs(theta) < 1e-3) {\n    handleTranslation(mesh, displacement);\n  } else {\n    handleRotation(placeHolder, mesh, dTheta, that, theta);\n  }\n}\n\nfunction handleRotation(placeHolder, mesh, dTheta, that, theta) {\n  const baseCoord = Vec3.ofBabylon(placeHolder.position);\n  const v = Vec3.ofBabylon(mesh.position).sub(baseCoord).toVec2();\n  const eITheta = Vec2.of(Math.cos(dTheta), Math.sin(dTheta));\n  const rV = eITheta.prod(v);\n  const finalV = Vec3.of([rV.x, rV.y, 0]).toBabylon();\n  mesh.position = new Vector3(\n    placeHolder.position.x,\n    placeHolder.position.y,\n    mesh.position.z\n  ).add(finalV);\n  const finalTheta = that.angleByMeshName[mesh.name] + theta;\n  // divide by 2 because of quaternion multiplication.\n  mesh.rotationQuaternion = new Quaternion(\n    0,\n    0,\n    Math.sin(finalTheta / 2),\n    Math.cos(finalTheta / 2)\n  );\n}\n\nfunction handleTranslation(mesh, displacement) {\n  const localDisplacement = Util3d.getLocalCoordFromWorld(\n    mesh,\n    Vec3.ofBabylon(displacement),\n    false\n  );\n  const newPos = Vec3.ofBabylon(mesh.position).add(localDisplacement);\n  // translating\n  mesh.position = newPos.toBabylon();\n}\n\nexport default SelectionPlaceHolder;\n","import Vec3 from \"../Math/Vec3\";\nimport Mat3 from \"../Math/Mat3\";\nimport { Maybe } from \"monet\";\nimport GizmoManagerBuilder from \"./GizmoManagerBuilder.js\";\nimport CameraBuilder from \"./CameraBuilder\";\nimport PositionalLightBuilder from \"./PositionalLightBuilder\";\nimport ReferentialBuilder from \"./ReferentialBuilder\";\nimport GroundBuilder from \"./GroundBuilder\";\nimport DirectionalLightBuilder from \"./DirectionalLightBuilder\";\nimport earcut from \"earcut\";\nimport {\n  Vector3,\n  Color3,\n  Quaternion,\n  StandardMaterial,\n  VertexData,\n  Mesh,\n  Matrix,\n  MeshBuilder,\n  VertexBuffer,\n  Curve3\n} from \"@babylonjs/core\";\nimport GlobalRef from \"../NodeItem/GlobalRef\";\nimport Box from \"../NodeItem/Box\";\n\nclass Util3d {\n  /**\n   *\n   * @param {*} mesh\n   * @param {*} localPosition: Vector3\n   * @returns Vec3\n   */\n  static getGlobalCoordinates(mesh, localPosition) {\n    if (\n      (mesh.parent && mesh.parent.name === GlobalRef.NAME) ||\n      mesh.name === GlobalRef.NAME\n    ) {\n      return Vec3.ofBabylon(localPosition);\n    }\n    const meshParent = mesh.parent;\n    const meshParentPos = Vec3.ofBabylon(meshParent.position);\n    const meshParentRotMat = Util3d.getRotationMatrix(meshParent);\n    const meshParentScaling = Vec3.ofBabylon(meshParent.scaling);\n    return meshParentRotMat\n      .prodVec(\n        meshParentScaling.mul(\n          Util3d.getGlobalCoordinates(mesh.parent, localPosition)\n        )\n      )\n      .add(meshParentPos);\n  }\n\n  /**\n   *\n   * @param {*} mesh\n   * @param {*} x: Vector3 in mesh local coord\n   * @returns Vector3\n   */\n  static getGlobalCoord(mesh, x) {\n    if (\n      (mesh.parent && mesh.parent.name === GlobalRef.NAME) ||\n      mesh.name === GlobalRef.NAME\n    ) {\n      return x;\n    }\n    const meshParent = mesh.parent;\n    const meshParentPos = Vec3.ofBabylon(meshParent.position);\n    const meshParentRotMat = Util3d.getRotationMatrix(meshParent);\n    const meshParentScaling = Vec3.ofBabylon(meshParent.scaling);\n    const childPos = meshParentRotMat\n      .prodVec(meshParentScaling.mul(Vec3.ofBabylon(x)))\n      .add(meshParentPos);\n    return Util3d.getGlobalCoord(meshParent, childPos.toBabylon());\n  }\n\n  static getBabylonCoordinates(positionInWorld) {\n    return GlobalRef.forwardCoordinates(positionInWorld);\n  }\n\n  /**\n   *\n   * @param {*} mesh\n   * @param {*} worldPosition: Vector3 from GlobalRef coordinate frame\n   */\n  static getLocalCoordFromGlobal(mesh, worldPosition, withTranslation = true) {\n    if (\n      (mesh.parent && mesh.parent.name === GlobalRef.NAME) ||\n      mesh.name === GlobalRef.NAME\n    )\n      return Vec3.ofBabylon(worldPosition);\n    const meshParent = mesh.parent;\n    const meshParentPos = withTranslation\n      ? Vec3.ofBabylon(meshParent.position)\n      : Vec3.ZERO;\n    const meshParentRotMat = Util3d.getRotationMatrix(meshParent);\n    const meshParentScaling = Vec3.ofBabylon(meshParent.scaling);\n    return meshParentScaling\n      .map(z => 1 / z)\n      .mul(\n        meshParentRotMat.dotVec(\n          Util3d.getLocalCoordFromGlobal(\n            meshParent,\n            worldPosition,\n            withTranslation\n          ).sub(meshParentPos)\n        )\n      );\n  }\n\n  /**\n   *\n   * @param {*} mesh\n   * @param {*} worldPosition: Vec3 from World(Babylon) coordinate frame\n   *\n   * @returns localPosition: Vec3\n   */\n  static getLocalCoordFromWorld(mesh, worldPosition, withTranslation = true) {\n    /// WARNING: very similar with getLocalCoordFromGlobal\n    if (!mesh.parent) {\n      return worldPosition;\n    }\n    const meshParent = mesh.parent;\n    const meshParentPos = withTranslation\n      ? Vec3.ofBabylon(meshParent.position)\n      : Vec3.ZERO;\n    const meshParentRotMat = Util3d.getRotationMatrix(meshParent);\n    const meshParentScaling = Vec3.ofBabylon(meshParent.scaling);\n    // assume scaling != 0\n    const inverseScaling = meshParentScaling.map(x => 1.0 / x);\n\n    return inverseScaling.mul(\n      meshParentRotMat.dotVec(\n        Util3d.getLocalCoordFromWorld(\n          meshParent,\n          worldPosition,\n          withTranslation\n        ).sub(meshParentPos)\n      )\n    );\n  }\n\n  /**\n   * World to Global coords\n   * @param {*} parentView: MainView\n   */\n  static toGlobalCoord = parentView => {\n    const rootMesh = parentView.getRootNode().item.mesh;\n    return arrayOfVector3 => {\n      const transform = p =>\n        Util3d.getLocalCoordFromWorld(\n          { parent: rootMesh },\n          Vec3.ofBabylon(p)\n        ).toBabylon();\n      if (Array.isArray(arrayOfVector3)) {\n        return arrayOfVector3.map(transform);\n      }\n      return transform(arrayOfVector3);\n    };\n  };\n\n  static getRotationMatrix(mesh) {\n    const localRotationMatrix = new Matrix();\n    const maybeQuaternion = Maybe.fromNull(mesh?.rotationQuaternion);\n    maybeQuaternion.forEach(quaternion =>\n      quaternion.toRotationMatrix(localRotationMatrix)\n    );\n    maybeQuaternion.orElseRun(() => {\n      const quaternion = Quaternion.RotationYawPitchRoll(\n        mesh.rotation.y,\n        mesh.rotation.x,\n        mesh.rotation.z\n      );\n      quaternion.toRotationMatrix(localRotationMatrix);\n    });\n    return Mat3.ofBabylonMatrix(localRotationMatrix);\n  }\n\n  static showNormals(scene, mesh, size = 1, color = Color3.Red()) {\n    const normals = mesh.getVerticesData(VertexBuffer.NormalKind);\n    const positions = mesh.getVerticesData(VertexBuffer.PositionKind);\n    const lines = [];\n    for (let i = 0; i < normals.length; i += 3) {\n      const v1 = Vector3.FromArray(positions, i);\n      const v2 = v1.add(Vector3.FromArray(normals, i).scaleInPlace(size));\n      lines.push([v1.add(mesh.position), v2.add(mesh.position)]);\n    }\n    const normalLines = MeshBuilder.CreateLineSystem(\n      \"normalLines\",\n      { lines: lines },\n      scene\n    );\n    normalLines.color = color;\n    normalLines.parent = mesh;\n    return normalLines;\n  }\n\n  static orthogonalBasisFromVector(u) {\n    const identityMatrix = [\n      new Vector3(1, 0, 0),\n      new Vector3(0, 1, 0),\n      new Vector3(0, 0, 1)\n    ];\n    const uArray = [u.x, u.y, u.z];\n    // choose pivot\n    let pivot = 0;\n    for (let i = 0; i < 3; i++) {\n      if (uArray[i] !== 0) {\n        pivot = i;\n        break;\n      }\n    }\n    let v = identityMatrix[(pivot + 1) % 3].add(\n      identityMatrix[pivot].scale(-uArray[(pivot + 1) % 3] / uArray[pivot])\n    );\n    v = v.normalize();\n    let w = identityMatrix[(pivot + 2) % 3].add(\n      identityMatrix[pivot].scale(-uArray[(pivot + 2) % 3] / uArray[pivot])\n    );\n    w = w.normalize();\n    w = w.subtract(v.scale(Vector3.Dot(v, w)));\n    return { u: Vector3.FromArray(uArray).normalize(), v: v, w: w.normalize() };\n  }\n\n  static createOrientedCone = (\n    scene,\n    u = new Vector3(1, 0, 0),\n    color = Color3.Gray(),\n    name = `OrientedCone${randomDigits()}`,\n    isPickable = true,\n    segments = 16\n  ) => {\n    const surface = {\n      positions: [],\n      faces: []\n    };\n    const d = u.length() / 3;\n    const mat3 = Util3d.orthogonalBasisFromVector(u);\n    const v = mat3.v;\n    const w = mat3.w;\n\n    const orientation = Math.sign(Vector3.Dot(Vector3.Cross(v, w), u));\n    // positions\n    for (let i = 0; i < segments; i++) {\n      const theta = orientation * ((2 * Math.PI) / segments) * i;\n      surface.positions.push(\n        v.scale(d * Math.cos(theta)).add(w.scale(d * Math.sin(theta)))\n      );\n    }\n\n    surface.positions.push(Vector3.Zero());\n    surface.positions.push(u);\n\n    const zeroIndex = surface.positions.length - 1;\n    const uIndex = surface.positions.length - 2;\n\n    for (let i = 0; i < segments; i++) {\n      // bottom faces\n      surface.faces.push([zeroIndex, (i + 1) % segments, i]);\n      // cone faces\n      surface.faces.push([uIndex, i, (i + 1) % segments]);\n    }\n\n    // mesh\n    const mesh = Util3d.meshFromPositionAndFaces(\n      name,\n      scene,\n      surface.positions,\n      surface.faces\n    );\n    mesh.convertToFlatShadedMesh();\n    const material = new StandardMaterial(`OrientedConeMaterial${name}`, scene);\n    material.diffuseColor = color;\n    material.emissiveColor = color;\n    mesh.material = material;\n    mesh.isPickable = isPickable;\n    return mesh;\n  };\n\n  static createSphere = (\n    scene,\n    color = Color3.Gray(),\n    diameter = 1,\n    name = `Sphere${randomDigits()}`,\n    isPickable = true\n  ) => {\n    const sphere = Mesh.CreateSphere(name, 16, diameter, scene);\n    const material = Util3d.getMaterialFromColor(\n      color,\n      scene,\n      `SphereMaterial${name}`\n    );\n    sphere.material = material;\n    sphere.isPickable = isPickable;\n    return sphere;\n  };\n\n  static createBox = (\n    scene,\n    color = Color3.Gray(),\n    size = Box.DEFAULT_SIZE,\n    name = `Box${randomDigits()}`,\n    isPickable = true\n  ) => {\n    const box = Mesh.CreateBox(name, size, scene);\n    const material = new StandardMaterial(`BoxMaterial${name}`, scene);\n    material.diffuseColor = color;\n    material.emissiveColor = color;\n    box.material = material;\n    box.isPickable = isPickable;\n    return box;\n  };\n\n  static createTubeFromPoints = (\n    scene,\n    points,\n    color = Color3.Gray(),\n    radius = 1,\n    name = `Tube${randomDigits()}`,\n    isPickable = true\n  ) => {\n    const mesh = MeshBuilder.CreateTube(\n      name,\n      {\n        path: points,\n        radius: radius,\n        sideOrientation: Mesh.DOUBLESIDE,\n        updatable: true,\n        cap: Mesh.CAP_ALL\n      },\n      scene\n    );\n    mesh.material = Util3d.getMaterialFromColor(\n      color,\n      scene,\n      `Material${name}`\n    );\n    mesh.isPickable = isPickable;\n    return mesh;\n  };\n\n  static positionalLightBuilder = scene => {\n    return new PositionalLightBuilder(scene);\n  };\n\n  static directionalLightBuilder = scene => {\n    return new DirectionalLightBuilder(scene);\n  };\n\n  static cameraBuilder(scene) {\n    return new CameraBuilder(scene);\n  }\n\n  static gizmoManagerBuilder(scene) {\n    return new GizmoManagerBuilder(scene);\n  }\n\n  static referentialBuilder = scene => {\n    return new ReferentialBuilder(scene);\n  };\n\n  /**\n   * Return a maybe position of intersection of the mouse and a ground mesh\n   *\n   * @param {Scene} scene Babylon scene\n   * @param {Ground} ground a Babylon mesh that represents the ground\n   * @returns {Maybe} a maybe Vector3 representing the mouse ground intersection\n   */\n  static getGroundPosition = function (scene, ground) {\n    // Use a predicate to get position on the ground\n    const pickInfo = scene.pick(\n      scene.pointerX,\n      scene.pointerY,\n      mesh => mesh === ground\n    );\n    if (pickInfo.hit) return Maybe.some(pickInfo.pickedPoint);\n    return Maybe.none();\n  };\n\n  static pickMesh = (scene, ground) => {\n    const pickInfo = scene.pick(\n      scene.pointerX,\n      scene.pointerY,\n      mesh => mesh !== ground && mesh.isEnabled()\n    );\n    if (pickInfo.hit && pickInfo.pickedMesh.isPickable) {\n      return Maybe.some(pickInfo.pickedMesh);\n    }\n    return Maybe.none();\n  };\n\n  static groundBuilder = scene => {\n    return new GroundBuilder(scene);\n  };\n\n  static meshFromPositionAndFaces(\n    name,\n    scene,\n    positions,\n    faces,\n    updatable = true\n  ) {\n    const vertexData = new VertexData();\n\n    vertexData.positions = positions.flatMap(z => [z.x, z.y, z.z]);\n    vertexData.indices = faces.flatMap(z => z);\n\n    let mesh = new Mesh(name, scene);\n    vertexData.applyToMesh(mesh, updatable);\n    // mesh.createNormals();\n    return mesh;\n  }\n\n  /**\n   *\n   * @param {*} polygon: Array of babylonjs vector3, representing a boundary of a polygon\n   */\n  static triangulatePolygon(polygon) {\n    const triangulation = earcut(\n      polygon.map(x => [x.x, x.y, x.z]).flatMap(x => x),\n      null,\n      3\n    );\n    const len = triangulation.length / 3;\n    const ans = [];\n    for (let i = 0; i < len; i++) {\n      const i3 = 3 * i;\n      ans.push([\n        triangulation[i3],\n        triangulation[i3 + 1],\n        triangulation[i3 + 2]\n      ]);\n    }\n    return ans;\n  }\n\n  /**\n   *\n   * @param {*} polygon: Array of babylonjs vector3, representing a boundary of a polygon\n   * Returns a real number representing the orientation of the curve, if positive represents a counterclockwise orientation, clockwise otherwise.\n   */\n  static computeOrientation(polygon) {\n    const n = polygon.length;\n    const vec3Poly = polygon.map(x => Vec3.ofBabylon(x));\n    let orientation = 0;\n    vec3Poly.forEach((a, i) => {\n      const modi = (i + 1) % n;\n      const edge = vec3Poly[modi].sub(vec3Poly[i]);\n      orientation += Vec3.of([-a.y, a.x, a.z]).dot(edge);\n    });\n    return orientation / 2;\n  }\n\n  /**\n   * @param {*} arrayOfPoints: array of babylon vec3\n   * Returns the average\n   */\n  static pointAverage(arrayOfPoints) {\n    if (!arrayOfPoints || arrayOfPoints.length === 0) return Vector3.Zero();\n    return arrayOfPoints\n      .reduce((e, x) => e.add(x), Vector3.Zero())\n      .scale(1 / arrayOfPoints.length);\n  }\n\n  static pointAverageVec3(arrayOfPoints) {\n    if (!arrayOfPoints || arrayOfPoints.length === 0) return Vec3.ZERO;\n    return arrayOfPoints\n      .reduce((e, x) => e.add(x), Vec3.ZERO)\n      .scale(1 / arrayOfPoints.length);\n  }\n\n  static randomVector3(a, b) {\n    return new Vector3.FromArray(\n      [0, 0, 0].map(x => a + (b - a) * Math.random())\n    );\n  }\n\n  static getMaterialFromColor(\n    color,\n    scene,\n    name = `MaterialFromColor${randomDigits()}`\n  ) {\n    const material = new StandardMaterial(name, scene);\n    material.diffuseColor = color;\n    material.emissiveColor = color;\n    return material;\n  }\n\n  static piecewiseCurveDistance = curve => {\n    let distance = 0;\n    for (let i = 0; i < curve.length - 1; i++) {\n      const v = curve[i + 1].subtract(curve[i]);\n      distance += v.length();\n    }\n    return distance;\n  };\n\n  static getCurveOrientations = curve => {\n    const orientations = [];\n    for (let i = 0; i < curve.length - 1; i++) {\n      const v = curve[i + 1].subtract(curve[i]);\n      orientations.push(Math.atan2(v.y, v.x));\n    }\n    orientations.push(orientations[orientations.length - 1]);\n    return orientations;\n  };\n\n  static getSplineFromCurve = (curve, nbPoints = 7) => {\n    const closed = false;\n    return {\n      points: Curve3.CreateCatmullRomSpline(curve, nbPoints, closed).getPoints()\n    };\n  };\n\n  static splineObj2redis = splineObj => {\n    const orientations = Util3d.getCurveOrientations(splineObj.points);\n    return splineObj.points.map((x, i) => {\n      return [x.x, x.y, orientations[i]];\n    });\n  };\n}\n\nconst randomDigits = () => {\n  return Math.floor(Math.random() * 1e3);\n};\n\nexport default Util3d;\n","export class Animator {\n  constructor(state, next, doWhile) {\n    this.state = state;\n    this.next = next;\n    this.while = doWhile;\n    this.requestAnimeId = null;\n  }\n\n  play() {\n    this.requestAnimeId = requestAnimationFrame(() => {\n      if (!this.while(this.state)) return this.stop();\n      this.state = this.next(this.state);\n      this.play();\n    });\n    return this;\n  }\n\n  stop() {\n    cancelAnimationFrame(this.requestAnimeId);\n    return this;\n  }\n\n  static builder() {\n    return new AnimatorBuilder();\n  }\n}\n\nclass AnimatorBuilder {\n  constructor() {\n    this._state = null;\n    this._next = null;\n    this._end = null;\n  }\n\n  initialState(state) {\n    this._state = state;\n    return this;\n  }\n\n  nextState(next) {\n    this._next = next;\n    return this;\n  }\n\n  while(end) {\n    this._end = end;\n    return this;\n  }\n\n  build() {\n    const someAreEmpty = [this._state, this._next, this._end].some(\n      x => x === null || x === undefined\n    );\n    if (someAreEmpty) throw new Error(\"Animator properties are missing\");\n    return new Animator(this._state, this._next, this._end);\n  }\n}\n","import { MasterDB } from \"mov-fe-lib-core\";\n\nclass AnnotationManager {\n  constructor() {\n    if (instance) return instance;\n    instance = this;\n    this.annotations = {};\n    this.observersBySceneId = {};\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                   Getters & Setters                                  *\n   *                                                                                      */\n  //========================================================================================\n\n  getAnnotations = () => this.annotations;\n\n  load() {\n    this.retrieveAnnotationsFromDb();\n    return this;\n  }\n  /**\n   *\n   * @param {*} scene: Scene\n   * @param {*} lambda: AnnotationManager -> {}\n   */\n  pushObserver(scene, lambda) {\n    const sceneId = scene._uid;\n\n    if (!(sceneId in this.observersBySceneId)) {\n      this.observersBySceneId[sceneId] = [];\n    }\n    this.observersBySceneId[sceneId].push(lambda);\n    return this;\n  }\n\n  clearObserver(scene) {\n    const sceneId = scene._uid;\n    if (sceneId in this.observersBySceneId) {\n      delete this.observersBySceneId[sceneId];\n    }\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                         Utils                                        *\n   *                                                                                      */\n  //========================================================================================\n\n  retrieveAnnotationsFromDb() {\n    MasterDB.subscribe(\n      { Scope: \"Annotation\", Name: \"*\" },\n      data => {\n        console.log(\"Annotation update\", data);\n        const actionMap = {\n          del: annotation => this.delAnnotation(annotation),\n          set: annotation => this.addAnnotation(annotation)\n        };\n        const annotation = data.key.Annotation;\n        if (data.event in actionMap) {\n          actionMap[data.event](annotation);\n          Object.keys(this.observersBySceneId).forEach(k =>\n            this.observersBySceneId[k].forEach(f => f(this))\n          );\n        }\n      },\n      data => {\n        console.log(\"Annotation start\", data);\n        const annotation = data.value.Annotation;\n        this.addAnnotation(annotation);\n      }\n    );\n  }\n\n  delAnnotation(annotation) {\n    if (!annotation) return;\n    const names2delete = Object.keys(annotation).reduce((e, x) => {\n      e.push(x);\n      return e;\n    }, []);\n    Object.keys(this.annotations).forEach(annotationType => {\n      const value = this.annotations[annotationType];\n      value.names = value.names.filter(x => !names2delete.includes(x));\n      value.labels = value.labels.filter(x => !names2delete.includes(x));\n    });\n  }\n\n  addAnnotation(annotation) {\n    if (!annotation) return;\n    Object.keys(annotation).forEach(name => {\n      const annotationObj = annotation[name];\n      if (!annotationObj.Type) return;\n      const type = annotationObj.Type.toLowerCase();\n      const label = annotationObj.Label;\n      if (!(type in this.annotations)) {\n        this.annotations[type] = { names: [], labels: [] };\n      }\n      this.annotations[type].names.push(name);\n      this.annotations[type].labels.push(label ? label : name);\n    });\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                        Static                                        *\n   *                                                                                      */\n  //========================================================================================\n\n  static getInstance() {\n    return new AnnotationManager();\n  }\n\n  static getAnnotations() {\n    return AnnotationManager.getInstance().getAnnotations();\n  }\n}\nlet instance = null;\nexport default AnnotationManager;\n","import AddMapAction from \"../Actions/AddMapAction\";\nimport RobotAction from \"../Actions/RobotAction\";\nimport Robot from \"../NodeItem/Robot\";\nimport AddMeshAction from \"../Actions/AddMeshAction\";\n\nexport const ASSETS_TYPES = {\n  Map: \"Map\",\n  Robot: \"Robot\",\n  Mesh: \"Mesh\"\n};\n\nexport const AssetsTypesFactory = {\n  Map: map => new AddMapAction(map.name, map.loader),\n  Robot: robot => new RobotAction(robot, Robot.getSocketAnimator),\n  Mesh: mesh => new AddMeshAction(mesh)\n};\n","import { Clipboard as Clip } from \"mov-fe-lib-core\";\n\nconst SCENE_CONTEXT = \"scene\";\nlet COPY_PASTE_UID = 0;\n\nexport default class Clipboard {\n  static copy(value) {\n    Clip.write(SCENE_CONTEXT, value);\n  }\n  static paste() {\n    return Clip.read(SCENE_CONTEXT);\n  }\n\n  static getUID() {\n    return COPY_PASTE_UID++;\n  }\n}\n","const Constants = {\n  RADIUS: 0.4,\n  POINTS_DENSITY: 2,\n  CLOUD_FUNCTION_NAME: \"backend.viewer\"\n};\n\nexport default Constants;\n","import { Vector3 } from \"@babylonjs/core\";\nimport Util3d from \"../Util3d/Util3d\";\nimport { Animator } from \"./Animator\";\n\nexport default class DefaultMouseEvents {\n  static onPointerDown = mainView => evt => {\n    mainView.mousePosClick = mainView\n      .getMouseCoordsFromRoot()\n      .orSome(Vector3.Zero());\n    mainView.mousePosMove = mainView.mousePosClick;\n    mainView.sceneMemory.forEach(({ camera, canvas }) => {\n      if (evt.buttons === 2 || evt.buttons === 4 || evt.ctrlKey) {\n        camera.detachControl(canvas);\n      }\n    });\n  };\n\n  static onPointerUp = mainView => evt => {\n    mainView.sceneMemory.forEach(({ camera, canvas }) => {\n      camera.attachControl(canvas, true);\n    });\n  };\n\n  static onPointerMove = mainView => evt => {\n    mainView.sceneMemory.forEach(({ mouseLocationText, camera }) => {\n      mainView.getMouseCoordsFromRoot().forEach(currentLocal => {\n        setMouseLocationTxt(mouseLocationText, currentLocal);\n        const panCamera = () => {\n          const v = currentLocal.subtract(mainView.mousePosMove);\n          const vBabylon = Util3d.getBabylonCoordinates(v).scale(-1);\n          animateCamera(camera, vBabylon);\n          mainView.mousePosMove = currentLocal;\n        };\n        const mouseButtonActions = [\n          { predicate: evt.ctrlKey && evt.buttons === 1, action: panCamera },\n          { predicate: evt.buttons === 4, action: panCamera }\n        ];\n        const filterActions = mouseButtonActions.filter(\n          ({ predicate }) => predicate\n        );\n        if (filterActions.length > 0) filterActions[0].action();\n      });\n    });\n  };\n}\n\nfunction animateCamera(camera, v) {\n  Animator.builder()\n    .initialState({\n      camera: camera,\n      time: 0,\n      T: new Date().getTime()\n    })\n    .nextState(s => {\n      const { camera, time } = s;\n      const dt = 0.1; //(new Date().getTime() - T) / 1000;\n      const vdt = v.scale(dt);\n      camera.position = camera.position.add(vdt);\n      camera.setTarget(camera.target.add(vdt));\n      return {\n        camera: camera,\n        time: time + dt,\n        T: new Date().getTime()\n      };\n    })\n    .while(s => s.time <= 1)\n    .build()\n    .play();\n}\n\nfunction setMouseLocationTxt(mouseLocationText, currentLocal) {\n  mouseLocationText.text = `x: ${currentLocal.x.toFixed(\n    2\n  )}, y: ${currentLocal.y.toFixed(2)}`;\n}\n","import {\n  Scene,\n  Color3,\n  RotationGizmo,\n  UtilityLayerRenderer,\n  Vector3,\n  StandardMaterial,\n  Mesh,\n  Space\n} from \"@babylonjs/core\";\nimport { TextBlock, AdvancedDynamicTexture } from \"@babylonjs/gui/2D\";\nimport Util3d from \"../Util3d/Util3d\";\nimport \"@babylonjs/core/Debug/debugLayer\";\nimport \"@babylonjs/inspector\";\n\nclass DefaultScene {\n  static createGizmo = scene => {\n    const gizmoManager = new RotationGizmo(new UtilityLayerRenderer(scene));\n    gizmoManager.xGizmo.dragBehavior.detach();\n    gizmoManager.xGizmo.scaleRatio = 0.0;\n    gizmoManager.yGizmo.dragBehavior.detach();\n    gizmoManager.yGizmo.scaleRatio = 0.0;\n    return gizmoManager;\n  };\n\n  static createCamera = (scene, canvas, forEach = camera => {}) => {\n    const COLLISION_RADIUS = 1;\n    const camera = Util3d.cameraBuilder(scene)\n      .sphericalCoordinates(new Vector3(0, 0, 14))\n      .target(Vector3.Zero())\n      .name(\"camera\")\n      .build();\n    camera.attachControl(canvas, false);\n    camera.inertia = 0.7;\n    camera.collisionRadius = new Vector3(\n      COLLISION_RADIUS,\n      COLLISION_RADIUS,\n      COLLISION_RADIUS\n    );\n    camera.panningInertia = 0.5;\n    camera.checkCollisions = true;\n    camera.panningSensibility = 0;\n    camera.lowerRadiusLimit = 2;\n    forEach(camera);\n    return camera;\n  };\n\n  static createLight = scene => {\n    return Util3d.directionalLightBuilder(scene)\n      .name(\"light\")\n      .direction(new Vector3(0, -1, 0))\n      .intensity(0.35)\n      .build();\n  };\n\n  static createMeshGround = (scene, width = 20, height = 20) => {\n    const ground = Mesh.CreateGround(\"groundMesh\", width, height, 20, scene);\n    ground.translate(new Vector3(0, -1, 0), 1e-2, Space.WORLD);\n    ground.material = new StandardMaterial(\"wireframe\", scene);\n    ground.material.wireframe = true;\n    ground.isPickable = false;\n    ground.checkCollisions = true;\n    return ground;\n  };\n\n  static createScene = engine => {\n    const scene = new Scene(engine);\n    scene.clearColor = Color3.Black;\n    scene.collisionsEnabled = true;\n    scene._uid = scene.getUniqueId();\n    // scene.debugLayer.show({\n    //   embedMode: true,\n    //   globalRoot: document.body,\n    //   overlay: true\n    // });\n    return scene;\n  };\n\n  static createMouseLocationText = scene => {\n    const advancedTexture = AdvancedDynamicTexture.CreateFullscreenUI(\n      \"UI\",\n      true,\n      scene\n    );\n    const text = new TextBlock();\n    text.text = \"\";\n    text.color = \"white\";\n    text.fontSize = 17;\n    text.left = -560;\n    text.top = -145;\n    advancedTexture.addControl(text);\n    return text;\n  };\n}\n\nexport default DefaultScene;\n","import { Maybe } from \"monet\";\n/**\n * Mesh cache for each scene.\n *\n * Each mesh is associated with a scene therefore we must have a cache per scene.\n *\n */\nclass MeshCache {\n  constructor() {\n    if (instance) return instance;\n    instance = this;\n    this.meshCacheBySceneId = {};\n    this.count = 0;\n  }\n\n  static getInstance() {\n    return new MeshCache();\n  }\n\n  hasKey(key, scene) {\n    const sceneId = scene._uid;\n    return Maybe.fromNull(this.meshCacheBySceneId[sceneId])\n      .flatMap(meshCache => ofNull(meshCache[key]))\n      .cata(\n        () => false,\n        () => true\n      );\n  }\n\n  put(key, scene, mesh) {\n    const sceneId = scene._uid;\n    if (!(sceneId in this.meshCacheBySceneId)) {\n      this.meshCacheBySceneId[sceneId] = {};\n    }\n    this.meshCacheBySceneId[sceneId][key] = mesh;\n    mesh.setEnabled(false);\n    return this;\n  }\n\n  get(key, scene) {\n    const sceneId = scene._uid;\n    return Maybe.fromNull(this.meshCacheBySceneId[sceneId])\n      .flatMap(meshCache => ofNull(meshCache[key]))\n      .map(mesh => {\n        console.log(\n          \"#Mesh: Found Mesh in cache, retrieving copy number\",\n          this.count\n        );\n        const cloneMesh = mesh.clone(`${key}${this.count++}`);\n        console.log(\"#Mesh:\", cloneMesh);\n        cloneMesh.setEnabled(true);\n        return cloneMesh;\n      })\n      .orNull();\n  }\n\n  del(scene) {\n    const sceneId = scene._uid;\n    if (sceneId in this.meshCacheBySceneId) {\n      delete this.meshCacheBySceneId[sceneId];\n    }\n  }\n}\n\nconst ofNull = x => Maybe.fromNull(x);\n// private instance\nlet instance = null;\nexport default MeshCache;\n","import MeshCache from \"./MeshCache\";\nimport { AssetsManager } from \"@babylonjs/core\";\nimport \"@babylonjs/loaders\";\n\nclass MeshLoader {\n  constructor(scene) {\n    this.scene = scene;\n  }\n\n  static of(scene) {\n    return new MeshLoader(scene);\n  }\n\n  load = (meshName, mapFunction = mesh => mesh) =>\n    new Promise((re, rej) => {\n      const meshCache = MeshCache.getInstance();\n      if (meshCache.hasKey(meshName, this.scene)) {\n        console.log(`Found Mesh ${meshName} in cache for scene ${this.scene}`);\n        re(mapFunction(meshCache.get(meshName, this.scene)));\n      } else {\n        console.log(\"Loading mesh....\");\n        const assetsManager = new AssetsManager(this.scene);\n        const meshTask = assetsManager.addMeshTask(\"\", \"\", MESH_URL, meshName);\n        meshTask.onSuccess = task => {\n          console.log(\"Load Success\", meshName);\n          const mesh = task.loadedMeshes[0];\n          mesh.name = meshName;\n          meshCache.put(meshName, this.scene, mesh);\n        };\n        meshTask.onError = (task, message, exception) =>\n          rej({ message, exception });\n        assetsManager.onFinish = task => {\n          console.log(\"Load finish \");\n          re(mapFunction(meshCache.get(meshName, this.scene)));\n        };\n        assetsManager.load();\n      }\n    });\n\n  static getMeshUrl = src => `${MESH_URL}${src}`;\n}\n\nconst MESH_URL = `/static/meshes/`;\nexport default MeshLoader;\n","import { MasterDB } from \"mov-fe-lib-core\";\nimport Constants from \"./Constants\";\n\nclass SceneServerUtils {\n  static retrieveScene = (\n    sceneName,\n    successCallback = DEFAULT_SUCCESS,\n    failCallback = DEFAULT_FAILURE(\"retrieving scene\")\n  ) => {\n    MasterDB.cloudFunction(\n      Constants.CLOUD_FUNCTION_NAME,\n      \"retrieveScene\",\n      sceneName,\n      data => successFailIf(data, successCallback, failCallback)\n    );\n  };\n}\n\nconst DEFAULT_FAILURE = failureLocation => data => {\n  throw new Error(`Exception caught in ${failureLocation}: ${data.error}`);\n};\n\nconst DEFAULT_SUCCESS = data => {};\n\nconst successFailIf = (data, successCallback, failCallback) => {\n  if (data.success) {\n    successCallback(data);\n  } else {\n    failCallback(data);\n  }\n};\nexport default SceneServerUtils;\n","import TreeObject from \"../TreeObject/TreeObject\";\nimport TreeNode from \"../TreeObject/TreeNode\";\nimport GlobalRef from \"../NodeItem/GlobalRef\";\nimport { MasterDB } from \"mov-fe-lib-core\";\nimport Constants from \"./Constants\";\n\nconst CLOUD_FUNCTION_NAME = Constants.CLOUD_FUNCTION_NAME;\n\nclass TreeServerUtils {\n  constructor(sceneName) {\n    this.sceneName = sceneName;\n  }\n\n  static ofScene(sceneName) {\n    return new TreeServerUtils(sceneName);\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                    Util functions                                    *\n   *                                                                                      */\n  //========================================================================================\n\n  getNodeFromTree = (name, objectTree) => {\n    return new TreeObject(objectTree).getNode(x => name === x.title);\n  };\n\n  getParentFromChild = (childName, objectTree) => {\n    return new TreeObject(objectTree).getParentNode(x => childName === x.title);\n  };\n\n  deleteNodeFromTreeUsingName = (name, objectTree, is2delInServer = true) => {\n    this.getNodeFromTree(name, objectTree).forEach(node => {\n      // destroy treeNode\n      TreeNode.dispose(node);\n\n      if (is2delInServer) {\n        this.deleteNodeInServer(name);\n      }\n\n      const maybeParent = this.getParentFromChild(name, objectTree);\n      maybeParent.forEach(parentNode => {\n        parentNode.children = parentNode.children.filter(x => x.title !== name);\n      });\n\n      objectTree = objectTree.filter(x => x.title !== name);\n    });\n    return objectTree;\n  };\n\n  getNodeFromTreeWithPredicate = (predicate, objectTree) => {\n    return new TreeObject(objectTree).getNode(predicate);\n  };\n\n  addNodeItem2Tree = (\n    objectTree,\n    nodeItem,\n    parentName = GlobalRef.NAME,\n    is2addInServer = true,\n    isVisible = true\n  ) => {\n    // delete if already exist\n    this.deleteNodeFromTreeUsingName(nodeItem.name, objectTree, is2addInServer);\n\n    const node2Add = TreeNode.builder()\n      .title(nodeItem.name)\n      .item(nodeItem)\n      .isVisible(isVisible)\n      .build();\n\n    if (parentName) {\n      const maybeParentNode = this.getNodeFromTree(parentName, objectTree);\n      maybeParentNode.forEach(parentNode => {\n        if (is2addInServer) this.addNodeItem2Server(node2Add, parentNode.title);\n        parentNode.children.push(node2Add);\n      });\n    } else {\n      objectTree.push(node2Add);\n      if (is2addInServer) this.addNodeItem2Server(node2Add, null);\n    }\n    return objectTree;\n  };\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                   Server functions                                   *\n   *                                                                                      */\n  //========================================================================================\n\n  updateNodeInServer = (name, objectTree, oldName = null) => {\n    console.log(\"updateNodeInServer!\", name, this.sceneName);\n    this.getNodeFromTree(name, objectTree).forEach(node => {\n      const parentName = this.getParentFromChild(name, objectTree)\n        .map(x => x.title)\n        .orNull();\n      MasterDB.cloudFunction(\n        CLOUD_FUNCTION_NAME,\n        \"updateNode\",\n        [TreeNode.toDict(node), parentName, oldName, this.sceneName],\n        data => {\n          console.log(\"Update node with success?\", data.success, data.error);\n        }\n      );\n    });\n  };\n\n  addNodeItem2Server = (treeNode, parentName) => {\n    MasterDB.cloudFunction(\n      CLOUD_FUNCTION_NAME,\n      \"addNodeItem\",\n      [TreeNode.toDict(treeNode), parentName, this.sceneName],\n      data => {\n        console.log(\"Add node with success?\", data.success);\n      }\n    );\n  };\n\n  deleteNodeInServer = name => {\n    MasterDB.cloudFunction(\n      CLOUD_FUNCTION_NAME,\n      \"deleteNodeByName\",\n      [name, this.sceneName],\n      data => {\n        console.log(\"Deleted node with success?\", data.success);\n      }\n    );\n  };\n}\n\nexport default TreeServerUtils;\n","export function selectOneAction(predicateActionList, defaultAction = () => {}) {\n  return input => {\n    predicateActionList.push({ predicate: e => true, action: defaultAction });\n    for (let i = 0; i < predicateActionList.length; i++) {\n      const predicateAction = predicateActionList[i];\n      if (predicateAction.predicate(input)) {\n        predicateAction.action();\n        break;\n      }\n    }\n  };\n}\n","import { createGlobalStyle } from \"styled-components\";\nimport { Style as S } from \"mov-fe-lib-core\";\n\nconst Style = createGlobalStyle`${S}`;\nexport default Style;\n","import { createMuiTheme } from \"@material-ui/core/styles\";\nimport \"fontsource-roboto\";\nimport \"fontsource-open-sans\";\n\nconst CONSTANTS = {\n  dark: {\n    borderBottom: \"1px solid #212121\",\n    textColor: \"white\",\n    background: {\n      primary: \"#424242\",\n      secondary: \"#212121\"\n    }\n  },\n  light: {\n    borderBottom: \"1px solid #ccc\",\n    textColor: \"rgba(0, 0, 0, 0.87)\",\n    background: {\n      primary: \"#e2e2e2\",\n      secondary: \"#b2b2b2\"\n    }\n  }\n};\n\nconst themeFactory = particular => ({\n  ...particular,\n  typography: {\n    fontFamily: \"Open Sans\",\n    h1: {\n      fontFamily: \"Open Sans\"\n    },\n    h2: {\n      fontFamily: \"Open Sans\"\n    },\n    h3: {\n      fontFamily: \"Open Sans\"\n    },\n    h4: {\n      fontFamily: \"Open Sans\"\n    },\n    h5: {\n      fontFamily: \"Open Sans\"\n    },\n    h6: {\n      fontFamily: \"Open Sans\"\n    },\n    body1: {\n      fontFamily: \"Roboto\"\n    }\n  },\n  cursorDefault: {\n    cursor: \"default\"\n  },\n  cursorPointer: {\n    cursor: \"pointer\"\n  }\n});\n\nconst Themes = {\n  dark: createMuiTheme(\n    themeFactory({\n      label: \"dark\",\n      textColor: CONSTANTS.dark.textColor,\n      backgroundColor:\n        \"linear-gradient(114.01deg, #212121 0%, #050505 100.43%)\",\n      bottomNavigation: { background: \"#212121\" },\n      globalStats: {\n        borderColor: \"#474747\",\n        subTextColor: \"#CDCDCD\",\n        upperTextColor: \"#E6E6E6\"\n      },\n      palette: {\n        type: \"dark\", // Switching the dark mode on, is a single property value change.\n        primary: {\n          main: \"#36b5e6\"\n        },\n        secondary: {\n          main: \"#CF6679\"\n        },\n        green: {\n          main: \"#03DAC5\"\n        },\n        background: {\n          primary: CONSTANTS.dark.background.primary,\n          secondary: CONSTANTS.dark.background.secondary\n        },\n        accent: {\n          background: \"#f5f5f9\",\n          color: \"rgba(0, 0, 0, 0.87)\",\n          border: \"#dadde9\"\n        }\n      },\n      icon: { color: \"#c6c6c6\", hoverColor: \"white\" },\n      table: { stripColor: \"#505050\" },\n      overrides: {\n        MuiTableCell: {\n          body: {\n            color: CONSTANTS.dark.textColor\n          }\n        },\n        MuiAppBar: {\n          colorDefault: {\n            color: CONSTANTS.dark.textColor,\n            borderColor: \"black\",\n            backgroundColor: CONSTANTS.dark.background.secondary\n          },\n          colorInherit: {\n            color: CONSTANTS.dark.textColor,\n            backgroundColor: \"#353535\"\n          }\n        },\n        MuiButton: {\n          outlined: {\n            margin: \"8px\"\n          },\n          text: {\n            margin: \"8px\"\n          },\n          contained: {\n            margin: \"8px\"\n          },\n          containedPrimary: {\n            color: \"inherit\",\n            margin: \"8px\"\n          },\n          containedSecondary: {\n            color: \"inherit\",\n            margin: \"8px\"\n          }\n        },\n        MuiButtonGroup: {\n          root: {\n            margin: \"0\"\n          },\n          groupedContainedPrimary: {\n            margin: \"0\"\n          },\n          groupedOutlined: {\n            margin: \"0\"\n          },\n          groupedText: {\n            margin: \"0\"\n          }\n        },\n        MuiIconButton: {\n          root: {\n            color: \"#36b5e6\"\n          }\n        },\n        MuiListItem: {\n          button: {\n            \"&:hover\": {\n              backgroundColor: \"rgba(54,181,230, 0.15)\"\n            }\n          }\n        },\n        MuiFormControlLabel: {\n          label: {\n            color: \"rgba(255,255,255,0.8)\"\n          }\n        },\n        MuiInputBase: {\n          input: {\n            font: \"Roboto\"\n          }\n        },\n        MuiFilledInput: {\n          root: {\n            border: \"4px\"\n          },\n          underline: {\n            \"&::before\": {\n              borderRadius: \"4px\"\n            }\n          }\n        }\n      }\n    })\n  ),\n  light: createMuiTheme(\n    themeFactory({\n      font: {\n        Roboto: {\n          fontFamily: \"Roboto\"\n        },\n        OpenSans: {\n          fontFamily: \"Open Sans\"\n        }\n      },\n      label: \"light\",\n      textColor: CONSTANTS.light.textColor,\n      backgroundColor:\n        \"linear-gradient(122.19deg, #FFFFFF 2.58%, #FFFFFF 76.23%)\", // it was white before\n      bottomNavigation: { background: \"#c3c3c3\" },\n      icon: { color: \"#757575\", hoverColor: \"black\" },\n      table: { stripColor: \"whitesmoke\" },\n      globalStats: {\n        borderColor: \"#E6E6E6\",\n        subTextColor: \"#717171\",\n        upperTextColor: \"#474747\"\n      },\n      palette: {\n        primary: {\n          main: \"#007197\"\n        },\n        secondary: {\n          main: \"#BE2424\"\n        },\n        green: {\n          main: \"#03DAC5\"\n        },\n        background: {\n          primary: CONSTANTS.light.background.primary,\n          secondary: CONSTANTS.light.background.secondary\n        },\n        accent: {\n          background: \"whitesmoke\",\n          color: CONSTANTS.light.textColor,\n          border: \"darkgray\"\n        }\n      },\n      overrides: {\n        MuiTableCell: {\n          body: {\n            color: CONSTANTS.light.textColor\n          }\n        },\n        MuiAppBar: {\n          colorDefault: {\n            color: CONSTANTS.light.textColor,\n            borderColor: CONSTANTS.light.borderBottom,\n            backgroundColor: CONSTANTS.light.background.secondary\n          },\n          colorInherit: {\n            color: CONSTANTS.light.textColor,\n            backgroundColor: \"#d2d2d2\"\n          }\n        },\n        MuiButton: {\n          outlined: {\n            margin: \"8px\"\n          },\n          text: {\n            margin: \"8px\"\n          },\n          contained: {\n            margin: \"8px\"\n          },\n          containedPrimary: {\n            color: \"white\",\n            margin: \"8px\"\n          },\n          containedSecondary: {\n            color: \"white\",\n            margin: \"8px\"\n          }\n        },\n        MuiButtonGroup: {\n          root: {\n            margin: \"0\"\n          },\n          groupedContainedPrimary: {\n            margin: \"0\"\n          },\n          groupedOutlined: {\n            margin: \"0\"\n          },\n          groupedText: {\n            margin: \"0\"\n          }\n        },\n        MuiIconButton: {\n          root: {\n            color: \"#007197\"\n          }\n        },\n        MuiListItem: {\n          button: {\n            \"&:hover\": {\n              backgroundColor: \"rgba(0,113,151, 0.15)\"\n            }\n          }\n        },\n        MuiFormControlLabel: {\n          label: {\n            color: \"rgba(0,0,0,0.8)\"\n          }\n        },\n        MuiInputBase: {\n          input: {\n            font: \"Roboto\"\n          }\n        },\n        MuiFilledInput: {\n          root: {\n            border: \"4px\"\n          },\n          underline: {\n            \"&::before\": {\n              borderRadius: \"4px\"\n            }\n          }\n        },\n        MuiPaper: {\n          root: {\n            color: \"#272727\",\n            backgroundColor: CONSTANTS.light.background.primary\n          }\n        },\n        MuiTableRow: {\n          head: {\n            \"& th\": {\n              backgroundColor: CONSTANTS.light.background.primary,\n              borderBottom: CONSTANTS.light.borderBottom\n            }\n          },\n          root: {\n            \"& td\": {\n              borderBottom: CONSTANTS.light.borderBottom\n            }\n          }\n        }\n      }\n    })\n  )\n};\n\nThemes.getTheme = () => {\n  const theme = window.localStorage.getItem(\"movai.theme\"); // dark or light\n  return theme ? theme : \"dark\";\n};\n\nThemes.setTheme = value => {\n  window.localStorage.setItem(\"movai.theme\", value);\n};\n\nexport default Themes;\n","module.exports = require(\"@babel/runtime/helpers/esm/assertThisInitialized\");","module.exports = require(\"@babel/runtime/helpers/esm/asyncToGenerator\");","module.exports = require(\"@babel/runtime/helpers/esm/classCallCheck\");","module.exports = require(\"@babel/runtime/helpers/esm/classPrivateFieldGet\");","module.exports = require(\"@babel/runtime/helpers/esm/createClass\");","module.exports = require(\"@babel/runtime/helpers/esm/defineProperty\");","module.exports = require(\"@babel/runtime/helpers/esm/extends\");","module.exports = require(\"@babel/runtime/helpers/esm/get\");","module.exports = require(\"@babel/runtime/helpers/esm/getPrototypeOf\");","module.exports = require(\"@babel/runtime/helpers/esm/inherits\");","module.exports = require(\"@babel/runtime/helpers/esm/objectWithoutProperties\");","module.exports = require(\"@babel/runtime/helpers/esm/possibleConstructorReturn\");","module.exports = require(\"@babel/runtime/helpers/esm/slicedToArray\");","module.exports = require(\"@babel/runtime/helpers/esm/taggedTemplateLiteral\");","module.exports = require(\"@babel/runtime/helpers/esm/toConsumableArray\");","module.exports = require(\"@babel/runtime/helpers/esm/typeof\");","module.exports = require(\"@babel/runtime/regenerator\");","module.exports = require(\"@babylonjs/core\");","module.exports = require(\"@babylonjs/core/Debug/debugLayer\");","module.exports = require(\"@babylonjs/core/Maths/math\");","module.exports = require(\"@babylonjs/gui/2D\");","module.exports = require(\"@babylonjs/inspector\");","module.exports = require(\"@babylonjs/loaders\");","module.exports = require(\"@date-io/date-fns\");","module.exports = require(\"@material-ui/core\");","module.exports = require(\"@material-ui/core/Avatar\");","module.exports = require(\"@material-ui/core/Backdrop\");","module.exports = require(\"@material-ui/core/Box\");","module.exports = require(\"@material-ui/core/Breadcrumbs\");","module.exports = require(\"@material-ui/core/Button\");","module.exports = require(\"@material-ui/core/Checkbox\");","module.exports = require(\"@material-ui/core/Chip\");","module.exports = require(\"@material-ui/core/CircularProgress\");","module.exports = require(\"@material-ui/core/Collapse\");","module.exports = require(\"@material-ui/core/Divider\");","module.exports = require(\"@material-ui/core/Drawer\");","module.exports = require(\"@material-ui/core/FormControl\");","module.exports = require(\"@material-ui/core/FormControlLabel\");","module.exports = require(\"@material-ui/core/FormHelperText\");","module.exports = require(\"@material-ui/core/Grid\");","module.exports = require(\"@material-ui/core/IconButton\");","module.exports = require(\"@material-ui/core/Input\");","module.exports = require(\"@material-ui/core/InputAdornment\");","module.exports = require(\"@material-ui/core/InputBase\");","module.exports = require(\"@material-ui/core/InputLabel\");","module.exports = require(\"@material-ui/core/List\");","module.exports = require(\"@material-ui/core/ListItemText\");","module.exports = require(\"@material-ui/core/Menu\");","module.exports = require(\"@material-ui/core/MenuItem\");","module.exports = require(\"@material-ui/core/Paper\");","module.exports = require(\"@material-ui/core/Select\");","module.exports = require(\"@material-ui/core/Switch\");","module.exports = require(\"@material-ui/core/Tab\");","module.exports = require(\"@material-ui/core/TableCell\");","module.exports = require(\"@material-ui/core/Tabs\");","module.exports = require(\"@material-ui/core/TextField\");","module.exports = require(\"@material-ui/core/Typography\");","module.exports = require(\"@material-ui/core/colors\");","module.exports = require(\"@material-ui/core/styles\");","module.exports = require(\"@material-ui/core/styles/colorManipulator\");","module.exports = require(\"@material-ui/core/utils\");","module.exports = require(\"@material-ui/icons/Add\");","module.exports = require(\"@material-ui/icons/AddBox\");","module.exports = require(\"@material-ui/icons/ArrowDownward\");","module.exports = require(\"@material-ui/icons/Chat\");","module.exports = require(\"@material-ui/icons/Check\");","module.exports = require(\"@material-ui/icons/ChevronLeft\");","module.exports = require(\"@material-ui/icons/ChevronRight\");","module.exports = require(\"@material-ui/icons/Clear\");","module.exports = require(\"@material-ui/icons/Close\");","module.exports = require(\"@material-ui/icons/DeleteOutline\");","module.exports = require(\"@material-ui/icons/Edit\");","module.exports = require(\"@material-ui/icons/ExpandMore\");","module.exports = require(\"@material-ui/icons/FilterList\");","module.exports = require(\"@material-ui/icons/FirstPage\");","module.exports = require(\"@material-ui/icons/Label\");","module.exports = require(\"@material-ui/icons/LastPage\");","module.exports = require(\"@material-ui/icons/NavigateNext\");","module.exports = require(\"@material-ui/icons/Remove\");","module.exports = require(\"@material-ui/icons/SaveAlt\");","module.exports = require(\"@material-ui/icons/Schedule\");","module.exports = require(\"@material-ui/icons/Search\");","module.exports = require(\"@material-ui/icons/Settings\");","module.exports = require(\"@material-ui/icons/Today\");","module.exports = require(\"@material-ui/icons/ViewColumn\");","module.exports = require(\"@material-ui/icons/ViewModule\");","module.exports = require(\"@material-ui/icons/Warning\");","module.exports = require(\"@material-ui/lab/Alert\");","module.exports = require(\"@material-ui/pickers\");","module.exports = require(\"@material-ui/styles\");","module.exports = require(\"clsx\");","module.exports = require(\"earcut\");","module.exports = require(\"fontsource-open-sans\");","module.exports = require(\"fontsource-roboto\");","module.exports = require(\"jwt-decode\");","module.exports = require(\"lodash.isequal\");","module.exports = require(\"lodash/capitalize\");","module.exports = require(\"lodash/cloneDeep\");","module.exports = require(\"lodash/get\");","module.exports = require(\"lodash/isEmpty\");","module.exports = require(\"lodash/isEqual\");","module.exports = require(\"lodash/set\");","module.exports = require(\"lodash/uniqBy\");","module.exports = require(\"material-icons/css/material-icons.css\");","module.exports = require(\"material-table\");","module.exports = require(\"monet\");","module.exports = require(\"mov-fe-lib-core\");","module.exports = require(\"prop-types\");","module.exports = require(\"react\");","module.exports = require(\"react-dom\");","module.exports = require(\"react-resize-detector\");","module.exports = require(\"react-virtualized\");","module.exports = require(\"react-virtualized-tree\");","module.exports = require(\"react-virtualized-tree/lib/main.css\");","module.exports = require(\"react-virtualized/styles.css\");","module.exports = require(\"styled-components\");"],"sourceRoot":""}