{"version":3,"sources":["webpack://MovaiReact/webpack/universalModuleDefinition","webpack://MovaiReact/webpack/bootstrap","webpack://MovaiReact/./index.js","webpack://MovaiReact/./src/Components/Logs/Logs.css","webpack://MovaiReact/./src/Components/Snackbar/Snackbar.css","webpack://MovaiReact/./node_modules/css-loader/dist/runtime/api.js","webpack://MovaiReact/./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack://MovaiReact/./src/Components/Breadcrumb.js","webpack://MovaiReact/./src/Components/Button.js","webpack://MovaiReact/./src/Components/Collapse.js","webpack://MovaiReact/./src/Components/ContextMenu.js","webpack://MovaiReact/./src/Components/Drawer.js","webpack://MovaiReact/./src/Components/LoginForm/LoginForm.js","webpack://MovaiReact/./src/Components/LoginForm/movai_red.svg","webpack://MovaiReact/./src/Components/Logs/Logs.css?4c9f","webpack://MovaiReact/./src/Components/Logs/Logs.js","webpack://MovaiReact/./src/Components/Logs/LogsFilterBar/FiltersIcon/FiltersIcon.js","webpack://MovaiReact/./src/Components/Logs/LogsFilterBar/LogsFilterBar.js","webpack://MovaiReact/./src/Components/Logs/LogsTable/LogsTable.js","webpack://MovaiReact/./src/Components/Logs/utils/Utils.js","webpack://MovaiReact/./src/Components/Modal/AbstractModal.js","webpack://MovaiReact/./src/Components/Modal/ConfirmAlertModal.js","webpack://MovaiReact/./src/Components/ProfileMenu.js","webpack://MovaiReact/./src/Components/SearchInput.js","webpack://MovaiReact/./src/Components/Select.js","webpack://MovaiReact/./src/Components/Snackbar/Alert/Alert.js","webpack://MovaiReact/./src/Components/Snackbar/Alert/svg-icons/CreateSVGIcon.js","webpack://MovaiReact/./src/Components/Snackbar/Alert/svg-icons/svgIcons.js","webpack://MovaiReact/./src/Components/Snackbar/Snackbar.css?c276","webpack://MovaiReact/./src/Components/Snackbar/Snackbar.js","webpack://MovaiReact/./src/Components/Table.js","webpack://MovaiReact/./src/Components/Tabs.js","webpack://MovaiReact/./src/Components/Text.js","webpack://MovaiReact/./src/Components/Toggle.js","webpack://MovaiReact/./src/Components/VerticalBar.js","webpack://MovaiReact/./src/Components/Viewer/Actions/Action.js","webpack://MovaiReact/./src/Components/Viewer/Actions/AddKeyPointAction.js","webpack://MovaiReact/./src/Components/Viewer/Actions/AddMapAction.js","webpack://MovaiReact/./src/Components/Viewer/Actions/AddMeshAction.js","webpack://MovaiReact/./src/Components/Viewer/Actions/BoxRegionAction.js","webpack://MovaiReact/./src/Components/Viewer/Actions/DragObjectsAction.js","webpack://MovaiReact/./src/Components/Viewer/Actions/DrawGraphAction.js","webpack://MovaiReact/./src/Components/Viewer/Actions/DrawPathAction.js","webpack://MovaiReact/./src/Components/Viewer/Actions/MouseKeysAction.js","webpack://MovaiReact/./src/Components/Viewer/Actions/OrbitAction.js","webpack://MovaiReact/./src/Components/Viewer/Actions/PolygonRegionAction.js","webpack://MovaiReact/./src/Components/Viewer/Actions/RobotAction.js","webpack://MovaiReact/./src/Components/Viewer/AssetsManager/AssetsManager.js","webpack://MovaiReact/./src/Components/Viewer/AssetsManager/MapLoader.js","webpack://MovaiReact/./src/Components/Viewer/BaseViewer/BaseViewer.js","webpack://MovaiReact/./src/Components/Viewer/Graph/Graph.js","webpack://MovaiReact/./src/Components/Viewer/Graph/GraphEmbedding.js","webpack://MovaiReact/./src/Components/Viewer/MainView/MainViewActions.js","webpack://MovaiReact/./src/Components/Viewer/MainView/MainViewRetriever.js","webpack://MovaiReact/./src/Components/Viewer/MainView/NodeItemFactoryMap.js","webpack://MovaiReact/./src/Components/Viewer/Math/Mat3.js","webpack://MovaiReact/./src/Components/Viewer/Math/Vec2.js","webpack://MovaiReact/./src/Components/Viewer/Math/Vec3.js","webpack://MovaiReact/./src/Components/Viewer/NodeItem/AssetNodeItem.js","webpack://MovaiReact/./src/Components/Viewer/NodeItem/Box.js","webpack://MovaiReact/./src/Components/Viewer/NodeItem/BoxRegion.js","webpack://MovaiReact/./src/Components/Viewer/NodeItem/GlobalRef.js","webpack://MovaiReact/./src/Components/Viewer/NodeItem/GraphItem.js","webpack://MovaiReact/./src/Components/Viewer/NodeItem/KeyPoint.js","webpack://MovaiReact/./src/Components/Viewer/NodeItem/Map.js","webpack://MovaiReact/./src/Components/Viewer/NodeItem/Mesh.js","webpack://MovaiReact/./src/Components/Viewer/NodeItem/NodeItem.js","webpack://MovaiReact/./src/Components/Viewer/NodeItem/Path.js","webpack://MovaiReact/./src/Components/Viewer/NodeItem/PointCloud.js","webpack://MovaiReact/./src/Components/Viewer/NodeItem/PolygonRegion.js","webpack://MovaiReact/./src/Components/Viewer/NodeItem/Robot.js","webpack://MovaiReact/./src/Components/Viewer/NodeItem/Wall.js","webpack://MovaiReact/./src/Components/Viewer/SceneViewer.js","webpack://MovaiReact/./src/Components/Viewer/TreeObject/TreeNode.js","webpack://MovaiReact/./src/Components/Viewer/TreeObject/TreeObject.js","webpack://MovaiReact/./src/Components/Viewer/Util3d/CameraBuilder.js","webpack://MovaiReact/./src/Components/Viewer/Util3d/DirectionalLightBuilder.js","webpack://MovaiReact/./src/Components/Viewer/Util3d/GizmoManagerBuilder.js","webpack://MovaiReact/./src/Components/Viewer/Util3d/GroundBuilder.js","webpack://MovaiReact/./src/Components/Viewer/Util3d/PositionalLightBuilder.js","webpack://MovaiReact/./src/Components/Viewer/Util3d/ReferentialBuilder.js","webpack://MovaiReact/./src/Components/Viewer/Util3d/Util3d.js","webpack://MovaiReact/./src/Components/Viewer/Utils/Animator.js","webpack://MovaiReact/./src/Components/Viewer/Utils/AnnotationManager.js","webpack://MovaiReact/./src/Components/Viewer/Utils/AssetsTypesFactory.js","webpack://MovaiReact/./src/Components/Viewer/Utils/Clipboard.js","webpack://MovaiReact/./src/Components/Viewer/Utils/Constants.js","webpack://MovaiReact/./src/Components/Viewer/Utils/DefaultMouseEvents.js","webpack://MovaiReact/./src/Components/Viewer/Utils/DefaultScene.js","webpack://MovaiReact/./src/Components/Viewer/Utils/MeshCache.js","webpack://MovaiReact/./src/Components/Viewer/Utils/MeshLoader.js","webpack://MovaiReact/./src/Components/Viewer/Utils/SceneServerUtils.js","webpack://MovaiReact/./src/Components/Viewer/Utils/TreeServerUtils.js","webpack://MovaiReact/./src/styles/Style.js","webpack://MovaiReact/./src/styles/Themes.js","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/assertThisInitialized\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/asyncToGenerator\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/classCallCheck\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/classPrivateFieldGet\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/classPrivateFieldSet\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/createClass\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/defineProperty\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/extends\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/get\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/getPrototypeOf\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/inherits\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/objectWithoutProperties\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/possibleConstructorReturn\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/slicedToArray\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/taggedTemplateLiteral\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/toConsumableArray\"","webpack://MovaiReact/external \"@babel/runtime/helpers/esm/typeof\"","webpack://MovaiReact/external \"@babel/runtime/regenerator\"","webpack://MovaiReact/external \"@babylonjs/core\"","webpack://MovaiReact/external \"@babylonjs/core/Maths/math\"","webpack://MovaiReact/external \"@babylonjs/gui/2D\"","webpack://MovaiReact/external \"@babylonjs/loaders\"","webpack://MovaiReact/external \"@date-io/date-fns\"","webpack://MovaiReact/external \"@material-ui/core\"","webpack://MovaiReact/external \"@material-ui/core/Breadcrumbs\"","webpack://MovaiReact/external \"@material-ui/core/Button\"","webpack://MovaiReact/external \"@material-ui/core/Checkbox\"","webpack://MovaiReact/external \"@material-ui/core/Chip\"","webpack://MovaiReact/external \"@material-ui/core/Collapse\"","webpack://MovaiReact/external \"@material-ui/core/Divider\"","webpack://MovaiReact/external \"@material-ui/core/Drawer\"","webpack://MovaiReact/external \"@material-ui/core/FormControl\"","webpack://MovaiReact/external \"@material-ui/core/FormControlLabel\"","webpack://MovaiReact/external \"@material-ui/core/FormHelperText\"","webpack://MovaiReact/external \"@material-ui/core/Grid\"","webpack://MovaiReact/external \"@material-ui/core/IconButton\"","webpack://MovaiReact/external \"@material-ui/core/Input\"","webpack://MovaiReact/external \"@material-ui/core/InputAdornment\"","webpack://MovaiReact/external \"@material-ui/core/InputBase\"","webpack://MovaiReact/external \"@material-ui/core/InputLabel\"","webpack://MovaiReact/external \"@material-ui/core/ListItemText\"","webpack://MovaiReact/external \"@material-ui/core/Menu\"","webpack://MovaiReact/external \"@material-ui/core/MenuItem\"","webpack://MovaiReact/external \"@material-ui/core/Paper\"","webpack://MovaiReact/external \"@material-ui/core/Select\"","webpack://MovaiReact/external \"@material-ui/core/Switch\"","webpack://MovaiReact/external \"@material-ui/core/Tab\"","webpack://MovaiReact/external \"@material-ui/core/TableCell\"","webpack://MovaiReact/external \"@material-ui/core/Tabs\"","webpack://MovaiReact/external \"@material-ui/core/TextField\"","webpack://MovaiReact/external \"@material-ui/core/Typography\"","webpack://MovaiReact/external \"@material-ui/core/colors\"","webpack://MovaiReact/external \"@material-ui/core/styles\"","webpack://MovaiReact/external \"@material-ui/core/styles/colorManipulator\"","webpack://MovaiReact/external \"@material-ui/core/utils\"","webpack://MovaiReact/external \"@material-ui/icons/Add\"","webpack://MovaiReact/external \"@material-ui/icons/AddBox\"","webpack://MovaiReact/external \"@material-ui/icons/ArrowDownward\"","webpack://MovaiReact/external \"@material-ui/icons/Check\"","webpack://MovaiReact/external \"@material-ui/icons/ChevronLeft\"","webpack://MovaiReact/external \"@material-ui/icons/ChevronRight\"","webpack://MovaiReact/external \"@material-ui/icons/Clear\"","webpack://MovaiReact/external \"@material-ui/icons/Close\"","webpack://MovaiReact/external \"@material-ui/icons/DeleteOutline\"","webpack://MovaiReact/external \"@material-ui/icons/Edit\"","webpack://MovaiReact/external \"@material-ui/icons/ExpandMore\"","webpack://MovaiReact/external \"@material-ui/icons/FilterList\"","webpack://MovaiReact/external \"@material-ui/icons/FirstPage\"","webpack://MovaiReact/external \"@material-ui/icons/Label\"","webpack://MovaiReact/external \"@material-ui/icons/LastPage\"","webpack://MovaiReact/external \"@material-ui/icons/NavigateNext\"","webpack://MovaiReact/external \"@material-ui/icons/Remove\"","webpack://MovaiReact/external \"@material-ui/icons/SaveAlt\"","webpack://MovaiReact/external \"@material-ui/icons/Search\"","webpack://MovaiReact/external \"@material-ui/icons/Settings\"","webpack://MovaiReact/external \"@material-ui/icons/Today\"","webpack://MovaiReact/external \"@material-ui/icons/ViewColumn\"","webpack://MovaiReact/external \"@material-ui/pickers\"","webpack://MovaiReact/external \"clsx\"","webpack://MovaiReact/external \"earcut\"","webpack://MovaiReact/external \"fontsource-open-sans\"","webpack://MovaiReact/external \"fontsource-roboto\"","webpack://MovaiReact/external \"lodash/get\"","webpack://MovaiReact/external \"lodash/isEmpty\"","webpack://MovaiReact/external \"lodash/isEqual\"","webpack://MovaiReact/external \"material-table\"","webpack://MovaiReact/external \"monet\"","webpack://MovaiReact/external \"mov-fe-lib-core\"","webpack://MovaiReact/external \"prop-types\"","webpack://MovaiReact/external \"rbush\"","webpack://MovaiReact/external \"react\"","webpack://MovaiReact/external \"react-dom\"","webpack://MovaiReact/external \"react-resize-detector\"","webpack://MovaiReact/external \"react-virtualized\"","webpack://MovaiReact/external \"styled-components\""],"names":["useStyles","makeStyles","theme","root","marginTop","spacing","link","fontSize","fontWeight","fontFamily","cursor","textDecoration","lastLabel","Breadcrumb","props","classes","style","pathList","map","element","index","length","label","propTypes","PropTypes","array","defaultProps","console","log","Button","className","onClick","color","variant","size","startIcon","disabled","children","object","func","string","isRequired","node","bool","undefined","Collapse","React","useState","open","setOpen","useEffect","handleClickFactory","clickLambda","iconStyle","width","item","divided","ContextMenu","anchorEl","setAnchorEl","handleClick","event","currentTarget","handleClose","cloneElement","evt","Boolean","menuList","reduce","result","push","onClose","navigationList","lowerElement","backgroundColor","Drawer","anchor","ANCHOR","left","right","top","bottom","styles","padding","borderRadius","LoginForm","username","password","remember","error","errorMessage","Authentication","login","state","apiResponse","setLoggedIn","setState","logo","paddingTop","defaultLogo","display","marginLeft","marginRight","formControl","target","value","key","sendCreds","Component","logs","any","loggedIn","withStyles","withTheme","Logs","selectedRobots","levels","limit","logsData","messageRegex","selectedFromDate","selectedToDate","columns","tags","height","levelsList","robotId","updateRobot","findIndex","elem","id","isSelected","getLogs","robots","Promise","all","filter","robot","robotState","robotStates","off","getRobotLogData","then","dataArrays","prevState","finalArray","dataArray","forEach","data","logsTimeout","setTimeout","sort","a","b","time","robotSelected","re","rej","timeoutHandle","dynamicURL","ip","getRequestLevels","getRequestTags","getRequestMessage","MasterDB","get","res","e","clearTimeout","divElement","clientHeight","setSelectedRobots","robotsData","prevProps","_isEqual","flexDirection","flexGrow","updateRobotSelection","columnList","tagText","findsUniqueKey","tagToDelete","filteredTags","tag","text","newDate","keyToChange","advancedMode","simpleLevelsList","advancedLevelsList","overflowY","minHeight","filterByFromToDates","name","timestamp","battery","temp","okay","Date","dataKey","render","getJustDateFromServer","Time","getJustTimeFromServer","Level","Module","Robot","Message","button","margin","palette","primary","main","borderColor","iconActive","fade","buttonApplyFilters","background","fontStyle","dark","icon","checkbox","limitText","StyledMenu","paper","boxShadow","vertical","horizontal","FilterIcon","otherFilters","t","isActive","title","filterBarContainer","flexWrap","alignItems","input","flex","paddingLeft","searchText","minWidth","addTagText","toggleContainer","datePicker","tagsContainer","tagsList","chip","maxWidth","filtersButton","columnsFilter","iconButton","LogsFilterBar","setTagText","handleRobotChange","arrayEvent","selectedId","getRobotSelector","paddingRight","selected","selectedNames","join","MenuProps","robotIndex","getSearchInput","handleMessageRegex","startAdornment","endAdornment","getLevels","handleLevels","labels","level","includes","indexOf","getTags","keyCode","handleAddTag","handleDeleteTag","getTimeFilters","DateFnsUtils","handleDateChange","getSettings","handleAdvancedMode","handleLimit","shrink","handleColumns","_get","Object","keys","column","ITEM_HEIGHT","ITEM_PADDING_TOP","PaperProps","maxHeight","getContentAnchorEl","number","selectToDate","arePropsEqual","nextProps","memo","flexContainer","boxSizing","table","flip","direction","tableRow","tableRowHover","grey","tableCell","flexColumn","noClick","colorCoding","MuiVirtualizedTable","onRowClick","rowData","clsx","cellData","columnIndex","rowHeight","numeric","headerHeight","tableProps","getRowClassName","other","headerProps","headerRenderer","cellRenderer","PureComponent","arrayOf","shape","VirtualizedTable","LogsTable","INFO","WARNING","DEBUG","ERROR","CRITICAL","keyName","k","j","levelsArray","Array","isArray","toLowerCase","tagsArray","_isEmpty","message","getTimeFromServer","serverTime","toLocaleString","toLocaleDateString","toLocaleTimeString","formatLogsData","stdout","binaryIndexOf","criteria","minIndex","maxIndex","currentIndex","currentElement","comparison","fromDate","toDate","lowerIndex","upperIndex","dateList","getTime","slice","addNestedName","nestedName","newName","updateRunningNodes","treeList","runningNodesList","status","removeDeleteContainer","deleteIndex","splice","i","parentId","detectContainerLoop","flowId","flowIndex","currentFlow","position","overflow","AbstractModal","onKeyPress","submit","onSubmit","cancel","onCancel","justifyContent","alignSelf","cancelColor","cancelText","submitColor","submitText","ConfirmAlertModal","menuItemSpacing","cursorDefault","profileMenuFooter","textAlign","ProfileMenu","useTheme","welcomeLabel","userName","extraItems","darkThemeLabel","handleToggleTheme","isDarkTheme","handleLogout","logoutLabel","version","search","common","white","breakpoints","up","searchIcon","pointerEvents","inputRoot","inputInput","transition","transitions","create","SearchInput","searchInput","enableTimeout","timer","handleSearch","onChange","placeholder","setSearchInput","handleChange","Select","noneOption","inputProps","options","filledSuccess","filledInfo","filledWarning","filledError","opacity","action","defaultIconMapping","success","svgIcons","SuccessOutlined","warning","ReportProblemOutlined","ErrorOutline","info","InfoOutlined","Alert","closeText","iconMapping","role","severity","capitalize","Close","oneOf","CreateSVGIcon","path","fill","viewBox","ReactConfirmAlert","close","closeOnClickOutside","onClickOutside","isClickOutside","overlay","removeBodyClass","removeElementReconfirm","closeOnEscape","onKeypressEscape","isKeyCodeEscape","document","addEventListener","keyboardClose","autoClose","getElementById","autoHideDuration","removeEventListener","willUnmount","customUI","dataCustomUI","closable","dom","handleClickOverlay","renderCustomUI","createElementReconfirm","properties","divTarget","body","classList","add","createElement","appendChild","unmountComponentAtNode","parentNode","removeChild","addBodyClass","remove","snackbar","tableIcons","Add","forwardRef","ref","Check","Clear","Delete","DetailPanel","Edit","Export","Filter","FirstPage","LastPage","NextPage","PreviousPage","ResetSearch","Search","SortArrow","ThirdStateCheck","ViewColumn","Table","actions","components","localization","actionsColumnIndex","draggable","grouping","toolbar","searchFieldAlignment","paging","TabPanel","selectedTab","a11yProps","tabPanel","Tabs","setSelectedTab","newSelectedTab","tabList","tab","scrollable","component","Text","marginBottom","colorSwitchBase","green","colorBar","colorChecked","Toggle","toggle","onToggle","hidden","switchBase","checked","track","labelPlacement","container","logoArea","navigationArea","accountArea","unsetAccountAreaPadding","VerticalBar","upperElement","Action","memory","parentView","getSceneMemory","gizmoManager","attachedMesh","camera","attachControl","canvas","highlightNodeInTree","highlightNodeInScene","closeContextDial","setContextActionIndex","instance","TEMP_KEY_POINT_NAME","AddKeyPointAction","scene","is2addInServer","Color3","Gray","rootMesh","getRootNode","mesh","keyPoint","KeyPoint","ofDict","r","g","parent","localPosition","Util3d","computeLocalCoordinatesFromMesh","Vec3","ofBabylon","toBabylon","setPositionWithLocalVector","Axis","Z","scale","DEFAULT_SIZE","addNodeItem2Tree","setSelectedAction","ground","maybeMousePos","getGroundPosition","mousePos","detachControl","maybeCurrent","current","oldMousePos","tempMesh","dispose","createKeyPoint","Math","floor","random","setPropertiesWithName","Maybe","none","MouseKeysAction","AddMapAction","mapLoader","TYPE","load","textureSrc","yamlSrc","downloadLinks","MapLoader","getMapUrl","rootNodeMaybe","fromNull","resolution","origin","imageSize","groundBuilder","orSome","build","originPos","of","sub","rootNode","GlobalRef","inverseCoordinates","setTarget","Vector3","x","y","z","Map","is2sendServer","DefaultScene","createMeshGround","maybeNode","getNodeFromTree","orElseRun","getObjectTree","addMap","ACTIONS","orbit","AddMeshAction","actionMemoryClone","MeshLoader","transformMesh","addMesh2Scene","parentMesh","getParentMesh","createNormals","isImport","maybeDict","flatMap","d","some","FromArray","Zero","rotationQuaternion","quaternion","Quaternion","Identity","material","StandardMaterial","diffuseColor","emissiveColor","finalName","meshItem","Mesh","keyValueMap","renderMenus","parentObj","parentName","treeNode","getMeshUrl","addMesh","dragObjects","BoxRegionAction","buttons","createBoxRegion","TEMP_BOX_REGION_NAME","region","Red","localRegion","middlePoint","centeredRegion","boxRegionItem","BoxRegion","toArray","corners","DragObjectsAction","maybeSelectedMesh","pickMesh","currentMesh","groundPosition","groundPositionInLocalCoordinates","mousePointInLocal","clickPointInLocal","shiftFromCenterOfMass","handleMeshRightClick","addGizmo","highlightMeshInScene","setProperties","orLazy","getMouseCoordinatesFromRoot","mousePosRoot","handleRightClickWithoutMesh","getMouseContextActions","setMouseContextActions","mousePosFromRoot","getPasteOnClick","pasteAction","Clipboard","paste","maybeGroundPosition","selectedMesh","currentLocal","v","getX","getY","notifyObservers","groundPos","groundPosInLocal","bigDisplacement","ZERO","updateNodeInServer","undoManager","addIt","getUndoAbleAction","defaultAction","predicateActionList","predicate","code","getDeleteButtonAction","ctrlKey","shiftKey","undo","redo","getHighlightedNodeName","predicateAction","UndoManager","nodeName","onDeleteNode","contextActions","getContextActions","is2updateServer","displacement","observers","obs","updatedPointMesh","actionBuilder","doAction","newPos","undoAction","invertDisplacement","DrawGraphAction","setContextActions","ca","mode","mousePosConsumer","handlePointerDownByMode","MODES","line","onPointerDownLine","curve","onPointerDownCurve","cata","pickedMesh","Green","mouseCurve","handlePointerMoveByMode","onPointerMoveLine","onPointerMoveCurve","getGraph","graphNode","keyCodeActionMap","escapeAction","Backspace","Escape","deletePreviewMeshes","previewMeshes","lambda","graphItem","GraphItem","createEdge","edge","addEdge","visibility","edgeEmbedding","toLocalCoordinates","getEdgeWithVertexMeshes","Blue","Constants","RADIUS","addCurveEdge","getCurveEdgeWithVertexMeshes","concat","edgeInWorldCoordinate","drawMethod","createGraphItemIfNone","free","arrayOfVector3","p","DrawPathAction","drawPathPoints","createCurve","TEMP_PATH_NAME","getDrawPathContextAction","Enter","localCurve","w","pointAverage","centeredCurve","subtract","pathItem","Path","localPath","ans","deleteNodeFromTreeUsingName","codeActionDict","buttonActionFactory","KeyG","KeyP","drawPath","KeyB","drawBoxRegion","KeyR","drawRegion","KeyK","addKeyPoint","KeyC","drawGraph","OrbitAction","TEMP_POLYGON_REGION_NAME","PolygonRegionAction","createPolygonRegion","drawPolyPoints","getDrawPolygonContextAction","Yellow","pointAverageVec3","polygonRegionItem","PolygonRegion","localPolygon","RobotAction","robotAnimatorFactory","getDefaultAnimator","addRobot","meshTree","createRobotMeshTree","robotTree","dict","builder","assetName","cloudPoint","PointCloud","ROBOT_MESH_NAME","createRobotFromMesh","getRobot","animate","getCloudPoint","AssetsManager","assets","assetsActionMap","retrieveAssetsFromDb","resolve","subscribe","Scope","Name","RobotName","getRobotNameUpdate","getRobotNameSub","File","FileLabel","getMapUpdater","signalObservers","getMapSubscriber","finishSub","getMeshUpdater","getMeshSubscriber","place","finishInitialSubscribers","subs","afterLoad","f","delAsset","dataGetter","after","getMapFileData","fileName","actionMap","del","filename","split","set","loader","type","ASSETS_TYPES","addAsset","ofNull","maybeGet","getMeshFileData","observer","assetKey","asset","AssetsTypesFactory","Error","values","every","localRobot","orientation","child","getter","deleteRobot","prop","obj","dot","cachedMap","fetch","response","parseYaml","image","yamlTxt","actionDict","Number","parseFloat","JSON","parse","s","getImageSize","src","reject","img","Image","onload","naturalWidth","naturalHeight","FLEX_STYLE","BaseViewer","reactCanvas","useRef","antialias","engineOptions","adaptToDeviceRatio","sceneOptions","onRender","onSceneReady","is2render","sceneFactory","rest","loaded","setLoaded","setScene","setSize","engine","Engine","Scene","isReady","onReadyObservable","addOnce","runRenderLoop","onResize","window","innerHeight","getEngine","resize","focus","Graph","edgeKey","addVertex","ijKey","jiKey","getEdgeProp","isSome","adjMap","vertices","edges","GraphEmbedding","graph","getVertexProp","vertexProp","NAMESPACES","vertex","rTreeVertices","RTreeVertices","rTreeEdges","RTreeEdges","vertexGenerator","getAdjMap","iIndex","isCurve","maybeVertexI","getVertex","vertexI","RVertex","insert","setVertexProp","rVertex","delVertex","edgeIndexes","jIndex","rVertexI","rVertexJ","edgeIJ","getEdgeByIndex","REdge","edgeJI","equals","setEdgeProp","getEdge","rEdge","indexes","delEdge","hasEdge","queryArray","toBBox","getMinDistanceVertex","neighbors","getNeighbors","jId","vProp","vertexIndex","propEdge","queryPoint","getMinDistanceEdge","edgeProp","rEdges","minDist","MAX_VALUE","minDistIndex","dist","rVertices","vp","getVertices","getEdges","dataVertexI","dataVertexJ","dataEdgeIJ","weight","vertexPosition","vertexId","minX","minY","maxX","maxY","RBush","bEdgeIds","min","max","MIN_VALUE","vertexPosI","vertexPosJ","aMin","bMin","getInstance","MainViewRetriever","mainView","serverScene","errors","importSceneRecursive","importDefaultScene","nodeDict","nodeItemClass","NODE_ITEM_FACTORY_MAP","nodeItem","isVisible","setEnabled","isAsset","importAsset","assetType","assetActionMap","getAssetsActionMap","retrievedAction","cause","solution","arrayTree","sortArrayTree","importNodeItem","send2server","Box","Wall","Mat3","v1","v2","v3","constructor","mat3","vec3","m","u","prodVec","dotVec","mat","babylonMat","arrayMat","Matrix","GetAsMatrix3x3","Vec2","vec","op","acc","sqrt","fromArray","biLambda","fold","initial","l","operation","binary","initialValue","isNaN","isFinite","babylon","identityMatrix","e1","e2","e3","pivot","normalize","AssetNodeItem","NodeItem","orUndefined","boxMesh","createBox","mapDict2Mesh","keyPoints","schema","jsonSchema","lower","scaleX","scaleY","uiSchema","worldCorners","getWorldCoordinates","form","oldForm","toForm","oldDimensions","dimensions","ofFormDimensions","newLowerPositionInWorldCoordinates","newLocalDimensions","localLowerPosition","getLocalCoordinatesFromWorld","notify","createBoxRegionMesh","backFaceCulling","babylonQuaternion","createPlaceHolderKeyPoints","FACES","boxRegion","X","Y","h","boxRegionMesh","positions","faces","meshFromPositionAndFaces","createNewMeshFromOldUsingNewBox","newBox","average","newMesh","locallyTranslate","childrenCopy","_children","c","getKeyPointObserverFunction","boxRegionTreeNode","corner","createSphere","Observable","THETA","PI","ROS_ORIGIN","scaling","cos","sin","rosOrigin","getRosOrigin","globalRefMesh","referentialBuilder","NAME","isPickable","boxParams","MeshBuilder","CreateBox","rotationMatrix","getRotationMatrix","pos","mul","abs","sceneId","getUniqueId","graphItemInstances","isDisposed","graphPlaceHolder","getGraphPlaceHolder","graphFormMapper","getDefaultFormMapper","vertexMesh","getVertexMesh","addObserver2VertexMesh","addOnClickVertex","meshByVertexId","updateVertexPosition","updateCurvedNeighbors","getToFormVertex","edgePos","vertexPos","getToFormEdge","edgeMesh","getUndoManager","doIt","getUndoDeleteEdge","meshByEdgeId","getVertexByIndex","ids","key2Edge","ofForm","annotations","setAnnotations2Form","edgePositions","maybe","meanPoint","edgePosition","newEdgePosition","updateEdgeFromForm","isEdgeCurve","iIsCurve","jIsCurve","buildVertex","buildEdge","points","getCurveEdgePoints","partialEdge","abstractGraph","getAbstractGraph","doesVertexCollideWithEdge","resolveVertexEdgeCollision","buildSimpleVertex","maybeVertex","degree","createVertexMesh","getVertexObs","movedVertexIds","getCurvedNeighbors","heatFlow","vertexIds","visitedVertex","vertexStack","n","pop","dt","df","getUndoDeleteVertex","neigh","simpleNeigh","curveNeigh","curvedPaths","getCurvedPathFromVertex","edgeIsCurve","meshes","highlightMeshesInScene","newPosition","protectEdge","updateVertex","isEdgeInPair","radius","edgeVec3","edgeBabylon","proj","vertexInEdge","importFeatures2Edge","leftEdge","rightEdge","getUndoResolveVertexEdgeCollision","oldEdge","oldEdgePositions","oldEdgeIndex","leftEdgePositions","leftEdgeIndex","rightEdgePositions","rightEdgeIndex","rEdgeWithData","uId","vId","rEdgePlus","importFeatures","rEdgeMinus","getEdgeMesh","addObserver2EdgeMesh","addOnClickEdge","getEdgeObs","getOnClickEdge","edgeVertex","maybeV","getUndoDelCurveEdge","getUndoDelLineEdge","curvedVertex","curvePath","posIJ","importData","getCurveEdgeMesh","sphere","createTubeFromPoints","halfD2x","halfD2xNorm","numberOfPoints","Curve3","CreateQuadraticBezier","getPoints","One","CreatePolyhedron","custom","TRIANGULAR_ANTIPRISM","convertToFlatShadedMesh","axis","category","face","toDict","oldName","Utils","AnnotationManager","getType","q","RotationYawPitchRoll","rotation","isEnabled","toHexString","FromHexString","copy","someMainView","rootItem","copyDict","newPosArray","copiedNodeItem","copiedMesh","someDict","babylonColor","getAnnotations","annotation","enumNames","names","splinePath","selectedKeyPointIndex","selectedKeyPoint","formPosition","newPosInWorldCoordinates","localPos","spline","getSplineFromCurve","CreateLines","updatable","getMaterialFromColor","splineObj2redis","path2return","point","getMeshOnClick","defaultKeyPointUpdate","oldMesh","kChild","getConeMesh","createNewMeshFromOldUsingNewPoints","newPoints","keyPointUpdateFunction","pathTreeNode","deleteKeyPoint","keyPointMesh","onAddNewPointKeyPointUpdate","addKeyPointInBetween","nextIndex","oldPoints","specialIndex","getKeyPointActions","curveMesh","getSphereMesh","cone","createOrientedCone","pointCloudSubscribe","Parameter","front_lidar","Value","updatePointCloud","vertexData","VertexData","colors","applyToMesh","unsubscribe","pointCloudMesh","disableLighting","pointsCloud","pointSize","positiveMod","mod","polygon","createExtrudedPolygonMesh","keypoints","stitchingBoundaries","computeOrientation","modi","reverseOrientation","triangleIndice","polygonRegionMesh","lowerTriangulation","triangulatePolygon","upperTriangulation","stitchTriangulation","polygonTreeNode","polygonMesh","oldTimeInMillis","robotAnimator","requestAnimationFrameId","requestAnimationFrame","cancelAnimationFrame","newRobotTf","thetaX","translate","boundScale","boundingSphere","getBoundingInfo","center","tfSphereMesh","ONES","addRotation","spherePlaceHolder","createRobotMeshTreeRecursive","robotMesh","RobotBuilder","speed","vel","rotate","Space","LOCAL","tf","updateRobotMeshTree","robot2Animate","_name","_meshTree","_parentMesh","_scene","_isPickable","_id","_keyValueMap","_assetName","variables","baseAxis","localWall","createWallMesh","centeredWall","tangent","normal","wallMesh","newWall","wallNode","wall","SceneViewer","sceneMemory","tree","objectTree","TreeServerUtils","ofScene","sceneName","focusObject","setCameraToTarget","newObjectTree","_absolutePosition","clone","DefaultMouseEvents","onPointerDown","onPointerUp","onPointerMove","mouseLocationText","afterLoading","SceneServerUtils","retrieveScene","errorList","importScene","loadAssets","retrieveSceneFromServer","renderScene","getRenderingCanvas","addCanvasEventListeners","createMouseLocationText","createCamera","light","createLight","createGizmo","highlightLayer","hl","HighlightLayer","lastHlMeshes","propVar","loadScene","TreeObject","getNode","events","resetErrorList","createScene","getErrorSolutionList","masterProps","augmentProps","TreeNode","expanded","TreeNodeBuilder","_title","_item","_expanded","_isVisible","getNodeRecursive","answer","getParentNodeRecursive","foundChild","compareTreesRecursive","treeA","treeB","nodeEquality","nodeA","nodeB","mapRecursive","newTree","nod","mappedNode","forEachRecursive","expand","filterTree","flatten","childPredicate","nodeMap","CameraBuilder","_sphericalCoordinates","_target","sphericalCoordinates","ArcRotateCamera","DirectionalLightBuilder","_direction","_intensity","intensity","DirectionalLight","GizmoManagerBuilder","_isPosition","_isRotation","_isBoundingBox","_isScale","_usePointerToAttachGizmos","GizmoManager","positionGizmoEnabled","rotationGizmoEnabled","boundingBoxGizmoEnabled","scaleGizmoEnabled","usePointerToAttachGizmos","GroundBuilder","_width","_height","_textureSrc","CreateGround","WORLD","ambientTexture","Texture","uScale","vScale","PositionalLightBuilder","_position","PointLight","ReferentialBuilder","_boxParams","_size","axisX","axisY","axisZ","localOrigin","meshParent","meshParentPos","meshParentRotMat","meshParentScaling","positionInWorld","forwardCoordinates","worldPosition","inverseScaling","localRotationMatrix","maybeQuaternion","toRotationMatrix","ofBabylonMatrix","normals","getVerticesData","VertexBuffer","NormalKind","PositionKind","lines","scaleInPlace","normalLines","CreateLineSystem","uArray","Dot","indices","triangulation","earcut","len","i3","vec3Poly","arrayOfPoints","randomDigits","transform","segments","surface","orthogonalBasisFromVector","sign","Cross","theta","zeroIndex","uIndex","diameter","CreateSphere","box","CreateTube","sideOrientation","DOUBLESIDE","pickInfo","pick","pointerX","pointerY","hit","pickedPoint","distance","orientations","atan2","nbPoints","closed","CreateCatmullRomSpline","splineObj","getCurveOrientations","Animator","next","doWhile","requestAnimeId","stop","play","AnimatorBuilder","_state","_next","_end","end","someAreEmpty","retrieveAnnotationsFromDb","delAnnotation","addAnnotation","Annotation","names2delete","annotationType","annotationObj","Type","Label","getSocketAnimator","SCENE_CONTEXT","Clip","write","read","POINTS_DENSITY","CLOUD_FUNCTION_NAME","mousePosClick","mousePosMove","setMouseLocationTxt","panCamera","vBabylon","getBabylonCoordinates","animateCamera","mouseButtonActions","filterActions","initialState","T","nextState","vdt","toFixed","RotationGizmo","UtilityLayerRenderer","xGizmo","dragBehavior","detach","scaleRatio","yGizmo","COLLISION_RADIUS","cameraBuilder","inertia","collisionRadius","panningInertia","checkCollisions","panningSensibility","lowerRadiusLimit","directionalLightBuilder","wireframe","clearColor","Black","collisionsEnabled","_uid","advancedTexture","AdvancedDynamicTexture","CreateFullscreenUI","TextBlock","addControl","MeshCache","meshCacheBySceneId","count","meshCache","cloneMesh","orNull","meshName","mapFunction","hasKey","assetsManager","meshTask","addMeshTask","MESH_URL","onSuccess","task","loadedMeshes","put","onError","exception","onFinish","successCallback","DEFAULT_SUCCESS","failCallback","DEFAULT_FAILURE","cloudFunction","successFailIf","failureLocation","childName","getParentNode","is2delInServer","deleteNodeInServer","maybeParent","getParentFromChild","node2Add","maybeParentNode","addNodeItem2Server","Style","createGlobalStyle","S","themeFactory","particular","typography","h1","h2","h3","h4","h5","h6","body1","Themes","createMuiTheme","bottomNavigation","globalStats","subTextColor","upperTextColor","secondary","overrides","MuiButton","outlined","contained","containedPrimary","containedSecondary","MuiButtonGroup","groupedContainedPrimary","groupedOutlined","groupedText","MuiIconButton","MuiListItem","MuiFormControlLabel","MuiInputBase","font","MuiFilledInput","border","underline","Roboto","OpenSans","getTheme","localStorage","getItem","setTheme","setItem"],"mappings":"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ACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA,CAAC;;;AAGD;AACA;AACA;AACA,qDAAqD,cAAc;AACnE;AACA,C;;;;;;;;;;;;AC7Fa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA,uDAAuD;;AAEvD;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;;AAEA;AACA;;AAEA,iBAAiB,wBAAwB;AACzC;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,iBAAiB,iBAAiB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,gBAAgB,KAAwC,GAAG,sBAAiB,GAAG,SAAI;;AAEnF;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA,qEAAqE,qBAAqB,aAAa;;AAEvG;;AAEA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA,yDAAyD;AACzD,GAAG;;AAEH;;;AAGA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;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ACX5qD,wBAAY,EAAE;AADH;AADJ;AAJG;AAxDP;AA7BA,GAAD,CADO;AA7FR,CAAf;;AAkMAopD,MAAM,CAAC2B,QAAP,GAAkB,YAAM;AACtB,MAAMjwD,KAAK,GAAGq9B,MAAM,CAAC6yB,YAAP,CAAoBC,OAApB,CAA4B,aAA5B,CAAd,CADsB,CACoC;;AAC1D,SAAOnwD,KAAK,GAAGA,KAAH,GAAW,MAAvB;AACD,CAHD;;AAKAsuD,MAAM,CAAC8B,QAAP,GAAkB,UAAA7pD,KAAK,EAAI;AACzB82B,QAAM,CAAC6yB,YAAP,CAAoBG,OAApB,CAA4B,aAA5B,EAA2C9pD,KAA3C;AACD,CAFD;;AAIe+nD,qEAAf,E;;;;;;;;;;;AC9OA,6E;;;;;;;;;;;ACAA,wE;;;;;;;;;;;ACAA,sE;;;;;;;;;;;ACAA,4E;;;;;;;;;;;ACAA,4E;;;;;;;;;;;ACAA,mE;;;;;;;;;;;ACAA,sE;;;;;;;;;;;ACAA,+D;;;;;;;;;;;ACAA,2D;;;;;;;;;;;ACAA,sE;;;;;;;;;;;ACAA,gE;;;;;;;;;;;ACAA,+E;;;;;;;;;;;ACAA,iF;;;;;;;;;;;ACAA,qE;;;;;;;;;;;ACAA,6E;;;;;;;;;;;ACAA,yE;;;;;;;;;;;ACAA,8D;;;;;;;;;;;ACAA,uD;;;;;;;;;;;ACAA,4C;;;;;;;;;;;ACAA,uD;;;;;;;;;;;ACAA,8C;;;;;;;;;;;ACAA,+C;;;;;;;;;;;ACAA,8C;;;;;;;;;;;ACAA,8C;;;;;;;;;;;ACAA,0D;;;;;;;;;;;ACAA,qD;;;;;;;;;;;ACAA,uD;;;;;;;;;;;ACAA,mD;;;;;;;;;;;ACAA,uD;;;;;;;;;;;ACAA,sD;;;;;;;;;;;ACAA,qD;;;;;;;;;;;ACAA,0D;;;;;;;;;;;ACAA,+D;;;;;;;;;;;ACAA,6D;;;;;;;;;;;ACAA,mD;;;;;;;;;;;ACAA,yD;;;;;;;;;;;ACAA,oD;;;;;;;;;;;ACAA,6D;;;;;;;;;;;ACAA,wD;;;;;;;;;;;ACAA,yD;;;;;;;;;;;ACAA,2D;;;;;;;;;;;ACAA,mD;;;;;;;;;;;ACAA,uD;;;;;;;;;;;ACAA,oD;;;;;;;;;;;ACAA,qD;;;;;;;;;;;ACAA,qD;;;;;;;;;;;ACAA,kD;;;;;;;;;;;ACAA,wD;;;;;;;;;;;ACAA,mD;;;;;;;;;;;ACAA,wD;;;;;;;;;;;ACAA,yD;;;;;;;;;;;ACAA,qD;;;;;;;;;;;ACAA,qD;;;;;;;;;;;ACAA,sE;;;;;;;;;;;ACAA,oD;;;;;;;;;;;ACAA,mD;;;;;;;;;;;ACAA,sD;;;;;;;;;;;ACAA,6D;;;;;;;;;;;ACAA,qD;;;;;;;;;;;ACAA,2D;;;;;;;;;;;ACAA,4D;;;;;;;;;;;ACAA,qD;;;;;;;;;;;ACAA,qD;;;;;;;;;;;ACAA,6D;;;;;;;;;;;ACAA,oD;;;;;;;;;;;ACAA,0D;;;;;;;;;;;ACAA,0D;;;;;;;;;;;ACAA,yD;;;;;;;;;;;ACAA,qD;;;;;;;;;;;ACAA,wD;;;;;;;;;;;ACAA,4D;;;;;;;;;;;ACAA,sD;;;;;;;;;;;ACAA,uD;;;;;;;;;;;ACAA,sD;;;;;;;;;;;ACAA,wD;;;;;;;;;;;ACAA,qD;;;;;;;;;;;ACAA,0D;;;;;;;;;;;ACAA,iD;;;;;;;;;;;ACAA,iC;;;;;;;;;;;ACAA,mC;;;;;;;;;;;ACAA,iD;;;;;;;;;;;ACAA,8C;;;;;;;;;;;ACAA,uC;;;;;;;;;;;ACAA,2C;;;;;;;;;;;ACAA,2C;;;;;;;;;;;ACAA,2C;;;;;;;;;;;ACAA,kC;;;;;;;;;;;ACAA,4C;;;;;;;;;;;ACAA,uC;;;;;;;;;;;ACAA,kC;;;;;;;;;;;ACAA,kC;;;;;;;;;;;ACAA,sC;;;;;;;;;;;ACAA,kD;;;;;;;;;;;ACAA,8C;;;;;;;;;;;ACAA,8C","file":"dist/index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"MovaiReact\"] = factory();\n\telse\n\t\troot[\"MovaiReact\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./index.js\");\n","import Button from \"./src/Components/Button\";\nimport AbstractModal from \"./src/Components/Modal/AbstractModal\";\nimport ConfirmAlertModal from \"./src/Components/Modal/ConfirmAlertModal\";\nimport Drawer from \"./src/Components/Drawer\";\nimport Collapse from \"./src/Components/Collapse\";\nimport VerticalBar from \"./src/Components/VerticalBar\";\nimport ContextMenu from \"./src/Components/ContextMenu\";\nimport Table from \"./src/Components/Table\";\nimport Tabs from \"./src/Components/Tabs\";\nimport Text from \"./src/Components/Text\";\nimport Toggle from \"./src/Components/Toggle\";\nimport SearchInput from \"./src/Components/SearchInput\";\nimport Breadcrumb from \"./src/Components/Breadcrumb\";\nimport SceneViewer from \"./src/Components/Viewer/SceneViewer\";\nimport Select from \"./src/Components/Select\";\nimport { snackbar } from \"./src/Components/Snackbar/Snackbar\";\nimport Themes from \"./src/styles/Themes\";\nimport Style from \"./src/styles/Style\";\nimport Logs from \"./src/Components/Logs/Logs\";\nimport LoginForm from \"./src/Components/LoginForm/LoginForm\";\nimport ProfileMenu from \"./src/Components/ProfileMenu\";\n\nexport {\n  Button,\n  AbstractModal,\n  ConfirmAlertModal,\n  Drawer,\n  Collapse,\n  VerticalBar,\n  ContextMenu,\n  Table,\n  Tabs,\n  Text,\n  Themes,\n  Toggle,\n  SearchInput,\n  Breadcrumb,\n  SceneViewer,\n  Select,\n  snackbar,\n  Style,\n  Logs,\n  LoginForm,\n  ProfileMenu,\n};\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".flow-action {\\n  display: flex;\\n  background: transparent;\\n  width: 35px;\\n  height: 35px;\\n  margin: 6px;\\n  border-radius: 50%;\\n  justify-content: center;\\n  align-items: center;\\n  transition: background-color 0.5s;\\n}\\n\\n.flow-action:hover {\\n  background: rgba(11, 106, 138, 0.2);\\n  cursor: pointer;\\n}\\n\\n.robot-logs-container {\\n  display: flex;\\n  flex-direction: column;\\n  height: 1px;\\n  flex-grow: 1;\\n}\\n\\n.tree-grow-overflow {\\n  flex-grow: 0.5;\\n  overflow-y: auto;\\n  min-height: 0;\\n  height: 100%;\\n}\\n\\n.logs-grow-overflow {\\n  flex-grow: 1;\\n  overflow-y: auto;\\n  min-height: 0;\\n  height: 100%;\\n}\\n\\n.saving {\\n  /* font-size: 40px; */\\n  margin: 0;\\n}\\n\\n.saving span {\\n  font-size: 15px;\\n  animation-name: blink;\\n  animation-duration: 1.4s;\\n  animation-iteration-count: infinite;\\n  animation-fill-mode: both;\\n}\\n\\n.saving span:nth-child(2) {\\n  animation-delay: 0.2s;\\n}\\n\\n.saving span:nth-child(3) {\\n  animation-delay: 0.4s;\\n}\\n\\n@keyframes blink {\\n  0% {\\n    opacity: 0.2;\\n  }\\n  20% {\\n    opacity: 1;\\n  }\\n  100% {\\n    opacity: 0.2;\\n  }\\n}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"body.react-confirm-alert-body-element {\\n  overflow: hidden;\\n}\\n\\n.react-confirm-alert-blur {\\n  filter: url(#gaussian-blur);\\n  filter: blur(2px);\\n  -webkit-filter: blur(2px);\\n}\\n\\n.react-confirm-alert-overlay {\\n  position: fixed;\\n  top: calc(100vh - 300px);\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n  z-index: 99;\\n  display: -webkit-flex;\\n  display: -moz-flex;\\n  display: -ms-flex;\\n  display: -o-flex;\\n  display: flex;\\n  justify-content: flex-start;\\n  -ms-align-items: center;\\n  align-items: flex-end;\\n  opacity: 1;\\n}\\n\\n.react-confirm-alert-body {\\n  width: 400px;\\n  padding: 30px;\\n}\\n\\n.react-confirm-alert-svg {\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n}\\n\\n.react-confirm-alert-body > h1 {\\n  margin-top: 0;\\n}\\n\\n.react-confirm-alert-body > h3 {\\n  margin: 0;\\n  font-size: 16px;\\n}\\n\\n.react-confirm-alert-button-group {\\n  display: -webkit-flex;\\n  display: -moz-flex;\\n  display: -ms-flex;\\n  display: -o-flex;\\n  display: flex;\\n  justify-content: flex-start;\\n  margin-top: 20px;\\n}\\n\\n.react-confirm-alert-button-group > button {\\n  outline: none;\\n  background: #333;\\n  border: none;\\n  display: inline-block;\\n  padding: 6px 18px;\\n  color: #eee;\\n  margin-right: 10px;\\n  border-radius: 5px;\\n  font-size: 12px;\\n  cursor: pointer;\\n}\\n\\n.icon-container {\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n}\\n\\n.icon-container:hover {\\n  cursor: pointer;\\n}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\n// eslint-disable-next-line func-names\nmodule.exports = function (useSourceMap) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item, useSourceMap);\n\n      if (item[2]) {\n        return \"@media \".concat(item[2], \" {\").concat(content, \"}\");\n      }\n\n      return content;\n    }).join('');\n  }; // import a list of modules into the list\n  // eslint-disable-next-line func-names\n\n\n  list.i = function (modules, mediaQuery, dedupe) {\n    if (typeof modules === 'string') {\n      // eslint-disable-next-line no-param-reassign\n      modules = [[null, modules, '']];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var i = 0; i < this.length; i++) {\n        // eslint-disable-next-line prefer-destructuring\n        var id = this[i][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _i = 0; _i < modules.length; _i++) {\n      var item = [].concat(modules[_i]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        // eslint-disable-next-line no-continue\n        continue;\n      }\n\n      if (mediaQuery) {\n        if (!item[2]) {\n          item[2] = mediaQuery;\n        } else {\n          item[2] = \"\".concat(mediaQuery, \" and \").concat(item[2]);\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n  var content = item[1] || ''; // eslint-disable-next-line prefer-destructuring\n\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (useSourceMap && typeof btoa === 'function') {\n    var sourceMapping = toComment(cssMapping);\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot || '').concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n  }\n\n  return [content].join('\\n');\n} // Adapted from convert-source-map (MIT)\n\n\nfunction toComment(sourceMap) {\n  // eslint-disable-next-line no-undef\n  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n  var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n  return \"/*# \".concat(data, \" */\");\n}","\"use strict\";\n\nvar isOldIE = function isOldIE() {\n  var memo;\n  return function memorize() {\n    if (typeof memo === 'undefined') {\n      // Test for IE <= 9 as proposed by Browserhacks\n      // @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n      // Tests for existence of standard globals is to allow style-loader\n      // to operate correctly into non-standard environments\n      // @see https://github.com/webpack-contrib/style-loader/issues/177\n      memo = Boolean(window && document && document.all && !window.atob);\n    }\n\n    return memo;\n  };\n}();\n\nvar getTarget = function getTarget() {\n  var memo = {};\n  return function memorize(target) {\n    if (typeof memo[target] === 'undefined') {\n      var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n      if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n        try {\n          // This will throw an exception if access to iframe is blocked\n          // due to cross-origin restrictions\n          styleTarget = styleTarget.contentDocument.head;\n        } catch (e) {\n          // istanbul ignore next\n          styleTarget = null;\n        }\n      }\n\n      memo[target] = styleTarget;\n    }\n\n    return memo[target];\n  };\n}();\n\nvar stylesInDom = [];\n\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n\n  for (var i = 0; i < stylesInDom.length; i++) {\n    if (stylesInDom[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var index = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3]\n    };\n\n    if (index !== -1) {\n      stylesInDom[index].references++;\n      stylesInDom[index].updater(obj);\n    } else {\n      stylesInDom.push({\n        identifier: identifier,\n        updater: addStyle(obj, options),\n        references: 1\n      });\n    }\n\n    identifiers.push(identifier);\n  }\n\n  return identifiers;\n}\n\nfunction insertStyleElement(options) {\n  var style = document.createElement('style');\n  var attributes = options.attributes || {};\n\n  if (typeof attributes.nonce === 'undefined') {\n    var nonce = typeof __webpack_nonce__ !== 'undefined' ? __webpack_nonce__ : null;\n\n    if (nonce) {\n      attributes.nonce = nonce;\n    }\n  }\n\n  Object.keys(attributes).forEach(function (key) {\n    style.setAttribute(key, attributes[key]);\n  });\n\n  if (typeof options.insert === 'function') {\n    options.insert(style);\n  } else {\n    var target = getTarget(options.insert || 'head');\n\n    if (!target) {\n      throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n    }\n\n    target.appendChild(style);\n  }\n\n  return style;\n}\n\nfunction removeStyleElement(style) {\n  // istanbul ignore if\n  if (style.parentNode === null) {\n    return false;\n  }\n\n  style.parentNode.removeChild(style);\n}\n/* istanbul ignore next  */\n\n\nvar replaceText = function replaceText() {\n  var textStore = [];\n  return function replace(index, replacement) {\n    textStore[index] = replacement;\n    return textStore.filter(Boolean).join('\\n');\n  };\n}();\n\nfunction applyToSingletonTag(style, index, remove, obj) {\n  var css = remove ? '' : obj.media ? \"@media \".concat(obj.media, \" {\").concat(obj.css, \"}\") : obj.css; // For old IE\n\n  /* istanbul ignore if  */\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = replaceText(index, css);\n  } else {\n    var cssNode = document.createTextNode(css);\n    var childNodes = style.childNodes;\n\n    if (childNodes[index]) {\n      style.removeChild(childNodes[index]);\n    }\n\n    if (childNodes.length) {\n      style.insertBefore(cssNode, childNodes[index]);\n    } else {\n      style.appendChild(cssNode);\n    }\n  }\n}\n\nfunction applyToTag(style, options, obj) {\n  var css = obj.css;\n  var media = obj.media;\n  var sourceMap = obj.sourceMap;\n\n  if (media) {\n    style.setAttribute('media', media);\n  } else {\n    style.removeAttribute('media');\n  }\n\n  if (sourceMap && typeof btoa !== 'undefined') {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    while (style.firstChild) {\n      style.removeChild(style.firstChild);\n    }\n\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar singleton = null;\nvar singletonCounter = 0;\n\nfunction addStyle(obj, options) {\n  var style;\n  var update;\n  var remove;\n\n  if (options.singleton) {\n    var styleIndex = singletonCounter++;\n    style = singleton || (singleton = insertStyleElement(options));\n    update = applyToSingletonTag.bind(null, style, styleIndex, false);\n    remove = applyToSingletonTag.bind(null, style, styleIndex, true);\n  } else {\n    style = insertStyleElement(options);\n    update = applyToTag.bind(null, style, options);\n\n    remove = function remove() {\n      removeStyleElement(style);\n    };\n  }\n\n  update(obj);\n  return function updateStyle(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {\n        return;\n      }\n\n      update(obj = newObj);\n    } else {\n      remove();\n    }\n  };\n}\n\nmodule.exports = function (list, options) {\n  options = options || {}; // Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n  // tags it will allow on a page\n\n  if (!options.singleton && typeof options.singleton !== 'boolean') {\n    options.singleton = isOldIE();\n  }\n\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n\n    if (Object.prototype.toString.call(newList) !== '[object Array]') {\n      return;\n    }\n\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDom[index].references--;\n    }\n\n    var newLastIdentifiers = modulesToDom(newList, options);\n\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n\n      var _index = getIndexByIdentifier(_identifier);\n\n      if (stylesInDom[_index].references === 0) {\n        stylesInDom[_index].updater();\n\n        stylesInDom.splice(_index, 1);\n      }\n    }\n\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Breadcrumbs from \"@material-ui/core/Breadcrumbs\";\nimport NavigateNextIcon from \"@material-ui/icons/NavigateNext\";\nimport Typography from \"@material-ui/core/Typography\";\nimport PropTypes from \"prop-types\";\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    \"& > * + *\": {\n      marginTop: theme.spacing(2)\n    }\n  },\n  link: {\n    fontSize: \"24px\",\n    fontWeight: 800,\n    fontFamily: \"Open Sans\",\n    \"&:hover\": {\n      cursor: \"pointer\",\n      textDecoration: \"underline\"\n    }\n  },\n  lastLabel: {\n    fontSize: \"24px\",\n    fontWeight: 800,\n    fontFamily: \"Open Sans\"\n  }\n}));\n\nconst Breadcrumb = props => {\n  const classes = useStyles();\n  return (\n    <div className={classes.root}>\n      <Breadcrumbs\n        separator={<NavigateNextIcon fontSize=\"small\" />}\n        aria-label=\"breadcrumb\"\n        style={props.style}\n      >\n        {props.pathList.map((element, index) => {\n          if (props.pathList.length - 1 !== index) {\n            return (\n              <Typography\n                key={index}\n                color=\"primary\"\n                variant=\"inherit\"\n                className={classes.link}\n                onClick={element.function}\n              >\n                {element.label}\n              </Typography>\n            );\n          }\n        })}\n        <Typography color=\"textPrimary\" className={classes.lastLabel}>\n          {props.pathList[props.pathList.length - 1].label}\n        </Typography>\n      </Breadcrumbs>\n    </div>\n  );\n};\n\nBreadcrumb.propTypes = {\n  pathList: PropTypes.array\n};\n\nBreadcrumb.defaultProps = {\n  pathList: [\n    { label: \"Mov.ai\", function: () => console.log(\"pth1/\") },\n    { label: \"User\", function: () => console.log(\"path1/path2\") },\n    { label: \"John Doe\" }\n  ]\n};\n\nexport default Breadcrumb;\n","import React from \"react\";\nimport MaterialButton from \"@material-ui/core/Button\";\nimport PropTypes from \"prop-types\";\n\nconst Button = props => {\n  return (\n    <MaterialButton\n      className={props.className}\n      style={props.style}\n      onClick={props.onClick}\n      color={props.color}\n      variant={props.variant}\n      size={props.size}\n      startIcon={props.startIcon}\n      disabled={props.disabled}\n    >\n      {props.children}\n    </MaterialButton>\n  );\n};\n\nButton.propTypes = {\n  style: PropTypes.object,\n  onClick: PropTypes.func,\n  color: PropTypes.string,\n  variant: PropTypes.string.isRequired,\n  size: PropTypes.string,\n  startIcon: PropTypes.element,\n  children: PropTypes.node.isRequired,\n  disabled: PropTypes.bool\n};\nButton.defaultProps = {\n  style: {},\n  onClick: () => console.log(\"Click MOV.AI button\"),\n  color: \"default\", // default, inherit, primary or secondary\n  variant: \"contained\", // text, outlined, contained\n  size: \"medium\", // small, medium, large\n  startIcon: undefined,\n  children: <div></div>,\n  disabled: false\n};\n\nexport default Button;\n","import React from \"react\";\nimport ChevronRightIcon from \"@material-ui/icons/ChevronRight\";\nimport ExpandMore from \"@material-ui/icons/ExpandMore\";\nimport PropTypes from \"prop-types\";\nimport MaterialCollapse from \"@material-ui/core/Collapse\";\nimport { Divider, ListItem, List } from \"@material-ui/core\";\n\nconst Collapse = props => {\n  const [open, setOpen] = React.useState(props.open);\n\n  React.useEffect(() => {\n    if (props.open !== open) {\n      setOpen(props.open);\n    }\n  }, [props.open]);\n\n  const handleClickFactory = clickLambda => () => {\n    setOpen(!open);\n    clickLambda();\n  };\n\n  return (\n    <List>\n      <ListItem button onClick={handleClickFactory(props.onClick)}>\n        {open ? (\n          <ExpandMore style={{ ...props.iconStyle }} />\n        ) : (\n          <ChevronRightIcon style={{ ...props.iconStyle }} />\n        )}\n        <div style={{ width: \"100%\" }}>{props.item}</div>\n      </ListItem>\n      {props.divided ? <Divider /> : []}\n      <MaterialCollapse\n        className={props.className}\n        style={props.style}\n        in={open}\n      >\n        {props.children}\n      </MaterialCollapse>\n    </List>\n  );\n};\n\nCollapse.propTypes = {\n  item: PropTypes.object,\n  onClick: PropTypes.func,\n  open: PropTypes.bool,\n  divided: PropTypes.bool,\n  iconStyle: PropTypes.object\n};\n\nCollapse.defaultProps = {\n  item: <div></div>,\n  onClick: () => {},\n  open: false,\n  divided: false,\n  style: {},\n  iconStyle: {}\n};\n\nexport default Collapse;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Menu from \"@material-ui/core/Menu\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\n\nconst ContextMenu = props => {\n  const [anchorEl, setAnchorEl] = React.useState(null);\n\n  const handleClick = event => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  return (\n    <div>\n      {React.cloneElement(props.element, {\n        onClick: evt => {\n          if (props.element.props.onClick !== undefined) {\n            props.element.props.onClick(); // If user defined a onClick\n          }\n          handleClick(evt); // opens the contextMenu\n        }\n      })}\n      <Menu\n        id=\"simple-menu\"\n        anchorEl={anchorEl}\n        keepMounted\n        open={Boolean(anchorEl)}\n        onClose={handleClose}\n      >\n        {props.menuList.reduce((result, item, index) => {\n          if (item && typeof item !== \"function\") {\n            result.push(\n              <MenuItem\n                onClick={() => {\n                  item.onClick();\n                  if (item.onClose || item.onClose === undefined) {\n                    handleClose();\n                  }\n                }}\n                key={index}\n              >\n                {item.element}\n              </MenuItem>\n            );\n          }\n          return result;\n        }, [])}\n      </Menu>\n    </div>\n  );\n};\n\nContextMenu.propTypes = {\n  element: PropTypes.node.isRequired,\n  navigationList: PropTypes.array,\n  lowerElement: PropTypes.node.isRequired,\n  width: PropTypes.string,\n  backgroundColor: PropTypes.string\n};\nContextMenu.defaultProps = {\n  element: <div>Ahaha</div>,\n  menuList: [\n    {\n      onClick: () => console.log(\"clicked 1\"),\n      element: \"Profile\",\n      onClose: true\n    }\n  ],\n  lowerElement: <div></div>,\n  width: \"68px\",\n  backgroundColor: \"#424242\"\n};\n\nexport default ContextMenu;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport MaterialDrawer from \"@material-ui/core/Drawer\";\n\nconst Drawer = props => {\n  return (\n    <MaterialDrawer\n      style={props.style}\n      anchor={props.anchor}\n      open={props.open}\n      onClose={props.onClose}\n    >\n      {props.children}\n    </MaterialDrawer>\n  );\n};\n\nDrawer.propTypes = {\n  style: PropTypes.object,\n  anchor: PropTypes.string,\n  open: PropTypes.bool,\n  children: PropTypes.object\n};\n\nDrawer.defaultProps = {\n  style: {},\n  anchor: \"left\",\n  open: false,\n  children: <div></div>\n};\n\nDrawer.ANCHOR = { left: \"left\", right: \"right\", top: \"top\", bottom: \"bottom\" };\n\nexport default Drawer;\n","import React, { Component } from \"react\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Button from \"@material-ui/core/Button\";\nimport Grid from \"@material-ui/core/Grid\";\nimport defaultLogo from \"./movai_red.svg\";\nimport Paper from \"@material-ui/core/Paper\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport FormHelperText from \"@material-ui/core/FormHelperText\";\nimport Input from \"@material-ui/core/Input\";\nimport InputLabel from \"@material-ui/core/InputLabel\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport { Authentication } from \"mov-fe-lib-core\";\nimport PropTypes from \"prop-types\";\n\nconst styles = theme => ({\n  root: {\n    padding: theme.spacing(4, 4),\n    borderRadius: 10\n  }\n});\n\nclass LoginForm extends Component {\n  state = {\n    username: \"\",\n    password: \"\",\n    remember: false,\n    error: false,\n    errorMessage: \"\"\n  };\n\n  sendCreds = async () => {\n    try {\n      const apiResponse = await Authentication.login(\n        this.state.username,\n        this.state.password,\n        this.state.remember\n      );\n      // If successfully logged in\n      if (!apiResponse.error) {\n        this.props.setLoggedIn(true);\n      } else {\n        // Show the error in red\n        this.setState({\n          error: true,\n          errorMessage: apiResponse.error\n        });\n      }\n    } catch (e) {\n      this.setState({\n        error: true,\n        errorMessage: e\n      });\n    }\n  };\n\n  render() {\n    const { classes, logo } = this.props;\n\n    return (\n      <Grid\n        style={{ paddingTop: \"5%\" }}\n        container\n        direction=\"column\"\n        alignItems=\"center\"\n        justify=\"space-evenly\"\n      >\n        <Paper elevation={10} className={classes.root}>\n          <Grid item>\n            <img\n              src={logo ? logo : defaultLogo}\n              className=\"center\"\n              alt=\"logo\"\n              style={{\n                display: \"block\",\n                marginLeft: \"auto\",\n                marginRight: \"auto\",\n                width: \"50%\"\n              }}\n            />\n          </Grid>\n          <Grid>\n            <Typography align=\"center\" variant=\"subtitle1\" gutterBottom>\n              <FormControl\n                className={classes.formControl}\n                error={this.state.error}\n              >\n                <InputLabel htmlFor=\"component-error\">Username</InputLabel>\n                <Input\n                  id=\"component-error\"\n                  value={this.state.username}\n                  aria-describedby=\"component-error-text\"\n                  onChange={event =>\n                    this.setState({ username: event.target.value })\n                  }\n                />\n              </FormControl>\n            </Typography>\n          </Grid>\n          <Grid>\n            <Typography align=\"center\" variant=\"subtitle1\" gutterBottom>\n              <FormControl\n                className={classes.formControl}\n                error={this.state.error}\n              >\n                <InputLabel htmlFor=\"component-error\">Password</InputLabel>\n                <Input\n                  id=\"component-error\"\n                  type=\"password\"\n                  value={this.state.password}\n                  aria-describedby=\"component-error-text\"\n                  onChange={event =>\n                    this.setState({ password: event.target.value })\n                  }\n                  onKeyPress={event => {\n                    if (event.key === \"Enter\") {\n                      this.sendCreds();\n                    }\n                  }}\n                />\n                {this.state.error && (\n                  <FormHelperText id=\"component-error-text\">\n                    {this.state.errorMessage}\n                  </FormHelperText>\n                )}\n              </FormControl>\n            </Typography>\n          </Grid>\n          <Grid>\n            <Typography align=\"center\" gutterBottom>\n              <Button onClick={() => this.sendCreds()}>Login</Button>\n            </Typography>\n          </Grid>\n        </Paper>\n      </Grid>\n    );\n  }\n}\n\nLoginForm.propTypes = {\n  logs: PropTypes.any, // expects a svg element\n  setLoggedIn: PropTypes.func\n};\n\nLoginForm.defaultProps = {\n  setLoggedIn: loggedIn => console.log(loggedIn)\n};\n\nexport default withStyles(styles, { withTheme: true })(LoginForm);\n","module.exports = \"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' version='1.0' width='400.000000' height='400.000000' preserveAspectRatio='xMidYMid meet'%3E%3Crect id='backgroundrect' width='100%25' height='100%25' x='0' y='0' fill='none' stroke='none'/%3E %3Cg class='currentLayer' style=''%3E%3Ctitle%3ELayer 1%3C/title%3E%3Cg transform='translate(0,400) scale(0.10000000149011612,-0.10000000149011612) ' fill='%23d31b1b' stroke='none' id='svg_1' class='' fill-opacity='1'%3E %3Cpath d='M1770 3990 c-682 -83 -1271 -501 -1570 -1115 -103 -211 -167 -437 -191 -673 -14 -129 -6 -404 14 -522 85 -495 339 -929 729 -1242 232 -187 539 -332 836 -393 957 -199 1909 314 2272 1224 204 512 180 1116 -64 1606 -115 232 -229 387 -412 565 -296 286 -639 460 -1059 536 -106 19 -443 27 -555 14z m-998 -1105 c3 -3 -23 -48 -57 -99 -113 -172 -182 -338 -226 -546 -32 -149 -33 -448 -1 -593 31 -145 70 -258 134 -387 65 -132 64 -140 -28 -140 -66 0 -100 13 -143 53 -74 70 -71 38 -71 748 0 555 2 642 16 690 43 144 129 236 248 265 54 13 119 18 128 9z m2621 -21 c99 -34 192 -157 216 -288 14 -78 15 -1256 1 -1307 -13 -48 -82 -125 -124 -139 -55 -18 -166 -12 -166 9 0 4 25 57 55 118 195 391 215 839 55 1247 -41 105 -117 247 -176 327 -18 25 -30 49 -26 54 10 11 109 -2 165 -21z m-251 -61 c128 -170 217 -370 265 -594 13 -63 18 -129 18 -264 0 -199 -13 -285 -66 -448 -33 -101 -114 -277 -128 -277 -26 0 -31 80 -32 549 0 267 -4 495 -8 505 -6 16 -20 4 -87 -77 -43 -53 -81 -96 -84 -96 -3 -1 -16 41 -29 92 -27 106 -74 215 -132 304 -32 48 -38 66 -31 80 34 61 243 273 271 273 4 0 23 -21 43 -47z m-2206 15 c52 -39 95 -82 171 -170 l74 -88 -42 -61 c-23 -34 -54 -89 -69 -123 -35 -76 -80 -219 -80 -252 0 -13 -4 -24 -8 -24 -4 0 -43 43 -87 95 -43 52 -83 95 -87 95 -4 0 -8 -224 -9 -497 0 -492 -5 -565 -34 -565 -16 0 -94 166 -130 279 -52 159 -69 294 -62 493 8 230 47 384 147 585 56 112 154 255 174 255 7 0 26 -10 42 -22z m458 -511 l133 -157 -20 -58 c-13 -39 -19 -85 -19 -147 -1 -150 44 -260 151 -365 107 -105 214 -150 361 -150 241 0 443 162 500 399 16 69 8 222 -15 278 l-17 43 132 157 c73 87 136 159 140 161 24 9 119 -186 148 -303 11 -44 22 -104 25 -134 l4 -54 -329 -388 c-343 -405 -362 -424 -466 -455 -101 -31 -258 -12 -341 41 -48 29 -83 69 -607 691 -52 62 -94 121 -94 131 0 52 33 202 60 271 33 86 99 204 112 200 5 -2 68 -74 142 -161z m376 -444 c85 -102 167 -194 182 -204 62 -45 81 -30 292 224 76 92 142 165 146 162 13 -8 20 -110 10 -167 -27 -170 -153 -299 -324 -334 -130 -27 -257 9 -356 102 -61 57 -116 162 -125 239 -8 57 1 165 13 164 4 0 77 -84 162 -186z' id='svg_2' fill='%23d31b1b' fill-opacity='1'/%3E %3C/g%3E%3C/g%3E%3C/svg%3E\"","var api = require(\"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!./Logs.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","import React, { Component } from \"react\";\nimport LogsFilterBar from \"./LogsFilterBar/LogsFilterBar\";\nimport \"./Logs.css\";\nimport { MasterDB } from \"mov-fe-lib-core\";\nimport {\n  getRequestLevels,\n  getRequestTags,\n  getRequestMessage,\n  filterByFromToDates,\n  findsUniqueKey,\n  getJustDateFromServer,\n  getJustTimeFromServer\n} from \"./utils/Utils\";\nimport LogsTable from \"./LogsTable/LogsTable\";\nimport _isEqual from \"lodash/isEqual\";\nimport PropTypes from \"prop-types\";\n\nclass Logs extends Component {\n  state = {\n    selectedRobots: [],\n    levels: [\"INFO\", \"ERROR\"],\n    limit: 10,\n    logsData: [],\n    messageRegex: \"\",\n    selectedFromDate: null,\n    selectedToDate: null,\n    columns: [\"Time\", \"Robot\", \"Message\"],\n    tags: [{ key: 0, label: \"ui\" }],\n    height: 0, //LogsTable height\n    levelsList: [\n      { value: \"INFO\", label: \"Robot Status\" },\n      { value: \"ERROR\", label: \"Alerts\" }\n    ]\n  };\n  logsTimeout = undefined;\n\n  simpleLevelsList = [\n    { value: \"INFO\", label: \"Robot Status\" },\n    { value: \"ERROR\", label: \"Alerts\" }\n  ];\n\n  advancedLevelsList = [\n    { value: \"INFO\", label: \"Info\" },\n    { value: \"WARNING\", label: \"Warnings\" },\n    { value: \"DEBUG\", label: \"Debug\" },\n    { value: \"ERROR\", label: \"Error\" },\n    { value: \"CRITICAL\", label: \"Critical\" }\n  ];\n\n  resizeHandler() {\n    const height = this.divElement.clientHeight;\n    this.setState({ height });\n  }\n\n  componentDidMount() {\n    this.setSelectedRobots(\n      this.props.robotsData.map(elem => ({ ...elem, isSelected: true }))\n    );\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (_isEqual(prevProps.robotsData, this.props.robotsData)) return;\n    this.setSelectedRobots(\n      this.props.robotsData.map(elem => ({ ...elem, isSelected: true }))\n    );\n  }\n\n  componentWillUnmount() {\n    if (this.logsTimeout) {\n      clearTimeout(this.logsTimeout);\n    }\n  }\n\n  // This function is responsible to check/unckeck the list of robots\n  updateRobotSelection = robotId => {\n    const selectedRobots = [...this.state.selectedRobots];\n    const updateRobot =\n      selectedRobots[selectedRobots.findIndex(elem => elem.id === robotId)];\n    updateRobot.isSelected = !updateRobot.isSelected;\n    this.setState({ selectedRobots });\n  };\n\n  setSelectedRobots = selectedRobots => {\n    this.setState({ selectedRobots });\n    this.getLogs(selectedRobots);\n  };\n\n  getLogs = async robots => {\n    await Promise.all(\n      robots\n        .filter(robot => robot.robotState !== this.props.robotStates.off) // If robot is offline doesn't bother making the request\n        .filter(robot => robot.isSelected)\n        .map(robot => this.getRobotLogData(robot))\n    ).then(dataArrays => {\n      this.setState(prevState => {\n        const finalArray = dataArrays.reduce((all, dataArray) => {\n          dataArray && dataArray.forEach(data => all.push(data));\n          return all;\n        }, []);\n        this.logsTimeout = setTimeout(\n          this.getLogs,\n          3000,\n          prevState.selectedRobots\n        );\n        return { logsData: finalArray.sort((a, b) => b.time - a.time) };\n      });\n    });\n  };\n\n  getRobotLogData = robotSelected => {\n    return new Promise((re, rej) => {\n      // Failsafe timer to prevent the promise all from hanging\n      const timeoutHandle = setTimeout(() => {\n        console.error(\"MOV.AI: One of the promises reached timeout\");\n        re([]);\n      }, 2000);\n\n      const dynamicURL = `http://${\n        robotSelected.ip\n      }/api/v1/logs/?${getRequestLevels(\n        this.state.levels,\n        this.state.levelsList\n      )}&limit=${this.state.limit}${getRequestTags(\n        this.state.tags\n      )}${getRequestMessage(this.state.messageRegex)}`;\n\n      MasterDB.get(dynamicURL, (res, e) => {\n        if (res === undefined) rej();\n        re(res.data);\n        clearTimeout(timeoutHandle);\n      });\n    }).catch(() => console.log(\"Failed getRobotLogData\"));\n  };\n\n  render() {\n    return (\n      <div\n        style={{\n          width: \"100%\",\n          height: \"100%\",\n          display: \"flex\",\n          flexDirection: \"column\"\n        }}\n      >\n        <div\n          style={{\n            flexGrow: \"1\",\n            height: \"100%\",\n            display: \"flex\",\n            flexDirection: \"column\"\n          }}\n        >\n          <LogsFilterBar\n            selectedRobots={this.state.selectedRobots}\n            updateRobotSelection={this.updateRobotSelection}\n            levels={this.state.levels}\n            levelsList={this.state.levelsList}\n            handleLevels={event => {\n              this.setState({ levels: event.target.value });\n            }}\n            limit={this.state.limit}\n            handleLimit={evt => {\n              if (evt.target.value === \"\") {\n                this.setState({ limit: 0 });\n              } else {\n                this.setState({ limit: evt.target.value });\n              }\n            }}\n            columns={this.state.columns}\n            columnList={this.props.columnList}\n            handleColumns={event => {\n              this.setState({ columns: event.target.value });\n            }}\n            tags={this.state.tags}\n            handleAddTag={tagText => {\n              const { tags } = this.state;\n              // Don't add tag if it's empty or duplicate\n              if (\n                tagText !== \"\" &&\n                tags.findIndex(elem => elem.label === tagText) < 0\n              ) {\n                tags.push({\n                  key: findsUniqueKey(tags, \"key\"),\n                  label: tagText\n                });\n                this.setState({ tags });\n              }\n            }}\n            handleDeleteTag={tagToDelete => {\n              const { tags } = this.state;\n              const filteredTags = tags.filter(\n                tag => tag.key !== tagToDelete.key\n              );\n              this.setState({ tags: filteredTags });\n            }}\n            messageRegex={this.state.messageRegex}\n            handleMessageRegex={text => this.setState({ messageRegex: text })}\n            selectedFromDate={this.state.selectedFromDate}\n            selectedToDate={this.state.selectedToDate}\n            handleDateChange={(newDate, keyToChange) => {\n              this.setState({ [keyToChange]: newDate });\n            }}\n            advancedMode={this.state.advancedMode}\n            handleAdvancedMode={evt => {\n              // Toggle advanced mode, set tag to ui by default and change the levels\n              this.setState({\n                advancedMode: !this.state.advancedMode,\n                levelsList: this.state.advancedMode\n                  ? this.simpleLevelsList\n                  : this.advancedLevelsList,\n                tags: this.state.advancedMode\n                  ? [{ key: 0, label: \"ui\" }]\n                  : this.state.tags\n              });\n            }}\n          ></LogsFilterBar>\n          <div\n            ref={divElement => {\n              this.divElement = divElement;\n            }}\n            style={{\n              flexGrow: 1,\n              overflowY: \"auto\",\n              minHeight: 0,\n              height: \"1px\"\n            }}\n          >\n            <LogsTable\n              columns={this.state.columns}\n              columnList={this.props.columnList}\n              logsData={filterByFromToDates(\n                this.state.logsData,\n                this.state.selectedFromDate,\n                this.state.selectedToDate\n              )}\n              height={this.state.height}\n              levelsList={this.state.levelsList}\n            ></LogsTable>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nLogs.propTypes = {\n  robotsData: PropTypes.array,\n  robotStates: PropTypes.object,\n  columnList: PropTypes.object\n};\nLogs.defaultProps = {\n  robotsData: [\n    {\n      name: \"robot\",\n      id: \"032cf6207ff34ad0a68cc45034f61b41\",\n      timestamp: 1604334778.6494586,\n      robotState: \"okay\",\n      battery: 78,\n      ip: \"127.0.0.1\"\n    },\n    {\n      name: \"robot_test\",\n      id: \"4df900e30cb44adba33ae74bb2596d88\",\n      timestamp: 1603969723.997914,\n      robotState: \"off\",\n      battery: 22,\n      ip: \"127.0.0.1\"\n    }\n  ],\n  robotStates: {\n    error: \"error\",\n    temp: \"temp\",\n    okay: \"okay\",\n    off: \"off\"\n  },\n  columnList: {\n    Date: {\n      label: \"Date\",\n      dataKey: \"time\",\n      width: 100,\n      render: time => getJustDateFromServer(time)\n    },\n    Time: {\n      label: \"Time\",\n      dataKey: \"time\",\n      width: 100,\n      render: time => getJustTimeFromServer(time)\n    },\n    Level: {\n      label: \"Level\",\n      dataKey: \"level\",\n      width: 100\n    },\n    Module: {\n      label: \"Module\",\n      dataKey: \"module\",\n      width: 100\n    },\n    Robot: {\n      label: \"Robot\",\n      dataKey: \"robot\",\n      width: 100\n    },\n    Message: {\n      label: \"Message\",\n      dataKey: \"message\",\n      width: 100\n    }\n  }\n};\n\nexport default Logs;\n","import React, { Component } from \"react\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport Menu from \"@material-ui/core/Menu\";\nimport { Typography } from \"@material-ui/core\";\nimport { fade } from \"@material-ui/core/styles/colorManipulator\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport PropTypes from \"prop-types\";\n\nconst styles = theme => ({\n  button: {\n    margin: theme.spacing(1),\n    color: theme.palette.primary.main,\n    borderColor: theme.palette.primary.main\n  },\n  iconActive: {\n    color: theme.palette.primary.main,\n    borderColor: theme.palette.primary.main,\n    backgroundColor: fade(theme.palette.primary.main, 0.1)\n  },\n  buttonApplyFilters: {\n    background: theme.palette.primary.main,\n    fontFamily: \"Roboto\",\n    fontStyle: \"normal\",\n    fontWeight: \"bold\",\n    fontSize: \"14px\",\n    color: \"#FAFAFA\",\n    margin: \"0px 20px 10px 20px\",\n    \"&:hover\": { background: theme.palette.primary.dark }\n  },\n  icon: {\n    // fontSize: \"18px\",\n    // height: \"21px\",\n    // width: \"15px\",\n    //color: theme.palette.primary.main,\n    \"&:hover\": { cursor: \"pointer\" }\n  },\n  height: { height: \"100%\" },\n  checkbox: { marginLeft: \"10px\" },\n  limitText: {\n    width: \"50px\",\n    margin: theme.spacing(0, 3, 0, 3)\n  }\n});\n\nconst StyledMenu = withStyles(theme => ({\n  paper: {\n    // border: \"1px solid #F0F0F0\",\n    borderRadius: \"8px\",\n    width: \"242px\",\n    height: \"411px\",\n    boxShadow: \"2px 2px 4px rgba(0, 0, 0, 0.25)\"\n  }\n}))(props => (\n  <Menu\n    elevation={0}\n    getContentAnchorEl={null}\n    anchorOrigin={{\n      vertical: \"bottom\",\n      horizontal: \"center\"\n    }}\n    transformOrigin={{\n      vertical: \"top\",\n      horizontal: \"center\"\n    }}\n    autoFocus={false}\n    {...props}\n  />\n));\n\nclass FilterIcon extends Component {\n  state = { anchorEl: null, otherFilters: [] };\n\n  handleClick = event => {\n    this.setState({ anchorEl: event.currentTarget });\n  };\n\n  handleClose = () => {\n    this.setState({\n      anchorEl: null,\n      otherFilters: []\n    });\n  };\n\n  render() {\n    const { classes, t } = this.props;\n    return (\n      <React.Fragment>\n        <IconButton\n          size=\"small\"\n          onClick={this.handleClick}\n          className={this.props.isActive ? classes.iconActive : classes.icon}\n        >\n          {this.props.icon}\n        </IconButton>\n        <StyledMenu\n          id=\"customized-menu\"\n          anchorEl={this.state.anchorEl}\n          open={Boolean(this.state.anchorEl)}\n          onClose={this.handleClose}\n          className={classes.height}\n        >\n          <div\n            style={{\n              display: \"flex\",\n              flexDirection: \"column\",\n              height: \"-webkit-fill-available\"\n            }}\n          >\n            <Typography\n              component=\"div\"\n              style={{\n                padding: \"10px 10px 0px 20px\",\n                display: \"flex\",\n                flexDirection: \"row\"\n              }}\n            >\n              <Typography\n                component=\"div\"\n                style={{\n                  fontSize: \"24px\",\n                  fontFamily: \"Open Sans\",\n                  fontWeight: 500\n                }}\n              >\n                {this.props.title}\n              </Typography>\n              <Typography\n                component=\"div\"\n                style={{\n                  flexGrow: 1\n                }}\n              ></Typography>\n              <Typography\n                component=\"div\"\n                onClick={this.handleClose}\n                className={classes.icon}\n              >\n                <i className=\"fas fa-times\"></i>\n              </Typography>\n            </Typography>\n            <div\n              style={{\n                flexGrow: 1,\n                display: \"flex\",\n                flexDirection: \"column\",\n                margin: \"10px 0px 0px 10px\"\n              }}\n            >\n              {this.props.children}\n            </div>\n          </div>\n        </StyledMenu>\n      </React.Fragment>\n    );\n  }\n}\n\nFilterIcon.propTypes = {\n  isActive: PropTypes.bool,\n  title: PropTypes.string\n};\n\nFilterIcon.defaultProps = {\n  isActive: false,\n  title: \"Filters\"\n};\n\nexport default withStyles(styles, { withTheme: true })(FilterIcon);\n","import React, { memo } from \"react\";\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport SearchIcon from \"@material-ui/icons/Search\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { FormControlLabel, Switch, TextField } from \"@material-ui/core\";\nimport ResetSearch from \"@material-ui/icons/Close\";\nimport FiltersIcon from \"./FiltersIcon/FiltersIcon\";\nimport LabelIcon from \"@material-ui/icons/Label\";\nimport Chip from \"@material-ui/core/Chip\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport TodayIcon from \"@material-ui/icons/Today\";\nimport { Typography } from \"@material-ui/core\";\nimport Input from \"@material-ui/core/Input\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport Select from \"@material-ui/core/Select\";\nimport SettingsIcon from \"@material-ui/icons/Settings\";\nimport Checkbox from \"@material-ui/core/Checkbox\";\nimport {\n  KeyboardDateTimePicker,\n  MuiPickersUtilsProvider\n} from \"@material-ui/pickers\";\nimport DateFnsUtils from \"@date-io/date-fns\";\nimport PropTypes from \"prop-types\";\nimport _isEqual from \"lodash/isEqual\";\nimport _get from \"lodash/get\";\n\nconst useStyles = makeStyles(theme => ({\n  filterBarContainer: {\n    display: \"flex\",\n    flexDirection: \"row\",\n    flexWrap: \"wrap\",\n    padding: 6,\n    backgroundColor: \"#353535\",\n    alignItems: \"center\"\n    // justifyContent: \"space-between\"\n  },\n  input: {\n    flex: 1,\n    paddingLeft: \"10px\",\n    fontSize: \"medium\"\n  },\n  searchText: {\n    minWidth: 150,\n    paddingLeft: theme.spacing(3)\n  },\n  addTagText: {\n    width: \"100%\"\n  },\n  limitText: {\n    width: \"50px\",\n    margin: theme.spacing(0, 3, 0, 3)\n  },\n  toggleContainer: {\n    margin: theme.spacing(2)\n  },\n  datePicker: {\n    width: \"200px\",\n    margin: theme.spacing(0, 3, 0, 3)\n  },\n  tagsContainer: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    padding: theme.spacing(0.5),\n    margin: theme.spacing(0, 3, 0, 3)\n  },\n  tagsList: {\n    marginTop: theme.spacing(3)\n  },\n  chip: {\n    margin: theme.spacing(0.5)\n  },\n  formControl: {\n    margin: theme.spacing(1),\n    minWidth: 120,\n    maxWidth: 300\n  },\n  filtersButton: {\n    display: \"flex\",\n    flexDirection: \"row\"\n  },\n  columnsFilter: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    marginTop: 6\n  },\n  iconButton: {\n    color: \"#0B6A8A\",\n    \"&:hover\": {\n      color: \"#22c7ff\"\n    }\n  }\n}));\n\nconst LogsFilterBar = props => {\n  const classes = useStyles();\n  const [tagText, setTagText] = React.useState(\"\");\n\n  const handleRobotChange = event => {\n    const arrayEvent = event?.target?.value;\n    const selectedId = arrayEvent[arrayEvent.length - 1];\n    props.updateRobotSelection(selectedId);\n  };\n  const getRobotSelector = () => {\n    return (\n      <div>\n        <svg\n          width=\"20\"\n          height=\"18\"\n          viewBox=\"0 0 30 27\"\n          fill=\"none\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n          style={{ paddingTop: \"5px\", paddingRight: \"5px\" }}\n        >\n          <path\n            fillRule=\"evenodd\"\n            clipRule=\"evenodd\"\n            d=\"M16.7753 1.35706L15.9587 2.61119L16.3648 2.87846L18.4001 4.18898L17.1052 6.20016H25.437C26.5487 6.20016 27.45 7.10137 27.45 8.21307V12.8244H28.0955C28.6514 12.8244 29.102 13.275 29.102 13.8308V16.0643C29.102 16.6201 28.6514 17.0707 28.0955 17.0707H27.45V21.2901C27.45 22.4018 26.5487 23.303 25.437 23.303H4.12161C3.00991 23.303 2.1087 22.4017 2.1087 21.29V17.0707H1.42467C0.868819 17.0707 0.418213 16.6201 0.418213 16.0643V13.8308C0.418213 13.275 0.868819 12.8244 1.42467 12.8244H2.1087V8.21307C2.1087 7.10137 3.00991 6.20016 4.12161 6.20016H13.5141L14.8252 4.16395L13.2875 3.15192L13.2966 3.13812L13.2875 3.1322L15.1377 0.290771L16.7753 1.35706ZM24.4306 9.21953H5.12807V20.2836H24.4306V9.21953ZM7.18098 12.1324C6.68518 12.1324 6.28325 12.5343 6.28325 13.0301C6.28325 13.5259 6.68518 13.9278 7.18098 13.9278H9.04635C9.54216 13.9278 9.94409 13.5259 9.94409 13.0301C9.94409 12.5343 9.54216 12.1324 9.04635 12.1324H7.18098ZM20.6901 12.1324C20.1943 12.1324 19.7924 12.5343 19.7924 13.0301C19.7924 13.5259 20.1943 13.9278 20.6901 13.9278H22.5555C23.0513 13.9278 23.4532 13.5259 23.4532 13.0301C23.4532 12.5343 23.0513 12.1324 22.5555 12.1324H20.6901ZM9.17669 17.6512H11.3239V19.253H9.17669V17.6512ZM14.3432 17.6513H12.196V19.253H14.3432V17.6513ZM15.2154 17.6513H17.3626V19.253H15.2154V17.6513ZM20.382 17.6513H18.2348V19.253H20.382V17.6513ZM10.9568 23.69H18.6019V25.7029C18.6019 26.2587 18.1513 26.7093 17.5954 26.7093H11.9632C11.4074 26.7093 10.9568 26.2587 10.9568 25.7029V23.69Z\"\n            fill=\"#9E9E9E\"\n          />\n        </svg>\n        <FormControl className={classes.formControl}>\n          <Select\n            labelId=\"select-label\"\n            id=\"select\"\n            multiple\n            value={props.selectedRobots}\n            onChange={handleRobotChange}\n            renderValue={selected => {\n              const selectedNames = selected\n                .filter(({ isSelected }) => isSelected)\n                .map(({ name }) => name);\n              return selectedNames.length > 2\n                ? [selectedNames[0], selectedNames[1]].join(\" , \") + \"...\"\n                : selectedNames.join(\" , \");\n            }}\n            input={<Input />}\n            MenuProps={MenuProps}\n          >\n            {/* <MenuItem key={`robotList-Default`} value={robotDefault}>\n              Default\n            </MenuItem> */}\n            {props.selectedRobots.map((robot, robotIndex) => {\n              return (\n                <MenuItem key={`robotList-${robotIndex}`} value={robot.id}>\n                  <Checkbox checked={robot.isSelected} />\n                  <ListItemText primary={robot.name} />\n                </MenuItem>\n              );\n            })}\n          </Select>\n        </FormControl>\n      </div>\n    );\n  };\n\n  const getSearchInput = () => {\n    return (\n      <TextField\n        className={classes.searchText}\n        label=\"\"\n        placeholder=\"Search (regex)\"\n        value={props.messageRegex}\n        onChange={evt => props.handleMessageRegex(evt.target.value)}\n        InputProps={{\n          startAdornment: (\n            <InputAdornment style={{ paddingRight: 8 }}>\n              <SearchIcon fontSize=\"small\" />\n            </InputAdornment>\n          ),\n          endAdornment: (\n            <InputAdornment position=\"end\">\n              <IconButton\n                disabled={!props.messageRegex}\n                onClick={() => props.handleMessageRegex(\"\")}\n              >\n                <ResetSearch color=\"inherit\" fontSize=\"small\" />\n              </IconButton>\n            </InputAdornment>\n          )\n        }}\n        size=\"small\"\n      />\n    );\n  };\n\n  const getLevels = () => {\n    return (\n      <div className={classes.toggleContainer}>\n        <FormControl className={classes.formControl}>\n          <Select\n            labelId=\"demo-mutiple-checkbox-label\"\n            id=\"demo-mutiple-checkbox\"\n            multiple\n            value={props.levels}\n            onChange={props.handleLevels}\n            input={<Input />}\n            renderValue={selected => {\n              // selected comes from state, for example [\"ERROR\", \"INFO\"]\n              // but want to show the lables, for example [\"Alerts\", \"State of Robot\"]\n              const labels = props.levelsList\n                .filter(level => selected.includes(level.value))\n                .map(elem => elem.label);\n              return labels.join(\", \");\n            }}\n            MenuProps={MenuProps}\n          >\n            {props.levelsList.map(level => (\n              <MenuItem key={level.value} value={level.value}>\n                <Checkbox checked={props.levels.indexOf(level.value) > -1} />\n                <ListItemText primary={level.label} />\n              </MenuItem>\n            ))}\n          </Select>\n        </FormControl>\n      </div>\n    );\n  };\n\n  const getTags = () => {\n    return (\n      <FiltersIcon\n        icon={<LabelIcon></LabelIcon>}\n        title=\"Tags\"\n        isActive={props.tags.length > 0}\n      >\n        <div className={classes.tagsContainer}>\n          <TextField\n            className={classes.addTagText}\n            value={tagText}\n            onChange={evt => setTagText(evt.target.value)}\n            onKeyUp={event => {\n              // User pressed Enter\n              if (event.keyCode === 13) {\n                props.handleAddTag(tagText);\n              }\n            }}\n            label=\"Add Tag\"\n            // placeholder=\"Tag\"\n            InputProps={{\n              endAdornment: (\n                <InputAdornment>\n                  <IconButton onClick={() => props.handleAddTag(tagText)}>\n                    <AddIcon />\n                  </IconButton>\n                </InputAdornment>\n              )\n            }}\n            size=\"small\"\n          />\n          <div className={classes.tagsList}>\n            {props.tags.map(data => {\n              return (\n                <li key={data.key}>\n                  <Chip\n                    label={data.label}\n                    onDelete={() => props.handleDeleteTag(data)}\n                    className={classes.chip}\n                    size=\"small\"\n                  />\n                </li>\n              );\n            })}\n          </div>\n        </div>\n      </FiltersIcon>\n    );\n  };\n\n  const getTimeFilters = () => {\n    return (\n      <FiltersIcon\n        icon={<TodayIcon></TodayIcon>}\n        title={props.t(\"Date Range\")}\n        isActive={\n          props.selectedFromDate !== null || props.selectedToDate !== null\n        }\n      >\n        {/* From -> To Date */}\n        <MuiPickersUtilsProvider utils={DateFnsUtils}>\n          <KeyboardDateTimePicker\n            key=\"time-picker\"\n            className={classes.datePicker}\n            size=\"small\"\n            variant=\"inline\"\n            ampm={false}\n            label={props.t(\"From date\")}\n            value={props.selectedFromDate}\n            onChange={newDate =>\n              props.handleDateChange(newDate, \"selectedFromDate\")\n            }\n            onError={console.log}\n            format=\"yyyy/MM/dd HH:mm\"\n          />\n          <KeyboardDateTimePicker\n            key=\"time-picker2\"\n            className={classes.datePicker}\n            size=\"small\"\n            variant=\"inline\"\n            ampm={false}\n            label={props.t(\"To date\")}\n            value={props.selectedToDate}\n            onChange={newDate =>\n              props.handleDateChange(newDate, \"selectedToDate\")\n            }\n            onError={console.log}\n            format=\"yyyy/MM/dd HH:mm\"\n          />\n        </MuiPickersUtilsProvider>\n      </FiltersIcon>\n    );\n  };\n\n  const getSettings = () => {\n    return (\n      <FiltersIcon\n        icon={<SettingsIcon></SettingsIcon>}\n        title={props.t(\"Configuration\")}\n      >\n        {/* Advanced/Simple Mode */}\n        <FormControlLabel\n          control={\n            <Switch\n              checked={props.advancedMode}\n              onChange={props.handleAdvancedMode}\n            />\n          }\n          label={props.advancedMode ? \"Advanced\" : \"Simple\"}\n        />\n        <div className={classes.filtersButton}>\n          {/* Limit Input */}\n          <Typography\n            component=\"div\"\n            style={{\n              fontSize: \"1rem\",\n              fontFamily: \"Open Sans\",\n              fontWeight: 500\n            }}\n          >\n            {`${props.t(\"Limit p/Robot\")}:`}\n          </Typography>\n          <TextField\n            value={props.limit}\n            onChange={props.handleLimit}\n            className={classes.limitText}\n            id=\"outlined-number\"\n            // label=\"limit\"\n            placeholder={props.t(\"limit\")}\n            type=\"number\"\n            InputLabelProps={{\n              shrink: true\n            }}\n            // variant=\"outlined\"\n            size=\"small\"\n          />\n        </div>\n        <div className={classes.columnsFilter}>\n          {/* Limit Input */}\n          <Typography\n            component=\"div\"\n            style={{\n              fontSize: \"1rem\",\n              fontFamily: \"Open Sans\",\n              fontWeight: 500\n            }}\n          >\n            {`${props.t(\"Columns\")}:`}\n          </Typography>\n          <FormControl className={classes.formControl}>\n            <Select\n              labelId=\"demo-mutiple-checkbox-label\"\n              id=\"demo-mutiple-checkbox\"\n              multiple\n              value={props.columns}\n              onChange={props.handleColumns}\n              input={<Input />}\n              renderValue={selected =>\n                selected\n                  .map(elem => _get(props, `columnList[${elem}].label`, \"\"))\n                  .join(`, `)\n              }\n              MenuProps={MenuProps}\n            >\n              {Object.keys(props.columnList).map((column, index) => {\n                return (\n                  <MenuItem key={index} value={column}>\n                    <Checkbox checked={props.columns.indexOf(column) > -1} />\n                    <ListItemText primary={props.columnList[column].label} />\n                  </MenuItem>\n                );\n              })}\n            </Select>\n          </FormControl>\n        </div>\n      </FiltersIcon>\n    );\n  };\n\n  return (\n    <div className={classes.filterBarContainer}>\n      {getRobotSelector()}\n      {/* Search Input */}\n      {getSearchInput()}\n      {/* Toggle: INFO, DEBUG, ERROR, CRITICAL */}\n      {getLevels()}\n      {/* Tags */}\n      {props.advancedMode && getTags()}\n      {getTimeFilters()}\n      <div style={{ flexGrow: 1 }}></div>\n      {getSettings()}\n    </div>\n  );\n};\n\nconst ITEM_HEIGHT = 48;\nconst ITEM_PADDING_TOP = 8;\nconst MenuProps = {\n  PaperProps: {\n    style: {\n      maxHeight: ITEM_HEIGHT * 4.5 + ITEM_PADDING_TOP,\n      width: 250\n    }\n  },\n  getContentAnchorEl: null\n};\n\nLogsFilterBar.propTypes = {\n  levels: PropTypes.array,\n  levelsList: PropTypes.array,\n  handleLevels: PropTypes.func,\n  limit: PropTypes.number,\n  handleLimit: PropTypes.func,\n  columns: PropTypes.array,\n  columnList: PropTypes.object,\n  handleColumns: PropTypes.func,\n  handleDeleteTag: PropTypes.func,\n  messageRegex: PropTypes.string,\n  handleMessageRegex: PropTypes.func,\n  selectedFromDate: PropTypes.string,\n  selectToDate: PropTypes.string,\n  handleDateChange: PropTypes.func,\n  selectedRobots: PropTypes.array,\n  updateRobotSelection: PropTypes.func,\n  advancedMode: PropTypes.bool,\n  handleAdvancedMode: PropTypes.func,\n  t: PropTypes.func\n};\n\nLogsFilterBar.defaultProps = {\n  levels: [],\n  levelsList: [],\n  handleLevels: () => {},\n  limit: 1,\n  handleLimit: () => {},\n  columns: [],\n  columnList: {},\n  handleColumns: () => {},\n  handleDeleteTag: () => {},\n  messageRegex: \"\",\n  handleMessageRegex: () => {},\n  selectedFromDate: \"\",\n  selectToDate: \"\",\n  handleDateChange: () => {},\n  selectedRobots: [],\n  updateRobotSelection: () => {},\n  advancedMode: false,\n  handleAdvancedMode: () => {},\n  t: string => string\n};\n\n//The function returns true when the compared props equal, preventing the component from re-rendering\nfunction arePropsEqual(prevProps, nextProps) {\n  return _isEqual(prevProps, nextProps);\n}\n\nexport default memo(LogsFilterBar, arePropsEqual);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport clsx from \"clsx\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport { AutoSizer, Column, Table } from \"react-virtualized\";\nimport { colorCoding } from \"../utils/Utils\";\n\nconst styles = theme => ({\n  flexContainer: {\n    display: \"flex\",\n    alignItems: \"center\",\n    boxSizing: \"border-box\"\n  },\n  table: {\n    // temporary right-to-left patch, waiting for\n    // // https://github.com/bvaughn/react-virtualized/issues/454\n    \"& .ReactVirtualized__Table__headerRow\": {\n      flip: false,\n      paddingRight: theme.direction === \"rtl\" ? \"0 !important\" : undefined\n    }\n  },\n  tableRow: {\n    cursor: \"pointer\"\n  },\n  tableRowHover: {\n    \"&:hover\": {\n      backgroundColor: theme.palette.grey[200]\n    }\n  },\n  tableCell: {\n    flexGrow: 1\n  },\n  flexColumn: {\n    flex: 1,\n    alignItems: \"center\"\n  },\n  noClick: {\n    cursor: \"initial\"\n  },\n  ...colorCoding\n});\n\nclass MuiVirtualizedTable extends React.PureComponent {\n  static defaultProps = {\n    headerHeight: 48,\n    rowHeight: 48\n  };\n\n  getRowClassName = ({ index }) => {\n    const { classes, onRowClick, data } = this.props;\n    const rowData = data[index];\n    return clsx(\n      classes.tableRow,\n      classes.flexContainer,\n      index !== -1 && classes[rowData.level],\n      {\n        [classes.tableRowHover]: index !== -1 && onRowClick != null\n      }\n    );\n  };\n\n  cellRenderer = render => ({ cellData, columnIndex }) => {\n    const { columns, classes, rowHeight, onRowClick } = this.props;\n    return (\n      <TableCell\n        component=\"div\"\n        className={clsx(classes.tableCell, classes.flexContainer, {\n          [classes.noClick]: onRowClick == null\n        })}\n        variant=\"body\"\n        style={{ height: rowHeight }}\n        align={\n          (columnIndex != null && columns[columnIndex].numeric) || false\n            ? \"right\"\n            : \"left\"\n        }\n      >\n        {render ? render(cellData) : cellData}\n      </TableCell>\n    );\n  };\n\n  headerRenderer = ({ label, columnIndex }) => {\n    const { headerHeight, columns, classes } = this.props;\n\n    return (\n      <TableCell\n        component=\"div\"\n        className={clsx(\n          classes.tableCell,\n          classes.flexContainer,\n          classes.noClick\n        )}\n        variant=\"head\"\n        style={{ height: headerHeight }}\n        align={columns[columnIndex].numeric || false ? \"right\" : \"left\"}\n      >\n        <span>{label}</span>\n      </TableCell>\n    );\n  };\n\n  render() {\n    const {\n      classes,\n      columns,\n      rowHeight,\n      headerHeight,\n      ...tableProps\n    } = this.props;\n    return (\n      <AutoSizer>\n        {({ height, width }) => (\n          <Table\n            height={height}\n            width={width}\n            rowHeight={rowHeight}\n            gridStyle={{\n              direction: \"inherit\"\n            }}\n            headerHeight={headerHeight}\n            className={classes.table}\n            {...tableProps}\n            rowClassName={this.getRowClassName}\n          >\n            {columns.map(({ dataKey, render, ...other }, index) => {\n              return (\n                <Column\n                  key={dataKey}\n                  headerRenderer={headerProps => {\n                    return this.headerRenderer({\n                      ...headerProps,\n                      columnIndex: index\n                    });\n                  }}\n                  flexGrow={dataKey === \"message\" ? 1 : undefined}\n                  className={classes.flexContainer}\n                  cellRenderer={this.cellRenderer(render)}\n                  dataKey={dataKey}\n                  {...other}\n                />\n              );\n            })}\n          </Table>\n        )}\n      </AutoSizer>\n    );\n  }\n}\n\nMuiVirtualizedTable.propTypes = {\n  classes: PropTypes.object.isRequired,\n  columns: PropTypes.arrayOf(\n    PropTypes.shape({\n      dataKey: PropTypes.string.isRequired,\n      label: PropTypes.string.isRequired,\n      numeric: PropTypes.bool,\n      width: PropTypes.number.isRequired\n    })\n  ).isRequired,\n  headerHeight: PropTypes.number,\n  onRowClick: PropTypes.func,\n  rowHeight: PropTypes.number\n};\n\nconst VirtualizedTable = withStyles(styles)(MuiVirtualizedTable);\n\nexport default function LogsTable(props) {\n  return (\n    <VirtualizedTable\n      rowCount={props.logsData.length}\n      rowGetter={({ index }) => props.logsData[index]}\n      data={props.logsData}\n      columns={props.columns.map(elem => props.columnList[elem])}\n    />\n  );\n}\n\nLogsTable.propTypes = {\n  columns: PropTypes.array,\n  columnList: PropTypes.object,\n  logsData: PropTypes.array,\n  height: PropTypes.number\n};\n\nLogsTable.defaultProps = {\n  columns: [],\n  columnList: {},\n  logsData: [],\n  height: 10\n};\n","import React from \"react\";\nimport _isEmpty from \"lodash/isEmpty\";\n\n// export const levels = [\n//   { value: \"INFO\", label: i18n.t(\"Robot Status\") },\n//   // { value: \"WARNING\", label: \"Warnings\" },\n//   // { value: \"DEBUG\", label: \"Debug\" },\n//   { value: \"ERROR\", label: i18n.t(\"Alerts\") }\n//   // { value: \"CRITICAL\", label: \"Critical\" }\n// ];\n\nexport const colorCoding = {\n  INFO: {\n    backgroundColor: \"rgba(33, 150, 243, 0.1)\",\n    color: \"rgba(33, 150, 243, 1)\"\n  },\n  WARNING: {\n    backgroundColor: \"rgba(255, 152, 0, 0.1)\",\n    color: \"rgba(255, 152, 0, 1)\"\n  },\n  DEBUG: {\n    backgroundColor: \"rgba(76, 175, 80, 0.1)\",\n    color: \"rgba(76, 175, 80, 1)\"\n  },\n  ERROR: {\n    backgroundColor: \"rgba(244, 67, 54, 0.1)\",\n    color: \"rgba(244, 67, 54, 1)\"\n  },\n  CRITICAL: {\n    backgroundColor: \"rgba(255, 19, 1, 0.1)\",\n    color: \"rgba(255, 19, 1, 1)\"\n  }\n};\n\n// export const fixedColumns = {\n//   Date: {\n//     label: i18n.t(\"Date\"),\n//     dataKey: \"time\",\n//     width: 100,\n//     render: time => getJustDateFromServer(time)\n//   },\n//   Time: {\n//     label: i18n.t(\"Time\"),\n//     dataKey: \"time\",\n//     render: time => getJustTimeFromServer(time),\n//     width: 100\n//   },\n//   Level: {\n//     label: i18n.t(\"Level\"),\n//     dataKey: \"level\",\n//     width: 100\n//   },\n//   Module: {\n//     label: i18n.t(\"Module\"),\n//     dataKey: \"module\",\n//     width: 100\n//   },\n//   Function: {\n//     label: \"Function\",\n//     dataKey: \"funcName\",\n//     width: 100\n//   },\n//   Callback: {\n//     label: i18n.t(\"Callback\"),\n//     dataKey: \"callback\",\n//     width: 100\n//   },\n//   Node: {\n//     label: i18n.t(\"Node\"),\n//     dataKey: \"node\",\n//     width: 100\n//   },\n//   Fleet: {\n//     label: i18n.t(\"Fleet\"),\n//     dataKey: \"fleet\",\n//     width: 100\n//   },\n//   Robot: {\n//     label: i18n.t(\"Robot\"),\n//     dataKey: \"robot\",\n//     width: 100\n//   },\n//   Message: {\n//     label: i18n.t(\"Message\"),\n//     dataKey: \"message\",\n//     width: 100\n//   }\n// };\n\n// Makes sure to find unique \"i\" of chip array\n// Input: [{key: 0, label: \"Chip1\"}, {key: 2, label: \"Chip3\"}], keyName= \"key\"\n// Output: 1\nexport function findsUniqueKey(array, keyName) {\n  const length = array.length;\n  // If empty, return 0\n  if (length === 0 || array === undefined) {\n    return 0;\n  }\n  for (let k = 0; k < length; k++) {\n    for (let j = 0; j < length; j++) {\n      if (k === array[j][keyName]) {\n        break;\n      }\n      if (j === length - 1) {\n        return k;\n      }\n    }\n  }\n\n  return length;\n}\n\n// Converts the levels in the state for the string for the request\n//  Input: [\"INFO\", \"DEBUG\"]\n//  Output: \"level=info,debug\"\nexport function getRequestLevels(levelsArray, levelsList) {\n  let res = \"\";\n  if (Array.isArray(levelsArray) && levelsArray.length === levelsList.length) {\n    return res;\n  }\n\n  try {\n    levelsArray.forEach(level => {\n      if (res === \"\") {\n        res = `${level.toLowerCase()}`;\n      } else {\n        res = `${res},${level.toLowerCase()}`;\n      }\n    });\n    return `level=${res}`;\n  } catch (error) {\n    return \"\";\n  }\n}\n// Converts the levels in the state for the string for the request\n//  Input: [{ key: 0, label: \"UI\" }, { key: 1, label: \"TASKS\" }]\n//  Output: \"&tags=UI,TASKS\"\nexport function getRequestTags(tagsArray) {\n  let res = \"\";\n\n  if (_isEmpty(tagsArray)) {\n    return res;\n  }\n\n  tagsArray.forEach(tag => {\n    if (res === \"\") {\n      res = `${tag.label}`;\n    } else {\n      res = `${res},${tag.label}`;\n    }\n  });\n\n  return `&tags=${res}`;\n}\n// Converts the levels in the state for the string for the request\n//  Input: \"r'started\\.$\"\n//  Output: \"&message=r'started\\.$\"\nexport function getRequestMessage(message) {\n  if (!message || message === \"\") {\n    return \"\";\n  }\n\n  return `&message=${message}`;\n}\n\n// Convert Date format to a human readable format\n// Input: 1586370146\n// Output: \"08/04/2020 19:22:26\"\nexport const getTimeFromServer = serverTime => {\n  const time = new Date(serverTime * 1000);\n  return `${time.toLocaleString(\"pt\")}`;\n};\n// Convert Date format to a human readable format\n// Input: 1586370146\n// Output: \"08/04/2020\"\nexport const getJustDateFromServer = serverTime => {\n  const time = new Date(serverTime * 1000);\n  return `${time.toLocaleDateString(\"pt\")}`;\n};\n// Convert Date format to a human readable format\n// Input: 1586370146\n// Output: \"19:22:26\"\nexport const getJustTimeFromServer = serverTime => {\n  const time = new Date(serverTime * 1000);\n  return `${time.toLocaleTimeString(\"pt\")}`;\n};\n\n// Convert array of object to array of strings for LogList\n// Input:\n// [\n//   {\n//     time: 1586370146,\n//     level: \"INFO\",\n//     message: \"UI Tag Log Test: 12\"\n//   },\n//   {\n//     time: 1586370147,\n//     level: \"INFO\",\n//     message: \"UI Tag Log Test: 13\"\n//   }\n// ];\n// Output\n// [\n//   \"[08/04/2020 19:22:26] [INFO] : UI Tag Log Test: 12\",\n//   \"[08/04/2020 19:21:31] [INFO] : UI Tag Log Test: 56\"\n// ];\n\nexport const formatLogsData = data => {\n  return data.map(\n    elem => elem.stdout\n    // `[${getTimeFromServer(elem.time)}] [${elem.level}] : ${elem.message}`\n  );\n};\n\nfunction binaryIndexOf(data, criteria) {\n  var minIndex = 0;\n  var maxIndex = data.length - 1;\n  var currentIndex;\n  var currentElement;\n  var result = null;\n\n  while (minIndex <= maxIndex) {\n    currentIndex = ((minIndex + maxIndex) / 2) | 0;\n    currentElement = data[currentIndex];\n    var comparison = criteria(currentElement);\n\n    if (comparison[0] === \"right\") {\n      minIndex = currentIndex + 1;\n    } else {\n      maxIndex = currentIndex - 1;\n    }\n\n    if (comparison[1]) {\n      result = currentIndex;\n    }\n  }\n\n  return result;\n}\n\nexport const filterByFromToDates = (logsData, fromDate, toDate) => {\n  // If there is a problem fetching the logs, show nothing\n  if (!logsData) {\n    return [];\n  }\n\n  let lowerIndex = 0;\n  let upperIndex = logsData.length;\n\n  // If nothing is selected, do nothing\n  if (!fromDate && !toDate) {\n    return logsData;\n  }\n\n  // List of time format. Array is sorted in descending order (Newer -> Older)\n  const dateList = logsData.map(log => log.time);\n  if (toDate) {\n    // First log that is <= toDate (first index that fits criteria)\n    lowerIndex = binaryIndexOf(dateList, function (value) {\n      return value >= toDate.getTime() / 1000\n        ? [\"right\", false]\n        : [\"left\", true];\n    });\n  }\n  if (fromDate) {\n    // First log that is >= fromDate (last index that still fits criteria)\n    upperIndex = binaryIndexOf(dateList, function (value) {\n      return value <= fromDate.getTime() / 1000\n        ? [\"left\", false]\n        : [\"right\", true];\n    });\n  }\n  return logsData.slice(lowerIndex, upperIndex + 1);\n};\n\n// This function is to get the same string as the one you get in\n// Robot:Status nodes_lchd and persistent_nodes_lchd\nexport const addNestedName = (nestedName, newName) => {\n  if (nestedName === \"\") {\n    return newName;\n  } else {\n    return `${nestedName}__${newName}`;\n  }\n};\n\n// Will update according with the list of running nodes all the nodes to running or stopped\nexport const updateRunningNodes = (treeList, runningNodesList) => {\n  return treeList.map(elem => {\n    // Only update the status of nodes, not containers\n    if (elem.status) {\n      if (runningNodesList.includes(elem.nestedName)) {\n        return { ...elem, status: \"running\" };\n      } else {\n        return { ...elem, status: \"stopped\" };\n      }\n    } else {\n      return elem;\n    }\n  });\n};\n\n// This will remove the deleted container from the treeList and its respective children\nexport const removeDeleteContainer = (treeList, id) => {\n  // Get the id of the Container to remove\n  const deleteIndex = treeList.findIndex(elem => elem.id === id);\n  treeList.splice(deleteIndex, 1);\n  // Remove children: find all children with parentId that is the id\n  for (let i = 0; i < treeList.length; i++) {\n    if (treeList[i].parentId === id) {\n      removeDeleteContainer(treeList, treeList[i].id);\n    }\n  }\n};\n\n// Detects if there are loops within nested containers\n// Returns true if it finds a loop, false otherwise\nexport const detectContainerLoop = (treeList, parentId, flowId) => {\n  // If first level there are no loops\n  if (parentId === 0) {\n    return false;\n  }\n  // index of container to add\n  let flowIndex = treeList.findIndex(elem => elem.id === parentId);\n  let currentFlow = treeList[flowIndex];\n  // Stop when reaches the root of the tree\n  while (currentFlow.parentId) {\n    // get the parentId of the current container\n    const parentId = currentFlow.parentId;\n    // get the index of that parent in the array\n    flowIndex = treeList.findIndex(elem => elem.id === parentId);\n    currentFlow = treeList[flowIndex];\n    if (currentFlow.flowId === flowId) {\n      console.error(\"Found Flow Loop :0\");\n      return true;\n    }\n  }\n  return false;\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Button from \"../Button\";\nimport {\n  Card,\n  Typography,\n  CardContent,\n  Divider,\n  // Button,\n  CardActions,\n  Modal\n} from \"@material-ui/core\";\n\nconst style = {\n  margin: \"auto\",\n  position: \"absolute\",\n  overflow: \"auto\",\n  display: \"flex\",\n  flexDirection: \"column\"\n};\n\nconst AbstractModal = props => {\n  const onKeyPress = e => {\n    if (e.key === \"Enter\") {\n      submit();\n    }\n  };\n\n  const submit = () => {\n    props.onSubmit();\n  };\n\n  const cancel = () => {\n    props.onCancel();\n  };\n\n  return (\n    <Modal\n      onKeyPress={onKeyPress}\n      open={props.open}\n      onClose={cancel}\n      style={{\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\"\n      }}\n    >\n      <Card\n        style={{\n          ...style,\n          width: props.width,\n          height: props.height,\n          minWidth: \"260px\",\n          minHeight: \"280px\"\n        }}\n      >\n        <CardContent\n          style={{\n            flexGrow: 1,\n            display: \"flex\",\n            flexDirection: \"column\",\n            minHeight: 0\n          }}\n        >\n          <Typography\n            variant=\"h5\"\n            style={{\n              padding: \"12px 0px 12px 6px\",\n              fontWeight: 600\n            }}\n          >\n            {props.title}\n          </Typography>\n          <div\n            style={{\n              paddingLeft: \"6px\",\n              flexGrow: 1,\n              overflow: \"auto\",\n              minHeight: 0\n            }}\n          >\n            {props.children}\n          </div>\n        </CardContent>\n        <Divider />\n        <CardActions style={{ alignSelf: \"flex-end\" }}>\n          <Button onClick={cancel} variant=\"outlined\" color={props.cancelColor}>\n            {props.cancelText}\n          </Button>\n          <Button color={props.submitColor} onClick={submit}>\n            {props.submitText}\n          </Button>\n        </CardActions>\n      </Card>\n    </Modal>\n  );\n};\n\nAbstractModal.propTypes = {\n  onSubmit: PropTypes.func,\n  onCancel: PropTypes.func,\n  open: PropTypes.bool,\n  title: PropTypes.string,\n  submitText: PropTypes.string,\n  submitColor: PropTypes.string,\n  cancelText: PropTypes.string,\n  cancelColor: PropTypes.string,\n  width: PropTypes.string,\n  height: PropTypes.string\n};\n\nAbstractModal.defaultProps = {\n  onSubmit: () => {},\n  onCancel: () => {},\n  open: false,\n  title: \"New\",\n  submitText: \"Confirm\",\n  submitColor: \"primary\",\n  cancelText: \"Cancel\",\n  cancelColor: \"inherit\",\n  width: \"25%\",\n  height: \"25%\"\n};\n\nexport default AbstractModal;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport AbstractModal from \"./AbstractModal\";\n\nconst ConfirmAlertModal = props => {\n  return (\n    <AbstractModal\n      onSubmit={props.onSubmit}\n      onCancel={props.onCancel}\n      open={props.open}\n      title={props.title}\n      submitText={props.submitText}\n      submitColor={props.submitColor}\n      cancelText={props.cancelText}\n      cancelColor={props.cancelColor}\n    >\n      <div>{props.message}</div>\n      <div>{props.children}</div>\n    </AbstractModal>\n  );\n};\n\nConfirmAlertModal.propTypes = {\n  title: PropTypes.string,\n  message: PropTypes.string,\n  onSubmit: PropTypes.func,\n  onCancel: PropTypes.func,\n  open: PropTypes.bool,\n  submitText: PropTypes.string,\n  submitColor: PropTypes.string,\n  cancelText: PropTypes.string,\n  cancelColor: PropTypes.string\n};\n\nConfirmAlertModal.defaultProps = {\n  title: \"Insert Text here\",\n  message: \"Are you sure?\",\n  onSubmit: () => {},\n  onCancel: () => {},\n  open: false,\n  submitText: \"Delete\",\n  submitColor: \"secondary\",\n  cancelText: \"Cancel\",\n  cancelColor: \"primary\"\n};\n\nexport default ConfirmAlertModal;\n","import React from \"react\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Menu from \"@material-ui/core/Menu\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport SettingsIcon from \"@material-ui/icons/Settings\";\nimport PropTypes from \"prop-types\";\nimport Toggle from \"./Toggle\";\nimport { makeStyles, useTheme } from \"@material-ui/core/styles\";\nimport Divider from \"@material-ui/core/Divider\";\nimport { Typography } from \"@material-ui/core\";\n\nconst useStyles = makeStyles(theme => {\n  return {\n    menuItemSpacing: {\n      fontSize: \"18px\",\n      minHeight: \"18px\",\n      padding: theme.spacing(1.25, 2),\n      ...theme.cursorDefault\n    },\n    profileMenuFooter: {\n      fontSize: \"14px\",\n      textAlign: \"end\"\n    }\n  };\n});\n\nconst ProfileMenu = props => {\n  const classes = useStyles();\n  const [anchorEl, setAnchorEl] = React.useState(null);\n  const theme = useTheme();\n\n  const handleClick = event => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  return (\n    <div>\n      <IconButton\n        aria-controls=\"simple-menu\"\n        aria-haspopup=\"true\"\n        onClick={handleClick}\n      >\n        <SettingsIcon />\n      </IconButton>\n      <Menu\n        id=\"simple-menu\"\n        anchorEl={anchorEl}\n        keepMounted\n        open={Boolean(anchorEl)}\n        onClose={handleClose}\n      >\n        <Typography variant=\"body1\">\n          <div className={classes.menuItemSpacing}>\n            {props.welcomeLabel}, {props.userName}\n          </div>\n          <Divider variant=\"middle\" />\n          {props.extraItems?.map(item => (\n            <MenuItem\n              className={classes.menuItemSpacing}\n              onClick={() => item.func}\n            >\n              {item.label}\n            </MenuItem>\n          ))}\n          <div className={classes.menuItemSpacing}>\n            {props.darkThemeLabel}\n            <Toggle\n              onToggle={() => props.handleToggleTheme()}\n              toggle={props.isDarkTheme}\n            ></Toggle>\n          </div>\n          <MenuItem\n            className={classes.menuItemSpacing}\n            onClick={props.handleLogout}\n          >\n            {props.logoutLabel}\n          </MenuItem>\n          <Divider variant=\"middle\" />\n          <div\n            className={\n              classes.menuItemSpacing + \" \" + classes.profileMenuFooter\n            }\n          >\n            {props.version}\n          </div>\n        </Typography>\n      </Menu>\n    </div>\n  );\n};\nProfileMenu.propTypes = {\n  welcomeLabel: PropTypes.string,\n  userName: PropTypes.string,\n  darkThemeLabel: PropTypes.string,\n  logoutLabel: PropTypes.string,\n  version: PropTypes.string,\n  extraItems: PropTypes.array,\n  handleLogout: PropTypes.func,\n  handleToggleTheme: PropTypes.func\n};\n\nProfileMenu.defaultProps = {\n  welcomeLabel: \"Hello\",\n  userName: \"User\",\n  darkThemeLabel: \"Dark Theme\",\n  logoutLabel: \"Logout\",\n  version: \"\",\n  extraItems: [],\n  handleLogout: () => console.log(\"logout\"),\n  handleToggleTheme: () => console.log(\"toggle\")\n};\n\nexport default ProfileMenu;\n","import React, { Component } from \"react\";\nimport { fade, withStyles } from \"@material-ui/core/styles\";\nimport InputBase from \"@material-ui/core/InputBase\";\nimport SearchIcon from \"@material-ui/icons/Search\";\nimport PropTypes from \"prop-types\";\n\nconst styles = theme => ({\n  search: {\n    position: \"relative\",\n    borderRadius: theme.shape.borderRadius,\n    backgroundColor: fade(theme.palette.common.white, 0.15),\n    \"&:hover\": {\n      backgroundColor: fade(theme.palette.common.white, 0.25)\n    },\n    marginRight: theme.spacing(2),\n    marginLeft: 0,\n    width: \"100%\",\n    [theme.breakpoints.up(\"sm\")]: {\n      marginLeft: theme.spacing(3),\n      width: \"auto\"\n    }\n  },\n  searchIcon: {\n    width: theme.spacing(7),\n    height: \"100%\",\n    position: \"absolute\",\n    pointerEvents: \"none\",\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\"\n  },\n  inputRoot: {\n    color: \"inherit\"\n  },\n  inputInput: {\n    padding: theme.spacing(1, 1, 1, 7),\n    transition: theme.transitions.create(\"width\"),\n    width: \"100%\",\n    [theme.breakpoints.up(\"md\")]: {\n      width: 200\n    }\n  }\n});\n\nclass SearchInput extends Component {\n  searchInput = undefined;\n  timer = undefined;\n\n  handleChange = evt => {\n    this.searchInput = evt.target.value;\n    if (this.props.enableTimeout) {\n      if (this.timer) {\n        clearTimeout(this.timer);\n      }\n      this.timer = setTimeout(this.handleSearch, this.props.time);\n    } else {\n      this.handleSearch();\n    }\n  };\n\n  handleSearch = () => {\n    if (this.searchInput !== undefined) this.props.onChange(this.searchInput);\n  };\n\n  render() {\n    const { classes, style, placeholder } = this.props;\n    return (\n      <div className={classes.search} style={style}>\n        <div className={classes.searchIcon}>\n          <SearchIcon />\n        </div>\n        <InputBase\n          ref={this.setSearchInput}\n          placeholder={placeholder}\n          classes={{\n            root: classes.inputRoot,\n            input: classes.inputInput\n          }}\n          inputProps={{ \"aria-label\": \"search\" }}\n          onChange={this.handleChange}\n        />\n      </div>\n    );\n  }\n}\n\nSearchInput.propTypes = {\n  placeholder: PropTypes.string,\n  onChange: PropTypes.func,\n  time: PropTypes.number,\n  enableTimeout: PropTypes.bool,\n  style: PropTypes.object\n};\n\nSearchInput.defaultProps = {\n  placeholder: \"Search...\",\n  onChange: input => {\n    console.log(input);\n  },\n  time: 250,\n  enableTimeout: true,\n  style: {}\n};\n\nexport default withStyles(styles, { withTheme: true })(SearchInput);\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport InputLabel from \"@material-ui/core/InputLabel\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport MaterialSelect from \"@material-ui/core/Select\";\nimport PropTypes from \"prop-types\";\n\nconst useStyles = makeStyles(theme => ({\n  formControl: {\n    margin: theme.spacing(1),\n    minWidth: 120\n  }\n}));\n\nconst Select = props => {\n  const classes = useStyles();\n\n  let noneOption = <div></div>;\n  if (props.noneOption) {\n    noneOption = (\n      <MenuItem value=\"\">\n        <em>None</em>\n      </MenuItem>\n    );\n  }\n\n  return (\n    <FormControl\n      variant={props.variant}\n      className={classes.formControl}\n      style={props.style}\n      hiddenLabel={props.label === undefined ? true : false}\n    >\n      <InputLabel id=\"movai-react-select\">{props.label}</InputLabel>\n      <MaterialSelect\n        labelId=\"movai-react-select\"\n        id={props.id}\n        value={props.value}\n        onChange={props.onChange}\n        inputProps={props.inputProps}\n      >\n        {noneOption}\n        {props.options.map((element, index) => {\n          return (\n            <MenuItem key={index} value={element}>\n              {element}\n            </MenuItem>\n          );\n        })}\n      </MaterialSelect>\n    </FormControl>\n  );\n};\n\nSelect.propTypes = {\n  value: PropTypes.string,\n  options: PropTypes.array,\n  noneOption: PropTypes.bool,\n  label: PropTypes.string,\n  variant: PropTypes.string,\n  style: PropTypes.object,\n  onChange: PropTypes.func,\n  id: PropTypes.string,\n  inputProps: PropTypes.object\n};\nSelect.defaultProps = {\n  value: \"option2\",\n  options: [\"option1\", \"option2\", \"option3\"],\n  variant: \"filled\",\n  noneOption: true,\n  onChange: evt => console.log(evt.target.value),\n  id: \"movai-react-select\"\n};\n\nexport default Select;\n","import * as React from \"react\";\nimport PropTypes from \"prop-types\";\nimport clsx from \"clsx\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport { capitalize } from \"@material-ui/core/utils\";\nimport { svgIcons } from \"./svg-icons/svgIcons\";\n\nexport const styles = () => {\n  return {\n    /* Styles applied to the root element. */\n    root: {\n      // borderRadius: theme.shape.borderRadius,\n      backgroundColor: \"transparent\",\n      display: \"flex\",\n      padding: \"6px 16px\"\n    },\n    /* Styles applied to the root element if `variant=\"filled\"` and `color=\"success\"`. */\n    filledSuccess: {\n      color: \"#fff\",\n      // fontWeight: theme.typography.fontWeightMedium,\n      backgroundColor: \"#4caf50\"\n    },\n    /* Styles applied to the root element if `variant=\"filled\"` and `color=\"info\"`. */\n    filledInfo: {\n      color: \"#fff\",\n      // fontWeight: theme.typography.fontWeightMedium,\n      backgroundColor: \"#2196f3\"\n    },\n    /* Styles applied to the root element if `variant=\"filled\"` and `color=\"warning\"`. */\n    filledWarning: {\n      color: \"#fff\",\n      // fontWeight: theme.typography.fontWeightMedium,\n      backgroundColor: \"#ff9800\"\n    },\n    /* Styles applied to the root element if `variant=\"filled\"` and `color=\"error\"`. */\n    filledError: {\n      color: \"#fff\",\n      // fontWeight: theme.typography.fontWeightMedium,\n      backgroundColor: \"#f44336\"\n    },\n    /* Styles applied to the icon wrapper element. */\n    icon: {\n      marginRight: 12,\n      padding: \"7px 0\",\n      display: \"flex\",\n      fontSize: 22,\n      opacity: 0.9\n    },\n    /* Styles applied to the message wrapper element. */\n    message: {\n      padding: \"8px 0\",\n      display: \"flex\",\n      flexDirection: \"column\",\n      justifyContent: \"center\"\n    },\n    /* Styles applied to the action wrapper element if `action` is provided. */\n    action: {\n      display: \"flex\",\n      alignItems: \"center\",\n      marginLeft: \"auto\",\n      paddingLeft: 16,\n      marginRight: -8\n    }\n  };\n};\n\nconst defaultIconMapping = {\n  success: svgIcons.SuccessOutlined,\n  warning: svgIcons.ReportProblemOutlined,\n  error: svgIcons.ErrorOutline,\n  info: svgIcons.InfoOutlined\n};\n\nconst Alert = props => {\n  const {\n    action,\n    children,\n    classes,\n    className,\n    closeText = \"Close\",\n    color,\n    icon,\n    iconMapping = defaultIconMapping,\n    onClose,\n    role = \"alert\",\n    severity = \"success\",\n    variant = \"standard\",\n    theme,\n    ...other\n  } = props;\n\n  console.log(\"action\", action);\n\n  return (\n    <div\n      className={clsx(\n        classes.root,\n        classes[`${variant}${capitalize(color || severity)}`],\n        className\n      )}\n      {...other}\n    >\n      {icon !== false ? (\n        <div className={classes.icon}>\n          {icon || iconMapping[severity] || defaultIconMapping[severity]}\n        </div>\n      ) : null}\n      <div className={classes.message}>{children}</div>\n      {action != null ? <div className={classes.action}>{action}</div> : null}\n      {action == null && onClose ? (\n        <div className={classes.action}>\n          <IconButton\n            size=\"small\"\n            aria-label={closeText}\n            title={closeText}\n            color=\"inherit\"\n            onClick={onClose}\n          >\n            {svgIcons.Close}\n          </IconButton>\n        </div>\n      ) : null}\n    </div>\n  );\n};\n\nAlert.propTypes = {\n  // ----------------------------- Warning --------------------------------\n  // | These PropTypes are generated from the TypeScript type definitions |\n  // |     To update them edit the d.ts file and run \"yarn proptypes\"     |\n  // ----------------------------------------------------------------------\n  /**\n   * The action to display. It renders after the message, at the end of the alert.\n   */\n  action: PropTypes.node,\n  /**\n   * The content of the component.\n   */\n  children: PropTypes.node,\n  /**\n   * Override or extend the styles applied to the component.\n   * See [CSS API](#css) below for more details.\n   */\n  classes: PropTypes.object,\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n  /**\n   * Override the default label for the *close popup* icon button.\n   *\n   * For localization purposes, you can use the provided [translations](/guides/localization/).\n   */\n  closeText: PropTypes.string,\n  /**\n   * The main color for the alert. Unless provided, the value is taken from the `severity` prop.\n   */\n  color: PropTypes.oneOf([\"error\", \"info\", \"success\", \"warning\"]),\n  /**\n   * Override the icon displayed before the children.\n   * Unless provided, the icon is mapped to the value of the `severity` prop.\n   */\n  icon: PropTypes.node,\n  /**\n   * The component maps the `severity` prop to a range of different icons,\n   * for instance success to `<SuccessOutlined>`.\n   * If you wish to change this mapping, you can provide your own.\n   * Alternatively, you can use the `icon` prop to override the icon displayed.\n   */\n  iconMapping: PropTypes.shape({\n    error: PropTypes.node,\n    info: PropTypes.node,\n    success: PropTypes.node,\n    warning: PropTypes.node\n  }),\n  /**\n   * Callback fired when the component requests to be closed.\n   * When provided and no `action` prop is set, a close icon button is displayed that triggers the callback when clicked.\n   *\n   * @param {object} event The event source of the callback.\n   */\n  onClose: PropTypes.func,\n  /**\n   * The ARIA role attribute of the element.\n   */\n  role: PropTypes.string,\n  /**\n   * The severity of the alert. This defines the color and icon used.\n   */\n  severity: PropTypes.oneOf([\"error\", \"info\", \"success\", \"warning\"]),\n  /**\n   * The variant to use.\n   */\n  variant: PropTypes.oneOf([\"filled\", \"outlined\", \"standard\"])\n};\n\nexport default withStyles(styles, { name: \"MuiAlert\" })(Alert);\n","// import * as React from \"react\";\n// import SvgIcon from \"@material-ui/core/SvgIcon\";\n\n// export default function createSvgIcon({\n//   path = \"\",\n//   style = {},\n//   fill = \"#fff\",\n//   width = \"100%\",\n//   className = \"\",\n//   height = \"100%\",\n//   viewBox = \"0 0 32 32\"\n// }) {\n//   return (\n//     <svg\n//       width={width}\n//       style={style}\n//       height={height}\n//       viewBox={viewBox}\n//       className={className}\n//       xmlns=\"http://www.w3.org/2000/svg\"\n//       xmlnsXlink=\"http://www.w3.org/1999/xlink\"\n//     >\n//       <path d={path} fill={fill} />\n//     </svg>\n//   );\n// }\n\n// export default function createSvgIcon(path, displayName) {\n//   const Component = React.memo(\n//     React.forwardRef((props, ref) => (\n//       <SvgIcon data-mui-test={`${displayName}Icon`} ref={ref} {...props}>\n//         {path}\n//       </SvgIcon>\n//       <SvgIcon>\n//         {path}\n//       </SvgIcon>\n//     ))\n//   );\n\n//   if (process.env.NODE_ENV !== \"production\") {\n//     Component.displayName = `${displayName}Icon`;\n//   }\n\n//   Component.muiName = SvgIcon.muiName;\n\n//   return Component;\n// }\n\nimport React from \"react\";\n\nconst CreateSVGIcon = ({\n  path = \"\",\n  style = {},\n  fill = \"#fff\",\n  width = \"100%\",\n  height = \"100%\",\n  className = \"\",\n  viewBox = \"0 0 24 24\"\n}) => (\n  <svg\n    width={width}\n    style={style}\n    height={height}\n    viewBox={viewBox}\n    xmlns=\"http://www.w3.org/2000/svg\"\n    className={`svg-icon ${className || \"\"}`}\n    xmlnsXlink=\"http://www.w3.org/1999/xlink\"\n  >\n    <path fill={fill} d={path} />\n  </svg>\n);\n\nexport default CreateSVGIcon;\n","import React from \"react\";\nimport CreateSVGIcon from \"./CreateSVGIcon\";\n\nexport const svgIcons = {\n  Close: (\n    <CreateSVGIcon\n      width={24}\n      path=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"\n    />\n  ),\n  ErrorOutline: (\n    <CreateSVGIcon\n      width={24}\n      path=\"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z\"\n    ></CreateSVGIcon>\n  ),\n  InfoOutlined: (\n    <CreateSVGIcon\n      width={24}\n      path=\"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z\"\n    ></CreateSVGIcon>\n  ),\n  ReportProblemOutlined: (\n    <CreateSVGIcon\n      width={24}\n      path=\"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z\"\n    ></CreateSVGIcon>\n  ),\n  SuccessOutlined: (\n    <CreateSVGIcon\n      width={24}\n      path=\"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z\"\n    ></CreateSVGIcon>\n  )\n};\n","var api = require(\"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!./Snackbar.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","// Inspired from https://github.com/GA-MO/react-confirm-alert\n\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { render, unmountComponentAtNode } from \"react-dom\";\n// import { Alert } from \"@material-ui/lab\";\nimport Alert from \"./Alert/Alert\";\n\nimport \"./Snackbar.css\";\n\nimport { svgIcons } from \"./Alert/svg-icons/svgIcons\";\n\nclass ReactConfirmAlert extends Component {\n  static propTypes = {\n    message: PropTypes.string,\n    customUI: PropTypes.func,\n    closeOnClickOutside: PropTypes.bool,\n    closeOnEscape: PropTypes.bool,\n    willUnmount: PropTypes.func,\n    onClickOutside: PropTypes.func,\n    onKeypressEscape: PropTypes.func,\n    // new props\n    severity: PropTypes.string,\n    closeText: PropTypes.string,\n    autoHideDuration: PropTypes.number,\n    closable: PropTypes.bool\n  };\n\n  autoClose = null;\n\n  static defaultProps = {\n    closeOnClickOutside: true,\n    closeOnEscape: true,\n    willUnmount: () => null,\n    onClickOutside: () => null,\n    onKeypressEscape: () => null,\n    // new props\n    severity: \"info\", // error, warning, info or success\n    closeText: \"Close\",\n    autoHideDuration: 6000,\n    closable: true\n  };\n\n  handleClickButton = button => {\n    if (button.onClick) button.onClick();\n    this.close();\n  };\n\n  handleClickOverlay = e => {\n    const { closeOnClickOutside, onClickOutside } = this.props;\n    const isClickOutside = e.target === this.overlay;\n\n    if (closeOnClickOutside && isClickOutside) {\n      onClickOutside();\n      this.close();\n    }\n  };\n\n  close = () => {\n    removeBodyClass();\n    removeElementReconfirm();\n  };\n\n  keyboardClose = event => {\n    const { closeOnEscape, onKeypressEscape } = this.props;\n    const isKeyCodeEscape = event.keyCode === 27;\n\n    if (closeOnEscape && isKeyCodeEscape) {\n      onKeypressEscape(event);\n      this.close();\n    }\n  };\n\n  componentDidMount = () => {\n    document.addEventListener(\"keydown\", this.keyboardClose, false);\n    this.autoClose = setTimeout(() => {\n      if (\n        document.getElementById(\"react-confirm-alert\") ||\n        document.getElementById(\"react-confirm-alert-body-element\")\n      ) {\n        this.close();\n      }\n    }, this.props.autoHideDuration);\n  };\n\n  componentWillUnmount = () => {\n    document.removeEventListener(\"keydown\", this.keyboardClose, false);\n    clearTimeout(this.autoClose);\n    this.props.willUnmount();\n  };\n\n  renderCustomUI = () => {\n    const { title, message, customUI } = this.props;\n    const dataCustomUI = {\n      title,\n      message,\n      onClose: this.close\n    };\n\n    return customUI(dataCustomUI);\n  };\n\n  render() {\n    const {\n      message,\n      customUI,\n      severity,\n      closeText,\n      closable,\n      theme\n    } = this.props;\n\n    return (\n      <div\n        className=\"react-confirm-alert-overlay\"\n        ref={dom => (this.overlay = dom)}\n        onClick={this.handleClickOverlay}\n      >\n        <div className=\"react-confirm-alert\">\n          {customUI ? (\n            this.renderCustomUI()\n          ) : (\n            <div className=\"react-confirm-alert-body\">\n              <Alert\n                theme={theme}\n                elevation={6}\n                variant=\"filled\"\n                severity={severity}\n                closeText={closeText}\n                action={\n                  closable ? (\n                    <div\n                      className=\"icon-container\"\n                      onClick={() => this.close()}\n                    >\n                      {svgIcons.Close}\n                    </div>\n                  ) : (\n                    undefined\n                  )\n                }\n              >\n                {message}\n              </Alert>\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\nfunction createElementReconfirm(properties, theme) {\n  let divTarget = document.getElementById(\"react-confirm-alert\");\n  if (divTarget) {\n    // Rerender - the mounted ReactConfirmAlert\n    render(<ReactConfirmAlert {...properties} theme={theme} />, divTarget);\n  } else {\n    // Mount the ReactConfirmAlert component\n    document.body.children[0].classList.add(\"react-confirm-alert-blur\");\n    divTarget = document.createElement(\"div\");\n    divTarget.id = \"react-confirm-alert\";\n    document.body.appendChild(divTarget);\n    render(<ReactConfirmAlert {...properties} theme={theme} />, divTarget);\n  }\n}\n\nfunction removeElementReconfirm() {\n  const target = document.getElementById(\"react-confirm-alert\");\n  unmountComponentAtNode(target);\n  target.parentNode.removeChild(target);\n}\n\nfunction addBodyClass() {\n  document.body.classList.add(\"react-confirm-alert-body-element\");\n}\n\nfunction removeBodyClass() {\n  document.body.classList.remove(\"react-confirm-alert-body-element\");\n}\n\nexport function snackbar(properties, theme) {\n  addBodyClass();\n  createElementReconfirm(properties, theme);\n}\n\nexport default ReactConfirmAlert;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport MaterialTable from \"material-table\";\n\nimport { forwardRef } from \"react\";\n\nimport AddBox from \"@material-ui/icons/AddBox\";\nimport ArrowDownward from \"@material-ui/icons/ArrowDownward\";\nimport Check from \"@material-ui/icons/Check\";\nimport ChevronLeft from \"@material-ui/icons/ChevronLeft\";\nimport ChevronRight from \"@material-ui/icons/ChevronRight\";\nimport Clear from \"@material-ui/icons/Clear\";\nimport DeleteOutline from \"@material-ui/icons/DeleteOutline\";\nimport Edit from \"@material-ui/icons/Edit\";\nimport FilterList from \"@material-ui/icons/FilterList\";\nimport FirstPage from \"@material-ui/icons/FirstPage\";\nimport LastPage from \"@material-ui/icons/LastPage\";\nimport Remove from \"@material-ui/icons/Remove\";\nimport SaveAlt from \"@material-ui/icons/SaveAlt\";\nimport Search from \"@material-ui/icons/Search\";\nimport ViewColumn from \"@material-ui/icons/ViewColumn\";\n\nconst tableIcons = {\n  Add: forwardRef((props, ref) => <AddBox {...props} ref={ref} />),\n  Check: forwardRef((props, ref) => <Check {...props} ref={ref} />),\n  Clear: forwardRef((props, ref) => <Clear {...props} ref={ref} />),\n  Delete: forwardRef((props, ref) => <DeleteOutline {...props} ref={ref} />),\n  DetailPanel: forwardRef((props, ref) => (\n    <ChevronRight {...props} ref={ref} />\n  )),\n  Edit: forwardRef((props, ref) => <Edit {...props} ref={ref} />),\n  Export: forwardRef((props, ref) => <SaveAlt {...props} ref={ref} />),\n  Filter: forwardRef((props, ref) => <FilterList {...props} ref={ref} />),\n  FirstPage: forwardRef((props, ref) => <FirstPage {...props} ref={ref} />),\n  LastPage: forwardRef((props, ref) => <LastPage {...props} ref={ref} />),\n  NextPage: forwardRef((props, ref) => <ChevronRight {...props} ref={ref} />),\n  PreviousPage: forwardRef((props, ref) => (\n    <ChevronLeft {...props} ref={ref} />\n  )),\n  ResetSearch: forwardRef((props, ref) => <Clear {...props} ref={ref} />),\n  Search: forwardRef((props, ref) => <Search {...props} ref={ref} />),\n  SortArrow: forwardRef((props, ref) => <ArrowDownward {...props} ref={ref} />),\n  ThirdStateCheck: forwardRef((props, ref) => <Remove {...props} ref={ref} />),\n  ViewColumn: forwardRef((props, ref) => <ViewColumn {...props} ref={ref} />),\n};\n\n// More information in: https://material-table.com/#/docs/all-props\n\nconst Table = (props) => {\n  return (\n    <MaterialTable\n      style={props.style}\n      title={props.title}\n      columns={props.columns}\n      data={props.data}\n      icons={tableIcons}\n      actions={props.actions}\n      options={props.options}\n      components={props.components}\n      localization={props.localization}\n    />\n  );\n};\n\nTable.propTypes = {\n  style: PropTypes.object,\n  title: PropTypes.string,\n  columns: PropTypes.array,\n  data: PropTypes.array,\n  actions: PropTypes.array,\n  options: PropTypes.object,\n  components: PropTypes.object,\n  localization: PropTypes.object,\n};\nTable.defaultProps = {\n  style: {},\n  title: \"\",\n  columns: [],\n  data: [],\n  actions: [],\n  options: {\n    actionsColumnIndex: -1,\n    draggable: false,\n    grouping: false,\n    search: false,\n    toolbar: false,\n    searchFieldAlignment: \"left\",\n    paging: false,\n  },\n  components: {},\n};\n\nexport default Table;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport MaterialTabs from \"@material-ui/core/Tabs\";\nimport Tab from \"@material-ui/core/Tab\";\nimport Typography from \"@material-ui/core/Typography\";\n\nfunction TabPanel(props) {\n  const { children, selectedTab, index, ...other } = props;\n\n  return (\n    <Typography\n      component=\"div\"\n      role=\"tabpanel\"\n      hidden={selectedTab !== index}\n      id={`tabpanel-${index}`}\n      aria-labelledby={`tab-${index}`}\n      {...other}\n    >\n      {selectedTab === index && children}\n    </Typography>\n  );\n}\n\nTabPanel.propTypes = {\n  children: PropTypes.node,\n  index: PropTypes.any.isRequired,\n  selectedTab: PropTypes.any.isRequired\n};\n\nfunction a11yProps(index) {\n  return {\n    id: `tab-${index}`,\n    \"aria-controls\": `tabpanel-${index}`\n  };\n}\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    flexGrow: 1,\n    height: \"100%\"\n  },\n  tabPanel: {\n    flexGrow: 1,\n    minHeight: 0,\n    height: \"calc(100% - 48px)\",\n    overflowY: \"auto\"\n  }\n}));\n\nexport default function Tabs(props) {\n  const classes = useStyles();\n  const [selectedTab, setSelectedTab] = React.useState(props.selectedTab);\n\n  React.useEffect(() => {\n    if (props.selectedTab !== selectedTab) {\n      setSelectedTab(props.selectedTab);\n    }\n  }, [props.selectedTab]);\n\n  const handleChange = (event, newSelectedTab) => {\n    setSelectedTab(newSelectedTab);\n  };\n\n  return (\n    <div className={classes.root}>\n      <MaterialTabs\n        value={selectedTab}\n        onChange={handleChange}\n        indicatorColor=\"primary\"\n        textColor=\"primary\"\n      >\n        {props.tabList.map((tab, index) => (\n          <Tab key={index} label={tab.label} {...a11yProps(index)} />\n        ))}\n      </MaterialTabs>\n      {props.tabList.map((tab, index) => (\n        <TabPanel\n          key={index}\n          selectedTab={selectedTab}\n          index={index}\n          className={props.scrollable ? classes.tabPanel : undefined}\n        >\n          {tab.component}\n        </TabPanel>\n      ))}\n    </div>\n  );\n}\n\nTabs.propTypes = {\n  tabList: PropTypes.array,\n  selectedTab: PropTypes.number,\n  scrollable: PropTypes.bool\n};\n\nTabs.defaultProps = {\n  tabList: [\n    { label: \"Tab 1\", component: <div>Component 1</div> },\n    {\n      label: \"Tab 2\",\n      component: (\n        <div>\n          Lorem Ipsum is simply dummy text of the printing and typesetting\n          industry. Lorem Ipsum has been the industry standard dummy text ever\n          since the 1500s, when an unknown printer took a galley of type and\n          scrambled it to make a type specimen book. It has survived not only\n          five centuries, but also the leap into electronic typesetting,\n          remaining essentially unchanged. It was popularised in the 1960s with\n          the release of Letraset sheets containing Lorem Ipsum passages, and\n          more recently with desktop publishing software like Aldus PageMaker\n          including versions of Lorem Ipsum.\n        </div>\n      )\n    },\n    { label: \"Tab 3\", component: <div>Component 3</div> }\n  ],\n  selectedTab: 0,\n  scrollable: true\n};\n","import React from \"react\";\nimport TextField from \"@material-ui/core/TextField\";\nimport PropTypes from \"prop-types\";\n\nconst Text = props => {\n  return <TextField {...props}></TextField>;\n};\n\nText.propTypes = {};\nText.defaultProps = {};\n\nexport default Text;\n","import React from \"react\";\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\nimport Switch from \"@material-ui/core/Switch\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { green, grey } from \"@material-ui/core/colors\";\nimport PropTypes from \"prop-types\";\n\nconst useStyles = makeStyles(theme => ({\n  label: {\n    fontFamily: \"Roboto\",\n    fontStyle: \"normal\",\n    fontWeight: \"normal\",\n    fontSize: \"14px\",\n    marginLeft: 0,\n    marginRight: 0,\n    marginBottom: 0\n  },\n  colorSwitchBase: {\n    color: grey[300],\n    \"&$colorChecked\": {\n      color: green[500],\n      \"& + $colorBar\": {\n        backgroundColor: green[500]\n      }\n    }\n  },\n  colorBar: {},\n  colorChecked: {}\n}));\n\nconst Toggle = props => {\n  const classes = useStyles();\n  return (\n    <FormControlLabel\n      control={\n        <Switch\n          checked={props.toggle}\n          onChange={props.onToggle}\n          color={props.color}\n          disabled={props.disabled}\n          hidden={props.hidden}\n          size={props.size}\n          classes={{\n            switchBase: classes.colorSwitchBase,\n            checked: classes.colorChecked,\n            track: classes.colorBar\n          }}\n        />\n      }\n      labelPlacement={props.labelPlacement}\n      label={props.label}\n      classes={{ label: classes.label }}\n      style={{ ...props.style, marginLeft: 0, marginRight: 0, marginBottom: 0 }}\n    />\n  );\n};\n\nToggle.propTypes = {\n  toggle: PropTypes.bool,\n  onToggle: PropTypes.func,\n  label: PropTypes.string,\n  color: PropTypes.string,\n  labelPlacement: PropTypes.string, // 'end', 'start', 'top', 'bottom'\n  style: PropTypes.object\n};\nToggle.defaultProps = {\n  color: \"primary\" // or secondary\n};\n\nexport default Toggle;\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport PropTypes from \"prop-types\";\n\nconst useStyles = makeStyles(theme => ({\n  container: {\n    height: \"100%\",\n    backgroundColor: props => props.backgroundColor,\n    width: props => props.width,\n    display: \"flex\",\n    flexDirection: \"column\"\n  },\n  logoArea: {\n    padding: \"17px\",\n    textAlign: \"center\",\n    alignItems: \"center\",\n    justifyContent: \"center\"\n  },\n  navigationArea: {\n    flexGrow: 1,\n    display: \"flex\",\n    flexDirection: \"column\",\n    //justifyContent: \"center\",\n    alignItems: \"center\"\n  },\n  accountArea: {\n    padding: props => (props.unsetAccountAreaPadding ? \"unset\" : \"17px\"),\n    textAlign: \"center\",\n    alignItems: \"center\",\n    justifyContent: \"center\"\n  }\n}));\n\nconst VerticalBar = props => {\n  const classes = useStyles(props);\n  return (\n    <div className={classes.container}>\n      <div className={classes.logoArea}>{props.upperElement}</div>\n      <div className={classes.navigationArea}>\n        {props.navigationList.map((element, index) => {\n          return (\n            <div key={index} style={{ padding: \"15px 0px\" }}>\n              {element}\n            </div>\n          );\n        })}\n      </div>\n      <div className={classes.accountArea}>{props.lowerElement}</div>\n    </div>\n  );\n};\n\nVerticalBar.propTypes = {\n  upperElement: PropTypes.node.isRequired,\n  navigationList: PropTypes.array,\n  lowerElement: PropTypes.node.isRequired,\n  width: PropTypes.string,\n  backgroundColor: PropTypes.string,\n  unsetAccountAreaPadding: PropTypes.bool\n};\nVerticalBar.defaultProps = {\n  upperElement: <div></div>,\n  navigationList: [<div></div>],\n  lowerElement: <div></div>,\n  width: \"68px\",\n  backgroundColor: \"#424242\",\n  unsetAccountAreaPadding: false\n};\n\nexport default VerticalBar;\n","class Action {\n  constructor() {\n    this.memory = {};\n  }\n\n  action(parentView) {\n    parentView.getSceneMemory().forEach(memory => {\n      memory.gizmoManager.attachedMesh = null;\n      memory.camera.attachControl(memory.canvas, true);\n    });\n    parentView.highlightNodeInTree && parentView.highlightNodeInTree();\n    parentView.highlightNodeInScene && parentView.highlightNodeInScene();\n    parentView.closeContextDial && parentView.closeContextDial();\n    parentView.setContextActionIndex && parentView.setContextActionIndex();\n  }\n}\n\nexport default Action;\n","import Util3d from \"../Util3d/Util3d\";\nimport KeyPoint from \"../NodeItem/KeyPoint\";\nimport Vec3 from \"../Math/Vec3\";\nimport { Maybe } from \"monet\";\nimport React from \"react\";\nimport MouseKeysAction from \"./MouseKeysAction\";\nimport { Color3, Axis } from \"@babylonjs/core\";\n\nlet instance = null;\n\nconst TEMP_KEY_POINT_NAME = \"temp_key_point\";\n\nclass AddKeyPointAction extends MouseKeysAction {\n  constructor() {\n    if (instance) return instance;\n    super();\n    this.key = \"addKeyPoint\";\n    this.name = \"Add Key Point [K]\";\n    this.maybeMousePos = Maybe.none();\n    this.tempMesh = null;\n    this.icon = props => <i className=\"fas fa-map-marker\" {...props}></i>;\n    instance = this;\n  }\n\n  static getInstance() {\n    return new AddKeyPointAction();\n  }\n\n  createKeyPoint = (\n    position,\n    name,\n    scene,\n    parentView,\n    is2addInServer = true,\n    color = Color3.Gray()\n  ) => {\n    const rootMesh = parentView.getRootNode().item.mesh;\n\n    const keyPoint = KeyPoint.ofDict(scene, {\n      name: name,\n      color: [color.r, color.g, color.b]\n    });\n    const mesh = keyPoint.mesh;\n    mesh.parent = rootMesh;\n\n    const localPosition = Util3d.computeLocalCoordinatesFromMesh(\n      { parent: rootMesh },\n      Vec3.ofBabylon(position)\n    ).toBabylon();\n\n    mesh.setPositionWithLocalVector(\n      localPosition.add(Axis.Z.scale(KeyPoint.DEFAULT_SIZE))\n    );\n\n    if (is2addInServer) {\n      parentView.addNodeItem2Tree(keyPoint, rootMesh.name, is2addInServer);\n    }\n    return mesh;\n  };\n\n  action = parentView => {\n    super.action(parentView);\n    parentView.setSelectedAction(this);\n  };\n\n  onPointerDown = (evt, parentView) => {\n    if (evt.button !== 0) {\n      return;\n    }\n    parentView.getSceneMemory().forEach(memory => {\n      const { scene, ground, camera } = memory;\n      this.maybeMousePos = Util3d.getGroundPosition(scene, ground);\n      this.maybeMousePos.forEach(mousePos => {\n        camera.detachControl(memory.canvas);\n      });\n    });\n  };\n\n  onPointerMove = (evt, parentView) => {\n    parentView.getSceneMemory().forEach(memory => {\n      const scene = memory.scene;\n      const ground = memory.ground;\n      const maybeCurrent = Util3d.getGroundPosition(scene, ground);\n      maybeCurrent.forEach(current => {\n        this.maybeMousePos.forEach(oldMousePos => {\n          if (this.tempMesh) this.tempMesh.dispose();\n          this.tempMesh = this.createKeyPoint(\n            current,\n            TEMP_KEY_POINT_NAME,\n            scene,\n            parentView,\n            false\n          );\n        });\n      });\n    });\n  };\n\n  onPointerUp = parentView => {\n    parentView.getSceneMemory().forEach(memory => {\n      const scene = memory.scene;\n      const camera = memory.camera;\n      const ground = memory.ground;\n      const maybeCurrent = Util3d.getGroundPosition(scene, ground);\n      maybeCurrent.forEach(current => {\n        this.maybeMousePos.forEach(oldMousePos => {\n          if (this.tempMesh) this.tempMesh.dispose();\n          const name = `KeyPoint${Math.floor(Math.random() * 1e3)}`;\n          this.createKeyPoint(\n            current,\n            name,\n            scene,\n            parentView,\n            true,\n            new Color3(Math.random(), Math.random(), Math.random())\n          );\n          parentView.setPropertiesWithName(name);\n        });\n      });\n      this.maybeMousePos = Maybe.none();\n      camera.attachControl(memory.canvas, true);\n    });\n  };\n}\n\nexport default AddKeyPointAction;\n","import Util3d from \"../Util3d/Util3d\";\nimport Vec3 from \"../Math/Vec3\";\nimport Action from \"./Action\";\nimport Map from \"../NodeItem/Map\";\nimport { Maybe } from \"monet\";\nimport React from \"react\";\nimport GlobalRef from \"../NodeItem/GlobalRef\";\nimport { Vector3 } from \"@babylonjs/core\";\nimport DefaultScene from \"../Utils/DefaultScene\";\nimport { ACTIONS } from \"../MainView/MainViewActions\";\nimport { MasterDB } from \"mov-fe-lib-core\";\nimport Constants from \"../Utils/Constants\";\nimport MapLoader from \"../AssetsManager/MapLoader\";\n\nclass AddMapAction extends Action {\n  constructor(name, mapLoader) {\n    super();\n    this.name = name;\n    this.key = `addMap${name}`;\n    this.mapLoader = mapLoader;\n    this.icon = props => <i {...props} className=\"fas fa-map\"></i>;\n  }\n\n  addMap(parentView) {\n    const rootNodeMaybe = Maybe.fromNull(parentView.getRootNode());\n    parentView.getSceneMemory().forEach(async memory => {\n      const scene = memory.scene;\n      const camera = memory.camera;\n      const {\n        textureSrc,\n        resolution,\n        origin,\n        imageSize\n      } = await this.mapLoader.load();\n\n      const width = resolution * imageSize[0];\n      const height = resolution * imageSize[1];\n      const mesh = Util3d.groundBuilder(scene)\n        .name(Maybe.fromNull(this.memory[\"name\"]).orSome(this.name))\n        .width(width)\n        .height(height)\n        .textureSrc(textureSrc)\n        .build();\n\n      const originPos = Vec3.of([-width / 2, -height / 2, 0]).sub(\n        Vec3.of(origin)\n      );\n\n      rootNodeMaybe.forEach(rootNode => {\n        const parent = rootNode.item.mesh.parent;\n        parent.position = GlobalRef.inverseCoordinates(originPos.toBabylon());\n        camera.setTarget(\n          new Vector3(parent.position.x, parent.position.y, parent.position.z)\n        );\n      });\n\n      const map = new Map(\n        mesh,\n        [width, height],\n        this.textureSrc,\n        Maybe.fromNull(this.memory[\"assetName\"]).orSome(this.name)\n      );\n\n      const is2sendServer = Maybe.fromNull(this.memory[\"isImport\"])\n        .map(x => !x)\n        .orSome(true);\n      parentView.addNodeItem2Tree(map, null, is2sendServer);\n      memory.ground.dispose();\n      memory.ground = DefaultScene.createMeshGround(scene, width, height);\n    });\n  }\n\n  action(parentView) {\n    super.action(parentView);\n    const maybeNode = parentView.getNodeFromTree(this.name);\n    maybeNode.forEach(node => {});\n    maybeNode.orElseRun(() => {\n      if (parentView.getObjectTree().length < 2) {\n        return this.addMap(parentView);\n      } else {\n        // empty\n      }\n    });\n    parentView.setSelectedAction(ACTIONS.orbit);\n  }\n\n  getType = () => AddMapAction.TYPE;\n\n  deleteAsset = () => {};\n\n  download = async () => {\n    const { textureSrc } = await this.mapLoader.load();\n    const { yamlSrc } = this.mapLoader;\n    const downloadLinks = (\n      <div style={{ display: \"flex\", flexDirection: \"column\" }}>\n        <div style={{ display: \"flex\", flexDirection: \"row\" }}>\n          <div style={{ marginRight: \"5px\" }}>Image:</div>\n          <a href={textureSrc} download>\n            {textureSrc}\n          </a>\n        </div>\n        <div style={{ display: \"flex\", flexDirection: \"row\" }}>\n          <div style={{ marginRight: \"5px\" }}>Yaml:</div>\n          <a href={MapLoader.getMapUrl(yamlSrc)} download>\n            {yamlSrc}\n          </a>\n        </div>\n      </div>\n    );\n  };\n\n  static TYPE = \"AddMapAction\";\n}\n\nexport default AddMapAction;\n","import Action from \"./Action\";\nimport React from \"react\";\nimport { MasterDB } from \"mov-fe-lib-core\";\nimport Constants from \"../Utils/Constants\";\nimport { ACTIONS } from \"../MainView/MainViewActions\";\nimport MeshLoader from \"../Utils/MeshLoader\";\nimport { Maybe } from \"monet\";\nimport Mesh from \"../NodeItem/Mesh\";\nimport { Vector3, Quaternion, Color3, StandardMaterial } from \"@babylonjs/core\";\n\nclass AddMeshAction extends Action {\n  constructor(mesh) {\n    super();\n    this.key = mesh.id;\n    this.name = mesh.name;\n    this.icon = props => <i {...props} className=\"fas fa-draw-polygon\"></i>;\n  }\n\n  action(parentView) {\n    super.action(parentView);\n    console.log(`Mesh ${this.key} : ${this.name}`, this.memory);\n    this.addMesh(parentView);\n    parentView.setSelectedAction(ACTIONS.dragObjects);\n  }\n\n  addMesh = parentView => {\n    parentView.getSceneMemory().forEach(memory => {\n      const scene = memory.scene;\n      const actionMemoryClone = { ...this.memory };\n      MeshLoader.of(scene)\n        .load(this.key)\n        .then(this.transformMesh(parentView, scene, actionMemoryClone))\n        .then(this.addMesh2Scene(parentView, scene, actionMemoryClone));\n    });\n    this.memory[\"isImport\"] = false;\n  };\n\n  transformMesh = (parentView, scene, memory) => mesh => {\n    const parentMesh = this.getParentMesh(parentView);\n    mesh.parent = parentMesh;\n    mesh.createNormals();\n    const isImport = Maybe.fromNull(memory[\"isImport\"]).orSome(false);\n    const maybeDict = Maybe.fromNull(memory[\"nodeItemDict\"]);\n    mesh.position = maybeDict\n      .flatMap(d => (isImport ? Maybe.some(d.position) : Maybe.none()))\n      .map(Vector3.FromArray)\n      .orSome(Vector3.Zero());\n    mesh.rotationQuaternion = maybeDict\n      .flatMap(d => (isImport ? Maybe.some(d.quaternion) : Maybe.none()))\n      .map(\n        quaternion =>\n          new Quaternion(\n            quaternion[1],\n            quaternion[2],\n            quaternion[3],\n            quaternion[0]\n          )\n      )\n      .orSome(Quaternion.Identity());\n    const material = new StandardMaterial(`Mesh${mesh.name}`, scene);\n    const color = maybeDict\n      .flatMap(d => (isImport ? Maybe.some(d.color) : Maybe.none()))\n      .map(Color3.FromArray)\n      .orSome(Color3.Gray());\n    material.diffuseColor = color;\n    material.emissiveColor = color;\n    mesh.material = material;\n    return mesh;\n  };\n\n  addMesh2Scene = (parentView, scene, memory) => mesh => {\n    const parentMesh = this.getParentMesh(parentView);\n    const isImport = Maybe.fromNull(memory[\"isImport\"]).orSome(false);\n    const finalName = Maybe.fromNull(memory[\"nodeItemDict\"])\n      .flatMap(d => (isImport ? Maybe.some(d.name) : Maybe.none()))\n      .orSome(`${this.name}${Math.floor(Math.random() * 100)}`);\n    mesh.name = finalName;\n\n    const meshItem = new Mesh(\n      mesh,\n      this.name,\n      Maybe.fromNull(memory[\"nodeItemDict\"])\n        .flatMap(x => (isImport ? Maybe.some(x.keyValueMap) : Maybe.none()))\n        .orSome({})\n    );\n\n    parentView.addNodeItem2Tree(meshItem, parentMesh.name, !isImport);\n    parentView.renderMenus();\n  };\n\n  getParentMesh = parentView => {\n    return Maybe.fromNull(this.memory[\"parentObj\"])\n      .map(parentObj => parentObj.parent)\n      .flatMap(parentName => parentView.getNodeFromTree(parentName))\n      .map(treeNode => treeNode.item.mesh)\n      .orSome(parentView.getRootNode().item.mesh);\n  };\n\n  getType = () => AddMeshAction.TYPE;\n  static TYPE = \"AddMeshAction\";\n\n  deleteAsset = () => {};\n\n  download = async () => {\n    const downloadLinks = (\n      <div style={{ display: \"flex\", flexDirection: \"column\" }}>\n        <div style={{ display: \"flex\", flexDirection: \"row\" }}>\n          <div style={{ marginRight: \"5px\" }}>Mesh:</div>\n          <a href={MeshLoader.getMeshUrl(this.key)} download>\n            {this.key}\n          </a>\n        </div>\n      </div>\n    );\n  };\n}\n\nexport default AddMeshAction;\n","import { Maybe } from \"monet\";\nimport MouseKeysAction from \"./MouseKeysAction\";\nimport BoxRegion from \"../NodeItem/BoxRegion\";\nimport Vec3 from \"../Math/Vec3\";\nimport Util3d from \"../Util3d/Util3d\";\nimport React from \"react\";\nimport { Color3 } from \"@babylonjs/core\";\n\nclass BoxRegionAction extends MouseKeysAction {\n  constructor() {\n    if (instance) return instance;\n    super();\n    this.key = \"drawBoxRegion\";\n    this.name = \"Draw Box Region [B]\";\n    this.maybeMousePos = Maybe.none();\n    this.tempMesh = null;\n    this.icon = props => <i className=\"fas fa-square\" {...props} />;\n    instance = this;\n  }\n\n  action = parentView => {\n    super.action(parentView);\n    parentView.setSelectedAction(this);\n  };\n\n  onPointerDown = (evt, parentView) => {\n    if (!(evt.buttons === 1)) return;\n    parentView.getSceneMemory().forEach(memory => {\n      const scene = memory.scene;\n      const ground = memory.ground;\n      const camera = memory.camera;\n      const maybeMousePos = Util3d.getGroundPosition(scene, ground);\n      this.maybeMousePos = maybeMousePos;\n      maybeMousePos.forEach(mousePos => {\n        camera.detachControl(memory.canvas);\n      });\n    });\n  };\n\n  onPointerMove = (evt, parentView) => {\n    parentView.getSceneMemory().forEach(memory => {\n      const scene = memory.scene;\n      const ground = memory.ground;\n      const maybeCurrent = Util3d.getGroundPosition(scene, ground);\n      maybeCurrent.forEach(current => {\n        this.maybeMousePos.forEach(oldMousePos => {\n          if (this.tempMesh) this.tempMesh.dispose();\n          this.tempMesh = this.createBoxRegion(\n            [oldMousePos, current],\n            TEMP_BOX_REGION_NAME,\n            scene,\n            parentView,\n            false\n          );\n        });\n      });\n    });\n  };\n\n  onPointerUp = parentView => {\n    parentView.getSceneMemory().forEach(memory => {\n      const scene = memory.scene;\n      const camera = memory.camera;\n      const ground = memory.ground;\n      const maybeCurrent = Util3d.getGroundPosition(scene, ground);\n      maybeCurrent.forEach(current => {\n        this.maybeMousePos.forEach(oldMousePos => {\n          this.tempMesh.dispose();\n          const name = `BoxRegion${Math.floor(Math.random() * 1e3)}`;\n          this.createBoxRegion(\n            [oldMousePos, current],\n            name,\n            scene,\n            parentView,\n            true\n          );\n          parentView.setPropertiesWithName(name);\n        });\n      });\n      this.maybeMousePos = Maybe.none();\n      camera.attachControl(memory.canvas, true);\n      parentView.renderMenus();\n    });\n  };\n\n  createBoxRegion = (\n    region,\n    name,\n    scene,\n    parentView,\n    is2addInServer = true,\n    color = Color3.Red(),\n    height = 1\n  ) => {\n    const rootMesh = parentView.getRootNode().item.mesh;\n\n    const localRegion = region.map(r =>\n      Util3d.computeLocalCoordinatesFromMesh(\n        { parent: rootMesh },\n        Vec3.ofBabylon(r)\n      )\n    );\n\n    localRegion[1] = localRegion[1].add(Vec3.of([0, 0, height]));\n    const middlePoint = localRegion[0].add(localRegion[1]).scale(0.5);\n    const centeredRegion = localRegion.map(r => r.sub(middlePoint));\n\n    const boxRegionItem = BoxRegion.ofDict(\n      scene,\n      {\n        name: name,\n        position: middlePoint.toArray(),\n        color: [color.r, color.g, color.b],\n        corners: centeredRegion.map(x => x.toArray())\n      },\n      parentView\n    );\n    boxRegionItem.mesh.parent = rootMesh;\n    if (is2addInServer) {\n      parentView.addNodeItem2Tree(boxRegionItem, rootMesh.name, is2addInServer);\n    }\n    return boxRegionItem.mesh;\n  };\n\n  static getInstance() {\n    return new BoxRegionAction();\n  }\n}\n\nlet instance = null;\n\nconst TEMP_BOX_REGION_NAME = \"temp_box_region\";\n\nexport default BoxRegionAction;\n","import Util3d from \"../Util3d/Util3d\";\nimport Vec3 from \"../Math/Vec3\";\nimport { Maybe } from \"monet\";\nimport MouseKeysAction from \"./MouseKeysAction\";\nimport React from \"react\";\nimport { Vector3 } from \"@babylonjs/core\";\nimport { UndoManager } from \"mov-fe-lib-core\";\nimport Clipboard from \"../Utils/Clipboard\";\n\nclass DragObjectsAction extends MouseKeysAction {\n  constructor() {\n    if (instance) return instance;\n    super();\n    this.key = \"dragObject\";\n    this.name = \"Grab Objects [G]\";\n    this.icon = props => <i className=\"fas fa-mouse-pointer\" {...props}></i>;\n    this.maybeSelectedMesh = Maybe.none();\n    this.shiftFromCenterOfMass = Vec3.ZERO;\n    this.mousePointInLocal = Vec3.ZERO;\n    this.clickPointInLocal = Vec3.ZERO;\n    this.undoManager = new UndoManager();\n    instance = this;\n  }\n\n  action = parentView => {\n    super.action(parentView);\n    parentView.setSelectedAction(this);\n  };\n\n  onPointerDown = (evt, parentView) => {\n    if (!(evt.buttons === 1 || evt.buttons === 2)) return;\n    parentView.getSceneMemory().forEach(memory => {\n      const { scene, ground, camera, canvas } = memory;\n      this.maybeSelectedMesh = Util3d.pickMesh(scene, ground);\n      this.maybeSelectedMesh.forEach(currentMesh => {\n        camera.detachControl(canvas);\n        Util3d.getGroundPosition(scene, ground).forEach(groundPosition => {\n          const groundPositionInLocalCoordinates = Util3d.computeLocalCoordinatesFromMesh(\n            currentMesh,\n            Vec3.ofBabylon(groundPosition)\n          );\n\n          this.mousePointInLocal = groundPositionInLocalCoordinates;\n          this.clickPointInLocal = groundPositionInLocalCoordinates;\n          this.shiftFromCenterOfMass = groundPositionInLocalCoordinates.sub(\n            Vec3.ofBabylon(currentMesh.position)\n          );\n\n          currentMesh.onClick\n            ? currentMesh.onClick()\n            : parentView.closeContextDial();\n\n          this.handleMeshRightClick(evt, parentView, currentMesh);\n\n          parentView.addGizmo(currentMesh.name);\n          parentView.highlightNodeInTree(currentMesh.name);\n          parentView.highlightMeshInScene([currentMesh]);\n          this.setProperties(parentView, currentMesh.name);\n        });\n      });\n      this.maybeSelectedMesh.orLazy(() =>\n        parentView\n          .getMouseCoordinatesFromRoot()\n          .forEach(mousePosRoot =>\n            this.handleRightClickWithoutMesh(evt, parentView, mousePosRoot)\n          )\n      );\n    });\n  };\n\n  handleMeshRightClick = (evt, parentView, mesh) => {\n    if (!(evt.buttons === 2)) return;\n    if (!mesh || !mesh.getMouseContextActions) return;\n    parentView.setMouseContextActions(\n      evt,\n      mesh.getMouseContextActions(parentView)\n    );\n  };\n\n  /**\n   * @param evt: event\n   * @param parentView: MainView\n   * @param mousePosFromRoot: Vector3\n   */\n  handleRightClickWithoutMesh = (evt, parentView, mousePosFromRoot) => {\n    if (!(evt.buttons === 2)) return;\n    parentView.setMouseContextActions(evt, [\n      {\n        title: \"Paste\",\n        onClick: this.getPasteOnClick(mousePosFromRoot, parentView)\n      }\n    ]);\n  };\n\n  getPasteOnClick = (mousePosFromRoot, parentView) => () => {\n    const pasteAction = Clipboard.paste();\n    if (pasteAction && typeof pasteAction === \"function\") {\n      pasteAction(mousePosFromRoot, parentView);\n    }\n  };\n\n  onPointerMove = (evt, parentView) => {\n    if (!(evt.buttons === 1)) return;\n    parentView.getSceneMemory().forEach(memory => {\n      const { scene, ground } = memory;\n      const maybeGroundPosition = Util3d.getGroundPosition(scene, ground);\n      maybeGroundPosition.forEach(current => {\n        this.maybeSelectedMesh.forEach(selectedMesh => {\n          const currentLocal = Util3d.computeLocalCoordinatesFromMesh(\n            selectedMesh,\n            Vec3.ofBabylon(current)\n          );\n\n          const v = currentLocal.sub(this.shiftFromCenterOfMass);\n          selectedMesh.position = new Vector3(\n            v.getX(),\n            v.getY(),\n            selectedMesh.position.z\n          );\n          this.notifyObservers(\n            selectedMesh,\n            false,\n            currentLocal.sub(this.mousePointInLocal)\n          );\n          this.mousePointInLocal = currentLocal;\n        });\n      });\n    });\n  };\n\n  onPointerUp = parentView => {\n    parentView.getSceneMemory().forEach(memory => {\n      const { camera, scene, ground, canvas } = memory;\n      this.maybeSelectedMesh.forEach(selectedMesh => {\n        Util3d.getGroundPosition(scene, ground).forEach(groundPos => {\n          const groundPosInLocal = Util3d.computeLocalCoordinatesFromMesh(\n            selectedMesh,\n            Vec3.ofBabylon(groundPos)\n          );\n          const bigDisplacement = groundPosInLocal.sub(this.clickPointInLocal);\n          this.notifyObservers(selectedMesh, true, Vec3.ZERO);\n          this.setProperties(parentView, selectedMesh.name);\n          parentView.updateNodeInServer(selectedMesh.name);\n\n          this.undoManager.addIt(\n            this.getUndoAbleAction(selectedMesh, bigDisplacement, parentView)\n          );\n        });\n      });\n      this.maybeSelectedMesh = Maybe.none();\n      this.shiftFromCenterOfMass = Vec3.ZERO;\n      this.mousePointInLocal = Vec3.ZERO;\n      camera.attachControl(canvas, true);\n    });\n  };\n\n  onKeyDown = (evt, parentView) => {\n    const defaultAction = () => super.onKeyDown(evt, parentView);\n    const predicateActionList = [\n      {\n        predicate: e => [\"Backspace\", \"Delete\"].includes(e.code),\n        action: this.getDeleteButtonAction(parentView)\n      },\n      {\n        predicate: e => e.ctrlKey && !e.shiftKey && e.code === \"KeyZ\",\n        action: () => this.undoManager.undo()\n      },\n      {\n        predicate: e => e.ctrlKey && e.shiftKey && e.code === \"KeyZ\",\n        action: () => this.undoManager.redo()\n      },\n      {\n        predicate: e => e.ctrlKey && e.code === \"KeyC\",\n        action: () =>\n          Maybe.fromNull(parentView.getHighlightedNodeName()).forEach(name =>\n            parentView.getNodeFromTree(name).forEach(({ item }) => {\n              const { mesh } = item;\n              mesh.getMouseContextActions &&\n                mesh.getMouseContextActions(parentView)[0].onClick();\n            })\n          )\n      },\n      {\n        predicate: e => e.ctrlKey && e.code === \"KeyV\",\n        action: () => {\n          parentView\n            .getMouseCoordinatesFromRoot()\n            .forEach(mousePosRoot =>\n              this.getPasteOnClick(mousePosRoot, parentView)()\n            );\n        }\n      },\n      { predicate: e => true, action: defaultAction }\n    ];\n    for (let i = 0; i < predicateActionList.length; i++) {\n      const predicateAction = predicateActionList[i];\n      if (predicateAction.predicate(evt)) {\n        predicateAction.action();\n        break;\n      }\n    }\n  };\n\n  getDeleteButtonAction(parentView) {\n    return () =>\n      Maybe.fromNull(parentView.getHighlightedNodeName()).forEach(nodeName => {\n        const maybeNode = parentView.getNodeFromTree(nodeName);\n        maybeNode.forEach(() => parentView.onDeleteNode(nodeName));\n        maybeNode.orElseRun(() => {\n          const contextActions = parentView.getContextActions();\n          contextActions[0].action(parentView);\n        });\n      });\n  }\n\n  notifyObservers(mesh, is2updateServer, displacement) {\n    Maybe.fromNull(mesh.observers).forEach(obs =>\n      obs.notifyObservers({\n        updatedPointMesh: mesh,\n        is2updateServer: is2updateServer,\n        displacement: displacement.toBabylon()\n      })\n    );\n  }\n\n  setProperties = (parentView, name) =>\n    setTimeout(() => parentView.setPropertiesWithName(name), 100);\n\n  /**\n   *\n   * @param {*} selectedMesh: babylon js Mesh\n   * @param {*} displacement: Vec3\n   * @param {*} parentView: mainView instance\n   */\n  getUndoAbleAction(selectedMesh, displacement, parentView) {\n    return UndoManager.actionBuilder()\n      .doAction(() => {\n        const newPos = Vec3.ofBabylon(selectedMesh.position).add(displacement);\n        selectedMesh.position = newPos.toBabylon();\n        this.notifyObservers(selectedMesh, true, displacement);\n        parentView.updateNodeInServer(selectedMesh.name);\n      })\n      .undoAction(() => {\n        const invertDisplacement = displacement.scale(-1);\n        const newPos = Vec3.ofBabylon(selectedMesh.position).add(\n          invertDisplacement\n        );\n        selectedMesh.position = newPos.toBabylon();\n        this.notifyObservers(selectedMesh, true, invertDisplacement);\n        parentView.updateNodeInServer(selectedMesh.name);\n      })\n      .build();\n  }\n\n  static getInstance() {\n    return new DragObjectsAction();\n  }\n}\n\nlet instance = null;\n\nexport default DragObjectsAction;\n","import MouseKeysAction from \"./MouseKeysAction\";\nimport React from \"react\";\nimport Util3d from \"../Util3d/Util3d\";\nimport { Color3 } from \"@babylonjs/core\";\nimport Vec3 from \"../Math/Vec3\";\nimport GraphItem from \"../NodeItem/GraphItem\";\nimport Constants from \"../Utils/Constants\";\n\nclass DrawGraphAction extends MouseKeysAction {\n  constructor() {\n    if (instance) return instance;\n    super();\n    this.key = \"drawGraph\";\n    this.name = \"Draw Graph [C]\";\n    this.icon = props => <i className=\"fas fa-project-diagram\" {...props}></i>;\n\n    this.mouseCurve = [];\n    this.previewMeshes = [];\n    this.mode = MODES.line;\n    instance = this;\n  }\n\n  static getInstance() {\n    return new DrawGraphAction();\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                            Mouse Key Action Implementation                           *\n   *                                                                                      */\n  //========================================================================================\n\n  action = parentView => {\n    super.action(parentView);\n    parentView.setSelectedAction(this);\n    const contextActions = this.getContextActions();\n    parentView.setContextActions(contextActions);\n    parentView.setContextActionIndex(\n      contextActions.findIndex(ca => ca.mode === this.mode)\n    );\n  };\n\n  onPointerDown = (evt, parentView) => {\n    if (!(evt.buttons === 1)) return;\n    this.mousePosConsumer(parentView)((mousePos, memory) => {\n      const handlePointerDownByMode = {\n        [MODES.line]: this.onPointerDownLine,\n        [MODES.curve]: this.onPointerDownCurve\n      };\n      handlePointerDownByMode[this.mode](mousePos, memory, parentView);\n    });\n  };\n\n  onPointerMove = (evt, parentView) => {\n    this.mousePosConsumer(parentView)((mousePos, memory) => {\n      const { scene, ground } = memory;\n      Util3d.pickMesh(scene, ground).cata(\n        () => parentView.highlightMeshInScene(),\n        pickedMesh =>\n          parentView.highlightMeshInScene([pickedMesh], Color3.Green())\n      );\n      if (this.mouseCurve.length === 0) return;\n      const handlePointerMoveByMode = {\n        [MODES.line]: this.onPointerMoveLine,\n        [MODES.curve]: this.onPointerMoveCurve\n      };\n      handlePointerMoveByMode[this.mode](mousePos, memory, parentView);\n    });\n  };\n\n  onPointerUp = parentView => {\n    parentView\n      .getGraph()\n      .forEach(graphNode =>\n        parentView.setPropertiesWithName(graphNode.item.name)\n      );\n  };\n\n  onKeyDown = (evt, parentView) => {\n    const keyCodeActionMap = {\n      Delete: () => this.escapeAction(evt, parentView),\n      Backspace: () => this.escapeAction(evt, parentView),\n      Escape: () => this.escapeAction(evt, parentView)\n    };\n    if (evt.code in keyCodeActionMap) {\n      keyCodeActionMap[evt.code]();\n    } else {\n      super.onKeyDown(evt, parentView);\n    }\n  };\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                  Auxiliary functions                                  *\n   *                                                                                      */\n  //========================================================================================\n\n  escapeAction = (evt, parentView) => {\n    if (this.mouseCurve.length > 0) {\n      this.deletePreviewMeshes();\n      this.mouseCurve = [];\n    } else {\n      super.onKeyDown(evt, parentView);\n    }\n  };\n\n  deletePreviewMeshes = () => {\n    this.previewMeshes.forEach(mesh => mesh.dispose());\n    this.previewMeshes = [];\n  };\n\n  mousePosConsumer = parentView => lambda => {\n    parentView.getSceneMemory().forEach(memory => {\n      const scene = memory.scene;\n      const ground = memory.ground;\n      const maybeCurrent = Util3d.getGroundPosition(scene, ground);\n      maybeCurrent.forEach(mousePos => lambda(mousePos, memory));\n    });\n  };\n\n  createGraphItemIfNone = (scene, parentView) =>\n    parentView.getGraph().orElseRun(() => {\n      const graphItem = new GraphItem(scene, parentView);\n      graphItem.mesh.parent = parentView.getRootNode().item.mesh;\n      parentView.addNodeItem2Tree(graphItem);\n    });\n\n  getContextActions() {\n    return [\n      {\n        icon: props => (\n          <i className=\"fas fa-grip-lines-vertical\" {...props}></i>\n        ),\n        action: parentView => {\n          parentView.setContextActionIndex(0);\n          this.mode = MODES.line;\n          this.mouseCurve = [];\n          this.previewMeshes.forEach(mesh => mesh.dispose());\n          this.previewMeshes = [];\n        },\n        name: \"Line Mode\",\n        mode: MODES.line\n      },\n      {\n        icon: props => <i className=\"fas fa-bezier-curve\" {...props}></i>,\n        action: parentView => {\n          parentView.setContextActionIndex(1);\n          this.mode = MODES.curve;\n          this.mouseCurve = [];\n          this.previewMeshes.forEach(mesh => mesh.dispose());\n          this.previewMeshes = [];\n        },\n        name: \"Curve Mode\",\n        mode: MODES.curve\n      }\n    ];\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                       Line Edge                                      *\n   *                                                                                      */\n  //========================================================================================\n\n  onPointerDownLine = (mousePos, memory, parentView) => {\n    const { camera, canvas, scene } = memory;\n    camera.detachControl(canvas);\n    if (this.mouseCurve.length === 0) {\n      this.mouseCurve.push(mousePos);\n    } else {\n      //mouseCurve.length > 0\n      this.createEdge(\n        [this.mouseCurve[0], mousePos],\n        scene,\n        parentView,\n        graphItem => edge => graphItem.addEdge(edge)\n      );\n      this.mouseCurve = [];\n      camera.attachControl(canvas, true);\n    }\n  };\n\n  onPointerMoveLine = (mousePos, memory, parentView) => {\n    // preview line\n    const visibility = 0.25;\n    const { scene } = memory;\n    const rootMesh = parentView.getRootNode().item.mesh;\n    const edgeEmbedding = toLocalCoordinates(parentView)([\n      this.mouseCurve[0],\n      mousePos\n    ]);\n    this.deletePreviewMeshes();\n    this.previewMeshes = GraphItem.getEdgeWithVertexMeshes(\n      scene,\n      edgeEmbedding,\n      Color3.Blue(),\n      Constants.RADIUS / 2\n    );\n    this.previewMeshes.forEach(mesh => {\n      mesh.visibility = visibility;\n      mesh.parent = rootMesh;\n    });\n  };\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                      Curved Edge                                     *\n   *                                                                                      */\n  //========================================================================================\n\n  onPointerDownCurve = (mousePos, memory, parentView) => {\n    const { camera, canvas, scene } = memory;\n    camera.detachControl(canvas);\n    if (this.mouseCurve.length <= 1) {\n      this.mouseCurve.push(mousePos);\n    } else {\n      //mouseCurve.length > 1\n      this.createEdge(\n        [this.mouseCurve[0], this.mouseCurve[1], mousePos],\n        scene,\n        parentView,\n        graphItem => edge => graphItem.addCurveEdge(edge)\n      );\n      this.mouseCurve = [];\n      camera.attachControl(canvas, true);\n    }\n  };\n\n  onPointerMoveCurve = (mousePos, memory, parentView) => {\n    if (this.mouseCurve.length < 2) {\n      this.onPointerMoveLine(mousePos, memory, parentView);\n    } else {\n      // mouse curve >= 2\n      const visibility = 0.25;\n      const { scene } = memory;\n      const rootMesh = parentView.getRootNode().item.mesh;\n      const edgeEmbedding = toLocalCoordinates(parentView)([\n        ...this.mouseCurve,\n        mousePos\n      ]);\n      this.deletePreviewMeshes();\n      this.previewMeshes = GraphItem.getCurveEdgeWithVertexMeshes(\n        scene,\n        edgeEmbedding,\n        Color3.Green(),\n        Constants.RADIUS / 2\n      )\n        .concat(\n          GraphItem.getEdgeWithVertexMeshes(\n            scene,\n            [edgeEmbedding[0], edgeEmbedding[1]],\n            Color3.Blue(),\n            Constants.RADIUS / 2\n          )\n        )\n        .concat(\n          GraphItem.getEdgeWithVertexMeshes(\n            scene,\n            [edgeEmbedding[1], edgeEmbedding[2]],\n            Color3.Blue(),\n            Constants.RADIUS / 2\n          )\n        );\n      this.previewMeshes.forEach(mesh => {\n        mesh.visibility = visibility;\n        mesh.parent = rootMesh;\n      });\n    }\n  };\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                    Draw functions                                    *\n   *                                                                                      */\n  //========================================================================================\n\n  createEdge = (edgeInWorldCoordinate, scene, parentView, drawMethod) => {\n    const edge = toLocalCoordinates(parentView)(edgeInWorldCoordinate);\n    this.createGraphItemIfNone(scene, parentView);\n    parentView.getGraph().forEach(graphNode => {\n      const { item: graphItem } = graphNode;\n      drawMethod(graphItem)(edge);\n      parentView.updateNodeInServer(graphItem.name);\n    });\n    this.deletePreviewMeshes();\n  };\n}\n\nlet instance = null;\nconst MODES = {\n  line: \"line\",\n  curve: \"curve\",\n  free: \"free\"\n};\n\nconst toLocalCoordinates = parentView => {\n  const rootMesh = parentView.getRootNode().item.mesh;\n  return arrayOfVector3 =>\n    arrayOfVector3.map(p =>\n      Util3d.computeLocalCoordinatesFromMesh(\n        { parent: rootMesh },\n        Vec3.ofBabylon(p)\n      ).toBabylon()\n    );\n};\nexport default DrawGraphAction;\n","import Util3d from \"../Util3d/Util3d\";\nimport Vec3 from \"../Math/Vec3\";\nimport Path from \"../NodeItem/Path\";\nimport MouseKeysAction from \"./MouseKeysAction\";\nimport React from \"react\";\nimport { Color3 } from \"@babylonjs/core\";\n\nclass DrawPathAction extends MouseKeysAction {\n  constructor() {\n    if (instance) return instance;\n    super();\n    this.key = \"drawPath\";\n    this.name = \"Draw Path [P]\";\n    this.mouseCurve = [];\n    this.icon = props => <i className=\"fas fa-bezier-curve\" {...props}></i>;\n    instance = this;\n  }\n\n  static getInstance() {\n    return new DrawPathAction();\n  }\n\n  action = parentView => {\n    super.action(parentView);\n    parentView.setSelectedAction(this);\n  };\n\n  onPointerDown = (evt, parentView) => {\n    if (!(evt.buttons === 1)) return;\n    parentView.getSceneMemory().forEach(memory => {\n      const { scene, ground, camera, canvas } = memory;\n      const maybeMousePos = Util3d.getGroundPosition(scene, ground);\n      maybeMousePos.forEach(mousePos => {\n        camera.detachControl(canvas);\n        this.mouseCurve.push(mousePos);\n        const drawPathPoints =\n          this.mouseCurve.length === 1\n            ? [this.mouseCurve[0], this.mouseCurve[0]]\n            : this.mouseCurve;\n\n        this.createCurve(\n          drawPathPoints,\n          TEMP_PATH_NAME,\n          scene,\n          parentView,\n          false\n        );\n        parentView.setContextActions(\n          this.getDrawPathContextAction(camera, canvas, scene)\n        );\n      });\n    });\n  };\n\n  onPointerMove = (evt, parentView) => {\n    // empty\n  };\n\n  onPointerUp = parentView => {\n    // empty\n  };\n\n  onKeyDown = (evt, parentView) => {\n    parentView.getSceneMemory().forEach(memory => {\n      const { scene, camera, canvas } = memory;\n      const contextActions = this.getDrawPathContextAction(\n        camera,\n        canvas,\n        scene\n      );\n      const keyCodeActionMap = {\n        Enter: () => contextActions[1].action(parentView),\n        Delete: () => contextActions[0].action(parentView),\n        Backspace: () => contextActions[0].action(parentView),\n        Escape: () => {\n          if (this.mouseCurve.length === 0) {\n            super.onKeyDown(evt, parentView);\n          }\n          contextActions[0].action(parentView);\n        }\n      };\n      if (evt.code in keyCodeActionMap) {\n        keyCodeActionMap[evt.code]();\n      } else {\n        super.onKeyDown(evt, parentView);\n      }\n    });\n  };\n\n  createCurve = (\n    curve,\n    name,\n    scene,\n    parentView,\n    is2addInServer = true,\n    color = Color3.Gray()\n  ) => {\n    const rootMesh = parentView.getRootNode().item.mesh;\n\n    const localCurve = curve.map(w =>\n      Util3d.computeLocalCoordinatesFromMesh(\n        { parent: rootMesh },\n        Vec3.ofBabylon(w)\n      ).toBabylon()\n    );\n    const middlePoint = Util3d.pointAverage(localCurve);\n    const centeredCurve = localCurve.map(w => w.subtract(middlePoint));\n\n    const pathItem = Path.ofDict(\n      scene,\n      {\n        name: name,\n        position: Vec3.ofBabylon(middlePoint).toArray(),\n        color: [color.r, color.g, color.b],\n        localPath: centeredCurve.map(z => Vec3.ofBabylon(z).toArray())\n      },\n      parentView\n    );\n    pathItem.mesh.parent = rootMesh;\n    parentView.addNodeItem2Tree(pathItem, rootMesh.name, is2addInServer);\n  };\n\n  getDrawPathContextAction = (camera, canvas, scene) => {\n    const ans = [];\n    ans.push({\n      icon: props => <i className=\"fas fa-trash\" {...props}></i>,\n      action: parentView => {\n        camera.attachControl(canvas, true);\n        parentView.deleteNodeFromTreeUsingName(TEMP_PATH_NAME, false);\n        this.mouseCurve = [];\n        parentView.closeContextDial();\n      },\n      name: \"Clear Path [ESC | DEL | Backspace]\"\n    });\n    if (this.mouseCurve.length > 1) {\n      ans.push({\n        icon: props => <i className=\"fas fa-check\" {...props}></i>,\n        action: parentView => {\n          camera.attachControl(canvas, true);\n          parentView.deleteNodeFromTreeUsingName(TEMP_PATH_NAME, false);\n          const name = `Path${Math.floor(Math.random() * 1e3)}`;\n          this.createCurve(this.mouseCurve, name, scene, parentView, true);\n          this.mouseCurve = [];\n          parentView.setPropertiesWithName(name);\n          parentView.closeContextDial();\n        },\n        name: \"Create Path [Enter]\"\n      });\n    }\n    return ans;\n  };\n}\n\nlet instance = null;\nconst TEMP_PATH_NAME = \"temp_curve\";\nexport default DrawPathAction;\n","import Action from \"./Action\";\nimport { ACTIONS } from \"../MainView/MainViewActions\";\n\nclass MouseKeysAction extends Action {\n  constructor() {\n    super();\n  }\n\n  onPointerDown(evt, parentView) {\n    // to be implemented on sub classes\n  }\n\n  onPointerMove(evt, parentView) {\n    // to be implemented on sub classes\n  }\n\n  onPointerUp(parentView) {\n    // to be implemented on sub classes\n  }\n\n  onKeyDown(evt, parentView) {\n    const codeActionDict = {\n      Escape: buttonActionFactory(ACTIONS.orbit),\n      KeyG: buttonActionFactory(ACTIONS.dragObjects),\n      KeyP: buttonActionFactory(ACTIONS.drawPath),\n      KeyB: buttonActionFactory(ACTIONS.drawBoxRegion),\n      KeyR: buttonActionFactory(ACTIONS.drawRegion),\n      KeyK: buttonActionFactory(ACTIONS.addKeyPoint),\n      KeyC: buttonActionFactory(ACTIONS.drawGraph)\n    };\n    if (evt.code in codeActionDict) {\n      codeActionDict[evt.code](parentView);\n    }\n  }\n}\n\nconst buttonActionFactory = action => parentView => {\n  action.action(parentView);\n  parentView.setSelectedAction(action);\n};\n\nexport default MouseKeysAction;\n","import { Maybe } from \"monet\";\nimport MouseKeysAction from \"./MouseKeysAction\";\nimport React from \"react\";\n\nclass OrbitAction extends MouseKeysAction {\n  constructor() {\n    if (instance) return instance;\n    super();\n    this.key = \"orbit\";\n    this.name = \"Orbit [ESC]\";\n    this.maybeSelectedMesh = Maybe.none();\n    this.icon = props => <i className=\"fas fa-globe\" {...props}></i>;\n    instance = this;\n  }\n\n  static getInstance() {\n    return new OrbitAction();\n  }\n\n  action = parentView => {\n    super.action(parentView);\n    parentView.setSelectedAction(this);\n  };\n\n  onPointerDown = (evt, parentView) => {};\n\n  onPointerMove = (evt, parentView) => {};\n\n  onPointerUp = parentView => {};\n}\n\nlet instance = null;\n\nexport default OrbitAction;\n","import MouseKeysAction from \"./MouseKeysAction\";\nimport Vec3 from \"../Math/Vec3\";\nimport Util3d from \"../Util3d/Util3d\";\nimport React from \"react\";\nimport PolygonRegion from \"../NodeItem/PolygonRegion\";\nimport { Color3 } from \"@babylonjs/core\";\n\nlet instance = null;\n\nconst TEMP_POLYGON_REGION_NAME = \"temp_polygon_region\";\n\n// Similar 2 Draw Action Path\nclass PolygonRegionAction extends MouseKeysAction {\n  constructor() {\n    if (instance) return instance;\n    super();\n    this.key = \"drawPolygonRegion\";\n    this.name = \"Draw Polygon Region [R]\";\n    this.mouseCurve = [];\n    this.icon = props => <i className=\"fas fa-draw-polygon\" {...props}></i>;\n    instance = this;\n  }\n\n  static getInstance() {\n    return new PolygonRegionAction();\n  }\n\n  action = parentView => {\n    super.action(parentView);\n    parentView.setSelectedAction(this);\n  };\n\n  getDrawPolygonContextAction = (camera, canvas, scene) => {\n    const ans = [];\n    ans.push({\n      icon: props => <i className=\"fas fa-trash\" {...props}></i>,\n      action: parentView => {\n        camera.attachControl(canvas, true);\n        parentView.deleteNodeFromTreeUsingName(TEMP_POLYGON_REGION_NAME, false);\n        this.mouseCurve = [];\n        parentView.closeContextDial();\n      },\n      name: \"Clear Polygon [ESC | DEL | Backspace]\"\n    });\n    if (this.mouseCurve.length > 2) {\n      ans.push({\n        icon: props => <i className=\"fas fa-check\" {...props}></i>,\n        action: parentView => {\n          camera.attachControl(canvas, true);\n          parentView.deleteNodeFromTreeUsingName(\n            TEMP_POLYGON_REGION_NAME,\n            false\n          );\n          const name = `PolygonRegion${Math.floor(Math.random() * 1e3)}`;\n          this.createPolygonRegion(\n            this.mouseCurve,\n            name,\n            scene,\n            parentView,\n            true\n          );\n          this.mouseCurve = [];\n          parentView.setPropertiesWithName(name);\n          parentView.closeContextDial();\n        },\n        name: \"Create Polygon [Enter]\"\n      });\n    }\n    return ans;\n  };\n\n  onPointerDown = (evt, parentView) => {\n    parentView.getSceneMemory().forEach(memory => {\n      const scene = memory.scene;\n      const ground = memory.ground;\n      const camera = memory.camera;\n      const maybeMousePos = Util3d.getGroundPosition(scene, ground);\n      maybeMousePos.forEach(mousePos => {\n        camera.detachControl(memory.canvas);\n        this.mouseCurve.push(mousePos);\n        const drawPolyPoints =\n          this.mouseCurve.length === 1\n            ? [this.mouseCurve[0], this.mouseCurve[0]]\n            : this.mouseCurve;\n        this.createPolygonRegion(\n          drawPolyPoints,\n          TEMP_POLYGON_REGION_NAME,\n          scene,\n          parentView,\n          false\n        );\n        parentView.setContextActions(\n          this.getDrawPolygonContextAction(camera, memory.canvas, scene)\n        );\n      });\n    });\n  };\n\n  onPointerMove = (evt, parentView) => {\n    // empty\n  };\n\n  onPointerUp = parentView => {\n    // empty\n  };\n\n  onKeyDown = (evt, parentView) => {\n    // Warning: code duplication with PathAction\n    parentView.getSceneMemory().forEach(memory => {\n      const scene = memory.scene;\n      const camera = memory.camera;\n      const contextActions = this.getDrawPolygonContextAction(\n        camera,\n        memory.canvas,\n        scene\n      );\n      const keyCodeActionMap = {\n        Enter: () => contextActions[1].action(parentView),\n        Delete: () => contextActions[0].action(parentView),\n        Backspace: () => contextActions[0].action(parentView),\n        Escape: () => {\n          if (this.mouseCurve.length === 0) {\n            super.onKeyDown(evt, parentView);\n          }\n          contextActions[0].action(parentView);\n        }\n      };\n      if (evt.code in keyCodeActionMap) {\n        keyCodeActionMap[evt.code]();\n      } else {\n        super.onKeyDown(evt, parentView);\n      }\n    });\n  };\n\n  createPolygonRegion = (\n    region,\n    name,\n    scene,\n    parentView,\n    is2addInServer = true,\n    color = Color3.Yellow(),\n    height = 1\n  ) => {\n    const rootMesh = parentView.getRootNode().item.mesh;\n\n    const localRegion = region.map(r =>\n      Util3d.computeLocalCoordinatesFromMesh(\n        { parent: rootMesh },\n        Vec3.ofBabylon(r)\n      )\n    );\n\n    const middlePoint = Util3d.pointAverageVec3(localRegion);\n    const centeredRegion = localRegion.map(r => r.sub(middlePoint));\n\n    const polygonRegionItem = PolygonRegion.ofDict(\n      scene,\n      {\n        name: name,\n        position: middlePoint.toArray(),\n        color: [color.r, color.g, color.b],\n        localPolygon: centeredRegion.map(x => x.toArray()),\n        height: height\n      },\n      parentView\n    );\n\n    polygonRegionItem.mesh.parent = rootMesh;\n\n    parentView.addNodeItem2Tree(\n      polygonRegionItem,\n      rootMesh.name,\n      is2addInServer\n    );\n  };\n}\n\nexport default PolygonRegionAction;\n","import Robot from \"../NodeItem/Robot\";\nimport Action from \"./Action\";\nimport { Maybe } from \"monet\";\nimport React from \"react\";\nimport PointCloud from \"../NodeItem/PointCloud\";\nimport { ACTIONS } from \"../MainView/MainViewActions\";\nimport MeshLoader from \"../Utils/MeshLoader\";\n\nclass RobotAction extends Action {\n  constructor(\n    robot,\n    robotAnimatorFactory = (robot, parentView) =>\n      Robot.getDefaultAnimator(parentView)\n  ) {\n    super();\n    this.robot = robot;\n    this.key = `robotAction${robot.name}`;\n    this.name = robot.name;\n    this.robotAnimatorFactory = robotAnimatorFactory;\n    this.icon = props => <i className=\"fas fa-robot\" {...props}></i>;\n  }\n\n  action = parentView => {\n    super.action(parentView);\n    // if robot already exists, do nothing\n    parentView\n      .getNodeFromTree(this.robot.name)\n      .orElseRun(() => this.addRobot(parentView));\n    parentView.setSelectedAction(ACTIONS.dragObjects);\n  };\n\n  addRobot(parentView) {\n    parentView.getSceneMemory().forEach(memory => {\n      const scene = memory.scene;\n      const actionMemoryClone = { ...this.memory };\n      MeshLoader.of(scene)\n        .load(Robot.ROBOT_MESH_NAME, mesh => Robot.transformMesh(mesh, scene))\n        .then(mesh =>\n          this.createRobotFromMesh(mesh, scene, parentView, actionMemoryClone)\n        );\n    });\n    this.memory[\"isImport\"] = false;\n  }\n\n  createRobotFromMesh(mesh, scene, parentView, memory) {\n    const parentMesh = this.getParentMesh(parentView);\n\n    const robot = this.getRobot(scene, mesh, parentMesh);\n    robot.animate(this.robotAnimatorFactory(robot, parentView));\n    const isImport = Maybe.fromNull(memory[\"isImport\"]).orSome(false);\n    parentView.addNodeItem2Tree(robot, parentMesh.name, !isImport);\n\n    const cloudPoint = this.getCloudPoint(scene, parentView, robot);\n    parentView.addNodeItem2Tree(cloudPoint, robot.name, false);\n\n    parentView.renderMenus();\n  }\n\n  getRobot = (scene, mesh, parentMesh) => {\n    const meshTree = Robot.createRobotMeshTree(\n      this.robot.robotTree,\n      mesh,\n      scene\n    );\n    const dict = Maybe.fromNull(this.memory[\"nodeItemDict\"]);\n    return Robot.builder()\n      .id(this.robot.id)\n      .name(Maybe.fromNull(this.memory[\"name\"]).orSome(this.robot.name))\n      .assetName(\n        Maybe.fromNull(this.memory[\"assetName\"]).orSome(this.robot.name)\n      )\n      .meshTree(meshTree)\n      .parentMesh(parentMesh)\n      .scene(scene)\n      .keyValueMap(dict.map(x => x.keyValueMap).orSome({}))\n      .build();\n  };\n\n  getCloudPoint = (scene, parentView, robot) => {\n    const cloudPoint = PointCloud.ofDict(\n      scene,\n      { name: this.robot.name, id: this.robot.id },\n      parentView\n    );\n    cloudPoint.mesh.parent = robot.mesh;\n    return cloudPoint;\n  };\n\n  getParentMesh = parentView => {\n    return Maybe.fromNull(this.memory[\"parentObj\"])\n      .map(parentObj => parentObj.parent)\n      .flatMap(parentName => parentView.getNodeFromTree(parentName))\n      .map(treeNode => treeNode.item.mesh)\n      .orSome(parentView.getRootNode().item.mesh);\n  };\n\n  getType = () => RobotAction.TYPE;\n\n  static TYPE = \"RobotAction\";\n}\n\nexport default RobotAction;\n","import { Maybe } from \"monet\";\nimport { ASSETS_TYPES, AssetsTypesFactory } from \"../Utils/AssetsTypesFactory\";\nimport { MasterDB } from \"mov-fe-lib-core\";\nimport MapLoader from \"./MapLoader\";\n\n/**\n *  Graphic Assets Manager, retrieves and manages the assets that are in DB.\n */\nclass AssetsManager {\n  constructor() {\n    if (instance) return instance;\n    instance = this;\n    this.assets = {};\n    this.assetsActionMap = {};\n    this.robots = {};\n    this.observers = [];\n    this.afterLoad = [];\n    this.finishInitialSubscribers = 0;\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                  Getters and Setters                                 *\n   *                                                                                      */\n  //========================================================================================\n\n  getAssets = () => this.assets;\n\n  getAssetsActionMap = () => this.assetsActionMap;\n\n  load = async () => {\n    await this.retrieveAssetsFromDb();\n    return this;\n  };\n\n  addAfterLoad(afterLoad) {\n    this.afterLoad.push(afterLoad);\n    return this;\n  }\n\n  addObserver(observer) {\n    this.observers.push(observer);\n    return this;\n  }\n\n  signalObservers = () => this.observers.forEach(obs => obs(this));\n\n  addAsset(assetKey, asset) {\n    try {\n      this.assets[assetKey] = asset;\n      this.assetsActionMap[assetKey] = AssetsTypesFactory[asset.type](asset);\n    } catch (e) {\n      console.log(\"Caught exception while adding asset\", e);\n      throw Error(`Caught exception while adding asset ${e}`);\n    }\n  }\n\n  delAsset(assetKey) {\n    if (assetKey in this.assets) delete this.assets[assetKey];\n    if (assetKey in this.assetsActionMap) delete this.assetsActionMap[assetKey];\n    this.signalObservers();\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                      Subscribers                                     *\n   *                                                                                      */\n  //========================================================================================\n\n  subs = [\n    resolve =>\n      MasterDB.subscribe(\n        {\n          Scope: \"Robot\",\n          Name: \"*\",\n          RobotName: \"*\"\n        },\n        this.getRobotNameUpdate(),\n        this.getRobotNameSub(({ value }) => value, resolve)\n      ),\n    resolve =>\n      MasterDB.subscribe(\n        {\n          Scope: \"Package\",\n          File: \"*\",\n          Name: \"maps\",\n          FileLabel: \"*\"\n        },\n        this.getMapUpdater(({ key }) => key, this.signalObservers),\n        this.getMapSubscriber(\n          ({ value }) => value,\n          () => this.finishSub(\"Maps\", resolve)\n        )\n      ),\n    resolve =>\n      MasterDB.subscribe(\n        { Scope: \"Package\", File: \"*\", Name: \"meshes\", FileLabel: \"*\" },\n        this.getMeshUpdater(),\n        this.getMeshSubscriber(\n          ({ value }) => value,\n          () => this.finishSub(\"Meshes\", resolve)\n        )\n      )\n  ];\n\n  retrieveAssetsFromDb() {\n    return new Promise((re, rej) => {\n      this.subs.forEach(f => f(re));\n    });\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                         Utils                                        *\n   *                                                                                      */\n  //========================================================================================\n\n  finishSub = (place, resolve) => {\n    console.log(\"FINISH SUB \", place, this.finishInitialSubscribers);\n    if (++this.finishInitialSubscribers > this.subs.length - 1) {\n      this.afterLoad.forEach(f => f(this));\n      resolve(true);\n    }\n  };\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                        Robots                                        *\n   *                                                                                      */\n  //========================================================================================\n\n  deleteRobot = id => {\n    this.delAsset(this.robots[id].name);\n    if (id in this.robots) delete this.robots[id];\n  };\n\n  addRobot(id, name = null) {\n    if (!(id in this.robots)) {\n      this.robots[id] = {\n        id: id,\n        name: null\n      };\n    }\n    ofNull(name).forEach(name => (this.robots[id].name = name));\n    if (Object.values(this.robots[id]).every(x => x !== null)) {\n      const localRobot = this.robots[id];\n      this.addAsset(localRobot.name, {\n        name: localRobot.name,\n        id: id,\n        type: ASSETS_TYPES.Robot,\n        robotTree: {\n          name: localRobot.name,\n          position: { x: 0, y: 0, z: 0 },\n          orientation: {\n            w: 1,\n            x: 0,\n            y: 0,\n            z: 0\n          },\n          child: []\n        }\n      });\n    }\n  }\n\n  getRobotNameSub(getter, resolve) {\n    return data => {\n      ofNull(getter(data))\n        .flatMap(maybeGet(\"Robot\"))\n        .forEach(r =>\n          Object.keys(r).forEach(id => this.addRobot(id, r[id].RobotName))\n        );\n      this.finishSub(\"RobotName\", resolve);\n    };\n  }\n\n  getRobotNameUpdate() {\n    const actionMap = {\n      del: data =>\n        ofNull(data.key)\n          .flatMap(maybeGet(\"Robot\"))\n          .forEach(r => Object.keys(r).forEach(this.deleteRobot)),\n      set: this.getRobotNameSub(({ key }) => key)\n    };\n    return data => {\n      console.log(\"Robot NAME UPDATE\", data);\n      actionMap[data.event](data);\n    };\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                         Maps                                         *\n   *                                                                                      */\n  //========================================================================================\n\n  getMapSubscriber = (dataGetter, after = () => {}) => {\n    return data =>\n      this.getMapFileData(dataGetter, data).forEach(fileName => {\n        Object.keys(fileName)\n          .filter(f => f.includes(\".yaml\"))\n          .forEach(this.addMap);\n        after();\n      });\n  };\n\n  getMapUpdater = (dataGetter, after = () => {}) => {\n    const actionMap = {\n      del: data => {\n        this.getMapFileData(dataGetter, data).forEach(f => {\n          let filename = Object.keys(f)[0];\n          filename = filename.split(\".\")[0];\n          delete this.assets[filename];\n          delete this.assetsActionMap[filename];\n        });\n        after();\n      },\n      set: this.getMapSubscriber(dataGetter, after),\n      subscribe: this.getMapSubscriber(dataGetter, after)\n    };\n    return data => {\n      console.log(\"MAP UPDATE\", data);\n      actionMap[data.event](data);\n    };\n  };\n\n  addMap = yamlSrc => {\n    const map = {\n      name: yamlSrc.split(\".\")[0],\n      loader: new MapLoader(yamlSrc),\n      type: ASSETS_TYPES.Map\n    };\n    this.addAsset(map.name, map);\n  };\n\n  getMapFileData = (dataGetter, data) =>\n    ofNull(dataGetter(data))\n      .flatMap(maybeGet(\"Package\"))\n      .flatMap(maybeGet(\"maps\"))\n      .flatMap(maybeGet(\"File\"));\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                         Mesh                                         *\n   *                                                                                      */\n  //========================================================================================\n\n  getMeshSubscriber = (dataGetter, after = () => {}) => data => {\n    this.getMeshFileData(dataGetter, data).forEach(d =>\n      Object.keys(d).forEach(id => {\n        const mesh = { id: id, name: d[id].FileLabel, type: ASSETS_TYPES.Mesh };\n        this.addAsset(mesh.name, mesh);\n      })\n    );\n    after();\n  };\n\n  getMeshUpdater = () => {\n    const actionMap = {\n      del: data => {\n        this.getMeshFileData(d => d.key, data).forEach(f => {\n          let filename = Object.keys(f)[0];\n          delete this.assets[filename];\n          delete this.assetsActionMap[filename];\n        });\n        this.signalObservers();\n      },\n      set: this.getMeshSubscriber(d => d.key, this.signalObservers),\n      subscribe: this.getMeshSubscriber(d => d.key, this.signalObservers)\n    };\n    return data => actionMap[data.event](data);\n  };\n\n  getMeshFileData = (dataGetter, data) =>\n    ofNull(dataGetter(data))\n      .flatMap(maybeGet(\"Package\"))\n      .flatMap(maybeGet(\"meshes\"))\n      .flatMap(maybeGet(\"File\"));\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                        static                                        *\n   *                                                                                      */\n  //========================================================================================\n\n  static getInstance() {\n    return new AssetsManager();\n  }\n}\n\n// private variable\nlet instance = null;\n\n// auxiliary functions\nconst ofNull = Maybe.fromNull;\nconst get = prop => obj => obj[prop];\nconst dot = f => g => x => f(g(x));\nconst maybeGet = prop => dot(ofNull)(get(prop));\n\nexport default AssetsManager;\n","export default class MapLoader {\n  constructor(yamlSrc) {\n    this.yamlSrc = yamlSrc;\n    this.cachedMap = null;\n  }\n\n  async load() {\n    if (this.cachedMap) return this.cachedMap;\n    const response = await fetch(MapLoader.getMapUrl(this.yamlSrc));\n    const map = await this.parseYaml(await response.text());\n    const ans = {\n      textureSrc: map.image,\n      resolution: map.resolution,\n      origin: map.origin,\n      imageSize: map.size\n    };\n    this.cachedMap = ans;\n    return ans;\n  }\n\n  async parseYaml(yamlTxt) {\n    const ans = {};\n    const actionDict = {\n      image: (k, v) => (ans[k] = MapLoader.getMapUrl(v)),\n      resolution: (k, v) => (ans[k] = Number.parseFloat(v)),\n      origin: (k, v) => (ans[k] = JSON.parse(v))\n    };\n    console.log(\"Yaml text\", yamlTxt);\n    yamlTxt\n      .split(\"\\n\")\n      .map(s => s.split(\": \"))\n      .filter(split => split.length >= 2)\n      .filter(split => split[0] in actionDict)\n      .forEach(split => actionDict[split[0]](split[0], split[1]));\n    ans[\"size\"] = await this.getImageSize(ans[\"image\"]);\n    return ans;\n  }\n\n  getImageSize(src) {\n    return new Promise((resolve, reject) => {\n      const img = new Image();\n      img.src = src;\n      img.onload = () => resolve([img.naturalWidth, img.naturalHeight]);\n    });\n  }\n  static getMapUrl = src => `/static/maps/${src}`;\n}\n","//========================================================================================\n/*                                                                                      *\n *         Based from https://doc.babylonjs.com/resources/babylonjs_and_reactjs         *\n *                                                                                      */\n//========================================================================================\n\nimport { Engine, Scene } from \"@babylonjs/core\";\nimport React, { useEffect, useRef, useState } from \"react\";\nimport ReactResizeDetector from \"react-resize-detector\";\nimport PropTypes from \"prop-types\";\nconst FLEX_STYLE = {\n  display: \"flex\",\n  flexDirection: \"column\",\n  flexGrow: 1\n};\n\nconst BaseViewer = props => {\n  const reactCanvas = useRef(null);\n  const {\n    antialias,\n    engineOptions,\n    adaptToDeviceRatio,\n    sceneOptions,\n    onRender,\n    onSceneReady,\n    is2render,\n    sceneFactory,\n    ...rest\n  } = props;\n\n  const [loaded, setLoaded] = useState(false);\n  const [scene, setScene] = useState(null);\n  const [size, setSize] = useState({ width: 100, height: 100 });\n\n  useEffect(() => {\n    if (!loaded) {\n      setLoaded(true);\n      const engine = new Engine(\n        reactCanvas.current,\n        antialias,\n        engineOptions,\n        adaptToDeviceRatio\n      );\n      const scene = sceneFactory\n        ? sceneFactory(engine)\n        : new Scene(engine, sceneOptions);\n      setScene(scene);\n      if (scene.isReady()) {\n        props.onSceneReady(scene);\n      } else {\n        scene.onReadyObservable.addOnce(scene => props.onSceneReady(scene));\n      }\n      if (!is2render) return;\n      engine.runRenderLoop(() => {\n        if (typeof onRender === \"function\") {\n          onRender(scene);\n        }\n        scene.render();\n      });\n    }\n\n    return () => {\n      if (scene !== null) scene.dispose();\n    };\n  }, [reactCanvas]);\n\n  const onResize = (width, height) => {\n    setSize({\n      width,\n      height: height <= window.innerHeight ? height : window.innerHeight * 0.85\n    });\n    scene && scene.getEngine().resize();\n  };\n\n  loaded && reactCanvas.current.focus();\n  return (\n    <div style={{ ...FLEX_STYLE }}>\n      <canvas\n        ref={reactCanvas}\n        width={size.width}\n        height={size.height}\n        {...rest}\n      />\n      <ReactResizeDetector handleWidth handleHeight onResize={onResize} />\n    </div>\n  );\n};\n\nBaseViewer.propTypes = {\n  antialias: PropTypes.bool,\n  engineOptions: PropTypes.object,\n  adaptToDeviceRatio: PropTypes.bool,\n  sceneOptions: PropTypes.object,\n  onSceneReady: PropTypes.func,\n  onRender: PropTypes.func,\n  is2render: PropTypes.bool,\n  sceneFactory: PropTypes.func\n};\n\nBaseViewer.defaultProps = {\n  antialias: true,\n  onSceneReady: scene => {},\n  is2render: true\n};\n\nexport default BaseViewer;\n","import { Maybe } from \"monet\";\n\n/**\n * Undirected Graph data structure\n */\nclass Graph {\n  #adjMap = {};\n  #vertices = {};\n  #edges = {};\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                      Public API                                      *\n   *                                                                                      */\n  //========================================================================================\n\n  addVertex(i) {\n    if (!(i in this.#vertices)) {\n      this.#vertices[i] = {};\n      this.#adjMap[i] = {};\n    }\n  }\n\n  delVertex(i) {\n    if (i in this.#vertices) {\n      delete this.#vertices[i];\n      // delete neighbors edge properties\n      Object.keys(this.#adjMap[i]).forEach(j => {\n        delete this.#edges[Graph.edgeKey(i, j)];\n        delete this.#edges[Graph.edgeKey(j, i)];\n      });\n      delete this.#adjMap[i];\n      Object.keys(this.#adjMap).forEach(j => {\n        if (i in this.#adjMap[j]) {\n          delete this.#adjMap[j][i];\n        }\n      });\n    }\n  }\n\n  /**\n   *\n   * If edge already exists, this function overwrites previous edge\n   *\n   * @param {*} i: vertex id\n   * @param {*} j: vertex id\n   */\n  addEdge(i, j) {\n    this.addVertex(i);\n    this.addVertex(j);\n    this.#edges[Graph.edgeKey(i, j)] = {};\n    this.#edges[Graph.edgeKey(j, i)] = {};\n    this.#adjMap[i][j] = true;\n    this.#adjMap[j][i] = true;\n    return this;\n  }\n\n  delEdge(i, j) {\n    const ijKey = Graph.edgeKey(i, j);\n    const jiKey = Graph.edgeKey(j, i);\n    if (ijKey in this.#edges || jiKey in this.#edges) {\n      delete this.#edges[ijKey];\n      delete this.#edges[jiKey];\n      delete this.#adjMap[i][j];\n      delete this.#adjMap[j][i];\n    }\n  }\n\n  hasEdge(i, j) {\n    return this.getEdgeProp(i, j).isSome();\n  }\n\n  getNeighbors(i) {\n    if (i in this.#adjMap) return Object.keys(this.#adjMap[i]);\n    return [];\n  }\n\n  getEdgeProp(i, j) {\n    const edgeKey = Graph.edgeKey(i, j);\n    if (edgeKey in this.#edges) {\n      return Maybe.some(this.#edges[edgeKey]);\n    }\n    return Maybe.none();\n  }\n\n  setEdgeProp(i, j, props) {\n    const edgeKey = Graph.edgeKey(i, j);\n    if (edgeKey in this.#edges) {\n      this.#edges[edgeKey] = props;\n    }\n    return this;\n  }\n\n  getVertexProp(i) {\n    if (i in this.#vertices) {\n      return Maybe.some(this.#vertices[i]);\n    }\n    return Maybe.none();\n  }\n\n  setVertexProp(i, props) {\n    if (i in this.#vertices) {\n      this.#vertices[i] = props;\n    }\n    return this;\n  }\n\n  getEdges() {\n    return this.#edges;\n  }\n\n  getVertices() {\n    return this.#vertices;\n  }\n\n  getAdjMap() {\n    return this.#adjMap;\n  }\n\n  setAdjacentMap(adjMap) {\n    this.#adjMap = adjMap;\n  }\n\n  setVertices(vertices) {\n    this.#vertices = vertices;\n  }\n\n  setEdges(edges) {\n    this.#edges = edges;\n  }\n\n  static edgeKey = (i, j) => `${i}_${j}`;\n  static key2Edge = key => key.split(\"_\");\n}\n\nexport default Graph;\n","import Graph from \"./Graph\";\nimport RBush from \"rbush\";\nimport Constants from \"../Utils/Constants\";\nimport { Maybe } from \"monet\";\nimport Vec3 from \"../Math/Vec3\";\nimport Util3d from \"../Util3d/Util3d\";\n\nexport default class GraphEmbedding {\n  constructor() {\n    this.graph = new Graph();\n    this.rTreeVertices = new RTreeVertices();\n    this.rTreeEdges = new RTreeEdges();\n    this.vertexGenerator = 0;\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                      Public API                                      *\n   *                                                                                      */\n  //========================================================================================\n\n  getAbstractGraph() {\n    return this.graph;\n  }\n\n  getAdjMap() {\n    return this.graph.getAdjMap();\n  }\n\n  /**\n   *\n   * @param {*} i: Vector3\n   * @param {*} iIndex: integer representing index of vertex i (can be undefined)\n   *\n   */\n  addVertex(i, iIndex, isCurve = false) {\n    const maybeVertexI = this.getVertex(i);\n    maybeVertexI.orElseRun(() => {\n      const vertexI = new RVertex(\n        i,\n        iIndex ? iIndex : this.vertexGenerator++,\n        isCurve\n      );\n      this.rTreeVertices.insert(vertexI);\n      this.graph.addVertex(vertexI.id);\n      this.graph.setVertexProp(vertexI.id, {\n        [GraphEmbedding.NAMESPACES.vertex]: vertexI\n      });\n    });\n  }\n\n  /**\n   *\n   * @param {*} i: Vector3\n   */\n  delVertex(i) {\n    this.getVertex(i).forEach(rVertex => {\n      const { id } = rVertex;\n      this.rTreeVertices.remove(rVertex);\n      this.graph.delVertex(id);\n    });\n  }\n\n  addEdge(edge, edgeIndexes = []) {\n    const [i, j] = edge;\n    const [iIndex, jIndex] = edgeIndexes;\n    this.addVertex(i, iIndex);\n    this.addVertex(j, jIndex);\n    this.getVertex(i).forEach(rVertexI =>\n      this.getVertex(j).forEach(rVertexJ => {\n        const edgeIJ = this.getEdgeByIndex(rVertexI.id, rVertexJ.id).orLazy(\n          () => new REdge(rVertexI, rVertexJ)\n        );\n        const edgeJI = this.getEdgeByIndex(rVertexJ.id, rVertexI.id).orLazy(\n          () => new REdge(rVertexJ, rVertexI)\n        );\n\n        this.rTreeEdges.remove(edgeIJ, (a, b) => a.equals(b));\n        this.rTreeEdges.insert(edgeIJ);\n\n        this.graph.addEdge(rVertexI.id, rVertexJ.id);\n\n        //add edge properties\n        this.graph.setEdgeProp(rVertexI.id, rVertexJ.id, {\n          [GraphEmbedding.NAMESPACES.edge]: edgeIJ\n        });\n        this.graph.setEdgeProp(rVertexJ.id, rVertexI.id, {\n          [GraphEmbedding.NAMESPACES.edge]: edgeJI\n        });\n      })\n    );\n    return this;\n  }\n\n  /**\n   *\n   * @param {*} i: Vector3 Position of vertex\n   * @param {*} j: Vector3 Position of vertex\n   */\n  delEdge(i, j) {\n    this.getEdge(i, j).forEach(rEdge => {\n      const indexes = rEdge.edge.map(v => v.id);\n      this.graph.delEdge(...indexes);\n      this.rTreeEdges.remove(rEdge, (a, b) => a.equals(b));\n    });\n  }\n\n  /**\n   *\n   * @param {*} i: Vector3 Position of vertex\n   * @param {*} j: Vector3 Position of vertex\n   */\n  hasEdge(i, j) {\n    return this.getVertex(i)\n      .flatMap(rVertexI =>\n        this.getVertex(j).map(rVertexJ =>\n          this.graph.hasEdge(rVertexI.id, rVertexJ.id)\n        )\n      )\n      .orSome(false);\n  }\n\n  /**\n   *\n   * @param {*} i: Vector3 Position of vertex\n   */\n  getVertex(i) {\n    const queryArray = this.rTreeVertices.search(RVertex.of(i).toBBox());\n    if (queryArray.length > 0) {\n      return Maybe.some(\n        queryArray.length > 1\n          ? this.getMinDistanceVertex(queryArray, i)\n          : queryArray[0]\n      );\n    }\n    return Maybe.none();\n  }\n\n  getVertexByIndex = index => {\n    return this.graph\n      .getVertexProp(index)\n      .flatMap(vertexProp =>\n        Maybe.fromNull(vertexProp[GraphEmbedding.NAMESPACES.vertex])\n      );\n  };\n\n  /**\n   *\n   * @param {*} i: Vector3 Position of vertex\n   *\n   * Returns Array<RVertex>\n   */\n  getNeighbors(i) {\n    const neighbors = [];\n    this.getVertex(i).forEach(rVertex => {\n      this.graph.getNeighbors(rVertex.id).forEach(jId => {\n        this.graph.getVertexProp(jId).forEach(vProp => {\n          neighbors.push(vProp[GraphEmbedding.NAMESPACES.vertex]);\n        });\n      });\n    });\n    return neighbors;\n  }\n\n  updateVertex(vertexIndex, position) {\n    this.graph.getVertexProp(vertexIndex).forEach(prop => {\n      const rVertex = prop[GraphEmbedding.NAMESPACES.vertex];\n      rVertex.position = position;\n      this.rTreeVertices.remove(rVertex);\n      this.rTreeVertices.insert(rVertex);\n      this.graph.getNeighbors(vertexIndex).forEach(j => {\n        this.graph.getEdgeProp(vertexIndex, j).forEach(propEdge => {\n          const rEdge = propEdge[GraphEmbedding.NAMESPACES.edge];\n          this.rTreeEdges.remove(rEdge, (a, b) => a.equals(b));\n          // rEdge has a pointer to the already altered rVertex\n          this.rTreeEdges.insert(rEdge);\n        });\n      });\n    });\n  }\n\n  /**\n   *\n   * @param {*} i: Vector3 Position of vertex\n   * @param {*} j: Vector3 Position of vertex\n   */\n  getEdge(i, j) {\n    const queryPoint = j ? i.add(j).scale(0.5) : i;\n    const queryArray = this.rTreeEdges.search(RVertex.of(queryPoint).toBBox());\n    if (queryArray.length > 0) {\n      return Maybe.some(\n        queryArray.length > 1\n          ? this.getMinDistanceEdge(queryArray, queryPoint)\n          : queryArray[0]\n      );\n    }\n    return Maybe.none();\n  }\n\n  getEdgeByIndex(iIndex, jIndex) {\n    return this.graph\n      .getEdgeProp(iIndex, jIndex)\n      .map(edgeProp => edgeProp[GraphEmbedding.NAMESPACES.edge]);\n  }\n\n  /**\n   *\n   * @param {*} rEdges: Array<REdge>\n   * @param {*} queryPoint: Vector3\n   */\n  getMinDistanceEdge(rEdges, queryPoint) {\n    let minDist = Number.MAX_VALUE;\n    let minDistIndex = -1;\n    rEdges.forEach((rEdge, i) => {\n      const edge = rEdge.edge.map(v => v.position).map(Vec3.ofBabylon);\n      const e = edge[1].sub(edge[0]);\n      const x = Vec3.ofBabylon(queryPoint).sub(edge[0]);\n      const dot = e.dot(x) / e.dot(e);\n      const dist = x.sub(e.scale(dot)).length();\n      if (minDist > dist) {\n        minDist = dist;\n        minDistIndex = i;\n      }\n    });\n    return rEdges[minDistIndex];\n  }\n\n  getMinDistanceVertex(rVertices, queryPoint) {\n    let minDist = Number.MAX_VALUE;\n    let minDistIndex = -1;\n    rVertices.forEach((rVertex, i) => {\n      const vp = Vec3.ofBabylon(rVertex.position);\n      const x = Vec3.ofBabylon(queryPoint);\n      const dist = vp.sub(x).length();\n      if (minDist > dist) {\n        minDist = dist;\n        minDistIndex = i;\n      }\n    });\n    return rVertices[minDistIndex];\n  }\n\n  getVertices() {\n    return this.graph.getVertices();\n  }\n\n  getEdges() {\n    return this.graph.getEdges();\n  }\n\n  /**\n   *\n   * @param {*} data: {adjMap, vertices, edges}\n   */\n  importData(data) {\n    const { adjMap } = data;\n    // add vertices data\n    // add edges data\n    const vertices = { ...data.vertices };\n    const edges = { ...data.edges };\n    Object.keys(adjMap).forEach(i => {\n      Object.keys(adjMap[i]).forEach(j => {\n        const dataVertexI = vertices[i];\n        const dataVertexJ = vertices[j];\n        const dataEdgeIJ = edges[Graph.edgeKey(i, j)];\n        this.graph.getVertexProp(i).forEach(prop => {\n          prop[GraphEmbedding.NAMESPACES.vertex].keyValueMap =\n            dataVertexI.keyValueMap;\n        });\n        this.graph.getVertexProp(j).forEach(prop => {\n          prop[GraphEmbedding.NAMESPACES.vertex].keyValueMap =\n            dataVertexJ.keyValueMap;\n        });\n        this.graph.getEdgeProp(i, j).forEach(prop => {\n          const rEdge = prop[GraphEmbedding.NAMESPACES.edge];\n          rEdge.keyValueMap = dataEdgeIJ.keyValueMap;\n          rEdge.weight = dataEdgeIJ.weight;\n        });\n      });\n    });\n    this.vertexGenerator = data.vertexGenerator;\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                   Static Functions                                   *\n   *                                                                                      */\n  //========================================================================================\n\n  static NAMESPACES = {\n    vertex: \"rVertex\",\n    edge: \"rEdge\"\n  };\n}\n\n/**\n * Should be Immutable vertex object\n */\nclass RVertex {\n  constructor(vertexPosition, vertexId, isCurve, keyValueMap = {}) {\n    this.position = vertexPosition;\n    this.id = vertexId;\n    this.keyValueMap = keyValueMap;\n    this.isCurve = isCurve;\n  }\n\n  toBBox() {\n    const { position } = this;\n    return {\n      minX: position.x - Constants.RADIUS / 4,\n      minY: position.y - Constants.RADIUS / 4,\n      maxX: position.x + Constants.RADIUS / 4,\n      maxY: position.y + Constants.RADIUS / 4\n    };\n  }\n\n  static of(position) {\n    return new RVertex(position);\n  }\n}\n\nclass RTreeVertices extends RBush {\n  toBBox(rVertex) {\n    return rVertex.toBBox();\n  }\n\n  compareMinX(a, b) {\n    return a.position.x - b.position.x;\n  }\n  compareMinY(a, b) {\n    return a.position.y - b.position.y;\n  }\n}\n\nclass REdge {\n  constructor(rVertexI, rVertexJ, keyValueMap = {}) {\n    this.edge = [rVertexI, rVertexJ];\n    this.keyValueMap = keyValueMap;\n    this.weight = 1.0;\n  }\n\n  equals(b) {\n    if (!(b instanceof REdge)) return false;\n    const bEdgeIds = b.edge.map(v => v.id);\n    return this.edge\n      .map(v => v.id)\n      .map(id => bEdgeIds.includes(id))\n      .every(x => x);\n  }\n\n  toBBox() {\n    const { edge } = this;\n    return {\n      minX: edge.reduce(\n        (e, v) => Math.min(e, v.position.x - Constants.RADIUS / 4),\n        Number.MAX_VALUE\n      ),\n      minY: edge.reduce(\n        (e, v) => Math.min(e, v.position.y - Constants.RADIUS / 4),\n        Number.MAX_VALUE\n      ),\n      maxX: edge.reduce(\n        (e, v) => Math.max(e, v.position.x + Constants.RADIUS / 4),\n        Number.MIN_VALUE\n      ),\n      maxY: edge.reduce(\n        (e, v) => Math.max(e, v.position.y + Constants.RADIUS / 4),\n        Number.MIN_VALUE\n      )\n    };\n  }\n\n  static of(vertexPosI, vertexPosJ) {\n    return new REdge(RVertex.of(vertexPosI), RVertex.of(vertexPosJ));\n  }\n}\n\nclass RTreeEdges extends RBush {\n  toBBox(rEdge) {\n    return rEdge.toBBox();\n  }\n\n  compareMinX(a, b) {\n    const aMin = a.toBBox().minX;\n    const bMin = b.toBBox().minX;\n    return aMin - bMin;\n  }\n\n  compareMinY(a, b) {\n    const aMin = a.toBBox().minY;\n    const bMin = b.toBBox().minY;\n    return aMin - bMin;\n  }\n}\n","import DragObjectsAction from \"../Actions/DragObjectsAction\";\nimport AddKeyPointAction from \"../Actions/AddKeyPointAction\";\nimport BoxRegionAction from \"../Actions/BoxRegionAction\";\nimport DrawPathAction from \"../Actions/DrawPathAction\";\nimport PolygonRegionAction from \"../Actions/PolygonRegionAction\";\n// import DrawWallAction from \"../Actions/DrawWallAction\";\n// import RobotAction from \"../Actions/RobotAction\";\nimport OrbitAction from \"../Actions/OrbitAction\";\nimport DrawGraphAction from \"../Actions/DrawGraphAction\";\n\nexport const ACTIONS = {\n  orbit: OrbitAction.getInstance(),\n  dragObjects: DragObjectsAction.getInstance(),\n  drawPath: DrawPathAction.getInstance(),\n  drawBoxRegion: BoxRegionAction.getInstance(),\n  addKeyPoint: AddKeyPointAction.getInstance(),\n  drawRegion: PolygonRegionAction.getInstance(),\n  drawGraph: DrawGraphAction.getInstance(),\n  // drawWalls: DrawWallAction.getInstance()\n  // addRobot: new RobotAction({\n  //   id: \"Test\",\n  //   name: \"Test\",\n  //   robotTree: {\n  //     name: \"Test\",\n  //     position: { x: 0, y: 0, z: 0 },\n  //     orientation: {\n  //       w: 1,\n  //       x: 0,\n  //       y: 0,\n  //       z: 0\n  //     },\n  //     child: [\n  //       {\n  //         name: \"TestTF\",\n  //         position: { x: 1, y: 0, z: 1 },\n  //         orientation: {\n  //           w: Math.cos(-Math.PI / 4),\n  //           x: 0,\n  //           y: Math.sin(-Math.PI / 4),\n  //           z: 0\n  //         },\n  //         child: []\n  //       }\n  //     ]\n  //   }\n  // })\n};\n","import GlobalRef from \"../NodeItem/GlobalRef\";\nimport { Maybe } from \"monet\";\nimport { ASSETS_TYPES } from \"../Utils/AssetsTypesFactory\";\nimport NODE_ITEM_FACTORY_MAP from \"./NodeItemFactoryMap\";\n\nclass MainViewRetriever {\n  static importScene(mainView, serverScene = [], parent = null) {\n    console.log(\"Importing scene...\", mainView, serverScene);\n    const errors = [];\n    if (serverScene.length > 0) {\n      importSceneRecursive(mainView, serverScene, parent, errors);\n    } else {\n      importDefaultScene(mainView);\n    }\n    console.log(\"End Importing scene\");\n    return errors;\n  }\n\n  static importNodeItem(mainView, nodeDict, parent, is2addInServer = false) {\n    const nodeItemClass = NODE_ITEM_FACTORY_MAP[nodeDict.type]; //retrieve default export\n    if (nodeItemClass) {\n      mainView.getSceneMemory().forEach(({ scene }) => {\n        const nodeItem = nodeItemClass.ofDict(scene, nodeDict, mainView);\n        // pseudo lazy migration of isVisible prop\n        const isVisible =\n          nodeDict.isVisible === undefined ? true : nodeDict.isVisible;\n        nodeItem.mesh.setEnabled(isVisible);\n        mainView.getNodeFromTree(parent).forEach(treeNode => {\n          nodeItem.mesh.parent = treeNode.item.mesh;\n        });\n        mainView.addNodeItem2Tree(\n          nodeItem,\n          parent,\n          is2addInServer,\n          isVisible,\n          false\n        );\n      });\n    }\n  }\n}\n\nfunction isAsset(nodeDict) {\n  return nodeDict.type in ASSETS_TYPES;\n}\n\nfunction importAsset(mainView, nodeDict, parent, errors) {\n  const assetType = nodeDict.type;\n  const assetName = Maybe.fromNull(nodeDict.assetName).orSome(nodeDict.name);\n  const assetActionMap = mainView.getAssetsActionMap();\n  // legacy\n  const retrievedAction = Maybe.fromNull(assetActionMap[assetName]).orLazy(\n    () => assetActionMap[assetName.split(\".\")[0]]\n  );\n  if (!retrievedAction) {\n    errors.push({\n      cause: `Asset of type ${assetType} with name ${assetName}, was not found`,\n      solution: `please upload ${assetType} ${assetName}`\n    });\n    return;\n  }\n  retrievedAction.memory[\"parentObj\"] = { parent: parent };\n  retrievedAction.memory[\"nodeItemDict\"] = nodeDict;\n  retrievedAction.memory[\"assetName\"] = assetName;\n  retrievedAction.memory[\"name\"] = nodeDict.name;\n  retrievedAction.memory[\"isImport\"] = true;\n  retrievedAction.memory[\"isVisible\"] =\n    nodeDict.isVisible === undefined ? true : nodeDict.isVisible;\n  retrievedAction.action(mainView);\n}\n\nfunction importSceneRecursive(mainView, arrayTree, parent = null, errors = []) {\n  if (!arrayTree) return;\n  const sortArrayTree = arrayTree.sort((a, b) => {\n    if (a.item.type === \"GlobalRef\") return -1;\n    return a.name < b.name ? -1 : a.name > b.name ? 1 : 0;\n  });\n  sortArrayTree.forEach(node => {\n    if (isAsset(node.item)) {\n      importAsset(mainView, node.item, parent, errors);\n    } else {\n      MainViewRetriever.importNodeItem(mainView, node.item, parent);\n    }\n    if (node.children.length > 0) {\n      importSceneRecursive(mainView, node.children, node.name, errors);\n    }\n  });\n}\n\nfunction importDefaultScene(mainView) {\n  mainView.getSceneMemory().forEach(memory => {\n    const scene = memory.scene;\n    const send2server = true;\n    mainView.addNodeItem2Tree(GlobalRef.ofDict(scene), null, send2server);\n  });\n}\n\nexport default MainViewRetriever;\n","import GlobalRef from \"../NodeItem/GlobalRef\";\nimport Box from \"../NodeItem/Box\";\nimport KeyPoint from \"../NodeItem/KeyPoint\";\nimport Path from \"../NodeItem/Path\";\nimport Wall from \"../NodeItem/Wall\";\nimport BoxRegion from \"../NodeItem/BoxRegion\";\nimport PolygonRegion from \"../NodeItem/PolygonRegion\";\nimport GraphItem from \"../NodeItem/GraphItem\";\n\nconst NODE_ITEM_FACTORY_MAP = {\n  GlobalRef: GlobalRef,\n  Box: Box,\n  KeyPoint: KeyPoint,\n  Path: Path,\n  Wall: Wall,\n  BoxRegion: BoxRegion,\n  PolygonRegion: PolygonRegion,\n  GraphItem: GraphItem\n};\n\nexport default NODE_ITEM_FACTORY_MAP;\n","import Vec3 from \"./Vec3\";\nimport { Matrix } from \"@babylonjs/core\";\n\nclass Mat3 {\n  constructor(v1, v2, v3) {\n    const v = [v1, v2, v3];\n    for (let i = 0; i < v.length; i++) {\n      if (v[i].constructor !== Array || v[i].length < 3)\n        throw Error(\"One of the inputs is not a array\");\n    }\n    this.mat3 = v.map(x => new Vec3(x));\n  }\n\n  /**\n   * Matrix prod with  3-vector\n   * @param {*} v: 3-vector\n   *\n   * returns 3-vector\n   */\n  prodVec(v) {\n    let ans = new Vec3([0, 0, 0]);\n    for (let i = 0; i < this.mat3.length; i++) {\n      ans = ans.add(this.mat3[i].scale(v.vec3[i]));\n    }\n    return ans;\n  }\n\n  /**\n   * Matrix transpose prod with 3-vec\n   * @param {*} v : 3-vector\n   */\n  dotVec(v) {\n    const ans = [0, 0, 0];\n    for (let i = 0; i < this.mat3.length; i++) {\n      ans[i] = this.mat3[i].dot(v);\n    }\n    return new Vec3(ans);\n  }\n\n  prod(m) {\n    const u = this.prodVec(m.mat3[0]);\n    const v = this.prodVec(m.mat3[1]);\n    const w = this.prodVec(m.mat3[2]);\n    return new Mat3(u.vec3, v.vec3, w.vec3);\n  }\n\n  dot(m) {\n    const u = this.dotVec(m.mat3[0]);\n    const v = this.dotVec(m.mat3[1]);\n    const w = this.dotVec(m.mat3[2]);\n    return new Mat3(u.vec3, v.vec3, w.vec3);\n  }\n\n  map(f) {\n    const u = this.mat3[0].map(f);\n    const v = this.mat3[1].map(f);\n    const w = this.mat3[2].map(f);\n    return new Mat3(u.vec3, v.vec3, w.vec3);\n  }\n\n  equals(mat) {\n    if (mat.constructor !== this.constructor) return false;\n    return this.mat3\n      .map((v, index) => v.equals(mat.mat3[index]))\n      .reduce((e, v) => e && v, true);\n  }\n\n  static ofBabylonMatrix(babylonMat) {\n    const arrayMat = Matrix.GetAsMatrix3x3(babylonMat);\n    const u = [arrayMat[0], arrayMat[1], arrayMat[2]];\n    const v = [arrayMat[3], arrayMat[4], arrayMat[5]];\n    const w = [arrayMat[6], arrayMat[7], arrayMat[8]];\n    return new Mat3(u, v, w);\n  }\n\n  static of(v1, v2, v3) {\n    return new Mat3(v1, v2, v3);\n  }\n\n  static eye() {\n    return new Mat3([1, 0, 0], [0, 1, 0], [0, 0, 1]);\n  }\n}\n\nexport default Mat3;\n","//immutable class, not managing exceptions\nclass Vec2 {\n  constructor(x, y) {\n    this.vec = [x, y].map(z => (z ? z : 0));\n  }\n\n  get x() {\n    return this.vec[0];\n  }\n\n  get y() {\n    return this.vec[1];\n  }\n\n  toArray() {\n    return this.vec;\n  }\n\n  add(y) {\n    return this.op(y, (a, b) => a + b);\n  }\n\n  sub(y) {\n    return this.op(y, (a, b) => a - b);\n  }\n\n  mul(y) {\n    return this.op(y, (a, b) => a * b);\n  }\n\n  div(y) {\n    return this.op(y, (a, b) => a / b);\n  }\n\n  dot(y) {\n    return this.vec.reduce((acc, v, i) => acc + v * y.vec[i], 0);\n  }\n\n  prod(y) {\n    return new Vec2(this.x * y.x - this.y * y.y, this.x * y.y + this.y * y.x);\n  }\n\n  length() {\n    return Math.sqrt(this.dot(this));\n  }\n\n  normalize() {\n    return this.scale(1 / this.length());\n  }\n\n  dual() {\n    return new Vec2(-this.y, this.x);\n  }\n\n  sym() {\n    return this.scale(-1);\n  }\n\n  conj() {\n    return new Vec2(this.x, -this.y);\n  }\n\n  scale(r) {\n    return this.map(z => z * r);\n  }\n\n  map(lambda) {\n    return Vec2.fromArray(this.vec.map(lambda));\n  }\n\n  /**\n   * Returns a vec2 from the operation function bilambda\n   * @param {*} y\n   * @param {*} biLambda\n   */\n  op(y, biLambda) {\n    return Vec2.fromArray(this.vec.map((v, i) => biLambda(v, y.vec[i])));\n  }\n\n  reduce(fold, initial) {\n    return this.vec.reduce(fold, initial);\n  }\n\n  toObject() {\n    return { x: this.x, y: this.y };\n  }\n\n  toString() {\n    return `{x: ${this.x}, y:${this.y}}`;\n  }\n\n  static fromArray(array) {\n    if (array.length < 2) throw new Error(\"array must have size > 2\");\n    return new Vec2(array[0], array[1]);\n  }\n\n  static of(x, y) {\n    return new Vec2(x, y);\n  }\n\n  static ZERO = new Vec2(0, 0);\n  static e1 = new Vec2(1, 0);\n  static e2 = new Vec2(0, 1);\n}\n\nexport default Vec2;\n","import { Vector3 } from \"@babylonjs/core\";\nimport Vec2 from \"./Vec2\";\n\n/**\n * Class that describes immutable 3-vectors\n */\nclass Vec3 {\n  //no for's because performance\n  constructor(array) {\n    if (array.constructor !== Array || array.length < 3)\n      throw new Error(`${array} is not a valid 3-vector`);\n    this.vec3 = [...array];\n  }\n\n  get x() {\n    return this.vec3[0];\n  }\n\n  get y() {\n    return this.vec3[1];\n  }\n\n  get z() {\n    return this.vec3[2];\n  }\n\n  add(x) {\n    return this.op(x, (a, b) => a + b);\n  }\n\n  sub(x) {\n    return this.op(x, (a, b) => a - b);\n  }\n\n  mul(x) {\n    return this.op(x, (a, b) => a * b);\n  }\n\n  op(x, operation) {\n    const ans = [];\n    ans[0] = operation(this.vec3[0], x.vec3[0]);\n    ans[1] = operation(this.vec3[1], x.vec3[1]);\n    ans[2] = operation(this.vec3[2], x.vec3[2]);\n    return new Vec3(ans);\n  }\n\n  scale(r) {\n    return this.map(x => x * r);\n  }\n\n  dot(x) {\n    return (\n      this.vec3[0] * x.vec3[0] +\n      this.vec3[1] * x.vec3[1] +\n      this.vec3[2] * x.vec3[2]\n    );\n  }\n\n  map(f) {\n    return new Vec3(this.vec3.map(f));\n  }\n\n  length() {\n    return Math.sqrt(this.dot(this));\n  }\n\n  normalize = () => {\n    const l = this.length();\n    if (l === 0) throw new Error(\"You can't normalize a zero norm vector\");\n    return this.scale(1 / l);\n  };\n\n  toBabylon() {\n    return new Vector3(this.vec3[0], this.vec3[1], this.vec3[2]);\n  }\n\n  toArray() {\n    return this.vec3;\n  }\n\n  toVec2() {\n    return new Vec2(this.x, this.y);\n  }\n\n  equals(v) {\n    if (v.constructor !== this.constructor) return false;\n    return v.vec3\n      .map((x, index) => v.vec3[index] === x)\n      .reduce((e, v) => e && v, true);\n  }\n\n  reduce(binary, initialValue) {\n    return this.vec3.reduce(binary, initialValue);\n  }\n\n  getMax() {\n    return this.reduce((a, b) => Math.max(a, b), -Number.MAX_VALUE);\n  }\n\n  getMin() {\n    return this.reduce((a, b) => Math.min(a, b), Number.MAX_VALUE);\n  }\n\n  someNaNOrInfinite() {\n    return this.vec3.some(x => isNaN(x) || !isFinite(x));\n  }\n\n  static ofBabylon(babylon) {\n    return new Vec3([babylon.x, babylon.y, babylon.z]);\n  }\n\n  static of(array) {\n    return array ? new Vec3(array) : new Vec3([0, 0, 0]);\n  }\n\n  static fromArray(array) {\n    return Vec3.of(array);\n  }\n\n  static random() {\n    return new Vec3([1, 2, 3].map(Math.random()));\n  }\n\n  /**\n   *\n   * @param {*} u: Vec3\n   */\n  static orthogonalBasisFromVector(u) {\n    const identityMatrix = [Vec3.e1, Vec3.e2, Vec3.e3];\n    //choose pivot\n    let pivot = 0;\n    for (let i = 0; i < 3; i++) {\n      if (u.vec3[i] !== 0) {\n        pivot = i;\n        break;\n      }\n    }\n    let v = identityMatrix[(pivot + 1) % 3].add(\n      identityMatrix[pivot].scale(-u.vec3[(pivot + 1) % 3] / u.vec3[pivot])\n    );\n    v = v.normalize();\n    let w = identityMatrix[(pivot + 2) % 3].add(\n      identityMatrix[pivot].scale(-u.vec3[(pivot + 2) % 3] / u.vec3[pivot])\n    );\n    w = w.normalize();\n    w = w.sub(v.scale(v.dot(w)));\n    return { u: u.normalize(), v: v, w: w.normalize() };\n  }\n\n  static ONES = Vec3.of([1, 1, 1]);\n  static ZERO = Vec3.of([0, 0, 0]);\n  static e1 = new Vec3([1, 0, 0]);\n  static e2 = new Vec3([0, 1, 0]);\n  static e3 = new Vec3([0, 0, 1]);\n}\n\nexport default Vec3;\n","import NodeItem from \"./NodeItem\";\n\nclass AssetNodeItem extends NodeItem {\n  constructor(mesh, assetName, keyValueMap = {}) {\n    super(mesh, keyValueMap);\n    this.assetName = assetName;\n  }\n\n  toDict() {\n    const ans = super.toDict();\n    ans.assetName = this.assetName;\n    return ans;\n  }\n}\n\nexport default AssetNodeItem;\n","import NodeItem from \"./NodeItem\";\nimport { Maybe } from \"monet\";\nimport Util3d from \"../Util3d/Util3d\";\nimport { Color3 } from \"@babylonjs/core\";\n\nclass Box extends NodeItem {\n  static DEFAULT_SIZE = 0.5;\n\n  constructor(mesh, size = Box.DEFAULT_SIZE, keyValueMap = {}) {\n    super(mesh, keyValueMap);\n    this.size = size;\n  }\n\n  toDict() {\n    const dict = super.toDict();\n    dict.size = this.size;\n    return dict;\n  }\n\n  ofDict(scene, dict = null, mainView = null) {\n    return Box.ofDict(scene, dict, mainView);\n  }\n\n  getType = () => Box.TYPE;\n\n  static TYPE = \"Box\";\n\n  static ofDict(scene, dict = null, mainView = null) {\n    const maybeDict = Maybe.fromNull(dict);\n    const size = maybeDict\n      .flatMap((z) => Maybe.fromNull(z.size))\n      .orSome(Box.DEFAULT_SIZE);\n    const name = maybeDict\n      .flatMap((z) => Maybe.fromNull(z.name))\n      .orSome(`Box${Math.floor(Math.random() * 1e3)}`);\n    const keyValueMap = maybeDict\n      .flatMap((d) => Maybe.fromNull(d.keyValueMap))\n      .orUndefined();\n\n    const boxMesh = Util3d.createBox(\n      scene,\n      new Color3(Math.random(), Math.random(), Math.random()),\n      size,\n      name\n    );\n    NodeItem.mapDict2Mesh(dict, boxMesh);\n    return new Box(boxMesh, size, keyValueMap);\n  }\n}\n\nexport default Box;\n","import NodeItem from \"./NodeItem\";\nimport Util3d from \"../Util3d/Util3d\";\nimport Vec3 from \"../Math/Vec3\";\nimport { Maybe } from \"monet\";\nimport Constants from \"../Utils/Constants\";\nimport {\n  Vector3,\n  Axis,\n  Color3,\n  Observable,\n  StandardMaterial,\n  Quaternion\n} from \"@babylonjs/core\";\nimport _isEqual from \"lodash/isEqual\";\n\nclass BoxRegion extends NodeItem {\n  constructor(mesh, corners, keyPoints, keyValueMap = {}) {\n    super(mesh, keyValueMap);\n    this.corners = corners; // in local coordinates, in relation to center of mass\n    this.keyPoints = keyPoints;\n  }\n\n  toDict() {\n    const dict = super.toDict();\n    dict.corners = this.corners;\n    return dict;\n  }\n\n  toForm() {\n    const schema = super.toForm();\n    schema.jsonSchema.properties[\"dimensions\"] = {\n      type: \"object\",\n      title: \"Dimensions\",\n      properties: {\n        lower: {\n          type: \"object\",\n          title: \"Lower Corner\",\n          properties: {\n            x: {\n              type: \"number\",\n              title: \"x\"\n            },\n            y: {\n              type: \"number\",\n              title: \"y\"\n            }\n          }\n        },\n        size: {\n          type: \"object\",\n          title: \"Size\",\n          properties: {\n            scaleX: {\n              type: \"number\",\n              title: \"scale-X\"\n            },\n            scaleY: {\n              type: \"number\",\n              title: \"scale-Y\"\n            }\n          }\n        }\n      }\n    };\n    schema.uiSchema[\"dimensions\"] = { \"ui:widget\": \"collapse\" };\n    // global ref coordinates\n    const worldCorners = this.keyPoints\n      .map(x => Util3d.getWorldCoordinates(x, x.position))\n      .map(x => x.toArray());\n    schema.data[\"dimensions\"] = {\n      lower: {\n        x: worldCorners[0][0],\n        y: worldCorners[0][1]\n      },\n      size: {\n        // TODO: warning, doesn't take into account possible scaling\n        scaleX: this.corners[1][0] - this.corners[0][0],\n        scaleY: this.corners[1][1] - this.corners[0][1]\n      }\n    };\n    return schema;\n  }\n\n  ofForm(form) {\n    const oldForm = this.toForm();\n    const oldDimensions = oldForm.data.dimensions;\n    if (_isEqual(oldDimensions, form.dimensions)) {\n      super.ofForm(form);\n    } else {\n      this.ofFormDimensions(form);\n    }\n  }\n\n  ofDict(scene, dict = null, mainView = null) {\n    return BoxRegion.ofDict(scene, dict, mainView);\n  }\n\n  getType = () => BoxRegion.TYPE;\n\n  static TYPE = \"BoxRegion\";\n\n  ofFormDimensions(form) {\n    const newLowerPositionInWorldCoordinates = Vector3.FromArray(\n      [form.dimensions.lower.x, form.dimensions.lower.y, 0].map(\n        Number.parseFloat\n      )\n    );\n    const newLocalDimensions = [\n      form.dimensions.size.scaleX,\n      form.dimensions.size.scaleY\n    ].map(Number.parseFloat);\n    const localLowerPosition = Util3d.getLocalCoordinatesFromWorld(\n      this.keyPoints[0],\n      newLowerPositionInWorldCoordinates\n    ).toArray();\n    const notify = i =>\n      this.keyPoints[i].observers.notifyObservers({\n        updatedPointMesh: this.keyPoints[i],\n        is2updateServer: false\n      });\n    this.keyPoints[0].position = new Vector3(\n      localLowerPosition[0],\n      localLowerPosition[1],\n      this.keyPoints[0].position.z\n    );\n    notify(0);\n    this.keyPoints[1].position = new Vector3(\n      localLowerPosition[0] + newLocalDimensions[0],\n      localLowerPosition[1] + newLocalDimensions[1],\n      this.keyPoints[1].position.z\n    );\n    notify(1);\n  }\n\n  static ofDict(scene, dict = null, mainView = null) {\n    if (!dict) throw \"null dictionary describing Box region\";\n    const name = Maybe.fromNull(dict.name).orSome(\n      `BoxRegion${Math.floor(Math.random() * 1e3)}`\n    );\n    const mesh = createBoxRegionMesh(dict, name, scene);\n\n    const material = new StandardMaterial(`BoxRegionMaterial${name}`, scene);\n    const color = new Color3(dict.color[0], dict.color[1], dict.color[2]);\n    material.diffuseColor = color;\n    material.emissiveColor = color;\n    material.backFaceCulling = false;\n    mesh.material = material;\n\n    mesh.visibility = 0.25;\n\n    Maybe.fromNull(dict.quaternion).forEach(quaternion => {\n      const babylonQuaternion = new Quaternion(\n        quaternion[1],\n        quaternion[2],\n        quaternion[3],\n        quaternion[0]\n      );\n      mesh.rotationQuaternion = babylonQuaternion.normalize();\n    });\n\n    const keyPoints = createPlaceHolderKeyPoints(\n      scene,\n      dict.corners.map(x => Vec3.of(x).toBabylon()),\n      mesh,\n      mainView\n    );\n    return new BoxRegion(mesh, dict.corners, keyPoints, dict.keyValueMap);\n  }\n}\n\nconst RADIUS = Constants.RADIUS;\nconst FACES = [\n  [0, 1, 2],\n  [2, 3, 0],\n  [4, 5, 6],\n  [6, 7, 4],\n  [0, 1, 5],\n  [5, 4, 0],\n  [3, 2, 6],\n  [6, 7, 3],\n  [1, 2, 6],\n  [6, 5, 1],\n  [0, 3, 7],\n  [7, 4, 0]\n];\n\n/**\n * @param boxRegion: {position: 3-array, corners: array of 3-arrays }\n */\nfunction createBoxRegionMesh(boxRegion, name, scene) {\n  // centered corners vec\n  const corners = boxRegion.corners.map(x => Vec3.of(x).toBabylon());\n  const d = corners[1].subtract(corners[0]);\n  const middlePoint = Vec3.of(boxRegion.position).toBabylon();\n  const shape = [\n    corners[0],\n    corners[0].add(Axis.X.scale(d.x)),\n    corners[0].add(new Vector3(d.x, d.y, 0)),\n    corners[0].add(Axis.Y.scale(d.y))\n  ];\n  const h = new Vector3(0, 0, d.z);\n  const boxRegionMesh = {\n    positions: [\n      shape[0],\n      shape[1],\n      shape[2],\n      shape[3],\n      shape[0].add(h),\n      shape[1].add(h),\n      shape[2].add(h),\n      shape[3].add(h)\n    ],\n    faces: FACES\n  };\n  const mesh = Util3d.meshFromPositionAndFaces(\n    name,\n    scene,\n    boxRegionMesh.positions,\n    boxRegionMesh.faces\n  );\n  mesh.position = middlePoint;\n  return mesh;\n}\n\nfunction createNewMeshFromOldUsingNewBox(newBox, scene, mesh, item) {\n  const average = Util3d.pointAverageVec3(newBox.corners.map(x => Vec3.of(x)));\n  newBox.position = average.toArray();\n  newBox.corners = newBox.corners.map(x => Vec3.of(x).sub(average).toArray());\n\n  const newMesh = createBoxRegionMesh(newBox, mesh.name, scene);\n  newMesh.position = mesh.position;\n  newMesh.rotationQuaternion = mesh.rotationQuaternion;\n  newMesh.locallyTranslate(average.toBabylon());\n  newMesh.material = mesh.material;\n  newMesh.visibility = mesh.visibility;\n  newMesh.parent = mesh.parent;\n\n  item.mesh = newMesh;\n  item.corners = newBox.corners;\n\n  const childrenCopy = [...mesh._children];\n  childrenCopy.forEach(c => {\n    mesh.removeChild(c);\n    c.parent = newMesh;\n  });\n  item.keyPoints.forEach((k, j) => {\n    k.position = Vec3.of(newBox.corners[j]).toBabylon();\n  });\n  // dispose old mesh\n  mesh.dispose();\n}\n\nconst getKeyPointObserverFunction = (mainView, scene) => {\n  return ({ updatedPointMesh, is2updateServer }) => {\n    mainView\n      .getNodeFromTree(updatedPointMesh.parent.name)\n      .forEach(boxRegionTreeNode => {\n        const index = updatedPointMesh.index;\n        const item = boxRegionTreeNode.item;\n        const mesh = item.mesh;\n        const name = mesh.name;\n\n        let newBox = {\n          position: Vec3.ofBabylon(mesh.position).toArray(),\n          corners: item.corners\n        };\n        newBox.corners[index] = Vec3.ofBabylon(\n          updatedPointMesh.position\n        ).toArray();\n\n        createNewMeshFromOldUsingNewBox(newBox, scene, mesh, item);\n        mainView.addGizmo();\n\n        if (is2updateServer) {\n          mainView.updateNodeInServer(name);\n          mainView.getNodeFromTree(name).forEach(node => {\n            mainView.setProperties(node.item.toForm());\n          });\n        }\n      });\n  };\n};\n\nconst createPlaceHolderKeyPoints = (\n  scene,\n  corners,\n  boxRegionMesh,\n  mainView\n) => {\n  const keyPoints = [];\n  corners.forEach((corner, i) => {\n    const p = corner;\n\n    const keyPoint = Util3d.createSphere(\n      scene,\n      new Color3(0.25, 0.25, 0.25),\n      RADIUS,\n      `${boxRegionMesh.name}keyPoint${i}`,\n      true\n    );\n\n    keyPoint.parent = boxRegionMesh;\n    keyPoint.position = p;\n    keyPoint.index = i;\n    keyPoint.observers = new Observable();\n    keyPoint.observers.add(getKeyPointObserverFunction(mainView, scene));\n    keyPoints.push(keyPoint);\n  });\n  return keyPoints;\n};\n\nexport default BoxRegion;\n","import NodeItem from \"./NodeItem\";\nimport Vec3 from \"../Math/Vec3\";\nimport Util3d from \"../Util3d/Util3d\";\nimport { Maybe } from \"monet\";\nimport { Quaternion, MeshBuilder } from \"@babylonjs/core\";\n\n// ROS/RVIZ default referential\nconst THETA = -Math.PI / 2;\nconst ROS_ORIGIN = {\n  position: [0, 0, 0],\n  scaling: [1, -1, 1],\n  quaternion: [Math.cos(THETA / 2), Math.sin(THETA / 2), 0, 0]\n};\n\nclass GlobalRef extends NodeItem {\n  constructor(mesh, keyValueMap = {}) {\n    super(mesh, keyValueMap);\n  }\n\n  toForm() {\n    const form = super.toForm();\n    form.uiSchema.name = {\n      \"ui:disabled\": true\n    };\n    return form;\n  }\n\n  getMouseContextActions() {\n    return [];\n  }\n\n  getType = () => GlobalRef.TYPE;\n\n  static TYPE = \"GlobalRef\";\n\n  static NAME = \"Global ref\";\n\n  static ofDict(scene, dict = null, mainView = null) {\n    const rosOrigin = GlobalRef.getRosOrigin(scene);\n\n    const globalRefMesh = Util3d.referentialBuilder(scene)\n      .name(GlobalRef.NAME)\n      .isPickable(true)\n      .boxParams({ isVisible: true, size: 0.25 })\n      .build();\n\n    globalRefMesh.parent = rosOrigin;\n\n    NodeItem.mapDict2Mesh(dict, globalRefMesh);\n\n    return new GlobalRef(\n      globalRefMesh,\n      Maybe.fromNull(dict)\n        .flatMap(d => Maybe.fromNull(d.keyValueMap))\n        .orUndefined()\n    );\n  }\n\n  static getRosOrigin(scene) {\n    const rosOrigin = MeshBuilder.CreateBox(\n      \"ROS_ORIGIN\",\n      { size: 1e-3 },\n      scene\n    );\n    rosOrigin.isVisible = false;\n    rosOrigin.isPickable = false;\n    rosOrigin.position = Vec3.of(ROS_ORIGIN.position).toBabylon();\n    rosOrigin.scaling = Vec3.of(ROS_ORIGIN.scaling).toBabylon();\n    const quaternion = new Quaternion(\n      ROS_ORIGIN.quaternion[1],\n      ROS_ORIGIN.quaternion[2],\n      ROS_ORIGIN.quaternion[3],\n      ROS_ORIGIN.quaternion[0]\n    );\n    rosOrigin.rotationQuaternion = quaternion.normalize();\n    return rosOrigin;\n  }\n\n  /**\n   *\n   * @param {*} x: Babylon Vector3 in World coordinates\n   *\n   * returns Babylon Vector3 vector in ROS coordinates\n   */\n  static inverseCoordinates(x) {\n    /**\n     * Solves RS\\eta + p = x\n     *\n     * \\eta = S^(⁻1)R^T(x-p)\n     */\n    const quaternion = ROS_ORIGIN.quaternion;\n    const rotationMatrix = Util3d.getRotationMatrix({\n      rotationQuaternion: new Quaternion(\n        quaternion[1],\n        quaternion[2],\n        quaternion[3],\n        quaternion[0]\n      )\n    });\n    const scaling = Vec3.of(ROS_ORIGIN.scaling).map(z => 1 / z);\n    const pos = Vec3.of(ROS_ORIGIN.position);\n    const result = scaling.mul(\n      rotationMatrix.dotVec(Vec3.ofBabylon(x).sub(pos))\n    );\n    return result.map(z => (Math.abs(z) < 1e-5 ? 0 : z)).toBabylon();\n  }\n\n  /**\n   *\n   * @param {*} x: Babylon Vector3 in ROS coordinates\n   *\n   * returns Babylon Vector3 vector in World coordinates\n   */\n  static forwardCoordinates(x) {\n    /**\n     * computes RS\\eta + p = x\n     */\n    const quaternion = ROS_ORIGIN.quaternion;\n    const rotationMatrix = Util3d.getRotationMatrix({\n      rotationQuaternion: new Quaternion(\n        quaternion[1],\n        quaternion[2],\n        quaternion[3],\n        quaternion[0]\n      )\n    });\n    const scaling = Vec3.of(ROS_ORIGIN.scaling);\n    const pos = Vec3.of(ROS_ORIGIN.position);\n    const result = rotationMatrix\n      .prodVec(scaling.mul(Vec3.ofBabylon(x)))\n      .add(pos);\n    return result.map(z => (Math.abs(z) < 1e-5 ? 0 : z)).toBabylon();\n  }\n}\n\nexport default GlobalRef;\n","import NodeItem from \"./NodeItem\";\nimport Util3d from \"../Util3d/Util3d\";\nimport { Color3, Vector3, Observable, Curve3 } from \"@babylonjs/core\";\nimport Constants from \"../Utils/Constants\";\nimport { Quaternion } from \"@babylonjs/core/Maths/math\";\nimport GraphEmbedding from \"../Graph/GraphEmbedding\";\nimport Graph from \"../Graph/Graph\";\nimport Vec3 from \"../Math/Vec3\";\nimport { Maybe } from \"monet\";\nimport React from \"react\";\nimport _get from \"lodash/get\";\nimport { UndoManager } from \"mov-fe-lib-core\";\n\n/**\n * One graph per scene\n */\nclass GraphItem extends NodeItem {\n  constructor(scene, mainView, name = GraphItem.NAME, keyValueMap = {}) {\n    const sceneId = scene.getUniqueId();\n    // super() must be called before using _this_.\n    if (\n      sceneId in graphItemInstances &&\n      !graphItemInstances[sceneId].mesh.isDisposed()\n    ) {\n      return graphItemInstances[sceneId];\n    }\n\n    const graphPlaceHolder = getGraphPlaceHolder(scene, name);\n    graphPlaceHolder.onClick = () =>\n      (this.graphFormMapper = this.getDefaultFormMapper());\n\n    super(graphPlaceHolder, keyValueMap);\n    graphItemInstances[sceneId] = this;\n\n    // object properties\n    this.graph = new GraphEmbedding();\n    this.scene = scene;\n    this.mainView = mainView;\n    this.meshByEdgeId = {};\n    this.meshByVertexId = {};\n    this.graphFormMapper = this.getDefaultFormMapper();\n  }\n\n  getType = () => GraphItem.TYPE;\n\n  toDict() {\n    const dict = super.toDict();\n    const adjMap = this.graph.getAdjMap();\n    const vertices = { ...this.graph.getVertices() };\n    const edges = { ...this.graph.getEdges() };\n\n    Object.keys(vertices).forEach(k => {\n      this.graph\n        .getVertexByIndex(k)\n        .forEach(({ position, id, keyValueMap }) => {\n          vertices[k] = {\n            position: Vec3.ofBabylon(position).toArray(),\n            id: id,\n            keyValueMap: keyValueMap\n          };\n        });\n    });\n\n    Object.keys(edges).forEach(k => {\n      const ids = Graph.key2Edge(k);\n      this.graph\n        .getEdgeByIndex(...ids)\n        .forEach(({ edge, keyValueMap, weight }) => {\n          edges[k] = {\n            ids: ids,\n            positions: edge.map(({ position }) =>\n              Vec3.ofBabylon(position).toArray()\n            ),\n            keyValueMap: keyValueMap,\n            weight: weight,\n            isCurve: edge.map(v => v.isCurve)\n          };\n        });\n    });\n\n    dict[\"adjMap\"] = adjMap;\n    dict[\"vertices\"] = vertices;\n    dict[\"edges\"] = edges;\n    dict[\"vertexGenerator\"] = this.graph.vertexGenerator;\n    return dict;\n  }\n\n  toForm() {\n    const form = super.toForm();\n    delete form.jsonSchema.properties.position;\n    delete form.jsonSchema.properties.quaternion;\n    delete form.jsonSchema.properties.color;\n    delete form.uiSchema.position;\n    delete form.uiSchema.quaternion;\n    delete form.uiSchema.color;\n    delete form.data.position;\n    delete form.data.quaternion;\n    delete form.data.color;\n    return this.graphFormMapper.toForm(form);\n  }\n\n  ofForm(form) {\n    this.name = form.name;\n    this.mesh.name = form.name;\n    this.graphFormMapper.ofForm(form);\n  }\n\n  getDefaultFormMapper() {\n    return {\n      toForm: form => form,\n      ofForm: form => (this.keyValueMap = { ...form.annotations })\n    };\n  }\n\n  getToFormVertex(vertexMesh) {\n    return {\n      toForm: form =>\n        this.graph\n          .getVertex(vertexMesh.position)\n          .map(rVertex => {\n            form.jsonSchema.properties[\"positionVertex\"] = {\n              type: \"object\",\n              title: `Position Vertex ${rVertex.id}`,\n              properties: {\n                x: {\n                  type: \"number\",\n                  title: \"x\"\n                },\n                y: {\n                  type: \"number\",\n                  title: \"y\"\n                },\n                z: {\n                  type: \"number\",\n                  title: \"z\"\n                }\n              }\n            };\n\n            form.uiSchema[\"positionVertex\"] = {\n              \"ui:widget\": \"collapse\"\n            };\n\n            form.data[\"positionVertex\"] = {\n              x: vertexMesh.position.x,\n              y: vertexMesh.position.y,\n              z: vertexMesh.position.z\n            };\n            NodeItem.setAnnotations2Form(form, rVertex.keyValueMap);\n            form.jsonSchema.properties[\n              \"annotations\"\n            ].title = `Annotations Vertex ${rVertex.id}`;\n            return form;\n          })\n          .orSome(form),\n      ofForm: form => {\n        let position = _get(form, \"positionVertex\", vertexMesh.position);\n        position = [position.x, position.y, position.z].map(Number.parseFloat);\n        this.graph\n          .getVertex(vertexMesh.position)\n          .forEach(\n            rVertex =>\n              (rVertex.keyValueMap = { ..._get(form, \"annotations\", {}) })\n          );\n        this.updateVertexPosition(\n          vertexMesh.vertexId,\n          Vector3.FromArray(position),\n          false\n        );\n      }\n    };\n  }\n\n  getToFormEdge(edgeMesh) {\n    return {\n      toForm: form => {\n        const edgePositions = edgeMesh.edgeIndexes\n          .map(index =>\n            Maybe.fromNull(this.meshByVertexId[index]).map(\n              mesh => mesh.position\n            )\n          )\n          .filter(maybe => maybe.isSome())\n          .map(maybe => maybe.some());\n        console.log(\"FORM2EDGE\", edgePositions);\n        if (edgePositions.length === 0) return form;\n        return this.graph\n          .getEdge(edgePositions[0], edgePositions[1])\n          .map(rEdge => {\n            form.jsonSchema.properties[\"positionEdge\"] = {\n              type: \"object\",\n              title: `Position Edge ${edgeMesh.edgeIndexes}`,\n              properties: {\n                x: {\n                  type: \"number\",\n                  title: \"x\"\n                },\n                y: {\n                  type: \"number\",\n                  title: \"y\"\n                },\n                z: {\n                  type: \"number\",\n                  title: \"z\"\n                }\n              }\n            };\n            form.jsonSchema.properties[\"weight\"] = {\n              type: \"number\",\n              title: \"Weight\"\n            };\n\n            form.uiSchema[\"positionEdge\"] = {\n              \"ui:widget\": \"collapse\"\n            };\n\n            const meanPoint = Util3d.pointAverage(edgePositions);\n            form.data[\"positionEdge\"] = {\n              x: meanPoint.x,\n              y: meanPoint.y,\n              z: meanPoint.z\n            };\n            form.data[\"weight\"] = rEdge.weight;\n            NodeItem.setAnnotations2Form(form, rEdge.keyValueMap);\n            form.jsonSchema.properties[\n              \"annotations\"\n            ].title = `Annotations Edge ${edgeMesh.edgeIndexes}`;\n            return form;\n          })\n          .orSome(form);\n      },\n      ofForm: form => {\n        const { edgeIndexes } = edgeMesh;\n\n        //update edges positions\n        const edgePositions = edgeIndexes.map(\n          index => this.meshByVertexId[index].position\n        );\n        const edgePosition = Util3d.pointAverage(edgePositions);\n        let newEdgePosition = _get(form, \"positionEdge\", edgePosition);\n        newEdgePosition = [\n          newEdgePosition.x,\n          newEdgePosition.y,\n          newEdgePosition.z\n        ].map(Number.parseFloat);\n        newEdgePosition = Vector3.FromArray(newEdgePosition);\n        edgePositions.forEach((vertexPos, i) =>\n          this.updateVertexPosition(\n            edgeIndexes[i],\n            vertexPos.add(newEdgePosition.subtract(edgePosition)),\n            false\n          )\n        );\n\n        const updateEdgeFromForm = rEdge => {\n          rEdge.keyValueMap = { ..._get(form, \"annotations\", {}) };\n          rEdge.weight = Number.parseFloat(form.weight);\n        };\n        this.graph\n          .getEdgeByIndex(edgeIndexes[0], edgeIndexes[1])\n          .forEach(updateEdgeFromForm);\n        this.graph\n          .getEdgeByIndex(edgeIndexes[1], edgeIndexes[0])\n          .forEach(updateEdgeFromForm);\n      }\n    };\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                   Graph Operations                                   *\n   *                                                                                      */\n  //========================================================================================\n\n  addEdge(edge, edgeIndexes = [], isEdgeCurve = [false, false]) {\n    const [i, j] = edge;\n    const [iIndex, jIndex] = edgeIndexes;\n    const [iIsCurve, jIsCurve] = isEdgeCurve;\n    if (this.hasEdge(i, j)) return;\n    this.buildVertex(i, iIndex, iIsCurve);\n    this.buildVertex(j, jIndex, jIsCurve);\n    this.buildEdge(i, j);\n    return this;\n  }\n\n  addCurveEdge(edge) {\n    const points = GraphItem.getCurveEdgePoints(edge, 0.75);\n    for (let i = 0; i < points.length - 1; i++) {\n      const partialEdge = [points[i], points[i + 1]];\n      this.addEdge(partialEdge, [], [i !== 0, i !== points.length - 2]);\n    }\n    return this;\n  }\n\n  delEdge(i, j) {\n    //Warning: multiple call of getEdge, check for optimization\n    this.graph.getEdge(i, j).forEach(({ edge }) => {\n      const ids = edge.map(v => v.id);\n      const ijKey = Graph.edgeKey(ids[0], ids[1]);\n      const jiKey = Graph.edgeKey(ids[1], ids[0]);\n      Maybe.fromNull(this.meshByEdgeId[ijKey]).forEach(mesh => mesh.dispose());\n      delete this.meshByEdgeId[ijKey];\n      delete this.meshByEdgeId[jiKey];\n      this.graph.delEdge(...edge.map(e => e.position));\n\n      // remove vertex if have no neighbors\n      const abstractGraph = this.graph.getAbstractGraph();\n      edge.forEach(({ id, position }) => {\n        const neighbors = abstractGraph.getNeighbors(id);\n        if (neighbors.length === 0) {\n          this.delVertex(position);\n        }\n      });\n    });\n  }\n\n  delCurveEdge(edge) {\n    const points = GraphItem.getCurveEdgePoints(edge, 0.75);\n    for (let k = 0; k < points.length - 1; k++) {\n      const [i, j] = [points[k], points[k + 1]];\n      this.delEdge(i, j);\n    }\n    return this;\n  }\n\n  /**\n   *\n   * @param {*} i: Vector3\n   * @param {*} j: Vector3\n   */\n  hasEdge(i, j) {\n    return this.graph.hasEdge(i, j);\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                    Private Methods                                   *\n   *                                                                                      */\n  //========================================================================================\n\n  /**\n   *\n   * @param {*} vertex: Vector3\n   * @param {*} vertexIndex: integer representing index of vertex (can be undefined)\n   *\n   */\n  buildVertex(vertex, vertexIndex, isCurve = false) {\n    if (this.doesVertexCollideWithEdge(vertex)) {\n      this.resolveVertexEdgeCollision(vertex);\n    }\n    this.buildSimpleVertex(vertex, vertexIndex, isCurve);\n  }\n\n  buildSimpleVertex(vertex, vertexIndex, isCurve = false) {\n    const maybeVertex = this.graph.getVertex(vertex);\n    maybeVertex.forEach(rVertex => {\n      const { isCurve, id } = rVertex;\n      if (isCurve) {\n        const degree = this.graph.getAbstractGraph().getNeighbors(id).length;\n        if (degree >= 2) {\n          rVertex.isCurve = false;\n          this.meshByVertexId[rVertex.id].dispose();\n          this.createVertexMesh(rVertex);\n        }\n      }\n    });\n    maybeVertex.orElseRun(() => {\n      // if vertex doesn't exist\n      this.graph.addVertex(vertex, vertexIndex, isCurve);\n      this.graph.getVertex(vertex).forEach(this.createVertexMesh);\n    });\n  }\n\n  createVertexMesh = rVertex => {\n    const { isCurve } = rVertex;\n    const vertexMesh = GraphItem.getVertexMesh(\n      this.scene,\n      rVertex.position,\n      isCurve ? Color3.Blue() : Color3.Gray(),\n      isCurve ? (2 * Constants.RADIUS) / 3 : Constants.RADIUS\n    );\n    vertexMesh.parent = this.mesh;\n    vertexMesh.vertexId = rVertex.id;\n    this.addObserver2VertexMesh(vertexMesh);\n    this.addOnClickVertex(vertexMesh);\n    this.meshByVertexId[rVertex.id] = vertexMesh;\n  };\n\n  /**\n   * Side effect function beware\n   */\n  addObserver2VertexMesh(vertexMesh) {\n    vertexMesh.observers = new Observable();\n    vertexMesh.observers.add(this.getVertexObs());\n  }\n\n  getVertexObs = () => ({ updatedPointMesh, is2updateServer }) => {\n    const position = updatedPointMesh.position;\n    const id = updatedPointMesh.vertexId;\n    this.updateVertexPosition(id, position, is2updateServer);\n    this.updateCurvedNeighbors([id], is2updateServer);\n    if (is2updateServer) {\n      this.graphFormMapper = this.getToFormVertex(updatedPointMesh);\n      this.mainView.setProperties(this.toForm());\n    }\n  };\n\n  updateCurvedNeighbors(movedVertexIds, is2updateServer) {\n    this.getCurvedNeighbors(movedVertexIds)\n      .map(({ id, position }) => ({\n        id,\n        position: this.heatFlow(id, position)\n      }))\n      .forEach(({ id, position }) =>\n        this.updateVertexPosition(id, position, is2updateServer)\n      );\n  }\n\n  getCurvedNeighbors(vertexIds) {\n    const result = [];\n    const visitedVertex = {};\n    vertexIds.forEach(id => (visitedVertex[id] = true));\n    const abstractGraph = this.graph.getAbstractGraph();\n    const vertexStack = vertexIds\n      .map(id => abstractGraph.getNeighbors(id))\n      .flatMap(n => n)\n      .filter(id => !(id in visitedVertex));\n    while (vertexStack.length > 0) {\n      const u = vertexStack.pop();\n      visitedVertex[u] = true;\n      this.graph.getVertexByIndex(u).forEach(rVertex => {\n        const { isCurve, id } = rVertex;\n        if (isCurve) {\n          result.push(rVertex);\n          vertexStack.push(\n            ...abstractGraph.getNeighbors(id).filter(j => !(j in visitedVertex))\n          );\n        }\n      });\n    }\n    return result;\n  }\n\n  heatFlow(id, position) {\n    const dt = 0.1;\n    const abstractGraph = this.graph.getAbstractGraph();\n    const neighbors = abstractGraph\n      .getNeighbors(id)\n      .map(this.graph.getVertexByIndex)\n      .filter(m => m.isSome())\n      .map(m => m.some())\n      .map(v => v.position);\n    const x = position;\n    const df = x\n      .scale(neighbors.length)\n      .subtract(neighbors.reduce((e, v) => e.add(v), Vector3.Zero()));\n    return x.add(df.scale(-dt));\n  }\n\n  addOnClickVertex(vertexMesh) {\n    vertexMesh.onClick = () => {\n      const actions = [];\n      actions.push({\n        icon: props => <i className=\"fas fa-trash\" {...props}></i>,\n        action: () => {\n          this.mainView\n            .getUndoManager()\n            .doIt(this.getUndoDeleteVertex(vertexMesh));\n        },\n        name: \"Delete Node [Del]\"\n      });\n      this.mainView.setContextActions(actions);\n    };\n  }\n\n  getUndoDeleteVertex(vertexMesh) {\n    const p = vertexMesh.position;\n    const id = vertexMesh.vertexId;\n    const rVertex = this.graph.getVertexByIndex(id).some();\n    const isCurve = rVertex.isCurve;\n    const neigh = this.graph.getNeighbors(rVertex.position);\n    const simpleNeigh = neigh.filter(x => !x.isCurve);\n    const curveNeigh = neigh.filter(x => x.isCurve);\n    const curvedPaths = curveNeigh.map(v =>\n      this.graph.getCurvedPathFromVertex(v.position)\n    );\n    return UndoManager.actionBuilder()\n      .doAction(() => {\n        if (!isCurve)\n          simpleNeigh.forEach(v => {\n            this.delEdge(p, v.position);\n          });\n        curvedPaths.forEach(path => {\n          for (let i = 0; i < path.length - 1; i++) {\n            this.delEdge(path[i].position, path[i + 1].position);\n          }\n        });\n        this.mainView.closeContextDial();\n        this.mainView.updateNodeInServer(this.name);\n      })\n      .undoAction(() => {\n        if (!isCurve)\n          simpleNeigh.forEach(v => {\n            this.addEdge([p, v.position], [id, v.id]);\n          });\n        curvedPaths.forEach(path => {\n          for (let i = 0; i < path.length - 1; i++) {\n            const edge = [path[i], path[i + 1]];\n            const edgeIndexes = edge.map(({ id }) => id);\n            const edgePos = edge.map(({ position }) => position);\n            const edgeIsCurve = edge.map(({ isCurve }) => isCurve);\n            this.addEdge(edgePos, edgeIndexes, edgeIsCurve);\n          }\n        });\n        this.mainView.updateNodeInServer(this.name);\n      })\n      .build();\n  }\n\n  highlightCurveEdge(vertexId) {\n    const meshes = this.getCurvedNeighbors([vertexId]).map(\n      ({ id }) => this.meshByVertexId[id]\n    );\n    this.mainView.highlightMeshesInScene(meshes);\n  }\n\n  delVertex(i) {\n    this.graph.getVertex(i).forEach(({ id }) => {\n      const neighbors = this.graph.getNeighbors(i);\n      neighbors.forEach(({ position }) => this.delEdge(i, position));\n      Maybe.fromNull(this.meshByVertexId[id]).forEach(mesh => mesh.dispose());\n      delete this.meshByVertexId[id];\n      this.graph.delVertex(i);\n      // delete neighbor if belong to curve\n      neighbors\n        .filter(({ isCurve }) => isCurve)\n        .forEach(({ position }) => this.delVertex(position));\n    });\n  }\n\n  /**\n   *\n   * @param {*} id: vertex to be updated id\n   * @param {*} newPosition: Vector3, new vertex position\n   * @param {*} is2updateServer: is to update in server boolean var\n   * @param {*} protectEdge: Pair<Int> with vertex indices\n   */\n  updateVertexPosition(\n    id,\n    newPosition,\n    is2updateServer = true,\n    protectEdge = []\n  ) {\n    this.meshByVertexId[id].position = newPosition; // redundant when called from addObserver2VertexMesh\n    this.graph.updateVertex(id, newPosition);\n    this.graph.getNeighbors(newPosition).forEach(rVertex => {\n      const i = id;\n      const j = rVertex.id;\n      if (!this.isEdgeInPair(i, j, protectEdge)) {\n        this.meshByEdgeId[Graph.edgeKey(i, j)].dispose();\n        this.graph.getEdgeByIndex(i, j).forEach(rEdge => {\n          this.buildEdge(newPosition, rVertex.position);\n        });\n      }\n      if (is2updateServer) this.mainView.updateNodeInServer(this.name);\n    });\n  }\n\n  isEdgeInPair(iIndex, jIndex, edgeIndexes) {\n    return (\n      edgeIndexes.length > 0 &&\n      edgeIndexes.includes(iIndex) &&\n      edgeIndexes.includes(jIndex)\n    );\n  }\n\n  /**\n   *\n   * @param {*} vertex: Vector3\n   */\n  doesVertexCollideWithEdge(vertex, radius = Constants.RADIUS / 4) {\n    /**\n     * if collides with vertex return false\n     * else compute distance from edge, if close enough return true else false\n     */\n    return this.graph\n      .getVertex(vertex)\n      .cata(\n        () =>\n          this.graph.getEdge(vertex).map(rEdge => {\n            const edge = rEdge.edge.map(v => v.position).map(Vec3.ofBabylon);\n            const e = edge[1].sub(edge[0]);\n            const x = Vec3.ofBabylon(vertex).sub(edge[0]);\n            const dot = e.dot(x) / e.dot(e);\n            if (dot < 0 || dot > 1) return false;\n            const dist = x.sub(e.scale(dot)).length();\n            return dist <= radius;\n          }),\n        rVertex => Maybe.none()\n      )\n      .orSome(false);\n  }\n\n  /**\n   * Deletes colliding edge and create 2 new edge with the split\n   *\n   * @param {*} vertex: Vector3\n   */\n  resolveVertexEdgeCollision(vertex) {\n    this.graph.getEdge(vertex).forEach(rEdge => {\n      const edgeVec3 = rEdge.edge\n        .map(({ position }) => position)\n        .map(Vec3.ofBabylon);\n      const edgeBabylon = rEdge.edge.map(v => v.position);\n\n      // compute intersection\n      const e = edgeVec3[1].sub(edgeVec3[0]).normalize();\n      const x = Vec3.ofBabylon(vertex).sub(edgeVec3[0]);\n      const proj = e.scale(x.dot(e));\n      const vertexInEdge = edgeVec3[0].add(proj).toBabylon();\n\n      // split operation\n      this.delEdge(edgeBabylon[0], edgeBabylon[1]);\n      this.addEdge([edgeBabylon[0], vertexInEdge]);\n      this.addEdge([vertexInEdge, edgeBabylon[1]]);\n      //import features\n      this.importFeatures2Edge(rEdge, edgeBabylon[0], vertexInEdge);\n      this.importFeatures2Edge(rEdge, vertexInEdge, edgeBabylon[1]);\n\n      this.graph.getEdge(edgeBabylon[0], vertexInEdge).forEach(leftEdge => {\n        this.graph.getEdge(vertexInEdge, edgeBabylon[1]).forEach(rightEdge => {\n          this.mainView\n            .getUndoManager()\n            .addIt(\n              this.getUndoResolveVertexEdgeCollision(rEdge, leftEdge, rightEdge)\n            );\n        });\n      });\n    });\n  }\n\n  getUndoResolveVertexEdgeCollision(oldEdge, leftEdge, rightEdge) {\n    const oldEdgePositions = oldEdge.edge.map(({ position }) => position);\n    const oldEdgeIndex = oldEdge.edge.map(({ id }) => id);\n    const leftEdgePositions = leftEdge.edge.map(({ position }) => position);\n    const leftEdgeIndex = leftEdge.edge.map(({ id }) => id);\n    const rightEdgePositions = rightEdge.edge.map(({ position }) => position);\n    const rightEdgeIndex = rightEdge.edge.map(({ id }) => id);\n    return UndoManager.actionBuilder()\n      .doAction(() => {\n        // split operation\n        this.delEdge(...oldEdgePositions);\n        this.addEdge(leftEdgePositions, leftEdgeIndex);\n        this.addEdge(rightEdgePositions, rightEdgeIndex);\n\n        //import features\n        this.importFeatures2Edge(oldEdge, ...leftEdgePositions);\n        this.importFeatures2Edge(oldEdge, ...rightEdgePositions);\n      })\n      .undoAction(() => {\n        // split operation\n        this.delEdge(...leftEdgePositions);\n        this.delEdge(...rightEdgePositions);\n        this.addEdge(oldEdgePositions, oldEdgeIndex);\n\n        //import features\n        this.importFeatures2Edge(oldEdge, ...oldEdgePositions);\n      })\n      .build();\n  }\n\n  /**\n   * Copy feature data of rEdgeWithData to edge (i,j)\n   * @param {*} rEdgeWithData\n   * @param {*} i\n   * @param {*} j\n   */\n  importFeatures2Edge(rEdgeWithData, i, j) {\n    this.graph.getEdge(i, j).forEach(({ edge }) => {\n      const [uId, vId] = edge.map(({ id }) => id);\n      this.graph\n        .getEdgeByIndex(uId, vId)\n        .forEach(rEdgePlus => rEdgePlus.importFeatures(rEdgeWithData));\n      this.graph\n        .getEdgeByIndex(vId, uId)\n        .forEach(rEdgeMinus => rEdgeMinus.importFeatures(rEdgeWithData));\n    });\n  }\n\n  /**\n   *\n   * @param {*} i: Vector3\n   * @param {*} j: Vector3\n   */\n  buildEdge(i, j) {\n    const { graph } = this;\n    graph.addEdge([i, j]);\n    graph.getVertex(i).forEach(rVertexI =>\n      graph.getVertex(j).forEach(rVertexJ => {\n        const edgeMesh = GraphItem.getEdgeMesh(this.scene, [\n          rVertexI.position,\n          rVertexJ.position\n        ]);\n        edgeMesh.parent = this.mesh;\n        const iIndex = rVertexI.id;\n        const jIndex = rVertexJ.id;\n        edgeMesh.edgeIndexes = [iIndex, jIndex];\n        this.addObserver2EdgeMesh(edgeMesh);\n        this.addOnClickEdge(edgeMesh);\n        this.meshByEdgeId[Graph.edgeKey(iIndex, jIndex)] = edgeMesh;\n        this.meshByEdgeId[Graph.edgeKey(jIndex, iIndex)] = edgeMesh;\n      })\n    );\n  }\n\n  addObserver2EdgeMesh(edgeMesh) {\n    edgeMesh.observers = new Observable();\n    edgeMesh.observers.add(this.getEdgeObs());\n  }\n\n  getEdgeObs = () => ({ updatedPointMesh, is2updateServer, displacement }) => {\n    const { edgeIndexes } = updatedPointMesh;\n\n    const edgePos = edgeIndexes\n      .map(i => this.meshByVertexId[i].position)\n      .map(Vec3.ofBabylon);\n\n    const v = Vec3.ofBabylon(displacement);\n    edgePos.forEach((vertexPos, i) =>\n      this.updateVertexPosition(\n        edgeIndexes[i],\n        vertexPos.add(v).toBabylon(),\n        is2updateServer,\n        edgeIndexes\n      )\n    );\n    this.updateCurvedNeighbors(edgeIndexes, is2updateServer);\n    if (is2updateServer) {\n      this.graphFormMapper = this.getToFormEdge(updatedPointMesh);\n      this.mainView.setProperties(this.toForm());\n    }\n  };\n\n  addOnClickEdge(edgeMesh) {\n    edgeMesh.onClick = this.getOnClickEdge(edgeMesh);\n  }\n\n  getOnClickEdge = edgeMesh => () => {\n    const actions = [];\n\n    actions.push({\n      icon: props => <i className=\"fas fa-trash\" {...props}></i>,\n      action: () => {\n        this.mainView.getUndoManager().doIt(this.getUndoDeleteEdge(edgeMesh));\n      },\n      name: \"Delete Edge [Del]\"\n    });\n    this.mainView.setContextActions(actions);\n  };\n\n  getUndoDeleteEdge(edgeMesh) {\n    const { edgeIndexes } = edgeMesh;\n    const edgeVertex = edgeIndexes\n      .map(i => this.graph.getVertexByIndex(i))\n      .map(maybeV => maybeV.some());\n    const edgeIsCurve = edgeVertex.some(v => v.isCurve);\n    return edgeIsCurve\n      ? this.getUndoDelCurveEdge(edgeVertex)\n      : this.getUndoDelLineEdge(edgeVertex);\n  }\n\n  getUndoDelCurveEdge(edgeVertex) {\n    // there should be at least one vertex is curve\n    const curvedVertex = edgeVertex.filter(v => v.isCurve)[0].position;\n    const curvePath = this.graph.getCurvedPathFromVertex(curvedVertex);\n    return UndoManager.actionBuilder()\n      .doAction(() => {\n        for (let i = 0; i < curvePath.length - 1; i++) {\n          this.delEdge(curvePath[i].position, curvePath[i + 1].position);\n        }\n        this.mainView.closeContextDial();\n        this.mainView.updateNodeInServer(this.name);\n      })\n      .undoAction(() => {\n        for (let i = 0; i < curvePath.length - 1; i++) {\n          const edge = [curvePath[i], curvePath[i + 1]];\n          const edgeIndexes = edge.map(({ id }) => id);\n          const edgePos = edge.map(({ position }) => position);\n          const edgeIsCurve = edge.map(({ isCurve }) => isCurve);\n          this.addEdge(edgePos, edgeIndexes, edgeIsCurve);\n        }\n        this.mainView.updateNodeInServer(this.name);\n      })\n      .build();\n  }\n\n  getUndoDelLineEdge(edgeVertex) {\n    const edgeIndexes = edgeVertex.map(({ id }) => id);\n    const edgePos = edgeVertex.map(({ position }) => position);\n    const edgeIsCurve = edgeVertex.map(({ isCurve }) => isCurve);\n    return UndoManager.actionBuilder()\n      .doAction(() => {\n        this.delEdge(...edgePos);\n        this.mainView.closeContextDial();\n        this.mainView.updateNodeInServer(this.name);\n      })\n      .undoAction(() => {\n        this.addEdge(edgePos, edgeIndexes, edgeIsCurve);\n        this.mainView.updateNodeInServer(this.name);\n      })\n      .build();\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                             Static Methods and Variables                             *\n   *                                                                                      */\n  //========================================================================================\n\n  static TYPE = \"GraphItem\";\n\n  static NAME = \"Roads\";\n\n  static ofDict(scene, dict = null, mainView = null) {\n    const graphItem = new GraphItem(\n      scene,\n      mainView,\n      dict.name,\n      dict.keyValueMap\n    );\n    const { adjMap, edges } = dict;\n    // create mesh of graph using addEdge\n    Object.keys(adjMap).forEach(i => {\n      Object.keys(adjMap[i]).forEach(j => {\n        if (i < j) {\n          const edge = edges[Graph.edgeKey(i, j)];\n          const posIJ = edge.positions.map(Vec3.of).map(p => p.toBabylon());\n          graphItem.addEdge(posIJ, [i, j], edge.isCurve);\n        }\n      });\n    });\n    //import dict data to graph Embedding structure\n    graphItem.graph.importData(dict);\n    return graphItem;\n  }\n\n  /**\n   *\n   * @param {*} scene: Babylon js scene\n   * @param {*} edgePositions: Array<Vector3>\n   * @param {*} color: Color3\n   */\n  static getEdgeWithVertexMeshes(\n    scene,\n    edgePositions,\n    color = Color3.Gray(),\n    radius = Constants.RADIUS\n  ) {\n    const ans = edgePositions.map(p =>\n      GraphItem.getVertexMesh(scene, p, color, radius)\n    );\n    ans.push(GraphItem.getEdgeMesh(scene, edgePositions, color, radius));\n    return ans;\n  }\n\n  static getCurveEdgeWithVertexMeshes(\n    scene,\n    edgePositions,\n    color = Color3.Gray(),\n    radius = Constants.RADIUS\n  ) {\n    const ans = [];\n    const i = edgePositions[0];\n    const j = edgePositions[2];\n    ans.push(GraphItem.getVertexMesh(scene, i, color, radius));\n    ans.push(GraphItem.getVertexMesh(scene, j, color, radius));\n    ans.push(GraphItem.getCurveEdgeMesh(scene, edgePositions, color, radius));\n    return ans;\n  }\n\n  static getVertexMesh(\n    scene,\n    vertexPosition,\n    color = Color3.Gray(),\n    radius = Constants.RADIUS\n  ) {\n    const sphere = Util3d.createSphere(scene, color, radius);\n    sphere.position = vertexPosition;\n    return sphere;\n  }\n\n  static getEdgeMesh(\n    scene,\n    edge,\n    color = Color3.Gray(),\n    radius = Constants.RADIUS\n  ) {\n    return Util3d.createTubeFromPoints(scene, edge, color, radius / 4);\n  }\n\n  static getCurveEdgeMesh(\n    scene,\n    edge,\n    color = Color3.Gray(),\n    radius = Constants.RADIUS,\n    error = 0.25\n  ) {\n    return Util3d.createTubeFromPoints(\n      scene,\n      GraphItem.getCurveEdgePoints(edge, error),\n      color,\n      radius / 4\n    );\n  }\n\n  static getCurveEdgePoints(edge, error = 0.25) {\n    const [i, k, j] = edge;\n    const halfD2x = i.subtract(k.scale(2)).add(j);\n    const halfD2xNorm = halfD2x.length();\n    let numberOfPoints =\n      halfD2xNorm < 1e-3 ? 2 : halfD2xNorm / Math.max(1e-6, error);\n    numberOfPoints = Math.floor(numberOfPoints);\n    // console.log(\"NUMBER OF POINTS\", numberOfPoints, halfD2x.length());\n    return Curve3.CreateQuadraticBezier(i, k, j, numberOfPoints).getPoints();\n  }\n}\n\nconst graphItemInstances = {};\n\nconst getGraphPlaceHolder = (scene, name) => {\n  const graphPlaceHolder = Util3d.createSphere(\n    scene,\n    Color3.Gray(),\n    Number.MIN_VALUE,\n    name,\n    false\n  );\n  graphPlaceHolder.position = Vector3.Zero();\n  graphPlaceHolder.scaling = Vector3.One();\n  graphPlaceHolder.rotationQuaternion = Quaternion.Identity();\n  graphPlaceHolder.visibility = 0.0;\n  return graphPlaceHolder;\n};\nexport default GraphItem;\n","import NodeItem from \"./NodeItem\";\nimport Util3d from \"../Util3d/Util3d\";\nimport { Maybe } from \"monet\";\nimport { MeshBuilder, StandardMaterial } from \"@babylonjs/core\";\n\nclass KeyPoint extends NodeItem {\n  constructor(mesh, keyValueMap) {\n    super(mesh, keyValueMap);\n  }\n\n  ofDict(scene, dict = null, mainView = null) {\n    return KeyPoint.ofDict(scene, dict, mainView);\n  }\n\n  getType = () => KeyPoint.TYPE;\n\n  static TYPE = \"KeyPoint\";\n\n  static ofDict(scene, dict = null, mainView = null) {\n    const name = Maybe.fromNull(dict)\n      .map((x) => x.name)\n      .orSome(`KeyPoint${Math.floor(Math.random() * 1e3)}`);\n\n    const mesh = MeshBuilder.CreatePolyhedron(\n      name,\n      { custom: TRIANGULAR_ANTIPRISM, size: KeyPoint.DEFAULT_SIZE },\n      scene\n    );\n    const material = new StandardMaterial(`KeyPointMaterial${name}`, scene);\n    mesh.material = material;\n    mesh.convertToFlatShadedMesh();\n\n    const axis = Util3d.referentialBuilder(scene)\n      .isPickable(false)\n      .boxParams({ isVisible: false, size: 0.1 * KeyPoint.DEFAULT_SIZE })\n      .name(`${name}Axis`)\n      .build();\n    axis.parent = mesh;\n\n    NodeItem.mapDict2Mesh(dict, mesh);\n    return new KeyPoint(mesh, dict.keyValueMap);\n  }\n\n  static DEFAULT_SIZE = 0.25;\n}\n\nconst TRIANGULAR_ANTIPRISM = {\n  name: \"Triangular Antiprism (Octahedron)\",\n  category: [\"Antiprism\"],\n  vertex: [\n    [0, 0, 1.414214],\n    [1.414214, 0, 0],\n    [0, 1.414214, 0],\n    [-1.414214, 0, 0],\n    [0, -1.414214, 0],\n    [0, 0, -1.414214],\n  ],\n  face: [\n    [0, 1, 2],\n    [0, 2, 3],\n    [0, 3, 4],\n    [0, 4, 1],\n    [1, 4, 5],\n    [1, 5, 2],\n    [2, 5, 3],\n    [3, 5, 4],\n  ],\n};\n\nexport default KeyPoint;\n","import AssetNodeItem from \"./AssetNodeItem\";\n\nclass Map extends AssetNodeItem {\n  constructor(mesh, size, textureSrc, assetName) {\n    super(mesh, assetName);\n    this.size = size;\n    this.textureSrc = textureSrc;\n  }\n\n  dispose() {\n    super.dispose();\n  }\n\n  toDict() {\n    const dict = super.toDict();\n    dict[\"size\"] = this.size;\n    dict[\"textureSrc\"] = this.textureSrc;\n    return dict;\n  }\n\n  toForm() {\n    const info = this.toDict();\n    const schema = {\n      jsonSchema: {\n        type: \"object\",\n        properties: {\n          oldName: {\n            type: \"string\",\n          },\n          name: {\n            type: \"string\",\n            title: \"Name\",\n          },\n          type: {\n            type: \"string\",\n            title: \"Type\",\n          },\n          assetName: {\n            type: \"string\",\n            title: \"Asset Name\",\n          },\n        },\n      },\n      uiSchema: {\n        type: {\n          \"ui:disabled\": true,\n        },\n        assetName: {\n          \"ui:disabled\": true,\n        },\n        oldName: {\n          \"ui:widget\": \"hidden\",\n        },\n      },\n      data: {\n        oldName: info.name,\n        name: info.name,\n        type: info.type,\n        assetName: info.assetName,\n      },\n    };\n    return schema;\n  }\n\n  ofForm(form) {\n    this.name = form.name;\n    this.mesh.name = form.name;\n    this.keyValueMap = { ...form.annotations };\n  }\n\n  getType = () => Map.TYPE;\n\n  static TYPE = \"Map\";\n}\n\nexport default Map;\n","import AssetNodeItem from \"./AssetNodeItem\";\n\nclass Mesh extends AssetNodeItem {\n  constructor(mesh, assetName, keyValueMap = {}) {\n    super(mesh, assetName, keyValueMap);\n  }\n\n  toDict() {\n    let dict = super.toDict();\n    return dict;\n  }\n\n  toForm() {\n    const schema = super.toForm();\n    schema.jsonSchema.properties = {\n      oldName: schema.jsonSchema.properties.oldName,\n      name: schema.jsonSchema.properties.name,\n      type: schema.jsonSchema.properties.type,\n      assetName: {\n        type: \"string\",\n        title: \"Asset Name\"\n      },\n      position: schema.jsonSchema.properties.position,\n      quaternion: schema.jsonSchema.properties.quaternion,\n      color: schema.jsonSchema.properties.color,\n      annotations: schema.jsonSchema.properties.annotations\n    };\n    schema.uiSchema[\"assetName\"] = {\n      \"ui:disabled\": true\n    };\n    schema.data[\"assetName\"] = this.assetName;\n    return schema;\n  }\n\n  getMouseContextActions(mainView) {\n    return super\n      .getMouseContextActions(mainView)\n      .filter(x => x.title === \"Delete\");\n  }\n\n  getType = () => Mesh.TYPE;\n  static TYPE = \"Mesh\";\n}\n\nexport default Mesh;\n","import Vec3 from \"../Math/Vec3\";\nimport { Maybe } from \"monet\";\nimport { Utils } from \"mov-fe-lib-core\";\nimport AnnotationManager from \"../Utils/AnnotationManager\";\nimport { Quaternion, Color3, Vector3 } from \"@babylonjs/core\";\nimport Clipboard from \"../Utils/Clipboard\";\n\nconst { capitalize } = Utils;\n\nclass NodeItem {\n  constructor(mesh, keyValueMap = {}) {\n    this.name = mesh.name;\n    this.mesh = mesh;\n    this.mesh.getMouseContextActions = this.getMouseContextActions;\n    this.mesh.nodeItem = this;\n    this.keyValueMap = keyValueMap;\n    //Hack to load annotations\n    AnnotationManager.getInstance();\n  }\n\n  dispose() {\n    this.mesh.dispose();\n  }\n\n  toDict() {\n    return {\n      name: this.name,\n      type: this.getType(),\n      position: Vec3.ofBabylon(this.mesh.position).toArray(),\n      quaternion: Maybe.fromNull(this.mesh.rotationQuaternion)\n        .map(x => [x.w, x.x, x.y, x.z])\n        .orLazy(() => {\n          const q = Quaternion.RotationYawPitchRoll(\n            this.mesh.rotation.y,\n            this.mesh.rotation.x,\n            this.mesh.rotation.z\n          );\n          return [q.w, q.x, q.y, q.z];\n        }),\n      color: Maybe.fromNull(this.mesh.material)\n        .flatMap(x => Maybe.fromNull(x.diffuseColor).map(z => [z.r, z.g, z.b]))\n        .orSome([0, 0, 0]),\n      keyValueMap: this.keyValueMap,\n      isVisible: this.mesh.isEnabled()\n    };\n  }\n\n  /**\n   * Generates json based on https://github.com/rjsf-team/react-jsonschema-form\n   */\n  toForm() {\n    const info = this.toDict();\n    const color = new Color3(info.color[0], info.color[1], info.color[2]);\n    const schema = {\n      jsonSchema: {\n        type: \"object\",\n        properties: {\n          oldName: {\n            type: \"string\"\n          },\n          name: {\n            type: \"string\",\n            title: \"Name\"\n          },\n          type: {\n            type: \"string\",\n            title: \"Type\"\n          },\n          position: {\n            type: \"object\",\n            title: \"Position\",\n            properties: {\n              x: {\n                type: \"number\",\n                title: \"x\"\n              },\n              y: {\n                type: \"number\",\n                title: \"y\"\n              },\n              z: {\n                type: \"number\",\n                title: \"z\"\n              }\n            }\n          },\n          quaternion: {\n            type: \"object\",\n            title: \"Orientation\",\n            properties: {\n              w: {\n                type: \"number\",\n                title: \"w\"\n              },\n              x: {\n                type: \"number\",\n                title: \"x\"\n              },\n              y: {\n                type: \"number\",\n                title: \"y\"\n              },\n              z: {\n                type: \"number\",\n                title: \"z\"\n              }\n            }\n          },\n          color: {\n            type: \"string\",\n            title: \"Color\"\n          }\n        }\n      },\n      uiSchema: {\n        type: {\n          \"ui:disabled\": true\n        },\n        color: {\n          \"ui:widget\": \"color\"\n        },\n        oldName: {\n          \"ui:widget\": \"hidden\"\n        },\n        position: {\n          \"ui:widget\": \"collapse\"\n        },\n        quaternion: {\n          \"ui:widget\": \"collapse\"\n        }\n      },\n      data: {\n        oldName: info.name,\n        name: info.name,\n        type: info.type,\n        position: {\n          x: info.position[0],\n          y: info.position[1],\n          z: info.position[2]\n        },\n        quaternion: {\n          w: info.quaternion[0],\n          x: info.quaternion[1],\n          y: info.quaternion[2],\n          z: info.quaternion[3]\n        },\n        color: color.toHexString()\n      }\n    };\n\n    NodeItem.setAnnotations2Form(schema, this.keyValueMap);\n    return schema;\n  }\n\n  /**\n   * Changes NodeItem based on a form\n   *\n   * Warning: side effect function\n   * @param {*} form\n   */\n  ofForm(form) {\n    this.name = form.name;\n    this.mesh.name = form.name;\n\n    Maybe.fromNull(form.position).forEach(position => {\n      this.mesh.position = new Vector3(position.x, position.y, position.z);\n    });\n    Maybe.fromNull(form.quaternion).forEach(quaternion => {\n      this.mesh.rotationQuaternion = new Quaternion(\n        quaternion.x,\n        quaternion.y,\n        quaternion.z,\n        quaternion.w\n      ).normalize();\n    });\n    if (this.mesh.material) {\n      this.mesh.material.diffuseColor = Color3.FromHexString(form.color);\n      this.mesh.material.emissiveColor = Color3.FromHexString(form.color);\n    }\n    this.keyValueMap = { ...form.annotations };\n  }\n\n  getType = () => NodeItem.TYPE;\n\n  getMouseContextActions(mainView) {\n    return [\n      {\n        title: \"Copy\",\n        onClick: () =>\n          // mousePosFromRoot : Vector3\n          Clipboard.copy((mousePosFromRoot, someMainView) =>\n            // \"this\" comes from the mesh\n            someMainView.getSceneMemory().forEach(({ scene }) => {\n              const { item: rootItem } = someMainView.getRootNode();\n              const item = this.nodeItem;\n              const copyDict = item.toDict();\n              copyDict.name += \"*\";\n              const newPosArray = Vec3.ofBabylon(mousePosFromRoot).toArray();\n              // preserves z-coordinate\n              newPosArray[2] = copyDict.position[2];\n              copyDict.position = newPosArray;\n              const copiedNodeItem = item.ofDict(scene, copyDict, someMainView);\n              const { mesh: copiedMesh } = copiedNodeItem;\n              copiedMesh.parent = rootItem.mesh;\n              someMainView.addNodeItem2Tree(copiedNodeItem);\n            })\n          )\n      },\n      {\n        title: \"Delete\",\n        onClick: () => mainView.deleteNodeFromTreeUsingName(this.name)\n      }\n    ];\n  }\n\n  static TYPE = \"NodeItem\";\n\n  // side-effect function\n  static mapDict2Mesh(dict, mesh) {\n    if (!mesh) throw \"can't map a null mesh\";\n    Maybe.fromNull(dict).forEach(someDict => {\n      Maybe.fromNull(dict.name).forEach(name => (mesh.name = name));\n      Maybe.fromNull(someDict.position).forEach(\n        position => (mesh.position = Vec3.of(position).toBabylon())\n      );\n      Maybe.fromNull(someDict.quaternion).forEach(quaternion => {\n        const babylonQuaternion = new Quaternion(\n          quaternion[1],\n          quaternion[2],\n          quaternion[3],\n          quaternion[0]\n        );\n        mesh.rotationQuaternion = babylonQuaternion.normalize();\n      });\n      Maybe.fromNull(someDict.color).forEach(color => {\n        const babylonColor = new Color3(color[0], color[1], color[2]);\n        Maybe.fromNull(mesh.material).forEach(material => {\n          Maybe.fromNull(material.diffuseColor).forEach(\n            z => (mesh.material.diffuseColor = babylonColor)\n          );\n          Maybe.fromNull(material.emissiveColor).forEach(\n            z => (mesh.material.emissiveColor = babylonColor)\n          );\n        });\n      });\n    });\n    return mesh;\n  }\n\n  // side effect function\n  static setAnnotations2Form(schema, keyValueMap = {}) {\n    schema.jsonSchema.properties.annotations = {\n      title: \"Annotations\",\n      type: \"object\",\n      properties: {}\n    };\n    schema.uiSchema.annotations = {\n      \"ui:widget\": \"collapse\"\n    };\n    schema.data[\"annotations\"] = { ...keyValueMap };\n    const annotations = AnnotationManager.getAnnotations();\n    Object.keys(annotations).forEach(annotation => {\n      if (annotations[annotation].labels.length > 0) {\n        schema.jsonSchema.properties.annotations.properties[annotation] = {\n          title: capitalize(annotation),\n          type: \"string\",\n          enumNames: annotations[annotation].labels,\n          enum: annotations[annotation].names\n        };\n      }\n    });\n  }\n}\n\nexport default NodeItem;\n","import NodeItem from \"./NodeItem\";\nimport Vec3 from \"../Math/Vec3\";\nimport Util3d from \"../Util3d/Util3d\";\nimport React from \"react\";\nimport { Maybe } from \"monet\";\nimport Constants from \"../Utils/Constants\";\nimport {\n  Observable,\n  Color3,\n  MeshBuilder,\n  Quaternion,\n  Vector3\n} from \"@babylonjs/core\";\n\nconst RADIUS = Constants.RADIUS;\n\nclass Path extends NodeItem {\n  /**\n   * @param {*} mesh\n   * @param {*} localPath: is an array of 3-arrays of numbers of the local coordinates in relation to mesh.position and quaternion\n   * @param {*} keyPoints: are the keyPoints meshes array\n   * @param {*} splinePath: is an array of 3-arrays of numbers of the local coordinates in relation to mesh.position and quaternion\n   */\n  constructor(mesh, localPath, keyPoints, splinePath, keyValueMap = {}) {\n    super(mesh, keyValueMap);\n    // Array<Vector3> points in relation to its mean\n    this.localPath = localPath;\n    // Array<Meshes> representing key points of the curve\n    this.keyPoints = keyPoints;\n    // spline points from local path\n    this.splinePath = splinePath;\n    this.selectedKeyPointIndex = -1;\n  }\n\n  toDict() {\n    const dict = super.toDict();\n    dict.localPath = this.localPath;\n    dict.splinePath = this.splinePath;\n    return dict;\n  }\n\n  toForm() {\n    const schema = super.toForm();\n    if (this.selectedKeyPointIndex >= 0) {\n      schema.jsonSchema.properties[\"selectedKeyPoint\"] = {\n        type: \"object\",\n        title: `KeyPoint ${this.selectedKeyPointIndex}`,\n        properties: {\n          x: {\n            type: \"number\",\n            title: \"x\"\n          },\n          y: {\n            type: \"number\",\n            title: \"y\"\n          },\n          z: {\n            type: \"number\",\n            title: \"z\"\n          }\n        }\n      };\n\n      schema.uiSchema[\"selectedKeyPoint\"] = {\n        \"ui:widget\": \"collapse\"\n      };\n      schema.uiSchema[\"position\"] = { \"ui:widget\": \"hidden\" };\n      schema.uiSchema[\"quaternion\"] = { \"ui:widget\": \"hidden\" };\n      schema.uiSchema[\"color\"] = { \"ui:widget\": \"hidden\" };\n      schema.uiSchema[\"annotations\"] = { \"ui:widget\": \"hidden\" };\n      const selectedMesh = this.keyPoints[this.selectedKeyPointIndex];\n      const position = Util3d.getWorldCoordinates(\n        selectedMesh,\n        selectedMesh.position\n      ).toArray();\n      schema.data[\"selectedKeyPoint\"] = {\n        x: position[0],\n        y: position[1],\n        z: position[2]\n      };\n      return schema;\n    }\n    return schema;\n  }\n\n  ofForm(form) {\n    super.ofForm(form);\n    if (this.selectedKeyPointIndex >= 0) {\n      const selectedKeyPoint = this.keyPoints[this.selectedKeyPointIndex];\n      const formPosition = form.selectedKeyPoint;\n      const newPosInWorldCoordinates = Vector3.FromArray(\n        [formPosition.x, formPosition.y, formPosition.z].map(Number.parseFloat)\n      );\n      const localPos = Util3d.getLocalCoordinatesFromWorld(\n        selectedKeyPoint,\n        newPosInWorldCoordinates\n      ).toArray();\n      selectedKeyPoint.position = new Vector3(\n        localPos[0],\n        localPos[1],\n        localPos[2]\n      );\n      selectedKeyPoint.observers.notifyObservers({\n        updatedPointMesh: selectedKeyPoint,\n        is2updateServer: false\n      });\n    }\n  }\n\n  ofDict(scene, dict = null, mainView = null) {\n    return Path.ofDict(scene, dict, mainView);\n  }\n\n  getType = () => Path.TYPE;\n\n  static TYPE = \"Path\";\n\n  static ofDict(scene, dict = null, mainView = null) {\n    if (!dict || !mainView)\n      throw \"null dictionary describing path or null mainView\";\n\n    const name = dict.name;\n    const curve = dict.localPath.map(z => Vec3.of(z).toBabylon());\n    const spline = Util3d.getSplineFromCurve(curve);\n    const { points } = spline;\n    let mesh = null;\n    //hack\n    if (points.length === 1) {\n      mesh = MeshBuilder.CreateLines(\n        name,\n        { points: points, updatable: true },\n        scene\n      );\n    } else {\n      mesh = Util3d.createTubeFromPoints(\n        scene,\n        points,\n        Color3.Gray(),\n        RADIUS / 8,\n        name\n      );\n    }\n    mesh.position = Vec3.of(dict.position).toBabylon();\n    mesh.material = Util3d.getMaterialFromColor(\n      Color3.FromArray(dict.color),\n      scene,\n      `PathMaterial${name}`\n    );\n    mesh.rotationQuaternion = Maybe.fromNull(dict.quaternion)\n      .map(quaternion =>\n        new Quaternion(\n          quaternion[1],\n          quaternion[2],\n          quaternion[3],\n          quaternion[0]\n        ).normalize()\n      )\n      .orSome(Quaternion.Identity());\n    const splinePath = Util3d.splineObj2redis(spline);\n    const keyPoints = createPlaceHolderKeyPoints(\n      scene,\n      { ...dict, mesh, splinePath },\n      mainView\n    );\n\n    const path2return = new Path(\n      mesh,\n      curve.map(point => [point.x, point.y, point.z]),\n      keyPoints,\n      splinePath,\n      dict.keyValueMap\n    );\n    mesh.onClick = getMeshOnClick(mainView, path2return);\n    return path2return;\n  }\n}\n\nexport default Path;\n\nconst getMeshOnClick = (mainView, nodeItem) => () => {\n  mainView.closeContextDial();\n  mainView\n    .getNodeFromTree(nodeItem.name)\n    .forEach(node => (node.item.selectedKeyPointIndex = -1));\n};\n\nfunction defaultKeyPointUpdate(scene, mainView, oldMesh, item) {\n  // used when keypoint is updated\n  const childrenCopy = [...oldMesh._children];\n  const spline = item.splinePath.map(z => new Vector3(z[0], z[1], 0));\n  childrenCopy.forEach(c => {\n    c.parent = item.mesh;\n  });\n  return item.keyPoints.map((k, i) => {\n    k.index = i;\n    k.name = `${oldMesh.name}keyPointSpline${i}`;\n    k.position = Vec3.of(item.localPath[i]).toBabylon();\n    k.rotationQuaternion = Quaternion.Identity();\n    if (i > 0 && i < item.keyPoints.length - 1) {\n      k._children.forEach(kChild => kChild.dispose());\n      const c = getConeMesh(\n        scene,\n        k.material.diffuseColor,\n        item.mesh,\n        i,\n        spline,\n        k.position\n      )();\n      c.parent = k;\n    }\n    return k;\n  });\n}\n\nfunction createNewMeshFromOldUsingNewPoints(\n  newPoints,\n  scene,\n  oldMesh,\n  item,\n  mainView,\n  keyPointUpdateFunction = defaultKeyPointUpdate\n) {\n  const average = Util3d.pointAverage(newPoints);\n  newPoints = newPoints.map(x => x.subtract(average));\n\n  const spline = Util3d.getSplineFromCurve(newPoints);\n  // const newMesh = MeshBuilder.CreateLines(\n  //   oldMesh.name,\n  //   { points: spline.points, updatable: true },\n  //   scene\n  // );\n\n  const newMesh = Util3d.createTubeFromPoints(\n    scene,\n    spline.points,\n    Color3.Gray(),\n    RADIUS / 8,\n    oldMesh.name\n  );\n\n  newMesh.position = oldMesh.position;\n  newMesh.rotationQuaternion = oldMesh.rotationQuaternion;\n  newMesh.locallyTranslate(average);\n  newMesh.material = oldMesh.material;\n  newMesh.visibility = oldMesh.visibility;\n  newMesh.parent = oldMesh.parent;\n  newMesh.onClick = oldMesh.onClick;\n\n  item.localPath = newPoints.map(x => Vec3.ofBabylon(x).toArray());\n  item.splinePath = Util3d.splineObj2redis(spline);\n  item.mesh = newMesh;\n\n  item.keyPoints = keyPointUpdateFunction(scene, mainView, oldMesh, item);\n\n  oldMesh.dispose();\n  return newPoints;\n}\n\nconst getKeyPointObserverFunction = (scene, mainView) => {\n  return ({ updatedPointMesh, is2updateServer }) => {\n    if (!updatedPointMesh.parent) return;\n    mainView\n      .getNodeFromTree(updatedPointMesh.parent.name)\n      .forEach(pathTreeNode => {\n        const index = updatedPointMesh.index;\n        const item = pathTreeNode.item;\n        const mesh = item.mesh;\n        let newPoints = item.localPath.map(x => Vec3.of(x).toBabylon());\n        newPoints[index] = updatedPointMesh.position;\n\n        createNewMeshFromOldUsingNewPoints(\n          newPoints,\n          scene,\n          mesh,\n          item,\n          mainView\n        );\n\n        if (index > 0 && index < newPoints.length - 1) {\n          // we know by construction that this keyPoint has children\n          mainView.highlightMeshInScene([item.keyPoints[index]._children[0]]);\n        }\n\n        if (is2updateServer) {\n          mainView.updateNodeInServer(mesh.name);\n          mainView.getNodeFromTree(mesh.name).forEach(node => {\n            node.item.selectedKeyPointIndex = index;\n            mainView.setProperties(node.item.toForm());\n          });\n        }\n      });\n  };\n};\n\nconst deleteKeyPoint = (scene, keyPointMesh, mainView) => {\n  const index = keyPointMesh.index;\n  const name = keyPointMesh.parent.name;\n  mainView.getNodeFromTree(name).forEach(pathTreeNode => {\n    const item = pathTreeNode.item;\n    const mesh = item.mesh;\n\n    let newPoints = item.localPath.map(x => Vec3.of(x).toBabylon());\n\n    newPoints.splice(index, 1);\n    item.keyPoints.splice(index, 1)[0].dispose();\n\n    createNewMeshFromOldUsingNewPoints(\n      newPoints,\n      scene,\n      mesh,\n      item,\n      mainView,\n      onAddNewPointKeyPointUpdate\n    );\n\n    mainView.updateNodeInServer(name);\n  });\n};\n\nfunction onAddNewPointKeyPointUpdate(scene, mainView, oldMesh, item) {\n  // used when new keypoint is added\n  return createPlaceHolderKeyPoints(scene, item, mainView);\n}\n/**\n *\n * @param {*} scene\n * @param {*} keyPointMesh\n * @param {*} curveMesh\n * @param {*} mainView\n * @param {*} orientation: it belongs to the set {-1,1}, represents orientation\n */\nconst addKeyPointInBetween = (scene, keyPointMesh, mainView, orientation) => {\n  const index = keyPointMesh.index;\n  const name = keyPointMesh.parent.name;\n  mainView.getNodeFromTree(name).forEach(pathTreeNode => {\n    const nextIndex = index + orientation;\n    const item = pathTreeNode.item;\n    const numberOfPoints = item.localPath.length;\n    const mesh = item.mesh;\n    let newPoints = [];\n    const oldPoints = item.localPath.map(x => Vec3.of(x).toBabylon());\n\n    if (nextIndex < 0) {\n      newPoints = [\n        oldPoints[0].scale(3).subtract(oldPoints[1]).scale(0.5)\n      ].concat(oldPoints);\n    } else if (nextIndex > numberOfPoints - 1) {\n      newPoints = oldPoints.concat([\n        oldPoints[numberOfPoints - 1]\n          .scale(3)\n          .subtract(oldPoints[numberOfPoints - 2])\n          .scale(0.5)\n      ]);\n    } else {\n      const specialIndex = index + Math.max(0, orientation);\n      for (let i = 0; i < specialIndex; i++) {\n        newPoints.push(oldPoints[i]);\n      }\n      newPoints.push(oldPoints[nextIndex].add(oldPoints[index]).scale(0.5));\n      for (let i = specialIndex; i < numberOfPoints; i++) {\n        newPoints.push(oldPoints[i]);\n      }\n    }\n\n    createNewMeshFromOldUsingNewPoints(\n      newPoints,\n      scene,\n      mesh,\n      item,\n      mainView,\n      onAddNewPointKeyPointUpdate\n    );\n\n    mainView.updateNodeInServer(name);\n  });\n};\n\nconst getKeyPointActions = (scene, keyPointMesh, mainView) => {\n  const actions = [];\n\n  mainView.getNodeFromTree(keyPointMesh.parent.name).forEach(pathTreeNode => {\n    const item = pathTreeNode.item;\n    const curve = item.localPath;\n\n    if (curve.length !== 2) {\n      actions.push({\n        icon: props => <i className=\"fas fa-trash\" {...props}></i>,\n        action: parentView => {\n          deleteKeyPoint(scene, keyPointMesh, parentView);\n          parentView.closeContextDial();\n        },\n        name: \"Delete node [DEL]\"\n      });\n    }\n\n    actions.push({\n      icon: props => <i className=\"fas fa-less-than\" {...props}></i>,\n      action: parentView => {\n        addKeyPointInBetween(scene, keyPointMesh, parentView, -1);\n        parentView.closeContextDial();\n      },\n      name: \"Add previous\"\n    });\n\n    actions.push({\n      icon: props => <i className=\"fas fa-greater-than\" {...props}></i>,\n      action: parentView => {\n        addKeyPointInBetween(scene, keyPointMesh, parentView, 1);\n        parentView.closeContextDial();\n      },\n      name: \"Add next\"\n    });\n  });\n\n  return actions;\n};\n\nconst createPlaceHolderKeyPoints = (scene, item, mainView) => {\n  const color = new Color3(0.25, 0.25, 0.25);\n  const keyPoints = [];\n  const curve = item.localPath.map(z => Vec3.of(z).toBabylon());\n  const spline = item.splinePath.map(z => new Vector3(z[0], z[1], 0));\n  const curveMesh = item.mesh;\n  curve.forEach((p, i) => {\n    const sphere = getSphereMesh(scene, color, curveMesh, i);\n    const cone = () => {\n      const c = getConeMesh(scene, color, curveMesh, i, spline, p)();\n      const s = getSphereMesh(scene, color, curveMesh, i)();\n      s.visibility = 0.1;\n      c.parent = s;\n      return s;\n    };\n\n    const keyPoint = i === 0 || i === curve.length - 1 ? sphere() : cone();\n    keyPoint.parent = curveMesh;\n    keyPoint.position = p;\n    keyPoint.index = i;\n    keyPoint.observers = new Observable();\n\n    keyPoints.push(keyPoint);\n\n    keyPoint.observers.add(getKeyPointObserverFunction(scene, mainView));\n  });\n\n  keyPoints.forEach(x => {\n    x.onClick = () => {\n      mainView.setContextActions(getKeyPointActions(scene, x, mainView));\n    };\n  });\n  return keyPoints;\n};\n\nfunction getConeMesh(scene, color, curveMesh, i, spline, p) {\n  return () => {\n    const index = spline\n      .map(z => p.subtract(z).length())\n      .reduce((e, x, i) => (e.value < x ? e : { value: x, index: i }), {\n        value: Number.MAX_VALUE,\n        index: -1\n      }).index;\n    const u = spline[index + 1]\n      .subtract(spline[index])\n      .normalize()\n      .scale(RADIUS);\n    const c = Util3d.createOrientedCone(\n      scene,\n      u,\n      color,\n      `${curveMesh.name}keyPointCone${i}`,\n      false\n    );\n    return c;\n  };\n}\n\nfunction getSphereMesh(scene, color, curveMesh, i) {\n  return () =>\n    Util3d.createSphere(\n      scene,\n      color,\n      RADIUS,\n      `${curveMesh.name}keyPointSpline${i}`,\n      true\n    );\n}\n","import NodeItem from \"./NodeItem\";\nimport { Mesh, StandardMaterial, Color3, VertexData } from \"@babylonjs/core\";\nimport { Maybe } from \"monet\";\nimport { Utils, MasterDB } from \"mov-fe-lib-core\";\n\nconst ofNull = Utils.ofNull;\nclass PointCloud extends NodeItem {\n  /**\n   *\n   * @param {*} mesh\n   * @param {*} robot: {name: string, id: string} representing a robot\n   */\n  constructor(mesh, robot) {\n    super(mesh);\n    this.robot = robot;\n    this.pointCloudSubscribe();\n  }\n\n  pointCloudSubscribe() {\n    MasterDB.subscribe(\n      {\n        Scope: \"Robot\",\n        Name: this.robot.id,\n        Parameter: \"front_lidar\"\n      },\n      data => {\n        Maybe.fromNull(data)\n          .flatMap(d => ofNull(d.key))\n          .flatMap(k => ofNull(k.Robot[this.robot.id]))\n          .flatMap(r => ofNull(r.Parameter))\n          .flatMap(p => ofNull(p.front_lidar))\n          .flatMap(f => ofNull(f.Value))\n          .flatMap(v => ofNull(v.points))\n          .forEach(points => this.updatePointCloud(points));\n      },\n      data => {\n        Maybe.fromNull(data.value)\n          .flatMap(v => ofNull(v.Robot))\n          .flatMap(r => ofNull(r[this.robot.id]))\n          .flatMap(r => ofNull(r.Parameter))\n          .flatMap(p => ofNull(p.front_lidar))\n          .flatMap(f => ofNull(f.Value))\n          .flatMap(v => ofNull(v.points))\n          .forEach(points => this.updatePointCloud(points));\n      }\n    );\n  }\n\n  /**\n   *\n   * @param {*} points: Array<3-Array>\n   */\n  updatePointCloud(points) {\n    const vertexData = new VertexData();\n    //Assign positions\n    vertexData.positions = points.flatMap(x => x);\n    const colors = new Array(4 * points.length);\n    vertexData.colors = colors.fill(1.0);\n    //Apply vertexData to custom mesh\n    vertexData.applyToMesh(this.mesh, true);\n  }\n\n  dispose() {\n    super.dispose();\n    MasterDB.unsubscribe({\n      Scope: \"Robot\",\n      Name: this.robot.id,\n      Parameter: \"front_lidar\"\n    });\n  }\n\n  getType = () => PointCloud.TYPE;\n\n  static TYPE = \"PointCloud\";\n\n  static ofDict(scene, dict = null, mainView = null) {\n    if (!dict || !mainView)\n      throw \"null dictionary describing point cloud or null mainView\";\n\n    const pointCloudMesh = new Mesh(`cloudPoint${dict.name}`, scene);\n    const mat = new StandardMaterial(`cloudPoint${dict.name}Material`, scene);\n    mat.emissiveColor = new Color3(1, 1, 1);\n    mat.disableLighting = true;\n    mat.pointsCloud = true;\n    mat.pointSize = 2;\n    pointCloudMesh.material = mat;\n\n    return new PointCloud(pointCloudMesh, dict);\n  }\n}\n\nexport default PointCloud;\n","import NodeItem from \"./NodeItem\";\nimport Vec3 from \"../Math/Vec3\";\nimport Util3d from \"../Util3d/Util3d\";\nimport { Maybe } from \"monet\";\nimport React from \"react\";\nimport { Utils } from \"mov-fe-lib-core\";\nimport Constants from \"../Utils/Constants\";\nimport {\n  Vector3,\n  Observable,\n  Color3,\n  StandardMaterial,\n  Quaternion\n} from \"@babylonjs/core\";\n\nconst RADIUS = Constants.RADIUS;\nconst positiveMod = Utils.mod;\n\nclass PolygonRegion extends NodeItem {\n  /**\n   * @param {*} mesh\n   * @param {*} localPolygon: is an array of 3-arrays of numbers of the local coordinates in relation to mesh.position and quaternion\n   * @param {*} keyPoints: are the keyPoints meshes array\n   */\n  constructor(mesh, localPolygon, height, keyPoints, keyValueMap = {}) {\n    super(mesh, keyValueMap);\n    this.localPolygon = localPolygon;\n    this.height = height;\n    this.keyPoints = keyPoints;\n  }\n\n  toDict() {\n    const dict = super.toDict();\n    dict.localPolygon = this.localPolygon;\n    dict.height = this.height;\n    return dict;\n  }\n\n  ofDict(scene, dict = null, mainView = null) {\n    return PolygonRegion.ofDict(scene, dict, mainView);\n  }\n\n  getType = () => PolygonRegion.TYPE;\n\n  static TYPE = \"PolygonRegion\";\n\n  static ofDict(scene, dict = null, mainView = null) {\n    if (!dict || !mainView)\n      throw \"null dictionary describing polygon or null mainView\";\n\n    const polygon = dict.localPolygon.map(z => Vec3.of(z).toBabylon());\n    const middlePoint = Vec3.of(dict.position).toBabylon();\n\n    const mesh = createExtrudedPolygonMesh(\n      scene,\n      polygon,\n      dict.height,\n      dict.name\n    );\n    mesh.position = middlePoint;\n\n    const material = new StandardMaterial(`PolygonMaterial${dict.name}`, scene);\n    const color = new Color3(dict.color[0], dict.color[1], dict.color[2]);\n    material.diffuseColor = color;\n    material.emissiveColor = color;\n    mesh.material = material;\n    mesh.visibility = 0.5;\n    Maybe.fromNull(dict.quaternion).forEach(quaternion => {\n      const babylonQuaternion = new Quaternion(\n        quaternion[1],\n        quaternion[2],\n        quaternion[3],\n        quaternion[0]\n      );\n      mesh.rotationQuaternion = babylonQuaternion.normalize();\n    });\n\n    const keypoints = createPlaceHolderKeyPoints(\n      scene,\n      polygon,\n      mesh,\n      mainView\n    );\n\n    return new PolygonRegion(\n      mesh,\n      polygon.map(point => [point.x, point.y, point.z]),\n      dict.height,\n      keypoints,\n      dict.keyValueMap\n    );\n  }\n}\n\n/**\n *\n * @param {*} polygon: boundary as babylonjs vec3\n */\nconst stitchingBoundaries = polygon => {\n  const n = polygon.length;\n  const orientation = Util3d.computeOrientation(polygon);\n  const ans = [];\n  for (let i = 0; i < n; i++) {\n    const modi = (i + 1) % n;\n    ans.push([i, n + modi, modi]);\n    ans.push([i, n + i, n + modi]);\n  }\n  return orientation > 0 ? ans : ans.map(reverseOrientation);\n};\n\nconst reverseOrientation = triangleIndice => {\n  const ans = [];\n  ans.push(triangleIndice[1]);\n  ans.push(triangleIndice[0]);\n  ans.push(triangleIndice[2]);\n  return ans;\n};\n\n/**\n *\n * @param {*} scene\n * @param {*} polygon array of babylon js vector3\n * @param {*} height\n * @param {*} name\n */\nconst createExtrudedPolygonMesh = (scene, polygon, height, name) => {\n  const h = new Vector3(0, 0, height);\n  const polygonRegionMesh = {\n    positions: [],\n    faces: []\n  };\n\n  polygonRegionMesh.positions = [...polygon];\n  for (let i = 0; i < polygon.length; i++) {\n    polygonRegionMesh.positions.push(polygon[i].add(h));\n  }\n\n  const n = polygon.length;\n  const lowerTriangulation = Util3d.triangulatePolygon(polygon);\n  const upperTriangulation = Util3d.triangulatePolygon(\n    polygonRegionMesh.positions.slice(n)\n  )\n    .map(x => x.map(z => z + n))\n    .map(reverseOrientation);\n\n  const stitchTriangulation = stitchingBoundaries(polygon);\n\n  polygonRegionMesh.faces = lowerTriangulation\n    .concat(upperTriangulation)\n    .concat(stitchTriangulation);\n\n  const mesh = Util3d.meshFromPositionAndFaces(\n    name,\n    scene,\n    polygonRegionMesh.positions,\n    polygonRegionMesh.faces\n  );\n  return mesh;\n};\n\nfunction defaultKeyPointUpdate(scene, mainView, oldMesh, item) {\n  // used when keypoint is updated or deleted\n  const childrenCopy = [...oldMesh._children];\n  childrenCopy.forEach(c => {\n    oldMesh.removeChild(c);\n    c.parent = item.mesh;\n  });\n\n  return item.keyPoints.map((k, i) => {\n    k.observers = new Observable();\n    k.observers.add(getKeyPointObserverFunction(scene, mainView));\n    k.index = i;\n    k.name = `${oldMesh.name}keyPoint${i}`;\n    k.position = Vec3.of(item.localPolygon[i]).toBabylon();\n    return k;\n  });\n}\n\nfunction createNewMeshFromOldUsingNewPoints(\n  newPoints,\n  scene,\n  mesh,\n  item,\n  mainView,\n  keyPointUpdateFunction = defaultKeyPointUpdate\n) {\n  const average = Util3d.pointAverage(newPoints);\n  newPoints = newPoints.map(x => x.subtract(average));\n  // update mesh\n  const newMesh = createExtrudedPolygonMesh(\n    scene,\n    newPoints,\n    item.height,\n    mesh.name\n  );\n  newMesh.position = mesh.position;\n  newMesh.rotationQuaternion = mesh.rotationQuaternion;\n  newMesh.locallyTranslate(average);\n  newMesh.material = mesh.material;\n  newMesh.visibility = mesh.visibility;\n  newMesh.parent = mesh.parent;\n\n  item.localPolygon = newPoints.map(x => Vec3.ofBabylon(x).toArray());\n  item.mesh = newMesh;\n\n  item.keyPoints = keyPointUpdateFunction(scene, mainView, mesh, item);\n  // dispose old mesh\n  mesh.dispose();\n  return newPoints;\n}\n\nconst getKeyPointObserverFunction = (scene, mainView) => {\n  return ({ updatedPointMesh, is2updateServer }) => {\n    if (!updatedPointMesh.parent) return;\n    mainView\n      .getNodeFromTree(updatedPointMesh.parent.name)\n      .forEach(polygonTreeNode => {\n        const index = updatedPointMesh.index;\n        const item = polygonTreeNode.item;\n        const mesh = item.mesh;\n        const name = mesh.name;\n        let newPoints = item.localPolygon.map(x => Vec3.of(x).toBabylon());\n        newPoints[index] = updatedPointMesh.position;\n        createNewMeshFromOldUsingNewPoints(\n          newPoints,\n          scene,\n          mesh,\n          item,\n          mainView\n        );\n\n        if (is2updateServer) {\n          mainView.updateNodeInServer(name);\n        }\n      });\n  };\n};\n\nfunction onAddNewPointKeyPointUpdate(scene, mainView, oldMesh, item) {\n  // used when new keypoint is added\n  return createPlaceHolderKeyPoints(\n    scene,\n    item.localPolygon.map(x => Vec3.of(x).toBabylon()),\n    item.mesh,\n    mainView\n  );\n}\n\n/**\n *\n * @param {*} scene\n * @param {*} keyPointMesh\n * @param {*} curveMesh\n * @param {*} mainView\n * @param {*} orientation: it belongs to the set {-1,1}, represents orientation\n */\nconst addKeyPointInBetween = (scene, keyPointMesh, mainView, orientation) => {\n  const index = keyPointMesh.index;\n  const name = keyPointMesh.parent.name;\n  mainView.getNodeFromTree(name).forEach(pathTreeNode => {\n    const item = pathTreeNode.item;\n    const numberOfPoints = item.localPolygon.length;\n    const nextIndex = positiveMod(index + orientation, numberOfPoints);\n    const mesh = item.mesh;\n    const oldPoints = item.localPolygon.map(x => Vec3.of(x).toBabylon());\n\n    let newPoints = [];\n    const specialIndex = index + Math.max(0, orientation);\n\n    for (let i = 0; i < specialIndex; i++) {\n      newPoints.push(oldPoints[i]);\n    }\n\n    newPoints.push(oldPoints[nextIndex].add(oldPoints[index]).scale(0.5));\n\n    for (let i = specialIndex; i < numberOfPoints; i++) {\n      newPoints.push(oldPoints[i]);\n    }\n\n    createNewMeshFromOldUsingNewPoints(\n      newPoints,\n      scene,\n      mesh,\n      item,\n      mainView,\n      onAddNewPointKeyPointUpdate\n    );\n\n    // mainView.updateNodeInServer(name);\n  });\n};\n\nconst deleteKeyPoint = (scene, keyPointMesh, mainView) => {\n  const index = keyPointMesh.index;\n  const name = keyPointMesh.parent.name;\n  mainView.getNodeFromTree(name).forEach(pathTreeNode => {\n    const item = pathTreeNode.item;\n    const mesh = item.mesh;\n\n    let newPoints = item.localPolygon.map(x => Vec3.of(x).toBabylon());\n\n    newPoints.splice(index, 1);\n    item.keyPoints.splice(index, 1)[0].dispose();\n\n    createNewMeshFromOldUsingNewPoints(newPoints, scene, mesh, item, mainView);\n\n    mainView.updateNodeInServer(name);\n  });\n};\n\nconst getKeyPointActions = (scene, keyPointMesh, mainView) => {\n  const actions = [];\n\n  mainView.getNodeFromTree(keyPointMesh.parent.name).forEach(pathTreeNode => {\n    const item = pathTreeNode.item;\n    const polygon = item.localPolygon;\n\n    if (polygon.length > 3) {\n      actions.push({\n        icon: props => <i className=\"fas fa-trash\" {...props}></i>,\n        action: parentView => {\n          deleteKeyPoint(scene, keyPointMesh, parentView);\n          parentView.closeContextDial();\n        },\n        name: \"Delete node [DEL]\"\n      });\n    }\n\n    actions.push({\n      icon: props => <i className=\"fas fa-less-than\" {...props}></i>,\n      action: parentView => {\n        addKeyPointInBetween(scene, keyPointMesh, parentView, -1);\n        parentView.closeContextDial();\n      },\n      name: \"Add previous\"\n    });\n\n    actions.push({\n      icon: props => <i className=\"fas fa-greater-than\" {...props}></i>,\n      action: parentView => {\n        addKeyPointInBetween(scene, keyPointMesh, parentView, 1);\n        parentView.closeContextDial();\n      },\n      name: \"Add next\"\n    });\n  });\n\n  return actions;\n};\n\nconst createPlaceHolderKeyPoints = (scene, polygon, polygonMesh, mainView) => {\n  const keyPoints = [];\n  polygon.forEach((p, i) => {\n    const color = new Color3(0.25, 0.25, 0.25);\n    const keyPoint = Util3d.createSphere(\n      scene,\n      color,\n      RADIUS,\n      `${polygonMesh.name}keyPointPolygon${i}`,\n      true\n    );\n    keyPoint.parent = polygonMesh;\n    keyPoint.position = p;\n    keyPoint.index = i;\n    keyPoint.observers = new Observable();\n\n    keyPoints.push(keyPoint);\n\n    keyPoint.observers.add(getKeyPointObserverFunction(scene, mainView));\n  });\n\n  keyPoints.forEach(x => {\n    x.onClick = () => {\n      mainView.setContextActions(getKeyPointActions(scene, x, mainView));\n    };\n  });\n\n  return keyPoints;\n};\n\nexport default PolygonRegion;\n","import Vec3 from \"../Math/Vec3\";\nimport Util3d from \"../Util3d/Util3d\";\nimport { MasterDB } from \"mov-fe-lib-core\";\nimport AssetNodeItem from \"./AssetNodeItem\";\nimport { Axis, Space, Vector3, Quaternion, Color3 } from \"@babylonjs/core\";\n\nclass Robot extends AssetNodeItem {\n  static ROBOT_MESH_NAME = \"Tugbot.stl\";\n\n  constructor(meshTree, assetName, keyValueMap = {}) {\n    super(meshTree.mesh, assetName, keyValueMap);\n    this.requestAnimationFrameId = null;\n    this.meshTree = meshTree;\n  }\n\n  toDict() {\n    let dict = super.toDict();\n    return dict;\n  }\n\n  toForm() {\n    const schema = super.toForm();\n    schema.jsonSchema.properties = {\n      oldName: schema.jsonSchema.properties.oldName,\n      name: schema.jsonSchema.properties.name,\n      type: schema.jsonSchema.properties.type,\n      assetName: {\n        type: \"string\",\n        title: \"Asset Name\"\n      },\n      position: schema.jsonSchema.properties.position,\n      quaternion: schema.jsonSchema.properties.quaternion,\n      color: schema.jsonSchema.properties.color,\n      annotations: schema.jsonSchema.properties.annotations\n    };\n    schema.uiSchema[\"assetName\"] = {\n      \"ui:disabled\": true\n    };\n    schema.data[\"assetName\"] = this.assetName;\n    return schema;\n  }\n\n  dispose() {\n    super.dispose();\n    MasterDB.unsubscribe({\n      Scope: \"Robot\",\n      Name: this.meshTree.id,\n      Parameter: \"tf\"\n    });\n    window.cancelAnimationFrame(this.requestAnimationFrameId);\n  }\n\n  updateRobot = (robot, oldTimeInMillis, robotAnimator) => {\n    const time = new Date().getTime();\n    const dt = 1e-3 * (time - oldTimeInMillis);\n    robotAnimator(robot, dt);\n    this.requestAnimationFrameId = requestAnimationFrame(() =>\n      this.updateRobot(robot, time, robotAnimator)\n    );\n  };\n\n  animate = robotAnimator => {\n    this.requestAnimationFrameId = requestAnimationFrame(() =>\n      this.updateRobot(this, new Date().getTime(), robotAnimator)\n    );\n  };\n\n  getType = () => Robot.TYPE;\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                   Static Functions                                   *\n   *                                                                                      */\n  //========================================================================================\n\n  static TYPE = \"Robot\";\n\n  static getDefaultAnimator = parentView => (robot, dt) => {\n    const mesh = robot.mesh;\n    const speed = 3;\n    const vel = Util3d.getRotationMatrix(mesh)\n      .prodVec(new Vec3([speed, 0, 0]))\n      .toBabylon();\n    mesh.position = mesh.position.add(vel.scale(dt));\n    mesh.rotate(Axis.Z, (-Math.PI / 2) * dt, Space.LOCAL);\n    if (Math.random() < 0.01) parentView.updateNodeInServer(mesh.name);\n  };\n\n  static updateRobotMeshTree(newRobotTf, robot) {\n    robot.mesh.position = new Vector3(\n      newRobotTf.position.x,\n      newRobotTf.position.y,\n      newRobotTf.position.z\n    );\n    const quaternion = new Quaternion(\n      newRobotTf.orientation.x,\n      newRobotTf.orientation.y,\n      newRobotTf.orientation.z,\n      newRobotTf.orientation.w\n    );\n    robot.mesh.rotationQuaternion = quaternion.normalize();\n  }\n\n  static getSocketAnimator = (robot, parentView) => {\n    MasterDB.subscribe(\n      { Scope: \"Robot\", Name: robot.meshTree.id, Parameter: \"tf\" },\n      data => {\n        const tf = data.key.Robot[robot.meshTree.id].Parameter.tf.Value;\n        if (tf) {\n          console.log(\"ROBOT TF UPDATE...\", tf);\n          Robot.updateRobotMeshTree(tf, robot);\n          console.log(\"Updating robot \", robot);\n          if (Math.random() < 0.01) parentView.updateNodeInServer(robot.name);\n        }\n      },\n      data => {\n        console.log(\"ROBOT INIT SUB...\", data.value);\n        const tf = data.value.Robot[robot.meshTree.id].Parameter.tf.Value;\n        Robot.updateRobotMeshTree(tf, robot);\n        console.log(\"Updating robot \", robot);\n        parentView.updateNodeInServer(robot.name);\n      }\n    );\n    return (robot2Animate, dt) => {\n      // empty animation\n    };\n  };\n\n  /**\n   * Side effect function\n   */\n  static transformMesh(mesh, scene) {\n    const thetaX = Math.PI / 2;\n    const translate = 0.25;\n    const boundScale = 1.9;\n\n    const boundingSphere = mesh.getBoundingInfo().boundingSphere;\n    mesh.position.set(\n      -boundingSphere.center.x,\n      -boundingSphere.center.y,\n      -boundingSphere.center.z\n    );\n\n    const tfSphereMesh = Util3d.createSphere(\n      scene,\n      new Color3(0.0, 0.0, 0.0),\n      0.5 * boundingSphere.radius,\n      `tfsphere${mesh.name}`,\n      false\n    );\n    tfSphereMesh.visibility = 0.25;\n    tfSphereMesh.scaling = Vec3.ONES.scale(\n      1 / boundingSphere.radius\n    ).toBabylon();\n\n    tfSphereMesh.addRotation(thetaX, 0, 0);\n    tfSphereMesh.position.set(0, 0, translate);\n    const spherePlaceHolder = Util3d.createSphere(\n      scene,\n      new Color3(0.0, 0.0, 0.0),\n      boundScale,\n      mesh.name,\n      true\n    );\n    spherePlaceHolder.visibility = 0.1;\n\n    mesh.parent = tfSphereMesh;\n    tfSphereMesh.parent = spherePlaceHolder;\n    return spherePlaceHolder;\n  }\n\n  static createRobotMeshTreeRecursive(node, mesh, parent, scene) {\n    if (!mesh) {\n      mesh = Util3d.createSphere(\n        scene,\n        new Color3(0.0, 0.0, 0.0),\n        0.5,\n        node.name,\n        false\n      );\n    }\n    const meshTree = {\n      mesh: mesh,\n      children: []\n    };\n    const position = new Vector3(\n      node.position.x,\n      node.position.y,\n      node.position.z\n    );\n    const quaternion = new Quaternion(\n      node.orientation.x,\n      node.orientation.y,\n      node.orientation.z,\n      node.orientation.w\n    );\n    mesh.position = position;\n    mesh.rotationQuaternion = quaternion;\n    if (parent) {\n      mesh.parent = parent;\n    }\n    meshTree[\"children\"] = node.child.map(child => {\n      this.createRobotMeshTreeRecursive(\n        child,\n        Util3d.referentialBuilder(scene)\n          .boxParams({ isVisible: false, size: 0.1 })\n          .build(),\n        mesh,\n        scene\n      );\n    });\n    return meshTree;\n  }\n\n  static createRobotMeshTree(robotTree, robotMesh, scene) {\n    return Robot.createRobotMeshTreeRecursive(\n      robotTree,\n      robotMesh,\n      null,\n      scene\n    );\n  }\n\n  static builder() {\n    return new RobotBuilder();\n  }\n}\n\nclass RobotBuilder {\n  constructor() {\n    this._name = null;\n    this._meshTree = null;\n    this._parentMesh = null;\n    this._scene = null;\n    this._isPickable = true;\n    this._id = null;\n    this._keyValueMap = {};\n    this._assetName = null;\n  }\n\n  name(name) {\n    this._name = name;\n    return this;\n  }\n\n  meshTree(meshTree) {\n    this._meshTree = meshTree;\n    return this;\n  }\n\n  parentMesh(parentMesh) {\n    this._parentMesh = parentMesh;\n    return this;\n  }\n\n  scene(scene) {\n    this._scene = scene;\n    return this;\n  }\n\n  isPickable(isPickable) {\n    this._isPickable = isPickable;\n    return this;\n  }\n\n  id(id) {\n    this._id = id;\n    return this;\n  }\n\n  keyValueMap(keyValueMap) {\n    this._keyValueMap = keyValueMap;\n    return this;\n  }\n\n  assetName(assetName) {\n    this._assetName = assetName;\n    return this;\n  }\n\n  build() {\n    const variables = Object.keys(this)\n      .filter(x => x !== \"_parentMesh\")\n      .map(x => this[x]);\n\n    variables.forEach(x => {\n      if (x === null)\n        throw `There are missing variables to build a robot, e.g ${x}`;\n    });\n\n    this._meshTree.id = this._id;\n    this._meshTree.name = this._name;\n    this._meshTree.mesh.name = this._name;\n    this._meshTree.mesh.isPickable = this._isPickable;\n    this._meshTree.mesh.parent = this._parentMesh;\n\n    const baseAxis = Util3d.referentialBuilder(this._scene)\n      .isPickable(false)\n      .boxParams({ isVisible: false, size: 0.1 })\n      .name(`${this._name}Axis`)\n      .build();\n    baseAxis.parent = this._meshTree.mesh;\n\n    return new Robot(this._meshTree, this._assetName, this._keyValueMap);\n  }\n}\n\nexport default Robot;\n","import NodeItem from \"./NodeItem\";\nimport Vec3 from \"../Math/Vec3\";\nimport { Maybe } from \"monet\";\nimport Util3d from \"../Util3d/Util3d\";\nimport Constants from \"../Utils/Constants\";\nimport { Vector3, Color3, Observable, StandardMaterial } from \"@babylonjs/core\";\n\nclass Wall extends NodeItem {\n  constructor(mesh, localWall, size, keyPoints = {}, keyValueMap = {}) {\n    super(mesh, keyValueMap);\n    this.localWall = localWall;\n    this.size = size;\n    this.keyPoints = keyPoints;\n  }\n\n  toDict() {\n    const dict = super.toDict();\n    dict.localWall = this.localWall;\n    dict.size = this.size;\n    return dict;\n  }\n\n  ofDict(scene, dict = null, mainView = null) {\n    return Wall.ofDict(scene, dict, mainView);\n  }\n\n  getType = () => Wall.TYPE;\n\n  static TYPE = \"Wall\";\n\n  static ofDict(scene, dict = null, mainView = null) {\n    if (!dict) throw \"null dictionary describing wall\";\n    const name = Maybe.fromNull(dict.name).orSome(\n      `Wall${Math.floor(Math.random() * 1e3)}`\n    );\n    const mesh = createWallMesh(dict, name, scene);\n\n    const material = new StandardMaterial(`WallMaterial${name}`, scene);\n    const color = new Color3(dict.color[0], dict.color[1], dict.color[2]);\n    material.diffuseColor = color;\n    material.emissiveColor = color;\n    mesh.material = material;\n    // babylonjs highlight shader flickers when floor intersect\n    mesh.position.z += 1e-3;\n\n    const keypoints = createPlaceHolderKeyPoints(\n      scene,\n      dict.localWall.map(x => Vec3.of(x).toBabylon()),\n      mesh,\n      mainView\n    );\n    return new Wall(\n      mesh,\n      dict.localWall,\n      dict.size,\n      keypoints,\n      dict.keyValueMap\n    );\n  }\n}\n\nconst RADIUS = Constants.RADIUS;\nconst FACES = [\n  [0, 1, 2],\n  [2, 3, 0],\n  [4, 6, 5],\n  [6, 4, 7],\n  [0, 5, 1],\n  [5, 0, 4],\n  [3, 2, 6],\n  [6, 7, 3],\n  [1, 6, 2],\n  [6, 1, 5],\n  [0, 3, 7],\n  [7, 4, 0]\n];\n\nfunction createWallMesh(dict, name, scene) {\n  const centeredWall = dict.localWall.map(x => Vec3.of(x).toBabylon());\n  const middlePoint = Vec3.of(dict.position).toBabylon();\n  const tangent = centeredWall[1].subtract(centeredWall[0]).normalize();\n  const normal = new Vector3(-tangent.y, tangent.x, 0);\n  const shape = [\n    centeredWall[0].add(normal.scale(dict.size.width)),\n    centeredWall[0].subtract(normal.scale(dict.size.width)),\n    centeredWall[1].subtract(normal.scale(dict.size.width)),\n    centeredWall[1].add(normal.scale(dict.size.width))\n  ];\n  const h = new Vector3(0, 0, dict.size.height);\n  const wallMesh = {\n    positions: [\n      shape[0],\n      shape[1],\n      shape[2],\n      shape[3],\n      shape[0].add(h),\n      shape[1].add(h),\n      shape[2].add(h),\n      shape[3].add(h)\n    ],\n    faces: FACES\n  };\n  const mesh = Util3d.meshFromPositionAndFaces(\n    name,\n    scene,\n    wallMesh.positions,\n    wallMesh.faces\n  );\n  mesh.position = middlePoint;\n  return mesh;\n}\n\nfunction createNewMeshFromOldUsingNewPoints(newWall, scene, mesh, item) {\n  const average = Util3d.pointAverageVec3(\n    newWall.localWall.map(x => Vec3.of(x))\n  );\n  newWall.position = average.toArray();\n  newWall.localWall = newWall.localWall.map(x =>\n    Vec3.of(x).sub(average).toArray()\n  );\n\n  const newMesh = createWallMesh(newWall, mesh.name, scene);\n  newMesh.position = mesh.position;\n  newMesh.rotationQuaternion = mesh.rotationQuaternion;\n  newMesh.locallyTranslate(average.toBabylon());\n  newMesh.material = mesh.material;\n  newMesh.visibility = mesh.visibility;\n  newMesh.parent = mesh.parent;\n\n  item.mesh = newMesh;\n  item.localWall = newWall.localWall;\n\n  const childrenCopy = [...mesh._children];\n  childrenCopy.forEach(c => {\n    mesh.removeChild(c);\n    c.parent = newMesh;\n  });\n  item.keyPoints.forEach((k, j) => {\n    k.position = Vec3.of(newWall.localWall[j]).toBabylon();\n  });\n  // dispose old mesh\n  mesh.dispose();\n}\n\nconst getKeyPointObserverFunction = (mainView, scene) => {\n  return ({ updatedPointMesh, is2updateServer }) => {\n    mainView.getNodeFromTree(updatedPointMesh.parent.name).forEach(wallNode => {\n      const index = updatedPointMesh.index;\n      const item = wallNode.item;\n      const mesh = item.mesh;\n      let newWall = {\n        position: Vec3.ofBabylon(mesh.position).toArray(),\n        localWall: item.localWall,\n        size: item.size\n      };\n      newWall.localWall[index] = Vec3.ofBabylon(\n        updatedPointMesh.position\n      ).toArray();\n\n      createNewMeshFromOldUsingNewPoints(newWall, scene, mesh, item);\n\n      if (is2updateServer) {\n        mainView.updateNodeInServer(mesh.name);\n      }\n    });\n  };\n};\n\nconst createPlaceHolderKeyPoints = (scene, wall, wallMesh, mainView) => {\n  const keyPoints = [];\n  wall.forEach((p, i) => {\n    const keyPoint = Util3d.createSphere(\n      scene,\n      new Color3(0.25, 0.25, 0.25),\n      RADIUS,\n      `${wallMesh.name}keyPointWall${i}`,\n      true\n    );\n    keyPoint.parent = wallMesh;\n    keyPoint.position = p;\n    keyPoint.index = i;\n    keyPoint.observers = new Observable();\n    keyPoint.observers.add(getKeyPointObserverFunction(mainView, scene));\n    keyPoints.push(keyPoint);\n  });\n  return keyPoints;\n};\n\nexport default Wall;\n","import React, { Component } from \"react\";\nimport BaseViewer from \"./BaseViewer/BaseViewer\";\nimport PropTypes from \"prop-types\";\nimport { HighlightLayer } from \"@babylonjs/core\";\nimport { Maybe } from \"monet\";\nimport MainViewRetriever from \"./MainView/MainViewRetriever\";\nimport DefaultScene from \"./Utils/DefaultScene\";\nimport GlobalRef from \"./NodeItem/GlobalRef\";\nimport SceneServerUtils from \"./Utils/SceneServerUtils\";\nimport TreeServerUtils from \"./Utils/TreeServerUtils\";\nimport AssetsManager from \"./AssetsManager/AssetsManager\";\nimport TreeObject from \"./TreeObject/TreeObject\";\nimport GraphItem from \"./NodeItem/GraphItem\";\nimport DefaultMouseEvents from \"./Utils/DefaultMouseEvents\";\nimport Util3d from \"./Util3d/Util3d\";\nimport Vec3 from \"./Math/Vec3\";\nimport ReactResizeDetector from \"react-resize-detector\";\nimport ConfirmAlertModal from \"../Modal/ConfirmAlertModal\";\n\n//========================================================================================\n/*                                                                                      *\n *                                      SceneViewer                                     *\n *                                                                                      */\n//========================================================================================\n\nclass SceneViewer extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { errorList: [] };\n    this.sceneName = props.sceneName.Value;\n    this.sceneMemory = Maybe.none();\n    this.objectTree = [];\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                   Getters & Setters                                  *\n   *                                                                                      */\n  //========================================================================================\n\n  getSceneMemory = () => this.sceneMemory;\n\n  getAssetsActionMap = () => AssetsManager.getInstance().getAssetsActionMap();\n\n  getRootNode = (tree = [...this.objectTree]) => {\n    return tree.filter(x => x.title === GlobalRef.NAME)[0];\n  };\n\n  getObjectTree = () => this.objectTree;\n\n  setSelectedAction = () => {\n    /* empty */\n  };\n\n  getGraph() {\n    return new TreeObject(this.objectTree).getNode(\n      x => GraphItem.TYPE === x.item.getType()\n    );\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                    Utils functions                                   *\n   *                                                                                      */\n  //========================================================================================\n\n  getNodeFromTree = (name, objectTree = [...this.objectTree]) => {\n    return TreeServerUtils.ofScene(this.sceneName).getNodeFromTree(\n      name,\n      objectTree\n    );\n  };\n\n  deleteNodeFromTreeUsingName = () => {\n    throw new Error(\"Delete Node in viewer Exception\");\n  };\n\n  updateNodeInServer = (name, oldName = null) => {\n    if (this.props.focusObject.Value === name) this.setCameraToTarget();\n    TreeServerUtils.ofScene(this.sceneName).updateNodeInServer(\n      name,\n      [...this.objectTree],\n      oldName\n    );\n  };\n\n  addNodeItem2Tree = (\n    nodeItem,\n    parentName = GlobalRef.NAME,\n    is2addInServer = true,\n    isVisible = true\n  ) => {\n    const newObjectTree = TreeServerUtils.ofScene(\n      this.sceneName\n    ).addNodeItem2Tree(\n      [...this.objectTree],\n      nodeItem,\n      parentName,\n      is2addInServer,\n      isVisible\n    );\n    this.objectTree = newObjectTree;\n  };\n\n  setCameraToTarget = () => {\n    this.sceneMemory.forEach(({ camera }) => {\n      const focusObject = this.props.focusObject.Value;\n      this.getNodeFromTree(focusObject).cata(\n        () => {\n          console.log(\n            \"Set Camera\",\n            this.getRootNode().item.mesh._absolutePosition\n          );\n          camera.setTarget(\n            this.getRootNode().item.mesh._absolutePosition.clone()\n          );\n        },\n        x => {\n          console.log(\"Set Camera, Found Object\", x.item.mesh);\n          camera.setTarget(x.item.mesh._absolutePosition.clone());\n        }\n      );\n    });\n  };\n\n  addCanvasEventListeners(canvas) {\n    const events = [\n      {\n        name: \"pointerdown\",\n        function: evt => this.onPointerDown(evt)\n      },\n      { name: \"pointerup\", function: evt => this.onPointerUp(evt) },\n      {\n        name: \"pointermove\",\n        function: evt => this.onPointerMove(evt)\n      }\n    ];\n    events.forEach(event =>\n      canvas.addEventListener(event.name, event.function, false)\n    );\n  }\n\n  onPointerDown = evt => {\n    DefaultMouseEvents.onPointerDown(this)(evt);\n  };\n\n  onPointerUp = evt => {\n    DefaultMouseEvents.onPointerUp(this)(evt);\n  };\n\n  onPointerMove = evt => {\n    DefaultMouseEvents.onPointerMove(this)(evt);\n  };\n\n  getMouseCoordinatesFromRoot() {\n    return this.sceneMemory.flatMap(({ scene, ground }) => {\n      const maybeCurrent = Util3d.getGroundPosition(scene, ground);\n      return maybeCurrent.flatMap(current =>\n        Maybe.fromNull(this.getRootNode()).map(rootNode =>\n          Util3d.computeLocalCoordinatesFromMesh(\n            rootNode.item.mesh,\n            Vec3.ofBabylon(current)\n          ).toBabylon()\n        )\n      );\n    });\n  }\n\n  onResize = (w, h) => {\n    if (w === 0 && h === 0) return;\n    this.getSceneMemory().forEach(({ mouseLocationText }) => {\n      mouseLocationText.left = -w / 2 + w / 17;\n      mouseLocationText.top = -h / 2 + h / 30;\n    });\n  };\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                    Scene functions                                   *\n   *                                                                                      */\n  //========================================================================================\n\n  retrieveSceneFromServer = (afterLoading = () => {}) => {\n    SceneServerUtils.retrieveScene(this.sceneName, data => {\n      const errorList = MainViewRetriever.importScene(this, data.result);\n      this.setState({ errorList });\n      afterLoading();\n    });\n  };\n\n  loadAssets = async () => {\n    await AssetsManager.getInstance().load();\n  };\n\n  loadScene = async () => {\n    await this.loadAssets();\n    this.retrieveSceneFromServer(this.renderScene);\n  };\n\n  renderScene = () => {\n    this.getSceneMemory().forEach(({ engine, scene }) =>\n      engine.runRenderLoop(() => scene.render())\n    );\n    this.setCameraToTarget();\n  };\n\n  onSceneReady = scene => {\n    const engine = scene.getEngine();\n    const canvas = engine.getRenderingCanvas();\n    this.addCanvasEventListeners(canvas);\n    const mouseLocationText = DefaultScene.createMouseLocationText(scene);\n    this.sceneMemory = Maybe.some({\n      engine: engine,\n      canvas: canvas,\n      scene: scene,\n      camera: DefaultScene.createCamera(scene, canvas),\n      light: DefaultScene.createLight(scene),\n      ground: DefaultScene.createMeshGround(scene),\n      gizmoManager: DefaultScene.createGizmo(scene),\n      highlightLayer: {\n        hl: new HighlightLayer(\"hl1\", scene),\n        lastHlMeshes: []\n      },\n      mouseLocationText: mouseLocationText\n    });\n    return scene;\n  };\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                   Render functions                                   *\n   *                                                                                      */\n  //========================================================================================\n\n  renderMenus = () => {\n    // to implement interface of MainView\n  };\n\n  componentDidUpdate = prevProps => {\n    const predicateAction = [\n      {\n        propVar: x => x.sceneName.Value,\n        action: () => (this.sceneName = this.props.sceneName.Value)\n      },\n      {\n        propVar: x => x.focusObject.Value,\n        action: this.setCameraToTarget\n      }\n    ];\n    predicateAction.forEach(({ propVar, action }) => {\n      if (propVar(this.props) !== propVar(prevProps)) {\n        action();\n      }\n    });\n  };\n\n  componentDidMount = () => {\n    console.log(\"SceneViewer Did Mount!! \");\n    this.loadScene();\n  };\n\n  render() {\n    const { errorList } = this.state;\n    const resetErrorList = () => this.setState({ errorList: [] });\n    return (\n      <div style={{ display: \"flex\", flexGrow: 1 }}>\n        <BaseViewer\n          onSceneReady={this.onSceneReady}\n          is2render={false}\n          sceneFactory={DefaultScene.createScene}\n        />\n        <ConfirmAlertModal\n          onSubmit={resetErrorList}\n          onCancel={resetErrorList}\n          open={errorList?.length > 0}\n          title={\"Scene Viewer\"}\n          message={\"An error occurred while loading the scene\"}\n          submitText={\"OK\"}\n          submitColor={\"primary\"}\n          cancelText={\"Cancel\"}\n          cancelColor={\"secondary\"}\n        >\n          {getErrorSolutionList(errorList)}\n        </ConfirmAlertModal>\n        <ReactResizeDetector\n          handleWidth\n          handleHeight\n          onResize={this.onResize}\n        />\n      </div>\n    );\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                   Static functions                                   *\n   *                                                                                      */\n  //========================================================================================\n\n  static getComponentFactory(sceneName) {\n    return masterProps => {\n      const augmentProps = {\n        sceneName,\n        ...masterProps\n      };\n      return <SceneViewer {...augmentProps} />;\n    };\n  }\n\n  static EXTENSION = \".3d\";\n}\n\nSceneViewer.propTypes = {\n  sceneName: PropTypes.shape({ Value: PropTypes.string }),\n  focusObject: PropTypes.shape({ Value: PropTypes.string })\n};\n\nSceneViewer.defaultProps = {\n  sceneName: { Value: \"Pedro\" },\n  focusObject: { Value: \"\" }\n};\n\nfunction getErrorSolutionList(errorList) {\n  return !errorList ? (\n    []\n  ) : (\n    <ul>\n      {errorList.map(({ cause, solution }, i) => {\n        return <li key={\"error\" + i}>{`${cause}, ${solution}`}</li>;\n      })}\n    </ul>\n  );\n}\n\nexport default SceneViewer;\n","class TreeNode {\n  constructor(title, item, children, expanded, isVisible) {\n    this.title = title;\n    this.item = item;\n    this.children = children;\n    this.expanded = expanded;\n    this.isVisible = isVisible;\n  }\n\n  static dispose(node) {\n    /*\n     * function must be defined here, otherwise it wouldn't work on the UI Tree change method\n     */\n    node.item.dispose();\n    node.children.forEach(child => {\n      TreeNode.dispose(child);\n    });\n  }\n\n  /**\n   *\n   * @param {*} node\n   */\n  static toDict(node) {\n    /*\n     * function must be defined here, otherwise it wouldn't work on the UI Tree change method\n     */\n    return {\n      name: node.title,\n      item: node.item.toDict(),\n      children: node.children.map(child => TreeNode.toDict(child))\n    };\n  }\n\n  static builder() {\n    return new TreeNodeBuilder();\n  }\n}\n\nclass TreeNodeBuilder {\n  constructor() {\n    this._title = null;\n    this._item = {};\n    this._children = [];\n    this._expanded = true;\n    this._isVisible = true;\n  }\n\n  title(title) {\n    this._title = title;\n    return this;\n  }\n\n  item(item) {\n    this._item = item;\n    return this;\n  }\n\n  children(children) {\n    this._children = children;\n    return this;\n  }\n\n  expanded(expanded) {\n    this._expanded = expanded;\n    return this;\n  }\n\n  isVisible(isVisible) {\n    this._isVisible = isVisible;\n    return this;\n  }\n\n  build() {\n    Object.values(this).forEach(value => {\n      if (value === null)\n        throw `There are missing variables to build a TreeNode, e.g ${value}`;\n    });\n    return new TreeNode(\n      this._title,\n      this._item,\n      this._children,\n      this._expanded,\n      this._isVisible\n    );\n  }\n}\n\nexport default TreeNode;\n","import { Maybe } from \"monet\";\n\nfunction getNodeRecursive(tree, predicate) {\n  for (let i = 0; i < tree.length; i++) {\n    const node = tree[i];\n    if (predicate(node)) return Maybe.some(node);\n    const answer = getNodeRecursive(node.children, predicate);\n    if (answer.isSome()) return answer;\n  }\n  return Maybe.none();\n}\n\nfunction getParentNodeRecursive(tree, predicate, parent) {\n  const foundChild = tree\n    .map(x => predicate(x))\n    .reduce((e, x) => e || x, false);\n  if (foundChild) return Maybe.fromNull(parent);\n  for (let i = 0; i < tree.length; i++) {\n    const node = tree[i];\n    const answer = getParentNodeRecursive(node.children, predicate, node);\n    if (answer.isSome()) return answer;\n  }\n  return Maybe.none();\n}\n\nfunction compareTreesRecursive(treeA, treeB, nodeEquality) {\n  if (treeA.length === treeB.length) {\n    let ans = true;\n    for (let i = 0; i < treeA.length; i++) {\n      const nodeA = treeA[i];\n      const nodeB = treeB[i];\n      if (nodeEquality(nodeA, nodeB)) {\n        ans =\n          ans &&\n          compareTreesRecursive(nodeA.children, nodeB.children, nodeEquality);\n      } else {\n        return false;\n      }\n    }\n    return ans;\n  }\n  return false;\n}\n\nfunction mapRecursive(tree, newTree, map) {\n  tree.forEach(nod => {\n    const node = { ...nod };\n    const mappedNode = map(node);\n    mappedNode.children = mapRecursive(node.children, [], map);\n    newTree.push(mappedNode);\n  });\n  return newTree;\n}\n\nfunction forEachRecursive(tree = [], forEach = () => {}) {\n  tree.forEach(node => {\n    forEach(node);\n    forEachRecursive(node.children, forEach);\n  });\n}\n\nfunction expand(node) {\n  node.expanded = true;\n  return node;\n}\n\nfunction filterTree(tree = [], predicate = node => true) {\n  if (!tree || tree.length === 0) return [];\n  let result = [];\n  tree.forEach(nod => {\n    const node = { ...nod };\n    if (predicate(node)) {\n      const expanded = expand(node);\n      expanded.children = filterTree(expanded.children, predicate);\n      result.push(expanded);\n    } else if (node.children) {\n      const children = filterTree(node.children, predicate);\n      if (children.length !== 0) {\n        node.children = children;\n        result.push(expand(node));\n      }\n    }\n  });\n  return result;\n}\n\nfunction flatten(tree = [], predicate = node => true) {\n  if (!tree || tree.length === 0) return [];\n  let result = [];\n  tree.forEach(nod => {\n    const node = { ...nod };\n    if (predicate(node)) result.push(node);\n    result = result.concat(flatten(node.children, predicate));\n  });\n  return result;\n}\n\n/**\n * General purpose tree\n *\n * It just need a basic structure as input:\n *  Tree: Array<Node>\n *  Node: {children: Array<Node>}\n */\nclass TreeObject {\n  constructor(tree) {\n    this.tree = tree;\n  }\n  /**\n   * Return maybe node based on predicate\n   * @param {*} predicate\n   */\n  getNode(predicate) {\n    return getNodeRecursive(this.tree, predicate);\n  }\n\n  /**\n   * return maybe parent node based on the child predicate\n   * @param {*} childPredicate\n   */\n  getParentNode(childPredicate) {\n    return getParentNodeRecursive(this.tree, childPredicate, null);\n  }\n\n  equals(tree, nodeEquality = (a, b) => a === b) {\n    if (tree.constructor === TreeObject) {\n      return compareTreesRecursive(this.tree, tree.tree, nodeEquality);\n    }\n    return compareTreesRecursive(this.tree, tree, nodeEquality);\n  }\n\n  map(nodeMap) {\n    return new TreeObject(mapRecursive(this.tree, [], nodeMap));\n  }\n\n  filter(predicate = node => true) {\n    return new TreeObject(filterTree(this.tree, predicate));\n  }\n\n  /**\n   *\n   * @param {*} predicate: node => Boolean\n   * @returns Array with flattened tree while filtering values with predicate\n   */\n  flatten(predicate = node => true) {\n    return flatten(this.tree, predicate);\n  }\n\n  forEach(map) {\n    forEachRecursive(this.tree, map);\n  }\n}\n\nexport default TreeObject;\n","import { ArcRotateCamera } from \"@babylonjs/core\";\n\nclass CameraBuilder {\n  constructor(scene) {\n    this._scene = scene;\n    this._sphericalCoordinates = null;\n    this._target = null;\n    this._name = `camera${Math.floor(Math.random() * 1e3)}`;\n  }\n\n  name(name) {\n    this._name = name;\n    return this;\n  }\n\n  sphericalCoordinates(sphericalCoordinates) {\n    this._sphericalCoordinates = sphericalCoordinates;\n    return this;\n  }\n\n  target(target) {\n    this._target = target;\n    return this;\n  }\n\n  build() {\n    const variables = Object.values(this);\n    variables.forEach(x => {\n      if (x === null)\n        throw `There are missing variables to build a camera, e.g ${x}`;\n    });\n    return new ArcRotateCamera(\n      this._name,\n      this._sphericalCoordinates.x,\n      this._sphericalCoordinates.y,\n      this._sphericalCoordinates.z,\n      this._target,\n      this._scene\n    );\n  }\n}\n\nexport default CameraBuilder;\n","import { DirectionalLight } from \"@babylonjs/core\";\n\nclass DirectionalLightBuilder {\n  constructor(scene) {\n    this._scene = scene;\n    this._direction = null;\n    this._name = `Dlight${Math.floor(Math.random() * 1e3)}`;\n    this._intensity = 1;\n  }\n\n  direction(direction) {\n    this._direction = direction;\n    return this;\n  }\n\n  name(name) {\n    this._name = name;\n    return this;\n  }\n\n  intensity(intensity) {\n    this._intensity = intensity;\n    return this;\n  }\n\n  build() {\n    const variables = Object.values(this);\n    variables.forEach(x => {\n      if (x === null)\n        throw `There are missing variables to build a light, e.g ${x}`;\n    });\n    const light = new DirectionalLight(\n      this._name,\n      this._direction.normalize(),\n      this._scene\n    );\n    light.intensity = this._intensity;\n    return light;\n  }\n}\n\nexport default DirectionalLightBuilder;\n","import { GizmoManager } from \"@babylonjs/core\";\n\nclass GizmoManagerBuilder {\n  constructor(scene) {\n    this._scene = scene;\n    this._isPosition = false;\n    this._isRotation = false;\n    this._isBoundingBox = false;\n    this._isScale = false;\n    this._usePointerToAttachGizmos = false;\n  }\n\n  isPosition(v) {\n    this._isPosition = v;\n    return this;\n  }\n\n  isRotation(v) {\n    this._isRotation = v;\n    return this;\n  }\n\n  isBoundingBox(v) {\n    this._isBoundingBox = v;\n    return this;\n  }\n\n  isScale(v) {\n    this._isScale = v;\n    return this;\n  }\n\n  usePointerToAttachGizmos(v) {\n    this._usePointerToAttachGizmos = v;\n    return this;\n  }\n\n  build() {\n    const gizmoManager = new GizmoManager(this._scene);\n    gizmoManager.positionGizmoEnabled = this._isPosition;\n    gizmoManager.rotationGizmoEnabled = this._isRotation;\n    gizmoManager.boundingBoxGizmoEnabled = this._isBoundingBox;\n    gizmoManager.scaleGizmoEnabled = this._isScale;\n    gizmoManager.usePointerToAttachGizmos = this._usePointerToAttachGizmos;\n    return gizmoManager;\n  }\n}\n\nexport default GizmoManagerBuilder;\n","import {\n  Mesh,\n  Vector3,\n  StandardMaterial,\n  Texture,\n  Space\n} from \"@babylonjs/core\";\n\nclass GroundBuilder {\n  constructor(scene) {\n    this._scene = scene;\n    this._name = `camera${Math.floor(Math.random() * 1e3)}`;\n    this._width = 1;\n    this._height = 1;\n    this._textureSrc = null;\n    this._isPickable = false;\n  }\n\n  name(name) {\n    this._name = name;\n    return this;\n  }\n\n  width(width) {\n    this._width = width;\n    return this;\n  }\n\n  height(height) {\n    this._height = height;\n    return this;\n  }\n\n  textureSrc(textureSrc) {\n    this._textureSrc = textureSrc;\n    return this;\n  }\n\n  isPickable(isPickable) {\n    this._isPickable = isPickable;\n    return this;\n  }\n\n  build() {\n    const ground = Mesh.CreateGround(\n      this._name,\n      this._width,\n      this._height,\n      1,\n      this._scene\n    );\n    ground.translate(new Vector3(0, -1, 0), 1e-1, Space.WORLD);\n    if (this._textureSrc) {\n      ground.material = new StandardMaterial(\n        `Texture${this._name}`,\n        this._scene\n      );\n      ground.material.ambientTexture = new Texture(\n        this._textureSrc,\n        this._scene\n      );\n      ground.material.ambientTexture.uScale = 1;\n      ground.material.ambientTexture.vScale = 1;\n    }\n    ground.isPickable = this._isPickable;\n    return ground;\n  }\n}\n\nexport default GroundBuilder;\n","import { PointLight } from \"@babylonjs/core\";\n\nclass PositionalLightBuilder {\n  constructor(scene) {\n    this._scene = scene;\n    this._position = null;\n    this._name = `light${Math.floor(Math.random() * 1e3)}`;\n    this._intensity = 1;\n  }\n\n  position(position) {\n    this._position = position;\n    return this;\n  }\n\n  name(name) {\n    this._name = name;\n    return this;\n  }\n\n  intensity(intensity) {\n    this._intensity = intensity;\n    return this;\n  }\n\n  build() {\n    const variables = Object.values(this);\n    variables.forEach(x => {\n      if (x === null)\n        throw `There are missing variables to build a light, e.g ${x}`;\n    });\n    const light = new PointLight(this._name, this._position, this._scene);\n    light.intensity = this._intensity;\n    return light;\n  }\n}\n\nexport default PositionalLightBuilder;\n","import { Mesh, Vector3, Color3, MeshBuilder } from \"@babylonjs/core\";\nclass ReferentialBuilder {\n  constructor(scene) {\n    this._scene = scene;\n    this._name = `referential${Math.floor(Math.random() * 1e3)}`;\n    this._isPickable = true;\n    this._boxParams = { isVisible: true, size: 0.25 };\n    this._size = 1;\n  }\n\n  name(name) {\n    this._name = name;\n    return this;\n  }\n\n  isPickable(isPickable) {\n    this._isPickable = isPickable;\n    return this;\n  }\n\n  boxParams(boxParams) {\n    this._boxParams = boxParams;\n    return this;\n  }\n\n  size(size) {\n    this._size = size;\n    return this;\n  }\n\n  build() {\n    const size = this._size;\n    const axisX = Mesh.CreateLines(\n      `axisX${this._name}`,\n      [\n        new Vector3.Zero(),\n        new Vector3(size, 0, 0),\n        new Vector3(size * 0.95, 0.05 * size, 0),\n        new Vector3(size, 0, 0),\n        new Vector3(size * 0.95, -0.05 * size, 0)\n      ],\n      this._scene\n    );\n    axisX.color = new Color3(1, 0, 0);\n    axisX.isPickable = false;\n    const axisY = Mesh.CreateLines(\n      `axisY${this._name}`,\n      [\n        new Vector3.Zero(),\n        new Vector3(0, size, 0),\n        new Vector3(-0.05 * size, size * 0.95, 0),\n        new Vector3(0, size, 0),\n        new Vector3(0.05 * size, size * 0.95, 0)\n      ],\n      this._scene\n    );\n    axisY.color = new Color3(0, 1, 0);\n    axisY.isPickable = false;\n    const axisZ = Mesh.CreateLines(\n      `axisZ${this._name}`,\n      [\n        new Vector3.Zero(),\n        new Vector3(0, 0, size),\n        new Vector3(0, -0.05 * size, size * 0.95),\n        new Vector3(0, 0, size),\n        new Vector3(0, 0.05 * size, size * 0.95)\n      ],\n      this._scene\n    );\n    axisZ.color = new Color3(0, 0, 1);\n    axisZ.isPickable = false;\n\n    const localOrigin = MeshBuilder.CreateBox(\n      this._name,\n      { size: this._boxParams.size },\n      this._scene\n    );\n    localOrigin.isVisible = this._boxParams.isVisible;\n    localOrigin.isPickable = this._isPickable;\n\n    axisX.parent = localOrigin;\n    axisY.parent = localOrigin;\n    axisZ.parent = localOrigin;\n\n    return localOrigin;\n  }\n}\n\nexport default ReferentialBuilder;\n","import Vec3 from \"../Math/Vec3\";\nimport Mat3 from \"../Math/Mat3\";\nimport { Maybe } from \"monet\";\nimport GizmoManagerBuilder from \"./GizmoManagerBuilder.js\";\nimport CameraBuilder from \"./CameraBuilder\";\nimport PositionalLightBuilder from \"./PositionalLightBuilder\";\nimport ReferentialBuilder from \"./ReferentialBuilder\";\nimport GroundBuilder from \"./GroundBuilder\";\nimport DirectionalLightBuilder from \"./DirectionalLightBuilder\";\nimport earcut from \"earcut\";\nimport {\n  Vector3,\n  Color3,\n  Quaternion,\n  StandardMaterial,\n  VertexData,\n  Mesh,\n  Matrix,\n  MeshBuilder,\n  VertexBuffer,\n  Curve3\n} from \"@babylonjs/core\";\nimport GlobalRef from \"../NodeItem/GlobalRef\";\nimport Box from \"../NodeItem/Box\";\n\nclass Util3d {\n  static getWorldCoordinates(mesh, localPosition) {\n    if (mesh.parent && mesh.parent.name === GlobalRef.NAME)\n      return Vec3.ofBabylon(localPosition);\n    const meshParent = mesh.parent;\n    const meshParentPos = Vec3.ofBabylon(meshParent.position);\n    const meshParentRotMat = Util3d.getRotationMatrix(meshParent);\n    const meshParentScaling = Vec3.ofBabylon(meshParent.scaling);\n    return meshParentRotMat\n      .prodVec(\n        meshParentScaling.mul(\n          Util3d.getWorldCoordinates(mesh.parent, localPosition)\n        )\n      )\n      .add(meshParentPos);\n  }\n\n  static getBabylonCoordinates(positionInWorld) {\n    return GlobalRef.forwardCoordinates(positionInWorld);\n  }\n\n  /**\n   *\n   * @param {*} mesh\n   * @param {*} worldPosition: Vector3\n   */\n  static getLocalCoordinatesFromWorld(mesh, worldPosition) {\n    if (mesh.parent && mesh.parent.name === GlobalRef.NAME)\n      return Vec3.ofBabylon(worldPosition);\n    const meshParent = mesh.parent;\n    const meshParentPos = Vec3.ofBabylon(meshParent.position);\n    const meshParentRotMat = Util3d.getRotationMatrix(meshParent);\n    const meshParentScaling = Vec3.ofBabylon(meshParent.scaling);\n    return meshParentScaling\n      .map(z => 1 / z)\n      .mul(\n        meshParentRotMat.dotVec(\n          Util3d.getLocalCoordinatesFromWorld(meshParent, worldPosition).sub(\n            meshParentPos\n          )\n        )\n      );\n  }\n\n  /**\n   *\n   * @param {*} mesh\n   * @param {*} worldPosition: Vec3\n   */\n  static computeLocalCoordinatesFromMesh(mesh, worldPosition) {\n    /// WARNING: very similar with getLocalCoordinatesFromWorld\n    if (!mesh.parent) {\n      return worldPosition;\n    }\n    const meshParent = mesh.parent;\n    const meshParentPos = Vec3.ofBabylon(meshParent.position);\n    const meshParentRotMat = Util3d.getRotationMatrix(meshParent);\n    const meshParentScaling = Vec3.ofBabylon(meshParent.scaling);\n    // assume scaling != 0\n    const inverseScaling = meshParentScaling.map(x => 1.0 / x);\n\n    return inverseScaling.mul(\n      meshParentRotMat.dotVec(\n        Util3d.computeLocalCoordinatesFromMesh(meshParent, worldPosition).sub(\n          meshParentPos\n        )\n      )\n    );\n  }\n\n  /**\n   *\n   * @param {*} parentView: MainView\n   */\n  static toLocalCoordinates = parentView => {\n    const rootMesh = parentView.getRootNode().item.mesh;\n    return arrayOfVector3 => {\n      const transform = p =>\n        Util3d.computeLocalCoordinatesFromMesh(\n          { parent: rootMesh },\n          Vec3.ofBabylon(p)\n        ).toBabylon();\n      if (Array.isArray(arrayOfVector3)) {\n        return arrayOfVector3.map(transform);\n      }\n      return transform(arrayOfVector3);\n    };\n  };\n\n  static getRotationMatrix(mesh) {\n    const localRotationMatrix = new Matrix();\n    const maybeQuaternion = Maybe.fromNull(mesh.rotationQuaternion);\n    maybeQuaternion.forEach(quaternion =>\n      quaternion.toRotationMatrix(localRotationMatrix)\n    );\n    maybeQuaternion.orElseRun(() => {\n      const quaternion = Quaternion.RotationYawPitchRoll(\n        mesh.rotation.y,\n        mesh.rotation.x,\n        mesh.rotation.z\n      );\n      quaternion.toRotationMatrix(localRotationMatrix);\n    });\n    return Mat3.ofBabylonMatrix(localRotationMatrix);\n  }\n\n  static showNormals(scene, mesh, size = 1, color = Color3.Red()) {\n    const normals = mesh.getVerticesData(VertexBuffer.NormalKind);\n    const positions = mesh.getVerticesData(VertexBuffer.PositionKind);\n    const lines = [];\n    for (let i = 0; i < normals.length; i += 3) {\n      const v1 = Vector3.FromArray(positions, i);\n      const v2 = v1.add(Vector3.FromArray(normals, i).scaleInPlace(size));\n      lines.push([v1.add(mesh.position), v2.add(mesh.position)]);\n    }\n    const normalLines = MeshBuilder.CreateLineSystem(\n      \"normalLines\",\n      { lines: lines },\n      scene\n    );\n    normalLines.color = color;\n    normalLines.parent = mesh;\n    return normalLines;\n  }\n\n  static orthogonalBasisFromVector(u) {\n    const identityMatrix = [\n      new Vector3(1, 0, 0),\n      new Vector3(0, 1, 0),\n      new Vector3(0, 0, 1)\n    ];\n    const uArray = [u.x, u.y, u.z];\n    // choose pivot\n    let pivot = 0;\n    for (let i = 0; i < 3; i++) {\n      if (uArray[i] !== 0) {\n        pivot = i;\n        break;\n      }\n    }\n    let v = identityMatrix[(pivot + 1) % 3].add(\n      identityMatrix[pivot].scale(-uArray[(pivot + 1) % 3] / uArray[pivot])\n    );\n    v = v.normalize();\n    let w = identityMatrix[(pivot + 2) % 3].add(\n      identityMatrix[pivot].scale(-uArray[(pivot + 2) % 3] / uArray[pivot])\n    );\n    w = w.normalize();\n    w = w.subtract(v.scale(Vector3.Dot(v, w)));\n    return { u: Vector3.FromArray(uArray).normalize(), v: v, w: w.normalize() };\n  }\n\n  static createOrientedCone = (\n    scene,\n    u = new Vector3(1, 0, 0),\n    color = Color3.Gray(),\n    name = `OrientedCone${randomDigits()}`,\n    isPickable = true,\n    segments = 16\n  ) => {\n    const surface = {\n      positions: [],\n      faces: []\n    };\n    const d = u.length() / 3;\n    const mat3 = Util3d.orthogonalBasisFromVector(u);\n    const v = mat3.v;\n    const w = mat3.w;\n\n    const orientation = Math.sign(Vector3.Dot(Vector3.Cross(v, w), u));\n    // positions\n    for (let i = 0; i < segments; i++) {\n      const theta = orientation * ((2 * Math.PI) / segments) * i;\n      surface.positions.push(\n        v.scale(d * Math.cos(theta)).add(w.scale(d * Math.sin(theta)))\n      );\n    }\n\n    surface.positions.push(Vector3.Zero());\n    surface.positions.push(u);\n\n    const zeroIndex = surface.positions.length - 1;\n    const uIndex = surface.positions.length - 2;\n\n    for (let i = 0; i < segments; i++) {\n      // bottom faces\n      surface.faces.push([zeroIndex, (i + 1) % segments, i]);\n      // cone faces\n      surface.faces.push([uIndex, i, (i + 1) % segments]);\n    }\n\n    // mesh\n    const mesh = Util3d.meshFromPositionAndFaces(\n      name,\n      scene,\n      surface.positions,\n      surface.faces\n    );\n    mesh.convertToFlatShadedMesh();\n    const material = new StandardMaterial(`OrientedConeMaterial${name}`, scene);\n    material.diffuseColor = color;\n    material.emissiveColor = color;\n    mesh.material = material;\n    mesh.isPickable = isPickable;\n    return mesh;\n  };\n\n  static createSphere = (\n    scene,\n    color = Color3.Gray(),\n    diameter = 1,\n    name = `Sphere${randomDigits()}`,\n    isPickable = true\n  ) => {\n    const sphere = Mesh.CreateSphere(name, 16, diameter, scene);\n    const material = Util3d.getMaterialFromColor(\n      color,\n      scene,\n      `SphereMaterial${name}`\n    );\n    sphere.material = material;\n    sphere.isPickable = isPickable;\n    return sphere;\n  };\n\n  static createBox = (\n    scene,\n    color = Color3.Gray(),\n    size = Box.DEFAULT_SIZE,\n    name = `Box${randomDigits()}`,\n    isPickable = true\n  ) => {\n    const box = Mesh.CreateBox(name, size, scene);\n    const material = new StandardMaterial(`BoxMaterial${name}`, scene);\n    material.diffuseColor = color;\n    material.emissiveColor = color;\n    box.material = material;\n    box.isPickable = isPickable;\n    return box;\n  };\n\n  static createTubeFromPoints = (\n    scene,\n    points,\n    color = Color3.Gray(),\n    radius = 1,\n    name = `Tube${randomDigits()}`,\n    isPickable = true\n  ) => {\n    const mesh = MeshBuilder.CreateTube(\n      name,\n      {\n        path: points,\n        radius: radius,\n        sideOrientation: Mesh.DOUBLESIDE,\n        updatable: true\n      },\n      scene\n    );\n    mesh.material = Util3d.getMaterialFromColor(\n      color,\n      scene,\n      `Material${name}`\n    );\n    mesh.isPickable = isPickable;\n    return mesh;\n  };\n\n  static positionalLightBuilder = scene => {\n    return new PositionalLightBuilder(scene);\n  };\n\n  static directionalLightBuilder = scene => {\n    return new DirectionalLightBuilder(scene);\n  };\n\n  static cameraBuilder(scene) {\n    return new CameraBuilder(scene);\n  }\n\n  static gizmoManagerBuilder(scene) {\n    return new GizmoManagerBuilder(scene);\n  }\n\n  static referentialBuilder = scene => {\n    return new ReferentialBuilder(scene);\n  };\n\n  /**\n   * Return a maybe position of intersection of the mouse and a ground mesh\n   *\n   * @param {Scene} scene Babylon scene\n   * @param {Ground} ground a Babylon mesh that represents the ground\n   * @returns {Maybe} a maybe 3-vector representing the mouse ground intersection\n   */\n  static getGroundPosition = function (scene, ground) {\n    // Use a predicate to get position on the ground\n    const pickInfo = scene.pick(\n      scene.pointerX,\n      scene.pointerY,\n      mesh => mesh === ground\n    );\n    if (pickInfo.hit) return Maybe.some(pickInfo.pickedPoint);\n    return Maybe.none();\n  };\n\n  static pickMesh = (scene, ground) => {\n    const pickInfo = scene.pick(\n      scene.pointerX,\n      scene.pointerY,\n      mesh => mesh !== ground && mesh.isEnabled()\n    );\n    if (pickInfo.hit && pickInfo.pickedMesh.isPickable) {\n      return Maybe.some(pickInfo.pickedMesh);\n    }\n    return Maybe.none();\n  };\n\n  static groundBuilder = scene => {\n    return new GroundBuilder(scene);\n  };\n\n  static meshFromPositionAndFaces(\n    name,\n    scene,\n    positions,\n    faces,\n    updatable = true\n  ) {\n    const vertexData = new VertexData();\n\n    vertexData.positions = positions.flatMap(z => [z.x, z.y, z.z]);\n    vertexData.indices = faces.flatMap(z => z);\n\n    let mesh = new Mesh(name, scene);\n    vertexData.applyToMesh(mesh, updatable);\n    // mesh.createNormals();\n    return mesh;\n  }\n\n  /**\n   *\n   * @param {*} polygon: Array of babylonjs vector3, representing a boundary of a polygon\n   */\n  static triangulatePolygon(polygon) {\n    const triangulation = earcut(\n      polygon.map(x => [x.x, x.y, x.z]).flatMap(x => x),\n      null,\n      3\n    );\n    const len = triangulation.length / 3;\n    const ans = [];\n    for (let i = 0; i < len; i++) {\n      const i3 = 3 * i;\n      ans.push([\n        triangulation[i3],\n        triangulation[i3 + 1],\n        triangulation[i3 + 2]\n      ]);\n    }\n    return ans;\n  }\n\n  /**\n   *\n   * @param {*} polygon: Array of babylonjs vector3, representing a boundary of a polygon\n   * Returns a real number representing the orientation of the curve, if positive represents a counterclockwise orientation, clockwise otherwise.\n   */\n  static computeOrientation(polygon) {\n    const n = polygon.length;\n    const vec3Poly = polygon.map(x => Vec3.ofBabylon(x));\n    let orientation = 0;\n    vec3Poly.forEach((a, i) => {\n      const modi = (i + 1) % n;\n      const edge = vec3Poly[modi].sub(vec3Poly[i]);\n      orientation += Vec3.of([-a.y, a.x, a.z]).dot(edge);\n    });\n    return orientation / 2;\n  }\n\n  /**\n   * @param {*} arrayOfPoints: array of babylon vec3\n   * Returns the average\n   */\n  static pointAverage(arrayOfPoints) {\n    if (!arrayOfPoints || arrayOfPoints.length === 0) return Vector3.Zero();\n    return arrayOfPoints\n      .reduce((e, x) => e.add(x), Vector3.Zero())\n      .scale(1 / arrayOfPoints.length);\n  }\n\n  static pointAverageVec3(arrayOfPoints) {\n    if (!arrayOfPoints || arrayOfPoints.length === 0) return Vec3.ZERO;\n    return arrayOfPoints\n      .reduce((e, x) => e.add(x), Vec3.ZERO)\n      .scale(1 / arrayOfPoints.length);\n  }\n\n  static randomVector3(a, b) {\n    return new Vector3.FromArray(\n      [0, 0, 0].map(x => a + (b - a) * Math.random())\n    );\n  }\n\n  static getMaterialFromColor(\n    color,\n    scene,\n    name = `MaterialFromColor${randomDigits()}`\n  ) {\n    const material = new StandardMaterial(name, scene);\n    material.diffuseColor = color;\n    material.emissiveColor = color;\n    return material;\n  }\n\n  static piecewiseCurveDistance = curve => {\n    let distance = 0;\n    for (let i = 0; i < curve.length - 1; i++) {\n      const v = curve[i + 1].subtract(curve[i]);\n      distance += v.length();\n    }\n    return distance;\n  };\n\n  static getCurveOrientations = curve => {\n    const orientations = [];\n    for (let i = 0; i < curve.length - 1; i++) {\n      const v = curve[i + 1].subtract(curve[i]);\n      orientations.push(Math.atan2(v.y, v.x));\n    }\n    orientations.push(orientations[orientations.length - 1]);\n    return orientations;\n  };\n\n  static getSplineFromCurve = (curve, nbPoints = 7) => {\n    const closed = false;\n    return {\n      points: Curve3.CreateCatmullRomSpline(curve, nbPoints, closed).getPoints()\n    };\n  };\n\n  static splineObj2redis = splineObj => {\n    const orientations = Util3d.getCurveOrientations(splineObj.points);\n    return splineObj.points.map((x, i) => {\n      return [x.x, x.y, orientations[i]];\n    });\n  };\n}\n\nconst randomDigits = () => {\n  return Math.floor(Math.random() * 1e3);\n};\n\nexport default Util3d;\n","export class Animator {\n  constructor(state, next, doWhile) {\n    this.state = state;\n    this.next = next;\n    this.while = doWhile;\n    this.requestAnimeId = null;\n  }\n\n  play() {\n    this.requestAnimeId = requestAnimationFrame(() => {\n      if (!this.while(this.state)) return this.stop();\n      this.state = this.next(this.state);\n      this.play();\n    });\n    return this;\n  }\n\n  stop() {\n    cancelAnimationFrame(this.requestAnimeId);\n    return this;\n  }\n\n  static builder() {\n    return new AnimatorBuilder();\n  }\n}\n\nclass AnimatorBuilder {\n  constructor() {\n    this._state = null;\n    this._next = null;\n    this._end = null;\n  }\n\n  initialState(state) {\n    this._state = state;\n    return this;\n  }\n\n  nextState(next) {\n    this._next = next;\n    return this;\n  }\n\n  while(end) {\n    this._end = end;\n    return this;\n  }\n\n  build() {\n    const someAreEmpty = [this._state, this._next, this._end].some(\n      x => x === null || x === undefined\n    );\n    if (someAreEmpty) throw \"Animator properties are missing\";\n    return new Animator(this._state, this._next, this._end);\n  }\n}\n","import { MasterDB } from \"mov-fe-lib-core\";\n\nclass AnnotationManager {\n  constructor() {\n    if (instance) return instance;\n    instance = this;\n    this.annotations = {};\n    this.observers = [];\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                   Getters & Setters                                  *\n   *                                                                                      */\n  //========================================================================================\n\n  getAnnotations = () => this.annotations;\n\n  load() {\n    this.retrieveAnnotationsFromDb();\n    return this;\n  }\n  /**\n   *\n   * @param {*} lambda: AnnotationManager -> {}\n   */\n  pushObserver(lambda) {\n    this.observers.push(lambda);\n    return this;\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                         Utils                                        *\n   *                                                                                      */\n  //========================================================================================\n\n  retrieveAnnotationsFromDb() {\n    MasterDB.subscribe(\n      { Scope: \"Annotation\", Name: \"*\" },\n      data => {\n        console.log(\"Annotation update\", data);\n        const actionMap = {\n          del: annotation => this.delAnnotation(annotation),\n          set: annotation => this.addAnnotation(annotation)\n        };\n        const annotation = data.key.Annotation;\n        if (data.event in actionMap) {\n          actionMap[data.event](annotation);\n          this.observers.forEach(f => f(this));\n        }\n      },\n      data => {\n        console.log(\"Annotation start\", data);\n        const annotation = data.value.Annotation;\n        this.addAnnotation(annotation);\n      }\n    );\n  }\n\n  delAnnotation(annotation) {\n    if (!annotation) return;\n    const names2delete = Object.keys(annotation).reduce((e, x) => {\n      e.push(x);\n      return e;\n    }, []);\n    Object.keys(this.annotations).forEach(annotationType => {\n      const value = this.annotations[annotationType];\n      value.names = value.names.filter(x => !names2delete.includes(x));\n      value.labels = value.labels.filter(x => !names2delete.includes(x));\n    });\n  }\n\n  addAnnotation(annotation) {\n    if (!annotation) return;\n    Object.keys(annotation).forEach(name => {\n      const annotationObj = annotation[name];\n      if (!annotationObj.Type) return;\n      const type = annotationObj.Type.toLowerCase();\n      const label = annotationObj.Label;\n      if (!(type in this.annotations)) {\n        this.annotations[type] = { names: [], labels: [] };\n      }\n      this.annotations[type].names.push(name);\n      this.annotations[type].labels.push(label ? label : name);\n    });\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                        Static                                        *\n   *                                                                                      */\n  //========================================================================================\n\n  static getInstance() {\n    return new AnnotationManager();\n  }\n\n  static getAnnotations() {\n    return AnnotationManager.getInstance().getAnnotations();\n  }\n}\nlet instance = null;\nexport default AnnotationManager;\n","import AddMapAction from \"../Actions/AddMapAction\";\nimport RobotAction from \"../Actions/RobotAction\";\nimport Robot from \"../NodeItem/Robot\";\nimport AddMeshAction from \"../Actions/AddMeshAction\";\n\nexport const ASSETS_TYPES = {\n  Map: \"Map\",\n  Robot: \"Robot\",\n  Mesh: \"Mesh\"\n};\n\nexport const AssetsTypesFactory = {\n  Map: map => new AddMapAction(map.name, map.loader),\n  Robot: robot => new RobotAction(robot, Robot.getSocketAnimator),\n  Mesh: mesh => new AddMeshAction(mesh)\n};\n","import { Clipboard as Clip } from \"mov-fe-lib-core\";\n\nconst SCENE_CONTEXT = \"scene\";\n\nexport default class Clipboard {\n  static copy(value) {\n    Clip.write(SCENE_CONTEXT, value);\n  }\n  static paste() {\n    return Clip.read(SCENE_CONTEXT);\n  }\n}\n","const Constants = {\n  RADIUS: 0.4,\n  POINTS_DENSITY: 2,\n  CLOUD_FUNCTION_NAME: \"backend.viewer\",\n};\n\nexport default Constants;\n","import { Vector3 } from \"@babylonjs/core\";\nimport Util3d from \"../Util3d/Util3d\";\nimport { Animator } from \"./Animator\";\n\nexport default class DefaultMouseEvents {\n  static onPointerDown = mainView => evt => {\n    mainView.mousePosClick = mainView\n      .getMouseCoordinatesFromRoot()\n      .orSome(Vector3.Zero());\n    mainView.mousePosMove = mainView.mousePosClick;\n    mainView.sceneMemory.forEach(({ camera, canvas }) => {\n      if (evt.buttons === 2 || evt.buttons === 4 || evt.ctrlKey) {\n        camera.detachControl(canvas);\n      }\n    });\n  };\n\n  static onPointerUp = mainView => evt => {\n    mainView.sceneMemory.forEach(({ camera, canvas }) => {\n      camera.attachControl(canvas, true);\n    });\n  };\n\n  static onPointerMove = mainView => evt => {\n    mainView.sceneMemory.forEach(({ mouseLocationText, camera }) => {\n      mainView.getMouseCoordinatesFromRoot().forEach(currentLocal => {\n        setMouseLocationTxt(mouseLocationText, currentLocal);\n        const panCamera = () => {\n          const v = currentLocal.subtract(mainView.mousePosMove);\n          const vBabylon = Util3d.getBabylonCoordinates(v).scale(-1);\n          animateCamera(camera, vBabylon);\n          mainView.mousePosMove = currentLocal;\n        };\n        const mouseButtonActions = [\n          { predicate: evt.ctrlKey && evt.buttons === 1, action: panCamera },\n          { predicate: evt.buttons === 4, action: panCamera }\n        ];\n        const filterActions = mouseButtonActions.filter(\n          ({ predicate }) => predicate\n        );\n        if (filterActions.length > 0) filterActions[0].action();\n      });\n    });\n  };\n}\n\nfunction animateCamera(camera, v) {\n  Animator.builder()\n    .initialState({\n      camera: camera,\n      time: 0,\n      T: new Date().getTime()\n    })\n    .nextState(s => {\n      const { camera, time } = s;\n      const dt = 0.1; //(new Date().getTime() - T) / 1000;\n      const vdt = v.scale(dt);\n      camera.position = camera.position.add(vdt);\n      camera.setTarget(camera.target.add(vdt));\n      return {\n        camera: camera,\n        time: time + dt,\n        T: new Date().getTime()\n      };\n    })\n    .while(s => s.time <= 1)\n    .build()\n    .play();\n}\n\nfunction setMouseLocationTxt(mouseLocationText, currentLocal) {\n  mouseLocationText.text = `x: ${currentLocal.x.toFixed(\n    2\n  )}, y: ${currentLocal.y.toFixed(2)}`;\n}\n","import {\n  Scene,\n  Color3,\n  RotationGizmo,\n  UtilityLayerRenderer,\n  Vector3,\n  StandardMaterial,\n  Mesh,\n  Space\n} from \"@babylonjs/core\";\nimport { TextBlock, AdvancedDynamicTexture } from \"@babylonjs/gui/2D\";\nimport Util3d from \"../Util3d/Util3d\";\n// import \"@babylonjs/core/Debug/debugLayer\";\n// import \"@babylonjs/inspector\";\n\nclass DefaultScene {\n  static createGizmo = scene => {\n    const gizmoManager = new RotationGizmo(new UtilityLayerRenderer(scene));\n    gizmoManager.xGizmo.dragBehavior.detach();\n    gizmoManager.xGizmo.scaleRatio = 0.0;\n    gizmoManager.yGizmo.dragBehavior.detach();\n    gizmoManager.yGizmo.scaleRatio = 0.0;\n    return gizmoManager;\n  };\n\n  static createCamera = (scene, canvas, forEach = camera => {}) => {\n    const COLLISION_RADIUS = 1;\n    const camera = Util3d.cameraBuilder(scene)\n      .sphericalCoordinates(new Vector3(0, 0, 14))\n      .target(Vector3.Zero())\n      .name(\"camera\")\n      .build();\n    camera.attachControl(canvas, false);\n    camera.inertia = 0.7;\n    camera.collisionRadius = new Vector3(\n      COLLISION_RADIUS,\n      COLLISION_RADIUS,\n      COLLISION_RADIUS\n    );\n    camera.panningInertia = 0.5;\n    camera.checkCollisions = true;\n    camera.panningSensibility = 0;\n    camera.lowerRadiusLimit = 2;\n\n    forEach(camera);\n    return camera;\n  };\n\n  static createLight = scene => {\n    return Util3d.directionalLightBuilder(scene)\n      .name(\"light\")\n      .direction(new Vector3(0, -1, 0))\n      .intensity(0.35)\n      .build();\n  };\n\n  static createMeshGround = (scene, width = 20, height = 20) => {\n    const ground = Mesh.CreateGround(\"groundMesh\", width, height, 20, scene);\n    ground.translate(new Vector3(0, -1, 0), 1e-2, Space.WORLD);\n    ground.material = new StandardMaterial(\"wireframe\", scene);\n    ground.material.wireframe = true;\n    ground.isPickable = false;\n    ground.checkCollisions = true;\n    return ground;\n  };\n\n  static createScene = engine => {\n    const scene = new Scene(engine);\n    scene.clearColor = Color3.Black;\n    scene.collisionsEnabled = true;\n    scene._uid = scene.getUniqueId();\n    // scene.debugLayer.show();\n    return scene;\n  };\n\n  static createMouseLocationText = scene => {\n    const advancedTexture = AdvancedDynamicTexture.CreateFullscreenUI(\n      \"UI\",\n      true,\n      scene\n    );\n    const text = new TextBlock();\n    text.text = \"\";\n    text.color = \"white\";\n    text.fontSize = 17;\n    text.left = -560;\n    text.top = -145;\n    advancedTexture.addControl(text);\n    return text;\n  };\n}\n\nexport default DefaultScene;\n","import { Maybe } from \"monet\";\n/**\n * Mesh cache for each scene.\n *\n * Each mesh is associated with a scene therefore we must have a cache per scene.\n *\n */\nclass MeshCache {\n  constructor() {\n    if (instance) return instance;\n    instance = this;\n    this.meshCacheBySceneId = {};\n    this.count = 0;\n  }\n\n  static getInstance() {\n    return new MeshCache();\n  }\n\n  hasKey(key, scene) {\n    const sceneId = scene._uid;\n    return Maybe.fromNull(this.meshCacheBySceneId[sceneId])\n      .flatMap(meshCache => ofNull(meshCache[key]))\n      .cata(\n        () => false,\n        () => true\n      );\n  }\n\n  put(key, scene, mesh) {\n    const sceneId = scene._uid;\n    if (!(sceneId in this.meshCacheBySceneId)) {\n      this.meshCacheBySceneId[sceneId] = {};\n    }\n    this.meshCacheBySceneId[sceneId][key] = mesh;\n    mesh.setEnabled(false);\n    return this;\n  }\n\n  get(key, scene) {\n    const sceneId = scene._uid;\n    return Maybe.fromNull(this.meshCacheBySceneId[sceneId])\n      .flatMap(meshCache => ofNull(meshCache[key]))\n      .map(mesh => {\n        console.log(\n          \"#Mesh: Found Mesh in cache, retrieving copy number\",\n          this.count\n        );\n        const cloneMesh = mesh.clone(`${key}${this.count++}`);\n        console.log(\"#Mesh:\", cloneMesh);\n        return cloneMesh;\n      })\n      .orNull();\n  }\n\n  del(scene) {\n    const sceneId = scene._uid;\n    if (sceneId in this.meshCacheBySceneId) {\n      delete this.meshCacheBySceneId[sceneId];\n    }\n  }\n}\n\nconst ofNull = x => Maybe.fromNull(x);\n// private instance\nlet instance = null;\nexport default MeshCache;\n","import MeshCache from \"./MeshCache\";\nimport { AssetsManager } from \"@babylonjs/core\";\nimport \"@babylonjs/loaders\";\n\nclass MeshLoader {\n  constructor(scene) {\n    this.scene = scene;\n  }\n\n  static of(scene) {\n    return new MeshLoader(scene);\n  }\n\n  load = (meshName, mapFunction = mesh => mesh) =>\n    new Promise((re, rej) => {\n      const meshCache = MeshCache.getInstance();\n      if (meshCache.hasKey(meshName, this.scene)) {\n        console.log(`Found Mesh ${meshName} in cache for scene ${this.scene}`);\n        re(mapFunction(meshCache.get(meshName, this.scene)));\n      } else {\n        console.log(\"Loading mesh....\");\n        const assetsManager = new AssetsManager(this.scene);\n        const meshTask = assetsManager.addMeshTask(\"\", \"\", MESH_URL, meshName);\n        meshTask.onSuccess = task => {\n          console.log(\"Load Success\", meshName);\n          const mesh = task.loadedMeshes[0];\n          mesh.name = meshName;\n          meshCache.put(meshName, this.scene, mesh);\n        };\n        meshTask.onError = (task, message, exception) =>\n          rej({ message, exception });\n        assetsManager.onFinish = task => {\n          console.log(\"Load finish \");\n          re(mapFunction(meshCache.get(meshName, this.scene)));\n        };\n        assetsManager.load();\n      }\n    });\n\n  static getMeshUrl = src => `${MESH_URL}${src}`;\n}\n\nconst MESH_URL = `/static/meshes/`;\nexport default MeshLoader;\n","import { MasterDB } from \"mov-fe-lib-core\";\nimport Constants from \"./Constants\";\n\nclass SceneServerUtils {\n  static retrieveScene = (\n    sceneName,\n    successCallback = DEFAULT_SUCCESS,\n    failCallback = DEFAULT_FAILURE(\"retrieving scene\")\n  ) => {\n    MasterDB.cloudFunction(\n      Constants.CLOUD_FUNCTION_NAME,\n      \"retrieveScene\",\n      sceneName,\n      data => successFailIf(data, successCallback, failCallback)\n    );\n  };\n}\n\nconst DEFAULT_FAILURE = failureLocation => data => {\n  throw \"\" + `Exception caught in ${failureLocation}: ${data.error}`;\n};\n\nconst DEFAULT_SUCCESS = data => {};\n\nconst successFailIf = (data, successCallback, failCallback) => {\n  if (data.success) {\n    successCallback(data);\n  } else {\n    failCallback(data);\n  }\n};\nexport default SceneServerUtils;\n","import TreeObject from \"../TreeObject/TreeObject\";\nimport TreeNode from \"../TreeObject/TreeNode\";\nimport GlobalRef from \"../NodeItem/GlobalRef\";\nimport { MasterDB } from \"mov-fe-lib-core\";\nimport Constants from \"./Constants\";\n\nconst CLOUD_FUNCTION_NAME = Constants.CLOUD_FUNCTION_NAME;\n\nclass TreeServerUtils {\n  constructor(sceneName) {\n    this.sceneName = sceneName;\n  }\n\n  static ofScene(sceneName) {\n    return new TreeServerUtils(sceneName);\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                    Util functions                                    *\n   *                                                                                      */\n  //========================================================================================\n\n  getNodeFromTree = (name, objectTree) => {\n    return new TreeObject(objectTree).getNode(x => name === x.title);\n  };\n\n  getParentFromChild = (childName, objectTree) => {\n    return new TreeObject(objectTree).getParentNode(x => childName === x.title);\n  };\n\n  deleteNodeFromTreeUsingName = (name, objectTree, is2delInServer = true) => {\n    this.getNodeFromTree(name, objectTree).forEach(node => {\n      // destroy treeNode\n      TreeNode.dispose(node);\n\n      if (is2delInServer) {\n        this.deleteNodeInServer(name);\n      }\n\n      const maybeParent = this.getParentFromChild(name, objectTree);\n      maybeParent.forEach(parentNode => {\n        parentNode.children = parentNode.children.filter(x => x.title !== name);\n      });\n\n      objectTree = objectTree.filter(x => x.title !== name);\n    });\n    return objectTree;\n  };\n\n  getNodeFromTreeWithPredicate = (predicate, objectTree) => {\n    return new TreeObject(objectTree).getNode(predicate);\n  };\n\n  addNodeItem2Tree = (\n    objectTree,\n    nodeItem,\n    parentName = GlobalRef.NAME,\n    is2addInServer = true,\n    isVisible = true\n  ) => {\n    // delete if already exist\n    this.deleteNodeFromTreeUsingName(nodeItem.name, objectTree, is2addInServer);\n\n    const node2Add = TreeNode.builder()\n      .title(nodeItem.name)\n      .item(nodeItem)\n      .isVisible(isVisible)\n      .build();\n\n    if (parentName) {\n      const maybeParentNode = this.getNodeFromTree(parentName, objectTree);\n      maybeParentNode.forEach(parentNode => {\n        if (is2addInServer) this.addNodeItem2Server(node2Add, parentNode.title);\n        parentNode.children.push(node2Add);\n      });\n    } else {\n      objectTree.push(node2Add);\n      if (is2addInServer) this.addNodeItem2Server(node2Add, null);\n    }\n    return objectTree;\n  };\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                   Server functions                                   *\n   *                                                                                      */\n  //========================================================================================\n\n  updateNodeInServer = (name, objectTree, oldName = null) => {\n    console.log(\"updateNodeInServer!\", this.sceneName);\n    this.getNodeFromTree(name, objectTree).forEach(node => {\n      const parentName = this.getParentFromChild(name, objectTree)\n        .map(x => x.title)\n        .orNull();\n      MasterDB.cloudFunction(\n        CLOUD_FUNCTION_NAME,\n        \"updateNode\",\n        [TreeNode.toDict(node), parentName, oldName, this.sceneName],\n        data => {\n          console.log(\"Update node with success?\", data.success);\n        }\n      );\n    });\n  };\n\n  addNodeItem2Server = (treeNode, parentName) => {\n    MasterDB.cloudFunction(\n      CLOUD_FUNCTION_NAME,\n      \"addNodeItem\",\n      [TreeNode.toDict(treeNode), parentName, this.sceneName],\n      data => {\n        console.log(\"Add node with success?\", data.success);\n      }\n    );\n  };\n\n  deleteNodeInServer = name => {\n    MasterDB.cloudFunction(\n      CLOUD_FUNCTION_NAME,\n      \"deleteNodeByName\",\n      [name, this.sceneName],\n      data => {\n        console.log(\"Deleted node with success?\", data.success);\n      }\n    );\n  };\n}\n\nexport default TreeServerUtils;\n","import { createGlobalStyle } from \"styled-components\";\nimport { Style as S } from \"mov-fe-lib-core\";\n\nconst Style = createGlobalStyle`${S}`;\nexport default Style;\n","import { createMuiTheme } from \"@material-ui/core/styles\";\nimport \"fontsource-roboto\";\nimport \"fontsource-open-sans\";\n\nconst themeFactory = particular => ({\n  ...particular,\n  typography: {\n    fontFamily: \"Open Sans\",\n    h1: {\n      fontFamily: \"Open Sans\"\n    },\n    h2: {\n      fontFamily: \"Open Sans\"\n    },\n    h3: {\n      fontFamily: \"Open Sans\"\n    },\n    h4: {\n      fontFamily: \"Open Sans\"\n    },\n    h5: {\n      fontFamily: \"Open Sans\"\n    },\n    h6: {\n      fontFamily: \"Open Sans\"\n    },\n    body1: {\n      fontFamily: \"Roboto\"\n    }\n  },\n  cursorDefault: {\n    cursor: \"default\"\n  }\n});\n\nconst Themes = {\n  dark: createMuiTheme(\n    themeFactory({\n      label: \"dark\",\n      backgroundColor:\n        \"linear-gradient(114.01deg, #212121 0%, #050505 100.43%)\",\n      bottomNavigation: { background: \"#212121\" },\n      globalStats: {\n        borderColor: \"#474747\",\n        subTextColor: \"#CDCDCD\",\n        upperTextColor: \"#E6E6E6\"\n      },\n      palette: {\n        type: \"dark\", // Switching the dark mode on, is a single property value change.\n        primary: {\n          main: \"#36b5e6\"\n        },\n        secondary: {\n          main: \"#CF6679\"\n        },\n        green: {\n          main: \"#03DAC5\"\n        }\n      },\n      overrides: {\n        MuiButton: {\n          outlined: {\n            margin: \"8px\"\n          },\n          text: {\n            margin: \"8px\"\n          },\n          contained: {\n            margin: \"8px\"\n          },\n          containedPrimary: {\n            color: \"inherit\",\n            margin: \"8px\"\n          },\n          containedSecondary: {\n            color: \"inherit\",\n            margin: \"8px\"\n          }\n        },\n        MuiButtonGroup: {\n          root: {\n            margin: \"0\"\n          },\n          groupedContainedPrimary: {\n            margin: \"0\"\n          },\n          groupedOutlined: {\n            margin: \"0\"\n          },\n          groupedText: {\n            margin: \"0\"\n          }\n        },\n        MuiIconButton: {\n          root: {\n            color: \"#36b5e6\"\n          }\n        },\n        MuiListItem: {\n          button: {\n            \"&:hover\": {\n              backgroundColor: \"rgba(54,181,230, 0.15)\"\n            }\n          }\n        },\n        MuiFormControlLabel: {\n          label: {\n            color: \"rgba(255,255,255,0.8)\"\n          }\n        },\n        MuiInputBase: {\n          input: {\n            font: \"Roboto\"\n          }\n        },\n        MuiFilledInput: {\n          root: {\n            border: \"4px\"\n          },\n          underline: {\n            \"&::before\": {\n              borderRadius: \"4px\"\n            }\n          }\n        }\n      }\n    })\n  ),\n  light: createMuiTheme(\n    themeFactory({\n      font: {\n        Roboto: {\n          fontFamily: \"Roboto\"\n        },\n        OpenSans: {\n          fontFamily: \"Open Sans\"\n        }\n      },\n      label: \"light\",\n      backgroundColor:\n        \"linear-gradient(122.19deg, #FFFFFF 2.58%, #FFFFFF 76.23%)\", // it was white before\n      bottomNavigation: { background: \"#c3c3c3\" },\n      globalStats: {\n        borderColor: \"#E6E6E6\",\n        subTextColor: \"#717171\",\n        upperTextColor: \"#474747\"\n      },\n      palette: {\n        primary: {\n          main: \"#007197\"\n        },\n        secondary: {\n          main: \"#BE2424\"\n        },\n        green: {\n          main: \"#03DAC5\"\n        }\n      },\n      overrides: {\n        MuiButton: {\n          outlined: {\n            margin: \"8px\"\n          },\n          text: {\n            margin: \"8px\"\n          },\n          contained: {\n            margin: \"8px\"\n          },\n          containedPrimary: {\n            color: \"white\",\n            margin: \"8px\"\n          },\n          containedSecondary: {\n            color: \"white\",\n            margin: \"8px\"\n          }\n        },\n        MuiButtonGroup: {\n          root: {\n            margin: \"0\"\n          },\n          groupedContainedPrimary: {\n            margin: \"0\"\n          },\n          groupedOutlined: {\n            margin: \"0\"\n          },\n          groupedText: {\n            margin: \"0\"\n          }\n        },\n        MuiIconButton: {\n          root: {\n            color: \"#007197\"\n          }\n        },\n        MuiListItem: {\n          button: {\n            \"&:hover\": {\n              backgroundColor: \"rgba(0,113,151, 0.15)\"\n            }\n          }\n        },\n        MuiFormControlLabel: {\n          label: {\n            color: \"rgba(0,0,0,0.8)\"\n          }\n        },\n        MuiInputBase: {\n          input: {\n            font: \"Roboto\"\n          }\n        },\n        MuiFilledInput: {\n          root: {\n            border: \"4px\"\n          },\n          underline: {\n            \"&::before\": {\n              borderRadius: \"4px\"\n            }\n          }\n        }\n      }\n    })\n  )\n};\n\nThemes.getTheme = () => {\n  const theme = window.localStorage.getItem(\"movai.theme\"); // dark or light\n  return theme ? theme : \"dark\";\n};\n\nThemes.setTheme = value => {\n  window.localStorage.setItem(\"movai.theme\", value);\n};\n\nexport default Themes;\n","module.exports = require(\"@babel/runtime/helpers/esm/assertThisInitialized\");","module.exports = require(\"@babel/runtime/helpers/esm/asyncToGenerator\");","module.exports = require(\"@babel/runtime/helpers/esm/classCallCheck\");","module.exports = require(\"@babel/runtime/helpers/esm/classPrivateFieldGet\");","module.exports = require(\"@babel/runtime/helpers/esm/classPrivateFieldSet\");","module.exports = require(\"@babel/runtime/helpers/esm/createClass\");","module.exports = require(\"@babel/runtime/helpers/esm/defineProperty\");","module.exports = require(\"@babel/runtime/helpers/esm/extends\");","module.exports = require(\"@babel/runtime/helpers/esm/get\");","module.exports = require(\"@babel/runtime/helpers/esm/getPrototypeOf\");","module.exports = require(\"@babel/runtime/helpers/esm/inherits\");","module.exports = require(\"@babel/runtime/helpers/esm/objectWithoutProperties\");","module.exports = require(\"@babel/runtime/helpers/esm/possibleConstructorReturn\");","module.exports = require(\"@babel/runtime/helpers/esm/slicedToArray\");","module.exports = require(\"@babel/runtime/helpers/esm/taggedTemplateLiteral\");","module.exports = require(\"@babel/runtime/helpers/esm/toConsumableArray\");","module.exports = require(\"@babel/runtime/helpers/esm/typeof\");","module.exports = require(\"@babel/runtime/regenerator\");","module.exports = require(\"@babylonjs/core\");","module.exports = require(\"@babylonjs/core/Maths/math\");","module.exports = require(\"@babylonjs/gui/2D\");","module.exports = require(\"@babylonjs/loaders\");","module.exports = require(\"@date-io/date-fns\");","module.exports = require(\"@material-ui/core\");","module.exports = require(\"@material-ui/core/Breadcrumbs\");","module.exports = require(\"@material-ui/core/Button\");","module.exports = require(\"@material-ui/core/Checkbox\");","module.exports = require(\"@material-ui/core/Chip\");","module.exports = require(\"@material-ui/core/Collapse\");","module.exports = require(\"@material-ui/core/Divider\");","module.exports = require(\"@material-ui/core/Drawer\");","module.exports = require(\"@material-ui/core/FormControl\");","module.exports = require(\"@material-ui/core/FormControlLabel\");","module.exports = require(\"@material-ui/core/FormHelperText\");","module.exports = require(\"@material-ui/core/Grid\");","module.exports = require(\"@material-ui/core/IconButton\");","module.exports = require(\"@material-ui/core/Input\");","module.exports = require(\"@material-ui/core/InputAdornment\");","module.exports = require(\"@material-ui/core/InputBase\");","module.exports = require(\"@material-ui/core/InputLabel\");","module.exports = require(\"@material-ui/core/ListItemText\");","module.exports = require(\"@material-ui/core/Menu\");","module.exports = require(\"@material-ui/core/MenuItem\");","module.exports = require(\"@material-ui/core/Paper\");","module.exports = require(\"@material-ui/core/Select\");","module.exports = require(\"@material-ui/core/Switch\");","module.exports = require(\"@material-ui/core/Tab\");","module.exports = require(\"@material-ui/core/TableCell\");","module.exports = require(\"@material-ui/core/Tabs\");","module.exports = require(\"@material-ui/core/TextField\");","module.exports = require(\"@material-ui/core/Typography\");","module.exports = require(\"@material-ui/core/colors\");","module.exports = require(\"@material-ui/core/styles\");","module.exports = require(\"@material-ui/core/styles/colorManipulator\");","module.exports = require(\"@material-ui/core/utils\");","module.exports = require(\"@material-ui/icons/Add\");","module.exports = require(\"@material-ui/icons/AddBox\");","module.exports = require(\"@material-ui/icons/ArrowDownward\");","module.exports = require(\"@material-ui/icons/Check\");","module.exports = require(\"@material-ui/icons/ChevronLeft\");","module.exports = require(\"@material-ui/icons/ChevronRight\");","module.exports = require(\"@material-ui/icons/Clear\");","module.exports = require(\"@material-ui/icons/Close\");","module.exports = require(\"@material-ui/icons/DeleteOutline\");","module.exports = require(\"@material-ui/icons/Edit\");","module.exports = require(\"@material-ui/icons/ExpandMore\");","module.exports = require(\"@material-ui/icons/FilterList\");","module.exports = require(\"@material-ui/icons/FirstPage\");","module.exports = require(\"@material-ui/icons/Label\");","module.exports = require(\"@material-ui/icons/LastPage\");","module.exports = require(\"@material-ui/icons/NavigateNext\");","module.exports = require(\"@material-ui/icons/Remove\");","module.exports = require(\"@material-ui/icons/SaveAlt\");","module.exports = require(\"@material-ui/icons/Search\");","module.exports = require(\"@material-ui/icons/Settings\");","module.exports = require(\"@material-ui/icons/Today\");","module.exports = require(\"@material-ui/icons/ViewColumn\");","module.exports = require(\"@material-ui/pickers\");","module.exports = require(\"clsx\");","module.exports = require(\"earcut\");","module.exports = require(\"fontsource-open-sans\");","module.exports = require(\"fontsource-roboto\");","module.exports = require(\"lodash/get\");","module.exports = require(\"lodash/isEmpty\");","module.exports = require(\"lodash/isEqual\");","module.exports = require(\"material-table\");","module.exports = require(\"monet\");","module.exports = require(\"mov-fe-lib-core\");","module.exports = require(\"prop-types\");","module.exports = require(\"rbush\");","module.exports = require(\"react\");","module.exports = require(\"react-dom\");","module.exports = require(\"react-resize-detector\");","module.exports = require(\"react-virtualized\");","module.exports = require(\"styled-components\");"],"sourceRoot":""}