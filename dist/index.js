(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory();
	else if(typeof define === 'function' && define.amd)
		define([], factory);
	else if(typeof exports === 'object')
		exports["MovaiReact"] = factory();
	else
		root["MovaiReact"] = factory();
})(window, function() {
return /******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./index.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./index.js":
/*!******************!*\
  !*** ./index.js ***!
  \******************/
/*! exports provided: withOfflineValidation, withAuthentication, Button, AbstractModal, ConfirmAlertModal, SelectScopeModal, RobotLogModal, Drawer, Collapse, VerticalBar, ContextMenu, Table, Tabs, Text, Themes, Toggle, SearchInput, Breadcrumb, SceneViewer, Select, snackbar, Style, Logs, FilterIcon, LoginForm, ProfileMenu */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _src_Components_Button__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./src/Components/Button */ "./src/Components/Button.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Button", function() { return _src_Components_Button__WEBPACK_IMPORTED_MODULE_0__["default"]; });

/* harmony import */ var _src_Components_Modal_AbstractModal__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./src/Components/Modal/AbstractModal */ "./src/Components/Modal/AbstractModal.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AbstractModal", function() { return _src_Components_Modal_AbstractModal__WEBPACK_IMPORTED_MODULE_1__["default"]; });

/* harmony import */ var _src_Components_Modal_ConfirmAlertModal__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./src/Components/Modal/ConfirmAlertModal */ "./src/Components/Modal/ConfirmAlertModal.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ConfirmAlertModal", function() { return _src_Components_Modal_ConfirmAlertModal__WEBPACK_IMPORTED_MODULE_2__["default"]; });

/* harmony import */ var _src_Components_Modal_RobotLogModal__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/Components/Modal/RobotLogModal */ "./src/Components/Modal/RobotLogModal.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RobotLogModal", function() { return _src_Components_Modal_RobotLogModal__WEBPACK_IMPORTED_MODULE_3__["default"]; });

/* harmony import */ var _src_Components_Drawer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./src/Components/Drawer */ "./src/Components/Drawer.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Drawer", function() { return _src_Components_Drawer__WEBPACK_IMPORTED_MODULE_4__["default"]; });

/* harmony import */ var _src_Components_Collapse__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./src/Components/Collapse */ "./src/Components/Collapse.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Collapse", function() { return _src_Components_Collapse__WEBPACK_IMPORTED_MODULE_5__["default"]; });

/* harmony import */ var _src_Components_VerticalBar__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./src/Components/VerticalBar */ "./src/Components/VerticalBar.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "VerticalBar", function() { return _src_Components_VerticalBar__WEBPACK_IMPORTED_MODULE_6__["default"]; });

/* harmony import */ var _src_Components_ContextMenu__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./src/Components/ContextMenu */ "./src/Components/ContextMenu.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ContextMenu", function() { return _src_Components_ContextMenu__WEBPACK_IMPORTED_MODULE_7__["default"]; });

/* harmony import */ var _src_Components_Table__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./src/Components/Table */ "./src/Components/Table.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Table", function() { return _src_Components_Table__WEBPACK_IMPORTED_MODULE_8__["default"]; });

/* harmony import */ var _src_Components_Tabs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./src/Components/Tabs */ "./src/Components/Tabs.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Tabs", function() { return _src_Components_Tabs__WEBPACK_IMPORTED_MODULE_9__["default"]; });

/* harmony import */ var _src_Components_Text__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./src/Components/Text */ "./src/Components/Text.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Text", function() { return _src_Components_Text__WEBPACK_IMPORTED_MODULE_10__["default"]; });

/* harmony import */ var _src_Components_Toggle__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./src/Components/Toggle */ "./src/Components/Toggle.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Toggle", function() { return _src_Components_Toggle__WEBPACK_IMPORTED_MODULE_11__["default"]; });

/* harmony import */ var _src_Components_SearchInput__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./src/Components/SearchInput */ "./src/Components/SearchInput.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SearchInput", function() { return _src_Components_SearchInput__WEBPACK_IMPORTED_MODULE_12__["default"]; });

/* harmony import */ var _src_Components_Breadcrumb__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./src/Components/Breadcrumb */ "./src/Components/Breadcrumb.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Breadcrumb", function() { return _src_Components_Breadcrumb__WEBPACK_IMPORTED_MODULE_13__["default"]; });

/* harmony import */ var _src_Components_Viewer_SceneViewer__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./src/Components/Viewer/SceneViewer */ "./src/Components/Viewer/SceneViewer.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SceneViewer", function() { return _src_Components_Viewer_SceneViewer__WEBPACK_IMPORTED_MODULE_14__["default"]; });

/* harmony import */ var _src_Components_Select__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./src/Components/Select */ "./src/Components/Select.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Select", function() { return _src_Components_Select__WEBPACK_IMPORTED_MODULE_15__["default"]; });

/* harmony import */ var _src_Components_Snackbar_Snackbar__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./src/Components/Snackbar/Snackbar */ "./src/Components/Snackbar/Snackbar.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "snackbar", function() { return _src_Components_Snackbar_Snackbar__WEBPACK_IMPORTED_MODULE_16__["snackbar"]; });

/* harmony import */ var _src_styles_Themes__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./src/styles/Themes */ "./src/styles/Themes.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Themes", function() { return _src_styles_Themes__WEBPACK_IMPORTED_MODULE_17__["default"]; });

/* harmony import */ var _src_styles_Style__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./src/styles/Style */ "./src/styles/Style.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Style", function() { return _src_styles_Style__WEBPACK_IMPORTED_MODULE_18__["default"]; });

/* harmony import */ var _src_Components_Logs_Logs__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./src/Components/Logs/Logs */ "./src/Components/Logs/Logs.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Logs", function() { return _src_Components_Logs_Logs__WEBPACK_IMPORTED_MODULE_19__["default"]; });

/* harmony import */ var _src_Components_LoginForm_LoginForm__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./src/Components/LoginForm/LoginForm */ "./src/Components/LoginForm/LoginForm.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "LoginForm", function() { return _src_Components_LoginForm_LoginForm__WEBPACK_IMPORTED_MODULE_20__["default"]; });

/* harmony import */ var _src_Components_ProfileMenu__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./src/Components/ProfileMenu */ "./src/Components/ProfileMenu.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ProfileMenu", function() { return _src_Components_ProfileMenu__WEBPACK_IMPORTED_MODULE_21__["default"]; });

/* harmony import */ var _src_Components_Logs_LogsFilterBar_FiltersIcon_FiltersIcon__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./src/Components/Logs/LogsFilterBar/FiltersIcon/FiltersIcon */ "./src/Components/Logs/LogsFilterBar/FiltersIcon/FiltersIcon.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "FilterIcon", function() { return _src_Components_Logs_LogsFilterBar_FiltersIcon_FiltersIcon__WEBPACK_IMPORTED_MODULE_22__["default"]; });

/* harmony import */ var _src_Components_Modal_SelectScopeModal__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./src/Components/Modal/SelectScopeModal */ "./src/Components/Modal/SelectScopeModal.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SelectScopeModal", function() { return _src_Components_Modal_SelectScopeModal__WEBPACK_IMPORTED_MODULE_23__["default"]; });

/* harmony import */ var _src_Components_HOCs_withOfflineValidation__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./src/Components/HOCs/withOfflineValidation */ "./src/Components/HOCs/withOfflineValidation.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "withOfflineValidation", function() { return _src_Components_HOCs_withOfflineValidation__WEBPACK_IMPORTED_MODULE_24__["default"]; });

/* harmony import */ var _src_Components_HOCs_withAuthentication__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./src/Components/HOCs/withAuthentication */ "./src/Components/HOCs/withAuthentication.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "withAuthentication", function() { return _src_Components_HOCs_withAuthentication__WEBPACK_IMPORTED_MODULE_25__["default"]; });
























 // import HOCs





/***/ }),

/***/ "./node_modules/css-loader/dist/cjs.js!./src/Components/Logs/Logs.css":
/*!****************************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js!./src/Components/Logs/Logs.css ***!
  \****************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// Imports
var ___CSS_LOADER_API_IMPORT___ = __webpack_require__(/*! ../../../node_modules/css-loader/dist/runtime/api.js */ "./node_modules/css-loader/dist/runtime/api.js");
exports = ___CSS_LOADER_API_IMPORT___(false);
// Module
exports.push([module.i, ".flow-action {\n  display: flex;\n  background: transparent;\n  width: 35px;\n  height: 35px;\n  margin: 6px;\n  border-radius: 50%;\n  justify-content: center;\n  align-items: center;\n  transition: background-color 0.5s;\n}\n\n.flow-action:hover {\n  background: rgba(11, 106, 138, 0.2);\n  cursor: pointer;\n}\n\n.robot-logs-container {\n  display: flex;\n  flex-direction: column;\n  height: 1px;\n  flex-grow: 1;\n}\n\n.tree-grow-overflow {\n  flex-grow: 0.5;\n  overflow-y: auto;\n  min-height: 0;\n  height: 100%;\n}\n\n.logs-grow-overflow {\n  flex-grow: 1;\n  overflow-y: auto;\n  min-height: 0;\n  height: 100%;\n}\n\n.saving {\n  /* font-size: 40px; */\n  margin: 0;\n}\n\n.saving span {\n  font-size: 15px;\n  animation-name: blink;\n  animation-duration: 1.4s;\n  animation-iteration-count: infinite;\n  animation-fill-mode: both;\n}\n\n.saving span:nth-child(2) {\n  animation-delay: 0.2s;\n}\n\n.saving span:nth-child(3) {\n  animation-delay: 0.4s;\n}\n\n@keyframes blink {\n  0% {\n    opacity: 0.2;\n  }\n  20% {\n    opacity: 1;\n  }\n  100% {\n    opacity: 0.2;\n  }\n}\n\n.MuiPickersToolbarButton-toolbarBtn {\n  padding: 0 !important;\n  min-width: 16px !important;\n  margin: 0 !important;\n  text-transform: none !important;\n}\n", ""]);
// Exports
module.exports = exports;


/***/ }),

/***/ "./node_modules/css-loader/dist/cjs.js!./src/Components/Snackbar/Snackbar.css":
/*!************************************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js!./src/Components/Snackbar/Snackbar.css ***!
  \************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// Imports
var ___CSS_LOADER_API_IMPORT___ = __webpack_require__(/*! ../../../node_modules/css-loader/dist/runtime/api.js */ "./node_modules/css-loader/dist/runtime/api.js");
exports = ___CSS_LOADER_API_IMPORT___(false);
// Module
exports.push([module.i, "body.react-confirm-alert-body-element {\n  overflow: hidden;\n}\n\n.react-confirm-alert-blur {\n  filter: url(#gaussian-blur);\n  filter: blur(2px);\n  -webkit-filter: blur(2px);\n}\n\n.react-confirm-alert-overlay {\n  position: fixed;\n  top: calc(100vh - 300px);\n  left: 0;\n  right: 0;\n  bottom: 0;\n  z-index: 99;\n  display: -webkit-flex;\n  display: -moz-flex;\n  display: -ms-flex;\n  display: -o-flex;\n  display: flex;\n  justify-content: flex-start;\n  -ms-align-items: center;\n  align-items: flex-end;\n  opacity: 1;\n}\n\n.react-confirm-alert-body {\n  width: 400px;\n  padding: 30px;\n}\n\n.react-confirm-alert-svg {\n  position: absolute;\n  top: 0;\n  left: 0;\n}\n\n.react-confirm-alert-body > h1 {\n  margin-top: 0;\n}\n\n.react-confirm-alert-body > h3 {\n  margin: 0;\n  font-size: 16px;\n}\n\n.react-confirm-alert-button-group {\n  display: -webkit-flex;\n  display: -moz-flex;\n  display: -ms-flex;\n  display: -o-flex;\n  display: flex;\n  justify-content: flex-start;\n  margin-top: 20px;\n}\n\n.react-confirm-alert-button-group > button {\n  outline: none;\n  background: #333;\n  border: none;\n  display: inline-block;\n  padding: 6px 18px;\n  color: #eee;\n  margin-right: 10px;\n  border-radius: 5px;\n  font-size: 12px;\n  cursor: pointer;\n}\n\n.icon-container {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.icon-container:hover {\n  cursor: pointer;\n}\n", ""]);
// Exports
module.exports = exports;


/***/ }),

/***/ "./node_modules/css-loader/dist/runtime/api.js":
/*!*****************************************************!*\
  !*** ./node_modules/css-loader/dist/runtime/api.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/*
  MIT License http://www.opensource.org/licenses/mit-license.php
  Author Tobias Koppers @sokra
*/
// css base code, injected by the css-loader
// eslint-disable-next-line func-names
module.exports = function (useSourceMap) {
  var list = []; // return the list of modules as css string

  list.toString = function toString() {
    return this.map(function (item) {
      var content = cssWithMappingToString(item, useSourceMap);

      if (item[2]) {
        return "@media ".concat(item[2], " {").concat(content, "}");
      }

      return content;
    }).join('');
  }; // import a list of modules into the list
  // eslint-disable-next-line func-names


  list.i = function (modules, mediaQuery, dedupe) {
    if (typeof modules === 'string') {
      // eslint-disable-next-line no-param-reassign
      modules = [[null, modules, '']];
    }

    var alreadyImportedModules = {};

    if (dedupe) {
      for (var i = 0; i < this.length; i++) {
        // eslint-disable-next-line prefer-destructuring
        var id = this[i][0];

        if (id != null) {
          alreadyImportedModules[id] = true;
        }
      }
    }

    for (var _i = 0; _i < modules.length; _i++) {
      var item = [].concat(modules[_i]);

      if (dedupe && alreadyImportedModules[item[0]]) {
        // eslint-disable-next-line no-continue
        continue;
      }

      if (mediaQuery) {
        if (!item[2]) {
          item[2] = mediaQuery;
        } else {
          item[2] = "".concat(mediaQuery, " and ").concat(item[2]);
        }
      }

      list.push(item);
    }
  };

  return list;
};

function cssWithMappingToString(item, useSourceMap) {
  var content = item[1] || ''; // eslint-disable-next-line prefer-destructuring

  var cssMapping = item[3];

  if (!cssMapping) {
    return content;
  }

  if (useSourceMap && typeof btoa === 'function') {
    var sourceMapping = toComment(cssMapping);
    var sourceURLs = cssMapping.sources.map(function (source) {
      return "/*# sourceURL=".concat(cssMapping.sourceRoot || '').concat(source, " */");
    });
    return [content].concat(sourceURLs).concat([sourceMapping]).join('\n');
  }

  return [content].join('\n');
} // Adapted from convert-source-map (MIT)


function toComment(sourceMap) {
  // eslint-disable-next-line no-undef
  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));
  var data = "sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(base64);
  return "/*# ".concat(data, " */");
}

/***/ }),

/***/ "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js":
/*!****************************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js ***!
  \****************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var isOldIE = function isOldIE() {
  var memo;
  return function memorize() {
    if (typeof memo === 'undefined') {
      // Test for IE <= 9 as proposed by Browserhacks
      // @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805
      // Tests for existence of standard globals is to allow style-loader
      // to operate correctly into non-standard environments
      // @see https://github.com/webpack-contrib/style-loader/issues/177
      memo = Boolean(window && document && document.all && !window.atob);
    }

    return memo;
  };
}();

var getTarget = function getTarget() {
  var memo = {};
  return function memorize(target) {
    if (typeof memo[target] === 'undefined') {
      var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself

      if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {
        try {
          // This will throw an exception if access to iframe is blocked
          // due to cross-origin restrictions
          styleTarget = styleTarget.contentDocument.head;
        } catch (e) {
          // istanbul ignore next
          styleTarget = null;
        }
      }

      memo[target] = styleTarget;
    }

    return memo[target];
  };
}();

var stylesInDom = [];

function getIndexByIdentifier(identifier) {
  var result = -1;

  for (var i = 0; i < stylesInDom.length; i++) {
    if (stylesInDom[i].identifier === identifier) {
      result = i;
      break;
    }
  }

  return result;
}

function modulesToDom(list, options) {
  var idCountMap = {};
  var identifiers = [];

  for (var i = 0; i < list.length; i++) {
    var item = list[i];
    var id = options.base ? item[0] + options.base : item[0];
    var count = idCountMap[id] || 0;
    var identifier = "".concat(id, " ").concat(count);
    idCountMap[id] = count + 1;
    var index = getIndexByIdentifier(identifier);
    var obj = {
      css: item[1],
      media: item[2],
      sourceMap: item[3]
    };

    if (index !== -1) {
      stylesInDom[index].references++;
      stylesInDom[index].updater(obj);
    } else {
      stylesInDom.push({
        identifier: identifier,
        updater: addStyle(obj, options),
        references: 1
      });
    }

    identifiers.push(identifier);
  }

  return identifiers;
}

function insertStyleElement(options) {
  var style = document.createElement('style');
  var attributes = options.attributes || {};

  if (typeof attributes.nonce === 'undefined') {
    var nonce =  true ? __webpack_require__.nc : undefined;

    if (nonce) {
      attributes.nonce = nonce;
    }
  }

  Object.keys(attributes).forEach(function (key) {
    style.setAttribute(key, attributes[key]);
  });

  if (typeof options.insert === 'function') {
    options.insert(style);
  } else {
    var target = getTarget(options.insert || 'head');

    if (!target) {
      throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");
    }

    target.appendChild(style);
  }

  return style;
}

function removeStyleElement(style) {
  // istanbul ignore if
  if (style.parentNode === null) {
    return false;
  }

  style.parentNode.removeChild(style);
}
/* istanbul ignore next  */


var replaceText = function replaceText() {
  var textStore = [];
  return function replace(index, replacement) {
    textStore[index] = replacement;
    return textStore.filter(Boolean).join('\n');
  };
}();

function applyToSingletonTag(style, index, remove, obj) {
  var css = remove ? '' : obj.media ? "@media ".concat(obj.media, " {").concat(obj.css, "}") : obj.css; // For old IE

  /* istanbul ignore if  */

  if (style.styleSheet) {
    style.styleSheet.cssText = replaceText(index, css);
  } else {
    var cssNode = document.createTextNode(css);
    var childNodes = style.childNodes;

    if (childNodes[index]) {
      style.removeChild(childNodes[index]);
    }

    if (childNodes.length) {
      style.insertBefore(cssNode, childNodes[index]);
    } else {
      style.appendChild(cssNode);
    }
  }
}

function applyToTag(style, options, obj) {
  var css = obj.css;
  var media = obj.media;
  var sourceMap = obj.sourceMap;

  if (media) {
    style.setAttribute('media', media);
  } else {
    style.removeAttribute('media');
  }

  if (sourceMap && typeof btoa !== 'undefined') {
    css += "\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), " */");
  } // For old IE

  /* istanbul ignore if  */


  if (style.styleSheet) {
    style.styleSheet.cssText = css;
  } else {
    while (style.firstChild) {
      style.removeChild(style.firstChild);
    }

    style.appendChild(document.createTextNode(css));
  }
}

var singleton = null;
var singletonCounter = 0;

function addStyle(obj, options) {
  var style;
  var update;
  var remove;

  if (options.singleton) {
    var styleIndex = singletonCounter++;
    style = singleton || (singleton = insertStyleElement(options));
    update = applyToSingletonTag.bind(null, style, styleIndex, false);
    remove = applyToSingletonTag.bind(null, style, styleIndex, true);
  } else {
    style = insertStyleElement(options);
    update = applyToTag.bind(null, style, options);

    remove = function remove() {
      removeStyleElement(style);
    };
  }

  update(obj);
  return function updateStyle(newObj) {
    if (newObj) {
      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {
        return;
      }

      update(obj = newObj);
    } else {
      remove();
    }
  };
}

module.exports = function (list, options) {
  options = options || {}; // Force single-tag solution on IE6-9, which has a hard limit on the # of <style>
  // tags it will allow on a page

  if (!options.singleton && typeof options.singleton !== 'boolean') {
    options.singleton = isOldIE();
  }

  list = list || [];
  var lastIdentifiers = modulesToDom(list, options);
  return function update(newList) {
    newList = newList || [];

    if (Object.prototype.toString.call(newList) !== '[object Array]') {
      return;
    }

    for (var i = 0; i < lastIdentifiers.length; i++) {
      var identifier = lastIdentifiers[i];
      var index = getIndexByIdentifier(identifier);
      stylesInDom[index].references--;
    }

    var newLastIdentifiers = modulesToDom(newList, options);

    for (var _i = 0; _i < lastIdentifiers.length; _i++) {
      var _identifier = lastIdentifiers[_i];

      var _index = getIndexByIdentifier(_identifier);

      if (stylesInDom[_index].references === 0) {
        stylesInDom[_index].updater();

        stylesInDom.splice(_index, 1);
      }
    }

    lastIdentifiers = newLastIdentifiers;
  };
};

/***/ }),

/***/ "./node_modules/timers-browserify/main.js":
/*!************************************************!*\
  !*** ./node_modules/timers-browserify/main.js ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(global) {var scope = (typeof global !== "undefined" && global) ||
            (typeof self !== "undefined" && self) ||
            window;
var apply = Function.prototype.apply;

// DOM APIs, for completeness

exports.setTimeout = function() {
  return new Timeout(apply.call(setTimeout, scope, arguments), clearTimeout);
};
exports.setInterval = function() {
  return new Timeout(apply.call(setInterval, scope, arguments), clearInterval);
};
exports.clearTimeout =
exports.clearInterval = function(timeout) {
  if (timeout) {
    timeout.close();
  }
};

function Timeout(id, clearFn) {
  this._id = id;
  this._clearFn = clearFn;
}
Timeout.prototype.unref = Timeout.prototype.ref = function() {};
Timeout.prototype.close = function() {
  this._clearFn.call(scope, this._id);
};

// Does not start the time, just sets up the members needed.
exports.enroll = function(item, msecs) {
  clearTimeout(item._idleTimeoutId);
  item._idleTimeout = msecs;
};

exports.unenroll = function(item) {
  clearTimeout(item._idleTimeoutId);
  item._idleTimeout = -1;
};

exports._unrefActive = exports.active = function(item) {
  clearTimeout(item._idleTimeoutId);

  var msecs = item._idleTimeout;
  if (msecs >= 0) {
    item._idleTimeoutId = setTimeout(function onTimeout() {
      if (item._onTimeout)
        item._onTimeout();
    }, msecs);
  }
};

// setimmediate attaches itself to the global object
__webpack_require__(/*! setimmediate */ "setimmediate");
// On some exotic environments, it's not clear which object `setimmediate` was
// able to install onto.  Search each possibility in the same order as the
// `setimmediate` library.
exports.setImmediate = (typeof self !== "undefined" && self.setImmediate) ||
                       (typeof global !== "undefined" && global.setImmediate) ||
                       (this && this.setImmediate);
exports.clearImmediate = (typeof self !== "undefined" && self.clearImmediate) ||
                         (typeof global !== "undefined" && global.clearImmediate) ||
                         (this && this.clearImmediate);

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../webpack/buildin/global.js */ "./node_modules/webpack/buildin/global.js")))

/***/ }),

/***/ "./node_modules/webpack/buildin/global.js":
/*!***********************************!*\
  !*** (webpack)/buildin/global.js ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports) {

var g;

// This works in non-strict mode
g = (function() {
	return this;
})();

try {
	// This works if eval is allowed (see CSP)
	g = g || new Function("return this")();
} catch (e) {
	// This works if the window reference is available
	if (typeof window === "object") g = window;
}

// g can still be undefined, but nothing to do about it...
// We return undefined, instead of nothing here, so it's
// easier to handle this case. if(!global) { ...}

module.exports = g;


/***/ }),

/***/ "./resources/alert-error.png":
/*!***********************************!*\
  !*** ./resources/alert-error.png ***!
  \***********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAYAAAD0eNT6AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEwAACxMBAJqcGAAAIABJREFUeJzt3XmcpVV57v1r3bu6uqu7QQS0ITYSm+raQ1eD2E7xqASjr+QNauIYTZySHKegCOrRY0xMTob3hKighoCaRI0eJ2LEKerRqEQTJ5Cpa09dtAImQAcUpKeqrn3f7x9UKzQ91LD3Xnv4ff+prqq9n+f69Ad6XXs961lPEoCeduWWLSuO+ulPH9wqFNaliAe52THmfkykdEyK+NlXRawNs9XJfWz+62o3GzP3MaVUUMSImxXMveBmBZMKkuRSy9xbbtYy95ZSmlNEy832mPueMNud3HeH2Z7kvlsp7YyU7kwRd+7/6mZ3mvudbrZjZG5ux91HH73jkVddtS/33x2AQ0u5AwDDKqS0bXz8+LmRkZPM/SQ3OylFnCTpoYo4McwenNzXyezY3FmXxP3HYXZbSLeZ+y1K6eZI6eYUcZOb3VxotW4uNpt3JClyRwWGEQUA6KCQCo2JiYe62bi5j0dK45HSKcl93M02mDSWO2NOLu0x9xvC7IaQpi1iOlK6wdyni83mTUlq5c4IDCoKANAGIRVqpdIpkjaliIoiNoVZJaSSSStz5+tHLu21iLqnVLWIKTerSpqq1GrbKQbA8lEAgEW6af36sT1jY5vd7PRI6XRJjwhps0mrcmcbBi7tsYjrIqWrk3R1cr965czM9Q+78ca9ubMB/YQCABzG/BT+Jjd7jKTHJvdHu1l5/wI69Ib5hYw1pfSdSOnbKeI7pUajykwBcGgUAOBebtiw4QEzo6OPTxGP95QeY+6Pktna3LmwBO47w+y7yf07Xih8c8W+fd+cmJ7+ae5YQK+gAGCo1ScmjnezJ6SIJ0o6w1M6zSTLnQvt55Kb+zVK6Qo3+9cU8Y1KvX5H7lxALhQADJUrt2xZvWbnzid4Sk+R9BSTTs2dCRlFXBMpfVnSl9fu3PnNh/7oR3tyRwK6hQKAgRZSam7ceGqrUDgrRTzFU3o8q/JxMPN3HXzTzb5s7l8oNRpb2aMAg4wCgIFz0/r1Y3cfddSZKeLsFHG2Ujopdyb0IfeblNLnUsRnV87MfJ27DDBoKAAYCPWJieNbhcIzUsTTk/uTZbY6dyYMkHu2Qv5yivh0pPQZ1g5gEFAA0LeqpdKJkn5D0rNCOoNb89ANLrUs4muSPrlvxYpPnbp16225MwFLQQFAX7lucnLdin37nhspPTek/2b8N4yMXAqL+Gak9PHR2dnLxrdv35E7E7BQ/OOJntccHz96bmTkN5L7C9zsydymh17kUitJX46UPmLul5cbjbtzZwIOhwKAnvS1M84YOeHWW381UnpRSGezzS76iUt7kvRZSf9w27p1XzrziivmcmcCDkQBQE/ZWqlUzP2lyf2FMluXOw+wbPc8CvkfJL2/3Gg0cscB9qMAILvm+PjRrULh+ZJeqpQekzsP0DHu3wqz96eIj3GJALlRAJBNY+PG01qFwiuT+2+x3z6GiUt3J+nDKeKScqNxfe48GE4UAHTVD04+edXu1aufY63WK2X2S7nzALm59G8WccmqvXs/yWZD6CYKALqisXHjQ1qFwquS+8tldlzuPECvcen2JF06Pyvwn7nzYPBRANBRjY0bH+0pvVbSc2Q2kjsP0PPc94XZJ1LEReVG48rccTC4KABou5AKjWLxmRFxHtP8wNLNXx64sNRoXJ6kVu48GCwUALTND04+edXesbEXyf0NMhvPnQcYGO7NMPurkbm5D01MT8/kjoPBQAHAst2wYcMDZkZHX5ncX8u9+0AH3bOnwIWFVus9E9PTP80dB/2NAoAlq5ZKx0k6P6RzTDo6dx5gWLh0l0W8q1UoXDRZrf44dx70JwoAFq0+MXF8pPQ6RZzD/ftAPvP7CbzLzd5BEcBiUQCwYM3x8Qe1CoX9A/+a3HkA3GO+CLxb0jsq9fodufOgP1AAcETz1/hfn9zPY+AHetd8EXh7ingHWw3jSCgAOKSb1q8f27VmzTmKeJPMjs2dB8DCzG8q9Bdje/Zcwu6COBQKAO7nyi1bVqzZteulLv2RSQ/JnQfAEkXc7GZ/suPBD/4gjyTGgSgA+JmQUr1YPNtTusCkUu48ANokopoiXl9sNr+YpMgdB72BAgBJ0lS5fLoi3m7SmbmzAOiQiK+kiNeVms3rckdBfhSAIdfYuPEhntKfu9mLjP8egIHnUljE30dKf1ip12/JnQf58A/+kGqOj6+cGxk5P7m/RWarc+cB0GXuO5XS/2oVCu+crFZnc8dB91EAhlC1VPq15H4R+/UDcKlhEeeWG40v5c6C7qIADJGtlcp4YW7uQpmdnTsLgB4TcXmKOL/UbP4gdxR0BwVgCMxP978xuf+BzEZz5wHQm1zaaxF/2ioU3sZlgcFHARhwtWLxlz2lS00q5s4CoE/cc9vgy0vN5jdzR0HnUAAGVH1i4viW2V+Z9JLcWQD0qYj3tQqFN/GgocFEARgw85v5vEAR75TZcbnzAOhvIe0w91cXm83L2ERosFAABkitWPyF+en+p+XOAmDAuP9Ta2Tk9yer1VtzR0F7UAAGwPyn/pd4Shea9IDceQAMKPcfJ+ncYrP5f5gN6H8UgD7XHB9fPzcy8r4knZU7C4AhEfF5SS8rNxr/mTsKlo4C0KfmP/U/X9LFSumY3HkADBn3nyTpFaVm8xO5o2BpKAB9aGulcqy5X5Kk5+bOAmC4ufSR1ooV55x6/fU/yZ0Fi0MB6DP1iYmzQvp7mZ2YOwsASJJL/6GUXrKpVvtK7ixYOApAn/jBySev2jM2dkGSXp07CwAcVMQ7Cq3Wmyemp2dyR8GRUQD6QH1iouRmH0vSabmzAMBhuX/fC4Xf3FSrbcsdBYdnuQPg0EJKtWLxd0K6isEfQF8we4S1Wt+fKpdfmDsKDo8ZgB7VHB8/ulUovEcp/WbuLACwFCF9OEW8qtxo3J07C+6PAtCDGhs3nuYp/aPMxnNnAYDlcKmhlJ61qVabyp0F98UlgB5TKxZfMlcofJvBH8AgMKlordZ36xMTv507C+6LGYAecdP69WO71qx5t1L63dxZAKATQnrP2J49r33YjTfuzZ0FFICe0Ni4cUOrUPgnFvoBGHju31dKzyo3Gj/MHWXYcQkgs2qp9BRP6UoGfwBDwewRiriyViyemTvKsKMAZDJ/i9/rQvqizB6YOw8AdI3ZcZ7Sl2vF4muCmehs+IvP4Kb168d2rl37viT9Vu4sAJCV+wdXzcy8gnUB3UcB6LLm+Pj6ltmnZfaI3FkAoBeE9L0U8es8Xri7KABdVCuVtrj0GZN+IXcWAOglLv0ozJ42Wa1ekzvLsGANQJdUS6VnuvQNBn8AuD+T1hfm5r5ZKxafnjvLsKAAdFhIqVoqvSlJnzRpLHceAOhZZms8pcvnF0gzQ91h/AV30JVbtqxYvWvXe5L00txZAKCfuPt7d5x44u+fecUVc7mzDCoKQIfUisWjPKXLTHpq7iwA0JciPj+zcuXzHn7ddbtyRxlEFIAO2FqpnFCYm/s8K/0BYHlC+t7o7OzZ49u378idZdBQANqsViwWPaUvmvSLubMAwCAI6QY3O2uyWp3OnWWQsAiwjabK5cco4t8Y/AGgfZJ0SnL/Vn1i4lG5swwSCkCbTJXLT7ZW619kdlzuLAAwaEw6PqSv8gyB9qEAtEG1VHqmtVqfl9ma3FkAYGCZrfWUvlCfmHhG7iiDgAKwTLVi8XdCukxmo7mzAMCgM2lly+yT1VLpRbmz9DsKwDJUS6XzldLfGX+PANA1JhWS9MFasfia3Fn6GQPXEtWKxTcn6e25cwDA0ErpnbVi8Q25Y/QrCsAizW/t+1al9Oe5swDA0Evpglqx+JbcMfoR+wAsQkipVir9aZL+IHcWAMC9RPxpqdF4a5Iid5R+QQFYoPnB/y+TxHQTAPSiiP9dajTeTAlYGArAAjD4A0CfoAQsWCF3gF43P/j/WZLelDsLAOAIUnr87ccdly6+446v547S61gEeAS1UumPkvTm3DkAAAuU0h+xMPDIuARwGLVi8c2s9geA/uQpvXFTrXZB7hy9igJwCNVS6Xzu8weAPhdxbrnReFfuGL2IAnAQtWLxd5TS3+XOAQBYPk/pRZtqtQ/lztFrKAAHqBWLz/KUPsH2vgAwGFxqFdyfVWo2P507Sy+hANxLtVR6SnL/HA/2AYDB4tKMRfxqudH4Wu4svYICMK9aKj02uX+FR/oCwIBy35mkJ5Waze/ljtILKACSasViURH/LrNjc2cBAHSOS7eH2S9NVqvTubPkNvTXubdWKid4Sl9k8AeAwWfS8eb+xekNGx6cO0tuQ10AasXiUYW5uc+b9Iu5swAAuiNJp8yOjn7umlNPHepLvkNbAK7csmWFp3SZzB6ROwsAoLuS9KiVMzMf/9oZZ4zkzpLLUBaAkNLqXbveY9JTc2cBAGSS0q+tu+22v44hXQ83lAWgVir9jyS9NHcOAEBeSXp5rVQ6L3eOHIau9VRLpWcm6ZO5cwAAeoNLYRHPKDcan82dpZuGqgDUSqUtLn3DpLHcWQAAPcR9V2tk5PGT1eo1uaN0y9AUgOb4+PqW2XdldmLuLACA3uPSj5L06Eq9fkvuLN0wFGsArtyyZXXL7NMM/gCAQzFpvaTLf3DyyatyZ+mGgS8A8yv+38vtfgCAI0nSo3ePjV0yDHcGDHwBqJVK5yXpt3LnAAD0B5NeUi8Wz8mdo9MGuuFUS6WnhPRFHu2LfvWAr341d4RluetJT8odAVgSl1oW8eRyo/H13Fk6ZWAHxsbGjRuS+8cZ/AEAi2VSwVO6bKpcPjl3lk4ZyMHxpvXrx1qFwj/J7IG5swAA+pNJx1vEJ5vj4ytzZ+mEgSwAu9aseXeSTsudAwDQ97bMjYxcmDtEJwxcAagViy9VSr+bOwcAYDAk6ZW1YnHgFpMPVAFobNx4mqf0N7lzAAAGTMR7p8rlTbljtNPAFIAbNmx4gKf0jyYNxQYOAIAuMlutiE/WisWjckdpl4EoACGl2RUrLpXZeO4sAIDBZFJR0l/nztEuA1EA6vdc9//N3DkAAAMupRfVJyZ+O3eMduj7AtDYuLGsiHfnzgEAGA4hXTJVLm/MnWO5+roA/ODkk1e1CoWPymx17iwAgCFhttYiPrq1UhnNHWU5+roA7Bkbu4D7/QEAGWxJ7n+RO8Ry9G0BqBWLT03Sq3PnAAAMJ5NeN1Uu/0ruHEvVlwWgWiodp4j3584BABhyER+4+rTTjskdYyn6rgDMP6P5b2R2Yu4sAIDhZtL6lTMzfbkQve8KQL1YfH6Snps7BwAAkpSk364Xi8/JnWOx+qoANMfH10u6OHcOAADuLSIurRWLv5A7x2L0TQEIKc2NjLxPKfXltRYAwAAzO9ZTunT+MnVf6JsCUC8WX5yks3LnAADgYEx6Wr1YfH7uHAvVFwVgflplIJ/HDAAYIBHvvm5ycl3uGAvR8wUgpOQpXcrUPwCg55kdOzI31xcPDOr5AlAvFl9g0tNy5wAAYCGS9Oxasfjs3DmOpKcLQH1i4nhFvDN3DgAAFiNSuvi6zZsfmDvH4fR0AWiZ/ZXMjsudAwCAxUjSg0f27fv/cuc4nJ4tALVi8ZdNeknuHAAALEWSXl4tlX4pd45D6ckC0BwfX+kpXZo7BwAAy5Hc33vlli0rcuc4mJ4sAHMjI280qZg7BwAAy2I2uXrXrvNzxziYnisAWyuV8eT+B7lzAADQDiG9dapcPjl3jgP1XAEozM1dKLPR3DkAAGgHk8YU8fbcOQ7UUwWgWir9mszOzp0DAIB2MulZU+Xyk3PnuLeeKQDN8fGVyf2i3DkAAOiEFPGuXloQ2DMFYG5k5HyZjefOAQBAJySpvHrXrlfnzrFfTxSAxsaND0nub8mdAwCATgrpj7dWKifkziH1SAHwlP5cZqtz5wAAoJNMOirNzf1J7hxSDxSAqXL5dDd7Ue4cAAB0hdnvVUulyewxcp48pKSIt5uUcuYAAKBbTLKQ3tYDOfKpF4tnm3RmzgwAAHSbSU+tFYtPzZwhjyu3bFnhKf1VrvMDAJBVxNu/dsYZI7lOn60ArNm166Xs9w8AGFpmm0649dYXZjt9jpPetH79mEtvzXFuAAB6RsQfN8fHV+Y4dZYCsGvNmt836RdynBsAgJ5h9tBWofCKLKfu9glv2LDhAYr4n90+LwAAvchT+oNasXhUt8/b9QIwu2LF62R2bLfPCwBALzLpQZHSazOct3ua4+MPUsT53TwnAAC9LqQ3bK1UuvrhuKsFoFUovE5ma7p5TgAAep1JR5n7eV0+Z3fUJyaOV8Q53TofAAD9JKTXXLd58wO7db6uFYCQzufTPwAAB2fS0StmZ7u2FqArBaBaKh0nqWeegQwAQC/ylF7brVmAbs0AnC+ztV06FwAAfWl+FuDcLp2rs27YsOEBIXHtHwCAhTm3G/sCdLwAzIyOvsKkozt9HgAABkJKx0RK/73Tp+loAfjBySevSl2+rQEAgH4X0vlbK5XRTp6jowVg79jYi2S2rpPnAABg0Jj0kEKr9VsdPkdnhFSQ+xs6dXwAAAaZp/TG6OA43bEDN4rFZ8psvFPHBwBgkJlUrJbLT+/g8TsjIrj2DwDAMnRye+COFIDGxo2PltkvdeLYAAAMjZSeWC2VHtGJQ3ekAMwVCl3ZxAAAgEGXIjoypra9ADQ2bnyIuT+33ccFAGAoRTx/a6VyQrsP2/YC0CoUXiWzkXYfFwCAoWS2otBqvarth23nweY3/nl5O48JAMCw85Re0RwfX9nOY7a1AOxevfo5MjuunccEAGDYmfSguZGRZ7b5mG08WKv1ynYeDwAA3CNFtHWMbVsBaGzceBq3/gEA0CEpPWGqXN7UrsO1rQC0CgU+/QMA0EEpom3r7NpSAJrj40cn999ux7EAAMDBhfTia049dU07jtWWAtAqFJ4vs7YEAgAAB2fS0StnZtqy1067LgG8tE3HAQAAh9eWMXfZBWBrpVJRSo9pRxgAAHAE9ywG3Ljcwyy7AJg7n/4BAOiiFPGS5R5jWQXgyi1bViT3Fy43BAAAWLiQXhxSYTnHWFYBWLNz51kyW7ecYwAAgMUx6SGNiYmnLPMYSxcp8ekfAIAM3GxZt98vuQA0x8ePDulpyzk5AABYmuT+68vZE2DJBWBuZOQ3TFq11PcDAIBlMFszOjv79CW/falvTO4vWOp7AQDA8i1nLF5SAbhucnKdmz15qScFAABtcVa1VDpuKW9cUgFYsW/fc63NjxIGAACLZDaSIp6zpLcu5U2RUlv2IQYAAMsTKXWnAGytVE4I6b8t5WQAAKC9Qvrl5vj4gxb7vkUXgJG5ud8wKS32fQAAoP1MsrmRkWcs4X2L42bPXux7AABARz1rsW9YVAGoT0wcH9IZiz0JAADonOT+K9dt3vzAxbxnUQWgVSg8w5b58AEAANBmZitG9u1b1O68iyoAKWLJOw4BAIDOCWlRY/SCC8BN69ePhbSsJw8BAIDOMPenbq1URhf8+oW+8O6jjjrTpLGlxQIAAB1ltjZFPHHBL1/oC1PE2UtLBAAAumExY/WCCkBIiQIAAEBvC+lpscC9ehZUAJobN56qlE5aXiwAANBJJm2YqlTKC3ztkbUKhbOWFwkAAHSDuT91Qa9byItSBKv/AQDoDwsas49YAG5av37MU3r88vMAAIBOm3840Mojve6IBWDn2rVPMOmIBwIAAPmZNNYqFB63gNcdEdP/AAD0kwVcuj9iAQjp/2lPGgAA0A1utrwCUJ+YON6kU9sXCQAAdMGWq0877ZjDveCwBcDNntDePAAAoNNMSitnZg67gP+wBWAxewoDAICectgx/EhrAM5oYxAAANA9hx3DD1kAbtiw4QGe0sPbnwcAAHRaSFu2ViprD/X7QxaAmdHRx9sCHygAAAB6i0kFcz/kfgCHLAApgt3/AADoY4cbyw9ZADylx3QmDgAA6IqIxx7qVwctAHHPtMGjO5cIAAB0mps9Jg4x1h/0h42JiU0yW9PZWAAAoJNMOrq5cWPxEL+7Pzdj+h8AgAHgZge9DHCoNQCHvGYAAAD6hx9iHcBBC0Di+j8AAINhoTMAN61fP+Zm5c4nAgAAnWbuleb4+Mr7/fzAH+wZG9tsUqE7sQAAQEeZjbRGRibv9+MDf+Bmp3cnEQAA6IaQ7je2368AREoUAAAABkiKOHIB0EFaAgAA6GNHKgAhFUI6tXuJAABAF5x24I6A9/mmViqdYtKq7mYCAAAdZba6uXHjL97nR/f+JlKqdDUQAADoilahcJ8x/r7TAe6buhsHAAB0w4Ef8u9TAJwZAAAABtKBH/LvUwCSxAwAAAAD6MAP+T8rAPN3AJS6HwkAAHSauVfufSfAz/7QmJh4qEn32ysYAAAMALPVWzdtesjPvt3/Bzcbz5MIAAB0w8jc3Cn7//zzqQB3CgAAAAMsUvrZWG8H+yEAABg8KeKgBeCUg78cAAAMAj/YDEDiEgAAAAMtSfctACElN9uQLxIAAOi05H5KSEmaLwDbxsePN2ksbywAANBRZmuv37z5GGm+AMyNjJyUNxEAAOiG0ZmZk6T5AmDuFAAAAIaAm/28AOz/BgAADDZzf6g0XwBSBAUAAIAhENLPZwAkPTRjFgAA0CVh9vMZAEWcmDUNAADoihRxgrR/HwCzB+eNAwAAuiJinbR/DYD7urxpAABAN7jZPQXgyi1bVsjs2NyBAABAVxwfUsGO+ulPmf4HAGBImJSun5w83lqFAtP/AAAMkdHZ2XWWIh6UOwgAAOieVqHwIHOzY3IHAQAA3WPux5i5UwAAABgibnaMRUoUAAAAhoi5P9BSBAUAAIAhEikxAwAAwLBJEccwAwAAwJDxlB5oilibOwgAAOieJK2xMFudOwgAAOie5L7akvtY7iAAAKB73Gw1MwAAAAwZcx+z5E4BAABgiLjZanMzLgEAADBEzH21GWsAAAAYKm42ZkqpkDsIAADoHnMfMUWM5A4CAAC6x80K5mbMAAAAMETMvWDmTgEAAGCIuNkIMwAAAAyZe2YAJAoAAABDxM0KljsEAADoPnOplTsEAADoHnNvmblTAAAAGCJu1jI3owAAADBEzH2OGQAAAIaMm7VMKc3lDgIAALrH3FumCGYAAAAYIm42Z262J3cQAADQPea+x8ydAgAAwBBxs90WZrtzBwEAAN1j7rstuVMAAAAYIm62x4I1AAAADBVmAAAAGEJhttuU0s7cQQAAQPeEtMsipTtzBwEAAN1jET+xFEEBAABgiERKdzIDAADAkEnMAAAAMHzc7E5zMwoAAABDxNzvNHOnAAAAMET2zwDsyB0EAAB0T6HV+i8bmZujAAAAMERmR0dvs7uPPpoCAADAkHDJN2/ders98qqr9sn9x7kDAQCAzkvS7UlqmSSF2W25AwEAgM5L7jsk6Z4CIFEAAAAYBindJs0XAHO/JW8aAADQDZHSLdJ8AVBKN2dNAwAAuiK53yztvwRAAQAAYDikdJM0XwBSxE150wAAgG7Y/6HfJMnNmAEAAGAI7P/Qb5JUaLUoAAAADIG9q1b9fAag2Gze4dKevJEAAEBHue98+LXX3iXtXwMghbnfkDcVAADoqJSmkxTS/tsAJYUZBQAAgAEWKU3v//PPC4A0ffCXAwCAQZAi7l8A7F4/BAAAgydS+tlsvx3shwAAYPAcfAbAnRkAAAAG2NzIyP1nAIrN5k0u7c0TCQAAdJT7rsmpqf/Y/+3PCkCSWhZRz5MKAAB0UphVk+T7v7d7/9JTqnY/EgAA6LTkfp8x/j4FwCKmuhsHAAB0gxcKhy4AbsYMAAAAAygd8CHfDvg9MwAAAAwgO9wlgEqttp2HAgEAMGDcdxWbzRvv/aP7FIAktZJ0fXdTAQCATnKza+99B4B0/0sAknR1l/IAAIAusIj7je0jB/4gSd/vThwAR3LXk56UOwKAAeBm9ysA95sBSO7MAAAAMEDSQWYA7lcAVs7MXO9SqzuRAABAR7nPjczN3e8uv/sVgIfdeONec691JxUAAOikMJuamJ6eOfDnB1sEKKX0nY4nAgAAHRfuBx3TD1oAIqVvdzYOAADoBjvEmH7QApAimAEAAGAAmPtBC0A62A9DKtQnJu6U2drOxgIAAJ3i0l2Vev3YAzcBkg41AyC1wuy7nY8GAAA6xdy/c7DBXzrUIkBJ6RCLBgAAQJ84zKL+QxYALxS+2Zk0AACgGyKlbxzqd4csAKtmZv7NDzFtAAAAepz73Ozo6L8f6teHLACnbN9+l7lf05lUAACgo1K66uHXXbfrUL8+ZAGYf/MVbQ8EAAC64bBj+GELgJv9a3uzAACAboiUDjuGH7YApIhDLh4AAAC9yaVYOTt72MX8hy0AlXr9DkWwDgAAgD6SpCtP2b79rsO95vBrACRFSl9uXyQAANAFRxy7j1gAFnIQAADQO1LE8gvA2p07v+nS/Z4jDAAAepD7rkKr9a0jveyIBeChP/rRHmMxIAAA/SGlKyamp4/4wX0hlwDkZlwGAACgDyx07d6CCoC5f2F5cQAAQDeY+xcX8rq0kBeFlOoTEz+U2UOXFwsAAHSM+3Sp2ZxIUhzppQuaAUhSKKXPLT8ZAADomJQ+t5DBX1pgAZCkFPHZpScCAACd5mYL/rC+4AKwcmbm63LfvbRIAACgk1y6O1Ja8F17Cy4AD7vxxr3B3QAAAPSkJH1pslqdXejrF1wAJClFfHrxkQAAQKdFSp9ZzOsXVQAipc+41FpcJAAA0FHu+2ZHRxe1Vm9RBaBSr99hEV9bXCoAANBJYfaV06+99s7FvGdRBWDeJ5fwHgAA0CEp4h8X+55FF4BWoXC5L/AeQwAA0FkutSKlRa/RW3QBmKxWb7WIby72fQAAoP0s4uuVev2ORb9vKSeLlD6+lPcBAIA2S+kTS3nbkgrA6OzsZdwNAABAZu77WmaLvv4vLbEAjG/fviNJbAoEAEBGYfaFyWr1x0t575IKgCQYYVFaAAAUmklEQVRFSh9Z6nsBAMDyLWcsXnIBMPfLXdq71PcDAIBlcN+1Z/XqJT+ob8kFoNxo3J2kRW07CAAA2iPMPvXIq65a8kP6llwA5v3DMt8PAACW5kPLefOyCsBt69Z9Se63LOcYAABgkSJuLtfr/7KcQyyrAJx5xRVzSmlZDQQAACxOpPTBtMzb8Zd7CUAp4v3LPQYAAFi4kbm5Dyz3GMsuAKVmsy73by33OAAAYAHcr5iYnr5huYdZdgGQpDBjFgAAgC5o15jblgKQIj4m953tOBYAADg4l+7avWbNZe04VlsKQLnRuDvMWAwIAEAHJemDy7n3/95G2nEQSUoRlyilV7breACkB3z1q7kjLMtdT3pS7gjAQCm0Wpe261htmQGQpHKjcb1L/9au4wEAgHtxv6K4bVutXYdrWwGQJIu4pJ3HAwAA9wiztn36l9pcAFbt3ftJl25v5zEBABh2Ie1ws39q5zHbWgAeduONe5PU1oYCAMCwSxGXTFars+08ZlsLgDS/GNB9rt3HBQBgKLnPtgqFtn+4bnsBKDca/xlmH2/3cQEAGFIfnaxWb233QdteACQpRVzUieMCADBsWiMjHRlTO1IAyo3GldwSCADA8rj09clq9ZpOHLsjBUCSLOLCTh0bAIBh0MmxtGMFoNRoXC73bZ06PgAAAy2iWmo0Ptepw3esACSpFWYXdOr4AAAMskjpgiR5p47fsQIgSSNzcx+S+y2dPAcAAIPGpR+52Uc7eY6OFoCJ6ekZpcRaAAAAFiFJb2/3xj8H6mgBkKRCq/Uel+7q9HkAABgI7j9xs7/t9Gk6XgAmpqd/ahHv6vR5AAAYBGF24WS1urPT5+l4AZCkVqFwkUt3d+NcAAD0rYg7V87OduVDc1cKwGS1+uMkMQsAAMBhREoXnbJ9e1cum3elAMy7kFkAAAAOzqW7ZlaufGe3zte1AlCp1+9I0ru7dT4AAPqJRVx0+rXX3tm183XrRPPewSwAAAD35dJd+0ZHu/bpX+pyAZifBXh7N88JAECvs4gLTr3++p909ZzdPJkkpYh3uHR7t88LAEBPcr+tm9f+9+t6ASg3Gncn6S+6fV4AAHpRmP3Zw6+7ble3z9v1AiBJY3v2XOLSj3KcGwCAXuHSD93svTnOnaUAPOzGG/cm6U9ynBsAgF6RpD/u9J7/h5KlAEjSbevWfUAR1VznBwAgJ5euK9frH851/mwF4MwrrphzszfkOj8AAFml9LoktXKdPlsBkKRKrfYFRXwlZwYAALou4p831WpZx7+sBSBJYe6vdyly5gAAoFtcarUKhewz4FkLgCQVt227Nknvz50DAIBuSNJ7J6vV7GvgsheAeW+Re8effQwAQE4u3TU6O/vHuXNIPVIAKvX6LV4o/GnuHAAAdJJFvHV8+/YduXNIPVIApHuegSz3Zu4cAAB0hPvWW0844eLcMfbrmQIwWa3OKqXX5M4BAEBHpPTqM6+4Yi53jP16pgBIUrnR+FJIn86dAwCAdgrpE+VG4+u5c9xbTxUASTL381zamzsHAABt4b67VSi8PneMA/VcASg1mz+wCBYEAgAGQ0p/tHlq6ubcMQ7UcwVAklqFwtt4TgAAoN+FdO2tJ5zwztw5DqYnC8BktTqbIl6eOwcAAEvlUhRarZf10sK/e+vJAiBJpWbzm4p4X+4cAAAshblfXNy27bu5cxxKzxYASWoVCm8KqSc2TAAAYMHcbxmdm3tL7hiH09MFYLJa/bG5vzp3DgAAFiNJrzxl+/a7cuc4nJ4uAJJUbDYvU8SncucAAGBBIj5WajZ7fk+bni8ASYpWofAquf8kdxYAAA7HpdsLrVZf7Grb8wVAkiar1Vu9UDg3dw4AAA4rpXMmpqf/K3eMheiLAiBJlVrtw4r4fO4cAAAcVMTllVrtE7ljLFTfFIAkhaSXcSkAANBz3O9oFQqvnB+r+kLKHWCxpsrl51nEx3LnAABgv5CeVanX/yl3jsXomxmA/TbVah936SO5cwAAIEly/2C/Df5SHxYASWqtWHGOS/+ROwcAYMi53zg6N9eXi9T7sgCcev31P1FKL8mdAwAwvFyKMHtxr2/4cyh9WQAkaVOt9hVFvCN3DgDAcLKICyr1+hW5cyxV3xYASSq0Wm+W+/dz5wAADJmI7+xau/YPc8dYjr67C+BAU+XyRmu1rpbZmtxZAACDz6WfFtwfXmo2f5A7y3L09QyAJG2q1baF2aty5wAADIckvbzfB39pAAqAJFXq9X8I6cO5cwAABltIf1+p1wdiL5qBKACSlCJe5VIjdw4AwICKqM6OjvbFg34Wou/XANxbtVSaDOm7Jo3lzgIAGCDuu5L0yFKzWc8dpV0GZgZAkir1+lal9PLcOQAAg8ULhd8dpMFfGrACIEmbarUPhfSe3DkAAIMhpHdvqtU+njtHuw1cAZCksT17Xsv+AACAZYv4jpu9PneMThjIAvCwG2/cq5SeJfc7cmcBAPSnkHbMjYw8Z7Janc2dpRMGsgBIUrnR+GGSnutSK3cWAECfcZ+LlJ69eWrq5txROmVgC4AklZrNr1rE63LnAAD0lyS9ZlOt9o3cOTppoG4DPJiQUn1i4v0ye3HuLACAPhDxt6VG42VJitxROmmgZwAkKUmxambmFSF9L3cWAECPc/92odU6Z9AHf2kICoB0z6LAFPHrLv1H7iwAgB7lftO+0dFfn5ienskdpRuGogBIUrnR+E+l9DS5786dBQDQY9x3KqWzT9269bbcUbplaAqAJG2q1a5WSs/3IZjaAQAsjEvuhcLzyo3G9bmzdNNQFQBJKjcan7GIN+TOAQDoDRZx3qZa7Z9z5+i2gb8L4GBCStWJiUvN7GW5swAAMoq4uNRovHoYFv0daOhmAKR77gzYceKJv6+Iz+fOAgDII6RPlxqNc4dx8JeGtABI0plXXDE3s3Ll87g9EACGkPu3d69Z84I0xLvFDuUlgHub3rDhwbOjo/+epFNyZwEAdIH7tiQ9rtRs3p47Sk5DOwOw3/j27Tvc7CyXhvo/BAAYBiHtsIizhn3wlygAkqTJanW64P7/yn1n7iwAgM5w6aeSfrW4bdv23Fl6AQVgXqnZ/J5SerpLQ7EDFAAME5f2KqWnVer17+fO0isoAPdSbjS+VnB/Ho8QBoAB4j6XpGdvqtX+NXeUXkIBOECp2fx0kn43dw4AwPK5FErpxZV6ndu+D0ABOIhKvf5BRZybOwcAYHmSdE650fhI7hy9iAJwCOVG412e0htz5wAALE1I51fq9b/JnaNXUQAOY1OtdoEi/jB3DgDA4oT0Pyv1+oW5c/QyCsARlBuNP1PEn+bOAQBYmJDeWqnX/3fuHL1u6HcCXIiQUr1Y/Aul9KbcWQAAhxbSn5fr9T8c1v39F4MCsECUAADobQz+i8MlgAVKUpQajTcr4n/lzgIAuK/5af+3MPgvHDMAS1ArFt+ilFgXAAA9YH7BH9f8F4kCsERT5fL/sIi/zJ0DAIbZ/K1+rPZfAgrAMtSKxdcopXfmzgEAw8alSNI53Oe/dBSAZaqWSi8K6e9NKuTOAgBDwX1OKb2YHf6WhwLQBvWJiWe0zD5u0srcWQBgkLm0N0nPZm//5aMAtEmtWDxTEZ+R2drcWQBgELn0U6X0NJ7q1x4UgDaqT0w8qmX2zyYdnzsLAAySkHZI+tVKvf793FkGBQWgzbZWKuPm/sUknZI7CwAMBPdtFnFWcdu27bmjDBIKQAdMb9jw4NnR0c8l6VG5swBAX3P/VpKeXmo2b88dZdCwE2AHjG/fvmN2dPRMRbBIBQCWKuLyXUcd9WQG/85gBqCDvnbGGSMPvuWWi83sZbmzAEBfibi41Gicm6RW7iiDigLQYSGlWql0XkhvM/6+AeCwXHKLeG250Xh37iyDjgGpS2rF4tMV8RGZrcmdBQB6kvtOLxSet6lW++fcUYYBBaCLtlYqD0/unzVpfe4sANBT3G9SSmeXG43rc0cZFiwC7KLJavWaJD06pO/lzgIAPcP9262Rkccw+HcXBaDLKvX6LWN79jxR7h/MnQUAsov4u4L7L09Wq7fmjjJsuASQSUipXiye4yldyIOEAAwd97kkvabYbF6apMgdZxhRADKbf4bAZTI7LncWAOiGkHZESs/eVKt9I3eWYcYlgMzKjcbXlNIjJV2VOwsAdFpI320VCo9k8M+PAtADyo3GD1ft2fP4kC7NnQUAOiWkd7vZEzZPTd2cOwu4BNBz6hMTvx3Se2S2OncWAGiLe+7v/71NtdrHc0fBz1EAetBUubxJEZ80qZg7CwAsi/tUkp5dajbruaPgvrgE0IM21WpTFvEoRfxD7iwAsFQh/f3MqlWPYfDvTcwA9Lj5SwKXyGxt7iwAsBAu/TRJL6/U6x/LnQWHRgHoA1Pl8kaL+KikLbmzAMBhRXzH3F9Q3LZte+4oODwuAfSBTbXatpbZ4xTxjtxZAOBgXApF/OWutWufwODfH5gB6DNT5fKvKOIDPFAIQM9wvzHMXlyp16/IHQULxwxAn9lUq/3L7MqVm0P6cO4sAODSBwrupzL49x9mAPpYvVh8TkRcKrNjc2cBMFxcuj1JL6vU65/KnQVLwwxAHys1Gpcppc0ufTZ3FgBDJOLyMNvM4N/fmAEYAPNPFnyBIt7FbACATnHpdqV0TqVW+wRP8Ot/FIABct3k5LrC3NzFJj0rdxYAAybiY4VW6zUT09P/lTsK2oMCMIBqxeKzI6WLk/Tg3FkA9Dn3W7xQeNWmWu3y3FHQXqwBGEDlRuMf51asKIX0ntxZAPQnl0Lufz06N1dm8B9MzAAMuFqx+DhFvEdmk7mzAOgPIV1baLVeVty27bu5s6BzmAEYcOVG4993HXXUI0J6k0t7cucB0MPcdyvi9betW/dIBv/BxwzAEJkql09WxNtZJAjgfiI+Pjcy8obNU1M3546C7qAADKGpcvnJini3SaXcWQBk5r5VKb2m3Gh8LXcUdBeXAIbQplrtK2F2miJe79LdufMA6D6X7lLEubeeeOLpDP7DiRmAIbe1Ujkhzc39icx+zyiEwMBzqZWk947Ozv7x+PbtO3LnQT4UAEiSqqXSZEhvM+mpubMA6JCIz5v7G4rbttVyR0F+FADcR31i4qyQ3iazTbmzAGgPl65TSq/bVKt9JXcW9A4KAO7na2ecMXLCrbe+UNKfKKWTcucBsDQu/TBJby3X6/8nSa3cedBbKAA4pB+cfPKqPWNjrwjpD0w6PnceAAvkfluY/dnI3Nz7JqanZ3LHQW+iAOCIasXiUZHSa0N6g0lH5c4D4OBcussiLphZufKdD7/uul2586C3UQCwYFsrlWPN/byQzqUIAL1jfuC/aN/o6DtPvf76n+TOg/5AAcCiba1Uji20Wq/1lM416ejceYChFXFnpHTRzMqV7zz92mvvzB0H/YUCgCW7bvPmB66YnT1X0rlK6ZjceYCh4f6TMLtw5ezsu07Zvv2u3HHQnygAWLZasXiUpJd5SueZ9JDceYBB5dKPkvR2N/vbyWp1Z+486G8UALTN1kpltNBq/Zan9EaTirnzAAMjohopXeBmH52sVmdzx8FgoACg7UKyarn8dHM/Tyk9MXceoF+59HWLuLDUaHwuSZ47DwYLBQAdVS2VHpEizlXE82W2InceoOe5z0r6aGtk5KLJavWa3HEwuCgA6IpqqXRiinilp/QKkx6UOw/Qa0LakSIuaRUKl05Wq7fmzoPBRwFAVzXHx1fOjYw8M0W8Uik9IXceIDv3K7xQuCRS+hTX99FNFABkM1Uub7JW6xVu9iL2E8AwcemuJH2g0Gq9hyfzIRcKALK75tRT16ycmXmupJcyK4CB5n5FmL1/95o1lz3yqqt2546D4UYBQE+ZKpc3poiXhPRi9hTAQIi4OVL64Mjc3AcmpqdvyB0H2I8CgJ4UUqExMfGUltkLzf3XZbY6dyZgwdx3hdmnJH2oXK//C4/iRS+iAKDnXXPqqWtGZ2efntxfIOksmY3kzgTcj/u+MPtCpPSRPatXf5YpfvQ6CgD6SrVUOi5FPCdSek5Iv2yS5c6E4eVSyyK+rpQ+0TL7x8lq9ce5MwELRQFA32qOjz9obmTkGZKeldyfzMwAusJ9n1L6sqRPpojPlJrN23NHApaCAoCBcN3mzQ8c2bfvaSE93dyfKrO1uTNhcLh0d5K+FCl9ZnZ09LM8eheDgAKAgTO/2dATJZ0d0tNMeljuTOg/Id2QIj7rZp+LlL7BJj0YNBQADLSQ0lSlUjb3p0p6yvy6gbHcudCD3Hcrpa9HSl829y8Wm81GkiJ3LKBTKAAYKs3x8ZWtQuFxiniKmz1F0hbj/4Oh5FIk6UpJX5b0f93sW3zKxzDhHz4MtatPO+2YlTMzj5f0RElnxD2FoJA7F9pvfsX+lZKuiJT+dWblyn/jWj6GGQUAuJetlcpac39cini8Ih7rZo/hOQX9yaW7zP07Suk7kdI35j/h78ydC+gVFADgMEKy5saNRTd7rEc8VmaPNfcKtxz2GPe5MJsK9+9YSt82929PbNvWSJLnjgb0KgoAsEg/OPnkVXvHxjaFdHqKOF0Rp0s6je2Ku8R9l5tdaxFXu9nVKeLqkbm5qYnp6Znc0YB+QgEA2mB+puAXW4VCJVKqmPsmv+drhWKwRPfsp19N7lUvFKopYsrcq8Vm80Y+2QPLRwEAOigk27pp00NG5uZOiZTGU8S4pzSepPHkfsrQb1jkvlMpTUdK0yliOlK6IUVMz42M3DA5NfUfDPRA51AAgExCStdv3nzM6MzMSW52krk/NKSTwuyhKeIERaxzs3WSju+3WxXnb7H7r+S+QyndFindktxvVko3RUo3p4ib9q5adfPDr732Lu61B/Loq39UgGEUUuH6ycnjR2dn17UKhQeZ+zFudoy5PzBSOiZFHOMpPTBJa5L7ajdbbe5j819Xu9mYuY+4WcHcC242Mv+1IEnm3nKzlrnPzX9tudmcue9xs93mvtvN9pj77jDbHdIui/hJpHRniviJm91p7nfOf92xb8WKHZu3br2dR+ACve3/BxWscg0z6gRwAAAAAElFTkSuQmCC");

/***/ }),

/***/ "./resources/movai_red.svg":
/*!*********************************!*\
  !*** ./resources/movai_red.svg ***!
  \*********************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' version='1.0' width='400.000000' height='400.000000' preserveAspectRatio='xMidYMid meet'%3E%3Crect id='backgroundrect' width='100%25' height='100%25' x='0' y='0' fill='none' stroke='none'/%3E %3Cg class='currentLayer' style=''%3E%3Ctitle%3ELayer 1%3C/title%3E%3Cg transform='translate(0,400) scale(0.10000000149011612,-0.10000000149011612) ' fill='%23d31b1b' stroke='none' id='svg_1' class='' fill-opacity='1'%3E %3Cpath d='M1770 3990 c-682 -83 -1271 -501 -1570 -1115 -103 -211 -167 -437 -191 -673 -14 -129 -6 -404 14 -522 85 -495 339 -929 729 -1242 232 -187 539 -332 836 -393 957 -199 1909 314 2272 1224 204 512 180 1116 -64 1606 -115 232 -229 387 -412 565 -296 286 -639 460 -1059 536 -106 19 -443 27 -555 14z m-998 -1105 c3 -3 -23 -48 -57 -99 -113 -172 -182 -338 -226 -546 -32 -149 -33 -448 -1 -593 31 -145 70 -258 134 -387 65 -132 64 -140 -28 -140 -66 0 -100 13 -143 53 -74 70 -71 38 -71 748 0 555 2 642 16 690 43 144 129 236 248 265 54 13 119 18 128 9z m2621 -21 c99 -34 192 -157 216 -288 14 -78 15 -1256 1 -1307 -13 -48 -82 -125 -124 -139 -55 -18 -166 -12 -166 9 0 4 25 57 55 118 195 391 215 839 55 1247 -41 105 -117 247 -176 327 -18 25 -30 49 -26 54 10 11 109 -2 165 -21z m-251 -61 c128 -170 217 -370 265 -594 13 -63 18 -129 18 -264 0 -199 -13 -285 -66 -448 -33 -101 -114 -277 -128 -277 -26 0 -31 80 -32 549 0 267 -4 495 -8 505 -6 16 -20 4 -87 -77 -43 -53 -81 -96 -84 -96 -3 -1 -16 41 -29 92 -27 106 -74 215 -132 304 -32 48 -38 66 -31 80 34 61 243 273 271 273 4 0 23 -21 43 -47z m-2206 15 c52 -39 95 -82 171 -170 l74 -88 -42 -61 c-23 -34 -54 -89 -69 -123 -35 -76 -80 -219 -80 -252 0 -13 -4 -24 -8 -24 -4 0 -43 43 -87 95 -43 52 -83 95 -87 95 -4 0 -8 -224 -9 -497 0 -492 -5 -565 -34 -565 -16 0 -94 166 -130 279 -52 159 -69 294 -62 493 8 230 47 384 147 585 56 112 154 255 174 255 7 0 26 -10 42 -22z m458 -511 l133 -157 -20 -58 c-13 -39 -19 -85 -19 -147 -1 -150 44 -260 151 -365 107 -105 214 -150 361 -150 241 0 443 162 500 399 16 69 8 222 -15 278 l-17 43 132 157 c73 87 136 159 140 161 24 9 119 -186 148 -303 11 -44 22 -104 25 -134 l4 -54 -329 -388 c-343 -405 -362 -424 -466 -455 -101 -31 -258 -12 -341 41 -48 29 -83 69 -607 691 -52 62 -94 121 -94 131 0 52 33 202 60 271 33 86 99 204 112 200 5 -2 68 -74 142 -161z m376 -444 c85 -102 167 -194 182 -204 62 -45 81 -30 292 224 76 92 142 165 146 162 13 -8 20 -110 10 -167 -27 -170 -153 -299 -324 -334 -130 -27 -257 9 -356 102 -61 57 -116 162 -125 239 -8 57 1 165 13 164 4 0 77 -84 162 -186z' id='svg_2' fill='%23d31b1b' fill-opacity='1'/%3E %3C/g%3E%3C/g%3E%3C/svg%3E"

/***/ }),

/***/ "./src/Components/Breadcrumb.js":
/*!**************************************!*\
  !*** ./src/Components/Breadcrumb.js ***!
  \**************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _material_ui_core_styles__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @material-ui/core/styles */ "@material-ui/core/styles");
/* harmony import */ var _material_ui_core_styles__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _material_ui_core_Breadcrumbs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @material-ui/core/Breadcrumbs */ "@material-ui/core/Breadcrumbs");
/* harmony import */ var _material_ui_core_Breadcrumbs__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_Breadcrumbs__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _material_ui_icons_NavigateNext__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @material-ui/icons/NavigateNext */ "@material-ui/icons/NavigateNext");
/* harmony import */ var _material_ui_icons_NavigateNext__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_material_ui_icons_NavigateNext__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _material_ui_core_Typography__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @material-ui/core/Typography */ "@material-ui/core/Typography");
/* harmony import */ var _material_ui_core_Typography__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_Typography__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! prop-types */ "prop-types");
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_5__);






var useStyles = Object(_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_1__["makeStyles"])(function (theme) {
  return {
    root: {
      "& > * + *": {
        marginTop: theme.spacing(2)
      }
    },
    link: {
      fontSize: "24px",
      fontWeight: 800,
      fontFamily: "Open Sans",
      "&:hover": {
        cursor: "pointer",
        textDecoration: "underline"
      }
    },
    lastLabel: {
      fontSize: "24px",
      fontWeight: 800,
      fontFamily: "Open Sans"
    }
  };
});

var Breadcrumb = function Breadcrumb(props) {
  var classes = useStyles();
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    className: classes.root
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core_Breadcrumbs__WEBPACK_IMPORTED_MODULE_2___default.a, {
    separator: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_icons_NavigateNext__WEBPACK_IMPORTED_MODULE_3___default.a, {
      fontSize: "small"
    }),
    "aria-label": "breadcrumb",
    style: props.style
  }, props.pathList.map(function (element, index) {
    if (props.pathList.length - 1 !== index) {
      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core_Typography__WEBPACK_IMPORTED_MODULE_4___default.a, {
        key: index,
        color: "primary",
        variant: "inherit",
        className: classes.link,
        onClick: element["function"]
      }, element.label);
    }
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core_Typography__WEBPACK_IMPORTED_MODULE_4___default.a, {
    color: "textPrimary",
    className: classes.lastLabel
  }, props.pathList[props.pathList.length - 1].label)));
};

Breadcrumb.propTypes = {
  pathList: prop_types__WEBPACK_IMPORTED_MODULE_5___default.a.array
};
Breadcrumb.defaultProps = {
  pathList: [{
    label: "Mov.ai",
    "function": function _function() {
      return console.log("pth1/");
    }
  }, {
    label: "User",
    "function": function _function() {
      return console.log("path1/path2");
    }
  }, {
    label: "John Doe"
  }]
};
/* harmony default export */ __webpack_exports__["default"] = (Breadcrumb);

/***/ }),

/***/ "./src/Components/Button.js":
/*!**********************************!*\
  !*** ./src/Components/Button.js ***!
  \**********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _material_ui_core_Button__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @material-ui/core/Button */ "@material-ui/core/Button");
/* harmony import */ var _material_ui_core_Button__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_Button__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! prop-types */ "prop-types");
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_2__);




var Button = function Button(props) {
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core_Button__WEBPACK_IMPORTED_MODULE_1___default.a, {
    className: props.className,
    style: props.style,
    onClick: props.onClick,
    color: props.color,
    variant: props.variant,
    size: props.size,
    startIcon: props.startIcon,
    disabled: props.disabled
  }, props.children);
};

Button.propTypes = {
  style: prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.object,
  onClick: prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.func,
  color: prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.string,
  variant: prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.string.isRequired,
  size: prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.string,
  startIcon: prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.element,
  children: prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.node.isRequired,
  disabled: prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.bool
};
Button.defaultProps = {
  style: {},
  onClick: function onClick() {
    return console.log("Click MOV.AI button");
  },
  color: "default",
  // default, inherit, primary or secondary
  variant: "contained",
  // text, outlined, contained
  size: "medium",
  // small, medium, large
  startIcon: undefined,
  children: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", null),
  disabled: false
};
/* harmony default export */ __webpack_exports__["default"] = (Button);

/***/ }),

/***/ "./src/Components/Collapse.js":
/*!************************************!*\
  !*** ./src/Components/Collapse.js ***!
  \************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "@babel/runtime/helpers/esm/defineProperty");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/slicedToArray */ "@babel/runtime/helpers/esm/slicedToArray");
/* harmony import */ var _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _material_ui_icons_ChevronRight__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @material-ui/icons/ChevronRight */ "@material-ui/icons/ChevronRight");
/* harmony import */ var _material_ui_icons_ChevronRight__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_material_ui_icons_ChevronRight__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _material_ui_icons_ExpandMore__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @material-ui/icons/ExpandMore */ "@material-ui/icons/ExpandMore");
/* harmony import */ var _material_ui_icons_ExpandMore__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_material_ui_icons_ExpandMore__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! prop-types */ "prop-types");
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _material_ui_core_Collapse__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @material-ui/core/Collapse */ "@material-ui/core/Collapse");
/* harmony import */ var _material_ui_core_Collapse__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_Collapse__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _material_ui_core__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @material-ui/core */ "@material-ui/core");
/* harmony import */ var _material_ui_core__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core__WEBPACK_IMPORTED_MODULE_7__);



function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }








var Collapse = function Collapse(props) {
  var _React$useState = react__WEBPACK_IMPORTED_MODULE_2___default.a.useState(props.open),
      _React$useState2 = _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_React$useState, 2),
      open = _React$useState2[0],
      setOpen = _React$useState2[1];

  react__WEBPACK_IMPORTED_MODULE_2___default.a.useEffect(function () {
    if (props.open !== open) {
      setOpen(props.open);
    }
  }, [props.open]);

  var handleClickFactory = function handleClickFactory(clickLambda) {
    return function () {
      setOpen(!open);
      clickLambda();
    };
  };

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_7__["List"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_7__["ListItem"], {
    button: true,
    onClick: handleClickFactory(props.onClick)
  }, open ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_material_ui_icons_ExpandMore__WEBPACK_IMPORTED_MODULE_4___default.a, {
    style: _objectSpread({}, props.iconStyle)
  }) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_material_ui_icons_ChevronRight__WEBPACK_IMPORTED_MODULE_3___default.a, {
    style: _objectSpread({}, props.iconStyle)
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div", {
    style: {
      width: "100%"
    }
  }, props.item)), props.divided ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_7__["Divider"], null) : [], /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_material_ui_core_Collapse__WEBPACK_IMPORTED_MODULE_6___default.a, {
    className: props.className,
    style: props.style,
    "in": open
  }, props.children));
};

Collapse.propTypes = {
  item: prop_types__WEBPACK_IMPORTED_MODULE_5___default.a.object,
  onClick: prop_types__WEBPACK_IMPORTED_MODULE_5___default.a.func,
  open: prop_types__WEBPACK_IMPORTED_MODULE_5___default.a.bool,
  divided: prop_types__WEBPACK_IMPORTED_MODULE_5___default.a.bool,
  iconStyle: prop_types__WEBPACK_IMPORTED_MODULE_5___default.a.object
};
Collapse.defaultProps = {
  item: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div", null),
  onClick: function onClick() {},
  open: false,
  divided: false,
  style: {},
  iconStyle: {}
};
/* harmony default export */ __webpack_exports__["default"] = (Collapse);

/***/ }),

/***/ "./src/Components/ContextMenu.js":
/*!***************************************!*\
  !*** ./src/Components/ContextMenu.js ***!
  \***************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/slicedToArray */ "@babel/runtime/helpers/esm/slicedToArray");
/* harmony import */ var _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! prop-types */ "prop-types");
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _material_ui_core_Menu__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @material-ui/core/Menu */ "@material-ui/core/Menu");
/* harmony import */ var _material_ui_core_Menu__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_Menu__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _material_ui_core_MenuItem__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @material-ui/core/MenuItem */ "@material-ui/core/MenuItem");
/* harmony import */ var _material_ui_core_MenuItem__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_MenuItem__WEBPACK_IMPORTED_MODULE_4__);






var ContextMenu = function ContextMenu(props) {
  var style = props.style;

  var _React$useState = react__WEBPACK_IMPORTED_MODULE_1___default.a.useState(null),
      _React$useState2 = _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_React$useState, 2),
      anchorEl = _React$useState2[0],
      setAnchorEl = _React$useState2[1];

  var handleClick = function handleClick(event) {
    setAnchorEl(event.currentTarget);
  };

  var handleClose = function handleClose() {
    setAnchorEl(null);
  };

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", {
    style: style
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.cloneElement(props.element, {
    onClick: function onClick(evt) {
      if (props.element.props.onClick !== undefined) {
        props.element.props.onClick(); // If user defined a onClick
      }

      handleClick(evt); // opens the contextMenu
    }
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_core_Menu__WEBPACK_IMPORTED_MODULE_3___default.a, {
    id: "simple-menu",
    anchorEl: anchorEl,
    keepMounted: true,
    open: Boolean(anchorEl),
    onClose: handleClose
  }, props.menuList.reduce(function (result, item, index) {
    if (item && typeof item !== "function") {
      result.push( /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_core_MenuItem__WEBPACK_IMPORTED_MODULE_4___default.a, {
        onClick: function onClick() {
          item.onClick();

          if (item.onClose || item.onClose === undefined) {
            handleClose();
          }
        },
        key: index
      }, item.element));
    }

    return result;
  }, [])));
};

ContextMenu.propTypes = {
  element: prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.node.isRequired,
  navigationList: prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.array,
  lowerElement: prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.node.isRequired,
  width: prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.string,
  backgroundColor: prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.string
};
ContextMenu.defaultProps = {
  element: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null, "Ahaha"),
  menuList: [{
    onClick: function onClick() {
      return console.log("clicked 1");
    },
    element: "Profile",
    onClose: true
  }],
  lowerElement: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null),
  width: "68px",
  backgroundColor: "#424242",
  style: {}
};
/* harmony default export */ __webpack_exports__["default"] = (ContextMenu);

/***/ }),

/***/ "./src/Components/Drawer.js":
/*!**********************************!*\
  !*** ./src/Components/Drawer.js ***!
  \**********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! prop-types */ "prop-types");
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _material_ui_core_Drawer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @material-ui/core/Drawer */ "@material-ui/core/Drawer");
/* harmony import */ var _material_ui_core_Drawer__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_Drawer__WEBPACK_IMPORTED_MODULE_2__);




var Drawer = function Drawer(props) {
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core_Drawer__WEBPACK_IMPORTED_MODULE_2___default.a, {
    style: props.style,
    anchor: props.anchor,
    open: props.open,
    onClose: props.onClose
  }, props.children);
};

Drawer.propTypes = {
  style: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.object,
  anchor: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string,
  open: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.bool,
  children: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.object
};
Drawer.defaultProps = {
  style: {},
  anchor: "left",
  open: false,
  children: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", null)
};
Drawer.ANCHOR = {
  left: "left",
  right: "right",
  top: "top",
  bottom: "bottom"
};
/* harmony default export */ __webpack_exports__["default"] = (Drawer);

/***/ }),

/***/ "./src/Components/HOCs/withAuthentication.js":
/*!***************************************************!*\
  !*** ./src/Components/HOCs/withAuthentication.js ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return withAuthentication; });
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/extends */ "@babel/runtime/helpers/esm/extends");
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/asyncToGenerator */ "@babel/runtime/helpers/esm/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/slicedToArray */ "@babel/runtime/helpers/esm/slicedToArray");
/* harmony import */ var _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _material_ui_core__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @material-ui/core */ "@material-ui/core");
/* harmony import */ var _material_ui_core__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! mov-fe-lib-core */ "mov-fe-lib-core");
/* harmony import */ var mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _LoginForm_LoginForm__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../LoginForm/LoginForm */ "./src/Components/LoginForm/LoginForm.js");
/* harmony import */ var jwt_decode__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! jwt-decode */ "jwt-decode");
/* harmony import */ var jwt_decode__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(jwt_decode__WEBPACK_IMPORTED_MODULE_8__);









function withAuthentication(Component) {
  return function (props) {
    var RECHECK_VALID_DELAY = 2000; // milliseconds

    var firstRender = Object(react__WEBPACK_IMPORTED_MODULE_4__["useRef"])(true);

    var _useState = Object(react__WEBPACK_IMPORTED_MODULE_4__["useState"])(false),
        _useState2 = _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState, 2),
        loggedIn = _useState2[0],
        _setLoggedIn = _useState2[1];

    var _useState3 = Object(react__WEBPACK_IMPORTED_MODULE_4__["useState"])(0),
        _useState4 = _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState3, 2),
        checkLogin = _useState4[0],
        setCheckLogin = _useState4[1];
    /**
     * check if the user is authenticated
     */


    Object(react__WEBPACK_IMPORTED_MODULE_4__["useEffect"])(function () {
      function checkLogin() {
        return _checkLogin.apply(this, arguments);
      }

      function _checkLogin() {
        _checkLogin = _babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default.a.mark(function _callee() {
          return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default.a.wrap(function _callee$(_context) {
            while (1) {
              switch (_context.prev = _context.next) {
                case 0:
                  _context.next = 2;
                  return mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_6__["Authentication"].checkLogin();

                case 2:
                  return _context.abrupt("return", _context.sent);

                case 3:
                case "end":
                  return _context.stop();
              }
            }
          }, _callee);
        }));
        return _checkLogin.apply(this, arguments);
      }

      _setLoggedIn(checkLogin());
    }, []);
    /**
     * Checks if the refresh token is still valid
     * sets loggedIn accordingly.
     * Setting checkLogin or loggedIn will trigger execution
     */

    Object(react__WEBPACK_IMPORTED_MODULE_4__["useEffect"])(function () {
      var now = Math.floor(Date.now() * 0.001);
      var token = window.localStorage.getItem("movai.refreshToken");

      try {
        // decode the token and get exp value
        var exp = jwt_decode__WEBPACK_IMPORTED_MODULE_8___default()(token).exp || now; // check if token expiration time is still valid

        var expDelta = exp - now;

        if (expDelta <= 0) {
          throw new Error("Token expired");
        } // check again in expire time + RECHECK_VALID_DELAY


        setTimeout(function () {
          return setCheckLogin(now);
        }, expDelta * 1000 + RECHECK_VALID_DELAY);

        _setLoggedIn(true);
      } catch (error) {
        // token expired or no token
        _setLoggedIn(false);
      }
    }, [checkLogin, loggedIn]);
    /**
     * handleLogOut - log out the user
     */

    var handleLogOut = function handleLogOut() {
      mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_6__["Authentication"].logout();
    };
    /**
     * handleFirstRender - If the user is not logged in and it is the first render
     * then show the login form without the application on the background.
     * After the first login, the login form can be showned as a modal instead.
     */


    var handleFirstRender = function handleFirstRender() {
      firstRender.current = false;
      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement(_LoginForm_LoginForm__WEBPACK_IMPORTED_MODULE_7__["default"], {
        setLoggedIn: function setLoggedIn(state) {
          return _setLoggedIn(state);
        }
      });
    };
    /**
     * renders the Login form if the user is not logged in
     */


    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_4___default.a.Fragment, null, !loggedIn && firstRender.current ? handleFirstRender() : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_4___default.a.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement(Component, _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0___default()({
      handleLogOut: handleLogOut,
      loggedIn: loggedIn
    }, props)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_5__["Modal"], {
      open: !loggedIn
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement(_LoginForm_LoginForm__WEBPACK_IMPORTED_MODULE_7__["default"], {
      setLoggedIn: function setLoggedIn(state) {
        return _setLoggedIn(state);
      }
    }))));
  };
}

/***/ }),

/***/ "./src/Components/HOCs/withOfflineValidation.js":
/*!******************************************************!*\
  !*** ./src/Components/HOCs/withOfflineValidation.js ***!
  \******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return withOfflineValidation; });
/* harmony import */ var _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/slicedToArray */ "@babel/runtime/helpers/esm/slicedToArray");
/* harmony import */ var _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! mov-fe-lib-core */ "mov-fe-lib-core");
/* harmony import */ var mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _material_ui_lab_Alert__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @material-ui/lab/Alert */ "@material-ui/lab/Alert");
/* harmony import */ var _material_ui_lab_Alert__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_material_ui_lab_Alert__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _material_ui_core_CircularProgress__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @material-ui/core/CircularProgress */ "@material-ui/core/CircularProgress");
/* harmony import */ var _material_ui_core_CircularProgress__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_CircularProgress__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _material_ui_styles__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @material-ui/styles */ "@material-ui/styles");
/* harmony import */ var _material_ui_styles__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_material_ui_styles__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _material_ui_core__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @material-ui/core */ "@material-ui/core");
/* harmony import */ var _material_ui_core__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core__WEBPACK_IMPORTED_MODULE_6__);







var useStyles = Object(_material_ui_styles__WEBPACK_IMPORTED_MODULE_5__["makeStyles"])(function (theme) {
  return {
    alert: {
      position: "absolute",
      bottom: 0,
      width: "100%"
    }
  };
});
function withOfflineValidation(Component) {
  return function (props) {
    var _React$useState = react__WEBPACK_IMPORTED_MODULE_1___default.a.useState(true),
        _React$useState2 = _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_React$useState, 2),
        isConnected = _React$useState2[0],
        setConnected = _React$useState2[1];

    var _React$useState3 = react__WEBPACK_IMPORTED_MODULE_1___default.a.useState(false),
        _React$useState4 = _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_React$useState3, 2),
        showSuccessAlert = _React$useState4[0],
        setSuccessAlert = _React$useState4[1];

    var _React$useState5 = react__WEBPACK_IMPORTED_MODULE_1___default.a.useState(null),
        _React$useState6 = _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_React$useState5, 2),
        validator = _React$useState6[0],
        setValidator = _React$useState6[1];

    var _React$useState7 = react__WEBPACK_IMPORTED_MODULE_1___default.a.useState(false),
        _React$useState8 = _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_React$useState7, 2),
        loading = _React$useState8[0],
        setLoading = _React$useState8[1];

    var classes = useStyles();
    /**
     * Start offline validation
     */

    Object(react__WEBPACK_IMPORTED_MODULE_1__["useEffect"])(function () {
      var _validator = mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_2__["MasterDB"].offlineValidation({
        onOnline: onOnline,
        onOffline: onOffline
      });

      setValidator(_validator);
    }, []);

    var onOnline = function onOnline() {
      setConnected(true);
      setSuccessAlert(true);
      setTimeout(function () {
        return setSuccessAlert(false);
      }, 2000);
    };

    var onOffline = function onOffline() {
      setConnected(false);
    };

    var retryConnection = function retryConnection() {
      setLoading(true);
      validator.retryConnection().then(function () {
        return setLoading(false);
      });
    };
    /**
     * renders the Login form if the user is not logged in
     */


    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(Component, props), !isConnected && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_lab_Alert__WEBPACK_IMPORTED_MODULE_3___default.a, {
      className: classes.alert,
      variant: "filled",
      severity: "error",
      action: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_6__["Button"], {
        color: "inherit",
        size: "small",
        onClick: retryConnection
      }, loading ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_core_CircularProgress__WEBPACK_IMPORTED_MODULE_4___default.a, {
        size: 20,
        color: "inherit"
      }) : "RETRY")
    }, "Connection failed... You're now in offline mode, please wait to reconnect."), isConnected && showSuccessAlert && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_lab_Alert__WEBPACK_IMPORTED_MODULE_3___default.a, {
      className: classes.alert,
      variant: "filled",
      severity: "success"
    }, "You're now online!")));
  };
}

/***/ }),

/***/ "./src/Components/LoginForm/LoginForm.js":
/*!***********************************************!*\
  !*** ./src/Components/LoginForm/LoginForm.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/asyncToGenerator */ "@babel/runtime/helpers/esm/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "@babel/runtime/helpers/esm/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "@babel/runtime/helpers/esm/createClass");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/assertThisInitialized */ "@babel/runtime/helpers/esm/assertThisInitialized");
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "@babel/runtime/helpers/esm/inherits");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "@babel/runtime/helpers/esm/possibleConstructorReturn");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "@babel/runtime/helpers/esm/getPrototypeOf");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "@babel/runtime/helpers/esm/defineProperty");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var _material_ui_core_Typography__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @material-ui/core/Typography */ "@material-ui/core/Typography");
/* harmony import */ var _material_ui_core_Typography__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_Typography__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var _material_ui_core_Button__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @material-ui/core/Button */ "@material-ui/core/Button");
/* harmony import */ var _material_ui_core_Button__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_Button__WEBPACK_IMPORTED_MODULE_11__);
/* harmony import */ var _material_ui_core_Grid__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @material-ui/core/Grid */ "@material-ui/core/Grid");
/* harmony import */ var _material_ui_core_Grid__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_Grid__WEBPACK_IMPORTED_MODULE_12__);
/* harmony import */ var _movai_red_svg__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./movai_red.svg */ "./src/Components/LoginForm/movai_red.svg");
/* harmony import */ var _movai_red_svg__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(_movai_red_svg__WEBPACK_IMPORTED_MODULE_13__);
/* harmony import */ var _material_ui_core_Paper__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @material-ui/core/Paper */ "@material-ui/core/Paper");
/* harmony import */ var _material_ui_core_Paper__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_Paper__WEBPACK_IMPORTED_MODULE_14__);
/* harmony import */ var _material_ui_core_FormControl__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @material-ui/core/FormControl */ "@material-ui/core/FormControl");
/* harmony import */ var _material_ui_core_FormControl__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_FormControl__WEBPACK_IMPORTED_MODULE_15__);
/* harmony import */ var _material_ui_core_FormHelperText__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @material-ui/core/FormHelperText */ "@material-ui/core/FormHelperText");
/* harmony import */ var _material_ui_core_FormHelperText__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_FormHelperText__WEBPACK_IMPORTED_MODULE_16__);
/* harmony import */ var _material_ui_core_Input__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @material-ui/core/Input */ "@material-ui/core/Input");
/* harmony import */ var _material_ui_core_Input__WEBPACK_IMPORTED_MODULE_17___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_Input__WEBPACK_IMPORTED_MODULE_17__);
/* harmony import */ var _material_ui_core_InputLabel__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @material-ui/core/InputLabel */ "@material-ui/core/InputLabel");
/* harmony import */ var _material_ui_core_InputLabel__WEBPACK_IMPORTED_MODULE_18___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_InputLabel__WEBPACK_IMPORTED_MODULE_18__);
/* harmony import */ var _material_ui_core_styles__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @material-ui/core/styles */ "@material-ui/core/styles");
/* harmony import */ var _material_ui_core_styles__WEBPACK_IMPORTED_MODULE_19___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_19__);
/* harmony import */ var mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! mov-fe-lib-core */ "mov-fe-lib-core");
/* harmony import */ var mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_20___default = /*#__PURE__*/__webpack_require__.n(mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_20__);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! prop-types */ "prop-types");
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_21___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_21__);










function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6___default()(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6___default()(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5___default()(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }















var styles = function styles(theme) {
  return {
    root: {
      padding: theme.spacing(4, 4),
      borderRadius: 10
    }
  };
};

var LoginForm = /*#__PURE__*/function (_Component) {
  _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4___default()(LoginForm, _Component);

  var _super = _createSuper(LoginForm);

  function LoginForm() {
    var _this;

    _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default()(this, LoginForm);

    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _this = _super.call.apply(_super, [this].concat(args));

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3___default()(_this), "state", {
      username: "",
      password: "",
      remember: false,
      error: false,
      errorMessage: "",
      capsLockOn: false
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3___default()(_this), "sendCreds", /*#__PURE__*/_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_8___default.a.mark(function _callee() {
      var apiResponse;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_8___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_20__["Authentication"].login(_this.state.username, _this.state.password, _this.state.remember);

            case 3:
              apiResponse = _context.sent;

              // If successfully logged in
              if (!apiResponse.error) {
                _this.props.setLoggedIn(true);
              } else {
                // Show the error in red
                _this.setState({
                  error: true,
                  errorMessage: apiResponse.error
                });
              }

              _context.next = 10;
              break;

            case 7:
              _context.prev = 7;
              _context.t0 = _context["catch"](0);

              _this.setState({
                error: true,
                errorMessage: _context.t0
              });

            case 10:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[0, 7]]);
    })));

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3___default()(_this), "checkCapsLock", function (event) {
      if (event.key === "CapsLock" && _this.state.capsLockOn) _this.setState({
        capsLockOn: false
      });else {
        var capsLock = event.getModifierState("CapsLock");

        _this.setState({
          capsLockOn: capsLock
        });
      }
    });

    return _this;
  }

  _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2___default()(LoginForm, [{
    key: "render",
    value: function render() {
      var _this2 = this;

      var _this$props = this.props,
          classes = _this$props.classes,
          logo = _this$props.logo;
      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(_material_ui_core_Grid__WEBPACK_IMPORTED_MODULE_12___default.a, {
        style: {
          paddingTop: "5%"
        },
        container: true,
        direction: "column",
        alignItems: "center",
        justify: "space-evenly"
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(_material_ui_core_Paper__WEBPACK_IMPORTED_MODULE_14___default.a, {
        elevation: 10,
        className: classes.root
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(_material_ui_core_Grid__WEBPACK_IMPORTED_MODULE_12___default.a, {
        item: true
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement("img", {
        src: logo ? logo : _movai_red_svg__WEBPACK_IMPORTED_MODULE_13___default.a,
        className: "center",
        alt: "logo",
        style: {
          display: "block",
          marginLeft: "auto",
          marginRight: "auto",
          width: "50%"
        }
      })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(_material_ui_core_Grid__WEBPACK_IMPORTED_MODULE_12___default.a, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(_material_ui_core_Typography__WEBPACK_IMPORTED_MODULE_10___default.a, {
        align: "center",
        variant: "subtitle1",
        gutterBottom: true
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(_material_ui_core_FormControl__WEBPACK_IMPORTED_MODULE_15___default.a, {
        className: classes.formControl,
        error: this.state.error
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(_material_ui_core_InputLabel__WEBPACK_IMPORTED_MODULE_18___default.a, {
        htmlFor: "component-username-error"
      }, "Username"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(_material_ui_core_Input__WEBPACK_IMPORTED_MODULE_17___default.a, {
        id: "component-username-error",
        value: this.state.username,
        "aria-describedby": "component-username-error-text",
        onChange: function onChange(event) {
          return _this2.setState({
            username: event.target.value
          });
        }
      })))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(_material_ui_core_Grid__WEBPACK_IMPORTED_MODULE_12___default.a, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(_material_ui_core_Typography__WEBPACK_IMPORTED_MODULE_10___default.a, {
        align: "center",
        variant: "subtitle1",
        gutterBottom: true
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(_material_ui_core_FormControl__WEBPACK_IMPORTED_MODULE_15___default.a, {
        className: classes.formControl,
        error: this.state.error
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(_material_ui_core_InputLabel__WEBPACK_IMPORTED_MODULE_18___default.a, {
        htmlFor: "component-password-error"
      }, "Password"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(_material_ui_core_Input__WEBPACK_IMPORTED_MODULE_17___default.a, {
        id: "component-password-error",
        type: "password",
        value: this.state.password,
        "aria-describedby": "component-password-error-text",
        onChange: function onChange(event) {
          return _this2.setState({
            password: event.target.value
          });
        },
        onKeyUp: function onKeyUp(event) {
          _this2.checkCapsLock(event);

          if (event.key === "Enter") {
            _this2.sendCreds();
          }
        }
      }), this.state.error && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(_material_ui_core_FormHelperText__WEBPACK_IMPORTED_MODULE_16___default.a, {
        id: "component-error-text"
      }, this.state.errorMessage), this.state.capsLockOn && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(_material_ui_core_FormHelperText__WEBPACK_IMPORTED_MODULE_16___default.a, {
        id: "component-warning-text"
      }, "Warning: Caps lock is ON!")))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(_material_ui_core_Grid__WEBPACK_IMPORTED_MODULE_12___default.a, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(_material_ui_core_Typography__WEBPACK_IMPORTED_MODULE_10___default.a, {
        align: "center",
        gutterBottom: true
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(_material_ui_core_Button__WEBPACK_IMPORTED_MODULE_11___default.a, {
        onClick: function onClick() {
          return _this2.sendCreds();
        }
      }, "Login")))));
    }
  }]);

  return LoginForm;
}(react__WEBPACK_IMPORTED_MODULE_9__["Component"]);

LoginForm.propTypes = {
  logs: prop_types__WEBPACK_IMPORTED_MODULE_21___default.a.any,
  // expects a svg element
  setLoggedIn: prop_types__WEBPACK_IMPORTED_MODULE_21___default.a.func
};
LoginForm.defaultProps = {
  setLoggedIn: function setLoggedIn(loggedIn) {
    return console.log(loggedIn);
  }
};
/* harmony default export */ __webpack_exports__["default"] = (Object(_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_19__["withStyles"])(styles, {
  withTheme: true
})(LoginForm));

/***/ }),

/***/ "./src/Components/LoginForm/movai_red.svg":
/*!************************************************!*\
  !*** ./src/Components/LoginForm/movai_red.svg ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' version='1.0' width='400.000000' height='400.000000' preserveAspectRatio='xMidYMid meet'%3E%3Crect id='backgroundrect' width='100%25' height='100%25' x='0' y='0' fill='none' stroke='none'/%3E %3Cg class='currentLayer' style=''%3E%3Ctitle%3ELayer 1%3C/title%3E%3Cg transform='translate(0,400) scale(0.10000000149011612,-0.10000000149011612) ' fill='%23d31b1b' stroke='none' id='svg_1' class='' fill-opacity='1'%3E %3Cpath d='M1770 3990 c-682 -83 -1271 -501 -1570 -1115 -103 -211 -167 -437 -191 -673 -14 -129 -6 -404 14 -522 85 -495 339 -929 729 -1242 232 -187 539 -332 836 -393 957 -199 1909 314 2272 1224 204 512 180 1116 -64 1606 -115 232 -229 387 -412 565 -296 286 -639 460 -1059 536 -106 19 -443 27 -555 14z m-998 -1105 c3 -3 -23 -48 -57 -99 -113 -172 -182 -338 -226 -546 -32 -149 -33 -448 -1 -593 31 -145 70 -258 134 -387 65 -132 64 -140 -28 -140 -66 0 -100 13 -143 53 -74 70 -71 38 -71 748 0 555 2 642 16 690 43 144 129 236 248 265 54 13 119 18 128 9z m2621 -21 c99 -34 192 -157 216 -288 14 -78 15 -1256 1 -1307 -13 -48 -82 -125 -124 -139 -55 -18 -166 -12 -166 9 0 4 25 57 55 118 195 391 215 839 55 1247 -41 105 -117 247 -176 327 -18 25 -30 49 -26 54 10 11 109 -2 165 -21z m-251 -61 c128 -170 217 -370 265 -594 13 -63 18 -129 18 -264 0 -199 -13 -285 -66 -448 -33 -101 -114 -277 -128 -277 -26 0 -31 80 -32 549 0 267 -4 495 -8 505 -6 16 -20 4 -87 -77 -43 -53 -81 -96 -84 -96 -3 -1 -16 41 -29 92 -27 106 -74 215 -132 304 -32 48 -38 66 -31 80 34 61 243 273 271 273 4 0 23 -21 43 -47z m-2206 15 c52 -39 95 -82 171 -170 l74 -88 -42 -61 c-23 -34 -54 -89 -69 -123 -35 -76 -80 -219 -80 -252 0 -13 -4 -24 -8 -24 -4 0 -43 43 -87 95 -43 52 -83 95 -87 95 -4 0 -8 -224 -9 -497 0 -492 -5 -565 -34 -565 -16 0 -94 166 -130 279 -52 159 -69 294 -62 493 8 230 47 384 147 585 56 112 154 255 174 255 7 0 26 -10 42 -22z m458 -511 l133 -157 -20 -58 c-13 -39 -19 -85 -19 -147 -1 -150 44 -260 151 -365 107 -105 214 -150 361 -150 241 0 443 162 500 399 16 69 8 222 -15 278 l-17 43 132 157 c73 87 136 159 140 161 24 9 119 -186 148 -303 11 -44 22 -104 25 -134 l4 -54 -329 -388 c-343 -405 -362 -424 -466 -455 -101 -31 -258 -12 -341 41 -48 29 -83 69 -607 691 -52 62 -94 121 -94 131 0 52 33 202 60 271 33 86 99 204 112 200 5 -2 68 -74 142 -161z m376 -444 c85 -102 167 -194 182 -204 62 -45 81 -30 292 224 76 92 142 165 146 162 13 -8 20 -110 10 -167 -27 -170 -153 -299 -324 -334 -130 -27 -257 9 -356 102 -61 57 -116 162 -125 239 -8 57 1 165 13 164 4 0 77 -84 162 -186z' id='svg_2' fill='%23d31b1b' fill-opacity='1'/%3E %3C/g%3E%3C/g%3E%3C/svg%3E"

/***/ }),

/***/ "./src/Components/Logs/Logs.css":
/*!**************************************!*\
  !*** ./src/Components/Logs/Logs.css ***!
  \**************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var api = __webpack_require__(/*! ../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js");
            var content = __webpack_require__(/*! !../../../node_modules/css-loader/dist/cjs.js!./Logs.css */ "./node_modules/css-loader/dist/cjs.js!./src/Components/Logs/Logs.css");

            content = content.__esModule ? content.default : content;

            if (typeof content === 'string') {
              content = [[module.i, content, '']];
            }

var options = {};

options.insert = "head";
options.singleton = false;

var update = api(content, options);



module.exports = content.locals || {};

/***/ }),

/***/ "./src/Components/Logs/Logs.js":
/*!*************************************!*\
  !*** ./src/Components/Logs/Logs.js ***!
  \*************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/asyncToGenerator */ "@babel/runtime/helpers/esm/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/toConsumableArray */ "@babel/runtime/helpers/esm/toConsumableArray");
/* harmony import */ var _babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "@babel/runtime/helpers/esm/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "@babel/runtime/helpers/esm/createClass");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/assertThisInitialized */ "@babel/runtime/helpers/esm/assertThisInitialized");
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "@babel/runtime/helpers/esm/inherits");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "@babel/runtime/helpers/esm/possibleConstructorReturn");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "@babel/runtime/helpers/esm/getPrototypeOf");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "@babel/runtime/helpers/esm/defineProperty");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var _LogsFilterBar_LogsFilterBar__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./LogsFilterBar/LogsFilterBar */ "./src/Components/Logs/LogsFilterBar/LogsFilterBar.js");
/* harmony import */ var _Logs_css__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./Logs.css */ "./src/Components/Logs/Logs.css");
/* harmony import */ var _Logs_css__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(_Logs_css__WEBPACK_IMPORTED_MODULE_12__);
/* harmony import */ var mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! mov-fe-lib-core */ "mov-fe-lib-core");
/* harmony import */ var mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_13__);
/* harmony import */ var _material_ui_core_styles__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @material-ui/core/styles */ "@material-ui/core/styles");
/* harmony import */ var _material_ui_core_styles__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_14__);
/* harmony import */ var _Modal_RobotLogModal__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../Modal/RobotLogModal */ "./src/Components/Modal/RobotLogModal.js");
/* harmony import */ var _utils_Utils__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./utils/Utils */ "./src/Components/Logs/utils/Utils.js");
/* harmony import */ var _LogsTable_LogsTable__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./LogsTable/LogsTable */ "./src/Components/Logs/LogsTable/LogsTable.js");
/* harmony import */ var lodash_isEqual__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! lodash/isEqual */ "lodash/isEqual");
/* harmony import */ var lodash_isEqual__WEBPACK_IMPORTED_MODULE_18___default = /*#__PURE__*/__webpack_require__.n(lodash_isEqual__WEBPACK_IMPORTED_MODULE_18__);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! prop-types */ "prop-types");
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_19___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_19__);











function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7___default()(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7___default()(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_6___default()(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }











var UI_TAG = {
  key: 0,
  label: "ui"
};

var styles = function styles(theme) {
  return {
    tableContainer: {
      flexGrow: 1,
      minHeight: 0,
      overflow: "hidden"
    }
  };
};

var Logs = /*#__PURE__*/function (_Component) {
  _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_5___default()(Logs, _Component);

  var _super = _createSuper(Logs);

  function Logs() {
    var _this;

    _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2___default()(this, Logs);

    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _this = _super.call.apply(_super, [this].concat(args));

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), "state", {
      selectedRobots: [],
      levels: ["INFO", "ERROR"],
      limit: 50,
      logsData: [],
      messageRegex: "",
      selectedFromDate: null,
      selectedToDate: null,
      columns: ["Time", "Robot", "Message"],
      tags: _this.props.advancedMode ? [] : [UI_TAG],
      height: 0,
      //LogsTable height
      levelsList: _this.props.advancedMode ? [{
        value: "INFO",
        label: "Info"
      }, {
        value: "WARNING",
        label: "Warnings"
      }, {
        value: "DEBUG",
        label: "Debug"
      }, {
        value: "ERROR",
        label: "Error"
      }, {
        value: "CRITICAL",
        label: "Critical"
      }] : [{
        value: "INFO",
        label: "Robot Status"
      }, {
        value: "ERROR",
        label: "Alerts"
      }],
      advancedMode: _this.props.advancedMode
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), "logsTimeout", undefined);

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), "logModal", /*#__PURE__*/Object(react__WEBPACK_IMPORTED_MODULE_10__["createRef"])());

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), "simpleLevelsList", [{
      value: "INFO",
      label: "Robot Status"
    }, {
      value: "ERROR",
      label: "Alerts"
    }]);

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), "advancedLevelsList", [{
      value: "INFO",
      label: "Info"
    }, {
      value: "WARNING",
      label: "Warnings"
    }, {
      value: "DEBUG",
      label: "Debug"
    }, {
      value: "ERROR",
      label: "Error"
    }, {
      value: "CRITICAL",
      label: "Critical"
    }]);

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), "updateSelectedRobots", function () {
      if (_this.props.robotsData.length && _this.props.robotsData.filter(function (robot) {
        return robot.ip;
      }).length) _this.setSelectedRobots(_this.props.robotsData.map(function (elem) {
        return _objectSpread(_objectSpread({}, elem), {}, {
          isSelected: true
        });
      }));
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), "updateRobotSelection", function (robotId) {
      var selectedRobots = _babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default()(_this.state.selectedRobots);

      var updateRobot = selectedRobots[selectedRobots.findIndex(function (elem) {
        return elem.id === robotId;
      })];
      updateRobot.isSelected = !updateRobot.isSelected;

      _this.setState({
        selectedRobots: selectedRobots
      });
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), "setSelectedRobots", function (selectedRobots) {
      clearTimeout(_this.logsTimeout);

      _this.setState({
        selectedRobots: selectedRobots
      });

      _this.getLogs(selectedRobots);
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), "getLogs", /*#__PURE__*/function () {
      var _ref = _babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_9___default.a.mark(function _callee(robots) {
        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_9___default.a.wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                _context.next = 2;
                return Promise.all(robots.filter(function (robot) {
                  return robot.robotState !== _this.props.robotStates.off;
                }) // If robot is offline doesn't bother making the request
                .filter(function (robot) {
                  return robot.isSelected;
                }).map(function (robot) {
                  return _this.getRobotLogData(robot);
                })).then(function (dataArrays) {
                  _this.setState(function (prevState) {
                    var finalArray = dataArrays.reduce(function (all, dataArray) {
                      dataArray && dataArray.forEach(function (data) {
                        return all.push(data);
                      });
                      return all;
                    }, []);
                    _this.logsTimeout = setTimeout(_this.getLogs, 3000, prevState.selectedRobots);
                    return {
                      logsData: finalArray.sort(function (a, b) {
                        return b.time - a.time;
                      })
                    };
                  });
                });

              case 2:
              case "end":
                return _context.stop();
            }
          }
        }, _callee);
      }));

      return function (_x) {
        return _ref.apply(this, arguments);
      };
    }());

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), "getRobotLogData", function (robotSelected) {
      return new Promise(function (re, rej) {
        // Failsafe timer to prevent the promise all from hanging
        var timeoutHandle = setTimeout(function () {
          console.error("MOV.AI: One of the promises reached timeout");
          re([]);
        }, 2000);

        if (robotSelected.ip) {
          var dynamicURL = "http://".concat(robotSelected.ip, "/api/v1/logs/?").concat(Object(_utils_Utils__WEBPACK_IMPORTED_MODULE_16__["getRequestLevels"])(_this.state.levels, _this.state.levelsList), "&limit=").concat(_this.state.limit).concat(Object(_utils_Utils__WEBPACK_IMPORTED_MODULE_16__["getRequestTags"])(_this.state.tags)).concat(Object(_utils_Utils__WEBPACK_IMPORTED_MODULE_16__["getRequestMessage"])(_this.state.messageRegex));
          mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_13__["MasterDB"].get(dynamicURL, function (res, e) {
            re((res === null || res === void 0 ? void 0 : res.data) || []);
            clearTimeout(timeoutHandle);
          });
        } else {
          re([]);
        }
      })["catch"](function () {
        return console.log("Failed getRobotLogData");
      });
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), "onRowClick", function (log) {
      _this.logModal.current.open(log.rowData);
    });

    return _this;
  }

  _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_3___default()(Logs, [{
    key: "resizeHandler",
    value: function resizeHandler() {
      var height = this.divElement.clientHeight;
      this.setState({
        height: height
      });
    }
  }, {
    key: "componentDidMount",
    value: function componentDidMount() {
      this.updateSelectedRobots();
    }
  }, {
    key: "componentDidUpdate",
    value: function componentDidUpdate(prevProps, prevState) {
      if (lodash_isEqual__WEBPACK_IMPORTED_MODULE_18___default()(prevProps.robotsData, this.props.robotsData)) return;
      this.updateSelectedRobots();
    }
  }, {
    key: "componentWillUnmount",
    value: function componentWillUnmount() {
      if (this.logsTimeout) {
        clearTimeout(this.logsTimeout);
      }
    } // This function is responsible to check/unckeck the list of robots

  }, {
    key: "render",
    value: function render() {
      var _this2 = this;

      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement("div", {
        style: {
          width: "100%",
          height: "100%",
          display: "flex",
          flexDirection: "column"
        }
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement("div", {
        style: {
          flexGrow: "1",
          height: "100%",
          display: "flex",
          flexDirection: "column"
        }
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(_LogsFilterBar_LogsFilterBar__WEBPACK_IMPORTED_MODULE_11__["default"], {
        selectedRobots: this.state.selectedRobots,
        updateRobotSelection: this.updateRobotSelection,
        levels: this.state.levels,
        levelsList: this.state.levelsList,
        handleLevels: function handleLevels(event) {
          _this2.setState({
            levels: event.target.value
          });
        },
        limit: this.state.limit,
        handleLimit: function handleLimit(evt) {
          if (evt.target.value === "") {
            _this2.setState({
              limit: 0
            });
          } else {
            _this2.setState({
              limit: evt.target.value
            });
          }
        },
        columns: this.state.columns,
        columnList: this.props.columnList,
        handleColumns: function handleColumns(event) {
          // make sure columns are always with the same order
          var columns = Object.keys(_this2.props.columnList).filter(function (elem) {
            return event.target.value.includes(elem);
          });

          _this2.setState({
            columns: columns
          });
        },
        tags: this.state.tags,
        handleAddTag: function handleAddTag(tagText) {
          var tags = _this2.state.tags; // Don't add tag if it's empty or duplicate

          if (tagText !== "" && tags.findIndex(function (elem) {
            return elem.label === tagText;
          }) < 0) {
            tags.push({
              key: Object(_utils_Utils__WEBPACK_IMPORTED_MODULE_16__["findsUniqueKey"])(tags, "key"),
              label: tagText
            });

            _this2.setState({
              tags: tags
            });
          }
        },
        handleDeleteTag: function handleDeleteTag(tagToDelete) {
          var tags = _this2.state.tags;
          var filteredTags = tags.filter(function (tag) {
            return tag.key !== tagToDelete.key;
          });

          _this2.setState({
            tags: filteredTags
          });
        },
        messageRegex: this.state.messageRegex,
        handleMessageRegex: function handleMessageRegex(text) {
          return _this2.setState({
            messageRegex: text
          });
        },
        selectedFromDate: this.state.selectedFromDate,
        selectedToDate: this.state.selectedToDate,
        handleDateChange: function handleDateChange(newDate, keyToChange) {
          _this2.setState(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()({}, keyToChange, newDate));
        },
        advancedMode: this.state.advancedMode,
        handleAdvancedMode: function handleAdvancedMode(evt) {
          // Toggle advanced mode: change the levels
          var advancedMode = !_this2.state.advancedMode;

          _this2.setState({
            advancedMode: advancedMode,
            levelsList: _this2.state.advancedMode ? _this2.simpleLevelsList : _this2.advancedLevelsList,
            tags: advancedMode ? [] : [UI_TAG]
          });
        }
      }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement("div", {
        ref: function ref(divElement) {
          _this2.divElement = divElement;
        },
        className: this.props.classes.tableContainer
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(_LogsTable_LogsTable__WEBPACK_IMPORTED_MODULE_17__["default"], {
        columns: this.state.columns,
        columnList: this.props.columnList,
        logsData: Object(_utils_Utils__WEBPACK_IMPORTED_MODULE_16__["filterByFromToDates"])(this.state.logsData, this.state.selectedFromDate, this.state.selectedToDate),
        height: this.state.height,
        levelsList: this.state.levelsList,
        onRowClick: this.onRowClick
      }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(_Modal_RobotLogModal__WEBPACK_IMPORTED_MODULE_15__["default"], {
        ref: this.logModal,
        props: ["module", "service"]
      }));
    }
  }]);

  return Logs;
}(react__WEBPACK_IMPORTED_MODULE_10__["Component"]);

Logs.propTypes = {
  robotsData: prop_types__WEBPACK_IMPORTED_MODULE_19___default.a.array,
  robotStates: prop_types__WEBPACK_IMPORTED_MODULE_19___default.a.object,
  columnList: prop_types__WEBPACK_IMPORTED_MODULE_19___default.a.object,
  advancedMode: prop_types__WEBPACK_IMPORTED_MODULE_19___default.a.bool
};
Logs.defaultProps = {
  robotsData: [{
    name: "robot",
    id: "032cf6207ff34ad0a68cc45034f61b41",
    timestamp: 1604334778.6494586,
    robotState: "okay",
    battery: 78,
    ip: "127.0.0.1"
  }, {
    name: "robot_test",
    id: "4df900e30cb44adba33ae74bb2596d88",
    timestamp: 1603969723.997914,
    robotState: "off",
    battery: 22,
    ip: "127.0.0.1"
  }],
  robotStates: {
    error: "error",
    temp: "temp",
    okay: "okay",
    off: "off"
  },
  columnList: {
    Date: {
      label: "Date",
      dataKey: "time",
      width: 100,
      render: function render(time) {
        return Object(_utils_Utils__WEBPACK_IMPORTED_MODULE_16__["getJustDateFromServer"])(time);
      }
    },
    Time: {
      label: "Time",
      dataKey: "time",
      width: 100,
      render: function render(time) {
        return Object(_utils_Utils__WEBPACK_IMPORTED_MODULE_16__["getJustTimeFromServer"])(time);
      }
    },
    Level: {
      label: "Level",
      dataKey: "level",
      width: 100
    },
    Module: {
      label: "Module",
      dataKey: "module",
      width: 100
    },
    Robot: {
      label: "Robot",
      dataKey: "robot",
      width: 100
    },
    Message: {
      label: "Message",
      dataKey: "message",
      width: 100
    }
  },
  advancedMode: false
};
/* harmony default export */ __webpack_exports__["default"] = (Object(_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_14__["withStyles"])(styles, {
  withTheme: true
})(Logs));

/***/ }),

/***/ "./src/Components/Logs/LogsFilterBar/FiltersIcon/FiltersIcon.js":
/*!**********************************************************************!*\
  !*** ./src/Components/Logs/LogsFilterBar/FiltersIcon/FiltersIcon.js ***!
  \**********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "@babel/runtime/helpers/esm/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "@babel/runtime/helpers/esm/createClass");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/assertThisInitialized */ "@babel/runtime/helpers/esm/assertThisInitialized");
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "@babel/runtime/helpers/esm/inherits");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "@babel/runtime/helpers/esm/possibleConstructorReturn");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "@babel/runtime/helpers/esm/getPrototypeOf");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "@babel/runtime/helpers/esm/defineProperty");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babel/runtime/helpers/esm/extends */ "@babel/runtime/helpers/esm/extends");
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var _material_ui_core_styles__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @material-ui/core/styles */ "@material-ui/core/styles");
/* harmony import */ var _material_ui_core_styles__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var _material_ui_core_Menu__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @material-ui/core/Menu */ "@material-ui/core/Menu");
/* harmony import */ var _material_ui_core_Menu__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_Menu__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var _material_ui_core__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @material-ui/core */ "@material-ui/core");
/* harmony import */ var _material_ui_core__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core__WEBPACK_IMPORTED_MODULE_11__);
/* harmony import */ var _material_ui_core_styles_colorManipulator__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @material-ui/core/styles/colorManipulator */ "@material-ui/core/styles/colorManipulator");
/* harmony import */ var _material_ui_core_styles_colorManipulator__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_styles_colorManipulator__WEBPACK_IMPORTED_MODULE_12__);
/* harmony import */ var _material_ui_core_IconButton__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @material-ui/core/IconButton */ "@material-ui/core/IconButton");
/* harmony import */ var _material_ui_core_IconButton__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_IconButton__WEBPACK_IMPORTED_MODULE_13__);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! prop-types */ "prop-types");
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_14__);









function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5___default()(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5___default()(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4___default()(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }









var styles = function styles(theme) {
  return {
    button: {
      margin: theme.spacing(1),
      color: theme.palette.primary.main,
      borderColor: theme.palette.primary.main
    },
    iconActive: {
      color: theme.palette.primary.main,
      borderColor: theme.palette.primary.main,
      backgroundColor: Object(_material_ui_core_styles_colorManipulator__WEBPACK_IMPORTED_MODULE_12__["fade"])(theme.palette.primary.main, 0.1)
    },
    buttonApplyFilters: {
      background: theme.palette.primary.main,
      fontFamily: "Roboto",
      fontStyle: "normal",
      fontWeight: "bold",
      fontSize: "14px",
      color: "#FAFAFA",
      margin: "0px 20px 10px 20px",
      "&:hover": {
        background: theme.palette.primary.dark
      }
    },
    icon: {
      // fontSize: "18px",
      // height: "21px",
      // width: "15px",
      //color: theme.palette.primary.main,
      "&:hover": {
        cursor: "pointer"
      }
    },
    height: {
      height: "100%"
    },
    checkbox: {
      marginLeft: "10px"
    },
    limitText: {
      width: "50px",
      margin: theme.spacing(0, 3, 0, 3)
    }
  };
};

var StyledMenu = Object(_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_9__["withStyles"])(function (theme) {
  return {
    paper: {
      // border: "1px solid #F0F0F0",
      borderRadius: "8px",
      width: "242px",
      height: "411px",
      boxShadow: "2px 2px 4px rgba(0, 0, 0, 0.25)"
    }
  };
})(function (props) {
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_8___default.a.createElement(_material_ui_core_Menu__WEBPACK_IMPORTED_MODULE_10___default.a, _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_7___default()({
    elevation: 0,
    getContentAnchorEl: null,
    anchorOrigin: {
      vertical: "bottom",
      horizontal: "center"
    },
    transformOrigin: {
      vertical: "top",
      horizontal: "center"
    },
    autoFocus: false
  }, props));
});

var FilterIcon = /*#__PURE__*/function (_Component) {
  _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3___default()(FilterIcon, _Component);

  var _super = _createSuper(FilterIcon);

  function FilterIcon() {
    var _this;

    _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default()(this, FilterIcon);

    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _this = _super.call.apply(_super, [this].concat(args));

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default()(_this), "state", {
      anchorEl: null,
      otherFilters: []
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default()(_this), "handleClick", function (event) {
      _this.setState({
        anchorEl: event.currentTarget
      });
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default()(_this), "handleClose", function () {
      _this.setState({
        anchorEl: null,
        otherFilters: []
      });
    });

    return _this;
  }

  _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1___default()(FilterIcon, [{
    key: "render",
    value: function render() {
      var _this$props = this.props,
          classes = _this$props.classes,
          t = _this$props.t,
          disabled = _this$props.disabled,
          tooltip = _this$props.tooltip,
          title = _this$props.title;
      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_8___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_8___default.a.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_8___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_11__["Tooltip"], {
        title: tooltip || title
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_8___default.a.createElement(_material_ui_core_IconButton__WEBPACK_IMPORTED_MODULE_13___default.a, {
        size: "small",
        onClick: this.handleClick,
        disabled: disabled,
        className: this.props.isActive ? classes.iconActive : classes.icon
      }, this.props.icon)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_8___default.a.createElement(StyledMenu, {
        id: "customized-menu",
        anchorEl: this.state.anchorEl,
        open: Boolean(this.state.anchorEl),
        onClose: this.handleClose,
        className: classes.height
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_8___default.a.createElement("div", {
        style: {
          display: "flex",
          flexDirection: "column",
          height: "-webkit-fill-available"
        }
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_8___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_11__["Typography"], {
        component: "div",
        style: {
          padding: "10px 10px 0px 20px",
          display: "flex",
          flexDirection: "row"
        }
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_8___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_11__["Typography"], {
        component: "div",
        style: {
          fontSize: "24px",
          fontFamily: "Open Sans",
          fontWeight: 500
        }
      }, this.props.title), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_8___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_11__["Typography"], {
        component: "div",
        style: {
          flexGrow: 1
        }
      }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_8___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_11__["Typography"], {
        component: "div",
        onClick: this.handleClose,
        className: classes.icon
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_8___default.a.createElement("i", {
        className: "fas fa-times"
      }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_8___default.a.createElement("div", {
        style: {
          flexGrow: 1,
          display: "flex",
          flexDirection: "column",
          margin: "10px 0px 0px 10px"
        }
      }, this.props.children))));
    }
  }]);

  return FilterIcon;
}(react__WEBPACK_IMPORTED_MODULE_8__["Component"]);

FilterIcon.propTypes = {
  isActive: prop_types__WEBPACK_IMPORTED_MODULE_14___default.a.bool,
  disabled: prop_types__WEBPACK_IMPORTED_MODULE_14___default.a.bool,
  tooltip: prop_types__WEBPACK_IMPORTED_MODULE_14___default.a.string,
  title: prop_types__WEBPACK_IMPORTED_MODULE_14___default.a.string
};
FilterIcon.defaultProps = {
  isActive: false,
  disabled: false,
  tooltip: "",
  title: "Filters"
};
/* harmony default export */ __webpack_exports__["default"] = (Object(_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_9__["withStyles"])(styles, {
  withTheme: true
})(FilterIcon));

/***/ }),

/***/ "./src/Components/Logs/LogsFilterBar/LogsFilterBar.js":
/*!************************************************************!*\
  !*** ./src/Components/Logs/LogsFilterBar/LogsFilterBar.js ***!
  \************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/slicedToArray */ "@babel/runtime/helpers/esm/slicedToArray");
/* harmony import */ var _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _material_ui_core_InputAdornment__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @material-ui/core/InputAdornment */ "@material-ui/core/InputAdornment");
/* harmony import */ var _material_ui_core_InputAdornment__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_InputAdornment__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _material_ui_core_IconButton__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @material-ui/core/IconButton */ "@material-ui/core/IconButton");
/* harmony import */ var _material_ui_core_IconButton__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_IconButton__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _material_ui_icons_Search__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @material-ui/icons/Search */ "@material-ui/icons/Search");
/* harmony import */ var _material_ui_icons_Search__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_material_ui_icons_Search__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _material_ui_core_styles__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @material-ui/core/styles */ "@material-ui/core/styles");
/* harmony import */ var _material_ui_core_styles__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _material_ui_core__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @material-ui/core */ "@material-ui/core");
/* harmony import */ var _material_ui_core__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _material_ui_icons_Close__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @material-ui/icons/Close */ "@material-ui/icons/Close");
/* harmony import */ var _material_ui_icons_Close__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_material_ui_icons_Close__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _FiltersIcon_FiltersIcon__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./FiltersIcon/FiltersIcon */ "./src/Components/Logs/LogsFilterBar/FiltersIcon/FiltersIcon.js");
/* harmony import */ var _material_ui_icons_Label__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @material-ui/icons/Label */ "@material-ui/icons/Label");
/* harmony import */ var _material_ui_icons_Label__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(_material_ui_icons_Label__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var _material_ui_core_Chip__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @material-ui/core/Chip */ "@material-ui/core/Chip");
/* harmony import */ var _material_ui_core_Chip__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_Chip__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var _material_ui_icons_Add__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @material-ui/icons/Add */ "@material-ui/icons/Add");
/* harmony import */ var _material_ui_icons_Add__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(_material_ui_icons_Add__WEBPACK_IMPORTED_MODULE_11__);
/* harmony import */ var _material_ui_icons_Today__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @material-ui/icons/Today */ "@material-ui/icons/Today");
/* harmony import */ var _material_ui_icons_Today__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(_material_ui_icons_Today__WEBPACK_IMPORTED_MODULE_12__);
/* harmony import */ var _material_ui_core_Input__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @material-ui/core/Input */ "@material-ui/core/Input");
/* harmony import */ var _material_ui_core_Input__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_Input__WEBPACK_IMPORTED_MODULE_13__);
/* harmony import */ var _material_ui_core_MenuItem__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @material-ui/core/MenuItem */ "@material-ui/core/MenuItem");
/* harmony import */ var _material_ui_core_MenuItem__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_MenuItem__WEBPACK_IMPORTED_MODULE_14__);
/* harmony import */ var _material_ui_core_FormControl__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @material-ui/core/FormControl */ "@material-ui/core/FormControl");
/* harmony import */ var _material_ui_core_FormControl__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_FormControl__WEBPACK_IMPORTED_MODULE_15__);
/* harmony import */ var _material_ui_core_ListItemText__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @material-ui/core/ListItemText */ "@material-ui/core/ListItemText");
/* harmony import */ var _material_ui_core_ListItemText__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_ListItemText__WEBPACK_IMPORTED_MODULE_16__);
/* harmony import */ var _material_ui_core_Select__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @material-ui/core/Select */ "@material-ui/core/Select");
/* harmony import */ var _material_ui_core_Select__WEBPACK_IMPORTED_MODULE_17___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_Select__WEBPACK_IMPORTED_MODULE_17__);
/* harmony import */ var _material_ui_icons_Settings__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @material-ui/icons/Settings */ "@material-ui/icons/Settings");
/* harmony import */ var _material_ui_icons_Settings__WEBPACK_IMPORTED_MODULE_18___default = /*#__PURE__*/__webpack_require__.n(_material_ui_icons_Settings__WEBPACK_IMPORTED_MODULE_18__);
/* harmony import */ var _material_ui_core_Checkbox__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @material-ui/core/Checkbox */ "@material-ui/core/Checkbox");
/* harmony import */ var _material_ui_core_Checkbox__WEBPACK_IMPORTED_MODULE_19___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_Checkbox__WEBPACK_IMPORTED_MODULE_19__);
/* harmony import */ var _material_ui_pickers__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! @material-ui/pickers */ "@material-ui/pickers");
/* harmony import */ var _material_ui_pickers__WEBPACK_IMPORTED_MODULE_20___default = /*#__PURE__*/__webpack_require__.n(_material_ui_pickers__WEBPACK_IMPORTED_MODULE_20__);
/* harmony import */ var _date_io_date_fns__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! @date-io/date-fns */ "@date-io/date-fns");
/* harmony import */ var _date_io_date_fns__WEBPACK_IMPORTED_MODULE_21___default = /*#__PURE__*/__webpack_require__.n(_date_io_date_fns__WEBPACK_IMPORTED_MODULE_21__);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! prop-types */ "prop-types");
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_22___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_22__);
/* harmony import */ var lodash_isEqual__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! lodash/isEqual */ "lodash/isEqual");
/* harmony import */ var lodash_isEqual__WEBPACK_IMPORTED_MODULE_23___default = /*#__PURE__*/__webpack_require__.n(lodash_isEqual__WEBPACK_IMPORTED_MODULE_23__);
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! lodash/get */ "lodash/get");
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_24___default = /*#__PURE__*/__webpack_require__.n(lodash_get__WEBPACK_IMPORTED_MODULE_24__);


























var useStyles = Object(_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_5__["makeStyles"])(function (theme) {
  return {
    input: {
      flex: 1,
      paddingLeft: "10px",
      fontSize: "medium"
    },
    searchText: {
      minWidth: 150,
      paddingLeft: theme.spacing(3)
    },
    addTagText: {
      width: "100%"
    },
    limitText: {
      width: "50px",
      margin: theme.spacing(0, 3, 0, 3)
    },
    toggleContainer: {
      margin: theme.spacing(2)
    },
    tagsContainer: {
      display: "flex",
      flexDirection: "column",
      padding: theme.spacing(0.5),
      margin: theme.spacing(0, 3, 0, 3)
    },
    tagsList: {
      marginTop: theme.spacing(3)
    },
    chip: {
      margin: theme.spacing(0.5)
    },
    formControl: {
      margin: theme.spacing(1),
      minWidth: 120,
      maxWidth: 300
    },
    filtersButton: {
      display: "flex",
      flexDirection: "row"
    },
    columnsFilter: {
      display: "flex",
      flexDirection: "column",
      marginTop: 6
    },
    iconButton: {
      color: "#0B6A8A",
      "&:hover": {
        color: "#22c7ff"
      }
    }
  };
});

var LogsFilterBar = function LogsFilterBar(props) {
  var classes = useStyles();

  var _React$useState = react__WEBPACK_IMPORTED_MODULE_1___default.a.useState(""),
      _React$useState2 = _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_React$useState, 2),
      tagText = _React$useState2[0],
      setTagText = _React$useState2[1];

  var handleRobotChange = function handleRobotChange(event) {
    var _event$target;

    var arrayEvent = event === null || event === void 0 ? void 0 : (_event$target = event.target) === null || _event$target === void 0 ? void 0 : _event$target.value;
    var selectedId = arrayEvent[arrayEvent.length - 1];
    props.updateRobotSelection(selectedId);
  };

  var getRobotSelector = function getRobotSelector() {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", {
      className: classes.toggleContainer
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("svg", {
      width: "20",
      height: "18",
      viewBox: "0 0 30 27",
      fill: "none",
      xmlns: "http://www.w3.org/2000/svg",
      style: {
        paddingTop: "5px",
        paddingRight: "5px"
      }
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("path", {
      fillRule: "evenodd",
      clipRule: "evenodd",
      d: "M16.7753 1.35706L15.9587 2.61119L16.3648 2.87846L18.4001 4.18898L17.1052 6.20016H25.437C26.5487 6.20016 27.45 7.10137 27.45 8.21307V12.8244H28.0955C28.6514 12.8244 29.102 13.275 29.102 13.8308V16.0643C29.102 16.6201 28.6514 17.0707 28.0955 17.0707H27.45V21.2901C27.45 22.4018 26.5487 23.303 25.437 23.303H4.12161C3.00991 23.303 2.1087 22.4017 2.1087 21.29V17.0707H1.42467C0.868819 17.0707 0.418213 16.6201 0.418213 16.0643V13.8308C0.418213 13.275 0.868819 12.8244 1.42467 12.8244H2.1087V8.21307C2.1087 7.10137 3.00991 6.20016 4.12161 6.20016H13.5141L14.8252 4.16395L13.2875 3.15192L13.2966 3.13812L13.2875 3.1322L15.1377 0.290771L16.7753 1.35706ZM24.4306 9.21953H5.12807V20.2836H24.4306V9.21953ZM7.18098 12.1324C6.68518 12.1324 6.28325 12.5343 6.28325 13.0301C6.28325 13.5259 6.68518 13.9278 7.18098 13.9278H9.04635C9.54216 13.9278 9.94409 13.5259 9.94409 13.0301C9.94409 12.5343 9.54216 12.1324 9.04635 12.1324H7.18098ZM20.6901 12.1324C20.1943 12.1324 19.7924 12.5343 19.7924 13.0301C19.7924 13.5259 20.1943 13.9278 20.6901 13.9278H22.5555C23.0513 13.9278 23.4532 13.5259 23.4532 13.0301C23.4532 12.5343 23.0513 12.1324 22.5555 12.1324H20.6901ZM9.17669 17.6512H11.3239V19.253H9.17669V17.6512ZM14.3432 17.6513H12.196V19.253H14.3432V17.6513ZM15.2154 17.6513H17.3626V19.253H15.2154V17.6513ZM20.382 17.6513H18.2348V19.253H20.382V17.6513ZM10.9568 23.69H18.6019V25.7029C18.6019 26.2587 18.1513 26.7093 17.5954 26.7093H11.9632C11.4074 26.7093 10.9568 26.2587 10.9568 25.7029V23.69Z",
      fill: "#9E9E9E"
    })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_core_FormControl__WEBPACK_IMPORTED_MODULE_15___default.a, {
      className: classes.formControl
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_core_Select__WEBPACK_IMPORTED_MODULE_17___default.a, {
      labelId: "select-label",
      id: "select",
      multiple: true,
      value: props.selectedRobots,
      onChange: handleRobotChange,
      renderValue: function renderValue(selected) {
        var selectedNames = selected.filter(function (_ref) {
          var isSelected = _ref.isSelected;
          return isSelected;
        }).map(function (_ref2) {
          var name = _ref2.name;
          return name;
        });
        return selectedNames.length > 2 ? [selectedNames[0], selectedNames[1]].join(" , ") + "..." : selectedNames.join(" , ");
      },
      input: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_core_Input__WEBPACK_IMPORTED_MODULE_13___default.a, null),
      MenuProps: MenuProps
    }, props.selectedRobots.map(function (robot, robotIndex) {
      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_core_MenuItem__WEBPACK_IMPORTED_MODULE_14___default.a, {
        key: "robotList-".concat(robotIndex),
        value: robot.id
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_core_Checkbox__WEBPACK_IMPORTED_MODULE_19___default.a, {
        checked: robot.isSelected
      }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_core_ListItemText__WEBPACK_IMPORTED_MODULE_16___default.a, {
        primary: robot.name
      }));
    }))));
  };

  var getSearchInput = function getSearchInput() {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_6__["TextField"], {
      className: classes.searchText,
      label: "",
      placeholder: "Search (regex)",
      value: props.messageRegex,
      onChange: function onChange(evt) {
        return props.handleMessageRegex(evt.target.value);
      },
      InputProps: {
        startAdornment: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_core_InputAdornment__WEBPACK_IMPORTED_MODULE_2___default.a, {
          style: {
            paddingRight: 8
          }
        }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_icons_Search__WEBPACK_IMPORTED_MODULE_4___default.a, {
          fontSize: "small"
        })),
        endAdornment: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_core_InputAdornment__WEBPACK_IMPORTED_MODULE_2___default.a, {
          position: "end"
        }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_core_IconButton__WEBPACK_IMPORTED_MODULE_3___default.a, {
          disabled: !props.messageRegex,
          onClick: function onClick() {
            return props.handleMessageRegex("");
          }
        }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_icons_Close__WEBPACK_IMPORTED_MODULE_7___default.a, {
          color: "inherit",
          fontSize: "small"
        })))
      },
      size: "small"
    });
  };

  var getLevels = function getLevels() {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", {
      className: classes.toggleContainer
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_core_FormControl__WEBPACK_IMPORTED_MODULE_15___default.a, {
      className: classes.formControl
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_core_Select__WEBPACK_IMPORTED_MODULE_17___default.a, {
      labelId: "demo-mutiple-checkbox-label",
      id: "demo-mutiple-checkbox",
      style: {
        minWidth: "290px"
      },
      multiple: true,
      value: props.levels,
      onChange: props.handleLevels,
      input: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_core_Input__WEBPACK_IMPORTED_MODULE_13___default.a, null),
      renderValue: function renderValue(selected) {
        // selected comes from state, for example ["ERROR", "INFO"]
        // but want to show the lables, for example ["Alerts", "State of Robot"]
        var labels = props.levelsList.filter(function (level) {
          return selected.includes(level.value);
        }).map(function (elem) {
          return elem.label;
        });
        return labels.join(", ");
      },
      MenuProps: MenuProps
    }, props.levelsList.map(function (level) {
      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_core_MenuItem__WEBPACK_IMPORTED_MODULE_14___default.a, {
        key: level.value,
        value: level.value
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_core_Checkbox__WEBPACK_IMPORTED_MODULE_19___default.a, {
        checked: props.levels.indexOf(level.value) > -1
      }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_core_ListItemText__WEBPACK_IMPORTED_MODULE_16___default.a, {
        primary: level.label
      }));
    }))));
  };

  var getTags = function getTags(isAdvancedMode) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_FiltersIcon_FiltersIcon__WEBPACK_IMPORTED_MODULE_8__["default"], {
      icon: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_icons_Label__WEBPACK_IMPORTED_MODULE_9___default.a, null),
      title: "Tags",
      disabled: !isAdvancedMode,
      isActive: props.tags.length > 0
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", {
      className: classes.tagsContainer
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_6__["TextField"], {
      className: classes.addTagText,
      value: tagText,
      onChange: function onChange(evt) {
        return setTagText(evt.target.value);
      },
      onKeyUp: function onKeyUp(event) {
        // User pressed Enter
        if (event.keyCode === 13) {
          props.handleAddTag(tagText);
          setTagText("");
        }
      },
      label: "Add Tag",
      InputProps: {
        endAdornment: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_core_InputAdornment__WEBPACK_IMPORTED_MODULE_2___default.a, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_core_IconButton__WEBPACK_IMPORTED_MODULE_3___default.a, {
          onClick: function onClick() {
            props.handleAddTag(tagText);
            setTagText("");
          }
        }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_icons_Add__WEBPACK_IMPORTED_MODULE_11___default.a, null)))
      },
      size: "small"
    }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", {
      className: classes.tagsList
    }, props.tags.map(function (data) {
      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("li", {
        key: data.key
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_core_Chip__WEBPACK_IMPORTED_MODULE_10___default.a, {
        label: data.label,
        onDelete: function onDelete() {
          return props.handleDeleteTag(data);
        },
        className: classes.chip,
        size: "small"
      }));
    }))));
  };

  var getTimeFilters = function getTimeFilters() {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_FiltersIcon_FiltersIcon__WEBPACK_IMPORTED_MODULE_8__["default"], {
      icon: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_icons_Today__WEBPACK_IMPORTED_MODULE_12___default.a, null),
      title: props.t("Date Range"),
      isActive: props.selectedFromDate !== null || props.selectedToDate !== null
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_pickers__WEBPACK_IMPORTED_MODULE_20__["MuiPickersUtilsProvider"], {
      utils: _date_io_date_fns__WEBPACK_IMPORTED_MODULE_21___default.a
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_pickers__WEBPACK_IMPORTED_MODULE_20__["KeyboardDateTimePicker"], {
      key: "time-picker",
      size: "small",
      variant: "inline",
      ampm: false,
      label: props.t("From date"),
      value: props.selectedFromDate,
      onChange: function onChange(newDate) {
        return props.handleDateChange(newDate, "selectedFromDate");
      },
      onError: console.log,
      format: "yyyy/MM/dd HH:mm"
    }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_pickers__WEBPACK_IMPORTED_MODULE_20__["KeyboardDateTimePicker"], {
      key: "time-picker2",
      size: "small",
      variant: "inline",
      ampm: false,
      label: props.t("To date"),
      value: props.selectedToDate,
      onChange: function onChange(newDate) {
        return props.handleDateChange(newDate, "selectedToDate");
      },
      onError: console.log,
      format: "yyyy/MM/dd HH:mm"
    })));
  };

  var getSettings = function getSettings() {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_FiltersIcon_FiltersIcon__WEBPACK_IMPORTED_MODULE_8__["default"], {
      icon: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_icons_Settings__WEBPACK_IMPORTED_MODULE_18___default.a, null),
      title: props.t("Configuration")
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_6__["FormControlLabel"], {
      control: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_6__["Switch"], {
        checked: props.advancedMode,
        onChange: props.handleAdvancedMode
      }),
      label: props.advancedMode ? "Advanced" : "Simple"
    }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", {
      className: classes.filtersButton
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_6__["Typography"], {
      component: "div",
      style: {
        fontSize: "1rem",
        fontFamily: "Open Sans",
        fontWeight: 500
      }
    }, "".concat(props.t("Limit p/Robot"), ":")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_6__["TextField"], {
      value: props.limit,
      onChange: props.handleLimit,
      className: classes.limitText,
      id: "outlined-number" // label="limit"
      ,
      placeholder: props.t("limit"),
      type: "number",
      InputLabelProps: {
        shrink: true
      } // variant="outlined"
      ,
      size: "small"
    })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", {
      className: classes.columnsFilter
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_6__["Typography"], {
      component: "div",
      style: {
        fontSize: "1rem",
        fontFamily: "Open Sans",
        fontWeight: 500
      }
    }, "".concat(props.t("Columns"), ":")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_core_FormControl__WEBPACK_IMPORTED_MODULE_15___default.a, {
      className: classes.formControl
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_core_Select__WEBPACK_IMPORTED_MODULE_17___default.a, {
      labelId: "demo-mutiple-checkbox-label",
      id: "demo-mutiple-checkbox",
      multiple: true,
      value: props.columns,
      onChange: props.handleColumns,
      input: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_core_Input__WEBPACK_IMPORTED_MODULE_13___default.a, null),
      renderValue: function renderValue(selected) {
        return selected.map(function (elem) {
          return lodash_get__WEBPACK_IMPORTED_MODULE_24___default()(props, "columnList[".concat(elem, "].label"), "");
        }).join(", ");
      },
      MenuProps: MenuProps
    }, Object.keys(props.columnList).map(function (column, index) {
      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_core_MenuItem__WEBPACK_IMPORTED_MODULE_14___default.a, {
        key: index,
        value: column
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_core_Checkbox__WEBPACK_IMPORTED_MODULE_19___default.a, {
        checked: props.columns.indexOf(column) > -1
      }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_core_ListItemText__WEBPACK_IMPORTED_MODULE_16___default.a, {
        primary: props.columnList[column].label
      }));
    })))));
  };

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_6__["AppBar"], {
    position: "static",
    color: "inherit"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_6__["Toolbar"], {
    variant: "dense"
  }, getRobotSelector(), getSearchInput(), getLevels(), getTags(props.advancedMode), getTimeFilters(), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", {
    style: {
      flexGrow: 1
    }
  }), getSettings()));
};

var ITEM_HEIGHT = 48;
var ITEM_PADDING_TOP = 8;
var MenuProps = {
  PaperProps: {
    style: {
      maxHeight: ITEM_HEIGHT * 4.5 + ITEM_PADDING_TOP,
      width: 250
    }
  },
  getContentAnchorEl: null
};
LogsFilterBar.propTypes = {
  levels: prop_types__WEBPACK_IMPORTED_MODULE_22___default.a.array,
  levelsList: prop_types__WEBPACK_IMPORTED_MODULE_22___default.a.array,
  handleLevels: prop_types__WEBPACK_IMPORTED_MODULE_22___default.a.func,
  limit: prop_types__WEBPACK_IMPORTED_MODULE_22___default.a.number,
  handleLimit: prop_types__WEBPACK_IMPORTED_MODULE_22___default.a.func,
  columns: prop_types__WEBPACK_IMPORTED_MODULE_22___default.a.array,
  columnList: prop_types__WEBPACK_IMPORTED_MODULE_22___default.a.object,
  handleColumns: prop_types__WEBPACK_IMPORTED_MODULE_22___default.a.func,
  handleDeleteTag: prop_types__WEBPACK_IMPORTED_MODULE_22___default.a.func,
  messageRegex: prop_types__WEBPACK_IMPORTED_MODULE_22___default.a.string,
  handleMessageRegex: prop_types__WEBPACK_IMPORTED_MODULE_22___default.a.func,
  selectedFromDate: prop_types__WEBPACK_IMPORTED_MODULE_22___default.a.string,
  selectToDate: prop_types__WEBPACK_IMPORTED_MODULE_22___default.a.string,
  handleDateChange: prop_types__WEBPACK_IMPORTED_MODULE_22___default.a.func,
  selectedRobots: prop_types__WEBPACK_IMPORTED_MODULE_22___default.a.array,
  updateRobotSelection: prop_types__WEBPACK_IMPORTED_MODULE_22___default.a.func,
  advancedMode: prop_types__WEBPACK_IMPORTED_MODULE_22___default.a.bool,
  handleAdvancedMode: prop_types__WEBPACK_IMPORTED_MODULE_22___default.a.func,
  t: prop_types__WEBPACK_IMPORTED_MODULE_22___default.a.func
};
LogsFilterBar.defaultProps = {
  levels: [],
  levelsList: [],
  handleLevels: function handleLevels() {},
  limit: 1,
  handleLimit: function handleLimit() {},
  columns: [],
  columnList: {},
  handleColumns: function handleColumns() {},
  handleDeleteTag: function handleDeleteTag() {},
  messageRegex: "",
  handleMessageRegex: function handleMessageRegex() {},
  selectedFromDate: "",
  selectToDate: "",
  handleDateChange: function handleDateChange() {},
  selectedRobots: [],
  updateRobotSelection: function updateRobotSelection() {},
  advancedMode: false,
  handleAdvancedMode: function handleAdvancedMode() {},
  t: function t(string) {
    return string;
  }
}; //The function returns true when the compared props equal, preventing the component from re-rendering

function arePropsEqual(prevProps, nextProps) {
  return lodash_isEqual__WEBPACK_IMPORTED_MODULE_23___default()(prevProps, nextProps);
}

/* harmony default export */ __webpack_exports__["default"] = (/*#__PURE__*/Object(react__WEBPACK_IMPORTED_MODULE_1__["memo"])(LogsFilterBar, arePropsEqual));

/***/ }),

/***/ "./src/Components/Logs/LogsTable/LogsTable.js":
/*!****************************************************!*\
  !*** ./src/Components/Logs/LogsTable/LogsTable.js ***!
  \****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return LogsTable; });
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/extends */ "@babel/runtime/helpers/esm/extends");
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/objectWithoutProperties */ "@babel/runtime/helpers/esm/objectWithoutProperties");
/* harmony import */ var _babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "@babel/runtime/helpers/esm/defineProperty");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! prop-types */ "prop-types");
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var clsx__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! clsx */ "clsx");
/* harmony import */ var clsx__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(clsx__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _material_ui_core_styles__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @material-ui/core/styles */ "@material-ui/core/styles");
/* harmony import */ var _material_ui_core_styles__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _material_ui_core_TableCell__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @material-ui/core/TableCell */ "@material-ui/core/TableCell");
/* harmony import */ var _material_ui_core_TableCell__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_TableCell__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var react_virtualized__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! react-virtualized */ "react-virtualized");
/* harmony import */ var react_virtualized__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(react_virtualized__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var _utils_Utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../utils/Utils */ "./src/Components/Logs/utils/Utils.js");



var _excluded = ["columns", "rowHeight", "headerHeight", "onRowClick"],
    _excluded2 = ["dataKey", "render"];

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2___default()(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }








var useStyles = Object(_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_6__["makeStyles"])(function (theme) {
  return _objectSpread({
    flexContainer: {
      display: "flex",
      alignItems: "center",
      boxSizing: "border-box"
    },
    table: {
      // temporary right-to-left patch, waiting for
      // // https://github.com/bvaughn/react-virtualized/issues/454
      "& .ReactVirtualized__Table__headerRow": {
        flip: false,
        paddingRight: theme.direction === "rtl" ? "0 !important" : undefined
      }
    },
    tableRow: {
      cursor: "pointer"
    },
    tableRowHover: {
      "&:hover": {
        backgroundColor: "rgba(0, 5, 58, 0.3)"
      }
    },
    tableCell: {
      flexGrow: 1,
      whiteSpace: "nowrap",
      overflow: "hidden",
      textOverflow: "ellipsis",
      display: "inline-block"
    },
    flexColumn: {
      flex: 1,
      alignItems: "center"
    },
    noClick: {
      cursor: "initial"
    }
  }, _utils_Utils__WEBPACK_IMPORTED_MODULE_9__["colorCoding"]);
});

var MuiVirtualizedTable = function MuiVirtualizedTable(props) {
  var columns = props.columns,
      rowHeight = props.rowHeight,
      headerHeight = props.headerHeight,
      onRowClick = props.onRowClick,
      tableProps = _babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_1___default()(props, _excluded);

  var classes = useStyles();

  var getRowClassName = function getRowClassName(_ref) {
    var index = _ref.index;
    var data = props.data;
    var rowData = data[index];
    return clsx__WEBPACK_IMPORTED_MODULE_5___default()(classes.tableRow, classes.flexContainer, index !== -1 && classes[rowData.level], _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2___default()({}, classes.tableRowHover, index !== -1 && onRowClick != null));
  };

  var cellRenderer = function cellRenderer(render) {
    return function (_ref2) {
      var cellData = _ref2.cellData,
          columnIndex = _ref2.columnIndex;
      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_material_ui_core_TableCell__WEBPACK_IMPORTED_MODULE_7___default.a, {
        component: "div",
        className: "".concat(classes.tableCell, " ").concat(classes.flexContainer),
        variant: "body",
        style: {
          height: rowHeight
        },
        align: columnIndex != null && columns[columnIndex].numeric || false ? "right" : "left"
      }, render ? render(cellData) : cellData);
    };
  };

  var _headerRenderer = function headerRenderer(_ref3) {
    var label = _ref3.label,
        columnIndex = _ref3.columnIndex;
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_material_ui_core_TableCell__WEBPACK_IMPORTED_MODULE_7___default.a, {
      component: "div",
      className: clsx__WEBPACK_IMPORTED_MODULE_5___default()(classes.tableCell, classes.flexContainer, classes.noClick),
      variant: "head",
      style: {
        height: headerHeight
      },
      align: columns[columnIndex].numeric || false ? "right" : "left"
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span", null, label));
  };

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_virtualized__WEBPACK_IMPORTED_MODULE_8__["AutoSizer"], null, function (_ref4) {
    var height = _ref4.height,
        width = _ref4.width;
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_virtualized__WEBPACK_IMPORTED_MODULE_8__["Table"], _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0___default()({
      height: height,
      width: width,
      onRowClick: onRowClick,
      rowHeight: rowHeight,
      gridStyle: {
        direction: "inherit"
      },
      headerHeight: headerHeight,
      className: classes.table
    }, tableProps, {
      rowClassName: getRowClassName
    }), columns.map(function (_ref5, index) {
      var dataKey = _ref5.dataKey,
          render = _ref5.render,
          other = _babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_1___default()(_ref5, _excluded2);

      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react_virtualized__WEBPACK_IMPORTED_MODULE_8__["Column"], _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0___default()({
        key: dataKey,
        headerRenderer: function headerRenderer(headerProps) {
          return _headerRenderer(_objectSpread(_objectSpread({}, headerProps), {}, {
            columnIndex: index
          }));
        },
        flexGrow: dataKey === "message" ? 1 : undefined,
        className: classes.flexContainer,
        cellRenderer: cellRenderer(render),
        dataKey: dataKey
      }, other));
    }));
  });
}; // const VirtualizedTable = withStyles(styles)(MuiVirtualizedTable);


function LogsTable(props) {
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(MuiVirtualizedTable, {
    rowHeight: 48,
    headerHeight: 48,
    rowCount: props.logsData.length,
    rowGetter: function rowGetter(_ref6) {
      var index = _ref6.index;
      return props.logsData[index];
    },
    data: props.logsData,
    columns: props.columns.map(function (elem) {
      return props.columnList[elem];
    }),
    onRowClick: props.onRowClick
  });
}
LogsTable.propTypes = {
  columns: prop_types__WEBPACK_IMPORTED_MODULE_4___default.a.array,
  columnList: prop_types__WEBPACK_IMPORTED_MODULE_4___default.a.object,
  logsData: prop_types__WEBPACK_IMPORTED_MODULE_4___default.a.array,
  height: prop_types__WEBPACK_IMPORTED_MODULE_4___default.a.number,
  onRowClick: prop_types__WEBPACK_IMPORTED_MODULE_4___default.a.func
};
LogsTable.defaultProps = {
  columns: [],
  columnList: {},
  logsData: [],
  height: 10
};

/***/ }),

/***/ "./src/Components/Logs/utils/Utils.js":
/*!********************************************!*\
  !*** ./src/Components/Logs/utils/Utils.js ***!
  \********************************************/
/*! exports provided: colorCoding, findsUniqueKey, getRequestLevels, getRequestTags, getRequestMessage, getTimeFromServer, getJustDateFromServer, getJustTimeFromServer, formatLogsData, filterByFromToDates, addNestedName, updateRunningNodes, removeDeleteContainer, detectContainerLoop */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "colorCoding", function() { return colorCoding; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "findsUniqueKey", function() { return findsUniqueKey; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getRequestLevels", function() { return getRequestLevels; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getRequestTags", function() { return getRequestTags; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getRequestMessage", function() { return getRequestMessage; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getTimeFromServer", function() { return getTimeFromServer; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getJustDateFromServer", function() { return getJustDateFromServer; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getJustTimeFromServer", function() { return getJustTimeFromServer; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "formatLogsData", function() { return formatLogsData; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "filterByFromToDates", function() { return filterByFromToDates; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "addNestedName", function() { return addNestedName; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "updateRunningNodes", function() { return updateRunningNodes; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "removeDeleteContainer", function() { return removeDeleteContainer; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "detectContainerLoop", function() { return detectContainerLoop; });
/* harmony import */ var _babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/typeof */ "@babel/runtime/helpers/esm/typeof");
/* harmony import */ var _babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "@babel/runtime/helpers/esm/defineProperty");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var lodash_isEmpty__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! lodash/isEmpty */ "lodash/isEmpty");
/* harmony import */ var lodash_isEmpty__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(lodash_isEmpty__WEBPACK_IMPORTED_MODULE_3__);



function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }


 // export const levels = [
//   { value: "INFO", label: i18n.t("Robot Status") },
//   // { value: "WARNING", label: "Warnings" },
//   // { value: "DEBUG", label: "Debug" },
//   { value: "ERROR", label: i18n.t("Alerts") }
//   // { value: "CRITICAL", label: "Critical" }
// ];

var colorCoding = {
  INFO: {
    backgroundColor: "rgba(33, 150, 243, 0.1)"
  },
  WARNING: {
    backgroundColor: "rgba(255, 152, 0, 0.1)"
  },
  DEBUG: {
    backgroundColor: "rgba(76, 175, 80, 0.1)"
  },
  ERROR: {
    backgroundColor: "rgba(244, 67, 54, 0.1)"
  },
  CRITICAL: {
    backgroundColor: "rgba(255, 19, 1, 0.1)"
  }
}; // export const fixedColumns = {
//   Date: {
//     label: i18n.t("Date"),
//     dataKey: "time",
//     width: 100,
//     render: time => getJustDateFromServer(time)
//   },
//   Time: {
//     label: i18n.t("Time"),
//     dataKey: "time",
//     render: time => getJustTimeFromServer(time),
//     width: 100
//   },
//   Level: {
//     label: i18n.t("Level"),
//     dataKey: "level",
//     width: 100
//   },
//   Module: {
//     label: i18n.t("Module"),
//     dataKey: "module",
//     width: 100
//   },
//   Function: {
//     label: "Function",
//     dataKey: "funcName",
//     width: 100
//   },
//   Callback: {
//     label: i18n.t("Callback"),
//     dataKey: "callback",
//     width: 100
//   },
//   Node: {
//     label: i18n.t("Node"),
//     dataKey: "node",
//     width: 100
//   },
//   Fleet: {
//     label: i18n.t("Fleet"),
//     dataKey: "fleet",
//     width: 100
//   },
//   Robot: {
//     label: i18n.t("Robot"),
//     dataKey: "robot",
//     width: 100
//   },
//   Message: {
//     label: i18n.t("Message"),
//     dataKey: "message",
//     width: 100
//   }
// };
// Makes sure to find unique "i" of chip array
// Input: [{key: 0, label: "Chip1"}, {key: 2, label: "Chip3"}], keyName= "key"
// Output: 1

function findsUniqueKey(array, keyName) {
  var length = array.length; // If empty, return 0

  if (length === 0 || array === undefined) {
    return 0;
  }

  for (var k = 0; k < length; k++) {
    for (var j = 0; j < length; j++) {
      if (k === array[j][keyName]) {
        break;
      }

      if (j === length - 1) {
        return k;
      }
    }
  }

  return length;
} // Converts the levels in the state for the string for the request
//  Input: ["INFO", "DEBUG"]
//  Output: "level=info,debug"

function getRequestLevels(levelsArray, levelsList) {
  var res = "";

  if (Array.isArray(levelsArray) && levelsArray.length === levelsList.length) {
    return res;
  }

  try {
    levelsArray.forEach(function (level) {
      if (res === "") {
        res = "".concat(level.toLowerCase());
      } else {
        res = "".concat(res, ",").concat(level.toLowerCase());
      }
    });
    return "level=".concat(res);
  } catch (error) {
    return "";
  }
} // Converts the levels in the state for the string for the request
//  Input: [{ key: 0, label: "UI" }, { key: 1, label: "TASKS" }]
//  Output: "&tags=UI,TASKS"

function getRequestTags(tagsArray) {
  var res = "";

  if (lodash_isEmpty__WEBPACK_IMPORTED_MODULE_3___default()(tagsArray)) {
    return res;
  }

  tagsArray.forEach(function (tag) {
    if (res === "") {
      res = "".concat(tag.label);
    } else {
      res = "".concat(res, ",").concat(tag.label);
    }
  });
  return "&tags=".concat(res);
} // Converts the levels in the state for the string for the request
//  Input: "r'started\.$"
//  Output: "&message=r'started\.$"

function getRequestMessage(message) {
  if (!message || message === "") {
    return "";
  } // Parse message to URL and return


  var parsedMessageToUrl = message.replace(/ /g, "+");
  return "&message=".concat(parsedMessageToUrl);
} // Convert Date format to a human readable format
// Input: 1586370146
// Output: "08/04/2020 19:22:26"

var getTimeFromServer = function getTimeFromServer(serverTime) {
  var time = new Date(serverTime * 1000);
  return "".concat(time.toLocaleString("pt"));
}; // Convert Date format to a human readable format
// Input: 1586370146
// Output: "08/04/2020"

var getJustDateFromServer = function getJustDateFromServer(serverTime) {
  var time = new Date(serverTime * 1000);
  return "".concat(time.toLocaleDateString("pt"));
}; // Convert Date format to a human readable format
// Input: 1586370146
// Output: "19:22:26"

var getJustTimeFromServer = function getJustTimeFromServer(serverTime) {
  var time = new Date(serverTime * 1000);
  return "".concat(time.toLocaleTimeString("pt"));
}; // Convert array of object to array of strings for LogList
// Input:
// [
//   {
//     time: 1586370146,
//     level: "INFO",
//     message: "UI Tag Log Test: 12"
//   },
//   {
//     time: 1586370147,
//     level: "INFO",
//     message: "UI Tag Log Test: 13"
//   }
// ];
// Output
// [
//   "[08/04/2020 19:22:26] [INFO] : UI Tag Log Test: 12",
//   "[08/04/2020 19:21:31] [INFO] : UI Tag Log Test: 56"
// ];

var formatLogsData = function formatLogsData(data) {
  return data.map(function (elem) {
    return elem.stdout;
  } // `[${getTimeFromServer(elem.time)}] [${elem.level}] : ${elem.message}`
  );
};

function binaryIndexOf(data, criteria) {
  var minIndex = 0;
  var maxIndex = data.length - 1;
  var currentIndex;
  var currentElement;
  var result = null;

  while (minIndex <= maxIndex) {
    currentIndex = (minIndex + maxIndex) / 2 | 0;
    currentElement = data[currentIndex];
    var comparison = criteria(currentElement);

    if (comparison[0] === "right") {
      minIndex = currentIndex + 1;
    } else {
      maxIndex = currentIndex - 1;
    }

    if (comparison[1]) {
      result = currentIndex;
    }
  }

  return result;
}

var filterByFromToDates = function filterByFromToDates(logsData, fromDate, toDate) {
  // If there is a problem fetching the logs, show nothing
  if (!logsData) {
    return [];
  }

  var lowerIndex = 0;
  var upperIndex = logsData.length; // If nothing is selected, do nothing

  if (!fromDate && !toDate) {
    return logsData;
  } // List of time format. Array is sorted in descending order (Newer -> Older)


  var dateList = logsData.map(function (log) {
    return log.time;
  });

  if (toDate) {
    // First log that is <= toDate (first index that fits criteria)
    lowerIndex = binaryIndexOf(dateList, function (value) {
      return value >= toDate.getTime() / 1000 ? ["right", false] : ["left", true];
    });
  }

  if (fromDate) {
    // First log that is >= fromDate (last index that still fits criteria)
    upperIndex = binaryIndexOf(dateList, function (value) {
      return value <= fromDate.getTime() / 1000 ? ["left", false] : ["right", true];
    });
  }

  return logsData.slice(lowerIndex, upperIndex + 1);
}; // This function is to get the same string as the one you get in
// Robot:Status nodes_lchd and persistent_nodes_lchd

var addNestedName = function addNestedName(nestedName, newName) {
  if (nestedName === "") {
    return newName;
  } else {
    return "".concat(nestedName, "__").concat(newName);
  }
}; // Will update according with the list of running nodes all the nodes to running or stopped

var updateRunningNodes = function updateRunningNodes(treeList, runningNodesList) {
  return treeList.map(function (elem) {
    // Only update the status of nodes, not containers
    if (elem.status) {
      if (runningNodesList.includes(elem.nestedName)) {
        return _objectSpread(_objectSpread({}, elem), {}, {
          status: "running"
        });
      } else {
        return _objectSpread(_objectSpread({}, elem), {}, {
          status: "stopped"
        });
      }
    } else {
      return elem;
    }
  });
}; // This will remove the deleted container from the treeList and its respective children

var removeDeleteContainer = function removeDeleteContainer(treeList, id) {
  // Get the id of the Container to remove
  var deleteIndex = treeList.findIndex(function (elem) {
    return elem.id === id;
  });
  treeList.splice(deleteIndex, 1); // Remove children: find all children with parentId that is the id

  for (var i = 0; i < treeList.length; i++) {
    if (treeList[i].parentId === id) {
      removeDeleteContainer(treeList, treeList[i].id);
    }
  }
}; // Detects if there are loops within nested containers
// Returns true if it finds a loop, false otherwise

var detectContainerLoop = function detectContainerLoop(treeList, parentId, flowId) {
  // If first level there are no loops
  if (parentId === 0) {
    return false;
  } // index of container to add


  var flowIndex = treeList.findIndex(function (elem) {
    return elem.id === parentId;
  });
  var currentFlow = treeList[flowIndex]; // Stop when reaches the root of the tree

  var _loop = function _loop() {
    // get the parentId of the current container
    var parentId = currentFlow.parentId; // get the index of that parent in the array

    flowIndex = treeList.findIndex(function (elem) {
      return elem.id === parentId;
    });
    currentFlow = treeList[flowIndex];

    if (currentFlow.flowId === flowId) {
      console.error("Found Flow Loop :0");
      return {
        v: true
      };
    }
  };

  while (currentFlow.parentId) {
    var _ret = _loop();

    if (_babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_0___default()(_ret) === "object") return _ret.v;
  }

  return false;
};

/***/ }),

/***/ "./src/Components/Modal/AbstractModal.js":
/*!***********************************************!*\
  !*** ./src/Components/Modal/AbstractModal.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "@babel/runtime/helpers/esm/defineProperty");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! prop-types */ "prop-types");
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _material_ui_icons_Close__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @material-ui/icons/Close */ "@material-ui/icons/Close");
/* harmony import */ var _material_ui_icons_Close__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_material_ui_icons_Close__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _material_ui_core_styles__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @material-ui/core/styles */ "@material-ui/core/styles");
/* harmony import */ var _material_ui_core_styles__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var lodash_debounce__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! lodash/debounce */ "lodash/debounce");
/* harmony import */ var lodash_debounce__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(lodash_debounce__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _material_ui_core__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @material-ui/core */ "@material-ui/core");
/* harmony import */ var _material_ui_core__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _i18n_i18n_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../i18n/i18n.js */ "./src/i18n/i18n.js");


function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }








var useStyles = Object(_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_4__["makeStyles"])(function (theme) {
  return {
    card: {
      margin: "auto",
      position: "absolute",
      overflow: "auto",
      display: "flex",
      flexDirection: "column",
      maxHeight: "98%"
    },
    closeButton: {
      cursor: "pointer",
      position: "absolute",
      color: theme.textColor,
      top: 15,
      right: 15,
      "&:hover": {
        color: "gray"
      }
    }
  };
});

var AbstractModal = function AbstractModal(props) {
  var classes = useStyles();

  var debounceSubmit = lodash_debounce__WEBPACK_IMPORTED_MODULE_5___default()(function () {
    props.onSubmit();
  }, 50);

  var onKeyPress = function onKeyPress(e) {
    if (e.key === "Enter") {
      submit();
    }
  };

  var submit = function submit() {
    debounceSubmit();
  };

  var cancel = function cancel() {
    props.onCancel();
  };

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_6__["Modal"], {
    onKeyPress: onKeyPress,
    open: props.open,
    onClose: cancel,
    style: {
      display: "flex",
      alignItems: "center",
      justifyContent: "center"
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_6__["Card"], {
    className: classes.card,
    style: _objectSpread(_objectSpread({}, props.style), {}, {
      minWidth: props.width,
      minHeight: props.height
    })
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_6__["CardContent"], {
    style: {
      flexGrow: 1,
      maxHeight: "calc(100% - 70px)",
      overflowY: "auto"
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_6__["Typography"], {
    variant: "h5"
  }, props.title), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_6__["Typography"], {
    component: "div",
    className: classes.closeButton,
    onClick: function onClick() {
      return props.onCancel();
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_icons_Close__WEBPACK_IMPORTED_MODULE_3___default.a, null)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_6__["Divider"], {
    style: {
      marginBottom: "12px"
    }
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", {
    style: {
      maxHeight: "calc(100% - 35px)",
      overflowY: "auto",
      paddingTop: 5
    }
  }, props.children)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_6__["Divider"], null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_6__["CardActions"], null, props.hasSubmitButton && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_6__["Button"], {
    color: props.submitColor,
    onClick: submit
  }, "".concat(_i18n_i18n_js__WEBPACK_IMPORTED_MODULE_7__["default"].t(props.submitText))), props.hasCancelButton && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_6__["Button"], {
    onClick: cancel,
    color: props.cancelColor
  }, "".concat(_i18n_i18n_js__WEBPACK_IMPORTED_MODULE_7__["default"].t(props.cancelText))))));
};

AbstractModal.propTypes = {
  onSubmit: prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.func,
  onCancel: prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.func,
  open: prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.bool,
  title: prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.string,
  submitText: prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.string,
  submitColor: prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.string,
  cancelText: prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.string,
  cancelColor: prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.string,
  width: prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.string,
  height: prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.string,
  style: prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.object,
  hasSubmitButton: prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.bool,
  hasCancelButton: prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.bool
};
AbstractModal.defaultProps = {
  onSubmit: function onSubmit() {},
  onCancel: function onCancel() {},
  open: false,
  title: "New",
  submitText: "Confirm",
  submitColor: "primary",
  cancelText: "Cancel",
  cancelColor: "secondary",
  width: "25%",
  height: "25%",
  style: {},
  hasSubmitButton: true,
  hasCancelButton: true
};
/* harmony default export */ __webpack_exports__["default"] = (AbstractModal);

/***/ }),

/***/ "./src/Components/Modal/ConfirmAlertModal.js":
/*!***************************************************!*\
  !*** ./src/Components/Modal/ConfirmAlertModal.js ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! prop-types */ "prop-types");
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _AbstractModal__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./AbstractModal */ "./src/Components/Modal/AbstractModal.js");




var ConfirmAlertModal = function ConfirmAlertModal(props) {
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AbstractModal__WEBPACK_IMPORTED_MODULE_2__["default"], {
    onSubmit: props.onSubmit,
    onCancel: props.onCancel,
    open: props.open,
    title: props.title,
    submitText: props.submitText,
    submitColor: props.submitColor,
    cancelText: props.cancelText,
    cancelColor: props.cancelColor
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", null, props.message), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", null, props.children));
};

ConfirmAlertModal.propTypes = {
  title: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string,
  message: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string,
  onSubmit: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.func,
  onCancel: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.func,
  open: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.bool,
  submitText: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string,
  submitColor: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string,
  cancelText: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string,
  cancelColor: prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string
};
ConfirmAlertModal.defaultProps = {
  title: "Insert Text here",
  message: "Are you sure?",
  onSubmit: function onSubmit() {},
  onCancel: function onCancel() {},
  open: false,
  submitText: "Delete",
  submitColor: "secondary",
  cancelText: "Cancel",
  cancelColor: "primary"
};
/* harmony default export */ __webpack_exports__["default"] = (ConfirmAlertModal);

/***/ }),

/***/ "./src/Components/Modal/RobotLogModal.js":
/*!***********************************************!*\
  !*** ./src/Components/Modal/RobotLogModal.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "@babel/runtime/helpers/esm/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "@babel/runtime/helpers/esm/createClass");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/assertThisInitialized */ "@babel/runtime/helpers/esm/assertThisInitialized");
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "@babel/runtime/helpers/esm/inherits");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "@babel/runtime/helpers/esm/possibleConstructorReturn");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "@babel/runtime/helpers/esm/getPrototypeOf");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "@babel/runtime/helpers/esm/defineProperty");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! prop-types */ "prop-types");
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var _material_ui_core_List__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @material-ui/core/List */ "@material-ui/core/List");
/* harmony import */ var _material_ui_core_List__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_List__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var _material_ui_core_Avatar__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @material-ui/core/Avatar */ "@material-ui/core/Avatar");
/* harmony import */ var _material_ui_core_Avatar__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_Avatar__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var _material_ui_core_Divider__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @material-ui/core/Divider */ "@material-ui/core/Divider");
/* harmony import */ var _material_ui_core_Divider__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_Divider__WEBPACK_IMPORTED_MODULE_11__);
/* harmony import */ var _material_ui_core_Typography__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @material-ui/core/Typography */ "@material-ui/core/Typography");
/* harmony import */ var _material_ui_core_Typography__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_Typography__WEBPACK_IMPORTED_MODULE_12__);
/* harmony import */ var _material_ui_core__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @material-ui/core */ "@material-ui/core");
/* harmony import */ var _material_ui_core__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core__WEBPACK_IMPORTED_MODULE_13__);
/* harmony import */ var _material_ui_core_styles__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @material-ui/core/styles */ "@material-ui/core/styles");
/* harmony import */ var _material_ui_core_styles__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_14__);
/* harmony import */ var _material_ui_icons_Schedule__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @material-ui/icons/Schedule */ "@material-ui/icons/Schedule");
/* harmony import */ var _material_ui_icons_Schedule__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(_material_ui_icons_Schedule__WEBPACK_IMPORTED_MODULE_15__);
/* harmony import */ var _material_ui_icons_Warning__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @material-ui/icons/Warning */ "@material-ui/icons/Warning");
/* harmony import */ var _material_ui_icons_Warning__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(_material_ui_icons_Warning__WEBPACK_IMPORTED_MODULE_16__);
/* harmony import */ var _material_ui_icons_ViewModule__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @material-ui/icons/ViewModule */ "@material-ui/icons/ViewModule");
/* harmony import */ var _material_ui_icons_ViewModule__WEBPACK_IMPORTED_MODULE_17___default = /*#__PURE__*/__webpack_require__.n(_material_ui_icons_ViewModule__WEBPACK_IMPORTED_MODULE_17__);
/* harmony import */ var _material_ui_icons_Chat__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @material-ui/icons/Chat */ "@material-ui/icons/Chat");
/* harmony import */ var _material_ui_icons_Chat__WEBPACK_IMPORTED_MODULE_18___default = /*#__PURE__*/__webpack_require__.n(_material_ui_icons_Chat__WEBPACK_IMPORTED_MODULE_18__);
/* harmony import */ var mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! mov-fe-lib-core */ "mov-fe-lib-core");
/* harmony import */ var mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_19___default = /*#__PURE__*/__webpack_require__.n(mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_19__);
/* harmony import */ var _AbstractModal__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./AbstractModal */ "./src/Components/Modal/AbstractModal.js");








function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5___default()(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5___default()(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4___default()(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }
















var styles = function styles(theme) {
  return {
    breakWord: {
      wordBreak: "break-all"
    }
  };
};

var RobotLogModal = /*#__PURE__*/function (_Component) {
  _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3___default()(RobotLogModal, _Component);

  var _super = _createSuper(RobotLogModal);

  function RobotLogModal() {
    var _this;

    _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default()(this, RobotLogModal);

    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _this = _super.call.apply(_super, [this].concat(args));

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default()(_this), "state", {
      data: {},
      open: false,
      hasButton: false
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default()(_this), "open", function (alert) {
      var data = _this.state.data; // Format time

      var time = new Date(alert.time * 1000);
      var alertButton = alert.button ? JSON.parse(alert.button.replace(/'/g, '"')) : null;
      data.time = "".concat(time.toLocaleTimeString("pt"));
      data.action = alert.action;
      data.message = alert.message;
      data.robot = alert.robot;
      data.service = alert.service;
      data.module = alert.module;

      if (alertButton) {
        data.buttonText = alertButton.label;
        data.buttonAction = _this.getRobotAlertAction(alertButton);
      } // Update state variables


      _this.setState({
        data: data,
        open: true,
        hasButton: !!alertButton
      });
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default()(_this), "getRobotAlertAction", function (_ref) {
      var callback = _ref.callback,
          data = _ref.data;

      // Trigger callback to clear log
      if (callback) {
        return function () {
          mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_19__["MasterDB"].cloudFunction(callback, "", data, function (res) {
            _this.setState({
              open: false
            });
          });
        };
      } // Default case (just close modal)
      else {
        return function () {
          return _this.setState({
            open: false
          });
        };
      }
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default()(_this), "renderAlertInfo", function () {
      var data = _this.state.data;
      var _this$props = _this.props,
          props = _this$props.props,
          classes = _this$props.classes;
      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core_Typography__WEBPACK_IMPORTED_MODULE_12___default.a, {
        component: "div"
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core_List__WEBPACK_IMPORTED_MODULE_9___default.a, {
        style: {
          width: "100%"
        }
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_13__["ListItem"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_13__["ListItemAvatar"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core_Avatar__WEBPACK_IMPORTED_MODULE_10___default.a, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("i", {
        className: "fas fa-robot"
      }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_13__["ListItemText"], {
        primary: data.robot
      })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core_Divider__WEBPACK_IMPORTED_MODULE_11___default.a, {
        variant: "inset",
        component: "li"
      }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_13__["ListItem"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_13__["ListItemAvatar"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core_Avatar__WEBPACK_IMPORTED_MODULE_10___default.a, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_icons_Schedule__WEBPACK_IMPORTED_MODULE_15___default.a, null))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_13__["ListItemText"], {
        primary: data.time
      })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core_Divider__WEBPACK_IMPORTED_MODULE_11___default.a, {
        variant: "inset",
        component: "li"
      }), props.includes("service") && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_13__["ListItem"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_13__["ListItemAvatar"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core_Avatar__WEBPACK_IMPORTED_MODULE_10___default.a, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_icons_Warning__WEBPACK_IMPORTED_MODULE_16___default.a, null))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_13__["ListItemText"], {
        primary: data.service,
        className: classes.breakWord
      })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core_Divider__WEBPACK_IMPORTED_MODULE_11___default.a, {
        variant: "inset",
        component: "li"
      })), props.includes("module") && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_13__["ListItem"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_13__["ListItemAvatar"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core_Avatar__WEBPACK_IMPORTED_MODULE_10___default.a, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_icons_ViewModule__WEBPACK_IMPORTED_MODULE_17___default.a, null))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_13__["ListItemText"], {
        primary: data.module,
        className: classes.breakWord
      })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core_Divider__WEBPACK_IMPORTED_MODULE_11___default.a, {
        variant: "inset",
        component: "li"
      })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_13__["ListItem"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_13__["ListItemAvatar"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core_Avatar__WEBPACK_IMPORTED_MODULE_10___default.a, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_icons_Chat__WEBPACK_IMPORTED_MODULE_18___default.a, null))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_13__["ListItemText"], {
        primary: data.message,
        className: classes.breakWord
      }))), data.action && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core_Divider__WEBPACK_IMPORTED_MODULE_11___default.a, null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core_List__WEBPACK_IMPORTED_MODULE_9___default.a, {
        style: {
          width: "100%"
        }
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_13__["ListItem"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_13__["ListItemText"], {
        primary: data.action,
        className: classes.breakWord
      })))));
    });

    return _this;
  }

  _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1___default()(RobotLogModal, [{
    key: "render",
    value: function render() {
      var _this2 = this;

      var _this$state = this.state,
          data = _this$state.data,
          open = _this$state.open,
          hasButton = _this$state.hasButton;
      var title = this.props.title;
      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_AbstractModal__WEBPACK_IMPORTED_MODULE_20__["default"], {
        open: open,
        title: title,
        style: {
          maxWidth: 500
        },
        onCancel: function onCancel() {
          return _this2.setState({
            open: false
          });
        },
        onSubmit: data.buttonAction,
        submitText: data.buttonText,
        submitColor: "primary",
        hasSubmitButton: hasButton,
        hasCancelButton: false
      }, this.renderAlertInfo());
    }
  }]);

  return RobotLogModal;
}(react__WEBPACK_IMPORTED_MODULE_7__["Component"]);

RobotLogModal.propTypes = {
  title: prop_types__WEBPACK_IMPORTED_MODULE_8___default.a.string,
  props: prop_types__WEBPACK_IMPORTED_MODULE_8___default.a.array
};
RobotLogModal.defaultProps = {
  title: "Log Details",
  props: []
};
/* harmony default export */ __webpack_exports__["default"] = (Object(_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_14__["withStyles"])(styles, {
  withTheme: true
})(RobotLogModal));

/***/ }),

/***/ "./src/Components/Modal/SelectScopeModal.js":
/*!**************************************************!*\
  !*** ./src/Components/Modal/SelectScopeModal.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/slicedToArray */ "@babel/runtime/helpers/esm/slicedToArray");
/* harmony import */ var _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! prop-types */ "prop-types");
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var lodash_set__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! lodash/set */ "lodash/set");
/* harmony import */ var lodash_set__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(lodash_set__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! lodash/get */ "lodash/get");
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(lodash_get__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! lodash/cloneDeep */ "lodash/cloneDeep");
/* harmony import */ var lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _material_ui_core__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @material-ui/core */ "@material-ui/core");
/* harmony import */ var _material_ui_core__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! mov-fe-lib-core */ "mov-fe-lib-core");
/* harmony import */ var mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _Tree_BasicVirtualizedTree__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../Tree/BasicVirtualizedTree */ "./src/Components/Tree/BasicVirtualizedTree.js");
/* harmony import */ var _AbstractModal__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./AbstractModal */ "./src/Components/Modal/AbstractModal.js");
/* harmony import */ var _material_ui_core_Backdrop__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @material-ui/core/Backdrop */ "@material-ui/core/Backdrop");
/* harmony import */ var _material_ui_core_Backdrop__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_Backdrop__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var _material_ui_core_CircularProgress__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @material-ui/core/CircularProgress */ "@material-ui/core/CircularProgress");
/* harmony import */ var _material_ui_core_CircularProgress__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_CircularProgress__WEBPACK_IMPORTED_MODULE_11__);
/* harmony import */ var _i18n_i18n_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../i18n/i18n.js */ "./src/i18n/i18n.js");












 //========================================================================================

/*                                                                                      *
 *                                    TEMPORARY CODE                                    *
 *                                                                                      */
//========================================================================================

var SelectScopeModal = function SelectScopeModal(props) {
  var initialData = [{
    id: 0,
    name: _i18n_i18n_js__WEBPACK_IMPORTED_MODULE_12__["default"].t("Annotations"),
    scope: "Annotation",
    children: []
  }, {
    id: 1,
    name: _i18n_i18n_js__WEBPACK_IMPORTED_MODULE_12__["default"].t("Callback"),
    scope: "Callback",
    children: []
  }, {
    id: 2,
    name: _i18n_i18n_js__WEBPACK_IMPORTED_MODULE_12__["default"].t("Configuration"),
    scope: "Configuration",
    children: []
  }, {
    id: 3,
    name: _i18n_i18n_js__WEBPACK_IMPORTED_MODULE_12__["default"].t("Flow"),
    scope: "Flow",
    children: []
  }, {
    id: 4,
    name: _i18n_i18n_js__WEBPACK_IMPORTED_MODULE_12__["default"].t("Nodes"),
    scope: "Node",
    children: []
  }, {
    id: 5,
    name: _i18n_i18n_js__WEBPACK_IMPORTED_MODULE_12__["default"].t("Layouts"),
    scope: "Layout",
    children: []
  }, {
    id: 6,
    name: _i18n_i18n_js__WEBPACK_IMPORTED_MODULE_12__["default"].t("Scenes"),
    scope: "GraphicScene",
    children: []
  }];

  var _React$useState = react__WEBPACK_IMPORTED_MODULE_1___default.a.useState(initialData),
      _React$useState2 = _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_React$useState, 2),
      data = _React$useState2[0],
      setData = _React$useState2[1];

  var _React$useState3 = react__WEBPACK_IMPORTED_MODULE_1___default.a.useState("global"),
      _React$useState4 = _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_React$useState3, 2),
      selectedWorkspace = _React$useState4[0],
      setSelectedWorkspace = _React$useState4[1];

  var _React$useState5 = react__WEBPACK_IMPORTED_MODULE_1___default.a.useState(props.selected),
      _React$useState6 = _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_React$useState5, 2),
      selectedScopeItem = _React$useState6[0],
      setSelectedScopeItem = _React$useState6[1];

  var _React$useState7 = react__WEBPACK_IMPORTED_MODULE_1___default.a.useState({}),
      _React$useState8 = _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_React$useState7, 2),
      workSpaceList = _React$useState8[0],
      setWorkSpaceList = _React$useState8[1];

  var _React$useState9 = react__WEBPACK_IMPORTED_MODULE_1___default.a.useState(true),
      _React$useState10 = _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_React$useState9, 2),
      isLoading = _React$useState10[0],
      setIsLoading = _React$useState10[1];

  var scopeFilteredData = initialData.filter(function (elem) {
    return props.scopeList.includes(elem.scope);
  });
  /* eslint-disable react-hooks/exhaustive-deps */

  react__WEBPACK_IMPORTED_MODULE_1___default.a.useEffect(function () {
    //get list of workspace
    mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_7__["Workspace"].getAll().then(function (response) {
      return setWorkSpaceList(response);
    })["catch"](function (error) {
      return console.log(error);
    }); // get all information in the scopes (not filtered by message)

    getAllData(selectedWorkspace); //Unmount

    return function () {};
  }, [props.scopeList]); // Filter Results based on props.filter

  react__WEBPACK_IMPORTED_MODULE_1___default.a.useEffect(function () {
    if (isLoading || selectedWorkspace !== "global" || !props.filter) return;

    var filteredData = lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_5___default()(data);

    data.forEach(function (scope, index) {
      filteredData[index].children = scope.children.filter(props.filter);
    }); // Set filtered data

    setData(filteredData);
  }, [props.filter, isLoading]);
  /* eslint-enable react-hooks/exhaustive-deps */

  var changeWorkspace = function changeWorkspace(evt) {
    // Update the selector
    setSelectedWorkspace(evt.target.value); // When you switch workspaces reset Data

    getAllData(evt.target.value);
    setIsLoading(true);
  };

  var getAllData = function getAllData(workspace) {
    var dataToSet = lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_5___default()(scopeFilteredData);

    dataToSet.forEach(function (element, index) {
      // Get all scope items
      mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_7__["Workspace"].getDocs({
        workspace: workspace,
        scope: element.scope
      }).then(function (response) {
        var sortedScopeItems = response.scopes.sort(function (a, b) {
          return a.ref.localeCompare(b.ref);
        }).map(function (elem, i) {
          return {
            id: i,
            url: elem.url,
            name: elem.ref,
            children: [{
              name: ""
            }]
          };
        });
        dataToSet[index].children = sortedScopeItems;
        setData(dataToSet);
        setIsLoading(false);
      })["catch"](function (error) {
        return console.error(error);
      });
    });
  };

  var requestScopeVersions = function requestScopeVersions(node) {
    var dataToSet = lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_5___default()(data);

    var mapObj = {
      0: function _() {
        var indexToSet = dataToSet.findIndex(function (elem) {
          return elem.id === node.id;
        }); // Toggle the expansion of the panel

        var isExpanded = lodash_get__WEBPACK_IMPORTED_MODULE_4___default()(dataToSet, [indexToSet, "state", "expanded"], false);

        lodash_set__WEBPACK_IMPORTED_MODULE_3___default()(dataToSet, [indexToSet, "state"], {
          expanded: !isExpanded
        });

        setData(dataToSet);
      },
      1: function _() {
        // second level, ask for versions (versions of scope items)
        // find index of selected node in first level
        var indexToSet = dataToSet.findIndex(function (elem) {
          return elem.id === node.parents[0];
        });
        mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_7__["Workspace"].getDocs({
          workspace: selectedWorkspace,
          scope: dataToSet[indexToSet].scope,
          id: node.name
        }).then(function (response) {
          // Tailor data Data comes with "ref" key but we want "name"
          var versionList = response.versions.map(function (elem, index) {
            return {
              url: elem.url,
              name: elem.tag,
              id: index
            };
          }); // find index of selected node in the second level

          var index2ndLevel = dataToSet[indexToSet].children.findIndex(function (elem) {
            return elem.id === node.id;
          }); // Toggle the expansion of the panel

          var isExpanded = lodash_get__WEBPACK_IMPORTED_MODULE_4___default()(dataToSet, [indexToSet, "children", index2ndLevel, "state", "expanded"], false);

          lodash_set__WEBPACK_IMPORTED_MODULE_3___default()(dataToSet, [indexToSet, "children", index2ndLevel, "state"], {
            expanded: !isExpanded
          }); // Set version list into the Tree


          lodash_set__WEBPACK_IMPORTED_MODULE_3___default()(dataToSet, [indexToSet, "children", index2ndLevel, "children"], versionList);

          setData(dataToSet);
        })["catch"](function (error) {
          return console.error(error);
        });
      },
      2: function _() {
        // Display the selected option
        setSelectedScopeItem("".concat(node.url));
      }
    };

    lodash_get__WEBPACK_IMPORTED_MODULE_4___default()(mapObj, node.deepness, function () {})();
  };

  var confirmNodeSelection = function confirmNodeSelection(node) {
    // Display the selected option and confirm selection
    if (selectedWorkspace !== "global" && node.deepness <= 1) return;
    setSelectedScopeItem(node.url);
    props.onSubmit(node.url);
  };

  var getModalTitle = function getModalTitle(scope) {
    var vowels = ["a", "e", "i", "o", "u"];
    var pronoun = vowels.includes(scope[0].toLowerCase()) ? _i18n_i18n_js__WEBPACK_IMPORTED_MODULE_12__["default"].t("an") : _i18n_i18n_js__WEBPACK_IMPORTED_MODULE_12__["default"].t("a");
    return "".concat(_i18n_i18n_js__WEBPACK_IMPORTED_MODULE_12__["default"].t("Select"), " ").concat(pronoun, " ").concat(_i18n_i18n_js__WEBPACK_IMPORTED_MODULE_12__["default"].t(scope));
  };

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_AbstractModal__WEBPACK_IMPORTED_MODULE_9__["default"], {
    onSubmit: function onSubmit() {
      return props.onSubmit(selectedScopeItem);
    },
    onCancel: props.onCancel,
    open: props.open,
    title: getModalTitle(props.scopeList[0]),
    width: "50%"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_6__["Grid"], {
    container: true
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_6__["Grid"], {
    item: true,
    xs: 12,
    style: {
      textAlign: "center",
      paddingBottom: "6px",
      paddingTop: "10px"
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_6__["FormControl"], {
    style: {
      width: "50%"
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_6__["InputLabel"], null, _i18n_i18n_js__WEBPACK_IMPORTED_MODULE_12__["default"].t("Workspace")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_6__["Select"], {
    value: selectedWorkspace,
    onChange: changeWorkspace,
    disabled: !props.allowArchive
  }, Object.keys(workSpaceList).map(function (key, index) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_6__["MenuItem"], {
      key: index,
      value: key
    }, workSpaceList[key].label);
  })))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_6__["Typography"], {
    component: "div",
    style: {
      overflowY: "auto",
      overflowX: "hidden",
      justifyContent: "center",
      width: "100%"
    }
  }, isLoading ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_core_Backdrop__WEBPACK_IMPORTED_MODULE_10___default.a, {
    style: {
      position: "relative",
      height: "50vh",
      width: "inherit",
      color: "#fff",
      zIndex: 99999
    },
    open: isLoading
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_core_CircularProgress__WEBPACK_IMPORTED_MODULE_11___default.a, {
    color: "inherit"
  })) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_Tree_BasicVirtualizedTree__WEBPACK_IMPORTED_MODULE_8__["default"], {
    onClickNode: function onClickNode(node) {
      return requestScopeVersions(node);
    },
    onDoubleClickNode: function onDoubleClickNode(data) {
      return confirmNodeSelection(data);
    },
    data: data,
    handleChange: function handleChange(nodes) {
      return setData(nodes);
    },
    showIcons: false,
    height: "400px"
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_6__["Grid"], {
    item: true,
    xs: 12,
    style: {
      textAlign: "center"
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_6__["Typography"], {
    label: _i18n_i18n_js__WEBPACK_IMPORTED_MODULE_12__["default"].t("Message"),
    value: "selected",
    margin: "normal"
  }, selectedScopeItem === "" ? _i18n_i18n_js__WEBPACK_IMPORTED_MODULE_12__["default"].t("Nothing selected") : selectedScopeItem))));
};

SelectScopeModal.propTypes = {
  allowArchive: prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.bool,
  onSubmit: prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.func,
  onCancel: prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.func,
  open: prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.bool,
  scopeList: prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.array,
  message: prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.string,
  selected: prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.string,
  filter: prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.func
};
SelectScopeModal.defaultProps = {
  title: _i18n_i18n_js__WEBPACK_IMPORTED_MODULE_12__["default"].t("Insert Text here"),
  message: _i18n_i18n_js__WEBPACK_IMPORTED_MODULE_12__["default"].t("Are you sure?"),
  allowArchive: true,
  onSubmit: function onSubmit() {},
  onCancel: function onCancel() {},
  open: false,
  scopeList: ["Callback"],
  selected: ""
};
/* harmony default export */ __webpack_exports__["default"] = (SelectScopeModal);

/***/ }),

/***/ "./src/Components/ProfileMenu.js":
/*!***************************************!*\
  !*** ./src/Components/ProfileMenu.js ***!
  \***************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/slicedToArray */ "@babel/runtime/helpers/esm/slicedToArray");
/* harmony import */ var _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "@babel/runtime/helpers/esm/defineProperty");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _material_ui_core_IconButton__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @material-ui/core/IconButton */ "@material-ui/core/IconButton");
/* harmony import */ var _material_ui_core_IconButton__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_IconButton__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _material_ui_core_Menu__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @material-ui/core/Menu */ "@material-ui/core/Menu");
/* harmony import */ var _material_ui_core_Menu__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_Menu__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _material_ui_core_MenuItem__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @material-ui/core/MenuItem */ "@material-ui/core/MenuItem");
/* harmony import */ var _material_ui_core_MenuItem__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_MenuItem__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _material_ui_icons_Settings__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @material-ui/icons/Settings */ "@material-ui/icons/Settings");
/* harmony import */ var _material_ui_icons_Settings__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_material_ui_icons_Settings__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! prop-types */ "prop-types");
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _Toggle__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./Toggle */ "./src/Components/Toggle.js");
/* harmony import */ var _material_ui_core_styles__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @material-ui/core/styles */ "@material-ui/core/styles");
/* harmony import */ var _material_ui_core_styles__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var _material_ui_core_Divider__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @material-ui/core/Divider */ "@material-ui/core/Divider");
/* harmony import */ var _material_ui_core_Divider__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_Divider__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var _material_ui_core__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @material-ui/core */ "@material-ui/core");
/* harmony import */ var _material_ui_core__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core__WEBPACK_IMPORTED_MODULE_11__);



function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }











var useStyles = Object(_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_9__["makeStyles"])(function (theme) {
  return {
    menuItemSpacing: _objectSpread({
      fontSize: "18px",
      minHeight: "18px",
      padding: theme.spacing(1.25, 2)
    }, theme.cursorDefault),
    profileMenuFooter: {
      fontSize: "14px",
      textAlign: "end"
    }
  };
});

var ProfileMenu = function ProfileMenu(props) {
  var _props$extraItems;

  var classes = useStyles();

  var _React$useState = react__WEBPACK_IMPORTED_MODULE_2___default.a.useState(null),
      _React$useState2 = _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_React$useState, 2),
      anchorEl = _React$useState2[0],
      setAnchorEl = _React$useState2[1];

  var handleClick = function handleClick(event) {
    setAnchorEl(event.currentTarget);
  };

  var handleClose = function handleClose() {
    setAnchorEl(null);
  };

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_material_ui_core_IconButton__WEBPACK_IMPORTED_MODULE_3___default.a, {
    "aria-controls": "simple-menu",
    "aria-haspopup": "true",
    onClick: handleClick
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_material_ui_icons_Settings__WEBPACK_IMPORTED_MODULE_6___default.a, null)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_material_ui_core_Menu__WEBPACK_IMPORTED_MODULE_4___default.a, {
    id: "simple-menu",
    anchorEl: anchorEl,
    keepMounted: true,
    open: Boolean(anchorEl),
    onClose: handleClose
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_11__["Typography"], {
    component: "div",
    variant: "body1"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div", {
    className: classes.menuItemSpacing
  }, props.welcomeLabel, ", ", props.userName), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_material_ui_core_Divider__WEBPACK_IMPORTED_MODULE_10___default.a, {
    variant: "middle"
  }), (_props$extraItems = props.extraItems) === null || _props$extraItems === void 0 ? void 0 : _props$extraItems.map(function (item) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_material_ui_core_MenuItem__WEBPACK_IMPORTED_MODULE_5___default.a, {
      className: classes.menuItemSpacing,
      onClick: function onClick() {
        return item.func;
      }
    }, item.label);
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div", {
    className: classes.menuItemSpacing
  }, props.darkThemeLabel, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_Toggle__WEBPACK_IMPORTED_MODULE_8__["default"], {
    onToggle: function onToggle() {
      return props.handleToggleTheme();
    },
    toggle: props.isDarkTheme
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_material_ui_core_MenuItem__WEBPACK_IMPORTED_MODULE_5___default.a, {
    className: (classes.menuItemSpacing, classes.cursorPointer),
    onClick: props.handleLogout
  }, props.logoutLabel), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_material_ui_core_Divider__WEBPACK_IMPORTED_MODULE_10___default.a, {
    variant: "middle"
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div", {
    className: classes.menuItemSpacing + " " + classes.profileMenuFooter
  }, props.version))));
};

ProfileMenu.propTypes = {
  welcomeLabel: prop_types__WEBPACK_IMPORTED_MODULE_7___default.a.string,
  userName: prop_types__WEBPACK_IMPORTED_MODULE_7___default.a.string,
  darkThemeLabel: prop_types__WEBPACK_IMPORTED_MODULE_7___default.a.string,
  logoutLabel: prop_types__WEBPACK_IMPORTED_MODULE_7___default.a.string,
  version: prop_types__WEBPACK_IMPORTED_MODULE_7___default.a.string,
  extraItems: prop_types__WEBPACK_IMPORTED_MODULE_7___default.a.array,
  isDarkTheme: prop_types__WEBPACK_IMPORTED_MODULE_7___default.a.bool,
  handleLogout: prop_types__WEBPACK_IMPORTED_MODULE_7___default.a.func,
  handleToggleTheme: prop_types__WEBPACK_IMPORTED_MODULE_7___default.a.func
};
ProfileMenu.defaultProps = {
  welcomeLabel: "Hello",
  userName: "User",
  darkThemeLabel: "Dark Theme",
  logoutLabel: "Logout",
  version: "",
  extraItems: [],
  isDarkTheme: true,
  handleLogout: function handleLogout() {
    return console.log("logout");
  },
  handleToggleTheme: function handleToggleTheme() {
    return console.log("toggle");
  }
};
/* harmony default export */ __webpack_exports__["default"] = (ProfileMenu);

/***/ }),

/***/ "./src/Components/SearchInput.js":
/*!***************************************!*\
  !*** ./src/Components/SearchInput.js ***!
  \***************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "@babel/runtime/helpers/esm/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "@babel/runtime/helpers/esm/createClass");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/assertThisInitialized */ "@babel/runtime/helpers/esm/assertThisInitialized");
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "@babel/runtime/helpers/esm/inherits");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "@babel/runtime/helpers/esm/possibleConstructorReturn");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "@babel/runtime/helpers/esm/getPrototypeOf");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "@babel/runtime/helpers/esm/defineProperty");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _material_ui_core_styles__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @material-ui/core/styles */ "@material-ui/core/styles");
/* harmony import */ var _material_ui_core_styles__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var _material_ui_core_InputBase__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @material-ui/core/InputBase */ "@material-ui/core/InputBase");
/* harmony import */ var _material_ui_core_InputBase__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_InputBase__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var _material_ui_icons_Search__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @material-ui/icons/Search */ "@material-ui/icons/Search");
/* harmony import */ var _material_ui_icons_Search__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(_material_ui_icons_Search__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! prop-types */ "prop-types");
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_11__);








function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5___default()(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5___default()(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4___default()(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }







var styles = function styles(theme) {
  return {
    search: _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()({
      position: "relative",
      borderRadius: theme.shape.borderRadius,
      backgroundColor: Object(_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_8__["fade"])(theme.palette.common.white, 0.15),
      "&:hover": {
        backgroundColor: Object(_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_8__["fade"])(theme.palette.common.white, 0.25)
      },
      marginRight: theme.spacing(2),
      marginLeft: 0,
      width: "100%"
    }, theme.breakpoints.up("sm"), {
      marginLeft: theme.spacing(3),
      width: "auto"
    }),
    searchIcon: {
      width: theme.spacing(7),
      height: "100%",
      position: "absolute",
      pointerEvents: "none",
      display: "flex",
      alignItems: "center",
      justifyContent: "center"
    },
    inputRoot: {
      color: "inherit"
    },
    inputInput: _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()({
      padding: theme.spacing(1, 1, 1, 7),
      transition: theme.transitions.create("width"),
      width: "100%"
    }, theme.breakpoints.up("md"), {
      width: 200
    })
  };
};

var SearchInput = /*#__PURE__*/function (_Component) {
  _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3___default()(SearchInput, _Component);

  var _super = _createSuper(SearchInput);

  function SearchInput() {
    var _this;

    _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default()(this, SearchInput);

    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _this = _super.call.apply(_super, [this].concat(args));

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default()(_this), "searchInput", undefined);

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default()(_this), "timer", undefined);

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default()(_this), "handleChange", function (evt) {
      _this.searchInput = evt.target.value;

      if (_this.props.enableTimeout) {
        if (_this.timer) {
          clearTimeout(_this.timer);
        }

        _this.timer = setTimeout(_this.handleSearch, _this.props.time);
      } else {
        _this.handleSearch();
      }
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default()(_this), "handleSearch", function () {
      if (_this.searchInput !== undefined) _this.props.onChange(_this.searchInput);
    });

    return _this;
  }

  _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1___default()(SearchInput, [{
    key: "render",
    value: function render() {
      var _this$props = this.props,
          classes = _this$props.classes,
          style = _this$props.style,
          placeholder = _this$props.placeholder;
      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div", {
        className: classes.search,
        style: style
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div", {
        className: classes.searchIcon
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_icons_Search__WEBPACK_IMPORTED_MODULE_10___default.a, null)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core_InputBase__WEBPACK_IMPORTED_MODULE_9___default.a, {
        ref: this.setSearchInput,
        placeholder: placeholder,
        classes: {
          root: classes.inputRoot,
          input: classes.inputInput
        },
        inputProps: {
          "aria-label": "search"
        },
        onChange: this.handleChange
      }));
    }
  }]);

  return SearchInput;
}(react__WEBPACK_IMPORTED_MODULE_7__["Component"]);

SearchInput.propTypes = {
  placeholder: prop_types__WEBPACK_IMPORTED_MODULE_11___default.a.string,
  onChange: prop_types__WEBPACK_IMPORTED_MODULE_11___default.a.func,
  time: prop_types__WEBPACK_IMPORTED_MODULE_11___default.a.number,
  enableTimeout: prop_types__WEBPACK_IMPORTED_MODULE_11___default.a.bool,
  style: prop_types__WEBPACK_IMPORTED_MODULE_11___default.a.object
};
SearchInput.defaultProps = {
  placeholder: "Search...",
  onChange: function onChange(input) {
    console.log(input);
  },
  time: 250,
  enableTimeout: true,
  style: {}
};
/* harmony default export */ __webpack_exports__["default"] = (Object(_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_8__["withStyles"])(styles, {
  withTheme: true
})(SearchInput));

/***/ }),

/***/ "./src/Components/Select.js":
/*!**********************************!*\
  !*** ./src/Components/Select.js ***!
  \**********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _material_ui_core_styles__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @material-ui/core/styles */ "@material-ui/core/styles");
/* harmony import */ var _material_ui_core_styles__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _material_ui_core_InputLabel__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @material-ui/core/InputLabel */ "@material-ui/core/InputLabel");
/* harmony import */ var _material_ui_core_InputLabel__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_InputLabel__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _material_ui_core_MenuItem__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @material-ui/core/MenuItem */ "@material-ui/core/MenuItem");
/* harmony import */ var _material_ui_core_MenuItem__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_MenuItem__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _material_ui_core_FormControl__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @material-ui/core/FormControl */ "@material-ui/core/FormControl");
/* harmony import */ var _material_ui_core_FormControl__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_FormControl__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _material_ui_core_Select__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @material-ui/core/Select */ "@material-ui/core/Select");
/* harmony import */ var _material_ui_core_Select__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_Select__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! prop-types */ "prop-types");
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_6__);







var useStyles = Object(_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_1__["makeStyles"])(function (theme) {
  return {
    formControl: {
      margin: theme.spacing(1),
      minWidth: 120
    }
  };
});

var Select = function Select(props) {
  var classes = useStyles();
  var noneOption = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", null);

  if (props.noneOption) {
    noneOption = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core_MenuItem__WEBPACK_IMPORTED_MODULE_3___default.a, {
      value: ""
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("em", null, "None"));
  }

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core_FormControl__WEBPACK_IMPORTED_MODULE_4___default.a, {
    variant: props.variant,
    className: classes.formControl,
    style: props.style,
    hiddenLabel: props.label === undefined ? true : false
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core_InputLabel__WEBPACK_IMPORTED_MODULE_2___default.a, {
    id: "movai-react-select"
  }, props.label), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core_Select__WEBPACK_IMPORTED_MODULE_5___default.a, {
    labelId: "movai-react-select",
    id: props.id,
    value: props.value,
    onChange: props.onChange,
    inputProps: props.inputProps
  }, noneOption, props.options.map(function (element, index) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core_MenuItem__WEBPACK_IMPORTED_MODULE_3___default.a, {
      key: index,
      value: element
    }, element);
  })));
};

Select.propTypes = {
  value: prop_types__WEBPACK_IMPORTED_MODULE_6___default.a.string,
  options: prop_types__WEBPACK_IMPORTED_MODULE_6___default.a.array,
  noneOption: prop_types__WEBPACK_IMPORTED_MODULE_6___default.a.bool,
  label: prop_types__WEBPACK_IMPORTED_MODULE_6___default.a.string,
  variant: prop_types__WEBPACK_IMPORTED_MODULE_6___default.a.string,
  style: prop_types__WEBPACK_IMPORTED_MODULE_6___default.a.object,
  onChange: prop_types__WEBPACK_IMPORTED_MODULE_6___default.a.func,
  id: prop_types__WEBPACK_IMPORTED_MODULE_6___default.a.string,
  inputProps: prop_types__WEBPACK_IMPORTED_MODULE_6___default.a.object
};
Select.defaultProps = {
  value: "option2",
  options: ["option1", "option2", "option3"],
  variant: "filled",
  noneOption: true,
  onChange: function onChange(evt) {
    return console.log(evt.target.value);
  },
  id: "movai-react-select"
};
/* harmony default export */ __webpack_exports__["default"] = (Select);

/***/ }),

/***/ "./src/Components/Snackbar/Alert/Alert.js":
/*!************************************************!*\
  !*** ./src/Components/Snackbar/Alert/Alert.js ***!
  \************************************************/
/*! exports provided: styles, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "styles", function() { return styles; });
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/extends */ "@babel/runtime/helpers/esm/extends");
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/objectWithoutProperties */ "@babel/runtime/helpers/esm/objectWithoutProperties");
/* harmony import */ var _babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! prop-types */ "prop-types");
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var clsx__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! clsx */ "clsx");
/* harmony import */ var clsx__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(clsx__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _material_ui_core_styles__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @material-ui/core/styles */ "@material-ui/core/styles");
/* harmony import */ var _material_ui_core_styles__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _material_ui_core_IconButton__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @material-ui/core/IconButton */ "@material-ui/core/IconButton");
/* harmony import */ var _material_ui_core_IconButton__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_IconButton__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _material_ui_core_utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @material-ui/core/utils */ "@material-ui/core/utils");
/* harmony import */ var _material_ui_core_utils__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_utils__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _svg_icons_svgIcons__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./svg-icons/svgIcons */ "./src/Components/Snackbar/Alert/svg-icons/svgIcons.js");


var _excluded = ["action", "children", "classes", "className", "closeText", "color", "icon", "iconMapping", "onClose", "role", "severity", "variant", "theme"];







var styles = function styles() {
  return {
    /* Styles applied to the root element. */
    root: {
      // borderRadius: theme.shape.borderRadius,
      backgroundColor: "transparent",
      display: "flex",
      padding: "6px 16px"
    },

    /* Styles applied to the root element if `variant="filled"` and `color="success"`. */
    filledSuccess: {
      color: "#fff",
      // fontWeight: theme.typography.fontWeightMedium,
      backgroundColor: "#4caf50"
    },

    /* Styles applied to the root element if `variant="filled"` and `color="info"`. */
    filledInfo: {
      color: "#fff",
      // fontWeight: theme.typography.fontWeightMedium,
      backgroundColor: "#2196f3"
    },

    /* Styles applied to the root element if `variant="filled"` and `color="warning"`. */
    filledWarning: {
      color: "#fff",
      // fontWeight: theme.typography.fontWeightMedium,
      backgroundColor: "#ff9800"
    },

    /* Styles applied to the root element if `variant="filled"` and `color="error"`. */
    filledError: {
      color: "#fff",
      // fontWeight: theme.typography.fontWeightMedium,
      backgroundColor: "#f44336"
    },

    /* Styles applied to the icon wrapper element. */
    icon: {
      marginRight: 12,
      padding: "7px 0",
      display: "flex",
      fontSize: 22,
      opacity: 0.9
    },

    /* Styles applied to the message wrapper element. */
    message: {
      padding: "8px 0",
      display: "flex",
      flexDirection: "column",
      justifyContent: "center"
    },

    /* Styles applied to the action wrapper element if `action` is provided. */
    action: {
      display: "flex",
      alignItems: "center",
      marginLeft: "auto",
      paddingLeft: 16,
      marginRight: -8
    }
  };
};
var defaultIconMapping = {
  success: _svg_icons_svgIcons__WEBPACK_IMPORTED_MODULE_8__["svgIcons"].SuccessOutlined,
  warning: _svg_icons_svgIcons__WEBPACK_IMPORTED_MODULE_8__["svgIcons"].ReportProblemOutlined,
  error: _svg_icons_svgIcons__WEBPACK_IMPORTED_MODULE_8__["svgIcons"].ErrorOutline,
  info: _svg_icons_svgIcons__WEBPACK_IMPORTED_MODULE_8__["svgIcons"].InfoOutlined
};

var Alert = function Alert(props) {
  var action = props.action,
      children = props.children,
      classes = props.classes,
      className = props.className,
      _props$closeText = props.closeText,
      closeText = _props$closeText === void 0 ? "Close" : _props$closeText,
      color = props.color,
      icon = props.icon,
      _props$iconMapping = props.iconMapping,
      iconMapping = _props$iconMapping === void 0 ? defaultIconMapping : _props$iconMapping,
      onClose = props.onClose,
      _props$role = props.role,
      role = _props$role === void 0 ? "alert" : _props$role,
      _props$severity = props.severity,
      severity = _props$severity === void 0 ? "success" : _props$severity,
      _props$variant = props.variant,
      variant = _props$variant === void 0 ? "standard" : _props$variant,
      theme = props.theme,
      other = _babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_1___default()(props, _excluded);

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("div", _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0___default()({
    className: clsx__WEBPACK_IMPORTED_MODULE_4___default()(classes.root, classes["".concat(variant).concat(Object(_material_ui_core_utils__WEBPACK_IMPORTED_MODULE_7__["capitalize"])(color || severity))], className)
  }, other), icon !== false ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("div", {
    className: classes.icon
  }, icon || iconMapping[severity] || defaultIconMapping[severity]) : null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("div", {
    className: classes.message
  }, children), action != null ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("div", {
    className: classes.action
  }, action) : null, action == null && onClose ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("div", {
    className: classes.action
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2__["createElement"](_material_ui_core_IconButton__WEBPACK_IMPORTED_MODULE_6___default.a, {
    size: "small",
    "aria-label": closeText,
    title: closeText,
    color: "inherit",
    onClick: onClose
  }, _svg_icons_svgIcons__WEBPACK_IMPORTED_MODULE_8__["svgIcons"].Close)) : null);
};

Alert.propTypes = {
  // ----------------------------- Warning --------------------------------
  // | These PropTypes are generated from the TypeScript type definitions |
  // |     To update them edit the d.ts file and run "yarn proptypes"     |
  // ----------------------------------------------------------------------

  /**
   * The action to display. It renders after the message, at the end of the alert.
   */
  action: prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.node,

  /**
   * The content of the component.
   */
  children: prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.node,

  /**
   * Override or extend the styles applied to the component.
   * See [CSS API](#css) below for more details.
   */
  classes: prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.object,

  /**
   * @ignore
   */
  className: prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.string,

  /**
   * Override the default label for the *close popup* icon button.
   *
   * For localization purposes, you can use the provided [translations](/guides/localization/).
   */
  closeText: prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.string,

  /**
   * The main color for the alert. Unless provided, the value is taken from the `severity` prop.
   */
  color: prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.oneOf(["error", "info", "success", "warning"]),

  /**
   * Override the icon displayed before the children.
   * Unless provided, the icon is mapped to the value of the `severity` prop.
   */
  icon: prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.node,

  /**
   * The component maps the `severity` prop to a range of different icons,
   * for instance success to `<SuccessOutlined>`.
   * If you wish to change this mapping, you can provide your own.
   * Alternatively, you can use the `icon` prop to override the icon displayed.
   */
  iconMapping: prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.shape({
    error: prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.node,
    info: prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.node,
    success: prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.node,
    warning: prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.node
  }),

  /**
   * Callback fired when the component requests to be closed.
   * When provided and no `action` prop is set, a close icon button is displayed that triggers the callback when clicked.
   *
   * @param {object} event The event source of the callback.
   */
  onClose: prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.func,

  /**
   * The ARIA role attribute of the element.
   */
  role: prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.string,

  /**
   * The severity of the alert. This defines the color and icon used.
   */
  severity: prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.oneOf(["error", "info", "success", "warning"]),

  /**
   * The variant to use.
   */
  variant: prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.oneOf(["filled", "outlined", "standard"])
};
/* harmony default export */ __webpack_exports__["default"] = (Object(_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_5__["withStyles"])(styles, {
  name: "MuiAlert"
})(Alert));

/***/ }),

/***/ "./src/Components/Snackbar/Alert/svg-icons/CreateSVGIcon.js":
/*!******************************************************************!*\
  !*** ./src/Components/Snackbar/Alert/svg-icons/CreateSVGIcon.js ***!
  \******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
// import * as React from "react";
// import SvgIcon from "@material-ui/core/SvgIcon";
// export default function createSvgIcon({
//   path = "",
//   style = {},
//   fill = "#fff",
//   width = "100%",
//   className = "",
//   height = "100%",
//   viewBox = "0 0 32 32"
// }) {
//   return (
//     <svg
//       width={width}
//       style={style}
//       height={height}
//       viewBox={viewBox}
//       className={className}
//       xmlns="http://www.w3.org/2000/svg"
//       xmlnsXlink="http://www.w3.org/1999/xlink"
//     >
//       <path d={path} fill={fill} />
//     </svg>
//   );
// }
// export default function createSvgIcon(path, displayName) {
//   const Component = React.memo(
//     React.forwardRef((props, ref) => (
//       <SvgIcon data-mui-test={`${displayName}Icon`} ref={ref} {...props}>
//         {path}
//       </SvgIcon>
//       <SvgIcon>
//         {path}
//       </SvgIcon>
//     ))
//   );
//   if (process.env.NODE_ENV !== "production") {
//     Component.displayName = `${displayName}Icon`;
//   }
//   Component.muiName = SvgIcon.muiName;
//   return Component;
// }


var CreateSVGIcon = function CreateSVGIcon(_ref) {
  var _ref$path = _ref.path,
      path = _ref$path === void 0 ? "" : _ref$path,
      _ref$style = _ref.style,
      style = _ref$style === void 0 ? {} : _ref$style,
      _ref$fill = _ref.fill,
      fill = _ref$fill === void 0 ? "#fff" : _ref$fill,
      _ref$width = _ref.width,
      width = _ref$width === void 0 ? "100%" : _ref$width,
      _ref$height = _ref.height,
      height = _ref$height === void 0 ? "100%" : _ref$height,
      _ref$className = _ref.className,
      className = _ref$className === void 0 ? "" : _ref$className,
      _ref$viewBox = _ref.viewBox,
      viewBox = _ref$viewBox === void 0 ? "0 0 24 24" : _ref$viewBox;
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("svg", {
    width: width,
    style: style,
    height: height,
    viewBox: viewBox,
    xmlns: "http://www.w3.org/2000/svg",
    className: "svg-icon ".concat(className || ""),
    xmlnsXlink: "http://www.w3.org/1999/xlink"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("path", {
    fill: fill,
    d: path
  }));
};

/* harmony default export */ __webpack_exports__["default"] = (CreateSVGIcon);

/***/ }),

/***/ "./src/Components/Snackbar/Alert/svg-icons/svgIcons.js":
/*!*************************************************************!*\
  !*** ./src/Components/Snackbar/Alert/svg-icons/svgIcons.js ***!
  \*************************************************************/
/*! exports provided: svgIcons */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "svgIcons", function() { return svgIcons; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _CreateSVGIcon__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./CreateSVGIcon */ "./src/Components/Snackbar/Alert/svg-icons/CreateSVGIcon.js");


var svgIcons = {
  Close: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_CreateSVGIcon__WEBPACK_IMPORTED_MODULE_1__["default"], {
    width: 24,
    path: "M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"
  }),
  ErrorOutline: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_CreateSVGIcon__WEBPACK_IMPORTED_MODULE_1__["default"], {
    width: 24,
    path: "M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"
  }),
  InfoOutlined: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_CreateSVGIcon__WEBPACK_IMPORTED_MODULE_1__["default"], {
    width: 24,
    path: "M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"
  }),
  ReportProblemOutlined: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_CreateSVGIcon__WEBPACK_IMPORTED_MODULE_1__["default"], {
    width: 24,
    path: "M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"
  }),
  SuccessOutlined: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_CreateSVGIcon__WEBPACK_IMPORTED_MODULE_1__["default"], {
    width: 24,
    path: "M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"
  })
};

/***/ }),

/***/ "./src/Components/Snackbar/Snackbar.css":
/*!**********************************************!*\
  !*** ./src/Components/Snackbar/Snackbar.css ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var api = __webpack_require__(/*! ../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js");
            var content = __webpack_require__(/*! !../../../node_modules/css-loader/dist/cjs.js!./Snackbar.css */ "./node_modules/css-loader/dist/cjs.js!./src/Components/Snackbar/Snackbar.css");

            content = content.__esModule ? content.default : content;

            if (typeof content === 'string') {
              content = [[module.i, content, '']];
            }

var options = {};

options.insert = "head";
options.singleton = false;

var update = api(content, options);



module.exports = content.locals || {};

/***/ }),

/***/ "./src/Components/Snackbar/Snackbar.js":
/*!*********************************************!*\
  !*** ./src/Components/Snackbar/Snackbar.js ***!
  \*********************************************/
/*! exports provided: snackbar, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "snackbar", function() { return snackbar; });
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/extends */ "@babel/runtime/helpers/esm/extends");
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "@babel/runtime/helpers/esm/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "@babel/runtime/helpers/esm/createClass");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/assertThisInitialized */ "@babel/runtime/helpers/esm/assertThisInitialized");
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "@babel/runtime/helpers/esm/inherits");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "@babel/runtime/helpers/esm/possibleConstructorReturn");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "@babel/runtime/helpers/esm/getPrototypeOf");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "@babel/runtime/helpers/esm/defineProperty");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! prop-types */ "prop-types");
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! react-dom */ "react-dom");
/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(react_dom__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var _Alert_Alert__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./Alert/Alert */ "./src/Components/Snackbar/Alert/Alert.js");
/* harmony import */ var _Snackbar_css__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./Snackbar.css */ "./src/Components/Snackbar/Snackbar.css");
/* harmony import */ var _Snackbar_css__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(_Snackbar_css__WEBPACK_IMPORTED_MODULE_12__);
/* harmony import */ var _Alert_svg_icons_svgIcons__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./Alert/svg-icons/svgIcons */ "./src/Components/Snackbar/Alert/svg-icons/svgIcons.js");









function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6___default()(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6___default()(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5___default()(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

// Inspired from https://github.com/GA-MO/react-confirm-alert


 // import { Alert } from "@material-ui/lab";





var ReactConfirmAlert = /*#__PURE__*/function (_Component) {
  _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4___default()(ReactConfirmAlert, _Component);

  var _super = _createSuper(ReactConfirmAlert);

  function ReactConfirmAlert() {
    var _this;

    _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default()(this, ReactConfirmAlert);

    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _this = _super.call.apply(_super, [this].concat(args));

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3___default()(_this), "autoClose", null);

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3___default()(_this), "handleClickButton", function (button) {
      if (button.onClick) button.onClick();

      _this.close();
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3___default()(_this), "handleClickOverlay", function (e) {
      var _this$props = _this.props,
          closeOnClickOutside = _this$props.closeOnClickOutside,
          onClickOutside = _this$props.onClickOutside;
      var isClickOutside = e.target === _this.overlay;

      if (closeOnClickOutside && isClickOutside) {
        onClickOutside();

        _this.close();
      }
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3___default()(_this), "close", function () {
      removeBodyClass();
      removeElementReconfirm();
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3___default()(_this), "keyboardClose", function (event) {
      var _this$props2 = _this.props,
          closeOnEscape = _this$props2.closeOnEscape,
          onKeypressEscape = _this$props2.onKeypressEscape;
      var isKeyCodeEscape = event.keyCode === 27;

      if (closeOnEscape && isKeyCodeEscape) {
        onKeypressEscape(event);

        _this.close();
      }
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3___default()(_this), "componentDidMount", function () {
      document.addEventListener("keydown", _this.keyboardClose, false);
      _this.autoClose = setTimeout(function () {
        if (document.getElementById("react-confirm-alert") || document.getElementById("react-confirm-alert-body-element")) {
          _this.close();
        }
      }, _this.props.autoHideDuration);
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3___default()(_this), "componentWillUnmount", function () {
      document.removeEventListener("keydown", _this.keyboardClose, false);
      clearTimeout(_this.autoClose);

      _this.props.willUnmount();
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3___default()(_this), "renderCustomUI", function () {
      var _this$props3 = _this.props,
          title = _this$props3.title,
          message = _this$props3.message,
          customUI = _this$props3.customUI;
      var dataCustomUI = {
        title: title,
        message: message,
        onClose: _this.close
      };
      return customUI(dataCustomUI);
    });

    return _this;
  }

  _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2___default()(ReactConfirmAlert, [{
    key: "render",
    value: function render() {
      var _this2 = this;

      var _this$props4 = this.props,
          message = _this$props4.message,
          customUI = _this$props4.customUI,
          severity = _this$props4.severity,
          closeText = _this$props4.closeText,
          closable = _this$props4.closable,
          theme = _this$props4.theme;
      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_8___default.a.createElement("div", {
        className: "react-confirm-alert-overlay",
        ref: function ref(dom) {
          return _this2.overlay = dom;
        },
        onClick: this.handleClickOverlay
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_8___default.a.createElement("div", {
        className: "react-confirm-alert"
      }, customUI ? this.renderCustomUI() : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_8___default.a.createElement("div", {
        className: "react-confirm-alert-body"
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_8___default.a.createElement(_Alert_Alert__WEBPACK_IMPORTED_MODULE_11__["default"], {
        theme: theme,
        elevation: 6,
        variant: "filled",
        severity: severity,
        closeText: closeText,
        action: closable ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_8___default.a.createElement("div", {
          className: "icon-container",
          onClick: function onClick() {
            return _this2.close();
          }
        }, _Alert_svg_icons_svgIcons__WEBPACK_IMPORTED_MODULE_13__["svgIcons"].Close) : undefined
      }, message))));
    }
  }]);

  return ReactConfirmAlert;
}(react__WEBPACK_IMPORTED_MODULE_8__["Component"]);

_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7___default()(ReactConfirmAlert, "propTypes", {
  message: prop_types__WEBPACK_IMPORTED_MODULE_9___default.a.string,
  customUI: prop_types__WEBPACK_IMPORTED_MODULE_9___default.a.func,
  closeOnClickOutside: prop_types__WEBPACK_IMPORTED_MODULE_9___default.a.bool,
  closeOnEscape: prop_types__WEBPACK_IMPORTED_MODULE_9___default.a.bool,
  willUnmount: prop_types__WEBPACK_IMPORTED_MODULE_9___default.a.func,
  onClickOutside: prop_types__WEBPACK_IMPORTED_MODULE_9___default.a.func,
  onKeypressEscape: prop_types__WEBPACK_IMPORTED_MODULE_9___default.a.func,
  // new props
  severity: prop_types__WEBPACK_IMPORTED_MODULE_9___default.a.string,
  closeText: prop_types__WEBPACK_IMPORTED_MODULE_9___default.a.string,
  autoHideDuration: prop_types__WEBPACK_IMPORTED_MODULE_9___default.a.number,
  closable: prop_types__WEBPACK_IMPORTED_MODULE_9___default.a.bool
});

_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7___default()(ReactConfirmAlert, "defaultProps", {
  closeOnClickOutside: true,
  closeOnEscape: true,
  willUnmount: function willUnmount() {
    return null;
  },
  onClickOutside: function onClickOutside() {
    return null;
  },
  onKeypressEscape: function onKeypressEscape() {
    return null;
  },
  // new props
  severity: "info",
  // error, warning, info or success
  closeText: "Close",
  autoHideDuration: 6000,
  closable: true
});

function createElementReconfirm(properties, theme) {
  var divTarget = document.getElementById("react-confirm-alert");

  if (divTarget) {
    // Rerender - the mounted ReactConfirmAlert
    Object(react_dom__WEBPACK_IMPORTED_MODULE_10__["render"])( /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_8___default.a.createElement(ReactConfirmAlert, _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0___default()({}, properties, {
      theme: theme
    })), divTarget);
  } else {
    // Mount the ReactConfirmAlert component
    document.body.children[0].classList.add("react-confirm-alert-blur");
    divTarget = document.createElement("div");
    divTarget.id = "react-confirm-alert";
    document.body.appendChild(divTarget);
    Object(react_dom__WEBPACK_IMPORTED_MODULE_10__["render"])( /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_8___default.a.createElement(ReactConfirmAlert, _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0___default()({}, properties, {
      theme: theme
    })), divTarget);
  }
}

function removeElementReconfirm() {
  var target = document.getElementById("react-confirm-alert");
  Object(react_dom__WEBPACK_IMPORTED_MODULE_10__["unmountComponentAtNode"])(target);
  target.parentNode.removeChild(target);
}

function addBodyClass() {
  document.body.classList.add("react-confirm-alert-body-element");
}

function removeBodyClass() {
  document.body.classList.remove("react-confirm-alert-body-element");
}

function snackbar(properties, theme) {
  addBodyClass();
  createElementReconfirm(properties, theme);
}
/* harmony default export */ __webpack_exports__["default"] = (ReactConfirmAlert);

/***/ }),

/***/ "./src/Components/Table.js":
/*!*********************************!*\
  !*** ./src/Components/Table.js ***!
  \*********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/extends */ "@babel/runtime/helpers/esm/extends");
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! prop-types */ "prop-types");
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var material_table__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! material-table */ "material-table");
/* harmony import */ var material_table__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(material_table__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _material_ui_icons_AddBox__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @material-ui/icons/AddBox */ "@material-ui/icons/AddBox");
/* harmony import */ var _material_ui_icons_AddBox__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_material_ui_icons_AddBox__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _material_ui_icons_ArrowDownward__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @material-ui/icons/ArrowDownward */ "@material-ui/icons/ArrowDownward");
/* harmony import */ var _material_ui_icons_ArrowDownward__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_material_ui_icons_ArrowDownward__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _material_ui_icons_Check__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @material-ui/icons/Check */ "@material-ui/icons/Check");
/* harmony import */ var _material_ui_icons_Check__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_material_ui_icons_Check__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _material_ui_icons_ChevronLeft__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @material-ui/icons/ChevronLeft */ "@material-ui/icons/ChevronLeft");
/* harmony import */ var _material_ui_icons_ChevronLeft__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_material_ui_icons_ChevronLeft__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _material_ui_icons_ChevronRight__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @material-ui/icons/ChevronRight */ "@material-ui/icons/ChevronRight");
/* harmony import */ var _material_ui_icons_ChevronRight__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_material_ui_icons_ChevronRight__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var _material_ui_icons_Clear__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @material-ui/icons/Clear */ "@material-ui/icons/Clear");
/* harmony import */ var _material_ui_icons_Clear__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(_material_ui_icons_Clear__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var _material_ui_icons_DeleteOutline__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @material-ui/icons/DeleteOutline */ "@material-ui/icons/DeleteOutline");
/* harmony import */ var _material_ui_icons_DeleteOutline__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(_material_ui_icons_DeleteOutline__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var _material_ui_icons_Edit__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @material-ui/icons/Edit */ "@material-ui/icons/Edit");
/* harmony import */ var _material_ui_icons_Edit__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(_material_ui_icons_Edit__WEBPACK_IMPORTED_MODULE_11__);
/* harmony import */ var _material_ui_icons_FilterList__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @material-ui/icons/FilterList */ "@material-ui/icons/FilterList");
/* harmony import */ var _material_ui_icons_FilterList__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(_material_ui_icons_FilterList__WEBPACK_IMPORTED_MODULE_12__);
/* harmony import */ var _material_ui_icons_FirstPage__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @material-ui/icons/FirstPage */ "@material-ui/icons/FirstPage");
/* harmony import */ var _material_ui_icons_FirstPage__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(_material_ui_icons_FirstPage__WEBPACK_IMPORTED_MODULE_13__);
/* harmony import */ var _material_ui_icons_LastPage__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @material-ui/icons/LastPage */ "@material-ui/icons/LastPage");
/* harmony import */ var _material_ui_icons_LastPage__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(_material_ui_icons_LastPage__WEBPACK_IMPORTED_MODULE_14__);
/* harmony import */ var _material_ui_icons_Remove__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @material-ui/icons/Remove */ "@material-ui/icons/Remove");
/* harmony import */ var _material_ui_icons_Remove__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(_material_ui_icons_Remove__WEBPACK_IMPORTED_MODULE_15__);
/* harmony import */ var _material_ui_icons_SaveAlt__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @material-ui/icons/SaveAlt */ "@material-ui/icons/SaveAlt");
/* harmony import */ var _material_ui_icons_SaveAlt__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(_material_ui_icons_SaveAlt__WEBPACK_IMPORTED_MODULE_16__);
/* harmony import */ var _material_ui_icons_Search__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @material-ui/icons/Search */ "@material-ui/icons/Search");
/* harmony import */ var _material_ui_icons_Search__WEBPACK_IMPORTED_MODULE_17___default = /*#__PURE__*/__webpack_require__.n(_material_ui_icons_Search__WEBPACK_IMPORTED_MODULE_17__);
/* harmony import */ var _material_ui_icons_ViewColumn__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @material-ui/icons/ViewColumn */ "@material-ui/icons/ViewColumn");
/* harmony import */ var _material_ui_icons_ViewColumn__WEBPACK_IMPORTED_MODULE_18___default = /*#__PURE__*/__webpack_require__.n(_material_ui_icons_ViewColumn__WEBPACK_IMPORTED_MODULE_18__);




















var tableIcons = {
  Add: /*#__PURE__*/Object(react__WEBPACK_IMPORTED_MODULE_1__["forwardRef"])(function (props, ref) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_icons_AddBox__WEBPACK_IMPORTED_MODULE_4___default.a, _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0___default()({}, props, {
      ref: ref
    }));
  }),
  Check: /*#__PURE__*/Object(react__WEBPACK_IMPORTED_MODULE_1__["forwardRef"])(function (props, ref) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_icons_Check__WEBPACK_IMPORTED_MODULE_6___default.a, _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0___default()({}, props, {
      ref: ref
    }));
  }),
  Clear: /*#__PURE__*/Object(react__WEBPACK_IMPORTED_MODULE_1__["forwardRef"])(function (props, ref) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_icons_Clear__WEBPACK_IMPORTED_MODULE_9___default.a, _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0___default()({}, props, {
      ref: ref
    }));
  }),
  Delete: /*#__PURE__*/Object(react__WEBPACK_IMPORTED_MODULE_1__["forwardRef"])(function (props, ref) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_icons_DeleteOutline__WEBPACK_IMPORTED_MODULE_10___default.a, _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0___default()({}, props, {
      ref: ref
    }));
  }),
  DetailPanel: /*#__PURE__*/Object(react__WEBPACK_IMPORTED_MODULE_1__["forwardRef"])(function (props, ref) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_icons_ChevronRight__WEBPACK_IMPORTED_MODULE_8___default.a, _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0___default()({}, props, {
      ref: ref
    }));
  }),
  Edit: /*#__PURE__*/Object(react__WEBPACK_IMPORTED_MODULE_1__["forwardRef"])(function (props, ref) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_icons_Edit__WEBPACK_IMPORTED_MODULE_11___default.a, _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0___default()({}, props, {
      ref: ref
    }));
  }),
  Export: /*#__PURE__*/Object(react__WEBPACK_IMPORTED_MODULE_1__["forwardRef"])(function (props, ref) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_icons_SaveAlt__WEBPACK_IMPORTED_MODULE_16___default.a, _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0___default()({}, props, {
      ref: ref
    }));
  }),
  Filter: /*#__PURE__*/Object(react__WEBPACK_IMPORTED_MODULE_1__["forwardRef"])(function (props, ref) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_icons_FilterList__WEBPACK_IMPORTED_MODULE_12___default.a, _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0___default()({}, props, {
      ref: ref
    }));
  }),
  FirstPage: /*#__PURE__*/Object(react__WEBPACK_IMPORTED_MODULE_1__["forwardRef"])(function (props, ref) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_icons_FirstPage__WEBPACK_IMPORTED_MODULE_13___default.a, _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0___default()({}, props, {
      ref: ref
    }));
  }),
  LastPage: /*#__PURE__*/Object(react__WEBPACK_IMPORTED_MODULE_1__["forwardRef"])(function (props, ref) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_icons_LastPage__WEBPACK_IMPORTED_MODULE_14___default.a, _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0___default()({}, props, {
      ref: ref
    }));
  }),
  NextPage: /*#__PURE__*/Object(react__WEBPACK_IMPORTED_MODULE_1__["forwardRef"])(function (props, ref) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_icons_ChevronRight__WEBPACK_IMPORTED_MODULE_8___default.a, _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0___default()({}, props, {
      ref: ref
    }));
  }),
  PreviousPage: /*#__PURE__*/Object(react__WEBPACK_IMPORTED_MODULE_1__["forwardRef"])(function (props, ref) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_icons_ChevronLeft__WEBPACK_IMPORTED_MODULE_7___default.a, _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0___default()({}, props, {
      ref: ref
    }));
  }),
  ResetSearch: /*#__PURE__*/Object(react__WEBPACK_IMPORTED_MODULE_1__["forwardRef"])(function (props, ref) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_icons_Clear__WEBPACK_IMPORTED_MODULE_9___default.a, _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0___default()({}, props, {
      ref: ref
    }));
  }),
  Search: /*#__PURE__*/Object(react__WEBPACK_IMPORTED_MODULE_1__["forwardRef"])(function (props, ref) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_icons_Search__WEBPACK_IMPORTED_MODULE_17___default.a, _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0___default()({}, props, {
      ref: ref
    }));
  }),
  SortArrow: /*#__PURE__*/Object(react__WEBPACK_IMPORTED_MODULE_1__["forwardRef"])(function (props, ref) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_icons_ArrowDownward__WEBPACK_IMPORTED_MODULE_5___default.a, _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0___default()({}, props, {
      ref: ref
    }));
  }),
  ThirdStateCheck: /*#__PURE__*/Object(react__WEBPACK_IMPORTED_MODULE_1__["forwardRef"])(function (props, ref) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_icons_Remove__WEBPACK_IMPORTED_MODULE_15___default.a, _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0___default()({}, props, {
      ref: ref
    }));
  }),
  ViewColumn: /*#__PURE__*/Object(react__WEBPACK_IMPORTED_MODULE_1__["forwardRef"])(function (props, ref) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_icons_ViewColumn__WEBPACK_IMPORTED_MODULE_18___default.a, _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0___default()({}, props, {
      ref: ref
    }));
  })
}; // More information in: https://material-table.com/#/docs/all-props

var Table = function Table(props) {
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(material_table__WEBPACK_IMPORTED_MODULE_3___default.a, {
    style: props.style,
    title: props.title,
    columns: props.columns,
    data: props.data,
    icons: tableIcons,
    actions: props.actions,
    options: props.options,
    components: props.components,
    localization: props.localization
  });
};

Table.propTypes = {
  style: prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.object,
  title: prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.string,
  columns: prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.array,
  data: prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.array,
  actions: prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.array,
  options: prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.object,
  components: prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.object,
  localization: prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.object
};
Table.defaultProps = {
  style: {},
  title: "",
  columns: [],
  data: [],
  actions: [],
  options: {
    actionsColumnIndex: -1,
    draggable: false,
    grouping: false,
    search: false,
    toolbar: false,
    searchFieldAlignment: "left",
    paging: false
  },
  components: {}
};
/* harmony default export */ __webpack_exports__["default"] = (Table);

/***/ }),

/***/ "./src/Components/Tabs.js":
/*!********************************!*\
  !*** ./src/Components/Tabs.js ***!
  \********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return Tabs; });
/* harmony import */ var _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/slicedToArray */ "@babel/runtime/helpers/esm/slicedToArray");
/* harmony import */ var _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/extends */ "@babel/runtime/helpers/esm/extends");
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/objectWithoutProperties */ "@babel/runtime/helpers/esm/objectWithoutProperties");
/* harmony import */ var _babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! prop-types */ "prop-types");
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _material_ui_core_styles__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @material-ui/core/styles */ "@material-ui/core/styles");
/* harmony import */ var _material_ui_core_styles__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _material_ui_core_Tabs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @material-ui/core/Tabs */ "@material-ui/core/Tabs");
/* harmony import */ var _material_ui_core_Tabs__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_Tabs__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _material_ui_core_Tab__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @material-ui/core/Tab */ "@material-ui/core/Tab");
/* harmony import */ var _material_ui_core_Tab__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_Tab__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _material_ui_core_Typography__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @material-ui/core/Typography */ "@material-ui/core/Typography");
/* harmony import */ var _material_ui_core_Typography__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_Typography__WEBPACK_IMPORTED_MODULE_8__);



var _excluded = ["children", "selectedTab", "index"];







function TabPanel(props) {
  var children = props.children,
      selectedTab = props.selectedTab,
      index = props.index,
      other = _babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_2___default()(props, _excluded);

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_material_ui_core_Typography__WEBPACK_IMPORTED_MODULE_8___default.a, _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_1___default()({
    component: "div",
    role: "tabpanel",
    hidden: selectedTab !== index,
    id: "tabpanel-".concat(index),
    "aria-labelledby": "tab-".concat(index)
  }, other), selectedTab === index && children);
}

TabPanel.propTypes = {
  children: prop_types__WEBPACK_IMPORTED_MODULE_4___default.a.node,
  index: prop_types__WEBPACK_IMPORTED_MODULE_4___default.a.any.isRequired,
  selectedTab: prop_types__WEBPACK_IMPORTED_MODULE_4___default.a.any.isRequired
};

function a11yProps(index) {
  return {
    id: "tab-".concat(index),
    "aria-controls": "tabpanel-".concat(index)
  };
}

var useStyles = Object(_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_5__["makeStyles"])(function (theme) {
  return {
    root: {
      flexGrow: 1,
      height: "100%"
    },
    tabPanel: {
      flexGrow: 1,
      minHeight: 0,
      height: "calc(100% - 48px)",
      overflowY: "auto"
    }
  };
});
function Tabs(props) {
  var classes = useStyles();

  var _React$useState = react__WEBPACK_IMPORTED_MODULE_3___default.a.useState(props.selectedTab),
      _React$useState2 = _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_React$useState, 2),
      selectedTab = _React$useState2[0],
      setSelectedTab = _React$useState2[1];

  react__WEBPACK_IMPORTED_MODULE_3___default.a.useEffect(function () {
    if (props.selectedTab !== selectedTab) {
      setSelectedTab(props.selectedTab);
    }
  }, [props.selectedTab]);

  var handleChange = function handleChange(event, newSelectedTab) {
    setSelectedTab(newSelectedTab);
  };

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", {
    className: classes.root
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_material_ui_core_Tabs__WEBPACK_IMPORTED_MODULE_6___default.a, {
    value: selectedTab,
    onChange: handleChange,
    indicatorColor: "primary",
    textColor: "primary"
  }, props.tabList.map(function (tab, index) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_material_ui_core_Tab__WEBPACK_IMPORTED_MODULE_7___default.a, _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_1___default()({
      key: index,
      label: tab.label
    }, a11yProps(index)));
  })), props.tabList.map(function (tab, index) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(TabPanel, {
      key: index,
      selectedTab: selectedTab,
      index: index,
      className: props.scrollable ? classes.tabPanel : undefined
    }, tab.component);
  }));
}
Tabs.propTypes = {
  tabList: prop_types__WEBPACK_IMPORTED_MODULE_4___default.a.array,
  selectedTab: prop_types__WEBPACK_IMPORTED_MODULE_4___default.a.number,
  scrollable: prop_types__WEBPACK_IMPORTED_MODULE_4___default.a.bool
};
Tabs.defaultProps = {
  tabList: [{
    label: "Tab 1",
    component: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", null, "Component 1")
  }, {
    label: "Tab 2",
    component: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", null, "Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.")
  }, {
    label: "Tab 3",
    component: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div", null, "Component 3")
  }],
  selectedTab: 0,
  scrollable: true
};

/***/ }),

/***/ "./src/Components/Text.js":
/*!********************************!*\
  !*** ./src/Components/Text.js ***!
  \********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _material_ui_core_TextField__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @material-ui/core/TextField */ "@material-ui/core/TextField");
/* harmony import */ var _material_ui_core_TextField__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_TextField__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! prop-types */ "prop-types");
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_2__);




var Text = function Text(props) {
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core_TextField__WEBPACK_IMPORTED_MODULE_1___default.a, props);
};

Text.propTypes = {};
Text.defaultProps = {};
/* harmony default export */ __webpack_exports__["default"] = (Text);

/***/ }),

/***/ "./src/Components/Toggle.js":
/*!**********************************!*\
  !*** ./src/Components/Toggle.js ***!
  \**********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "@babel/runtime/helpers/esm/defineProperty");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _material_ui_core_FormControlLabel__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @material-ui/core/FormControlLabel */ "@material-ui/core/FormControlLabel");
/* harmony import */ var _material_ui_core_FormControlLabel__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_FormControlLabel__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _material_ui_core_Switch__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @material-ui/core/Switch */ "@material-ui/core/Switch");
/* harmony import */ var _material_ui_core_Switch__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_Switch__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _material_ui_core_styles__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @material-ui/core/styles */ "@material-ui/core/styles");
/* harmony import */ var _material_ui_core_styles__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _material_ui_core_colors__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @material-ui/core/colors */ "@material-ui/core/colors");
/* harmony import */ var _material_ui_core_colors__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_colors__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! prop-types */ "prop-types");
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_6__);


function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }







var useStyles = Object(_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_4__["makeStyles"])(function (theme) {
  return {
    label: {
      fontFamily: "Roboto",
      fontStyle: "normal",
      fontWeight: "normal",
      fontSize: "14px",
      marginLeft: 0,
      marginRight: 0,
      marginBottom: 0
    },
    colorSwitchBase: {
      color: _material_ui_core_colors__WEBPACK_IMPORTED_MODULE_5__["grey"][300],
      "&$colorChecked": {
        color: _material_ui_core_colors__WEBPACK_IMPORTED_MODULE_5__["green"][500],
        "& + $colorBar": {
          backgroundColor: _material_ui_core_colors__WEBPACK_IMPORTED_MODULE_5__["green"][500]
        }
      }
    },
    colorBar: {},
    colorChecked: {}
  };
});

var Toggle = function Toggle(props) {
  var classes = useStyles();
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_core_FormControlLabel__WEBPACK_IMPORTED_MODULE_2___default.a, {
    control: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_core_Switch__WEBPACK_IMPORTED_MODULE_3___default.a, {
      checked: props.toggle,
      onChange: props.onToggle,
      color: props.color,
      disabled: props.disabled,
      hidden: props.hidden,
      size: props.size,
      classes: {
        switchBase: classes.colorSwitchBase,
        checked: classes.colorChecked,
        track: classes.colorBar
      }
    }),
    labelPlacement: props.labelPlacement,
    label: props.label,
    classes: {
      label: classes.label
    },
    style: _objectSpread(_objectSpread({}, props.style), {}, {
      marginLeft: 0,
      marginRight: 0,
      marginBottom: 0
    })
  });
};

Toggle.propTypes = {
  toggle: prop_types__WEBPACK_IMPORTED_MODULE_6___default.a.bool,
  onToggle: prop_types__WEBPACK_IMPORTED_MODULE_6___default.a.func,
  label: prop_types__WEBPACK_IMPORTED_MODULE_6___default.a.string,
  color: prop_types__WEBPACK_IMPORTED_MODULE_6___default.a.string,
  labelPlacement: prop_types__WEBPACK_IMPORTED_MODULE_6___default.a.string,
  // 'end', 'start', 'top', 'bottom'
  style: prop_types__WEBPACK_IMPORTED_MODULE_6___default.a.object
};
Toggle.defaultProps = {
  color: "primary" // or secondary

};
/* harmony default export */ __webpack_exports__["default"] = (Toggle);

/***/ }),

/***/ "./src/Components/Tree/BasicVirtualizedTree.js":
/*!*****************************************************!*\
  !*** ./src/Components/Tree/BasicVirtualizedTree.js ***!
  \*****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/objectWithoutProperties */ "@babel/runtime/helpers/esm/objectWithoutProperties");
/* harmony import */ var _babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "@babel/runtime/helpers/esm/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "@babel/runtime/helpers/esm/createClass");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/assertThisInitialized */ "@babel/runtime/helpers/esm/assertThisInitialized");
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "@babel/runtime/helpers/esm/inherits");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "@babel/runtime/helpers/esm/possibleConstructorReturn");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "@babel/runtime/helpers/esm/getPrototypeOf");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "@babel/runtime/helpers/esm/defineProperty");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! prop-types */ "prop-types");
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var react_virtualized_tree__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! react-virtualized-tree */ "react-virtualized-tree");
/* harmony import */ var react_virtualized_tree__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(react_virtualized_tree__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var material_icons_css_material_icons_css__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! material-icons/css/material-icons.css */ "material-icons/css/material-icons.css");
/* harmony import */ var material_icons_css_material_icons_css__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(material_icons_css_material_icons_css__WEBPACK_IMPORTED_MODULE_11__);
/* harmony import */ var react_virtualized_styles_css__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! react-virtualized/styles.css */ "react-virtualized/styles.css");
/* harmony import */ var react_virtualized_styles_css__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(react_virtualized_styles_css__WEBPACK_IMPORTED_MODULE_12__);
/* harmony import */ var react_virtualized_tree_lib_main_css__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! react-virtualized-tree/lib/main.css */ "react-virtualized-tree/lib/main.css");
/* harmony import */ var react_virtualized_tree_lib_main_css__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(react_virtualized_tree_lib_main_css__WEBPACK_IMPORTED_MODULE_13__);
/* harmony import */ var _material_ui_icons_ExpandMore__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @material-ui/icons/ExpandMore */ "@material-ui/icons/ExpandMore");
/* harmony import */ var _material_ui_icons_ExpandMore__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(_material_ui_icons_ExpandMore__WEBPACK_IMPORTED_MODULE_14__);
/* harmony import */ var _material_ui_icons_ChevronRight__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @material-ui/icons/ChevronRight */ "@material-ui/icons/ChevronRight");
/* harmony import */ var _material_ui_icons_ChevronRight__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(_material_ui_icons_ChevronRight__WEBPACK_IMPORTED_MODULE_15__);
/* harmony import */ var _material_ui_core_Box__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @material-ui/core/Box */ "@material-ui/core/Box");
/* harmony import */ var _material_ui_core_Box__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_Box__WEBPACK_IMPORTED_MODULE_16__);
/* harmony import */ var _material_ui_core_Grid__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @material-ui/core/Grid */ "@material-ui/core/Grid");
/* harmony import */ var _material_ui_core_Grid__WEBPACK_IMPORTED_MODULE_17___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_Grid__WEBPACK_IMPORTED_MODULE_17__);
/* harmony import */ var _material_ui_core_styles__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @material-ui/core/styles */ "@material-ui/core/styles");
/* harmony import */ var _material_ui_core_styles__WEBPACK_IMPORTED_MODULE_18___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_18__);
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! lodash/get */ "lodash/get");
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_19___default = /*#__PURE__*/__webpack_require__.n(lodash_get__WEBPACK_IMPORTED_MODULE_19__);
/* harmony import */ var _TreeSearch__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./TreeSearch */ "./src/Components/Tree/TreeSearch.js");








var _excluded = ["style", "node"];

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7___default()(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6___default()(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6___default()(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5___default()(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }













 //========================================================================================

/*                                                                                      *
 *                                     TODO REFACTOR                                    *
 *                                                                                      */
//========================================================================================

var styles = function styles(theme) {
  return {
    horizFlex: {
      display: "flex",
      flexDirection: "row",
      alignItems: "center"
    },
    spaceBetween: {
      display: "flex",
      width: "100%",
      justifyContent: "space-between"
    },
    preContainer: {
      justifyContent: "space-between",
      "& button": {
        display: "none"
      },
      "&:hover": {
        backgroundColor: "rgba(54,181,230, 0.15)",
        "& button": {
          display: "inline-flex"
        }
      }
    },
    ellipsis: {
      whiteSpace: "nowrap",
      overflow: "hidden",
      textOverflow: "ellipsis",
      flex: 2
    },
    iconSpace: {
      flex: 1,
      textAlign: "right",
      minWidth: "45px",
      "& button": {
        position: "relative",
        bottom: "7px",
        padding: "7px"
      }
    }
  };
}; // const {Deletable, Expandable, Favorite} = Renderers;


var testArray = [];

for (var index = 0; index < 100; index++) {
  testArray.push({
    id: index,
    name: "1.0.".concat(index)
  });
}

var EXPANDED = "EXPANDED";

var BasicVirtualizedTree = /*#__PURE__*/function (_Component) {
  _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4___default()(BasicVirtualizedTree, _Component);

  var _super = _createSuper(BasicVirtualizedTree);

  function BasicVirtualizedTree() {
    var _this;

    _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default()(this, BasicVirtualizedTree);

    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _this = _super.call.apply(_super, [this].concat(args));

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3___default()(_this), "state", {
      selectedGroup: EXPANDED,
      groupsEnabled: true,
      searchValue: ""
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3___default()(_this), "searchFilter", function (nodes, searchValue) {
      var searchValueLower = searchValue.toLowerCase();
      var filteredNodes = nodes.filter(function (node) {
        return !node.name.includes("@SM") && node.name.toLowerCase().includes(searchValueLower) || node.children.findIndex(function (ch) {
          return ch.name.toLowerCase().includes(searchValueLower);
        }) >= 0;
      }).map(function (node) {
        return _objectSpread(_objectSpread({}, node), {}, {
          children: ((node === null || node === void 0 ? void 0 : node.children) || []).filter(function (ch) {
            return ch.name && !ch.name.includes("@SM") && (node.name.toLowerCase().includes(searchValueLower) || ch.name.toLowerCase().includes(searchValueLower));
          })
        });
      }); // Add children id if missing

      filteredNodes.forEach(function (node) {
        node.children.forEach(function (child, i) {
          child.id = child.id ? child.id : i;

          if (child.children) {
            child.children.forEach(function (grandChild, j) {
              grandChild.id = grandChild.id ? grandChild.id : j;
            });
          }
        });
      });
      return filteredNodes;
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3___default()(_this), "handleSelectedGroupChange", function (selectedGroup) {
      _this.setState({
        selectedGroup: selectedGroup
      });
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3___default()(_this), "handleExpansion", function (evt, nodes, node, open) {// const treeData = _cloneDeep(nodes);
      // _set(treeData, [node.id, "state"], {
      //   expanded: open
      // });
      // evt.stopPropagation();
      // this.props.handleChange(treeData);
    });

    return _this;
  }

  _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2___default()(BasicVirtualizedTree, [{
    key: "render",
    value: function render() {
      var _this2 = this;

      var classes = this.props.classes;
      var iconStyle = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_8___default.a.createElement("i", {
        className: "fas fa-home"
      });
      var nodes = this.props.data;
      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_8___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_8___default.a.createElement(_TreeSearch__WEBPACK_IMPORTED_MODULE_20__["ListItemsTreeWithSearch"], {
        style: {
          overflow: "auto"
        },
        icon: iconStyle,
        onSearch: function onSearch(input) {
          _this2.setState({
            searchValue: input
          });
        }
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_8___default.a.createElement("div", {
        style: {
          height: this.props.height
        }
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_8___default.a.createElement(react_virtualized_tree__WEBPACK_IMPORTED_MODULE_10___default.a, {
        nodes: this.searchFilter(nodes, this.state.searchValue),
        onChange: this.props.handleChange
      }, function (_ref) {
        var _node$state, _node$state2;

        var style = _ref.style,
            node = _ref.node,
            rest = _babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_0___default()(_ref, _excluded);

        // Adjust tree indentation
        style.paddingLeft = style.marginLeft / 1.5;
        style.marginLeft = 0; // Render tree element

        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_8___default.a.createElement("div", {
          style: style,
          onClick: function onClick() {
            return _this2.props.onClickNode(node);
          },
          onDoubleClick: function onDoubleClick() {
            return _this2.props.onDoubleClickNode(node);
          },
          p: 2,
          className: !lodash_get__WEBPACK_IMPORTED_MODULE_19___default()(node, "children", false) ? classes.preContainer : ""
        }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_8___default.a.createElement(_material_ui_core_Box__WEBPACK_IMPORTED_MODULE_16___default.a, {
          p: 1,
          className: classes.inlineFlex
        }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_8___default.a.createElement(_material_ui_core_Grid__WEBPACK_IMPORTED_MODULE_17___default.a, {
          alignContent: "space-between",
          container: true
        }, lodash_get__WEBPACK_IMPORTED_MODULE_19___default()(node, "children", false) && ((_node$state = node.state) === null || _node$state === void 0 ? void 0 : _node$state.expanded) && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_8___default.a.createElement(_material_ui_icons_ExpandMore__WEBPACK_IMPORTED_MODULE_14___default.a, {
          onClick: function onClick(evt) {
            return _this2.handleExpansion(evt, nodes, node, false);
          }
        }), lodash_get__WEBPACK_IMPORTED_MODULE_19___default()(node, "children", false) && !((_node$state2 = node.state) !== null && _node$state2 !== void 0 && _node$state2.expanded) && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_8___default.a.createElement(_material_ui_icons_ChevronRight__WEBPACK_IMPORTED_MODULE_15___default.a, {
          onClick: function onClick(evt) {
            return _this2.handleExpansion(evt, nodes, node, true);
          }
        }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_8___default.a.createElement("div", {
          className: !lodash_get__WEBPACK_IMPORTED_MODULE_19___default()(node, "children", false) ? classes.spaceBetween : ""
        }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_8___default.a.createElement("div", {
          className: classes.ellipsis
        }, node.name)))));
      }))));
    }
  }]);

  return BasicVirtualizedTree;
}(react__WEBPACK_IMPORTED_MODULE_8__["Component"]);

BasicVirtualizedTree.propTypes = {
  data: prop_types__WEBPACK_IMPORTED_MODULE_9___default.a.array,
  onClickNode: prop_types__WEBPACK_IMPORTED_MODULE_9___default.a.func,
  onDoubleClickNode: prop_types__WEBPACK_IMPORTED_MODULE_9___default.a.func,
  handleChange: prop_types__WEBPACK_IMPORTED_MODULE_9___default.a.func,
  height: prop_types__WEBPACK_IMPORTED_MODULE_9___default.a.oneOfType([prop_types__WEBPACK_IMPORTED_MODULE_9___default.a.string, prop_types__WEBPACK_IMPORTED_MODULE_9___default.a.number])
};
BasicVirtualizedTree.defaultProps = {
  data: [],
  onClickNode: function onClickNode() {},
  onDoubleClickNode: function onDoubleClickNode() {},
  handleChange: function handleChange() {},
  height: 700
};
/* harmony default export */ __webpack_exports__["default"] = (Object(_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_18__["withStyles"])(styles, {
  withTheme: true
})(BasicVirtualizedTree));

/***/ }),

/***/ "./src/Components/Tree/TreeSearch.js":
/*!*******************************************!*\
  !*** ./src/Components/Tree/TreeSearch.js ***!
  \*******************************************/
/*! exports provided: ListItemsTree, ListItemsTreeWithSearch, ListItemsTreeWithTitle */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ListItemsTree", function() { return ListItemsTree; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ListItemsTreeWithSearch", function() { return ListItemsTreeWithSearch; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ListItemsTreeWithTitle", function() { return ListItemsTreeWithTitle; });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "@babel/runtime/helpers/esm/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "@babel/runtime/helpers/esm/createClass");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/assertThisInitialized */ "@babel/runtime/helpers/esm/assertThisInitialized");
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "@babel/runtime/helpers/esm/inherits");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "@babel/runtime/helpers/esm/possibleConstructorReturn");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "@babel/runtime/helpers/esm/getPrototypeOf");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "@babel/runtime/helpers/esm/defineProperty");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _material_ui_core__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @material-ui/core */ "@material-ui/core");
/* harmony import */ var _material_ui_core__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! prop-types */ "prop-types");
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var _material_ui_icons_Search__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @material-ui/icons/Search */ "@material-ui/icons/Search");
/* harmony import */ var _material_ui_icons_Search__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(_material_ui_icons_Search__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var _material_ui_icons_Clear__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @material-ui/icons/Clear */ "@material-ui/icons/Clear");
/* harmony import */ var _material_ui_icons_Clear__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(_material_ui_icons_Clear__WEBPACK_IMPORTED_MODULE_11__);
/* harmony import */ var _i18n_i18n_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../i18n/i18n.js */ "./src/i18n/i18n.js");








function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5___default()(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5___default()(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4___default()(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }








var TreeSearch = /*#__PURE__*/function (_Component) {
  _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3___default()(TreeSearch, _Component);

  var _super = _createSuper(TreeSearch);

  function TreeSearch() {
    var _this;

    _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default()(this, TreeSearch);

    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _this = _super.call.apply(_super, [this].concat(args));

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default()(_this), "searchInput", null);

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default()(_this), "timer", null);

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default()(_this), "inputRef", /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createRef());

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default()(_this), "handleChange", function (evt) {
      _this.searchInput = evt.target.value;

      if (_this.timer) {
        clearTimeout(_this.timer);
      }

      _this.timer = setTimeout(_this.handleSearch, 250);
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default()(_this), "handleSearch", function () {
      if (_this.searchInput !== null) _this.props.search(_this.searchInput);
    });

    return _this;
  }

  _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1___default()(TreeSearch, [{
    key: "resetValue",
    value: function resetValue() {
      var input = this.inputRef.current.children[0];
      input.value = "";
      input.focus();
      this.searchInput = "";
      this.handleSearch();
      this.forceUpdate();
    }
  }, {
    key: "isEmpty",
    value: function isEmpty() {
      return this.searchInput === null || this.searchInput.trim() === "";
    }
  }, {
    key: "render",
    value: function render() {
      var _this2 = this;

      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_8__["Typography"], {
        component: "div",
        style: {
          padding: "2px 4px",
          display: "flex",
          alignItems: "center",
          width: "100%"
        }
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_8__["InputBase"], {
        ref: this.inputRef,
        style: {
          marginLeft: 10,
          flex: 1
        },
        placeholder: _i18n_i18n_js__WEBPACK_IMPORTED_MODULE_12__["default"].t("Search"),
        onChange: this.handleChange
      }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_8__["IconButton"], {
        style: {
          padding: 10
        },
        onClick: function onClick() {
          if (!_this2.isEmpty()) {
            _this2.resetValue();
          }
        }
      }, this.isEmpty() ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_icons_Search__WEBPACK_IMPORTED_MODULE_10___default.a, null) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_icons_Clear__WEBPACK_IMPORTED_MODULE_11___default.a, null)));
    }
  }]);

  return TreeSearch;
}(react__WEBPACK_IMPORTED_MODULE_7__["Component"]);
/**
 *
 * @param {*} props: contains children which are Items
 */


var ListItemsTree = function ListItemsTree(props) {
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_8__["List"], {
    style: _objectSpread({
      paddingLeft: "0px",
      paddingRight: "0px"
    }, props.style),
    dense: true,
    component: "div",
    onKeyUp: props.onKeyUp
  }, props.children);
};

var ListItemsTreeWithTitle = function ListItemsTreeWithTitle(props) {
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(ListItemsTree, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_8__["ListItem"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_8__["Typography"], {
    component: props.variant
  }, props.title)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_8__["Divider"], null), props.children);
};
/* 
  TODO: think about how to generalize the search

  Using either the _shared/Search method or using a predicate 
*/


var ListItemsTreeWithSearch = function ListItemsTreeWithSearch(props) {
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(ListItemsTree, {
    style: {
      flexGrow: 1,
      paddingBottom: "0px",
      paddingTop: "0px"
    },
    onKeyUp: props.onKeyUp
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_8__["ListItem"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(TreeSearch, {
    search: function search(input) {
      return props.onSearch(input);
    }
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_8__["Divider"], null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_8__["Typography"], {
    style: props.style,
    component: "div"
  }, react__WEBPACK_IMPORTED_MODULE_7___default.a.Children.map(props.children, function (x) {
    return x;
  })));
};

ListItemsTreeWithSearch.propTypes = {
  onSearch: prop_types__WEBPACK_IMPORTED_MODULE_9___default.a.func
};
ListItemsTreeWithSearch.defaultProps = {
  onSearch: function onSearch(input) {
    return console.log(input);
  }
};


/***/ }),

/***/ "./src/Components/VerticalBar.js":
/*!***************************************!*\
  !*** ./src/Components/VerticalBar.js ***!
  \***************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _material_ui_core_styles__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @material-ui/core/styles */ "@material-ui/core/styles");
/* harmony import */ var _material_ui_core_styles__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! prop-types */ "prop-types");
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_2__);



var useStyles = Object(_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_1__["makeStyles"])(function (theme) {
  return {
    container: {
      width: 65,
      height: "100%",
      display: "flex",
      flexDirection: "column",
      backgroundColor: function backgroundColor(props) {
        return props.backgroundColor;
      }
    },
    logoArea: {
      padding: "17px",
      textAlign: "center",
      alignItems: "center",
      justifyContent: "center"
    },
    navigationArea: {
      flexGrow: 1,
      display: "flex",
      flexDirection: "column",
      alignItems: "center"
    },
    accountArea: {
      padding: function padding(props) {
        return props.unsetAccountAreaPadding ? "unset" : "17px";
      },
      textAlign: "center",
      alignItems: "center",
      justifyContent: "center"
    }
  };
});

var VerticalBar = function VerticalBar(props) {
  var classes = useStyles(props);
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    className: classes.container
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    className: classes.logoArea
  }, props.upperElement), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    className: classes.navigationArea
  }, props.navigationList.map(function (element, index) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
      key: index,
      style: {
        padding: "15px 0px"
      }
    }, element);
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    className: classes.accountArea
  }, props.lowerElement));
};

VerticalBar.propTypes = {
  upperElement: prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.node,
  navigationList: prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.array,
  lowerElement: prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.node.isRequired,
  backgroundColor: prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.string,
  unsetAccountAreaPadding: prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.bool
};
VerticalBar.defaultProps = {
  upperElement: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", null),
  navigationList: [/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", null)],
  lowerElement: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", null),
  backgroundColor: "#424242",
  unsetAccountAreaPadding: false
};
/* harmony default export */ __webpack_exports__["default"] = (VerticalBar);

/***/ }),

/***/ "./src/Components/Viewer/Actions/Action.js":
/*!*************************************************!*\
  !*** ./src/Components/Viewer/Actions/Action.js ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "@babel/runtime/helpers/esm/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "@babel/runtime/helpers/esm/createClass");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__);



var Action = /*#__PURE__*/function () {
  function Action() {
    _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default()(this, Action);

    this.memory = {};
  }

  _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1___default()(Action, [{
    key: "action",
    value: function action(parentView) {
      parentView.getSceneMemory().forEach(function (memory) {
        memory.gizmoManager.attachedMesh = null;
        memory.camera.attachControl(memory.canvas, true);
      });
      parentView.closeContextDial && parentView.closeContextDial();
      parentView.setContextActionIndex && parentView.setContextActionIndex();
    }
  }, {
    key: "onChange",
    value: function onChange(parentView) {// to be overwritten by children
    }
  }]);

  return Action;
}();

/* harmony default export */ __webpack_exports__["default"] = (Action);

/***/ }),

/***/ "./src/Components/Viewer/Actions/AddKeyPointAction.js":
/*!************************************************************!*\
  !*** ./src/Components/Viewer/Actions/AddKeyPointAction.js ***!
  \************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/extends */ "@babel/runtime/helpers/esm/extends");
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "@babel/runtime/helpers/esm/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "@babel/runtime/helpers/esm/createClass");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/assertThisInitialized */ "@babel/runtime/helpers/esm/assertThisInitialized");
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "@babel/runtime/helpers/esm/inherits");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "@babel/runtime/helpers/esm/possibleConstructorReturn");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/esm/get */ "@babel/runtime/helpers/esm/get");
/* harmony import */ var _babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "@babel/runtime/helpers/esm/getPrototypeOf");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "@babel/runtime/helpers/esm/defineProperty");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../Util3d/Util3d */ "./src/Components/Viewer/Util3d/Util3d.js");
/* harmony import */ var _NodeItem_KeyPoint__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../NodeItem/KeyPoint */ "./src/Components/Viewer/NodeItem/KeyPoint.js");
/* harmony import */ var _Math_Vec3__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../Math/Vec3 */ "./src/Components/Viewer/Math/Vec3.js");
/* harmony import */ var monet__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! monet */ "monet");
/* harmony import */ var monet__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(monet__WEBPACK_IMPORTED_MODULE_12__);
/* harmony import */ var _MouseKeysAction__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./MouseKeysAction */ "./src/Components/Viewer/Actions/MouseKeysAction.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_14__);
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @babylonjs/core */ "@babylonjs/core");
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(_babylonjs_core__WEBPACK_IMPORTED_MODULE_15__);
/* harmony import */ var mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! mov-fe-lib-core */ "mov-fe-lib-core");
/* harmony import */ var mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_16__);










function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7___default()(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7___default()(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5___default()(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }










var AddKeyPointAction = /*#__PURE__*/function (_MouseKeysAction) {
  _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4___default()(AddKeyPointAction, _MouseKeysAction);

  var _super = _createSuper(AddKeyPointAction);

  function AddKeyPointAction() {
    var _thisSuper, _this;

    _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default()(this, AddKeyPointAction);

    _this = _super.call(this);

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3___default()(_this), "action", function (parentView) {
      _babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_6___default()((_thisSuper = _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3___default()(_this), _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7___default()(AddKeyPointAction.prototype)), "action", _thisSuper).call(_thisSuper, parentView);

      parentView.setSelectedAction(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3___default()(_this));
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3___default()(_this), "onPointerDown", function (evt, parentView) {
      if (evt.button !== 0) {
        return;
      }

      parentView.getSceneMemory().forEach(function (memory) {
        var scene = memory.scene,
            ground = memory.ground,
            camera = memory.camera;
        _this.maybeMousePos = _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_9__["default"].getGroundPosition(scene, ground);

        _this.maybeMousePos.forEach(function (mousePos) {
          camera.detachControl(memory.canvas);
        });
      });
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3___default()(_this), "onPointerMove", function (evt, parentView) {
      parentView.getSceneMemory().forEach(function (memory) {
        var scene = memory.scene;
        var ground = memory.ground;
        var maybeCurrent = _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_9__["default"].getGroundPosition(scene, ground);
        maybeCurrent.forEach(function (current) {
          _this.maybeMousePos.forEach(function (oldMousePos) {
            if (_this.tempMesh) _this.tempMesh.dispose();
            _this.tempMesh = _this.createKeyPoint(current, TEMP_KEY_POINT_NAME, scene, parentView, false);
          });
        });
      });
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3___default()(_this), "onPointerUp", function (evt, parentView) {
      parentView.getSceneMemory().forEach(function (_ref) {
        var scene = _ref.scene,
            camera = _ref.camera,
            ground = _ref.ground,
            canvas = _ref.canvas;
        var maybeCurrent = _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_9__["default"].getGroundPosition(scene, ground);
        maybeCurrent.forEach(function (current) {
          _this.maybeMousePos.forEach(function (oldMousePos) {
            if (_this.tempMesh) _this.tempMesh.dispose();
            var name = "KeyPoint".concat(Math.floor(Math.random() * 1e3));

            var keyPoint = _this.createKeyPoint(current, name, scene, parentView, true, new _babylonjs_core__WEBPACK_IMPORTED_MODULE_15__["Color3"](Math.random(), Math.random(), Math.random()));

            parentView.setPropertiesWithName(name);
            parentView.getUndoManager().addIt(_this.getUndoAbleAction(keyPoint, scene, parentView));
          });
        });
        _this.maybeMousePos = monet__WEBPACK_IMPORTED_MODULE_12__["Maybe"].none();
        camera.attachControl(canvas, true);
      });
    });

    _this.key = "addKeyPoint";
    _this.name = "Add Key Point [4]";
    _this.maybeMousePos = monet__WEBPACK_IMPORTED_MODULE_12__["Maybe"].none();
    _this.tempMesh = null;

    _this.icon = function (props) {
      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_14___default.a.createElement("i", _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0___default()({
        className: "fas fa-map-marker"
      }, props));
    };

    return _this;
  }

  _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2___default()(AddKeyPointAction, [{
    key: "createKeyPoint",
    value: function createKeyPoint(position, name, scene, parentView) {
      var is2addInServer = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : true;
      var color = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : _babylonjs_core__WEBPACK_IMPORTED_MODULE_15__["Color3"].Gray();
      var rootMesh = parentView.getRootNode().item.mesh;
      var keyPoint = _NodeItem_KeyPoint__WEBPACK_IMPORTED_MODULE_10__["default"].ofDict(scene, {
        name: name,
        color: [color.r, color.g, color.b]
      });
      var mesh = keyPoint.mesh;
      mesh.parent = rootMesh;
      var localPosition = _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_9__["default"].getLocalCoordFromWorld({
        parent: rootMesh
      }, _Math_Vec3__WEBPACK_IMPORTED_MODULE_11__["default"].ofBabylon(position)).toBabylon();
      mesh.setPositionWithLocalVector(localPosition.add(_babylonjs_core__WEBPACK_IMPORTED_MODULE_15__["Axis"].Z.scale(_NodeItem_KeyPoint__WEBPACK_IMPORTED_MODULE_10__["default"].DEFAULT_SIZE)));

      if (is2addInServer) {
        parentView.addNodeItem2Tree(keyPoint, rootMesh.name, is2addInServer);
      }

      return mesh;
    }
  }, {
    key: "getUndoAbleAction",
    value: function getUndoAbleAction(mesh, scene, parentView) {
      var _this2 = this;

      return mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_16__["UndoManager"].actionBuilder().doAction(function () {
        var keyPoint = _this2.createKeyPoint(_babylonjs_core__WEBPACK_IMPORTED_MODULE_15__["Vector3"].Zero(), mesh.name, scene, parentView, true, mesh.material.diffuseColor);

        keyPoint.position = mesh.position;
        parentView.updateNodeInServer(mesh.name);
      }).undoAction(function (_ref2) {
        var _ref2$is2UpdateInServ = _ref2.is2UpdateInServer,
            is2UpdateInServer = _ref2$is2UpdateInServ === void 0 ? true : _ref2$is2UpdateInServ;
        parentView.deleteNodeFromTreeUsingName(mesh.name, is2UpdateInServer);
      }).build();
    }
  }]);

  return AddKeyPointAction;
}(_MouseKeysAction__WEBPACK_IMPORTED_MODULE_13__["default"]);

var TEMP_KEY_POINT_NAME = "temp_key_point";
/* harmony default export */ __webpack_exports__["default"] = (AddKeyPointAction);

/***/ }),

/***/ "./src/Components/Viewer/Actions/AddMapAction.js":
/*!*******************************************************!*\
  !*** ./src/Components/Viewer/Actions/AddMapAction.js ***!
  \*******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/slicedToArray */ "@babel/runtime/helpers/esm/slicedToArray");
/* harmony import */ var _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/extends */ "@babel/runtime/helpers/esm/extends");
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/asyncToGenerator */ "@babel/runtime/helpers/esm/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "@babel/runtime/helpers/esm/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "@babel/runtime/helpers/esm/createClass");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/assertThisInitialized */ "@babel/runtime/helpers/esm/assertThisInitialized");
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/esm/get */ "@babel/runtime/helpers/esm/get");
/* harmony import */ var _babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "@babel/runtime/helpers/esm/inherits");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "@babel/runtime/helpers/esm/possibleConstructorReturn");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "@babel/runtime/helpers/esm/getPrototypeOf");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "@babel/runtime/helpers/esm/defineProperty");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_11__);
/* harmony import */ var _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../Util3d/Util3d */ "./src/Components/Viewer/Util3d/Util3d.js");
/* harmony import */ var _Math_Vec3__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../Math/Vec3 */ "./src/Components/Viewer/Math/Vec3.js");
/* harmony import */ var _Action__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./Action */ "./src/Components/Viewer/Actions/Action.js");
/* harmony import */ var _NodeItem_Map__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../NodeItem/Map */ "./src/Components/Viewer/NodeItem/Map.js");
/* harmony import */ var monet__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! monet */ "monet");
/* harmony import */ var monet__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(monet__WEBPACK_IMPORTED_MODULE_16__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_17___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_17__);
/* harmony import */ var _NodeItem_GlobalRef__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../NodeItem/GlobalRef */ "./src/Components/Viewer/NodeItem/GlobalRef.js");
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @babylonjs/core */ "@babylonjs/core");
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_19___default = /*#__PURE__*/__webpack_require__.n(_babylonjs_core__WEBPACK_IMPORTED_MODULE_19__);
/* harmony import */ var _Utils_DefaultScene__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../Utils/DefaultScene */ "./src/Components/Viewer/Utils/DefaultScene.js");
/* harmony import */ var _MainView_MainViewActions__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../MainView/MainViewActions */ "./src/Components/Viewer/MainView/MainViewActions.js");
/* harmony import */ var mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! mov-fe-lib-core */ "mov-fe-lib-core");
/* harmony import */ var mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_22___default = /*#__PURE__*/__webpack_require__.n(mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_22__);
/* harmony import */ var _AssetsManager_AssetsManager__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../AssetsManager/AssetsManager */ "./src/Components/Viewer/AssetsManager/AssetsManager.js");













function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_9___default()(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_9___default()(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_8___default()(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }














var AddMapAction = /*#__PURE__*/function (_Action) {
  _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_7___default()(AddMapAction, _Action);

  var _super = _createSuper(AddMapAction);

  function AddMapAction(name, mapLoader) {
    var _this;

    _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3___default()(this, AddMapAction);

    _this = _super.call(this);

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_10___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5___default()(_this), "getType", function () {
      return AddMapAction.TYPE;
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_10___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5___default()(_this), "deleteAsset", function () {});

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_10___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5___default()(_this), "download", /*#__PURE__*/_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_11___default.a.mark(function _callee() {
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_11___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
            case "end":
              return _context.stop();
          }
        }
      }, _callee);
    })));

    _this.name = name;
    _this.key = "addMap".concat(name);
    _this.mapLoader = mapLoader;

    _this.icon = function (props) {
      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_17___default.a.createElement("i", _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_1___default()({}, props, {
        className: "fas fa-map"
      }));
    };

    _this.firstTimeLoad = true;
    return _this;
  }

  _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_4___default()(AddMapAction, [{
    key: "addMap",
    value: function addMap(parentView) {
      var _this2 = this;

      parentView.getSceneMemory().forEach( /*#__PURE__*/function () {
        var _ref2 = _babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_11___default.a.mark(function _callee2(memory) {
          var scene, camera, _yield$_this2$mapLoad, textureSrc, resolution, origin, imageSize, width, height, mesh, _origin, xOrigin, yOrigin, yawOrigin, originPos, rootNode, parent, map, isVisible, is2sendServer;

          return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_11___default.a.wrap(function _callee2$(_context2) {
            while (1) {
              switch (_context2.prev = _context2.next) {
                case 0:
                  scene = memory.scene, camera = memory.camera;
                  _context2.next = 3;
                  return _this2.mapLoader.load();

                case 3:
                  _yield$_this2$mapLoad = _context2.sent;
                  textureSrc = _yield$_this2$mapLoad.textureSrc;
                  resolution = _yield$_this2$mapLoad.resolution;
                  origin = _yield$_this2$mapLoad.origin;
                  imageSize = _yield$_this2$mapLoad.imageSize;
                  width = resolution * imageSize[0];
                  height = resolution * imageSize[1];
                  mesh = _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_12__["default"].groundBuilder(scene).name(monet__WEBPACK_IMPORTED_MODULE_16__["Maybe"].fromNull(_this2.memory["name"]).orSome(_this2.name)).width(width).height(height).textureSrc(textureSrc).build();
                  _origin = _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(origin, 3), xOrigin = _origin[0], yOrigin = _origin[1], yawOrigin = _origin[2];
                  originPos = _Math_Vec3__WEBPACK_IMPORTED_MODULE_13__["default"].of([-width / 2, -height / 2, 0]).sub(_Math_Vec3__WEBPACK_IMPORTED_MODULE_13__["default"].of([xOrigin, yOrigin, 0]));
                  rootNode = parentView.getRootNode();
                  parent = rootNode.item.mesh.parent;
                  parent.position = _NodeItem_GlobalRef__WEBPACK_IMPORTED_MODULE_18__["default"].inverseCoordinates(originPos.toBabylon());
                  parent.rotationQuaternion = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_19__["Quaternion"](_NodeItem_GlobalRef__WEBPACK_IMPORTED_MODULE_18__["ROS_ORIGIN"].quaternion[1], _NodeItem_GlobalRef__WEBPACK_IMPORTED_MODULE_18__["ROS_ORIGIN"].quaternion[2], _NodeItem_GlobalRef__WEBPACK_IMPORTED_MODULE_18__["ROS_ORIGIN"].quaternion[3], _NodeItem_GlobalRef__WEBPACK_IMPORTED_MODULE_18__["ROS_ORIGIN"].quaternion[0]);
                  parent.rotate(_babylonjs_core__WEBPACK_IMPORTED_MODULE_19__["Axis"].Z, -yawOrigin, _babylonjs_core__WEBPACK_IMPORTED_MODULE_19__["Space"].LOCAL);
                  camera.setTarget(new _babylonjs_core__WEBPACK_IMPORTED_MODULE_19__["Vector3"](parent.position.x, parent.position.y, parent.position.z));
                  map = new _NodeItem_Map__WEBPACK_IMPORTED_MODULE_15__["default"](mesh, [width, height], _this2.textureSrc, monet__WEBPACK_IMPORTED_MODULE_16__["Maybe"].fromNull(_this2.memory["assetName"]).orSome(_this2.name));
                  isVisible = monet__WEBPACK_IMPORTED_MODULE_16__["Maybe"].fromNull(_this2.memory["isVisible"]).orSome(true);
                  is2sendServer = monet__WEBPACK_IMPORTED_MODULE_16__["Maybe"].fromNull(_this2.memory["isImport"]).map(function (x) {
                    return !x;
                  }).orSome(true);
                  mesh.setEnabled(isVisible);
                  parentView.addNodeItem2Tree(map, null, is2sendServer, isVisible);
                  memory.ground.dispose();
                  memory.ground = _Utils_DefaultScene__WEBPACK_IMPORTED_MODULE_20__["default"].createMeshGround(scene, width, height);
                  _this2.memory["isImport"] = false;

                case 27:
                case "end":
                  return _context2.stop();
              }
            }
          }, _callee2);
        }));

        return function (_x) {
          return _ref2.apply(this, arguments);
        };
      }());
    }
  }, {
    key: "action",
    value: function action(parentView) {
      var _this3 = this;

      _babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_6___default()(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_9___default()(AddMapAction.prototype), "action", this).call(this, parentView);

      var maybeNode = parentView.getNodeFromTree(this.name);
      maybeNode.orElseRun(function () {
        var isImport = _this3.memory["isImport"]; // you shouldn't be able to undo when importing a scene. isImport prevents removing the map when you undo.
        // firstTimeLoad condition to prevent adding a map when fast map switch, TODO: doesn't work

        if (isImport) {
          _this3.addMap(parentView);

          _this3.firstTimeLoad = false;
        } else {
          parentView.getUndoManager().doIt(_this3.getUndoAction(parentView));
        }
      });
      parentView.setSelectedAction(Object(_MainView_MainViewActions__WEBPACK_IMPORTED_MODULE_21__["ACTIONS"])().orbit);
    }
  }, {
    key: "getUndoAction",
    value: function getUndoAction(parentView) {
      var _this4 = this;

      if (parentView.getObjectTree().length < 2) {
        return mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_22__["UndoManager"].actionBuilder().doAction(function () {
          _this4.addMap(parentView);
        }).undoAction(function (_ref3) {
          var _ref3$is2UpdateInServ = _ref3.is2UpdateInServer,
              is2UpdateInServer = _ref3$is2UpdateInServ === void 0 ? true : _ref3$is2UpdateInServ;
          var name = parentView.getObjectTree()[1].title;
          parentView.deleteNodeFromTreeUsingName(name, is2UpdateInServer);
        }).build();
      } else {
        var oldMapName = parentView.getObjectTree()[1].title;
        var newMapName = this.name;
        return mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_22__["UndoManager"].actionBuilder().doAction(function () {
          _this4.switchMaps(oldMapName, newMapName, parentView);
        }).undoAction(function (_ref4) {
          var _ref4$is2UpdateInServ = _ref4.is2UpdateInServer,
              is2UpdateInServer = _ref4$is2UpdateInServ === void 0 ? true : _ref4$is2UpdateInServ;
          parentView.deleteNodeFromTreeUsingName(newMapName, is2UpdateInServer);
          monet__WEBPACK_IMPORTED_MODULE_16__["Maybe"].fromNull(_AssetsManager_AssetsManager__WEBPACK_IMPORTED_MODULE_23__["default"].getInstance().getAssetsActionMap()[oldMapName]).forEach(function (a) {
            return a.action(parentView);
          });
        }).build();
      }
    }
  }, {
    key: "switchMaps",
    value: function switchMaps(oldMapName, newMapName, parentView) {}
  }]);

  return AddMapAction;
}(_Action__WEBPACK_IMPORTED_MODULE_14__["default"]);

_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_10___default()(AddMapAction, "TYPE", "AddMapAction");

/* harmony default export */ __webpack_exports__["default"] = (AddMapAction);

/***/ }),

/***/ "./src/Components/Viewer/Actions/AddMeshAction.js":
/*!********************************************************!*\
  !*** ./src/Components/Viewer/Actions/AddMeshAction.js ***!
  \********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/extends */ "@babel/runtime/helpers/esm/extends");
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/asyncToGenerator */ "@babel/runtime/helpers/esm/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "@babel/runtime/helpers/esm/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "@babel/runtime/helpers/esm/createClass");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/assertThisInitialized */ "@babel/runtime/helpers/esm/assertThisInitialized");
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/get */ "@babel/runtime/helpers/esm/get");
/* harmony import */ var _babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "@babel/runtime/helpers/esm/inherits");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "@babel/runtime/helpers/esm/possibleConstructorReturn");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "@babel/runtime/helpers/esm/getPrototypeOf");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "@babel/runtime/helpers/esm/defineProperty");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var _Action__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./Action */ "./src/Components/Viewer/Actions/Action.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_12__);
/* harmony import */ var _MainView_MainViewActions__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../MainView/MainViewActions */ "./src/Components/Viewer/MainView/MainViewActions.js");
/* harmony import */ var _Utils_MeshLoader__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../Utils/MeshLoader */ "./src/Components/Viewer/Utils/MeshLoader.js");
/* harmony import */ var monet__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! monet */ "monet");
/* harmony import */ var monet__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(monet__WEBPACK_IMPORTED_MODULE_15__);
/* harmony import */ var _NodeItem_Mesh__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../NodeItem/Mesh */ "./src/Components/Viewer/NodeItem/Mesh.js");
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @babylonjs/core */ "@babylonjs/core");
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_17___default = /*#__PURE__*/__webpack_require__.n(_babylonjs_core__WEBPACK_IMPORTED_MODULE_17__);
/* harmony import */ var mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! mov-fe-lib-core */ "mov-fe-lib-core");
/* harmony import */ var mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_18___default = /*#__PURE__*/__webpack_require__.n(mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_18__);












function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_8___default()(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_8___default()(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_7___default()(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }








 //

var AddMeshAction = /*#__PURE__*/function (_Action) {
  _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_6___default()(AddMeshAction, _Action);

  var _super = _createSuper(AddMeshAction);

  function AddMeshAction(_mesh) {
    var _this;

    _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2___default()(this, AddMeshAction);

    _this = _super.call(this);

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), "addMesh", function (parentView) {
      parentView.getSceneMemory().forEach(function (memory) {
        var scene = memory.scene;

        var actionMemoryClone = _objectSpread({}, _this.memory);

        var isImport = _this.getIsImport(actionMemoryClone);

        var finalName = _this.getFinalNameFromMemory(actionMemoryClone, isImport);

        if (isImport) {
          _this.loadMesh(parentView, scene, actionMemoryClone, isImport, finalName);
        } else {
          parentView.getUndoManager().doIt(_this.getUndoAbleAction(parentView, scene, actionMemoryClone, isImport, finalName));
        }
      });
      _this.memory["isImport"] = false;
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), "transformMesh", function (parentView, scene, actionMemory, isImport) {
      return function (mesh) {
        var parentMesh = _this.getParentMesh(parentView);

        mesh.parent = parentMesh;
        mesh.createNormals();
        var maybeDict = ofNull(actionMemory["nodeItemDict"]);
        mesh.position = maybeDict.flatMap(function (d) {
          return isImport ? some(d.position) : none();
        }).map(_babylonjs_core__WEBPACK_IMPORTED_MODULE_17__["Vector3"].FromArray).orSome(_babylonjs_core__WEBPACK_IMPORTED_MODULE_17__["Vector3"].Zero());
        mesh.rotationQuaternion = maybeDict.flatMap(function (d) {
          return isImport ? some(d.quaternion) : none();
        }).map(function (quaternion) {
          return new _babylonjs_core__WEBPACK_IMPORTED_MODULE_17__["Quaternion"](quaternion[1], quaternion[2], quaternion[3], quaternion[0]);
        }).orSome(_babylonjs_core__WEBPACK_IMPORTED_MODULE_17__["Quaternion"].Identity());
        var material = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_17__["StandardMaterial"]("Mesh".concat(mesh.name), scene);
        var color = maybeDict.flatMap(function (d) {
          return isImport ? some(d.color) : none();
        }).map(_babylonjs_core__WEBPACK_IMPORTED_MODULE_17__["Color3"].FromArray).orSome(_babylonjs_core__WEBPACK_IMPORTED_MODULE_17__["Color3"].Gray());
        material.diffuseColor = color;
        material.emissiveColor = color;
        mesh.material = material;
        return mesh;
      };
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), "addMesh2Scene", function (parentView, actionMemory, isImport, finalName) {
      return function (mesh) {
        var parentMesh = _this.getParentMesh(parentView);

        mesh.name = finalName;
        var meshItem = new _NodeItem_Mesh__WEBPACK_IMPORTED_MODULE_16__["default"](mesh, _this.name, ofNull(actionMemory["nodeItemDict"]).flatMap(function (x) {
          return isImport ? some(x.keyValueMap) : none();
        }).orSome({}));
        parentView.addNodeItem2Tree(meshItem, parentMesh.name, !isImport);
        parentView.renderMenus();
      };
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), "getParentMesh", function (parentView) {
      return ofNull(_this.memory["parentObj"]).map(function (parentObj) {
        return parentObj.parent;
      }).flatMap(function (parentName) {
        return parentView.getNodeFromTree(parentName);
      }).map(function (treeNode) {
        return treeNode.item.mesh;
      }).orSome(parentView.getRootNode().item.mesh);
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), "getType", function () {
      return AddMeshAction.TYPE;
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), "deleteAsset", function () {});

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), "download", /*#__PURE__*/_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_10___default.a.mark(function _callee() {
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_10___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
            case "end":
              return _context.stop();
          }
        }
      }, _callee);
    })));

    _this.key = _mesh.id;
    _this.name = _mesh.name;

    _this.icon = function (props) {
      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("i", _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0___default()({}, props, {
        className: "fas fa-draw-polygon"
      }));
    };

    return _this;
  }

  _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_3___default()(AddMeshAction, [{
    key: "action",
    value: function action(parentView) {
      _babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_5___default()(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_8___default()(AddMeshAction.prototype), "action", this).call(this, parentView);

      console.log("Mesh ".concat(this.key, " : ").concat(this.name), this.memory);
      this.addMesh(parentView);
      parentView.setSelectedAction(Object(_MainView_MainViewActions__WEBPACK_IMPORTED_MODULE_13__["ACTIONS"])().dragObjects);
    }
  }, {
    key: "getIsImport",
    value: function getIsImport(memory) {
      return ofNull(memory["isImport"]).orSome(false);
    }
  }, {
    key: "getFinalNameFromMemory",
    value: function getFinalNameFromMemory(memory, isImport) {
      return ofNull(memory["nodeItemDict"]).flatMap(function (d) {
        return isImport ? some(d.name) : none();
      }).orSome("".concat(this.name).concat(Math.floor(Math.random() * 100)));
    }
  }, {
    key: "getUndoAbleAction",
    value: function getUndoAbleAction(parentView, scene, actionMemory, isImport, finalName) {
      var _this2 = this;

      return mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_18__["UndoManager"].actionBuilder().doAction(function () {
        _this2.loadMesh(parentView, scene, actionMemory, isImport, finalName);
      }).undoAction(function (_ref2) {
        var _ref2$is2UpdateInServ = _ref2.is2UpdateInServer,
            is2UpdateInServer = _ref2$is2UpdateInServ === void 0 ? true : _ref2$is2UpdateInServ;
        parentView.deleteNodeFromTreeUsingName(finalName, is2UpdateInServer);
      }).build();
    }
  }, {
    key: "loadMesh",
    value: function loadMesh(parentView, scene, actionMemory, isImport, finalName) {
      _Utils_MeshLoader__WEBPACK_IMPORTED_MODULE_14__["default"].of(scene).load(this.key).then(this.transformMesh(parentView, scene, actionMemory, isImport)).then(this.addMesh2Scene(parentView, actionMemory, isImport, finalName));
    }
  }]);

  return AddMeshAction;
}(_Action__WEBPACK_IMPORTED_MODULE_11__["default"]);

_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(AddMeshAction, "TYPE", "AddMeshAction");

var ofNull = monet__WEBPACK_IMPORTED_MODULE_15__["Maybe"].fromNull;
var none = monet__WEBPACK_IMPORTED_MODULE_15__["Maybe"].none;
var some = monet__WEBPACK_IMPORTED_MODULE_15__["Maybe"].some;
/* harmony default export */ __webpack_exports__["default"] = (AddMeshAction);

/***/ }),

/***/ "./src/Components/Viewer/Actions/BoxRegionAction.js":
/*!**********************************************************!*\
  !*** ./src/Components/Viewer/Actions/BoxRegionAction.js ***!
  \**********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/extends */ "@babel/runtime/helpers/esm/extends");
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "@babel/runtime/helpers/esm/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "@babel/runtime/helpers/esm/createClass");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/assertThisInitialized */ "@babel/runtime/helpers/esm/assertThisInitialized");
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "@babel/runtime/helpers/esm/inherits");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "@babel/runtime/helpers/esm/possibleConstructorReturn");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/esm/get */ "@babel/runtime/helpers/esm/get");
/* harmony import */ var _babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "@babel/runtime/helpers/esm/getPrototypeOf");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "@babel/runtime/helpers/esm/defineProperty");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var monet__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! monet */ "monet");
/* harmony import */ var monet__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(monet__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var _MouseKeysAction__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./MouseKeysAction */ "./src/Components/Viewer/Actions/MouseKeysAction.js");
/* harmony import */ var _NodeItem_BoxRegion__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../NodeItem/BoxRegion */ "./src/Components/Viewer/NodeItem/BoxRegion.js");
/* harmony import */ var _Math_Vec3__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../Math/Vec3 */ "./src/Components/Viewer/Math/Vec3.js");
/* harmony import */ var _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../Util3d/Util3d */ "./src/Components/Viewer/Util3d/Util3d.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_14__);
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @babylonjs/core */ "@babylonjs/core");
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(_babylonjs_core__WEBPACK_IMPORTED_MODULE_15__);
/* harmony import */ var mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! mov-fe-lib-core */ "mov-fe-lib-core");
/* harmony import */ var mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_16__);










function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7___default()(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7___default()(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5___default()(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }










var BoxRegionAction = /*#__PURE__*/function (_MouseKeysAction) {
  _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4___default()(BoxRegionAction, _MouseKeysAction);

  var _super = _createSuper(BoxRegionAction);

  function BoxRegionAction() {
    var _thisSuper, _this;

    _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default()(this, BoxRegionAction);

    _this = _super.call(this);

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3___default()(_this), "action", function (parentView) {
      _babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_6___default()((_thisSuper = _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3___default()(_this), _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7___default()(BoxRegionAction.prototype)), "action", _thisSuper).call(_thisSuper, parentView);

      parentView.setSelectedAction(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3___default()(_this));
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3___default()(_this), "onPointerDown", function (evt, parentView) {
      if (!(evt.buttons === 1)) return;
      parentView.getSceneMemory().forEach(function (memory) {
        var scene = memory.scene;
        var ground = memory.ground;
        var camera = memory.camera;
        var maybeMousePos = _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_13__["default"].getGroundPosition(scene, ground);
        _this.maybeMousePos = maybeMousePos;
        maybeMousePos.forEach(function (mousePos) {
          camera.detachControl(memory.canvas);
        });
      });
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3___default()(_this), "onPointerMove", function (evt, parentView) {
      parentView.getSceneMemory().forEach(function (memory) {
        var scene = memory.scene;
        var ground = memory.ground;
        var maybeCurrent = _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_13__["default"].getGroundPosition(scene, ground);
        maybeCurrent.forEach(function (current) {
          _this.maybeMousePos.forEach(function (oldMousePos) {
            if (_this.tempMesh) _this.tempMesh.dispose();
            _this.tempMesh = _this.createBoxRegion([oldMousePos, current], TEMP_BOX_REGION_NAME, scene, parentView, false);
          });
        });
      });
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3___default()(_this), "onPointerUp", function (evt, parentView) {
      parentView.getSceneMemory().forEach(function (memory) {
        var scene = memory.scene;
        var camera = memory.camera;
        var ground = memory.ground;
        var maybeCurrent = _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_13__["default"].getGroundPosition(scene, ground);
        maybeCurrent.forEach(function (current) {
          _this.maybeMousePos.forEach(function (oldMousePos) {
            if (current.subtract(oldMousePos).length() < 1e-2) return;

            _this.tempMesh.dispose();

            var name = "BoxRegion".concat(Math.floor(Math.random() * 1e3));

            var boxMesh = _this.createBoxRegion([oldMousePos, current], name, scene, parentView, true);

            parentView.setPropertiesWithName(name);
            parentView.getUndoManager().addIt(_this.getUndoAbleAction([oldMousePos, current], boxMesh, scene, parentView));
          });
        });
        _this.maybeMousePos = monet__WEBPACK_IMPORTED_MODULE_9__["Maybe"].none();
        camera.attachControl(memory.canvas, true);
      });
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3___default()(_this), "createBoxRegion", function (region, name, scene, parentView) {
      var is2addInServer = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : true;
      var color = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : _babylonjs_core__WEBPACK_IMPORTED_MODULE_15__["Color3"].Red();
      var height = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : 1;
      var rootMesh = parentView.getRootNode().item.mesh;
      var localRegion = region.map(function (r) {
        return _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_13__["default"].getLocalCoordFromWorld({
          parent: rootMesh
        }, _Math_Vec3__WEBPACK_IMPORTED_MODULE_12__["default"].ofBabylon(r));
      });
      localRegion[1] = localRegion[1].add(_Math_Vec3__WEBPACK_IMPORTED_MODULE_12__["default"].of([0, 0, height]));
      var middlePoint = localRegion[0].add(localRegion[1]).scale(0.5);
      var centeredRegion = localRegion.map(function (r) {
        return r.sub(middlePoint);
      });
      var boxRegionItem = _NodeItem_BoxRegion__WEBPACK_IMPORTED_MODULE_11__["default"].ofDict(scene, {
        name: name,
        position: middlePoint.toArray(),
        color: [color.r, color.g, color.b],
        corners: centeredRegion.map(function (x) {
          return x.toArray();
        })
      }, parentView);
      boxRegionItem.mesh.parent = rootMesh;

      if (is2addInServer) {
        parentView.addNodeItem2Tree(boxRegionItem, rootMesh.name, is2addInServer);
      }

      return boxRegionItem.mesh;
    });

    _this.key = "drawBoxRegion";
    _this.name = "Draw Box Region [3]";
    _this.maybeMousePos = monet__WEBPACK_IMPORTED_MODULE_9__["Maybe"].none();
    _this.tempMesh = null;

    _this.icon = function (props) {
      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_14___default.a.createElement("i", _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0___default()({
        className: "fas fa-square"
      }, props));
    };

    return _this;
  }

  _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2___default()(BoxRegionAction, [{
    key: "getUndoAbleAction",
    value: function getUndoAbleAction(points, mesh, scene, parentView) {
      var _this2 = this;

      return mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_16__["UndoManager"].actionBuilder().doAction(function () {
        _this2.createBoxRegion(points, mesh.name, scene, parentView, true);
      }).undoAction(function (_ref) {
        var _ref$is2UpdateInServe = _ref.is2UpdateInServer,
            is2UpdateInServer = _ref$is2UpdateInServe === void 0 ? true : _ref$is2UpdateInServe;
        parentView.deleteNodeFromTreeUsingName(mesh.name, is2UpdateInServer);
      }).build();
    }
  }]);

  return BoxRegionAction;
}(_MouseKeysAction__WEBPACK_IMPORTED_MODULE_10__["default"]);

var TEMP_BOX_REGION_NAME = "temp_box_region";
/* harmony default export */ __webpack_exports__["default"] = (BoxRegionAction);

/***/ }),

/***/ "./src/Components/Viewer/Actions/DragObjectsAction.js":
/*!************************************************************!*\
  !*** ./src/Components/Viewer/Actions/DragObjectsAction.js ***!
  \************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/slicedToArray */ "@babel/runtime/helpers/esm/slicedToArray");
/* harmony import */ var _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/toConsumableArray */ "@babel/runtime/helpers/esm/toConsumableArray");
/* harmony import */ var _babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/extends */ "@babel/runtime/helpers/esm/extends");
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "@babel/runtime/helpers/esm/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "@babel/runtime/helpers/esm/createClass");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/assertThisInitialized */ "@babel/runtime/helpers/esm/assertThisInitialized");
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "@babel/runtime/helpers/esm/inherits");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "@babel/runtime/helpers/esm/possibleConstructorReturn");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @babel/runtime/helpers/esm/get */ "@babel/runtime/helpers/esm/get");
/* harmony import */ var _babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "@babel/runtime/helpers/esm/getPrototypeOf");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "@babel/runtime/helpers/esm/defineProperty");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../Util3d/Util3d */ "./src/Components/Viewer/Util3d/Util3d.js");
/* harmony import */ var _Math_Vec3__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../Math/Vec3 */ "./src/Components/Viewer/Math/Vec3.js");
/* harmony import */ var monet__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! monet */ "monet");
/* harmony import */ var monet__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(monet__WEBPACK_IMPORTED_MODULE_13__);
/* harmony import */ var _MouseKeysAction__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./MouseKeysAction */ "./src/Components/Viewer/Actions/MouseKeysAction.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_15__);
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @babylonjs/core */ "@babylonjs/core");
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(_babylonjs_core__WEBPACK_IMPORTED_MODULE_16__);
/* harmony import */ var mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! mov-fe-lib-core */ "mov-fe-lib-core");
/* harmony import */ var mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_17___default = /*#__PURE__*/__webpack_require__.n(mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_17__);
/* harmony import */ var _Utils_Clipboard__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../Utils/Clipboard */ "./src/Components/Viewer/Utils/Clipboard.js");
/* harmony import */ var _Utils_Utils__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../Utils/Utils */ "./src/Components/Viewer/Utils/Utils.js");
/* harmony import */ var _Util3d_SelectionPlaceHolder__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../Util3d/SelectionPlaceHolder */ "./src/Components/Viewer/Util3d/SelectionPlaceHolder.js");
/* harmony import */ var _MainView_MeshSelector__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../MainView/MeshSelector */ "./src/Components/Viewer/MainView/MeshSelector.js");
/* harmony import */ var _Math_Vec2__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../Math/Vec2 */ "./src/Components/Viewer/Math/Vec2.js");
/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! react-dom */ "react-dom");
/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_23___default = /*#__PURE__*/__webpack_require__.n(react_dom__WEBPACK_IMPORTED_MODULE_23__);
/* harmony import */ var _TreeObject_TreeObject__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ../TreeObject/TreeObject */ "./src/Components/Viewer/TreeObject/TreeObject.js");
/* harmony import */ var _NodeItem_GlobalRef__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ../NodeItem/GlobalRef */ "./src/Components/Viewer/NodeItem/GlobalRef.js");
/* harmony import */ var _NodeItem_GraphItem__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ../NodeItem/GraphItem */ "./src/Components/Viewer/NodeItem/GraphItem.js");
/* harmony import */ var _NodeItem_Map__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ../NodeItem/Map */ "./src/Components/Viewer/NodeItem/Map.js");
/* harmony import */ var _NodeItem_Path__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ../NodeItem/Path */ "./src/Components/Viewer/NodeItem/Path.js");












function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_10___default()(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_9___default()(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_9___default()(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_7___default()(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }




















var DragObjectsAction = /*#__PURE__*/function (_MouseKeysAction) {
  _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_6___default()(DragObjectsAction, _MouseKeysAction);

  var _super = _createSuper(DragObjectsAction);

  function DragObjectsAction() {
    var _thisSuper, _this;

    _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3___default()(this, DragObjectsAction);

    _this = _super.call(this);

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_10___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5___default()(_this), "action", function (parentView) {
      _babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_8___default()((_thisSuper = _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5___default()(_this), _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_9___default()(DragObjectsAction.prototype)), "action", _thisSuper).call(_thisSuper, parentView);

      parentView.setSelectedAction(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5___default()(_this));
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_10___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5___default()(_this), "onPointerDown", function (evt, parentView) {
      if (!(evt.buttons === 1 || evt.buttons === 2) || evt.ctrlKey) return;
      parentView.getSceneMemory().forEach(function (_ref) {
        var scene = _ref.scene,
            ground = _ref.ground;
        _this.maybeSelectedMesh = _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_11__["default"].pickMesh(scene, ground);

        _this.maybeSelectedMesh.forEach(function (currentMesh) {
          return _this.dragDownMesh(currentMesh, parentView, evt);
        });

        _this.maybeSelectedMesh.orLazy(function () {
          _this.dragDownWithoutMesh(parentView, evt);
        });
      });
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_10___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5___default()(_this), "onPointerMove", function (evt, parentView) {
      if (!(evt.buttons === 1) || evt.ctrlKey) return;
      parentView.getSceneMemory().forEach(function (_ref2) {
        var scene = _ref2.scene,
            ground = _ref2.ground;

        // check that a mesh was selected
        _this.maybeSelectedMesh.forEach(function (selectedMesh) {
          _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_11__["default"].getGroundPosition(scene, ground).forEach(function (groundPos) {
            _this.dragMoveMesh(parentView, groundPos);
          });
        });

        _this.maybeSelectedMesh.orLazy(function () {
          _this.dragMoveWithoutMesh(evt);
        });
      });
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_10___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5___default()(_this), "onPointerUp", function (evt, parentView) {
      parentView.getSceneMemory().forEach(function (_ref3) {
        var camera = _ref3.camera,
            scene = _ref3.scene,
            ground = _ref3.ground,
            canvas = _ref3.canvas;

        _this.maybeSelectedMesh.forEach(function (selectedMesh) {
          _this.dragUpMesh(selectedMesh, parentView, scene, ground);
        });

        _this.maybeSelectedMesh.orLazy(function () {
          _this.dragUpWithoutMesh(parentView, scene);
        }); // reset action


        camera.attachControl(canvas, true);
        _this.maybeSelectedMesh = monet__WEBPACK_IMPORTED_MODULE_13__["Maybe"].none();

        _this.destroySelectionDiv();

        _this.corners = [];
      });
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_10___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5___default()(_this), "onKeyUp", function (evt, parentView) {
      var predicateActionList = [{
        predicate: function predicate(e) {
          return ["Backspace", "Delete"].includes(e.code);
        },
        action: _this.getDeleteAction(parentView)
      }, {
        predicate: function predicate(e) {
          return e.ctrlKey && e.code === "KeyC";
        },
        action: _this.getCopyAction(parentView)
      }, {
        predicate: function predicate(e) {
          return e.ctrlKey && e.code === "KeyV";
        },
        action: _this.getPasteAction(parentView)
      }];
      Object(_Utils_Utils__WEBPACK_IMPORTED_MODULE_19__["selectOneAction"])(predicateActionList)(evt);
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_10___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5___default()(_this), "handleMeshRightClick", function (evt, parentView, mesh) {
      if (!(evt.buttons === 2)) return;
      if (!mesh || !mesh.getMouseContextActions) return;
      parentView.setMouseContextActions(evt, mesh.getMouseContextActions(parentView));
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_10___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5___default()(_this), "handleRightClickWithoutMesh", function (evt, parentView, mousePosFromRoot) {
      if (!(evt.buttons === 2)) return;
      parentView.setMouseContextActions(evt, [{
        title: "Paste",
        onClick: _this.getPasteOnClick(mousePosFromRoot, parentView)
      }]);
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_10___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5___default()(_this), "getPasteOnClick", function (mousePosFromRoot, parentView) {
      return function () {
        var pasteAction = _Utils_Clipboard__WEBPACK_IMPORTED_MODULE_18__["default"].paste();

        if (pasteAction && typeof pasteAction === "function") {
          pasteAction(mousePosFromRoot, parentView);
        }
      };
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_10___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5___default()(_this), "notifyChildrenObserversRecursively", function (nodeTree, is2updateServer, displacement, parentView) {
      nodeTree.forEach(function (m) {
        if ((!!m.observers || !!m.graphVertex) && parentView.getNodeFromTree(m.name).isSome()) {
          _this.notifyObservers(m, is2updateServer, displacement, parentView);
        }

        if (m._children && m._children.length) _this.notifyChildrenObserversRecursively(m._children, is2updateServer, displacement, parentView);
      });
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_10___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5___default()(_this), "setProperties", function (parentView, name) {
      return parentView.setPropertiesWithName(name);
    });

    _this.key = "dragObject";
    _this.name = "Grab Objects [1]";

    _this.icon = function (props) {
      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default.a.createElement("i", _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_2___default()({
        className: "far fa-hand-paper"
      }, props));
    };

    _this.maybeSelectedMesh = monet__WEBPACK_IMPORTED_MODULE_13__["Maybe"].none();
    _this.clickPointInWorld = _Math_Vec3__WEBPACK_IMPORTED_MODULE_12__["default"].ZERO;
    _this.movePointInWorld = _Math_Vec3__WEBPACK_IMPORTED_MODULE_12__["default"].ZERO;
    _this.startDivPos = _Math_Vec2__WEBPACK_IMPORTED_MODULE_22__["default"].ZERO;
    _this.corners = [];
    return _this;
  }

  _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_4___default()(DragObjectsAction, [{
    key: "dragDownMesh",
    value: //========================================================================================

    /*                                                                                      *
     *                                         UTILS                                        *
     *                                                                                      */
    //========================================================================================
    function dragDownMesh(currentMesh, parentView, evt) {
      var _this2 = this;

      if (currentMesh.isStatic) return;
      parentView.getSceneMemory().forEach(function (_ref4) {
        var camera = _ref4.camera,
            canvas = _ref4.canvas,
            scene = _ref4.scene,
            ground = _ref4.ground;
        camera.detachControl(canvas);

        _this2.addSelectedMesh(evt, currentMesh, parentView);

        _this2.handleMeshRightClick(evt, parentView, currentMesh);

        _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_11__["default"].getGroundPosition(scene, ground).forEach(function (groundPos) {
          _this2.updateMouseVars(groundPos); // mesh onClick


          currentMesh.onClick ? currentMesh.onClick() : parentView.closeContextDial();

          if (currentMesh.isSelectionPlaceHolder) {
            parentView.addGizmo2Mesh(currentMesh, function () {
              _this2.notifyObservers(currentMesh, false, _Math_Vec3__WEBPACK_IMPORTED_MODULE_12__["default"].ZERO, parentView);
            }, function () {
              _this2.notifyObservers(currentMesh, true, _Math_Vec3__WEBPACK_IMPORTED_MODULE_12__["default"].ZERO, parentView);
            });
          } else {
            _this2.selectMeshUpdateUI(parentView);
          }
        });
      });
    }
  }, {
    key: "selectMeshUpdateUI",
    value: function selectMeshUpdateUI(parentView) {
      var _this3 = this;

      var meshSelector = _MainView_MeshSelector__WEBPACK_IMPORTED_MODULE_21__["default"].ofMainView(parentView);
      var selectionPlaceHolder = _Util3d_SelectionPlaceHolder__WEBPACK_IMPORTED_MODULE_20__["default"].ofMainView(parentView);
      var selectedMeshes = meshSelector.meshes();
      parentView.highlightMeshesInScene(selectedMeshes);
      parentView.highlightNodesInTree(selectedMeshes.map(function (_ref5) {
        var name = _ref5.name;
        return name;
      }));

      if (selectedMeshes.length > 1) {
        parentView.addGizmo2Name();
        selectionPlaceHolder.clear();
        selectionPlaceHolder.push(selectedMeshes);
        this.setProperties(parentView, selectedMeshes[0].name);
      } else {
        selectionPlaceHolder.clear();
        parentView.addGizmo2Name();
        selectedMeshes.forEach(function (mesh) {
          parentView.addGizmo2Name(mesh.name);

          _this3.setProperties(parentView, mesh.name);
        });
      }
    }
  }, {
    key: "dragDownWithoutMesh",
    value: function dragDownWithoutMesh(parentView, evt) {
      var _this4 = this;

      parentView.getMouseCoordsFromRoot().forEach(function (mousePosRoot) {
        return _this4.handleRightClickWithoutMesh(evt, parentView, mousePosRoot);
      });
      parentView.getSceneMemory().forEach(function (_ref6) {
        var camera = _ref6.camera,
            canvas = _ref6.canvas,
            scene = _ref6.scene;

        if (evt.shiftKey) {
          camera.detachControl(canvas);

          _this4.createSelectionDiv(evt);

          _this4.corners.push(_Math_Vec2__WEBPACK_IMPORTED_MODULE_22__["default"].of(scene.pointerX, scene.pointerY));
        }
      });
    }
  }, {
    key: "dragMoveMesh",
    value: function dragMoveMesh(parentView, groundPos) {
      var _this5 = this;

      var meshSelector = _MainView_MeshSelector__WEBPACK_IMPORTED_MODULE_21__["default"].ofMainView(parentView);
      var meshes = meshSelector.meshes();
      var selector = _Util3d_SelectionPlaceHolder__WEBPACK_IMPORTED_MODULE_20__["default"].ofMainView(parentView);
      var newMousePosInWorld = _Math_Vec3__WEBPACK_IMPORTED_MODULE_12__["default"].ofBabylon(groundPos);
      var v = newMousePosInWorld.sub(this.movePointInWorld);
      meshes.forEach(function (mesh) {
        var vLocal = _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_11__["default"].getLocalCoordFromWorld(mesh, v, false);
        vLocal = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_16__["Vector3"](vLocal.x, vLocal.y, 0);
        mesh.position = mesh.position.add(vLocal);

        _this5.notifyObservers(mesh, false, v, parentView);
      });

      if (meshes.length > 1) {
        var vLocal = _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_11__["default"].getLocalCoordFromWorld(selector.mesh, v, false);
        vLocal = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_16__["Vector3"](vLocal.x, vLocal.y, 0);
        selector.mesh.position = selector.mesh.position.add(vLocal);
      }

      this.movePointInWorld = newMousePosInWorld;
    }
  }, {
    key: "dragMoveWithoutMesh",
    value: function dragMoveWithoutMesh(evt) {
      this.updateSelectionDiv(evt);
    }
  }, {
    key: "dragUpMesh",
    value: function dragUpMesh(selectedMesh, parentView, scene, ground) {
      var _this6 = this;

      var meshSelector = _MainView_MeshSelector__WEBPACK_IMPORTED_MODULE_21__["default"].ofMainView(parentView);
      var meshes = meshSelector.meshes();
      var selectPlaceHolder = _Util3d_SelectionPlaceHolder__WEBPACK_IMPORTED_MODULE_20__["default"].ofMainView(parentView);
      _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_11__["default"].getGroundPosition(scene, ground).forEach(function (groundPos) {
        var groundPosInWorld = _Math_Vec3__WEBPACK_IMPORTED_MODULE_12__["default"].ofBabylon(groundPos);
        var bigDisplacement = groundPosInWorld.sub(_this6.clickPointInWorld);
        var isBigDisplacement = bigDisplacement.length() > 1e-3;
        meshes.forEach(function (mesh) {
          // TODO: find better way without edge if
          var isBigDisplaceOrIsEdgeMesh = isBigDisplacement || !!mesh.edgeIndexes;

          _this6.notifyObservers(mesh, isBigDisplaceOrIsEdgeMesh, _Math_Vec3__WEBPACK_IMPORTED_MODULE_12__["default"].ZERO, parentView);

          if (isBigDisplacement) parentView.updateNodeInServer(mesh.name);
        });

        _this6.setProperties(parentView, selectedMesh.name);

        if (isBigDisplacement) {
          parentView.getUndoManager().addIt(_this6.getUndoAbleAction(meshes, bigDisplacement, parentView));
        }

        if (selectedMesh.isSelectionPlaceHolder) {
          meshSelector.clear();
          meshSelector.addArray(selectPlaceHolder.arrayOfMeshes);
        }

        _this6.mergePathsIfAny(selectedMesh, parentView, scene, ground);
      });
    }
  }, {
    key: "dragUpWithoutMesh",
    value: function dragUpWithoutMesh(parentView, scene) {
      this.selectObjectsInside(scene, parentView);
    }
  }, {
    key: "updateMouseVars",
    value: function updateMouseVars(groundPos) {
      var groundPosInGlobal = _Math_Vec3__WEBPACK_IMPORTED_MODULE_12__["default"].ofBabylon(groundPos);
      this.movePointInWorld = groundPosInGlobal;
      this.clickPointInWorld = groundPosInGlobal;
    }
  }, {
    key: "addSelectedMesh",
    value: function addSelectedMesh(evt, currentMesh, parentView) {
      var meshSelector = _MainView_MeshSelector__WEBPACK_IMPORTED_MODULE_21__["default"].ofMainView(parentView); // is an edge mesh

      if (!!currentMesh.edgeIndexes) {
        meshSelector.clear();
        meshSelector.add(currentMesh);
        return;
      } // not an edge mesh


      meshSelector.filter(function (mesh) {
        return !mesh.edgeIndexes;
      });

      if (evt.shiftKey) {
        meshSelector.add(currentMesh);
      } else {
        if (meshSelector.has(currentMesh)) return;
        meshSelector.clear();
        meshSelector.add(currentMesh);
      }
    }
  }, {
    key: "getDeleteAction",
    value: function getDeleteAction(parentView) {
      return function () {
        var meshSelector = _MainView_MeshSelector__WEBPACK_IMPORTED_MODULE_21__["default"].ofMainView(parentView);
        var meshes = meshSelector.meshes();
        var isOne = meshes.length === 1;
        meshes.forEach(function (mesh) {
          var maybeNode = parentView.getNodeFromTree(mesh.name);
          maybeNode.forEach(function (node) {
            return parentView.onDeleteNode(node, isOne, isOne);
          });
          maybeNode.orElseRun(function () {
            if (!isOne) return;
            mesh.onDel && mesh.onDel();
          });
        });
        parentView.highlightNodesInTree();
        parentView.highlightMeshesInScene();
        parentView.addGizmo2Mesh();
        meshSelector.clear();
        _Util3d_SelectionPlaceHolder__WEBPACK_IMPORTED_MODULE_20__["default"].ofMainView(parentView).clear();
        parentView.renderMenus();
      };
    }
  }, {
    key: "getCopyAction",
    value: function getCopyAction(parentView) {
      var _this7 = this;

      var meshSelector = _MainView_MeshSelector__WEBPACK_IMPORTED_MODULE_21__["default"].ofMainView(parentView);
      var meshes = meshSelector.meshes();
      var selectPlaceHolderMesh = _Util3d_SelectionPlaceHolder__WEBPACK_IMPORTED_MODULE_20__["default"].ofMainView(parentView).mesh;
      return function () {
        if (meshes.length <= 1) {
          _this7.copyOne(meshes);
        } else {
          _this7.copyMany(meshes, selectPlaceHolderMesh);
        }
      };
    }
  }, {
    key: "copyOne",
    value: function copyOne(meshes) {
      _Utils_Clipboard__WEBPACK_IMPORTED_MODULE_18__["default"].copy(function (mousePosFromRoot, someMainView) {
        var uuid = _Utils_Clipboard__WEBPACK_IMPORTED_MODULE_18__["default"].getUID();
        var itemCopyFunctions = meshes.filter(function (mesh) {
          return !!mesh.nodeItem;
        }).map(function (mesh) {
          return mesh.nodeItem;
        }).map(function (item) {
          return item.getCopyFunction(true, function (name) {
            return name + "_copy" + uuid;
          });
        });
        if (itemCopyFunctions.length === 0) return;

        var doAction = function doAction() {
          var maybeCopiedItem = itemCopyFunctions[0](mousePosFromRoot, someMainView);
          maybeCopiedItem.forEach(function (item) {
            var copiedMesh = item.mesh;
            someMainView.addGizmo2Name(copiedMesh.name);
            someMainView.highlightMeshesInScene([copiedMesh]);
            someMainView.highlightNodesInTree([copiedMesh.name]);
            _MainView_MeshSelector__WEBPACK_IMPORTED_MODULE_21__["default"].ofMainView(someMainView).clear().add(copiedMesh);
            someMainView.setProperties(item.toForm());
            someMainView.renderMenus();
          });
          return maybeCopiedItem;
        };

        var maybeCopiedItem = doAction();
        someMainView.getUndoManager().addIt(mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_17__["UndoManager"].actionBuilder().doAction(doAction).undoAction(function () {
          maybeCopiedItem.forEach(function (_ref7) {
            var copiedMesh = _ref7.mesh;
            someMainView.deleteNodeFromTreeUsingName(copiedMesh.name);
            someMainView.highlightMeshesInScene();
            someMainView.highlightNodesInTree();
            someMainView.renderMenus();
          });
        }).build());
      });
    }
  }, {
    key: "copyMany",
    value: function copyMany(meshes, selectPlaceHolderMesh) {
      _Utils_Clipboard__WEBPACK_IMPORTED_MODULE_18__["default"].copy(function (mousePosFromRoot, someMainView) {
        var nodeItems = meshes.filter(function (mesh) {
          return !!mesh.nodeItem;
        }).map(function (mesh) {
          return mesh.nodeItem;
        });
        var uuids = nodeItems.map(function () {
          return _Utils_Clipboard__WEBPACK_IMPORTED_MODULE_18__["default"].getUID();
        });
        var itemCopyFunctions = nodeItems.map(function (item, i) {
          return item.getCopyFunction(false, function (name) {
            return name + "_copy" + uuids[i];
          });
        });

        var doAction = function doAction() {
          var maybeCopiedItems = itemCopyFunctions.map(function (itemCopyFunction, i) {
            var displacement = _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_11__["default"].toGlobalCoord(someMainView)(nodeItems[i].mesh.absolutePosition).subtract(selectPlaceHolderMesh.position);
            return itemCopyFunction(displacement.add(mousePosFromRoot), someMainView);
          });
          var copiedItems = maybeCopiedItems.filter(function (maybe) {
            return maybe.isSome();
          }).map(function (maybe) {
            return maybe.some();
          });
          var copiedMeshes = copiedItems.map(function (_ref8) {
            var mesh = _ref8.mesh;
            return mesh;
          });
          var copiedNames = copiedItems.map(function (_ref9) {
            var name = _ref9.name;
            return name;
          });
          someMainView.addGizmo2Name();
          someMainView.highlightMeshesInScene(copiedMeshes);
          someMainView.highlightNodesInTree(copiedNames);
          _MainView_MeshSelector__WEBPACK_IMPORTED_MODULE_21__["default"].ofMainView(someMainView).clear().addArray(copiedMeshes);
          _Util3d_SelectionPlaceHolder__WEBPACK_IMPORTED_MODULE_20__["default"].ofMainView(someMainView).clear().push(copiedMeshes);
          someMainView.renderMenus();
          someMainView.forceUpdate();
          return copiedItems;
        };

        var copiedItems = doAction();
        someMainView.getUndoManager().addIt(mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_17__["UndoManager"].actionBuilder().doAction(doAction).undoAction(function () {
          copiedItems.forEach(function (_ref10) {
            var mesh = _ref10.mesh;
            someMainView.deleteNodeFromTreeUsingName(mesh.name, true, false);
          });
          someMainView.highlightMeshesInScene();
          someMainView.highlightNodesInTree();
          _MainView_MeshSelector__WEBPACK_IMPORTED_MODULE_21__["default"].ofMainView(someMainView).clear();
          _Util3d_SelectionPlaceHolder__WEBPACK_IMPORTED_MODULE_20__["default"].ofMainView(someMainView).clear();
          someMainView.renderMenus();
          someMainView.forceUpdate();
        }).build());
      });
    }
  }, {
    key: "getPasteAction",
    value: function getPasteAction(parentView) {
      var _this8 = this;

      return function () {
        parentView.getMouseCoordsFromRoot().forEach(function (mousePosRoot) {
          return _this8.getPasteOnClick(mousePosRoot, parentView)();
        });
      };
    }
    /**
     *
     * @param {*} mesh: Mesh
     * @param {*} is2updateServer: Boolean
     * @param {*} displacement: Vec3 in world coordinates
     */

  }, {
    key: "notifyObservers",
    value: function notifyObservers(mesh, is2updateServer, displacement, parentView) {
      // notify  babylonjs observers
      monet__WEBPACK_IMPORTED_MODULE_13__["Maybe"].fromNull(mesh.observers).forEach(function (obs) {
        obs.notifyObservers({
          updatedPointMesh: mesh,
          is2updateServer: is2updateServer,
          displacement: displacement.toBabylon()
        });
      }); // notify graph observers

      monet__WEBPACK_IMPORTED_MODULE_13__["Maybe"].fromNull(mesh.graphVertex).forEach(function (_ref11) {
        var vertexObs = _ref11.vertexObs;
        vertexObs({
          updatedPointMesh: mesh,
          is2updateServer: is2updateServer,
          displacement: displacement.toBabylon()
        });
      });

      if (parentView.getNodeFromTree(mesh.name).isSome()) {
        this.notifyChildrenObserversRecursively((mesh === null || mesh === void 0 ? void 0 : mesh._children) || [], is2updateServer, displacement, parentView);
      }
    }
  }, {
    key: "getUndoAbleAction",
    value:
    /**
     *
     * @param {*} selectedMeshes: Array<Mesh>
     * @param {*} displacement: Vec3 in world coordinates
     * @param {*} parentView: MainView
     */
    function getUndoAbleAction(selectedMeshes, displacement, parentView) {
      var _this9 = this;

      var meshesStruct = _babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default()(selectedMeshes).map(function (m) {
        return {
          mesh: m,
          parent: m.parent,
          keypointIndex: m.index || -1
        };
      });

      var sendMesh = function sendMesh(mesh, finalDisplacement) {
        var is2UpdateInServer = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;
        var localDisplacement = _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_11__["default"].getLocalCoordFromWorld(mesh, finalDisplacement, false);
        var newPos = _Math_Vec3__WEBPACK_IMPORTED_MODULE_12__["default"].ofBabylon(mesh.position).add(localDisplacement);
        mesh.position = newPos.toBabylon();

        _this9.notifyObservers(mesh, is2UpdateInServer, finalDisplacement, parentView);
      };

      var moveMesh = function moveMesh() {
        var dir = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;
        var is2UpdateInServer = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;
        return function (_ref12) {
          var mesh = _ref12.mesh,
              parent = _ref12.parent,
              keypointIndex = _ref12.keypointIndex;
          var finalDisplacement = displacement.scale(dir);
          var maybeNodeItem = monet__WEBPACK_IMPORTED_MODULE_13__["Maybe"].None();

          if (keypointIndex >= 0) {
            maybeNodeItem = parentView.getNodeFromTree(parent.name);
            maybeNodeItem.forEach(function (_ref13) {
              var item = _ref13.item;
              var nodeMesh = item.keyPoints[keypointIndex];
              sendMesh(nodeMesh, finalDisplacement, is2UpdateInServer);
              if (is2UpdateInServer) parentView.updateNodeInServer(item.name);
            });
            maybeNodeItem.orElseRun(function () {});
          } else {
            maybeNodeItem = parentView.getNodeFromTree(mesh.name);
            maybeNodeItem.forEach(function (_ref14) {
              var item = _ref14.item;
              var nodeMesh = item.mesh;
              sendMesh(nodeMesh, finalDisplacement, is2UpdateInServer);
              if (is2UpdateInServer) parentView.updateNodeInServer(nodeMesh.name);
            });
          }

          maybeNodeItem.orElseRun(function () {
            sendMesh(mesh, finalDisplacement, is2UpdateInServer);
            if (is2UpdateInServer) parentView.updateNodeInServer(mesh.name);
          });
        };
      };

      return mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_17__["UndoManager"].actionBuilder().doAction(function () {
        meshesStruct.forEach(moveMesh());
      }).undoAction(function (_ref15) {
        var _ref15$is2UpdateInSer = _ref15.is2UpdateInServer,
            is2UpdateInServer = _ref15$is2UpdateInSer === void 0 ? true : _ref15$is2UpdateInSer;
        meshesStruct.forEach(moveMesh(-1, is2UpdateInServer));
      }).build();
    }
  }, {
    key: "createSelectionDiv",
    value: function createSelectionDiv(e) {
      this.startDivPos = this.findMouseInDom(e);
      var _this$startDivPos = this.startDivPos,
          x = _this$startDivPos.x,
          y = _this$startDivPos.y;
      var outerDiv = document.createElement("div");
      outerDiv.id = ID;
      document.body.appendChild(outerDiv);
      react_dom__WEBPACK_IMPORTED_MODULE_23___default.a.render( /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default.a.createElement(SelectDiv, {
        left: x,
        top: y
      }), document.getElementById(ID));
    }
  }, {
    key: "updateSelectionDiv",
    value: function updateSelectionDiv(e) {
      var newMouse = this.findMouseInDom(e);
      var oldMouse = this.startDivPos;

      var _newMouse$op = newMouse.op(oldMouse, Math.min),
          minX = _newMouse$op.x,
          minY = _newMouse$op.y;

      var _newMouse$op2 = newMouse.op(oldMouse, Math.max),
          maxX = _newMouse$op2.x,
          maxY = _newMouse$op2.y;

      var outerDiv = document.getElementById(ID);
      if (!outerDiv) return;
      react_dom__WEBPACK_IMPORTED_MODULE_23___default.a.render( /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default.a.createElement(SelectDiv, {
        left: minX,
        top: minY,
        width: maxX - minX,
        height: maxY - minY,
        style: {
          zIndex: 999
        }
      }), outerDiv);
    }
  }, {
    key: "destroySelectionDiv",
    value: function destroySelectionDiv() {
      var outerDiv = document.getElementById(ID);
      if (!outerDiv) return;
      outerDiv.parentNode.removeChild(outerDiv);
    }
  }, {
    key: "findMouseInDom",
    value: function findMouseInDom(e) {
      var x = e.clientX; //x position within the element.

      var y = e.clientY; //y position within the element.

      return new _Math_Vec2__WEBPACK_IMPORTED_MODULE_22__["default"](x, y);
    }
  }, {
    key: "selectObjectsInside",
    value: function selectObjectsInside(scene, parentView) {
      var _this10 = this;

      if (this.corners.length === 0) return;
      this.corners.push(_Math_Vec2__WEBPACK_IMPORTED_MODULE_22__["default"].of(scene.pointerX, scene.pointerY));

      var _this$corners = _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(this.corners, 2),
          oldMouse = _this$corners[0],
          newMouse = _this$corners[1];

      var min = newMouse.op(oldMouse, Math.min);
      var max = newMouse.op(oldMouse, Math.max);
      var cornersDiv = [min, _Math_Vec2__WEBPACK_IMPORTED_MODULE_22__["default"].of(max.x, min.y), max, _Math_Vec2__WEBPACK_IMPORTED_MODULE_22__["default"].of(min.x, max.y)];
      var rayCastCorners = cornersDiv.map(function (p) {
        return _this10.pickPoints(p, parentView);
      });
      if (rayCastCorners.some(function (x) {
        return x === null || x === undefined;
      })) return;
      var treeObj = new _TreeObject_TreeObject__WEBPACK_IMPORTED_MODULE_24__["default"](parentView.getObjectTree());
      var insideBox = treeObj.flatten(this.isItemInsideBox(rayCastCorners, parentView));
      var insideBoxDragAbleMeshes = insideBox.map(function (_ref16) {
        var item = _ref16.item;
        return item.mesh;
      });
      var meshSelector = _MainView_MeshSelector__WEBPACK_IMPORTED_MODULE_21__["default"].ofMainView(parentView);
      meshSelector.clear();

      if (insideBoxDragAbleMeshes.length !== 0) {
        meshSelector.addArray(insideBoxDragAbleMeshes, false);
      }

      this.selectMeshUpdateUI(parentView);
    }
    /**
     *
     * @param {*} p: Vec2 point in canvas
     * @param {*} parentView: MainView
     */

  }, {
    key: "pickPoints",
    value: function pickPoints(p, parentView) {
      return parentView.getSceneMemory().flatMap(function (memory) {
        var scene = memory.scene,
            ground = memory.ground;
        var pickInfo = scene.pick(p.x, p.y, function (mesh) {
          return mesh === ground;
        });

        if (pickInfo.hit) {
          var floorPoint = _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_11__["default"].toGlobalCoord(parentView)(pickInfo.pickedPoint);
          return monet__WEBPACK_IMPORTED_MODULE_13__["Maybe"].some(_Math_Vec2__WEBPACK_IMPORTED_MODULE_22__["default"].of(floorPoint.x, floorPoint.y));
        }

        return monet__WEBPACK_IMPORTED_MODULE_13__["Maybe"].none();
      }).orNull();
    }
    /**
     *
     * @param {*} polygon: Array<Vec2>
     * @param {*} parentView
     */

  }, {
    key: "isItemInsideBox",
    value: function isItemInsideBox(polygon, parentView) {
      var _this11 = this;

      return function (_ref17) {
        var _item$mesh;

        var item = _ref17.item;
        var type = item.getType();
        if (type === _NodeItem_GlobalRef__WEBPACK_IMPORTED_MODULE_25__["default"].TYPE || type === _NodeItem_Map__WEBPACK_IMPORTED_MODULE_27__["default"].TYPE || type === _NodeItem_GraphItem__WEBPACK_IMPORTED_MODULE_26__["default"].TYPE || item !== null && item !== void 0 && (_item$mesh = item.mesh) !== null && _item$mesh !== void 0 && _item$mesh.isSelectionPlaceHolder) return false;
        var mesh = item.mesh;
        return _this11.isMeshInsideBox(polygon, parentView)(mesh);
      };
    }
    /**
     *
     * @param {*} polygon: Array<Vec2>
     * @param {*} parentView
     */

  }, {
    key: "isMeshInsideBox",
    value: function isMeshInsideBox(polygon, parentView) {
      var _this12 = this;

      return function (mesh) {
        var p = _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_11__["default"].toGlobalCoord(parentView)(mesh.absolutePosition);
        var planeP = new _Math_Vec2__WEBPACK_IMPORTED_MODULE_22__["default"](p.x, p.y);
        return _this12.isPointInsideBox(polygon)(planeP);
      };
    }
    /**
     *
     * @param {*} polygon: Array<Vec2>
     * @param {*} epsilon: Number
     */

  }, {
    key: "isPointInsideBox",
    value: function isPointInsideBox(polygon) {
      var epsilon = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1e-3;
      return function (p) {
        var theta = 0;
        var n = polygon.length;

        for (var i = 0; i < n; i++) {
          var vi = polygon[i].sub(p);
          var vii = polygon[(i + 1) % n].sub(p);
          theta += Math.acos(vi.dot(vii) / (vi.length() * vii.length()));
        }

        return Math.abs(theta - 2 * Math.PI) < epsilon;
      };
    }
    /**
     *
     * Merge paths if boundary keypoints are dragged together and have same orientation
     *
     * @param {*} selectedMesh
     * @param {*} parentView
     * @param {*} scene
     * @param {*} ground
     * @returns
     */

  }, {
    key: "mergePathsIfAny",
    value: function mergePathsIfAny(selectedMesh, parentView, scene, ground) {
      if (!_NodeItem_Path__WEBPACK_IMPORTED_MODULE_28__["default"].isKeyPointMesh(selectedMesh, parentView)) return;
      var pickInfo = scene.pick(scene.pointerX, scene.pointerY, function (mesh) {
        return mesh !== ground && mesh.isEnabled();
      });

      if (pickInfo.hit) {
        var ray = pickInfo.ray;
        var hits = scene.multiPickWithRay(ray);

        if (hits) {
          var keyPointHits = hits.map(function (_ref18) {
            var pickedMesh = _ref18.pickedMesh;
            return pickedMesh;
          }).filter(function (hitMesh) {
            return _NodeItem_Path__WEBPACK_IMPORTED_MODULE_28__["default"].isKeyPointMesh(hitMesh, parentView);
          }); // Are hits a keypoint of path

          if (keyPointHits.length >= 2) {
            var _keyPointHits = _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(keyPointHits, 2),
                first = _keyPointHits[0],
                second = _keyPointHits[1];

            var left = first.index > second.index ? first : second;
            var right = first.index <= second.index ? first : second; // do they belong to the same path

            if (left.parent.name !== right.parent.name) {
              if (_NodeItem_Path__WEBPACK_IMPORTED_MODULE_28__["default"].areKeyPointsCompatible(left, right, parentView)) {
                parentView.getNodeFromTree(left.parent.name).forEach(function (_ref19) {
                  var firstPath = _ref19.item;
                  parentView.getNodeFromTree(right.parent.name).forEach(function (_ref20) {
                    var secondPath = _ref20.item;
                    var oldPaths = [firstPath, secondPath].map(function (path) {
                      return {
                        parent: path.mesh.parent,
                        dict: path.toDict(),
                        children: _babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default()(path.mesh._children)
                      };
                    });
                    var mergeName = firstPath.name + "_" + secondPath.name;
                    parentView.getUndoManager().doIt(mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_17__["UndoManager"].actionBuilder().doAction(function () {
                      _NodeItem_Path__WEBPACK_IMPORTED_MODULE_28__["default"].mergePaths(firstPath.name, secondPath.name, mergeName, parentView);
                    }).undoAction(function (_ref21) {
                      var _ref21$is2UpdateInSer = _ref21.is2UpdateInServer,
                          is2UpdateInServer = _ref21$is2UpdateInSer === void 0 ? true : _ref21$is2UpdateInSer;
                      _NodeItem_Path__WEBPACK_IMPORTED_MODULE_28__["default"].unMergePaths(oldPaths, mergeName, parentView, is2UpdateInServer);
                    }).build());
                  });
                });
              }
            }
          }
        }
      }
    }
  }]);

  return DragObjectsAction;
}(_MouseKeysAction__WEBPACK_IMPORTED_MODULE_14__["default"]); //========================================================================================

/*                                                                                      *
 *                                     SELECTION DIV                                    *
 *                                                                                      */
//========================================================================================


var SelectDiv = function SelectDiv(_ref22) {
  var left = _ref22.left,
      top = _ref22.top,
      width = _ref22.width,
      height = _ref22.height,
      style = _ref22.style;
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default.a.createElement("div", {
    style: _objectSpread({
      position: "absolute",
      top: top,
      left: left,
      width: width,
      height: height,
      borderRadius: 10,
      border: "solid",
      borderColor: "#c7c7c7"
    }, style)
  });
};

SelectDiv.defaultProps = {
  left: 0,
  top: 0,
  width: 0,
  height: 0
};
var ID = "SELECTION_TOOL_ID"; //========================================================================================

/*                                                                                      *
 *                                        EXPORT                                        *
 *                                                                                      */
//========================================================================================

/* harmony default export */ __webpack_exports__["default"] = (DragObjectsAction);

/***/ }),

/***/ "./src/Components/Viewer/Actions/DrawGraphAction.js":
/*!**********************************************************!*\
  !*** ./src/Components/Viewer/Actions/DrawGraphAction.js ***!
  \**********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/extends */ "@babel/runtime/helpers/esm/extends");
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/toConsumableArray */ "@babel/runtime/helpers/esm/toConsumableArray");
/* harmony import */ var _babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "@babel/runtime/helpers/esm/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "@babel/runtime/helpers/esm/createClass");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/assertThisInitialized */ "@babel/runtime/helpers/esm/assertThisInitialized");
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "@babel/runtime/helpers/esm/inherits");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "@babel/runtime/helpers/esm/possibleConstructorReturn");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babel/runtime/helpers/esm/get */ "@babel/runtime/helpers/esm/get");
/* harmony import */ var _babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "@babel/runtime/helpers/esm/getPrototypeOf");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "@babel/runtime/helpers/esm/defineProperty");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var _MouseKeysAction__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./MouseKeysAction */ "./src/Components/Viewer/Actions/MouseKeysAction.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_11__);
/* harmony import */ var _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../Util3d/Util3d */ "./src/Components/Viewer/Util3d/Util3d.js");
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @babylonjs/core */ "@babylonjs/core");
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(_babylonjs_core__WEBPACK_IMPORTED_MODULE_13__);
/* harmony import */ var _NodeItem_GraphItem__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../NodeItem/GraphItem */ "./src/Components/Viewer/NodeItem/GraphItem.js");
/* harmony import */ var _Utils_Constants__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../Utils/Constants */ "./src/Components/Viewer/Utils/Constants.js");
/* harmony import */ var mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! mov-fe-lib-core */ "mov-fe-lib-core");
/* harmony import */ var mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_16__);
/* harmony import */ var _Utils_Utils__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../Utils/Utils */ "./src/Components/Viewer/Utils/Utils.js");
/* harmony import */ var _NodeItem_Path__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../NodeItem/Path */ "./src/Components/Viewer/NodeItem/Path.js");
/* harmony import */ var monet__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! monet */ "monet");
/* harmony import */ var monet__WEBPACK_IMPORTED_MODULE_19___default = /*#__PURE__*/__webpack_require__.n(monet__WEBPACK_IMPORTED_MODULE_19__);
/* harmony import */ var _NodeItem_GlobalRef__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../NodeItem/GlobalRef */ "./src/Components/Viewer/NodeItem/GlobalRef.js");











function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_8___default()(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_8___default()(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_6___default()(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }













var DrawGraphAction = /*#__PURE__*/function (_MouseKeysAction) {
  _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_5___default()(DrawGraphAction, _MouseKeysAction);

  var _super = _createSuper(DrawGraphAction);

  function DrawGraphAction() {
    var _thisSuper, _this;

    _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2___default()(this, DrawGraphAction);

    _this = _super.call(this);

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), "action", function (parentView) {
      _babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_7___default()((_thisSuper = _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_8___default()(DrawGraphAction.prototype)), "action", _thisSuper).call(_thisSuper, parentView);

      parentView.setSelectedAction(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this)); // Make LogicGraph visible when action is selected

      parentView.getGraph().forEach(function (node) {
        if (!node.isVisible) {
          node.item.mesh.setEnabled(true);
        }
      });
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), "onPointerDown", function (evt, parentView) {
      if (!(evt.buttons === 1)) return;

      _this.mousePosConsumer(parentView)(function (mousePos, memory) {
        var scene = memory.scene,
            ground = memory.ground;
        var maybeMesh = _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_12__["default"].pickMesh(scene, ground).filter(_this.isConnectableMesh(parentView));
        maybeMesh.forEach(function (possibleMesh) {
          parentView.highlightMeshesInScene([possibleMesh], _babylonjs_core__WEBPACK_IMPORTED_MODULE_13__["Color3"].Green());

          _this.onPointerDownLine(mousePos, possibleMesh, memory, parentView);
        });
        maybeMesh.orElseRun(function () {
          // no mesh found
          parentView.highlightMeshesInScene();

          _this.resetPreview();
        });
      });
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), "onPointerMove", function (evt, parentView) {
      _this.mousePosConsumer(parentView)(function (mousePos, memory) {
        var scene = memory.scene,
            ground = memory.ground;
        _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_12__["default"].pickMesh(scene, ground).filter(_this.isConnectableMesh(parentView)).cata(function () {
          return parentView.highlightMeshesInScene();
        }, function (pickedMesh) {
          return parentView.highlightMeshesInScene([pickedMesh], _babylonjs_core__WEBPACK_IMPORTED_MODULE_13__["Color3"].Green());
        });
        if (!_this.firstMousePos) return;

        _this.onPointerMoveLine(mousePos, memory, parentView);
      });
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), "onPointerUp", function (evt, parentView) {});

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), "onKeyUp", function (evt, parentView) {
      var escapeAction = function escapeAction() {
        return _this.resetPreview();
      };

      var predicateActionList = [{
        predicate: function predicate(e) {
          return ["Backspace", "Delete", "Escape"].includes(e.code);
        },
        action: escapeAction
      }];
      Object(_Utils_Utils__WEBPACK_IMPORTED_MODULE_17__["selectOneAction"])(predicateActionList)(evt);
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), "resetPreview", function () {
      if (!!_this.firstMousePos) {
        _this.deletePreviewMeshes();

        _this.firstMousePos = undefined;
        _this.firstClickedMesh = undefined;
      }
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), "deletePreviewMeshes", function () {
      _this.previewMeshes.forEach(function (mesh) {
        return mesh.dispose();
      });

      _this.previewMeshes = [];
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), "mousePosConsumer", function (parentView) {
      return function (lambda) {
        parentView.getSceneMemory().forEach(function (memory) {
          var scene = memory.scene,
              ground = memory.ground;
          var maybeCurrent = _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_12__["default"].getGroundPosition(scene, ground);
          maybeCurrent.forEach(function (mousePos) {
            return lambda(mousePos, memory);
          });
        });
      };
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), "isConnectableMesh", function (parentView) {
      return function (mesh) {
        return parentView.getNodeFromTree(mesh.name).cata(function () {
          var _mesh$parent;

          // mesh is not a nodeItem, check if mesh parent is a path and is beginning or end of path
          var parentName = (mesh === null || mesh === void 0 ? void 0 : (_mesh$parent = mesh.parent) === null || _mesh$parent === void 0 ? void 0 : _mesh$parent.name) || "";
          return parentView.getNodeFromTree(parentName).filter(function (_ref) {
            var item = _ref.item;
            return item.getType() === _NodeItem_Path__WEBPACK_IMPORTED_MODULE_18__["default"].TYPE;
          }).filter(function (_ref2) {
            var item = _ref2.item;
            var index = mesh.index;
            return index === 0 || index === item.keyPoints.length - 1;
          });
        }, function (_ref3) {
          var item = _ref3.item;
          // mesh is a nodeItem, check if not path
          return monet__WEBPACK_IMPORTED_MODULE_19__["Maybe"].some(mesh).filter(function (_) {
            return item.getType() !== _NodeItem_Path__WEBPACK_IMPORTED_MODULE_18__["default"].TYPE && item.getType() !== _NodeItem_GlobalRef__WEBPACK_IMPORTED_MODULE_20__["default"].TYPE;
          });
        }).orSome(false);
      };
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), "belongsToPath", function (parentView) {
      return function (mesh) {
        var _mesh$parent2;

        var parentName = (mesh === null || mesh === void 0 ? void 0 : (_mesh$parent2 = mesh.parent) === null || _mesh$parent2 === void 0 ? void 0 : _mesh$parent2.name) || "";
        return parentView.getNodeFromTree(parentName).filter(function (_ref4) {
          var item = _ref4.item;
          return item.getType() === _NodeItem_Path__WEBPACK_IMPORTED_MODULE_18__["default"].TYPE;
        }).map(function (_ref5) {
          var item = _ref5.item;
          return item.name;
        });
      };
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), "belongs2SamePath", function (parentView) {
      return function (meshI, meshJ) {
        var belongsToPath = _this.belongsToPath(parentView);

        return belongsToPath(meshI).flatMap(function (nameI) {
          return belongsToPath(meshJ).map(function (nameJ) {
            return nameI === nameJ;
          });
        }).orSome(false);
      };
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), "onPointerDownLine", function (mousePos, clickedMesh, memory, parentView) {
      var scene = memory.scene;

      if (!_this.firstMousePos) {
        _this.firstMousePos = mousePos;
        _this.firstClickedMesh = clickedMesh;
      } else {
        //firstMousePos exists
        if (_this.belongs2SamePath(parentView)(clickedMesh, _this.firstClickedMesh) || _NodeItem_GraphItem__WEBPACK_IMPORTED_MODULE_14__["default"].isInvalidEdge(_this.firstClickedMesh, clickedMesh)) {
          _this.resetPreview();
        } else {
          parentView.getUndoManager().doIt(_this.getUndoAbleLineEdge([_this.firstClickedMesh, clickedMesh], scene, parentView, clickedMesh));
        }
      }
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), "getUndoAbleLineEdge", function (edgeMeshes, scene, parentView) {
      return mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_16__["UndoManager"].actionBuilder().doAction(function () {
        _this.createEdge(edgeMeshes, scene, parentView);

        _this.resetPreview();
      }).undoAction(function (_ref6) {
        var _ref6$is2UpdateInServ = _ref6.is2UpdateInServer,
            is2UpdateInServer = _ref6$is2UpdateInServ === void 0 ? true : _ref6$is2UpdateInServ;

        _this.deleteEdge(edgeMeshes, parentView, is2UpdateInServer);
      }).build();
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), "onPointerMoveLine", function (mousePos, memory, parentView) {
      // preview line
      var visibility = 0.25;
      var scene = memory.scene;
      var rootMesh = parentView.getRootNode().item.mesh;
      var edgeEmbedding = toGlobalCoord(parentView)([_this.firstMousePos, mousePos]);

      _this.deletePreviewMeshes();

      _this.previewMeshes = [_NodeItem_GraphItem__WEBPACK_IMPORTED_MODULE_14__["default"].getEdgeMesh(scene, edgeEmbedding, "previewEdge", _babylonjs_core__WEBPACK_IMPORTED_MODULE_13__["Color3"].Blue(), _Utils_Constants__WEBPACK_IMPORTED_MODULE_15__["default"].RADIUS / 4)];

      _this.previewMeshes.forEach(function (mesh) {
        mesh.visibility = visibility;
        mesh.parent = rootMesh;
        mesh.isPickable = false;
      });
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), "createEdge", function (edgeMeshes, scene, parentView) {
      _NodeItem_GraphItem__WEBPACK_IMPORTED_MODULE_14__["default"].createGraphItemIfNone(scene, parentView);
      parentView.getGraph().forEach(function (graphNode) {
        var graphItem = graphNode.item;
        graphItem.addEdge.apply(graphItem, _babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default()(edgeMeshes));
        parentView.updateNodeInServer(graphItem.name);
      });
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), "deleteEdge", function (edgeMeshes, parentView, is2UpdateInServer) {
      parentView.getGraph().forEach(function (graphNode) {
        var graphItem = graphNode.item;
        graphItem.delEdge.apply(graphItem, _babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default()(edgeMeshes));
        if (is2UpdateInServer) parentView.updateNodeInServer(graphItem.name);
      });
    });

    _this.key = "drawGraph";
    _this.name = "Draw Graph [6]";

    _this.icon = function (props) {
      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement("i", _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0___default()({
        className: "fas fa-project-diagram"
      }, props));
    };

    _this.previewMeshes = [];
    _this.firstMousePos = undefined;
    _this.firstClickedMesh = undefined;
    return _this;
  } //========================================================================================

  /*                                                                                      *
   *                            Mouse Key Action Implementation                           *
   *                                                                                      */
  //========================================================================================


  _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_3___default()(DrawGraphAction, [{
    key: "onChange",
    value: function onChange() {
      this.resetPreview();
    } //========================================================================================

    /*                                                                                      *
     *                                  Auxiliary functions                                  *
     *                                                                                      */
    //========================================================================================

  }]);

  return DrawGraphAction;
}(_MouseKeysAction__WEBPACK_IMPORTED_MODULE_10__["default"]);

var toGlobalCoord = _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_12__["default"].toGlobalCoord;
/* harmony default export */ __webpack_exports__["default"] = (DrawGraphAction);

/***/ }),

/***/ "./src/Components/Viewer/Actions/DrawPathAction.js":
/*!*********************************************************!*\
  !*** ./src/Components/Viewer/Actions/DrawPathAction.js ***!
  \*********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/extends */ "@babel/runtime/helpers/esm/extends");
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/toConsumableArray */ "@babel/runtime/helpers/esm/toConsumableArray");
/* harmony import */ var _babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "@babel/runtime/helpers/esm/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "@babel/runtime/helpers/esm/createClass");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/assertThisInitialized */ "@babel/runtime/helpers/esm/assertThisInitialized");
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "@babel/runtime/helpers/esm/inherits");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "@babel/runtime/helpers/esm/possibleConstructorReturn");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babel/runtime/helpers/esm/get */ "@babel/runtime/helpers/esm/get");
/* harmony import */ var _babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "@babel/runtime/helpers/esm/getPrototypeOf");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "@babel/runtime/helpers/esm/defineProperty");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../Util3d/Util3d */ "./src/Components/Viewer/Util3d/Util3d.js");
/* harmony import */ var _Math_Vec3__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../Math/Vec3 */ "./src/Components/Viewer/Math/Vec3.js");
/* harmony import */ var _NodeItem_Path__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../NodeItem/Path */ "./src/Components/Viewer/NodeItem/Path.js");
/* harmony import */ var _MouseKeysAction__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./MouseKeysAction */ "./src/Components/Viewer/Actions/MouseKeysAction.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_14__);
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @babylonjs/core */ "@babylonjs/core");
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(_babylonjs_core__WEBPACK_IMPORTED_MODULE_15__);
/* harmony import */ var mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! mov-fe-lib-core */ "mov-fe-lib-core");
/* harmony import */ var mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_16__);
/* harmony import */ var _Utils_Utils__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../Utils/Utils */ "./src/Components/Viewer/Utils/Utils.js");
/* harmony import */ var _Utils_Constants__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../Utils/Constants */ "./src/Components/Viewer/Utils/Constants.js");











function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_8___default()(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_8___default()(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_6___default()(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }











var DrawPathAction = /*#__PURE__*/function (_MouseKeysAction) {
  _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_5___default()(DrawPathAction, _MouseKeysAction);

  var _super = _createSuper(DrawPathAction);

  function DrawPathAction() {
    var _thisSuper, _this;

    _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2___default()(this, DrawPathAction);

    _this = _super.call(this);

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), "action", function (parentView) {
      _babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_7___default()((_thisSuper = _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_8___default()(DrawPathAction.prototype)), "action", _thisSuper).call(_thisSuper, parentView);

      parentView.setSelectedAction(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this));
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), "onChange", function (parentView) {
      if (_this.mouseCurve.length > 1) {
        parentView.getSceneMemory().forEach(function (_ref) {
          var scene = _ref.scene;
          parentView.getUndoManager().doIt(_this.getUndoAbleEnterAction(_this.mouseCurve, scene, parentView));
        });
      }
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), "onPointerDown", function (evt, parentView) {
      if (!(evt.buttons === 1)) return;

      if (!_this.spherePlaceHolder.isDisposed()) {
        _this.createPointInCurve(parentView);

        return;
      }

      parentView.getSceneMemory().forEach(function (memory) {
        var scene = memory.scene,
            ground = memory.ground,
            camera = memory.camera,
            canvas = memory.canvas;
        var maybeMousePos = _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_10__["default"].getGroundPosition(scene, ground);
        maybeMousePos.forEach(function (mousePos) {
          camera.detachControl(canvas);

          _this.mouseCurve.push(mousePos);

          parentView.getUndoManager().doIt(_this.getUndoAbleClickAction(_this.mouseCurve, scene, parentView, memory));
        });
      });
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), "getUndoAbleClickAction", function (keyPoints, scene, parentView, _ref2) {
      var camera = _ref2.camera,
          canvas = _ref2.canvas;
      var kps = keyPoints.map(function (x) {
        return _Math_Vec3__WEBPACK_IMPORTED_MODULE_11__["default"].ofBabylon(x);
      });
      return mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_16__["UndoManager"].actionBuilder().doAction(function () {
        var finalKps = kps.length === 1 ? [kps[0], kps[0]] : _babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default()(kps);
        parentView.deleteNodeFromTreeUsingName(TEMP_PATH_NAME, false, false);

        _this.createCurve(finalKps, TEMP_PATH_NAME, scene, parentView, false);

        if (kps.length <= 2) {
          parentView.setContextActions(_this.getDrawPathContextAction(camera, canvas, scene));
        }

        _this.mouseCurve = _babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default()(kps);
      }).undoAction(function (_ref3) {
        var _ref3$is2UpdateInServ = _ref3.is2UpdateInServer,
            is2UpdateInServer = _ref3$is2UpdateInServ === void 0 ? true : _ref3$is2UpdateInServ;
        parentView.deleteNodeFromTreeUsingName(TEMP_PATH_NAME, is2UpdateInServer);
        var reducedKps = kps.slice(0, kps.length - 1);
        var finalKps = reducedKps.length === 1 ? [reducedKps[0], reducedKps[0]] : reducedKps;

        if (is2UpdateInServer) {
          reducedKps.length > 0 && _this.createCurve(finalKps, TEMP_PATH_NAME, scene, parentView, false);
          _this.mouseCurve = reducedKps;
        } else {
          _this.mouseCurve = [];
        }
      }).build();
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), "onPointerMove", function (evt, parentView) {
      _this.addKeyPointPlaceHolder(parentView);
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), "onPointerUp", function (evt, parentView) {// empty
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), "onKeyUp", function (evt, parentView) {
      parentView.getSceneMemory().forEach(function (memory) {
        var scene = memory.scene,
            camera = memory.camera,
            canvas = memory.canvas;

        var contextActions = _this.getDrawPathContextAction(camera, canvas, scene);

        var actions = [{
          predicate: function predicate(e) {
            return e.code === "Enter" || e.code === "NumpadEnter";
          },
          action: function action() {
            return contextActions[1].action(parentView);
          }
        }, {
          predicate: function predicate(e) {
            return e.code === "Delete" || e.code === "Backspace";
          },
          action: function action() {
            return contextActions[0].action(parentView);
          }
        }, {
          predicate: function predicate(e) {
            return e.code === "Escape";
          },
          action: function action() {
            contextActions[0].action(parentView);
          }
        }];
        Object(_Utils_Utils__WEBPACK_IMPORTED_MODULE_17__["selectOneAction"])(actions)(evt);
      });
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), "createCurve", function (curve, name, scene, parentView) {
      var is2addInServer = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : true;
      var color = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : _babylonjs_core__WEBPACK_IMPORTED_MODULE_15__["Color3"].Gray();
      var rootMesh = parentView.getRootNode().item.mesh;
      var localCurve = _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_10__["default"].toGlobalCoord(parentView)(curve);
      var middlePoint = _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_10__["default"].pointAverage(localCurve);
      var centeredCurve = localCurve.map(function (w) {
        return w.subtract(middlePoint);
      });
      var pathItem = _NodeItem_Path__WEBPACK_IMPORTED_MODULE_12__["default"].ofDict(scene, {
        name: name,
        position: _Math_Vec3__WEBPACK_IMPORTED_MODULE_11__["default"].ofBabylon(middlePoint).toArray(),
        color: [color.r, color.g, color.b],
        localPath: centeredCurve.map(function (z) {
          return _Math_Vec3__WEBPACK_IMPORTED_MODULE_11__["default"].ofBabylon(z).toArray();
        })
      }, parentView);
      pathItem.mesh.parent = rootMesh;
      parentView.addNodeItem2Tree(pathItem, rootMesh.name, is2addInServer, true, is2addInServer);
      return pathItem;
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), "getDrawPathContextAction", function (camera, canvas, scene) {
      var ans = [];
      ans.push({
        icon: function icon(props) {
          return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_14___default.a.createElement("i", _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0___default()({
            className: "fas fa-trash"
          }, props));
        },
        action: function action(parentView) {
          camera.attachControl(canvas, true);
          parentView.deleteNodeFromTreeUsingName(TEMP_PATH_NAME, false);
          _this.mouseCurve = [];
          parentView.closeContextDial();
        },
        name: "Clear Path [ESC | DEL | Backspace]"
      });

      if (_this.mouseCurve.length > 1) {
        ans.push({
          icon: function icon(props) {
            return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_14___default.a.createElement("i", _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0___default()({
              className: "fas fa-check"
            }, props));
          },
          action: function action(parentView) {
            camera.attachControl(canvas, true);
            parentView.getUndoManager().doIt(_this.getUndoAbleEnterAction(_this.mouseCurve, scene, parentView));
          },
          name: "Create Path [Enter]"
        });
      }

      return ans;
    });

    _this.key = "drawPath";
    _this.name = "Draw Path [2]";

    _this.icon = function (props) {
      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_14___default.a.createElement("i", _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0___default()({
        className: "fas fa-bezier-curve"
      }, props));
    };

    _this.mouseCurve = [];
    _this.spherePlaceHolder = {
      dispose: function dispose() {},
      isDisposed: function isDisposed() {
        return true;
      }
    };
    return _this;
  }

  _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_3___default()(DrawPathAction, [{
    key: "getUndoAbleEnterAction",
    value: function getUndoAbleEnterAction(keyPoints, scene, parentView) {
      var _this2 = this;

      var kps = _babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default()(keyPoints);

      var name = "Path".concat(Math.floor(Math.random() * 1e3));
      return mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_16__["UndoManager"].actionBuilder().doAction(function () {
        parentView.deleteNodeFromTreeUsingName(TEMP_PATH_NAME, false);

        var pathItem = _this2.createCurve(kps, name, scene, parentView, true);

        _this2.mouseCurve = [];
        parentView.setPropertiesWithName(name);
        parentView.closeContextDial();

        if (pathItem && pathItem.keyPoints) {
          var keyPointMeshes = pathItem.keyPoints;
          _NodeItem_Path__WEBPACK_IMPORTED_MODULE_12__["default"].addEdgesInKeyPoints(keyPointMeshes, scene, parentView);
        }
      }).undoAction(function (_ref4) {
        var _ref4$is2UpdateInServ = _ref4.is2UpdateInServer,
            is2UpdateInServer = _ref4$is2UpdateInServ === void 0 ? true : _ref4$is2UpdateInServ;

        _this2.deleteEdgeInKeyPoints(name, parentView, is2UpdateInServer);

        parentView.deleteNodeFromTreeUsingName(name, is2UpdateInServer);

        if (is2UpdateInServer) {
          _this2.createCurve(kps, TEMP_PATH_NAME, scene, parentView, false);

          _this2.mouseCurve = kps;
        } else {
          _this2.mouseCurve = [];
          parentView.deleteNodeFromTreeUsingName(TEMP_PATH_NAME, false);
        }
      }).build();
    }
  }, {
    key: "deleteEdgeInKeyPoints",
    value: function deleteEdgeInKeyPoints(pathName, parentView) {
      var is2UpdateInServer = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;
      parentView.getGraph().forEach(function (_ref5) {
        var graph = _ref5.item;
        parentView.getNodeFromTree(pathName).forEach(function (_ref6) {
          var pathItem = _ref6.item;
          var keyPointMeshes = pathItem.keyPoints;
          var edgeMeshes = [keyPointMeshes[0], keyPointMeshes[keyPointMeshes.length - 1]];
          graph.delEdge.apply(graph, edgeMeshes);
          if (is2UpdateInServer) parentView.updateNodeInServer(graph.name);
        });
      });
    }
  }, {
    key: "addKeyPointPlaceHolder",
    value: function addKeyPointPlaceHolder(parentView) {
      var _this3 = this;

      this.spherePlaceHolder.dispose();
      parentView.getSceneMemory().forEach(function (_ref7) {
        var scene = _ref7.scene,
            ground = _ref7.ground;
        _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_10__["default"].pickMesh(scene, ground).forEach(function (mesh) {
          if (mesh.name === TEMP_PATH_NAME) return;
          parentView.getNodeFromTree(mesh.name).forEach(function (_ref8) {
            var nodeItem = _ref8.item;

            if (nodeItem.getType() === _NodeItem_Path__WEBPACK_IMPORTED_MODULE_12__["default"].TYPE) {
              _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_10__["default"].getGroundPosition(scene, ground).forEach(function (groundPos) {
                var rootMesh = parentView.getRootNode().item.mesh;
                _this3.spherePlaceHolder = _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_10__["default"].createSphere(scene, _babylonjs_core__WEBPACK_IMPORTED_MODULE_15__["Color3"].Gray(), _Utils_Constants__WEBPACK_IMPORTED_MODULE_18__["default"].RADIUS, "sphereInsertPlaceHolder", false);
                _this3.spherePlaceHolder.parent = rootMesh;
                _this3.spherePlaceHolder.position = _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_10__["default"].toGlobalCoord(parentView)(groundPos);
                _this3.spherePlaceHolder.visibility = 0.5;
              });
            }
          });
        });
      });
    }
  }, {
    key: "createPointInCurve",
    value: function createPointInCurve(parentView) {
      var _this4 = this;

      parentView.getSceneMemory().forEach(function (_ref9) {
        var scene = _ref9.scene,
            ground = _ref9.ground;

        // dispose mesh before pick mesh
        _this4.spherePlaceHolder.dispose(); // it can be shown that the picked mesh is the curve we want to edit


        _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_10__["default"].pickMesh(scene, ground).forEach(function (_ref10) {
          var name = _ref10.name;
          parentView.getNodeFromTree(name).forEach(function (_ref11) {
            var pathItem = _ref11.item;
            _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_10__["default"].getGroundPosition(scene, ground).forEach(function (groundPos) {
              var oldPoints = _babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default()(pathItem.localPath).map(function (p) {
                return _Math_Vec3__WEBPACK_IMPORTED_MODULE_11__["default"].of(p).toBabylon();
              });

              var oldPosition = pathItem.mesh.position;
              parentView.getUndoManager().doIt(mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_16__["UndoManager"].actionBuilder().doAction(function () {
                _this4.insertPointInCurve(scene, parentView, pathItem, groundPos);

                parentView.updateNodeInServer(pathItem.name);
              }).undoAction(function (_ref12) {
                var _ref12$is2UpdateInSer = _ref12.is2UpdateInServer,
                    is2UpdateInServer = _ref12$is2UpdateInSer === void 0 ? true : _ref12$is2UpdateInSer;
                _NodeItem_Path__WEBPACK_IMPORTED_MODULE_12__["default"].createNewMeshFromOldUsingNewPoints(oldPoints, scene, pathItem, parentView, _NodeItem_Path__WEBPACK_IMPORTED_MODULE_12__["default"].onAddNewPointKeyPointUpdate);
                pathItem.mesh.position = oldPosition;
                if (is2UpdateInServer) parentView.updateNodeInServer(pathItem.name);
              }).build());
            });
          });
        });
      });
    }
  }, {
    key: "insertPointInCurve",
    value: function insertPointInCurve(scene, parentView, pathItem, groundPosInWorld) {
      var localGround = _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_10__["default"].getLocalCoordFromWorld({
        parent: pathItem.mesh
      }, _Math_Vec3__WEBPACK_IMPORTED_MODULE_11__["default"].ofBabylon(groundPosInWorld));
      var localPath = pathItem.localPath.map(function (p) {
        return _Math_Vec3__WEBPACK_IMPORTED_MODULE_11__["default"].of(p);
      });
      var sortedDistances = localPath.map(function (p, i) {
        return {
          distance: localGround.sub(p).length(),
          index: i
        };
      }).sort(function (a, b) {
        return a.distance - b.distance;
      }); // all paths have 2 points at least

      var minIndex = Math.min(sortedDistances[0].index, sortedDistances[1].index);
      var localPathB = localPath.map(function (p) {
        return p.toBabylon();
      });
      var newPoints = [].concat(_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default()(localPathB.slice(0, minIndex + 1)), [localGround.toBabylon()], _babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default()(localPathB.slice(minIndex + 1)));
      _NodeItem_Path__WEBPACK_IMPORTED_MODULE_12__["default"].createNewMeshFromOldUsingNewPoints(newPoints, scene, pathItem, parentView, _NodeItem_Path__WEBPACK_IMPORTED_MODULE_12__["default"].onAddNewPointKeyPointUpdate);
    }
  }]);

  return DrawPathAction;
}(_MouseKeysAction__WEBPACK_IMPORTED_MODULE_13__["default"]);

var TEMP_PATH_NAME = "temp_curve";
/* harmony default export */ __webpack_exports__["default"] = (DrawPathAction);

/***/ }),

/***/ "./src/Components/Viewer/Actions/MeasureAction.js":
/*!********************************************************!*\
  !*** ./src/Components/Viewer/Actions/MeasureAction.js ***!
  \********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/extends */ "@babel/runtime/helpers/esm/extends");
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "@babel/runtime/helpers/esm/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "@babel/runtime/helpers/esm/createClass");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/assertThisInitialized */ "@babel/runtime/helpers/esm/assertThisInitialized");
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "@babel/runtime/helpers/esm/inherits");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "@babel/runtime/helpers/esm/possibleConstructorReturn");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/esm/get */ "@babel/runtime/helpers/esm/get");
/* harmony import */ var _babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "@babel/runtime/helpers/esm/getPrototypeOf");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "@babel/runtime/helpers/esm/defineProperty");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../Util3d/Util3d */ "./src/Components/Viewer/Util3d/Util3d.js");
/* harmony import */ var _MouseKeysAction__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./MouseKeysAction */ "./src/Components/Viewer/Actions/MouseKeysAction.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_11__);
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @babylonjs/core */ "@babylonjs/core");
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(_babylonjs_core__WEBPACK_IMPORTED_MODULE_12__);
/* harmony import */ var _babylonjs_gui_2D__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @babylonjs/gui/2D */ "@babylonjs/gui/2D");
/* harmony import */ var _babylonjs_gui_2D__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(_babylonjs_gui_2D__WEBPACK_IMPORTED_MODULE_13__);
/* harmony import */ var _Math_Vec2__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../Math/Vec2 */ "./src/Components/Viewer/Math/Vec2.js");










function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7___default()(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7___default()(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5___default()(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }








var MeasureAction = /*#__PURE__*/function (_MouseKeysAction) {
  _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4___default()(MeasureAction, _MouseKeysAction);

  var _super = _createSuper(MeasureAction);

  function MeasureAction() {
    var _thisSuper, _this;

    _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default()(this, MeasureAction);

    _this = _super.call(this);

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3___default()(_this), "action", function (parentView) {
      _babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_6___default()((_thisSuper = _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3___default()(_this), _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7___default()(MeasureAction.prototype)), "action", _thisSuper).call(_thisSuper, parentView);

      parentView.setSelectedAction(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3___default()(_this));
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3___default()(_this), "onChange", function (parentView) {
      _this.resetMeasure(parentView);
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3___default()(_this), "onPointerDown", function (evt, parentView) {
      if (evt.button !== 0) {
        return;
      }

      parentView.getSceneMemory().forEach(function (_ref) {
        var scene = _ref.scene,
            ground = _ref.ground,
            camera = _ref.camera,
            canvas = _ref.canvas;
        _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_9__["default"].getGroundPosition(scene, ground).forEach(function (current) {
          var currentMousePos = _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_9__["default"].toGlobalCoord(parentView)(current);

          _this.ruler.push(currentMousePos);

          if (_this.ruler.length > 2) {
            _this.resetMeasure(parentView);
          } else if (_this.ruler.length === 2) {
            // remove temp mesh
            _this.rulerMesh && _this.rulerMesh.dispose();
            _this.rulerMesh = _this.createRulerMesh(_this.ruler, scene, parentView);

            _this.addTextGUI(scene, _this.calculateDistance(_this.ruler[0], currentMousePos), evt);

            camera.attachControl(canvas, true);
          } else {
            camera.detachControl(canvas);
          }
        });
      });
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3___default()(_this), "onPointerMove", function (evt, parentView) {
      parentView.getSceneMemory().forEach(function (_ref2) {
        var scene = _ref2.scene,
            ground = _ref2.ground;
        _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_9__["default"].getGroundPosition(scene, ground).forEach(function (current) {
          var currentMousePos = _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_9__["default"].toGlobalCoord(parentView)(current); // If the user pressed the mouse wheel or is rotating the view, it will delete the ruler

          if (_this.ruler.length >= 2 && (evt.buttons === 4 || evt.pressure === 0.5)) {
            _this.resetMeasure(parentView);
          } // Fixed one point so display the ruler real time


          if (_this.ruler.length === 1) {
            // Remove previous element from Mesh to not overlap
            _this.rulerMesh && _this.rulerMesh.dispose();
            _this.rulerMesh = _this.createRulerMesh([_this.ruler[0], currentMousePos], scene, parentView);

            _this.addTextGUI(scene, _this.calculateDistance(_this.ruler[0], currentMousePos), evt);
          }
        });
      });
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3___default()(_this), "onPointerUp", function (evt, parentView) {});

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3___default()(_this), "onWheel", function (evt, parentView) {
      if (Math.abs(evt.deltaY) > 0) {
        _this.resetMeasure(parentView);
      }
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3___default()(_this), "calculateDistance", function (start, end) {
      var startVec = _Math_Vec2__WEBPACK_IMPORTED_MODULE_14__["default"].ofBabylon(start);
      var endVec = _Math_Vec2__WEBPACK_IMPORTED_MODULE_14__["default"].ofBabylon(end);
      return startVec.sub(endVec).length().toFixed(3);
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3___default()(_this), "addTextGUI", function (scene, value, evt) {
      // TODO: maybe should use mouse coordinates  advanced texture from mainView
      if (!this.advancedTexture) {
        this.advancedTexture = _babylonjs_gui_2D__WEBPACK_IMPORTED_MODULE_13__["AdvancedDynamicTexture"].CreateFullscreenUI("UI Ruler", true, scene);
      }

      this.text && this.advancedTexture.removeControl(this.text);
      this.text = new _babylonjs_gui_2D__WEBPACK_IMPORTED_MODULE_13__["TextBlock"]();
      this.text.text = "".concat(value, "m");
      this.text.fontSize = 17;
      this.text.left = scene.pointerX - evt.target.width / 2 + 20;
      this.text.top = scene.pointerY - evt.target.height / 2 + 20;
      this.text.color = "white";
      this.advancedTexture.addControl(this.text);
    });

    _this.key = "drawWall";
    _this.name = "Measure [7]";

    _this.icon = function (props) {
      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement("i", _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0___default()({
        className: "fas fa-ruler"
      }, props));
    };

    _this.ruler = []; // can only have two elements, start point and end point

    _this.rulerMesh = null;
    _this.advancedTexture = null;
    _this.text = null;
    return _this;
  }

  _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2___default()(MeasureAction, [{
    key: "resetMeasure",
    value: function resetMeasure(parentView) {
      this.rulerMesh && this.rulerMesh.dispose();
      this.text && this.text.dispose();
      this.ruler = [];
      parentView && parentView.getSceneMemory().forEach(function (_ref3) {
        var camera = _ref3.camera,
            canvas = _ref3.canvas;
        camera.attachControl(canvas, true);
      });
    }
  }, {
    key: "createRulerMesh",
    value: function createRulerMesh(points, scene, parentView) {
      var rulerMesh = _babylonjs_core__WEBPACK_IMPORTED_MODULE_12__["MeshBuilder"].CreateLines("ruler", {
        points: points,
        updatable: true
      }, scene);
      var rootMesh = parentView.getRootNode().item.mesh;
      rulerMesh.parent = rootMesh;
      return rulerMesh;
    }
  }]);

  return MeasureAction;
}(_MouseKeysAction__WEBPACK_IMPORTED_MODULE_10__["default"]);

/* harmony default export */ __webpack_exports__["default"] = (MeasureAction);

/***/ }),

/***/ "./src/Components/Viewer/Actions/MouseKeysAction.js":
/*!**********************************************************!*\
  !*** ./src/Components/Viewer/Actions/MouseKeysAction.js ***!
  \**********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "@babel/runtime/helpers/esm/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "@babel/runtime/helpers/esm/createClass");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "@babel/runtime/helpers/esm/inherits");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "@babel/runtime/helpers/esm/possibleConstructorReturn");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "@babel/runtime/helpers/esm/getPrototypeOf");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _Action__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Action */ "./src/Components/Viewer/Actions/Action.js");






function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4___default()(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4___default()(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3___default()(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }



var MouseKeysAction = /*#__PURE__*/function (_Action) {
  _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2___default()(MouseKeysAction, _Action);

  var _super = _createSuper(MouseKeysAction);

  function MouseKeysAction() {
    _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default()(this, MouseKeysAction);

    return _super.apply(this, arguments);
  }

  _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1___default()(MouseKeysAction, [{
    key: "onPointerDown",
    value: function onPointerDown(evt, parentView) {// to be implemented on sub classes
    }
  }, {
    key: "onPointerMove",
    value: function onPointerMove(evt, parentView) {// to be implemented on sub classes
    }
  }, {
    key: "onPointerUp",
    value: function onPointerUp(evt, parentView) {// to be implemented on sub classes
    }
  }, {
    key: "onKeyUp",
    value: function onKeyUp(evt, parentView) {// to be implemented on sub classes
    }
  }, {
    key: "onWheel",
    value: function onWheel(evt, parentView) {// to be implemented on sub classes
    }
  }]);

  return MouseKeysAction;
}(_Action__WEBPACK_IMPORTED_MODULE_5__["default"]);

/* harmony default export */ __webpack_exports__["default"] = (MouseKeysAction);

/***/ }),

/***/ "./src/Components/Viewer/Actions/NavigationPreviewAction.js":
/*!******************************************************************!*\
  !*** ./src/Components/Viewer/Actions/NavigationPreviewAction.js ***!
  \******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/toConsumableArray */ "@babel/runtime/helpers/esm/toConsumableArray");
/* harmony import */ var _babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/extends */ "@babel/runtime/helpers/esm/extends");
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "@babel/runtime/helpers/esm/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "@babel/runtime/helpers/esm/createClass");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/assertThisInitialized */ "@babel/runtime/helpers/esm/assertThisInitialized");
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "@babel/runtime/helpers/esm/inherits");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "@babel/runtime/helpers/esm/possibleConstructorReturn");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "@babel/runtime/helpers/esm/getPrototypeOf");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "@babel/runtime/helpers/esm/defineProperty");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var _MouseKeysAction__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./MouseKeysAction */ "./src/Components/Viewer/Actions/MouseKeysAction.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../Util3d/Util3d */ "./src/Components/Viewer/Util3d/Util3d.js");
/* harmony import */ var monet__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! monet */ "monet");
/* harmony import */ var monet__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(monet__WEBPACK_IMPORTED_MODULE_12__);
/* harmony import */ var _Utils_Constants__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../Utils/Constants */ "./src/Components/Viewer/Utils/Constants.js");
/* harmony import */ var _Math_Vec3__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../Math/Vec3 */ "./src/Components/Viewer/Math/Vec3.js");
/* harmony import */ var _NodeItem_NavigationPreviewItem__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../NodeItem/NavigationPreviewItem */ "./src/Components/Viewer/NodeItem/NavigationPreviewItem.js");
/* harmony import */ var mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! mov-fe-lib-core */ "mov-fe-lib-core");
/* harmony import */ var mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_16__);










function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7___default()(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7___default()(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_6___default()(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }






 // import JsonToReact from "../../_shared/JsonToReact/JsonToReact";




var NavigationPreviewAction = /*#__PURE__*/function (_MouseKeysAction) {
  _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_5___default()(NavigationPreviewAction, _MouseKeysAction);

  var _super = _createSuper(NavigationPreviewAction);

  /**
   *
   * @param {*} uIInOut: (title, reactFactory) => {}
   */
  function NavigationPreviewAction(uIInOut) {
    var _this;

    _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2___default()(this, NavigationPreviewAction);

    _this = _super.call(this);

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), "action", function (parentView) {
      setTimeout(function () {
        _this.uIInOut("Navigation preview params", function () {
          return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement("div", {
            style: {
              marginTop: "7px"
            }
          });
        });
      });
      parentView.setSelectedAction(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this));
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), "onPointerDown", function (evt, parentView) {
      if (evt.button !== 0) {
        return;
      }

      parentView.getSceneMemory().forEach(function (_ref) {
        var scene = _ref.scene,
            ground = _ref.ground,
            camera = _ref.camera,
            canvas = _ref.canvas;
        var maybeMousePos = _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_11__["default"].getGroundPosition(scene, ground);
        maybeMousePos.forEach(function (mousePos) {
          camera.detachControl(canvas);

          if (_this.poses.length >= 2) {
            _this.resetData();
          }

          _this.maybeFirstClickPos = monet__WEBPACK_IMPORTED_MODULE_12__["Maybe"].some(_Util3d_Util3d__WEBPACK_IMPORTED_MODULE_11__["default"].toGlobalCoord(parentView)(mousePos));
        });
      });
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), "onPointerMove", function (evt, parentView) {
      _this.maybeFirstClickPos.forEach(function (firstClickPos) {
        parentView.getSceneMemory().forEach(function (_ref2) {
          var scene = _ref2.scene,
              ground = _ref2.ground;
          var maybeMousePos = _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_11__["default"].getGroundPosition(scene, ground);
          maybeMousePos.forEach(function (mousePos) {
            var secondClickPos = _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_11__["default"].toGlobalCoord(parentView)(mousePos);
            _this.previewPoseMesh && _this.previewPoseMesh.dispose();
            _this.previewPoseMesh = _this.createPreviewPose(scene, parentView, firstClickPos, secondClickPos);
          });
        });
      });
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), "onPointerUp", function (evt, parentView) {
      parentView.getSceneMemory().forEach(function (_ref3) {
        var scene = _ref3.scene,
            ground = _ref3.ground,
            camera = _ref3.camera,
            canvas = _ref3.canvas;

        _this.maybeFirstClickPos.forEach(function (firstClickPos) {
          var maybeMousePos = _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_11__["default"].getGroundPosition(scene, ground);
          maybeMousePos.forEach(function (mousePos) {
            var secondClickPos = _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_11__["default"].toGlobalCoord(parentView)(mousePos);

            var poseMesh = _this.createPreviewPose(scene, parentView, firstClickPos, secondClickPos, true);

            poseMesh.material = _this.poseMeshes.push(poseMesh);
            var first = _Math_Vec3__WEBPACK_IMPORTED_MODULE_14__["default"].ofBabylon(firstClickPos);
            var v = _Math_Vec3__WEBPACK_IMPORTED_MODULE_14__["default"].ofBabylon(secondClickPos).sub(first);
            var theta = Math.atan2(v.y, v.x);

            _this.poses.push({
              position: first.toArray(),
              orientation: [Math.cos(theta / 2), 0, 0, Math.sin(theta / 2)]
            });

            if (_this.poses.length === 2) {
              _this.createNavPreviewNode(scene, parentView);

              _this.resetData();
            }
          });
        });

        camera.attachControl(canvas, true);
        _this.previewPoseMesh && _this.previewPoseMesh.dispose();
        _this.maybeFirstClickPos = monet__WEBPACK_IMPORTED_MODULE_12__["Maybe"].none();
      });
    });

    _this.key = "navigationPreviewAction";
    _this.name = "Add navigation preview [8]";

    _this.icon = function (props) {
      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement("i", _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_1___default()({
        className: "fas fa-road"
      }, props));
    };

    _this.uIInOut = uIInOut;
    _this.maybeFirstClickPos = monet__WEBPACK_IMPORTED_MODULE_12__["Maybe"].none();
    _this.previewPoseMesh = undefined;
    _this.poses = [];
    _this.poseMeshes = [];
    _this.schema = {
      jsonSchema: {
        type: "object",
        properties: {
          type: {
            type: "string",
            title: "Type"
          },
          config: {
            type: "string",
            title: "Robot Configuration"
          }
        }
      },
      uiSchema: {
        type: {
          "ui:disabled": true
        },
        config: {
          "ui:widget": "selectScopeModal",
          "ui:options": {
            scopeList: "Configuration",
            name: "Robot Config",
            filter: function filter(e) {
              return true;
            }
          }
        }
      },
      data: {
        type: _NodeItem_NavigationPreviewItem__WEBPACK_IMPORTED_MODULE_15__["default"].TYPE,
        config: ""
      }
    };
    return _this;
  }

  _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_3___default()(NavigationPreviewAction, [{
    key: "onChange",
    value: function onChange(parentView) {
      parentView.renderMenus();
      this.resetData();
    }
  }, {
    key: "resetData",
    value: function resetData() {
      this.maybeFirstClickPos = monet__WEBPACK_IMPORTED_MODULE_12__["Maybe"].none();
      this.previewPoseMesh && this.previewPoseMesh.dispose();
      this.poses = [];
      this.poseMeshes.forEach(function (mesh) {
        return mesh.dispose();
      });
      this.poseMeshes = [];
    }
  }, {
    key: "createPreviewPose",
    value: function createPreviewPose(scene, parentView, start, end) {
      var normalize = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;
      var maxLength = 1.3;
      var v = end.subtract(start);
      var length = v.length();
      var finalLength = normalize ? maxLength / length : Math.min(maxLength / length, length);
      var finalEnd = start.add(v.scale(finalLength));
      var arrowMesh = _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_11__["default"].getArrow(scene, "previewPose", start, finalEnd, _Utils_Constants__WEBPACK_IMPORTED_MODULE_13__["default"].RADIUS / 6);
      var rootMesh = parentView.getRootNode().item.mesh;
      arrowMesh.parent = rootMesh;
      return arrowMesh;
    }
  }, {
    key: "createNavPreviewNode",
    value: function createNavPreviewNode(scene, parentView) {
      var navName = "Navigation".concat(Math.floor(Math.random() * 1e2));

      var poses = _babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default()(this.poses);

      var config = this.schema.data.config;
      parentView.getUndoManager().doIt(mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_16__["UndoManager"].actionBuilder().doAction(function () {
        var root = parentView.getRootNode().item.mesh;
        var navPreviewNode = _NodeItem_NavigationPreviewItem__WEBPACK_IMPORTED_MODULE_15__["default"].ofDict(scene, {
          name: navName,
          poses: poses,
          robotConfig: config
        }, parentView);
        navPreviewNode.mesh.parent = root;
        parentView.addNodeItem2Tree(navPreviewNode, root.name);
      }).undoAction(function () {
        parentView.deleteNodeFromTreeUsingName(navName);
      }).build());
    }
  }]);

  return NavigationPreviewAction;
}(_MouseKeysAction__WEBPACK_IMPORTED_MODULE_9__["default"]);

/* harmony default export */ __webpack_exports__["default"] = (NavigationPreviewAction);

/***/ }),

/***/ "./src/Components/Viewer/Actions/OrbitAction.js":
/*!******************************************************!*\
  !*** ./src/Components/Viewer/Actions/OrbitAction.js ***!
  \******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/extends */ "@babel/runtime/helpers/esm/extends");
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "@babel/runtime/helpers/esm/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/assertThisInitialized */ "@babel/runtime/helpers/esm/assertThisInitialized");
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "@babel/runtime/helpers/esm/inherits");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "@babel/runtime/helpers/esm/possibleConstructorReturn");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/get */ "@babel/runtime/helpers/esm/get");
/* harmony import */ var _babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "@babel/runtime/helpers/esm/getPrototypeOf");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "@babel/runtime/helpers/esm/defineProperty");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var monet__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! monet */ "monet");
/* harmony import */ var monet__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(monet__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var _MouseKeysAction__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./MouseKeysAction */ "./src/Components/Viewer/Actions/MouseKeysAction.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_10__);









function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6___default()(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6___default()(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4___default()(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }





var OrbitAction = /*#__PURE__*/function (_MouseKeysAction) {
  _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3___default()(OrbitAction, _MouseKeysAction);

  var _super = _createSuper(OrbitAction);

  function OrbitAction() {
    var _thisSuper, _this;

    _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default()(this, OrbitAction);

    _this = _super.call(this);

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default()(_this), "action", function (parentView) {
      _babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_5___default()((_thisSuper = _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default()(_this), _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6___default()(OrbitAction.prototype)), "action", _thisSuper).call(_thisSuper, parentView);

      parentView.setSelectedAction(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default()(_this));
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default()(_this), "onPointerDown", function (evt, parentView) {});

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default()(_this), "onPointerMove", function (evt, parentView) {});

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default()(_this), "onPointerUp", function (evt, parentView) {});

    _this.key = "orbit";
    _this.name = "Orbit [ESC]";
    _this.maybeSelectedMesh = monet__WEBPACK_IMPORTED_MODULE_8__["Maybe"].none();

    _this.icon = function (props) {
      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement("i", _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0___default()({
        className: "fas fa-globe"
      }, props));
    };

    return _this;
  }

  return OrbitAction;
}(_MouseKeysAction__WEBPACK_IMPORTED_MODULE_9__["default"]);

/* harmony default export */ __webpack_exports__["default"] = (OrbitAction);

/***/ }),

/***/ "./src/Components/Viewer/Actions/PolygonRegionAction.js":
/*!**************************************************************!*\
  !*** ./src/Components/Viewer/Actions/PolygonRegionAction.js ***!
  \**************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/toConsumableArray */ "@babel/runtime/helpers/esm/toConsumableArray");
/* harmony import */ var _babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/extends */ "@babel/runtime/helpers/esm/extends");
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "@babel/runtime/helpers/esm/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "@babel/runtime/helpers/esm/createClass");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/assertThisInitialized */ "@babel/runtime/helpers/esm/assertThisInitialized");
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "@babel/runtime/helpers/esm/inherits");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "@babel/runtime/helpers/esm/possibleConstructorReturn");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babel/runtime/helpers/esm/get */ "@babel/runtime/helpers/esm/get");
/* harmony import */ var _babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "@babel/runtime/helpers/esm/getPrototypeOf");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "@babel/runtime/helpers/esm/defineProperty");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var _MouseKeysAction__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./MouseKeysAction */ "./src/Components/Viewer/Actions/MouseKeysAction.js");
/* harmony import */ var _Math_Vec3__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../Math/Vec3 */ "./src/Components/Viewer/Math/Vec3.js");
/* harmony import */ var _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../Util3d/Util3d */ "./src/Components/Viewer/Util3d/Util3d.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_13__);
/* harmony import */ var _NodeItem_PolygonRegion__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../NodeItem/PolygonRegion */ "./src/Components/Viewer/NodeItem/PolygonRegion.js");
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @babylonjs/core */ "@babylonjs/core");
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(_babylonjs_core__WEBPACK_IMPORTED_MODULE_15__);
/* harmony import */ var mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! mov-fe-lib-core */ "mov-fe-lib-core");
/* harmony import */ var mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_16__);
/* harmony import */ var _Utils_Utils__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../Utils/Utils */ "./src/Components/Viewer/Utils/Utils.js");











function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_8___default()(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_8___default()(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_6___default()(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }








 // Similar 2 Draw Action Path

var PolygonRegionAction = /*#__PURE__*/function (_MouseKeysAction) {
  _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_5___default()(PolygonRegionAction, _MouseKeysAction);

  var _super = _createSuper(PolygonRegionAction);

  function PolygonRegionAction() {
    var _thisSuper, _thisSuper2, _this;

    _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2___default()(this, PolygonRegionAction);

    _this = _super.call(this);

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), "action", function (parentView) {
      _babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_7___default()((_thisSuper = _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_8___default()(PolygonRegionAction.prototype)), "action", _thisSuper).call(_thisSuper, parentView);

      parentView.setSelectedAction(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this));
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), "onChange", function (parentView) {
      if (_this.mouseCurve.length > 2) {
        parentView.getSceneMemory().forEach(function (_ref) {
          var scene = _ref.scene;
          parentView.getUndoManager().doIt(_this.getUndoAbleEnterAction(_this.mouseCurve, scene, parentView));
        });
      }
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), "onPointerDown", function (evt, parentView) {
      if (!(evt.buttons === 1)) return;
      parentView.getSceneMemory().forEach(function (memory) {
        var scene = memory.scene;
        var ground = memory.ground;
        var camera = memory.camera;
        var maybeMousePos = _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_12__["default"].getGroundPosition(scene, ground);
        maybeMousePos.forEach(function (mousePos) {
          camera.detachControl(memory.canvas);

          _this.mouseCurve.push(mousePos);

          parentView.getUndoManager().doIt(_this.getUndoAbleClickAction(_this.mouseCurve, scene, parentView, memory));
        });
      });
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), "getDrawPolygonContextAction", function (camera, canvas, scene) {
      var ans = [];
      ans.push({
        icon: function icon(props) {
          return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_13___default.a.createElement("i", _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_1___default()({
            className: "fas fa-trash"
          }, props));
        },
        action: function action(parentView) {
          camera.attachControl(canvas, true);
          parentView.deleteNodeFromTreeUsingName(TEMP_POLYGON_REGION_NAME, false);
          _this.mouseCurve = [];
          parentView.closeContextDial();
        },
        name: "Clear Polygon [ESC | DEL | Backspace]"
      });

      if (_this.mouseCurve.length > 2) {
        ans.push({
          icon: function icon(props) {
            return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_13___default.a.createElement("i", _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_1___default()({
              className: "fas fa-check"
            }, props));
          },
          action: function action(parentView) {
            camera.attachControl(canvas, true);
            parentView.getUndoManager().doIt(_this.getUndoAbleEnterAction(_this.mouseCurve, scene, parentView));
          },
          name: "Create Polygon [Enter]"
        });
      }

      return ans;
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), "onPointerMove", function (evt, parentView) {// empty
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), "onPointerUp", function (evt, parentView) {// empty
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), "onKeyUp", function (evt, parentView) {
      // Warning: code duplication with PathAction
      var defaultAction = function defaultAction() {
        return _babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_7___default()((_thisSuper2 = _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_8___default()(PolygonRegionAction.prototype)), "onKeyUp", _thisSuper2).call(_thisSuper2, evt, parentView);
      };

      parentView.getSceneMemory().forEach(function (memory) {
        var scene = memory.scene,
            camera = memory.camera,
            canvas = memory.canvas;

        var contextActions = _this.getDrawPolygonContextAction(camera, canvas, scene);

        Object(_Utils_Utils__WEBPACK_IMPORTED_MODULE_17__["selectOneAction"])([{
          predicate: function predicate(e) {
            return e.code === "Enter" || e.code === "NumpadEnter";
          },
          action: function action() {
            return contextActions[1].action(parentView);
          }
        }, {
          predicate: function predicate(e) {
            return e.code === "Delete" || e.code === "Backspace";
          },
          action: function action() {
            return contextActions[0].action(parentView);
          }
        }, {
          predicate: function predicate(e) {
            return e.code === "Escape";
          },
          action: function action() {
            contextActions[0].action(parentView);
          }
        }], defaultAction)(evt);
      });
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), "createPolygonRegion", function (region, name, scene, parentView) {
      var is2addInServer = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : true;
      var color = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : _babylonjs_core__WEBPACK_IMPORTED_MODULE_15__["Color3"].Yellow();
      var height = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : 1;
      var rootMesh = parentView.getRootNode().item.mesh;
      var localRegion = region.map(function (r) {
        return _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_12__["default"].getLocalCoordFromWorld({
          parent: rootMesh
        }, _Math_Vec3__WEBPACK_IMPORTED_MODULE_11__["default"].ofBabylon(r));
      });
      var middlePoint = _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_12__["default"].pointAverageVec3(localRegion);
      var centeredRegion = localRegion.map(function (r) {
        return r.sub(middlePoint);
      });
      var polygonRegionItem = _NodeItem_PolygonRegion__WEBPACK_IMPORTED_MODULE_14__["default"].ofDict(scene, {
        name: name,
        position: middlePoint.toArray(),
        color: [color.r, color.g, color.b],
        localPolygon: centeredRegion.map(function (x) {
          return x.toArray();
        }),
        height: height
      }, parentView);
      polygonRegionItem.mesh.parent = rootMesh;
      parentView.addNodeItem2Tree(polygonRegionItem, rootMesh.name, is2addInServer, true, is2addInServer);
    });

    _this.key = "drawPolygonRegion";
    _this.name = "Draw Polygon Region [5]";
    _this.mouseCurve = [];

    _this.icon = function (props) {
      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_13___default.a.createElement("i", _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_1___default()({
        className: "fas fa-draw-polygon"
      }, props));
    };

    return _this;
  }

  _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_3___default()(PolygonRegionAction, [{
    key: "getUndoAbleClickAction",
    value: function getUndoAbleClickAction(keyPoints, scene, parentView, _ref2) {
      var _this2 = this;

      var camera = _ref2.camera,
          canvas = _ref2.canvas;

      var kps = _babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default()(keyPoints);

      return mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_16__["UndoManager"].actionBuilder().doAction(function () {
        var finalKps = kps.length === 1 ? [kps[0], kps[0]] : kps;
        parentView.deleteNodeFromTreeUsingName(TEMP_POLYGON_REGION_NAME, false, false);

        _this2.createPolygonRegion(finalKps, TEMP_POLYGON_REGION_NAME, scene, parentView, false);

        parentView.setContextActions(_this2.getDrawPolygonContextAction(camera, canvas, scene));
        _this2.mouseCurve = kps;
      }).undoAction(function (_ref3) {
        var _ref3$is2UpdateInServ = _ref3.is2UpdateInServer,
            is2UpdateInServer = _ref3$is2UpdateInServ === void 0 ? true : _ref3$is2UpdateInServ;
        parentView.deleteNodeFromTreeUsingName(TEMP_POLYGON_REGION_NAME, is2UpdateInServer);
        var reducedKps = kps.slice(0, kps.length - 1);
        var finalKps = reducedKps.length === 1 ? [reducedKps[0], reducedKps[0]] : reducedKps;
        if (is2UpdateInServer) reducedKps.length > 0 && _this2.createPolygonRegion(finalKps, TEMP_POLYGON_REGION_NAME, scene, parentView, false);
        _this2.mouseCurve = reducedKps;
      }).build();
    }
  }, {
    key: "getUndoAbleEnterAction",
    value: function getUndoAbleEnterAction(keyPoints, scene, parentView) {
      var _this3 = this;

      var kps = _babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default()(keyPoints);

      var name = "PolygonRegion".concat(Math.floor(Math.random() * 1e3));
      return mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_16__["UndoManager"].actionBuilder().doAction(function () {
        parentView.deleteNodeFromTreeUsingName(TEMP_POLYGON_REGION_NAME, false);

        _this3.createPolygonRegion(kps, name, scene, parentView, true);

        _this3.mouseCurve = [];
        parentView.setPropertiesWithName(name);
        parentView.closeContextDial();
      }).undoAction(function (_ref4) {
        var _ref4$is2UpdateInServ = _ref4.is2UpdateInServer,
            is2UpdateInServer = _ref4$is2UpdateInServ === void 0 ? true : _ref4$is2UpdateInServ;
        parentView.deleteNodeFromTreeUsingName(name, is2UpdateInServer);

        if (is2UpdateInServer) {
          _this3.createPolygonRegion(kps, TEMP_POLYGON_REGION_NAME, scene, parentView, false);

          _this3.mouseCurve = kps;
        }
      }).build();
    }
  }]);

  return PolygonRegionAction;
}(_MouseKeysAction__WEBPACK_IMPORTED_MODULE_10__["default"]);

var TEMP_POLYGON_REGION_NAME = "temp_polygon_region";
/* harmony default export */ __webpack_exports__["default"] = (PolygonRegionAction);

/***/ }),

/***/ "./src/Components/Viewer/Actions/RobotAction.js":
/*!******************************************************!*\
  !*** ./src/Components/Viewer/Actions/RobotAction.js ***!
  \******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/extends */ "@babel/runtime/helpers/esm/extends");
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "@babel/runtime/helpers/esm/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "@babel/runtime/helpers/esm/createClass");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/assertThisInitialized */ "@babel/runtime/helpers/esm/assertThisInitialized");
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "@babel/runtime/helpers/esm/inherits");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "@babel/runtime/helpers/esm/possibleConstructorReturn");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/esm/get */ "@babel/runtime/helpers/esm/get");
/* harmony import */ var _babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "@babel/runtime/helpers/esm/getPrototypeOf");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "@babel/runtime/helpers/esm/defineProperty");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var _NodeItem_Robot__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../NodeItem/Robot */ "./src/Components/Viewer/NodeItem/Robot.js");
/* harmony import */ var _Action__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./Action */ "./src/Components/Viewer/Actions/Action.js");
/* harmony import */ var monet__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! monet */ "monet");
/* harmony import */ var monet__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(monet__WEBPACK_IMPORTED_MODULE_11__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_12__);
/* harmony import */ var _NodeItem_PointCloud__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../NodeItem/PointCloud */ "./src/Components/Viewer/NodeItem/PointCloud.js");
/* harmony import */ var _MainView_MainViewActions__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../MainView/MainViewActions */ "./src/Components/Viewer/MainView/MainViewActions.js");
/* harmony import */ var _Utils_MeshLoader__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../Utils/MeshLoader */ "./src/Components/Viewer/Utils/MeshLoader.js");
/* harmony import */ var mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! mov-fe-lib-core */ "mov-fe-lib-core");
/* harmony import */ var mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_16__);










function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7___default()(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7___default()(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5___default()(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }










var RobotAction = /*#__PURE__*/function (_Action) {
  _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4___default()(RobotAction, _Action);

  var _super = _createSuper(RobotAction);

  function RobotAction(_robot) {
    var _thisSuper, _this;

    var robotAnimatorFactory = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function (robot, parentView) {
      return _NodeItem_Robot__WEBPACK_IMPORTED_MODULE_9__["default"].getDefaultAnimator(parentView);
    };

    _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default()(this, RobotAction);

    _this = _super.call(this);

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3___default()(_this), "action", function (parentView) {
      var errorCallback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {};

      _babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_6___default()((_thisSuper = _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3___default()(_this), _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7___default()(RobotAction.prototype)), "action", _thisSuper).call(_thisSuper, parentView); // If robot doesn't exists: Add robot


      parentView.getNodeFromTree(_this.robot.name).orElseRun(function () {
        return _this.addRobot(parentView, errorCallback);
      }); // If robot already exist in node tree : Update robot if mesh is different

      parentView.getNodeFromTree(_this.robot.name).forEach(function (_ref) {
        var item = _ref.item;

        if (!item.mesh.id.includes(_this.robot.meshName)) {
          parentView.deleteNodeFromTreeUsingName(_this.name, true, true);

          _this.addRobot(parentView, errorCallback);
        }
      });
      parentView.setSelectedAction(Object(_MainView_MainViewActions__WEBPACK_IMPORTED_MODULE_14__["ACTIONS"])().dragObjects);
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3___default()(_this), "getRobot", function (scene, mesh, parentMesh, parentView) {
      var meshTree = _NodeItem_Robot__WEBPACK_IMPORTED_MODULE_9__["default"].createRobotMeshTree(_this.robot.robotTree, mesh, scene);
      var dict = monet__WEBPACK_IMPORTED_MODULE_11__["Maybe"].fromNull(_this.memory["nodeItemDict"]);
      return _NodeItem_Robot__WEBPACK_IMPORTED_MODULE_9__["default"].builder().id(_this.robot.id).name(monet__WEBPACK_IMPORTED_MODULE_11__["Maybe"].fromNull(_this.memory["name"]).orSome(_this.robot.name)).assetName(monet__WEBPACK_IMPORTED_MODULE_11__["Maybe"].fromNull(_this.memory["assetName"]).orSome(_this.robot.name)).meshTree(meshTree).parentMesh(parentMesh).parentView(parentView).scene(scene).keyValueMap(dict.map(function (x) {
        return x.keyValueMap;
      }).orSome({})).build();
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3___default()(_this), "getCloudPoint", function (scene, parentView, robot) {
      var cloudPoint = _NodeItem_PointCloud__WEBPACK_IMPORTED_MODULE_13__["default"].ofDict(scene, {
        name: _this.robot.name,
        id: _this.robot.id
      }, parentView);
      cloudPoint.mesh.parent = robot.mesh;
      return cloudPoint;
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3___default()(_this), "getParentMesh", function (parentView) {
      return monet__WEBPACK_IMPORTED_MODULE_11__["Maybe"].fromNull(_this.memory["parentObj"]).map(function (parentObj) {
        return parentObj.parent;
      }).flatMap(function (parentName) {
        return parentView.getNodeFromTree(parentName);
      }).map(function (treeNode) {
        return treeNode.item.mesh;
      }).orSome(parentView.getRootNode().item.mesh);
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3___default()(_this), "getType", function () {
      return RobotAction.TYPE;
    });

    _this.key = "robotAction".concat(_robot.name);
    _this.name = _robot.name;
    _this.robot = _robot;
    _this.robotAnimatorFactory = robotAnimatorFactory;

    _this.icon = function (props) {
      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("i", _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0___default()({
        className: "fas fa-robot"
      }, props));
    };

    return _this;
  }

  _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2___default()(RobotAction, [{
    key: "addRobot",
    value: function addRobot(parentView) {
      var _this2 = this;

      var errorCallback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {};
      parentView.getSceneMemory().forEach(function (memory) {
        var scene = memory.scene;

        var actionMemoryClone = _objectSpread({}, _this2.memory);

        var isImport = actionMemoryClone["isImport"];
        if (isImport) _this2.loadRobot(scene, parentView, actionMemoryClone, errorCallback);else {
          parentView.getUndoManager().doIt(_this2.getUndoAbleAction(parentView, scene, actionMemoryClone));
        }
      });
      this.memory["isImport"] = false;
    }
  }, {
    key: "getUndoAbleAction",
    value: function getUndoAbleAction(parentView, scene, actionMemoryClone) {
      var _this3 = this;

      return mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_16__["UndoManager"].actionBuilder().doAction(function () {
        _this3.loadRobot(scene, parentView, actionMemoryClone);
      }).undoAction(function (_ref2) {
        var _ref2$is2UpdateInServ = _ref2.is2UpdateInServer,
            is2UpdateInServer = _ref2$is2UpdateInServ === void 0 ? true : _ref2$is2UpdateInServ;
        parentView.deleteNodeFromTreeUsingName(_this3.name, is2UpdateInServer);
      }).build();
    }
  }, {
    key: "loadRobot",
    value: function loadRobot(scene, parentView, actionMemoryClone) {
      var _this4 = this;

      var errorCallback = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : function () {};
      _Utils_MeshLoader__WEBPACK_IMPORTED_MODULE_15__["default"].of(scene).load(this.robot.meshName).then(function (mesh) {
        return _this4.createRobotFromMesh(mesh, scene, parentView, actionMemoryClone);
      })["catch"](function (err) {
        return errorCallback(err);
      });
    }
  }, {
    key: "createRobotFromMesh",
    value: function createRobotFromMesh(mesh, scene, parentView, memory) {
      var parentMesh = this.getParentMesh(parentView);
      var isImport = monet__WEBPACK_IMPORTED_MODULE_11__["Maybe"].fromNull(memory.isImport).orSome(false);
      var isVisible = monet__WEBPACK_IMPORTED_MODULE_11__["Maybe"].fromNull(memory.isVisible).orSome(true);
      mesh.setEnabled(isVisible);
      var robot = this.getRobot(scene, mesh, parentMesh, parentView);
      robot.animate(this.robotAnimatorFactory(robot, parentView));
      parentView.addNodeItem2Tree(robot, parentMesh.name, !isImport, isVisible);
      var cloudPoint = this.getCloudPoint(scene, parentView, robot);
      parentView.addNodeItem2Tree(cloudPoint, robot.name, false, isVisible);
    }
  }]);

  return RobotAction;
}(_Action__WEBPACK_IMPORTED_MODULE_10__["default"]);

_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(RobotAction, "TYPE", "RobotAction");

/* harmony default export */ __webpack_exports__["default"] = (RobotAction);

/***/ }),

/***/ "./src/Components/Viewer/AssetsManager/AssetsManager.js":
/*!**************************************************************!*\
  !*** ./src/Components/Viewer/AssetsManager/AssetsManager.js ***!
  \**************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/asyncToGenerator */ "@babel/runtime/helpers/esm/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "@babel/runtime/helpers/esm/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "@babel/runtime/helpers/esm/createClass");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "@babel/runtime/helpers/esm/defineProperty");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var monet__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! monet */ "monet");
/* harmony import */ var monet__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(monet__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _Utils_AssetsTypesFactory__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../Utils/AssetsTypesFactory */ "./src/Components/Viewer/Utils/AssetsTypesFactory.js");
/* harmony import */ var mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! mov-fe-lib-core */ "mov-fe-lib-core");
/* harmony import */ var mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _MapLoader__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./MapLoader */ "./src/Components/Viewer/AssetsManager/MapLoader.js");
/* harmony import */ var _NodeItem_Robot__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../NodeItem/Robot */ "./src/Components/Viewer/NodeItem/Robot.js");





function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_3___default()(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }







/**
 *  Graphic Assets Manager, retrieves and manages the assets that are in DB.
 */

var AssetsManager = /*#__PURE__*/function () {
  function AssetsManager() {
    var _this = this;

    _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default()(this, AssetsManager);

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_3___default()(this, "getAssets", function () {
      return _this.assets;
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_3___default()(this, "getAssetsActionMap", function () {
      return _this.assetsActionMap;
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_3___default()(this, "load", /*#__PURE__*/_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default.a.mark(function _callee() {
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.next = 2;
              return _this.retrieveAssetsFromDb();

            case 2:
              return _context.abrupt("return", _this);

            case 3:
            case "end":
              return _context.stop();
          }
        }
      }, _callee);
    })));

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_3___default()(this, "signalObservers", function () {
      Object.keys(_this.observersBySceneId).forEach(function (k) {
        _this.observersBySceneId[k].forEach(function (obs) {
          return obs(_this);
        });
      });
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_3___default()(this, "subs", [function (resolve) {
      return mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_7__["MasterDB"].subscribe({
        Scope: "Robot",
        Name: "*",
        RobotName: "*"
      }, _this.getRobotUpdate(), function (data) {
        return _this.getRobotNameSub(data.value, function () {
          _this.addRobots();

          _this.finishSub("RobotName", resolve);
        });
      });
    }, function (resolve) {
      return mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_7__["MasterDB"].subscribe({
        Scope: "Robot",
        Name: "*",
        Parameter: "mesh"
      }, _this.getRobotUpdate(), function (data) {
        return _this.getRobotMeshSub(data.value, function () {
          _this.addRobots();

          _this.finishSub("RobotMesh", resolve);
        });
      });
    }, function (resolve) {
      return mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_7__["MasterDB"].subscribe({
        Scope: "Package",
        File: "*",
        Name: "maps",
        FileLabel: "*"
      }, _this.getMapUpdater(function (_ref2) {
        var key = _ref2.key;
        return key;
      }), _this.getMapSubscriber(function (_ref3) {
        var value = _ref3.value;
        return value;
      }, function () {
        return _this.finishSub("Maps", resolve);
      }));
    }, function (resolve) {
      return mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_7__["MasterDB"].subscribe({
        Scope: "Package",
        File: "*",
        Name: "meshes",
        FileLabel: "*"
      }, _this.getMeshUpdater(), _this.getMeshSubscriber(function (_ref4) {
        var value = _ref4.value;
        return value;
      }, function () {
        return _this.finishSub("Meshes", resolve);
      }));
    }]);

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_3___default()(this, "finishSub", function (place, resolve) {
      console.log("FINISH SUB ", place, _this.finishInitialSubscribers);

      if (++_this.finishInitialSubscribers > _this.subs.length - 1) {
        _this.afterLoad.forEach(function (f) {
          return f(_this);
        });

        _this.afterLoad = [];
        _this.isLoading = false;
        resolve(true);
      }
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_3___default()(this, "deleteRobot", function (id) {
      if (!_this.robots.hasOwnProperty(id)) return;

      _this.delAsset(_this.robots[id].name);

      if (id in _this.robots) delete _this.robots[id];
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_3___default()(this, "getMapSubscriber", function (dataGetter) {
      var after = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {};
      return function (data) {
        return _this.getMapFileData(dataGetter, data).forEach(function (fileName) {
          Object.keys(fileName).filter(function (f) {
            return f.includes(".yaml");
          }).forEach(_this.addMap);
          after();
        });
      };
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_3___default()(this, "getMapUpdater", function (dataGetter) {
      var actionMap = {
        del: function del(data) {
          _this.getMapFileData(dataGetter, data).forEach(function (f) {
            var filename = Object.keys(f)[0];
            filename = filename.split(".")[0];

            _this.delAsset(filename);
          });
        },
        set: _this.getMapSubscriber(dataGetter),
        subscribe: _this.getMapSubscriber(dataGetter)
      };
      return function (data) {
        console.log("MAP UPDATE", data);
        actionMap[data.event](data);
      };
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_3___default()(this, "addMap", function (yamlSrc) {
      var map = {
        name: yamlSrc.split(".")[0],
        loader: new _MapLoader__WEBPACK_IMPORTED_MODULE_8__["default"](yamlSrc),
        type: _Utils_AssetsTypesFactory__WEBPACK_IMPORTED_MODULE_6__["ASSETS_TYPES"].Map
      };

      _this.addAsset(map.name, map);
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_3___default()(this, "getMapFileData", function (dataGetter, data) {
      return ofNull(dataGetter(data)).flatMap(maybeGet("Package")).flatMap(maybeGet("maps")).flatMap(maybeGet("File"));
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_3___default()(this, "getMeshSubscriber", function (dataGetter) {
      var after = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {};
      return function (data) {
        _this.getMeshFileData(dataGetter, data).forEach(function (d) {
          return Object.keys(d).forEach(function (id) {
            var mesh = {
              id: id,
              name: d[id].FileLabel,
              type: _Utils_AssetsTypesFactory__WEBPACK_IMPORTED_MODULE_6__["ASSETS_TYPES"].Mesh
            };

            _this.addAsset(mesh.name, mesh);
          });
        });

        after();
      };
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_3___default()(this, "getMeshUpdater", function () {
      var actionMap = {
        del: function del(data) {
          _this.getMeshFileData(function (d) {
            return d.key;
          }, data).forEach(function (f) {
            var filename = Object.keys(f)[0];

            _this.delAsset(filename);
          });
        },
        set: _this.getMeshSubscriber(function (d) {
          return d.key;
        }),
        subscribe: _this.getMeshSubscriber(function (d) {
          return d.key;
        })
      };
      return function (data) {
        return actionMap[data.event](data);
      };
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_3___default()(this, "getMeshFileData", function (dataGetter, data) {
      return ofNull(dataGetter(data)).flatMap(maybeGet("Package")).flatMap(maybeGet("meshes")).flatMap(maybeGet("File"));
    });

    if (instance) return instance;
    instance = this;
    this.assets = {};
    this.assetsActionMap = {};
    this.robots = {};
    this.observersBySceneId = {};
    this.afterLoad = [];
    this.finishInitialSubscribers = 0;
    this.isLoading = true;
  } //========================================================================================

  /*                                                                                      *
   *                                  Getters and Setters                                 *
   *                                                                                      */
  //========================================================================================


  _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2___default()(AssetsManager, [{
    key: "addAfterLoad",
    value: function addAfterLoad(afterLoad) {
      this.afterLoad.push(afterLoad);
      return this;
    }
  }, {
    key: "addObserver",
    value: function addObserver(scene, observer) {
      var sceneId = scene._uid;

      if (!(sceneId in this.observersBySceneId)) {
        this.observersBySceneId[sceneId] = [];
      }

      this.observersBySceneId[sceneId].push(observer);
      return this;
    }
  }, {
    key: "addAsset",
    value: function addAsset(assetKey, asset) {
      try {
        this.assets[assetKey] = asset;
        this.assetsActionMap[assetKey] = _Utils_AssetsTypesFactory__WEBPACK_IMPORTED_MODULE_6__["AssetsTypesFactory"][asset.type](asset);
        if (!this.isLoading) this.signalObservers();
      } catch (e) {
        console.log("Caught exception while adding asset", e);
        throw Error("Caught exception while adding asset ".concat(e));
      }
    }
  }, {
    key: "delAsset",
    value: function delAsset(assetKey) {
      if (assetKey in this.assets) delete this.assets[assetKey];
      if (assetKey in this.assetsActionMap) delete this.assetsActionMap[assetKey];
      this.signalObservers();
    }
  }, {
    key: "clearObserver",
    value: function clearObserver(scene) {
      var sceneId = scene._uid;

      if (sceneId in this.observersBySceneId) {
        console.log("Clear asset observer", sceneId);
        delete this.observersBySceneId[sceneId];
      }
    } //========================================================================================

    /*                                                                                      *
     *                                      Subscribers                                     *
     *                                                                                      */
    //========================================================================================

  }, {
    key: "retrieveAssetsFromDb",
    value: function retrieveAssetsFromDb() {
      var _this2 = this;

      return new Promise(function (re, rej) {
        _this2.subs.forEach(function (f) {
          return f(re);
        });
      });
    } //========================================================================================

    /*                                                                                      *
     *                                         Utils                                        *
     *                                                                                      */
    //========================================================================================

  }, {
    key: "setRobot",
    value: function setRobot(id) {
      var _this3 = this;

      var name = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
      var meshName = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;

      if (!(id in this.robots)) {
        this.robots[id] = {
          id: id,
          name: null,
          meshName: null
        };
      }

      ofNull(name).forEach(function (name) {
        return _this3.robots[id].name = name;
      });
      ofNull(meshName).forEach(function (meshName) {
        return _this3.robots[id].meshName = meshName;
      });
    }
  }, {
    key: "addRobots",
    value: function addRobots() {
      var _this4 = this;

      var robots = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.robots;
      Object.keys(robots).forEach(function (id) {
        if (Object.values(_this4.robots[id]).every(function (x) {
          return x !== null;
        })) {
          var localRobot = _this4.robots[id];

          _this4.addAsset(localRobot.name, _NodeItem_Robot__WEBPACK_IMPORTED_MODULE_9__["default"].createBaseObject({
            robotName: localRobot.name,
            robotMeshName: localRobot.meshName,
            id: id
          }));
        }
      });
    }
  }, {
    key: "getRobotNameSub",
    value: function getRobotNameSub(data) {
      var _this5 = this;

      var after = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {};
      ofNull(data).flatMap(maybeGet("Robot")).forEach(function (r) {
        return Object.keys(r).forEach(function (id) {
          return _this5.setRobot(id, r[id].RobotName);
        });
      });
      after();
    }
  }, {
    key: "getRobotMeshSub",
    value: function getRobotMeshSub(data) {
      var _this6 = this;

      var after = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {};
      ofNull(data).flatMap(maybeGet("Robot")).forEach(function (r) {
        return Object.keys(r).forEach(function (id) {
          return _this6.setRobot(id, r[id].RobotName, r[id].Parameter.mesh.Value);
        });
      });
      Object.keys(this.robots).forEach(function (id) {
        _this6.robots[id].meshName = _this6.robots[id].meshName ? _this6.robots[id].meshName : _NodeItem_Robot__WEBPACK_IMPORTED_MODULE_9__["default"].ROBOT_MESH_NAME;
      });
      after();
    }
  }, {
    key: "getRobotUpdate",
    value: function getRobotUpdate() {
      var _this7 = this;

      var actionMap = {
        del: function del(data) {
          var pattern = data.patterns[0]; // del event from RobotName pattern

          if (pattern.hasOwnProperty('RobotName')) {
            ofNull(data.key).flatMap(maybeGet("Robot")).forEach(function (r) {
              return Object.keys(r).forEach(_this7.deleteRobot);
            });
          } // del event from RobotMesh pattern
          else if (pattern.hasOwnProperty('Parameter')) {
            ofNull(data.key).flatMap(maybeGet("Robot")).forEach(function (r) {
              return Object.keys(r).forEach(function (robotId) {
                _this7.robots[robotId].meshName = _NodeItem_Robot__WEBPACK_IMPORTED_MODULE_9__["default"].ROBOT_MESH_NAME;
              });
            });
          }
        },
        set: function set(data) {
          var pattern = data.patterns[0];

          var robots = _objectSpread({}, data.key.Robot); // set event from RobotName pattern


          if (pattern.hasOwnProperty('RobotName')) _this7.getRobotNameSub(data.key, function () {
            return _this7.addRobots(robots);
          }); // set event from RobotMesh pattern
          else if (pattern.hasOwnProperty('Parameter')) _this7.getRobotMeshSub(data.key, function () {
            return _this7.addRobots(robots);
          });
        }
      };
      return function (data) {
        console.log("Robot NAME UPDATE", data);
        actionMap[data.event](data);
      };
    } //========================================================================================

    /*                                                                                      *
     *                                         Maps                                         *
     *                                                                                      */
    //========================================================================================

  }], [{
    key: "getInstance",
    value: //========================================================================================

    /*                                                                                      *
     *                                        static                                        *
     *                                                                                      */
    //========================================================================================
    function getInstance() {
      return new AssetsManager();
    }
  }]);

  return AssetsManager;
}(); // private variable


var instance = null; // auxiliary functions

var ofNull = monet__WEBPACK_IMPORTED_MODULE_5__["Maybe"].fromNull;

var get = function get(prop) {
  return function (obj) {
    return obj[prop];
  };
};

var dot = function dot(f) {
  return function (g) {
    return function (x) {
      return f(g(x));
    };
  };
};

var maybeGet = function maybeGet(prop) {
  return dot(ofNull)(get(prop));
};

/* harmony default export */ __webpack_exports__["default"] = (AssetsManager);

/***/ }),

/***/ "./src/Components/Viewer/AssetsManager/MapLoader.js":
/*!**********************************************************!*\
  !*** ./src/Components/Viewer/AssetsManager/MapLoader.js ***!
  \**********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return MapLoader; });
/* harmony import */ var _babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/asyncToGenerator */ "@babel/runtime/helpers/esm/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "@babel/runtime/helpers/esm/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "@babel/runtime/helpers/esm/createClass");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "@babel/runtime/helpers/esm/defineProperty");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4__);






var MapLoader = /*#__PURE__*/function () {
  function MapLoader(yamlSrc) {
    _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default()(this, MapLoader);

    this.yamlSrc = yamlSrc;
    this.cachedMap = null;
  }

  _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2___default()(MapLoader, [{
    key: "load",
    value: function () {
      var _load = _babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default.a.mark(function _callee() {
        var response, map, ans;
        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default.a.wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                if (!this.cachedMap) {
                  _context.next = 2;
                  break;
                }

                return _context.abrupt("return", this.cachedMap);

              case 2:
                _context.next = 4;
                return fetch(MapLoader.getMapUrl(this.yamlSrc));

              case 4:
                response = _context.sent;
                _context.t0 = this;
                _context.next = 8;
                return response.text();

              case 8:
                _context.t1 = _context.sent;
                _context.next = 11;
                return _context.t0.parseYaml.call(_context.t0, _context.t1);

              case 11:
                map = _context.sent;
                ans = {
                  textureSrc: map.image,
                  resolution: map.resolution,
                  origin: map.origin,
                  imageSize: map.size
                };
                this.cachedMap = ans;
                return _context.abrupt("return", ans);

              case 15:
              case "end":
                return _context.stop();
            }
          }
        }, _callee, this);
      }));

      function load() {
        return _load.apply(this, arguments);
      }

      return load;
    }()
  }, {
    key: "parseYaml",
    value: function () {
      var _parseYaml = _babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default.a.mark(function _callee2(yamlTxt) {
        var ans, actionDict;
        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default.a.wrap(function _callee2$(_context2) {
          while (1) {
            switch (_context2.prev = _context2.next) {
              case 0:
                ans = {};
                actionDict = {
                  image: function image(k, v) {
                    return ans[k] = MapLoader.getMapUrl(v);
                  },
                  resolution: function resolution(k, v) {
                    return ans[k] = Number.parseFloat(v);
                  },
                  origin: function origin(k, v) {
                    return ans[k] = JSON.parse(v);
                  }
                };
                console.log("Yaml text", yamlTxt);
                yamlTxt.split("\n").map(function (s) {
                  return s.split(": ");
                }).filter(function (split) {
                  return split.length >= 2;
                }).filter(function (split) {
                  return split[0] in actionDict;
                }).forEach(function (split) {
                  return actionDict[split[0]](split[0], split[1]);
                });
                _context2.next = 6;
                return this.getImageSize(ans["image"]);

              case 6:
                ans["size"] = _context2.sent;
                return _context2.abrupt("return", ans);

              case 8:
              case "end":
                return _context2.stop();
            }
          }
        }, _callee2, this);
      }));

      function parseYaml(_x) {
        return _parseYaml.apply(this, arguments);
      }

      return parseYaml;
    }()
  }, {
    key: "getImageSize",
    value: function getImageSize(src) {
      return new Promise(function (resolve, reject) {
        var img = new Image();
        img.src = src;

        img.onload = function () {
          return resolve([img.naturalWidth, img.naturalHeight]);
        };
      });
    }
  }]);

  return MapLoader;
}();

_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_3___default()(MapLoader, "getMapUrl", function (src) {
  return "/static/maps/".concat(src);
});



/***/ }),

/***/ "./src/Components/Viewer/BaseViewer/BaseViewer.js":
/*!********************************************************!*\
  !*** ./src/Components/Viewer/BaseViewer/BaseViewer.js ***!
  \********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/extends */ "@babel/runtime/helpers/esm/extends");
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/slicedToArray */ "@babel/runtime/helpers/esm/slicedToArray");
/* harmony import */ var _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/objectWithoutProperties */ "@babel/runtime/helpers/esm/objectWithoutProperties");
/* harmony import */ var _babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "@babel/runtime/helpers/esm/defineProperty");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babylonjs/core */ "@babylonjs/core");
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babylonjs_core__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _material_ui_core_styles__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @material-ui/core/styles */ "@material-ui/core/styles");
/* harmony import */ var _material_ui_core_styles__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var react_resize_detector__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! react-resize-detector */ "react-resize-detector");
/* harmony import */ var react_resize_detector__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(react_resize_detector__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! prop-types */ "prop-types");
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var _Utils_Constants__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../Utils/Constants */ "./src/Components/Viewer/Utils/Constants.js");
/* harmony import */ var _Utils_LoadingScreen__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../Utils/LoadingScreen */ "./src/Components/Viewer/Utils/LoadingScreen.js");
/* harmony import */ var _resources_movai_red_svg__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../../resources/movai_red.svg */ "./resources/movai_red.svg");
/* harmony import */ var _resources_movai_red_svg__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(_resources_movai_red_svg__WEBPACK_IMPORTED_MODULE_11__);
/* harmony import */ var _material_ui_core__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @material-ui/core */ "@material-ui/core");
/* harmony import */ var _material_ui_core__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core__WEBPACK_IMPORTED_MODULE_12__);




var _excluded = ["antialias", "engineOptions", "adaptToDeviceRatio", "sceneOptions", "onRender", "onSceneReady", "is2render", "sceneFactory"];

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_3___default()(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

//========================================================================================

/*                                                                                      *
 *         Based from https://doc.babylonjs.com/resources/babylonjs_and_reactjs         *
 *                                                                                      */
//========================================================================================









var useStyles = Object(_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_6__["makeStyles"])(function (theme) {
  return {
    root: _objectSpread(_objectSpread({}, FLEX_STYLE), {}, {
      maxHeight: "100%",
      position: "relative"
    }),
    loaderContainer: {
      // backgroundColor: theme.palette.background.secondary,
      backgroundColor: "black",
      display: "none",
      height: "100%",
      position: "absolute",
      textAlign: "center",
      top: 0,
      left: 0,
      width: "100%",
      zIndex: 1051 // Must be greater than 1050 to be on top of floating buttons

    },
    loaderImage: {
      position: "absolute",
      left: "50%",
      top: "50%",
      transform: "translate(-50%, -50%)"
    }
  };
});
var FLEX_STYLE = {
  display: "flex",
  flexDirection: "column",
  flexGrow: 1
};

var BaseViewer = function BaseViewer(props) {
  var antialias = props.antialias,
      engineOptions = props.engineOptions,
      adaptToDeviceRatio = props.adaptToDeviceRatio,
      sceneOptions = props.sceneOptions,
      onRender = props.onRender,
      onSceneReady = props.onSceneReady,
      is2render = props.is2render,
      sceneFactory = props.sceneFactory,
      rest = _babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_2___default()(props, _excluded);

  var theme = Object(_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_6__["useTheme"])();
  var classes = useStyles();
  var reactCanvas = Object(react__WEBPACK_IMPORTED_MODULE_5__["useRef"])(null);

  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_5__["useState"])(false),
      _useState2 = _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_useState, 2),
      loaded = _useState2[0],
      setLoaded = _useState2[1];

  var _useState3 = Object(react__WEBPACK_IMPORTED_MODULE_5__["useState"])(null),
      _useState4 = _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_useState3, 2),
      scene = _useState4[0],
      setScene = _useState4[1];

  var _useState5 = Object(react__WEBPACK_IMPORTED_MODULE_5__["useState"])({
    width: 100,
    height: 100
  }),
      _useState6 = _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_useState5, 2),
      size = _useState6[0],
      setSize = _useState6[1];

  var setUpScene = function setUpScene(engine) {
    var scene = sceneFactory ? sceneFactory(engine) : new _babylonjs_core__WEBPACK_IMPORTED_MODULE_4__["Scene"](engine, sceneOptions);
    setScene(scene);

    if (scene.isReady()) {
      onSceneReady(scene);
    } else {
      scene.onReadyObservable.addOnce(function (scene) {
        return onSceneReady(scene);
      });
    }

    return scene;
  };

  var onResize = function onResize(width, height) {
    setSize({
      width: width,
      height: height
    });
    scene && scene.getEngine().resize();
  };

  var renderScene = function renderScene(engine, nScene) {
    if (!is2render) return;
    engine.runRenderLoop(function () {
      if (typeof onRender === "function") {
        onRender(nScene);
      }

      nScene && nScene.render();
    });
  };
  /* eslint-disable react-hooks/exhaustive-deps */


  Object(react__WEBPACK_IMPORTED_MODULE_5__["useEffect"])(function () {
    if (!loaded) {
      setLoaded(true);
      var engine = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_4__["Engine"](reactCanvas.current, antialias, engineOptions, adaptToDeviceRatio); // Set custom loading screen and display loading

      var loadingScreen = new _Utils_LoadingScreen__WEBPACK_IMPORTED_MODULE_10__["default"]();
      engine.loadingScreen = loadingScreen; // Setup and render scene

      var newScene = setUpScene(engine);
      renderScene(engine, newScene);
    }

    return function () {
      console.log("Disposing engine and scene");
      scene && scene.dispose();
      scene && scene.getEngine() && scene.getEngine().dispose();
    };
  }, [reactCanvas, loaded, scene]);
  /* eslint-enable react-hooks/exhaustive-deps */
  // loaded && reactCanvas.current.focus();
  // On toggle theme update scene background color

  Object(react__WEBPACK_IMPORTED_MODULE_5__["useEffect"])(function () {
    if (!scene) return;
    scene.clearColor = _Utils_Constants__WEBPACK_IMPORTED_MODULE_9__["SCENE_BACKGROUND"][(theme === null || theme === void 0 ? void 0 : theme.label) || "default"];
  }, [classes, theme.label, scene]);
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement("div", {
    className: classes.root
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement("div", {
    id: "loading-scene",
    className: classes.loaderContainer
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement("div", {
    className: classes.loaderImage
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement("img", {
    src: _resources_movai_red_svg__WEBPACK_IMPORTED_MODULE_11___default.a,
    alt: "loading",
    width: 200
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_12__["LinearProgress"], {
    color: "secondary",
    style: {
      marginTop: 50
    }
  }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement("canvas", _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0___default()({
    ref: reactCanvas,
    width: size.width,
    height: size.height
  }, rest)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(react_resize_detector__WEBPACK_IMPORTED_MODULE_7___default.a, {
    handleWidth: true,
    handleHeight: true,
    onResize: onResize
  }));
};

BaseViewer.propTypes = {
  antialias: prop_types__WEBPACK_IMPORTED_MODULE_8___default.a.bool,
  engineOptions: prop_types__WEBPACK_IMPORTED_MODULE_8___default.a.object,
  adaptToDeviceRatio: prop_types__WEBPACK_IMPORTED_MODULE_8___default.a.bool,
  sceneOptions: prop_types__WEBPACK_IMPORTED_MODULE_8___default.a.object,
  onSceneReady: prop_types__WEBPACK_IMPORTED_MODULE_8___default.a.func,
  onRender: prop_types__WEBPACK_IMPORTED_MODULE_8___default.a.func,
  is2render: prop_types__WEBPACK_IMPORTED_MODULE_8___default.a.bool,
  sceneFactory: prop_types__WEBPACK_IMPORTED_MODULE_8___default.a.func
};
BaseViewer.defaultProps = {
  antialias: true,
  onSceneReady: function onSceneReady(scene) {},
  is2render: true,
  engineOptions: {
    preserveDrawingBuffer: true,
    stencil: true
  }
};
/* harmony default export */ __webpack_exports__["default"] = (BaseViewer);

/***/ }),

/***/ "./src/Components/Viewer/Graph/Graph.js":
/*!**********************************************!*\
  !*** ./src/Components/Viewer/Graph/Graph.js ***!
  \**********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "@babel/runtime/helpers/esm/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "@babel/runtime/helpers/esm/createClass");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "@babel/runtime/helpers/esm/defineProperty");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_helpers_esm_classPrivateFieldGet__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classPrivateFieldGet */ "@babel/runtime/helpers/esm/classPrivateFieldGet");
/* harmony import */ var _babel_runtime_helpers_esm_classPrivateFieldGet__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_classPrivateFieldGet__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var monet__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! monet */ "monet");
/* harmony import */ var monet__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(monet__WEBPACK_IMPORTED_MODULE_4__);





/**
 * Undirected Graph data structure
 */

var _adjMap = /*#__PURE__*/new WeakMap();

var _vertices = /*#__PURE__*/new WeakMap();

var _edges = /*#__PURE__*/new WeakMap();

var Graph = /*#__PURE__*/function () {
  function Graph() {
    _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default()(this, Graph);

    _adjMap.set(this, {
      writable: true,
      value: {}
    });

    _vertices.set(this, {
      writable: true,
      value: {}
    });

    _edges.set(this, {
      writable: true,
      value: {}
    });
  }

  _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1___default()(Graph, [{
    key: "addVertex",
    value: //========================================================================================

    /*                                                                                      *
     *                                      Public API                                      *
     *                                                                                      */
    //========================================================================================
    function addVertex(i) {
      if (!(i in _babel_runtime_helpers_esm_classPrivateFieldGet__WEBPACK_IMPORTED_MODULE_3___default()(this, _vertices))) {
        _babel_runtime_helpers_esm_classPrivateFieldGet__WEBPACK_IMPORTED_MODULE_3___default()(this, _vertices)[i] = {};
        _babel_runtime_helpers_esm_classPrivateFieldGet__WEBPACK_IMPORTED_MODULE_3___default()(this, _adjMap)[i] = {};
      }
    }
  }, {
    key: "delVertex",
    value: function delVertex(i) {
      var _this = this;

      if (i in _babel_runtime_helpers_esm_classPrivateFieldGet__WEBPACK_IMPORTED_MODULE_3___default()(this, _vertices)) {
        delete _babel_runtime_helpers_esm_classPrivateFieldGet__WEBPACK_IMPORTED_MODULE_3___default()(this, _vertices)[i]; // delete neighbors edge properties

        Object.keys(_babel_runtime_helpers_esm_classPrivateFieldGet__WEBPACK_IMPORTED_MODULE_3___default()(this, _adjMap)[i]).forEach(function (j) {
          delete _babel_runtime_helpers_esm_classPrivateFieldGet__WEBPACK_IMPORTED_MODULE_3___default()(_this, _edges)[Graph.edgeKey(i, j)];
          delete _babel_runtime_helpers_esm_classPrivateFieldGet__WEBPACK_IMPORTED_MODULE_3___default()(_this, _edges)[Graph.edgeKey(j, i)];
        });
        delete _babel_runtime_helpers_esm_classPrivateFieldGet__WEBPACK_IMPORTED_MODULE_3___default()(this, _adjMap)[i];
        Object.keys(_babel_runtime_helpers_esm_classPrivateFieldGet__WEBPACK_IMPORTED_MODULE_3___default()(this, _adjMap)).forEach(function (j) {
          if (i in _babel_runtime_helpers_esm_classPrivateFieldGet__WEBPACK_IMPORTED_MODULE_3___default()(_this, _adjMap)[j]) {
            delete _babel_runtime_helpers_esm_classPrivateFieldGet__WEBPACK_IMPORTED_MODULE_3___default()(_this, _adjMap)[j][i];
          }
        });
      }
    }
    /**
     *
     * If edge already exists, this function overwrites previous edge
     *
     * @param {*} i: vertex id
     * @param {*} j: vertex id
     */

  }, {
    key: "addEdge",
    value: function addEdge(i, j) {
      this.addVertex(i);
      this.addVertex(j);
      var edgeProps = this.getEdge(i, j).orSome({});
      _babel_runtime_helpers_esm_classPrivateFieldGet__WEBPACK_IMPORTED_MODULE_3___default()(this, _edges)[Graph.edgeKey(i, j)] = edgeProps;
      _babel_runtime_helpers_esm_classPrivateFieldGet__WEBPACK_IMPORTED_MODULE_3___default()(this, _edges)[Graph.edgeKey(j, i)] = edgeProps;
      _babel_runtime_helpers_esm_classPrivateFieldGet__WEBPACK_IMPORTED_MODULE_3___default()(this, _adjMap)[i][j] = true;
      _babel_runtime_helpers_esm_classPrivateFieldGet__WEBPACK_IMPORTED_MODULE_3___default()(this, _adjMap)[j][i] = true;
      return this;
    }
  }, {
    key: "delEdge",
    value: function delEdge(i, j) {
      var _this2 = this;

      var ijKey = Graph.edgeKey(i, j);
      var jiKey = Graph.edgeKey(j, i);

      if (ijKey in _babel_runtime_helpers_esm_classPrivateFieldGet__WEBPACK_IMPORTED_MODULE_3___default()(this, _edges) || jiKey in _babel_runtime_helpers_esm_classPrivateFieldGet__WEBPACK_IMPORTED_MODULE_3___default()(this, _edges)) {
        delete _babel_runtime_helpers_esm_classPrivateFieldGet__WEBPACK_IMPORTED_MODULE_3___default()(this, _edges)[ijKey];
        delete _babel_runtime_helpers_esm_classPrivateFieldGet__WEBPACK_IMPORTED_MODULE_3___default()(this, _edges)[jiKey];
        delete _babel_runtime_helpers_esm_classPrivateFieldGet__WEBPACK_IMPORTED_MODULE_3___default()(this, _adjMap)[i][j];
        delete _babel_runtime_helpers_esm_classPrivateFieldGet__WEBPACK_IMPORTED_MODULE_3___default()(this, _adjMap)[j][i];
      } // remove vertex if have no neighbors


      [i, j].forEach(function (id) {
        var neighbors = _this2.getNeighbors(id);

        if (neighbors.length === 0) {
          _this2.delVertex(id);
        }
      });
    }
  }, {
    key: "hasEdge",
    value: function hasEdge(i, j) {
      return this.getEdge(i, j).isSome();
    }
  }, {
    key: "getNeighbors",
    value: function getNeighbors(i) {
      if (i in _babel_runtime_helpers_esm_classPrivateFieldGet__WEBPACK_IMPORTED_MODULE_3___default()(this, _adjMap)) return Object.keys(_babel_runtime_helpers_esm_classPrivateFieldGet__WEBPACK_IMPORTED_MODULE_3___default()(this, _adjMap)[i]);
      return [];
    }
  }, {
    key: "getEdge",
    value: function getEdge(i, j) {
      var edgeKey = Graph.edgeKey(i, j);

      if (edgeKey in _babel_runtime_helpers_esm_classPrivateFieldGet__WEBPACK_IMPORTED_MODULE_3___default()(this, _edges)) {
        return monet__WEBPACK_IMPORTED_MODULE_4__["Maybe"].some(_babel_runtime_helpers_esm_classPrivateFieldGet__WEBPACK_IMPORTED_MODULE_3___default()(this, _edges)[edgeKey]);
      }

      return monet__WEBPACK_IMPORTED_MODULE_4__["Maybe"].none();
    }
  }, {
    key: "getVertex",
    value: function getVertex(i) {
      if (i in _babel_runtime_helpers_esm_classPrivateFieldGet__WEBPACK_IMPORTED_MODULE_3___default()(this, _vertices)) {
        return monet__WEBPACK_IMPORTED_MODULE_4__["Maybe"].some(_babel_runtime_helpers_esm_classPrivateFieldGet__WEBPACK_IMPORTED_MODULE_3___default()(this, _vertices)[i]);
      }

      return monet__WEBPACK_IMPORTED_MODULE_4__["Maybe"].none();
    }
  }, {
    key: "getEdges",
    value: function getEdges() {
      return _babel_runtime_helpers_esm_classPrivateFieldGet__WEBPACK_IMPORTED_MODULE_3___default()(this, _edges);
    }
  }, {
    key: "getVertices",
    value: function getVertices() {
      return _babel_runtime_helpers_esm_classPrivateFieldGet__WEBPACK_IMPORTED_MODULE_3___default()(this, _vertices);
    }
  }, {
    key: "getAdjMap",
    value: function getAdjMap() {
      return _babel_runtime_helpers_esm_classPrivateFieldGet__WEBPACK_IMPORTED_MODULE_3___default()(this, _adjMap);
    }
  }]);

  return Graph;
}();

_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2___default()(Graph, "edgeKey", function (i, j) {
  return "".concat(i, "_").concat(j);
});

_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2___default()(Graph, "key2Edge", function (key) {
  return key.split("_");
});

/* harmony default export */ __webpack_exports__["default"] = (Graph);

/***/ }),

/***/ "./src/Components/Viewer/MainView/MainViewActions.js":
/*!***********************************************************!*\
  !*** ./src/Components/Viewer/MainView/MainViewActions.js ***!
  \***********************************************************/
/*! exports provided: ACTIONS */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ACTIONS", function() { return ACTIONS; });
/* harmony import */ var _Actions_DragObjectsAction__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Actions/DragObjectsAction */ "./src/Components/Viewer/Actions/DragObjectsAction.js");
/* harmony import */ var _Actions_AddKeyPointAction__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Actions/AddKeyPointAction */ "./src/Components/Viewer/Actions/AddKeyPointAction.js");
/* harmony import */ var _Actions_BoxRegionAction__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Actions/BoxRegionAction */ "./src/Components/Viewer/Actions/BoxRegionAction.js");
/* harmony import */ var _Actions_DrawPathAction__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../Actions/DrawPathAction */ "./src/Components/Viewer/Actions/DrawPathAction.js");
/* harmony import */ var _Actions_PolygonRegionAction__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../Actions/PolygonRegionAction */ "./src/Components/Viewer/Actions/PolygonRegionAction.js");
/* harmony import */ var _Actions_OrbitAction__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../Actions/OrbitAction */ "./src/Components/Viewer/Actions/OrbitAction.js");
/* harmony import */ var _Actions_DrawGraphAction__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../Actions/DrawGraphAction */ "./src/Components/Viewer/Actions/DrawGraphAction.js");
/* harmony import */ var _Actions_MeasureAction__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../Actions/MeasureAction */ "./src/Components/Viewer/Actions/MeasureAction.js");
/* harmony import */ var _Actions_NavigationPreviewAction__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../Actions/NavigationPreviewAction */ "./src/Components/Viewer/Actions/NavigationPreviewAction.js");









/**
 * Order Matters
 */

var ACTIONS = function ACTIONS(viewOnly) {
  return viewOnly ? {
    measure: new _Actions_MeasureAction__WEBPACK_IMPORTED_MODULE_7__["default"](),
    orbit: new _Actions_OrbitAction__WEBPACK_IMPORTED_MODULE_5__["default"]()
  } : {
    robotPreview: new _Actions_NavigationPreviewAction__WEBPACK_IMPORTED_MODULE_8__["default"](function (title, reactFactory) {}),
    measure: new _Actions_MeasureAction__WEBPACK_IMPORTED_MODULE_7__["default"](),
    drawGraph: new _Actions_DrawGraphAction__WEBPACK_IMPORTED_MODULE_6__["default"](),
    drawRegion: new _Actions_PolygonRegionAction__WEBPACK_IMPORTED_MODULE_4__["default"](),
    addKeyPoint: new _Actions_AddKeyPointAction__WEBPACK_IMPORTED_MODULE_1__["default"](),
    drawBoxRegion: new _Actions_BoxRegionAction__WEBPACK_IMPORTED_MODULE_2__["default"](),
    drawPath: new _Actions_DrawPathAction__WEBPACK_IMPORTED_MODULE_3__["default"](),
    dragObjects: new _Actions_DragObjectsAction__WEBPACK_IMPORTED_MODULE_0__["default"](),
    orbit: new _Actions_OrbitAction__WEBPACK_IMPORTED_MODULE_5__["default"]()
  };
};

/***/ }),

/***/ "./src/Components/Viewer/MainView/MainViewRetriever.js":
/*!*************************************************************!*\
  !*** ./src/Components/Viewer/MainView/MainViewRetriever.js ***!
  \*************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "@babel/runtime/helpers/esm/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "@babel/runtime/helpers/esm/createClass");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "@babel/runtime/helpers/esm/defineProperty");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _NodeItem_GlobalRef__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../NodeItem/GlobalRef */ "./src/Components/Viewer/NodeItem/GlobalRef.js");
/* harmony import */ var monet__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! monet */ "monet");
/* harmony import */ var monet__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(monet__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _Utils_AssetsTypesFactory__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../Utils/AssetsTypesFactory */ "./src/Components/Viewer/Utils/AssetsTypesFactory.js");
/* harmony import */ var _NodeItemFactoryMap__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./NodeItemFactoryMap */ "./src/Components/Viewer/MainView/NodeItemFactoryMap.js");
/* harmony import */ var _NodeItem_Robot__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../NodeItem/Robot */ "./src/Components/Viewer/NodeItem/Robot.js");









var MainViewRetriever = /*#__PURE__*/function () {
  function MainViewRetriever() {
    _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default()(this, MainViewRetriever);
  }

  _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1___default()(MainViewRetriever, null, [{
    key: "importScene",
    value: function importScene(mainView) {
      var serverScene = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];
      var parent = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;
      var is2addInServer = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;
      var updateErrorList = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : function () {};
      console.log("Importing scene...", mainView, serverScene);
      MainViewRetriever.updateErrorList = updateErrorList;
      var errors = [];

      if (serverScene.length > 0) {
        importSceneRecursive(mainView, serverScene, parent, errors, is2addInServer);
      } else {
        importDefaultScene(mainView);
      }

      console.log("End Importing scene");
      return errors;
    }
  }, {
    key: "importNodeItem",
    value: function importNodeItem(mainView, nodeDict, parent) {
      var is2addInServer = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;
      var nodeItemClass = _NodeItemFactoryMap__WEBPACK_IMPORTED_MODULE_6__["default"][nodeDict.type]; //retrieve default export

      if (nodeItemClass) {
        mainView.getSceneMemory().forEach(function (_ref) {
          var scene = _ref.scene;
          var nodeItem = nodeItemClass.ofDict(scene, nodeDict, mainView); // pseudo lazy migration of isVisible prop

          var isVisible = nodeDict.isVisible === undefined ? true : nodeDict.isVisible;
          nodeItem.mesh.setEnabled(isVisible);
          mainView.getNodeFromTree(parent).forEach(function (treeNode) {
            nodeItem.mesh.parent = treeNode.item.mesh;
          });
          mainView.addNodeItem2Tree(nodeItem, parent, is2addInServer, isVisible, false);
        });
      }
    }
  }]);

  return MainViewRetriever;
}();

_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2___default()(MainViewRetriever, "updateErrorList", function () {});

function isAsset(nodeDict) {
  return nodeDict.type in _Utils_AssetsTypesFactory__WEBPACK_IMPORTED_MODULE_5__["ASSETS_TYPES"];
}

function importAsset(mainView, nodeDict, parent, errors) {
  var assetType = nodeDict.type;
  var assetName = monet__WEBPACK_IMPORTED_MODULE_4__["Maybe"].fromNull(nodeDict.assetName).orSome(nodeDict.name);
  var assetActionMap = mainView.getAssetsActionMap(); // legacy

  var retrievedAction = monet__WEBPACK_IMPORTED_MODULE_4__["Maybe"].fromNull(assetActionMap[assetName]).orLazy(function () {
    return assetActionMap[assetName.split(".")[0]];
  });

  if (!retrievedAction && assetType === _Utils_AssetsTypesFactory__WEBPACK_IMPORTED_MODULE_5__["ASSETS_TYPES"].Robot) {
    var defaultRobot = _NodeItem_Robot__WEBPACK_IMPORTED_MODULE_7__["default"].createBaseObject({
      robotName: assetName,
      nodeDict: nodeDict
    });
    retrievedAction = _Utils_AssetsTypesFactory__WEBPACK_IMPORTED_MODULE_5__["AssetsTypesFactory"].Robot(defaultRobot);
  }

  if (!retrievedAction) {
    errors.push({
      cause: "Asset of type ".concat(assetType, " with name ").concat(assetName, ", was not found"),
      solution: "please upload ".concat(assetType, " ").concat(assetName)
    });
    return;
  }

  retrievedAction.memory["parentObj"] = {
    parent: parent
  };
  retrievedAction.memory["nodeItemDict"] = nodeDict;
  retrievedAction.memory["assetName"] = assetName;
  retrievedAction.memory["name"] = nodeDict.name;
  retrievedAction.memory["isImport"] = true;
  retrievedAction.memory["isVisible"] = nodeDict.isVisible === undefined ? true : nodeDict.isVisible; // Execute action

  retrievedAction.action(mainView, function (err) {
    var _err$exception;

    if ((err === null || err === void 0 ? void 0 : (_err$exception = err.exception) === null || _err$exception === void 0 ? void 0 : _err$exception.name) === "RequestFileError") {
      errors.push({
        cause: "Asset of type ".concat(err.assetType, " with name ").concat(err.assetName, ", was not found"),
        solution: "please upload ".concat(err.assetType, " ").concat(err.assetName)
      });
      MainViewRetriever.updateErrorList(errors);
    }
  });
}

function importSceneRecursive(mainView, arrayTree) {
  var parent = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;
  var errors = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : [];
  var is2addInServer = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;
  if (!arrayTree) return;
  var sortArrayTree = arrayTree.sort(function (a, b) {
    // global ref is first
    if (a.item.type === _NodeItemFactoryMap__WEBPACK_IMPORTED_MODULE_6__["default"].GlobalRef.TYPE) return -1;
    if (b.item.type === _NodeItemFactoryMap__WEBPACK_IMPORTED_MODULE_6__["default"].GlobalRef.TYPE) return 1; // graphItem is last

    if (a.item.type === _NodeItemFactoryMap__WEBPACK_IMPORTED_MODULE_6__["default"].GraphItem.TYPE) return 1;
    if (b.item.type === _NodeItemFactoryMap__WEBPACK_IMPORTED_MODULE_6__["default"].GraphItem.TYPE) return -1;
    return a.name < b.name ? -1 : a.name > b.name ? 1 : 0;
  });
  sortArrayTree.forEach(function (node) {
    if (isAsset(node.item)) {
      importAsset(mainView, node.item, parent, errors);
    } else {
      MainViewRetriever.importNodeItem(mainView, node.item, parent, is2addInServer);
    }

    if (node.children.length > 0) {
      importSceneRecursive(mainView, node.children, node.name, errors, is2addInServer);
    }
  });
}

function importDefaultScene(mainView) {
  mainView.getSceneMemory().forEach(function (_ref2) {
    var scene = _ref2.scene;
    var send2server = true;
    mainView.addNodeItem2Tree(_NodeItem_GlobalRef__WEBPACK_IMPORTED_MODULE_3__["default"].ofDict(scene), null, send2server);
  });
}

/* harmony default export */ __webpack_exports__["default"] = (MainViewRetriever);

/***/ }),

/***/ "./src/Components/Viewer/MainView/MeshSelector.js":
/*!********************************************************!*\
  !*** ./src/Components/Viewer/MainView/MeshSelector.js ***!
  \********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return MeshSelector; });
/* harmony import */ var _babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/toConsumableArray */ "@babel/runtime/helpers/esm/toConsumableArray");
/* harmony import */ var _babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "@babel/runtime/helpers/esm/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "@babel/runtime/helpers/esm/createClass");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__);




var MeshSelector = /*#__PURE__*/function () {
  function MeshSelector(mainView) {
    var _this = this;

    _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default()(this, MeshSelector);

    return mainView.getSceneMemory().map(function (_ref) {
      var scene = _ref.scene;
      var sceneId = scene._uid;

      if (sceneId in placeHolderInstance) {
        return placeHolderInstance[sceneId];
      }

      _this.scene = scene;
      _this.mainView = mainView;
      _this.meshSelectionSet = new Set();
      placeHolderInstance[sceneId] = _this;
      return _this;
    }).orSome(this);
  }
  /**
   * Add mesh 2 selected meshes
   * @param {*} mesh
   * @param {*} isSubtractive: if true, repeated addition of meshes will be removed from selected meshes set.
   */


  _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2___default()(MeshSelector, [{
    key: "add",
    value: function add(mesh) {
      var isSubtractive = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;

      if (this.meshSelectionSet.has(mesh)) {
        isSubtractive && this.meshSelectionSet["delete"](mesh);
      } else {
        this.meshSelectionSet.add(mesh);
      }

      return this;
    }
  }, {
    key: "addArray",
    value: function addArray(meshes) {
      var _this2 = this;

      var isSubtractive = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;
      meshes.forEach(function (mesh) {
        return _this2.add(mesh, isSubtractive);
      });
      return this;
    }
  }, {
    key: "clear",
    value: function clear() {
      this.meshSelectionSet = new Set();
      return this;
    }
  }, {
    key: "meshes",
    value: function meshes() {
      return _babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default()(this.meshSelectionSet);
    }
  }, {
    key: "has",
    value: function has(mesh) {
      return this.meshSelectionSet.has(mesh);
    }
  }, {
    key: "filter",
    value: function filter(predicate) {
      var filteredSet = new Set();
      this.meshSelectionSet.forEach(function (mesh) {
        if (predicate(mesh)) filteredSet.add(mesh);
      });
      this.meshSelectionSet = filteredSet;
      return this;
    } //   forEach(lambda) {
    //     this.meshSelectionSet.forEach(lambda);
    //     return this;
    //   }

  }], [{
    key: "ofMainView",
    value: function ofMainView(mainView) {
      return new MeshSelector(mainView);
    }
  }]);

  return MeshSelector;
}();


var placeHolderInstance = {};

/***/ }),

/***/ "./src/Components/Viewer/MainView/NodeItemFactoryMap.js":
/*!**************************************************************!*\
  !*** ./src/Components/Viewer/MainView/NodeItemFactoryMap.js ***!
  \**************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _NodeItem_GlobalRef__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../NodeItem/GlobalRef */ "./src/Components/Viewer/NodeItem/GlobalRef.js");
/* harmony import */ var _NodeItem_Box__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../NodeItem/Box */ "./src/Components/Viewer/NodeItem/Box.js");
/* harmony import */ var _NodeItem_KeyPoint__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../NodeItem/KeyPoint */ "./src/Components/Viewer/NodeItem/KeyPoint.js");
/* harmony import */ var _NodeItem_Path__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../NodeItem/Path */ "./src/Components/Viewer/NodeItem/Path.js");
/* harmony import */ var _NodeItem_Wall__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../NodeItem/Wall */ "./src/Components/Viewer/NodeItem/Wall.js");
/* harmony import */ var _NodeItem_BoxRegion__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../NodeItem/BoxRegion */ "./src/Components/Viewer/NodeItem/BoxRegion.js");
/* harmony import */ var _NodeItem_PolygonRegion__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../NodeItem/PolygonRegion */ "./src/Components/Viewer/NodeItem/PolygonRegion.js");
/* harmony import */ var _NodeItem_GraphItem__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../NodeItem/GraphItem */ "./src/Components/Viewer/NodeItem/GraphItem.js");
/* harmony import */ var _NodeItem_NavigationPreviewItem__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../NodeItem/NavigationPreviewItem */ "./src/Components/Viewer/NodeItem/NavigationPreviewItem.js");









var NODE_ITEM_FACTORY_MAP = {
  GlobalRef: _NodeItem_GlobalRef__WEBPACK_IMPORTED_MODULE_0__["default"],
  Box: _NodeItem_Box__WEBPACK_IMPORTED_MODULE_1__["default"],
  KeyPoint: _NodeItem_KeyPoint__WEBPACK_IMPORTED_MODULE_2__["default"],
  Path: _NodeItem_Path__WEBPACK_IMPORTED_MODULE_3__["default"],
  Wall: _NodeItem_Wall__WEBPACK_IMPORTED_MODULE_4__["default"],
  BoxRegion: _NodeItem_BoxRegion__WEBPACK_IMPORTED_MODULE_5__["default"],
  PolygonRegion: _NodeItem_PolygonRegion__WEBPACK_IMPORTED_MODULE_6__["default"],
  GraphItem: _NodeItem_GraphItem__WEBPACK_IMPORTED_MODULE_7__["default"],
  NavigationPreviewItem: _NodeItem_NavigationPreviewItem__WEBPACK_IMPORTED_MODULE_8__["default"]
};
/* harmony default export */ __webpack_exports__["default"] = (NODE_ITEM_FACTORY_MAP);

/***/ }),

/***/ "./src/Components/Viewer/Math/Mat3.js":
/*!********************************************!*\
  !*** ./src/Components/Viewer/Math/Mat3.js ***!
  \********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "@babel/runtime/helpers/esm/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "@babel/runtime/helpers/esm/createClass");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _Vec3__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Vec3 */ "./src/Components/Viewer/Math/Vec3.js");
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babylonjs/core */ "@babylonjs/core");
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babylonjs_core__WEBPACK_IMPORTED_MODULE_3__);





var Mat3 = /*#__PURE__*/function () {
  function Mat3(v1, v2, v3) {
    _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default()(this, Mat3);

    var v = [v1, v2, v3];

    for (var i = 0; i < v.length; i++) {
      if (v[i].constructor !== Array || v[i].length < 3) throw Error("One of the inputs is not a array");
    }

    this.mat3 = v.map(function (x) {
      return new _Vec3__WEBPACK_IMPORTED_MODULE_2__["default"](x);
    });
  }
  /**
   * Matrix prod with  3-vector
   * @param {*} v: 3-vector
   *
   * returns 3-vector
   */


  _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1___default()(Mat3, [{
    key: "prodVec",
    value: function prodVec(v) {
      var ans = new _Vec3__WEBPACK_IMPORTED_MODULE_2__["default"]([0, 0, 0]);

      for (var i = 0; i < this.mat3.length; i++) {
        ans = ans.add(this.mat3[i].scale(v.vec3[i]));
      }

      return ans;
    }
    /**
     * Matrix transpose prod with 3-vec
     * @param {*} v : 3-vector
     */

  }, {
    key: "dotVec",
    value: function dotVec(v) {
      var ans = [0, 0, 0];

      for (var i = 0; i < this.mat3.length; i++) {
        ans[i] = this.mat3[i].dot(v);
      }

      return new _Vec3__WEBPACK_IMPORTED_MODULE_2__["default"](ans);
    }
  }, {
    key: "prod",
    value: function prod(m) {
      var u = this.prodVec(m.mat3[0]);
      var v = this.prodVec(m.mat3[1]);
      var w = this.prodVec(m.mat3[2]);
      return new Mat3(u.vec3, v.vec3, w.vec3);
    }
  }, {
    key: "dot",
    value: function dot(m) {
      var u = this.dotVec(m.mat3[0]);
      var v = this.dotVec(m.mat3[1]);
      var w = this.dotVec(m.mat3[2]);
      return new Mat3(u.vec3, v.vec3, w.vec3);
    }
  }, {
    key: "map",
    value: function map(f) {
      var u = this.mat3[0].map(f);
      var v = this.mat3[1].map(f);
      var w = this.mat3[2].map(f);
      return new Mat3(u.vec3, v.vec3, w.vec3);
    }
  }, {
    key: "equals",
    value: function equals(mat) {
      if (mat.constructor !== this.constructor) return false;
      return this.mat3.map(function (v, index) {
        return v.equals(mat.mat3[index]);
      }).reduce(function (e, v) {
        return e && v;
      }, true);
    }
  }], [{
    key: "ofBabylonMatrix",
    value: function ofBabylonMatrix(babylonMat) {
      var arrayMat = _babylonjs_core__WEBPACK_IMPORTED_MODULE_3__["Matrix"].GetAsMatrix3x3(babylonMat);
      var u = [arrayMat[0], arrayMat[1], arrayMat[2]];
      var v = [arrayMat[3], arrayMat[4], arrayMat[5]];
      var w = [arrayMat[6], arrayMat[7], arrayMat[8]];
      return new Mat3(u, v, w);
    }
  }, {
    key: "of",
    value: function of(v1, v2, v3) {
      return new Mat3(v1, v2, v3);
    }
  }, {
    key: "eye",
    value: function eye() {
      return new Mat3([1, 0, 0], [0, 1, 0], [0, 0, 1]);
    }
  }]);

  return Mat3;
}();

/* harmony default export */ __webpack_exports__["default"] = (Mat3);

/***/ }),

/***/ "./src/Components/Viewer/Math/Vec2.js":
/*!********************************************!*\
  !*** ./src/Components/Viewer/Math/Vec2.js ***!
  \********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "@babel/runtime/helpers/esm/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "@babel/runtime/helpers/esm/createClass");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "@babel/runtime/helpers/esm/defineProperty");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__);




//immutable class, not managing exceptions
var Vec2 = /*#__PURE__*/function () {
  function Vec2(x, y) {
    _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default()(this, Vec2);

    this.vec = [x, y].map(function (z) {
      return z ? z : 0;
    });
  }

  _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1___default()(Vec2, [{
    key: "x",
    get: function get() {
      return this.vec[0];
    }
  }, {
    key: "y",
    get: function get() {
      return this.vec[1];
    }
  }, {
    key: "toArray",
    value: function toArray() {
      return this.vec;
    }
  }, {
    key: "add",
    value: function add(y) {
      return this.op(y, function (a, b) {
        return a + b;
      });
    }
  }, {
    key: "sub",
    value: function sub(y) {
      return this.op(y, function (a, b) {
        return a - b;
      });
    }
  }, {
    key: "mul",
    value: function mul(y) {
      return this.op(y, function (a, b) {
        return a * b;
      });
    }
  }, {
    key: "div",
    value: function div(y) {
      return this.op(y, function (a, b) {
        return a / b;
      });
    }
  }, {
    key: "dot",
    value: function dot(y) {
      return this.vec.reduce(function (acc, v, i) {
        return acc + v * y.vec[i];
      }, 0);
    }
  }, {
    key: "prod",
    value: function prod(y) {
      return new Vec2(this.x * y.x - this.y * y.y, this.x * y.y + this.y * y.x);
    }
  }, {
    key: "length",
    value: function length() {
      return Math.sqrt(this.dot(this));
    }
  }, {
    key: "normalize",
    value: function normalize() {
      return this.scale(1 / this.length());
    }
  }, {
    key: "dual",
    value: function dual() {
      return new Vec2(-this.y, this.x);
    }
  }, {
    key: "sym",
    value: function sym() {
      return this.scale(-1);
    }
  }, {
    key: "conj",
    value: function conj() {
      return new Vec2(this.x, -this.y);
    }
  }, {
    key: "scale",
    value: function scale(r) {
      return this.map(function (z) {
        return z * r;
      });
    }
  }, {
    key: "map",
    value: function map(lambda) {
      return Vec2.fromArray(this.vec.map(lambda));
    }
    /**
     * Returns a vec2 from the operation function bilambda
     * @param {*} y
     * @param {*} biLambda
     */

  }, {
    key: "op",
    value: function op(y, biLambda) {
      return Vec2.fromArray(this.vec.map(function (v, i) {
        return biLambda(v, y.vec[i]);
      }));
    }
  }, {
    key: "reduce",
    value: function reduce(fold, initial) {
      return this.vec.reduce(fold, initial);
    }
  }, {
    key: "toObject",
    value: function toObject() {
      return {
        x: this.x,
        y: this.y
      };
    }
  }, {
    key: "toString",
    value: function toString() {
      return "{x: ".concat(this.x, ", y:").concat(this.y, "}");
    }
  }], [{
    key: "fromArray",
    value: function fromArray(array) {
      if (array.length < 2) throw new Error("array must have size > 2");
      return new Vec2(array[0], array[1]);
    }
  }, {
    key: "of",
    value: function of(x, y) {
      return new Vec2(x, y);
    }
  }, {
    key: "ofBabylon",
    value: function ofBabylon(vector3) {
      return new Vec2(vector3.x, vector3.y);
    }
  }]);

  return Vec2;
}();

_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2___default()(Vec2, "ZERO", new Vec2(0, 0));

_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2___default()(Vec2, "e1", new Vec2(1, 0));

_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2___default()(Vec2, "e2", new Vec2(0, 1));

/* harmony default export */ __webpack_exports__["default"] = (Vec2);

/***/ }),

/***/ "./src/Components/Viewer/Math/Vec3.js":
/*!********************************************!*\
  !*** ./src/Components/Viewer/Math/Vec3.js ***!
  \********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/toConsumableArray */ "@babel/runtime/helpers/esm/toConsumableArray");
/* harmony import */ var _babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "@babel/runtime/helpers/esm/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "@babel/runtime/helpers/esm/createClass");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "@babel/runtime/helpers/esm/defineProperty");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babylonjs/core */ "@babylonjs/core");
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babylonjs_core__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _Vec2__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Vec2 */ "./src/Components/Viewer/Math/Vec2.js");






/**
 * Class that describes immutable 3-vectors
 */

var Vec3 = /*#__PURE__*/function () {
  //no for's because performance
  function Vec3(array) {
    var _this = this;

    _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default()(this, Vec3);

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_3___default()(this, "normalize", function () {
      var l = _this.length();

      if (l === 0) throw new Error("You can't normalize a zero norm vector");
      return _this.scale(1 / l);
    });

    if (array.constructor !== Array || array.length < 3) throw new Error("".concat(array, " is not a valid 3-vector"));
    this.vec3 = _babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default()(array);
  }

  _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2___default()(Vec3, [{
    key: "x",
    get: function get() {
      return this.vec3[0];
    }
  }, {
    key: "y",
    get: function get() {
      return this.vec3[1];
    }
  }, {
    key: "z",
    get: function get() {
      return this.vec3[2];
    }
  }, {
    key: "add",
    value: function add(x) {
      return this.op(x, function (a, b) {
        return a + b;
      });
    }
  }, {
    key: "sub",
    value: function sub(x) {
      return this.op(x, function (a, b) {
        return a - b;
      });
    }
  }, {
    key: "mul",
    value: function mul(x) {
      return this.op(x, function (a, b) {
        return a * b;
      });
    }
  }, {
    key: "op",
    value: function op(x, operation) {
      var ans = [];
      ans[0] = operation(this.vec3[0], x.vec3[0]);
      ans[1] = operation(this.vec3[1], x.vec3[1]);
      ans[2] = operation(this.vec3[2], x.vec3[2]);
      return new Vec3(ans);
    }
  }, {
    key: "scale",
    value: function scale(r) {
      return this.map(function (x) {
        return x * r;
      });
    }
  }, {
    key: "dot",
    value: function dot(x) {
      return this.vec3[0] * x.vec3[0] + this.vec3[1] * x.vec3[1] + this.vec3[2] * x.vec3[2];
    }
  }, {
    key: "map",
    value: function map(f) {
      return new Vec3(this.vec3.map(f));
    }
  }, {
    key: "length",
    value: function length() {
      return Math.sqrt(this.dot(this));
    }
  }, {
    key: "toBabylon",
    value: function toBabylon() {
      return new _babylonjs_core__WEBPACK_IMPORTED_MODULE_4__["Vector3"](this.vec3[0], this.vec3[1], this.vec3[2]);
    }
  }, {
    key: "toArray",
    value: function toArray() {
      return this.vec3;
    }
  }, {
    key: "toVec2",
    value: function toVec2() {
      return new _Vec2__WEBPACK_IMPORTED_MODULE_5__["default"](this.x, this.y);
    }
  }, {
    key: "equals",
    value: function equals(v) {
      if (v.constructor !== this.constructor) return false;
      return v.vec3.map(function (x, index) {
        return v.vec3[index] === x;
      }).reduce(function (e, v) {
        return e && v;
      }, true);
    }
  }, {
    key: "reduce",
    value: function reduce(binary, initialValue) {
      return this.vec3.reduce(binary, initialValue);
    }
  }, {
    key: "getMax",
    value: function getMax() {
      return this.reduce(function (a, b) {
        return Math.max(a, b);
      }, -Number.MAX_VALUE);
    }
  }, {
    key: "getMin",
    value: function getMin() {
      return this.reduce(function (a, b) {
        return Math.min(a, b);
      }, Number.MAX_VALUE);
    }
  }, {
    key: "someNaNOrInfinite",
    value: function someNaNOrInfinite() {
      return this.vec3.some(function (x) {
        return isNaN(x) || !isFinite(x);
      });
    }
  }], [{
    key: "ofBabylon",
    value: function ofBabylon(babylon) {
      return new Vec3([babylon.x, babylon.y, babylon.z]);
    }
  }, {
    key: "of",
    value: function of(array) {
      return array ? new Vec3(array) : new Vec3([0, 0, 0]);
    }
  }, {
    key: "fromArray",
    value: function fromArray(array) {
      return Vec3.of(array);
    }
  }, {
    key: "random",
    value: function random() {
      return new Vec3([1, 2, 3].map(Math.random()));
    }
    /**
     *
     * @param {*} u: Vec3
     */

  }, {
    key: "orthogonalBasisFromVector",
    value: function orthogonalBasisFromVector(u) {
      var identityMatrix = [Vec3.e1, Vec3.e2, Vec3.e3]; //choose pivot

      var pivot = 0;

      for (var i = 0; i < 3; i++) {
        if (u.vec3[i] !== 0) {
          pivot = i;
          break;
        }
      }

      var v = identityMatrix[(pivot + 1) % 3].add(identityMatrix[pivot].scale(-u.vec3[(pivot + 1) % 3] / u.vec3[pivot]));
      v = v.normalize();
      var w = identityMatrix[(pivot + 2) % 3].add(identityMatrix[pivot].scale(-u.vec3[(pivot + 2) % 3] / u.vec3[pivot]));
      w = w.normalize();
      w = w.sub(v.scale(v.dot(w)));
      return {
        u: u.normalize(),
        v: v,
        w: w.normalize()
      };
    }
  }]);

  return Vec3;
}();

_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_3___default()(Vec3, "ONES", Vec3.of([1, 1, 1]));

_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_3___default()(Vec3, "ZERO", Vec3.of([0, 0, 0]));

_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_3___default()(Vec3, "e1", new Vec3([1, 0, 0]));

_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_3___default()(Vec3, "e2", new Vec3([0, 1, 0]));

_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_3___default()(Vec3, "e3", new Vec3([0, 0, 1]));

/* harmony default export */ __webpack_exports__["default"] = (Vec3);

/***/ }),

/***/ "./src/Components/Viewer/NodeItem/AssetNodeItem.js":
/*!*********************************************************!*\
  !*** ./src/Components/Viewer/NodeItem/AssetNodeItem.js ***!
  \*********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "@babel/runtime/helpers/esm/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "@babel/runtime/helpers/esm/createClass");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/assertThisInitialized */ "@babel/runtime/helpers/esm/assertThisInitialized");
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/get */ "@babel/runtime/helpers/esm/get");
/* harmony import */ var _babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "@babel/runtime/helpers/esm/inherits");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "@babel/runtime/helpers/esm/possibleConstructorReturn");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "@babel/runtime/helpers/esm/getPrototypeOf");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "@babel/runtime/helpers/esm/defineProperty");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _NodeItem__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./NodeItem */ "./src/Components/Viewer/NodeItem/NodeItem.js");









function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6___default()(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6___default()(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5___default()(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }



var AssetNodeItem = /*#__PURE__*/function (_NodeItem) {
  _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4___default()(AssetNodeItem, _NodeItem);

  var _super = _createSuper(AssetNodeItem);

  function AssetNodeItem(mesh, assetName) {
    var _this;

    var keyValueMap = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};

    _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default()(this, AssetNodeItem);

    _this = _super.call(this, mesh, keyValueMap);

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default()(_this), "getCopyFunction", function () {
      return function (mousePosFromRoot, someMainView) {};
    });

    _this.assetName = assetName;
    return _this;
  }

  _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1___default()(AssetNodeItem, [{
    key: "toDict",
    value: function toDict() {
      var ans = _babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_3___default()(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6___default()(AssetNodeItem.prototype), "toDict", this).call(this);

      ans.assetName = this.assetName;
      return ans;
    }
  }]);

  return AssetNodeItem;
}(_NodeItem__WEBPACK_IMPORTED_MODULE_8__["default"]);

/* harmony default export */ __webpack_exports__["default"] = (AssetNodeItem);

/***/ }),

/***/ "./src/Components/Viewer/NodeItem/Box.js":
/*!***********************************************!*\
  !*** ./src/Components/Viewer/NodeItem/Box.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "@babel/runtime/helpers/esm/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "@babel/runtime/helpers/esm/createClass");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/assertThisInitialized */ "@babel/runtime/helpers/esm/assertThisInitialized");
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/get */ "@babel/runtime/helpers/esm/get");
/* harmony import */ var _babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "@babel/runtime/helpers/esm/inherits");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "@babel/runtime/helpers/esm/possibleConstructorReturn");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "@babel/runtime/helpers/esm/getPrototypeOf");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "@babel/runtime/helpers/esm/defineProperty");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _NodeItem__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./NodeItem */ "./src/Components/Viewer/NodeItem/NodeItem.js");
/* harmony import */ var monet__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! monet */ "monet");
/* harmony import */ var monet__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(monet__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../Util3d/Util3d */ "./src/Components/Viewer/Util3d/Util3d.js");
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @babylonjs/core */ "@babylonjs/core");
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(_babylonjs_core__WEBPACK_IMPORTED_MODULE_11__);









function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6___default()(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6___default()(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5___default()(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }






var Box = /*#__PURE__*/function (_NodeItem) {
  _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4___default()(Box, _NodeItem);

  var _super = _createSuper(Box);

  function Box(mesh) {
    var _this;

    var size = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : Box.DEFAULT_SIZE;
    var keyValueMap = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};

    _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default()(this, Box);

    _this = _super.call(this, mesh, keyValueMap);

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default()(_this), "getType", function () {
      return Box.TYPE;
    });

    _this.size = size;
    return _this;
  }

  _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1___default()(Box, [{
    key: "toDict",
    value: function toDict() {
      var dict = _babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_3___default()(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6___default()(Box.prototype), "toDict", this).call(this);

      dict.size = this.size;
      return dict;
    }
  }, {
    key: "ofDict",
    value: function ofDict(scene) {
      var dict = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
      var mainView = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;
      return Box.ofDict(scene, dict, mainView);
    }
  }], [{
    key: "ofDict",
    value: function ofDict(scene) {
      var dict = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
      var mainView = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;
      var maybeDict = monet__WEBPACK_IMPORTED_MODULE_9__["Maybe"].fromNull(dict);
      var size = maybeDict.flatMap(function (z) {
        return monet__WEBPACK_IMPORTED_MODULE_9__["Maybe"].fromNull(z.size);
      }).orSome(Box.DEFAULT_SIZE);
      var name = maybeDict.flatMap(function (z) {
        return monet__WEBPACK_IMPORTED_MODULE_9__["Maybe"].fromNull(z.name);
      }).orSome("Box".concat(Math.floor(Math.random() * 1e3)));
      var keyValueMap = maybeDict.flatMap(function (d) {
        return monet__WEBPACK_IMPORTED_MODULE_9__["Maybe"].fromNull(d.keyValueMap);
      }).orUndefined();
      var boxMesh = _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_10__["default"].createBox(scene, new _babylonjs_core__WEBPACK_IMPORTED_MODULE_11__["Color3"](Math.random(), Math.random(), Math.random()), size, name);
      _NodeItem__WEBPACK_IMPORTED_MODULE_8__["default"].mapDict2Mesh(dict, boxMesh);
      return new Box(boxMesh, size, keyValueMap);
    }
  }]);

  return Box;
}(_NodeItem__WEBPACK_IMPORTED_MODULE_8__["default"]);

_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7___default()(Box, "DEFAULT_SIZE", 0.5);

_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7___default()(Box, "TYPE", "Box");

/* harmony default export */ __webpack_exports__["default"] = (Box);

/***/ }),

/***/ "./src/Components/Viewer/NodeItem/BoxRegion.js":
/*!*****************************************************!*\
  !*** ./src/Components/Viewer/NodeItem/BoxRegion.js ***!
  \*****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/toConsumableArray */ "@babel/runtime/helpers/esm/toConsumableArray");
/* harmony import */ var _babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "@babel/runtime/helpers/esm/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "@babel/runtime/helpers/esm/createClass");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/assertThisInitialized */ "@babel/runtime/helpers/esm/assertThisInitialized");
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/get */ "@babel/runtime/helpers/esm/get");
/* harmony import */ var _babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "@babel/runtime/helpers/esm/inherits");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "@babel/runtime/helpers/esm/possibleConstructorReturn");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "@babel/runtime/helpers/esm/getPrototypeOf");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "@babel/runtime/helpers/esm/defineProperty");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var _NodeItem__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./NodeItem */ "./src/Components/Viewer/NodeItem/NodeItem.js");
/* harmony import */ var _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../Util3d/Util3d */ "./src/Components/Viewer/Util3d/Util3d.js");
/* harmony import */ var _Math_Vec3__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../Math/Vec3 */ "./src/Components/Viewer/Math/Vec3.js");
/* harmony import */ var monet__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! monet */ "monet");
/* harmony import */ var monet__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(monet__WEBPACK_IMPORTED_MODULE_12__);
/* harmony import */ var _Utils_Constants__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../Utils/Constants */ "./src/Components/Viewer/Utils/Constants.js");
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @babylonjs/core */ "@babylonjs/core");
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(_babylonjs_core__WEBPACK_IMPORTED_MODULE_14__);
/* harmony import */ var lodash_isequal__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! lodash.isequal */ "lodash.isequal");
/* harmony import */ var lodash_isequal__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(lodash_isequal__WEBPACK_IMPORTED_MODULE_15__);










function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7___default()(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7___default()(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_6___default()(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }









var BoxRegion = /*#__PURE__*/function (_NodeItem) {
  _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_5___default()(BoxRegion, _NodeItem);

  var _super = _createSuper(BoxRegion);

  function BoxRegion(mesh, corners, keyPoints) {
    var _this;

    var keyValueMap = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};

    _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default()(this, BoxRegion);

    _this = _super.call(this, mesh, keyValueMap);

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3___default()(_this), "getType", function () {
      return BoxRegion.TYPE;
    });

    _this.corners = corners; // in local coordinates, in relation to center of mass

    _this.keyPoints = keyPoints;
    return _this;
  }

  _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2___default()(BoxRegion, [{
    key: "toDict",
    value: function toDict() {
      var dict = _babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_4___default()(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7___default()(BoxRegion.prototype), "toDict", this).call(this);

      dict.corners = this.corners;
      return dict;
    }
  }, {
    key: "toForm",
    value: function toForm() {
      var schema = _babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_4___default()(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7___default()(BoxRegion.prototype), "toForm", this).call(this);

      schema.jsonSchema.properties["dimensions"] = {
        type: "object",
        title: "Dimensions",
        properties: {
          lower: {
            type: "object",
            title: "Lower Corner",
            properties: {
              x: {
                type: "number",
                title: "x"
              },
              y: {
                type: "number",
                title: "y"
              }
            }
          },
          size: {
            type: "object",
            title: "Size",
            properties: {
              scaleX: {
                type: "number",
                title: "scale-X"
              },
              scaleY: {
                type: "number",
                title: "scale-Y"
              }
            }
          }
        }
      };
      schema.uiSchema["dimensions"] = {
        "ui:widget": "collapse"
      }; // global ref coordinates

      var worldCorners = this.keyPoints.map(function (x) {
        return _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_10__["default"].getGlobalCoordinates(x, x.position);
      }).map(function (x) {
        return x.toArray();
      });
      schema.data["dimensions"] = {
        lower: {
          x: worldCorners[0][0],
          y: worldCorners[0][1]
        },
        size: {
          // TODO: warning, doesn't take into account possible scaling
          scaleX: this.corners[1][0] - this.corners[0][0],
          scaleY: this.corners[1][1] - this.corners[0][1]
        }
      };
      return schema;
    }
  }, {
    key: "ofForm",
    value: function ofForm(form) {
      var oldForm = this.toForm();
      var oldDimensions = oldForm.data.dimensions;

      if (lodash_isequal__WEBPACK_IMPORTED_MODULE_15___default()(oldDimensions, form.dimensions)) {
        _babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_4___default()(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7___default()(BoxRegion.prototype), "ofForm", this).call(this, form);
      } else {
        this.ofFormDimensions(form);
      }
    }
  }, {
    key: "ofDict",
    value: function ofDict(scene) {
      var dict = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
      var mainView = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;
      return BoxRegion.ofDict(scene, dict, mainView);
    }
  }, {
    key: "ofFormDimensions",
    value: function ofFormDimensions(form) {
      var _this2 = this;

      var newLowerPositionInWorldCoordinates = _babylonjs_core__WEBPACK_IMPORTED_MODULE_14__["Vector3"].FromArray([form.dimensions.lower.x, form.dimensions.lower.y, 0].map(Number.parseFloat));
      var newLocalDimensions = [form.dimensions.size.scaleX, form.dimensions.size.scaleY].map(Number.parseFloat);
      var localLowerPosition = _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_10__["default"].getLocalCoordFromGlobal(this.keyPoints[0], newLowerPositionInWorldCoordinates).toArray();

      var notify = function notify(i) {
        var update = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
        return _this2.keyPoints[i].observers.notifyObservers({
          updatedPointMesh: _this2.keyPoints[i],
          is2updateServer: update
        });
      };

      this.keyPoints[0].position = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_14__["Vector3"](localLowerPosition[0], localLowerPosition[1], this.keyPoints[0].position.z);
      notify(0);
      localLowerPosition = _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_10__["default"].getLocalCoordFromGlobal(this.keyPoints[0], newLowerPositionInWorldCoordinates).toArray();
      this.keyPoints[1].position = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_14__["Vector3"](localLowerPosition[0] + newLocalDimensions[0], localLowerPosition[1] + newLocalDimensions[1], this.keyPoints[1].position.z);
      notify(1);
    }
  }], [{
    key: "ofDict",
    value: function ofDict(scene) {
      var dict = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
      var mainView = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;
      if (!dict) throw new Error("null dictionary describing Box region");
      var name = monet__WEBPACK_IMPORTED_MODULE_12__["Maybe"].fromNull(dict.name).orSome("BoxRegion".concat(Math.floor(Math.random() * 1e3)));
      var mesh = createBoxRegionMesh(dict, name, scene);
      var material = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_14__["StandardMaterial"]("BoxRegionMaterial".concat(name), scene);
      var color = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_14__["Color3"](dict.color[0], dict.color[1], dict.color[2]);
      material.diffuseColor = color;
      material.emissiveColor = color;
      material.backFaceCulling = false;
      mesh.material = material;
      mesh.visibility = dict.color[3] || VISIBILITY;
      monet__WEBPACK_IMPORTED_MODULE_12__["Maybe"].fromNull(dict.quaternion).forEach(function (quaternion) {
        var babylonQuaternion = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_14__["Quaternion"](quaternion[1], quaternion[2], quaternion[3], quaternion[0]);
        mesh.rotationQuaternion = babylonQuaternion.normalize();
      });
      var keyPoints = createPlaceHolderKeyPoints(scene, dict.corners.map(function (x) {
        return _Math_Vec3__WEBPACK_IMPORTED_MODULE_11__["default"].of(x).toBabylon();
      }), mesh, mainView);
      return new BoxRegion(mesh, dict.corners, keyPoints, dict.keyValueMap);
    }
  }]);

  return BoxRegion;
}(_NodeItem__WEBPACK_IMPORTED_MODULE_9__["default"]);

_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(BoxRegion, "TYPE", "BoxRegion");

var RADIUS = _Utils_Constants__WEBPACK_IMPORTED_MODULE_13__["default"].RADIUS;
var FACES = [[0, 1, 2], [2, 3, 0], [4, 5, 6], [6, 7, 4], [0, 1, 5], [5, 4, 0], [3, 2, 6], [6, 7, 3], [1, 2, 6], [6, 5, 1], [0, 3, 7], [7, 4, 0]];
/**
 * @param boxRegion: {position: 3-array, corners: array of 3-arrays }
 */

function createBoxRegionMesh(boxRegion, name, scene) {
  // centered corners vec
  var corners = boxRegion.corners.map(function (x) {
    return _Math_Vec3__WEBPACK_IMPORTED_MODULE_11__["default"].of(x).toBabylon();
  });
  var d = corners[1].subtract(corners[0]);
  var middlePoint = _Math_Vec3__WEBPACK_IMPORTED_MODULE_11__["default"].of(boxRegion.position).toBabylon();
  var shape = [corners[0], corners[0].add(_babylonjs_core__WEBPACK_IMPORTED_MODULE_14__["Axis"].X.scale(d.x)), corners[0].add(new _babylonjs_core__WEBPACK_IMPORTED_MODULE_14__["Vector3"](d.x, d.y, 0)), corners[0].add(_babylonjs_core__WEBPACK_IMPORTED_MODULE_14__["Axis"].Y.scale(d.y))];
  var h = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_14__["Vector3"](0, 0, d.z);
  var boxRegionMesh = {
    positions: [shape[0], shape[1], shape[2], shape[3], shape[0].add(h), shape[1].add(h), shape[2].add(h), shape[3].add(h)],
    faces: FACES
  };
  var mesh = _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_10__["default"].meshFromPositionAndFaces(name, scene, boxRegionMesh.positions, boxRegionMesh.faces);
  mesh.position = middlePoint;
  mesh.rotationQuaternion = _babylonjs_core__WEBPACK_IMPORTED_MODULE_14__["Quaternion"].Identity();
  return mesh;
}

function createNewMeshFromOldUsingNewBox(newBox, scene, mesh, item) {
  var average = _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_10__["default"].pointAverageVec3(newBox.corners.map(function (x) {
    return _Math_Vec3__WEBPACK_IMPORTED_MODULE_11__["default"].of(x);
  }));
  newBox.position = average.toArray();
  newBox.corners = newBox.corners.map(function (x) {
    return _Math_Vec3__WEBPACK_IMPORTED_MODULE_11__["default"].of(x).sub(average).toArray();
  }); // average in parent coord

  var rotMat3 = _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_10__["default"].getRotationMatrix(mesh);
  var scaleVec3 = _Math_Vec3__WEBPACK_IMPORTED_MODULE_11__["default"].ofBabylon(mesh.scaling);
  var averageInParentCoord = rotMat3.prodVec(average.mul(scaleVec3)).toBabylon();
  var newMesh = createBoxRegionMesh(newBox, mesh.name, scene);
  newMesh.parent = mesh.parent;
  newMesh.rotationQuaternion = mesh.rotationQuaternion;
  newMesh.position = averageInParentCoord.add(mesh.position);
  newMesh.material = mesh.material;
  newMesh.visibility = mesh.visibility;
  newMesh.getMouseContextActions = mesh.getMouseContextActions;
  newMesh.nodeItem = mesh.nodeItem;
  newMesh.observers = mesh.observers;

  if (!!mesh.graphVertex) {
    newMesh.graphVertex = mesh.graphVertex;
    newMesh.graphVertex.vertex.mesh = newMesh;
  }

  item.mesh = newMesh;
  item.corners = newBox.corners;

  var childrenCopy = _babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default()(mesh._children);

  childrenCopy.forEach(function (c) {
    c.parent = newMesh;
  });
  item.keyPoints.forEach(function (k, j) {
    var saveZ = k.position.z;
    k.position = _Math_Vec3__WEBPACK_IMPORTED_MODULE_11__["default"].of(newBox.corners[j]).toBabylon();
    k.position.z = saveZ;
  }); // dispose old mesh

  mesh.dispose();
}

var getKeyPointObserverFunction = function getKeyPointObserverFunction(mainView, scene) {
  return function (_ref) {
    var updatedPointMesh = _ref.updatedPointMesh,
        is2updateServer = _ref.is2updateServer;
    mainView.getNodeFromTree(updatedPointMesh.parent.name).forEach(function (boxRegionTreeNode) {
      var index = updatedPointMesh.index;
      var item = boxRegionTreeNode.item;
      var mesh = item.mesh;
      var name = mesh.name;
      var newBox = {
        position: _Math_Vec3__WEBPACK_IMPORTED_MODULE_11__["default"].ofBabylon(mesh.position).toArray(),
        corners: item.corners
      };
      newBox.corners[index] = [updatedPointMesh.position.x, updatedPointMesh.position.y, newBox.corners[index][2]];
      createNewMeshFromOldUsingNewBox(newBox, scene, mesh, item);
      mainView.addGizmo2Name();

      if (is2updateServer) {
        mainView.updateNodeInServer(name);
        mainView.getNodeFromTree(name).forEach(function (node) {
          mainView.setProperties(node.item.toForm());
        });
      } // signal box region observers


      monet__WEBPACK_IMPORTED_MODULE_12__["Maybe"].fromNull(item.mesh.observers).forEach(function (obs) {
        obs.notifyObservers({
          updatedPointMesh: item.mesh,
          is2updateServer: is2updateServer,
          displacement: _babylonjs_core__WEBPACK_IMPORTED_MODULE_14__["Vector3"].Zero()
        });
      });
      monet__WEBPACK_IMPORTED_MODULE_12__["Maybe"].fromNull(item.mesh.graphVertex).forEach(function (_ref2) {
        var vertexObs = _ref2.vertexObs;
        vertexObs({
          updatedPointMesh: item.mesh,
          is2updateServer: is2updateServer,
          displacement: _babylonjs_core__WEBPACK_IMPORTED_MODULE_14__["Vector3"].Zero()
        });
      });
    });
  };
};

var createPlaceHolderKeyPoints = function createPlaceHolderKeyPoints(scene, corners, boxRegionMesh, mainView) {
  var keyPoints = [];
  var maxHeight = corners.reduce(function (max, x) {
    return Math.max(max, x.z);
  }, Number.MIN_VALUE);
  corners.forEach(function (corner, i) {
    var p = corner;
    var keyPoint = _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_10__["default"].createSphere(scene, new _babylonjs_core__WEBPACK_IMPORTED_MODULE_14__["Color3"](0.25, 0.25, 0.25), RADIUS, "".concat(boxRegionMesh.name, "keyPoint").concat(i), true);
    keyPoint.parent = boxRegionMesh;
    keyPoint.position = p;
    keyPoint.position.z = maxHeight;
    keyPoint.index = i;
    keyPoint.observers = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_14__["Observable"]();
    keyPoint.observers.add(getKeyPointObserverFunction(mainView, scene));
    keyPoints.push(keyPoint);
  });
  return keyPoints;
};

var VISIBILITY = 0.25;
/* harmony default export */ __webpack_exports__["default"] = (BoxRegion);

/***/ }),

/***/ "./src/Components/Viewer/NodeItem/GlobalRef.js":
/*!*****************************************************!*\
  !*** ./src/Components/Viewer/NodeItem/GlobalRef.js ***!
  \*****************************************************/
/*! exports provided: ROS_ORIGIN, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ROS_ORIGIN", function() { return ROS_ORIGIN; });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "@babel/runtime/helpers/esm/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "@babel/runtime/helpers/esm/createClass");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/assertThisInitialized */ "@babel/runtime/helpers/esm/assertThisInitialized");
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/get */ "@babel/runtime/helpers/esm/get");
/* harmony import */ var _babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "@babel/runtime/helpers/esm/inherits");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "@babel/runtime/helpers/esm/possibleConstructorReturn");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "@babel/runtime/helpers/esm/getPrototypeOf");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "@babel/runtime/helpers/esm/defineProperty");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _NodeItem__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./NodeItem */ "./src/Components/Viewer/NodeItem/NodeItem.js");
/* harmony import */ var _Math_Vec3__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../Math/Vec3 */ "./src/Components/Viewer/Math/Vec3.js");
/* harmony import */ var _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../Util3d/Util3d */ "./src/Components/Viewer/Util3d/Util3d.js");
/* harmony import */ var monet__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! monet */ "monet");
/* harmony import */ var monet__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(monet__WEBPACK_IMPORTED_MODULE_11__);
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @babylonjs/core */ "@babylonjs/core");
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(_babylonjs_core__WEBPACK_IMPORTED_MODULE_12__);









function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6___default()(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6___default()(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5___default()(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }





 // ROS/RVIZ default referential

var THETA = -Math.PI / 2;
var ROS_ORIGIN = {
  position: [0, 0, 0],
  scaling: [1, -1, 1],
  quaternion: [Math.cos(THETA / 2), Math.sin(THETA / 2), 0, 0]
};

var GlobalRef = /*#__PURE__*/function (_NodeItem) {
  _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4___default()(GlobalRef, _NodeItem);

  var _super = _createSuper(GlobalRef);

  function GlobalRef(mesh) {
    var _this;

    var keyValueMap = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

    _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default()(this, GlobalRef);

    _this = _super.call(this, mesh, keyValueMap);

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default()(_this), "getType", function () {
      return GlobalRef.TYPE;
    });

    return _this;
  }

  _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1___default()(GlobalRef, [{
    key: "toForm",
    value: function toForm() {
      var form = _babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_3___default()(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6___default()(GlobalRef.prototype), "toForm", this).call(this);

      form.uiSchema.name = {
        "ui:disabled": true
      };
      return form;
    }
  }, {
    key: "getMouseContextActions",
    value: function getMouseContextActions() {
      return [];
    }
  }], [{
    key: "ofDict",
    value: function ofDict(scene) {
      var dict = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
      var mainView = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;
      var rosOrigin = GlobalRef.getRosOrigin(scene);
      var globalRefMesh = _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_10__["default"].referentialBuilder(scene).name(GlobalRef.NAME).isPickable(true).boxParams({
        isVisible: true,
        size: 0.25
      }).build();
      globalRefMesh.parent = rosOrigin;
      _NodeItem__WEBPACK_IMPORTED_MODULE_8__["default"].mapDict2Mesh(dict, globalRefMesh);
      return new GlobalRef(globalRefMesh, monet__WEBPACK_IMPORTED_MODULE_11__["Maybe"].fromNull(dict).flatMap(function (d) {
        return monet__WEBPACK_IMPORTED_MODULE_11__["Maybe"].fromNull(d.keyValueMap);
      }).orUndefined());
    }
  }, {
    key: "getRosOrigin",
    value: function getRosOrigin(scene) {
      var rosOrigin = _babylonjs_core__WEBPACK_IMPORTED_MODULE_12__["MeshBuilder"].CreateBox("ROS_ORIGIN", {
        size: 1e-3
      }, scene);
      rosOrigin.isVisible = false;
      rosOrigin.isPickable = false;
      rosOrigin.position = _Math_Vec3__WEBPACK_IMPORTED_MODULE_9__["default"].of(ROS_ORIGIN.position).toBabylon();
      rosOrigin.scaling = _Math_Vec3__WEBPACK_IMPORTED_MODULE_9__["default"].of(ROS_ORIGIN.scaling).toBabylon();
      var quaternion = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_12__["Quaternion"](ROS_ORIGIN.quaternion[1], ROS_ORIGIN.quaternion[2], ROS_ORIGIN.quaternion[3], ROS_ORIGIN.quaternion[0]);
      rosOrigin.rotationQuaternion = quaternion.normalize();
      return rosOrigin;
    }
    /**
     *
     * @param {*} x: Babylon Vector3 in World coordinates
     *
     * returns Babylon Vector3 vector in ROS coordinates
     */

  }, {
    key: "inverseCoordinates",
    value: function inverseCoordinates(x) {
      /**
       * Solves RS\eta + p = x
       *
       * \eta = S^(1)R^T(x-p)
       */
      var quaternion = ROS_ORIGIN.quaternion;
      var rotationMatrix = _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_10__["default"].getRotationMatrix({
        rotationQuaternion: new _babylonjs_core__WEBPACK_IMPORTED_MODULE_12__["Quaternion"](quaternion[1], quaternion[2], quaternion[3], quaternion[0])
      });
      var scaling = _Math_Vec3__WEBPACK_IMPORTED_MODULE_9__["default"].of(ROS_ORIGIN.scaling).map(function (z) {
        return 1 / z;
      });
      var pos = _Math_Vec3__WEBPACK_IMPORTED_MODULE_9__["default"].of(ROS_ORIGIN.position);
      var result = scaling.mul(rotationMatrix.dotVec(_Math_Vec3__WEBPACK_IMPORTED_MODULE_9__["default"].ofBabylon(x).sub(pos)));
      return result.map(function (z) {
        return Math.abs(z) < 1e-5 ? 0 : z;
      }).toBabylon();
    }
    /**
     *
     * @param {*} x: Babylon Vector3 in ROS coordinates
     *
     * returns Babylon Vector3 vector in World coordinates
     */

  }, {
    key: "forwardCoordinates",
    value: function forwardCoordinates(x) {
      /**
       * computes RS\eta + p = x
       */
      var quaternion = ROS_ORIGIN.quaternion;
      var rotationMatrix = _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_10__["default"].getRotationMatrix({
        rotationQuaternion: new _babylonjs_core__WEBPACK_IMPORTED_MODULE_12__["Quaternion"](quaternion[1], quaternion[2], quaternion[3], quaternion[0])
      });
      var scaling = _Math_Vec3__WEBPACK_IMPORTED_MODULE_9__["default"].of(ROS_ORIGIN.scaling);
      var pos = _Math_Vec3__WEBPACK_IMPORTED_MODULE_9__["default"].of(ROS_ORIGIN.position);
      var result = rotationMatrix.prodVec(scaling.mul(_Math_Vec3__WEBPACK_IMPORTED_MODULE_9__["default"].ofBabylon(x))).add(pos);
      return result.map(function (z) {
        return Math.abs(z) < 1e-5 ? 0 : z;
      }).toBabylon();
    }
  }]);

  return GlobalRef;
}(_NodeItem__WEBPACK_IMPORTED_MODULE_8__["default"]);

_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7___default()(GlobalRef, "TYPE", "GlobalRef");

_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7___default()(GlobalRef, "NAME", "Global ref");

/* harmony default export */ __webpack_exports__["default"] = (GlobalRef);

/***/ }),

/***/ "./src/Components/Viewer/NodeItem/GraphItem.js":
/*!*****************************************************!*\
  !*** ./src/Components/Viewer/NodeItem/GraphItem.js ***!
  \*****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/slicedToArray */ "@babel/runtime/helpers/esm/slicedToArray");
/* harmony import */ var _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/toConsumableArray */ "@babel/runtime/helpers/esm/toConsumableArray");
/* harmony import */ var _babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/extends */ "@babel/runtime/helpers/esm/extends");
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "@babel/runtime/helpers/esm/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "@babel/runtime/helpers/esm/createClass");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/assertThisInitialized */ "@babel/runtime/helpers/esm/assertThisInitialized");
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/esm/get */ "@babel/runtime/helpers/esm/get");
/* harmony import */ var _babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "@babel/runtime/helpers/esm/inherits");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "@babel/runtime/helpers/esm/possibleConstructorReturn");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "@babel/runtime/helpers/esm/getPrototypeOf");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "@babel/runtime/helpers/esm/defineProperty");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var _NodeItem__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./NodeItem */ "./src/Components/Viewer/NodeItem/NodeItem.js");
/* harmony import */ var _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../Util3d/Util3d */ "./src/Components/Viewer/Util3d/Util3d.js");
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @babylonjs/core */ "@babylonjs/core");
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(_babylonjs_core__WEBPACK_IMPORTED_MODULE_13__);
/* harmony import */ var _Utils_Constants__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../Utils/Constants */ "./src/Components/Viewer/Utils/Constants.js");
/* harmony import */ var _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @babylonjs/core/Maths/math */ "@babylonjs/core/Maths/math");
/* harmony import */ var _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(_babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_15__);
/* harmony import */ var _Graph_Graph__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../Graph/Graph */ "./src/Components/Viewer/Graph/Graph.js");
/* harmony import */ var _Math_Vec3__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../Math/Vec3 */ "./src/Components/Viewer/Math/Vec3.js");
/* harmony import */ var monet__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! monet */ "monet");
/* harmony import */ var monet__WEBPACK_IMPORTED_MODULE_18___default = /*#__PURE__*/__webpack_require__.n(monet__WEBPACK_IMPORTED_MODULE_18__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_19___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_19__);
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! lodash/get */ "lodash/get");
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_20___default = /*#__PURE__*/__webpack_require__.n(lodash_get__WEBPACK_IMPORTED_MODULE_20__);
/* harmony import */ var mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! mov-fe-lib-core */ "mov-fe-lib-core");
/* harmony import */ var mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_21___default = /*#__PURE__*/__webpack_require__.n(mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_21__);
/* harmony import */ var _Path__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./Path */ "./src/Components/Viewer/NodeItem/Path.js");
/* harmony import */ var _KeyPoint__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./KeyPoint */ "./src/Components/Viewer/NodeItem/KeyPoint.js");












function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_10___default()(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_9___default()(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_9___default()(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_8___default()(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }














/**
 * One graph per scene
 */

var GraphItem = /*#__PURE__*/function (_NodeItem) {
  _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_7___default()(GraphItem, _NodeItem);

  var _super = _createSuper(GraphItem);

  function GraphItem(scene, mainView) {
    var _this;

    var _name = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : GraphItem.NAME;

    var keyValueMap = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};

    _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3___default()(this, GraphItem);

    var sceneId = scene.getUniqueId(); // super() must be called before using _this_.

    if (sceneId in graphItemInstances && !graphItemInstances[sceneId].mesh.isDisposed()) {
      return _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_8___default()(_this, graphItemInstances[sceneId]);
    }

    var graphPlaceHolder = getGraphPlaceHolder(scene, _name);

    graphPlaceHolder.onClick = function () {
      return _this.graphFormMapper = _this.getDefaultFormMapper();
    };

    _this = _super.call(this, graphPlaceHolder, keyValueMap);

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_10___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5___default()(_this), "getType", function () {
      return GraphItem.TYPE;
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_10___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5___default()(_this), "getEdgeMouseCtxActions", function (edgeMesh) {
      return function () {
        return [{
          title: "Delete",
          onClick: _this.getUndoDeleteEdgeLineAction(edgeMesh)
        }];
      };
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_10___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5___default()(_this), "onDeleteEdgeLine", function (edgeMesh) {
      return function () {
        _this.mainView.confirmationAlert({
          title: "Confirm to delete",
          message: "Are you sure you want to delete this edge?",
          onConfirm: _this.getUndoDeleteEdgeLineAction(edgeMesh)
        });
      };
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_10___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5___default()(_this), "getUndoDeleteEdgeLineAction", function (edgeMesh) {
      return function () {
        return _this.mainView.getUndoManager().doIt(_this.getUndoDeleteEdge(edgeMesh));
      };
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_10___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5___default()(_this), "getEdgeObs", function () {
      return function (_ref) {
        var updatedPointMesh = _ref.updatedPointMesh,
            is2updateServer = _ref.is2updateServer,
            displacement = _ref.displacement;
        var v = _Math_Vec3__WEBPACK_IMPORTED_MODULE_17__["default"].ofBabylon(displacement);
        var vLocal = _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_12__["default"].getLocalCoordFromWorld(_this.mesh, v, false);
        updatedPointMesh.position = updatedPointMesh.position.add(vLocal.scale(-1).toBabylon());

        if (is2updateServer) {
          _this.graphFormMapper = _this.getToFormEdge(updatedPointMesh);

          _this.mainView.setProperties(_this.toForm());
        }
      };
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_10___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5___default()(_this), "getOnClickEdge", function (edgeMesh) {
      return function () {
        var actions = [];
        actions.push({
          icon: function icon(props) {
            return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_19___default.a.createElement("i", _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_2___default()({
              className: "fas fa-trash"
            }, props));
          },
          action: function action() {
            _this.mainView.getUndoManager().doIt(_this.getUndoDeleteEdge(edgeMesh));
          },
          name: "Delete Edge [Del]"
        });

        _this.mainView.setContextActions(actions);
      };
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_10___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5___default()(_this), "isMeshBelong2Path", function (_ref2) {
      var parent = _ref2.parent;
      return _this.mainView.getNodeFromTree(parent === null || parent === void 0 ? void 0 : parent.name).filter(function (_ref3) {
        var item = _ref3.item;
        return item.getType() === _Path__WEBPACK_IMPORTED_MODULE_22__["default"].TYPE;
      }).orSome(false);
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_10___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5___default()(_this), "getMeshName", function (mesh) {
      return _this.isMeshBelong2Path(mesh) ? mesh.parent.name : mesh.name;
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_10___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5___default()(_this), "exportBelongToData", function (mesh) {
      var _mesh$parent;

      var index = mesh.index,
          name = mesh.name;

      if (index === null || index === undefined) {
        return {
          name: name
        };
      } // if mesh has index, then it must be a path or polygon


      return _this.mainView.getNodeFromTree(mesh === null || mesh === void 0 ? void 0 : (_mesh$parent = mesh.parent) === null || _mesh$parent === void 0 ? void 0 : _mesh$parent.name).map(function (_ref4) {
        var item = _ref4.item;
        return {
          name: item.name,
          index: index > 0 ? -1 : index
        };
      }).orUndefined();
    });

    graphItemInstances[sceneId] = _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5___default()(_this); // object properties

    _this.graph = new _Graph_Graph__WEBPACK_IMPORTED_MODULE_16__["default"]();
    _this.scene = scene;
    _this.mainView = mainView;
    _this.meshByEdgeId = {};
    _this.graphFormMapper = _this.getDefaultFormMapper();
    _this.vertexGenerator = 0;
    return _this;
  }

  _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_4___default()(GraphItem, [{
    key: "toDict",
    value: function toDict() {
      var _this2 = this;

      var dict = _babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_6___default()(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_9___default()(GraphItem.prototype), "toDict", this).call(this);

      var graph = this.graph;

      var vertices = _objectSpread({}, graph.getVertices());

      var edges = _objectSpread({}, graph.getEdges());

      Object.keys(vertices).forEach(function (k) {
        graph.getVertex(k).forEach(function (_ref5) {
          var vertexData = _ref5.data;
          vertices[k] = {
            position: _Math_Vec3__WEBPACK_IMPORTED_MODULE_17__["default"].ofBabylon(vertexData.position).toArray(),
            id: String(k)
          };
        });
      }); // export directed graph

      Object.keys(edges).forEach(function (k) {
        var ids = _Graph_Graph__WEBPACK_IMPORTED_MODULE_16__["default"].key2Edge(k);
        graph.getEdge.apply(graph, _babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default()(ids)).forEach(function (_ref6) {
          var edgeData = _ref6.data;

          var _ids$map = ids.map(function (x) {
            return Number(x);
          }),
              _ids$map2 = _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_ids$map, 2),
              i = _ids$map2[0],
              j = _ids$map2[1];

          var edgeMesh = edgeData.edge.map(function (_ref7) {
            var mesh = _ref7.mesh;
            return mesh;
          });

          var _edgeMesh = _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(edgeMesh, 2),
              belongsSrcMesh = _edgeMesh[0],
              belongsTrgMesh = _edgeMesh[1];

          edges[k] = {
            ids: ids,
            keyValueMap: edgeData.keyValueMap,
            weight: edgeData.weight,
            belongsSrc: i < j ? _this2.exportBelongToData(belongsSrcMesh) : _this2.exportBelongToData(belongsTrgMesh),
            belongsTrg: i < j ? _this2.exportBelongToData(belongsTrgMesh) : _this2.exportBelongToData(belongsSrcMesh)
          };

          if (_this2.doMeshesBelong2SamePath.apply(_this2, _babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default()(edgeMesh))) {
            if (i > j) {
              // remove edge if belongs to same path and i > j
              delete edges[k];
            }
          } else {
            if (_this2.checkInvalidEdges.apply(_this2, _babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default()(edgeMesh).concat([edges[k]]))) {
              // remove edge if is invalid edge
              delete edges[k];
            }
          }
        });
      });
      dict["vertices"] = vertices;
      dict["edges"] = edges;
      return dict;
    }
  }, {
    key: "toForm",
    value: function toForm() {
      var form = _babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_6___default()(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_9___default()(GraphItem.prototype), "toForm", this).call(this);

      delete form.jsonSchema.properties.position;
      delete form.jsonSchema.properties.rotation;
      delete form.jsonSchema.properties.color;
      delete form.uiSchema.position;
      delete form.uiSchema.rotation;
      delete form.uiSchema.color;
      delete form.data.position;
      delete form.data.rotation;
      delete form.data.color;
      return this.graphFormMapper.toForm(form);
    }
  }, {
    key: "ofForm",
    value: function ofForm(form) {
      this.name = form.name;
      this.mesh.name = form.name;
      this.graphFormMapper.ofForm(form);
    }
  }, {
    key: "getDefaultFormMapper",
    value: function getDefaultFormMapper() {
      var _this3 = this;

      return {
        toForm: function toForm(form) {
          return form;
        },
        ofForm: function ofForm(form) {
          return _this3.keyValueMap = _objectSpread({}, form.annotations);
        }
      };
    }
  }, {
    key: "getToFormEdge",
    value: function getToFormEdge(edgeMesh) {
      var graph = this.graph;
      return {
        toForm: function toForm(form) {
          return graph.getEdge.apply(graph, _babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default()(edgeMesh.edgeIndexes)).map(function (_ref8) {
            var edgeData = _ref8.data;
            form.jsonSchema.properties["weight"] = {
              type: "number",
              title: "Weight"
            };
            form.data["weight"] = edgeData.weight;
            _NodeItem__WEBPACK_IMPORTED_MODULE_11__["default"].setAnnotations2Form(form, edgeData.keyValueMap);
            form.jsonSchema.properties["annotations"].title = "Annotations Edge ".concat(edgeMesh.edgeIndexes);
            return form;
          }).orSome(form);
        },
        ofForm: function ofForm(form) {
          var edgeIndexes = edgeMesh.edgeIndexes;
          graph.getEdge.apply(graph, _babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default()(edgeIndexes)).forEach(function (_ref9) {
            var edgeData = _ref9.data;
            edgeData.keyValueMap = _objectSpread({}, lodash_get__WEBPACK_IMPORTED_MODULE_20___default()(form, "annotations", {}));
            edgeData.weight = Number.parseFloat(form.weight);
          });
        }
      };
    }
    /**
     * @override nodeItem delVertex()
     * Delete all vertex from tree nodes
     */

  }, {
    key: "delVertex",
    value: function delVertex() {
      // Iterate though all nodes under the root node and delete its vertexes
      var root = this.mainView.getRootNode();
      this.delVertexRecursively(root === null || root === void 0 ? void 0 : root.children);
    } //========================================================================================

    /*                                                                                      *
     *                                   Graph Operations                                   *
     *                                                                                      */
    //========================================================================================

    /**
     *
     * @param {*} iMesh: Mesh vertex
     * @param {*} jMesh: Mesh vertex
     * @param {*} edgeIndexes: Array<Integer>
     */

  }, {
    key: "addEdge",
    value: function addEdge(iMesh, jMesh) {
      var edgeIndexes = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];

      var _edgeIndexes = _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(edgeIndexes, 2),
          iIndex = _edgeIndexes[0],
          jIndex = _edgeIndexes[1];

      if (this.hasEdge(iMesh, jMesh)) return;
      this.buildVertex(iMesh, iIndex);
      this.buildVertex(jMesh, jIndex);
      this.buildEdge(iMesh, jMesh);
      return this;
    }
  }, {
    key: "getEdge",
    value: function getEdge(iMesh, jMesh) {
      var graph = this.graph;

      var _map = [iMesh, jMesh].map(this.getVertexIdFromMesh),
          _map2 = _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_map, 2),
          i = _map2[0],
          j = _map2[1]; // if it has an edge


      return graph.getEdge(i, j).map(function (_ref10) {
        var data = _ref10.data;
        return data;
      });
    }
  }, {
    key: "delEdge",
    value: function delEdge(iMesh, jMesh) {
      var _this4 = this;

      var graph = this.graph;

      var _map3 = [iMesh, jMesh].map(this.getVertexIdFromMesh),
          _map4 = _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_map3, 2),
          i = _map4[0],
          j = _map4[1]; // if it has an edge


      graph.getEdge(i, j).forEach(function (_ref11) {
        var edgeData = _ref11.data;
        var ijKey = _Graph_Graph__WEBPACK_IMPORTED_MODULE_16__["default"].edgeKey(i, j);
        var jiKey = _Graph_Graph__WEBPACK_IMPORTED_MODULE_16__["default"].edgeKey(j, i);
        monet__WEBPACK_IMPORTED_MODULE_18__["Maybe"].fromNull(_this4.meshByEdgeId[ijKey]).forEach(function (mesh) {
          mesh.dispose();
          delete _this4.meshByEdgeId[ijKey];
          delete _this4.meshByEdgeId[jiKey];
        });
        graph.delEdge(i, j);
      }); // Reset right menu to display scene details

      this.mainView.setProperties();
    }
    /**
     *
     * @param {*} iMesh: Mesh
     * @param {*} jMesh: Mesh
     */

  }, {
    key: "hasEdge",
    value: function hasEdge(iMesh, jMesh) {
      var _map5 = [iMesh, jMesh].map(this.getVertexIdFromMesh),
          _map6 = _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_map5, 2),
          i = _map6[0],
          j = _map6[1];

      return this.graph.hasEdge(i, j);
    }
  }, {
    key: "delVertexFromMesh",
    value: function delVertexFromMesh(iMesh) {
      var _this5 = this;

      var is2updateServer = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;
      var graph = this.graph;
      var i = this.getVertexIdFromMesh(iMesh);
      graph.getVertex(i).forEach(function (_) {
        // if vertex found delete neighbors
        var neighbors = graph.getNeighbors(i);
        neighbors.map(function (j) {
          return graph.getVertex(j);
        }).forEach(function (maybeV) {
          return maybeV.forEach(function (_ref12) {
            var vertexData = _ref12.data;
            var jMesh = vertexData.mesh;

            _this5.delEdge(iMesh, jMesh);
          });
        }); // delete itself

        graph.delVertex(i);
        iMesh.graphVertex = undefined;
        if (is2updateServer) _this5.mainView.updateNodeInServer(_this5.name);
      });
    }
    /**
     *
     * @param {*} iMesh
     * @returns {*} Maybe<Vertex>
     */

  }, {
    key: "getVertex",
    value: function getVertex(iMesh) {
      var graph = this.graph;
      var i = this.getVertexIdFromMesh(iMesh);
      return graph.getVertex(i).map(function (_ref13) {
        var data = _ref13.data;
        return data;
      });
    }
    /**
     *
     * @param {*} iMesh
     * @returns {*} Array<Vertex>
     */

  }, {
    key: "getNeighbors",
    value: function getNeighbors(iMesh) {
      var graph = this.graph;
      var i = this.getVertexIdFromMesh(iMesh);
      return graph.getNeighbors(i).map(function (id) {
        return graph.getVertex(id).orNull();
      }).map(function (_ref14) {
        var data = _ref14.data;
        return data;
      }).filter(function (x) {
        return !!x;
      });
    }
  }, {
    key: "doMeshesBelong2SamePath",
    value: function doMeshesBelong2SamePath(iMesh, jMesh) {
      var _iMesh$parent, _jMesh$parent;

      var iParentNodeItem = iMesh === null || iMesh === void 0 ? void 0 : (_iMesh$parent = iMesh.parent) === null || _iMesh$parent === void 0 ? void 0 : _iMesh$parent.nodeItem;
      var jParentNodeItem = jMesh === null || jMesh === void 0 ? void 0 : (_jMesh$parent = jMesh.parent) === null || _jMesh$parent === void 0 ? void 0 : _jMesh$parent.nodeItem;
      return !!iParentNodeItem && !!jParentNodeItem && iParentNodeItem.name === jParentNodeItem.name && iParentNodeItem.getType() === _Path__WEBPACK_IMPORTED_MODULE_22__["default"].TYPE && jParentNodeItem.getType() === _Path__WEBPACK_IMPORTED_MODULE_22__["default"].TYPE;
    } //========================================================================================

    /*                                                                                      *
     *                                    Private Methods                                   *
     *                                                                                      */
    //========================================================================================

    /**
     *
     * @param {*} id: vertex to be updated id
     * @param {*} newPosition: Vector3, new vertex position
     * @param {*} is2updateServer: is to update in server boolean var
     * @param {*} protectEdge: Pair<Int> with vertex indices
     */

  }, {
    key: "updateVertexPosition",
    value: function updateVertexPosition(id, newPosition) {
      var _this6 = this;

      var is2updateServer = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;
      var graph = this.graph;
      graph.getVertex(id).forEach(function (_ref15) {
        var vertexData = _ref15.data;
        vertexData.position = newPosition;
      });
      graph.getNeighbors(id).forEach(function (j) {
        var i = id;
        var edgeKey = _Graph_Graph__WEBPACK_IMPORTED_MODULE_16__["default"].edgeKey(i, j);
        _this6.meshByEdgeId[edgeKey] && _this6.meshByEdgeId[edgeKey].dispose();
        graph.getEdge(i, j).forEach(function (_ref16) {
          var edgeData = _ref16.data;

          var _edgeData$edge = _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(edgeData.edge, 2),
              iData = _edgeData$edge[0],
              jData = _edgeData$edge[1];

          _this6.buildEdge(iData.mesh, jData.mesh);
        });
        if (is2updateServer) _this6.mainView.updateNodeInServer(_this6.name);
      });
    }
    /**
     * Get edge directions from meshes
     * @param {Array} ids : Array with vertexes ids
     * @returns {Integer} should return always one of the following
     *  +1  -> if target id is greater than source
     *  0   -> if ids is not provided
     *  -1  -> if source id is greater than target
     */

  }, {
    key: "getDirectionFromMeshes",
    value: function getDirectionFromMeshes(iMesh, jMesh) {
      if (GraphItem.isInvalidEdge(iMesh, jMesh, true)) return 0;
      var vertexI = this.getVertexIdFromMesh(iMesh);
      var vertexJ = this.getVertexIdFromMesh(jMesh);

      var _map7 = [vertexI, vertexJ].map(function (x) {
        return Number(x);
      }),
          _map8 = _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_map7, 2),
          i = _map8[0],
          j = _map8[1];

      return (j - i) / Math.abs(j - i);
    } //========================================================================================

    /*                                                                                      *
     *                                    Private Methods                                   *
     *                                                                                      */
    //========================================================================================

    /**
     * Delete vertex from nodeTree children
     * @param {*} nodeTree: List of nodes (initially root.children)
     */

  }, {
    key: "delVertexRecursively",
    value: function delVertexRecursively() {
      var _this7 = this;

      var nodeTree = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];
      nodeTree.forEach(function (node) {
        if (node.item.getType() !== GraphItem.TYPE) {
          node.item.delVertex();

          _this7.delVertexRecursively(node.children);
        }
      });
    }
    /**
     *
     * @param {*} mesh: Mesh
     * @returns Integer| Undefined
     */

  }, {
    key: "getVertexIdFromMesh",
    value: function getVertexIdFromMesh(mesh) {
      var _mesh$graphVertex, _mesh$graphVertex$ver;

      return mesh === null || mesh === void 0 ? void 0 : (_mesh$graphVertex = mesh.graphVertex) === null || _mesh$graphVertex === void 0 ? void 0 : (_mesh$graphVertex$ver = _mesh$graphVertex.vertex) === null || _mesh$graphVertex$ver === void 0 ? void 0 : _mesh$graphVertex$ver.id;
    }
    /**
     *
     * @param {*} vertexMesh: Mesh
     * @param {*} vertexIndex: integer representing index of vertex (can be undefined)
     *
     */

  }, {
    key: "buildVertex",
    value: function buildVertex(vertexMesh, vertexIndex) {
      var _this8 = this;

      // test if vertexMesh already exists in the graph
      var vId = this.getVertexIdFromMesh(vertexMesh);
      var maybeVertex = this.graph.getVertex(vId);
      maybeVertex.orElseRun(function () {
        // if vertex doesn't exist
        var id = vertexIndex ? vertexIndex : _this8.vertexGenerator++;

        _this8.graph.addVertex(id);

        _this8.graph.getVertex(id).forEach(function (vertex) {
          vertex.data = VertexData.builder()(id, vertexMesh);

          _this8.addObs2VertexMesh(vertex.data);
        });
      });
    }
    /**
     *
     * @param {*} vData: VertexData
     */

  }, {
    key: "addObs2VertexMesh",
    value: function addObs2VertexMesh(vData) {
      var _this9 = this;

      var mesh = vData.mesh;

      if (mesh !== undefined) {
        mesh.graphVertex = {
          vertex: vData,
          delVertex: function delVertex() {
            return _this9.delVertexFromMesh(mesh);
          },
          vertexObs: this.getVertexMeshObs(vData)
        };
      }
    }
    /**
     *
     * @param {*} vertexData: VertexData
     */

  }, {
    key: "getVertexMeshObs",
    value: function getVertexMeshObs(vertexData) {
      var _this10 = this;

      return function (_ref17) {
        var updatedPointMesh = _ref17.updatedPointMesh,
            is2updateServer = _ref17.is2updateServer,
            _ = _ref17._;
        if (updatedPointMesh.isDisposed()) return;
        var newPos = _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_12__["default"].getGlobalCoordinates(updatedPointMesh, updatedPointMesh.position).toBabylon();

        _this10.updateVertexPosition(vertexData.id, newPos, is2updateServer);
      };
    }
    /**
     *
     * @param {*} iMesh: Mesh
     * @param {*} jMesh: Mesh
     * @param {*} edgeMeshes: Array<Mesh>
     */

  }, {
    key: "buildEdge",
    value: function buildEdge(iMesh, jMesh) {
      var _this11 = this;

      var graph = this.graph; // need to sort edge numbers because is undirected graph

      var _map$sort = [iMesh, jMesh].map(this.getVertexIdFromMesh).sort(function (a, b) {
        return a - b;
      }),
          _map$sort2 = _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_map$sort, 2),
          i = _map$sort2[0],
          j = _map$sort2[1]; // reason here: https://stackoverflow.com/questions/15084070/is-this-a-bug-in-array-sort


      graph.addEdge(i, j);
      graph.getVertex(i).forEach(function (_ref18) {
        var iVertexD = _ref18.data;
        return graph.getVertex(j).forEach(function (_ref19) {
          var jVertexD = _ref19.data;
          graph.getEdge(i, j).forEach(function (edge) {
            if (!edge.data) {
              edge.data = new EdgeData(iVertexD, jVertexD);
            } else {
              edge.data.edge = [iVertexD, jVertexD];
            }
          }); // if vertices belong to same path don't build mesh

          if (!_this11.doMeshesBelong2SamePath(iMesh, jMesh)) {
            // Get edge forward/backward directions
            var forwardDirection = _this11.getDirectionFromMeshes(iMesh, jMesh);

            var backwardDirection = _this11.getDirectionFromMeshes(jMesh, iMesh);

            var direction = forwardDirection + backwardDirection;

            var edgeMesh = _this11.getEdgeMesh(iVertexD, jVertexD, direction);

            _this11.meshByEdgeId[_Graph_Graph__WEBPACK_IMPORTED_MODULE_16__["default"].edgeKey(i, j)] = edgeMesh;
            _this11.meshByEdgeId[_Graph_Graph__WEBPACK_IMPORTED_MODULE_16__["default"].edgeKey(j, i)] = edgeMesh;
          }
        });
      });
    }
  }, {
    key: "getEdgeMesh",
    value: function getEdgeMesh(iVertexD, jVertexD) {
      var direction = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;
      var edgeInGlobal = [iVertexD, jVertexD].map(function (_ref20) {
        var mesh = _ref20.mesh;
        return _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_12__["default"].getGlobalCoord(mesh, mesh.position);
      });
      var edgeMesh = GraphItem.getEdgeMesh(this.scene, edgeInGlobal, "edgeMesh".concat(iVertexD.id, "_").concat(jVertexD.id), _babylonjs_core__WEBPACK_IMPORTED_MODULE_13__["Color3"].Yellow());
      edgeMesh.visibility = 0.99;
      edgeMesh.material = GraphItem.getEdgeMaterial(this.scene, {
        speed: 8 * direction
      });
      edgeMesh.parent = this.mesh;
      edgeMesh.edgeIndexes = [iVertexD, jVertexD].map(function (_ref21) {
        var id = _ref21.id;
        return id;
      });
      edgeMesh.getMouseContextActions = this.getEdgeMouseCtxActions(edgeMesh);
      edgeMesh.onDel = this.onDeleteEdgeLine(edgeMesh);
      this.addObserver2EdgeMesh(edgeMesh);
      this.addOnClickEdge(edgeMesh);
      return edgeMesh;
    }
    /**
     *
     * @param {*} edgeMesh: Mesh
     * @returns: () => Array<{title: String, onClick: () => {}}>
     */

  }, {
    key: "addObserver2EdgeMesh",
    value:
    /**
     *
     * @param {*} edgeMesh: Mesh
     */
    function addObserver2EdgeMesh(edgeMesh) {
      edgeMesh.observers = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_13__["Observable"]();
      edgeMesh.observers.add(this.getEdgeObs());
    }
    /**
     * @returns ({updatedPointMesh: Mesh, is2updateServer: Boolean, displacement: Vector3}) => {}
     */

  }, {
    key: "addOnClickEdge",
    value:
    /**
     *
     * @param {*} edgeMesh: Mesh
     */
    function addOnClickEdge(edgeMesh) {
      edgeMesh.onClick = this.getOnClickEdge(edgeMesh);
    }
  }, {
    key: "getUndoDeleteEdge",
    value: function getUndoDeleteEdge(edgeMesh) {
      var graph = this.graph;
      var edgeIndexes = edgeMesh.edgeIndexes;

      var _edgeIndexes$map$map$ = edgeIndexes.map(function (i) {
        return graph.getVertex(i);
      }).map(function (maybeV) {
        return maybeV.some();
      }).map(function (_ref22) {
        var data = _ref22.data;
        return data;
      }),
          _edgeIndexes$map$map$2 = _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_edgeIndexes$map$map$, 2),
          iVertexD = _edgeIndexes$map$map$2[0],
          jVertexD = _edgeIndexes$map$map$2[1];

      return this.getUndoDelLineEdge(iVertexD, jVertexD);
    }
  }, {
    key: "getUndoDelLineEdge",
    value: function getUndoDelLineEdge(iVertexD, jVertexD) {
      var _this12 = this;

      var graph = this.graph;
      var edgeVertexD = [iVertexD, jVertexD];

      var _edgeVertexD$map = edgeVertexD.map(function (_ref23) {
        var id = _ref23.id;
        return id;
      }),
          _edgeVertexD$map2 = _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_edgeVertexD$map, 2),
          i = _edgeVertexD$map2[0],
          j = _edgeVertexD$map2[1];

      var edgeMeshes = edgeVertexD.map(function (_ref24) {
        var mesh = _ref24.mesh;
        return mesh;
      });
      var edgeProps = {
        keyValueMap: {},
        weight: 1,
        edge: {}
      };
      graph.getEdge(i, j).forEach(function (_ref25) {
        var edgeData = _ref25.data;
        edgeProps.keyValueMap = edgeData.keyValueMap;
        edgeProps.weight = edgeData.weight;
        edgeProps.edge = edgeData.edge;
      });
      return mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_21__["UndoManager"].actionBuilder().doAction(function () {
        _this12.delEdge.apply(_this12, _babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default()(edgeMeshes));

        _this12.mainView.closeContextDial();

        _this12.mainView.updateNodeInServer(_this12.name);
      }).undoAction(function (_ref26) {
        var _ref26$is2UpdateInSer = _ref26.is2UpdateInServer,
            is2UpdateInServer = _ref26$is2UpdateInSer === void 0 ? true : _ref26$is2UpdateInSer;

        _this12.addEdge.apply(_this12, _babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default()(edgeMeshes).concat([[i, j]]));

        graph.getEdge(i, j).forEach(function (_ref27) {
          var edgeData = _ref27.data;
          edgeData.keyValueMap = edgeProps.keyValueMap;
          edgeData.weight = edgeProps.weight;
          edgeData.edge = edgeProps.edge;
        });
        if (is2UpdateInServer) _this12.mainView.updateNodeInServer(_this12.name);
      }).build();
    }
  }, {
    key: "checkInvalidEdges",
    value:
    /**
     * Check if edgeData linking Mesh1 and Mesh2 is valid
     * @param {Mesh} iMesh : Mesh 1
     * @param {Mesh} jMesh : Mesh 2
     * @param {*} edgeData : Edge to be evaluated
     * @returns {Boolean} True if is invalid and False otherwise
     */
    function checkInvalidEdges(iMesh, jMesh, edgeData) {
      var _this13 = this;

      // Check if at least one of the meshes is Path
      //  returns false if any of the meshes is Path
      var edgeMeshesContainsPath = [iMesh, jMesh].map(this.isMeshBelong2Path).some(function (x) {
        return x;
      });
      if (!edgeMeshesContainsPath) return false; // Identify source and target meshes

      var srcMesh = [iMesh, jMesh].filter(function (mesh) {
        return _this13.getMeshName(mesh) === edgeData.belongsSrc.name;
      })[0];
      var trgMesh = [iMesh, jMesh].filter(function (mesh) {
        return _this13.getMeshName(mesh) === edgeData.belongsTrg.name;
      })[0]; // Call GraphItem.isInvalidEdge function to validate

      return srcMesh && trgMesh ? GraphItem.isInvalidEdge(srcMesh, trgMesh, true) : false;
    }
  }], [{
    key: "ofDict",
    value: function ofDict(scene) {
      var dict = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
      var mainView = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;
      if (!dict || !mainView) throw new Error("null dictionary describing graphItem or null mainView");
      var graphItem = new GraphItem(scene, mainView, dict.name, dict.keyValueMap);
      var edges = dict.edges;
      var vertexCounter = Number.MIN_VALUE; // create mesh of graph using addEdge
      // map directed graph -> undirected graph

      Object.values(edges).forEach(function (_ref28) {
        var ids = _ref28.ids,
            belongsSrc = _ref28.belongsSrc,
            belongsTrg = _ref28.belongsTrg;

        var _ids$map3 = ids.map(function (x) {
          return Number(x);
        }),
            _ids$map4 = _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_ids$map3, 2),
            i = _ids$map4[0],
            j = _ids$map4[1]; // update vertex counter


        vertexCounter = Math.max(vertexCounter, Math.max(i, j));
        var edgeMeshes = getMeshesFromEdgeData(mainView, {
          belongsSrc: belongsSrc,
          belongsTrg: belongsTrg
        });
        var foundMeshes = edgeMeshes.reduce(function (e, x) {
          return e && x !== null && x !== undefined;
        }, true);

        if (foundMeshes) {
          graphItem.addEdge.apply(graphItem, _babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default()(edgeMeshes).concat([[i, j]])); // add additional data

          graphItem.graph.getEdge(i, j).forEach(function (_ref29) {
            var edgeData = _ref29.data;
            var dataEdge = edges[_Graph_Graph__WEBPACK_IMPORTED_MODULE_16__["default"].edgeKey(i, j)];
            edgeData.importFeatures(dataEdge);
          });
        }
      });
      graphItem.vertexGenerator = vertexCounter + 1;
      return graphItem;
    }
  }, {
    key: "getVertexMesh",
    value: function getVertexMesh(scene, vertexPosition) {
      var color = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : _babylonjs_core__WEBPACK_IMPORTED_MODULE_13__["Color3"].Gray();
      var radius = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : _Utils_Constants__WEBPACK_IMPORTED_MODULE_14__["default"].RADIUS;
      var sphere = _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_12__["default"].createSphere(scene, color, radius);
      sphere.position = vertexPosition;
      return sphere;
    }
    /**
     *
     * @param {*} scene: Scene
     * @param {*} edge: Array<Vector3>
     * @param {*} color: Color3
     * @param {*} radius: Number
     */

  }, {
    key: "getEdgeMesh",
    value: function getEdgeMesh(scene, edge, name) {
      var color = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : _babylonjs_core__WEBPACK_IMPORTED_MODULE_13__["Color3"].Gray();
      var radius = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : _Utils_Constants__WEBPACK_IMPORTED_MODULE_14__["default"].RADIUS / 4;
      return _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_12__["default"].createTubeFromPoints(scene, edge, color, radius, name);
    }
  }, {
    key: "getEdgeMaterial",
    value: function getEdgeMaterial(scene, _ref30) {
      var _ref30$color = _ref30.color,
          color = _ref30$color === void 0 ? _babylonjs_core__WEBPACK_IMPORTED_MODULE_13__["Color3"].Yellow() : _ref30$color,
          _ref30$frequency = _ref30.frequency,
          frequency = _ref30$frequency === void 0 ? 8 : _ref30$frequency,
          _ref30$speed = _ref30.speed,
          speed = _ref30$speed === void 0 ? 0 : _ref30$speed;
      return _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_12__["default"].getShaderMaterial({
        vertex: VERTEX,
        frag: FRAG(frequency, speed, [color.r, color.g, color.b])
      })(scene);
    }
  }]);

  return GraphItem;
}(_NodeItem__WEBPACK_IMPORTED_MODULE_11__["default"]);

_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_10___default()(GraphItem, "TYPE", "GraphItem");

_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_10___default()(GraphItem, "NAME", "LogicGraph");

_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_10___default()(GraphItem, "createGraphItemIfNone", function (scene, parentView) {
  return parentView.getGraph().orElseRun(function () {
    var graphItem = new GraphItem(scene, parentView);
    graphItem.mesh.parent = parentView.getRootNode().item.mesh;
    parentView.addNodeItem2Tree(graphItem);
  });
});

_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_10___default()(GraphItem, "isInvalidEdge", function (firstMesh, secondMesh) {
  var _firstMesh$parent, _secondMesh$parent;

  var validateDirection = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;
  var firstMeshParent = (_firstMesh$parent = firstMesh.parent) === null || _firstMesh$parent === void 0 ? void 0 : _firstMesh$parent.nodeItem;
  var secondMeshParent = (_secondMesh$parent = secondMesh.parent) === null || _secondMesh$parent === void 0 ? void 0 : _secondMesh$parent.nodeItem;
  var validationError = []; // Validate invalid edges between paths

  if (_Util3d_Util3d__WEBPACK_IMPORTED_MODULE_12__["default"].getNodeItemTypeFromMesh(firstMesh) === _Path__WEBPACK_IMPORTED_MODULE_22__["default"].TYPE && _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_12__["default"].getNodeItemTypeFromMesh(secondMesh) === _Path__WEBPACK_IMPORTED_MODULE_22__["default"].TYPE) {
    var origin = firstMesh.index / (firstMeshParent.keyPoints.length - 1);
    var target = secondMesh.index / (secondMeshParent.keyPoints.length - 1); // Validate direction

    if (validateDirection) {
      // Invalid Edge 1.1 validation
      if (origin === 0 && target === 1) validationError.push(1.1);
    } // Invalid Edge 2 validation


    if (origin === 1 && target === 1) validationError.push(2); // Invalid Edge 3 validation

    if (origin === 0 && target === 0) validationError.push(3);
  } // Validate direction


  if (validateDirection) {
    // Invalid Edge 1.2 validation
    if (_Util3d_Util3d__WEBPACK_IMPORTED_MODULE_12__["default"].getNodeItemTypeFromMesh(firstMesh) === _Path__WEBPACK_IMPORTED_MODULE_22__["default"].TYPE && _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_12__["default"].getNodeItemTypeFromMesh(secondMesh) === _KeyPoint__WEBPACK_IMPORTED_MODULE_23__["default"].TYPE) {
      if (firstMesh.index / (firstMeshParent.keyPoints.length - 1) === 0) validationError.push(1.2);
    } // Invalid Edge 1.3 validation


    if (_Util3d_Util3d__WEBPACK_IMPORTED_MODULE_12__["default"].getNodeItemTypeFromMesh(firstMesh) === _KeyPoint__WEBPACK_IMPORTED_MODULE_23__["default"].TYPE && _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_12__["default"].getNodeItemTypeFromMesh(secondMesh) === _Path__WEBPACK_IMPORTED_MODULE_22__["default"].TYPE) {
      if (secondMesh.index / (secondMeshParent.keyPoints.length - 1) === 1) validationError.push(1.3);
    }
  } // Invalid Edge 4 validation


  if (firstMesh.name === secondMesh.name) validationError.push(4); // Return if there's any validation error

  return validationError.length > 0;
});

var graphItemInstances = {};

var getGraphPlaceHolder = function getGraphPlaceHolder(scene, name) {
  var graphPlaceHolder = _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_12__["default"].createSphere(scene, _babylonjs_core__WEBPACK_IMPORTED_MODULE_13__["Color3"].Gray(), Number.MIN_VALUE, name, false);
  graphPlaceHolder.position = _babylonjs_core__WEBPACK_IMPORTED_MODULE_13__["Vector3"].Zero();
  graphPlaceHolder.scaling = _babylonjs_core__WEBPACK_IMPORTED_MODULE_13__["Vector3"].One();
  graphPlaceHolder.rotationQuaternion = _babylonjs_core_Maths_math__WEBPACK_IMPORTED_MODULE_15__["Quaternion"].Identity();
  graphPlaceHolder.visibility = 0.0;
  return graphPlaceHolder;
};

var getMeshesFromEdgeData = function getMeshesFromEdgeData(mainView, edgeProps) {
  var belongsSrc = edgeProps.belongsSrc,
      belongsTrg = edgeProps.belongsTrg;
  var edgeMesh = [belongsSrc, belongsTrg].map(function (_ref31) {
    var name = _ref31.name,
        index = _ref31.index;
    return mainView.getNodeFromTree(name).map(function (_ref32) {
      var item = _ref32.item;
      if (index === null || index === undefined) return item.mesh; // if has index, then it must be a path or polygon

      var ind = index < 0 ? item.keyPoints.length - 1 : index;
      return item.keyPoints[ind];
    }).orUndefined();
  });
  return edgeMesh;
};

var VertexData = /*#__PURE__*/function () {
  /**
   *
   * @param {*} id: Integer
   * @param {*} mesh: Mesh
   * @param {*} position:
   */
  function VertexData(id, mesh, position) {
    _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3___default()(this, VertexData);

    this.id = id;
    this.mesh = mesh;
    this.position = position;
  }

  _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_4___default()(VertexData, null, [{
    key: "builder",
    value: function builder() {
      return function (id, mesh) {
        var globalPos = _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_12__["default"].getGlobalCoordinates(mesh, mesh.position).toBabylon();
        return new VertexData(id, mesh, globalPos);
      };
    }
  }]);

  return VertexData;
}();

var EdgeData = /*#__PURE__*/function () {
  function EdgeData(vertexDataI, vertexDataJ) {
    var keyValueMap = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};

    _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3___default()(this, EdgeData);

    this.edge = [vertexDataI, vertexDataJ];
    this.keyValueMap = keyValueMap;
    this.weight = 1.0;
  }

  _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_4___default()(EdgeData, [{
    key: "importFeatures",
    value: function importFeatures(_ref33) {
      var keyValueMap = _ref33.keyValueMap,
          weight = _ref33.weight;
      this.keyValueMap = keyValueMap;
      this.weight = weight;
    }
  }]);

  return EdgeData;
}();

var VERTEX = "\nprecision highp float;\n// Attributes\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 uv;\n\n// Uniforms\nuniform mat4 worldViewProjection;\n\n// Varying\nvarying vec3 vPosition;\nvarying vec3 vNormal;\nvarying vec2 vUV;\n\nvoid main(void) {\n    vec4 outPosition = worldViewProjection * vec4(position, 1.0);\n    gl_Position = outPosition;\n\n    vUV = uv;\n    vPosition = position;\n    vNormal = normal;\n}";

var FRAG = function FRAG() {
  var freq = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 8;
  var speed = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 2;
  var color = arguments.length > 2 ? arguments[2] : undefined;
  return "\n#define PI 3.1415926538\nprecision highp float;\n\n// Varying\nvarying vec3 vPosition;\nvarying vec3 vNormal;\nvarying vec2 vUV;\n\n// Refs\nuniform float time;\n\nvoid main(void) {\n    vec3 color = vec3(".concat(color[0], ", ").concat(color[1], ", ").concat(color[2], ");\n    float frequency = ").concat(Number(freq).toFixed(1), ";\n    float speed = ").concat(Number(speed).toFixed(1), ";\n    gl_FragColor = vec4(color, max(0.,sin(2. * PI * vUV.y * frequency - speed * time)));\n}");
};

/* harmony default export */ __webpack_exports__["default"] = (GraphItem);

/***/ }),

/***/ "./src/Components/Viewer/NodeItem/KeyPoint.js":
/*!****************************************************!*\
  !*** ./src/Components/Viewer/NodeItem/KeyPoint.js ***!
  \****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "@babel/runtime/helpers/esm/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "@babel/runtime/helpers/esm/createClass");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/assertThisInitialized */ "@babel/runtime/helpers/esm/assertThisInitialized");
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "@babel/runtime/helpers/esm/inherits");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "@babel/runtime/helpers/esm/possibleConstructorReturn");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "@babel/runtime/helpers/esm/getPrototypeOf");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "@babel/runtime/helpers/esm/defineProperty");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _NodeItem__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./NodeItem */ "./src/Components/Viewer/NodeItem/NodeItem.js");
/* harmony import */ var _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../Util3d/Util3d */ "./src/Components/Viewer/Util3d/Util3d.js");
/* harmony import */ var monet__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! monet */ "monet");
/* harmony import */ var monet__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(monet__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @babylonjs/core */ "@babylonjs/core");
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(_babylonjs_core__WEBPACK_IMPORTED_MODULE_10__);








function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5___default()(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5___default()(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4___default()(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }






var KeyPoint = /*#__PURE__*/function (_NodeItem) {
  _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3___default()(KeyPoint, _NodeItem);

  var _super = _createSuper(KeyPoint);

  function KeyPoint() {
    var _this;

    _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default()(this, KeyPoint);

    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _this = _super.call.apply(_super, [this].concat(args));

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default()(_this), "getType", function () {
      return KeyPoint.TYPE;
    });

    return _this;
  }

  _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1___default()(KeyPoint, [{
    key: "ofDict",
    value: function ofDict(scene) {
      var dict = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
      var mainView = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;
      return KeyPoint.ofDict(scene, dict, mainView);
    }
  }], [{
    key: "ofDict",
    value: function ofDict(scene) {
      var dict = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
      var mainView = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;
      var name = monet__WEBPACK_IMPORTED_MODULE_9__["Maybe"].fromNull(dict).map(function (x) {
        return x.name;
      }).orSome("KeyPoint".concat(Math.floor(Math.random() * 1e3)));
      var mesh = _babylonjs_core__WEBPACK_IMPORTED_MODULE_10__["MeshBuilder"].CreatePolyhedron(name, {
        custom: TRIANGULAR_ANTIPRISM,
        size: KeyPoint.DEFAULT_SIZE
      }, scene);
      var material = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_10__["StandardMaterial"]("KeyPointMaterial".concat(name), scene);
      mesh.material = material;
      mesh.convertToFlatShadedMesh();
      mesh.rotationQuaternion = _babylonjs_core__WEBPACK_IMPORTED_MODULE_10__["Quaternion"].Identity();
      var axis = _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_8__["default"].referentialBuilder(scene).isPickable(false).boxParams({
        isVisible: false,
        size: 0.1 * KeyPoint.DEFAULT_SIZE
      }).name("".concat(name, "Axis")).build();
      axis.parent = mesh;
      _NodeItem__WEBPACK_IMPORTED_MODULE_7__["default"].mapDict2Mesh(dict, mesh);
      return new KeyPoint(mesh, dict.keyValueMap);
    }
  }]);

  return KeyPoint;
}(_NodeItem__WEBPACK_IMPORTED_MODULE_7__["default"]);

_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(KeyPoint, "TYPE", "KeyPoint");

_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(KeyPoint, "DEFAULT_SIZE", 0.25);

var TRIANGULAR_ANTIPRISM = {
  name: "Triangular Antiprism (Octahedron)",
  category: ["Antiprism"],
  vertex: [[0, 0, 1.414214], [1.414214, 0, 0], [0, 1.414214, 0], [-1.414214, 0, 0], [0, -1.414214, 0], [0, 0, -1.414214]],
  face: [[0, 1, 2], [0, 2, 3], [0, 3, 4], [0, 4, 1], [1, 4, 5], [1, 5, 2], [2, 5, 3], [3, 5, 4]]
};
/* harmony default export */ __webpack_exports__["default"] = (KeyPoint);

/***/ }),

/***/ "./src/Components/Viewer/NodeItem/Map.js":
/*!***********************************************!*\
  !*** ./src/Components/Viewer/NodeItem/Map.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "@babel/runtime/helpers/esm/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "@babel/runtime/helpers/esm/createClass");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/assertThisInitialized */ "@babel/runtime/helpers/esm/assertThisInitialized");
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/get */ "@babel/runtime/helpers/esm/get");
/* harmony import */ var _babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "@babel/runtime/helpers/esm/inherits");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "@babel/runtime/helpers/esm/possibleConstructorReturn");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "@babel/runtime/helpers/esm/getPrototypeOf");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "@babel/runtime/helpers/esm/defineProperty");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _AssetNodeItem__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./AssetNodeItem */ "./src/Components/Viewer/NodeItem/AssetNodeItem.js");









function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7___default()(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6___default()(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6___default()(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5___default()(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }



var Map = /*#__PURE__*/function (_AssetNodeItem) {
  _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4___default()(Map, _AssetNodeItem);

  var _super = _createSuper(Map);

  function Map(mesh, size, textureSrc, assetName) {
    var _this;

    _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default()(this, Map);

    _this = _super.call(this, mesh, assetName);

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default()(_this), "getType", function () {
      return Map.TYPE;
    });

    _this.size = size;
    _this.textureSrc = textureSrc;
    return _this;
  }

  _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1___default()(Map, [{
    key: "dispose",
    value: function dispose() {
      _babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_3___default()(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6___default()(Map.prototype), "dispose", this).call(this);
    }
  }, {
    key: "toDict",
    value: function toDict() {
      var dict = _babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_3___default()(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6___default()(Map.prototype), "toDict", this).call(this);

      dict["size"] = this.size;
      dict["textureSrc"] = this.textureSrc;
      return dict;
    }
  }, {
    key: "toForm",
    value: function toForm() {
      var info = this.toDict();
      var schema = {
        jsonSchema: {
          type: "object",
          properties: {
            oldName: {
              type: "string"
            },
            name: {
              type: "string",
              title: "Name"
            },
            type: {
              type: "string",
              title: "Type"
            },
            assetName: {
              type: "string",
              title: "Asset Name"
            }
          }
        },
        uiSchema: {
          type: {
            "ui:disabled": true
          },
          assetName: {
            "ui:disabled": true
          },
          oldName: {
            "ui:widget": "hidden"
          }
        },
        data: {
          oldName: info.name,
          name: info.name,
          type: info.type,
          assetName: info.assetName
        }
      };
      return schema;
    }
  }, {
    key: "ofForm",
    value: function ofForm(form) {
      this.name = form.name;
      this.mesh.name = form.name;
      this.keyValueMap = _objectSpread({}, form.annotations);
    }
  }]);

  return Map;
}(_AssetNodeItem__WEBPACK_IMPORTED_MODULE_8__["default"]);

_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7___default()(Map, "TYPE", "Map");

/* harmony default export */ __webpack_exports__["default"] = (Map);

/***/ }),

/***/ "./src/Components/Viewer/NodeItem/Mesh.js":
/*!************************************************!*\
  !*** ./src/Components/Viewer/NodeItem/Mesh.js ***!
  \************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "@babel/runtime/helpers/esm/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "@babel/runtime/helpers/esm/createClass");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/assertThisInitialized */ "@babel/runtime/helpers/esm/assertThisInitialized");
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/get */ "@babel/runtime/helpers/esm/get");
/* harmony import */ var _babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "@babel/runtime/helpers/esm/inherits");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "@babel/runtime/helpers/esm/possibleConstructorReturn");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "@babel/runtime/helpers/esm/getPrototypeOf");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "@babel/runtime/helpers/esm/defineProperty");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _AssetNodeItem__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./AssetNodeItem */ "./src/Components/Viewer/NodeItem/AssetNodeItem.js");









function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6___default()(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6___default()(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5___default()(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }



var Mesh = /*#__PURE__*/function (_AssetNodeItem) {
  _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4___default()(Mesh, _AssetNodeItem);

  var _super = _createSuper(Mesh);

  function Mesh(mesh, assetName) {
    var _this;

    var keyValueMap = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};

    _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default()(this, Mesh);

    _this = _super.call(this, mesh, assetName, keyValueMap);

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default()(_this), "getType", function () {
      return Mesh.TYPE;
    });

    return _this;
  }

  _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1___default()(Mesh, [{
    key: "toDict",
    value: function toDict() {
      var dict = _babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_3___default()(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6___default()(Mesh.prototype), "toDict", this).call(this);

      return dict;
    }
  }, {
    key: "getMouseContextActions",
    value: function getMouseContextActions(mainView) {
      return _babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_3___default()(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6___default()(Mesh.prototype), "getMouseContextActions", this).call(this, mainView).filter(function (x) {
        return x.title === "Delete";
      });
    }
  }]);

  return Mesh;
}(_AssetNodeItem__WEBPACK_IMPORTED_MODULE_8__["default"]);

_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7___default()(Mesh, "TYPE", "Mesh");

/* harmony default export */ __webpack_exports__["default"] = (Mesh);

/***/ }),

/***/ "./src/Components/Viewer/NodeItem/NavigationPreviewItem.js":
/*!*****************************************************************!*\
  !*** ./src/Components/Viewer/NodeItem/NavigationPreviewItem.js ***!
  \*****************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_esm_toArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/toArray */ "@babel/runtime/helpers/esm/toArray");
/* harmony import */ var _babel_runtime_helpers_esm_toArray__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_toArray__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/slicedToArray */ "@babel/runtime/helpers/esm/slicedToArray");
/* harmony import */ var _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/toConsumableArray */ "@babel/runtime/helpers/esm/toConsumableArray");
/* harmony import */ var _babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "@babel/runtime/helpers/esm/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "@babel/runtime/helpers/esm/createClass");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/assertThisInitialized */ "@babel/runtime/helpers/esm/assertThisInitialized");
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/esm/get */ "@babel/runtime/helpers/esm/get");
/* harmony import */ var _babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "@babel/runtime/helpers/esm/inherits");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "@babel/runtime/helpers/esm/possibleConstructorReturn");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "@babel/runtime/helpers/esm/getPrototypeOf");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "@babel/runtime/helpers/esm/defineProperty");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var _NodeItem__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./NodeItem */ "./src/Components/Viewer/NodeItem/NodeItem.js");
/* harmony import */ var _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../Util3d/Util3d */ "./src/Components/Viewer/Util3d/Util3d.js");
/* harmony import */ var monet__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! monet */ "monet");
/* harmony import */ var monet__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(monet__WEBPACK_IMPORTED_MODULE_13__);
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @babylonjs/core */ "@babylonjs/core");
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(_babylonjs_core__WEBPACK_IMPORTED_MODULE_14__);
/* harmony import */ var _Math_Vec3__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../Math/Vec3 */ "./src/Components/Viewer/Math/Vec3.js");
/* harmony import */ var _Utils_Constants__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../Utils/Constants */ "./src/Components/Viewer/Utils/Constants.js");
/* harmony import */ var _Utils_Animator__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../Utils/Animator */ "./src/Components/Viewer/Utils/Animator.js");
/* harmony import */ var roslib__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! roslib */ "roslib");
/* harmony import */ var roslib__WEBPACK_IMPORTED_MODULE_18___default = /*#__PURE__*/__webpack_require__.n(roslib__WEBPACK_IMPORTED_MODULE_18__);
/* harmony import */ var mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! mov-fe-lib-core */ "mov-fe-lib-core");
/* harmony import */ var mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_19___default = /*#__PURE__*/__webpack_require__.n(mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_19__);












function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_9___default()(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_9___default()(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_8___default()(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }










var MESSAGES = {
  failGenerateCurve: "Fail to generate navigation preview."
};

var NavigationPreviewItem = /*#__PURE__*/function (_NodeItem) {
  _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_7___default()(NavigationPreviewItem, _NodeItem);

  var _super = _createSuper(NavigationPreviewItem);

  /**
   *
   * @param {*} mesh: Mesh
   * @param {*} poses
   * @param {*} robotConfig
   * @param {*} scene
   * @param {*} mainView
   */
  function NavigationPreviewItem(mesh, poses, robotConfig, scene, mainView) {
    var _this;

    _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3___default()(this, NavigationPreviewItem);

    _this = _super.call(this, mesh, {});

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_10___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5___default()(_this), "getType", function () {
      return NavigationPreviewItem.TYPE;
    });

    _this.poses = poses;
    _this.robotConfig = robotConfig;
    _this.scene = scene;
    _this.mainView = mainView;
    _this.arrowMeshes = _this.createArrowMeshes();
    _this.navPath = _this.createNavPath();
    return _this;
  }

  _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_4___default()(NavigationPreviewItem, [{
    key: "ofDict",
    value: function ofDict(scene) {
      var dict = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
      var mainView = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;
      return NavigationPreviewItem.ofDict(scene, dict, mainView);
    }
  }, {
    key: "dispose",
    value: function dispose() {
      this.navPath && this.navPath.dispose();
      this.arrowMeshes.forEach(function (arrow) {
        return arrow.dispose();
      });
    }
  }, {
    key: "toDict",
    value: function toDict() {
      var dict = _babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_6___default()(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_9___default()(NavigationPreviewItem.prototype), "toDict", this).call(this);

      dict.poses = this.poses;
      dict.robotConfig = this.robotConfig;
      return dict;
    }
  }, {
    key: "toForm",
    value: function toForm() {
      var form = _babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_6___default()(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_9___default()(NavigationPreviewItem.prototype), "toForm", this).call(this);

      delete form.jsonSchema.properties.position;
      delete form.jsonSchema.properties.rotation;
      delete form.jsonSchema.properties.color;
      delete form.jsonSchema.properties.annotations;
      delete form.uiSchema.position;
      delete form.uiSchema.rotation;
      delete form.uiSchema.color;
      delete form.data.position;
      delete form.data.rotation;
      delete form.data.color;
      delete form.data.annotations;
      form.jsonSchema.properties.config = {
        type: "string",
        title: "Robot Configuration"
      };
      form.uiSchema.config = {
        "ui:widget": "selectScopeModal",
        "ui:options": {
          scopeList: "Configuration",
          name: "Robot Config",
          filter: function filter(e) {
            return true;
          }
        }
      };
      form.data.config = this.robotConfig;
      return form;
    }
  }, {
    key: "ofForm",
    value: function ofForm(form) {
      this.name = form.name;
      this.mesh.name = form.name;
      this.robotConfig = form.config;
    }
  }, {
    key: "createArrowMeshes",
    value: function createArrowMeshes() {
      var _this2 = this;

      return this.poses.map(function (pose, i) {
        var beginPos = _Math_Vec3__WEBPACK_IMPORTED_MODULE_15__["default"].of(pose.position).toBabylon();
        var theta = 2 * Math.atan2(pose.orientation[3], pose.orientation[0]);
        var endPos = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_14__["Vector3"](Math.cos(theta), Math.sin(theta), 0).add(beginPos);
        var arrowMesh = _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_12__["default"].getArrow(_this2.scene, "".concat(_this2.name, "Pose").concat(i), beginPos, endPos, _Utils_Constants__WEBPACK_IMPORTED_MODULE_16__["default"].RADIUS / 6);
        arrowMesh.parent = _this2.mesh;
        arrowMesh.getChildren().forEach(function (m) {
          m.material = _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_12__["default"].getMaterialFromColor(i % 2 === 0 ? _babylonjs_core__WEBPACK_IMPORTED_MODULE_14__["Color3"].Red() : _babylonjs_core__WEBPACK_IMPORTED_MODULE_14__["Color3"].Green());
          m.material.freeze();
          m.observers = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_14__["Observable"]();
          m.observers.add(_this2.getArrowObserver(_this2.mainView));

          m.onClick = function () {
            _this2.mainView.highlightNodesInTree([_this2.name]);

            _this2.mainView.setProperties(_this2.toForm());

            setTimeout(function () {
              _this2.mainView.highlightMeshesInScene(_this2.arrowMeshes.flatMap(function (m) {
                return m.getChildren();
              }));
            });
          };

          m.onDel = function () {
            return _this2.mainView.deleteNodeFromTreeUsingName(_this2.name);
          };
        });
        return arrowMesh;
      });
    }
  }, {
    key: "createNavPath",
    value: function createNavPath() {
      var navPath = new NavigationPath(this);
      navPath.play();
      return navPath;
    }
  }, {
    key: "getArrowObserver",
    value: function getArrowObserver(mainView) {
      var _this3 = this;

      return function (_ref) {
        var updatedPointMesh = _ref.updatedPointMesh,
            is2updateServer = _ref.is2updateServer,
            displacement = _ref.displacement;
        var v = _Math_Vec3__WEBPACK_IMPORTED_MODULE_15__["default"].ofBabylon(displacement);
        var vLocal = _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_12__["default"].getLocalCoordFromWorld(_this3.mesh, v, false);
        updatedPointMesh.position = updatedPointMesh.position.add(vLocal.scale(-1).toBabylon());

        if (is2updateServer) {
          mainView.setProperties(_this3.toForm());
        }
      };
    }
  }], [{
    key: "ofDict",
    value: function ofDict(scene) {
      var dict = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
      var mainView = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;
      var name = monet__WEBPACK_IMPORTED_MODULE_13__["Maybe"].fromNull(dict).map(function (x) {
        return x.name;
      }).orSome("NavPreview".concat(Math.floor(Math.random() * 1e3)));
      var mesh = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_14__["Mesh"](name, scene);
      mesh.position = _babylonjs_core__WEBPACK_IMPORTED_MODULE_14__["Vector3"].Zero();
      mesh.scaling = _babylonjs_core__WEBPACK_IMPORTED_MODULE_14__["Vector3"].One();
      mesh.rotationQuaternion = _babylonjs_core__WEBPACK_IMPORTED_MODULE_14__["Quaternion"].Identity();
      mesh.isPickable = false;
      var navPreviewItem = new NavigationPreviewItem(mesh, dict.poses, dict.robotConfig, scene, mainView);
      return navPreviewItem;
    }
  }]);

  return NavigationPreviewItem;
}(_NodeItem__WEBPACK_IMPORTED_MODULE_11__["default"]);

_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_10___default()(NavigationPreviewItem, "TYPE", "NavigationPreviewItem");

var NavigationPath = /*#__PURE__*/function () {
  function NavigationPath(navItem) {
    var _this4 = this;

    _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3___default()(this, NavigationPath);

    this.navItem = navItem;
    this.scene = navItem.scene;
    this.mainView = navItem.mainView;
    this.pathPromise = this.getPathFromService(this.navItem.poses, this.navItem.robotConfig);
    this.pathPromise.then(function (_ref2) {
      var path = _ref2.path;
      _this4.pathPoses = path.poses.map(function (x) {
        return x.pose;
      });
      _this4.mesh = _this4.getNavigationPathMesh(_this4.pathPoses);
      _this4.animator = _this4.getAnimator();
    });
  }

  _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_4___default()(NavigationPath, [{
    key: "play",
    value: function play() {
      var _this5 = this;

      this.pathPromise.then(function () {
        _this5.animator.play();
      });
    }
  }, {
    key: "stop",
    value: function stop() {
      var _this6 = this;

      this.pathPromise.then(function () {
        _this6.animator.stop();
      });
    }
  }, {
    key: "dispose",
    value: function dispose() {
      this.mesh && this.mesh.dispose();
      this.stop();
    }
  }, {
    key: "getAnimator",
    value: function getAnimator() {
      var _this7 = this;

      var n = this.pathPoses.length;
      return _Utils_Animator__WEBPACK_IMPORTED_MODULE_17__["Animator"].builder().initialState({
        time: 0,
        T: new Date().getTime(),
        indices: _babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_2___default()(Array(n)).map(function (_, i) {
          return i;
        })
      }).nextState(function (s) {
        var time = s.time,
            T = s.T,
            indices = s.indices;
        var indexSpeed = 3;
        var dt = (new Date().getTime() - T) / 1000;

        var positions = _babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_2___default()(Array(n)); // with circle topology, check modular arithmetic below


        indices.forEach(function (index, i) {
          return indices[i] = (index + indexSpeed * dt) % n;
        });
        positions.forEach(function (_, i) {
          var iPrev = Math.floor(indices[i]);
          var iNext = Math.ceil(indices[i]);
          var t = (indices[i] - iPrev) / (iNext - iPrev);

          if (indices[i] > n - 1) {
            iPrev = 0;
            iNext = 1;
          }

          positions[i] = _Math_Vec3__WEBPACK_IMPORTED_MODULE_15__["default"].of([_this7.pathPoses[iPrev].position.x, _this7.pathPoses[iPrev].position.y, _this7.pathPoses[iPrev].position.z]).scale(1 - t).add(_Math_Vec3__WEBPACK_IMPORTED_MODULE_15__["default"].of([_this7.pathPoses[iNext].position.x, _this7.pathPoses[iNext].position.y, _this7.pathPoses[iNext].position.z]).scale(t)).toArray();
        });

        _this7.mesh.updateVerticesData(_babylonjs_core__WEBPACK_IMPORTED_MODULE_14__["VertexBuffer"].PositionKind, positions.flatMap(function (x) {
          return x;
        }));

        return {
          time: time + dt,
          T: new Date().getTime(),
          indices: indices
        };
      })["while"](function (_) {
        return !_this7.scene.isDisposed;
      }).build();
    }
  }, {
    key: "getNavigationPathMesh",
    value: function getNavigationPathMesh(pathPoses) {
      var pointCloudMesh = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_14__["Mesh"]("cloudPoint".concat(this.navItem.name), this.scene);
      var mat = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_14__["StandardMaterial"]("cloudPoint".concat(this.navItem.name, "Material"), this.scene);
      mat.emissiveColor = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_14__["Color3"](1, 1, 1);
      mat.disableLighting = true;
      mat.pointsCloud = true;
      mat.pointSize = 5;
      pointCloudMesh.material = mat;
      pointCloudMesh.isPickable = false;
      var vertexData = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_14__["VertexData"]();
      var points = pathPoses.map(function (_ref3) {
        var position = _ref3.position;
        return [position.x, position.y, position.z];
      }); //Assign positions

      vertexData.positions = points.flatMap(function (x) {
        return x;
      });
      var colors = new Array(4 * points.length);
      vertexData.colors = colors.fill(1.0); //Apply vertexData to custom mesh

      vertexData.applyToMesh(pointCloudMesh, true);
      pointCloudMesh.parent = this.navItem.mesh;
      return pointCloudMesh;
    }
  }, {
    key: "getPathFromService",
    value: function getPathFromService(_ref4, robotConfig) {
      var _this8 = this;

      var _ref5 = _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_ref4, 2),
          startPose = _ref5[0],
          endPose = _ref5[1];

      var ros = new roslib__WEBPACK_IMPORTED_MODULE_18__["Ros"]({
        url: BRIDE_CONNECTION
      });
      var inputMessage = {
        scene: this.mainView.sceneName,
        robot_config: this.navItem.robotConfig,
        initial_pose: rosPoseFromPose(startPose),
        final_pose: rosPoseFromPose(endPose)
      };
      return new Promise(function (res) {
        // If there is an error on the backend, an 'error' emit will be emitted.
        ros.on("error", function (error) {
          console.log("Navigation Service ", error); // fall back to default

          _this8.getDefaultPath(inputMessage, res);
        }); // Find out exactly when we made a connection.

        ros.on("connection", function () {
          console.log("Navigation Service Connection made!");
        });
        ros.on("close", function () {
          console.log("Navigation Service Connection closed.");
        });
        var navigationService = new roslib__WEBPACK_IMPORTED_MODULE_18__["Service"]({
          ros: ros,
          name: SERVICE_NAME,
          serviceType: SERVICE_TYPE
        });
        var request = new roslib__WEBPACK_IMPORTED_MODULE_18__["ServiceRequest"](inputMessage);
        navigationService.callService(request, function (result) {
          ros.close();
          res(result);
        }, function (error) {
          // fall back to default
          _this8.getDefaultPath(inputMessage, res);
        });
      });
    }
  }, {
    key: "getDefaultPath",
    value: function getDefaultPath(msg, resolve) {
      var _this9 = this;

      mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_19__["MasterDB"].cloudFunction(_Utils_Constants__WEBPACK_IMPORTED_MODULE_16__["default"].NAV_CLOUD_NAME, "generate_path", [msg.scene, msg.initial_pose, msg.final_pose, msg.robot_config], function (data) {
        console.log("Got default path", data.success);

        if (data.success) {
          resolve({
            path: data.result
          });
        } else {
          console.log("Caught exception in default path", data.error);

          _this9.getPathFromPoses(_this9.navItem.poses).then(function (path) {
            return resolve({
              path: path
            });
          })["catch"](function (err) {
            console.log("Caught error in getPathFromPoses", err);

            _this9.mainView.showAlert(MESSAGES.failGenerateCurve, "error");
          });
        }
      })["catch"](function (error) {
        console.log("debug couldn't execute default generate path", error);

        _this9.getPathFromPoses(_this9.navItem.poses).then(function (path) {
          return resolve({
            path: path
          });
        })["catch"](function (err) {
          console.log("Caught error in getPathFromPoses", err);

          _this9.mainView.showAlert(MESSAGES.failGenerateCurve, "error");
        });
      });
    }
  }, {
    key: "getPathFromPoses",
    value: function getPathFromPoses(poses) {
      var samples = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 25;

      var _poses = _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(poses, 2),
          start = _poses[0],
          end = _poses[1];

      var startPos = _Math_Vec3__WEBPACK_IMPORTED_MODULE_15__["default"].of(start.position);
      var endPos = _Math_Vec3__WEBPACK_IMPORTED_MODULE_15__["default"].of(end.position);
      var v = endPos.sub(startPos);
      var nextPoint = startPos.add(v.scale(0.5)).add(_Math_Vec3__WEBPACK_IMPORTED_MODULE_15__["default"].of([start.orientation[0], start.orientation[3], 0]).scale(2));
      var nextNextPoint = endPos.add(v.scale(-0.5)).add(_Math_Vec3__WEBPACK_IMPORTED_MODULE_15__["default"].of([end.orientation[0], end.orientation[3], 0]).scale(2));
      var splineCage = [startPos, nextPoint, nextNextPoint, endPos];

      var path = _babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_2___default()(Array(samples));

      for (var i = 0; i < samples; i++) {
        path[i] = polyInterpolation(splineCage, i / (samples - 1)).toArray();
      }

      return new Promise(function (re) {
        return re({
          poses: path.map(function (point) {
            return {
              pose: {
                position: {
                  x: point[0],
                  y: point[1],
                  z: point[2]
                },
                orientation: {
                  x: 0,
                  y: 0,
                  z: 0,
                  w: 1
                }
              }
            };
          })
        });
      });
    }
  }]);

  return NavigationPath;
}();
/**
 *
 * @param {*} cage: Array<Vec3>
 * @param {*} t: [0,1] real
 * @returns
 */


function polyInterpolation(cage, t) {
  if (cage.length === 1) return cage[0];

  var _cage = _babel_runtime_helpers_esm_toArray__WEBPACK_IMPORTED_MODULE_0___default()(cage),
      tail = _cage.slice(1);

  var pairs = zip(cage, tail);
  pairs.splice(-1, 1);
  var newCage = pairs.map(function (_ref6) {
    var _ref7 = _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_ref6, 2),
        x = _ref7[0],
        y = _ref7[1];

    return lerp(x, y)(t);
  });
  return polyInterpolation(newCage, t);
}
/**
 *
 * @param {*} x: Vec3
 * @param {*} y: Vec3
 * @returns t: [0,1] real => Vec3
 */


function lerp(x, y) {
  return function (t) {
    return x.scale(1 - t).add(y.scale(t));
  };
}
/**
 *
 * @param {*} a: Array
 * @param {*} b: Array
 * @returns
 */


function zip(a, b) {
  return a.map(function (x, i) {
    return [x, b[i]];
  });
}

function rosPoseFromPose(_ref8) {
  var position = _ref8.position,
      orientation = _ref8.orientation;
  return {
    position: {
      x: position[0],
      y: position[1],
      z: position[2]
    },
    orientation: {
      w: orientation[0],
      x: orientation[1],
      y: orientation[2],
      z: orientation[3]
    }
  };
}

var SERVICE_NAME = "/generate_path/path_points/in";
var SERVICE_TYPE = "movai_common/GeneratePath";
var BRIDE_CONNECTION = "ws://localhost:9090";
/* harmony default export */ __webpack_exports__["default"] = (NavigationPreviewItem);

/***/ }),

/***/ "./src/Components/Viewer/NodeItem/NodeItem.js":
/*!****************************************************!*\
  !*** ./src/Components/Viewer/NodeItem/NodeItem.js ***!
  \****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/toConsumableArray */ "@babel/runtime/helpers/esm/toConsumableArray");
/* harmony import */ var _babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "@babel/runtime/helpers/esm/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "@babel/runtime/helpers/esm/createClass");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "@babel/runtime/helpers/esm/defineProperty");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _Utils_Clipboard__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../Utils/Clipboard */ "./src/Components/Viewer/Utils/Clipboard.js");
/* harmony import */ var _Math_Vec3__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../Math/Vec3 */ "./src/Components/Viewer/Math/Vec3.js");
/* harmony import */ var monet__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! monet */ "monet");
/* harmony import */ var monet__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(monet__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var lodash_capitalize__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! lodash/capitalize */ "lodash/capitalize");
/* harmony import */ var lodash_capitalize__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(lodash_capitalize__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @babylonjs/core */ "@babylonjs/core");
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_babylonjs_core__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var _Utils_AnnotationManager__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../Utils/AnnotationManager */ "./src/Components/Viewer/Utils/AnnotationManager.js");
/* harmony import */ var _GlobalRef__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./GlobalRef */ "./src/Components/Viewer/NodeItem/GlobalRef.js");
/* harmony import */ var _Utils_Constants__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../Utils/Constants */ "./src/Components/Viewer/Utils/Constants.js");





function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_3___default()(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }










var NodeItem = /*#__PURE__*/function () {
  function NodeItem(mesh) {
    var _this = this;

    var keyValueMap = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

    _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default()(this, NodeItem);

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_3___default()(this, "getType", function () {
      return NodeItem.TYPE;
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_3___default()(this, "getMouseContextActions", function (mainView) {
      return [{
        title: "Copy",
        onClick: function onClick() {
          return _Utils_Clipboard__WEBPACK_IMPORTED_MODULE_4__["default"].copy(_this.getCopyFunction());
        }
      }, {
        title: "Delete",
        onClick: function onClick() {
          return mainView.getNodeFromTree(_this.name).forEach(function (node) {
            return mainView.onDeleteNode(node, false);
          });
        }
      }];
    });

    this.name = mesh.name;
    this.mesh = mesh;
    this.mesh.getMouseContextActions = this.getMouseContextActions;
    this.mesh.nodeItem = this;
    this.keyValueMap = keyValueMap;
  }

  _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2___default()(NodeItem, [{
    key: "dispose",
    value: function dispose() {
      this.delVertex();
      this.mesh.dispose();
    }
  }, {
    key: "toDict",
    value: function toDict() {
      var _this$mesh,
          _this$mesh2,
          _this2 = this,
          _this$mesh3;

      return {
        name: this.name,
        type: this.getType(),
        position: _Math_Vec3__WEBPACK_IMPORTED_MODULE_5__["default"].ofBabylon((_this$mesh = this.mesh) === null || _this$mesh === void 0 ? void 0 : _this$mesh.position).toArray(),
        quaternion: monet__WEBPACK_IMPORTED_MODULE_6__["Maybe"].fromNull((_this$mesh2 = this.mesh) === null || _this$mesh2 === void 0 ? void 0 : _this$mesh2.rotationQuaternion).map(function (x) {
          return [x.w, x.x, x.y, x.z];
        }).orLazy(function () {
          var q = _babylonjs_core__WEBPACK_IMPORTED_MODULE_8__["Quaternion"].RotationYawPitchRoll(_this2.mesh.rotation.y, _this2.mesh.rotation.x, _this2.mesh.rotation.z);
          return [q.w, q.x, q.y, q.z];
        }),
        color: monet__WEBPACK_IMPORTED_MODULE_6__["Maybe"].fromNull((_this$mesh3 = this.mesh) === null || _this$mesh3 === void 0 ? void 0 : _this$mesh3.material).flatMap(function (x) {
          return monet__WEBPACK_IMPORTED_MODULE_6__["Maybe"].fromNull(x.diffuseColor).map(function (z) {
            return [z.r, z.g, z.b, _this2.mesh.visibility];
          });
        }).orSome([0, 0, 0, 1]),
        keyValueMap: this.keyValueMap,
        isVisible: this.mesh.isEnabled()
      };
    }
    /**
     * Generates json based on https://github.com/rjsf-team/react-jsonschema-form
     */

  }, {
    key: "toForm",
    value: function toForm() {
      var info = this.toDict();
      var color = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_8__["Color3"](info.color[0], info.color[1], info.color[2]);
      var q = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_8__["Quaternion"](info.quaternion[1], info.quaternion[2], info.quaternion[3], info.quaternion[0]);
      var euler = q.toEulerAngles();
      var schema = {
        jsonSchema: {
          type: "object",
          properties: {
            oldName: {
              type: "string"
            },
            name: {
              type: "string",
              title: "Name"
            },
            type: {
              type: "string",
              title: "Type"
            },
            position: {
              type: "object",
              title: "Position",
              properties: {
                x: {
                  type: "number",
                  title: "x"
                },
                y: {
                  type: "number",
                  title: "y"
                },
                z: {
                  type: "number",
                  title: "z"
                }
              }
            },
            rotation: {
              type: "object",
              title: "Rotation",
              properties: {
                x: {
                  type: "number",
                  title: "x"
                },
                y: {
                  type: "number",
                  title: "y"
                },
                z: {
                  type: "number",
                  title: "z"
                }
              }
            },
            color: {
              type: "object",
              title: "Color",
              properties: {
                r: {
                  type: "number"
                },
                g: {
                  type: "number"
                },
                b: {
                  type: "number"
                },
                a: {
                  type: "number"
                }
              }
            }
          }
        },
        uiSchema: {
          type: {
            "ui:disabled": true
          },
          color: {
            "ui:widget": "color"
          },
          oldName: {
            "ui:widget": "hidden"
          },
          position: {
            "ui:widget": "collapse"
          },
          rotation: {
            "ui:widget": "collapse"
          }
        },
        data: {
          oldName: info.name,
          name: info.name,
          type: info.type,
          position: {
            x: info.position[0],
            y: info.position[1],
            z: info.position[2]
          },
          rotation: {
            x: euler.x * _Utils_Constants__WEBPACK_IMPORTED_MODULE_11__["default"].RAD2DEG,
            y: euler.y * _Utils_Constants__WEBPACK_IMPORTED_MODULE_11__["default"].RAD2DEG,
            z: euler.z * _Utils_Constants__WEBPACK_IMPORTED_MODULE_11__["default"].RAD2DEG
          },
          color: {
            r: color.r,
            g: color.g,
            b: color.b,
            a: this.mesh.visibility
          }
        }
      };
      NodeItem.setAnnotations2Form(schema, this.keyValueMap);
      return schema;
    }
    /**
     * Changes NodeItem based on a form
     *
     * Warning: side effect function
     * @param {*} form
     */

  }, {
    key: "ofForm",
    value: function ofForm(form) {
      var _this3 = this;

      this.name = form.name;
      this.mesh.name = form.name;
      monet__WEBPACK_IMPORTED_MODULE_6__["Maybe"].fromNull(form === null || form === void 0 ? void 0 : form.position).forEach(function (position) {
        var pos = [position.x, position.y, position.z].map(Number.parseFloat);
        _this3.mesh.position = _babylonjs_core__WEBPACK_IMPORTED_MODULE_8__["Vector3"].FromArray(pos);
      });
      monet__WEBPACK_IMPORTED_MODULE_6__["Maybe"].fromNull(form === null || form === void 0 ? void 0 : form.rotation).forEach(function (euler) {
        var angles = [euler.x, euler.y, euler.z].map(Number.parseFloat).map(function (deg) {
          return deg * _Utils_Constants__WEBPACK_IMPORTED_MODULE_11__["default"].DEG2RAD;
        });
        _this3.mesh.rotationQuaternion = _babylonjs_core__WEBPACK_IMPORTED_MODULE_8__["Quaternion"].FromEulerAngles.apply(_babylonjs_core__WEBPACK_IMPORTED_MODULE_8__["Quaternion"], _babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default()(angles));
      });

      if (this.mesh.material) {
        var color = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_8__["Color3"](form.color.r, form.color.g, form.color.b);
        this.mesh.material.diffuseColor = color;
        this.mesh.material.emissiveColor = color;
        this.mesh.visibility = form.color.a;
      }

      this.keyValueMap = _objectSpread({}, form.annotations);
    }
  }, {
    key: "getCopyFunction",
    value: function getCopyFunction() {
      var _this4 = this;

      var isForceUpdate = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;
      var nameGenerator = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function (old) {
        return old + "_copy" + _Utils_Clipboard__WEBPACK_IMPORTED_MODULE_4__["default"].getUID();
      };
      // mousePosFromRoot : Vector3
      return function (mousePosFromRoot, someMainView) {
        return someMainView.getSceneMemory().map(function (_ref) {
          var scene = _ref.scene;

          var _someMainView$getRoot = someMainView.getRootNode(),
              rootItem = _someMainView$getRoot.item;

          var copyDict = _this4.toDict();

          copyDict.name = nameGenerator(copyDict.name);
          var newPosArray = _Math_Vec3__WEBPACK_IMPORTED_MODULE_5__["default"].ofBabylon(mousePosFromRoot).toArray(); // preserves z-coordinate

          newPosArray[2] = copyDict.position[2];
          copyDict.position = newPosArray;

          var copiedNodeItem = _this4.ofDict(scene, copyDict, someMainView);

          var copiedMesh = copiedNodeItem.mesh;
          copiedMesh.parent = rootItem.mesh;
          someMainView.addNodeItem2Tree(copiedNodeItem, _GlobalRef__WEBPACK_IMPORTED_MODULE_10__["default"].NAME, true, true, isForceUpdate);
          return copiedNodeItem;
        });
      };
    }
  }, {
    key: "delVertex",
    value: function delVertex() {
      var _this$mesh$graphVerte;

      var delVertex = (_this$mesh$graphVerte = this.mesh.graphVertex) === null || _this$mesh$graphVerte === void 0 ? void 0 : _this$mesh$graphVerte.delVertex;

      if (!delVertex) {
        var _this$mesh4;

        var childrenWithDelVertex = (((_this$mesh4 = this.mesh) === null || _this$mesh4 === void 0 ? void 0 : _this$mesh4._children) || []).filter(function (childMesh) {
          return !!childMesh.graphVertex;
        }).map(function (childMesh) {
          return childMesh.graphVertex.delVertex;
        });

        delVertex = function delVertex() {
          return childrenWithDelVertex.forEach(function (del) {
            return del();
          });
        };
      }

      delVertex();
    } //========================================================================================

    /*                                                                                      *
     *                           Static attributes/methods                                  *
     *                                                                                      */
    //========================================================================================

  }], [{
    key: "mapDict2Mesh",
    value: // side-effect function
    function mapDict2Mesh(dict, mesh) {
      if (!mesh) throw new Error("can't map a null mesh");
      monet__WEBPACK_IMPORTED_MODULE_6__["Maybe"].fromNull(dict).forEach(function (someDict) {
        monet__WEBPACK_IMPORTED_MODULE_6__["Maybe"].fromNull(dict.name).forEach(function (name) {
          return mesh.name = name;
        });
        monet__WEBPACK_IMPORTED_MODULE_6__["Maybe"].fromNull(someDict.position).forEach(function (position) {
          return mesh.position = _Math_Vec3__WEBPACK_IMPORTED_MODULE_5__["default"].of(position).toBabylon();
        });
        monet__WEBPACK_IMPORTED_MODULE_6__["Maybe"].fromNull(someDict.quaternion).forEach(function (quaternion) {
          var babylonQuaternion = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_8__["Quaternion"](quaternion[1], quaternion[2], quaternion[3], quaternion[0]);
          mesh.rotationQuaternion = babylonQuaternion.normalize();
        });
        monet__WEBPACK_IMPORTED_MODULE_6__["Maybe"].fromNull(someDict.color).forEach(function (color) {
          var babylonColor = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_8__["Color3"](color[0], color[1], color[2]);
          monet__WEBPACK_IMPORTED_MODULE_6__["Maybe"].fromNull(mesh.material).forEach(function (material) {
            monet__WEBPACK_IMPORTED_MODULE_6__["Maybe"].fromNull(material.diffuseColor).forEach(function (z) {
              return mesh.material.diffuseColor = babylonColor;
            });
            monet__WEBPACK_IMPORTED_MODULE_6__["Maybe"].fromNull(material.emissiveColor).forEach(function (z) {
              return mesh.material.emissiveColor = babylonColor;
            });
          });
        });
      });
      return mesh;
    } // side effect function

  }, {
    key: "setAnnotations2Form",
    value: function setAnnotations2Form(schema) {
      var keyValueMap = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
      schema.jsonSchema.properties.annotations = {
        title: "Annotations",
        type: "object",
        properties: {}
      };
      schema.uiSchema.annotations = {
        "ui:widget": "collapse"
      };
      schema.data["annotations"] = _objectSpread({}, keyValueMap);
      var annotations = _Utils_AnnotationManager__WEBPACK_IMPORTED_MODULE_9__["default"].getAnnotations();
      ["safety", "behaviour", "localization", "navigation"].forEach(function (annotation) {
        // if (annotations[annotation].labels.length > 0) {
        schema.jsonSchema.properties.annotations.properties[annotation] = {
          title: lodash_capitalize__WEBPACK_IMPORTED_MODULE_7___default()(annotation),
          type: "string"
        };
        schema.uiSchema.annotations[annotation] = {
          "ui:widget": "selectScopeModal",
          "ui:options": {
            scopeList: "Annotation",
            name: lodash_capitalize__WEBPACK_IMPORTED_MODULE_7___default()(annotation),
            filter: function filter(e) {
              return annotations[annotation] && annotations[annotation].names.includes(e.name);
            }
          }
        }; // }
      });
    }
  }, {
    key: "randomId",
    value: function randomId() {
      return "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx".replace(/[xy]/g, function (c) {
        // eslint-disable-next-line no-mixed-operators
        var r = Math.random() * 16 | 0,
            v = c === "x" ? r : r & 0x3 | 0x8;
        return v.toString(16);
      });
    }
  }]);

  return NodeItem;
}();

_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_3___default()(NodeItem, "TYPE", "NodeItem");

/* harmony default export */ __webpack_exports__["default"] = (NodeItem);

/***/ }),

/***/ "./src/Components/Viewer/NodeItem/Path.js":
/*!************************************************!*\
  !*** ./src/Components/Viewer/NodeItem/Path.js ***!
  \************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/extends */ "@babel/runtime/helpers/esm/extends");
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/toConsumableArray */ "@babel/runtime/helpers/esm/toConsumableArray");
/* harmony import */ var _babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "@babel/runtime/helpers/esm/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "@babel/runtime/helpers/esm/createClass");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/assertThisInitialized */ "@babel/runtime/helpers/esm/assertThisInitialized");
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/get */ "@babel/runtime/helpers/esm/get");
/* harmony import */ var _babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "@babel/runtime/helpers/esm/inherits");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "@babel/runtime/helpers/esm/possibleConstructorReturn");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "@babel/runtime/helpers/esm/getPrototypeOf");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "@babel/runtime/helpers/esm/defineProperty");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var _NodeItem__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./NodeItem */ "./src/Components/Viewer/NodeItem/NodeItem.js");
/* harmony import */ var _Math_Vec3__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../Math/Vec3 */ "./src/Components/Viewer/Math/Vec3.js");
/* harmony import */ var _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../Util3d/Util3d */ "./src/Components/Viewer/Util3d/Util3d.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_13__);
/* harmony import */ var monet__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! monet */ "monet");
/* harmony import */ var monet__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(monet__WEBPACK_IMPORTED_MODULE_14__);
/* harmony import */ var _Utils_Constants__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../Utils/Constants */ "./src/Components/Viewer/Utils/Constants.js");
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @babylonjs/core */ "@babylonjs/core");
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(_babylonjs_core__WEBPACK_IMPORTED_MODULE_16__);
/* harmony import */ var mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! mov-fe-lib-core */ "mov-fe-lib-core");
/* harmony import */ var mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_17___default = /*#__PURE__*/__webpack_require__.n(mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_17__);
/* harmony import */ var _GraphItem__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./GraphItem */ "./src/Components/Viewer/NodeItem/GraphItem.js");











function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_8___default()(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_8___default()(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_7___default()(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }










var RADIUS = _Utils_Constants__WEBPACK_IMPORTED_MODULE_15__["default"].RADIUS;

var Path = /*#__PURE__*/function (_NodeItem) {
  _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_6___default()(Path, _NodeItem);

  var _super = _createSuper(Path);

  /**
   * @param {*} mesh
   * @param {*} localPath: is an array of 3-arrays of numbers of the local coordinates in relation to mesh.position and quaternion
   * @param {*} keyPoints: are the keyPoints meshes array
   * @param {*} splinePath: is an array of 3-arrays of numbers of the local coordinates in relation to mesh.position and quaternion
   * @param {*} mainView: MainView
   * @param {*} keyValueMap: annotations
   */
  function Path(mesh, localPath, keyPoints, splinePath, mainView) {
    var _this;

    var weight = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : 1;
    var keyValueMap = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : {};

    _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2___default()(this, Path);

    _this = _super.call(this, mesh, keyValueMap); // Array<Vector3> points in relation to its mean

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), "getType", function () {
      return Path.TYPE;
    });

    _this.localPath = localPath; // Array<Meshes> representing key points of the curve

    _this.keyPoints = keyPoints; // spline points from local path

    _this.splinePath = splinePath;
    _this.selectedKeyPointIndex = -1;
    _this.mainView = mainView;
    _this.weight = weight;
    return _this;
  }

  _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_3___default()(Path, [{
    key: "toDict",
    value: function toDict() {
      var dict = _babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_5___default()(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_8___default()(Path.prototype), "toDict", this).call(this);

      dict.localPath = this.localPath;
      dict.splinePath = this.splinePath;
      dict.weight = this.weight;
      return dict;
    }
  }, {
    key: "toForm",
    value: function toForm() {
      var schema = _babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_5___default()(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_8___default()(Path.prototype), "toForm", this).call(this);

      if (this.selectedKeyPointIndex >= 0) {
        schema.jsonSchema.properties["selectedKeyPoint"] = {
          type: "object",
          title: "KeyPoint ".concat(this.selectedKeyPointIndex),
          properties: {
            x: {
              type: "number",
              title: "x"
            },
            y: {
              type: "number",
              title: "y"
            },
            z: {
              type: "number",
              title: "z"
            }
          }
        };
        schema.uiSchema["selectedKeyPoint"] = {
          "ui:widget": "collapse"
        };
        schema.uiSchema["position"] = {
          "ui:widget": "hidden"
        };
        schema.uiSchema["rotation"] = {
          "ui:widget": "hidden"
        };
        schema.uiSchema["color"] = {
          "ui:widget": "hidden"
        };
        schema.uiSchema["annotations"] = {
          "ui:widget": "hidden"
        };
        var selectedMesh = this.keyPoints[this.selectedKeyPointIndex];
        var position = _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_12__["default"].getGlobalCoordinates(selectedMesh, selectedMesh.position).toArray();
        schema.data["selectedKeyPoint"] = {
          x: position[0],
          y: position[1],
          z: position[2]
        };
        return schema;
      } // re-order attributes


      var props = _objectSpread({}, schema.jsonSchema.properties);

      var newSchema = {
        type: "object",
        properties: {
          oldName: props.oldName,
          name: props.name,
          type: props.type,
          weight: {
            type: "number",
            title: "Weight"
          },
          position: props.position,
          rotation: props.rotation,
          color: props.color,
          annotations: props.annotations
        }
      };
      schema.jsonSchema = newSchema;
      schema.data["weight"] = this.weight;
      return schema;
    }
  }, {
    key: "ofForm",
    value: function ofForm(form) {
      _babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_5___default()(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_8___default()(Path.prototype), "ofForm", this).call(this, form);

      if (this.selectedKeyPointIndex >= 0) {
        var selectedKeyPoint = this.keyPoints[this.selectedKeyPointIndex];
        var formPosition = form.selectedKeyPoint;
        var newPosInWorldCoordinates = _babylonjs_core__WEBPACK_IMPORTED_MODULE_16__["Vector3"].FromArray([formPosition.x, formPosition.y, formPosition.z].map(Number.parseFloat));
        var localPos = _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_12__["default"].getLocalCoordFromGlobal(selectedKeyPoint, newPosInWorldCoordinates).toArray();
        selectedKeyPoint.position = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_16__["Vector3"](localPos[0], localPos[1], localPos[2]);
        selectedKeyPoint.observers.notifyObservers({
          updatedPointMesh: selectedKeyPoint,
          is2updateServer: false
        });
        return;
      }

      this.weight = Number(form.weight);
      this.updatePathEdgeWithForm(this.weight, this.keyValueMap);
    }
  }, {
    key: "updatePathEdgeWithForm",
    value: function updatePathEdgeWithForm(weight, annotations) {
      var _this2 = this;

      this.mainView.getGraph().forEach(function (_ref) {
        var graphItem = _ref.item;
        var graph = graphItem.graph;
        var first = _this2.keyPoints[0];
        var last = _this2.keyPoints[_this2.keyPoints.length - 1];
        var edge = [first, last].filter(function (v) {
          var _v$graphVertex;

          return !!(v !== null && v !== void 0 && (_v$graphVertex = v.graphVertex) !== null && _v$graphVertex !== void 0 && _v$graphVertex.vertex);
        }).map(function (v) {
          return v.graphVertex.vertex;
        });
        if (edge.length < 2) return;
        var edgeIds = edge.map(function (v) {
          return v.id;
        });
        graph.getEdge.apply(graph, _babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default()(edgeIds)).forEach(function (_ref2) {
          var edgeData = _ref2.data;
          edgeData.weight = weight;
          edgeData.keyValueMap = annotations;
        });

        _this2.mainView.updateNodeInServer(graphItem.name);
      });
    }
  }, {
    key: "ofDict",
    value: function ofDict(scene) {
      var dict = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
      var mainView = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;
      return Path.ofDict(scene, dict, mainView);
    }
  }, {
    key: "getCopyFunction",
    value: function getCopyFunction(isForceUpdate, nameGenerator) {
      var _this3 = this;

      // mousePosFromRoot : Vector3
      return function (mousePosFromRoot, someMainView) {
        return _babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_5___default()(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_8___default()(Path.prototype), "getCopyFunction", _this3).call(_this3, isForceUpdate, nameGenerator)(mousePosFromRoot, someMainView).map(function (copiedPath) {
          var kp = copiedPath === null || copiedPath === void 0 ? void 0 : copiedPath.keyPoints;

          if (kp !== undefined && isPathOnGraph(_this3)) {
            Path.updateGraph(someMainView, kp, copiedPath, true);
          }

          return copiedPath;
        });
      };
    }
  }, {
    key: "importFeatures",
    value:
    /**
     * Import path features
     * @param {*} pathItem
     */
    function importFeatures() {
      var pathItem = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : new Path({}, {}, {}, {}, {});
      this.keyValueMap = pathItem.keyValueMap;
      this.weight = pathItem.weight;
    }
  }], [{
    key: "ofDict",
    value: function ofDict(scene) {
      var dict = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
      var mainView = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;
      if (!dict || !mainView) throw new Error("null dictionary describing path or null mainView");
      var name = dict.name;
      var curve = dict.localPath.map(function (z) {
        return _Math_Vec3__WEBPACK_IMPORTED_MODULE_11__["default"].of(z).toBabylon();
      });
      var spline = _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_12__["default"].getSplineFromCurve(curve);
      var points = spline.points;
      var mesh = null; //hack for creating 1 point curves

      if (points.length === 1) {
        mesh = _babylonjs_core__WEBPACK_IMPORTED_MODULE_16__["MeshBuilder"].CreateLines(name, {
          points: points,
          updatable: true
        }, scene);
      } else {
        mesh = _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_12__["default"].createTubeFromPoints(scene, points, _babylonjs_core__WEBPACK_IMPORTED_MODULE_16__["Color3"].Gray(), RADIUS / 8, name);
      }

      mesh.position = _Math_Vec3__WEBPACK_IMPORTED_MODULE_11__["default"].of(dict.position).toBabylon();
      mesh.material = _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_12__["default"].getMaterialFromColor(_babylonjs_core__WEBPACK_IMPORTED_MODULE_16__["Color3"].FromArray(dict.color), scene, "PathMaterial".concat(name));
      mesh.rotationQuaternion = monet__WEBPACK_IMPORTED_MODULE_14__["Maybe"].fromNull(dict.quaternion).map(function (quaternion) {
        return new _babylonjs_core__WEBPACK_IMPORTED_MODULE_16__["Quaternion"](quaternion[1], quaternion[2], quaternion[3], quaternion[0]).normalize();
      }).orSome(_babylonjs_core__WEBPACK_IMPORTED_MODULE_16__["Quaternion"].Identity());
      var splinePath = _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_12__["default"].splineObj2redis(spline);
      var keyPoints = createPlaceHolderKeyPoints(scene, _objectSpread(_objectSpread({}, dict), {}, {
        mesh: mesh,
        splinePath: splinePath
      }), mainView);
      var path2return = new Path(mesh, curve.map(function (point) {
        return [point.x, point.y, point.z];
      }), keyPoints, splinePath, mainView, dict.weight, dict.keyValueMap);
      mesh.onClick = getMeshOnClick(mainView, path2return);
      mesh.observers = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_16__["Observable"]();
      mesh.observers.add(getMeshObserver(keyPoints));
      return path2return;
    }
    /**
     * Create new mesh from old, has side effects
     *
     * @param {*} newPoints: Vector3
     * @param {*} scene: Scene
     * @param {*} item: PathItem
     * @param {*} mainView: MainView
     * @param {*} keyPointUpdateFunction: (scene, mainView, mesh, item) => Array<Mesh>
     */

  }, {
    key: "createNewMeshFromOldUsingNewPoints",
    value: function createNewMeshFromOldUsingNewPoints(newPoints, scene, item, mainView) {
      var keyPointUpdateFunction = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : defaultKeyPointUpdate;
      var oldMesh = item.mesh;
      var average = _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_12__["default"].pointAverage(newPoints);
      newPoints = newPoints.map(function (x) {
        return x.subtract(average);
      });
      var spline = _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_12__["default"].getSplineFromCurve(newPoints);
      var newMesh = _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_12__["default"].createTubeFromPoints(scene, spline.points, _babylonjs_core__WEBPACK_IMPORTED_MODULE_16__["Color3"].Gray(), RADIUS / 8, oldMesh.name); // average in parent coord

      var rotMat3 = _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_12__["default"].getRotationMatrix(oldMesh);
      var scaleVec3 = _Math_Vec3__WEBPACK_IMPORTED_MODULE_11__["default"].ofBabylon(oldMesh.scaling);
      var averageInParentCoord = rotMat3.prodVec(_Math_Vec3__WEBPACK_IMPORTED_MODULE_11__["default"].ofBabylon(average).mul(scaleVec3)).toBabylon();
      newMesh.parent = oldMesh.parent;
      newMesh.rotationQuaternion = oldMesh.rotationQuaternion;
      newMesh.position = averageInParentCoord.add(oldMesh.position);
      newMesh.material = oldMesh.material;
      newMesh.visibility = oldMesh.visibility;
      newMesh.onClick = oldMesh.onClick;
      newMesh.getMouseContextActions = oldMesh.getMouseContextActions;
      newMesh.nodeItem = oldMesh.nodeItem;
      newMesh.observers = oldMesh.observers;
      item.localPath = newPoints.map(function (x) {
        return _Math_Vec3__WEBPACK_IMPORTED_MODULE_11__["default"].ofBabylon(x).toArray();
      });
      item.splinePath = _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_12__["default"].splineObj2redis(spline);
      item.mesh = newMesh;

      var oldKeyPoints = _babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default()(item.keyPoints);

      item.keyPoints = keyPointUpdateFunction(scene, mainView, oldMesh, item); // update children

      var childrenCopy = _babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default()(oldMesh._children);

      childrenCopy.filter(function (c) {
        return mainView.getNodeFromTree(c.name).isJust();
      }).forEach(function (c) {
        c.parent = item.mesh;
      }); // update observer that triggers keypoints observers

      item.mesh.observers.clear();
      item.mesh.observers.add(getMeshObserver(item.keyPoints));
      Path.updateGraph(mainView, oldKeyPoints, item, oldKeyPoints.length !== item.keyPoints.length);
      oldMesh.dispose();
      return item;
    }
  }, {
    key: "deleteKeyPointWithUndo",
    value: function deleteKeyPointWithUndo(scene, keyPointMesh, mainView) {
      var index = keyPointMesh.index;
      var name = keyPointMesh.parent.name;
      mainView.getNodeFromTree(name).forEach(function (_ref3) {
        var item = _ref3.item;
        var mesh = item.mesh;

        var copyPosition = _objectSpread({}, mesh.position);

        var newPoints = item.localPath.map(function (x) {
          return _Math_Vec3__WEBPACK_IMPORTED_MODULE_11__["default"].of(x).toBabylon();
        });
        if (newPoints.length === 2) return;
        mainView.getUndoManager().doIt(Path.getUndoDeleteKeyPoint(name, index, copyPosition, newPoints, scene, item, mainView));
      });
    }
  }, {
    key: "getUndoDeleteKeyPoint",
    value: function getUndoDeleteKeyPoint(name, index, copyPosition, newPoints, scene, item, mainView) {
      return mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_17__["UndoManager"].actionBuilder().doAction(function () {
        var copyPoints = _babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default()(newPoints);

        copyPoints.splice(index, 1);
        Path.createNewMeshFromOldUsingNewPoints(copyPoints, scene, item, mainView, Path.onAddNewPointKeyPointUpdate);
        mainView.updateNodeInServer(name);
      }).undoAction(function (_ref4) {
        var _ref4$is2UpdateInServ = _ref4.is2UpdateInServer,
            is2UpdateInServer = _ref4$is2UpdateInServ === void 0 ? true : _ref4$is2UpdateInServ;

        var copyPoints = _babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default()(newPoints);

        item.mesh.position = copyPosition;
        Path.createNewMeshFromOldUsingNewPoints(copyPoints, scene, item, mainView, Path.onAddNewPointKeyPointUpdate);
        if (is2UpdateInServer) mainView.updateNodeInServer(name);
      }).build();
    }
  }, {
    key: "onAddNewPointKeyPointUpdate",
    value: function onAddNewPointKeyPointUpdate(scene, mainView, oldMesh, item) {
      // used when new keypoint is added
      var keypoints = createPlaceHolderKeyPoints(scene, item, mainView);
      return keypoints;
    }
    /**
     *
     * @param {*} scene
     * @param {*} keyPointMesh
     * @param {*} curveMesh
     * @param {*} mainView
     * @param {*} orientation: it belongs to the set {-1,1}, represents orientation
     */

  }, {
    key: "addKeyPointInBetween",
    value: function addKeyPointInBetween(scene, keyPointMesh, mainView, orientation) {
      var index = keyPointMesh.index;
      var name = keyPointMesh.parent.name;
      mainView.getNodeFromTree(name).forEach(function (_ref5) {
        var item = _ref5.item;
        var points = item.localPath.map(function (x) {
          return _Math_Vec3__WEBPACK_IMPORTED_MODULE_11__["default"].of(x).toBabylon();
        });

        var copyPosition = _objectSpread({}, item.mesh.position);

        mainView.getUndoManager().doIt(Path.getUndoAddKeyPointInBetween(name, index, orientation, item, points, copyPosition, scene, mainView));
      });
    }
  }, {
    key: "getUndoAddKeyPointInBetween",
    value: function getUndoAddKeyPointInBetween(name, index, orientation, item, points, copyPosition, scene, mainView) {
      return mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_17__["UndoManager"].actionBuilder().doAction(function () {
        var nextIndex = index + orientation;
        var numberOfPoints = item.localPath.length;
        var newPoints = [];

        var oldPoints = _babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default()(points);

        if (nextIndex < 0) {
          newPoints = [oldPoints[0].scale(3).subtract(oldPoints[1]).scale(0.5)].concat(oldPoints);
        } else if (nextIndex > numberOfPoints - 1) {
          newPoints = oldPoints.concat([oldPoints[numberOfPoints - 1].scale(3).subtract(oldPoints[numberOfPoints - 2]).scale(0.5)]);
        } else {
          // TODO: consider doing using slice
          var specialIndex = index + Math.max(0, orientation);

          for (var i = 0; i < specialIndex; i++) {
            newPoints.push(oldPoints[i]);
          }

          newPoints.push(oldPoints[nextIndex].add(oldPoints[index]).scale(0.5));

          for (var _i = specialIndex; _i < numberOfPoints; _i++) {
            newPoints.push(oldPoints[_i]);
          }
        }

        Path.createNewMeshFromOldUsingNewPoints(newPoints, scene, item, mainView, Path.onAddNewPointKeyPointUpdate);
        mainView.updateNodeInServer(name);
      }).undoAction(function (_ref6) {
        var _ref6$is2UpdateInServ = _ref6.is2UpdateInServer,
            is2UpdateInServer = _ref6$is2UpdateInServ === void 0 ? true : _ref6$is2UpdateInServ;

        var copyPoints = _babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default()(points);

        item.mesh.position = copyPosition;
        Path.createNewMeshFromOldUsingNewPoints(copyPoints, scene, item, mainView, Path.onAddNewPointKeyPointUpdate);
        if (is2UpdateInServer) mainView.updateNodeInServer(name);
      }).build();
    }
    /**
     *
     * @param {*} mainView: MainView
     * @param {*} oldKpMeshes: Mesh
     * @param {*} pathItem: PathItem
     * @param {*} isTopologyChange: boolean, vertex added or deleted from curve
     */

  }, {
    key: "updateGraph",
    value: function updateGraph(mainView, oldKpMeshes, pathItem, isTopologyChange) {
      if (!isTopologyChange) return;
      mainView.getGraph().forEach(function (_ref7) {
        var graph = _ref7.item;
        var keyPoints = pathItem.keyPoints;
        var edgeMeshes = [keyPoints[0], keyPoints[keyPoints.length - 1]];
        var firstLastKpNeighborEdges = [];
        var firstLastOldKp = [oldKpMeshes[0], oldKpMeshes[oldKpMeshes.length - 1]];
        graph.getEdge.apply(graph, firstLastOldKp).forEach(function (oldEdge) {
          // get keypoint neighbors edges, besides the edge of the path itself
          firstLastOldKp.forEach(function (kp) {
            var edges = [];
            graph.getNeighbors(kp).filter(function (v) {
              return !graph.doMeshesBelong2SamePath(kp, v.mesh);
            }).forEach(function (neigh) {
              edges.push({
                edge: graph.getEdge(kp, neigh.mesh),
                vertex: neigh
              });
            });
            firstLastKpNeighborEdges.push(edges);
          }); // remove old path vertices

          firstLastOldKp.forEach(function (vp) {
            return graph.delVertexFromMesh(vp);
          }); // add new path edge

          graph.addEdge.apply(graph, edgeMeshes);
          graph.getEdge.apply(graph, edgeMeshes).forEach(function (edge) {
            edge.importFeatures(oldEdge);
          }); // add old neighbors to path endpoints

          firstLastKpNeighborEdges.forEach(function (neighborEdges, i) {
            neighborEdges.forEach(function (edgeVertexObj) {
              graph.addEdge(edgeMeshes[i], edgeVertexObj.vertex.mesh);
              graph.getEdge(edgeMeshes[i], edgeVertexObj.vertex.mesh).forEach(function (edge) {
                return edgeVertexObj.edge.forEach(function (oldNeighEdge) {
                  edge.importFeatures(oldNeighEdge);
                });
              });
            });
          });
          mainView.updateNodeInServer(graph.name);
        });
      });
    }
  }, {
    key: "isKeyPointMesh",
    value: function isKeyPointMesh(mesh, mainView) {
      return Number.isInteger(mesh.index) && mainView.getNodeFromTree(mesh.parent.name).filter(function (_ref8) {
        var item = _ref8.item;
        return item.getType() === Path.TYPE;
      }).orSome(false);
    }
    /**
     *
     * @param {*} left: keypoint mesh
     * @param {*} right: keypoint mesh
     * @param {*} mainView
     */

  }, {
    key: "areKeyPointsCompatible",
    value: function areKeyPointsCompatible(left, right, mainView) {
      return mainView.getNodeFromTree(left.parent.name).flatMap(function (_ref9) {
        var leftPath = _ref9.item;
        return mainView.getNodeFromTree(right.parent.name).map(function (_ref10) {
          var rightPath = _ref10.item;
          var i = left.index;
          var j = right.index;
          var n = leftPath.localPath.length;
          var m = rightPath.localPath.length; // keypoint must be a boundary

          if (!((i === 0 || i === n - 1) && (j === 0 || j === m - 1))) return false;
          i = i === 0 ? 1 : -1;
          j = j === 0 ? 1 : -1; // must preserve orientation

          if (i * j > 0) return false;
          return true;
        });
      }).orSome(false);
    }
    /**
     * Merge simple paths, function
     * Not commutative action
     * @param {*} leftPath
     * @param {*} rightPath
     * @param {*} mergeName
     * @param {*} mainView
     */

  }, {
    key: "mergePaths",
    value: function mergePaths(leftPathName, rightPathName, mergeName, mainView) {
      mainView.getNodeFromTree(leftPathName).forEach(function (_ref11) {
        var leftPath = _ref11.item;
        mainView.getNodeFromTree(rightPathName).forEach(function (_ref12) {
          var rightPath = _ref12.item;
          var parent = leftPath.mesh.parent;

          var leftChildren = leftPath.mesh._children.filter(function (kp) {
            return kp.index === undefined;
          });

          var rightChildren = rightPath.mesh._children.filter(function (kp) {
            return kp.index === undefined;
          });

          var leftDict = leftPath.toDict();
          var rightPointsInLeftCoord = rightPath.keyPoints.splice(1).map(function (kp) {
            return _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_12__["default"].getLocalCoordFromWorld({
              parent: leftPath.mesh
            }, _Math_Vec3__WEBPACK_IMPORTED_MODULE_11__["default"].ofBabylon(kp.absolutePosition));
          });
          leftDict.name = mergeName; // concat new path

          leftDict.localPath = leftDict.localPath.concat(rightPointsInLeftCoord.map(function (kp) {
            return kp.toArray();
          }));
          var average = _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_12__["default"].pointAverageVec3(leftDict.localPath.map(function (x) {
            return _Math_Vec3__WEBPACK_IMPORTED_MODULE_11__["default"].of(x);
          })); // center curve

          leftDict.localPath = leftDict.localPath.map(function (x) {
            return _Math_Vec3__WEBPACK_IMPORTED_MODULE_11__["default"].of(x).sub(average).toArray();
          });
          mainView.getSceneMemory().forEach(function (_ref13) {
            var scene = _ref13.scene;
            var newPath = Path.ofDict(scene, leftDict, mainView);
            newPath.mesh.parent = parent;
            newPath.mesh.translate(average.toBabylon(), 1, _babylonjs_core__WEBPACK_IMPORTED_MODULE_16__["Space"].LOCAL); //import default features

            newPath.importFeatures();
            mainView.addNodeItem2Tree(newPath, parent.name);
            Path.addEdgesInKeyPoints(newPath.keyPoints, scene, mainView);
            leftChildren.forEach(function (child) {
              mainView.getNodeFromTree(child.name).forEach(function (_ref14) {
                var item = _ref14.item;
                mainView.updateNodeItemInTree(item, newPath.name);
                var newChildPos = _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_12__["default"].getLocalCoordFromWorld({
                  parent: newPath.mesh
                }, _Math_Vec3__WEBPACK_IMPORTED_MODULE_11__["default"].ofBabylon(child.absolutePosition));
                child.position = newChildPos.toBabylon();
                child.parent = newPath.mesh;
              });
            });
            rightChildren.forEach(function (child) {
              mainView.getNodeFromTree(child.name).forEach(function (_ref15) {
                var item = _ref15.item;
                mainView.updateNodeItemInTree(item, newPath.name);
                var newChildPos = _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_12__["default"].getLocalCoordFromWorld({
                  parent: newPath.mesh
                }, _Math_Vec3__WEBPACK_IMPORTED_MODULE_11__["default"].ofBabylon(child.absolutePosition));
                child.position = newChildPos.toBabylon();
                child.parent = newPath.mesh;
              });
            });
            mainView.deleteNodeFromTreeUsingName(leftPath.name);
            mainView.deleteNodeFromTreeUsingName(rightPath.name);
          });
        });
      });
    }
  }, {
    key: "unMergePaths",
    value: function unMergePaths(oldPaths, mergeName, mainView) {
      var is2UpdateInServer = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;
      oldPaths.forEach(function (path) {
        mainView.getSceneMemory().forEach(function (_ref16) {
          var scene = _ref16.scene;
          var pathItem = Path.ofDict(scene, path.dict, mainView);
          pathItem.mesh.parent = path.parent;
          mainView.addNodeItem2Tree(pathItem, path.parent.name, is2UpdateInServer);
          Path.addEdgesInKeyPoints(pathItem.keyPoints, scene, mainView, is2UpdateInServer);
          path.children.forEach(function (child) {
            mainView.getNodeFromTree(child.name).forEach(function (_ref17) {
              var item = _ref17.item;
              mainView.updateNodeItemInTree(item, pathItem.name, is2UpdateInServer);
              var newChildPos = _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_12__["default"].getLocalCoordFromWorld({
                parent: pathItem.mesh
              }, _Math_Vec3__WEBPACK_IMPORTED_MODULE_11__["default"].ofBabylon(child.absolutePosition));
              child.position = newChildPos.toBabylon();
              child.parent = pathItem.mesh;
            });
          });
        });
      });
      mainView.deleteNodeFromTreeUsingName(mergeName, is2UpdateInServer);
    }
  }, {
    key: "addEdgesInKeyPoints",
    value: function addEdgesInKeyPoints(keyPointMeshes, scene, mainView) {
      var is2UpdateInServer = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;
      _GraphItem__WEBPACK_IMPORTED_MODULE_18__["default"].createGraphItemIfNone(scene, mainView);
      mainView.getGraph().forEach(function (_ref18) {
        var graph = _ref18.item;
        var edgeMeshes = [keyPointMeshes[0], keyPointMeshes[keyPointMeshes.length - 1]];
        graph.addEdge.apply(graph, edgeMeshes);
        if (is2UpdateInServer) mainView.updateNodeInServer(graph.name);
      });
    }
  }]);

  return Path;
}(_NodeItem__WEBPACK_IMPORTED_MODULE_10__["default"]);

_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(Path, "TYPE", "Path");

/* harmony default export */ __webpack_exports__["default"] = (Path);

var getMeshOnClick = function getMeshOnClick(mainView, nodeItem) {
  return function () {
    mainView.closeContextDial();
    mainView.getNodeFromTree(nodeItem.name).forEach(function (node) {
      return node.item.selectedKeyPointIndex = -1;
    });
  };
};

var getMeshObserver = function getMeshObserver(keypoints) {
  return function (_ref19) {
    var updatedPointMesh = _ref19.updatedPointMesh,
        is2updateServer = _ref19.is2updateServer,
        displacement = _ref19.displacement;
    keypoints.forEach(function (k) {
      if (!!k.graphVertex) {
        k.graphVertex.vertexObs({
          updatedPointMesh: k,
          is2updateServer: is2updateServer,
          displacement: displacement
        });
      }
    });
  };
};

function defaultKeyPointUpdate(scene, mainView, oldMesh, item) {
  // used when key point is updated
  var childrenCopy = _babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default()(oldMesh._children);

  var spline = item.splinePath.map(function (z) {
    return new _babylonjs_core__WEBPACK_IMPORTED_MODULE_16__["Vector3"](z[0], z[1], 0);
  });
  childrenCopy.forEach(function (c) {
    c.parent = item.mesh;
  });
  return item.keyPoints.map(function (k, i) {
    k.index = i;
    k.name = "".concat(oldMesh.name, "keyPointSpline").concat(i);
    k.position = _Math_Vec3__WEBPACK_IMPORTED_MODULE_11__["default"].of(item.localPath[i]).toBabylon();
    k.rotationQuaternion = _babylonjs_core__WEBPACK_IMPORTED_MODULE_16__["Quaternion"].Identity();
    if (!!oldMesh.graphVertex) k.graphVertex = oldMesh.graphVertex;

    if (i > 0 && i < item.keyPoints.length - 1) {
      k._children.forEach(function (kChild) {
        return kChild.dispose();
      });

      var c = getConeMesh(scene, k.material.diffuseColor, item.mesh, i, spline, k.position)();
      c.parent = k;
    }

    return k;
  });
}

var getKeyPointObserverFunction = function getKeyPointObserverFunction(scene, mainView) {
  return function (_ref20) {
    var updatedPointMesh = _ref20.updatedPointMesh,
        is2updateServer = _ref20.is2updateServer,
        displacement = _ref20.displacement;
    if (!updatedPointMesh.parent) return;
    mainView.getNodeFromTree(updatedPointMesh.parent.name).forEach(function (_ref21) {
      var item = _ref21.item;
      var index = updatedPointMesh.index;
      var mesh = item.mesh;
      var newPoints = item.localPath.map(function (x) {
        return _Math_Vec3__WEBPACK_IMPORTED_MODULE_11__["default"].of(x).toBabylon();
      });
      newPoints[index] = updatedPointMesh.position;
      Path.createNewMeshFromOldUsingNewPoints(newPoints, scene, item, mainView);

      if (index > 0 && index < newPoints.length - 1) {
        // we know by construction that this keyPoint has children
        mainView.highlightMeshesInScene([item.keyPoints[index]._children[0]]);
      }

      if (is2updateServer) {
        mainView.updateNodeInServer(mesh.name);
        mainView.setProperties(item.toForm());
      }
    });
  };
};

var getKeyPointActions = function getKeyPointActions(scene, keyPointMesh, mainView) {
  var actions = [];
  mainView.getNodeFromTree(keyPointMesh.parent.name).forEach(function (pathTreeNode) {
    var item = pathTreeNode.item;
    var curve = item.localPath;

    if (curve.length !== 2) {
      actions.push({
        icon: function icon(props) {
          return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_13___default.a.createElement("i", _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0___default()({
            className: "fas fa-trash"
          }, props));
        },
        action: function action(parentView) {
          Path.deleteKeyPointWithUndo(scene, keyPointMesh, parentView);
          parentView.closeContextDial();
        },
        name: "Delete node [DEL]"
      });
    }

    actions.push({
      icon: function icon(props) {
        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_13___default.a.createElement("i", _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0___default()({
          className: "fas fa-less-than"
        }, props));
      },
      action: function action(parentView) {
        Path.addKeyPointInBetween(scene, keyPointMesh, parentView, -1);
        parentView.closeContextDial();
      },
      name: "Add previous"
    });
    actions.push({
      icon: function icon(props) {
        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_13___default.a.createElement("i", _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0___default()({
          className: "fas fa-greater-than"
        }, props));
      },
      action: function action(parentView) {
        Path.addKeyPointInBetween(scene, keyPointMesh, parentView, 1);
        parentView.closeContextDial();
      },
      name: "Add next"
    });
  });
  return actions;
};

var createPlaceHolderKeyPoints = function createPlaceHolderKeyPoints(scene, pseudoItem, mainView) {
  var color = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_16__["Color3"](0.25, 0.25, 0.25);
  var keyPoints = [];
  var curve = pseudoItem.localPath.map(function (z) {
    return _Math_Vec3__WEBPACK_IMPORTED_MODULE_11__["default"].of(z).toBabylon();
  });
  var spline = pseudoItem.splinePath.map(function (z) {
    return new _babylonjs_core__WEBPACK_IMPORTED_MODULE_16__["Vector3"](z[0], z[1], 0);
  });
  var curveMesh = pseudoItem.mesh;
  curve.forEach(function (p, i) {
    var sphere = getSphereMesh(scene, color, curveMesh, i);

    var cone = function cone() {
      var c = getConeMesh(scene, color, curveMesh, i, spline, p)();
      var s = getSphereMesh(scene, color, curveMesh, i)();
      s.visibility = 0.1;
      c.parent = s;
      return s;
    };

    var keyPoint = i === 0 || i === curve.length - 1 ? sphere() : cone();
    keyPoint.parent = curveMesh;
    keyPoint.position = p;
    keyPoint.index = i;
    keyPoint.observers = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_16__["Observable"]();
    keyPoints.push(keyPoint);
    keyPoint.observers.add(getKeyPointObserverFunction(scene, mainView));
  });
  keyPoints.forEach(function (kp) {
    kp.onClick = function () {
      mainView.setContextActions(getKeyPointActions(scene, kp, mainView));
      mainView.getNodeFromTree(kp.parent.name).forEach(function (node) {
        node.item.selectedKeyPointIndex = kp.index;
        mainView.setProperties(node.item.toForm());
      });
    };

    kp.getMouseContextActions = getKpMouseContextActions(scene, kp, pseudoItem.name);

    kp.onDel = function () {
      return Path.deleteKeyPointWithUndo(scene, kp, mainView);
    };
  });
  return keyPoints;
};

function getKpMouseContextActions(scene, kp, pathName) {
  return function (mainView) {
    var actions = [];
    mainView.getNodeFromTree(pathName).forEach(function (_ref22) {
      var pathItem = _ref22.item;
      var n = pathItem.localPath.length;

      if (n <= 2) {
        return;
      }

      if (kp.index > 0 && kp.index < n - 1) {
        actions.push({
          title: "Split curve",
          onClick: function onClick() {
            mainView.getUndoManager().doIt(mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_17__["UndoManager"].actionBuilder().doAction(function () {
              splitCurve(mainView, scene, kp, pathItem.name);
            }).undoAction(function (_ref23) {
              var _ref23$is2UpdateInSer = _ref23.is2UpdateInServer,
                  is2UpdateInServer = _ref23$is2UpdateInSer === void 0 ? true : _ref23$is2UpdateInSer;
              unSplitCurve(mainView, scene, pathItem, is2UpdateInServer);
            }).build());
          }
        });
      }
    });
    actions.push({
      title: "Delete point",
      onClick: function onClick() {
        Path.deleteKeyPointWithUndo(scene, kp, mainView);
      }
    });
    return actions;
  };
}

function splitCurve(mainView, scene, kp, pathName) {
  // TODO: very similar to unSplitCurve
  mainView.getGraph().forEach(function (_ref24) {
    var graph = _ref24.item;
    mainView.getNodeFromTree(pathName).forEach(function (_ref25) {
      var item = _ref25.item;
      var edgesByCurveBoundary = [[], []];
      var oldPath = item.localPath;
      var oldCenter = _Math_Vec3__WEBPACK_IMPORTED_MODULE_11__["default"].ofBabylon(item.mesh.position);
      var pathParent = item === null || item === void 0 ? void 0 : item.mesh.parent; // creating split path positions

      var splitAtIndex = kp.index;
      var splitPath = [[], []];
      oldPath.forEach(function (point, i) {
        if (i <= splitAtIndex) {
          splitPath[0].push(point);
        } else {
          if (i === splitAtIndex + 1) splitPath[1].push(oldPath[splitAtIndex]);
          splitPath[1].push(point);
        }
      }); // retrieve edges from path boundary

      var keyPoints = item.keyPoints;
      var boundary = [keyPoints[0], keyPoints[keyPoints.length - 1]];
      boundary.forEach(function (keyPoint, i) {
        graph.getNeighbors(keyPoint).filter(function (v) {
          return !graph.doMeshesBelong2SamePath(keyPoint, v.mesh);
        }).forEach(function (neigh) {
          edgesByCurveBoundary[i].push({
            edge: graph.getEdge(keyPoint, neigh.mesh),
            vertex: neigh
          });
        });
      }); // delete boundary vertex from graph

      boundary.forEach(function (keyPoint) {
        graph.delVertexFromMesh(keyPoint);
      }); // remove old path

      mainView.deleteNodeFromTreeUsingName(pathName); // create new paths

      splitPath.forEach(function (localPath, i) {
        // set props of new paths from old path
        var middlePoint = _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_12__["default"].pointAverage(localPath.map(function (p) {
          return _Math_Vec3__WEBPACK_IMPORTED_MODULE_11__["default"].of(p).toBabylon();
        }));
        var centeredCurve = localPath.map(function (v) {
          return _Math_Vec3__WEBPACK_IMPORTED_MODULE_11__["default"].of(v).sub(_Math_Vec3__WEBPACK_IMPORTED_MODULE_11__["default"].ofBabylon(middlePoint)).toBabylon();
        }); // set colorArray

        var colorArray = [];
        item.mesh.material.diffuseColor.toArray(colorArray); // set quaternion

        var quaternion = item.mesh.rotationQuaternion.clone() || _babylonjs_core__WEBPACK_IMPORTED_MODULE_16__["Quaternion"].Identity();
        var quaternionArray = [quaternion.w, quaternion.x, quaternion.y, quaternion.z];
        var newPath = Path.ofDict(scene, {
          name: i === 0 ? pathName : "".concat(pathName, "_split").concat(numberOfSplits++),
          position: oldCenter.toArray(),
          quaternion: quaternionArray,
          color: colorArray,
          localPath: centeredCurve.map(function (z) {
            return _Math_Vec3__WEBPACK_IMPORTED_MODULE_11__["default"].ofBabylon(z).toArray();
          })
        }, mainView);
        newPath.mesh.translate(middlePoint, 1, _babylonjs_core__WEBPACK_IMPORTED_MODULE_16__["Space"].LOCAL);
        newPath.mesh.parent = pathParent;
        newPath.importFeatures(item);
        mainView.addNodeItem2Tree(newPath, pathParent.name); // add edge of new path

        var newKeyPoints = newPath.keyPoints;
        var newEdge = [newKeyPoints[0], newKeyPoints[newKeyPoints.length - 1]];
        graph.addEdge.apply(graph, newEdge);
        graph.getEdge.apply(graph, newEdge).forEach(function (edge) {
          edge.importFeatures(newPath);
        }); // add old edges to the new paths

        edgesByCurveBoundary[i].forEach(function (edgeVertexObj) {
          graph.addEdge(newEdge[i], edgeVertexObj.vertex.mesh);
          graph.getEdge(newEdge[i], edgeVertexObj.vertex.mesh).forEach(function (edge) {
            edgeVertexObj.edge.forEach(function (oldNeighEdge) {
              edge.importFeatures(oldNeighEdge);
            });
          });
        });
      });
      mainView.updateNodeInServer(graph.name);
    });
  });
}

function unSplitCurve(mainView, scene, oldPathItem) {
  var is2UpdateInServer = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;
  mainView.getGraph().forEach(function (_ref26) {
    var graph = _ref26.item;
    var oldPathName = oldPathItem.name;
    var oldPathNameSplit = "".concat(oldPathName, "_split").concat(--numberOfSplits);
    mainView.getNodeFromTree(oldPathName).forEach(function (_ref27) {
      var leftSplit = _ref27.item;
      mainView.getNodeFromTree(oldPathNameSplit).forEach(function (_ref28) {
        var rightSplit = _ref28.item;
        var pathParent = leftSplit.mesh.parent;
        var edgesByCurveBoundary = [[], []]; // retrieve edges from split paths

        var boundary = [leftSplit.keyPoints[0], rightSplit.keyPoints[rightSplit.keyPoints.length - 1]];
        boundary.forEach(function (keyPoint, i) {
          graph.getNeighbors(keyPoint).filter(function (v) {
            return !graph.doMeshesBelong2SamePath(keyPoint, v.mesh);
          }).forEach(function (neigh) {
            edgesByCurveBoundary[i].push({
              edge: graph.getEdge(keyPoint, neigh.mesh),
              vertex: neigh
            });
          });
        }); // delete graph vertices from split path
        // delete boundary vertex from graph

        boundary.forEach(function (keyPoint) {
          graph.delVertexFromMesh(keyPoint);
        }); // remove split paths

        mainView.deleteNodeFromTreeUsingName(oldPathName, is2UpdateInServer);
        mainView.deleteNodeFromTreeUsingName(oldPathNameSplit, is2UpdateInServer); // create oldPathItem
        // set colorArray

        var colorArray = [];
        oldPathItem.mesh.material.diffuseColor.toArray(colorArray);
        var newPath = Path.ofDict(scene, {
          name: oldPathName,
          position: _Math_Vec3__WEBPACK_IMPORTED_MODULE_11__["default"].ofBabylon(oldPathItem.mesh.position).toArray(),
          color: colorArray,
          localPath: oldPathItem.localPath
        }, mainView);
        newPath.mesh.parent = pathParent;
        newPath.importFeatures(oldPathItem);
        mainView.addNodeItem2Tree(newPath, pathParent.name, is2UpdateInServer); // add oldPathItem path edge

        var newKeyPoints = newPath.keyPoints;
        var newEdge = [newKeyPoints[0], newKeyPoints[newKeyPoints.length - 1]];
        graph.addEdge.apply(graph, newEdge);
        graph.getEdge.apply(graph, newEdge).forEach(function (edge) {
          edge.importFeatures(newPath);
        }); // add boundary edges of the split

        edgesByCurveBoundary.forEach(function (edges, i) {
          edges.forEach(function (edgeVertexObj) {
            graph.addEdge(newEdge[i], edgeVertexObj.vertex.mesh);
            graph.getEdge(newEdge[i], edgeVertexObj.vertex.mesh).forEach(function (edge) {
              edgeVertexObj.edge.forEach(function (oldNeighEdge) {
                edge.importFeatures(oldNeighEdge);
              });
            });
          });
        });
        if (is2UpdateInServer) mainView.updateNodeInServer(graph.name);
      });
    });
  });
}

function getConeMesh(scene, color, curveMesh, i, spline, p) {
  return function () {
    var index = spline.map(function (z) {
      return p.subtract(z).length();
    }).reduce(function (e, x, i) {
      return e.value < x ? e : {
        value: x,
        index: i
      };
    }, {
      value: Number.MAX_VALUE,
      index: -1
    }).index;
    var nextSplinePoint = spline[index + 1] ? spline[index + 1] : spline[index];
    var currentSplinePoint = spline[index];
    var u = nextSplinePoint.subtract(currentSplinePoint).normalize().scale(RADIUS);
    var c = _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_12__["default"].createOrientedCone(scene, u, color, "".concat(curveMesh.name, "keyPointCone").concat(i), false);
    return c;
  };
}

function getSphereMesh(scene, color, curveMesh, i) {
  return function () {
    return _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_12__["default"].createSphere(scene, color, RADIUS, "".concat(curveMesh.name, "keyPointSpline").concat(i), true);
  };
}

function isPathOnGraph(pathItem) {
  var _pathItem$keyPoints$, _pathItem$keyPoints;

  return [(_pathItem$keyPoints$ = pathItem.keyPoints[0]) === null || _pathItem$keyPoints$ === void 0 ? void 0 : _pathItem$keyPoints$.graphVertex, (_pathItem$keyPoints = pathItem.keyPoints[pathItem.keyPoints.length - 1]) === null || _pathItem$keyPoints === void 0 ? void 0 : _pathItem$keyPoints.graphVertex].every(function (v) {
    return !!v;
  });
}

var numberOfSplits = 0;

/***/ }),

/***/ "./src/Components/Viewer/NodeItem/PointCloud.js":
/*!******************************************************!*\
  !*** ./src/Components/Viewer/NodeItem/PointCloud.js ***!
  \******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "@babel/runtime/helpers/esm/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "@babel/runtime/helpers/esm/createClass");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/assertThisInitialized */ "@babel/runtime/helpers/esm/assertThisInitialized");
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/get */ "@babel/runtime/helpers/esm/get");
/* harmony import */ var _babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "@babel/runtime/helpers/esm/inherits");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "@babel/runtime/helpers/esm/possibleConstructorReturn");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "@babel/runtime/helpers/esm/getPrototypeOf");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "@babel/runtime/helpers/esm/defineProperty");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _NodeItem__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./NodeItem */ "./src/Components/Viewer/NodeItem/NodeItem.js");
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @babylonjs/core */ "@babylonjs/core");
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(_babylonjs_core__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var monet__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! monet */ "monet");
/* harmony import */ var monet__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(monet__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! mov-fe-lib-core */ "mov-fe-lib-core");
/* harmony import */ var mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_11__);









function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6___default()(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6___default()(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5___default()(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }





var ofNull = mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_11__["Utils"].ofNull;

var PointCloud = /*#__PURE__*/function (_NodeItem) {
  _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4___default()(PointCloud, _NodeItem);

  var _super = _createSuper(PointCloud);

  /**
   *
   * @param {*} mesh
   * @param {*} robot: {name: string, id: string} representing a robot
   */
  function PointCloud(mesh, robot) {
    var _this;

    _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default()(this, PointCloud);

    _this = _super.call(this, mesh);

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default()(_this), "getType", function () {
      return PointCloud.TYPE;
    });

    _this.robot = robot;

    _this.pointCloudSubscribe();

    return _this;
  }

  _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1___default()(PointCloud, [{
    key: "pointCloudSubscribe",
    value: function pointCloudSubscribe() {
      var _this2 = this;

      mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_11__["MasterDB"].subscribe({
        Scope: "Robot",
        Name: this.robot.id,
        Parameter: "front_lidar"
      }, function (data) {
        monet__WEBPACK_IMPORTED_MODULE_10__["Maybe"].fromNull(data).flatMap(function (d) {
          return ofNull(d.key);
        }).flatMap(function (k) {
          return ofNull(k.Robot[_this2.robot.id]);
        }).flatMap(function (r) {
          return ofNull(r.Parameter);
        }).flatMap(function (p) {
          return ofNull(p.front_lidar);
        }).flatMap(function (f) {
          return ofNull(f.Value);
        }).flatMap(function (v) {
          return ofNull(v.points);
        }).forEach(function (points) {
          return _this2.updatePointCloud(points);
        });
      }, function (data) {
        monet__WEBPACK_IMPORTED_MODULE_10__["Maybe"].fromNull(data.value).flatMap(function (v) {
          return ofNull(v.Robot);
        }).flatMap(function (r) {
          return ofNull(r[_this2.robot.id]);
        }).flatMap(function (r) {
          return ofNull(r.Parameter);
        }).flatMap(function (p) {
          return ofNull(p.front_lidar);
        }).flatMap(function (f) {
          return ofNull(f.Value);
        }).flatMap(function (v) {
          return ofNull(v.points);
        }).forEach(function (points) {
          return _this2.updatePointCloud(points);
        });
      });
    }
    /**
     *
     * @param {*} points: Array<3-Array>
     */

  }, {
    key: "updatePointCloud",
    value: function updatePointCloud(points) {
      var vertexData = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_9__["VertexData"](); //Assign positions

      vertexData.positions = points.flatMap(function (x) {
        return x;
      });
      var colors = new Array(4 * points.length);
      vertexData.colors = colors.fill(1.0); //Apply vertexData to custom mesh

      vertexData.applyToMesh(this.mesh, true);
    }
  }, {
    key: "dispose",
    value: function dispose() {
      _babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_3___default()(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6___default()(PointCloud.prototype), "dispose", this).call(this);

      mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_11__["MasterDB"].unsubscribe({
        Scope: "Robot",
        Name: this.robot.id,
        Parameter: "front_lidar"
      });
    }
  }], [{
    key: "ofDict",
    value: function ofDict(scene) {
      var dict = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
      var mainView = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;
      if (!dict || !mainView) throw new Error("null dictionary describing point cloud or null mainView");
      var pointCloudMesh = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_9__["Mesh"]("cloudPoint".concat(dict.name), scene);
      var mat = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_9__["StandardMaterial"]("cloudPoint".concat(dict.name, "Material"), scene);
      mat.emissiveColor = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_9__["Color3"](1, 1, 1);
      mat.disableLighting = true;
      mat.pointsCloud = true;
      mat.pointSize = 2;
      pointCloudMesh.material = mat;
      return new PointCloud(pointCloudMesh, dict);
    }
  }]);

  return PointCloud;
}(_NodeItem__WEBPACK_IMPORTED_MODULE_8__["default"]);

_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7___default()(PointCloud, "TYPE", "PointCloud");

/* harmony default export */ __webpack_exports__["default"] = (PointCloud);

/***/ }),

/***/ "./src/Components/Viewer/NodeItem/PolygonRegion.js":
/*!*********************************************************!*\
  !*** ./src/Components/Viewer/NodeItem/PolygonRegion.js ***!
  \*********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/extends */ "@babel/runtime/helpers/esm/extends");
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/toConsumableArray */ "@babel/runtime/helpers/esm/toConsumableArray");
/* harmony import */ var _babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "@babel/runtime/helpers/esm/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "@babel/runtime/helpers/esm/createClass");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/assertThisInitialized */ "@babel/runtime/helpers/esm/assertThisInitialized");
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/get */ "@babel/runtime/helpers/esm/get");
/* harmony import */ var _babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "@babel/runtime/helpers/esm/inherits");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "@babel/runtime/helpers/esm/possibleConstructorReturn");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "@babel/runtime/helpers/esm/getPrototypeOf");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "@babel/runtime/helpers/esm/defineProperty");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var _NodeItem__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./NodeItem */ "./src/Components/Viewer/NodeItem/NodeItem.js");
/* harmony import */ var _Math_Vec3__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../Math/Vec3 */ "./src/Components/Viewer/Math/Vec3.js");
/* harmony import */ var _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../Util3d/Util3d */ "./src/Components/Viewer/Util3d/Util3d.js");
/* harmony import */ var monet__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! monet */ "monet");
/* harmony import */ var monet__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(monet__WEBPACK_IMPORTED_MODULE_13__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_14__);
/* harmony import */ var mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! mov-fe-lib-core */ "mov-fe-lib-core");
/* harmony import */ var mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_15__);
/* harmony import */ var _Utils_Constants__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../Utils/Constants */ "./src/Components/Viewer/Utils/Constants.js");
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @babylonjs/core */ "@babylonjs/core");
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_17___default = /*#__PURE__*/__webpack_require__.n(_babylonjs_core__WEBPACK_IMPORTED_MODULE_17__);











function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_8___default()(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_8___default()(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_7___default()(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }










var RADIUS = _Utils_Constants__WEBPACK_IMPORTED_MODULE_16__["default"].RADIUS;
var positiveMod = mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_15__["Utils"].mod;

var PolygonRegion = /*#__PURE__*/function (_NodeItem) {
  _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_6___default()(PolygonRegion, _NodeItem);

  var _super = _createSuper(PolygonRegion);

  /**
   * @param {*} mesh
   * @param {*} localPolygon: is an array of 3-arrays of numbers of the local coordinates in relation to mesh.position and quaternion
   * @param {*} keyPoints: are the keyPoints meshes array
   */
  function PolygonRegion(mesh, localPolygon, height, keyPoints) {
    var _this;

    var keyValueMap = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};
    var navigationAllowed = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : true;

    _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2___default()(this, PolygonRegion);

    _this = _super.call(this, mesh, keyValueMap);

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), "getType", function () {
      return PolygonRegion.TYPE;
    });

    _this.localPolygon = localPolygon;
    _this.height = height;
    _this.keyPoints = keyPoints;
    _this.navigationAllowed = navigationAllowed;
    return _this;
  }

  _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_3___default()(PolygonRegion, [{
    key: "toDict",
    value: function toDict() {
      var dict = _babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_5___default()(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_8___default()(PolygonRegion.prototype), "toDict", this).call(this);

      dict.localPolygon = this.localPolygon;
      dict.height = this.height;
      dict.navigationAllowed = this.navigationAllowed;
      return dict;
    }
  }, {
    key: "ofDict",
    value: function ofDict(scene) {
      var dict = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
      var mainView = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;
      return PolygonRegion.ofDict(scene, dict, mainView);
    }
  }, {
    key: "toForm",
    value: function toForm() {
      var schema = _babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_5___default()(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_8___default()(PolygonRegion.prototype), "toForm", this).call(this);

      var props = _objectSpread({}, schema.jsonSchema.properties);

      var newJsonSchema = {
        type: "object",
        properties: {
          oldName: props.oldName,
          name: props.name,
          type: props.type,
          navigationAllowed: {
            type: "boolean",
            title: "Navigation allowed"
          },
          position: props.position,
          rotation: props.rotation,
          color: props.color,
          annotations: props.annotations
        }
      };
      schema.jsonSchema = newJsonSchema;
      schema.data["navigationAllowed"] = this.navigationAllowed;
      return schema;
    }
  }, {
    key: "ofForm",
    value: function ofForm(form) {
      _babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_5___default()(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_8___default()(PolygonRegion.prototype), "ofForm", this).call(this, form);

      this.navigationAllowed = Boolean(form.navigationAllowed);
    }
  }], [{
    key: "ofDict",
    value: function ofDict(scene) {
      var dict = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
      var mainView = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;
      if (!dict || !mainView) throw new Error("null dictionary describing polygon or null mainView");
      var polygon = dict.localPolygon.map(function (z) {
        return _Math_Vec3__WEBPACK_IMPORTED_MODULE_11__["default"].of(z).toBabylon();
      });
      var middlePoint = _Math_Vec3__WEBPACK_IMPORTED_MODULE_11__["default"].of(dict.position).toBabylon();
      var mesh = createExtrudedPolygonMesh(scene, polygon, dict.height, dict.name);
      mesh.position = middlePoint;
      mesh.rotationQuaternion = _babylonjs_core__WEBPACK_IMPORTED_MODULE_17__["Quaternion"].Identity();
      var material = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_17__["StandardMaterial"]("PolygonMaterial".concat(dict.name), scene);
      var color = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_17__["Color3"](dict.color[0], dict.color[1], dict.color[2]);
      material.diffuseColor = color;
      material.emissiveColor = color;
      mesh.material = material;
      mesh.visibility = dict.color[3] || VISIBILITY;
      monet__WEBPACK_IMPORTED_MODULE_13__["Maybe"].fromNull(dict.quaternion).forEach(function (quaternion) {
        var babylonQuaternion = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_17__["Quaternion"](quaternion[1], quaternion[2], quaternion[3], quaternion[0]);
        mesh.rotationQuaternion = babylonQuaternion.normalize();
      });
      var keypoints = createPlaceHolderKeyPoints(scene, polygon, mesh, mainView);
      return new PolygonRegion(mesh, polygon.map(function (point) {
        return [point.x, point.y, point.z];
      }), dict.height, keypoints, dict.keyValueMap, dict.navigationAllowed);
    }
    /**
     * Create new mesh from old, has side effects
     *
     * @param {*} newPoints: Vector3
     * @param {*} scene: Scene
     * @param {*} item: PathItem
     * @param {*} mainView: MainView
     * @param {*} keyPointUpdateFunction: (scene, mainView, mesh, item) => Array<Mesh>
     */

  }, {
    key: "createNewMeshFromOldUsingNewPoints",
    value: function createNewMeshFromOldUsingNewPoints(newPoints, scene, item, mainView) {
      var keyPointUpdateFunction = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : defaultKeyPointUpdate;
      var oldMesh = item.mesh;
      var average = _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_12__["default"].pointAverage(newPoints);
      newPoints = newPoints.map(function (x) {
        return x.subtract(average);
      }); // average in parent coord

      var rotMat3 = _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_12__["default"].getRotationMatrix(oldMesh);
      var scaleVec3 = _Math_Vec3__WEBPACK_IMPORTED_MODULE_11__["default"].ofBabylon(oldMesh.scaling);
      var averageInParentCoord = rotMat3.prodVec(_Math_Vec3__WEBPACK_IMPORTED_MODULE_11__["default"].ofBabylon(average).mul(scaleVec3)).toBabylon(); // update mesh

      var newMesh = createExtrudedPolygonMesh(scene, newPoints, item.height, oldMesh.name);
      newMesh.parent = oldMesh.parent;
      newMesh.rotationQuaternion = oldMesh.rotationQuaternion;
      newMesh.position = averageInParentCoord.add(oldMesh.position);
      newMesh.material = oldMesh.material;
      newMesh.visibility = oldMesh.visibility;
      newMesh.onClick = oldMesh.onClick;
      newMesh.getMouseContextActions = oldMesh.getMouseContextActions;
      newMesh.nodeItem = oldMesh.nodeItem;
      newMesh.observers = oldMesh.observers;

      if (!!oldMesh.graphVertex) {
        newMesh.graphVertex = oldMesh.graphVertex;
        newMesh.graphVertex.vertex.mesh = newMesh;
      }

      item.localPolygon = newPoints.map(function (x) {
        return _Math_Vec3__WEBPACK_IMPORTED_MODULE_11__["default"].ofBabylon(x).toArray();
      });
      item.mesh = newMesh;
      item.keyPoints = keyPointUpdateFunction(scene, mainView, oldMesh, item); // update children

      var childrenCopy = _babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default()(oldMesh._children);

      childrenCopy.filter(function (c) {
        return mainView.getNodeFromTree(c.name).isJust();
      }).forEach(function (c) {
        c.parent = item.mesh;
      });
      oldMesh.dispose();
      return newPoints;
    }
  }, {
    key: "deleteKeyPointWithUndo",
    value: function deleteKeyPointWithUndo(scene, keyPointMesh, mainView) {
      var index = keyPointMesh.index;
      var name = keyPointMesh.parent.name;
      mainView.getNodeFromTree(name).forEach(function (_ref) {
        var item = _ref.item;
        var mesh = item.mesh;

        var copyPosition = _objectSpread({}, mesh.position);

        var newPoints = item.localPolygon.map(function (x) {
          return _Math_Vec3__WEBPACK_IMPORTED_MODULE_11__["default"].of(x).toBabylon();
        });
        if (newPoints.length === 3) return;
        mainView.getUndoManager().doIt(PolygonRegion.getUndoDeleteKeyPoint(name, index, copyPosition, newPoints, scene, item, mainView));
      });
    }
  }, {
    key: "getUndoDeleteKeyPoint",
    value: function getUndoDeleteKeyPoint(name, index, copyPosition, newPoints, scene, item, mainView) {
      return mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_15__["UndoManager"].actionBuilder().doAction(function () {
        var copyPoints = _babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default()(newPoints);

        copyPoints.splice(index, 1);
        PolygonRegion.createNewMeshFromOldUsingNewPoints(copyPoints, scene, item, mainView, PolygonRegion.onAddNewPointKeyPointUpdate);
        mainView.updateNodeInServer(name);
      }).undoAction(function (_ref2) {
        var _ref2$is2UpdateInServ = _ref2.is2UpdateInServer,
            is2UpdateInServer = _ref2$is2UpdateInServ === void 0 ? true : _ref2$is2UpdateInServ;

        var copyPoints = _babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default()(newPoints);

        item.mesh.position = copyPosition;
        PolygonRegion.createNewMeshFromOldUsingNewPoints(copyPoints, scene, item, mainView, PolygonRegion.onAddNewPointKeyPointUpdate);
        if (is2UpdateInServer) mainView.updateNodeInServer(name);
      }).build();
    }
  }, {
    key: "onAddNewPointKeyPointUpdate",
    value: function onAddNewPointKeyPointUpdate(scene, mainView, oldMesh, item) {
      // used when new keypoint is added
      return createPlaceHolderKeyPoints(scene, item.localPolygon.map(function (x) {
        return _Math_Vec3__WEBPACK_IMPORTED_MODULE_11__["default"].of(x).toBabylon();
      }), item.mesh, mainView);
    }
    /**
     *
     * @param {*} scene
     * @param {*} keyPointMesh
     * @param {*} curveMesh
     * @param {*} mainView
     * @param {*} orientation: it belongs to the set {-1,1}, represents orientation
     */

  }, {
    key: "getUndoAddKeyPointInBetween",
    value: function getUndoAddKeyPointInBetween(name, index, orientation, item, points, copyPosition, scene, mainView) {
      return mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_15__["UndoManager"].actionBuilder().doAction(function () {
        var numberOfPoints = points.length;
        var nextIndex = positiveMod(index + orientation, numberOfPoints);
        var newPoints = [];
        var specialIndex = index + Math.max(0, orientation);

        for (var i = 0; i < specialIndex; i++) {
          newPoints.push(points[i]);
        }

        newPoints.push(points[nextIndex].add(points[index]).scale(0.5));

        for (var _i = specialIndex; _i < numberOfPoints; _i++) {
          newPoints.push(points[_i]);
        }

        PolygonRegion.createNewMeshFromOldUsingNewPoints(newPoints, scene, item, mainView, PolygonRegion.onAddNewPointKeyPointUpdate);
        mainView.updateNodeInServer(name);
      }).undoAction(function (_ref3) {
        var _ref3$is2UpdateInServ = _ref3.is2UpdateInServer,
            is2UpdateInServer = _ref3$is2UpdateInServ === void 0 ? true : _ref3$is2UpdateInServ;

        var copyPoints = _babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default()(points);

        item.mesh.position = copyPosition;
        PolygonRegion.createNewMeshFromOldUsingNewPoints(copyPoints, scene, item, mainView, PolygonRegion.onAddNewPointKeyPointUpdate);
        if (is2UpdateInServer) mainView.updateNodeInServer(name);
      }).build();
    }
  }]);

  return PolygonRegion;
}(_NodeItem__WEBPACK_IMPORTED_MODULE_10__["default"]);
/**
 *
 * @param {*} polygon: boundary as babylonjs vec3
 */


_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(PolygonRegion, "TYPE", "PolygonRegion");

_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(PolygonRegion, "addKeyPointInBetween", function (scene, keyPointMesh, mainView, orientation) {
  var index = keyPointMesh.index;
  var name = keyPointMesh.parent.name;
  mainView.getNodeFromTree(name).forEach(function (_ref6) {
    var item = _ref6.item;

    var copyPosition = _objectSpread({}, item.mesh.position);

    var points = item.localPolygon.map(function (x) {
      return _Math_Vec3__WEBPACK_IMPORTED_MODULE_11__["default"].of(x).toBabylon();
    });
    mainView.getUndoManager().doIt(PolygonRegion.getUndoAddKeyPointInBetween(name, index, orientation, item, points, copyPosition, scene, mainView));
  });
});

var stitchingBoundaries = function stitchingBoundaries(polygon) {
  var n = polygon.length;
  var orientation = _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_12__["default"].computeOrientation(polygon);
  var ans = [];

  for (var i = 0; i < n; i++) {
    var modi = (i + 1) % n;
    ans.push([i, n + modi, modi]);
    ans.push([i, n + i, n + modi]);
  }

  return orientation > 0 ? ans : ans.map(reverseOrientation);
};

var reverseOrientation = function reverseOrientation(triangleIndex) {
  var ans = [];
  ans.push(triangleIndex[1]);
  ans.push(triangleIndex[0]);
  ans.push(triangleIndex[2]);
  return ans;
};
/**
 *
 * @param {*} scene
 * @param {*} polygon array of babylon js vector3
 * @param {*} height
 * @param {*} name
 */


var createExtrudedPolygonMesh = function createExtrudedPolygonMesh(scene, polygon, height, name) {
  var h = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_17__["Vector3"](0, 0, height);
  var polygonRegionMesh = {
    positions: [],
    faces: []
  };
  polygonRegionMesh.positions = _babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default()(polygon);

  for (var i = 0; i < polygon.length; i++) {
    polygonRegionMesh.positions.push(polygon[i].add(h));
  }

  var n = polygon.length;
  var lowerTriangulation = _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_12__["default"].triangulatePolygon(polygon);
  var upperTriangulation = _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_12__["default"].triangulatePolygon(polygonRegionMesh.positions.slice(n)).map(function (x) {
    return x.map(function (z) {
      return z + n;
    });
  }).map(reverseOrientation);
  var stitchTriangulation = stitchingBoundaries(polygon);
  polygonRegionMesh.faces = lowerTriangulation.concat(upperTriangulation).concat(stitchTriangulation);
  var mesh = _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_12__["default"].meshFromPositionAndFaces(name, scene, polygonRegionMesh.positions, polygonRegionMesh.faces);
  return mesh;
};

function defaultKeyPointUpdate(scene, mainView, oldMesh, item) {
  // used when keypoint is updated or deleted
  var childrenCopy = _babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default()(oldMesh._children);

  childrenCopy.forEach(function (c) {
    c.parent = item.mesh;
    console.log("Moving parents of child", c.name);
  });
  return item.keyPoints.map(function (k, i) {
    k.observers = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_17__["Observable"]();
    k.observers.add(getKeyPointObserverFunction(scene, mainView));
    k.index = i;
    k.name = "".concat(oldMesh.name, "keyPoint").concat(i);
    k.position = _Math_Vec3__WEBPACK_IMPORTED_MODULE_11__["default"].of(item.localPolygon[i]).toBabylon();
    return k;
  });
}

var getKeyPointObserverFunction = function getKeyPointObserverFunction(scene, mainView) {
  return function (_ref4) {
    var updatedPointMesh = _ref4.updatedPointMesh,
        is2updateServer = _ref4.is2updateServer;
    if (!updatedPointMesh.parent) return;
    mainView.getNodeFromTree(updatedPointMesh.parent.name).forEach(function (polygonTreeNode) {
      var index = updatedPointMesh.index;
      var item = polygonTreeNode.item;
      var mesh = item.mesh;
      var name = mesh.name;
      var newPoints = item.localPolygon.map(function (x) {
        return _Math_Vec3__WEBPACK_IMPORTED_MODULE_11__["default"].of(x).toBabylon();
      });
      newPoints[index] = updatedPointMesh.position;
      PolygonRegion.createNewMeshFromOldUsingNewPoints(newPoints, scene, item, mainView);

      if (is2updateServer) {
        mainView.updateNodeInServer(name);
      } // signal observers


      monet__WEBPACK_IMPORTED_MODULE_13__["Maybe"].fromNull(item.mesh.observers).forEach(function (obs) {
        //side effect update absolute position
        item.mesh.getAbsolutePosition();
        obs.notifyObservers({
          updatedPointMesh: item.mesh,
          is2updateServer: is2updateServer,
          displacement: _babylonjs_core__WEBPACK_IMPORTED_MODULE_17__["Vector3"].Zero()
        });
      });
      monet__WEBPACK_IMPORTED_MODULE_13__["Maybe"].fromNull(item.mesh.graphVertex).forEach(function (_ref5) {
        var vertexObs = _ref5.vertexObs;
        item.mesh.getAbsolutePosition();
        vertexObs({
          updatedPointMesh: item.mesh,
          is2updateServer: is2updateServer,
          displacement: _babylonjs_core__WEBPACK_IMPORTED_MODULE_17__["Vector3"].Zero()
        });
      });
    });
  };
};

var getKeyPointActions = function getKeyPointActions(scene, keyPointMesh, mainView) {
  var actions = [];
  mainView.getNodeFromTree(keyPointMesh.parent.name).forEach(function (pathTreeNode) {
    var item = pathTreeNode.item;
    var polygon = item.localPolygon;

    if (polygon.length > 3) {
      actions.push({
        icon: function icon(props) {
          return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_14___default.a.createElement("i", _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0___default()({
            className: "fas fa-trash"
          }, props));
        },
        action: function action(parentView) {
          PolygonRegion.deleteKeyPointWithUndo(scene, keyPointMesh, parentView);
          parentView.closeContextDial();
        },
        name: "Delete node [DEL]"
      });
    }

    actions.push({
      icon: function icon(props) {
        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_14___default.a.createElement("i", _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0___default()({
          className: "fas fa-less-than"
        }, props));
      },
      action: function action(parentView) {
        PolygonRegion.addKeyPointInBetween(scene, keyPointMesh, parentView, -1);
        parentView.closeContextDial();
      },
      name: "Add previous"
    });
    actions.push({
      icon: function icon(props) {
        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_14___default.a.createElement("i", _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0___default()({
          className: "fas fa-greater-than"
        }, props));
      },
      action: function action(parentView) {
        PolygonRegion.addKeyPointInBetween(scene, keyPointMesh, parentView, 1);
        parentView.closeContextDial();
      },
      name: "Add next"
    });
  });
  return actions;
};

var createPlaceHolderKeyPoints = function createPlaceHolderKeyPoints(scene, polygon, polygonMesh, mainView) {
  var keyPoints = [];
  polygon.forEach(function (p, i) {
    var color = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_17__["Color3"](0.25, 0.25, 0.25);
    var keyPoint = _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_12__["default"].createSphere(scene, color, RADIUS, "".concat(polygonMesh.name, "keyPointPolygon").concat(i), true);
    keyPoint.parent = polygonMesh;
    keyPoint.position = p;
    keyPoint.index = i;
    keyPoint.observers = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_17__["Observable"]();
    keyPoints.push(keyPoint);
    keyPoint.observers.add(getKeyPointObserverFunction(scene, mainView));
  });
  keyPoints.forEach(function (kp) {
    kp.onClick = function () {
      mainView.setContextActions(getKeyPointActions(scene, kp, mainView));
    };

    kp.onDel = function () {
      return PolygonRegion.deleteKeyPointWithUndo(scene, kp, mainView);
    };
  });
  return keyPoints;
};

var VISIBILITY = 0.5;
/* harmony default export */ __webpack_exports__["default"] = (PolygonRegion);

/***/ }),

/***/ "./src/Components/Viewer/NodeItem/Robot.js":
/*!*************************************************!*\
  !*** ./src/Components/Viewer/NodeItem/Robot.js ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "@babel/runtime/helpers/esm/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "@babel/runtime/helpers/esm/createClass");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/assertThisInitialized */ "@babel/runtime/helpers/esm/assertThisInitialized");
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/get */ "@babel/runtime/helpers/esm/get");
/* harmony import */ var _babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "@babel/runtime/helpers/esm/inherits");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "@babel/runtime/helpers/esm/possibleConstructorReturn");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "@babel/runtime/helpers/esm/getPrototypeOf");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "@babel/runtime/helpers/esm/defineProperty");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _Math_Vec3__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../Math/Vec3 */ "./src/Components/Viewer/Math/Vec3.js");
/* harmony import */ var _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../Util3d/Util3d */ "./src/Components/Viewer/Util3d/Util3d.js");
/* harmony import */ var _AssetNodeItem__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./AssetNodeItem */ "./src/Components/Viewer/NodeItem/AssetNodeItem.js");
/* harmony import */ var _resources_alert_error_png__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../../resources/alert-error.png */ "./resources/alert-error.png");
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @babylonjs/core */ "@babylonjs/core");
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(_babylonjs_core__WEBPACK_IMPORTED_MODULE_12__);
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! lodash/get */ "lodash/get");
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(lodash_get__WEBPACK_IMPORTED_MODULE_13__);
/* harmony import */ var _Utils_Statistics__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../Utils/Statistics */ "./src/Components/Viewer/Utils/Statistics.js");









function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7___default()(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6___default()(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6___default()(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5___default()(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }









var Robot = /*#__PURE__*/function (_AssetNodeItem) {
  _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4___default()(Robot, _AssetNodeItem);

  var _super = _createSuper(Robot);

  function Robot(meshTree, assetName) {
    var _this;

    var keyValueMap = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
    var scene = arguments.length > 3 ? arguments[3] : undefined;
    var parentView = arguments.length > 4 ? arguments[4] : undefined;

    _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default()(this, Robot);

    _this = _super.call(this, meshTree.mesh, assetName, keyValueMap);

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default()(_this), "updateRobot", function (robot, oldTimeInMillis, robotAnimator) {
      var time = new Date().getTime();
      var dt = 1e-3 * (time - oldTimeInMillis);
      robotAnimator(robot, dt);
      _this.requestAnimationFrameId = requestAnimationFrame(function () {
        return _this.updateRobot(robot, time, robotAnimator);
      });
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default()(_this), "animate", function (robotAnimator) {
      _this.requestAnimationFrameId = requestAnimationFrame(function () {
        return _this.updateRobot(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default()(_this), new Date().getTime(), robotAnimator);
      });
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default()(_this), "getType", function () {
      return Robot.TYPE;
    });

    _this.robot = parentView.getRobotManager().getRobot(meshTree.id);
    _this.scene = scene;
    _this.isOnline = true;
    _this.numberOfIte = 0;
    _this.is2UsePos = true;
    _this.meshTree = meshTree;
    _this.parentView = parentView;
    _this.timeSinceLastUpdate = 0;
    _this.isSubscribedToLogs = true;
    _this.speedStats = new _Utils_Statistics__WEBPACK_IMPORTED_MODULE_14__["default"]();
    _this.alert = null;
    _this.loggerSubscription = null;
    _this.requestAnimationFrameId = null;
    _this.speed = _babylonjs_core__WEBPACK_IMPORTED_MODULE_12__["Vector3"].Zero();
    _this.qSpeed = _babylonjs_core__WEBPACK_IMPORTED_MODULE_12__["Quaternion"].Zero();
    _this.newPos = _babylonjs_core__WEBPACK_IMPORTED_MODULE_12__["Vector3"].Zero();
    _this.newOri = _babylonjs_core__WEBPACK_IMPORTED_MODULE_12__["Quaternion"].Identity(); // Build alert mesh

    _this.alertMesh = _this.buildAlertMesh(meshTree, scene); // Get robot ip to start logger

    var robotIP = _this.robot.getIP(_this.onGetIP(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default()(_this)));

    if (robotIP) _this.startLogger(); // Add click action to alertMesh

    _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_9__["default"].addClickActionToMesh(_this.alertMesh, scene, _this.onMeshAlertClick(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default()(_this)));
    return _this;
  }

  _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1___default()(Robot, [{
    key: "buildAlertMesh",
    value: function buildAlertMesh(meshTree, scene) {
      if (this.alertMesh) return this.alertMesh;
      var alertMesh = _babylonjs_core__WEBPACK_IMPORTED_MODULE_12__["MeshBuilder"].CreateDisc("AlertDisc".concat(meshTree.name), {
        radius: 0.2,
        sideOrientation: _babylonjs_core__WEBPACK_IMPORTED_MODULE_12__["Mesh"].DOUBLESIDE
      });
      var material = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_12__["StandardMaterial"]("AlertMat".concat(meshTree.name), scene);
      material.emissiveColor = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_12__["Color3"].White();
      material.ambientTexture = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_12__["Texture"](_resources_alert_error_png__WEBPACK_IMPORTED_MODULE_11__["default"], scene);
      material.freeze();
      alertMesh.material = material;
      alertMesh.isStatic = true;
      alertMesh.position.y = -1.5;
      alertMesh.parent = meshTree.mesh;
      alertMesh.setEnabled(false);
      alertMesh.billboardMode = _babylonjs_core__WEBPACK_IMPORTED_MODULE_12__["Mesh"].BILLBOARDMODE_ALL;
      return alertMesh;
    }
    /**
     * On alert mesh click handler
     *
     * @param {*} robot: Robot class instance (this)
     * @returns {Function} Function to be triggered whenever there's a click on the alert mesh
     */

  }, {
    key: "onMeshAlertClick",
    value: function onMeshAlertClick(robot) {
      return function () {
        robot.parentView.showRobotAlertModal(robot.alert);
      };
    }
  }, {
    key: "toDict",
    value: function toDict() {
      var dict = _babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_3___default()(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6___default()(Robot.prototype), "toDict", this).call(this);

      dict.isSubscribedToLogs = this.isSubscribedToLogs;
      return dict;
    }
  }, {
    key: "toForm",
    value: function toForm() {
      var schema = _babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_3___default()(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6___default()(Robot.prototype), "toForm", this).call(this);

      var props = _objectSpread({}, schema.jsonSchema.properties);

      var newJsonSchema = {
        type: "object",
        properties: {
          oldName: props.oldName,
          name: props.name,
          type: props.type,
          // isSubscribedToLogs: {
          //   type: "boolean",
          //   title: "Subscribe to alerts"
          // },
          position: props.position,
          rotation: props.rotation,
          color: props.color,
          annotations: props.annotations
        }
      };
      schema.jsonSchema = newJsonSchema;
      schema.data["isSubscribedToLogs"] = this.isSubscribedToLogs;
      return schema;
    }
  }, {
    key: "ofForm",
    value: function ofForm(form) {
      _babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_3___default()(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6___default()(Robot.prototype), "ofForm", this).call(this, form);

      this.isSubscribedToLogs = Boolean(form.isSubscribedToLogs); // Start/Stop logger based on isSubscribedToLogs property

      if (form.isSubscribedToLogs && this.robot.ip) this.startLogger();else this.stopLogger(true);
    }
  }, {
    key: "dispose",
    value: function dispose() {
      _babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_3___default()(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6___default()(Robot.prototype), "dispose", this).call(this);

      this.robot.unsubscribe({
        property: "Parameter",
        propValue: "tf"
      });
      window.cancelAnimationFrame(this.requestAnimationFrameId);
    }
  }, {
    key: "toOffline",
    value: function toOffline() {
      if (this.mesh.isDisposed()) return;
      this.mesh.visibility = 0.1;
      this.speed = _babylonjs_core__WEBPACK_IMPORTED_MODULE_12__["Vector3"].Zero();
      this.qSpeed = _babylonjs_core__WEBPACK_IMPORTED_MODULE_12__["Quaternion"].Zero();
      this.isOnline = false;
      this.numberOfIte = 0;
      this.speedStats = new _Utils_Statistics__WEBPACK_IMPORTED_MODULE_14__["default"]();
      this.stopLogger();
    }
  }, {
    key: "toOnline",
    value: function toOnline() {
      if (this.mesh.isDisposed()) return;
      this.mesh.visibility = 1;
      this.isOnline = true;
      this.startLogger();
    }
    /**
     * Start robot logger
     */

  }, {
    key: "startLogger",
    value: function startLogger() {
      if (!this.loggerSubscription) {
        this.loggerSubscription = this.robot.subscribeToLogs(this.updateAlertState(this));
      }
    }
    /**
     * Stop robot logger
     *
     * @param {Boolean} is2RemoveAlertMesh: If true: remove alert mesh
     */

  }, {
    key: "stopLogger",
    value: function stopLogger(is2RemoveAlertMesh) {
      if (this.loggerSubscription) {
        this.robot.unsubscribeToLogs(this.loggerSubscription);
        this.loggerSubscription = null;
      } // Remove robot alert mesh


      if (is2RemoveAlertMesh) this.alertMesh.setEnabled(false);
    }
    /**
     * Update robot alert state
     *
     * @param {*} robot: Robot class instance (this)
     * @returns {Function} Function to be triggered whenever there's a new log for this robot
     */

  }, {
    key: "updateAlertState",
    value: function updateAlertState(robot) {
      return function (logs) {
        robot.timeSinceLastUpdate = 0;

        if (logs.length > 0 && (logs[0].level === "ERROR" || logs[0].level === "CRITICAL")) {
          robot.alert = logs[0];
          robot.alertMesh.setEnabled(true);
        } // If last log is not error/critical then clean alert (set it to null)
        else {
          robot.alertMesh.setEnabled(false);
        }
      };
    }
    /**
     * Start logger after receiving robot IP
     *
     * @param {*} robot: Robot class instance (this)
     * @returns {Function} Function to be triggered when receive robot ip
     */

  }, {
    key: "onGetIP",
    value: function onGetIP(robot) {
      return function (ip) {
        // If robot IP were not found doesn't start logger
        if (!ip) return;
        robot.startLogger();
      };
    } //========================================================================================

    /*                                                                                      *
     *                                   Static Functions                                   *
     *                                                                                      */
    //========================================================================================

  }], [{
    key: "updateRobotMeshTree",
    value: function updateRobotMeshTree(newRobotTf, robot) {
      var lastPosition = robot.mesh.position;
      var lastOrientation = robot.mesh.rotationQuaternion;
      var newPosition = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_12__["Vector3"](newRobotTf.position.x, newRobotTf.position.y, newRobotTf.position.z);
      var newOrientation = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_12__["Quaternion"](newRobotTf.orientation.x, newRobotTf.orientation.y, newRobotTf.orientation.z, newRobotTf.orientation.w).normalize();
      robot.numberOfIte++;
      var isZero = robot.timeSinceLastUpdate === 0;
      var dtInv = isZero ? 1.0 : Math.min(1.0 / robot.timeSinceLastUpdate, 1.0);
      var speed = newPosition.subtract(lastPosition).scale(dtInv);
      var qSpeed = newOrientation.subtract(lastOrientation).scale(dtInv);
      var vel = speed.length();

      if (robot.numberOfIte < SAMPLES) {
        robot.speedStats.update(vel);
      }

      if (robot.speedStats.isOutlier(vel)) {
        robot.is2UsePos = true;
      } else {
        robot.speedStats.update(vel);
        robot.speed = speed;
        robot.qSpeed = qSpeed;
        robot.is2UsePos = false;
      }

      robot.newPos = newPosition;
      robot.newOri = newOrientation;
      robot.timeSinceLastUpdate = 0;
    }
  }, {
    key: "setOnOffLine",
    value: function setOnOffLine(robot) {
      if (robot.timeSinceLastUpdate > Robot.TIME_2_BE_OFFLINE_IN_SEC) {
        if (robot.isOnline) robot.toOffline();
      } else {
        if (robot.timeSinceLastUpdate > Robot.TIME_2_BE_OFFLINE_IN_SEC / 4) {
          robot.is2UsePos = true;
        }

        if (!robot.isOnline) robot.toOnline();
      }
    }
  }, {
    key: "createRobotMeshTreeRecursive",
    value: function createRobotMeshTreeRecursive(node, mesh, parent, scene) {
      var _this2 = this;

      if (!mesh) {
        mesh = _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_9__["default"].createSphere(scene, new _babylonjs_core__WEBPACK_IMPORTED_MODULE_12__["Color3"](0.0, 0.0, 0.0), 0.5, node.name, false);
      }

      var meshTree = {
        mesh: mesh,
        children: []
      };
      var position = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_12__["Vector3"](node.position.x, node.position.y, node.position.z);
      var quaternion = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_12__["Quaternion"](node.orientation.x, node.orientation.y, node.orientation.z, node.orientation.w);
      mesh.position = position;
      mesh.rotationQuaternion = quaternion;

      if (parent) {
        mesh.parent = parent;
      }

      meshTree["children"] = node.child.map(function (child) {
        return _this2.createRobotMeshTreeRecursive(child, _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_9__["default"].referentialBuilder(scene).boxParams({
          isVisible: false,
          size: 0.1
        }).build(), mesh, scene);
      });
      return meshTree;
    }
  }, {
    key: "createRobotMeshTree",
    value: function createRobotMeshTree(robotTree, robotMesh, scene) {
      return Robot.createRobotMeshTreeRecursive(robotTree, robotMesh, null, scene);
    }
  }, {
    key: "builder",
    value: function builder() {
      return new RobotBuilder();
    }
  }]);

  return Robot;
}(_AssetNodeItem__WEBPACK_IMPORTED_MODULE_10__["default"]);

_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7___default()(Robot, "ROBOT_MESH_NAME", "Tugbot.stl");

_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7___default()(Robot, "TYPE", "Robot");

_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7___default()(Robot, "TIME_2_BE_OFFLINE_IN_SEC", 10);

_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7___default()(Robot, "createBaseObject", function (_ref) {
  var robotName = _ref.robotName,
      _ref$robotMeshName = _ref.robotMeshName,
      robotMeshName = _ref$robotMeshName === void 0 ? Robot.ROBOT_MESH_NAME : _ref$robotMeshName,
      _ref$id = _ref.id,
      id = _ref$id === void 0 ? Robot.randomId() : _ref$id,
      _ref$nodeDict = _ref.nodeDict,
      nodeDict = _ref$nodeDict === void 0 ? {
    position: [0, 0, 0],
    quaternion: [1, 0, 0, 0]
  } : _ref$nodeDict;
  return {
    id: id,
    name: robotName,
    type: Robot.TYPE,
    meshName: robotMeshName,
    robotTree: {
      name: robotName,
      child: [],
      position: {
        x: nodeDict.position[0],
        y: nodeDict.position[1],
        z: nodeDict.position[2]
      },
      orientation: {
        w: nodeDict.quaternion[0],
        x: nodeDict.quaternion[1],
        y: nodeDict.quaternion[2],
        z: nodeDict.quaternion[3]
      }
    }
  };
});

_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7___default()(Robot, "getDefaultAnimator", function (parentView) {
  return function (robot, dt) {
    var mesh = robot.mesh;
    var speed = 3;
    var vel = _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_9__["default"].getRotationMatrix(mesh).prodVec(new _Math_Vec3__WEBPACK_IMPORTED_MODULE_8__["default"]([speed, 0, 0])).toBabylon();
    mesh.position = mesh.position.add(vel.scale(dt));
    mesh.rotate(_babylonjs_core__WEBPACK_IMPORTED_MODULE_12__["Axis"].Z, -Math.PI / 2 * dt, _babylonjs_core__WEBPACK_IMPORTED_MODULE_12__["Space"].LOCAL);
  };
});

_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_7___default()(Robot, "getSocketAnimator", function (robot, parentView) {
  var updateTF = function updateTF(data) {
    var tf = lodash_get__WEBPACK_IMPORTED_MODULE_13___default()(data, "Robot.".concat(robot.meshTree.id, ".Parameter.tf.Value"), undefined);

    if (tf) Robot.updateRobotMeshTree(tf, robot);
  }; // Subscribe to tf parameter


  robot.robot.subscribe({
    property: "Parameter",
    propValue: "tf",
    onLoad: function onLoad(data) {
      return updateTF(data === null || data === void 0 ? void 0 : data.value);
    },
    onUpdate: function onUpdate(data) {
      return updateTF(data === null || data === void 0 ? void 0 : data.key);
    }
  }); // Animate

  return function (robot2Animate, dt) {
    robot2Animate.timeSinceLastUpdate += dt;
    dt = Math.min(dt, 1);
    if (_Math_Vec3__WEBPACK_IMPORTED_MODULE_8__["default"].ofBabylon(robot2Animate.speed).someNaNOrInfinite()) return;
    if (_Math_Vec3__WEBPACK_IMPORTED_MODULE_8__["default"].ofBabylon(robot2Animate.qSpeed).someNaNOrInfinite()) return;

    if (robot2Animate.is2UsePos) {
      robot2Animate.mesh.position = robot2Animate.newPos;
      robot2Animate.mesh.rotationQuaternion = robot2Animate.newOri;
    } else {
      robot2Animate.mesh.position = robot2Animate.mesh.position.add(robot2Animate.speed.scale(dt));
      robot2Animate.mesh.rotationQuaternion = robot2Animate.mesh.rotationQuaternion.add(robot.qSpeed.scale(dt)).normalize();
    }

    Robot.setOnOffLine(robot2Animate);
  };
});

var RobotBuilder = /*#__PURE__*/function () {
  function RobotBuilder() {
    _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default()(this, RobotBuilder);

    this._name = null;
    this._meshTree = null;
    this._parentMesh = null;
    this._parentView = null;
    this._scene = null;
    this._isPickable = true;
    this._id = null;
    this._keyValueMap = {};
    this._assetName = null;
  }

  _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1___default()(RobotBuilder, [{
    key: "name",
    value: function name(_name) {
      this._name = _name;
      return this;
    }
  }, {
    key: "meshTree",
    value: function meshTree(_meshTree) {
      this._meshTree = _meshTree;
      return this;
    }
  }, {
    key: "parentMesh",
    value: function parentMesh(_parentMesh) {
      this._parentMesh = _parentMesh;
      return this;
    }
  }, {
    key: "parentView",
    value: function parentView(_parentView) {
      this._parentView = _parentView;
      return this;
    }
  }, {
    key: "scene",
    value: function scene(_scene) {
      this._scene = _scene;
      return this;
    }
  }, {
    key: "isPickable",
    value: function isPickable(_isPickable) {
      this._isPickable = _isPickable;
      return this;
    }
  }, {
    key: "id",
    value: function id(_id) {
      this._id = _id;
      return this;
    }
  }, {
    key: "keyValueMap",
    value: function keyValueMap(_keyValueMap) {
      this._keyValueMap = _keyValueMap;
      return this;
    }
  }, {
    key: "assetName",
    value: function assetName(_assetName) {
      this._assetName = _assetName;
      return this;
    }
  }, {
    key: "build",
    value: function build() {
      var _this3 = this;

      var variables = Object.keys(this).filter(function (x) {
        return x !== "_parentMesh";
      }).map(function (x) {
        return _this3[x];
      });
      variables.forEach(function (x) {
        if (x === null) throw new Error("There are missing variables to build a robot, e.g ".concat(x));
      });
      this._meshTree.id = this._id;
      this._meshTree.name = this._name;
      this._meshTree.mesh.name = this._name;
      this._meshTree.mesh.isPickable = this._isPickable;
      this._meshTree.mesh.parent = this._parentMesh;
      var baseAxis = _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_9__["default"].referentialBuilder(this._scene).isPickable(false).boxParams({
        isVisible: false,
        size: 0.1
      }).name("".concat(this._name, "Axis")).build();
      baseAxis.parent = this._meshTree.mesh;
      return new Robot(this._meshTree, this._assetName, this._keyValueMap, this._scene, this._parentView);
    }
  }]);

  return RobotBuilder;
}(); //========================================================================================

/*                                                                                      *
 *                                       CONSTANTS                                      *
 *                                                                                      */
//========================================================================================


var SAMPLES = 30; //========================================================================================

/*                                                                                      *
 *                                        EXPORT                                        *
 *                                                                                      */
//========================================================================================

/* harmony default export */ __webpack_exports__["default"] = (Robot);

/***/ }),

/***/ "./src/Components/Viewer/NodeItem/Wall.js":
/*!************************************************!*\
  !*** ./src/Components/Viewer/NodeItem/Wall.js ***!
  \************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/toConsumableArray */ "@babel/runtime/helpers/esm/toConsumableArray");
/* harmony import */ var _babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "@babel/runtime/helpers/esm/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "@babel/runtime/helpers/esm/createClass");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/assertThisInitialized */ "@babel/runtime/helpers/esm/assertThisInitialized");
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/get */ "@babel/runtime/helpers/esm/get");
/* harmony import */ var _babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "@babel/runtime/helpers/esm/inherits");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "@babel/runtime/helpers/esm/possibleConstructorReturn");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "@babel/runtime/helpers/esm/getPrototypeOf");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "@babel/runtime/helpers/esm/defineProperty");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var _NodeItem__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./NodeItem */ "./src/Components/Viewer/NodeItem/NodeItem.js");
/* harmony import */ var _Math_Vec3__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../Math/Vec3 */ "./src/Components/Viewer/Math/Vec3.js");
/* harmony import */ var monet__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! monet */ "monet");
/* harmony import */ var monet__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(monet__WEBPACK_IMPORTED_MODULE_11__);
/* harmony import */ var _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../Util3d/Util3d */ "./src/Components/Viewer/Util3d/Util3d.js");
/* harmony import */ var _Utils_Constants__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../Utils/Constants */ "./src/Components/Viewer/Utils/Constants.js");
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @babylonjs/core */ "@babylonjs/core");
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(_babylonjs_core__WEBPACK_IMPORTED_MODULE_14__);










function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7___default()(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7___default()(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_6___default()(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }







/**
 * Will be deprecated
 */

var Wall = /*#__PURE__*/function (_NodeItem) {
  _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_5___default()(Wall, _NodeItem);

  var _super = _createSuper(Wall);

  function Wall(mesh, localWall, size) {
    var _this;

    var keyPoints = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};
    var keyValueMap = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};

    _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default()(this, Wall);

    _this = _super.call(this, mesh, keyValueMap);

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3___default()(_this), "getType", function () {
      return Wall.TYPE;
    });

    _this.localWall = localWall;
    _this.size = size;
    _this.keyPoints = keyPoints;
    return _this;
  }

  _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2___default()(Wall, [{
    key: "toDict",
    value: function toDict() {
      var dict = _babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_4___default()(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7___default()(Wall.prototype), "toDict", this).call(this);

      dict.localWall = this.localWall;
      dict.size = this.size;
      return dict;
    }
  }, {
    key: "ofDict",
    value: function ofDict(scene) {
      var dict = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
      var mainView = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;
      return Wall.ofDict(scene, dict, mainView);
    }
  }], [{
    key: "ofDict",
    value: function ofDict(scene) {
      var dict = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
      var mainView = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;
      if (!dict) throw new Error("null dictionary describing wall");
      var name = monet__WEBPACK_IMPORTED_MODULE_11__["Maybe"].fromNull(dict.name).orSome("Wall".concat(Math.floor(Math.random() * 1e3)));
      var mesh = createWallMesh(dict, name, scene);
      var material = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_14__["StandardMaterial"]("WallMaterial".concat(name), scene);
      var color = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_14__["Color3"](dict.color[0], dict.color[1], dict.color[2]);
      material.diffuseColor = color;
      material.emissiveColor = color;
      mesh.material = material; // babylonjs highlight shader flickers when floor intersect

      mesh.position.z += 1e-3;
      var keypoints = createPlaceHolderKeyPoints(scene, dict.localWall.map(function (x) {
        return _Math_Vec3__WEBPACK_IMPORTED_MODULE_10__["default"].of(x).toBabylon();
      }), mesh, mainView);
      return new Wall(mesh, dict.localWall, dict.size, keypoints, dict.keyValueMap);
    }
  }]);

  return Wall;
}(_NodeItem__WEBPACK_IMPORTED_MODULE_9__["default"]);

_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(Wall, "TYPE", "Wall");

var RADIUS = _Utils_Constants__WEBPACK_IMPORTED_MODULE_13__["default"].RADIUS;
var FACES = [[0, 1, 2], [2, 3, 0], [4, 6, 5], [6, 4, 7], [0, 5, 1], [5, 0, 4], [3, 2, 6], [6, 7, 3], [1, 6, 2], [6, 1, 5], [0, 3, 7], [7, 4, 0]];

function createWallMesh(dict, name, scene) {
  var centeredWall = dict.localWall.map(function (x) {
    return _Math_Vec3__WEBPACK_IMPORTED_MODULE_10__["default"].of(x).toBabylon();
  });
  var middlePoint = _Math_Vec3__WEBPACK_IMPORTED_MODULE_10__["default"].of(dict.position).toBabylon();
  var tangent = centeredWall[1].subtract(centeredWall[0]).normalize();
  var normal = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_14__["Vector3"](-tangent.y, tangent.x, 0);
  var shape = [centeredWall[0].add(normal.scale(dict.size.width)), centeredWall[0].subtract(normal.scale(dict.size.width)), centeredWall[1].subtract(normal.scale(dict.size.width)), centeredWall[1].add(normal.scale(dict.size.width))];
  var h = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_14__["Vector3"](0, 0, dict.size.height);
  var wallMesh = {
    positions: [shape[0], shape[1], shape[2], shape[3], shape[0].add(h), shape[1].add(h), shape[2].add(h), shape[3].add(h)],
    faces: FACES
  };
  var mesh = _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_12__["default"].meshFromPositionAndFaces(name, scene, wallMesh.positions, wallMesh.faces);
  mesh.position = middlePoint;
  return mesh;
}

function createNewMeshFromOldUsingNewPoints(newWall, scene, mesh, item) {
  var average = _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_12__["default"].pointAverageVec3(newWall.localWall.map(function (x) {
    return _Math_Vec3__WEBPACK_IMPORTED_MODULE_10__["default"].of(x);
  }));
  newWall.position = average.toArray();
  newWall.localWall = newWall.localWall.map(function (x) {
    return _Math_Vec3__WEBPACK_IMPORTED_MODULE_10__["default"].of(x).sub(average).toArray();
  });
  var newMesh = createWallMesh(newWall, mesh.name, scene);
  newMesh.position = mesh.position;
  newMesh.rotationQuaternion = mesh.rotationQuaternion;
  newMesh.locallyTranslate(average.toBabylon());
  newMesh.material = mesh.material;
  newMesh.visibility = mesh.visibility;
  newMesh.parent = mesh.parent;
  newMesh.getMouseContextActions = mesh.getMouseContextActions;
  newMesh.nodeItem = mesh.nodeItem;
  item.mesh = newMesh;
  item.localWall = newWall.localWall;

  var childrenCopy = _babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default()(mesh._children);

  childrenCopy.forEach(function (c) {
    mesh.removeChild(c);
    c.parent = newMesh;
  });
  item.keyPoints.forEach(function (k, j) {
    k.position = _Math_Vec3__WEBPACK_IMPORTED_MODULE_10__["default"].of(newWall.localWall[j]).toBabylon();
  }); // dispose old mesh

  mesh.dispose();
}

var getKeyPointObserverFunction = function getKeyPointObserverFunction(mainView, scene) {
  return function (_ref) {
    var updatedPointMesh = _ref.updatedPointMesh,
        is2updateServer = _ref.is2updateServer;
    mainView.getNodeFromTree(updatedPointMesh.parent.name).forEach(function (wallNode) {
      var index = updatedPointMesh.index;
      var item = wallNode.item;
      var mesh = item.mesh;
      var newWall = {
        position: _Math_Vec3__WEBPACK_IMPORTED_MODULE_10__["default"].ofBabylon(mesh.position).toArray(),
        localWall: item.localWall,
        size: item.size
      };
      newWall.localWall[index] = _Math_Vec3__WEBPACK_IMPORTED_MODULE_10__["default"].ofBabylon(updatedPointMesh.position).toArray();
      createNewMeshFromOldUsingNewPoints(newWall, scene, mesh, item);

      if (is2updateServer) {
        mainView.updateNodeInServer(mesh.name);
      }
    });
  };
};

var createPlaceHolderKeyPoints = function createPlaceHolderKeyPoints(scene, wall, wallMesh, mainView) {
  var keyPoints = [];
  wall.forEach(function (p, i) {
    var keyPoint = _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_12__["default"].createSphere(scene, new _babylonjs_core__WEBPACK_IMPORTED_MODULE_14__["Color3"](0.25, 0.25, 0.25), RADIUS, "".concat(wallMesh.name, "keyPointWall").concat(i), true);
    keyPoint.parent = wallMesh;
    keyPoint.position = p;
    keyPoint.index = i;
    keyPoint.observers = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_14__["Observable"]();
    keyPoint.observers.add(getKeyPointObserverFunction(mainView, scene));
    keyPoints.push(keyPoint);
  });
  return keyPoints;
};

/* harmony default export */ __webpack_exports__["default"] = (Wall);

/***/ }),

/***/ "./src/Components/Viewer/SceneViewer.js":
/*!**********************************************!*\
  !*** ./src/Components/Viewer/SceneViewer.js ***!
  \**********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/asyncToGenerator */ "@babel/runtime/helpers/esm/asyncToGenerator");
/* harmony import */ var _babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/toConsumableArray */ "@babel/runtime/helpers/esm/toConsumableArray");
/* harmony import */ var _babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "@babel/runtime/helpers/esm/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "@babel/runtime/helpers/esm/createClass");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/assertThisInitialized */ "@babel/runtime/helpers/esm/assertThisInitialized");
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inherits */ "@babel/runtime/helpers/esm/inherits");
/* harmony import */ var _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/esm/possibleConstructorReturn */ "@babel/runtime/helpers/esm/possibleConstructorReturn");
/* harmony import */ var _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babel/runtime/helpers/esm/getPrototypeOf */ "@babel/runtime/helpers/esm/getPrototypeOf");
/* harmony import */ var _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "@babel/runtime/helpers/esm/defineProperty");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @babel/runtime/regenerator */ "@babel/runtime/regenerator");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var _BaseViewer_BaseViewer__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./BaseViewer/BaseViewer */ "./src/Components/Viewer/BaseViewer/BaseViewer.js");
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! prop-types */ "prop-types");
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_12__);
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @babylonjs/core */ "@babylonjs/core");
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(_babylonjs_core__WEBPACK_IMPORTED_MODULE_13__);
/* harmony import */ var monet__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! monet */ "monet");
/* harmony import */ var monet__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(monet__WEBPACK_IMPORTED_MODULE_14__);
/* harmony import */ var _MainView_MainViewRetriever__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./MainView/MainViewRetriever */ "./src/Components/Viewer/MainView/MainViewRetriever.js");
/* harmony import */ var _Utils_DefaultScene__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./Utils/DefaultScene */ "./src/Components/Viewer/Utils/DefaultScene.js");
/* harmony import */ var _NodeItem_GlobalRef__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./NodeItem/GlobalRef */ "./src/Components/Viewer/NodeItem/GlobalRef.js");
/* harmony import */ var _Utils_SceneServerUtils__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./Utils/SceneServerUtils */ "./src/Components/Viewer/Utils/SceneServerUtils.js");
/* harmony import */ var _Utils_TreeServerUtils__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./Utils/TreeServerUtils */ "./src/Components/Viewer/Utils/TreeServerUtils.js");
/* harmony import */ var _AssetsManager_AssetsManager__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./AssetsManager/AssetsManager */ "./src/Components/Viewer/AssetsManager/AssetsManager.js");
/* harmony import */ var _TreeObject_TreeObject__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./TreeObject/TreeObject */ "./src/Components/Viewer/TreeObject/TreeObject.js");
/* harmony import */ var _NodeItem_GraphItem__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./NodeItem/GraphItem */ "./src/Components/Viewer/NodeItem/GraphItem.js");
/* harmony import */ var _Utils_DefaultMouseEvents__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./Utils/DefaultMouseEvents */ "./src/Components/Viewer/Utils/DefaultMouseEvents.js");
/* harmony import */ var _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./Util3d/Util3d */ "./src/Components/Viewer/Util3d/Util3d.js");
/* harmony import */ var _Math_Vec3__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./Math/Vec3 */ "./src/Components/Viewer/Math/Vec3.js");
/* harmony import */ var react_resize_detector__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! react-resize-detector */ "react-resize-detector");
/* harmony import */ var react_resize_detector__WEBPACK_IMPORTED_MODULE_26___default = /*#__PURE__*/__webpack_require__.n(react_resize_detector__WEBPACK_IMPORTED_MODULE_26__);
/* harmony import */ var mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! mov-fe-lib-core */ "mov-fe-lib-core");
/* harmony import */ var mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_27___default = /*#__PURE__*/__webpack_require__.n(mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_27__);
/* harmony import */ var _Modal_ConfirmAlertModal__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ../Modal/ConfirmAlertModal */ "./src/Components/Modal/ConfirmAlertModal.js");
/* harmony import */ var _Modal_RobotLogModal__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ../Modal/RobotLogModal */ "./src/Components/Modal/RobotLogModal.js");
/* harmony import */ var _Utils_MeshCache__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ./Utils/MeshCache */ "./src/Components/Viewer/Utils/MeshCache.js");
/* harmony import */ var _NodeItem_Robot__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ./NodeItem/Robot */ "./src/Components/Viewer/NodeItem/Robot.js");










function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }



function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7___default()(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7___default()(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_6___default()(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }






















 //========================================================================================

/*                                                                                      *
 *                                      SceneViewer                                     *
 *                                                                                      */
//========================================================================================

var SceneViewer = /*#__PURE__*/function (_Component) {
  _babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_5___default()(SceneViewer, _Component);

  var _super = _createSuper(SceneViewer);

  function SceneViewer(props) {
    var _this;

    _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2___default()(this, SceneViewer);

    _this = _super.call(this, props);

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), "getRobotManager", function () {
      return _this.robotManager;
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), "getSceneMemory", function () {
      return _this.sceneMemory;
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), "getAssetsActionMap", function () {
      return _AssetsManager_AssetsManager__WEBPACK_IMPORTED_MODULE_20__["default"].getInstance().getAssetsActionMap();
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), "getRootNode", function () {
      var tree = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default()(_this.objectTree);
      return tree.filter(function (x) {
        return x.title === _NodeItem_GlobalRef__WEBPACK_IMPORTED_MODULE_17__["default"].NAME;
      })[0];
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), "getObjectTree", function () {
      return _this.objectTree;
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), "setSelectedAction", function () {
      /* empty */
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), "getUndoManager", function () {
      return _this.undoManager;
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), "getNodeFromTree", function (name) {
      var objectTree = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : _babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default()(_this.objectTree);
      return _Utils_TreeServerUtils__WEBPACK_IMPORTED_MODULE_19__["default"].ofScene(_this.sceneName, _this.undoManager).getNodeFromTree(name, objectTree);
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), "deleteNodeFromTreeUsingName", function () {
      throw new Error("Delete Node in viewer Exception");
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), "updateNodeInServer", function (name) {
      var oldName = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
      _Utils_TreeServerUtils__WEBPACK_IMPORTED_MODULE_19__["default"].ofScene(_this.sceneName, _this.undoManager).updateNodeInServer(name, _babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default()(_this.objectTree), oldName);
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), "addNodeItem2Tree", function (nodeItem) {
      var parentName = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : _NodeItem_GlobalRef__WEBPACK_IMPORTED_MODULE_17__["default"].NAME;
      var is2addInServer = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;
      var isVisible = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;
      var newObjectTree = _Utils_TreeServerUtils__WEBPACK_IMPORTED_MODULE_19__["default"].ofScene(_this.sceneName, _this.undoManager).addNodeItem2Tree(_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default()(_this.objectTree), nodeItem, parentName, is2addInServer, isVisible);
      _this.objectTree = newObjectTree;
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), "setCameraToTarget", function () {
      _this.sceneMemory.forEach(function (_ref) {
        var camera = _ref.camera;
        var focusObject = _this.isPanned ? "" : _this.props.focusObject.Value;

        _this.getNodeFromTree(focusObject).forEach(function (x) {
          console.log("Set Camera, Found Object", x.item.mesh);

          var dt = new Date().getTime() * 1e-3 - _this.time;

          _this.time = new Date().getTime() * 1e-3;

          var pos = x.item.mesh._absolutePosition.clone();

          _this.cameraSpeed = !_this.targetPos ? _babylonjs_core__WEBPACK_IMPORTED_MODULE_13__["Vector3"].Zero() : pos.subtract(_this.targetPos);
          _this.targetPos = pos;
          camera.setTarget(pos);
          camera.position = camera.position.add(_this.cameraSpeed.scale(dt));
          camera.beta = _this.isRotated ? camera.beta : 0; // move target object for debug
          // const p = x.item.mesh.position;
          // x.item.mesh.position = p.add(new Vector3(p.x, p.y, 0).scale(1e-2));
        });
      });
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), "onPointerDown", function (evt) {
      _this.isRotated = true;
      _Utils_DefaultMouseEvents__WEBPACK_IMPORTED_MODULE_23__["default"].onPointerDown(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this))(evt);
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), "onPointerUp", function (evt) {
      _Utils_DefaultMouseEvents__WEBPACK_IMPORTED_MODULE_23__["default"].onPointerUp(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this))(evt);
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), "onPointerMove", function (evt) {
      if (evt.buttons === 4) _this.isPanned = true;
      _Utils_DefaultMouseEvents__WEBPACK_IMPORTED_MODULE_23__["default"].onPointerMove(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this))(evt);
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), "onResize", function (w, h) {
      if (w === 0 && h === 0) return;

      _this.getSceneMemory().forEach(function (_ref2) {
        var mouseLocationText = _ref2.mouseLocationText;
        mouseLocationText.left = -w / 2 + w / 17;
        mouseLocationText.top = -h / 2 + h / 30;
      });
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), "retrieveSceneFromServer", function () {
      var afterLoading = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : function () {};
      _Utils_SceneServerUtils__WEBPACK_IMPORTED_MODULE_18__["default"].retrieveScene(_this.sceneName, function (data) {
        var errorList = _MainView_MainViewRetriever__WEBPACK_IMPORTED_MODULE_15__["default"].importScene(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), data.result);

        _this.resizeGround();

        _this.setState({
          errorList: errorList
        });

        afterLoading();
      });
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), "loadAssets", /*#__PURE__*/_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_9___default.a.mark(function _callee() {
      var assetManager;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_9___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              assetManager = _AssetsManager_AssetsManager__WEBPACK_IMPORTED_MODULE_20__["default"].getInstance();

              if (!(Object.values(assetManager.getAssets()).length === 0)) {
                _context.next = 4;
                break;
              }

              _context.next = 4;
              return assetManager.load();

            case 4:
            case "end":
              return _context.stop();
          }
        }
      }, _callee);
    })));

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), "loadScene", /*#__PURE__*/_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_9___default.a.mark(function _callee2() {
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_9___default.a.wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              _context2.next = 2;
              return _this.loadAssets();

            case 2:
              _this.retrieveSceneFromServer(_this.renderScene);

            case 3:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2);
    })));

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), "renderScene", function () {
      _this.getSceneMemory().forEach(function (_ref5) {
        var engine = _ref5.engine,
            scene = _ref5.scene;
        return engine.runRenderLoop(function () {
          _this.time = new Date().getTime() * 1e-3;
          scene.render();

          _this.setCameraToTarget();
        });
      });
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), "onSceneReady", function (scene) {
      var engine = scene.getEngine();
      var canvas = engine.getRenderingCanvas();

      _this.addCanvasEventListeners(canvas);

      var mouseLocationText = _Utils_DefaultScene__WEBPACK_IMPORTED_MODULE_16__["default"].createMouseLocationText(scene);
      _this.sceneMemory = monet__WEBPACK_IMPORTED_MODULE_14__["Maybe"].some({
        engine: engine,
        canvas: canvas,
        scene: scene,
        camera: _Utils_DefaultScene__WEBPACK_IMPORTED_MODULE_16__["default"].createCamera(scene, canvas),
        light: _Utils_DefaultScene__WEBPACK_IMPORTED_MODULE_16__["default"].createLight(scene),
        ground: _Utils_DefaultScene__WEBPACK_IMPORTED_MODULE_16__["default"].createMeshGround(scene),
        gizmoManager: _Utils_DefaultScene__WEBPACK_IMPORTED_MODULE_16__["default"].createGizmo(scene),
        highlightLayer: {
          layer: new _babylonjs_core__WEBPACK_IMPORTED_MODULE_13__["HighlightLayer"]("hl1", scene),
          lastHlMeshes: []
        },
        mouseLocationText: mouseLocationText
      });
      return scene;
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), "showRobotAlertModal", function (alert) {
      _this.robotAlertModal.current.open(alert);
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), "showAlert", function (message, type) {
      alert("type:".concat(type, " ") + message);
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), "renderMenus", function () {// to implement interface of MainView
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), "componentDidUpdate", function (prevProps) {
      var predicateAction = [{
        propVar: function propVar(x) {
          return x.sceneName.Value;
        },
        action: function action() {
          return _this.sceneName = _this.props.sceneName.Value;
        }
      }, {
        propVar: function propVar(x) {
          return x.focusObject.Value;
        },
        action: function action() {
          _this.isPanned = false;
          _this.isRotated = false;

          _this.setCameraToTarget();
        }
      }];
      predicateAction.forEach(function (_ref6) {
        var propVar = _ref6.propVar,
            action = _ref6.action;

        if (propVar(_this.props) !== propVar(prevProps)) {
          action();
        }
      });
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), "componentDidMount", function () {
      console.log("SceneViewer Did Mount!! ");

      _this.loadScene();
    });

    _this.state = {
      errorList: []
    };
    _this.sceneName = props.sceneName.Value;
    _this.sceneMemory = monet__WEBPACK_IMPORTED_MODULE_14__["Maybe"].none();
    _this.objectTree = [];
    _this.undoManager = new mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_27__["UndoManager"](); // camera properties

    _this.isPanned = false;
    _this.isRotated = false;
    _this.targetPos = undefined;
    _this.cameraSpeed = _babylonjs_core__WEBPACK_IMPORTED_MODULE_13__["Vector3"].Zero();
    _this.time = new Date().getTime() * 1e-3;
    _this.robotManager = new mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_27__["RobotManager"]();
    _this.robotAlertModal = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_10___default.a.createRef();
    return _this;
  } //========================================================================================

  /*                                                                                      *
   *                                   Getters & Setters                                  *
   *                                                                                      */
  //========================================================================================


  _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_3___default()(SceneViewer, [{
    key: "getGraph",
    value: function getGraph() {
      return new _TreeObject_TreeObject__WEBPACK_IMPORTED_MODULE_21__["default"](this.objectTree).getNode(function (x) {
        return _NodeItem_GraphItem__WEBPACK_IMPORTED_MODULE_22__["default"].TYPE === x.item.getType();
      });
    }
  }, {
    key: "getRobots",
    value: function getRobots() {
      return this.getRootNode().children.filter(function (x) {
        return x.item.getType() === _NodeItem_Robot__WEBPACK_IMPORTED_MODULE_31__["default"].TYPE;
      }).map(function (el) {
        return el.item;
      });
    }
  }, {
    key: "addCanvasEventListeners",
    value: function addCanvasEventListeners(canvas) {
      var _this2 = this;

      var events = [{
        name: "pointerdown",
        "function": function _function(evt) {
          return _this2.onPointerDown(evt);
        }
      }, {
        name: "pointerup",
        "function": function _function(evt) {
          return _this2.onPointerUp(evt);
        }
      }, {
        name: "pointermove",
        "function": function _function(evt) {
          return _this2.onPointerMove(evt);
        }
      }];
      events.forEach(function (event) {
        return canvas.addEventListener(event.name, event["function"], false);
      });
    }
  }, {
    key: "getMouseCoordsFromRoot",
    value: function getMouseCoordsFromRoot() {
      var _this3 = this;

      // TODO: code repetition in mainView
      return this.sceneMemory.flatMap(function (_ref7) {
        var scene = _ref7.scene,
            ground = _ref7.ground;
        var maybeCurrent = _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_24__["default"].getGroundPosition(scene, ground);
        return maybeCurrent.flatMap(function (current) {
          return monet__WEBPACK_IMPORTED_MODULE_14__["Maybe"].fromNull(_this3.getRootNode()).map(function (rootNode) {
            return _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_24__["default"].getLocalCoordFromWorld(rootNode.item.mesh, _Math_Vec3__WEBPACK_IMPORTED_MODULE_25__["default"].ofBabylon(current)).toBabylon();
          });
        });
      });
    }
  }, {
    key: "resizeGround",
    value: function resizeGround() {
      var defaultSize = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 30;
      this.getSceneMemory().forEach(function (memory) {
        memory.ground.dispose();
        var scene = memory.scene;

        var _scene$getWorldExtend = scene.getWorldExtends(),
            max = _scene$getWorldExtend.max,
            min = _scene$getWorldExtend.min;

        var diff = max.subtract(min);
        var is2Small = false;

        if (diff.length() < defaultSize) {
          diff = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_13__["Vector3"](defaultSize, 0, defaultSize);
          is2Small = true;
        }

        memory.ground = _Utils_DefaultScene__WEBPACK_IMPORTED_MODULE_16__["default"].createMeshGround(scene, diff.x, diff.z);
        memory.ground.position = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_13__["Vector3"](min.x + (is2Small ? 0 : diff.x / 2), memory.ground.position.y, min.z + (is2Small ? 0 : diff.z / 2));
      });
    }
  }, {
    key: "componentWillUnmount",
    value: function componentWillUnmount() {
      var _this4 = this;

      this.sceneMemory.forEach(function (_ref8) {
        var scene = _ref8.scene;

        // Unsubscribe robots from robot logger
        _this4.getRobots().forEach(function (nodeItem) {
          nodeItem.dispose();
          if (nodeItem.loggerSubscription) nodeItem.robot.unsubscribeToLogs(nodeItem.loggerSubscription);
        }); // Clear observers and clean scene objects


        _AssetsManager_AssetsManager__WEBPACK_IMPORTED_MODULE_20__["default"].getInstance().clearObserver(scene);
        _Utils_MeshCache__WEBPACK_IMPORTED_MODULE_30__["default"].getInstance().del(scene);
        delete _this4.objectTree;
        delete _this4.sceneMemory;
        delete _this4.undoManager;
      });
    }
  }, {
    key: "render",
    value: function render() {
      var _this5 = this;

      var errorList = this.state.errorList;

      var resetErrorList = function resetErrorList() {
        return _this5.setState({
          errorList: []
        });
      };

      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement("div", {
        style: {
          display: "flex",
          flexGrow: 1,
          maxHeight: "100%"
        }
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(_BaseViewer_BaseViewer__WEBPACK_IMPORTED_MODULE_11__["default"], {
        onSceneReady: this.onSceneReady,
        is2render: false,
        sceneFactory: _Utils_DefaultScene__WEBPACK_IMPORTED_MODULE_16__["default"].createScene
      }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(_Modal_ConfirmAlertModal__WEBPACK_IMPORTED_MODULE_28__["default"], {
        onSubmit: resetErrorList,
        onCancel: resetErrorList,
        open: (errorList === null || errorList === void 0 ? void 0 : errorList.length) > 0,
        title: "Scene Viewer",
        message: "An error occurred while loading the scene",
        submitText: "OK",
        submitColor: "primary",
        cancelText: "Cancel",
        cancelColor: "secondary"
      }, getErrorSolutionList(errorList)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(_Modal_RobotLogModal__WEBPACK_IMPORTED_MODULE_29__["default"], {
        ref: this.robotAlertModal,
        title: "Alert"
      }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(react_resize_detector__WEBPACK_IMPORTED_MODULE_26___default.a, {
        handleWidth: true,
        handleHeight: true,
        onResize: this.onResize
      }));
    } //========================================================================================

    /*                                                                                      *
     *                                   Static functions                                   *
     *                                                                                      */
    //========================================================================================

  }], [{
    key: "getComponentFactory",
    value: function getComponentFactory(sceneName) {
      return function (masterProps) {
        var augmentProps = _objectSpread({
          sceneName: sceneName
        }, masterProps);

        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(SceneViewer, augmentProps);
      };
    }
  }]);

  return SceneViewer;
}(react__WEBPACK_IMPORTED_MODULE_10__["Component"]);

_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(SceneViewer, "EXTENSION", ".3d");

SceneViewer.propTypes = {
  sceneName: prop_types__WEBPACK_IMPORTED_MODULE_12___default.a.shape({
    Value: prop_types__WEBPACK_IMPORTED_MODULE_12___default.a.string
  }),
  focusObject: prop_types__WEBPACK_IMPORTED_MODULE_12___default.a.shape({
    Value: prop_types__WEBPACK_IMPORTED_MODULE_12___default.a.string
  })
};
SceneViewer.defaultProps = {
  sceneName: {
    Value: "Pedro"
  },
  focusObject: {
    Value: ""
  }
};

function getErrorSolutionList(errorList) {
  return !errorList ? [] : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement("ul", null, errorList.map(function (_ref9, i) {
    var cause = _ref9.cause,
        solution = _ref9.solution;
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement("li", {
      key: "error" + i
    }, "".concat(cause, ", ").concat(solution));
  }));
}

/* harmony default export */ __webpack_exports__["default"] = (SceneViewer);

/***/ }),

/***/ "./src/Components/Viewer/TreeObject/TreeNode.js":
/*!******************************************************!*\
  !*** ./src/Components/Viewer/TreeObject/TreeNode.js ***!
  \******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "@babel/runtime/helpers/esm/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "@babel/runtime/helpers/esm/createClass");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__);



var TreeNode = /*#__PURE__*/function () {
  function TreeNode(title, item, children, expanded, isVisible) {
    var isStatic = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : false;

    _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default()(this, TreeNode);

    this.title = title;
    this.item = item;
    this.children = children;
    this.expanded = expanded;
    this.isVisible = isVisible;
    this.isStatic = isStatic;
  }

  _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1___default()(TreeNode, null, [{
    key: "dispose",
    value: function dispose(node) {
      /*
       * function must be defined here, otherwise it wouldn't work on the UI Tree change method
       */
      node.item.dispose();
      node.children.forEach(function (child) {
        TreeNode.dispose(child);
      });
    }
    /**
     *
     * @param {*} node
     */

  }, {
    key: "toDict",
    value: function toDict(node) {
      /*
       * function must be defined here, otherwise it wouldn't work on the UI Tree change method
       */
      return {
        name: node.title,
        item: node.item.toDict(),
        children: node.children.map(function (child) {
          return TreeNode.toDict(child);
        })
      };
    }
  }, {
    key: "builder",
    value: function builder() {
      return new TreeNodeBuilder();
    }
  }]);

  return TreeNode;
}();

var TreeNodeBuilder = /*#__PURE__*/function () {
  function TreeNodeBuilder() {
    _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default()(this, TreeNodeBuilder);

    this._title = null;
    this._item = {};
    this._children = [];
    this._expanded = false;
    this._isVisible = true;
    this._isStatic = false;
  }
  /**
   * Node title shown on the tree
   * @param {*} title : Node name displayed on the tree
  */


  _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1___default()(TreeNodeBuilder, [{
    key: "title",
    value: function title(_title) {
      this._title = _title;
      return this;
    }
    /**
     * Represents the node item - an instance of the NodeItem class
     * @param {*} item : Node item
    */

  }, {
    key: "item",
    value: function item(_item) {
      this._item = _item;
      return this;
    }
    /**
     * List of nodes children under the object
     * @param {*} children : Children list
    */

  }, {
    key: "children",
    value: function children(_children) {
      this._children = _children;
      return this;
    }
    /**
     * Indicate the node expansion state, if true means the node is expanded in the scene
     * @param {*} expanded : expansion state
    */

  }, {
    key: "expanded",
    value: function expanded(_expanded) {
      this._expanded = _expanded;
      return this;
    }
    /**
     * Indicate the node visibility state, if true means the node is visible in the scene
     * @param {*} isVisible : visibility state
    */

  }, {
    key: "isVisible",
    value: function isVisible(_isVisible) {
      this._isVisible = _isVisible;
      return this;
    }
    /**
     * A static node can't have any children in the object tree and its parent must be of type GlobalRef
     * @param {*} isStatic : static state
    */

  }, {
    key: "isStatic",
    value: function isStatic(_isStatic) {
      this._isStatic = _isStatic;
      return this;
    }
    /**
     * Build the TreeNode object
    */

  }, {
    key: "build",
    value: function build() {
      Object.values(this).forEach(function (value) {
        if (value === null) throw new Error("There are missing variables to build a TreeNode, e.g ".concat(value));
      });
      return new TreeNode(this._title, this._item, this._children, this._expanded, this._isVisible, this._isStatic);
    }
  }]);

  return TreeNodeBuilder;
}();

/* harmony default export */ __webpack_exports__["default"] = (TreeNode);

/***/ }),

/***/ "./src/Components/Viewer/TreeObject/TreeObject.js":
/*!********************************************************!*\
  !*** ./src/Components/Viewer/TreeObject/TreeObject.js ***!
  \********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "@babel/runtime/helpers/esm/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "@babel/runtime/helpers/esm/createClass");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "@babel/runtime/helpers/esm/defineProperty");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var monet__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! monet */ "monet");
/* harmony import */ var monet__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(monet__WEBPACK_IMPORTED_MODULE_3__);




function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2___default()(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }



function getNodeRecursive(tree, predicate) {
  for (var i = 0; i < tree.length; i++) {
    var node = tree[i];
    if (predicate(node)) return monet__WEBPACK_IMPORTED_MODULE_3__["Maybe"].some(node);
    var answer = getNodeRecursive(node.children, predicate);
    if (answer.isSome()) return answer;
  }

  return monet__WEBPACK_IMPORTED_MODULE_3__["Maybe"].none();
}

function getParentNodeRecursive(tree, predicate, parent) {
  var foundChild = tree.map(function (x) {
    return predicate(x);
  }).reduce(function (e, x) {
    return e || x;
  }, false);
  if (foundChild) return monet__WEBPACK_IMPORTED_MODULE_3__["Maybe"].fromNull(parent);

  for (var i = 0; i < tree.length; i++) {
    var node = tree[i];
    var answer = getParentNodeRecursive(node.children, predicate, node);
    if (answer.isSome()) return answer;
  }

  return monet__WEBPACK_IMPORTED_MODULE_3__["Maybe"].none();
}

function compareTreesRecursive(treeA, treeB, nodeEquality) {
  if (treeA.length === treeB.length) {
    var ans = true;

    for (var i = 0; i < treeA.length; i++) {
      var nodeA = treeA[i];
      var nodeB = treeB[i];

      if (nodeEquality(nodeA, nodeB)) {
        ans = ans && compareTreesRecursive(nodeA.children, nodeB.children, nodeEquality);
      } else {
        return false;
      }
    }

    return ans;
  }

  return false;
}

function mapRecursive(tree, newTree, map) {
  tree.forEach(function (nod) {
    var node = _objectSpread({}, nod);

    var mappedNode = map(node);
    mappedNode.children = mapRecursive(node.children, [], map);
    newTree.push(mappedNode);
  });
  return newTree;
}

function forEachRecursive() {
  var tree = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];
  var forEach = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {};
  tree.forEach(function (node) {
    forEach(node);
    forEachRecursive(node.children, forEach);
  });
}

function expand(node) {
  node.expanded = true;
  return node;
}

function filterTree() {
  var tree = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];
  var predicate = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function (node) {
    return true;
  };
  if (!tree || tree.length === 0) return [];
  var result = [];
  tree.forEach(function (nod) {
    var node = _objectSpread({}, nod);

    if (predicate(node)) {
      var expanded = expand(node);
      expanded.children = filterTree(expanded.children, predicate);
      result.push(expanded);
    } else if (node.children) {
      var children = filterTree(node.children, predicate);

      if (children.length !== 0) {
        node.children = children;
        result.push(expand(node));
      }
    }
  });
  return result;
}

function _flatten() {
  var tree = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];
  var predicate = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function (node) {
    return true;
  };
  if (!tree || tree.length === 0) return [];
  var result = [];
  tree.forEach(function (nod) {
    var node = _objectSpread({}, nod);

    if (predicate(node)) result.push(node);
    result = result.concat(_flatten(node.children, predicate));
  });
  return result;
}
/**
 * General purpose tree
 *
 * It just need a basic structure as input:
 *  Tree: Array<Node>
 *  Node: {children: Array<Node>}
 */


var TreeObject = /*#__PURE__*/function () {
  function TreeObject(tree) {
    _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default()(this, TreeObject);

    this.tree = tree;
  }
  /**
   * Return maybe node based on predicate
   * @param {*} predicate
   */


  _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1___default()(TreeObject, [{
    key: "getNode",
    value: function getNode(predicate) {
      return getNodeRecursive(this.tree, predicate);
    }
    /**
     * return maybe parent node based on the child predicate
     * @param {*} childPredicate
     */

  }, {
    key: "getParentNode",
    value: function getParentNode(childPredicate) {
      return getParentNodeRecursive(this.tree, childPredicate, null);
    }
  }, {
    key: "equals",
    value: function equals(tree) {
      var nodeEquality = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function (a, b) {
        return a === b;
      };

      if (tree.constructor === TreeObject) {
        return compareTreesRecursive(this.tree, tree.tree, nodeEquality);
      }

      return compareTreesRecursive(this.tree, tree, nodeEquality);
    }
  }, {
    key: "map",
    value: function map(nodeMap) {
      return new TreeObject(mapRecursive(this.tree, [], nodeMap));
    }
  }, {
    key: "filter",
    value: function filter() {
      var predicate = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : function (node) {
        return true;
      };
      return new TreeObject(filterTree(this.tree, predicate));
    }
    /**
     *
     * @param {*} predicate: node => Boolean
     * @returns Array with flattened tree while filtering values with predicate
     */

  }, {
    key: "flatten",
    value: function flatten() {
      var predicate = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : function (node) {
        return true;
      };
      return _flatten(this.tree, predicate);
    }
  }, {
    key: "forEach",
    value: function forEach(map) {
      forEachRecursive(this.tree, map);
    }
  }]);

  return TreeObject;
}();

/* harmony default export */ __webpack_exports__["default"] = (TreeObject);

/***/ }),

/***/ "./src/Components/Viewer/Util3d/CameraBuilder.js":
/*!*******************************************************!*\
  !*** ./src/Components/Viewer/Util3d/CameraBuilder.js ***!
  \*******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "@babel/runtime/helpers/esm/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "@babel/runtime/helpers/esm/createClass");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babylonjs/core */ "@babylonjs/core");
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babylonjs_core__WEBPACK_IMPORTED_MODULE_2__);




var CameraBuilder = /*#__PURE__*/function () {
  function CameraBuilder(scene) {
    _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default()(this, CameraBuilder);

    this._scene = scene;
    this._sphericalCoordinates = null;
    this._target = null;
    this._name = "camera".concat(Math.floor(Math.random() * 1e3));
  }

  _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1___default()(CameraBuilder, [{
    key: "name",
    value: function name(_name) {
      this._name = _name;
      return this;
    }
  }, {
    key: "sphericalCoordinates",
    value: function sphericalCoordinates(_sphericalCoordinates) {
      this._sphericalCoordinates = _sphericalCoordinates;
      return this;
    }
  }, {
    key: "target",
    value: function target(_target) {
      this._target = _target;
      return this;
    }
  }, {
    key: "build",
    value: function build() {
      var variables = Object.values(this);
      variables.forEach(function (x) {
        if (x === null) throw new Error("There are missing variables to build a camera, e.g ".concat(x));
      });
      return new _babylonjs_core__WEBPACK_IMPORTED_MODULE_2__["ArcRotateCamera"](this._name, this._sphericalCoordinates.x, this._sphericalCoordinates.y, this._sphericalCoordinates.z, this._target, this._scene);
    }
  }]);

  return CameraBuilder;
}();

/* harmony default export */ __webpack_exports__["default"] = (CameraBuilder);

/***/ }),

/***/ "./src/Components/Viewer/Util3d/DirectionalLightBuilder.js":
/*!*****************************************************************!*\
  !*** ./src/Components/Viewer/Util3d/DirectionalLightBuilder.js ***!
  \*****************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "@babel/runtime/helpers/esm/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "@babel/runtime/helpers/esm/createClass");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babylonjs/core */ "@babylonjs/core");
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babylonjs_core__WEBPACK_IMPORTED_MODULE_2__);




var DirectionalLightBuilder = /*#__PURE__*/function () {
  function DirectionalLightBuilder(scene) {
    _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default()(this, DirectionalLightBuilder);

    this._scene = scene;
    this._direction = null;
    this._name = "Dlight".concat(Math.floor(Math.random() * 1e3));
    this._intensity = 1;
  }

  _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1___default()(DirectionalLightBuilder, [{
    key: "direction",
    value: function direction(_direction) {
      this._direction = _direction;
      return this;
    }
  }, {
    key: "name",
    value: function name(_name) {
      this._name = _name;
      return this;
    }
  }, {
    key: "intensity",
    value: function intensity(_intensity) {
      this._intensity = _intensity;
      return this;
    }
  }, {
    key: "build",
    value: function build() {
      var variables = Object.values(this);
      variables.forEach(function (x) {
        if (x === null) throw new Error("There are missing variables to build a light, e.g ".concat(x));
      });
      var light = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_2__["DirectionalLight"](this._name, this._direction.normalize(), this._scene);
      light.intensity = this._intensity;
      return light;
    }
  }]);

  return DirectionalLightBuilder;
}();

/* harmony default export */ __webpack_exports__["default"] = (DirectionalLightBuilder);

/***/ }),

/***/ "./src/Components/Viewer/Util3d/GizmoManagerBuilder.js":
/*!*************************************************************!*\
  !*** ./src/Components/Viewer/Util3d/GizmoManagerBuilder.js ***!
  \*************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "@babel/runtime/helpers/esm/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "@babel/runtime/helpers/esm/createClass");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babylonjs/core */ "@babylonjs/core");
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babylonjs_core__WEBPACK_IMPORTED_MODULE_2__);




var GizmoManagerBuilder = /*#__PURE__*/function () {
  function GizmoManagerBuilder(scene) {
    _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default()(this, GizmoManagerBuilder);

    this._scene = scene;
    this._isPosition = false;
    this._isRotation = false;
    this._isBoundingBox = false;
    this._isScale = false;
    this._usePointerToAttachGizmos = false;
  }

  _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1___default()(GizmoManagerBuilder, [{
    key: "isPosition",
    value: function isPosition(v) {
      this._isPosition = v;
      return this;
    }
  }, {
    key: "isRotation",
    value: function isRotation(v) {
      this._isRotation = v;
      return this;
    }
  }, {
    key: "isBoundingBox",
    value: function isBoundingBox(v) {
      this._isBoundingBox = v;
      return this;
    }
  }, {
    key: "isScale",
    value: function isScale(v) {
      this._isScale = v;
      return this;
    }
  }, {
    key: "usePointerToAttachGizmos",
    value: function usePointerToAttachGizmos(v) {
      this._usePointerToAttachGizmos = v;
      return this;
    }
  }, {
    key: "build",
    value: function build() {
      var gizmoManager = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_2__["GizmoManager"](this._scene);
      gizmoManager.positionGizmoEnabled = this._isPosition;
      gizmoManager.rotationGizmoEnabled = this._isRotation;
      gizmoManager.boundingBoxGizmoEnabled = this._isBoundingBox;
      gizmoManager.scaleGizmoEnabled = this._isScale;
      gizmoManager.usePointerToAttachGizmos = this._usePointerToAttachGizmos;
      return gizmoManager;
    }
  }]);

  return GizmoManagerBuilder;
}();

/* harmony default export */ __webpack_exports__["default"] = (GizmoManagerBuilder);

/***/ }),

/***/ "./src/Components/Viewer/Util3d/GroundBuilder.js":
/*!*******************************************************!*\
  !*** ./src/Components/Viewer/Util3d/GroundBuilder.js ***!
  \*******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "@babel/runtime/helpers/esm/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "@babel/runtime/helpers/esm/createClass");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babylonjs/core */ "@babylonjs/core");
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babylonjs_core__WEBPACK_IMPORTED_MODULE_2__);




var GroundBuilder = /*#__PURE__*/function () {
  function GroundBuilder(scene) {
    _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default()(this, GroundBuilder);

    this._scene = scene;
    this._name = "camera".concat(Math.floor(Math.random() * 1e3));
    this._width = 1;
    this._height = 1;
    this._textureSrc = null;
    this._isPickable = false;
  }

  _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1___default()(GroundBuilder, [{
    key: "name",
    value: function name(_name) {
      this._name = _name;
      return this;
    }
  }, {
    key: "width",
    value: function width(_width) {
      this._width = _width;
      return this;
    }
  }, {
    key: "height",
    value: function height(_height) {
      this._height = _height;
      return this;
    }
  }, {
    key: "textureSrc",
    value: function textureSrc(_textureSrc) {
      this._textureSrc = _textureSrc;
      return this;
    }
  }, {
    key: "isPickable",
    value: function isPickable(_isPickable) {
      this._isPickable = _isPickable;
      return this;
    }
  }, {
    key: "build",
    value: function build() {
      var ground = _babylonjs_core__WEBPACK_IMPORTED_MODULE_2__["Mesh"].CreateGround(this._name, this._width, this._height, 1, this._scene);
      ground.translate(new _babylonjs_core__WEBPACK_IMPORTED_MODULE_2__["Vector3"](0, -1, 0), 1e-1, _babylonjs_core__WEBPACK_IMPORTED_MODULE_2__["Space"].WORLD);

      if (this._textureSrc) {
        ground.material = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_2__["StandardMaterial"]("Texture".concat(this._name), this._scene);
        ground.material.ambientTexture = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_2__["Texture"](this._textureSrc, this._scene);
        ground.material.ambientTexture.uScale = 1;
        ground.material.ambientTexture.vScale = 1;
      }

      ground.isPickable = this._isPickable;
      return ground;
    }
  }]);

  return GroundBuilder;
}();

/* harmony default export */ __webpack_exports__["default"] = (GroundBuilder);

/***/ }),

/***/ "./src/Components/Viewer/Util3d/PositionalLightBuilder.js":
/*!****************************************************************!*\
  !*** ./src/Components/Viewer/Util3d/PositionalLightBuilder.js ***!
  \****************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "@babel/runtime/helpers/esm/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "@babel/runtime/helpers/esm/createClass");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babylonjs/core */ "@babylonjs/core");
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babylonjs_core__WEBPACK_IMPORTED_MODULE_2__);




var PositionalLightBuilder = /*#__PURE__*/function () {
  function PositionalLightBuilder(scene) {
    _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default()(this, PositionalLightBuilder);

    this._scene = scene;
    this._position = null;
    this._name = "light".concat(Math.floor(Math.random() * 1e3));
    this._intensity = 1;
  }

  _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1___default()(PositionalLightBuilder, [{
    key: "position",
    value: function position(_position) {
      this._position = _position;
      return this;
    }
  }, {
    key: "name",
    value: function name(_name) {
      this._name = _name;
      return this;
    }
  }, {
    key: "intensity",
    value: function intensity(_intensity) {
      this._intensity = _intensity;
      return this;
    }
  }, {
    key: "build",
    value: function build() {
      var variables = Object.values(this);
      variables.forEach(function (x) {
        if (x === null) throw new Error("There are missing variables to build a light, e.g ".concat(x));
      });
      var light = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_2__["PointLight"](this._name, this._position, this._scene);
      light.intensity = this._intensity;
      return light;
    }
  }]);

  return PositionalLightBuilder;
}();

/* harmony default export */ __webpack_exports__["default"] = (PositionalLightBuilder);

/***/ }),

/***/ "./src/Components/Viewer/Util3d/ReferentialBuilder.js":
/*!************************************************************!*\
  !*** ./src/Components/Viewer/Util3d/ReferentialBuilder.js ***!
  \************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "@babel/runtime/helpers/esm/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "@babel/runtime/helpers/esm/createClass");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babylonjs/core */ "@babylonjs/core");
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babylonjs_core__WEBPACK_IMPORTED_MODULE_2__);




var ReferentialBuilder = /*#__PURE__*/function () {
  function ReferentialBuilder(scene) {
    _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default()(this, ReferentialBuilder);

    this._scene = scene;
    this._name = "referential".concat(Math.floor(Math.random() * 1e3));
    this._isPickable = true;
    this._boxParams = {
      isVisible: true,
      size: 0.25
    };
    this._size = 1;
  }

  _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1___default()(ReferentialBuilder, [{
    key: "name",
    value: function name(_name) {
      this._name = _name;
      return this;
    }
  }, {
    key: "isPickable",
    value: function isPickable(_isPickable) {
      this._isPickable = _isPickable;
      return this;
    }
  }, {
    key: "boxParams",
    value: function boxParams(_boxParams) {
      this._boxParams = _boxParams;
      return this;
    }
  }, {
    key: "size",
    value: function size(_size) {
      this._size = _size;
      return this;
    }
  }, {
    key: "build",
    value: function build() {
      var size = this._size;
      var axisX = _babylonjs_core__WEBPACK_IMPORTED_MODULE_2__["Mesh"].CreateLines("axisX".concat(this._name), [new _babylonjs_core__WEBPACK_IMPORTED_MODULE_2__["Vector3"].Zero(), new _babylonjs_core__WEBPACK_IMPORTED_MODULE_2__["Vector3"](size, 0, 0), new _babylonjs_core__WEBPACK_IMPORTED_MODULE_2__["Vector3"](size * 0.95, 0.05 * size, 0), new _babylonjs_core__WEBPACK_IMPORTED_MODULE_2__["Vector3"](size, 0, 0), new _babylonjs_core__WEBPACK_IMPORTED_MODULE_2__["Vector3"](size * 0.95, -0.05 * size, 0)], this._scene);
      axisX.color = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_2__["Color3"](1, 0, 0);
      axisX.isPickable = false;
      var axisY = _babylonjs_core__WEBPACK_IMPORTED_MODULE_2__["Mesh"].CreateLines("axisY".concat(this._name), [new _babylonjs_core__WEBPACK_IMPORTED_MODULE_2__["Vector3"].Zero(), new _babylonjs_core__WEBPACK_IMPORTED_MODULE_2__["Vector3"](0, size, 0), new _babylonjs_core__WEBPACK_IMPORTED_MODULE_2__["Vector3"](-0.05 * size, size * 0.95, 0), new _babylonjs_core__WEBPACK_IMPORTED_MODULE_2__["Vector3"](0, size, 0), new _babylonjs_core__WEBPACK_IMPORTED_MODULE_2__["Vector3"](0.05 * size, size * 0.95, 0)], this._scene);
      axisY.color = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_2__["Color3"](0, 1, 0);
      axisY.isPickable = false;
      var axisZ = _babylonjs_core__WEBPACK_IMPORTED_MODULE_2__["Mesh"].CreateLines("axisZ".concat(this._name), [new _babylonjs_core__WEBPACK_IMPORTED_MODULE_2__["Vector3"].Zero(), new _babylonjs_core__WEBPACK_IMPORTED_MODULE_2__["Vector3"](0, 0, size), new _babylonjs_core__WEBPACK_IMPORTED_MODULE_2__["Vector3"](0, -0.05 * size, size * 0.95), new _babylonjs_core__WEBPACK_IMPORTED_MODULE_2__["Vector3"](0, 0, size), new _babylonjs_core__WEBPACK_IMPORTED_MODULE_2__["Vector3"](0, 0.05 * size, size * 0.95)], this._scene);
      axisZ.color = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_2__["Color3"](0, 0, 1);
      axisZ.isPickable = false;
      var localOrigin = _babylonjs_core__WEBPACK_IMPORTED_MODULE_2__["MeshBuilder"].CreateBox(this._name, {
        size: this._boxParams.size
      }, this._scene);
      localOrigin.isVisible = this._boxParams.isVisible;
      localOrigin.isPickable = this._isPickable;
      axisX.parent = localOrigin;
      axisY.parent = localOrigin;
      axisZ.parent = localOrigin;
      return localOrigin;
    }
  }]);

  return ReferentialBuilder;
}();

/* harmony default export */ __webpack_exports__["default"] = (ReferentialBuilder);

/***/ }),

/***/ "./src/Components/Viewer/Util3d/SelectionPlaceHolder.js":
/*!**************************************************************!*\
  !*** ./src/Components/Viewer/Util3d/SelectionPlaceHolder.js ***!
  \**************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "@babel/runtime/helpers/esm/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "@babel/runtime/helpers/esm/createClass");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var lodash_uniqBy__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lodash/uniqBy */ "lodash/uniqBy");
/* harmony import */ var lodash_uniqBy__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(lodash_uniqBy__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../Util3d/Util3d */ "./src/Components/Viewer/Util3d/Util3d.js");
/* harmony import */ var _NodeItem_KeyPoint__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../NodeItem/KeyPoint */ "./src/Components/Viewer/NodeItem/KeyPoint.js");
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babylonjs/core */ "@babylonjs/core");
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babylonjs_core__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var monet__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! monet */ "monet");
/* harmony import */ var monet__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(monet__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _Math_Vec3__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../Math/Vec3 */ "./src/Components/Viewer/Math/Vec3.js");
/* harmony import */ var _Math_Vec2__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../Math/Vec2 */ "./src/Components/Viewer/Math/Vec2.js");
/* harmony import */ var _MainView_MeshSelector__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../MainView/MeshSelector */ "./src/Components/Viewer/MainView/MeshSelector.js");











var SelectionPlaceHolder = /*#__PURE__*/function () {
  function SelectionPlaceHolder(mainView) {
    var _this = this;

    _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default()(this, SelectionPlaceHolder);

    return mainView.getSceneMemory().map(function (_ref) {
      var scene = _ref.scene;
      var sceneId = scene._uid;

      if (sceneId in placeHolderInstance) {
        return placeHolderInstance[sceneId];
      }

      _this.scene = scene;
      _this.mesh = null;
      _this.arrayOfMeshes = [];
      _this.angleByMeshName = {};
      _this.mainView = mainView;
      _this.theta = 0;
      placeHolderInstance[sceneId] = _this;
      return _this;
    }).orSome(this);
  }

  _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1___default()(SelectionPlaceHolder, [{
    key: "push",
    value: function push(arrayOfMeshes) {
      if (arrayOfMeshes.length === 0) return this;
      arrayOfMeshes = Array.isArray(arrayOfMeshes) ? arrayOfMeshes : [arrayOfMeshes];
      this.arrayOfMeshes = lodash_uniqBy__WEBPACK_IMPORTED_MODULE_2___default()(this.arrayOfMeshes.concat(arrayOfMeshes), function (mesh) {
        return mesh.name;
      });
      this.angleByMeshName = this.arrayOfMeshes.reduce(function (map, m) {
        map[m.name] = getAngleFromMesh(m);
        return map;
      }, {});
      var placeHolderPosition = _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_3__["default"].pointAverage(this.arrayOfMeshes.map(function (mesh) {
        return _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_3__["default"].getGlobalCoordinates(mesh, mesh.position).toBabylon();
      }));
      this.createPlaceHolderIn(placeHolderPosition);
      return this;
    }
  }, {
    key: "clear",
    value: function clear() {
      this.arrayOfMeshes = [];
      this.mesh && this.mesh.dispose();
      return this;
    }
  }, {
    key: "createPlaceHolderIn",
    value: function createPlaceHolderIn(p) {
      var _this2 = this;

      if (this.mesh === null || this.mesh.isDisposed()) {
        this.mesh = _NodeItem_KeyPoint__WEBPACK_IMPORTED_MODULE_4__["default"].ofDict(this.scene, {
          name: NAME,
          type: SelectionPlaceHolder,
          position: [0, 0, 0],
          quaternion: _babylonjs_core__WEBPACK_IMPORTED_MODULE_5__["Quaternion"].Identity(),
          color: [0.5, 0.5, 0.5],
          keyValueMap: {},
          isVisible: true
        }).mesh;
        this.mesh.material = this.getSelPlaceHolderShader();
      }

      var that = this;

      this.mesh.getMouseContextActions = function () {
        return [{
          title: "Delete",
          onClick: function onClick() {
            that.mainView.addGizmo2Mesh();
            that.clear();
            _MainView_MeshSelector__WEBPACK_IMPORTED_MODULE_9__["default"].ofMainView(_this2.mainView).clear();
            that.mainView.highlightMeshesInScene();
            that.mainView.highlightNodesInTree();
          }
        }];
      };

      this.mesh.onClick = function () {};

      this.mesh.isSelectionPlaceHolder = true;
      this.mesh.parent = this.mainView.getRootNode().item.mesh;
      this.mesh.position = p.add(new _babylonjs_core__WEBPACK_IMPORTED_MODULE_5__["Vector3"](0, 0, HEIGHT));
      this.mesh.observers = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_5__["Observable"]();
      this.mesh.observers.add(this.getPlaceHolderObs());
      return this.mesh;
    }
  }, {
    key: "getSelPlaceHolderShader",
    value: function getSelPlaceHolderShader() {
      return _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_3__["default"].getShaderMaterial({
        name: "placeHolderShader",
        vertex: VERTEX,
        frag: FRAG
      })(this.scene);
    }
  }, {
    key: "getPlaceHolderObs",
    value: function getPlaceHolderObs() {
      var that = this;
      return function (_ref2) {
        var placeHolder = _ref2.updatedPointMesh,
            is2updateServer = _ref2.is2updateServer,
            displacement = _ref2.displacement;
        var filteredMeshes = that.arrayOfMeshes.filter(function (mesh) {
          return !mesh.isDisposed();
        });
        var theta = getAngleFromMesh(placeHolder);
        var dTheta = theta - that.theta;
        that.theta = theta;
        filteredMeshes.forEach(function (mesh) {
          handleMotion(theta, mesh, displacement, placeHolder, dTheta, that);

          if (is2updateServer) {
            that.mainView.updateNodeInServer(mesh.name);
          } // notify babylonjs observers


          monet__WEBPACK_IMPORTED_MODULE_6__["Maybe"].fromNull(mesh.observers).forEach(function (obs) {
            return obs.notifyObservers({
              updatedPointMesh: mesh,
              is2updateServer: is2updateServer,
              displacement: displacement
            });
          }); // notify graph observers

          monet__WEBPACK_IMPORTED_MODULE_6__["Maybe"].fromNull(mesh.graphVertex).forEach(function (_ref3) {
            var vertexObs = _ref3.vertexObs;
            vertexObs({
              updatedPointMesh: mesh,
              is2updateServer: is2updateServer,
              displacement: displacement
            });
          });
        });

        if (filteredMeshes.length === 0) {
          that.clear();
        }
      };
    }
  }], [{
    key: "ofMainView",
    value: function ofMainView(mainView) {
      return new SelectionPlaceHolder(mainView);
    }
  }]);

  return SelectionPlaceHolder;
}();

var VERTEX = "precision highp float;\n\n// Attributes\nattribute vec3 position;\nattribute vec3 normal;\n\n// Uniforms\nuniform mat4 worldViewProjection;\n\n// Varying\nvarying vec3 vPosition;\nvarying vec3 vNormal;\n\nvoid main(void) {\n    gl_Position = worldViewProjection * vec4(position, 1.0);\n    vPosition = position;\n    vNormal = normal;\n}";
var FRAG = "\nprecision highp float;\n\n// Varying\nvarying vec3 vPosition;\nvarying vec3 vNormal;\n\n// Uniforms\nuniform mat4 world;\nuniform float time;\n\nvoid main(void) {\n    // World values\n    vec3 p = vec3(world * vec4(vPosition, 1.0));\n    vec3 n = normalize(vec3(world * vec4(vNormal, 0.0)));\n    vec3 nColor = n * 0.5 + 0.5;\n    float spatialFreq = 20.;\n    float timeFreq = 10.;\n    float power = sin(spatialFreq * p.y - timeFreq * time);\n    power *= power;\n    vec3 color = power *  nColor + (1. - power) * vec3(1,1,1);\n    gl_FragColor = vec4(color, 1.);\n}";

var getAngleFromMesh = function getAngleFromMesh(mesh) {
  return monet__WEBPACK_IMPORTED_MODULE_6__["Maybe"].fromNull(mesh.rotationQuaternion).map(function (q) {
    return 2 * Math.atan2(q.z, q.w);
  }).orSome(0);
};

var placeHolderInstance = {};
var NAME = "placeholder";
var HEIGHT = 1.5;

function handleMotion(theta, mesh, displacement, placeHolder, dTheta, that) {
  if (Math.abs(dTheta) < 1e-3) {
    handleTranslation(mesh, displacement);
  } else {
    handleRotation(placeHolder, mesh, dTheta, that, theta);
  }
}

function handleRotation(placeHolder, mesh, dTheta, that, theta) {
  var baseCoord = _Math_Vec3__WEBPACK_IMPORTED_MODULE_7__["default"].ofBabylon(placeHolder.position);
  var v = _Math_Vec3__WEBPACK_IMPORTED_MODULE_7__["default"].ofBabylon(mesh.position).sub(baseCoord).toVec2();
  var eITheta = _Math_Vec2__WEBPACK_IMPORTED_MODULE_8__["default"].of(Math.cos(dTheta), Math.sin(dTheta));
  var rV = eITheta.prod(v);
  var finalV = _Math_Vec3__WEBPACK_IMPORTED_MODULE_7__["default"].of([rV.x, rV.y, 0]).toBabylon();
  mesh.position = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_5__["Vector3"](placeHolder.position.x, placeHolder.position.y, mesh.position.z).add(finalV);
  var finalTheta = that.angleByMeshName[mesh.name] + theta; // divide by 2 because of quaternion multiplication.

  mesh.rotationQuaternion = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_5__["Quaternion"](0, 0, Math.sin(finalTheta / 2), Math.cos(finalTheta / 2));
}

function handleTranslation(mesh, displacement) {
  var localDisplacement = _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_3__["default"].getLocalCoordFromWorld(mesh, _Math_Vec3__WEBPACK_IMPORTED_MODULE_7__["default"].ofBabylon(displacement), false);
  var newPos = _Math_Vec3__WEBPACK_IMPORTED_MODULE_7__["default"].ofBabylon(mesh.position).add(localDisplacement); // translating

  mesh.position = newPos.toBabylon();
}

/* harmony default export */ __webpack_exports__["default"] = (SelectionPlaceHolder);

/***/ }),

/***/ "./src/Components/Viewer/Util3d/TooltipBuilder.js":
/*!********************************************************!*\
  !*** ./src/Components/Viewer/Util3d/TooltipBuilder.js ***!
  \********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "@babel/runtime/helpers/esm/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "@babel/runtime/helpers/esm/createClass");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babylonjs/core */ "@babylonjs/core");
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babylonjs_core__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babylonjs_gui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babylonjs/gui */ "@babylonjs/gui");
/* harmony import */ var _babylonjs_gui__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babylonjs_gui__WEBPACK_IMPORTED_MODULE_3__);





var TooltipBuilder = /*#__PURE__*/function () {
  function TooltipBuilder(mesh, scene) {
    _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default()(this, TooltipBuilder);

    this._mesh = mesh;
    this._scene = scene;
    this._name = "tooltip".concat(Math.floor(Math.random() * 1e3)); // Tooltip box (Rectangle) properties

    this._width = null;
    this._height = null;
    this._thickness = 2;
    this._linkOffsetX = "100px";
    this._linkOffsetY = "-50px";
    this._background = "grey";
    this._alpha = 0.7;
    this._scaleX = 0;
    this._scaleY = 0;
    this._cornerRadius = 30; // Tooltip text (TextBlock) properties

    this._text = "";
    this._color = "White";
    this._fontSize = 14;
    this._padding = "20px";
  }

  _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1___default()(TooltipBuilder, [{
    key: "name",
    value: function name(_name) {
      this._name = _name;
      return this;
    }
  }, {
    key: "mesh",
    value: function mesh(_mesh) {
      this._mesh = _mesh;
      return this;
    } // Rectangle properties

  }, {
    key: "width",
    value: function width(_width) {
      this._width = _width;
      return this;
    }
  }, {
    key: "height",
    value: function height(_height) {
      this._height = _height;
      return this;
    }
  }, {
    key: "linkOffsetX",
    value: function linkOffsetX(_linkOffsetX) {
      this._linkOffsetX = _linkOffsetX;
      return this;
    }
  }, {
    key: "linkOffsetY",
    value: function linkOffsetY(_linkOffsetY) {
      this._linkOffsetY = _linkOffsetY;
      return this;
    }
  }, {
    key: "background",
    value: function background(_background) {
      this._background = _background;
      return this;
    }
  }, {
    key: "alpha",
    value: function alpha(_alpha) {
      this._alpha = _alpha;
      return this;
    }
  }, {
    key: "scaleX",
    value: function scaleX(_scaleX) {
      this._scaleX = _scaleX;
      return this;
    }
  }, {
    key: "scaleY",
    value: function scaleY(_scaleY) {
      this._scaleY = _scaleY;
      return this;
    }
  }, {
    key: "cornerRadius",
    value: function cornerRadius(_cornerRadius) {
      this._cornerRadius = _cornerRadius;
      return this;
    } // Tooltip properties

  }, {
    key: "text",
    value: function text(_text) {
      this._text = _text;
      return this;
    }
  }, {
    key: "color",
    value: function color(_color) {
      this._color = _color;
      return this;
    }
  }, {
    key: "fontSize",
    value: function fontSize(_fontSize) {
      this._fontSize = _fontSize;
      return this;
    }
  }, {
    key: "padding",
    value: function padding(_padding) {
      this._padding = _padding;
      return this;
    }
  }, {
    key: "build",
    value: function build() {
      // GUI
      var builder = this;
      var advancedTexture = _babylonjs_gui__WEBPACK_IMPORTED_MODULE_3__["AdvancedDynamicTexture"].CreateFullscreenUI("UI");
      advancedTexture.useInvalidateRectOptimization = false; // Set tooltip rectangle box

      var tooltipBox = new _babylonjs_gui__WEBPACK_IMPORTED_MODULE_3__["Rectangle"](this._name);
      advancedTexture.addControl(tooltipBox);
      tooltipBox.thickness = 2;
      if (this._width) tooltipBox.width = this._width;
      if (this._height) tooltipBox.height = this._height;
      tooltipBox.linkOffsetX = this._linkOffsetX;
      tooltipBox.linkOffsetY = this._linkOffsetY;
      tooltipBox.transformCenterX = 0;
      tooltipBox.transformCenterY = 1;
      tooltipBox.background = this._background;
      tooltipBox.alpha = this._alpha;
      tooltipBox.scaleX = this._scaleX;
      tooltipBox.scaleY = this._scaleY;
      tooltipBox.cornerRadius = this._cornerRadius;
      tooltipBox.adaptWidthToChildren = true;
      tooltipBox.adaptHeightToChildren = true;
      tooltipBox.linkWithMesh(this._mesh); // Set tooltip text block

      var textBlock = new _babylonjs_gui__WEBPACK_IMPORTED_MODULE_3__["TextBlock"]();
      textBlock.text = this._text;
      textBlock.color = this._color;
      textBlock.fontSize = this._fontSize;
      textBlock.textVerticalAlignment = _babylonjs_gui__WEBPACK_IMPORTED_MODULE_3__["Control"].VERTICAL_ALIGNMENT_TOP;
      textBlock.textHorizontalAlignment = _babylonjs_gui__WEBPACK_IMPORTED_MODULE_3__["Control"].HORIZONTAL_ALIGNMENT_CENTER;
      tooltipBox.addControl(textBlock);
      textBlock.alpha = 1 / textBlock.parent.alpha;
      textBlock.paddingTop = this._padding;
      textBlock.paddingBottom = this._padding;
      textBlock.paddingLeft = this._padding;
      textBlock.paddingRight = this._padding;
      textBlock.resizeToFit = true; // Set mesh action manager

      var actionManager = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_2__["ActionManager"](this._scene);
      this._mesh.actionManager = actionManager; // Animation to show/hide tooltip

      var scaleXAnimation = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_2__["Animation"]("tooltipAnimation", "scaleX", 30, _babylonjs_core__WEBPACK_IMPORTED_MODULE_2__["Animation"].ANIMATIONTYPE_FLOAT, _babylonjs_core__WEBPACK_IMPORTED_MODULE_2__["Animation"].ANIMATIONLOOPMODE_CONSTANT);
      var scaleYAnimation = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_2__["Animation"]("tooltipAnimation", "scaleY", 30, _babylonjs_core__WEBPACK_IMPORTED_MODULE_2__["Animation"].ANIMATIONTYPE_FLOAT, _babylonjs_core__WEBPACK_IMPORTED_MODULE_2__["Animation"].ANIMATIONLOOPMODE_CONSTANT);
      var keys = [{
        frame: 0,
        value: 0
      }, {
        frame: 10,
        value: 1
      }];
      scaleXAnimation.setKeys(keys);
      scaleYAnimation.setKeys(keys);
      tooltipBox.animations = [];
      tooltipBox.animations.push(scaleXAnimation);
      tooltipBox.animations.push(scaleYAnimation); // Register actions: OnPointerOverTrigger

      actionManager.registerAction(new _babylonjs_core__WEBPACK_IMPORTED_MODULE_2__["ExecuteCodeAction"](_babylonjs_core__WEBPACK_IMPORTED_MODULE_2__["ActionManager"].OnPointerOverTrigger, function (_) {
        builder._scene.beginAnimation(tooltipBox, 0, 10, false);
      })); // Register actions: OnPointerOutTrigger

      actionManager.registerAction(new _babylonjs_core__WEBPACK_IMPORTED_MODULE_2__["ExecuteCodeAction"](_babylonjs_core__WEBPACK_IMPORTED_MODULE_2__["ActionManager"].OnPointerOutTrigger, function (_) {
        builder._scene.beginAnimation(tooltipBox, 10, 0, false);
      }));
      return textBlock;
    }
  }]);

  return TooltipBuilder;
}();

/* harmony default export */ __webpack_exports__["default"] = (TooltipBuilder);

/***/ }),

/***/ "./src/Components/Viewer/Util3d/Util3d.js":
/*!************************************************!*\
  !*** ./src/Components/Viewer/Util3d/Util3d.js ***!
  \************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "@babel/runtime/helpers/esm/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "@babel/runtime/helpers/esm/createClass");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "@babel/runtime/helpers/esm/defineProperty");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _Math_Vec3__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../Math/Vec3 */ "./src/Components/Viewer/Math/Vec3.js");
/* harmony import */ var _Math_Mat3__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../Math/Mat3 */ "./src/Components/Viewer/Math/Mat3.js");
/* harmony import */ var monet__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! monet */ "monet");
/* harmony import */ var monet__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(monet__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _GizmoManagerBuilder_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./GizmoManagerBuilder.js */ "./src/Components/Viewer/Util3d/GizmoManagerBuilder.js");
/* harmony import */ var _CameraBuilder__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./CameraBuilder */ "./src/Components/Viewer/Util3d/CameraBuilder.js");
/* harmony import */ var _PositionalLightBuilder__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./PositionalLightBuilder */ "./src/Components/Viewer/Util3d/PositionalLightBuilder.js");
/* harmony import */ var _ReferentialBuilder__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./ReferentialBuilder */ "./src/Components/Viewer/Util3d/ReferentialBuilder.js");
/* harmony import */ var _GroundBuilder__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./GroundBuilder */ "./src/Components/Viewer/Util3d/GroundBuilder.js");
/* harmony import */ var _TooltipBuilder__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./TooltipBuilder */ "./src/Components/Viewer/Util3d/TooltipBuilder.js");
/* harmony import */ var _DirectionalLightBuilder__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./DirectionalLightBuilder */ "./src/Components/Viewer/Util3d/DirectionalLightBuilder.js");
/* harmony import */ var earcut__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! earcut */ "earcut");
/* harmony import */ var earcut__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(earcut__WEBPACK_IMPORTED_MODULE_13__);
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @babylonjs/core */ "@babylonjs/core");
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(_babylonjs_core__WEBPACK_IMPORTED_MODULE_14__);
/* harmony import */ var _NodeItem_GlobalRef__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../NodeItem/GlobalRef */ "./src/Components/Viewer/NodeItem/GlobalRef.js");
/* harmony import */ var _NodeItem_Box__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../NodeItem/Box */ "./src/Components/Viewer/NodeItem/Box.js");
/* harmony import */ var _NodeItem_Path__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../NodeItem/Path */ "./src/Components/Viewer/NodeItem/Path.js");
/* harmony import */ var _Utils_MaterialCache__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../Utils/MaterialCache */ "./src/Components/Viewer/Utils/MaterialCache.js");




















var Util3d = /*#__PURE__*/function () {
  function Util3d() {
    _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default()(this, Util3d);
  }

  _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1___default()(Util3d, null, [{
    key: "getGlobalCoordinates",
    value:
    /**
     *
     * @param {*} mesh
     * @param {*} localPosition: Vector3
     * @returns Vec3
     */
    function getGlobalCoordinates(mesh, localPosition) {
      if (mesh.parent && mesh.parent.name === _NodeItem_GlobalRef__WEBPACK_IMPORTED_MODULE_15__["default"].NAME || mesh.name === _NodeItem_GlobalRef__WEBPACK_IMPORTED_MODULE_15__["default"].NAME) {
        return _Math_Vec3__WEBPACK_IMPORTED_MODULE_3__["default"].ofBabylon(localPosition);
      }

      var meshParent = mesh.parent;
      var meshParentPos = _Math_Vec3__WEBPACK_IMPORTED_MODULE_3__["default"].ofBabylon(meshParent.position);
      var meshParentRotMat = Util3d.getRotationMatrix(meshParent);
      var meshParentScaling = _Math_Vec3__WEBPACK_IMPORTED_MODULE_3__["default"].ofBabylon(meshParent.scaling);
      return meshParentRotMat.prodVec(meshParentScaling.mul(Util3d.getGlobalCoordinates(mesh.parent, localPosition))).add(meshParentPos);
    }
    /**
     *
     * @param {*} mesh
     * @param {*} localPosition : Vec3
     * @returns
     */

  }, {
    key: "getParentCoord",
    value: function getParentCoord(mesh, localPosition) {
      var withTranslation = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;
      var meshParent = mesh.parent;
      var meshParentPos = withTranslation ? _Math_Vec3__WEBPACK_IMPORTED_MODULE_3__["default"].ofBabylon(meshParent.position) : _Math_Vec3__WEBPACK_IMPORTED_MODULE_3__["default"].ZERO;
      var meshParentRotMat = Util3d.getRotationMatrix(meshParent);
      var meshParentScaling = _Math_Vec3__WEBPACK_IMPORTED_MODULE_3__["default"].ofBabylon(meshParent.scaling);
      return meshParentRotMat.prodVec(meshParentScaling.mul(localPosition)).add(meshParentPos);
    }
    /**
     *
     * @param {*} mesh
     * @param {*} x: Vector3 in mesh local coord
     * @returns Vector3
     */

  }, {
    key: "getGlobalCoord",
    value: function getGlobalCoord(mesh, x) {
      if (mesh.parent && mesh.parent.name === _NodeItem_GlobalRef__WEBPACK_IMPORTED_MODULE_15__["default"].NAME || mesh.name === _NodeItem_GlobalRef__WEBPACK_IMPORTED_MODULE_15__["default"].NAME) {
        return x;
      }

      var meshParent = mesh.parent;
      var meshParentPos = _Math_Vec3__WEBPACK_IMPORTED_MODULE_3__["default"].ofBabylon(meshParent.position);
      var meshParentRotMat = Util3d.getRotationMatrix(meshParent);
      var meshParentScaling = _Math_Vec3__WEBPACK_IMPORTED_MODULE_3__["default"].ofBabylon(meshParent.scaling);
      var childPos = meshParentRotMat.prodVec(meshParentScaling.mul(_Math_Vec3__WEBPACK_IMPORTED_MODULE_3__["default"].ofBabylon(x))).add(meshParentPos);
      return Util3d.getGlobalCoord(meshParent, childPos.toBabylon());
    }
  }, {
    key: "getBabylonCoordinates",
    value: function getBabylonCoordinates(positionInWorld) {
      return _NodeItem_GlobalRef__WEBPACK_IMPORTED_MODULE_15__["default"].forwardCoordinates(positionInWorld);
    }
    /**
     *
     * @param {*} mesh
     * @param {*} worldPosition: Vector3 from GlobalRef coordinate frame
     */

  }, {
    key: "getLocalCoordFromGlobal",
    value: function getLocalCoordFromGlobal(mesh, worldPosition) {
      var withTranslation = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;
      if (mesh.parent && mesh.parent.name === _NodeItem_GlobalRef__WEBPACK_IMPORTED_MODULE_15__["default"].NAME || mesh.name === _NodeItem_GlobalRef__WEBPACK_IMPORTED_MODULE_15__["default"].NAME) return _Math_Vec3__WEBPACK_IMPORTED_MODULE_3__["default"].ofBabylon(worldPosition);
      var meshParent = mesh.parent;
      var meshParentPos = withTranslation ? _Math_Vec3__WEBPACK_IMPORTED_MODULE_3__["default"].ofBabylon(meshParent.position) : _Math_Vec3__WEBPACK_IMPORTED_MODULE_3__["default"].ZERO;
      var meshParentRotMat = Util3d.getRotationMatrix(meshParent);
      var meshParentScaling = _Math_Vec3__WEBPACK_IMPORTED_MODULE_3__["default"].ofBabylon(meshParent.scaling);
      return meshParentScaling.map(function (z) {
        return 1 / z;
      }).mul(meshParentRotMat.dotVec(Util3d.getLocalCoordFromGlobal(meshParent, worldPosition, withTranslation).sub(meshParentPos)));
    }
    /**
     *
     * @param {*} mesh
     * @param {*} worldPosition: Vec3 from World(Babylon) coordinate frame
     *
     * @returns localPosition: Vec3
     */

  }, {
    key: "getLocalCoordFromWorld",
    value: function getLocalCoordFromWorld(mesh, worldPosition) {
      var withTranslation = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;

      /// WARNING: very similar with getLocalCoordFromGlobal
      if (!mesh.parent) {
        return worldPosition;
      }

      var meshParent = mesh.parent;
      var meshParentPos = withTranslation ? _Math_Vec3__WEBPACK_IMPORTED_MODULE_3__["default"].ofBabylon(meshParent.position) : _Math_Vec3__WEBPACK_IMPORTED_MODULE_3__["default"].ZERO;
      var meshParentRotMat = Util3d.getRotationMatrix(meshParent);
      var meshParentScaling = _Math_Vec3__WEBPACK_IMPORTED_MODULE_3__["default"].ofBabylon(meshParent.scaling); // assume scaling != 0

      var inverseScaling = meshParentScaling.map(function (x) {
        return 1.0 / x;
      });
      return inverseScaling.mul(meshParentRotMat.dotVec(Util3d.getLocalCoordFromWorld(meshParent, worldPosition, withTranslation).sub(meshParentPos)));
    }
    /**
     * World to Global coords
     * @param {*} parentView: MainView
     */

  }, {
    key: "getRotationMatrix",
    value: function getRotationMatrix(mesh) {
      var localRotationMatrix = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_14__["Matrix"]();
      var maybeQuaternion = monet__WEBPACK_IMPORTED_MODULE_5__["Maybe"].fromNull(mesh === null || mesh === void 0 ? void 0 : mesh.rotationQuaternion);
      maybeQuaternion.forEach(function (quaternion) {
        return quaternion.toRotationMatrix(localRotationMatrix);
      });
      maybeQuaternion.orElseRun(function () {
        var quaternion = _babylonjs_core__WEBPACK_IMPORTED_MODULE_14__["Quaternion"].RotationYawPitchRoll(mesh.rotation.y, mesh.rotation.x, mesh.rotation.z);
        quaternion.toRotationMatrix(localRotationMatrix);
      });
      return _Math_Mat3__WEBPACK_IMPORTED_MODULE_4__["default"].ofBabylonMatrix(localRotationMatrix);
    }
  }, {
    key: "showNormals",
    value: function showNormals(scene, mesh) {
      var size = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;
      var color = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : _babylonjs_core__WEBPACK_IMPORTED_MODULE_14__["Color3"].Red();
      var normals = mesh.getVerticesData(_babylonjs_core__WEBPACK_IMPORTED_MODULE_14__["VertexBuffer"].NormalKind);
      var positions = mesh.getVerticesData(_babylonjs_core__WEBPACK_IMPORTED_MODULE_14__["VertexBuffer"].PositionKind);
      var lines = [];

      for (var i = 0; i < normals.length; i += 3) {
        var v1 = _babylonjs_core__WEBPACK_IMPORTED_MODULE_14__["Vector3"].FromArray(positions, i);
        var v2 = v1.add(_babylonjs_core__WEBPACK_IMPORTED_MODULE_14__["Vector3"].FromArray(normals, i).scaleInPlace(size));
        lines.push([v1.add(mesh.position), v2.add(mesh.position)]);
      }

      var normalLines = _babylonjs_core__WEBPACK_IMPORTED_MODULE_14__["MeshBuilder"].CreateLineSystem("normalLines", {
        lines: lines
      }, scene);
      normalLines.color = color;
      normalLines.parent = mesh;
      return normalLines;
    }
  }, {
    key: "orthogonalBasisFromVector",
    value: function orthogonalBasisFromVector(u) {
      var identityMatrix = [new _babylonjs_core__WEBPACK_IMPORTED_MODULE_14__["Vector3"](1, 0, 0), new _babylonjs_core__WEBPACK_IMPORTED_MODULE_14__["Vector3"](0, 1, 0), new _babylonjs_core__WEBPACK_IMPORTED_MODULE_14__["Vector3"](0, 0, 1)];
      var uArray = [u.x, u.y, u.z]; // choose pivot

      var pivot = 0;

      for (var i = 0; i < 3; i++) {
        if (uArray[i] !== 0) {
          pivot = i;
          break;
        }
      }

      var v = identityMatrix[(pivot + 1) % 3].add(identityMatrix[pivot].scale(-uArray[(pivot + 1) % 3] / uArray[pivot]));
      v = v.normalize();
      var w = identityMatrix[(pivot + 2) % 3].add(identityMatrix[pivot].scale(-uArray[(pivot + 2) % 3] / uArray[pivot]));
      w = w.normalize();
      w = w.subtract(v.scale(_babylonjs_core__WEBPACK_IMPORTED_MODULE_14__["Vector3"].Dot(v, w)));
      return {
        u: _babylonjs_core__WEBPACK_IMPORTED_MODULE_14__["Vector3"].FromArray(uArray).normalize(),
        v: v,
        w: w.normalize()
      };
    }
  }, {
    key: "cameraBuilder",
    value: function cameraBuilder(scene) {
      return new _CameraBuilder__WEBPACK_IMPORTED_MODULE_7__["default"](scene);
    }
  }, {
    key: "gizmoManagerBuilder",
    value: function gizmoManagerBuilder(scene) {
      return new _GizmoManagerBuilder_js__WEBPACK_IMPORTED_MODULE_6__["default"](scene);
    }
  }, {
    key: "meshFromPositionAndFaces",
    value: function meshFromPositionAndFaces(name, scene, positions, faces) {
      var updatable = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : true;
      var vertexData = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_14__["VertexData"]();
      vertexData.positions = positions.flatMap(function (z) {
        return [z.x, z.y, z.z];
      });
      vertexData.indices = faces.flatMap(function (z) {
        return z;
      });
      var mesh = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_14__["Mesh"](name, scene);
      vertexData.applyToMesh(mesh, updatable); // mesh.createNormals();

      return mesh;
    }
    /**
     *
     * @param {*} polygon: Array of babylonjs vector3, representing a boundary of a polygon
     */

  }, {
    key: "triangulatePolygon",
    value: function triangulatePolygon(polygon) {
      var triangulation = earcut__WEBPACK_IMPORTED_MODULE_13___default()(polygon.map(function (x) {
        return [x.x, x.y, x.z];
      }).flatMap(function (x) {
        return x;
      }), null, 3);
      var len = triangulation.length / 3;
      var ans = [];

      for (var i = 0; i < len; i++) {
        var i3 = 3 * i;
        ans.push([triangulation[i3], triangulation[i3 + 1], triangulation[i3 + 2]]);
      }

      return ans;
    }
    /**
     *
     * @param {*} polygon: Array of babylonjs vector3, representing a boundary of a polygon
     * Returns a real number representing the orientation of the curve, if positive represents a counterclockwise orientation, clockwise otherwise.
     */

  }, {
    key: "computeOrientation",
    value: function computeOrientation(polygon) {
      var n = polygon.length;
      var vec3Poly = polygon.map(function (x) {
        return _Math_Vec3__WEBPACK_IMPORTED_MODULE_3__["default"].ofBabylon(x);
      });
      var orientation = 0;
      vec3Poly.forEach(function (a, i) {
        var modi = (i + 1) % n;
        var edge = vec3Poly[modi].sub(vec3Poly[i]);
        orientation += _Math_Vec3__WEBPACK_IMPORTED_MODULE_3__["default"].of([-a.y, a.x, a.z]).dot(edge);
      });
      return orientation / 2;
    }
    /**
     * @param {*} arrayOfPoints: array of babylon vec3
     * Returns the average
     */

  }, {
    key: "pointAverage",
    value: function pointAverage(arrayOfPoints) {
      if (!arrayOfPoints || arrayOfPoints.length === 0) return _babylonjs_core__WEBPACK_IMPORTED_MODULE_14__["Vector3"].Zero();
      return arrayOfPoints.reduce(function (e, x) {
        return e.add(x);
      }, _babylonjs_core__WEBPACK_IMPORTED_MODULE_14__["Vector3"].Zero()).scale(1 / arrayOfPoints.length);
    }
  }, {
    key: "pointAverageVec3",
    value: function pointAverageVec3(arrayOfPoints) {
      if (!arrayOfPoints || arrayOfPoints.length === 0) return _Math_Vec3__WEBPACK_IMPORTED_MODULE_3__["default"].ZERO;
      return arrayOfPoints.reduce(function (e, x) {
        return e.add(x);
      }, _Math_Vec3__WEBPACK_IMPORTED_MODULE_3__["default"].ZERO).scale(1 / arrayOfPoints.length);
    }
  }, {
    key: "randomVector3",
    value: function randomVector3(a, b) {
      return new _babylonjs_core__WEBPACK_IMPORTED_MODULE_14__["Vector3"].FromArray([0, 0, 0].map(function (x) {
        return a + (b - a) * Math.random();
      }));
    }
  }, {
    key: "getMaterialFromColor",
    value: function getMaterialFromColor(color, scene) {
      var name = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : "MaterialFromColor".concat(randomDigits());
      var material = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_14__["StandardMaterial"](name, scene);
      material.diffuseColor = color;
      material.emissiveColor = color;
      return material;
    }
  }, {
    key: "setOrthoView",
    value: function setOrthoView(camera, scene) {
      camera.mode = _babylonjs_core__WEBPACK_IMPORTED_MODULE_14__["Camera"].ORTHOGRAPHIC_CAMERA;
      var aspect = scene.getEngine().getAspectRatio(camera);
      var distance = camera.position.length();
      camera.orthoLeft = -distance / 2;
      camera.orthoRight = distance / 2;
      camera.orthoBottom = camera.orthoLeft * aspect;
      camera.orthoTop = camera.orthoRight * aspect;
    }
  }, {
    key: "setPerspectiveView",
    value: function setPerspectiveView(camera, scene) {
      camera.mode = _babylonjs_core__WEBPACK_IMPORTED_MODULE_14__["Camera"].PERSPECTIVE_CAMERA;
    }
    /**
     *
     * @param {*} scene: Babylonjs Scene
     * @param {*} name: String
     * @param {*} begin: Vector3
     * @param {*} end: Vector3
     */

  }, {
    key: "getArrow",
    value: function getArrow(scene, name, begin, end) {
      var radius = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 1;
      var arrowTube = Util3d.createTubeFromPoints(scene, [begin, end], _babylonjs_core__WEBPACK_IMPORTED_MODULE_14__["Color3"].Gray(), radius, name + "tube");
      var arrowCone = Util3d.createOrientedCone(scene, end.subtract(begin).normalize().scale(radius * 7), _babylonjs_core__WEBPACK_IMPORTED_MODULE_14__["Color3"].Gray(), name + "cone");
      arrowCone.position = end;
      var arrowMesh = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_14__["Mesh"](name, scene);
      arrowTube.parent = arrowMesh;
      arrowCone.parent = arrowMesh;
      return arrowMesh;
    }
    /*
     * Show tooltip on mesh on mouse over
     *
     * @param {Mesh} mesh: Mesh to add the tooltip
     * @param {Scene} scene: Scene
     * @param {String} tooltipText: Text to be added to the tooltip
     *
     * @returns {TextBlock} TextBlock instance to allow dynamic changes
     *  on the tooltip content by: textBlock.text = "new text"
     */

  }, {
    key: "addTooltipToMesh",
    value: function addTooltipToMesh(mesh, scene) {
      var tooltipText = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : "";
      return new _TooltipBuilder__WEBPACK_IMPORTED_MODULE_11__["default"](mesh, scene).text(tooltipText).build();
    }
    /**
     * Add click action to mesh in scene
     * @param {Mesh} mesh : Mesh to add click action
     * @param {Scene} scene : Scene object
     * @param {Function} callback : Function to be called on click
     */

  }, {
    key: "addClickActionToMesh",
    value: function addClickActionToMesh(mesh, scene, callback) {
      // Set mesh action manager
      var actionManager = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_14__["ActionManager"](scene);
      mesh.actionManager = actionManager; // Register actions: OnPickDownTrigger (click action)

      actionManager.registerAction(new _babylonjs_core__WEBPACK_IMPORTED_MODULE_14__["ExecuteCodeAction"](_babylonjs_core__WEBPACK_IMPORTED_MODULE_14__["ActionManager"].OnPickDownTrigger, function (_) {
        callback();
      })); // Register actions: OnPointerOverTrigger (hover effect)

      actionManager.registerAction(new _babylonjs_core__WEBPACK_IMPORTED_MODULE_14__["ExecuteCodeAction"](_babylonjs_core__WEBPACK_IMPORTED_MODULE_14__["ActionManager"].OnPointerOverTrigger, function (_) {
        mesh.material.unfreeze();
        mesh.material.emissiveColor = _babylonjs_core__WEBPACK_IMPORTED_MODULE_14__["Color3"].Gray();
      })); // Register actions: OnPointerOutTrigger (clear hover effect)

      actionManager.registerAction(new _babylonjs_core__WEBPACK_IMPORTED_MODULE_14__["ExecuteCodeAction"](_babylonjs_core__WEBPACK_IMPORTED_MODULE_14__["ActionManager"].OnPointerOutTrigger, function (_) {
        mesh.material.emissiveColor = _babylonjs_core__WEBPACK_IMPORTED_MODULE_14__["Color3"].White();
        setTimeout(function () {
          return mesh.material.freeze();
        }, 10);
      }));
    }
    /**
     * Get node item type from mesh
     * @param {Mesh} mesh : Node Item mesh
     * @returns {String} NodeItem type
     */

  }]);

  return Util3d;
}();

_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2___default()(Util3d, "toGlobalCoord", function (parentView) {
  var rootMesh = parentView.getRootNode().item.mesh;
  return function (arrayOfVector3) {
    var transform = function transform(p) {
      return Util3d.getLocalCoordFromWorld({
        parent: rootMesh
      }, _Math_Vec3__WEBPACK_IMPORTED_MODULE_3__["default"].ofBabylon(p)).toBabylon();
    };

    if (Array.isArray(arrayOfVector3)) {
      return arrayOfVector3.map(transform);
    }

    return transform(arrayOfVector3);
  };
});

_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2___default()(Util3d, "createOrientedCone", function (scene) {
  var u = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new _babylonjs_core__WEBPACK_IMPORTED_MODULE_14__["Vector3"](1, 0, 0);
  var color = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : _babylonjs_core__WEBPACK_IMPORTED_MODULE_14__["Color3"].Gray();
  var name = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : "OrientedCone".concat(randomDigits());
  var isPickable = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : true;
  var segments = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : 16;
  var surface = {
    positions: [],
    faces: []
  };
  var d = u.length() / 3;
  var mat3 = Util3d.orthogonalBasisFromVector(u);
  var v = mat3.v;
  var w = mat3.w;
  var orientation = Math.sign(_babylonjs_core__WEBPACK_IMPORTED_MODULE_14__["Vector3"].Dot(_babylonjs_core__WEBPACK_IMPORTED_MODULE_14__["Vector3"].Cross(v, w), u)); // positions

  for (var i = 0; i < segments; i++) {
    var theta = orientation * (2 * Math.PI / segments) * i;
    surface.positions.push(v.scale(d * Math.cos(theta)).add(w.scale(d * Math.sin(theta))));
  }

  surface.positions.push(_babylonjs_core__WEBPACK_IMPORTED_MODULE_14__["Vector3"].Zero());
  surface.positions.push(u);
  var zeroIndex = surface.positions.length - 1;
  var uIndex = surface.positions.length - 2;

  for (var _i = 0; _i < segments; _i++) {
    // bottom faces
    surface.faces.push([zeroIndex, (_i + 1) % segments, _i]); // cone faces

    surface.faces.push([uIndex, _i, (_i + 1) % segments]);
  } // mesh


  var mesh = Util3d.meshFromPositionAndFaces(name, scene, surface.positions, surface.faces);
  mesh.convertToFlatShadedMesh();
  var materialName = "OrientedConeMaterial".concat(name);
  mesh.material = MATERIAL_CACHE.get(materialName, scene).orLazy(function () {
    var material = Util3d.getMaterialFromColor(color, scene, materialName);
    MATERIAL_CACHE.put(materialName, scene, material);
    return material;
  });
  mesh.isPickable = isPickable;
  return mesh;
});

_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2___default()(Util3d, "createSphere", function (scene) {
  var color = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : _babylonjs_core__WEBPACK_IMPORTED_MODULE_14__["Color3"].Gray();
  var diameter = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;
  var name = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : "Sphere".concat(randomDigits());
  var isPickable = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : true;
  var sphere = _babylonjs_core__WEBPACK_IMPORTED_MODULE_14__["Mesh"].CreateSphere(name, 16, diameter, scene);
  var material = Util3d.getMaterialFromColor(color, scene, "SphereMaterial".concat(name));
  sphere.material = material;
  sphere.isPickable = isPickable;
  return sphere;
});

_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2___default()(Util3d, "createBox", function (scene) {
  var color = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : _babylonjs_core__WEBPACK_IMPORTED_MODULE_14__["Color3"].Gray();
  var size = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : _NodeItem_Box__WEBPACK_IMPORTED_MODULE_16__["default"].DEFAULT_SIZE;
  var name = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : "Box".concat(randomDigits());
  var isPickable = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : true;
  var box = _babylonjs_core__WEBPACK_IMPORTED_MODULE_14__["Mesh"].CreateBox(name, size, scene);
  var material = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_14__["StandardMaterial"]("BoxMaterial".concat(name), scene);
  material.diffuseColor = color;
  material.emissiveColor = color;
  box.material = material;
  box.isPickable = isPickable;
  return box;
});

_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2___default()(Util3d, "createTubeFromPoints", function (scene, points) {
  var color = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : _babylonjs_core__WEBPACK_IMPORTED_MODULE_14__["Color3"].Gray();
  var radius = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 1;
  var name = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : "Tube".concat(randomDigits());
  var isPickable = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : true;
  var mesh = _babylonjs_core__WEBPACK_IMPORTED_MODULE_14__["MeshBuilder"].CreateTube(name, {
    path: points,
    radius: radius,
    sideOrientation: _babylonjs_core__WEBPACK_IMPORTED_MODULE_14__["Mesh"].DOUBLESIDE,
    updatable: true,
    cap: _babylonjs_core__WEBPACK_IMPORTED_MODULE_14__["Mesh"].CAP_ALL
  }, scene);
  var materialName = "Material".concat(name);
  mesh.material = MATERIAL_CACHE.get(materialName, scene).orLazy(function () {
    var material = Util3d.getMaterialFromColor(color, scene, materialName);
    MATERIAL_CACHE.put(materialName, scene, material);
    return material;
  });
  mesh.isPickable = isPickable;
  return mesh;
});

_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2___default()(Util3d, "positionalLightBuilder", function (scene) {
  return new _PositionalLightBuilder__WEBPACK_IMPORTED_MODULE_8__["default"](scene);
});

_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2___default()(Util3d, "directionalLightBuilder", function (scene) {
  return new _DirectionalLightBuilder__WEBPACK_IMPORTED_MODULE_12__["default"](scene);
});

_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2___default()(Util3d, "referentialBuilder", function (scene) {
  return new _ReferentialBuilder__WEBPACK_IMPORTED_MODULE_9__["default"](scene);
});

_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2___default()(Util3d, "getGroundPosition", function (scene, ground) {
  // Use a predicate to get position on the ground
  var pickInfo = scene.pick(scene.pointerX, scene.pointerY, function (mesh) {
    return mesh === ground;
  });
  if (pickInfo.hit) return monet__WEBPACK_IMPORTED_MODULE_5__["Maybe"].some(pickInfo.pickedPoint);
  return monet__WEBPACK_IMPORTED_MODULE_5__["Maybe"].none();
});

_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2___default()(Util3d, "pickMesh", function (scene, ground) {
  var pickInfo = scene.pick(scene.pointerX, scene.pointerY, function (mesh) {
    return mesh !== ground && mesh.isEnabled();
  });

  if (pickInfo.hit && pickInfo.pickedMesh.isPickable) {
    return monet__WEBPACK_IMPORTED_MODULE_5__["Maybe"].some(pickInfo.pickedMesh);
  }

  return monet__WEBPACK_IMPORTED_MODULE_5__["Maybe"].none();
});

_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2___default()(Util3d, "groundBuilder", function (scene) {
  return new _GroundBuilder__WEBPACK_IMPORTED_MODULE_10__["default"](scene);
});

_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2___default()(Util3d, "piecewiseCurveDistance", function (curve) {
  var distance = 0;

  for (var i = 0; i < curve.length - 1; i++) {
    var v = curve[i + 1].subtract(curve[i]);
    distance += v.length();
  }

  return distance;
});

_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2___default()(Util3d, "getCurveOrientations", function (curve) {
  var orientations = [];

  for (var i = 0; i < curve.length - 1; i++) {
    var v = curve[i + 1].subtract(curve[i]);
    orientations.push(Math.atan2(v.y, v.x));
  }

  orientations.push(orientations[orientations.length - 1]);
  return orientations;
});

_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2___default()(Util3d, "getSplineFromCurve", function (curve) {
  var nbPoints = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 7;
  var closed = false;
  return {
    points: _babylonjs_core__WEBPACK_IMPORTED_MODULE_14__["Curve3"].CreateCatmullRomSpline(curve, nbPoints, closed).getPoints()
  };
});

_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2___default()(Util3d, "splineObj2redis", function (splineObj) {
  var orientations = Util3d.getCurveOrientations(splineObj.points);
  return splineObj.points.map(function (x, i) {
    return [x.x, x.y, orientations[i]];
  });
});

_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2___default()(Util3d, "getShaderMaterial", function (_ref) {
  var _ref$name = _ref.name,
      name = _ref$name === void 0 ? "CustomShader".concat(randomDigits()) : _ref$name,
      _ref$vertex = _ref.vertex,
      vertex = _ref$vertex === void 0 ? VERTEX : _ref$vertex,
      _ref$frag = _ref.frag,
      frag = _ref$frag === void 0 ? FRAG : _ref$frag,
      _ref$onBindObservable = _ref.onBindObservable,
      onBindObservable = _ref$onBindObservable === void 0 ? SHADER_BIND : _ref$onBindObservable,
      _ref$preProcessShader = _ref.preProcessShader,
      preProcessShader = _ref$preProcessShader === void 0 ? SHADER_PRE : _ref$preProcessShader;
  return function (scene) {
    /**
     * Check this for shader re-usage, if a problem appears
     * https://playground.babylonjs.com/#KJ3BVA#4
     * */
    var shaderMaterial = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_14__["ShaderMaterial"](name, scene, {
      vertexSource: vertex,
      fragmentSource: frag
    }, {
      attributes: ["position", "normal", "uv"],
      uniforms: ["world", "worldView", "worldViewProjection", "view", "projection"]
    });
    preProcessShader(scene, shaderMaterial);
    shaderMaterial.onBindObservable.add(function () {
      onBindObservable(scene, shaderMaterial);
    });
    return shaderMaterial;
  };
});

_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2___default()(Util3d, "getNodeItemTypeFromMesh", function (mesh) {
  var _mesh$parent, _mesh$parent2;

  var isMeshFromPath = ((_mesh$parent = mesh.parent) === null || _mesh$parent === void 0 ? void 0 : _mesh$parent.nodeItem.getType()) === _NodeItem_Path__WEBPACK_IMPORTED_MODULE_17__["default"].TYPE;
  return isMeshFromPath ? (_mesh$parent2 = mesh.parent) === null || _mesh$parent2 === void 0 ? void 0 : _mesh$parent2.nodeItem.getType() : mesh.nodeItem.getType();
});

var randomDigits = function randomDigits() {
  return Math.floor(Math.random() * 1e3);
};

var VERTEX = "precision highp float;\n\n// Attributes\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 uv;\n\n// Uniforms\nuniform mat4 worldViewProjection;\n\n// Varying\nvarying vec3 vPosition;\nvarying vec3 vNormal;\nvarying vec2 vUV;\n\nvoid main(void) {\n    vec4 outPosition = worldViewProjection * vec4(position, 1.0);\n    gl_Position = outPosition;\n\n    vUV = uv;\n    vPosition = position;\n    vNormal = normal;\n}";
var FRAG = "\nprecision highp float;\n\n// Varying\nvarying vec3 vPosition;\nvarying vec3 vNormal;\nvarying vec2 vUV;\n\n// Uniforms\nuniform mat4 world;\n\n// Refs\nuniform vec3 cameraPosition;\nuniform vec3 lightPosition;\nuniform float time;\n\nvoid main(void) {\n    vec3 vLightPosition = lightPosition;\n\n    // World values\n    vec3 vPositionW = vec3(world * vec4(vPosition, 1.0));\n    vec3 vNormalW = normalize(vec3(world * vec4(vNormal, 0.0)));\n    vec3 viewDirectionW = normalize(cameraPosition - vPositionW);\n\n    // Light\n    vec3 lightVectorW = normalize(vLightPosition - vPositionW);\n    vec3 color = vec3(0.5,0.,1.);\n\n    // diffuse\n    float ndl = max(0., dot(vNormalW, lightVectorW));\n\n    // Specular\n    vec3 angleW = normalize(viewDirectionW + lightVectorW);\n    float specComp = max(0., dot(vNormalW, angleW));\n    specComp = pow(specComp, max(1., 64.)) * 2.;\n\n    gl_FragColor = vec4(color * ndl + vec3(specComp), 1.);\n}\n";

var SHADER_BIND = function () {
  var time = 0;
  var T = new Date().getTime();
  return function (scene, shaderMaterial) {
    var dt = (new Date().getTime() - T) / 1000;
    shaderMaterial.setFloat("time", time);
    shaderMaterial.setVector3("cameraPosition", scene.activeCamera.position);

    if (scene.lights.length > 0) {
      shaderMaterial.setVector3("lightPosition", scene.lights[0].position);
    }

    time = time + dt;
    T = new Date().getTime();
  };
}();

var SHADER_PRE = function SHADER_PRE(scene, shaderMaterial) {
  shaderMaterial.backFaceCulling = false;
  shaderMaterial.setFloat("time", 0);
  shaderMaterial.setVector3("cameraPosition", scene.activeCamera.position);
  shaderMaterial.setVector3("lightPosition", new _babylonjs_core__WEBPACK_IMPORTED_MODULE_14__["Vector3"](0, 20, 10));
};

var MATERIAL_CACHE = _Utils_MaterialCache__WEBPACK_IMPORTED_MODULE_18__["default"].getInstance();
/* harmony default export */ __webpack_exports__["default"] = (Util3d);

/***/ }),

/***/ "./src/Components/Viewer/Utils/Animator.js":
/*!*************************************************!*\
  !*** ./src/Components/Viewer/Utils/Animator.js ***!
  \*************************************************/
/*! exports provided: Animator */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Animator", function() { return Animator; });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "@babel/runtime/helpers/esm/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "@babel/runtime/helpers/esm/createClass");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__);


var Animator = /*#__PURE__*/function () {
  function Animator(state, next, doWhile) {
    _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default()(this, Animator);

    this.state = state;
    this.next = next;
    this["while"] = doWhile;
    this.requestAnimeId = null;
  }

  _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1___default()(Animator, [{
    key: "play",
    value: function play() {
      var _this = this;

      this.requestAnimeId = requestAnimationFrame(function () {
        if (!_this["while"](_this.state)) return _this.stop();
        _this.state = _this.next(_this.state);

        _this.play();
      });
      return this;
    }
  }, {
    key: "stop",
    value: function stop() {
      cancelAnimationFrame(this.requestAnimeId);
      return this;
    }
  }], [{
    key: "builder",
    value: function builder() {
      return new AnimatorBuilder();
    }
  }]);

  return Animator;
}();

var AnimatorBuilder = /*#__PURE__*/function () {
  function AnimatorBuilder() {
    _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default()(this, AnimatorBuilder);

    this._state = null;
    this._next = null;
    this._end = null;
  }

  _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1___default()(AnimatorBuilder, [{
    key: "initialState",
    value: function initialState(state) {
      this._state = state;
      return this;
    }
  }, {
    key: "nextState",
    value: function nextState(next) {
      this._next = next;
      return this;
    }
  }, {
    key: "while",
    value: function _while(end) {
      this._end = end;
      return this;
    }
  }, {
    key: "build",
    value: function build() {
      var someAreEmpty = [this._state, this._next, this._end].some(function (x) {
        return x === null || x === undefined;
      });
      if (someAreEmpty) throw new Error("Animator properties are missing");
      return new Animator(this._state, this._next, this._end);
    }
  }]);

  return AnimatorBuilder;
}();

/***/ }),

/***/ "./src/Components/Viewer/Utils/AnnotationManager.js":
/*!**********************************************************!*\
  !*** ./src/Components/Viewer/Utils/AnnotationManager.js ***!
  \**********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "@babel/runtime/helpers/esm/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "@babel/runtime/helpers/esm/createClass");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "@babel/runtime/helpers/esm/defineProperty");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! mov-fe-lib-core */ "mov-fe-lib-core");
/* harmony import */ var mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_3__);





var AnnotationManager = /*#__PURE__*/function () {
  function AnnotationManager() {
    var _this = this;

    _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default()(this, AnnotationManager);

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2___default()(this, "getAnnotations", function () {
      return _this.annotations;
    });

    if (instance) return instance;
    instance = this;
    this.annotations = {};
    this.observersBySceneId = {};
  } //========================================================================================

  /*                                                                                      *
   *                                   Getters & Setters                                  *
   *                                                                                      */
  //========================================================================================


  _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1___default()(AnnotationManager, [{
    key: "load",
    value: function load() {
      this.retrieveAnnotationsFromDb();
      return this;
    }
    /**
     *
     * @param {*} scene: Scene
     * @param {*} lambda: AnnotationManager -> {}
     */

  }, {
    key: "pushObserver",
    value: function pushObserver(scene, lambda) {
      var sceneId = scene._uid;

      if (!(sceneId in this.observersBySceneId)) {
        this.observersBySceneId[sceneId] = [];
      }

      this.observersBySceneId[sceneId].push(lambda);
      return this;
    }
  }, {
    key: "clearObserver",
    value: function clearObserver(scene) {
      var sceneId = scene._uid;

      if (sceneId in this.observersBySceneId) {
        delete this.observersBySceneId[sceneId];
      }
    } //========================================================================================

    /*                                                                                      *
     *                                         Utils                                        *
     *                                                                                      */
    //========================================================================================

  }, {
    key: "retrieveAnnotationsFromDb",
    value: function retrieveAnnotationsFromDb() {
      var _this2 = this;

      mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_3__["MasterDB"].subscribe({
        Scope: "Annotation",
        Name: "*"
      }, function (data) {
        console.log("Annotation update", data);
        var actionMap = {
          del: function del(annotation) {
            return _this2.delAnnotation(annotation);
          },
          set: function set(annotation) {
            return _this2.addAnnotation(annotation);
          }
        };
        var annotation = data.key.Annotation;

        if (data.event in actionMap) {
          actionMap[data.event](annotation);
          Object.keys(_this2.observersBySceneId).forEach(function (k) {
            return _this2.observersBySceneId[k].forEach(function (f) {
              return f(_this2);
            });
          });
        }
      }, function (data) {
        console.log("Annotation start", data);
        var annotation = data.value.Annotation;

        _this2.addAnnotation(annotation);
      });
    }
  }, {
    key: "delAnnotation",
    value: function delAnnotation(annotation) {
      var _this3 = this;

      if (!annotation) return;
      var names2delete = Object.keys(annotation).reduce(function (e, x) {
        e.push(x);
        return e;
      }, []);
      Object.keys(this.annotations).forEach(function (annotationType) {
        var value = _this3.annotations[annotationType];
        value.names = value.names.filter(function (x) {
          return !names2delete.includes(x);
        });
        value.labels = value.labels.filter(function (x) {
          return !names2delete.includes(x);
        });
      });
    }
  }, {
    key: "addAnnotation",
    value: function addAnnotation(annotation) {
      var _this4 = this;

      if (!annotation) return;
      Object.keys(annotation).forEach(function (name) {
        var annotationObj = annotation[name];
        if (!annotationObj.Type) return;
        var type = annotationObj.Type.toLowerCase();
        var label = annotationObj.Label;

        if (!(type in _this4.annotations)) {
          _this4.annotations[type] = {
            names: [],
            labels: []
          };
        }

        _this4.annotations[type].names.push(name);

        _this4.annotations[type].labels.push(label ? label : name);
      });
    } //========================================================================================

    /*                                                                                      *
     *                                        Static                                        *
     *                                                                                      */
    //========================================================================================

  }], [{
    key: "getInstance",
    value: function getInstance() {
      return new AnnotationManager();
    }
  }, {
    key: "getAnnotations",
    value: function getAnnotations() {
      return AnnotationManager.getInstance().getAnnotations();
    }
  }]);

  return AnnotationManager;
}();

var instance = null;
/* harmony default export */ __webpack_exports__["default"] = (AnnotationManager);

/***/ }),

/***/ "./src/Components/Viewer/Utils/AssetsTypesFactory.js":
/*!***********************************************************!*\
  !*** ./src/Components/Viewer/Utils/AssetsTypesFactory.js ***!
  \***********************************************************/
/*! exports provided: ASSETS_TYPES, AssetsTypesFactory */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ASSETS_TYPES", function() { return ASSETS_TYPES; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AssetsTypesFactory", function() { return AssetsTypesFactory; });
/* harmony import */ var _Actions_AddMapAction__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Actions/AddMapAction */ "./src/Components/Viewer/Actions/AddMapAction.js");
/* harmony import */ var _Actions_RobotAction__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Actions/RobotAction */ "./src/Components/Viewer/Actions/RobotAction.js");
/* harmony import */ var _NodeItem_Robot__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../NodeItem/Robot */ "./src/Components/Viewer/NodeItem/Robot.js");
/* harmony import */ var _Actions_AddMeshAction__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../Actions/AddMeshAction */ "./src/Components/Viewer/Actions/AddMeshAction.js");




var ASSETS_TYPES = {
  Map: "Map",
  Robot: "Robot",
  Mesh: "Mesh"
};
var AssetsTypesFactory = {
  Map: function Map(map) {
    return new _Actions_AddMapAction__WEBPACK_IMPORTED_MODULE_0__["default"](map.name, map.loader);
  },
  Robot: function Robot(robot) {
    return new _Actions_RobotAction__WEBPACK_IMPORTED_MODULE_1__["default"](robot, _NodeItem_Robot__WEBPACK_IMPORTED_MODULE_2__["default"].getSocketAnimator);
  },
  Mesh: function Mesh(mesh) {
    return new _Actions_AddMeshAction__WEBPACK_IMPORTED_MODULE_3__["default"](mesh);
  }
};

/***/ }),

/***/ "./src/Components/Viewer/Utils/Clipboard.js":
/*!**************************************************!*\
  !*** ./src/Components/Viewer/Utils/Clipboard.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return Clipboard; });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "@babel/runtime/helpers/esm/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "@babel/runtime/helpers/esm/createClass");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! mov-fe-lib-core */ "mov-fe-lib-core");
/* harmony import */ var mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_2__);



var SCENE_CONTEXT = "scene";
var COPY_PASTE_UID = 0;

var Clipboard = /*#__PURE__*/function () {
  function Clipboard() {
    _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default()(this, Clipboard);
  }

  _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1___default()(Clipboard, null, [{
    key: "copy",
    value: function copy(value) {
      mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_2__["Clipboard"].write(SCENE_CONTEXT, value);
    }
  }, {
    key: "paste",
    value: function paste() {
      return mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_2__["Clipboard"].read(SCENE_CONTEXT);
    }
  }, {
    key: "getUID",
    value: function getUID() {
      return COPY_PASTE_UID++;
    }
  }]);

  return Clipboard;
}();



/***/ }),

/***/ "./src/Components/Viewer/Utils/Constants.js":
/*!**************************************************!*\
  !*** ./src/Components/Viewer/Utils/Constants.js ***!
  \**************************************************/
/*! exports provided: LOGGER_STATUS, SCENE_BACKGROUND, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LOGGER_STATUS", function() { return LOGGER_STATUS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SCENE_BACKGROUND", function() { return SCENE_BACKGROUND; });
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babylonjs/core */ "@babylonjs/core");
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babylonjs_core__WEBPACK_IMPORTED_MODULE_0__);

var Constants = {
  RADIUS: 0.25,
  POINTS_DENSITY: 2,
  CLOUD_FUNCTION_NAME: "backend.viewer",
  NAV_CLOUD_NAME: "backend.generate_path",
  RAD2DEG: 180 / Math.PI,
  DEG2RAD: Math.PI / 180,
  DEBUG: false
};
var LOGGER_STATUS = {
  init: 0,
  running: 1,
  paused: 2,
  terminated: 3
};
var SCENE_BACKGROUND = {
  dark: _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__["Color3"].Black(),
  light: _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__["Color3"].Gray(),
  "default": _babylonjs_core__WEBPACK_IMPORTED_MODULE_0__["Color3"].Black()
};
/* harmony default export */ __webpack_exports__["default"] = (Constants);

/***/ }),

/***/ "./src/Components/Viewer/Utils/DefaultMouseEvents.js":
/*!***********************************************************!*\
  !*** ./src/Components/Viewer/Utils/DefaultMouseEvents.js ***!
  \***********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return DefaultMouseEvents; });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "@babel/runtime/helpers/esm/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "@babel/runtime/helpers/esm/defineProperty");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babylonjs/core */ "@babylonjs/core");
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babylonjs_core__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _Math_Vec3__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../Math/Vec3 */ "./src/Components/Viewer/Math/Vec3.js");
/* harmony import */ var _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../Util3d/Util3d */ "./src/Components/Viewer/Util3d/Util3d.js");
/* harmony import */ var _Animator__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Animator */ "./src/Components/Viewer/Utils/Animator.js");







var DefaultMouseEvents = function DefaultMouseEvents() {
  _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default()(this, DefaultMouseEvents);
};

_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()(DefaultMouseEvents, "onPointerDown", function (mainView) {
  return function (evt) {
    mainView.mousePosClick = mainView.getMouseCoordsFromRoot().orSome(_babylonjs_core__WEBPACK_IMPORTED_MODULE_2__["Vector3"].Zero());
    mainView.mousePosMove = mainView.mousePosClick;
    mainView.sceneMemory.forEach(function (_ref) {
      var camera = _ref.camera,
          canvas = _ref.canvas;

      if (evt.buttons === 2 || evt.buttons === 4 || evt.ctrlKey) {
        camera.detachControl(canvas);
      }
    });
  };
});

_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()(DefaultMouseEvents, "onPointerUp", function (mainView) {
  return function () {
    mainView.sceneMemory.forEach(function (_ref2) {
      var camera = _ref2.camera,
          canvas = _ref2.canvas;
      camera.attachControl(canvas, true);
    });
  };
});

_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()(DefaultMouseEvents, "onPointerMove", function (mainView) {
  return function (evt) {
    mainView.sceneMemory.forEach(function (_ref3) {
      var mouseLocationText = _ref3.mouseLocationText,
          camera = _ref3.camera;
      mainView.getMouseCoordsFromRoot().forEach(function (currentLocal) {
        setMouseLocationTxt(mouseLocationText, currentLocal);

        var panCamera = function panCamera() {
          var v = currentLocal.subtract(mainView.mousePosMove);
          var vBabylon = getWorldVector(mainView, v);
          animateCamera(camera, vBabylon.scale(-1));
          mainView.mousePosMove = currentLocal;
        };

        var mouseButtonActions = [{
          predicate: evt.ctrlKey && evt.buttons === 1,
          action: panCamera
        }, {
          predicate: evt.buttons === 4,
          action: panCamera
        }];
        var filterActions = mouseButtonActions.filter(function (_ref4) {
          var predicate = _ref4.predicate;
          return predicate;
        });
        if (filterActions.length > 0) filterActions[0].action();
      });
    });
  };
});



function animateCamera(camera, v) {
  _Animator__WEBPACK_IMPORTED_MODULE_5__["Animator"].builder().initialState({
    camera: camera,
    time: 0,
    T: new Date().getTime()
  }).nextState(function (s) {
    var camera = s.camera,
        time = s.time;
    var dt = 0.1; //(new Date().getTime() - T) / 1000;

    var vdt = v.scale(dt);
    camera.position = camera.position.add(vdt);
    camera.setTarget(camera.target.add(vdt));
    return {
      camera: camera,
      time: time + dt,
      T: new Date().getTime()
    };
  })["while"](function (s) {
    return s.time <= 1;
  }).build().play();
}

function setMouseLocationTxt(mouseLocationText, currentLocal) {
  mouseLocationText.text = "x: ".concat(currentLocal.x.toFixed(2), ", y: ").concat(currentLocal.y.toFixed(2));
}

function getWorldVector(mainView, vector3) {
  var worldFrameMesh = mainView.getRootNode().item.mesh.parent; // compute world coordinates from GlobalRef (similar to Util3d.getBabylonCoordinates)

  var matrix = _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_4__["default"].getRotationMatrix(worldFrameMesh);
  var scale = _Math_Vec3__WEBPACK_IMPORTED_MODULE_3__["default"].ofBabylon(worldFrameMesh.scaling);
  var vBabylon = matrix.prodVec(scale.mul(_Math_Vec3__WEBPACK_IMPORTED_MODULE_3__["default"].ofBabylon(vector3))).toBabylon();
  return vBabylon;
}

/***/ }),

/***/ "./src/Components/Viewer/Utils/DefaultScene.js":
/*!*****************************************************!*\
  !*** ./src/Components/Viewer/Utils/DefaultScene.js ***!
  \*****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "@babel/runtime/helpers/esm/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "@babel/runtime/helpers/esm/defineProperty");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babylonjs/core */ "@babylonjs/core");
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babylonjs_core__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babylonjs_gui_2D__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babylonjs/gui/2D */ "@babylonjs/gui/2D");
/* harmony import */ var _babylonjs_gui_2D__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babylonjs_gui_2D__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../Util3d/Util3d */ "./src/Components/Viewer/Util3d/Util3d.js");
/* harmony import */ var _babylonjs_core_Debug_debugLayer__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babylonjs/core/Debug/debugLayer */ "@babylonjs/core/Debug/debugLayer");
/* harmony import */ var _babylonjs_core_Debug_debugLayer__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babylonjs_core_Debug_debugLayer__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _babylonjs_inspector__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babylonjs/inspector */ "@babylonjs/inspector");
/* harmony import */ var _babylonjs_inspector__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babylonjs_inspector__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _Constants__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./Constants */ "./src/Components/Viewer/Utils/Constants.js");









var DefaultScene = function DefaultScene() {
  _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default()(this, DefaultScene);
};
/**
 * From https://stackoverflow.com/questions/5916900/how-can-you-detect-the-version-of-a-browser
 */


_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()(DefaultScene, "createGizmo", function (scene) {
  var gizmoManager = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_2__["RotationGizmo"](new _babylonjs_core__WEBPACK_IMPORTED_MODULE_2__["UtilityLayerRenderer"](scene));
  gizmoManager.xGizmo.dragBehavior.detach();
  gizmoManager.xGizmo.scaleRatio = 0.0;
  gizmoManager.yGizmo.dragBehavior.detach();
  gizmoManager.yGizmo.scaleRatio = 0.0;
  return gizmoManager;
});

_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()(DefaultScene, "createCamera", function (scene, canvas) {
  var forEach = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : function (camera) {};
  var COLLISION_RADIUS = 1;
  var camera = _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_4__["default"].cameraBuilder(scene).sphericalCoordinates(new _babylonjs_core__WEBPACK_IMPORTED_MODULE_2__["Vector3"](0, 0, 14)).target(_babylonjs_core__WEBPACK_IMPORTED_MODULE_2__["Vector3"].Zero()).name("camera").build();
  camera.attachControl(canvas, false);
  camera.inertia = 0.7;
  camera.collisionRadius = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_2__["Vector3"](COLLISION_RADIUS, COLLISION_RADIUS, COLLISION_RADIUS);
  camera.panningInertia = 0.5;
  camera.checkCollisions = true;
  camera.panningSensibility = 0;
  camera.lowerRadiusLimit = 2;
  var browser = get_browser();

  if (browser.name === "Firefox" && browser.version <= 89) {
    camera.wheelPrecision = 100;
  }

  forEach(camera);
  return camera;
});

_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()(DefaultScene, "createLight", function (scene) {
  return _Util3d_Util3d__WEBPACK_IMPORTED_MODULE_4__["default"].directionalLightBuilder(scene).name("light").direction(new _babylonjs_core__WEBPACK_IMPORTED_MODULE_2__["Vector3"](0, -1, 0)).intensity(0.35).build();
});

_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()(DefaultScene, "createMeshGround", function (scene) {
  var width = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 20;
  var height = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 20;
  var ground = _babylonjs_core__WEBPACK_IMPORTED_MODULE_2__["Mesh"].CreateGround("groundMesh", width, height, 20, scene);
  ground.translate(new _babylonjs_core__WEBPACK_IMPORTED_MODULE_2__["Vector3"](0, -1, 0), 1e-2, _babylonjs_core__WEBPACK_IMPORTED_MODULE_2__["Space"].WORLD);
  ground.material = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_2__["StandardMaterial"]("wireframe", scene);
  ground.material.wireframe = true;
  ground.isPickable = false;
  ground.checkCollisions = true;
  return ground;
});

_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()(DefaultScene, "createScene", function (engine) {
  var scene = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_2__["Scene"](engine);
  scene.collisionsEnabled = true;
  scene._uid = scene.getUniqueId();

  if (_Constants__WEBPACK_IMPORTED_MODULE_7__["default"].DEBUG) {
    scene.debugLayer.show({
      embedMode: true,
      globalRoot: document.body,
      overlay: true
    });
  }

  return scene;
});

_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()(DefaultScene, "createMouseLocationText", function (scene) {
  var advancedTexture = _babylonjs_gui_2D__WEBPACK_IMPORTED_MODULE_3__["AdvancedDynamicTexture"].CreateFullscreenUI("UI", true, scene);
  var text = new _babylonjs_gui_2D__WEBPACK_IMPORTED_MODULE_3__["TextBlock"]();
  text.text = "";
  text.color = "white";
  text.fontSize = 17;
  text.left = -560;
  text.top = -145;
  advancedTexture.addControl(text);
  return text;
});

function get_browser() {
  var ua = navigator.userAgent,
      tem,
      M = ua.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i) || [];

  if (/trident/i.test(M[1])) {
    tem = /\brv[ :]+(\d+)/g.exec(ua) || [];
    return {
      name: "IE",
      version: tem[1] || ""
    };
  }

  if (M[1] === "Chrome") {
    tem = ua.match(/\bOPR|Edge\/(\d+)/);

    if (tem != null) {
      return {
        name: "Opera",
        version: tem[1]
      };
    }
  }

  M = M[2] ? [M[1], M[2]] : [navigator.appName, navigator.appVersion, "-?"];

  if ((tem = ua.match(/version\/(\d+)/i)) != null) {
    M.splice(1, 1, tem[1]);
  }

  return {
    name: M[0],
    version: M[1]
  };
}

/* harmony default export */ __webpack_exports__["default"] = (DefaultScene);

/***/ }),

/***/ "./src/Components/Viewer/Utils/LoadingScreen.js":
/*!******************************************************!*\
  !*** ./src/Components/Viewer/Utils/LoadingScreen.js ***!
  \******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/**
 * Class implementing ILoadingScreen interface from Babylon
 *  https://doc.babylonjs.com/typedoc/interfaces/babylon.iloadingscreen
 *
 * @param {String} text : Sets the text to display while loading
 * @param {String} backgroundColor : Sets the color to use for the background
 */
function LoadingScreen() {
  var text = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "Loading...";
  var backgroundColor = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "black";
  // init the loader
  this.loadingUIText = text;
  this.loadingUIBackgroundColor = backgroundColor;
}
/**
 * Function called to display the loading screen
 */


LoadingScreen.prototype.displayLoadingUI = function () {
  document.getElementById("loading-scene").style.display = "block";
};
/**
 * Function called to hide the loading screen
 */


LoadingScreen.prototype.hideLoadingUI = function () {
  document.getElementById("loading-scene").style.display = "none";
};

/* harmony default export */ __webpack_exports__["default"] = (LoadingScreen);

/***/ }),

/***/ "./src/Components/Viewer/Utils/MaterialCache.js":
/*!******************************************************!*\
  !*** ./src/Components/Viewer/Utils/MaterialCache.js ***!
  \******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "@babel/runtime/helpers/esm/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "@babel/runtime/helpers/esm/createClass");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var monet__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! monet */ "monet");
/* harmony import */ var monet__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(monet__WEBPACK_IMPORTED_MODULE_2__);



/**
 * Material cache for each scene.
 *
 * Each material is associated with a scene therefore we must have a cache per scene.
 *
 * TODO: to similar with mesh cache, therefore there is possibility of abstraction
 *
 */

var MaterialCache = /*#__PURE__*/function () {
  function MaterialCache() {
    _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default()(this, MaterialCache);

    if (instance) return instance;
    instance = this;
    this.materialCacheBySceneId = {};
    this.count = 0;
  }

  _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1___default()(MaterialCache, [{
    key: "hasKey",
    value: function hasKey(key, scene) {
      var sceneId = scene._uid;
      return monet__WEBPACK_IMPORTED_MODULE_2__["Maybe"].fromNull(this.materialCacheBySceneId[sceneId]).flatMap(function (materialCache) {
        return ofNull(materialCache[key]);
      }).cata(function () {
        return false;
      }, function () {
        return true;
      });
    }
  }, {
    key: "put",
    value: function put(key, scene, material) {
      var sceneId = scene._uid;

      if (!(sceneId in this.materialCacheBySceneId)) {
        this.materialCacheBySceneId[sceneId] = {};
      }

      this.materialCacheBySceneId[sceneId][key] = material;
      return this;
    }
  }, {
    key: "get",
    value: function get(key, scene) {
      var _this = this;

      var sceneId = scene._uid;
      return monet__WEBPACK_IMPORTED_MODULE_2__["Maybe"].fromNull(this.materialCacheBySceneId[sceneId]).flatMap(function (materialCache) {
        return ofNull(materialCache[key]);
      }).map(function (material) {
        _this.count++;
        return material;
      });
    }
  }, {
    key: "del",
    value: function del(scene) {
      var sceneId = scene._uid;

      if (sceneId in this.materialCacheBySceneId) {
        delete this.materialCacheBySceneId[sceneId];
      }
    }
  }], [{
    key: "getInstance",
    value: function getInstance() {
      return new MaterialCache();
    }
  }]);

  return MaterialCache;
}();

var ofNull = function ofNull(x) {
  return monet__WEBPACK_IMPORTED_MODULE_2__["Maybe"].fromNull(x);
}; // private instance


var instance = null;
/* harmony default export */ __webpack_exports__["default"] = (MaterialCache);

/***/ }),

/***/ "./src/Components/Viewer/Utils/MeshCache.js":
/*!**************************************************!*\
  !*** ./src/Components/Viewer/Utils/MeshCache.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "@babel/runtime/helpers/esm/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "@babel/runtime/helpers/esm/createClass");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var monet__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! monet */ "monet");
/* harmony import */ var monet__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(monet__WEBPACK_IMPORTED_MODULE_2__);



/**
 * Mesh cache for each scene.
 *
 * Each mesh is associated with a scene therefore we must have a cache per scene.
 *
 */

var MeshCache = /*#__PURE__*/function () {
  function MeshCache() {
    _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default()(this, MeshCache);

    if (instance) return instance;
    instance = this;
    this.meshCacheBySceneId = {};
    this.count = 0;
  }

  _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1___default()(MeshCache, [{
    key: "hasKey",
    value: function hasKey(key, scene) {
      var sceneId = scene._uid;
      return monet__WEBPACK_IMPORTED_MODULE_2__["Maybe"].fromNull(this.meshCacheBySceneId[sceneId]).flatMap(function (meshCache) {
        return ofNull(meshCache[key]);
      }).cata(function () {
        return false;
      }, function () {
        return true;
      });
    }
  }, {
    key: "put",
    value: function put(key, scene, mesh) {
      var sceneId = scene._uid;

      if (!(sceneId in this.meshCacheBySceneId)) {
        this.meshCacheBySceneId[sceneId] = {};
      }

      this.meshCacheBySceneId[sceneId][key] = mesh;
      mesh.setEnabled(false);
      return this;
    }
  }, {
    key: "get",
    value: function get(key, scene) {
      var _this = this;

      var sceneId = scene._uid;
      return monet__WEBPACK_IMPORTED_MODULE_2__["Maybe"].fromNull(this.meshCacheBySceneId[sceneId]).flatMap(function (meshCache) {
        return ofNull(meshCache[key]);
      }).map(function (mesh) {
        console.log("#Mesh: Found Mesh in cache, retrieving copy number", _this.count);
        var cloneMesh = mesh.clone("".concat(key).concat(_this.count++));
        console.log("#Mesh:", cloneMesh);
        cloneMesh.setEnabled(true);
        return cloneMesh;
      }).orNull();
    }
  }, {
    key: "del",
    value: function del(scene) {
      var sceneId = scene._uid;

      if (sceneId in this.meshCacheBySceneId) {
        delete this.meshCacheBySceneId[sceneId];
      }
    }
  }], [{
    key: "getInstance",
    value: function getInstance() {
      return new MeshCache();
    }
  }]);

  return MeshCache;
}();

var ofNull = function ofNull(x) {
  return monet__WEBPACK_IMPORTED_MODULE_2__["Maybe"].fromNull(x);
}; // private instance


var instance = null;
/* harmony default export */ __webpack_exports__["default"] = (MeshCache);

/***/ }),

/***/ "./src/Components/Viewer/Utils/MeshLoader.js":
/*!***************************************************!*\
  !*** ./src/Components/Viewer/Utils/MeshLoader.js ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "@babel/runtime/helpers/esm/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "@babel/runtime/helpers/esm/createClass");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "@babel/runtime/helpers/esm/defineProperty");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _MeshCache__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./MeshCache */ "./src/Components/Viewer/Utils/MeshCache.js");
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babylonjs/core */ "@babylonjs/core");
/* harmony import */ var _babylonjs_core__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babylonjs_core__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _Utils_AssetsTypesFactory__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../Utils/AssetsTypesFactory */ "./src/Components/Viewer/Utils/AssetsTypesFactory.js");
/* harmony import */ var _babylonjs_loaders__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babylonjs/loaders */ "@babylonjs/loaders");
/* harmony import */ var _babylonjs_loaders__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babylonjs_loaders__WEBPACK_IMPORTED_MODULE_6__);








var MeshLoader = /*#__PURE__*/function () {
  function MeshLoader(scene) {
    var _this = this;

    _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default()(this, MeshLoader);

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2___default()(this, "load", function (meshName) {
      var mapFunction = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : MeshLoader.transformMesh;
      return new Promise(function (re, rej) {
        var meshCache = _MeshCache__WEBPACK_IMPORTED_MODULE_3__["default"].getInstance();

        if (meshCache.hasKey(meshName, _this.scene)) {
          console.log("Found Mesh ".concat(meshName, " in cache for scene ").concat(_this.scene));
          re(meshCache.get(meshName, _this.scene));
        } else {
          console.log("Loading mesh....");
          var assetsManager = new _babylonjs_core__WEBPACK_IMPORTED_MODULE_4__["AssetsManager"](_this.scene);
          var meshTask = assetsManager.addMeshTask("", "", MESH_URL, meshName);

          meshTask.onSuccess = function (task) {
            console.log("Load Success", meshName);
            var mesh = task.loadedMeshes[0];
            mesh.name = meshName;
            mesh.rotationQuaternion = _babylonjs_core__WEBPACK_IMPORTED_MODULE_4__["Quaternion"].Identity();
            mesh.position = _babylonjs_core__WEBPACK_IMPORTED_MODULE_4__["Vector3"].Zero();
            meshCache.put(meshName, _this.scene, mesh);
          };

          meshTask.onError = function (task, message, exception) {
            console.log("Load error =>", message);
            rej({
              message: message,
              exception: exception,
              assetName: meshName,
              assetType: _Utils_AssetsTypesFactory__WEBPACK_IMPORTED_MODULE_5__["ASSETS_TYPES"].Mesh
            });
          };

          assetsManager.onFinish = function (task) {
            console.log("Load finish ");
            var meshParam = meshCache.get(meshName, _this.scene);
            if (meshParam !== null) re(mapFunction(meshParam));
          };

          assetsManager.load();
        }
      });
    });

    this.scene = scene;
  }

  _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1___default()(MeshLoader, null, [{
    key: "of",
    value: function of(scene) {
      return new MeshLoader(scene);
    }
  }, {
    key: "transformMesh",
    value:
    /**
     * Side effect function
     */
    function transformMesh(mesh) {
      var theta = Math.PI / 2;
      var positions = mesh.getVerticesData(_babylonjs_core__WEBPACK_IMPORTED_MODULE_4__["VertexBuffer"].PositionKind);
      var normals = mesh.getVerticesData(_babylonjs_core__WEBPACK_IMPORTED_MODULE_4__["VertexBuffer"].NormalKind);
      var newPos = new Float32Array(positions.length);
      var newNormals = new Float32Array(positions.length);
      var cos = Math.cos(theta);
      var sin = Math.sin(theta);
      var numberOfVertices = positions.length / 3;

      for (var i = 0; i < numberOfVertices; i++) {
        newPos[i * 3] = positions[i * 3];
        newPos[i * 3 + 1] = positions[i * 3 + 1] * cos - positions[i * 3 + 2] * sin;
        newPos[i * 3 + 2] = positions[i * 3 + 1] * sin - positions[i * 3 + 2] * cos;
        newNormals[i * 3] = normals[i * 3];
        newNormals[i * 3 + 1] = normals[i * 3 + 1] * cos - normals[i * 3 + 2] * sin;
        newNormals[i * 3 + 2] = normals[i * 3 + 1] * sin - normals[i * 3 + 2] * cos;
      }

      mesh.setVerticesData(_babylonjs_core__WEBPACK_IMPORTED_MODULE_4__["VertexBuffer"].PositionKind, newPos, true);
      mesh.setVerticesData(_babylonjs_core__WEBPACK_IMPORTED_MODULE_4__["VertexBuffer"].NormalKind, newNormals, true);
      return mesh;
    }
  }]);

  return MeshLoader;
}();

_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2___default()(MeshLoader, "getMeshUrl", function (src) {
  return "".concat(MESH_URL).concat(src);
});

var MESH_URL = "/static/meshes/";
/* harmony default export */ __webpack_exports__["default"] = (MeshLoader);

/***/ }),

/***/ "./src/Components/Viewer/Utils/SceneServerUtils.js":
/*!*********************************************************!*\
  !*** ./src/Components/Viewer/Utils/SceneServerUtils.js ***!
  \*********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "@babel/runtime/helpers/esm/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "@babel/runtime/helpers/esm/defineProperty");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! mov-fe-lib-core */ "mov-fe-lib-core");
/* harmony import */ var mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _Constants__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Constants */ "./src/Components/Viewer/Utils/Constants.js");





var SceneServerUtils = function SceneServerUtils() {
  _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default()(this, SceneServerUtils);
};

_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()(SceneServerUtils, "retrieveScene", function (sceneName) {
  var successCallback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : DEFAULT_SUCCESS;
  var failCallback = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : DEFAULT_FAILURE("retrieving scene");
  mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_2__["MasterDB"].cloudFunction(_Constants__WEBPACK_IMPORTED_MODULE_3__["default"].CLOUD_FUNCTION_NAME, "retrieveScene", sceneName, function (data) {
    return successFailIf(data, successCallback, failCallback);
  });
});

var DEFAULT_FAILURE = function DEFAULT_FAILURE(failureLocation) {
  return function (data) {};
};

var DEFAULT_SUCCESS = function DEFAULT_SUCCESS(data) {};

var successFailIf = function successFailIf(data, successCallback, failCallback) {
  if (data.success) {
    successCallback(data);
  } else {
    failCallback(data);
  }
};

/* harmony default export */ __webpack_exports__["default"] = (SceneServerUtils);

/***/ }),

/***/ "./src/Components/Viewer/Utils/Statistics.js":
/*!***************************************************!*\
  !*** ./src/Components/Viewer/Utils/Statistics.js ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return Statistics; });
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "@babel/runtime/helpers/esm/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "@babel/runtime/helpers/esm/createClass");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__);



/**
 * Inspired by https://en.wikipedia.org/wiki/Algorithms_for_calculating_variance
 * Hope it works, didn't found good lib in js for this.
 */
var Statistics = /*#__PURE__*/function () {
  function Statistics() {
    _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default()(this, Statistics);

    this._count = 0;
    this._mean = 0;
    this._M2 = 0;
  }

  _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1___default()(Statistics, [{
    key: "update",
    value: function update(x) {
      this._count += 1;
      var delta = x - this._mean;
      this._mean += delta / this._count;
      var delta2 = x - this._mean;
      this._M2 += delta * delta2;
      return this;
    }
  }, {
    key: "count",
    get: function get() {
      return this._count;
    }
  }, {
    key: "mean",
    get: function get() {
      if (this._count < 2) {
        return Number.NaN;
      }

      return this._mean;
    }
  }, {
    key: "variance",
    get: function get() {
      if (this._count < 2) {
        return Number.NaN;
      }

      return this._M2 / this._count;
    }
  }, {
    key: "sampleVar",
    get: function get() {
      if (this._count < 2) {
        return Number.NaN;
      }

      return this._M2 / (this._count - 1);
    }
  }, {
    key: "isOutlier",
    value: function isOutlier(x) {
      var sigmas = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 3;
      var zScore = (x - this.mean) / Math.sqrt(this.variance);
      return Number.isNaN(zScore) || Math.abs(zScore) > sigmas;
    }
  }]);

  return Statistics;
}();



/***/ }),

/***/ "./src/Components/Viewer/Utils/TreeServerUtils.js":
/*!********************************************************!*\
  !*** ./src/Components/Viewer/Utils/TreeServerUtils.js ***!
  \********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* WEBPACK VAR INJECTION */(function(setImmediate) {/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/classCallCheck */ "@babel/runtime/helpers/esm/classCallCheck");
/* harmony import */ var _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "@babel/runtime/helpers/esm/createClass");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "@babel/runtime/helpers/esm/defineProperty");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _TreeObject_TreeObject__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../TreeObject/TreeObject */ "./src/Components/Viewer/TreeObject/TreeObject.js");
/* harmony import */ var _TreeObject_TreeNode__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../TreeObject/TreeNode */ "./src/Components/Viewer/TreeObject/TreeNode.js");
/* harmony import */ var _NodeItem_GlobalRef__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../NodeItem/GlobalRef */ "./src/Components/Viewer/NodeItem/GlobalRef.js");
/* harmony import */ var mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! mov-fe-lib-core */ "mov-fe-lib-core");
/* harmony import */ var mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _Constants__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./Constants */ "./src/Components/Viewer/Utils/Constants.js");
/* harmony import */ var _NodeItem_GraphItem__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../NodeItem/GraphItem */ "./src/Components/Viewer/NodeItem/GraphItem.js");
/* harmony import */ var _NodeItem_NavigationPreviewItem__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../NodeItem/NavigationPreviewItem */ "./src/Components/Viewer/NodeItem/NavigationPreviewItem.js");
/* harmony import */ var lodash_debounce__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! lodash/debounce */ "lodash/debounce");
/* harmony import */ var lodash_debounce__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(lodash_debounce__WEBPACK_IMPORTED_MODULE_10__);











var CLOUD_FUNCTION_NAME = _Constants__WEBPACK_IMPORTED_MODULE_7__["default"].CLOUD_FUNCTION_NAME;

var TreeServerUtils = /*#__PURE__*/function () {
  function TreeServerUtils(sceneName, undoManager) {
    var _this = this;

    var alert = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : window.alert;

    _babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default()(this, TreeServerUtils);

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2___default()(this, "getNodeFromTree", function (name, objectTree) {
      return new _TreeObject_TreeObject__WEBPACK_IMPORTED_MODULE_3__["default"](objectTree).getNode(function (x) {
        return name === x.title;
      });
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2___default()(this, "getParentFromChild", function (childName, objectTree) {
      return new _TreeObject_TreeObject__WEBPACK_IMPORTED_MODULE_3__["default"](objectTree).getParentNode(function (x) {
        return childName === x.title;
      });
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2___default()(this, "deleteNodeFromTreeUsingName", function (name, objectTree) {
      var is2delInServer = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;

      _this.getNodeFromTree(name, objectTree).forEach(function (node) {
        // destroy treeNode
        _TreeObject_TreeNode__WEBPACK_IMPORTED_MODULE_4__["default"].dispose(node);

        if (is2delInServer) {
          _this.deleteNodeInServer(name);
        }

        var maybeParent = _this.getParentFromChild(name, objectTree);

        maybeParent.forEach(function (parentNode) {
          parentNode.children = parentNode.children.filter(function (x) {
            return x.title !== name;
          });
        });
        objectTree = objectTree.filter(function (x) {
          return x.title !== name;
        });
      });

      return objectTree;
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2___default()(this, "getNodeFromTreeWithPredicate", function (predicate, objectTree) {
      return new _TreeObject_TreeObject__WEBPACK_IMPORTED_MODULE_3__["default"](objectTree).getNode(predicate);
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2___default()(this, "addNodeItem2Tree", function (objectTree, nodeItem) {
      var parentName = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : _NodeItem_GlobalRef__WEBPACK_IMPORTED_MODULE_5__["default"].NAME;
      var is2addInServer = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;
      var isVisible = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : true;

      // delete if already exist
      _this.deleteNodeFromTreeUsingName(nodeItem.name, objectTree, is2addInServer);

      var isStatic = _this.staticNodeTypes.includes(nodeItem.getType());

      var node2Add = _TreeObject_TreeNode__WEBPACK_IMPORTED_MODULE_4__["default"].builder().title(nodeItem.name).item(nodeItem).isVisible(isVisible).isStatic(isStatic).build();

      if (parentName) {
        var maybeParentNode = _this.getNodeFromTree(parentName, objectTree);

        maybeParentNode.forEach(function (parentNode) {
          if (is2addInServer) _this.addNodeItem2Server(node2Add, parentNode.title);
          parentNode.children.push(node2Add);
        });
      } else {
        objectTree.push(node2Add);
        if (is2addInServer) _this.addNodeItem2Server(node2Add, null);
      }

      return objectTree;
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2___default()(this, "lostConnection", function () {
      _this.undoManager.undo({
        is2UpdateInServer: false
      });

      setImmediate(function () {
        _this.alert("Sorry, work not saved. Please check internet connection", "error");
      });
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2___default()(this, "updateNodeInServer", function (name, objectTree) {
      var oldName = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;
      console.log("updateNodeInServer!", name, _this.sceneName);

      _this.getNodeFromTree(name, objectTree).forEach(function (node) {
        var parentName = _this.getParentFromChild(name, objectTree).map(function (x) {
          return x.title;
        }).orNull();

        mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_6__["MasterDB"].cloudFunction(CLOUD_FUNCTION_NAME, "updateNode", [_TreeObject_TreeNode__WEBPACK_IMPORTED_MODULE_4__["default"].toDict(node), parentName, oldName, _this.sceneName], function (data) {
          console.log("Update node with success?", data.success, data.error);
        })["catch"](function (err) {
          console.warn("Update node error", name, err);
          TreeServerUtils.undoAction(_this);
        });
      });
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2___default()(this, "addNodeItem2Server", function (treeNode, parentName) {
      mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_6__["MasterDB"].cloudFunction(CLOUD_FUNCTION_NAME, "addNodeItem", [_TreeObject_TreeNode__WEBPACK_IMPORTED_MODULE_4__["default"].toDict(treeNode), parentName, _this.sceneName], function (data) {
        console.log("Add node with success?", data.success);
      })["catch"](function (err) {
        console.warn("Add node error", treeNode.title, err);
        TreeServerUtils.undoAction(_this);
      });
    });

    _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2___default()(this, "deleteNodeInServer", function (name) {
      mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_6__["MasterDB"].cloudFunction(CLOUD_FUNCTION_NAME, "deleteNodeByName", [name, _this.sceneName], function (data) {
        console.log("Deleted node with success?", data.success);
      })["catch"](function (err) {
        console.warn("Deleted node error", name, err);
        TreeServerUtils.undoAction(_this);
      });
    });

    this.sceneName = sceneName;
    this.undoManager = undoManager;

    this.alert = function (msg, type) {
      return alert(msg, type);
    };

    this.staticNodeTypes = [_NodeItem_GraphItem__WEBPACK_IMPORTED_MODULE_8__["default"].TYPE, _NodeItem_NavigationPreviewItem__WEBPACK_IMPORTED_MODULE_9__["default"].TYPE];
  }

  _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1___default()(TreeServerUtils, null, [{
    key: "ofScene",
    value: function ofScene(sceneName, undoManager, alert) {
      return new TreeServerUtils(sceneName, undoManager, alert);
    }
  }]);

  return TreeServerUtils;
}();

_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2___default()(TreeServerUtils, "undoAction", lodash_debounce__WEBPACK_IMPORTED_MODULE_10___default()(function (utils) {
  return utils.lostConnection();
}, 500));

/* harmony default export */ __webpack_exports__["default"] = (TreeServerUtils);
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../../../node_modules/timers-browserify/main.js */ "./node_modules/timers-browserify/main.js").setImmediate))

/***/ }),

/***/ "./src/Components/Viewer/Utils/Utils.js":
/*!**********************************************!*\
  !*** ./src/Components/Viewer/Utils/Utils.js ***!
  \**********************************************/
/*! exports provided: selectOneAction */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "selectOneAction", function() { return selectOneAction; });
function selectOneAction(predicateActionList) {
  var defaultAction = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {};
  return function (input) {
    predicateActionList.push({
      predicate: function predicate(e) {
        return true;
      },
      action: defaultAction
    });

    for (var i = 0; i < predicateActionList.length; i++) {
      var predicateAction = predicateActionList[i];

      if (predicateAction.predicate(input)) {
        predicateAction.action();
        break;
      }
    }
  };
}

/***/ }),

/***/ "./src/i18n/i18n.js":
/*!**************************!*\
  !*** ./src/i18n/i18n.js ***!
  \**************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var i18next__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! i18next */ "i18next");
/* harmony import */ var i18next__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(i18next__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_i18next__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-i18next */ "react-i18next");
/* harmony import */ var react_i18next__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_i18next__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _locales_en_translation_json__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./locales/en/translation.json */ "./src/i18n/locales/en/translation.json");
var _locales_en_translation_json__WEBPACK_IMPORTED_MODULE_2___namespace = /*#__PURE__*/__webpack_require__.t(/*! ./locales/en/translation.json */ "./src/i18n/locales/en/translation.json", 1);
/* harmony import */ var _locales_pt_translation_json__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./locales/pt/translation.json */ "./src/i18n/locales/pt/translation.json");
var _locales_pt_translation_json__WEBPACK_IMPORTED_MODULE_3___namespace = /*#__PURE__*/__webpack_require__.t(/*! ./locales/pt/translation.json */ "./src/i18n/locales/pt/translation.json", 1);

 // import Backend from 'i18next-xhr-backend';
// import LanguageDetector from 'i18next-browser-languagedetector';
// not like to use this?
// have a look at the Quick start guide
// for passing in lng and translations on init


 // the translations

var resources = window.SERVER_DATA === undefined || window.SERVER_DATA.Languages === undefined ? {
  en: {
    translation: _locales_en_translation_json__WEBPACK_IMPORTED_MODULE_2__
  },
  pt: {
    translation: _locales_pt_translation_json__WEBPACK_IMPORTED_MODULE_3__
  }
} : window.SERVER_DATA.Languages; // default language

var language = window.SERVER_DATA === undefined || window.SERVER_DATA.Language === undefined ? "en" : window.SERVER_DATA.Language;
i18next__WEBPACK_IMPORTED_MODULE_0___default.a // load translation using xhr -> see /public/locales (i.e. https://github.com/i18next/react-i18next/tree/master/example/react/public/locales)
// learn more: https://github.com/i18next/i18next-xhr-backend
//   .use(Backend)
// detect user language
// learn more: https://github.com/i18next/i18next-browser-languageDetector
//   .use(LanguageDetector)
// pass the i18n instance to react-i18next.
.use(react_i18next__WEBPACK_IMPORTED_MODULE_1__["initReactI18next"]) // init i18next
// for all options read: https://www.i18next.com/overview/configuration-options
.init({
  resources: resources,
  lng: language,
  fallbackLng: "en",
  debug: false,
  interpolation: {
    escapeValue: false // not needed for react as it escapes by default

  }
}); //   .changeLanguage("en", (err, t) => {
//     if (err) return console.log("something went wrong loading", err);
//   });

/* harmony default export */ __webpack_exports__["default"] = (i18next__WEBPACK_IMPORTED_MODULE_0___default.a);

/***/ }),

/***/ "./src/i18n/locales/en/translation.json":
/*!**********************************************!*\
  !*** ./src/i18n/locales/en/translation.json ***!
  \**********************************************/
/*! exports provided: Save, Ports, Inputs, Invalid data type, Create New, Workspace, Could not load workspaces, Copy, to, The copied, must have a different name, Something went wrong while copying, copied, Confirm to delete, Name, Version, Last update, User, Versioning, Home, Debug, Diff Tool, Search, Main flow view, Tree view, Parameters, Layers, Node already exists, Invalid name, Start link(s) not found, Annotations, Annotation, Callbacks, Callback, Configurations, Configuration, Flows, Flow, Nodes, Node, Layouts, Layout, Scenes, Scene, Key, key, Value, value, Type, Actions, Edit, Delete, Add, Accept, Cancel, Create new version, Open, Restore, Restore to, Compare, Invalid links found, Fix not available in view only mode., Do you want to fix this?, Fix, Sub-flows with invalid parameters, The parameters of the sub-flow should come from the flow template., The following sub-flows contains custom parameters that are not present on its template:, To fix it, you can either remove the custom parameter on the sub-flow or add the parameter on the template., Exposed port: node, not found, Developer, Client, Export App, Dashboard name, Remember me, Login, Username, Password, Loading, Callback is not defined, Please add a callback, Remappable, Launch, Properties, Env Variables, Command Line, Belongs to, Persistent, Is persistent, Not persistent, Is remappable, Not remappable, To launch, Not to launch, default, Ok, primary, Format Type Error, In Parameter, got the value, and expected one of the following formats, Backup, New Version, Yes, No, Cancel Restore, Invalid version name, Create a version of the existing work under the workspace, New name, Do you want to restore the selected version?, Please choose the name of the document to restore to, Restoring this version will overwrite the changes on the, global workspace, Do you want to backup your current work first?, This will create a new version under the workspace, Imports, Message, Edit Message, Submit, No records to display, Transport Protocol, Package, I/O Configuration, New Layer, Edit Layer, Execution Parameters, Environment Variables, Info, New parameter, Edit parameter, Path, Persistent node, After launch, the node will remain active during the flow execution., Allows, or not, the ports of the node to be remapped, Controls whether the Node is to be launched or not, Details, Paste, Start, Stop, Toggle Exposed, New Flow, New Annotation, New Configuration, New Node, New Layout, New Scene, New Callback, Invalid libs found, Fail to get running robot, Select/unselect the topics to monitor, Compare dependencies, Diff tool, Exclude property, Add Import, No widget selected, Edit description, Description, Layer successfully deleted., Delete layer, Are you sure you want to delete layer, Layers successfully saved., Delete parameter, Are you sure you want to delete, Are you sure to delete, Are you sure to delete selected nodes, Are you sure you want to delete all, children, An error occurred while loading the scene, Scene Viewer, Alert, Saved changes!, Renamed item to a existing name, please change the name, Cannot debug transition links, Topics, Logs, no data, Not connected, make sure rosbridge is running, From, Port, To, Dependencies level, All dependencies, Only From, Only To, No dependencies, Checks node dependencies, Reset, Add node, Add sub flow, Add state, Robot Configuration, Robot Config, Delete node [DEL], Add previous, Add next, null dictionary describing point cloud or null mainView, Navigation allowed, null dictionary describing polygon or null mainView, There are missing variables to build a robot, e.g, null dictionary describing wall, There are missing variables to build a TreeNode, e.g, There are missing variables to build a camera, e.g, There are missing variables to build a light, e.g, Load, Nothing selected, an, a, Select, Document, Are you sure?, Insert Text here, Confirm */
/***/ (function(module) {

module.exports = JSON.parse("{\"Save\":\"Save\",\"Ports\":\"Ports\",\"Inputs\":\"Inputs\",\"Invalid data type\":\"Invalid data type\",\"Create New\":\"Create New\",\"Workspace\":\"Workspace\",\"Could not load workspaces\":\"Could not load workspaces\",\"Copy\":\"Copy\",\"to\":\"to\",\"The copied\":\"The copied\",\"must have a different name\":\"must have a different name\",\"Something went wrong while copying\":\"Something went wrong while copying\",\"copied\":\"copied\",\"Confirm to delete\":\"Confirm to delete\",\"Name\":\"Name\",\"Version\":\"Version\",\"Last update\":\"Last update\",\"User\":\"User\",\"Versioning\":\"Versioning\",\"Home\":\"Home\",\"Debug\":\"Debug\",\"Diff Tool\":\"Diff Tool\",\"Search\":\"Search\",\"Main flow view\":\"Main flow view\",\"Tree view\":\"Tree view\",\"Parameters\":\"Parameters\",\"Layers\":\"Layers\",\"Node already exists\":\"Node already exists\",\"Invalid name\":\"Invalid name\",\"Start link(s) not found\":\"Start link(s) not found\",\"Annotations\":\"Annotations\",\"Annotation\":\"Annotation\",\"Callbacks\":\"Callbacks\",\"Callback\":\"Callback\",\"Configurations\":\"Configurations\",\"Configuration\":\"Configuration\",\"Flows\":\"Flows\",\"Flow\":\"Flow\",\"Nodes\":\"Nodes\",\"Node\":\"Node\",\"Layouts\":\"Layouts\",\"Layout\":\"Layout\",\"Scenes\":\"Scenes\",\"Scene\":\"Scene\",\"Key\":\"Key\",\"key\":\"key\",\"Value\":\"Value\",\"value\":\"value\",\"Type\":\"Type\",\"Actions\":\"Actions\",\"Edit\":\"Edit\",\"Delete\":\"Delete\",\"Add\":\"Add\",\"Accept\":\"Accept\",\"Cancel\":\"Cancel\",\"Create new version\":\"Create new version\",\"Open\":\"Open\",\"Restore\":\"Restore\",\"Restore to\":\"Restore to\",\"Compare\":\"Compare\",\"Invalid links found\":\"Invalid links found\",\"Fix not available in view only mode.\":\"Fix not available in view only mode.\",\"Do you want to fix this?\":\"Do you want to fix this?\",\"Fix\":\"Fix\",\"Sub-flows with invalid parameters\":\"Sub-flows with invalid parameters\",\"The parameters of the sub-flow should come from the flow template.\":\"The parameters of the sub-flow should come from the flow template.\\n\",\"The following sub-flows contains custom parameters that are not present on its template:\":\"The following sub-flows contains custom parameters that are not present on its template:\\n\",\"To fix it, you can either remove the custom parameter on the sub-flow or add the parameter on the template.\":\"To fix it, you can either remove the custom parameter on the sub-flow or add the parameter on the template.\",\"Exposed port: node\":\"Exposed port: node\",\"not found\":\"not found\",\"Developer\":\"Developer\",\"Client\":\"Client\",\"Export App\":\"Export App\",\"Dashboard name\":\"Dashboard name\",\"Remember me\":\"Remember me\",\"Login\":\"Login\",\"Username\":\"Username\",\"Password\":\"Password\",\"Loading\":\"Loading\",\"Callback is not defined\":\"Callback is not defined\",\"Please add a callback\":\"Please add a callback\",\"Remappable\":\"Remappable\",\"Launch\":\"Launch\",\"Properties\":\"Properties\",\"Env Variables\":\"Env. Variables\",\"Command Line\":\"Command Line\",\"Belongs to\":\"Belongs to\",\"Persistent\":\"Persistent\",\"Is persistent\":\"Is persistent\",\"Not persistent\":\"Not persistent\",\"Is remappable\":\"Is remappable\",\"Not remappable\":\"Not remappable\",\"To launch\":\"To launch\",\"Not to launch\":\"Not to launch\",\"default\":\"default\",\"Ok\":\"Ok\",\"primary\":\"primary\",\"Format Type Error\":\"Format Type Error\",\"In Parameter\":\"In Parameter\",\"got the value\":\"got the value\",\"and expected one of the following formats\":\"and expected one of the following formats\",\"Backup\":\"Backup\",\"New Version\":\"New Version\",\"Yes\":\"Yes\",\"No\":\"No\",\"Cancel Restore\":\"Cancel Restore\",\"Invalid version name\":\"Invalid version name\",\"Create a version of the existing work under the workspace\":\"Create a version of the existing work under the workspace\",\"New name\":\"New name\",\"Do you want to restore the selected version?\":\"Do you want to restore the selected version?\",\"Please choose the name of the document to restore to\":\"Please choose the name of the document to restore to\",\"Restoring this version will overwrite the changes on the\":\"Restoring this version will overwrite the changes on the\",\"global workspace\":\"global workspace\",\"Do you want to backup your current work first?\":\"Do you want to backup your current work first?\",\"This will create a new version under the workspace\":\"This will create a new version under the workspace\",\"Imports\":\"Imports\",\"Message\":\"Message\",\"Edit Message\":\"Edit Message\",\"Submit\":\"Submit\",\"No records to display\":\"No records to display\",\"Transport Protocol\":\"Transport / Protocol\",\"Package\":\"Package\",\"I/O Configuration\":\"I/O Configuration\",\"New Layer\":\"New Layer\",\"Edit Layer\":\"Edit Layer\",\"Execution Parameters\":\"Execution Parameters\",\"Environment Variables\":\"Environment Variables\",\"Info\":\"Info\",\"New parameter\":\"New parameter\",\"Edit parameter\":\"Edit parameter\",\"Path\":\"Path\",\"Persistent node\":\"Persistent node\",\"After launch, the node will remain active during the flow execution.\":\"After launch, the node will remain active during the flow execution.\",\"Allows, or not, the ports of the node to be remapped\":\"Allows, or not, the ports of the node to be remapped\",\"Controls whether the Node is to be launched or not\":\"Controls whether the Node is to be launched or not\",\"Details\":\"Details\",\"Paste\":\"Paste\",\"Start\":\"Start\",\"Stop\":\"Stop\",\"Toggle Exposed\":\"Toggle Exposed\",\"New Flow\":\"New Flow\",\"New Annotation\":\"New Annotation\",\"New Configuration\":\"New Configuration\",\"New Node\":\"New Node\",\"New Layout\":\"New Layout\",\"New Scene\":\"New Scene\",\"New Callback\":\"New Callback\",\"Invalid libs found\":\"Invalid libs found\",\"Fail to get running robot\":\"Fail to get running robot\",\"Select/unselect the topics to monitor\":\"Select/unselect the topics to monitor\",\"Compare dependencies\":\"Compare dependencies\",\"Diff tool\":\"Diff tool\",\"Exclude property\":\"Exclude property\",\"Add Import\":\"Add Import\",\"No widget selected\":\"No widget selected\",\"Edit description\":\"Edit description\",\"Description\":\"Description\",\"Layer successfully deleted.\":\"Layer successfully deleted.\",\"Delete layer\":\"Delete layer\",\"Are you sure you want to delete layer\":\"Are you sure you want to delete layer\",\"Layers successfully saved.\":\"Layers successfully saved.\",\"Delete parameter\":\"Delete parameter\",\"Are you sure you want to delete\":\"Are you sure you want to delete\",\"Are you sure to delete\":\"Are you sure to delete\",\"Are you sure to delete selected nodes\":\"Are you sure to delete selected nodes\",\"Are you sure you want to delete all\":\"Are you sure you want to delete all\",\"children\":\"children\",\"An error occurred while loading the scene\":\"An error occurred while loading the scene\",\"Scene Viewer\":\"Scene Viewer\",\"Alert\":\"Alert\",\"Saved changes!\":\"Saved changes!\",\"Renamed item to a existing name, please change the name\":\"Renamed item to a existing name, please change the name\",\"Cannot debug transition links\":\"Cannot debug transition links\",\"Topics\":\"Topics\",\"Logs\":\"Logs\",\"no data\":\"no data\",\"Not connected, make sure rosbridge is running\":\"Not connected, make sure rosbridge is running\",\"From\":\"From\",\"Port\":\"Port\",\"To\":\"To\",\"Dependencies level\":\"Dependencies level\",\"All dependencies\":\"All dependencies\",\"Only From\":\"Only From\",\"Only To\":\"Only To\",\"No dependencies\":\"No dependencies\",\"Checks node dependencies\":\"Checks node dependencies\",\"Reset\":\"Reset\",\"Add node\":\"Add node\",\"Add sub flow\":\"Add sub flow\",\"Add state\":\"Add state\",\"Robot Configuration\":\"Robot Configuration\",\"Robot Config\":\"Robot Config\",\"Delete node [DEL]\":\"Delete node [DEL]\",\"Add previous\":\"Add previous\",\"Add next\":\"Add next\",\"null dictionary describing point cloud or null mainView\":\"null dictionary describing point cloud or null mainView\",\"Navigation allowed\":\"Navigation allowed\",\"null dictionary describing polygon or null mainView\":\"null dictionary describing polygon or null mainView\",\"There are missing variables to build a robot, e.g\":\"There are missing variables to build a robot, e.g\",\"null dictionary describing wall\":\"null dictionary describing wall\",\"There are missing variables to build a TreeNode, e.g\":\"There are missing variables to build a TreeNode, e.g\",\"There are missing variables to build a camera, e.g\":\"There are missing variables to build a camera, e.g\",\"There are missing variables to build a light, e.g\":\"There are missing variables to build a light, e.g\",\"Load\":\"Load\",\"Nothing selected\":\"Nothing selected\",\"an\":\"an\",\"a\":\"a\",\"Select\":\"Select\",\"Document\":\"Document\",\"Are you sure?\":\"Are you sure?\",\"Insert Text here\":\"Insert Text here\",\"Confirm\":\"Confirm\"}");

/***/ }),

/***/ "./src/i18n/locales/pt/translation.json":
/*!**********************************************!*\
  !*** ./src/i18n/locales/pt/translation.json ***!
  \**********************************************/
/*! exports provided: Save, Ports, Inputs, Invalid data type, Create New, Workspace, Could not load workspaces, Copy, to, The copied, must have a different name, Something went wrong while copying, copied, Confirm to delete, Are you sure you want to delete, Name, Version, Last update, User, Versioning, Home, Debug, Diff Tool, Search, Main flow view, Tree view, Description, Parameters, Layers, Node already exists, Invalid name, Start link(s) not found, Annotations, Annotation, Callbacks, Callback, Configurations, Configuration, Flows, Flow, Nodes, Node, Layouts, Layout, Scenes, Scene, Key, key, Value, value, Type, Actions, Edit, Add, Delete, Accept, Create new version, Cancel, Open, Restore, Restore to, Compare, Invalid links found, Fix not available in view only mode., Do you want to fix this?, Fix, Sub-flows with invalid parameters, The parameters of the sub-flow should come from the flow template., The following sub-flows contains custom parameters that are not present on its template:, To fix it, you can either remove the custom parameter on the sub-flow or add the parameter on the template., Exposed port: node, not found, Developer, Client, Export App, Dashboard name, Remember me, Login, Username, Password, Loading, Callback is not defined, Please add a callback, Remappable, Launch, Properties, Env Variables, Command Line, Belongs to, Persistent, Is persistent, Not persistent, Is remappable, Not remappable, To launch, Not to launch, default, Ok, primary, Format Type Error, In Parameter, got the value, and expected one of the following formats, Backup, New Version, Yes, No, Cancel Restore, Invalid version name, Create a version of the existing work under the workspace, New name, Do you want to restore the selected version?, Please choose the name of the document to restore to, Restoring this version will overwrite the changes on the, global workspace, Do you want to backup your current work first?, This will create a new version under the workspace, Imports, Message, Edit Message, Submit, No records to display, Transport Protocol, Package, I/O Configuration, New Layer, Edit Layer, Execution Parameters, Environment Variables, Info, New parameter, Edit parameter, Path, Persistent node, After launch, the node will remain active during the flow execution., Allows, or not, the ports of the node to be remapped, Controls whether the Node is to be launched or not, Details, Paste, Start, Stop, Toggle Exposed, New Annotation, New Configuration, New Node, New Layout, New Scene, New Callback, Invalid libs found, Fail to get running robot, Select/unselect the topics to monitor, Compare dependencies, Diff tool, Exclude property, Add Import, No widget selected, Edit description, Layer successfully deleted., Delete layer, Are you sure you want to delete layer, Layers successfully saved., Delete parameter, Are you sure to delete, Are you sure to delete selected nodes, Are you sure you want to delete all, children, An error occurred while loading the scene, Scene Viewer, Alert, Saved changes!, Renamed item to a existing name, please change the name, Cannot debug transition links, Topics, Logs, New Flow, no data, Not connected, make sure rosbridge is running, From, Port, To, Dependencies level, All dependencies, Only From, Only To, No dependencies, Checks node dependencies, Reset, Add node, Add sub flow, Add state, Robot Configuration, Robot Config, Delete node [DEL], Add previous, Add next, null dictionary describing point cloud or null mainView, Navigation allowed, null dictionary describing polygon or null mainView, There are missing variables to build a robot, e.g, null dictionary describing wall, There are missing variables to build a TreeNode, e.g, There are missing variables to build a camera, e.g, There are missing variables to build a light, e.g, Load, Nothing selected, an, a, Select, Document, Are you sure?, Insert Text here, Confirm */
/***/ (function(module) {

module.exports = JSON.parse("{\"Save\":\"Gravar\",\"Ports\":\"Portas\",\"Inputs\":\"Entradas\",\"Invalid data type\":\"Tipo de dado invlido\",\"Create New\":\"Criar Novo\",\"Workspace\":\"rea de trabalho\",\"Could not load workspaces\":\"No foi possvel carregar os espaos de trabalho\",\"Copy\":\"Copiar\",\"to\":\"para\",\"The copied\":\"A cpia\",\"must have a different name\":\"deve ter um nome diferente\",\"Something went wrong while copying\":\"Algo deu errado ao tentar criar a cpia\",\"copied\":\"copiado\",\"Confirm to delete\":\"Confirme para excluir\",\"Are you sure you want to delete\":\"Tem certeza de que deseja excluir\",\"Name\":\"Nome\",\"Version\":\"Verso\",\"Last update\":\"ltima atualizao\",\"User\":\"Usurio\",\"Versioning\":\"Verses\",\"Home\":\"Incio\",\"Debug\":\"Depurar\",\"Diff Tool\":\"Ferramenta de comparao\",\"Search\":\"Procurar\",\"Main flow view\":\"Visualizao de fluxo principal\",\"Tree view\":\"Visualizao em rvore\",\"Description\":\"Descrio\",\"Parameters\":\"Parmetros\",\"Layers\":\"Camadas\",\"Node already exists\":\"Este n j existe\",\"Invalid name\":\"Nome invlido\",\"Start link(s) not found\":\"Ligao inicial no encontrada\",\"Annotations\":\"Anotaes\",\"Annotation\":\"Anotao\",\"Callbacks\":\"Revogaes\",\"Callback\":\"Revogao\",\"Configurations\":\"Configuraes\",\"Configuration\":\"Configurao\",\"Flows\":\"Fluxos\",\"Flow\":\"Fluxo\",\"Nodes\":\"Ns\",\"Node\":\"N\",\"Layouts\":\"Disposies\",\"Layout\":\"Disposio\",\"Scenes\":\"Cenrios\",\"Scene\":\"Cenrio\",\"Key\":\"Chave\",\"key\":\"chave\",\"Value\":\"Valor\",\"value\":\"valor\",\"Type\":\"Tipo\",\"Actions\":\"Aes\",\"Edit\":\"Editar\",\"Add\":\"Adicionar\",\"Delete\":\"Apagar\",\"Accept\":\"Aceitar\",\"Create new version\":\"Criar nova verso\",\"Cancel\":\"Cancelar\",\"Open\":\"Abrir\",\"Restore\":\"Restaurar\",\"Restore to\":\"Restaurar para\",\"Compare\":\"Comparar\",\"Invalid links found\":\"Foram encontradas ligaes invlidas\",\"Fix not available in view only mode.\":\"Correco no disponvel em modo de visualizao.\",\"Do you want to fix this?\":\"Voc deseja corrigir isto?\",\"Fix\":\"Corrigir\",\"Sub-flows with invalid parameters\":\"Sub-fluxos com parmetros invlidos\",\"The parameters of the sub-flow should come from the flow template.\":\"Os parmetros do sub-fluxo devem vir do modelo de fluxo.\\n\",\"The following sub-flows contains custom parameters that are not present on its template:\":\"Os seguintes subfluxos contm parmetros personalizados que no esto presentes em seu modelo:\\n\",\"To fix it, you can either remove the custom parameter on the sub-flow or add the parameter on the template.\":\"Para corrigir isso, voc pode remover o parmetro personalizado no subfluxo ou adicionar o parmetro no modelo.\",\"Exposed port: node\":\"Porta exposta: n\",\"not found\":\"not found\",\"Developer\":\"Desenvolvedor\",\"Client\":\"Cliente\",\"Export App\":\"Exportar Aplicao\",\"Dashboard name\":\"Nome do painel\",\"Remember me\":\"Lembrar-me\",\"Login\":\"Entrar\",\"Username\":\"Nome de usurio\",\"Password\":\"Senha\",\"Loading\":\"A carregar\",\"Callback is not defined\":\"Callback no definida\",\"Please add a callback\":\"Por favor, adicione uma callback\",\"Remappable\":\"Remapevel\",\"Launch\":\"Enviar\",\"Properties\":\"Propriedades\",\"Env Variables\":\"Variveis de Ambiente\",\"Command Line\":\"Linha de Comando\",\"Belongs to\":\"Pertence a\",\"Persistent\":\"Persistente\",\"Is persistent\":\" persistente\",\"Not persistent\":\"No persistent\",\"Is remappable\":\" remapevel\",\"Not remappable\":\"No remapevel\",\"To launch\":\"Para enviar\",\"Not to launch\":\"No enviar\",\"default\":\"defeito\",\"Ok\":\"Ok\",\"primary\":\"primrio\",\"Format Type Error\":\"Erro de tipo de formatao\",\"In Parameter\":\"Em parmetro\",\"got the value\":\"obteve o valor\",\"and expected one of the following formats\":\"e esperava um dos seguintes formatos\",\"Backup\":\"Cpia de segurana\",\"New Version\":\"Nova Verso\",\"Yes\":\"Sim\",\"No\":\"No\",\"Cancel Restore\":\"Cancelar Restaurao\",\"Invalid version name\":\"Nome de verso invlido\",\"Create a version of the existing work under the workspace\":\"Criar uma verso de um documento existente na rea de trabalho\",\"New name\":\"Novo nome\",\"Do you want to restore the selected version?\":\"Voc quer restaurar a verso seleccionada?\",\"Please choose the name of the document to restore to\":\"Por favor, escolha o nome do documento a ser restaurado\",\"Restoring this version will overwrite the changes on the\":\"Restaurar essa verso ir sobrescrever as mudanas na\",\"global workspace\":\"rea de trabalho global\",\"Do you want to backup your current work first?\":\"Voc quer fazer backup do seu trabalho atual primeiro?\",\"This will create a new version under the workspace\":\"Isso criar uma nova verso sob o espao de trabalho\",\"Imports\":\"Importaes\",\"Message\":\"Mensagem\",\"Edit Message\":\"Editar Mensagem\",\"Submit\":\"Enviar\",\"No records to display\":\"No h dados a serem exibidos\",\"Transport Protocol\":\"Transporte / Protocolo\",\"Package\":\"Pacote\",\"I/O Configuration\":\"Configuraes de Entrada/Sada\",\"New Layer\":\"Nova Camada\",\"Edit Layer\":\"Editar Camada\",\"Execution Parameters\":\"Parmetros de execuo\",\"Environment Variables\":\"Variveis de Ambiente\",\"Info\":\"Informao\",\"New parameter\":\"Novo parmetro\",\"Edit parameter\":\"Editar parmetro\",\"Path\":\"Caminho\",\"Persistent node\":\"N persistente\",\"After launch, the node will remain active during the flow execution.\":\"Depois do incio, o n ficar ativo durante a execuo do flow.\",\"Allows, or not, the ports of the node to be remapped\":\"Permite, ou no, que as portas do n sejam remapeadas\",\"Controls whether the Node is to be launched or not\":\"Controla se o N deve ser lanado ou no\",\"Details\":\"Detalhes\",\"Paste\":\"Colar\",\"Start\":\"Start\",\"Stop\":\"Stop\",\"Toggle Exposed\":\"Alternar Exposto\",\"New Annotation\":\"Nova Anotao\",\"New Configuration\":\"Nova Configurao\",\"New Node\":\"Novo N\",\"New Layout\":\"Nova Disposio\",\"New Scene\":\"Novo Cenrio\",\"New Callback\":\"Nova Revogao\",\"Invalid libs found\":\"Foram encontradas bibliotecas invlidas\",\"Fail to get running robot\":\"Falha ao obter rob em execuo\",\"Select/unselect the topics to monitor\":\"Selecione/desmarque os tpicos para monitorar\",\"Compare dependencies\":\"Comparar dependncias\",\"Diff tool\":\"Ferramenta de comparao\",\"Exclude property\":\"Excluir propriedade\",\"Add Import\":\"Adicionar importao\",\"No widget selected\":\"Sem ferramentas selecionadas\",\"Edit description\":\"Editar descrio\",\"Layer successfully deleted.\":\"Camada deletada com sucesso.\",\"Delete layer\":\"Deletar camada\",\"Are you sure you want to delete layer\":\"Tens a certeza de que deseja remover a camada\",\"Layers successfully saved.\":\"Camada guardada com sucesso.\",\"Delete parameter\":\"Deletar parmetro\",\"Are you sure to delete\":\"Tem certeza que quer apagar\",\"Are you sure to delete selected nodes\":\"tem certeza que quer apagar os objectos selecionados\",\"Are you sure you want to delete all\":\"Tem certeza que quer apagar todos\",\"children\":\"filho\",\"An error occurred while loading the scene\":\"Um erro foi encontrado enquanto carregava o cenrio\",\"Scene Viewer\":\"Visualizador de cenrios\",\"Alert\":\"Alerta\",\"Saved changes!\":\"Mudanas salvas!\",\"Renamed item to a existing name, please change the name\":\"Item renomeado para um nome existente, por favor altere o nome\",\"Cannot debug transition links\":\"No  possvel depurar links de transio\",\"Topics\":\"Tpicos\",\"Logs\":\"Histrico\",\"New Flow\":\"Novo Fluxo\",\"no data\":\"no data\",\"Not connected, make sure rosbridge is running\":\"No conectado, certifique-se de que Rosbridge est em execuo\",\"From\":\"De\",\"Port\":\"Porta\",\"To\":\"Para\",\"Dependencies level\":\"Level de dependncias\",\"All dependencies\":\"Todas as dependncias\",\"Only From\":\"Somente De\",\"Only To\":\"Somente Para\",\"No dependencies\":\"Sem dependncias\",\"Checks node dependencies\":\"Verificar dependncias de n\",\"Reset\":\"Reiniciar\",\"Add node\":\"Adicionar n\",\"Add sub flow\":\"Adicionar subfluxo\",\"Add state\":\"Adicionar estado\",\"Robot Configuration\":\"Configurao do Rob\",\"Robot Config\":\"Configurao do Rob\",\"Delete node [DEL]\":\"Apagar n [DEL]\",\"Add previous\":\"Adicionar anterior\",\"Add next\":\"Adicionar prximo\",\"null dictionary describing point cloud or null mainView\":\"null dictionary describing point cloud or null mainView\",\"Navigation allowed\":\"Navegao permitida\",\"null dictionary describing polygon or null mainView\":\"null dictionary describing polygon or null mainView\",\"There are missing variables to build a robot, e.g\":\"H variveis ausentes para construir um rob, e.g\",\"null dictionary describing wall\":\"null dictionary describing wall\",\"There are missing variables to build a TreeNode, e.g\":\"H variveis ausentes para construir um TreeNode, e.g\",\"There are missing variables to build a camera, e.g\":\"H variveis ausentes para construir uma camera, e.g\",\"There are missing variables to build a light, e.g\":\"H variveis ausentes para construir uma luz, e.g\",\"Load\":\"Carregar\",\"Nothing selected\":\"Nada selecionado\",\"an\":\"um\",\"a\":\"um\",\"Select\":\"Selecione\",\"Document\":\"Documento\",\"Are you sure?\":\"Tens a certeza?\",\"Insert Text here\":\"Inserir texto aqui\",\"Confirm\":\"Confirmar\"}");

/***/ }),

/***/ "./src/styles/Style.js":
/*!*****************************!*\
  !*** ./src/styles/Style.js ***!
  \*****************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_esm_taggedTemplateLiteral__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/taggedTemplateLiteral */ "@babel/runtime/helpers/esm/taggedTemplateLiteral");
/* harmony import */ var _babel_runtime_helpers_esm_taggedTemplateLiteral__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_taggedTemplateLiteral__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! styled-components */ "styled-components");
/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(styled_components__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! mov-fe-lib-core */ "mov-fe-lib-core");
/* harmony import */ var mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_2__);


var _templateObject;



var Style = Object(styled_components__WEBPACK_IMPORTED_MODULE_1__["createGlobalStyle"])(_templateObject || (_templateObject = _babel_runtime_helpers_esm_taggedTemplateLiteral__WEBPACK_IMPORTED_MODULE_0___default()(["", ""])), mov_fe_lib_core__WEBPACK_IMPORTED_MODULE_2__["Style"]);
/* harmony default export */ __webpack_exports__["default"] = (Style);

/***/ }),

/***/ "./src/styles/Themes.js":
/*!******************************!*\
  !*** ./src/styles/Themes.js ***!
  \******************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ "@babel/runtime/helpers/esm/defineProperty");
/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _material_ui_core_styles__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @material-ui/core/styles */ "@material-ui/core/styles");
/* harmony import */ var _material_ui_core_styles__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var fontsource_roboto__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! fontsource-roboto */ "fontsource-roboto");
/* harmony import */ var fontsource_roboto__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(fontsource_roboto__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var fontsource_open_sans__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! fontsource-open-sans */ "fontsource-open-sans");
/* harmony import */ var fontsource_open_sans__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(fontsource_open_sans__WEBPACK_IMPORTED_MODULE_3__);


function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }




var CONSTANTS = {
  dark: {
    borderBottom: "1px solid #212121",
    textColor: "white",
    background: {
      primary: "#424242",
      secondary: "#212121"
    }
  },
  light: {
    borderBottom: "1px solid #ccc",
    textColor: "rgba(0, 0, 0, 0.87)",
    background: {
      primary: "#e2e2e2",
      secondary: "#b2b2b2"
    }
  }
};

var themeFactory = function themeFactory(particular) {
  return _objectSpread(_objectSpread({}, particular), {}, {
    typography: {
      fontFamily: "Open Sans",
      h1: {
        fontFamily: "Open Sans"
      },
      h2: {
        fontFamily: "Open Sans"
      },
      h3: {
        fontFamily: "Open Sans"
      },
      h4: {
        fontFamily: "Open Sans"
      },
      h5: {
        fontFamily: "Open Sans"
      },
      h6: {
        fontFamily: "Open Sans"
      },
      body1: {
        fontFamily: "Roboto"
      }
    },
    cursorDefault: {
      cursor: "default"
    },
    cursorPointer: {
      cursor: "pointer"
    }
  });
};

var Themes = {
  dark: Object(_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_1__["createMuiTheme"])(themeFactory({
    label: "dark",
    textColor: CONSTANTS.dark.textColor,
    backgroundColor: "linear-gradient(114.01deg, #212121 0%, #050505 100.43%)",
    bottomNavigation: {
      background: "#212121"
    },
    globalStats: {
      borderColor: "#474747",
      subTextColor: "#CDCDCD",
      upperTextColor: "#E6E6E6"
    },
    palette: {
      type: "dark",
      // Switching the dark mode on, is a single property value change.
      primary: {
        main: "#36b5e6"
      },
      secondary: {
        main: "#CF6679"
      },
      green: {
        main: "#03DAC5"
      },
      background: {
        primary: CONSTANTS.dark.background.primary,
        secondary: CONSTANTS.dark.background.secondary
      },
      accent: {
        background: "#f5f5f9",
        color: "rgba(0, 0, 0, 0.87)",
        border: "#dadde9"
      }
    },
    icon: {
      color: "#c6c6c6",
      hoverColor: "white"
    },
    table: {
      stripColor: "#505050"
    },
    verticalBar: {
      iconColor: "#9e9e9e"
    },
    overrides: {
      MuiTableCell: {
        body: {
          color: CONSTANTS.dark.textColor
        }
      },
      MuiAppBar: {
        colorDefault: {
          color: CONSTANTS.dark.textColor,
          borderColor: "black",
          backgroundColor: CONSTANTS.dark.background.secondary
        },
        colorInherit: {
          color: CONSTANTS.dark.textColor,
          backgroundColor: "#353535"
        }
      },
      MuiButton: {
        outlined: {
          margin: "8px"
        },
        text: {
          margin: "8px"
        },
        contained: {
          margin: "8px"
        },
        containedPrimary: {
          color: "inherit",
          margin: "8px"
        },
        containedSecondary: {
          color: "inherit",
          margin: "8px"
        }
      },
      MuiButtonGroup: {
        root: {
          margin: "0"
        },
        groupedContainedPrimary: {
          margin: "0"
        },
        groupedOutlined: {
          margin: "0"
        },
        groupedText: {
          margin: "0"
        }
      },
      MuiIconButton: {
        root: {
          color: "#36b5e6"
        }
      },
      MuiListItem: {
        button: {
          "&:hover": {
            backgroundColor: "rgba(54,181,230, 0.15)"
          }
        }
      },
      MuiFormControlLabel: {
        label: {
          color: "rgba(255,255,255,0.8)"
        }
      },
      MuiInputBase: {
        input: {
          font: "Roboto"
        }
      },
      MuiFilledInput: {
        root: {
          border: "4px"
        },
        underline: {
          "&::before": {
            borderRadius: "4px"
          }
        }
      }
    }
  })),
  light: Object(_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_1__["createMuiTheme"])(themeFactory({
    font: {
      Roboto: {
        fontFamily: "Roboto"
      },
      OpenSans: {
        fontFamily: "Open Sans"
      }
    },
    label: "light",
    textColor: CONSTANTS.light.textColor,
    backgroundColor: "linear-gradient(122.19deg, #FFFFFF 2.58%, #FFFFFF 76.23%)",
    // it was white before
    bottomNavigation: {
      background: "#c3c3c3"
    },
    icon: {
      color: "#757575",
      hoverColor: "black"
    },
    table: {
      stripColor: "whitesmoke"
    },
    globalStats: {
      borderColor: "#E6E6E6",
      subTextColor: "#717171",
      upperTextColor: "#474747"
    },
    palette: {
      primary: {
        main: "#007197"
      },
      secondary: {
        main: "#BE2424"
      },
      green: {
        main: "#03DAC5"
      },
      background: {
        primary: CONSTANTS.light.background.primary,
        secondary: CONSTANTS.light.background.secondary
      },
      accent: {
        background: "whitesmoke",
        color: CONSTANTS.light.textColor,
        border: "darkgray"
      }
    },
    verticalBar: {
      iconColor: "#616161"
    },
    overrides: {
      MuiTableCell: {
        body: {
          color: CONSTANTS.light.textColor
        }
      },
      MuiAppBar: {
        colorDefault: {
          color: CONSTANTS.light.textColor,
          borderColor: CONSTANTS.light.borderBottom,
          backgroundColor: CONSTANTS.light.background.secondary
        },
        colorInherit: {
          color: CONSTANTS.light.textColor,
          backgroundColor: "#d2d2d2"
        }
      },
      MuiButton: {
        outlined: {
          margin: "8px"
        },
        text: {
          margin: "8px"
        },
        contained: {
          margin: "8px"
        },
        containedPrimary: {
          color: "white",
          margin: "8px"
        },
        containedSecondary: {
          color: "white",
          margin: "8px"
        }
      },
      MuiButtonGroup: {
        root: {
          margin: "0"
        },
        groupedContainedPrimary: {
          margin: "0"
        },
        groupedOutlined: {
          margin: "0"
        },
        groupedText: {
          margin: "0"
        }
      },
      MuiIconButton: {
        root: {
          color: "#007197"
        }
      },
      MuiListItem: {
        button: {
          "&:hover": {
            backgroundColor: "rgba(0,113,151, 0.15)"
          }
        }
      },
      MuiFormControlLabel: {
        label: {
          color: "rgba(0,0,0,0.8)"
        }
      },
      MuiInputBase: {
        input: {
          font: "Roboto"
        }
      },
      MuiFilledInput: {
        root: {
          border: "4px"
        },
        underline: {
          "&::before": {
            borderRadius: "4px"
          }
        }
      },
      MuiPaper: {
        root: {
          color: "#272727",
          backgroundColor: CONSTANTS.light.background.primary
        }
      },
      MuiTableRow: {
        head: {
          "& th": {
            backgroundColor: CONSTANTS.light.background.primary,
            borderBottom: CONSTANTS.light.borderBottom
          }
        },
        root: {
          "& td": {
            borderBottom: CONSTANTS.light.borderBottom
          }
        }
      }
    }
  }))
};

Themes.getTheme = function () {
  var theme = window.localStorage.getItem("movai.theme"); // dark or light

  return theme ? theme : "dark";
};

Themes.setTheme = function (value) {
  window.localStorage.setItem("movai.theme", value);
};

/* harmony default export */ __webpack_exports__["default"] = (Themes);

/***/ }),

/***/ "@babel/runtime/helpers/esm/assertThisInitialized":
/*!*******************************************************************!*\
  !*** external "@babel/runtime/helpers/esm/assertThisInitialized" ***!
  \*******************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@babel/runtime/helpers/esm/assertThisInitialized");

/***/ }),

/***/ "@babel/runtime/helpers/esm/asyncToGenerator":
/*!**************************************************************!*\
  !*** external "@babel/runtime/helpers/esm/asyncToGenerator" ***!
  \**************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@babel/runtime/helpers/esm/asyncToGenerator");

/***/ }),

/***/ "@babel/runtime/helpers/esm/classCallCheck":
/*!************************************************************!*\
  !*** external "@babel/runtime/helpers/esm/classCallCheck" ***!
  \************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@babel/runtime/helpers/esm/classCallCheck");

/***/ }),

/***/ "@babel/runtime/helpers/esm/classPrivateFieldGet":
/*!******************************************************************!*\
  !*** external "@babel/runtime/helpers/esm/classPrivateFieldGet" ***!
  \******************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@babel/runtime/helpers/esm/classPrivateFieldGet");

/***/ }),

/***/ "@babel/runtime/helpers/esm/createClass":
/*!*********************************************************!*\
  !*** external "@babel/runtime/helpers/esm/createClass" ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@babel/runtime/helpers/esm/createClass");

/***/ }),

/***/ "@babel/runtime/helpers/esm/defineProperty":
/*!************************************************************!*\
  !*** external "@babel/runtime/helpers/esm/defineProperty" ***!
  \************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@babel/runtime/helpers/esm/defineProperty");

/***/ }),

/***/ "@babel/runtime/helpers/esm/extends":
/*!*****************************************************!*\
  !*** external "@babel/runtime/helpers/esm/extends" ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@babel/runtime/helpers/esm/extends");

/***/ }),

/***/ "@babel/runtime/helpers/esm/get":
/*!*************************************************!*\
  !*** external "@babel/runtime/helpers/esm/get" ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@babel/runtime/helpers/esm/get");

/***/ }),

/***/ "@babel/runtime/helpers/esm/getPrototypeOf":
/*!************************************************************!*\
  !*** external "@babel/runtime/helpers/esm/getPrototypeOf" ***!
  \************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@babel/runtime/helpers/esm/getPrototypeOf");

/***/ }),

/***/ "@babel/runtime/helpers/esm/inherits":
/*!******************************************************!*\
  !*** external "@babel/runtime/helpers/esm/inherits" ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@babel/runtime/helpers/esm/inherits");

/***/ }),

/***/ "@babel/runtime/helpers/esm/objectWithoutProperties":
/*!*********************************************************************!*\
  !*** external "@babel/runtime/helpers/esm/objectWithoutProperties" ***!
  \*********************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@babel/runtime/helpers/esm/objectWithoutProperties");

/***/ }),

/***/ "@babel/runtime/helpers/esm/possibleConstructorReturn":
/*!***********************************************************************!*\
  !*** external "@babel/runtime/helpers/esm/possibleConstructorReturn" ***!
  \***********************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@babel/runtime/helpers/esm/possibleConstructorReturn");

/***/ }),

/***/ "@babel/runtime/helpers/esm/slicedToArray":
/*!***********************************************************!*\
  !*** external "@babel/runtime/helpers/esm/slicedToArray" ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@babel/runtime/helpers/esm/slicedToArray");

/***/ }),

/***/ "@babel/runtime/helpers/esm/taggedTemplateLiteral":
/*!*******************************************************************!*\
  !*** external "@babel/runtime/helpers/esm/taggedTemplateLiteral" ***!
  \*******************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@babel/runtime/helpers/esm/taggedTemplateLiteral");

/***/ }),

/***/ "@babel/runtime/helpers/esm/toArray":
/*!*****************************************************!*\
  !*** external "@babel/runtime/helpers/esm/toArray" ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@babel/runtime/helpers/esm/toArray");

/***/ }),

/***/ "@babel/runtime/helpers/esm/toConsumableArray":
/*!***************************************************************!*\
  !*** external "@babel/runtime/helpers/esm/toConsumableArray" ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@babel/runtime/helpers/esm/toConsumableArray");

/***/ }),

/***/ "@babel/runtime/helpers/esm/typeof":
/*!****************************************************!*\
  !*** external "@babel/runtime/helpers/esm/typeof" ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@babel/runtime/helpers/esm/typeof");

/***/ }),

/***/ "@babel/runtime/regenerator":
/*!*********************************************!*\
  !*** external "@babel/runtime/regenerator" ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@babel/runtime/regenerator");

/***/ }),

/***/ "@babylonjs/core":
/*!**********************************!*\
  !*** external "@babylonjs/core" ***!
  \**********************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@babylonjs/core");

/***/ }),

/***/ "@babylonjs/core/Debug/debugLayer":
/*!***************************************************!*\
  !*** external "@babylonjs/core/Debug/debugLayer" ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@babylonjs/core/Debug/debugLayer");

/***/ }),

/***/ "@babylonjs/core/Maths/math":
/*!*********************************************!*\
  !*** external "@babylonjs/core/Maths/math" ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@babylonjs/core/Maths/math");

/***/ }),

/***/ "@babylonjs/gui":
/*!*********************************!*\
  !*** external "@babylonjs/gui" ***!
  \*********************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@babylonjs/gui");

/***/ }),

/***/ "@babylonjs/gui/2D":
/*!************************************!*\
  !*** external "@babylonjs/gui/2D" ***!
  \************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@babylonjs/gui/2D");

/***/ }),

/***/ "@babylonjs/inspector":
/*!***************************************!*\
  !*** external "@babylonjs/inspector" ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@babylonjs/inspector");

/***/ }),

/***/ "@babylonjs/loaders":
/*!*************************************!*\
  !*** external "@babylonjs/loaders" ***!
  \*************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@babylonjs/loaders");

/***/ }),

/***/ "@date-io/date-fns":
/*!************************************!*\
  !*** external "@date-io/date-fns" ***!
  \************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@date-io/date-fns");

/***/ }),

/***/ "@material-ui/core":
/*!************************************!*\
  !*** external "@material-ui/core" ***!
  \************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@material-ui/core");

/***/ }),

/***/ "@material-ui/core/Avatar":
/*!*******************************************!*\
  !*** external "@material-ui/core/Avatar" ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@material-ui/core/Avatar");

/***/ }),

/***/ "@material-ui/core/Backdrop":
/*!*********************************************!*\
  !*** external "@material-ui/core/Backdrop" ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@material-ui/core/Backdrop");

/***/ }),

/***/ "@material-ui/core/Box":
/*!****************************************!*\
  !*** external "@material-ui/core/Box" ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@material-ui/core/Box");

/***/ }),

/***/ "@material-ui/core/Breadcrumbs":
/*!************************************************!*\
  !*** external "@material-ui/core/Breadcrumbs" ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@material-ui/core/Breadcrumbs");

/***/ }),

/***/ "@material-ui/core/Button":
/*!*******************************************!*\
  !*** external "@material-ui/core/Button" ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@material-ui/core/Button");

/***/ }),

/***/ "@material-ui/core/Checkbox":
/*!*********************************************!*\
  !*** external "@material-ui/core/Checkbox" ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@material-ui/core/Checkbox");

/***/ }),

/***/ "@material-ui/core/Chip":
/*!*****************************************!*\
  !*** external "@material-ui/core/Chip" ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@material-ui/core/Chip");

/***/ }),

/***/ "@material-ui/core/CircularProgress":
/*!*****************************************************!*\
  !*** external "@material-ui/core/CircularProgress" ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@material-ui/core/CircularProgress");

/***/ }),

/***/ "@material-ui/core/Collapse":
/*!*********************************************!*\
  !*** external "@material-ui/core/Collapse" ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@material-ui/core/Collapse");

/***/ }),

/***/ "@material-ui/core/Divider":
/*!********************************************!*\
  !*** external "@material-ui/core/Divider" ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@material-ui/core/Divider");

/***/ }),

/***/ "@material-ui/core/Drawer":
/*!*******************************************!*\
  !*** external "@material-ui/core/Drawer" ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@material-ui/core/Drawer");

/***/ }),

/***/ "@material-ui/core/FormControl":
/*!************************************************!*\
  !*** external "@material-ui/core/FormControl" ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@material-ui/core/FormControl");

/***/ }),

/***/ "@material-ui/core/FormControlLabel":
/*!*****************************************************!*\
  !*** external "@material-ui/core/FormControlLabel" ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@material-ui/core/FormControlLabel");

/***/ }),

/***/ "@material-ui/core/FormHelperText":
/*!***************************************************!*\
  !*** external "@material-ui/core/FormHelperText" ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@material-ui/core/FormHelperText");

/***/ }),

/***/ "@material-ui/core/Grid":
/*!*****************************************!*\
  !*** external "@material-ui/core/Grid" ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@material-ui/core/Grid");

/***/ }),

/***/ "@material-ui/core/IconButton":
/*!***********************************************!*\
  !*** external "@material-ui/core/IconButton" ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@material-ui/core/IconButton");

/***/ }),

/***/ "@material-ui/core/Input":
/*!******************************************!*\
  !*** external "@material-ui/core/Input" ***!
  \******************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@material-ui/core/Input");

/***/ }),

/***/ "@material-ui/core/InputAdornment":
/*!***************************************************!*\
  !*** external "@material-ui/core/InputAdornment" ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@material-ui/core/InputAdornment");

/***/ }),

/***/ "@material-ui/core/InputBase":
/*!**********************************************!*\
  !*** external "@material-ui/core/InputBase" ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@material-ui/core/InputBase");

/***/ }),

/***/ "@material-ui/core/InputLabel":
/*!***********************************************!*\
  !*** external "@material-ui/core/InputLabel" ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@material-ui/core/InputLabel");

/***/ }),

/***/ "@material-ui/core/List":
/*!*****************************************!*\
  !*** external "@material-ui/core/List" ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@material-ui/core/List");

/***/ }),

/***/ "@material-ui/core/ListItemText":
/*!*************************************************!*\
  !*** external "@material-ui/core/ListItemText" ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@material-ui/core/ListItemText");

/***/ }),

/***/ "@material-ui/core/Menu":
/*!*****************************************!*\
  !*** external "@material-ui/core/Menu" ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@material-ui/core/Menu");

/***/ }),

/***/ "@material-ui/core/MenuItem":
/*!*********************************************!*\
  !*** external "@material-ui/core/MenuItem" ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@material-ui/core/MenuItem");

/***/ }),

/***/ "@material-ui/core/Paper":
/*!******************************************!*\
  !*** external "@material-ui/core/Paper" ***!
  \******************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@material-ui/core/Paper");

/***/ }),

/***/ "@material-ui/core/Select":
/*!*******************************************!*\
  !*** external "@material-ui/core/Select" ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@material-ui/core/Select");

/***/ }),

/***/ "@material-ui/core/Switch":
/*!*******************************************!*\
  !*** external "@material-ui/core/Switch" ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@material-ui/core/Switch");

/***/ }),

/***/ "@material-ui/core/Tab":
/*!****************************************!*\
  !*** external "@material-ui/core/Tab" ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@material-ui/core/Tab");

/***/ }),

/***/ "@material-ui/core/TableCell":
/*!**********************************************!*\
  !*** external "@material-ui/core/TableCell" ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@material-ui/core/TableCell");

/***/ }),

/***/ "@material-ui/core/Tabs":
/*!*****************************************!*\
  !*** external "@material-ui/core/Tabs" ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@material-ui/core/Tabs");

/***/ }),

/***/ "@material-ui/core/TextField":
/*!**********************************************!*\
  !*** external "@material-ui/core/TextField" ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@material-ui/core/TextField");

/***/ }),

/***/ "@material-ui/core/Typography":
/*!***********************************************!*\
  !*** external "@material-ui/core/Typography" ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@material-ui/core/Typography");

/***/ }),

/***/ "@material-ui/core/colors":
/*!*******************************************!*\
  !*** external "@material-ui/core/colors" ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@material-ui/core/colors");

/***/ }),

/***/ "@material-ui/core/styles":
/*!*******************************************!*\
  !*** external "@material-ui/core/styles" ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@material-ui/core/styles");

/***/ }),

/***/ "@material-ui/core/styles/colorManipulator":
/*!************************************************************!*\
  !*** external "@material-ui/core/styles/colorManipulator" ***!
  \************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@material-ui/core/styles/colorManipulator");

/***/ }),

/***/ "@material-ui/core/utils":
/*!******************************************!*\
  !*** external "@material-ui/core/utils" ***!
  \******************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@material-ui/core/utils");

/***/ }),

/***/ "@material-ui/icons/Add":
/*!*****************************************!*\
  !*** external "@material-ui/icons/Add" ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@material-ui/icons/Add");

/***/ }),

/***/ "@material-ui/icons/AddBox":
/*!********************************************!*\
  !*** external "@material-ui/icons/AddBox" ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@material-ui/icons/AddBox");

/***/ }),

/***/ "@material-ui/icons/ArrowDownward":
/*!***************************************************!*\
  !*** external "@material-ui/icons/ArrowDownward" ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@material-ui/icons/ArrowDownward");

/***/ }),

/***/ "@material-ui/icons/Chat":
/*!******************************************!*\
  !*** external "@material-ui/icons/Chat" ***!
  \******************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@material-ui/icons/Chat");

/***/ }),

/***/ "@material-ui/icons/Check":
/*!*******************************************!*\
  !*** external "@material-ui/icons/Check" ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@material-ui/icons/Check");

/***/ }),

/***/ "@material-ui/icons/ChevronLeft":
/*!*************************************************!*\
  !*** external "@material-ui/icons/ChevronLeft" ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@material-ui/icons/ChevronLeft");

/***/ }),

/***/ "@material-ui/icons/ChevronRight":
/*!**************************************************!*\
  !*** external "@material-ui/icons/ChevronRight" ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@material-ui/icons/ChevronRight");

/***/ }),

/***/ "@material-ui/icons/Clear":
/*!*******************************************!*\
  !*** external "@material-ui/icons/Clear" ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@material-ui/icons/Clear");

/***/ }),

/***/ "@material-ui/icons/Close":
/*!*******************************************!*\
  !*** external "@material-ui/icons/Close" ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@material-ui/icons/Close");

/***/ }),

/***/ "@material-ui/icons/DeleteOutline":
/*!***************************************************!*\
  !*** external "@material-ui/icons/DeleteOutline" ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@material-ui/icons/DeleteOutline");

/***/ }),

/***/ "@material-ui/icons/Edit":
/*!******************************************!*\
  !*** external "@material-ui/icons/Edit" ***!
  \******************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@material-ui/icons/Edit");

/***/ }),

/***/ "@material-ui/icons/ExpandMore":
/*!************************************************!*\
  !*** external "@material-ui/icons/ExpandMore" ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@material-ui/icons/ExpandMore");

/***/ }),

/***/ "@material-ui/icons/FilterList":
/*!************************************************!*\
  !*** external "@material-ui/icons/FilterList" ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@material-ui/icons/FilterList");

/***/ }),

/***/ "@material-ui/icons/FirstPage":
/*!***********************************************!*\
  !*** external "@material-ui/icons/FirstPage" ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@material-ui/icons/FirstPage");

/***/ }),

/***/ "@material-ui/icons/Label":
/*!*******************************************!*\
  !*** external "@material-ui/icons/Label" ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@material-ui/icons/Label");

/***/ }),

/***/ "@material-ui/icons/LastPage":
/*!**********************************************!*\
  !*** external "@material-ui/icons/LastPage" ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@material-ui/icons/LastPage");

/***/ }),

/***/ "@material-ui/icons/NavigateNext":
/*!**************************************************!*\
  !*** external "@material-ui/icons/NavigateNext" ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@material-ui/icons/NavigateNext");

/***/ }),

/***/ "@material-ui/icons/Remove":
/*!********************************************!*\
  !*** external "@material-ui/icons/Remove" ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@material-ui/icons/Remove");

/***/ }),

/***/ "@material-ui/icons/SaveAlt":
/*!*********************************************!*\
  !*** external "@material-ui/icons/SaveAlt" ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@material-ui/icons/SaveAlt");

/***/ }),

/***/ "@material-ui/icons/Schedule":
/*!**********************************************!*\
  !*** external "@material-ui/icons/Schedule" ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@material-ui/icons/Schedule");

/***/ }),

/***/ "@material-ui/icons/Search":
/*!********************************************!*\
  !*** external "@material-ui/icons/Search" ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@material-ui/icons/Search");

/***/ }),

/***/ "@material-ui/icons/Settings":
/*!**********************************************!*\
  !*** external "@material-ui/icons/Settings" ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@material-ui/icons/Settings");

/***/ }),

/***/ "@material-ui/icons/Today":
/*!*******************************************!*\
  !*** external "@material-ui/icons/Today" ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@material-ui/icons/Today");

/***/ }),

/***/ "@material-ui/icons/ViewColumn":
/*!************************************************!*\
  !*** external "@material-ui/icons/ViewColumn" ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@material-ui/icons/ViewColumn");

/***/ }),

/***/ "@material-ui/icons/ViewModule":
/*!************************************************!*\
  !*** external "@material-ui/icons/ViewModule" ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@material-ui/icons/ViewModule");

/***/ }),

/***/ "@material-ui/icons/Warning":
/*!*********************************************!*\
  !*** external "@material-ui/icons/Warning" ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@material-ui/icons/Warning");

/***/ }),

/***/ "@material-ui/lab/Alert":
/*!*****************************************!*\
  !*** external "@material-ui/lab/Alert" ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@material-ui/lab/Alert");

/***/ }),

/***/ "@material-ui/pickers":
/*!***************************************!*\
  !*** external "@material-ui/pickers" ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@material-ui/pickers");

/***/ }),

/***/ "@material-ui/styles":
/*!**************************************!*\
  !*** external "@material-ui/styles" ***!
  \**************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("@material-ui/styles");

/***/ }),

/***/ "clsx":
/*!***********************!*\
  !*** external "clsx" ***!
  \***********************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("clsx");

/***/ }),

/***/ "earcut":
/*!*************************!*\
  !*** external "earcut" ***!
  \*************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("earcut");

/***/ }),

/***/ "fontsource-open-sans":
/*!***************************************!*\
  !*** external "fontsource-open-sans" ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("fontsource-open-sans");

/***/ }),

/***/ "fontsource-roboto":
/*!************************************!*\
  !*** external "fontsource-roboto" ***!
  \************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("fontsource-roboto");

/***/ }),

/***/ "i18next":
/*!**************************!*\
  !*** external "i18next" ***!
  \**************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("i18next");

/***/ }),

/***/ "jwt-decode":
/*!*****************************!*\
  !*** external "jwt-decode" ***!
  \*****************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("jwt-decode");

/***/ }),

/***/ "lodash.isequal":
/*!*********************************!*\
  !*** external "lodash.isequal" ***!
  \*********************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("lodash.isequal");

/***/ }),

/***/ "lodash/capitalize":
/*!************************************!*\
  !*** external "lodash/capitalize" ***!
  \************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("lodash/capitalize");

/***/ }),

/***/ "lodash/cloneDeep":
/*!***********************************!*\
  !*** external "lodash/cloneDeep" ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("lodash/cloneDeep");

/***/ }),

/***/ "lodash/debounce":
/*!**********************************!*\
  !*** external "lodash/debounce" ***!
  \**********************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("lodash/debounce");

/***/ }),

/***/ "lodash/get":
/*!*****************************!*\
  !*** external "lodash/get" ***!
  \*****************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("lodash/get");

/***/ }),

/***/ "lodash/isEmpty":
/*!*********************************!*\
  !*** external "lodash/isEmpty" ***!
  \*********************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("lodash/isEmpty");

/***/ }),

/***/ "lodash/isEqual":
/*!*********************************!*\
  !*** external "lodash/isEqual" ***!
  \*********************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("lodash/isEqual");

/***/ }),

/***/ "lodash/set":
/*!*****************************!*\
  !*** external "lodash/set" ***!
  \*****************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("lodash/set");

/***/ }),

/***/ "lodash/uniqBy":
/*!********************************!*\
  !*** external "lodash/uniqBy" ***!
  \********************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("lodash/uniqBy");

/***/ }),

/***/ "material-icons/css/material-icons.css":
/*!********************************************************!*\
  !*** external "material-icons/css/material-icons.css" ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("material-icons/css/material-icons.css");

/***/ }),

/***/ "material-table":
/*!*********************************!*\
  !*** external "material-table" ***!
  \*********************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("material-table");

/***/ }),

/***/ "monet":
/*!************************!*\
  !*** external "monet" ***!
  \************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("monet");

/***/ }),

/***/ "mov-fe-lib-core":
/*!**********************************!*\
  !*** external "mov-fe-lib-core" ***!
  \**********************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("mov-fe-lib-core");

/***/ }),

/***/ "prop-types":
/*!*****************************!*\
  !*** external "prop-types" ***!
  \*****************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("prop-types");

/***/ }),

/***/ "react":
/*!************************!*\
  !*** external "react" ***!
  \************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("react");

/***/ }),

/***/ "react-dom":
/*!****************************!*\
  !*** external "react-dom" ***!
  \****************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("react-dom");

/***/ }),

/***/ "react-i18next":
/*!********************************!*\
  !*** external "react-i18next" ***!
  \********************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("react-i18next");

/***/ }),

/***/ "react-resize-detector":
/*!****************************************!*\
  !*** external "react-resize-detector" ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("react-resize-detector");

/***/ }),

/***/ "react-virtualized":
/*!************************************!*\
  !*** external "react-virtualized" ***!
  \************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("react-virtualized");

/***/ }),

/***/ "react-virtualized-tree":
/*!*****************************************!*\
  !*** external "react-virtualized-tree" ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("react-virtualized-tree");

/***/ }),

/***/ "react-virtualized-tree/lib/main.css":
/*!******************************************************!*\
  !*** external "react-virtualized-tree/lib/main.css" ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("react-virtualized-tree/lib/main.css");

/***/ }),

/***/ "react-virtualized/styles.css":
/*!***********************************************!*\
  !*** external "react-virtualized/styles.css" ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("react-virtualized/styles.css");

/***/ }),

/***/ "roslib":
/*!*************************!*\
  !*** external "roslib" ***!
  \*************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("roslib");

/***/ }),

/***/ "setimmediate":
/*!*******************************!*\
  !*** external "setimmediate" ***!
  \*******************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("setimmediate");

/***/ }),

/***/ "styled-components":
/*!************************************!*\
  !*** external "styled-components" ***!
  \************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = require("styled-components");

/***/ })

/******/ });
});
//# sourceMappingURL=index.js.map